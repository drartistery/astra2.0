!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=Error().stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="9f5d8bda-31f9-422f-abba-4763c20d22e8",e._sentryDebugIdIdentifier="sentry-dbid-9f5d8bda-31f9-422f-abba-4763c20d22e8")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"d5236f02"},(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2542,7345],{71:e=>{e.exports={root:"PlanProposal_root__dnDT8"}},750:(e,n,t)=>{"use strict";t.d(n,{n:()=>l});var r=t(12694),i=t(21462),o=t(54319),a=t(47630);function l(e){var n=(0,r._)((0,i.useState)(),2),t=n[0],l=n[1],s=(0,o.NC)(),c=e?s.sessions.get(e):s.sessions.agent.current;return(0,a.q3)(c,{next:function(e){void 0===t&&l(e)}}),{session:t,setSession:l}}},851:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(88263),a=t(71117);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{d:"M22.334 3.589 17.805 20.41h-1.482L20.853 3.59h1.482ZM12.285 12.15l.11-3.018-2.553 1.62-.658-1.153 2.69-1.4-2.69-1.4.658-1.152 2.553 1.619-.11-3.019h1.317l-.11 3.019 2.553-1.62.658 1.154-2.69 1.4 2.69 1.399-.658 1.152-2.553-1.619.11 3.019h-1.317ZM7.676 3.589 3.148 20.41H1.666L6.194 3.59h1.482Z"})}))}},1205:(e,n,t)=>{"use strict";t.d(n,{VW:()=>L,pR:()=>P,wQ:()=>T});var r=t(17844),i=t(93629),o=t(12694),a=t(88263),l=t(21462),s=t(12584),c=t(41114),u=t(86997),d=t(97782);function p(){var e=(0,s._)(["\n  query ReservedVMMachineConfigurations($replId: String) {\n    hostingMachineConfigurations(input: { provider: gce, replId: $replId }) {\n      __typename\n      ... on HostingMachineConfigurationsResults {\n        results {\n          ...MachineConfiguration\n        }\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return p=function(){return e},e}var f={},h=(0,c.J1)(p(),d.yH),m=t(64513),g=t(49153),v=t(28944),w=t(77306),y=t(94009),b=t(54790),S=t(50069),Y=t(45263),A=t(64583),x=t(29e3),C=t(48521),_=t(46603),k=t(77089),D=t(76126),E=t(10429),R=t(85233),I=t(37037),F=(0,A.x)({header:[C.wp.mb(16)],costWrapper:[C.wp.flex.shrink(1)],cost:[C.wp.align.baseline],selectWrapper:C.wp.rowWithGap(12),selectInner:[C.wp.flex.growAndShrink(1)],select:[C.wp.border({color:Y.LU.outlineDefault}),{flex:"1 1 auto"}]});function T(e){var n,t,i=e.replId,o=e.onError,a=(n={variables:{replId:i},onCompleted:function(e){"HostingMachineConfigurationsResults"!==e.hostingMachineConfigurations.__typename&&o("Something went wrong")},onError:function(e){return o(e.message)}},t=(0,r._)({},f,n),u.I(h,t)),l=a.data,s=a.loading;return{machineConfigurations:(null==l?void 0:l.hostingMachineConfigurations.__typename)==="HostingMachineConfigurationsResults"?l.hostingMachineConfigurations.results:null,loading:s}}function P(e){var n=e.machineConfigurations;return e.isTeamRepl?n.find(function(e){return"e2-micro"===e.slug}):n.find(function(e){return"e2-small"===e.slug})}var L=function(e){var n=e.replId,t=e.initialMachineConfiguration,s=e.isTeamRepl,c=e.onChange,u=e.onConfirm,d=e.onError,p=e.onBack,f=(0,o._)((0,l.useState)(t?(0,i._)((0,r._)({},t),{maxInstances:1}):void 0),2),h=f[0],Y=f[1],A=(0,(0,g._k)().getRvmDeploymentCostDetailsByConfigurationSlug)(null==h?void 0:h.configurationSlug),L=A.costPerHour,U=A.costPerMonth,N=(0,o._)((0,l.useState)(!1),2),O=N[0],M=N[1],B=T({replId:n,onError:d}),H=B.machineConfigurations,z=B.loading;(0,l.useEffect)(function(){(0,v.Ae)({context:w.P.AutoscaleMachineConfiguration})},[]),(0,l.useEffect)(function(){if(H&&!h){var e=P({machineConfigurations:H,isTeamRepl:s});if(!e)return void d("An error occurred trying to validate default machine configuration");var n={configurationId:e.id,configurationLabel:e.label,configurationSlug:e.slug,maxInstances:1};Y(n),"function"==typeof c&&c(n)}},[H,h,s,c,d]);var W=H&&(null==H?void 0:H.length)>0,G=z||s||O||!W;return(0,a.FD)(a.FK,{children:[(0,a.Y)(b.A,{maxWidth:!0,children:(0,a.Y)(S.fw,{onBack:p})}),(0,a.FD)(b.A,{maxWidth:!0,children:[(0,a.FD)(E.S,{css:F.header,gap:4,children:[(0,a.Y)(D.EY,{variant:"subheadBig",children:"Reserved VM configuration"}),(0,a.Y)(D.EY,{variant:"small",color:"dimmer",children:"Reserved VM apps are always on and can have a dedicated machine. You are billed for the total number of hours your machines have been running for. The cost per hour changes depending on your machine configuration."})]}),(0,a.Y)(y.K,{id:"machineConfiguration",title:"Machine Configuration",information:"Your machine configuration determines the number of vCPUs and memory available to your app. You can change it at any time.",children:h?(0,a.FD)(a.FK,{children:[(0,a.Y)(E.S,{css:F.selectWrapper,children:s?(0,a.Y)(k.pd,{value:h.configurationLabel,disabled:!0}):(0,a.FD)(a.FK,{children:[(0,a.Y)(E.S,{css:F.selectInner,children:(0,a.Y)(R.l,{css:F.select,initialSelectedItem:{id:h.configurationId,title:h.configurationLabel},items:W?Object.values(H).map(function(e){var n=e.id;return{title:e.label,id:n}}):[],onChange:function(e){var n=e.id,t=null==H?void 0:H.find(function(e){return e.id===n});if(!t)return void d("An error occurred trying to validate selected machine configuration");var r={configurationId:t.id,configurationLabel:t.label,configurationSlug:t.slug,maxInstances:1};Y(r),"function"==typeof c&&c(r)},disabled:G})}),(0,a.Y)(E.S,{css:F.costWrapper,row:!0,gap:2,align:"center",children:(0,a.FD)(E.S,{css:F.cost,row:!0,gap:4,children:[(0,a.FD)(D.EY,{variant:"subheadDefault",multiline:!1,children:["$",U]}),(0,a.Y)(D.EY,{color:"dimmer",variant:"small",multiline:!1,children:"per month"}),(0,a.FD)(D.EY,{color:"dimmer",variant:"small",multiline:!1,children:["($",L,"/hour)"]})]})})]})}),"function"==typeof u?(0,a.FD)(E.S,{gap:8,pt:8,children:[(0,a.Y)(_.$n,{colorway:"primary",text:"Approve and update",iconRight:(0,a.Y)(I.A,{}),onClick:function(){if(!h)return void d("An error occurred trying to validate selected machine configuration");M(!0),u(h)},loading:z,disabled:G}),(0,a.FD)(D.EY,{color:"dimmest",children:["Your deployed app will incur charges for any resource usage."," ",(0,a.Y)("a",{href:m.ik.ABOUT_USAGE_BASED_BILLING,target:"_blank",rel:"noopener",children:"Learn more"})]})]}):null]}):(0,a.Y)(E.S,{css:[x.S.foregroundPulse(),C.wp.borderRadius(8)],children:(0,a.Y)(k.pd,{disabled:!0})})})]})]})}},1926:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(88263),a=t(71117);function l(e){return(0,o.FD)(a.Ay,(0,i._)((0,r._)({},e),{children:[(0,o.Y)("path",{fillRule:"evenodd",d:"M5 3.75A1.25 1.25 0 0 0 3.75 5v14.19l2.72-2.72a.75.75 0 0 1 .53-.22h12A1.27 1.27 0 0 0 20.25 15v-4a.75.75 0 0 1 1.5 0v4A2.77 2.77 0 0 1 19 17.75H7.31l-3.78 3.78A.75.75 0 0 1 2.25 21V5A2.75 2.75 0 0 1 5 2.25h8a.75.75 0 0 1 0 1.5H5Z",clipRule:"evenodd"}),(0,o.Y)("path",{fillRule:"evenodd",d:"M18.438 1.8c-.147-.4-.73-.4-.875 0l-1.005 2.744a.458.458 0 0 1-.298.278l-2.436.746a.446.446 0 0 0 0 .857l2.437.752a.458.458 0 0 1 .297.279l1.005 2.745c.146.399.728.399.875 0l1.004-2.745a.458.458 0 0 1 .297-.278l2.437-.75a.446.446 0 0 0 0-.857l-2.437-.749a.458.458 0 0 1-.297-.278L18.437 1.8Z",clipRule:"evenodd"})]}))}},2015:(e,n,t)=>{"use strict";t.d(n,{A:()=>f});var r=t(17844),i=t(93629),o=t(88263),a=t(45263),l=t(64583),s=t(48521),c=t(13340),u=t(59172),d=t(10429),p=(0,l.x)({default:[],withOnClick:[s.wp.cursor.pointer,{transition:"all 0.2s ease","&:hover":{filter:"brightness(95%)",boxShadow:a.LU.shadow1}}]});function f(e){var n=e.user,t=e.onClick,a=e.size,l=void 0===a?24:a;return(0,o.Y)(u.m_,{placement:"bottom",tooltip:t?"Observe ".concat(n.username):n.username,children:function(e,a){return(0,o.Y)(d.S,(0,i._)((0,r._)({},e),{innerRef:a,onClick:t,children:(0,o.Y)(c.e,{size:l,src:n.image||null,username:n.username,ringColor:n.color,css:t?p.withOnClick:p.default})}))}})}},2050:(e,n,t)=>{"use strict";t.d(n,{ES:()=>c,Xh:()=>u,cR:()=>s,oL:()=>d});var r=t(12694),i=t(88263),o=t(21462),a=t(47993),l=(0,o.createContext)({left:null,right:null,setLeft:function(){},setRight:function(){}});function s(e){var n=e.children,t=e.side,r=(0,o.useContext)(l);if(!r)return null;var i=r[t];return i?a.createPortal(n,i):null}function c(){var e=(0,o.useContext)(l);return(0,o.useCallback)(function(n){e.backButtonOverrideRef&&(e.backButtonOverrideRef.current=n)},[e])}function u(e){var n,t,a,s,c,u,d,p=e.children,f=(t=(n=(0,r._)((0,o.useState)(null),2))[0],a=n[1],c=(s=(0,r._)((0,o.useState)(null),2))[0],u=s[1],d=(0,o.useRef)(null),(0,o.useMemo)(function(){return{left:t,right:c,setLeft:a,setRight:u,backButtonOverrideRef:d}},[t,c]));return(0,i.Y)(l.Provider,{value:f,children:p})}function d(){return(0,o.useContext)(l)}},2130:(e,n,t)=>{"use strict";t.d(n,{A:()=>a});var r=t(21462),i=t(96116),o=t.n(i);function a(e){return(0,r.useMemo)(function(){if(!e||e.length>40)return"Unknown License";var n=o()(e,{upgrade:!1});return n||"Unknown License"},[e])}},2200:(e,n,t)=>{"use strict";t.d(n,{I:()=>v,y:()=>w});var r=t(12694),i=t(21462),o=t(1230),a=t(54319),l=t(47630),s=t(69665),c=t(16564),u=t(93369),d=t(37427),p=t(7613),f=t(58370),h=t(3752),m=t(14893),g=t(51193),v=function(e){return e.NOT_RUNNING="NOT_RUNNING",e.STARTING="STARTING",e.RUNNING="RUNNING",e.FAILED="FAILED",e.CRASHED="CRASHED",e}({});function w(e){var n,t,v,w,y,b,S,Y,A,x,C,_,k,D,E,R=e.refresh,I=(0,r._)((0,i.useState)(!0),2),F=I[0],T=I[1],P=(0,r._)((0,i.useState)(!1),2),L=P[0],U=P[1],N=(0,r._)((0,i.useState)(!1),2),O=N[0],M=N[1],B=(0,i.useRef)(F),H=(0,u.A)(R),z=(0,m.g3)(),W=(0,m.If)(),G=(0,m.OK)(),V=(0,a.NC)(),j=(0,l.J2)(V.sessions.agent.current,null),Z=(0,l.J2)(null==j?void 0:j.agent.state,null),q=null==Z?void 0:Z.state,K=(0,g.w)(),$=(0,l.Rj)(function(){return null==K?void 0:K.scan(function(e,n){var t,r;return(null==(t=n.toPresent)?void 0:t.toolData.$kind)==="presentResultsToolData"?null==(r=n.toPresent)?void 0:r.toolData.data:e},void 0)},[K]),J=(0,h._Q)(),Q=(0,i.useCallback)(function(e){var n;null==(n=H.current)||n.call(H),(null==e?void 0:e.$kind)==="presentDeployData"&&M(!0)},[H]);(0,g.E)(Q),(0,a.zv)("received-event",function(e){var n=e.event;if(n.sessionId===(null==j?void 0:j.id)&&q===o.g32.AGENT_STATE_RUNNING&&!L){var t=(0,p.b)(n);t&&t.$kind&&"deployData"!==t.$kind&&"presentResultsToolData"!==t.$kind&&"readFileData"!==t.$kind&&U(!0)}}),(0,i.useEffect)(function(){q!==o.g32.AGENT_STATE_RUNNING&&U(!1)},[q]);var X=(t=(n={workflowsConfig:G,workflowsRunState:W,agentStartedWork:L}).workflowsConfig,v=n.workflowsRunState,w=n.agentStartedWork,y=(0,i.useRef)(void 0),b=(0,i.useMemo)(function(){if(!t||!v)return"NOT_RUNNING";var e,n=(e=Object.values(v).filter(function(e){return e.workflow.name===t.runButton}).sort(function(e,n){return e.startTime-n.startTime}))[e.length-1];if(!n)return"NOT_RUNNING";var r=n.step;switch(r){case s.zY.RUNNING:return"RUNNING";case s.zY.NOT_STARTED:case s.zY.FINISHED:return"NOT_RUNNING";case s.zY.FAILED:if(!y.current)return"FAILED";if("RUNNING"===y.current||"CRASHED"===y.current)return"CRASHED";if(w)return"NOT_RUNNING";return"FAILED";default:(0,c.A)(r)}},[t,v,y,w]),(0,i.useEffect)(function(){y.current=b},[b]),b),ee=(Y=(S={workflowsConfig:G,workflowsRunState:W,agentStartedWork:L}).workflowsConfig,A=S.workflowsRunState,x=S.agentStartedWork,C=(0,i.useRef)(void 0),_=(0,i.useRef)(void 0),D=(k=(0,r._)((0,i.useMemo)(function(){if(!Y||!A)return["NOT_RUNNING",void 0];var e=Object.values(A).filter(function(e){return e.step===s.zY.RUNNING&&e.tasks.some(function(e){var n;return!!e.metadata&&"shell.exec"===e.metadata.task&&(null==(n=e.metadata.openPorts)?void 0:n.some(function(e){return e.forwarded}))})});if(e.length>0)return["RUNNING",e[0].runId];if(void 0!==_.current){var n=A[_.current];if(!n)return["NOT_RUNNING",void 0];var t=n.step;switch(t){case s.zY.FINISHED:case s.zY.NOT_STARTED:break;case s.zY.RUNNING:return["RUNNING",n.runId];case s.zY.FAILED:if("RUNNING"===C.current)return["CRASHED",n.runId];if("CRASHED"===C.current){if(x)return["STARTING",void 0];return["CRASHED",n.runId]}return["FAILED",n.runId];default:(0,c.A)(t)}}return["NOT_RUNNING",void 0]},[Y,A,x]),2))[0],E=k[1],(0,i.useEffect)(function(){C.current=D,_.current=E},[D,E]),D),en=(0,i.useMemo)(function(){return F?ee:X},[F,ee,X]);return(0,i.useEffect)(function(){if(z&&z.stop&&z.run){var e=B.current;B.current=F,e!==F&&(F?"RUNNING"===en&&z.stop():"RUNNING"===ee&&(z.stop(),z.run&&z.run(d.QG.AGENT_RUN)))}},[F,z,en,G,ee]),(0,i.useEffect)(function(){q===o.g32.AGENT_STATE_RUNNING&&M(!1)},[q]),(0,i.useEffect)(function(){q!==o.g32.AGENT_STATE_RUNNING&&J&&(0,f.N5)(J)?(T(!1),M(!1)):q===o.g32.AGENT_STATE_RUNNING&&T(!0)},[q,J]),{isAgentControllingRunWorkflow:F,presentResultsEvent:$,readyToDeploy:O,runState:q,workflowState:en}}},2296:(e,n,t)=>{"use strict";t.d(n,{A:()=>c});var r=t(46434),i=t(29935),o=t(12694),a=t(82643),l=t(21462),s=t(74093);function c(){var e,n=(0,o._)((0,l.useState)(null),2),t=n[0],c=n[1];return(0,s.b)((e=(0,i._)(function(e){var n,t,i,o,l,s,u,d;return(0,a.YH)(this,function(a){switch(a.label){case 0:n=e.environment.nixState.subscribe({}).resReadable,t=!1,i=!1,a.label=1;case 1:a.trys.push([1,6,7,12]),l=(0,r._)(n),a.label=2;case 2:return[4,l.next()];case 3:if(!(t=!(s=a.sent()).done))return[3,5];(u=s.value).ok&&c(u.payload),a.label=4;case 4:return t=!1,[3,2];case 5:return[3,12];case 6:return d=a.sent(),i=!0,o=d,[3,12];case 7:if(a.trys.push([7,,10,11]),!(t&&null!=l.return))return[3,9];return[4,l.return()];case 8:a.sent(),a.label=9;case 9:return[3,11];case 10:if(i)throw o;return[7];case 11:return[7];case 12:return[2]}})}),function(n){return e.apply(this,arguments)}),[]),t}},2415:(e,n,t)=>{"use strict";t.d(n,{O:()=>X,A:()=>er});var r=t(12694),i=t(88263),o=t(29542),a=t.n(o),l=t(21462),s=t(1230),c=t(54319),u=t(64513),d=t(57756),p=t(53231),f=t(6598),h=t(86105),m=t(35992),g=t(48686),v=t(45005),w=t(55825),y=t(94779),b=t(26055),S=t(14893),Y=t(45263),A=t(64583),x=t(48521),C=t(46603),_=t(11337),k=t(77089),D=t(36112),E=t(76126),R=t(59172),I=t(10429),F=t(13911),T=t(86814),P=t(90777),L=(0,A.x)({wrapper:[x.wp.borderRadius(4),x.wp.border({color:Y.LU.backgroundHigher})],root:[x.wp.colWithGap(8),x.wp.maxHeight(520),x.wp.overflow("hidden")],inputs:[x.wp.mb(4),x.wp.p(8)],nameWarning:[{color:Y.LU.redDefault}],taskItem:[x.wp.position.relative],buttons:[x.wp.flex.growAndShrink(1),x.wp.justify.end,x.wp.p(8),x.wp.border({direction:"top",color:Y.LU.backgroundHigher})],nameInput:[x.wp.my(4)]});function U(e){var n=(0,r._)((0,l.useState)(""),2),t=n[0],o=n[1],a=(0,r._)((0,l.useState)([{id:(0,g.Ak)(),config:null}]),2),s=a[0],c=a[1],u=(0,r._)((0,l.useState)("sequential"),2),d=u[0],f=u[1],Y=(0,S.XO)(),A=(0,l.useMemo)(function(){return!Y.includes(t)},[t,Y]),x=(0,l.useMemo)(function(){if(!t)return(0,v._)("Missing name");if(!A)return(0,v._)("".concat(t," already exists"));if(0===s.length)return(0,v._)("Missing tasks");var n=[],r=!0,i=!1,o=void 0;try{for(var a,l=s[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;if(null===c.config)return(0,v._)("Invalid task");n.push(c.config)}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return(0,v.Ok)({name:t,mode:d,author:e.userId,tasks:n})},[t,d,s,A,e.userId]);function U(e,n){if(s&&e!==n){var t=(0,h._)(s),i=(0,r._)(t.splice(e,1),1)[0];t.splice(n,0,i),c(t)}}return(0,i.Y)(D.ui,{css:L.wrapper,children:(0,i.FD)(_.lV,{css:L.root,onSubmit:function(n){(0,p.u4)(p.AZ.WORKFLOW_CREATED,{pane:"workflows",shellExecCount:s.reduce(function(e,n){var t;return(null==(t=n.config)?void 0:t.task)==="shell.exec"?e+1:e},0),packagerCount:s.reduce(function(e,n){var t,r;return(null==(t=n.config)?void 0:t.task)==="packager.installForAll"||(null==(r=n.config)?void 0:r.task)==="packager.installForLanguage"?e+1:e},0),mode:d,userId:e.userId}),n.preventDefault(),x.ok&&e.onCreate(x.value)},children:[(0,i.FD)(I.S,{css:L.inputs,gap:8,children:[(0,i.FD)(I.S,{gap:2,children:[(0,i.Y)(E.EY,{variant:"small",color:"dimmest",children:"Workflow"}),A?null:(0,i.Y)(E.EY,{variant:"small",css:L.nameWarning,children:"Duplicate workflow name"}),(0,i.Y)(k.pd,{css:L.nameInput,required:!0,placeholder:"Name",value:t,onChange:function(e){return o(e.currentTarget.value)}})]}),(0,i.FD)(I.S,{gap:2,children:[(0,i.Y)(E.EY,{variant:"small",color:"dimmest",children:"Mode"}),(0,i.Y)(b.n3,{mode:d,disabled:!1,onChange:f})]}),(0,i.FD)(I.S,{gap:2,children:[(0,i.Y)(E.EY,{variant:"small",color:"dimmest",children:"Tasks"}),s.length?(0,i.Y)(w.i,{mode:d}):null,(0,i.FD)(I.S,{pl:12,gap:8,children:[(0,i.Y)(F.A,{children:s.map(function(e,n){var t;return(0,i.FD)(I.S,{css:L.taskItem,children:[(0,i.Y)(y.S2,{taskIndex:n,disabled:!1,format:!1,onReorder:U,onChange:function(e){c(function(t){return(0,m.jM)(t,function(t){t[n].config=e})})},onRemove:function(){c(function(e){return(0,m.jM)(e,function(e){e.splice(n,1)})})},initialConfig:null!=(t=s[n].config)?t:void 0}),(0,i.Y)(w.L,{mode:d,hideBottom:n>=s.length-1})]},e.id)})}),(0,i.Y)(C.$n,{text:"Add task",type:"button",onClick:function(){c(function(e){return(0,m.jM)(e,function(e){e.push({id:(0,g.Ak)(),config:null})})})},iconLeft:(0,i.Y)(T.A,{})})]})]})]}),(0,i.FD)(I.S,{css:L.buttons,row:!0,gap:12,children:[(0,i.Y)(C.$n,{text:"Cancel",onClick:e.onCancel}),(0,i.Y)(R.m_,{tooltip:x.ok?"Save Workflow":x.error,children:(0,i.Y)(C.$n,{iconLeft:(0,i.Y)(P.A,{}),colorway:"primary",disabled:!x.ok,text:"Save",type:"submit"})})]})]})})}var N=t(48314),O=t(14886),M=t(69938),B=t(38292),H=t(49150),z=t(65190),W=t(81526),G=t(54087),V=t(87885),j=t(80762),Z=t(77964),q=t(18942),K=t(29064),$=t(69258);function J(e){var n=(0,S.cQ)(),t=(0,f.I)(function(t){return function(){(0,p.u4)(p.AZ.WORKFLOW_RAN,{source:"workflowsPane"});var r,i=null==(r=n())?void 0:r[e];return!!i&&t.workflows.runWorkflow.rpc({workflowId:i.name})}},[n,e]),r=(0,S.Jl)(e),i=(0,f.I)(function(e){return function(){(0,p.u4)(p.AZ.WORKFLOW_STOPPED,{source:"workflowsPane"});var n,t=null==(n=r())?void 0:n.runId;return!!t&&e.workflows.stopRun.rpc({runId:t})}},[r]),o=(0,S.ch)(e);return(0,l.useMemo)(function(){return t&&i?{run:t,stop:i,isRunningObservable:o}:null},[t,i,o])}function Q(e){var n=e.index,t=(0,S.j3)(n),r=J(n),o=(0,d.A)(null==r?void 0:r.isRunningObservable);return t&&r?(0,i.Y)(I.S,{row:!0,gap:8,children:(0,i.Y)(C.$n,{size:"small",iconLeft:o?(0,i.Y)(q.A,{}):(0,i.Y)(Z.A,{}),text:t.name,onClick:function(){o?r.stop():r.run()}})}):null}function X(){var e=(0,S.hk)();return(0,i.Y)(I.S,{gap:8,children:e.map(function(e){return(0,i.Y)(Q,{index:e},e)})})}var ee=(0,A.x)({header:[x.wp.flex.growAndShrink(1)],wrapper:[x.wp.borderRadius(4),x.wp.backgroundColor.backgroundHigher],workflowName:[x.wp.flex.growAndShrink(1),x.wp.rowWithGap(8)],expandedContent:[x.wp.border({direction:"top"})]});function en(e){var n,t=e.index,o=e.readOnly,a=(0,S.j3)(t),s=(0,S.nd)(t),c=J(t),u=(0,d.A)(null==c?void 0:c.isRunningObservable),p=(0,r._)((0,l.useState)(!1),2),f=p[0],h=p[1],m=(0,S.oE)(),g=(0,S.jP)(),v=(0,l.useMemo)(function(){return(null==a?void 0:a.name)===g},[a,g]);return a?(0,i.FD)(D.ui,{children:[(0,i.Y)(O.A,{css:ee.wrapper,headerContent:(0,i.FD)(I.S,{css:ee.header,row:!0,gap:4,children:[c?(0,i.Y)(B.K0,{alt:u?"Stop workflow":"Run workflow",onClick:function(){u?c.stop():c.run()},children:u?(0,i.Y)(q.A,{}):(0,i.Y)(Z.A,{})}):null,(0,i.Y)(I.S,{css:ee.workflowName,align:"center",justify:"start",row:!0,children:(0,i.Y)(E.EY,{multiline:!1,children:a.name})}),(0,i.FD)(I.S,{row:!0,gap:4,align:"center",children:[s?(0,i.Y)(R.m_,{tooltip:s,children:(0,i.Y)($.A,{color:Y.LU.accentNegativeDefault})}):null,v?(0,i.Y)(R.m_,{tooltip:"Assigned to run button",maxWidth:150,children:(0,i.Y)(z.K,{text:"Run Button",colorway:"positive"})}):null,"agent"===a.author||(null==(n=a.metadata)?void 0:n.generated)?(0,i.Y)(R.m_,{tooltip:"Generated by ".concat(a.author),maxWidth:150,children:(0,i.Y)(z.K,{text:"Generated",colorway:"purple"})}):(0,i.Y)(B.K0,{alt:"Delete",onClick:function(){h(!0)},children:(0,i.Y)(K.A,{})})]})]}),children:(0,i.Y)(I.S,{css:ee.expandedContent,children:(0,i.Y)(b.Wu,{index:t,readOnly:o})})}),(0,i.Y)(H.a,{isOpen:f,onRequestClose:function(){return h(!1)},children:(0,i.Y)(V.A,{name:"Workflow",description:a.name,confirmDescription:"workflow",hideModal:function(){return h(!1)},delete:function(){return m(t)}})})]}):null}var et=(0,A.x)({generatedList:[{opacity:.7}],loading:[x.wp.center,x.wp.p(16)],error:[x.wp.center,x.wp.p(16)],searchBarWrapper:[x.wp.flex.growAndShrink(1)],divider:[x.wp.height(2),x.wp.backgroundColor.accentPrimaryDimmest]});function er(e){(0,S.gR)(e.isActive);var n=(0,r._)((0,l.useState)(""),2),t=n[0],o=n[1],d=(0,r._)((0,l.useState)(!1),2),f=d[0],h=d[1],m=(0,c.jt)(),g=(0,c.hT)(),v=(0,r._)((0,l.useState)(!1),2),w=v[0],y=v[1],b=(0,S.hk)(),Y=(0,S.mP)(),A=(0,S.XO)(),x=(0,S.Eo)(),_=(0,S.oh)(),k=(0,S.wb)(),D=(0,N.i)(),F=!!k||m&&(g===s.g32.AGENT_STATE_RUNNING||g===s.g32.AGENT_STATE_PAUSING),P=(0,l.useMemo)(function(){return b.reduce(function(e,n){return A[n].toLowerCase().includes(t.toLowerCase())&&e.push(n),e},[]).sort(function(e,n){var t,r,i,o,a=null!=(i=(null==(t=Y[e].metadata)?void 0:t.generated)||"agent"===Y[e].author)&&i,l=null!=(o=(null==(r=Y[n].metadata)?void 0:r.generated)||"agent"===Y[n].author)&&o;return a&&!l?1:!a&&l?-1:0})},[t,b,A,Y]),L=(0,l.useMemo)(function(){return P.filter(function(e){var n=Y[e];return!(n.metadata&&n.metadata.generated)&&"agent"!==n.author})},[P,Y]),B=(0,l.useMemo)(function(){return P.filter(function(e){return"agent"===Y[e].author})},[P,Y]),H=(0,l.useRef)(),z=function(){clearTimeout(H.current),H.current=setTimeout(function(){(0,p.u4)(p.AZ.WORKFLOWS_SEARCHED)},1e3)};return _?(0,i.Y)(I.S,{css:et.loading,children:(0,i.Y)(j.A,{})}):(0,i.FD)(I.S,{p:8,gap:8,children:[(0,i.FD)(I.S,{row:!0,gap:8,children:[(0,i.Y)(I.S,{css:et.searchBarWrapper,children:(0,i.Y)(W.I,{placeholder:"Search for a workflow...",value:t,onChange:function(e){z(),o(e.target.value)},onClear:function(){return o("")}})}),(0,i.Y)(C.$n,{isDisabled:F,colorway:"primary",iconLeft:(0,i.Y)(T.A,{}),text:"New Workflow",disabled:f,onClick:function(){h(!0)}})]}),(0,i.Y)(M.a,{}),f?(0,i.FD)(i.FK,{children:[(0,i.Y)(U,{onCreate:function(e){x(e),h(!1)},onCancel:function(){h(!1)},userId:null==D?void 0:D.id}),(0,i.Y)(M.a,{css:et.divider})]}):null,k?(0,i.Y)(I.S,{css:et.error,children:(0,i.Y)(R.m_,{tooltip:k.extras,children:(0,i.Y)(G.N,{icon:(0,i.Y)($.A,{}),colorway:"red",text:k.message})})}):null,(0,i.FD)(I.S,{gap:8,children:[L.length||k?null:(0,i.Y)(I.S,{align:"center",children:(0,i.Y)(E.EY,{children:(0,i.Y)(a(),{target:"_blank",href:u.ik.WORKFLOWS,children:"Learn more about configuring Workflows"})})}),L.length?L.map(function(e){return(0,i.Y)(en,{readOnly:F,index:e},e)}):null,B.length?(0,i.Y)(I.S,{children:(0,i.Y)(O.A,{headerContent:"Agent Workflows",expanded:w,onClick:function(){return y(!w)},children:(0,i.Y)(I.S,{css:et.generatedList,py:8,gap:8,children:B.map(function(e){return(0,i.Y)(en,{index:e,readOnly:F},e)})})})}):null]})]})}},2529:(e,n,t)=>{"use strict";t.d(n,{V:()=>i});var r=t(79730),i=r.ZU.Object({type:r.ZU.Literal("agentChat"),data:r.ZU.Optional(r.ZU.Object({sessionId:r.ZU.Optional(r.ZU.String())}))})},2560:(e,n,t)=>{"use strict";t.d(n,{P:()=>C});var r=t(29935),i=t(82643),o=t(88263),a=t(21462),l=t(80478),s=t(54319),c=t(42377),u=t(5504),d=t(31569),p=t(92985),f=t(50025),h=t(60632),m=t(24365),g=t(45263),v=t(96592),w=t(75308),y=t(55545),b=t(37822),S=t(81395),Y=t(82842),A=t(34640),x=t(86278);function C(e){var n,t,C,_,k,D,E,R,I,F,T,P,L=e.xterm,U=e.openAIWithMessage,N=e.openShellSearch,O=e.openSearchAndReplace,M=e.openGeneratePrompt,B=e.isOutputsTerminal,H=(t=(n={xterm:L,openAIWithMessage:U,openGeneratePrompt:M}).xterm,C=n.openAIWithMessage,_=n.openGeneratePrompt,k=(0,u._P)({controlName:"flag-killswitch-ghostwriter-chat",logFlagToAnalytics:!1}),D=(0,h.Jn)(f.Ws.id),(0,a.useMemo)(function(){if(!k){var e=[];if(_&&e.push({match:p.G2,data:{type:"action",label:"Generate command",icon:(0,o.Y)(S.A,{color:g.LU.tealStronger}),keyboardShortcut:D,run:function(){_()}}}),C&&e.push({match:p.G2,data:{type:"action",label:"Ask ".concat(s.BP),icon:(0,o.Y)(v.A,{color:g.LU.tealStronger}),run:function(){var e,n=null!=(e=null==t?void 0:t._term.getSelection())?e:"";C((0,c.yt)(n))}}}),0!==e.length)return{data:{type:"context",label:"AI",icon:(0,o.Y)(b.A,{})},commands:function(){return e}}}},[k,C,D,_,null==t?void 0:t._term])),z=(R=(E={xterm:L,openShellSearch:N,openSearchAndReplace:O,isOutputsTerminal:void 0!==B&&B}).xterm,I=E.openShellSearch,F=E.openSearchAndReplace,T=E.isOutputsTerminal,(0,a.useMemo)(function(){var e=[];if(I){var n=T?(0,o.Y)(x.A,{}):(0,o.Y)(A.A,{});e.push({match:p.G2,data:{type:"action",label:T?"Find in Console":"Find in Shell",icon:n,run:function(){var e;I(null!=(e=null==R?void 0:R._term.getSelection())?e:"")}}})}if(F&&e.push({match:p.G2,data:{type:"action",label:"Find in Repl",icon:(0,o.Y)(Y.A,{}),run:function(){var e;F(null!=(e=null==R?void 0:R._term.getSelection())?e:"")}}}),0!==e.length)return{data:{type:"context",label:"Search",icon:(0,o.Y)(Y.A,{})},commands:function(){return e}}},[R,I,F,T])),W=(P=function(){return window.navigator.userAgent.includes("Linux")},(0,a.useMemo)(function(){return{data:{type:"context",label:"Clipboard",icon:(0,o.Y)(w.A,{})},commands:function(){return[{match:p.G2,data:{type:"action",label:"Copy",icon:(0,o.Y)(y.A,{}),keyboardShortcut:(0,m.FM)({cmdOrCtrl:!0,shift:P(),key:"c"}),run:function(){var e,n=null!=(e=null==L?void 0:L._term.getSelection())?e:"";(0,d.default)(n)}}},{match:p.G2,data:{type:"action",label:"Paste",icon:(0,o.Y)(w.A,{}),keyboardShortcut:(0,m.FM)({cmdOrCtrl:!0,shift:P(),key:"v"}),run:function(){return(0,r._)(function(){var e,n;return(0,i.YH)(this,function(t){switch(t.label){case 0:e="",t.label=1;case 1:return t.trys.push([1,3,,4]),[4,window.navigator.clipboard.readText()];case 2:return e=t.sent(),[3,4];case 3:return n=t.sent(),l.vF.error("Shell context menu paste failed",{message:n.message}),[2];case 4:return null==L||L._term.paste(e),[2]}})})()}}}]}}},[L]));return(0,a.useMemo)(function(){var e=[];return H&&e.push(H),z&&e.push(z),W&&e.push(W),{data:{type:"context",label:"Search actions",icon:(0,o.Y)(Y.A,{})},commands:function(){return e}}},[H,z,W])}},2703:e=>{e.exports={divider:"Checkpoints_divider__1gTAw"}},2753:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(88263),a=t(71117);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M4.055 2.055A2.75 2.75 0 0 1 6 1.25h8a.75.75 0 0 1 .53.22l6 6c.141.14.22.331.22.53v12A2.75 2.75 0 0 1 18 22.75H6A2.75 2.75 0 0 1 3.25 20V4c0-.73.29-1.429.805-1.945ZM6 2.75A1.25 1.25 0 0 0 4.75 4v16A1.25 1.25 0 0 0 6 21.25h12A1.25 1.25 0 0 0 19.25 20V8.75H14a.75.75 0 0 1-.75-.75V2.75H6Zm8.75 1.06 3.44 3.44h-3.44V3.81ZM12 11.25a.75.75 0 0 1 .75.75v2.25H15a.75.75 0 0 1 0 1.5h-2.25V18a.75.75 0 0 1-1.5 0v-2.25H9a.75.75 0 0 1 0-1.5h2.25V12a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"})}))}},2758:(e,n,t)=>{"use strict";t.d(n,{A:()=>s});var r=t(86105),i=t(88263),o=t(43696),a=t.n(o),l=t(3752);function s(e){var n,t=e.repl,o=function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return(0,r._)(n.filter(Boolean)).concat(["Replit"]).join(" - ")}((0,l.mU)(),null==t||null==(n=t.project)?void 0:n.title,t.title);return(0,i.Y)(a(),{children:(0,i.Y)("title",{children:o},"title")})}},3200:(e,n,t)=>{"use strict";t.d(n,{D:()=>ea});var r=t(29935),i=t(12694),o=t(86105),a=t(82643),l=t(71115),s=t(21462),c=t(90629),u=t(17844),d=t(12584),p=t(41114),f=t(86997),h=t(50175);function m(){var e=(0,d._)(["\n  query WorkspaceDoGitHubImportFlow($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        config {\n          gitRemoteUrl\n          doClone\n        }\n        slug\n        authorizations {\n          editFileContents {\n            isAuthorized\n          }\n        }\n      }\n    }\n    currentUser {\n      id\n      gitHubInfo {\n        accessToken\n      }\n      username\n    }\n  }\n"]);return m=function(){return e},e}function g(){var e=(0,d._)(["\n  mutation WorkspaceDoGitHubImportFlowFinishClone($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        config {\n          doClone\n        }\n      }\n    }\n  }\n"]);return g=function(){return e},e}function v(){var e=(0,d._)(["\n  query GitHubImportRootOriginReplUrl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        rootOriginReplUrl\n      }\n    }\n  }\n"]);return v=function(){return e},e}function w(){var e=(0,d._)(["\n  query GitHubImportGetTopLanguages($input: GitHubRepoInfoInput!) {\n    githubRepoInfo(input: $input) {\n      ... on GitHubRepoInfoOutput {\n        topLanguages\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on ServiceUnavailable {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n"]);return w=function(){return e},e}var y={},b=(0,p.J1)(m()),S=(0,p.J1)(g()),Y=(v(),(0,p.J1)(w())),A=t(80155),x=t(83150),C=t(51094),_=t(52340),k=t(7512),D=t(94077),E=t(34384),R=t(36640),I=t(31062),F=t(34626),T=t(25804),P=t(53231),L=t(93369),U=t(74033),N=t(37427),O=t(82733),M=t(34834),B=t(21708),H=t.n(B),z=t(96820),W=t(7990),G=t.n(W),V={14:"nodejs-14",16:"nodejs-16",18:"nodejs-18",19:"nodejs-19",20:"nodejs-20"},j={bash:"bash",basic:"qbasic",nix:"nix",clojure:"clojure-1.11","c++":"cpp-clang14",c:"c-clang14","c#":"dotnet-7.0",dart:"dart-3.3",deno:"deno-1",elixir:"elixir-1_15","f#":"dotnet-7.0",go:"go-1.21",haskell:"haskell-ghc9.4",html:"web",css:"web",shell:"bash",java:"java-graalvm22.3",lua:"lua-5.2",nodejs:"nodejs-20",php:"php-8.2",python:{"3.8":"python-3.8","3.10":"python-3.10","3.11":"python-3.11","3.12":"python-3.12"},r:"r-4.3",rust:"rust-stable",ruby:"ruby-3.2",swift:"swift-5.8",typescript:V,javascript:V,vue:{18:"vue-node-18",20:"vue-node-20"}};function Z(e,n){if(void 0===e)return!1;if(void 0===n)return!0;var t=H()(e);if(null===t)return!1;var r=H()(n);return null===r||G()(t,r)}var q=t(22531),K=t(51026);function $(){var e=(0,d._)(["\n  query WorkspacePatchDotReplitRepl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        rootOriginReplUrl\n      }\n    }\n  }\n"]);return $=function(){return e},e}var J={},Q=(0,p.J1)($()),X=function(e,n){return{op:"add",path:e,value:JSON.stringify(n)}},ee=new Map([["hintsList","hints"]]);function en(){return(en=(0,r._)(function(e){var n,t,o,l,s,c,d,p,f,h,m,g,v,w,y;function b(){return S.apply(this,arguments)}function S(){return(S=(0,r._)(function(){var e,t,r;return(0,a.YH)(this,function(i){switch(i.label){case 0:if(!(e="object"===(0,q._)(o.env)?o.env:null)||0===Object.keys(e).length)return[2];return r=(t="object"===(0,q._)(l.env)?l.env:null)?(0,u._)({},e,t):e,[4,n.updateDotReplit([X("env",r)])];case 1:return i.sent(),[2]}})})).apply(this,arguments)}function Y(){return A.apply(this,arguments)}function A(){return(A=(0,r._)(function(){var e,r,i,s;return(0,a.YH)(this,function(a){switch(a.label){case 0:if(null==(e=l.nix)?void 0:e.channel)return[2];if(null==o||null==(r=o.nix)?void 0:r.channel)return[3,2];return[4,t.getLatestStableChannel()];case 1:if(!(s=a.sent()).channel)return[2];return i=s.channel,[3,3];case 2:i=o.nix.channel,a.label=3;case 3:return[4,n.updateDotReplit([X("nix/channel",i)])];case 4:return a.sent(),[2]}})})).apply(this,arguments)}function x(){return(x=(0,r._)(function(e){var t,r,i,s,c;return(0,a.YH)(this,function(a){switch(a.label){case 0:if(r=!!(t=l[e]),Array.isArray(t)?r=t.length>0:t&&(void 0===t?"undefined":(0,q._)(t))==="object"&&(r=Object.keys(t).length>0),s=null!=(i=ee.get(e))?i:e,r||!o[s])return[2];return c=X(s,o[s]),[4,n.updateDotReplit([c])];case 1:return a.sent(),[2]}})})).apply(this,arguments)}return(0,a.YH)(this,function(r){switch(r.label){case 0:n=e.dotReplit,t=e.nixService,o=e.templateConfig,l=e.config,s=[],c={entrypoint:"entrypoint config",hidden:"hidden files config",audio:"audio config",run:"run command",refreshWebViewOnFileChange:"webview refresh config",language:"language config",onBoot:"onBoot command",languages:"languages config",compile:"compile command",debugger:"debugger config",packager:"packager config",interpreter:"interpreter config",unitTest:"unit test config",nix:Y,env:b,hosting:"hosting config",gitHubImport:"GitHub import config",auth:"Repl Auth config",hintsList:"Hints config",ports:"Ports config",deployment:"deployment config",orderedEnv:null,modules:"nix modules config",extension:"extension config",rules:"rules config",suggestions:"suggestions config",objectStorage:"object storage config",autoSave:"autosave config"},d=[],p=!0,f=!1,h=void 0;try{for(m=Object.entries(c)[Symbol.iterator]();!(p=(g=m.next()).done);p=!0)w=(v=(0,i._)(g.value,2))[0],y=v[1],null!==y&&("function"==typeof y?d.push(y()):d.push(function(e){return x.apply(this,arguments)}(w)))}catch(e){f=!0,h=e}finally{try{p||null==m.return||m.return()}finally{if(f)throw h}}return[4,Promise.all(d)];case 1:return r.sent(),[2,s]}})})).apply(this,arguments)}var et=t(93591);function er(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return["bash","-c",n.join("&&")]}function ei(e){return e.replace(/'/g,"'\"'\"'")}var eo=function(e){var n,t,c,u,d,p,f,h,m,g,v,w,y,b=e.checkoutBranch,S=(0,l.useRouter)(),Y=(0,M.A)(),A=Y.container,x=Y.dotReplit,C=Y.runner,D=Y.git,E=Y.fs,R=(n=(0,U.A)({container:A,service:"exec"}).channel,t=(0,s.useRef)(!1),c=(0,s.useRef)([]),u=(0,L.A)((0,r._)(function(){var e,r,o,l,s,d,p,f,h,m;return(0,a.YH)(this,function(a){switch(a.label){case 0:if(t.current||!c.current.length||(null==n?void 0:n.status)!=="open")return[2];if(!(e=c.current.pop()))throw Error("Expected request");return l=(o=(r=(0,i._)(e,2))[0]).args,s=o.env,d=r[1],p="",f=n.onCommand(function(e){e.output&&(p+=e.output)}),t.current=!0,[4,n.request({exec:{args:l,env:s,noUserEnv:!0}})];case 1:return h=a.sent(),t.current=!1,f(),m=h.channelClosed?"Channel closed":h.error,d(m?{error:m,output:p||null}:{output:p,error:null}),u.current(),[2]}})})),d=null==n?void 0:n.status,(0,s.useEffect)(function(){"open"===d&&u.current()},[d,u]),(0,s.useCallback)(function(e){var n=e.args,t=e.env;return new Promise(function(e){c.current.push([{args:n,env:t},e]),u.current()})},[u])),I=(p=(0,r._)(function(){return(0,a.YH)(this,function(e){switch(e.label){case 0:return[4,D.init({initialCommit:!1,includeAllInitialFiles:!1})];case 1:return e.sent(),[2]}})}),function(){return p.apply(this,arguments)}),T=(f=(0,r._)(function(e){return(0,a.YH)(this,function(n){switch(n.label){case 0:return[4,D.addRemote({name:"origin",url:e})];case 1:return n.sent(),[2]}})}),function(e){return f.apply(this,arguments)}),P=(h=(0,r._)(function(){var e,n;return(0,a.YH)(this,function(t){switch(t.label){case 0:return[4,R({args:er("git remote show origin | grep 'HEAD branch'")})];case 1:if(!(e=t.sent()).output)return[2,"main"];return(n=(0,i._)(e.output.split(": "),2))[0],[2,n[1].trim()]}})}),function(){return h.apply(this,arguments)}),O=(m=(0,r._)(function(e){var n;return(0,a.YH)(this,function(t){switch(t.label){case 0:return[4,R({args:er("git checkout -f -b '".concat(ei(e),"' 'origin/").concat(ei(e),"'"))})];case 1:if((n=t.sent()).error)throw Error("Failed to checkout branch: ".concat(n.error));return[2]}})}),function(e){return m.apply(this,arguments)}),B=(g=(0,r._)(function(e){var n,t,r,i;return(0,a.YH)(this,function(o){switch(o.label){case 0:if(t=void 0!==(n=e.deepen)&&n,r=e.remote,i=e.branch,!r.startsWith("https://api.glitch.com"))return[3,2];return[4,R({args:er("git fetch '".concat(ei(r),"' +refs/heads/*:refs/remotes/origin/*"))})];case 1:return o.sent(),[2];case 2:if(!(i&&t))return[3,4];return[4,R({args:er("git fetch origin '".concat(ei(i),"' --progress --deepen=10"))})];case 3:case 5:case 7:return[2,o.sent()];case 4:if(!i)return[3,6];return[4,R({args:er("git fetch origin '".concat(ei(i),"' --progress --depth=10"))})];case 6:return[4,R({args:er("git fetch origin +refs/heads/*:refs/remotes/origin/* --progress --depth=10")})]}})}),function(e){return g.apply(this,arguments)}),H=(v=(0,r._)(function(){var e,n,t,r,i,o;return(0,a.YH)(this,function(a){switch(a.label){case 0:return[4,E.readDir(_.Dl)];case 1:if((r=a.sent()).error)return[2];return[4,x.getConfig()];case 2:if(!(null==(n=(i=a.sent()).config)||null==(e=n.gitHubImport)?void 0:e.requiredFiles))return[3,4];return o=i.config.gitHubImport.requiredFiles.concat(".cache").map(function(e){return new RegExp(e)}),[4,Promise.all(r.children.filter(function(e){var n;return n=e.filename,!o.some(function(e){return null!=n.match(e)})}).map(function(e){return e.type===k.pt.Directory?E.deleteDir(e.filename):E.deleteFile(e.filename)}))];case 3:return a.sent(),[3,6];case 4:if(!(null==(t=i.config)?void 0:t.entrypoint))return[3,6];return[4,E.deleteFile(i.config.entrypoint)];case 5:a.sent(),a.label=6;case 6:return[2]}})}),function(){return v.apply(this,arguments)}),z={"requirements.txt":["pyproject.toml","poetry.lock"],"pnpm-lock.yaml":["package-lock.json"],"yarn.lock":["package-lock.json"],"bun.lockb":["package-lock.json"]},W=(w=(0,r._)(function(){var e,n,t,r;return(0,a.YH)(this,function(i){switch(i.label){case 0:for(n in e=[],z)e.push(n);t=0,i.label=1;case 1:if(!(t<e.length))return[3,5];return r=e[t],[4,E.stat(r)];case 2:if(!i.sent().exists)return[3,4];return[4,R({args:["git","clean","-fdx"].concat((0,o._)(z[r]))})];case 3:i.sent(),i.label=4;case 4:return t++,[3,1];case 5:return[2]}})}),function(){return w.apply(this,arguments)});return y=(0,r._)(function(e){var n,t,i,o,l;return(0,a.YH)(this,function(s){switch(s.label){case 0:return n=e.remote,t=e.accessToken,[4,H()];case 1:return s.sent(),F.vF.info("GitHub Import: Removed template boilerplate"),[4,I()];case 2:return s.sent(),[4,T(n)];case 3:return s.sent(),[4,P()];case 4:return i=s.sent(),[4,Promise.all([B({deepen:!1,remote:n,remoteToken:t,branch:i}),b?B({deepen:!1,remote:n,remoteToken:t,branch:b}):null])];case 5:var c;if(s.sent(),c=(0,r._)(function(){var e;return(0,a.YH)(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,O(i)];case 1:return t.sent(),[3,3];case 2:return e=t.sent(),F.vF.error("GitHub Import: checkout default branch failed",{originalError:String(e),query:JSON.stringify(S.query),checkoutBranch:b,githubRepo:n}),[3,3];case 3:return[2]}})}),o=function(){return c.apply(this,arguments)},!b)return[3,11];s.label=6;case 6:return s.trys.push([6,8,,10]),[4,O(b)];case 7:case 9:return s.sent(),[3,10];case 8:return l=s.sent(),F.vF.error("GitHub Import: checkout branch from query parameter failed",{originalError:String(l),query:JSON.stringify(S.query),checkoutBranch:b,githubRepo:n}),[4,o()];case 10:return[3,13];case 11:return[4,o()];case 12:s.sent(),s.label=13;case 13:if("html"!==C.mode)return[3,16];return[4,(0,et.S)(A,_.Dl)];case 14:return s.sent(),[4,C.run(N.QG.GITHUB_IMPORT)];case 15:s.sent(),s.label=16;case 16:return[4,W()];case 17:return s.sent(),F.vF.info("GitHub Import: Tidied up required files"),[2]}})}),function(e){return y.apply(this,arguments)}};function ea(e){var n,t,o,d,p,m,g,v,w,_,k,L,U,N,B,W,G,V,q,$,X,ee,et,er,ei,ea,el=e.insertConfigPlugin,es=e.setConfigScreenLockIsOpen,ec=e.openFile,eu=(0,l.useRouter)(),ed=(0,I.A)(),ep=(0,i._)((n=(0,u._)({},y,void 0),h.n(S,n)),2),ef=ep[0],eh=ep[1],em=(0,i._)((0,s.useState)(null),2),eg=em[0],ev=em[1],ew=(0,M.A)(),ey=ew.fs,eb=ew.runner,eS=ew.dotReplit,eY=(0,R.A)(),eA=eY.showError,ex=eY.showConfirm,eC=(o=(t=(0,M.A)()).dotReplit,d=t.nixService,p=(0,I.A)(),g=(0,i._)((m=(0,u._)({},J,void 0),K._(Q,m)),1)[0],w=(v=(0,R.A)()).showWarning,_=v.showError,(0,s.useCallback)((k=(0,r._)(function(e){var n,t,r,i,l,s,c,u,f,h,m,v;return(0,a.YH)(this,function(a){switch(a.label){case 0:return[4,o.getConfig()];case 1:if(!(t=a.sent().config)||(null==(n=t.modules)?void 0:n.length))return[2];return[4,g({variables:{replId:p}})];case 2:if(!(null==(i=(null==(r=a.sent().data)?void 0:r.repl.__typename)==="Repl"?r.repl:null)?void 0:i.rootOriginReplUrl))return[2];try{l=(0,z.qg)(e.toString())}catch(e){return _("Failed to parse template .replit file"),F.vF.error("GitHub Import: Failed to parse template .replit file"),[2]}if(!l)return[2];return[4,function(e){return en.apply(this,arguments)}({nixService:d,dotReplit:o,config:t,templateConfig:l})];case 3:s=a.sent(),c=!0,u=!1,f=void 0;try{for(h=s[Symbol.iterator]();!(c=(m=h.next()).done);c=!0)v=m.value,w(v,1e3)}catch(e){u=!0,f=e}finally{try{c||null==h.return||h.return()}finally{if(u)throw f}}return[2]}})}),function(e){return k.apply(this,arguments)}),[p,w,_,o,d,g])),e_=(L=(0,T.pE)("importBranch","string"))?decodeURIComponent(L):null,ek=(0,O.A)(),eD=(0,E.ET)().orgId;(0,s.useEffect)(function(){eh.error&&eA("Failed to finish cloning Repo - "+eh.error)},[eh.error,eA]),(0,s.useEffect)(function(){eg&&eA("Failed to finish cloning Repo - "+eg)},[eg,eA]),(0,s.useEffect)(function(){eh.data&&ex("Finished cloning Repo")},[eh.data,ex]);var eE=(U={variables:{replId:ed},fetchPolicy:"no-cache"},N=(0,u._)({},y,U),f.I(b,N)).data,eR=(B=(0,O.A)(),G=(W=(0,M.A)()).fs,V=W.dotReplit,et=(null==(ee=($={skip:!((q=(null==eE?void 0:eE.repl.__typename)==="Repl"?eE.repl.config.gitRemoteUrl:void 0)&&B),variables:q?{input:{githubRepoUrl:q}}:void 0},X=(0,u._)({},y,$),f.I(Y,X)).data)?void 0:ee.githubRepoInfo.__typename)==="GitHubRepoInfoOutput"?ee.githubRepoInfo.topLanguages:void 0,{addRecommendedModules:(0,s.useCallback)((0,r._)(function(){var e,n,t,r,o,l;return(0,a.YH)(this,function(a){switch(a.label){case 0:if(!(et&&B))return[3,4];return e=et.map(function(e){return{language:e}}),[4,G.readFile("package.json")];case 1:return"content"in(n=a.sent())&&(t=function(e){var n,t,r=null;try{t=JSON.parse(e)}catch(e){return null}if(null==(n=t.engines)?void 0:n.node){var i=H()(t.engines.node);i&&(r="".concat(i.major))}return r}(n.content.toString()))&&(e.push({language:"javascript",version:t}),et.includes("Vue")&&e.push({language:"vue",version:t})),[4,G.readFile("pyproject.toml")];case 2:return"content"in(n=a.sent())&&(r=function(e){var n,t,r,i,o,a=null;try{o=(0,z.qg)(e)}catch(e){return null}var l=(null==(r=o.tool)||null==(t=r.poetry)||null==(n=t.dependencies)?void 0:n.python)||(null==(i=o.project)?void 0:i["requires-python"]);if(l){var s=H()(l);s&&(a="".concat(s.major,".").concat(s.minor))}return a}(n.content.toString()))&&e.push({language:"python",version:r}),o=function(e,n){var t=new Map,r=!0,o=!1,a=void 0;try{for(var l,s,c=e[Symbol.iterator]();!(r=(s=c.next()).done);r=!0){var u=s.value,d=j[u.language.toLowerCase()];if(d){var p=t.get(d);(!p||Z(u.version,p.version))&&t.set(d,u)}}}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}var f=new Map;null==(l=n.fullModules)||l.forEach(function(e){(null==e?void 0:e.id)&&f.set(e.id,e)});var h=new Set,m=!0,g=!1,v=void 0;try{for(var w,y=t.entries()[Symbol.iterator]();!(m=(w=y.next()).done);m=!0){var b=(0,i._)(w.value,2),S=b[0],Y=b[1];if("string"==typeof S){var A=f.get(S);A&&h.add(A)}else{var x=Y.version;if(!x||!S[x]){var C=Object.keys(S);C.sort(function(e,n){return Z(e,n)?-1:1}),x=C[0]}var _=S[x],k=f.get(_);k&&h.add(k)}}}catch(e){g=!0,v=e}finally{try{m||null==y.return||y.return()}finally{if(g)throw v}}return Array.from(h)}(e,B),l=[{op:"add",path:"nix/channel",value:'"stable-24_05"'}],o.length>0?(F.vF.info("GitHub Import: recommended modules:",Object.fromEntries(o.map(function(e){return[e.id,e.name]}))),l.push({op:"add",path:"modules",value:JSON.stringify(o.map(function(e){return e.id}))})):F.vF.warn("GitHub Import: no recommended modules found"),[4,V.updateDotReplit(l)];case 3:a.sent(),a.label=4;case 4:return[2]}})}),[V,G,B,et]),topLanguages:et}),eI=eR.addRecommendedModules,eF=eR.topLanguages,eT=(er=(0,r._)(function(){var e,n,t,r,i,o,l;return(0,a.YH)(this,function(a){switch(a.label){case 0:if(!eE||"Repl"!==eE.repl.__typename||(n=eE.repl,t=eE.currentUser,"Repl"!==n.__typename||!t||"CurrentUser"!==t.__typename)||(i=null!=(r=null==(e=t.gitHubInfo)?void 0:e.accessToken)?r:null,!(o=n.config.gitRemoteUrl)||!n.config.doClone||!eF))return[2];if(!eE.repl.authorizations.editFileContents.isAuthorized)return ev("You do not have permission to edit this Repl"),F.vF.warn("GitHub Import: Attempt to doClone for user without authorization"),[2];a.label=1;case 1:return a.trys.push([1,3,4,5]),es(!0),[4,eB({remote:o,accessToken:i})];case 2:return a.sent(),(0,P.u4)(P.AZ.NIX_GH_IMPORT_USED,{action:D.s.ImportEnded,replId:n.id,orgContext:(0,E.po)(eD?{id:eD}:void 0)}),[3,5];case 3:return l=a.sent(),F.vF.error("GitHub Import: Failed to do GitHub import flow",{originalError:String(l),query:JSON.stringify(eu.query),githubRepo:o,hasAccessToken:!!i}),c.Cp(l,{extra:{query:JSON.stringify(eu.query),githubRepo:o,hasAccessToken:!!i}}),ev(String(l)),[3,5];case 4:return es(!1),[7];case 5:return[2]}})}),function(){return er.apply(this,arguments)}),eP=(0,i._)((0,s.useState)(!1),2),eL=eP[0],eU=eP[1];(0,s.useEffect)(function(){ek&&eE&&"Repl"===eE.repl.__typename&&eF&&eU(!0)},[eE,ek,eL,eF]),(0,s.useEffect)(function(){eL&&eT()},[eL]);var eN=(ei=(0,r._)(function(){var e;return(0,a.YH)(this,function(n){switch(n.label){case 0:return[4,(0,A.o)({dotReplit:eS,fs:ey})];case 1:return(e=n.sent().entrypoint)&&ec({path:e,opener:(0,x.e$)(e.toLowerCase())?{paneType:"markdown"}:void 0}),[2]}})}),function(){return ei.apply(this,arguments)});function eO(){return ey.readFile(C.v)}var eM=eo({checkoutBranch:e_}),eB=(ea=(0,r._)(function(e){var n,t,r,i,o;return(0,a.YH)(this,function(a){switch(a.label){case 0:if(n=e.remote,t=e.accessToken,!ek||!(eE&&"Repl"===eE.repl.__typename))return[2];return F.vF.info("GitHub Import: Starting client-side GitHub import flow"),[4,eO()];case 1:return r=a.sent(),[4,eM({remote:n,accessToken:t})];case 2:if(a.sent(),F.vF.info("GitHub Import: Cloned repo into Repl"),"NOT_FOUND"!==r.error)return[3,5];return[4,eS.updateDotReplit([])];case 3:return a.sent(),[4,eO()];case 4:r=a.sent(),a.label=5;case 5:if("content"in r)return[3,6];return F.vF.error("GitHub Import: Skipping patching dotReplit because templateDotReplit was an error",{readError:String(r.error)}),[3,11];case 6:return[4,eO()];case 7:return i=a.sent(),o=""!==r.content.toString()&&"content"in i&&i.content.toString()!==r.content.toString(),[4,eC(r.content)];case 8:if(a.sent(),F.vF.info("GitHub Import: Patched dotreplit"),!o)return[3,9];return F.vF.info("GitHub Import: Repo has .replit",{githubURL:n}),[3,11];case 9:return[4,eI()];case 10:a.sent(),F.vF.info("GitHub Import: Added recommended modules"),a.label=11;case 11:return[4,ef({variables:{input:{id:ed,doClone:!1}}})];case 12:if(a.sent(),!e_)return[3,14];return[4,ey.persist()];case 13:a.sent(),(0,T.HQ)({router:eu,params:[{mode:"delete",key:"importBranch"}]}),a.label=14;case 14:return F.vF.info("GitHub Import: Disabled doClone on Repl. Done."),[4,eN()];case 15:if(a.sent(),"html"===eb.mode)return[2];return el(),[2]}})}),function(e){return ea.apply(this,arguments)})}},3272:(e,n,t)=>{"use strict";t.d(n,{M_:()=>b,X8:()=>S});var r=t(29935),i=t(17844),o=t(93629),a=t(12694),l=t(86105),s=t(82643),c=t(88263),u=t(21462),d=t(1230),p=t(54319),f=t(82110),h=t(47630),m=t(45005),g=t(5504),v=t(6598),w={screenshotUrl:"Replit-Commit-Screenshot-Url",sessionId:"Replit-Commit-Session-Id",restoredToHash:"Replit-Restored-To"},y=(0,u.createContext)(null);function b(e){var n,t=e.children,g=(0,a._)((0,u.useState)(null),2),b=g[0],S=g[1],Y=(0,a._)((0,u.useState)(null),2),A=Y[0],x=Y[1],C=(0,a._)((0,u.useState)(!1),2),_=C[0],k=C[1],D=(0,v.I)(function(e){return(0,r._)(function(){var n,t,r,i,o,a,c,u,d,p,f,h,g,v;return(0,s.YH)(this,function(s){switch(s.label){case 0:n=100,t=0,r=[],s.label=1;case 1:return[4,e.git.log.rpc({max:n,skip:t})];case 2:if(!(o=s.sent()).ok){if("UNEXPECTED_DISCONNECT"===o.payload.code)return[3,3];return[2,(0,m._)("".concat(o.payload.code,": ").concat(o.payload.message))]}if((i=r).push.apply(i,(0,l._)(o.payload.commits)),o.payload.commits.length<n)return[3,3];return t+=n,[3,1];case 3:a=[],c=new Set,u=!0,d=!1,p=void 0;try{for(f=r[Symbol.iterator]();!(u=(h=f.next()).done);u=!0)if(g=h.value,v=function(e){var n;return{hash:e.hash,committer:e.committer,subject:e.subject,customSubject:null==(n=e.notes)?void 0:n.split("\n")[0],body:e.body,screenshotUrl:e.trailers[w.screenshotUrl],sessionId:e.trailers[w.sessionId],restoredToHash:e.trailers[w.restoredToHash]}}(g)){if(c.has(v.hash))continue;c.add(v.hash),a.push(v)}}catch(e){d=!0,p=e}finally{try{u||null==f.return||f.return()}finally{if(d)throw p}}return[2,(0,m.Ok)(a)]}})})},[]),E=(0,p.NC)(),R=(0,h.J2)(E.sessions.agent.all.list),I=(0,u.useMemo)(function(){return D?(0,r._)(function(){var e,n,t;return(0,s.YH)(this,function(r){switch(r.label){case 0:if(!R)return[2];return k(!0),[4,D()];case 1:return x(e=r.sent()),e.ok?(n=(function(e){for(var n=[],t=null,r=null,i=0;i<e.length;i++){var o=e[i],a=void 0!==o.restoredToHash;!a||(null==t?void 0:t.collapsed)||(r=o),t?t.collapsed&&r&&r.restoredToHash===o.hash?(n.push(t),t={collapsed:!1,commitRange:[]}):!t.collapsed&&a&&(n.push(t),t={collapsed:!0,commitRange:[]}):t={collapsed:a,commitRange:[]},a||t.commitRange.push(o)}return t&&n.push(t),n})(e.value).reverse().map(function(e){return(0,o._)((0,i._)({},e),{commitRange:e.commitRange.reverse()})}),t=(0,l._)(R).reverse().map(function(e){return{sessionId:e.id,session:E.sessions.get(e.id),commitRanges:n.map(function(n){return(0,o._)((0,i._)({},n),{commitRange:n.commitRange.filter(function(n){return n.sessionId===e.id})})}).filter(function(e){return e.commitRange.length>0})}}),S((0,m.Ok)(t))):S((0,m._)(e.error)),k(!1),[2]}})}):null},[E,D,R]),F=(n=(0,h.HJ)(null),(0,p.zv)("received-completed-event",function(e){var t=e.event,r=t.contents.contents;if((0,d.VFn)(r,"agentTimelineEventContents")){var i=r.agentTimelineEventContents.toolData;switch(null==i?void 0:i.$kind){case"commitData":case"revertData":n.set(t.id)}}}),(0,u.useMemo)(function(){return new f.jA(function(e){n.subscribe(function(n){null!==n&&e.next(n)})})},[n]));(0,h.q3)(F,{next:function(){return null==I?void 0:I()}}),(0,u.useEffect)(function(){I&&I()},[I]);var T=(0,v.I)(function(e){var n;return n=(0,r._)(function(n,t){return(0,s.YH)(this,function(r){switch(r.label){case 0:return[4,e.git.addNote.rpc({object:n,message:t,force:!0})];case 1:if(!r.sent().ok)throw Error("failed to rename commit");return[4,null==I?void 0:I()];case 2:return r.sent(),[2]}})}),function(e,t){return n.apply(this,arguments)}},[I]),P=(0,u.useCallback)(function(e){var n=!0,t=!1,r=void 0;try{for(var i,o,a=(null!=(i=null==A?void 0:A.value)?i:[])[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;if(l.hash===e)return l}}catch(e){t=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(t)throw r}}return null},[A]),L=(0,u.useMemo)(function(){return{checkpoints:b,loading:_,checkpointMade:F,refetch:I,renameCommit:T,findCommit:P}},[b,_,F,I,T,P]);return(0,c.Y)(y.Provider,{value:L,children:t})}function S(){var e=(0,g._P)({controlName:"flag-back-to-the-future"}),n=(0,u.useContext)(y);if(!e)return{checkpoints:null,loading:!1,checkpointMade:new f.cP(function(){}),refetch:null,renameCommit:null,findCommit:function(){return null}};if(!n)throw Error("useCheckpoints must be used within a CheckpointProvider");return n}},3423:(e,n,t)=>{"use strict";t.d(n,{A:()=>o});var r=t(21462),i=t(37427);function o(e){var n=e.runner,t=e.refreshWebView;(0,r.useEffect)(function(){if("html"===n.mode)return n.onStateChanged(function(e){e===i.ll.RUNNING&&(null==t||t())})},[n,t])}},3499:(e,n,t)=>{"use strict";t.d(n,{G:()=>X,C:()=>ee});var r,i=t(88263),o=t(21462),a=t(54319),l=t(86005),s=t(37743),c=t(83846),u=t(17844),d=t(93629),p=t(23099),f=t.n(p),h=t(49069),m=t(57547),g=t(65146),v=t(14047),w=t(26550),y=t(94626),b=t(41392),S=t(6156),Y=t(60632),A=t(84631),x=t(45263),C=t(64583),_=t(973),k=t(49045),D=t(48521),E=t(36112),R=t(76126),I=t(59172),F=t(10429),T=t(23499),P=(0,k.v)(["opacity","transform"]),L=P.cssVars,U=P.styleTokens,N=[D.wp.display.flex,D.wp.reset.button,D.wp.cursor.pointer,D.wp.center,_.b.nofill,D.wp.height("100%"),D.wp.borderRadius(0)],O=[N,D.wp.width(28),{"& svg":D.wp.display.block}],M=(0,C.x)({root:[D.wp.borderRadius(6),D.wp.border({color:x.LU.outlineDefault}),D.wp.position.relative,D.wp.height(30),{opacity:U.opacity,transform:U.transform,transition:"opacity 120ms, transform 120ms","button:first-of-type":{borderTopLeftRadius:6,borderBottomLeftRadius:6},"button:last-of-type":{borderTopRightRadius:6,borderBottomRightRadius:6}}],moreButton:O,button:[N,D.wp.rowWithGap(4),D.wp.align.center,D.wp.pl(4),D.wp.pr(6),D.wp.flex.growAndShrink(1),D.wp.border({direction:"right",color:x.LU.outlineDefault}),{fontFamily:x.LU.fontFamilyDefault,"*":{color:x.LU.foregroundDimmer},":hover *":{color:x.LU.foregroundDefault},".shortcut":{color:x.LU.foregroundDimmest},":hover .shortcut":{color:x.LU.foregroundDimmer}}],iconButton:[O,D.wp.border({direction:"right",color:x.LU.outlineDefault})]}),B=new v.E(function(e){var n,t=e.controls,r=e.verticalPlacement,a=e.onMoreClick,l=(0,o.useRef)(null),s=(0,S.vm)(),p=(0,A.zg)();(0,o.useEffect)(function(){var e;p(),(0,b.U)(l,(e={},(0,c._)(e,L.opacity,"1"),(0,c._)(e,L.transform,"translateY(calc(".concat("top"===r?1:-1," * ").concat(x.LU.space4,"))")),e))},[r,p]);var f=(0,o.useRef)((0,A.Nf)());return(0,i.FD)(E.ui,{innerRef:l,elevated:!0,css:M.root,align:"stretch",row:!0,style:(n={},(0,c._)(n,L.opacity,"0"),(0,c._)(n,L.transform,"translateY(calc(".concat("top"===r?1:-1," * ").concat(x.LU.space16,"))")),n),children:[t.map(function(e){if(f.current){var n=(0,i.FD)(F.S,{row:!0,gap:2,align:"center",children:[(0,i.Y)(R.EY,{variant:"small",multiline:!1,children:e.text}),e.shortcut?(0,i.Y)(R.EY,{variant:"small",className:"shortcut",color:"dimmest",children:(0,Y.LH)(e.shortcut,s)}):null]});return(0,i.Y)(I.m_,{tooltip:n,children:function(n,t){return(0,i.Y)(F.S,(0,d._)((0,u._)({},n),{innerRef:t,css:M.iconButton,onClick:e.onClick,tag:"button",children:e.icon}))}},e.text)}return(0,i.FD)(F.S,{css:M.button,onClick:e.onClick,tag:"button",children:[e.icon,(0,i.Y)(R.EY,{variant:"small",multiline:!1,children:e.text}),e.shortcut?(0,i.FD)(R.EY,{variant:"small",className:"shortcut",children:["(",(0,Y.LH)(e.shortcut,s),")"]}):null]},e.text)}),a?(0,i.Y)(F.S,{"aria-label":"More",css:M.moreButton,onClick:function(e){var n=(l.current||e.currentTarget).getBoundingClientRect();a({top:n.top,right:n.right})},tag:"button",children:(0,i.Y)(T.A,{size:16})}):null]})}),H={layer:"cm-selection-controls-layer",dom:"cm-selection-controls-dom"},z=l.Lz.theme((r={},(0,c._)(r,".".concat(H.layer),{width:"100%"}),(0,c._)(r,".".concat(H.dom),{position:"absolute"}),r)),W=function(){function e(n){(0,s._)(this,e),this.options=n}var n=e.prototype;return n.draw=function(){var e=this.options,n=e.controls,t=e.onMoreClick,r=e.top,i=e.align,o=e.verticalPlacement,a=B.create({controls:n,onMoreClick:t,verticalPlacement:o});return a.className=H.dom,a.style.top=r+"px","left"===i.side?(a.style.left=i.value+"px",a.style.right=""):(a.style.right=i.value+"px",a.style.left=""),a.style.pointerEvents="none",setTimeout(function(){a.style.pointerEvents="auto"},200),a},n.eq=function(e){return f()(e.options,this.options)},e}(),G=h.Pe.define(),V=h.sU.define({create:function(){return null},update:function(e,n){var t;return!n.state.selection||(null==(t=n.state.selection)?void 0:t.main.empty)?null:((0,w.C)(n,G,function(n){e=n.value}),e)}}),j=h.sU.define({create:function(e){return!e.selection.main.empty},update:function(e,n){return!n.state.selection.main.empty}}),Z=l.Z9.define(function(e){var n=function(){var n=e.state.selection.main;e.dispatch({effects:G.of(n.empty?null:Date.now())})},t=function(e){"Shift"===e.key&&n()},r=function(){document.addEventListener("mouseup",n),document.addEventListener("keyup",t)},i=function(){document.removeEventListener("mouseup",n),document.removeEventListener("keyup",t)};return{update:function(e){(0,m.$H)(e,j)&&(e.state.field(j)?r():i())},destroy:i}}),q=new y.k(function(e){return[z,(0,l.qd)({above:!0,class:H.layer,update:function(e){return(0,m.$H)(e,g.z,V)},markers:function(n){if(!n.hasFocus)return[];var t=n.state.field(V)?n.state.selection.main:null;if(!t||n.state.field(g.z,!1))return[];var r=function(e,n){for(var t=Math.min(n.from,n.to),r=Math.max(n.from,n.to),i=null;t<=r;){var o=e.lineAt(t);t=o.to+1,null!==i&&o.length<i.length||(i=o)}return i}(n.state.doc,t);if(!r)return[];var i=n.coordsAtPos(r.to);if(!i)return[];var o=n.lineBlockAt(Math.min(t.anchor,t.head)),a=n.dom.getBoundingClientRect(),l=n.contentDOM.getBoundingClientRect(),s=o.top+n.documentPadding.top-30,c=l.right-i.left<200?{side:"right",value:a.right-l.right+16}:{side:"left",value:i.left-a.left},u="top";if(s<n.scrollDOM.scrollTop){var d=n.lineBlockAt(t.to);s=d.top+d.height,u="bottom"}return[new W({top:s,align:c,controls:e.controls(n),onMoreClick:e.onMoreClick,verticalPlacement:u})]}}),j,V,Z]}),K=t(68912),$=t(24365),J=t(38107),Q=t(94553),X={id:"editor.generateOrModifyWithAI",name:"AI",description:"Generate or modify selection with AI",default:(0,$.FM)({cmdOrCtrl:!0,key:"i"})};function ee(e){var n=e.editCode,t=e.explainCode,r=e.generateCode,s=e.onMoreClick,c=(0,K.f)().isTeamWithAiDisabled,u=(0,Y.Jn)(X.id),d=(0,o.useMemo)(function(){if(!u)return[];var e=Array.isArray(u)?u.join(" "):u;return l.w4.of([{key:e,scope:"editor",run:function(e){return e.state.selection.main.empty?r(e,"shortcut"):n(e,"shortcut"),!0}}])},[u,r,n]),p=(0,o.useMemo)(function(){return{controls:function(e){return c?[]:[{text:"Modify with "+a.BP,icon:(0,i.Y)(Q.A,{size:16,color:x.LU.blurpleStronger}),onClick:function(){return n(e,"highlight")},shortcut:u},{text:"Explain with "+a.BP,icon:(0,i.Y)(J.A,{size:16,color:x.LU.blurpleStronger}),onClick:function(){return t(e,"highlight")}}]},onMoreClick:s}},[n,t,s,u,c]),f=q.use(p);return(0,o.useMemo)(function(){return[f,d]},[f,d])}},3845:e=>{e.exports={steps:"PlanStepsV2_steps__VTT3a",stepItem:"PlanStepsV2_stepItem__WG3gb",divider:"PlanStepsV2_divider__LF1OD"}},3859:(e,n,t)=>{"use strict";t.d(n,{x:()=>d});var r=t(17844),i=t(12584),o=t(41114),a=t(86997);function l(){var e=(0,i._)(["\n  query GetIsGuestInStarterPlanUserRepl($replId: String!) {\n    getRepl(id: $replId) {\n      __typename\n      ... on Repl {\n        id\n        org {\n          __typename\n          id\n        }\n        owner {\n          __typename\n          ... on User {\n            id\n            isSubscribed\n          }\n        }\n        isOwner\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n"]);return l=function(){return e},e}var s={},c=(0,o.J1)(l()),u=t(31062);function d(){var e,n,t,i,o=(t={variables:{replId:(0,u.A)()}},i=(0,r._)({},s,t),a.I(c,i)).data,l=(null==o?void 0:o.getRepl.__typename)==="Repl"&&null!=(e=o.getRepl.org)&&!!e.id;return(null==o?void 0:o.getRepl.__typename)==="Repl"&&(null==(n=o.getRepl.owner)?void 0:n.__typename)==="User"&&!o.getRepl.owner.isSubscribed&&!o.getRepl.isOwner&&!l}},3997:(e,n,t)=>{"use strict";t.d(n,{B:()=>s});var r=t(12694),i=t(21462),o=t(35084),a=t(24894),l=function(e){var n,t,r,i=e.orgId,a=e.repl,l=e.forkSource;return{originId:a.id,teamId:null,title:null,description:null,isPrivate:!0,forkToPersonal:null,replReleaseId:null!=(r=null==(t=a.deployment)||null==(n=t.activeRelease)?void 0:n.id)?r:void 0,orgId:i,trackingData:{forkSource:l,isOnboarding:!1,isApp:a.publishedAs===o.Q_.App,isTemplate:a.publishedAs===o.Q_.Template}}};function s(e){var n=e.onFork,t=e.onError,o=(0,r._)((0,a.A)({navigateAfterFork:!0,replLinkOptions:{initialPaneType:"project"},onFork:function(){n()},onError:function(){t()}}),2),s=o[0],c=o[1].loading;return[(0,i.useCallback)(function(e){var n=e.repl;return s(l({orgId:e.orgId,repl:n,forkSource:e.forkSource}))},[s]),{loading:c}]}},4291:(e,n,t)=>{"use strict";t.d(n,{B:()=>i,q:()=>r});var r={findOrCreateFile:3,searchFileContents:2,fork:.5,createNewRepl:.5,askAssistant:.5,codeSearch:.5,myRepls:.5,settings:.5},i={files:.98,settings:.9,toolDescription:.8,askAssistant:.5,codeSearch:.7,fileContentsSearch:.4}},5021:(e,n,t)=>{"use strict";t.d(n,{L:()=>R});var r=t(12694),i=t(88263),o=t(21462),a=t(54319),l=t(79784),s=t(37254),c=t(53231),u=t(75176),d=t(44996),p=t(57949),f=t(45263),h=t(64583),m=t(48521),g=t(38292),v=t(61928),w=t(75414),y=t(54087),b=t(76126),S=t(10429),Y=t(90419),A=t(80762),x=t(58481);function C(e){var n=e.title,t=e.current,r=e.max,o=e.quotaExpiresAt,a=(0,s.M)({expiryDate:o}),l=a.expiryDisplayText,c=a.expiryDisplayTextColor;return(0,i.FD)(S.S,{gap:6,children:[(0,i.FD)(S.S,{css:D.usageMeterAndTitle,children:[(0,i.FD)(S.S,{row:!0,align:"center",gap:4,children:[(0,i.Y)(b.EY,{height:"singleLine",children:n}),l?(0,i.Y)(b.EY,{variant:"small",style:{color:c},children:"| ".concat(l)}):null]}),(0,i.FD)(b.EY,{height:"singleLine",color:"dimmer",children:[t," / ",r]})]}),(0,i.Y)("div",{children:(0,i.Y)(v.W,{css:D.measureBar,total:r,current:t,color:f.LU.blueDefault,tooltipHidden:!0})})]})}var _=(0,h.x)({root:[m.wp.border({color:f.LU.orangeDimmer}),m.wp.borderRadius(),m.wp.py(4),m.wp.px(6),m.wp.colorMixBg(f.LU.orangeDimmer,"transparent",.25)],text:[m.wp.color.orangeStronger]});function k(){return(0,i.Y)(S.S,{css:_.root,children:(0,i.Y)(b.EY,{css:_.text,children:"You've used 100% of your free AI quota."})})}var D=(0,h.x)({popoverWrapper:[m.wp.width(280)],header:[m.wp.fontWeight.bold],measureBar:[m.wp.height(8)],usageMeterAndTitle:[m.wp.display.flex,m.wp.flex.row,m.wp.justify.spaceBetween,m.wp.align.center],iconBadgeWrapper:[m.wp.position.relative]});function E(e){var n=e.limit,t=e.usage,r=e.isShowingAlertExplanation,o=e.quotaExpiresAt;if(!n||void 0===t)return(0,i.Y)(A.A,{});var s=t>=n,c=Math.floor(t/n*100),d="You've used ".concat(c,"% of your ").concat(l.Lm," plan checkpoints. ").concat(a.g$," creates checkpoints when it's finished a significant piece of work.");return(0,i.FD)(i.FK,{children:[(0,i.Y)(S.S,{gap:4,children:(0,i.Y)(C,{title:"Checkpoints",quotaExpiresAt:o,current:t,max:n})}),s?(0,i.Y)(k,{}):null,r?(0,i.Y)(y.N,{text:d,colorway:"primary"}):null,(0,i.Y)(u.A,{text:"Upgrade for more",colorway:"brand",variant:"outlined",context:"agent_freemium_quota",iconLeft:(0,i.Y)(Y.A,{}),highlightUpsell:"agent"})]})}function R(){var e,n=(0,r._)((0,o.useState)(!1),2),t=n[0],l=n[1],s=(0,d.i)().agentCheckpoints,u=(0,r._)((0,o.useState)(!1),2),f=u[0],h=u[1];return(0,p.N)({usage:null==s?void 0:s.usage,limit:null==s?void 0:s.limit,percentThreshold:p.h,onHitThreshold:function(){l(!0),h(!0)}}),(0,p.N)({usage:null==s?void 0:s.usage,limit:null==s?void 0:s.limit,percentThreshold:100,onHitThreshold:function(){(0,c.u4)(c.AZ.AGENT_USED,{action:"hit_freemium_quota"})}}),(0,i.FD)(w.Wv,{isOpen:t,onOpenChange:function(e){l(e),e||h(!1)},label:"Usage",placement:"bottom start",children:[(0,i.Y)(g.K0,{alt:"Usage",disabled:!s,children:(0,i.Y)(S.S,{css:D.iconBadgeWrapper,children:(0,i.Y)(x.A,{})})}),(0,i.Y)(S.S,{css:D.popoverWrapper,p:8,children:(0,i.FD)(S.S,{gap:12,children:[(0,i.FD)(b.EY,{css:D.header,children:[a.g$," usage"]}),(0,i.Y)(E,{limit:null==s?void 0:s.limit,usage:null==s?void 0:s.usage,isShowingAlertExplanation:f,quotaExpiresAt:null!=(e=null==s?void 0:s.quotaExpiresAt)?e:void 0})]})})]})}},5071:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(88263),a=t(71117);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M18 3.25a.75.75 0 0 1 .75.75v16a.75.75 0 0 1-1.5 0V4a.75.75 0 0 1 .75-.75Zm-6 6a.75.75 0 0 1 .75.75v10a.75.75 0 0 1-1.5 0V10a.75.75 0 0 1 .75-.75Zm-6 6a.75.75 0 0 1 .75.75v4a.75.75 0 0 1-1.5 0v-4a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"})}))}},5321:(e,n,t)=>{"use strict";t.d(n,{L9:()=>m,Rd:()=>h});var r=t(86105),i=t(88263),o=t(79730),a=t(22761),l=t(64513),s=["youtube.com","youtube-nocookie.com","vimeo.com","wistia.com","sadanandpai.github.io"],c=function(e){try{var n=new URL(e).hostname;return s.some(function(e){return n===e||n.endsWith("."+e)})}catch(e){return!1}},u=t(58370),d=t(48521),p=t(75040),f=o.ZU.Object({type:o.ZU.Literal("videoPlayer"),data:o.ZU.Object({embedUrl:o.ZU.String(),title:o.ZU.String()})}),h={Content:function(e){var n=e.pane.data;return(0,i.Y)(m,{title:n.title,embedUrl:n.embedUrl})},Icon:function(e){var n=e.size;return(0,i.Y)(p.A,{size:n})},getTitle:function(e){return e.data.title},category:u.bY.Other,decode:function(e){return a.T(f,e)}};function m(e){var n,t=e.embedUrl,o=e.borderRadius,a=e.title;return c(t)?(0,i.Y)("iframe",{title:a,src:t,frameBorder:"0",css:[d.wp.coverContainer,(n=d.wp).borderRadius.apply(n,(0,r._)(void 0===o?[0,0,8,8]:o))]}):(0,i.FD)("div",{children:["Only YouTube, Vimeo, and Wistia videos are supported."," ",(0,i.Y)("a",{href:l.WA,target:"_blank",children:"Request more formats here."})]})}},5465:(e,n,t)=>{"use strict";t.d(n,{F:()=>o});var r=t(12584);function i(){var e=(0,r._)(["\n  fragment BuildStatusBadgeHostingDeployment on HostingDeployment {\n    id\n    currentBuild {\n      id\n      status\n      timeCreated\n      user {\n        id\n        displayName\n      }\n    }\n  }\n"]);return i=function(){return e},e}var o=(0,t(41114).J1)(i())},5751:(e,n,t)=>{"use strict";t.d(n,{A:()=>S,p:()=>v});var r=t(29935),i=t(82643),o=t(22677),a=t(12584);function l(){var e=(0,a._)(["\n  query GitHubAuth {\n    currentUser {\n      id\n      gitHubInfo {\n        accessToken\n      }\n    }\n  }\n"]);return l=function(){return e},e}var s=(0,t(41114).J1)(l()),c=t(79730),u=c.ZU.Object({id:c.ZU.String(),user_id:c.ZU.Number(),ssh_hostname:c.ZU.String(),token:c.ZU.String()}),d=t(45005),p=t(40493),f=t(34626),h=t(30206),m=t(53231),g=["http:","https:","vscode:"];function v(e){return w.apply(this,arguments)}function w(){return(w=(0,r._)(function(e){var n,t;return(0,i.YH)(this,function(r){switch(r.label){case 0:return n=e.replId,[4,(0,d.$6)(function(){return(0,h.B2)("/data/repls/".concat(n,"/get_ssh_token"))})];case 1:if((t=r.sent()).error)return[2,{type:"error",message:t.error.toString()}];if(!o.J(u,t.value))return[2,{type:"error",message:"Invalid JSON"}];return[2,{type:"success",data:t.value}]}})})).apply(this,arguments)}function y(){return(y=(0,r._)(function(){var e;return(0,i.YH)(this,function(n){switch(n.label){case 0:if(!p.V)throw Error("Expected apollo");return[4,p.V.query({query:s})];case 1:if(!(null==(e=n.sent().data)?void 0:e.currentUser))throw Error("Expected current user");return[2,e.currentUser]}})})).apply(this,arguments)}function b(){document.activeElement instanceof HTMLElement&&document.activeElement.blur()}function S(e){var n=e.container,t=e.fs,o=e.openMultipleFiles,a=e.openMultipleURLs,l=e.enableReplspaceSshTokenPassthrough,s=new Set,c=!1,u=null;return n.openChannel({service:"open",name:"open"},function(e){e.channel.onCommand(function(e){if("replspaceApiOpenMultipleFiles"===e.body){if(!e.replspaceApiOpenMultipleFiles)throw Error("Expected replspaceApiOpenMultipleFiles");var n=e.replspaceApiOpenMultipleFiles,t=n.files,r=n.urls.flatMap(function(e){var n;try{n=new URL(e)}catch(e){return[]}return g.includes(n.protocol)?[n]:[]});o&&t.length>0&&(b(),o({paths:t})),a&&r.length>0&&(b(),a({urls:r.map(function(e){return e.toString()})}))}})}),n.openChannel({service:"git",name:"git"},function(e){var n,a=e.channel;return a.onCommand((n=(0,r._)(function(e){var n,r,l,d,p,h,m,g,v,w,S,Y,A,x,C,_;return(0,i.YH)(this,function(i){switch(i.label){case 0:switch(e.body){case"replspaceApiOpenFile":return[3,1];case"replspaceApiGetGitHubToken":return[3,7]}return[3,9];case 1:if(!e.replspaceApiOpenFile)throw Error("Expected replspaceApiOpenFile");if(r=(n=e.replspaceApiOpenFile).file,l=n.waitForClose,d=n.nonce,o)return[3,3];if(!r.endsWith(".git/COMMIT_EDITMSG"))return l&&a.send({replspaceApiCloseFile:{file:r,nonce:d}}),window.alert("tried to open ".concat(r," but failed")),[2];return p=window.prompt("Enter a commit message"),[4,t.writeFile(r,null!=p?p:"")];case 2:if(i.sent(),!l)return[2];return[3,5];case 3:if(b(),o({paths:[r]}),!l||!u)return[2];return[4,u(r)];case 4:i.sent(),i.label=5;case 5:return[4,t.flush()];case 6:if(i.sent(),"open"!==a.status)return[2];return a.send({replspaceApiCloseFile:{file:r,nonce:d}}),[2];case 7:if(!e.replspaceApiGetGitHubToken)throw Error("Expected replspaceApiGetGitHubToken");return h=function(){var n;"open"===a.status&&a.send({replspaceApiGitHubToken:{token:"",nonce:null==(n=e.replspaceApiGetGitHubToken)?void 0:n.nonce}})},[4,function(){return y.apply(this,arguments)}()];case 8:if(null==(m=i.sent()).gitHubInfo)return h(),[2];if(!s.size)return h(),f.vF.error("Got a replspaceApiGetGitHubToken command but no confirm listener is set up"),[2];if(g=function(){var n,t;"open"===a.status&&a.send({replspaceApiGitHubToken:{token:null==(n=m.gitHubInfo)?void 0:n.accessToken,nonce:null==(t=e.replspaceApiGetGitHubToken)?void 0:t.nonce}})},c)return g(),[2];v=!1,w=function(){var e=!0,n=!1,t=void 0;try{for(var r,i=s[Symbol.iterator]();!(e=(r=i.next()).done);e=!0)(0,r.value)(null)}catch(e){n=!0,t=e}finally{try{e||null==i.return||i.return()}finally{if(n)throw t}}},S=!0,Y=!1,A=void 0;try{for(x=s[Symbol.iterator]();!(S=(C=x.next()).done)&&(_=C.value,!v);S=!0)_(function(e){var n=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(!v){if(v=!0,!e){h(),w();return}n&&(c=e),g(),w()}})}catch(e){Y=!0,A=e}finally{try{S||null==x.return||x.return()}finally{if(Y)throw A}}i.label=9;case 9:return[2]}})}),function(e){return n.apply(this,arguments)})),function(){}}),n.openChannel({service:"shelltracker",name:"shelltracker"},function(e){e.channel.onCommand(function(e){if(null!=e.replspaceApiShellTracker){var t,r;(0,m.u4)(m.AZ.SHELL_COMMAND_EVALED,{context:e.replspaceApiShellTracker.cmd,replId:null==(r=n.getContext())||null==(t=r.repl)?void 0:t.id,api:"replspace",pwd:e.replspaceApiShellTracker.pwd})}})}),void 0!==l&&l&&n.openChannel({service:"sshtoken",name:"sshtoken"},function(e){var n,t=e.channel;t.onCommand((n=(0,r._)(function(e){var n,r,o,a,l,s;return(0,i.YH)(this,function(i){switch(i.label){case 0:if(!e.replspaceApiSSHTokenGetRequest)throw Error("Expected replspaceApiSSHTokenGetRequest");return r=(n=e.replspaceApiSSHTokenGetRequest).nonce,o=n.replid,a=function(e){"open"===t.status&&t.send({replspaceApiSSHTokenGetResponse:e})},l=function(){a({token:"",nonce:r})},[4,v({replId:o})];case 1:if(s=i.sent(),"open"!==t.status)return[2];if("error"===s.type)return l(),f.vF.error(s.message),[2];return a({token:s.data.token,nonce:r,sshHostname:s.data.ssh_hostname}),[2]}})}),function(e){return n.apply(this,arguments)}))}),{onConfirmSendToken:function(e){var n=function(n){return e(n)};return s.add(n),function(){s.delete(n)}},setWaitForFileClose:function(e){u=e}}}},5793:(e,n,t)=>{"use strict";t.d(n,{R:()=>u});var r=t(17844),i=t(12584),o=t(41114),a=t(86997);function l(){var e=(0,i._)(["\n  query UseReplOrgId($replId: String!) {\n    getRepl(id: $replId) {\n      __typename\n      ... on Repl {\n        id\n        org {\n          id\n        }\n      }\n    }\n  }\n"]);return l=function(){return e},e}var s={},c=(0,o.J1)(l());function u(e){var n,t,i,o=(n={variables:{replId:e}},t=(0,r._)({},s,n),a.I(c,t)),l=o.data,u=o.loading,d=o.error;return u?{loading:u,hasError:!1,orgId:void 0}:{loading:u,hasError:void 0!==d||(null==l?void 0:l.getRepl.__typename)!=="Repl",orgId:(null==l?void 0:l.getRepl.__typename)==="Repl"?null==(i=l.getRepl.org)?void 0:i.id:void 0}}},6281:(e,n,t)=>{"use strict";t.d(n,{BL:()=>R,D6:()=>C,E2:()=>_,Ff:()=>U,Gg:()=>G,H_:()=>P,Ou:()=>b,PY:()=>g,Vr:()=>m,bO:()=>I,cW:()=>D,d_:()=>h,h:()=>S,hF:()=>L,hQ:()=>E,hq:()=>z,n5:()=>F,ob:()=>y,ov:()=>x,q3:()=>B,rD:()=>O,tB:()=>v,wy:()=>k,xB:()=>A});var r=t(83846),i=t(17844),o=t(93629),a=t(12694),l=t(56902),s=t(21462),c=t(35992),u=t(44370),d=t(69338),p=t(50140),f=t(9623),h=function(e){return e.Uninitialized="Uninitialized",e.Initializing="Initializing",e.Installing="Installing",e.Uninstalling="Uninstalling",e.Idle="Idle",e}({}),m=function(e){return e.Install="Install",e.Uninstall="Uninstall",e}({});function g(){return(0,a._)((0,s.useState)(function(){return(0,u.y$)()}),1)[0]}var v=(0,s.createContext)(null);function w(){var e=(0,s.useContext)(v);if(!e)throw Error("Expected store in context");return e}var y=function(e){return(0,d.Xr)(e,{store:w()})};function b(e){return(0,p.yF)((0,s.useCallback)(function(n){return n(e)},[e]),{store:w()})}function S(e){return(0,d.md)(e,{store:w()})}var Y=(0,u.eU)({});function A(e){var n,t=S(Y);return e&&null!=(n=t[e])?n:[]}function x(){var e=y(Y);return function(n,t){e(function(e){return(0,c.jM)(e,function(e){var r=e[n];if(!r||0===r.length){e[n]=t;return}var i=!0,o=!1,a=void 0;try{for(var l,s=t[Symbol.iterator]();!(i=(l=s.next()).done);i=!0)!function(){var e=l.value;r.find(function(n){return n.name===e.name})||r.push(e)}()}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}})})}}function C(){var e=y(Y);return function(n,t){e(function(e){return(0,c.jM)(e,function(e){var r=e[n];if(r&&0!==r.length){var i=!0,o=!1,a=void 0;try{for(var l,s=t[Symbol.iterator]();!(i=(l=s.next()).done);i=!0)!function(){var e=l.value,n=r.findIndex(function(n){return n.name===e.name});-1!==n&&r.splice(n,1)}()}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}}})})}}var _=(0,u.eU)({});function k(){var e=b(_);return function(n){var t;return null!=(t=e()[n])?t:null}}function D(){var e=y(_);return function(n,t){e(function(e){return(0,o._)((0,i._)({},e),(0,r._)({},n,t))})}}var E=(0,u.eU)(null);function R(){return S(E)}var I=(0,u.eU)([]);function F(){return S(I)}var T=(0,u.eU)({});function P(e){var n,t=S(T);return e&&null!=(n=t[e])?n:[]}function L(){var e=b(T);return function(n){var t;return null!=(t=e()[n])?t:[]}}function U(){var e=y(T);return function(n,t){e(function(e){return(0,o._)((0,i._)({},e),(0,r._)({},n,t.map(function(e){return"nix"===n?(0,o._)((0,i._)({},e),{name:(0,f.y)(e.name)}):e})))})}}var N=(0,u.eU)(null,function(e,n,t){var r=t.id,i=t.pkg;if(!i.name)throw Error("Package does not have a name.");n(I,function(e){return(0,c.jM)(e,function(e){if(!e.find(function(e){return e.pkgs.find(function(n){return e.id===r&&n.name===i.name})})){var n=e.find(function(e){return"Install"===e.kind});n?n.pkgs.push(i):e.push({kind:"Install",id:r,pkgs:[i]})}})})});function O(){return y(N)}var M=(0,u.eU)(null,function(e,n,t){var r=t.id,i=t.pkg;if(!i.name)throw Error("Package does not have a name.");n(I,function(e){return(0,c.jM)(e,function(e){if(!e.find(function(e){return e.pkgs.find(function(n){return e.id===r&&n.name===i.name})})){var n=e.find(function(e){return"Uninstall"===e.kind});n?n.pkgs.push(i):e.push({kind:"Uninstall",id:r,pkgs:[i]})}})})});function B(){return y(M)}var H=(0,u.eU)(null,function(e,n,t){var r=(0,l._)(e(I)),i=r[0],o=r.slice(1);t===i&&(n(I,o),n(E,t))});function z(){return y(H)}var W=(0,u.eU)(null,function(e,n,t){n(I,function(e){return(0,c.jM)(e,function(e){var n=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value,s=l.pkgs.findIndex(function(e){return e.name===t});-1!==s&&l.pkgs.splice(s,1)}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}})})});function G(){return y(W)}},6362:e=>{e.exports={root:"PlanVisualPreview_root__UMTzE",divider:"PlanVisualPreview_divider__GZx_a",referencesRow:"PlanVisualPreview_referencesRow__e3QPm",modalContent:"PlanVisualPreview_modalContent__in6Hi"}},6447:(e,n,t)=>{"use strict";t.d(n,{P:()=>w});var r=t(12694),i=t(88263),o=t(21462),a=t(74096),l=t(56697),s=t(79275),c=t(34834),u=t(64583),d=t(48521),p=t(46603),f=t(49150),h=t(76126),m=t(10429),g=(0,u.x)({splitContainer:[d.wp.mt(8)],text:[d.wp.mt(8)]}),v=function(){var e=(0,r._)((0,o.useState)(navigator.onLine),2),n=e[0],t=e[1];return(0,o.useEffect)(function(){var e=function(){t(navigator.onLine)};return window.addEventListener("online",e),window.addEventListener("offline",e),function(){window.removeEventListener("online",e),window.removeEventListener("offline",e)}},[]),n},w=function(){var e=(0,c.A)().container,n=(0,r._)((0,o.useState)(!1),2),t=n[0],u=n[1],d=(0,o.useRef)(!1),w=(0,s.A)(e),y=(0,o.useMemo)(function(){return w===a.KN.CONNECTED},[w]),b=(0,l.T)(),S=v(),Y=(0,o.useCallback)(function(){u(!1)},[]),A=(0,o.useCallback)(function(){location.reload()},[]);return(0,o.useEffect)(function(){if(!d.current&&!y&&b&&S){var e=setTimeout(function(){u(!0),d.current=!0},6e4);return function(){return clearTimeout(e)}}},[y,b,S]),(0,i.Y)(f.a,{isOpen:t,onRequestClose:Y,maxWidth:360,centered:!0,children:(0,i.FD)(m.S,{gap:8,children:[(0,i.Y)(h.Y9,{level:2,variant:"subheadBig",children:"You are disconnected"}),(0,i.Y)(h.EY,{css:g.text,children:"Your connection to the server has been lost and reconnection attempts have failed. Please refresh the page to continue."}),(0,i.FD)(m.S,{css:g.splitContainer,row:!0,gap:8,justify:"space-between",children:[(0,i.Y)(p.$n,{text:"Cancel",onClick:Y}),(0,i.Y)(m.S,{row:!0,gap:8,children:(0,i.Y)(p.$n,{text:"Refresh",onClick:A,colorway:"blue"})})]})]})})}},6571:(e,n,t)=>{"use strict";t.d(n,{A:()=>d});var r=t(88263),i=t(71115),o=t(21462),a=t(91584),l=t(25804),s=t(63726),c=t(74108);function u(e,n){return!!e&&("ReplRedirect"===e.__typename||"ReplSubscriptionExpired"===e.__typename||!e.authorizations.editFileContents.isAuthorized||!e.org&&!e.authorizations.connectToWorkspace.isAuthorized||!(0,l.Rq)(n.query.skipNixMigration,"boolean")&&(0,a.A)(e))}function d(e){var n=e.replResponse,t=e.replUrl,a=e.children,l=(0,i.useRouter)();if((0,o.useEffect)(function(){if(u(n,l)){if("ReplSubscriptionExpired"===n.__typename){var e=n.replId,r=n.isOwner,i=t.split("/")[1].slice(1),o=l.asPath.indexOf("#"),a=o<0?l.asPath:l.asPath.slice(0,o);l.replace({pathname:"/expiredPrivateRepl",query:{isOwner:r,ownerUsername:i,replId:e}},a);return}if("ReplRedirect"===n.__typename){window.location.href=n.replUrl;return}if("Repl"===n.__typename&&!n.org&&!n.authorizations.connectToWorkspace.isAuthorized){var s=n.isOwner,d=n.id,p=n.url,f=l.asPath.indexOf("#"),h=f<0?l.asPath:l.asPath.slice(0,f);l.replace({pathname:"/replMinutesLimit",query:{isOwner:s,replId:d,replUrl:p}},h);return}if(!n.authorizations.editFileContents.isAuthorized){var m=(0,c.z9)(n),g=m.href,v=m.as;l.replace(g,v);return}window.location.reload()}},[n,t,l]),u(n,l)){var d="";return"ReplRedirect"===n.__typename?d="Repl moved, redirecting":"ReplSubscriptionExpired"===n.__typename?d="Subscription expired, redirecting":n.org||n.authorizations.connectToWorkspace.isAuthorized?n.authorizations.editFileContents.isAuthorized&&(d="Your Repl requires an upgrade, please wait"):d="Repl minutes exceeded, redirecting",(0,r.Y)(s.A,{reason:d})}return(0,r.Y)(r.FK,{children:a})}},6598:(e,n,t)=>{"use strict";t.d(n,{I:()=>l});var r=t(86105),i=t(21462),o=t(19523),a=t(57179);function l(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=(0,o.yB)(),l=(0,a.X)();return(0,i.useMemo)(function(){return t&&l?e(t.client,l):null},[t,l].concat((0,r._)(n)))}},6678:(e,n,t)=>{"use strict";t.d(n,{Z:()=>w});var r=t(88263),i=t(21462),o=t(54988),a=t(31569),l=t(6895),s=t(45263),c=t(64583),u=t(48521),d=t(46603),p=t(38292),f=t(36112),h=t(10429),m=t(55545),g=(0,c.x)({root:[u.wp.display.inlineBlock,u.wp.borderRadius(4),u.wp.border({color:s.LU.outlineDefault})],askButton:[u.wp.border({direction:"right",color:s.LU.outlineDefault})],askButtonInner:[u.wp.height(26),u.wp.borderRadius(4,0,0,4)],copyButton:[{"> button":[u.wp.width(26),u.wp.height(26),u.wp.borderRadius(0,4,4,0)]}]});function v(e){var n=e.adjustXPosition,t=e.adjustYPosition,i=e.onClickAskAssistant,o=e.onClickCopy;return(0,r.Y)(f.ui,{elevated:!0,css:g.root,style:{marginLeft:void 0===n?0:n,marginTop:void 0===t?4:t},children:(0,r.FD)(h.S,{row:!0,align:"center",children:[(0,r.Y)(h.S,{css:g.askButton,children:(0,r.Y)(d.$n,{text:"Ask Assistant",variant:"nofill",onClick:i,size:"small",iconLeft:(0,r.Y)(l.A,{}),css:g.askButtonInner})}),(0,r.Y)(h.S,{css:g.copyButton,children:(0,r.Y)(p.K0,{alt:"Copy",size:12,onClick:o,children:(0,r.Y)(m.A,{})})})]})})}function w(e){var n=e.xterm,t=e.onAskAssistant,l=(0,i.useMemo)(function(){return null==n?void 0:n._term},[n]),s=(0,i.useRef)(null),c=(0,i.useRef)(null),u=(0,i.useRef)(null);(0,i.useEffect)(function(){if(l)return l.onSelectionChange(function(){s.current&&s.current.dispose(),c.current&&c.current.dispose(),u.current&&(u.current.unmount(),u.current=null);var e=l.getSelectionPosition(),n=l.getSelection().trim();if(l.hasSelection()&&e&&n.length>0){var i,d,p,f=l.buffer.active.cursorY,h=e.end.y-f+1,m=null!=(d=null==l?void 0:l._core._renderService.dimensions.css.cell.width)?d:8,g=Math.round(((null==e?void 0:e.end.x)-(null==e?void 0:e.start.x))/2),w=-70,y=4,b=g*m,S=Math.ceil(140/m);b<70?(g=e.start.x,w=0):g>l.cols-S/2&&(g=e.end.x,w=-140),e.end.y>=l.rows-2&&(y=-8,h-=1),s.current=l.registerMarker(h),c.current=null!=(p=l.registerDecoration({marker:s.current,x:g,width:S,layer:"top"}))?p:null,null==(i=c.current)||i.onRender(function(e){u.current||(u.current=(0,o.createRoot)(e)),u.current.render((0,r.Y)(v,{adjustXPosition:w,adjustYPosition:y,onClickAskAssistant:function(){l.clearSelection(),t(n)},onClickCopy:function(){l.clearSelection(),(0,a.default)(n)}}))})}}).dispose},[t,l])}},6796:(e,n,t)=>{"use strict";t.d(n,{A:()=>f});var r=t(88263),i=t(45263),o=t(64583),a=t(48521),l=t(76126),s=t(10429),c=t(49444),u=t(56889),d=t(7440),p=(0,o.x)({wrapper:[a.wp.position.absolute,{top:0,right:0,bottom:0,left:0,zIndex:999,display:"flex",alignItems:"center",justifyContent:"center",borderBottomLeftRadius:8,borderBottomRightRadius:8,overflow:"hidden"}],overlay:[a.wp.position.absolute,{top:0,right:0,bottom:0,left:0,backgroundColor:i.LU.blueDimmer,opacity:.8}],content:[a.wp.center,{position:"relative",zIndex:1}]});function f(){return(0,r.FD)(s.S,{css:p.wrapper,children:[(0,r.Y)(s.S,{css:p.overlay}),(0,r.FD)(s.S,{css:p.content,gap:12,children:[(0,r.FD)(s.S,{row:!0,gap:8,align:"center",children:[(0,r.Y)(u.A,{size:32}),(0,r.Y)(c.A,{size:32}),(0,r.Y)(d.A,{size:32})]}),(0,r.Y)(l.EY,{variant:"subheadDefault",children:"Drop files here to add to conversation"})]})]})}},6868:(e,n,t)=>{"use strict";t.d(n,{$:()=>i,L:()=>o});var r=t(53231);function i(){(0,r.u4)(r.AZ.MODAL_VIEWED,{modalName:"projects_help_dialog"})}function o(e){(0,r.u4)(r.AZ.GIT_PROJECT_FEATURE_USED,e)}},6895:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(88263),a=t(71117);function l(e){return(0,o.FD)(a.Ay,(0,i._)((0,r._)({},e),{children:[(0,o.Y)("path",{d:"M8.09945 1.00012C9.8352 1.00012 11.2423 2.40723 11.2423 4.14298L11.2422 4.16743C11.2554 6.75801 13.358 8.85436 15.951 8.85727L15.9566 8.85726C17.6924 8.85726 19.0995 10.2644 19.0995 12.0001C19.0995 13.7359 17.6924 15.143 15.9566 15.143C13.3611 15.143 11.2554 17.2404 11.2422 19.8328C11.2423 19.841 11.2423 19.8491 11.2423 19.8573C11.2423 21.593 9.8352 23.0001 8.09945 23.0001C6.3637 23.0001 4.9566 21.593 4.9566 19.8573C4.9566 18.1215 6.3637 16.7144 8.09945 16.7144C8.10155 16.7144 8.10365 16.7144 8.10575 16.7144C10.7064 16.7109 12.8136 14.6016 12.8136 12.0001C12.8136 9.39653 10.703 7.2859 8.09939 7.28584C6.36367 7.28581 4.9566 5.87871 4.9566 4.14298C4.9566 2.40723 6.3637 1.00012 8.09945 1.00012Z",fill:"url(#paint0_linear_434_35354)"}),(0,o.Y)("path",{d:"M11.2423 12.0001C11.2423 10.2644 9.83518 8.85729 8.09943 8.85729C6.36368 8.85729 4.95657 10.2644 4.95657 12.0001C4.95657 13.7359 6.36368 15.143 8.09943 15.143C9.83518 15.143 11.2423 13.7359 11.2423 12.0001Z",fill:"url(#paint1_linear_434_35354)"}),(0,o.FD)("defs",{children:[(0,o.FD)("linearGradient",{id:"paint0_linear_434_35354",x1:"4.95657",y1:"1.00012",x2:"25.7048",y2:"15.5274",gradientUnits:"userSpaceOnUse",children:[(0,o.Y)("stop",{stopColor:"#69D9F0"}),(0,o.Y)("stop",{offset:"1",stopColor:"#0093B0"})]}),(0,o.FD)("linearGradient",{id:"paint1_linear_434_35354",x1:"4.95657",y1:"1.00012",x2:"25.7048",y2:"15.5274",gradientUnits:"userSpaceOnUse",children:[(0,o.Y)("stop",{stopColor:"#69D9F0"}),(0,o.Y)("stop",{offset:"1",stopColor:"#0093B0"})]})]})]}))}},7102:(e,n,t)=>{"use strict";t.d(n,{I:()=>s,f:()=>l});var r=t(12584),i=t(41114);function o(){var e=(0,r._)(['\n  fragment ReplEnvironmentTourCurrentUser on CurrentUser {\n    id\n    hasSeenProjectsTour2024: tourSeen(name: "workspace-repo-projects-tour")\n    hasSeenSidebarTour2022: tourSeen(name: "workspace-desktop-sidebar-tour")\n    hasSeenWorkspaceTour2021: tourSeen(name: "workspace-desktop-tour")\n    hasSeenWorkspaceTour2022: tourSeen(name: "workspace-desktop-new-user-tour")\n    hasSeenWorkspaceTour2024: tourSeen(name: "workspace-desktop-tour-2024")\n    timeCreated\n  }\n']);return o=function(){return e},e}function a(){var e=(0,r._)(["\n  fragment ReplEnvironmentTourRepl on Repl {\n    id\n    origin {\n      id\n    }\n    source {\n      release {\n        id\n        repl {\n          id\n        }\n      }\n    }\n    lesson {\n      id\n    }\n    project {\n      id\n    }\n    config {\n      isInPlanningPhase\n    }\n  }\n"]);return a=function(){return e},e}var l=(0,i.J1)(o()),s=(0,i.J1)(a())},7252:(e,n,t)=>{"use strict";t.d(n,{El:()=>E,GK:()=>D,qX:()=>k});var r=t(29935),i=t(37743),o=t(41292),a=t(88967),l=t(58075),s=t(73238),c=t(6132),u=t(48122),d=t(17844),p=t(93629),f=t(12694),h=t(82643),m=t(21462),g=t(48686),v=t(82110),w=t(99615),y=t(95139),b=t(17513),S=new WeakMap,Y=new WeakMap,A=new WeakMap,x=new WeakSet,C=function(){function e(n){var t,s=n.navigateIframeRef,u=n.onReceiveWebviewLog,d=n.onReceiveWebviewScreenshot;(0,i._)(this,e);var p=this;(0,c._)(this,x),(0,a._)(this,S,{writable:!0,value:void 0}),(0,a._)(this,Y,{writable:!0,value:void 0}),(0,a._)(this,A,{writable:!0,value:void 0}),(0,l._)(this,Y,[]),(0,l._)(this,S,new v.V_(function(e){var n=function(n){return(0,b.Cw)(n,function(n){return e.next(n.paneResponse)})};return window.addEventListener("message",n),function(){window.removeEventListener("message",n)}})),(0,o._)(this,Y).push((0,o._)(this,S).subscribe((t=(0,r._)(function(e){var n,t,r;return(0,h.YH)(this,function(i){switch(i.label){case 0:if("webview"!==e.paneType||"navigation"!==e.response.type)return[3,4];if("base"in e.response&&"path"in e.response&&"port"in e.response||(null==(n=(0,o._)(p,A))?void 0:n.path)===e.response.path)return[3,2];return(0,l._)(p,A,{base:"",path:e.response.path,port:80}),[4,null==(t=s.current)?void 0:t.call(s,(0,o._)(p,A).path,(0,o._)(p,A).port)];case 1:return i.sent(),[2];case 2:var a,c;if(a=(0,o._)(p,A),c=e.response,a&&c&&a.base===c.base&&a.path===c.path&&a.port===c.port)return[3,4];return(0,l._)(p,A,e.response),[4,null==(r=s.current)?void 0:r.call(s,(0,o._)(p,A).path,(0,o._)(p,A).port)];case 3:i.sent(),i.label=4;case 4:return[2]}})}),function(e){return t.apply(this,arguments)}))),(0,o._)(this,Y).push((0,o._)(this,S).subscribe(function(e){"webview"===e.paneType&&"logs"===e.response.type&&u(e.response.method,e.response.message.map(function(e){try{return JSON.stringify(e,null,0)}catch(e){return"Devtools error: console message could not be stringified"}}).join(" "))})),(0,o._)(this,Y).push((0,o._)(this,S).subscribe(function(e){"webview"===e.paneType&&"screenshot"===e.response.type&&d(e.response.dataUri)}))}var n=e.prototype;return n.dispose=function(){(0,o._)(this,Y).forEach(function(e){return e()})},n.refresh=function(){(0,s._)(this,x,_).call(this,{type:"refresh"})},n.setInsets=function(e){(0,s._)(this,x,_).call(this,{type:"setInsets",insets:e})},n.handleNavigateTo=function(e){var n,t,r,i,a,l,c,u,f;if(e.base===(null==(n=(0,o._)(this,A))?void 0:n.base)&&e.port===(null==(t=(0,o._)(this,A))?void 0:t.port)&&e.path===(null==(r=(0,o._)(this,A))?void 0:r.path))return void this.refresh();(0,s._)(this,x,_).call(this,(0,p._)((0,d._)({type:"navigate"},e),{url:(l=e.base,c=null!=(i=e.path)?i:"/",u=null!=(a=e.port)?a:80,(f=new URL(l)).pathname=c.startsWith("/")?c:"/".concat(c),80!==u&&(f.port=u.toString()),f.toString())}))},(0,u._)(e,[{key:"path",get:function(){return(0,o._)(this,S).filter(function(e){return"webview"===e.paneType&&"navigation"===e.response.type}).select(function(e){return e.response.path})}}]),e}();function _(e){var n={messageType:w.tF.REQUEST_PANE_ACTION,paneAction:{paneType:"webview",action:e}};(0,b._z)(n,(0,g.Ak)())}function k(){var e=(0,y.Dr)("webviewBridge"),n=(0,y.Dr)("workspace2");return(0,m.useMemo)(function(){return e&&n},[e,n])}function D(e){var n=e.initialPort,t=e.initialPath,r=e.baseUrl,i=e.isSupported,o=e.navigateIframeRef,a=e.onReceiveWebviewLog,l=e.onReceiveWebviewScreenshot,s=(0,f._)((0,m.useState)(null),2),c=s[0],u=s[1];(0,m.useEffect)(function(){if(i){var e=new C({navigateIframeRef:o,onReceiveWebviewLog:a,onReceiveWebviewScreenshot:l});return u(e),function(){e.dispose()}}},[i,o,a,l]);var d=(0,m.useRef)(void 0);return(0,m.useEffect)(function(){i&&c&&r&&d.current!==n&&(d.current=n,c.handleNavigateTo({base:r,port:n,path:t}))},[r,c,t,n,i]),c}function E(e){var n=e.isVisible,t=k();(0,m.useEffect)(function(){t&&((0,b._z)({messageType:w.tF.REQUEST_PANE_ACTION,paneAction:{paneType:"webview",action:{type:"setVisibility",isVisible:n}}},(0,g.Ak)()),n||(0,b._z)({messageType:w.tF.REQUEST_PANE_ACTION,paneAction:{paneType:"webview",action:{type:"navigate",base:"",url:"INVALID_URL_TO_HIDE_NATIVE_WEBVIEW"}}},(0,g.Ak)()))},[t,n])}},7440:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(88263),a=t(71117);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M21.75 6A3.75 3.75 0 0 0 18 2.25H6A3.75 3.75 0 0 0 2.25 6v12A3.75 3.75 0 0 0 6 21.75h12A3.75 3.75 0 0 0 21.75 18V6ZM18 3.75A2.25 2.25 0 0 1 20.25 6v2.25H9.75v-4.5H18Zm-9.75 0v4.5h-4.5V6A2.25 2.25 0 0 1 6 3.75h2.25Zm-4.5 6h4.5v4.5h-4.5v-4.5Zm0 6h4.5v4.5H6A2.25 2.25 0 0 1 3.75 18v-2.25Zm6 4.5v-4.5h10.5V18A2.25 2.25 0 0 1 18 20.25H9.75Zm10.5-6H9.75v-4.5h10.5v4.5Z",clipRule:"evenodd"})}))}},7581:(e,n,t)=>{"use strict";t.d(n,{A:()=>c});var r=t(88263),i=t(83150),o=t(46603),a=t(76126),l=t(10429),s=t(92192);function c(e){var n,t=e.paths,c=e.onCancel,u=e.onConfirm;return(0,r.FD)(l.S,{gap:24,children:[(0,r.Y)(a.Y9,{level:1,variant:"headerDefault",children:t.length>1?"Overwrite files?":"Overwrite file?"}),(0,r.FD)(a.EY,{children:[(n=(n=t).map(i.WP)).length<2?n[0]:"".concat(n.slice(0,-1).join(", ")," and ").concat(n.slice(-1))," already"," ",t.length>1?"exist":"exists"," in the destination, are you sure you want to overwrite ",t.length>1?"them":"it","? This cannot be undone."]}),(0,r.FD)(l.S,{row:!0,gap:12,justify:"end",children:[(0,r.Y)(o.$n,{onClick:function(){return c()},text:"Cancel"}),(0,r.Y)(o.$n,{colorway:"negative",onClick:function(){return u()},text:"Yes, overwrite ".concat(t.length>1?"these files":"this file"),iconLeft:(0,r.Y)(s.A,{})})]})]})}},7613:(e,n,t)=>{"use strict";t.d(n,{b:()=>o});var r=t(1230),i=t(96996);function o(e){if(!e)return null;if(e.error.type!==r.fqQ.EVENT_ERROR_TYPE_UNKNOWN)return{$kind:"error",error:e.error};var n=e.contents.contents;if((null==n?void 0:n.$kind)!=="agentTimelineEventContents")return null;var t=n.agentTimelineEventContents.toolData,o=n.agentTimelineEventContents.message,a=(0,i.m)(e),l={$kind:null,message:o,summary:a,state:e.state};switch(null==t?void 0:t.$kind){case"fileEditData":var s=null==t?void 0:t.fileEditData,c=null==s?void 0:s.filePath,u=null==s?void 0:s.diff;if(void 0===c||void 0===u)return l;return{$kind:"fileEditData",state:e.state,path:c,diff:u,message:o,summary:a};case"createFileData":var d=null==t?void 0:t.createFileData,p=null==d?void 0:d.filePath,f=null==d?void 0:d.content;if(void 0===p||void 0===f)return l;return{$kind:"createFileData",content:f,path:p,message:o,summary:a};case"shellExecutionData":return{$kind:"shellExecutionData",data:t.shellExecutionData,message:o,summary:a};case"readFileData":return{$kind:"readFileData",data:t.readFileData,message:o,summary:a};case"readDirData":return{$kind:"readDirData",data:t.readDirData,message:o,summary:a};case"packagerInstallData":var h=t.packagerInstallData,m=h.inputLanguage,g=h.inputPackages,v=h.output,w=h.isExecuting,y=h.processId;if(void 0===m||void 0===g)return l;return{$kind:"packagerInstallData",state:e.state,language:m,installed:g,output:void 0===v?void 0:v,isExecuting:void 0!==w&&w,processId:void 0===y?void 0:y,message:o,summary:a};case"packagerUninstallData":var b=t.packagerUninstallData;return{$kind:"packagerUninstallData",language:b.inputLanguage,uninstalled:b.inputPackages,summary:a,message:o};case"systemDependencyInstallData":var S=t.systemDependencyInstallData.deps;if(void 0===S)return l;return{$kind:"systemDependencyInstallData",deps:S,summary:a,message:o};case"systemDependencyUninstallData":var Y=t.systemDependencyUninstallData.deps;if(void 0===Y)return l;return{$kind:"systemDependencyUninstallData",deps:Y,summary:a,message:o};case"toolchainInstallData":return{$kind:"toolchainInstallData",modules:t.toolchainInstallData.modules,message:o,summary:a};case"screenshotData":return{$kind:"screenshotData",imageUrl:t.screenshotData.imageUrl,message:o,summary:a};case"planProgressData":case"agentPlanStepBegin":case"workflowsStopToolData":case"workflowsGetOutputToolData":case"workflowsRemoveRunConfigToolData":return null;case"workflowsStartToolData":return{$kind:t.$kind,workflowName:t.workflowsStartToolData.name,state:e.state,summary:a,message:o};case"workflowsRestartToolData":return{$kind:t.$kind,workflowName:t.workflowsRestartToolData.name,state:e.state,restart:!0,summary:a,message:o};case"workflowsSetRunConfigToolData":return{$kind:t.$kind,workflowName:t.workflowsSetRunConfigToolData.name,state:e.state,summary:a,message:o};case"deployData":return{$kind:t.$kind,summary:a,result:t.deployData,message:o};case"presentResultsToolData":return{$kind:t.$kind,summary:a,result:t.presentResultsToolData,message:o};case"createPostgresqlDatabaseData":return{$kind:t.$kind,message:o,summary:a};case"sqlExecutionData":return{$kind:t.$kind,data:t.sqlExecutionData,message:o,summary:a};case"webSearchData":return{$kind:t.$kind,data:t.webSearchData,message:o,summary:a};case"webPageVisitData":return{$kind:t.$kind,data:t.webPageVisitData,message:o,summary:a};default:return l}}},8026:(e,n,t)=>{"use strict";t.d(n,{P_:()=>p,kh:()=>u});var r=t(17844),i=t(12584),o=t(41114),a=t(50175);function l(){var e=(0,i._)(["\n  fragment DeleteReplDialogRepl on Repl {\n    id\n    title\n  }\n"]);return l=function(){return e},e}function s(){var e=(0,i._)(["\n  mutation DeleteReplDialogReplDelete($id: String!) {\n    deleteRepl(id: $id) {\n      id\n    }\n  }\n"]);return s=function(){return e},e}var c={},u=(0,o.J1)(l()),d=(0,o.J1)(s());function p(e){var n=(0,r._)({},c,e);return a.n(d,n)}},8029:(e,n,t)=>{"use strict";t.d(n,{Fe:()=>s});var r=t(12584),i=t(41114),o=t(60236);function a(){var e=(0,r._)(["\n  fragment OrgGroupMetadata on OrgGroup {\n    id\n    color\n    slug\n    type\n    name\n  }\n"]);return a=function(){return e},e}function l(){var e=(0,r._)(["\n  query OrgGroupMetadata($orgId: String!, $groupId: String!) {\n    currentUser {\n      __typename\n      ...OrgCurrentUser\n      org(orgId: $orgId) {\n        __typename\n        ... on Org {\n          ...OrgMetadata\n          group(orgGroupId: $groupId) {\n            __typename\n            ... on OrgGroup {\n              ...OrgGroupMetadata\n            }\n            ... on NotFoundError {\n              message\n            }\n          }\n        }\n        ... on NotFoundError {\n          message\n        }\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return l=function(){return e},e}var s=(0,i.J1)(a());l(),o.rh,o.wW},8054:(e,n,t)=>{"use strict";t.d(n,{n:()=>c});var r=t(17844),i=t(93629),o=t(17459),a=t(88263),l=t(21462),s=t(76126);function c(e){var n=e.text,t=(0,o._)(e,["text"]),c=(0,l.useRef)(null),u=(0,l.useRef)(n);return(0,l.useEffect)(function(){if(u.current!==n){var e=n.length;!function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;requestAnimationFrame(function(){var i=c.current;i&&(i.textContent=n.slice(0,r),r!==e&&t(r+1))})}()}},[n]),(0,l.useEffect)(function(){u.current=n},[n]),(0,a.Y)(s.EY,(0,i._)((0,r._)({},t),{ref:c,children:n}))}},8375:(e,n,t)=>{"use strict";t.d(n,{Q:()=>f});var r=t(17844),i=t(93629),o=t(35084),a=t(12584),l=t(41114),s=t(86997);function c(){var e=(0,a._)(["\n  query CheckForProjectByRepl($id: String!) {\n    getRepl(id: $id) {\n      __typename\n      ... on Repl {\n        id\n        org {\n          id\n          type\n          name\n          authorizations {\n            createPublicRepl: createRepl(private: false) {\n              isAuthorized\n              message\n            }\n            createPrivateRepl: createRepl(private: true) {\n              isAuthorized\n              message\n            }\n            createProject {\n              isAuthorized\n              message\n            }\n          }\n        }\n        project {\n          id\n        }\n      }\n    }\n  }\n"]);return c=function(){return e},e}var u={},d=(0,l.J1)(c()),p=t(31062);function f(){var e,n,t,a,l,c,f=(l={variables:{id:(0,p.A)()}},c=(0,r._)({},u,l),s.I(d,c)),h=(null==(n=f.data)||null==(e=n.getRepl)?void 0:e.__typename)==="Repl"?f.data.getRepl.org:void 0,m=!!h&&h.type===o.NT.Team&&(h.authorizations.createPrivateRepl.isAuthorized||h.authorizations.createPublicRepl.isAuthorized)&&h.authorizations.createProject.isAuthorized;return(0,i._)((0,r._)({},f),{hasProject:(null==(t=f.data)?void 0:t.getRepl.__typename)==="Repl"&&!!(null==(a=f.data.getRepl.project)?void 0:a.id),isEligibleForProject:m})}},8497:(e,n,t)=>{"use strict";t.d(n,{b:()=>c});var r=t(88263),i=t(79209),o=t(45263),a=t(48521),l=t(10429),s=(0,i.AH)([a.wp.borderRadius("full"),a.wp.position.absolute,a.wp.top(-3),a.wp.right(-3)]);function c(e){var n=e.color,t=void 0===n?o.LU.redStronger:n,i=e.small,a=e.className,c=i?6:8;return(0,r.Y)(l.S,{className:a,style:{backgroundColor:t,width:c,height:c,zIndex:2,boxShadow:"0 0 0 2px ".concat(o.LU.backgroundDefault)},css:s})}},8721:(e,n,t)=>{"use strict";t.d(n,{DH:()=>g,GK:()=>w,N_:()=>m,aP:()=>d,pX:()=>u,s7:()=>v,sC:()=>p});var r=t(17844),i=t(93629),o=t(21462),a=t(44370),l=t(69338),s=t(39282),c=t(29383),u=(0,s.F)(function(){return null}),d=(0,s.F)(function(){return null});function p(e){var n=d.current();(0,o.useEffect)(function(){e!==n&&d.set(function(){return e})},[e,n])}var f=(0,a.eU)(null),h=(0,a.eU)(null,function(e,n,t){var o,a,l=e(f),s=l?(0,r._)({},l,t):(0,r._)({},t),c=null==s?void 0:s.changes,d=null==s?void 0:s.filePath;if(!d||!c)throw Error('"filePath", "changes", "users" required when initializing history state');var p=(a=(o=(0,i._)((0,r._)({},s),{changes:c,filePath:d})).changes.length,(0,r._)({users:{},count:a,version:Math.max(0,a-1),playing:!1,comparing:!1},o));u.set(function(){return p});var h=p.changes.length;if(0===h)return void n(f,p);(null==l?void 0:l.changes)&&p.changes!==l.changes&&(p.count=h,p.version=Math.min(p.version,h-1),p.playing=!1,p.comparing=!1),p.version===h-1&&(p.playing=!1),n(f,p)});function m(){return(0,l.md)(f,{store:y()})}function g(){return(0,l.Xr)(h,{store:y()})}function v(){return(0,l.Xr)((0,c.A)(function(){return(0,a.eU)(null,function(e,n){n(f,null)})},[]),{store:y()})}var w=(0,o.createContext)(null);function y(){var e=(0,o.useContext)(w);if(!e)throw Error("Expected store in context");return e}},9105:(e,n,t)=>{"use strict";t.d(n,{A:()=>s});var r=t(12694),i=t(21462),o=t(7512),a=t(34834),l=t(73707);function s(){var e=(0,a.A)().fs,n=(0,r._)((0,i.useState)(!1),2),t=n[0],s=n[1],c=(0,l.A)(),u=c.didConnectOnce,d=c.didDisconnect;return((0,i.useEffect)(function(){return s(e.getStatus()===o.sn.Syncing),e.onStatusChange(function(e){s(e===o.sn.Syncing)})},[e]),u)?{isSaving:t,isOffline:d}:{isSaving:!1,isOffline:!1}}},9135:(e,n,t)=>{"use strict";t.d(n,{D:()=>s,H:()=>a});var r=t(44370),i=t(69338),o=(0,r.eU)(!1);function a(){return(0,i.md)(o)}var l=(0,r.eU)(null,function(e,n){return n(o,function(e){return!e})});function s(){return(0,i.Xr)(l)}},9623:(e,n,t)=>{"use strict";t.d(n,{A:()=>a,y:()=>o});var r=t(29935),i=t(82643);function o(e){return null==e?void 0:e.replace(/^pkgs\./,"")}let a={name:"nix",getInstalledPackages:function(e){var n=e.services.nixService;return(0,r._)(function(){var e;return(0,i.YH)(this,function(t){switch(t.label){case 0:return[4,n.listPackages()];case 1:if(null!==(e=t.sent()).error)return[2,[]];return[2,e.packages.filter(function(e){return!!e.name}).map(function(e){return{name:e.name,version:e.version}})]}})})()},getPackageInfo:function(e){var n=e.name,t=e.services.nixService;return(0,r._)(function(){var e;return(0,i.YH)(this,function(r){switch(r.label){case 0:return[4,t.packageInfo(n)];case 1:if(null!==(e=r.sent()).error)return[2,{}];return[2,e.package]}})})()},search:function(e){var n=e.query,t=e.services.nixService,o=e.nixOpts;return(0,r._)(function(){var e;return(0,i.YH)(this,function(r){switch(r.label){case 0:return[4,t.searchPackages(n,o)];case 1:if(null!==(e=r.sent()).error)throw Error("Could not search Nix packages");return[2,e.packages.map(function(e){var n,t;return{name:e.name,version:e.version,description:e.description,homepageURL:null!=(n=e.homepageURL[0])?n:null,license:null!=(t=e.licenses[0])?t:null}})]}})})()},install:function(e){var n=e.pkgs,t=e.services.nixService;return(0,r._)(function(){var e;return(0,i.YH)(this,function(r){switch(r.label){case 0:return e=n.filter(function(e){return null!=e.name}).map(function(e){return"pkgs.".concat(e.name)}),[4,t.addPackages(e)];case 1:return r.sent(),[2]}})})()},uninstall:function(e){var n=e.pkgs,t=e.services.nixService;return(0,r._)(function(){var e;return(0,i.YH)(this,function(r){switch(r.label){case 0:return e=n.filter(function(e){return null!=e.name}).map(function(e){return"pkgs.".concat(e.name)}),[4,t.removePackages(e)];case 1:return r.sent(),[2]}})})()}}},9685:(e,n,t)=>{"use strict";t.d(n,{Q:()=>o});var r=t(54319),i=t(47630);function o(){var e=(0,r.NC)();return(0,i.Rj)(function(){return e.sessions.agent.current.select(function(e){return null==e?void 0:e.id})},[e])}},9758:(e,n,t)=>{"use strict";t.d(n,{A:()=>O});var r=t(88263),i=t(47946),o=t(85305),a=t(79513),l=t(17844),s=t(93629),c=t(667);function u(e){return(0,r.FD)(c.A,(0,s._)((0,l._)({},e),{children:[(0,r.Y)("path",{fill:"#3E474A",fillRule:"evenodd",d:"m19.91 5.492-6.945-4.123a2.62 2.62 0 0 0-2.68 0L3.34 5.492A2.77 2.77 0 0 0 2 7.878v8.245c0 .984.51 1.894 1.34 2.386l6.945 4.122a2.623 2.623 0 0 0 2.68 0l6.945-4.122a2.77 2.77 0 0 0 1.34-2.386V7.878a2.77 2.77 0 0 0-1.34-2.386Z",clipRule:"evenodd"}),(0,r.Y)("path",{fill:"#FEFEFE",d:"m3.583 18.087 6.945 4.122a2.15 2.15 0 0 0 1.097.302c.123 0 .244-.014.365-.035-.367-.111-.606-.494-.605-1.086v-8.097c0-.987.604-1.525 1.424-2.004l6.57-4.058c.606-.354 1.125-.22 1.355.271a2.272 2.272 0 0 0-1.067-1.588l-6.945-4.123a2.15 2.15 0 0 0-2.194 0L3.582 5.914a2.285 2.285 0 0 0-1.1 1.964v8.245c0 .808.421 1.56 1.1 1.964Z"}),(0,r.Y)("path",{fill:"#47B353",fillRule:"evenodd",d:"m18.09 16.92-1.73 1.035c-.046.027-.08.057-.08.112v.453c0 .055.037.078.083.051l1.756-1.067c.046-.027.053-.078.053-.133v-.4c0-.054-.037-.078-.082-.05Z",clipRule:"evenodd"}),(0,r.Y)("path",{fill:"#FEFEFE",fillRule:"evenodd",d:"M14.407 13.11c.056-.028.102.007.102.08l.006.599c.25-.1.468-.126.666-.08.042.01.061.069.044.138l-.132.53a.227.227 0 0 1-.06.106.138.138 0 0 1-.035.025.078.078 0 0 1-.051.009c-.09-.02-.304-.067-.641.103-.353.18-.477.486-.474.714.003.271.142.354.624.362.642.01.919.291.926.938.006.634-.333 1.316-.85 1.733l.01.593c.001.071-.045.153-.101.181l-.35.202c-.057.029-.103-.006-.104-.078l-.006-.582c-.3.125-.605.155-.8.077-.036-.015-.052-.069-.037-.13l.127-.536a.221.221 0 0 1 .063-.111.132.132 0 0 1 .033-.024.07.07 0 0 1 .056-.006c.21.07.478.037.736-.093.327-.166.546-.5.543-.832-.004-.3-.167-.426-.563-.429-.504.002-.975-.098-.982-.84-.007-.612.311-1.248.815-1.65l-.007-.598c0-.073.044-.154.102-.183l.34-.217Z",clipRule:"evenodd"})]}))}var d=t(32597),p=t(46950),f=t(31657),h=t(36639),m=t(78137),g=t(33555),v=t(20680),w=t(59782),y=t(34850),b=t(66034),S=t(32632),Y=t(28259);function A(e){return(0,r.FD)(c.A,(0,s._)((0,l._)({},e),{children:[(0,r.Y)("path",{fill:"#009118",d:"M12.902.99a1.815 1.815 0 0 0-1.804 0l-2.02 1.165c-2.064 1.19-4.128 2.38-6.192 3.568A1.74 1.74 0 0 0 2 7.233v9.534a1.75 1.75 0 0 0 .92 1.525c.297.165.59.336.884.507.484.282.969.565 1.467.819.925.475 2.082.58 3.018.085.76-.41 1.097-1.323 1.096-2.162.004-1.987.003-3.974.002-5.961V8.102c.018-.14-.082-.289-.228-.286-.35-.005-.7-.003-1.05 0-.132-.014-.261.101-.251.24-.003 1.637-.002 3.275-.002 4.913l-.001 4.467c.008.432-.272.848-.671.994-.452.172-.956.038-1.366-.187l-.74-.426-1.446-.834a.263.263 0 0 1-.115-.108.272.272 0 0 1-.033-.157V7.283a.292.292 0 0 1 .173-.293L8.21 4.37c1.21-.698 2.42-1.394 3.63-2.09a.28.28 0 0 1 .32 0l3.615 2.08 4.569 2.629a.296.296 0 0 1 .172.294V16.718a.273.273 0 0 1-.147.268l-4.218 2.43-3.845 2.215-.051.03c-.117.07-.25.15-.38.072-.403-.233-.804-.471-1.205-.71-.298-.177-.597-.355-.897-.53-.076-.05-.173-.071-.253-.016-.02.01-.038.021-.057.032-.296.163-.593.327-.915.431-.041.017-.085.03-.128.045-.119.037-.24.075-.316.18.094.132.231.21.368.288a1140.648 1140.648 0 0 0 2.571 1.517c.54.351 1.266.377 1.824.05l3.893-2.24c1.44-.83 2.879-1.66 4.32-2.489.544-.29.924-.89.92-1.524V7.234a1.738 1.738 0 0 0-.857-1.492L16.317 2.96 12.902.99Z"}),(0,r.Y)("path",{fill:"#009118",d:"M17.032 8.148c-1.074-.6-2.352-.633-3.546-.554-.863.089-1.77.338-2.398.984-.645.649-.785 1.697-.479 2.545.22.599.772.988 1.343 1.195.735.27 1.508.355 2.28.439.706.076 1.41.153 2.088.371.277.096.6.243.684.557.078.373-.007.806-.297 1.065-.52.43-1.226.46-1.871.489l-.105.004a45.379 45.379 0 0 0-.206-.002c-.754-.009-1.555-.018-2.205-.446-.367-.255-.525-.706-.59-1.136-.007-.134-.11-.257-.25-.247a50.703 50.703 0 0 0-1.046 0c-.122-.011-.248.08-.255.209-.028.768.254 1.564.83 2.075.674.607 1.582.842 2.455.943.929.093 1.878.087 2.792-.12.687-.164 1.376-.465 1.85-1.018.583-.672.697-1.673.436-2.51-.2-.625-.772-1.025-1.356-1.231-.795-.285-1.625-.397-2.456-.51-.645-.087-1.29-.174-1.92-.342l-.031-.01c-.244-.078-.528-.169-.634-.427-.118-.376-.018-.843.313-1.074.43-.306.977-.35 1.486-.378H14c.68-.008 1.4-.015 2.021.303.416.218.658.665.757 1.116.019.133.104.271.251.265.237.005.474.005.711.004l.328-.001c.12.009.25-.062.273-.189-.015-.943-.476-1.909-1.308-2.37Z"})]}))}var x=t(2857),C=t(82426);function _(e){return(0,r.FD)(c.A,(0,s._)((0,l._)({},e),{children:[(0,r.Y)("path",{fill:"#56B3B4",d:"M20.238 4.762h1.19a.59.59 0 0 1 .596.595.59.59 0 0 1-.595.595h-1.19a.59.59 0 0 1-.596-.595.59.59 0 0 1 .595-.595Z"}),(0,r.Y)("path",{fill:"#EA5E5E",d:"M2.38 23.81h5.953a.59.59 0 0 1 .596.595.59.59 0 0 1-.596.595H2.381a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.596Z"}),(0,r.Y)("path",{fill:"#BF85BF",d:"M16.667 14.286h3.571a.59.59 0 0 1 .595.595.59.59 0 0 1-.595.595h-3.571a.59.59 0 0 1-.596-.595.59.59 0 0 1 .596-.595Z"}),(0,r.Y)("path",{fill:"#EA5E5E",d:"M9.524 14.286h4.762a.59.59 0 0 1 .595.595.59.59 0 0 1-.595.595H9.524a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595Z"}),(0,r.Y)("path",{fill:"#56B3B4",d:"M2.38 14.286h4.763a.59.59 0 0 1 .595.595.59.59 0 0 1-.595.595H2.38a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595Z"}),(0,r.Y)("path",{fill:"#BF85BF",d:"M2.38 19.048h5.953a.59.59 0 0 1 .596.595.59.59 0 0 1-.596.595H2.381a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595ZM2.38 9.524h5.953a.59.59 0 0 1 .596.595.59.59 0 0 1-.596.595H2.381a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595Z"}),(0,r.Y)("path",{fill:"#F7BA3E",d:"M8.333 2.381h11.905a.59.59 0 0 1 .595.595.59.59 0 0 1-.595.595H8.333a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595Z"}),(0,r.Y)("path",{fill:"#EA5E5E",d:"M2.38 2.381h3.572a.59.59 0 0 1 .596.595.59.59 0 0 1-.596.595H2.381a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595Z"}),(0,r.Y)("path",{fill:"#F7BA3E",d:"M7.143 21.429h1.19a.59.59 0 0 1 .596.595.59.59 0 0 1-.596.595h-1.19a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595Z"}),(0,r.Y)("path",{fill:"#56B3B4",d:"M7.143 7.143h1.19a.59.59 0 0 1 .596.595.59.59 0 0 1-.596.595h-1.19a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595ZM2.38 21.429h2.382a.59.59 0 0 1 .595.595.59.59 0 0 1-.595.595H2.38a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595Z"}),(0,r.Y)("path",{fill:"#F7BA3E",d:"M2.38 7.143h2.382a.59.59 0 0 1 .595.595.59.59 0 0 1-.595.595H2.38a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595Z"}),(0,r.Y)("path",{fill:"#56B3B4",d:"M11.905 11.905h9.524a.59.59 0 0 1 .595.595.59.59 0 0 1-.595.595h-9.524a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595Z"}),(0,r.Y)("path",{fill:"#F7BA3E",d:"M5.952 11.905h3.572a.59.59 0 0 1 .595.595.59.59 0 0 1-.595.595H5.952a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595Z"}),(0,r.Y)("path",{fill:"#EA5E5E",d:"M2.38 11.905h1.191a.59.59 0 0 1 .596.595.59.59 0 0 1-.596.595h-1.19a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595Z"}),(0,r.Y)("path",{fill:"#BF85BF",d:"M13.095 4.762h4.762a.59.59 0 0 1 .595.595.59.59 0 0 1-.595.595h-4.762a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595Z"}),(0,r.Y)("path",{fill:"#56B3B4",d:"M2.38 4.762h8.334a.59.59 0 0 1 .595.595.59.59 0 0 1-.595.595H2.381a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595Z"}),(0,r.Y)("path",{fill:"#F7BA3E",d:"M5.952 16.667h10.715a.59.59 0 0 1 .595.595.59.59 0 0 1-.595.595H5.952a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595Z"}),(0,r.Y)("path",{fill:"#BF85BF",d:"M2.38 16.667h1.191a.59.59 0 0 1 .596.595.59.59 0 0 1-.596.595h-1.19a.59.59 0 0 1-.595-.595.59.59 0 0 1 .595-.595Z"}),(0,r.Y)("path",{fill:"#EA5E5E",d:"M16.667 7.143h5.952a.59.59 0 0 1 .595.595.59.59 0 0 1-.595.595h-5.952a.59.59 0 0 1-.596-.595.59.59 0 0 1 .596-.595Z"}),(0,r.Y)("path",{fill:"#F7BA3E",d:"M16.667 9.524h5.952a.59.59 0 0 1 .595.595.59.59 0 0 1-.595.595h-5.952a.59.59 0 0 1-.596-.595.59.59 0 0 1 .596-.595Z"}),(0,r.Y)("path",{fill:"#56B3B4",d:"M2.38 0h14.287a.59.59 0 0 1 .595.595.59.59 0 0 1-.595.595H2.38a.59.59 0 0 1-.595-.595A.59.59 0 0 1 2.38 0Z"})]}))}var k=t(89916),D=t(18920),E=t(69962),R=t(54792),I=t(2111),F=t(42203),T=t(62563),P=t(90042),L=t(84686),U=t(4990),N=t(14996);function O(e){var n=e.module,t=n.name.toLowerCase(),l=t.split(" ");return t.includes("node")?(0,r.Y)(A,{}):t.includes("typescript")?(0,r.Y)(T.A,{}):t.includes("python")||t.includes("pyright")?(0,r.Y)(k.A,{}):t.includes("c++")||t.includes("cpp")||t.includes("clang")||t.includes("ccls")?(0,r.Y)(f.A,{}):t.includes("java")||t.includes("maven")?(0,r.Y)(b.A,{}):t.includes("rust")||t.includes("cargo")?(0,r.Y)(R.A,{}):l.includes("go")||t.includes("gopls")?(0,r.Y)(v.A,{}):t.includes("ruby")?(0,r.Y)(E.A,{}):t.includes("elixir")?(0,r.Y)(g.A,{}):t.includes("bash")?(0,r.Y)(u,{}):t.includes("clojure")?(0,r.Y)(p.A,{}):t.includes("php")?(0,r.Y)(C.A,{}):t.includes("swift")?(0,r.Y)(F.A,{}):t.includes("haskell")?(0,r.Y)(w.A,{}):t.includes("lua")?(0,r.Y)(S.A,{}):t.includes("dart")?(0,r.Y)(m.A,{}):t.includes("css")?(0,r.Y)(h.A,{}):t.includes("html")?(0,r.Y)(y.A,{}):l.includes("r")?(0,r.Y)(D.A,{}):t.includes("nix")?(0,r.Y)(Y.A,{}):t.includes("npm")?(0,r.Y)(x.A,{}):"bun"===t?(0,r.Y)(d.A,{}):t.includes("prettier")?(0,r.Y)(_,{}):t.includes("vue")?(0,r.Y)(P.A,{}):t.includes("svelte")?(0,r.Y)(I.A,{}):t.includes(".replit")?(0,r.Y)(U.A,{}):n instanceof i.api.PackagerOption?(0,r.Y)(L.A,{}):n instanceof i.api.LanguageServerOption?(0,r.Y)(o.A,{}):n instanceof i.api.FormatterOption?(0,r.Y)(a.A,{}):n instanceof i.api.RunOption?(0,r.Y)(N.A,{}):(0,r.Y)(L.A,{})}},10078:(e,n,t)=>{"use strict";t.d(n,{A:()=>er});var r=t(29935),i=t(17459),o=t(12694),a=t(82643),l=t(88263),s=t(21462),c=t(54668),u=t(44114),d=t(82733),p=t(96291),f=t(94077),h=t(31062),m=t(34626),g=t(25804),v=t(53231),w=t(34834),y=t(46531);function b(e,n){var t=[];return t.push((0,y.m_)("interpreter")),t.push((0,y.m_)("entrypoint")),e&&(t.push((0,y.Ez)(e)),t.push((0,y.eH)(e))),n?(t.push((0,y.Up)(n)),t.push((0,y.dA)(n))):(t.push((0,y.m_)("compile")),t.push((0,y.m_)("deployment/build"))),t}var S=t(83150),Y=function(e){return e.Unknown="UNKNOWN",e.Npm="NPM",e.Django="DJANGO",e.Flask="FLASK",e.FastAPI="FASTAPI",e.Pyramid="PYRAMID",e.Starlette="STARLETTE",e.Streamlit="STREAMLIT",e.Rails="RAILS",e.DotNet="DOTNET",e.Cargo="CARGO",e.Make="MAKE",e.RegularRun="REGULAR_RUN",e}({}),A="package.json",x="requirements.txt",C=RegExp("((index)|(main)|(app)|(run)|(start)|(server))\\..+","i"),_=RegExp("((node_modules)|(venv)|(bower_components)|(vendor)|(build)|(dist)|(target)|(\\.git)|(\\.vscode)|(\\.idea)).+$","i");function k(){return(k=(0,r._)(function(e,n){var t,r,i,o,l,s;return(0,a.YH)(this,function(a){switch(a.label){case 0:if(t=e.initRunCommand,r=e.isCompiled,!((o=new Set(i=e.allFiles)).has("Makefile")||o.has("makefile")))return[3,1];return[2,"MAKE"];case 1:if(!o.has(A))return[3,2];return[2,"NPM"];case 2:if(!o.has("Cargo.toml"))return[3,3];return[2,"CARGO"];case 3:if(!r)return[3,4];return[2,"UNKNOWN"];case 4:if(!o.has("config/application.rb"))return[3,5];return[2,"RAILS"];case 5:if(!i.some(function(e){return"csproj"===(0,S.an)(e)}))return[3,6];return[2,"DOTNET"];case 6:if(!o.has(x))return[3,8];return[4,n.readFile(x)];case 7:if(!(l=a.sent()).error){if((s=l.content.toString()).includes("django"))return[2,"DJANGO"];if(s.includes("flask"))return[2,"FLASK"];if(s.includes("fastapi"))return[2,"FASTAPI"];else if(s.includes("pyramid"))return[2,"PYRAMID"];else if(s.includes("starlette"))return[2,"STARLETTE"];else if(s.includes("streamlit"))return[2,"STREAMLIT"]}return[3,9];case 8:if(C.test(t))return[2,"REGULAR_RUN"];a.label=9;case 9:return[2,"UNKNOWN"]}})})).apply(this,arguments)}function D(){return(D=(0,r._)(function(e){var n,t,r,i;return(0,a.YH)(this,function(o){switch(o.label){case 0:return[4,e.readFile(A)];case 1:n=o.sent();try{if(!n.error&&(r=null==(t=JSON.parse(n.content.toString()))?void 0:t.scripts,i=["dev","serve","watch","start:dev","start"].find(function(e){return null==r?void 0:r[e]})))return[2,"npm run ".concat(i)]}catch(e){}return[2,"node index.js"]}})})).apply(this,arguments)}function E(){return(E=(0,r._)(function(e,n,t){var r,i,o,l;return(0,a.YH)(this,function(a){switch(r=n.initRunCommand,o=(i=n.allFiles).find(function(e){return["main.py","app.py"].includes(e)}),e){case"NPM":return[2,function(e){return D.apply(this,arguments)}(t)];case"REGULAR_RUN":var s;if(null==(l=null!=(s=i.filter(function(e){return!_.test(e)}).find(function(e){return C.test(e)}))?s:null))return[2,null];return[2,r.replace(C,l)];case"DJANGO":return[2,"python3 manage.py runserver 0.0.0.0:3000"];case"FLASK":return[2,"python ".concat(o)];case"FASTAPI":case"STARLETTE":return[2,"uvicorn ".concat(null==o?void 0:o.replace(".py",""),":app --host 0.0.0.0 --port 3000")];case"PYRAMID":return[2,"pserve development.ini"];case"STREAMLIT":return[2,"streamlit run ".concat(o)];case"RAILS":return[2,"bundle exec rails server --binding=0.0.0.0"];case"DOTNET":return[2,"dotnet run"];case"CARGO":return[2,"cargo run"];default:return[2,null]}})})).apply(this,arguments)}function R(){return(R=(0,r._)(function(e,n,t,r){var i,o,l;return(0,a.YH)(this,function(a){switch(a.label){case 0:if(0===t.length)return[2,{projType:"UNKNOWN",runCommand:null,compileCommand:null}];return[4,function(e,n){return k.apply(this,arguments)}(i={initRunCommand:e,isCompiled:n,allFiles:t},r)];case 1:return l={projType:o=a.sent()},[4,function(e,n,t){return E.apply(this,arguments)}(o,i,r)];case 2:return[2,(l.runCommand=a.sent(),l.compileCommand=function(e){switch(e){case"MAKE":return"make";case"CARGO":case"DOTNET":case"NPM":return"";default:return null}}(o),l)]}})})).apply(this,arguments)}var I=t(45263),F=t(48521),T=t(36112),P=t(10429),L=t(10342),U=t(77672),N=t(17844),O=t(93629),M=t(79209),B=t(64583),H=(0,M.i7)({"0%":{opacity:.1},"50%":{opacity:1},"100%":{opacity:.1}}),z=(0,B.x)({one:{opacity:.1,animation:"".concat(H," 1.5s ease-in-out infinite"),animationDelay:"0s"},two:{opacity:.1,animation:"".concat(H," 1.5s ease-in-out infinite"),animationDelay:"0.1s"},three:{opacity:"0.1",animation:"".concat(H," 1.5s ease-in-out infinite"),animationDelay:"0.2s"}});let W=function(e){var n=(0,L._)({},(0,U._)(e));return(0,l.FD)(l.FK,{children:[(0,l.Y)("span",(0,O._)((0,N._)({},n),{css:z.one,children:"."})),(0,l.Y)("span",(0,O._)((0,N._)({},n),{css:z.two,children:"."})),(0,l.Y)("span",(0,O._)((0,N._)({},n),{css:z.three,children:"."}))]})};function G(e){var n=e.children;return(0,l.Y)(T.ui,{background:"default",css:[F.wp.borderRadius(8),{width:"100%",height:"calc(100% - ".concat(I.LU.space2,")"),backgroundColor:I.LU.backgroundDefault,overflowY:"auto",marginTop:"0px"}],children:(0,l.Y)(P.S,{css:[{flex:"1 1 auto"}],p:16,justify:"center",align:"center",children:n})})}function V(){return(0,l.Y)(G,{children:(0,l.FD)(P.S,{children:[(0,l.Y)(P.S,{children:"We couldn't read your .replit file"}),(0,l.Y)("a",{css:[F.wp.pt(8),{fontSize:I.LU.fontSizeSmall}],target:"_blank",href:"https://docs.replit.com/replit-workspace/configuring-repl",children:"View docs"})]})})}function j(){return(0,l.Y)(G,{children:(0,l.Y)(P.S,{children:(0,l.FD)("p",{children:["Importing from GitHub",(0,l.Y)(W,{style:{color:I.LU.foregroundDefault}})]})})})}var Z=t(36296),q=t(83966),K=t(46603),$=t(77089),J=t(19652),Q=t(76126),X=t(80762),ee=t(69258),en=P.D.a,et=(0,B.x)({root:[F.wp.maxWidth(420),F.wp.display.flex,F.wp.gap(12),F.wp.py(4),{margin:"0 auto"}],section:[F.wp.display.flex,F.wp.p(12),F.wp.gap(12)],loading:[F.wp.center,F.wp.flex.growAndShrink(1)],multiParagraph:[F.wp.flex.column,F.wp.gap(8),{a:[F.wp.display.inline]}]});let er=function(e){var n,t,y,S,A,x,C,_,k,D,E,T,L,U,N,O,M,B,H,z,W,G,er,ei,eo,ea,el,es,ec,eu,ed,ep,ef,eh,em,eg,ev,ew=e.flow,ey=(0,i._)(e,["flow"]),eb=(n=ey.closeConfigPane,t=ey.openSidebar,y=ey.onNewPaneSelected,S=ey.openConsole,A=(0,g.pE)("gitImport","boolean"),x=(0,h.A)(),_=(C=(0,w.A)()).fs,k=C.dotReplit,E=(D=(0,o._)((0,s.useState)(null),2))[0],T=D[1],U=(L=(0,o._)((0,s.useState)(null),2))[0],N=L[1],O=(0,s.useCallback)(function(){y({type:"codeEditor",data:{path:".replit"}})},[y]),(0,s.useEffect)(function(){if(!E)return k.watch(function(e){T(e.config),"NOT_FOUND"!==e.error&&N(e.error)})},[k,E]),B=(M=(0,o._)((0,s.useState)(!1),2))[0],H=M[1],W=(z=(0,o._)((0,s.useState)(""),2))[0],G=z[1],ei=(er=(0,o._)((0,s.useState)(""),2))[0],eo=er[1],el=(ea=(0,o._)((0,s.useState)(!1),2))[0],es=ea[1],eu=(ec=(0,o._)((0,s.useState)(Y.Unknown),2))[0],ed=ec[1],ef=(ep=(0,o._)((0,s.useState)(!1),2))[0],eh=ep[1],(0,s.useEffect)(function(){if(!ef)return _.watchDir(".git",{onChange:function(e){eh(e.length>0)},onMoveOrDelete:function(){eh(!0)},onError:function(){eh(!1)}})}),(0,s.useEffect)(function(){function e(){return(e=(0,r._)(function(){var e,n,t,r,i,o,l,s,c,u,d,f,h,g,v,w,y;return(0,a.YH)(this,function(a){switch(a.label){case 0:if(!E)return[2];return n=(0,p.a8)(null!=(e=E.run)?e:void 0),r=(0,p.a8)(null!=(t=E.compile)?t:void 0),i=!!E.compile,[4,_.listFiles()];case 1:return o=a.sent(),[4,_.readDir(".git")];case 2:if(l=a.sent(),o.error||null==o.files||A&&l.error)return[2];return s=o.files,[4,function(e,n,t,r){return R.apply(this,arguments)}(n,i,s,_)];case 3:if(u=(c=a.sent()).projType,d=c.runCommand,f=c.compileCommand,h=s.includes("Procfile"),g=function(e,n){return e||n},v=h?g(n,d):g(d,n),w=f||r,G(v||""),eo(w),es(u!==Y.Unknown&&u!==Y.RegularRun),ed(u),!A)return[3,6];return v||m.vF.warn("Failed to autosuggest run command"),u===Y.Unknown&&m.vF.warn("Failed to detect project type"),y=b(v||"",w),[4,k.updateDotReplit(y)];case 4:return a.sent(),[4,_.flush()];case 5:a.sent(),_.persist({skipDebounce:!0}),a.label=6;case 6:return[2]}})})).apply(this,arguments)}(ef||!A)&&function(){e.apply(this,arguments)}()},[k,E,_,ef,A]),eg=(0,s.useCallback)((em=(0,r._)(function(e){var n,t,r,i,o,l;return(0,a.YH)(this,function(a){switch(a.label){case 0:return n=e.run,t=e.compile,r=e.runChanged,i=e.compileChanged,o=e.projType,(0,v.u4)(v.AZ.NIX_GH_IMPORT_USED,{action:f.s.ConfigDone,isCompiled:""!==t,runChanged:r,compileChanged:i,projType:o,replId:x}),l=b(n,t),[4,k.updateDotReplit(l)];case 1:return a.sent(),_.flush().then(function(){_.persist({skipDebounce:!0})}),[2]}})}),function(e){return em.apply(this,arguments)}),[k,_,x]),{fs:_,applyConfig:eg,closeConfigPane:n,dotReplitConfig:E,dotReplitError:U,isApplyingConfig:B,setIsApplyingConfig:H,initialBuild:ei,initialRun:W,isFrameworkRecommended:el,projType:eu,openDotReplit:O,openSidebar:t,openConsole:S}),eS=(0,u.G)(),eY=eS.modules,eA=eS.configs,ex=(0,d.A)(),eC=(0,o._)((0,s.useState)("Overview"),2),e_=eC[0],ek=eC[1],eD=(0,s.useMemo)(function(){return null==eY?void 0:eY.filter(function(e){return"replit"!==e.id})},[eY]),eE=eb.dotReplitConfig,eR=eb.dotReplitError,eI=eb.initialRun,eF=eb.initialBuild,eT=void 0===eF?"":eF,eP=eb.openConsole,eL=eb.openDotReplit,eU=eb.applyConfig,eN=eb.isApplyingConfig,eO=eb.setIsApplyingConfig,eM=eb.closeConfigPane,eB=eb.openSidebar,eH=eb.projType,ez=!!eH&&eH===Y.Rails,eW=(0,c.W)(eI,function(e){if(!e)return{message:"Add a run command"}}),eG=(0,o._)((0,s.useState)(eT),2),eV=eG[0],ej=eG[1];if((0,s.useEffect)(function(){eW.setValue(eI)},[eI]),(0,s.useEffect)(function(){ej(null!=eT?eT:"")},[eT]),eR)return(0,l.Y)(V,{});if(!eE&&"githubImport"===ew)return(0,l.Y)(j,{});if(!eY||!eD||!eA||!ex)return(0,l.Y)(P.S,{css:et.loading,children:(0,l.Y)(X.A,{})});switch(e_){case"ModuleSearch":return(0,l.Y)(q.m,{onBack:function(){return ek("Overview")},disableCategorySelection:!0,initialCategory:"Modules",openConsole:eP});case"Overview":return(0,l.FD)(P.S,{css:et.root,children:[(0,l.FD)(P.S,{css:et.section,children:[(0,l.Y)(Q.Y9,{variant:"headerDefault",level:1,children:"Configure your App"}),(0,l.Y)(J.s,{color:"dimmer",css:et.multiParagraph,children:"githubImport"===ew?(0,l.FD)(l.FK,{children:[(0,l.FD)("p",{children:["Your code was successfully imported from GitHub. We've created a"," ",(0,l.Y)("a",{href:"",onClick:function(e){e.preventDefault(),eL()},children:".replit file"}),", which configures your App's behavior."," ",(0,l.Y)("a",{href:"https://docs.replit.com/replit-workspace/configuring-repl#replit-configuration-file",target:"_blank",rel:"noopener noreferrer",children:"Learn more about .replit files."})]}),(0,l.FD)("p",{children:["To get started, verify our recommended platform dependencies and commands. If you're still deciding, try"," ",(0,l.Y)(en,{onClick:function(){return null==ey?void 0:ey.onNewPaneSelected({type:"ghostwriterChat"})},children:"asking AI"}),"."]})]}):(0,l.Y)(l.FK,{children:(0,l.FD)("p",{children:["Before configuring your Run command, make sure you've installed any"," ",(0,l.Y)(en,{onClick:function(){return null==ey?void 0:ey.onNewPaneSelected({type:"dependencies"})},children:"languages and packages"})," ","necessary for your project. If you're still deciding, try"," ",(0,l.Y)(en,{onClick:function(){return null==ey?void 0:ey.onNewPaneSelected({type:"ghostwriterChat"})},children:"asking AI"}),"."]})})})]}),"githubImport"===ew?(0,l.FD)(P.S,{css:et.section,children:[(0,l.Y)(Q.Y9,{variant:"subheadDefault",level:2,children:"Modules"}),(0,l.Y)(Q.EY,{color:"dimmer",children:"Modules combine support for programming languages, formatters, and packagers."}),(0,l.Y)(Z.A,{modules:eD}),(0,l.Y)(K.$n,{stretch:!0,colorway:"primary",variant:"outlined",type:"submit",text:"Add more modules",onClick:function(){ek("ModuleSearch")}})]}):null,(0,l.FD)(P.S,{css:et.section,children:[(0,l.Y)(P.S,{row:!0,justify:"space-between",children:(0,l.Y)(Q.Y9,{variant:"subheadDefault",level:2,children:"Commands"})}),(0,l.Y)("form",{onSubmit:(ev=(0,r._)(function(e){return(0,a.YH)(this,function(n){switch(n.label){case 0:if(e.preventDefault(),eO(!0),!eW.value)return eW.validate(),[2];return[4,eU({run:eW.value,compile:null!=eV?eV:"",runChanged:eW.value!==eI,compileChanged:eV!==eT,projType:eH})];case 1:return n.sent(),"githubImport"===ew&&(eM(),null==eB||eB()),eO(!1),[2]}})}),function(e){return ev.apply(this,arguments)}),css:[{width:"100%"}],children:(0,l.Y)(P.S,{gap:8,children:(0,l.FD)(P.S,{gap:8,children:[(0,l.FD)(P.S,{gap:8,children:[eT?(0,l.FD)(P.S,{gap:4,children:[(0,l.Y)("label",{htmlFor:"compile-sel",children:"Compile command"}),(0,l.Y)(Q.EY,{variant:"small",color:"dimmest",children:"This is optional, and is executed before your run command."}),(0,l.Y)($.pd,{disabled:eN,id:"compile-sel",type:"text",value:eV,placeholder:"Enter a command to compile the program",onChange:function(e){ej(e.currentTarget.value)},css:{"&:disabled":{color:I.LU.foregroundDimmer}}})]}):null,(0,l.Y)("label",{htmlFor:"run-sel",css:[F.wp.mt(4)],"data-cy":"import-config-run-command",children:"Run command"}),(0,l.Y)($.pd,{disabled:eN,id:"run-sel",dataCy:"import-config-run-command-input",type:"text",value:eW.value,placeholder:"Enter a command to run the program",onChange:function(e){eW.setValue(e.currentTarget.value)},css:[{"&:disabled":{color:I.LU.foregroundDimmer,cursor:"auto"},cursor:"text"}]}),eW.error||!eW.value?(0,l.FD)(P.S,{css:[F.wp.color.accentNegativeDefault,F.wp.rowWithGap(4),F.wp.align.center],children:[(0,l.Y)(ee.A,{size:12}),(0,l.Y)(P.S,{children:eW.error?eW.error.message:"Add a run command"})]}):null]}),(0,l.FD)(Q.EY,{color:"dimmer",variant:"small",children:["Use either a dev server or start command.",(0,l.Y)(en,{css:F.wp.color.accentPrimaryStronger,target:"_blank",href:"https://docs.replit.com/replit-workspace/configuring-repl#run-command",rel:"noopener noreferrer",children:"Not sure what to use or running multiple apps?"})]}),ez?(0,l.Y)(P.S,{children:(0,l.FD)(Q.EY,{variant:"small",color:"dimmest",children:["We detected this is a Rails project. You will need",(0,l.FD)("a",{target:"_blank",rel:"noopener noreferrer",href:"https://docs.replit.com/additional-resources/rails-on-replit",children:[" ","additional changes"," "]}),"to your config files to use all of Replits features."]})}):null,(0,l.Y)(P.S,{css:[F.wp.flex.column,F.wp.pt(16)],children:(0,l.Y)(K.$n,{stretch:!0,colorway:"primary",type:"submit",text:eN?"Saving...":"githubImport"===ew?"Confirm and close":"Save",loading:eN,disabled:eN||!!eW.error||!eW.value,dataCy:"import-config-done"})})]})})})]})]})}}},10101:(e,n,t)=>{"use strict";t.d(n,{sK:()=>A,j$:()=>x,Si:()=>C});var r=t(12694),i=t(21462),o=t(35992),a=t(17844),l=t(12584),s=t(41114),c=t(68197),u=t(11725);function d(){var e=(0,l._)(["\n  fragment OrgPresenceSessionUser on User {\n    id\n    username\n    fullName\n    image\n    url\n  }\n"]);return d=function(){return e},e}function p(){var e=(0,l._)(["\n  fragment OrgPresenceSessionProject on Project {\n    id\n    title\n  }\n"]);return p=function(){return e},e}function f(){var e=(0,l._)(["\n  fragment OrgPresenceSessionRepl on Repl {\n    id\n    title\n    iconUrl\n    ...ReplLinkRepl\n    project {\n      id\n      org {\n        id\n        slug\n      }\n      ...OrgPresenceSessionProject\n    }\n  }\n  ","\n  ","\n"]);return f=function(){return e},e}function h(){var e=(0,l._)(["\n  fragment OrgPresenceSessionItem on OrgPresenceSession {\n    id\n    user {\n      ...OrgPresenceSessionUser\n    }\n    repl {\n      ...OrgPresenceSessionRepl\n    }\n  }\n  ","\n  ","\n"]);return h=function(){return e},e}function m(){var e=(0,l._)(["\n  subscription OrgPresence($input: OrgReplPresenceSessionEventsInput!) {\n    orgReplPresenceSessionEvents(input: $input) {\n      __typename\n      ... on OrgPresenceSessionInitEvent {\n        sessions {\n          ...OrgPresenceSessionItem\n        }\n      }\n      ... on OrgPresenceSessionPingEvent {\n        session {\n          ...OrgPresenceSessionItem\n        }\n      }\n      ... on OrgPresenceSessionLeaveEvent {\n        sessionId\n      }\n    }\n  }\n  ","\n"]);return m=function(){return e},e}var g={},v=(0,s.J1)(d()),w=(0,s.J1)(p()),y=(0,s.J1)(f(),u.r,w),b=(0,s.J1)(h(),v,y),S=(0,s.J1)(m(),b);function Y(e,n){var t=n.id,r=n.repl,i=n.user;if(i&&r){var o={id:t,repl:r,user:i,project:r.project||null},a=e.findIndex(function(e){return e.id===t});-1===a?e.push(o):e.splice(a,1,o)}}var A=function(e){var n,t,l=e.orgId,s=e.projectId,u=(0,r._)((0,i.useState)([]),2),d=u[0],p=u[1];return(0,i.useEffect)(function(){p([])},[l,s]),n={variables:{input:{orgId:l,projectId:s}},onData:function(e){var n,t=null==(n=e.data.data)?void 0:n.orgReplPresenceSessionEvents;t&&p(function(e){return(0,o.jM)(e,function(e){!function(e,n){switch(n.__typename){case"OrgPresenceSessionInitEvent":var t=!0,r=!1,i=void 0;try{for(var o,a=n.sessions[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;Y(e,l)}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}break;case"OrgPresenceSessionPingEvent":Y(e,n.session);break;case"OrgPresenceSessionLeaveEvent":var s=e.findIndex(function(e){return e.id===n.sessionId});if(-1===s)return;e.splice(s,1)}}(e,t)})})}},t=(0,a._)({},g,n),c.R(S,t),d},x=function(e){var n=A({orgId:e});return(0,i.useMemo)(function(){return n.reduce(function(e,n){return n.project&&(e[n.project.id]||(e[n.project.id]={}),e[n.project.id][n.user.id]=n.user),e},{})},[n])},C=function(e){var n=A({orgId:e.orgId,projectId:e.projectId});return(0,i.useMemo)(function(){return n.reduce(function(e,n){return e[n.repl.id]||(e[n.repl.id]={}),e[n.repl.id][n.user.id]=n.user,e},{})},[n])}},10847:(e,n,t)=>{"use strict";t.d(n,{A:()=>rn});var r=t(17844),i=t(93629),o=t(12694),a=t(88263),l=t(71115),s=t(21462),c=t(90629),u=t(35084),d=t(22954),p=t(89956),f=t(36018),h=t(93369),m=t(36640),g=t(31062),v=t(94703),w=t(6450),y=t(53231),b=t(50051),S=t(65181),Y=t(84491),A=t(31969),x=t(83846),C=t(94304),_=t(29935),k=t(82643),D=t(7512),E=t(5504),R=t(51244),I=t(45263),F=t(973),T=t(48521),P=t(76126),L=t(10429),U=t(18870),N=L.D.button,O=function(){return(0,a.Y)(L.S,{css:[T.wp.flex.grow(1),{borderTop:"1px solid ".concat(I.LU.outlineDimmest)}],row:!0})},M=function(e){var n=e.isActive,t=e.isComplete,r=e.children,i=e.onClick,o=e.disabled;return(0,a.FD)(N,{type:"button",css:[T.wp.reset.button,T.wp.position.relative,F.b.nofill,n&&T.wp.backgroundColor.backgroundHigher,T.wp.p(4),T.wp.borderRadius(4)],onClick:i,disabled:o,children:[(0,a.Y)(P.EY,{variant:"small",multiline:!1,children:r}),t?(0,a.Y)(U.A,{size:6,strokeWidth:6,color:I.LU.foregroundDimmer,css:[T.wp.position.absolute,{top:2,right:-2}]}):null]})},B=t(62019),H=t(37743),z=t(1833),W=t(89264),G=t(12584),V=t(41114),j=t(86997);function Z(){var e=(0,G._)(["\n  query ReplPublishInputRepl($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        ...PublishReplData\n      }\n    }\n  }\n  ","\n"]);return Z=function(){return e},e}var q={},K=(0,V.J1)(Z(),C.xS),$=t(54668),J=t(50175),Q=t(63051);function X(){var e=(0,G._)(["\n  mutation CreateTemplateReleaseCreateDeployment(\n    $input: CreateReplDeployemntInput!\n  ) {\n    createReplDeployment(input: $input) {\n      ... on Repl {\n        id\n        ...PublishReplData\n        ...PublishReleaseFormRepl\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n  ","\n"]);return X=function(){return e},e}function ee(){var e=(0,G._)(["\n  mutation CreateTemplateReleaseCreateRelease($input: CreateReplReleaseInput!) {\n    createReplRelease(input: $input) {\n      ... on Repl {\n        id\n        ...PublishReplData\n        ...PublishReleaseFormRepl\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n  ","\n"]);return ee=function(){return e},e}var en={},et=(0,V.J1)(X(),C.xS,Q._O),er=(0,V.J1)(ee(),C.xS,Q._O),ei="Something went wrong publishing your Template";function eo(e){if(e.error)return e.error.message||ei;if(e.data){if("createReplDeployment"in e.data){if("NotFoundError"===e.data.createReplDeployment.__typename||"UnauthorizedError"===e.data.createReplDeployment.__typename||"UserError"===e.data.createReplDeployment.__typename)return e.data.createReplDeployment.message;else if("Repl"!==e.data.createReplDeployment.__typename)return ei}if("createReplRelease"in e.data){if("NotFoundError"===e.data.createReplRelease.__typename||"UnauthorizedError"===e.data.createReplRelease.__typename||"UserError"===e.data.createReplRelease.__typename)return e.data.createReplRelease.message;else if("Repl"!==e.data.createReplRelease.__typename)return ei}}}function ea(){var e,n,t,i,a=(0,o._)((e=(0,r._)({},en,void 0),J.n(et,e)),2),l=a[0],s=a[1],c=(0,o._)((n=(0,r._)({},en,void 0),J.n(er,n)),2),u=c[0],d=c[1];return{createRelease:(t=(0,_._)(function(e){var n,t;return(0,k.YH)(this,function(r){switch(r.label){case 0:if(n=e.input,s.loading||d.loading)return[2,{data:null,error:null}];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,u({refetchQueries:["ReplEnvironmentHeader"],variables:{input:n}})];case 2:return[2,{data:(t=r.sent()).data,error:eo(t)}];case 3:return r.sent(),[2,{data:null,error:ei}];case 4:return[2]}})}),function(e){return t.apply(this,arguments)}),createDeployment:(i=(0,_._)(function(e){var n,t;return(0,k.YH)(this,function(r){switch(r.label){case 0:if(n=e.input,s.loading||d.loading)return[2,{data:null,error:null}];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,l({variables:{input:n}})];case 2:return[2,{data:(t=r.sent()).data,error:eo(t)}];case 3:return r.sent(),[2,{data:null,error:ei}];case 4:return[2]}})}),function(e){return i.apply(this,arguments)}),data:s.data||d.data,loading:s.loading||d.loading,error:eo(s||d)}}function el(){var e=(0,G._)(["\n  mutation SetReplViewSettingsSetSettings($input: SetReplViewSettingsInput!) {\n    setReplViewSettings(input: $input) {\n      ... on ReplViewSettings {\n        id\n        repl {\n          id\n          ...PublishReplData\n        }\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return el=function(){return e},e}var es={},ec=(0,V.J1)(el(),C.xS);function eu(e){var n,t,r,i,o,a,l;return e.error?e.error.message||"Something went wrong saving your Cover page":(null==(t=e.data)||null==(n=t.setReplViewSettings)?void 0:n.__typename)==="NotFoundError"||(null==(i=e.data)||null==(r=i.setReplViewSettings)?void 0:r.__typename)==="UnauthorizedError"||(null==(a=e.data)||null==(o=a.setReplViewSettings)?void 0:o.__typename)==="UserError"?e.data.setReplViewSettings.message:(null==(l=e.data)?void 0:l.setReplViewSettings)&&"ReplViewSettings"!==e.data.setReplViewSettings.__typename?"Something went wrong saving your Cover page":void 0}function ed(){var e=(0,G._)(["\n  mutation UpdateReplUpdate($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        ...PublishReplData\n      }\n    }\n  }\n  ","\n"]);return ed=function(){return e},e}var ep={},ef=(0,V.J1)(ed(),C.xS);function eh(e){return e.message||"Something went wrong saving updates to your App"}var em=function(e){return e[e.Default=0]="Default",e[e.Saved=1]="Saved",e[e.Current=2]="Current",e}({}),eg=t(87762);function ev(e){var n=(0,o._)((0,s.useState)(null),2),t=n[0],a=n[1],l=(0,o._)((0,s.useState)(null),2),c=l[0],u=l[1],d=(0,eg.A)({onUpload:function(n){var t=n.url;a(null),e(t)},onUploadPreview:function(e){var n=e.dataUrl;u(null),a(n)},onError:function(e){a(null),u(e.message)}}),p=(0,s.useCallback)(function(){return u(null)},[]);return(0,i._)((0,r._)({},d),{error:c,clearError:p,previewUrl:t})}var ew=function(e){return e.ReplFile="repl_file",e.ReplImage="repl_image",e}({});function ey(e){return"repl_file"===e||"repl_image"===e}var eb=function(e){function n(){return(0,H._)(this,n),(0,B._)(this,n,arguments)}return(0,z._)(n,e),n}((0,W._)(Error)),eS=function(e){function n(){return(0,H._)(this,n),(0,B._)(this,n,arguments)}return(0,z._)(n,e),n}((0,W._)(Error)),eY=function(e){function n(){return(0,H._)(this,n),(0,B._)(this,n,arguments)}return(0,z._)(n,e),n}((0,W._)(Error));function eA(e){return e?e.length>60?{message:"Title should not be more than ".concat(60," characters")}:void 0:{message:"Give your App a title"}}function ex(e){return e?e.length>1e3?{message:"Description should not be more than ".concat(1e3," characters")}:void 0:{message:"What does this App do?"}}var eC=(0,s.createContext)(null),e_=function(e){var n=(0,s.useContext)(eC);if(!n)throw Error("usePublishField must be used within a PublishInputContext");return n["".concat(e,"Field")]},ek=function(){var e=(0,s.useContext)(eC);if(!e)throw Error("usePublishForm must be used within a PublishInputContext");return e},eD=t(29542),eE=t.n(eD),eR=t(98993),eI=t(94056),eF=t(64583),eT=t(39999),eP=t(33220),eL=t(36112),eU=t(74108),eN=t(31577),eO=(0,eF.x)({flexGrowAndShrink:[T.wp.flex.growAndShrink(1)],truncateText:[{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}]}),eM=function(e){var n=e.repl,t=(0,eU.z9)(n),o=n.url?(0,eU.fJ)(n):"",l=(0,eR.A)({text:"Check out what I just made on Replit: ".concat(n.title),url:o});return(0,a.FD)(eL.ui,{background:"default",css:[T.wp.borderRadius(8),T.wp.overflow("hidden"),T.wp.colWithGap(16),T.wp.width(510),T.wp.p(16),T.wp.flex.growAndShrink(1),(0,x._)({},"@media (max-width: ".concat(eI.LO.tabletMin,"px)"),[{width:"100%"}])],dataCy:"published-repl-share-info-container",children:[(0,a.FD)(L.S,{gap:16,children:[(0,a.Y)(P.EY,{variant:"subheadBig",multiline:!1,children:"Share your App"})," ",(0,a.FD)(L.S,{gap:4,children:[(0,a.Y)(P.EY,{variant:"small",multiline:!1,color:"dimmer",children:"Cover page link"}),(0,a.FD)(L.S,{row:!0,gap:4,align:"center",children:[(0,a.Y)(eE(),(0,i._)((0,r._)({legacyBehavior:!0},t),{css:eO.flexGrowAndShrink,children:(0,a.Y)("a",{css:eO.truncateText,children:o})})),(0,a.Y)(eP.r,{tooltipDelay:"none",tooltipText:"Copy link",textToCopy:o})]})]})]}),(0,a.Y)(L.S,{css:[(0,x._)({alignItems:"flex-end"},T.$_.max("mobileMax"),[T.wp.colWithGap(8),{width:"100%",">*":{width:"100%"}}])],row:!0,gap:12,justify:"end",children:(0,a.Y)(eT.v,{prefetch:!1,href:l,iconLeft:(0,a.Y)(eN.A,{}),text:"Share to X",target:"_blank",css:[(0,x._)({},T.$_.max("mobileMax"),[T.wp.mr(0)])]})})]})},eB=t(62826),eH=t(69258);function ez(e){var n=e.error,t=e.dataCy;return n?(0,a.FD)(L.S,{row:!0,gap:4,align:"center",children:[(0,a.Y)(eH.A,{css:[T.wp.color.accentNegativeStronger]}),(0,a.Y)(P.EY,{css:[T.wp.flex.growAndShrink(1),T.wp.color.accentNegativeStronger],dataCy:t,children:n.message})]}):null}var eW=t(96556),eG=t(77089),eV=L.D.label,ej=(0,s.forwardRef)(function(e,n){return(0,a.Y)(eV,(0,i._)((0,r._)({},e),{ref:n,css:T.wp.color.foregroundDimmer}))}),eZ=function(){var e=(0,eW.c)(),n=e("replName"),t=e("replDescription"),r=ek(),i=r.replTitleField,o=r.replDescriptionField,l=r.isSaving;return(0,a.FD)(L.S,{gap:16,css:[T.wp.flex.growAndShrink(1)],children:[(0,a.FD)(L.S,{gap:4,children:[(0,a.Y)(L.S,{css:[T.wp.align.baseline,T.wp.justify.spaceBetween],row:!0,children:(0,a.Y)(ej,{css:[T.wp.color.foregroundDimmer,{lineHeight:I.LU.lineHeightSmall}],htmlFor:n,children:"Repl name"})}),i.value]}),(0,a.FD)(L.S,{gap:4,children:[(0,a.FD)(L.S,{css:[T.wp.align.baseline,T.wp.justify.spaceBetween],row:!0,children:[(0,a.Y)(ej,{css:[T.wp.color.foregroundDimmer,{lineHeight:I.LU.lineHeightSmall}],htmlFor:t,children:"Repl description"}),(0,a.FD)(P.EY,{multiline:!1,css:{color:o.value.length>1e3?I.LU.accentNegativeStronger:I.LU.foregroundDimmest},children:[o.value.length,"/",1e3]})]}),(0,a.Y)(eG.ov,{id:t,value:o.value,disabled:l,onChange:function(e){o.setValue(e.currentTarget.value)},placeholder:"What does this Repl do?",css:[T.wp.minHeight(128),T.wp.maxHeight(256),{resize:"vertical"}],dataCy:"publish-form-repl-description-input"}),o.touched?(0,a.Y)(ez,{error:o.error,dataCy:"publish-form-repl-description-error"}):null]})]})},eq=t(1350),eK=function(e){var n=e.showPlayButton,t=e.children,r=e.active;return(0,a.FD)("div",{css:{position:"relative",aspectRatio:"".concat(268,"/").concat(164),overflow:"hidden"},children:[(0,a.Y)("div",{css:{position:"absolute",top:"calc(".concat(18," / ").concat(164," * 100%)"),bottom:"calc(".concat(1," / ").concat(164," * 100%)"),left:"calc(".concat(1," / ").concat(268," * 100%)"),right:"calc(".concat(1," / ").concat(268," * 100%)"),borderBottomLeftRadius:4,borderBottomRightRadius:4,overflow:"hidden",backgroundColor:r?I.LU.accentPrimaryDimmest:void 0},children:t}),(0,a.FD)("svg",{viewBox:"0 0 268 164",fill:"none",xmlns:"http://www.w3.org/2000/svg",css:{position:"relative"},children:[(0,a.Y)("rect",{width:"268",height:"17",fill:I.LU.backgroundDefault}),(0,a.Y)("rect",{x:"241.5",y:"4.5",width:"22",height:"10",rx:"2",fill:I.LU.accentPositiveDimmer}),(0,a.Y)("rect",{x:"228.5",y:"4.5",width:"10",height:"10",rx:"2",fill:I.LU.backgroundHighest}),(0,a.Y)("rect",{x:"4.5",y:"4.5",width:"32",height:"10",rx:"2",fill:I.LU.backgroundHighest}),(0,a.Y)("rect",{x:"1",y:"18",width:"266",height:"1",fill:r?I.LU.accentPrimaryDefault:I.LU.outlineDimmer}),n?(0,a.Y)("path",{d:"M142.225 90.5642C142.565 90.7554 142.565 91.2446 142.225 91.4358L127.745 99.5809C127.412 99.7683 127 99.5275 127 99.1451L127 82.8549C127 82.4725 127.412 82.2317 127.745 82.4191L142.225 90.5642Z",fill:I.LU.white}):null,(0,a.Y)("rect",{x:"1",y:"1",width:"266",height:"162",rx:"4",stroke:r?I.LU.accentPrimaryDefault:I.LU.outlineDimmer,strokeWidth:"1"})]})]})},e$=t(39695),eJ=t(83150),eQ=t(79209),eX=t(81526),e0=L.D.ol,e1=L.D.li,e2=(0,eQ.AH)([T.wp.py(4),T.wp.borderRadius(8),{border:"1px solid ".concat(I.LU.outlineDimmest),borderRadius:I.LU.borderRadius8,backgroundColor:I.LU.interactiveBackground,zIndex:T.U3,maxHeight:300,position:"absolute",overflowY:"auto",width:"100%",left:0,top:I.LU.space8,listStyle:"none"}]),e4={backgroundColor:I.LU.interactiveBackgroundActive},e5={backgroundColor:I.LU.accentPrimaryDimmer},e3=(0,eQ.AH)([T.wp.p(8),{":not([disabled])":{cursor:"pointer",":hover":(0,r._)({},e4),":active":(0,r._)({},e5)}}]);function e6(e){var n,t,l,c,u,d,p,f,m,g,v,w,y,b,S,Y,A=e.fs,x=e.initiallySelectedFile,C=e.onFileSelect,D=e.onClear,E=(0,s.useRef)(null),R=(t=(n=(0,o._)((0,s.useState)({isLoading:!0,error:null,files:[]}),2))[0],l=n[1],(0,s.useEffect)(function(){function e(){return(e=(0,_._)(function(){var e,n;return(0,k.YH)(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,A.listFiles()];case 1:if((e=t.sent()).error)throw Error(e.error);return l({isLoading:!1,error:null,files:(null!=(n=e.files)?n:[]).slice().sort(function(e,n){return e.localeCompare(n)}).map(function(e){return{file:e,pathDepth:(0,eJ.jP)(e)}}).sort(function(e,n){return e.pathDepth-n.pathDepth}).map(function(e){return e.file})}),[3,3];case 2:return t.sent(),l({isLoading:!1,error:"Could not load files",files:[]}),[3,3];case 3:return[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[A]),(0,r._)({},t)),I=R.isLoading,F=R.files,U=R.error,N=(u=(c={files:F,inputRef:E,initiallySelectedFile:x}).files,d=c.inputRef,p=c.initiallySelectedFile,m=(f=(0,o._)((0,s.useState)(!1),2))[0],g=f[1],w=(v=(0,o._)((0,s.useState)(u),2))[0],y=v[1],b=(0,s.useCallback)(function(e){return u.filter(function(n){return n.toLowerCase().includes(e.toLowerCase())})},[u]),S=(0,e$.Bp)({items:w,isOpen:m,initialInputValue:p,initialSelectedItem:w.find(function(e){return e===p}),onIsOpenChange:function(e){g(!!e.isOpen)},onInputValueChange:function(e){var n;y(b(null!=(n=e.inputValue)?n:""))}}),Y=(0,s.useCallback)(function(){var e;g(!1),null==(e=d.current)||e.blur()},[d]),(0,s.useEffect)(function(){var e;y(b(null!=(e=S.inputValue)?e:""))},[u,b,S.inputValue]),(0,s.useEffect)(function(){S.selectedItem&&Y()},[S.selectedItem,Y]),(0,i._)((0,r._)({},S),{closeMenu:Y,items:w})),O=(0,h.A)(C);return(0,s.useEffect)(function(){N.selectedItem&&O.current(N.selectedItem)},[N.selectedItem,O]),(0,a.FD)(L.S,{children:[(0,a.Y)(L.S,(0,i._)((0,r._)({},N.getComboboxProps({refKey:"innerRef"})),{css:[T.wp.position.relative],children:(0,a.Y)(eX.I,(0,i._)((0,r._)({},N.getInputProps({onFocus:N.openMenu,ref:E,refKey:"inputRef",disabled:I,placeholder:"Search your files"})),{onClear:function(){var e;N.reset(),null==(e=E.current)||e.focus(),D()},loading:I}))})),(0,a.FD)(L.S,(0,i._)((0,r._)({},N.getMenuProps({refKey:"innerRef"})),{css:[T.wp.position.relative],children:[U?(0,a.Y)(L.S,{p:8,children:(0,a.Y)(P.EY,{multiline:!1,children:"Something went wrong loading your files. Please try again."})}):null,!U&&N.isOpen?(0,a.Y)(e0,{css:[e2],children:N.items.length>0?N.items.map(function(e,n){return(0,a.Y)(e1,(0,i._)((0,r._)({css:[e3,N.highlightedIndex===n&&e4,e===N.selectedItem&&e5]},N.getItemProps({item:e,index:n,onClick:function(){N.closeMenu()}})),{children:(0,a.Y)(P.EY,{multiline:!1,children:e})}),e)}):(0,a.Y)(e1,{css:[T.wp.p(8)],children:(0,a.FD)(P.EY,{multiline:!1,children:['No files found for "',N.inputValue,'"']})})}):null]}))]})}var e8=t(75646),e7=function(e){var n=(0,s.useRef)(null);return{inputProps:{onChange:function(n){var t=n.target,r=t.validity,i=t.files;if(r.valid){var o=i?i[0]:null;o&&e(o)}},"aria-hidden":"true",ref:n,accept:e8.DA.join(","),type:"file"},buttonProps:{onClick:function(){var e;return null==(e=n.current)?void 0:e.click()}},inputRef:n}},e9=function(e){var n=e7(e.onFile),t=n.inputProps,o=n.buttonProps;return(0,a.FD)(a.FK,{children:[(0,a.Y)("input",(0,i._)((0,r._)({},t),{css:{display:"none"}})),e.children(o)]})},ne=t(1998),nn=(0,eQ.AH)({position:"absolute",top:0,left:0,width:"100%",height:"100%"});function nt(e){var n=e.src,t=e.alt;return(0,a.FD)(L.S,{css:[nn,{borderBottomLeftRadius:8,borderBottomRightRadius:8,overflow:"hidden"}],children:[(0,a.Y)(ne.A,{objectFit:"cover",layout:"fill",src:n,alt:t}),(0,a.Y)(L.S,{css:[nn,{background:"radial-gradient(rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.6))",backgroundRepeat:"no-repeat"}]})]})}var nr=t(46603),ni=t(39328),no=t(54087),na=t(56889),nl=t(80762),ns=[{value:ew.ReplImage,text:"Photo"},{value:ew.ReplFile,text:"File"}],nc=function(e){var n,t,l,c,u,d,p=e.fs,f=(0,eW.c)(),h=f("coverPage"),m=ek(),g=m.selectedRepl,v=m.coverFileField,w=m.coverUrlField,y=m.coverDefaultViewField,b=(0,o._)((n=(0,_._)(function(e){var n;return(0,k.YH)(this,function(t){switch(t.label){case 0:if(!(null==e?void 0:e.length)||!(n=e[0]).type.startsWith("image/"))return[2];return[4,A.uploadImage(n,eq.VL.ReplCoverImage)];case 1:return t.sent(),[2]}})}),t=function(e){return n.apply(this,arguments)},c=(l=(0,o._)((0,s.useState)(!1),2))[0],u=l[1],d=(0,s.useRef)(0),[c,(0,s.useMemo)(function(){return{onDragEnter:function(e){e.preventDefault(),d.current++,u(!0)},onDragLeave:function(e){e.preventDefault(),d.current--,0===d.current&&u(!1)},onDrop:function(e){e.preventDefault(),d.current=0,u(!1),e.persist();var n,r,i=Array.from(null!=(r=null==e||null==(n=e.dataTransfer)?void 0:n.files)?r:[]);if(0===i.length)return void t(null);t(i)},onDragOver:function(e){e.preventDefault()}}},[t])]),2),S=b[0],Y=b[1],A=ev(w.setValue);return(0,a.FD)(L.S,(0,i._)((0,r._)({gap:16},Y),{children:[(0,a.FD)(L.S,{gap:12,children:[(0,a.Y)(L.S,{row:!0,gap:8,children:(0,a.Y)(ni.z,{tag:"fieldset",css:[T.wp.rowWithGap(24)],name:h,value:y.value,onChange:function(e){ey(e.target.value)&&y.setValue(e.target.value)},children:ns.map(function(e){return(0,a.FD)(L.S,{row:!0,gap:8,children:[(0,a.Y)(ni.s,{id:f(e.value),value:e.value}),(0,a.Y)("label",{htmlFor:f(e.value),children:e.text})]},e.value)})})}),y.value===ew.ReplImage&&(0,a.FD)(L.S,{gap:4,align:"center",children:[(0,a.Y)(e9,{onFile:function(e){return A.uploadImage(e,eq.VL.ReplCoverImage)},children:function(e){var n=e.onClick;return(0,a.Y)(nr.$n,{onClick:n,colorway:S?"primary":void 0,text:"Upload a cover photo",iconLeft:A.isLoading?(0,a.Y)(nl.A,{}):(0,a.Y)(na.A,{}),stretch:!0})}}),A.error?(0,a.Y)(no.N,{colorway:"negative",icon:(0,a.Y)(eH.A,{}),text:A.error}):null,(0,a.Y)(P.EY,{variant:"small",color:"dimmer",children:"or drag and drop a photo here"})]}),y.value===ew.ReplFile&&(0,a.FD)(L.S,{gap:8,children:[(0,a.Y)(e6,{fs:p,initiallySelectedFile:v.value,onFileSelect:v.setValue,onClear:function(){return v.setValue("")}},null==g?void 0:g.id),(0,a.Y)(ez,{error:v.error})]})]}),y.value===ew.ReplImage&&(0,a.FD)(eK,{active:S,showPlayButton:y.value===ew.ReplImage&&!!w.value&&!A.isLoading,children:[y.value===ew.ReplImage&&w.value?(0,a.Y)(nt,{src:w.value,alt:"cover"}):null,A.isLoading?(0,a.Y)(L.S,{css:[{position:"absolute",inset:0},T.wp.align.center,T.wp.justify.center],children:(0,a.Y)(nl.A,{color:I.LU.white,size:24})}):null]})]}))},nu=t(45015),nd=t(83650),np=function(){e_("iconUrl");var e=ek(),n=e.replIconInput,t=e.replIconUrl;return(0,a.FD)(L.S,{gap:16,align:"center",children:[(0,a.FD)(L.S,{gap:8,children:[(0,a.FD)(L.S,{row:!0,gap:8,children:[(0,a.Y)(e9,{onFile:function(e){return n.uploadImage(e,eq.VL.ReplIcon)},css:T.wp.backgroundColor.accentNegativeDefault,children:function(e){var n=e.onClick;return(0,a.Y)(nr.$n,{onClick:n,text:"Upload image",iconLeft:(0,a.Y)(na.A,{}),css:[T.wp.backgroundColor.backgroundHigher],type:"button",stretch:!0})}}),null]}),n.error?(0,a.Y)(L.S,{children:(0,a.Y)(no.N,{icon:(0,a.Y)(eH.A,{}),colorway:"negative",text:n.error,closable:!0,closeAction:n.clearError})}):null]}),(0,a.Y)(nu.Mn,{alt:"icon",size:84,iconUrl:t,isLoading:!!n.previewUrl,css:[T.wp.backgroundColor.backgroundHigher]})]})},nf=function(){return(0,a.Y)(L.S,{gap:8,children:(0,a.Y)(L.S,{children:(0,a.FD)(P.EY,{children:["See the"," ",(0,a.Y)("a",{href:"https://docs.replit.com/replit-workspace/templates",target:"_blank",children:"template docs"})," ","for a guide on what makes a good template. Please make sure your Repl abides by the"," ",(0,a.Y)("a",{href:"https://blog.replit.com/community-standards",target:"_blank",children:"Replit community rules and guidelines"})," ","before publishing."]})})})},nh=t(23099),nm=t.n(nh),ng=t(91246),nv=t.n(ng),nw=t(17459),ny=t(58370),nb=t(58969),nS=(0,eF.x)({container:[T.wp.maxWidth(100),T.wp.backgroundColor.backgroundDefault,T.wp.borderRadius(4),{aspectRatio:"1 / 1"}],root:[T.wp.flex.grow(1),T.wp.flex.row],stacked:[T.wp.flex.grow(1),T.wp.colWithGap(2),T.wp.justify.spaceEvenly],sideBySide:[T.wp.flex.grow(1),T.wp.rowWithGap(2)],paneGroup:[T.wp.p(2),T.wp.flex.grow(1),T.wp.backgroundColor.backgroundHigher,T.wp.center]});function nY(e){var n=e.layoutState,t=(0,nw._)(e,["layoutState"]);return(0,a.Y)(L.S,(0,i._)((0,r._)({css:nS.container,p:4,row:!0},t),{children:(0,a.Y)(nA,{root:n.layout,paneData:n.data})}))}function nA(e){var n,t=e.root,r=e.paneData;return null==t.tiling?null:(0,a.Y)(L.S,{css:nS.root,children:(null==(n=t.tiling)?void 0:n.type)==="split"?(0,a.Y)(nx,{split:t.tiling,paneData:r,depth:1}):(0,a.Y)(nC,{group:t.tiling,paneData:r,depth:1})})}function nx(e){var n=e.split,t=e.paneData,r=e.depth;return r>2?(0,a.Y)(n_,{}):(0,a.Y)(L.S,{css:n.stacked?nS.stacked:nS.sideBySide,children:n.children.map(function(e){return"split"===e.type?(0,a.Y)(nx,{split:e,paneData:t,depth:r+1}):(0,a.Y)(nC,{group:e,paneData:t,depth:r+1})})})}function nC(e){var n=e.group,t=e.paneData,r=e.depth,i=t[n.panes[n.activeIndex]],o=(0,ny.Vv)(),l=o.Icon({pane:i,size:r>1?12:16}),s=o.getTitle(i);return(0,a.Y)(L.S,{css:nS.paneGroup,title:s,children:l})}function n_(){return(0,a.Y)(L.S,{css:nS.paneGroup,children:(0,a.Y)(nb.A,{})})}var nk=t(86105),nD=(0,eF.x)({layoutButton:[T.wp.borderRadius(4),T.wp.p(8),T.wp.border({width:1,color:I.LU.greyDimmer}),T.wp.backgroundColor.backgroundHigher,T.wp.cursor.pointer,{"&:hover":[T.wp.backgroundColor.backgroundHighest],'&[data-selected="true"]':[T.wp.backgroundColor.accentPrimaryDimmest,T.wp.border({color:I.LU.blueDimmer})],'&[data-selected="true"]:hover':[T.wp.backgroundColor.accentPrimaryDimmer],'&[data-disabled="true"]':[T.wp.backgroundColor.backgroundDefault,T.wp.border({color:I.LU.greyDimmest}),T.wp.color.foregroundDimmer,{"&:hover":{cursor:"not-allowed"}}]}],layoutButtonRow:[T.wp.rowWithGap(8),T.wp.justify.spaceBetween,T.wp.width("100%")],layoutButtonText:[T.wp.flex.growAndShrink(1),T.wp.flex.column,T.wp.justify.center],layoutButtonHeader:[T.wp.mb(4)],layoutPreview:[T.wp.width(80),T.wp.height(80),{alignSelf:"center"}]});function nE(e){var n,t=e.getCurrentLayoutState(),r=nm()(nv()(t,"sidebarPercent"),nv()(e.savedLayoutState,"sidebarPercent")),i=(n=(0,ny.Vv)(),(0,s.useCallback)(function(e){if((null==e?void 0:e.layout.tiling)==null)return"No tiled panes in layout";for(var t=[],r=[e.layout.tiling];r.length>0;){var i=r.pop();(null==i?void 0:i.type)==="paneGroup"?t.push.apply(t,(0,nk._)(i.panes)):(null==i?void 0:i.children)&&r.push.apply(r,(0,nk._)(i.children))}return t.reverse().map(function(t){return n.getTitle(e.data[t])}).join(", ")},[n])),o=(0,s.useMemo)(function(){return i(e.savedLayoutState)},[i,e.savedLayoutState]),l=(0,s.useMemo)(function(){return i(t)},[t,i]);return(0,a.FD)(L.S,{gap:8,children:[(0,a.Y)(P.EY,{variant:"small",children:"Choose an initial workspace layout for new Apps using this template."}),(0,a.Y)(eL.ui,{css:nD.layoutButton,"data-selected":e.templateLayout.value===em.Default,onClick:function(){return e.templateLayout.setValue(em.Default)},children:(0,a.Y)(L.S,{css:nD.layoutButtonRow,children:(0,a.FD)(L.S,{css:nD.layoutButtonText,children:[(0,a.Y)(P.Y9,{level:3,variant:"text",css:nD.layoutButtonHeader,children:"Default layout"}),(0,a.Y)(P.EY,{multiline:!0,variant:"small",children:"User's default layout (either side-by-side or stacked)."})]})})}),e.savedLayoutState?(0,a.Y)(eL.ui,{css:nD.layoutButton,"data-selected":e.templateLayout.value===em.Saved,onClick:function(){return e.templateLayout.setValue(em.Saved)},children:(0,a.FD)(L.S,{css:nD.layoutButtonRow,children:[(0,a.FD)(L.S,{css:nD.layoutButtonText,children:[(0,a.Y)(P.Y9,{level:3,variant:"text",css:nD.layoutButtonHeader,children:"Saved layout"}),(0,a.Y)(P.EY,{variant:"small",children:o})]}),(0,a.Y)(nY,{css:nD.layoutPreview,layoutState:e.savedLayoutState})]})}):null,(0,a.Y)(eL.ui,{css:nD.layoutButton,"data-selected":e.templateLayout.value===em.Current,"data-disabled":r,onClick:r?void 0:function(){return e.templateLayout.setValue(em.Current)},children:(0,a.FD)(L.S,{css:nD.layoutButtonRow,children:[(0,a.FD)(L.S,{css:nD.layoutButtonText,children:[(0,a.Y)(P.Y9,{level:3,variant:"text",css:nD.layoutButtonHeader,children:"Current layout"}),(0,a.Y)(P.EY,{variant:"small",children:r?"Same as saved layout":l})]}),(0,a.Y)(nY,{css:nD.layoutPreview,layoutState:t})]})})]})}function nR(e){var n=e.getCurrentLayoutState,t=e_("layout");return(0,a.Y)(L.S,{gap:8,children:null==n?(0,a.Y)(P.EY,{children:"Initial layouts may only be customized in the desktop environment."}):(0,a.Y)(nE,{templateLayout:t,getCurrentLayoutState:n})})}var nI=t(51094),nF=t(69549),nT=t(70079),nP=t(55903),nL=t(76139),nU=t(89793),nN=t(3218),nO=t(19906),nM=t(59172),nB=t(96283),nH=t(6034),nz=t(37037),nW=t(83647),nG=(0,eF.x)({rootContainer:[(0,x._)({},(0,nB.wm)("tabletMin"),{display:"flex"}),T.wp.flex.growAndShrink(1),T.wp.p(16),T.wp.colWithGap(12),T.wp.align.center,T.wp.display.none],heading:[T.wp.width("100%"),{fontWeight:I.LU.fontWeightMedium}],contentContainer:[T.wp.width("100%"),T.wp.maxWidth(432),T.wp.position.relative],topShadow:{position:"absolute",zIndex:2,inset:0,boxShadow:"inset 0 48px 24px -24px "+I.LU.backgroundRoot+", inset 0 -48px 24px -24px "+I.LU.backgroundRoot},feed:[T.wp.height(416),T.wp.colWithGap(24),T.wp.justify.center,T.wp.overflow("hidden"),T.wp.backgroundColor.backgroundRoot],loadingContainer:[T.wp.flex.grow(1),T.wp.align.center,T.wp.justify.center]}),nV=L.D.form,nj=function(e){var n=e.user,t=ek(),o=t.selectedRepl,l=t.replTitleField,s=t.replDescriptionField,c=t.replIconUrl;return(0,a.FD)(eL.ui,{background:"root",css:nG.rootContainer,children:[(0,a.Y)(P.EY,{multiline:!1,variant:"small",color:"dimmer",css:nG.heading,children:"Preview"}),(0,a.FD)(L.S,{css:nG.contentContainer,children:[(0,a.Y)(L.S,{css:nG.topShadow}),(0,a.FD)(L.S,{css:nG.feed,children:[(0,a.Y)(eB.v,{}),o&&c?(0,a.Y)(eB.A,{post:{user:n,repl:(0,i._)((0,r._)({},o),{title:l.value,iconUrl:c,description:s.value,isTemplate:!0})}}):(0,a.Y)(L.S,{css:nG.loadingContainer,children:(0,a.Y)(nl.A,{})}),(0,a.Y)(eB.v,{})]})]})]})},nZ=["Basics","Icon","Cover page","Layout","Publishing"],nq=(0,eF.x)({rootContainer:[T.wp.borderRadius(8),T.wp.flex.row,T.wp.overflow("hidden"),(0,x._)({},(0,nB.wm)("tabletMax"),{minWidth:850})],formContainer:[T.wp.minWidth(320),T.wp.flex.growAndShrink(1),(0,x._)({},(0,nB.wm)("tabletMin"),{maxWidth:370})],form:[T.wp.colWithGap(16),T.wp.flex.growAndShrink(1)],formSectionsNavigation:[T.wp.flex.growAndShrink(1)],loadingContainer:[T.wp.color.foregroundDimmer],submitButton:[{boxShadow:"0px 0px 16px 0px ".concat(I.LU.accentPrimaryDimmer," !important")}]});function nK(e){var n,t,i,l,c,d,p,f,m,g,v,w,b,S,Y,A,x,C,I,F,U,N,B,H=e.replId,z=e.currentUser,W=e.source,G=e.getDesktopLayoutState,V=(n=(0,_._)(function(e){var n;return(0,k.YH)(this,function(t){switch(t.label){case 0:if(!eN)return[2,{message:"Could not get file"}];if(!e)return[2,{message:"File path cannot be blank"}];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,eN.stat(e)];case 2:if(!(n=t.sent()).exists||n.type!==D.pt.File)return[2,{message:"File does not exist"}];return[3,4];case 3:return t.sent(),[2,{message:"Could not get file"}];case 4:return[2]}})}),function(e){return n.apply(this,arguments)}),Z=(0,R.a)({tablet:!0}),Q=(0,E._P)({type:"boolean",controlName:"flag-template-layout-author"}),X=!Z&&Q&&null!=G,ee=function(e){var n,t,i,a,l,c,d,p,f=(n={variables:{id:e.replId}},t=(0,r._)({},q,n),j.I(K,t)),m=(null==(i=f.data)?void 0:i.repl.__typename)==="Repl"?f.data.repl:null,g=!!(null==m?void 0:m.publishedAs),v=(0,$.W)("",eA),w=(0,$.W)("",ex),b=(0,$.W)(null,function(){return null}),S=(0,$.W)("repl_image",function(){return null}),Y=(0,$.W)(null,function(){return null}),A=(0,$.W)("",e.fileValidator),x=(0,$.W)(em.Default,function(){}),C=[v,w,b,S,Y,A,x],D=function(){var e,n=(0,o._)((e=(0,r._)({},es,void 0),J.n(ec,e)),2),t=n[0],i=n[1];function a(){return(a=(0,_._)(function(e){var n;return(0,k.YH)(this,function(r){switch(r.label){case 0:if(i.loading)return[2,{data:null,error:null}];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,t({variables:{input:e}})];case 2:return[2,{data:(n=r.sent()).data,error:eu(n)}];case 3:return r.sent(),[2,{data:null,error:"Something went wrong saving your Cover page"}];case 4:return[2]}})})).apply(this,arguments)}return{data:i.data,loading:i.loading,error:eu(i),setReplViewSettings:function(e){return a.apply(this,arguments)}}}(),E=function(){var e,n=(0,o._)((e=(0,r._)({},ep,void 0),J.n(ef,e)),2),t=n[0],i=n[1];function a(){return(a=(0,_._)(function(e){return(0,k.YH)(this,function(n){switch(n.label){case 0:if(i.loading)return[2,{data:null,error:null}];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,t({variables:{input:e}})];case 2:return[2,{data:n.sent().data,error:null}];case 3:return[2,{data:null,error:eh(n.sent())}];case 4:return[2]}})})).apply(this,arguments)}return{data:i.data,loading:i.loading,error:i.error&&eh(i.error),updateRepl:function(e){return a.apply(this,arguments)}}}(),R=ea(),I=(null==m||null==(a=m.replViewSettings)?void 0:a.defaultView)&&ey(m.replViewSettings.defaultView)?m.replViewSettings.defaultView:"repl_image",F=(0,h.A)(v.setValue),T=(0,h.A)(w.setValue),P=(0,h.A)(b.setValue),L=(0,h.A)(Y.setValue),U=(0,h.A)(S.setValue),N=(0,h.A)(A.setValue);(0,s.useEffect)(function(){var e,n,t,r;m&&(U.current(I),N.current(null!=(n=null==(e=m.replViewSettings)?void 0:e.replFile)?n:""),F.current(m.isRenamed?m.title:"",{preventTouch:!0}),T.current(null!=(t=m.description)?t:"",{preventTouch:!0}),P.current(m.iconUrl.endsWith(".svg")?null:m.iconUrl),L.current(null!=(r=m.imageUrl)?r:null))},[m,L,P,F,T,I,U,N]);var O=ev(b.setValue),M=O.previewUrl||b.value||(null==m?void 0:m.iconUrl)||(null==m?void 0:m.templateInfo.iconUrl),B=null!=(p=null==(d=C.filter(function(e){return(e!==A||"repl_file"===S.value)&&e.error}))||null==(c=d[0])||null==(l=c.error)?void 0:l.message)?p:null;function H(){return(H=(0,_._)(function(){var e,n,t,r,i,o,a,l,s;return(0,k.YH)(this,function(c){switch(c.label){case 0:if(!m)throw new eb("Missing repl");if(n=m.title!==v.value,t=m.description!==w.value,r=m.iconUrl!==b.value,i="repl_image"===S.value&&m.imageUrl!==Y.value,o=A.value&&"repl_file"===S.value&&(null==(e=m.replViewSettings)?void 0:e.replFile)!==A.value,a=S.value&&I!==S.value,!(n||t||r))return[3,2];if(v.error||w.error||b.error)throw new eb;return[4,E.updateRepl({id:m.id,title:n?v.value:void 0,description:t?w.value:void 0,iconUrl:r?b.value:void 0})];case 1:if((l=c.sent()).error)throw new eS(l.error);c.label=2;case 2:if(!(a||i||o))return[3,4];if("repl_image"===S.value&&Y.error||"repl_file"===S.value&&A.error)throw new eb;return[4,D.setReplViewSettings({replId:m.id,defaultView:"repl_image"===S.value?u.Qj.ReplImage:u.Qj.ReplFile,replImage:i?Y.value:void 0,replFile:o?A.value:void 0})];case 3:if((s=c.sent()).error)throw new eS(s.error);c.label=4;case 4:return[2]}})})).apply(this,arguments)}function z(){return(z=(0,_._)(function(){var n,t,r;return(0,k.YH)(this,function(i){switch(i.label){case 0:if(!m)throw new eb("Missing repl");if(B)throw new eb(null!=B?B:"Something went wrong");return n=null,e.canAuthorTemplateLayout&&x.value===em.Current&&(n=null==(t=e.getDesktopLayoutState)?void 0:t.call(e)),[4,R.createDeployment({input:{replId:m.id,description:w.value,iconUrl:M||m.iconUrl,initialLayoutState:n}})];case 1:if((r=i.sent()).error)throw new eY(r.error);return(0,y.u4)(y.AZ.POST_MADE,{source:e.source,replType:"template_repl",title:v.value,description:w.value,defaultView:S.value}),[2]}})})).apply(this,arguments)}var W=E.loading||D.loading,G=E.error||D.error,V=R.loading,Z=R.error;return{selectedRepl:m,isReplLoading:f.loading,replLoadingError:f.error,replTitleField:v,replDescriptionField:w,iconUrlField:b,coverDefaultViewField:S,coverUrlField:Y,coverFileField:A,layoutField:x,replIconInput:O,replIconUrl:M,inputError:B,save:function(){return H.apply(this,arguments)},isSaving:W,savingError:G,publishInitialRelease:function(){return z.apply(this,arguments)},isPublishing:V,publishingError:Z,isPublished:g}}({replId:H,fileValidator:V,source:W,canAuthorTemplateLayout:X,getDesktopLayoutState:G}),en=ee.selectedRepl,et=ee.isReplLoading,er=ee.replLoadingError,ei=ee.replTitleField,eo=ee.replDescriptionField,el=ee.iconUrlField,ed=ee.coverDefaultViewField,eg=ee.coverUrlField,e_=ee.coverFileField,ek=ee.layoutField,eD=ee.save,eE=ee.isSaving,eR=ee.savingError,eI=ee.publishInitialRelease,eF=ee.isPublishing,eT=ee.publishingError,eP=ee.isPublished,eU=(i=(t={repl:en,currentUser:z}).repl,l=t.currentUser,d=(c=(0,o._)((0,nN.eY)(),2))[0],p=c[1],f=(0,nN.ZM)(),g=(m=(0,o._)((0,s.useState)(function(){var e,n,t;return e=(0,nF.Ay)({onUnrecoverableError:(0,nU.A)({throwBsod:p,origin:"Publish: services/onUnrecoverableError"})}),n=(0,nL.A)({container:e}),t=(0,nI.A)({container:e,fs:n}),{container:e,fs:n,dotReplit:t}}),1)[0]).container,v=m.fs,w=m.dotReplit,S=(b=(0,o._)((0,s.useState)(function(){return g.getConnectionState()===nF.KN.CONNECTED}),2))[0],Y=b[1],A=(0,nT.$)(i?{repl:i,currentUser:l}:null),x=(0,nP.L)(),(0,s.useEffect)(function(){if(i&&A&&g.getConnectionState()===nF.KN.DISCONNECTED)return g.connect({context:A,getMinimumRetryDelayMs:x}),function(){return g.close()}},[i,g,A]),(0,s.useEffect)(function(){return g.onConnectionStateChanged(function(e){Y(e===nF.KN.CONNECTED)})},[g]),{isConnected:S,container:g,fs:v,dotReplit:w,bsodId:null==d?void 0:d.eventId,devClearBsod:function(){return f()}}),eN=eU.fs,eO=eU.dotReplit,eB=eU.bsodId,ez=X&&!eP?[]:["Layout"],eW=(0,o._)((0,s.useState)(0),2),eG=eW[0],eV=eW[1],ej=nZ[eG],eq=eG===nZ.length-1,eK=(0,o._)((0,s.useState)({show:!1,isUpdate:!1}),2),e$=eK[0],eJ=eK[1],eQ=(0,o._)((0,s.useState)(function(){return Array(nZ.length).fill(!1)}),2),eX=eQ[0],e0=eQ[1],e1=(0,s.useCallback)(function(e,n){eX[e]=n,e0(eX)},[eX]);(0,s.useEffect)(function(){ee.replTitleField.value&&ee.replDescriptionField.value?e1(0,!0):e1(0,!1),ee.iconUrlField.value?e1(2,!0):e1(2,!1),ee.coverDefaultViewField.value===ew.ReplImage&&ee.coverUrlField.value||ee.coverDefaultViewField.value===ew.ReplFile&&ee.coverFileField.value?e1(3,!0):e1(3,!1)},[eX,ee,e1]);var e2=(I=(C=(0,o._)((0,s.useState)({isLoading:!0,error:null,entryPoint:null}),2))[0],F=C[1],(0,s.useEffect)(function(){function e(){return(e=(0,_._)(function(){var e,n,t;return(0,k.YH)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,eO.getConfig()];case 1:if((n=r.sent()).error)throw Error(n.errorMessage);return F({isLoading:!1,error:null,entryPoint:null!=(t=null==n||null==(e=n.config)?void 0:e.entrypoint)?t:null}),[3,3];case 2:return r.sent(),F({isLoading:!1,error:"Could not load .replit config",entryPoint:null}),[3,3];case 3:return[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[eO]),(0,r._)({},I));(0,s.useEffect)(function(){e2.isLoading||!e2.entryPoint||e_.value||e_.setValue(e2.entryPoint)},[e2.isLoading,e2.entryPoint,e_]);var e4=(0,o._)((0,s.useState)(!1),2),e5=e4[0],e3=e4[1];(0,s.useEffect)(function(){e5||H&&(et||eP)||(e3(!0),(0,y.u4)(y.AZ.PUBLISH_SELECTED,{source:W}))},[e5,W,H,et,eP]);var e6=(0,h.A)(!!(null==en?void 0:en.publishedAs)),e8=(0,h.A)(ej);if((0,s.useEffect)(function(){return function(){e6.current||(0,y.u4)(y.AZ.PUBLISH_FLOW_EXITED,{source:W,lastSectionVisited:e8.current})}},[W,e6,e8]),eB)return(0,a.Y)(nO.A,{});if(e$.show&&en)return(0,a.Y)(eM,{repl:en});var e7={Basics:{hasError:!!(ei.error||eo.error),isValid:(0,_._)(function(){return(0,k.YH)(this,function(e){switch(e.label){case 0:return[4,Promise.all([ei.validate(),eo.validate()])];case 1:return[2,e.sent().every(function(e){return!e})]}})})},Icon:{hasError:!!el.error,isValid:(0,_._)(function(){return(0,k.YH)(this,function(e){switch(e.label){case 0:return[4,el.validate()];case 1:return[2,!e.sent()]}})})},"Cover page":{hasError:!!(ed.value===ew.ReplImage?eg.error:e_.error),isValid:(0,_._)(function(){var e;return(0,k.YH)(this,function(n){switch(n.label){case 0:if(ed.value!==ew.ReplImage)return[3,2];return[4,eg.validate()];case 1:return e=!n.sent(),[3,4];case 2:return[4,e_.validate()];case 3:e=!n.sent(),n.label=4;case 4:return[2,e]}})})},Layout:{hasError:!!ek.error,isValid:(0,_._)(function(){return(0,k.YH)(this,function(e){switch(e.label){case 0:return[4,ek.validate()];case 1:return[2,!e.sent()]}})})},Publishing:{hasError:!1,isValid:(0,_._)(function(){return(0,k.YH)(this,function(e){return[2,!0]})})}},e9=e7[ej].hasError,ne=e7[ej].isValid,nn=null!=(B=nZ.find(function(e){return e7[e].hasError}))?B:null,nt=null;en?er||eR||eT?nt="Something went wrong - please try again":e9&&(nt="Please fill out the the form"):nt="Please select a Repl";var ni=!!(!en||e9||er||et||eE||eF),na=(U=(0,_._)(function(e){var n;return(0,k.YH)(this,function(t){switch(t.label){case 0:if(n=ni)return[3,2];return[4,ne()];case 1:n=!t.sent(),t.label=2;case 2:if(n)return[2];if(!ez.includes(nZ[e]))return[3,4];return[4,na(e+1)];case 3:case 6:return t.sent(),[2];case 4:return t.trys.push([4,6,,7]),eV(e),[4,eD()];case 5:return t.sent(),[3,7];case 7:return[2]}})}),function(e){return U.apply(this,arguments)}),ns=eG>0;return(0,a.Y)(eC.Provider,{value:ee,children:(0,a.FD)(eL.ui,{css:nq.rootContainer,background:"default",dataCy:"publish-form-container",children:[(0,a.FD)(L.S,{css:nq.formContainer,p:16,gap:12,children:[(0,a.Y)(P.EY,{variant:"subheadBig",multiline:!1,children:eP?"Edit publish settings":"Publish template"}),(0,a.FD)(nV,{onSubmit:(N=(0,_._)(function(e){var n,t,r,i,o,a;return(0,k.YH)(this,function(l){switch(l.label){case 0:if(e.preventDefault(),!eq)return[3,13];n=!0,t=!1,r=void 0,l.label=1;case 1:l.trys.push([1,6,7,8]),i=nZ[Symbol.iterator](),l.label=2;case 2:if(n=(o=i.next()).done)return[3,5];return[4,e7[o.value].isValid()];case 3:if(!l.sent())return[2];l.label=4;case 4:return n=!0,[3,2];case 5:return[3,8];case 6:return a=l.sent(),t=!0,r=a,[3,8];case 7:try{n||null==i.return||i.return()}finally{if(t)throw r}return[7];case 8:if(eP)return[3,10];return[4,eI()];case 9:return l.sent(),eJ({show:!0,isUpdate:!1}),[3,12];case 10:return[4,eD()];case 11:l.sent(),eJ({show:!0,isUpdate:!0}),l.label=12;case 12:return[3,14];case 13:na(eG+1),l.label=14;case 14:return[2]}})}),function(e){return N.apply(this,arguments)}),css:nq.form,children:[(0,a.Y)(L.S,{row:!0,gap:4,align:"center",children:nZ.map(function(e,n){return ez.includes(e)?null:(0,a.FD)(s.Fragment,{children:[0!==n&&(0,a.Y)(O,{}),(0,a.Y)(M,{isActive:eG===n,isComplete:eX[n],onClick:function(){return na(n)},disabled:ni,children:e})]},e)})}),(0,a.FD)(L.S,{css:nq.formSectionsNavigation,children:["Basics"===ej&&(0,a.Y)(eZ,{}),"Icon"===ej&&(0,a.Y)(np,{}),"Cover page"===ej&&(0,a.Y)(nc,{fs:eN}),"Layout"===ej&&(0,a.Y)(nR,{getCurrentLayoutState:G}),"Publishing"===ej&&(0,a.Y)(nf,{})]}),(0,a.FD)(L.S,{children:[eq&&nn&&nn!==ej?(0,a.Y)(no.N,{colorway:"negative",icon:(0,a.Y)(eH.A,{}),text:"Please fix error in ".concat(nn," section")}):null,eR?(0,a.Y)(no.N,{colorway:"negative",icon:(0,a.Y)(eH.A,{}),text:eR}):null,eT?(0,a.Y)(no.N,{colorway:"negative",icon:(0,a.Y)(eH.A,{}),text:eT}):null]}),(0,a.FD)(L.S,{css:[ns?T.wp.justify.spaceBetween:T.wp.justify.end],row:!0,gap:8,align:"center",children:[ns?(0,a.Y)(nr.$n,{type:"button",iconLeft:(0,a.Y)(nH.A,{}),disabled:ni,onClick:function(){return na(eG-1)},text:"Back"}):null,eE?(0,a.Y)(L.S,{css:nq.loadingContainer,row:!0,gap:4,children:(0,a.Y)(nl.A,{})}):null,(0,a.FD)(nM.m_,{tooltip:nt,placement:"bottom",isDisabled:!nt,children:[!eq&&(0,a.Y)(nr.$n,{type:"submit",colorway:"primary",iconLeft:(0,a.Y)(nz.A,{}),disabled:ni,text:"Next",dataCy:"publish-form-next-button"}),eq&&!eP?(0,a.Y)(nr.$n,{type:"submit",colorway:"primary",css:nq.submitButton,iconLeft:eF?(0,a.Y)(nl.A,{}):(0,a.Y)(nW.A,{}),disabled:!!(ni||nn),text:"Submit",dataCy:"publish-form-publish-button"}):null,eq&&eP?(0,a.Y)(nr.$n,{type:"submit",colorway:"primary",iconLeft:eF?(0,a.Y)(nl.A,{}):(0,a.Y)(nW.A,{}),disabled:!!(ni||nn),text:"Save"}):null]})]})]})]}),(0,a.Y)(nj,{user:z})]})})}var n$=(0,eF.x)({loadingContainer:[T.wp.center,T.wp.p(32),T.wp.width(512),(0,x._)({},"@media (max-width: ".concat(eI.LO.tabletMin,"px)"),[{width:"100%"}])],errorContainer:[T.wp.center,T.wp.p(32)]});function nJ(e){var n,t,r=e.replId,i=e.source,o=e.getDesktopLayoutState,l=(0,C.Df)(),s=(null==(t=l.data)||null==(n=t.currentUser)?void 0:n.__typename)==="CurrentUser"?l.data.currentUser:null;return l.loading?(0,a.Y)(L.S,{css:n$.loadingContainer,children:(0,a.Y)(nl.A,{})}):l.error||!s?(0,a.Y)(L.S,{css:n$.errorContainer,children:(0,a.Y)(P.EY,{multiline:!1,children:"Something went wrong, please try again."})}):(0,a.Y)(nK,{source:i,replId:r,currentUser:s,getDesktopLayoutState:o})}var nQ=t(86020),nX=t(64513);function n0(){var e=(0,G._)(["\n  mutation RevertTemplateRelease($input: RevertReplReleaseInput!) {\n    revertReplRelease(input: $input) {\n      ... on Repl {\n        id\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n"]);return n0=function(){return e},e}var n1={},n2=(0,V.J1)(n0());function n4(){var e=(0,G._)(["\n  query PendingChanges($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        deployment {\n          id\n          activeRelease {\n            id\n            pendingChanges {\n              fileName\n              changeType\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return n4=function(){return e},e}var n5={},n3=(0,V.J1)(n4()),n6=t(70548),n8=t(33999),n7=L.D.form;function n9(e){if(0===e.length)return{message:"You cannot leave this empty."}}function te(e){var n,t,r=e.changeType;return r===u.qZ.NewFile?(n=I.LU.accentPositiveStronger,t="Added"):r===u.qZ.DeletedFile?(n=I.LU.accentNegativeStronger,t="Deleted"):(n=I.LU.foregroundDefault,t="Changed"),(0,a.Y)(P.EY,{variant:"small",css:[{color:n}],multiline:!1,children:t})}var tn=(0,eF.x)({loadingContainer:[T.wp.center],container:[{display:"grid",gridTemplateColumns:"1fr 1fr",gap:I.LU.space8}]});function tt(e){var n=e.pendingChangesState,t=e.isReplitTemplate;if(n.loading)return(0,a.Y)(L.S,{css:tn.loadingContainer,children:(0,a.Y)(nl.A,{})});if(n.error)return(0,a.Y)(no.N,{icon:(0,a.Y)(eH.A,{}),text:n.error.message||"Could not load modified files - please try again.",colorway:"negative"});if(!n.pendingChanges||0===n.pendingChanges.length)return t?null:(0,a.Y)(P.EY,{children:"No file changes to publish."});var r=n.pendingChanges,i=r.slice(0,15);return(0,a.FD)(L.S,{css:tn.container,children:[i.map(function(e){return(0,a.FD)(s.Fragment,{children:[(0,a.FD)(L.S,{row:!0,gap:4,align:"center",children:[(0,a.Y)(n8.A,{size:12,path:e.fileName}),(0,a.Y)(P.EY,{multiline:!1,children:e.fileName})]},e.fileName),(0,a.Y)(te,{changeType:e.changeType})]},e.fileName)}),r.length>i.length&&(0,a.FD)(P.EY,{multiline:!1,children:["And ",r.length-i.length," other files..."]})]})}var tr=(0,eF.x)({header:[T.wp.mb(16)],grid:[{display:"grid",gridTemplateColumns:"2fr 3fr 1fr",gap:I.LU.space8}],activeLabel:[T.wp.p(4),{display:"flex"}]});function ti(e){var n,t=e.repl,i=function(){var e,n,t=(0,o._)((e={refetchQueries:["ReplEnvironmentHeader"]},n=(0,r._)({},n1,e),J.n(n2,n)),2),i=t[0];function a(){return(a=(0,_._)(function(e){var n;return(0,k.YH)(this,function(t){switch(t.label){case 0:return[4,i({variables:{input:e.input}})];case 1:return[2,{data:(n=t.sent()).data,error:function(e){if(!e.data)return null;var n=e.data;if("revertReplRelease"in n){if("NotFoundError"===n.revertReplRelease.__typename||"UnauthorizedError"===n.revertReplRelease.__typename||"UserError"===n.revertReplRelease.__typename)return n.revertReplRelease.message;else if("Repl"!==n.revertReplRelease.__typename)return"Something went wrong reverting your Template"}}(n)}]}})})).apply(this,arguments)}return{revertTemplateRelease:function(e){return a.apply(this,arguments)},state:t[1]}}(),l=(n=(0,_._)(function(e){return(0,k.YH)(this,function(n){switch(n.label){case 0:return[4,i.revertTemplateRelease({input:{replId:t.id,releaseId:e}})];case 1:return n.sent(),[2]}})}),function(e){return n.apply(this,arguments)});return(0,a.FD)(L.S,{children:[(0,a.Y)(P.Y9,{level:1,variant:"subheadBig",css:tr.header,children:"Existing Releases"}),(0,a.Y)(L.S,{css:tr.grid,children:t.releases.items.map(function(e){var n,r;return(0,a.FD)(s.Fragment,{children:[(0,a.Y)("span",{children:(0,nQ.A)(new Date(e.timeCreated),"do MMM, hh:mm a")}),(0,a.Y)("span",{children:e.description}),(0,a.Y)("span",{style:{justifySelf:"end"},children:e.id===(null==(r=t.deployment)||null==(n=r.activeRelease)?void 0:n.id)?(0,a.Y)("span",{css:tr.activeLabel,children:"(active)"}):(0,a.Y)(nr.$n,{text:"revert",colorway:"primary",size:"small",onClick:function(){l(e.id)}})})]},e.id)})})]})}var to=(0,eF.x)({container:[T.wp.colWithGap(24),T.wp.p(16)],descriptionLabel:[T.wp.color.foregroundDimmer,{fontSize:I.LU.fontSizeSmall,lineHeight:I.LU.lineHeightSmall}],descriptionInput:[T.wp.width("100%"),T.wp.minHeight(64),T.wp.maxHeight(128),{resize:"vertical"}]});function ta(e){var n,t,l,c,u,d,p,f,h,m,g,v,w,y=e.repl,b=e.getDesktopLayoutState,S=(0,eW.c)(),Y=(0,o._)((0,s.useState)(!1),2),A=Y[0],C=Y[1],D=(0,o._)((0,s.useState)(!1),2),I=D[0],F=D[1],T=(u=function(e){var n,t,i,o,a=(i={variables:{replId:e.replId},fetchPolicy:"cache-and-network",ssr:!1},o=(0,r._)({},n5,i),j.I(n3,o)),l=a.data,s=a.loading,c=a.error;if(s)return{loading:s,pendingChanges:null,error:null};if(c)return{loading:!1,pendingChanges:null,error:c};var u=(null==l?void 0:l.repl.__typename)==="Repl"?l.repl:null;return u?{loading:!1,pendingChanges:(null==(t=u.deployment)||null==(n=t.activeRelease)?void 0:n.pendingChanges)||[],error:c}:{loading:!1,pendingChanges:null,error:Error("Repl not found")}}({replId:{replId:y.id}.replId}),d=(0,s.useMemo)(function(){return u.pendingChanges?u.pendingChanges.slice().sort(function(e,n){return e.fileName.localeCompare(n.fileName)}).map(function(e){return{file:e,pathDepth:(0,eJ.jP)(e.fileName)}}).sort(function(e,n){return e.pathDepth-n.pathDepth}).map(function(e){return e.file}):[]},[u.pendingChanges]),(0,i._)((0,r._)({},u),{pendingChanges:d})),U=ea(),N=(0,$.W)("",n9),O=(null==(f=T.pendingChanges)?void 0:f.length)!==0,M=(null==(h=y.user)?void 0:h.username)===nX.GA||(null==(m=y.user)?void 0:m.username)==="templates",B=(0,o._)((0,s.useState)({ran:!1,tested:!1}),2),H=B[0],z=B[1],W=(0,R.a)({tablet:!0}),G=(0,E._P)({type:"boolean",controlName:"flag-template-layout-author"}),V=!W&&G&&null!=b,Z=(0,o._)((n=y,l=(t=(0,o._)((0,s.useState)(n.releases.items[0]),2))[0],c=t[1],(0,s.useEffect)(function(){n.releases.items.length>0&&c(n.releases.items.slice().sort()[0])},[n.releases.items]),[l,c]),2),q=Z[0],K=Z[1],J=(null==q?void 0:q.initialLayoutState)!=null,Q=(0,$.W)(J?em.Saved:em.Default,function(){}),X=J?Q.value!==em.Saved:Q.value!==em.Default,ee=O||X;(0,s.useEffect)(function(){z({ran:!1,tested:!1})},[z]);var en=!!(N.error||U.loading||!M&&!ee||M&&(!H.ran||!H.tested)),et=M&&(null==(v=y.releases)||null==(g=v.items)?void 0:g.length)>1,er="";return(N.error?er="Please fill out the form":M||ee||(er="No file or layout changes to publish in this release"),A)?(0,a.Y)(eM,{repl:y}):I?(0,a.Y)(L.S,{p:16,gap:16,children:(0,a.Y)(ti,{repl:y})}):(0,a.FD)(n7,{onSubmit:(p=(0,_._)(function(e){var n,t,r,i;return(0,k.YH)(this,function(o){switch(o.label){case 0:if(e.preventDefault(),en||N.validate())return[2];return t=null,V&&(Q.value===em.Current?t=b():Q.value===em.Saved&&J&&(t=null==q?void 0:q.initialLayoutState)),[4,U.createRelease({input:{replId:y.id,description:N.value,initialLayoutState:t}})];case 1:if((r=o.sent()).error)return[2];return C(!0),(null==(n=r.data)?void 0:n.createReplRelease.__typename)==="Repl"&&(K(i=r.data.createReplRelease.releases.items.slice().sort()[0]),Q.setValue((null==i?void 0:i.initialLayoutState)!=null?em.Saved:em.Default)),[2]}})}),function(e){return p.apply(this,arguments)}),css:to.container,children:[(0,a.Y)(P.Y9,{level:1,variant:"headerDefault",children:"Publish template changes"}),(0,a.FD)(L.S,{gap:8,children:[(0,a.Y)(P.Y9,{level:2,variant:"subheadDefault",children:"Modified files"}),(0,a.Y)(tt,{pendingChangesState:T,isReplitTemplate:M})]}),V?(0,a.FD)(L.S,{gap:8,children:[(0,a.Y)(P.Y9,{level:2,variant:"subheadDefault",children:"Workspace layout"}),(0,a.Y)(nE,{getCurrentLayoutState:b,savedLayoutState:null==q?void 0:q.initialLayoutState,templateLayout:Q})]}):null,M||ee?(0,a.FD)(L.S,{gap:4,children:[(0,a.Y)("label",{htmlFor:S("description"),css:to.descriptionLabel,children:"Description"}),(0,a.Y)(eG.ov,{id:S("description"),"aria-label":"Description",onChange:function(e){return N.setValue(e.target.value)},css:to.descriptionInput,placeholder:"Explain what has changed about your template"}),N.error?(0,a.Y)(no.N,{icon:(0,a.Y)(eH.A,{}),text:null==(w=N.error)?void 0:w.message,colorway:"negative"}):null]}):null,M?(0,a.Y)(tl,{repl:y,state:H,onChange:function(e,n){return z(function(t){return(0,i._)((0,r._)({},t),(0,x._)({},e,n))})}}):null,(0,a.Y)(L.S,{children:U.error?(0,a.Y)(no.N,{icon:(0,a.Y)(eH.A,{}),text:U.error,colorway:"negative"}):null}),(0,a.FD)(L.S,{row:!0,gap:12,justify:"end",children:[et?(0,a.Y)(nr.$n,{text:"Revert to older",colorway:"negative",onClick:function(){return F(!0)}}):null,(0,a.Y)(nM.m_,{tooltip:er,placement:"bottom",isDisabled:!er,children:(0,a.Y)(nr.$n,{text:"Publish release",type:"submit",colorway:"primary",iconLeft:(0,a.Y)(nW.A,{}),disabled:en})})]})]})}function tl(e){var n,t,r,i=e.repl,o=e.state,l=e.onChange,s=(0,eW.c)(),c=(0,Q.OI)(),u=c.data,d=c.loading,p=null==u||null==(n=u.currentUser)?void 0:n.username;return(0,a.FD)(L.S,{gap:12,children:[(0,a.Y)(P.Y9,{level:2,children:"Official Replit Template publishing checklist"}),(0,a.FD)(L.S,{children:[(0,a.FD)(ts,{children:[(0,a.Y)(n6.S,{id:s("ran"),checked:o.ran,onChange:function(e){return l("ran",e)}}),(0,a.Y)("label",{htmlFor:s("ran"),children:"Ran Repl:"}),(0,a.FD)("span",{children:["I ran the Repl to generate and cache package guesser result into"," ",(0,a.Y)("code",{children:".upm"}),"."]})]}),(0,a.FD)(ts,{children:[(0,a.Y)(n6.S,{id:s("tested"),checked:o.tested,onChange:function(e){return l("tested",e)}}),(0,a.Y)("label",{htmlFor:s("tested"),children:"Ran tests:"}),(0,a.FD)("span",{children:['I ran "Test working copy" for @',null==(t=i.user)?void 0:t.username,"/",i.slug," in"," ",(0,a.Y)("a",{href:"https://template-tester.replit.app/",target:"_blank",children:"template tester"}),". ",(0,a.Y)("br",{}),"If there are no tests, consider adding one."]})]})]}),d||(null==(r=i.user)?void 0:r.username)!==p?null:(0,a.Y)(no.N,{text:"You can't publish an update while impersonating. Add yourself as a member of the 'replit' team using CLUI tool 'add-remove-team-member', then open this Repl from your account.",colorway:"negative"})]})}function ts(e){var n=e.children;return(0,a.Y)(L.S,{py:2,row:!0,gap:8,children:n})}var tc=t(93718),tu=t(90388),td=t(13771),tp=t(18402),tf=t(3997),th=t(94516),tm=t(88291),tg=t(20207),tv=t(24894),tw=t(34834),ty=t(37772),tb=t(11139),tS=t(11337),tY=t(19652),tA=(0,eF.x)({dialog:[T.wp.py(2),T.wp.colWithGap(16)],reachOut:[T.wp.border({direction:"top",color:I.LU.outlineDimmest}),{marginInline:-16}]}),tx=function(e){var n,t,r,i,l,c,d,p,f,v,w,y,b,S=e.repl,Y=e.org,A=e.onRequestClose,x=e.onForkSeparately,C=(0,m.A)().showError,E=Y.id,R=(0,o._)((0,tv.A)({navigateAfterFork:!0,replLinkOptions:{initialPaneType:"project"},onFork:function(){A()},onError:function(){C("Error creating remixed app - please try again")}}),2),I=R[0],F=R[1].loading,T=(0,o._)((n=function(){var e,n,t;I({originId:S.id,teamId:null,title:null,description:null,isPrivate:!0,forkToPersonal:null,replReleaseId:null!=(t=null==(n=S.deployment)||null==(e=n.activeRelease)?void 0:e.id)?t:void 0,orgId:E,trackingData:{forkSource:"projectDialog",isOnboarding:!1,isApp:S.publishedAs===u.Q_.App,isTemplate:S.publishedAs===u.Q_.Template}})},r=(t=(0,tw.A)()).git,i=t.fs,c=(l=(0,o._)((0,s.useState)({loading:!1,error:null,success:!1}),2))[0],d=l[1],p=(0,g.A)(),f=(0,o._)((0,tm.H3)({}),1)[0],v=(0,h.A)(n),w=(0,o._)((0,tm.NP)(),1)[0],[(0,s.useCallback)((y=(0,_._)(function(e){var n,t,o,a,l,s,c,u;return(0,k.YH)(this,function(h){switch(h.label){case 0:d({loading:!0,error:null,success:!1}),h.label=1;case 1:return h.trys.push([1,3,,4]),[4,w({variables:{id:p},fetchPolicy:"no-cache"})];case 2:if(!(t=h.sent().data)||"Repl"!==t.getRepl.__typename)throw Error("Please try again");if(null==(n=t.getRepl.project)?void 0:n.id)throw Error("This App is already part of a project");return[3,4];case 3:return d({loading:!1,error:"message"in(o=h.sent())?o.message:"Please try again",success:!1}),[2];case 4:return[4,r.init({includeAllInitialFiles:!0,initialCommit:!0})];case 5:if(!(a=h.sent()).error)return[3,11];if(a.error!==tg.uA.ALREADY_INITIALIZED)return[3,10];return[4,r.getRepositoryState()];case 6:if((l=h.sent()).error)return d({loading:!1,error:"Could not create Project - please try again",success:!1}),[2];if(l.state===tg.Gi.CLEAN)return[3,9];return[4,r.stageFiles({all:!0})];case 7:return h.sent(),[4,r.commit({message:"Initial project commit",allowEmpty:!1})];case 8:h.sent().error&&d({loading:!1,error:"Could not generate initial commit to create Project",success:!1}),h.label=9;case 9:return[3,11];case 10:return d({loading:!1,error:"Could not initialize a repository",success:!1}),[2];case 11:return[4,(0,tb.x)(r)];case 12:return h.sent().error&&d({loading:!1,error:"Could not create Project, please try again",success:!1}),[4,i.flush()];case 13:return h.sent(),[4,i.persist({skipDebounce:!0})];case 14:if((s=h.sent()).error||!s.success)return d({loading:!1,error:"Could not initialize a repository",success:!1}),[2];return[4,new Promise(function(e){if(i.getStatus()===D.sn.Clean)return void e();i.onStatusChange(function(n){if(n===D.sn.Clean)return void e()})})];case 15:h.sent(),h.label=16;case 16:return h.trys.push([16,18,,19]),[4,f({variables:{input:{mainReplId:p,orgId:e}}})];case 17:if((u=h.sent()).errors||!(null==(c=u.data)?void 0:c.createProject))throw Error("Could not create project");if("Project"!==u.data.createProject.__typename)throw Error(u.data.createProject.message);return[3,19];case 18:return d({loading:!1,error:h.sent().message,success:!1}),[2];case 19:return d({loading:!1,error:null,success:!0}),v.current(),[2]}})}),function(e){return y.apply(this,arguments)}),[r,i,p,f,v,w]),c]),2),U=T[0],N=T[1],O=(b=(0,_._)(function(){return(0,k.YH)(this,function(e){return N.loading||U(E),[2]})}),function(){return b.apply(this,arguments)});return(0,a.FD)(tS.lV,{css:tA.dialog,onSubmit:function(e){e.preventDefault(),O()},children:[(0,a.Y)(P.Y9,{level:1,variant:"subheadDefault",children:"Planning to merge your changes back into this App?"}),(0,a.Y)(ty.I,{}),(0,a.FD)(L.S,{gap:8,children:[(0,a.Y)(P.EY,{children:"Consider starting a Project  a set of connected Apps for better collaborative development and versioning. Within a Project, you can:"}),(0,a.Y)(tY.s,{children:(0,a.FD)("ul",{children:[(0,a.Y)("li",{children:"Remix an App to work on a feature in isolation, and merge back when ready"}),(0,a.Y)("li",{children:"View all ongoing development in one place"}),(0,a.FD)("li",{children:["Share secrets and configuration between remixed apps"," ",(0,a.Y)(P.EY,{color:"dimmest",children:"(coming soon)"})]})]})})]}),N.error?(0,a.Y)(no.N,{colorway:"negative",icon:(0,a.Y)(eH.A,{}),text:N.error}):null,(0,a.FD)(L.S,{row:!0,gap:8,justify:"end",children:[(0,a.Y)(nr.$n,{loading:N.loading||F,text:"Remix separately",onClick:function(){A(),x()}}),(0,a.Y)(nr.$n,{loading:N.loading||F,text:"Remix & start a Project",colorway:"primary",type:"submit"})]}),(0,a.Y)(L.S,{css:tA.reachOut,pt:16,px:16,children:(0,a.FD)(P.EY,{color:"dimmest",children:["If you have questions or feedback, reach out to"," ",(0,a.Y)("a",{href:"mailto:teams@replit.com",children:"teams@replit.com"})]})})]})},tC=t(8375),t_=function(e){return e.DeleteRepl="DeleteRepl",e.TransferRepl="TransferRepl",e.PowerUp="PowerUp",e.UnpublishTemplate="UnpublishTemplate",e.EditPublishedTemplateSettings="EditPublishedTemplateSettings",e.PublishTemplate="PublishTemplate",e.UpdatePublishedTemplate="UpdatePublishedTemplate",e.Share="Share",e.FeatureRepl="FeatureRepl",e}({}),tk=t(13340),tD=t(38292),tE=t(49580),tR=t(49150),tI=t(26706),tF=t(92395),tT=t(3223),tP=t(56002),tL=t(44989),tU=(0,eQ.i7)({from:{transform:"rotate(0deg)"},to:{transform:"rotate(360deg)"}}),tN=(0,eQ.AH)([T.wp.position.relative,T.wp.cursor.pointer,T.wp.backgroundColor.backgroundHigher,T.wp.borderRadius(4),T.wp.p(2),{input:[T.wp.position.absolute,T.wp.top(0),T.wp.left(0),T.wp.width("100%"),T.wp.height("100%"),T.wp.zIndex(-1),{opacity:0}]}]),tO=(0,eQ.AH)([T.wp.color.accentPrimaryDefault,T.wp.position.absolute,T.wp.top(0),T.wp.left(0),T.wp.width("100%"),T.wp.height("100%"),T.wp.borderRadius(4),T.wp.backgroundColor.backgroundRoot,T.wp.overflow("hidden"),T.wp.display.flex,T.wp.align.center,T.wp.justify.center]),tM=(0,eF.x)({addIcon:[tN,T.wp.display.flex,T.wp.align.center,T.wp.justify.center,T.wp.border({width:1,color:I.LU.foregroundDimmest}),T.wp.backgroundColor.backgroundRoot,{"&:hover":[T.wp.color.accentPrimaryDefault,{borderColor:I.LU.accentPrimaryDefault}]}],updateIcon:[tN,{"&:hover .hover-state":{opacity:.8}}],hoverState:[tO,{opacity:0}],loadingState:[tO,{opacity:.8}],loadingIcon:[T.wp.display.flex,T.wp.align.center,T.wp.justify.center,{animation:"".concat(tU," 1s linear infinite")}],error:[{fontSize:I.LU.fontSizeDefault,color:I.LU.accentNegativeDefault}]});function tB(e){var n=(0,s.useRef)(null),t=(0,o._)((0,s.useState)(e.value),2),r=t[0],i=t[1],l=(0,o._)((0,s.useState)(null),2),c=l[0],u=l[1],d=(0,eg.A)({onUpload:function(n){var t=n.url;e.onChange(t)},onUploadPreview:function(e){i(e.dataUrl)},onError:function(e){u(e.message)}});(0,s.useEffect)(function(){i(e.value)},[e.value]);var p=null==r?void 0:r.startsWith("data:");return(0,a.FD)(tF.T,{spacing:4,children:[(0,a.FD)("div",{onClick:function(){var e;null==(e=n.current)||e.click()},css:r?tM.updateIcon:tM.addIcon,"aria-label":r?"Change icon":"Upload an icon","data-microtip-position":"right",role:"tooltip",children:[r?(0,a.FD)(a.FK,{children:[(0,a.Y)(tT.A,{iconUrl:r,size:32,alt:"icon"}),p?(0,a.Y)("div",{css:tM.loadingState,children:(0,a.Y)("div",{css:tM.loadingIcon,children:(0,a.Y)(nl.A,{})})}):(0,a.Y)("div",{css:tM.hoverState,className:"hover-state",children:(0,a.Y)(tP.A,{})})]}):(0,a.Y)(tL.A,{size:32}),(0,a.Y)("input",{ref:n,accept:e8.DA.join(","),type:"file",onChange:function(e){var n=e.target,t=n.validity,r=n.files;t.valid&&(null==r?void 0:r.length)&&(u(null),d.uploadImage(r[0],eq.VL.TemplateIcon))}})]}),c?(0,a.Y)("div",{css:tM.error,children:c}):null]})}var tH=t(83023),tz=t(75576),tW=t(38212),tG=t(22318),tV=t(23499),tj=t(85434),tZ=t(82455),tq=t(85800),tK=t(29064);function t$(e){var n=e.repl,t=(0,f.A)(),o=(0,s.useMemo)(function(){if(n.org){var e;return{text:n.org.name,css:[{"&, & span":T.wp.flex.shrink(1)}],iconLeft:(0,a.Y)(tk.e,{src:null!=(e=n.org.image)?e:null,username:n.org.name,fullName:n.org.name,size:24})}}return n.user?{text:n.user.username,css:[{"&, & span":T.wp.flex.shrink(1)}],iconLeft:(0,a.Y)(tk.e,{src:n.user.image,username:n.user.username,size:24})}:{text:""}},[n]);if(!n.user||!n.org&&!n.user)return null;var l=n.org?(0,b.EG)(n.org).repls:(0,th.M)(n.user),c=n.org?(0,b.EG)(n.org).repls.href.toString():(0,th.M)(n.user).as;return t?(0,a.Y)(nr.$n,(0,i._)((0,r._)({},o),{onClick:function(){tp.M.openExternalUrl(c)}})):(0,a.Y)(eT.v,(0,i._)((0,r._)({},o),{as:l.as,href:l.href,prefetch:!1}))}function tJ(e){var n,t,l=e.setActiveDialog,c=e.repl,d=e.isTemplate,p=e.updateIconUrl,h=e.showCloseButton,g=e.setIsEditing,v=e.updateReplInfo,w=e.isFeaturedRepl,y=!!c.publishedAs,b=(0,o._)((0,s.useState)(!1),2),S=b[0],Y=b[1],A=(0,f.A)(),C=!!c.org&&c.org.type===u.NT.Team,_=(0,tI.Z)().fork,k=(0,tC.Q)(),D=(0,m.A)(),R=D.showConfirm,F=D.showError,U=(0,o._)((0,tf.B)({onFork:function(){R("Repl forked, redirecting...")},onError:function(){F("Error creating fork - please try again")}}),2),N=U[0],O=U[1].loading,M=(0,E._P)({controlName:"flag-olympic-torch",logFlagToAnalytics:!1}),B=(0,s.useCallback)(function(){var e;return(null==(e=c.org)?void 0:e.id)&&!k.loading?k.isEligibleForProject&&!k.hasProject?void Y(!0):k.hasProject?void N({orgId:c.org.id,repl:c,forkSource:"replInfoHeader"}):void _():void _()},[c,_,k,N]),H=[];c.authorizations.fork.isAuthorized&&H.push({value:"Remix",label:"Remix",icon:O?(0,a.Y)(nl.A,{}):(0,a.Y)(tW.A,{}),isDisabled:O});var z=c.authorizations.publish.isAuthorized;if(!A&&!C){var W=c.isPrivate||!c.isRenamed||!z,G="";c.isPrivate?G="Make App public to publish":c.isRenamed||(G="Rename App to publish"),null==c.publishedAs&&H.push({value:t_.PublishTemplate,label:"Publish as Template",icon:(0,a.Y)(tq.A,{}),isDisabled:W,description:G,dataCy:"repl-info-header-settings-publish"}),d&&!W&&H.push({value:t_.UnpublishTemplate,label:"Unpublish Template",icon:(0,a.Y)(tz.A,{})}),y&&!W&&H.push({value:t_.EditPublishedTemplateSettings,label:"Edit Template publish settings",icon:(0,a.Y)(tP.A,{})})}if(C){var V=c.isPrivate;H.push({value:t_.FeatureRepl,label:w?"Remove from Featured Apps":"Feature on Profile",icon:(0,a.Y)(tj.A,{}),description:V?"Make App public to feature":"",isDisabled:V})}return c.authorizations.deleteRepl.isAuthorized&&(M&&H.push({isDestructive:!1,value:t_.TransferRepl,label:"Transfer",icon:(0,a.Y)(tZ.A,{})}),H.push({isDestructive:!0,value:t_.DeleteRepl,label:"Delete",icon:(0,a.Y)(tK.A,{})})),(0,a.FD)(L.S,{gap:8,p:8,children:[(0,a.FD)(L.S,{css:[(0,x._)({},T.$_.max("mobileMax"),[T.wp.flex.columnReverse,T.wp.align.start,{gap:I.LU.space8}])],row:!0,gap:8,align:"center",justify:"space-between",children:[(0,a.FD)(L.S,{row:!0,gap:8,css:[T.wp.center,T.wp.flex.shrink(1)],children:[(0,a.Y)(t$,{repl:c}),c.authorizations.editMetadata.isAuthorized&&d?(0,a.Y)(tB,{value:c.iconUrl,onChange:p}):null]}),(0,a.FD)(L.S,{css:[(0,x._)({},T.$_.max("mobileMax"),{width:"100%",">*:not(div)":{flex:1}})],align:"center",row:!0,gap:8,children:[A?null:(0,a.Y)(eT.v,(0,i._)((0,r._)({prefetch:!1},(0,eU.z9)(c)),{iconRight:(0,a.Y)(tH.A,{}),colorway:"primary",text:"Cover page",target:"_blank",style:{pointerEvents:"auto"}})),d||A||C?null:(0,a.Y)(nM.m_,{tooltip:"Make Repl public to share",isDisabled:!c.isPrivate,children:(0,a.Y)(nr.$n,{type:"button",iconLeft:(0,a.Y)(tL.A,{}),onClick:function(){l(t_.Share)},text:"Share",disabled:c.isPrivate})}),d&&!A?(0,a.Y)(nr.$n,{type:"button",iconLeft:(0,a.Y)(tL.A,{}),onClick:function(){return l(t_.UpdatePublishedTemplate)},text:"Publish changes"}):null,A?(0,a.Y)(eP.i,{textToCopy:window.location.href,tooltipText:"Copy App URL",tooltipSuccessText:"Copied!",iconLeft:(0,a.Y)(tG.A,{}),text:""}):null,H.length>0&&(0,a.Y)(tE.in,{dataCy:"repl-info-header-settings",trigger:(0,a.Y)(tD.K0,{alt:"More options",size:32,children:(0,a.Y)(tV.A,{size:16})}),"aria-label":"More options",onAction:function(e){switch(e){case"Remix":return void B();case t_.UnpublishTemplate:l(t_.UnpublishTemplate);return;case t_.DeleteRepl:l(t_.DeleteRepl);return;case t_.TransferRepl:l(t_.TransferRepl);return;case t_.EditPublishedTemplateSettings:l(t_.EditPublishedTemplateSettings);return;case t_.PublishTemplate:l(t_.PublishTemplate);return;case t_.FeatureRepl:l(t_.FeatureRepl);return}},children:H.map(function(e){return(0,a.Y)(tE.Dr,{id:e.value,label:e.label,icon:e.icon,isDestructive:e.isDestructive,isDisabled:e.isDisabled,description:e.description,dataCy:e.dataCy},e.value)})}),h?(0,a.Y)(tD.K0,{alt:"Close",tooltipBehavior:"hidden",onClick:function(){v(),g(!1)},children:(0,a.Y)(nd.A,{})}):null]})]}),(null==(n=c.org)?void 0:n.type)===u.NT.Team&&(null==(t=c.user)?void 0:t.__typename)==="User"?(0,a.FD)(P.EY,{variant:"small",color:"dimmest",children:["Created by @",c.user.username]}):null,S&&c.org?(0,a.Y)(tR.a,{isOpen:!0,onRequestClose:function(){return Y(!1)},children:(0,a.Y)(tx,{repl:c,org:c.org,onRequestClose:function(){return Y(!1)},onForkSeparately:_})}):null]})}var tQ=t(42764),tX=t(83576),t0=t(91136),t1=t(87290),t2=t(74946),t4=t(37039),t5=L.D.form,t3=(0,eF.x)({form:[T.wp.colWithGap(24)]}),t6=function(e){var n,t,r,i=e.currentUser,l=e.repl,c=e.onDone,u=e.onCancel,d=l.owner?l.owner:l.org,p=null!=(r=null==(n=l.owner)?void 0:n.username)?r:null==(t=l.org)?void 0:t.slug,f=p?"".concat(p,"/").concat(l.slug):l.slug,h=(0,o._)((0,t2.p)(i,null==d?void 0:d.id),3),m=h[0],g=h[1],v=h[2],w=(0,o._)((0,s.useState)(""),2),y=w[0],b=w[1],S=y===f,Y=(0,eW.c)(),A="You do not have permission to transfer this Repl because XYZ.";return(0,a.Y)(t5,{css:t3.form,onSubmit:function(e){e.preventDefault(),S&&(alert("Beep boop would transfer Repl, redirecting"),c())},children:(0,a.FD)(L.S,{gap:16,children:[(0,a.Y)(P.EY,{children:"Transfer this Repl to another account or organization."}),(0,a.Y)(t4.d,{colorway:"grey",text:"Transferring ownership might result in losing some features, depending on the subscription status of the selected organization. Click here for more details.",iconLeft:(0,a.Y)(eH.A,{}),href:"https://docs.replit.com/teams/collaboration-on-replit#transferring-repls-to-organizations"}),(0,a.FD)(L.S,{gap:4,children:[(0,a.Y)("label",{htmlFor:Y("owner"),children:(0,a.Y)(P.EY,{color:"dimmer",variant:"small",children:"New Owner"})}),(0,a.Y)(t1.A,{id:Y("owner"),owners:v,selectedOwner:m,setSelectedOwner:g})]}),A?(0,a.Y)(no.N,{colorway:"negative",text:A}):null,(0,a.FD)(L.S,{gap:4,children:[(0,a.Y)("label",{htmlFor:Y("confirmName"),children:(0,a.FD)(P.EY,{color:"dimmer",variant:"small",children:["Type the name ",f," to delete"]})}),(0,a.Y)(eG.pd,{id:Y("confirmName"),disabled:!1,autoFocus:!0,value:y,onChange:function(e){return b(e.currentTarget.value)}})]}),(0,a.FD)(L.S,{row:!0,gap:12,justify:"end",children:[(0,a.Y)(nr.$n,{type:"button",onClick:u,text:"Cancel"}),(0,a.Y)(nr.$n,{type:"submit",disabled:!S,iconLeft:(0,a.Y)(tZ.A,{}),colorway:"negative",text:"Yes, transfer this Repl"})]})]})})},t8=function(e){var n=e.repl,t=e.onDone,r=e.onCancel,i=(0,t0.wo)().data,o=null==i?void 0:i.currentUser;return(0,a.FD)(L.S,{gap:24,children:[(0,a.FD)(P.Y9,{variant:"subheadBig",level:2,children:["Transfer ",n.title]}),o?(0,a.Y)(t6,{currentUser:o,repl:n,onDone:t,onCancel:r}):(0,a.Y)(L.S,{align:"center",children:(0,a.Y)(nl.A,{})})]})},t7=t(51705),t9=t(45149),re=(0,eF.x)({loadingRoot:[T.wp.center,T.wp.p(16)],root:{overflow:"auto",maxHeight:"80vh"},form:[T.wp.p(8)]});function rn(e){var n=e.getDesktopLayoutState,t=e.setIsEditing,r=e.showCloseButton,i=(0,g.A)(),o=(0,d.P6)({variables:{replId:i}}).data,l=(null==o?void 0:o.repl.__typename)==="Repl"?o.repl:null;return l?(0,a.Y)(rr,{getDesktopLayoutState:n,setIsEditing:t,showCloseButton:r,repl:l}):(0,a.Y)(L.S,{css:re.loadingRoot,children:(0,a.Y)(nl.A,{})})}var rt=[u.rT.Submit,u.rT.PublishTemplate,u.rT.EditTemplate];function rr(e){var n,t,g,x,C,_,k,D,E=e.repl,R=e.getDesktopLayoutState,I=e.showCloseButton,F=e.setIsEditing,U=(0,l.useRouter)(),N=(0,f.A)(),O=(0,o._)((0,s.useState)(null),2),M=O[0],B=O[1],H=(0,o._)((0,s.useState)(E.isRenamed?E.title:""),2),z=H[0],W=H[1],G=(0,o._)((0,s.useState)(E.description||""),2),V=G[0],j=G[1],Z=(0,o._)((0,s.useState)(E.rawTemplateLabel),2),q=Z[0],K=Z[1],$=(0,m.A)().showError,J=E.publishedAs===u.Q_.Template,Q=(null==(n=E.org)?void 0:n.type)!=="team"&&(E.authorizations.editVisibility.isAuthorized||E.authorizations.editVisibility.code===u.S4.RequiresActiveSubscription);(0,s.useEffect)(function(){j(E.description||"")},[E.description]);var X=(0,s.useRef)(E),ee=(0,o._)((0,d.aI)({variables:{id:E.id},onCompleted:function(){var e;if(N)return void U.push("/desktopApp/home");if((null==(e=E.org)?void 0:e.type)==="team"){var n=(0,b.EG)(E.org);U.push(n.home.href);return}U.push("/home","/~")},update:function(e,n){var t;(null==(t=n.data)?void 0:t.deleteRepl)&&(e.evict({id:e.identify(n.data.deleteRepl)}),e.gc())},onError:function(e){return $((0,v.A)(e.message))}}),2),en=ee[0],et=ee[1].loading,er=(0,o._)((0,d.KZ)({onError:function(e){return $((0,v.A)(e.message))},onCompleted:function(e){var n=e.updateRepl.repl,t=X.current,r={};t.description!==n.description&&(r.description=n.description),t.title!==n.title&&(r.title=n.title),t.url!==n.url&&(r.url=n.url,window.history.replaceState(null,"",n.url+window.location.search+window.location.hash)),t.isRenamed!==n.isRenamed&&(r.isRenamed=!!n.isRenamed),X.current=E,Object.keys(r).length>0&&F(!1)}}),2),ei=er[0],eo=er[1].loading,ea=(0,o._)((0,d.SY)({variables:{input:{replId:E.id}},onError:function(e){c.Cp(e),$((0,v.A)(e.message))}}),2),el=ea[0],es=ea[1],ec=(0,s.useMemo)(function(){return!!z&&z!==E.title||q!==E.rawTemplateLabel||(""!==V||!!E.description)&&V!==E.description},[E,z,V,q]),eu=(0,h.A)(ec),ed=(0,s.useCallback)(function(){ec&&ei({variables:{input:{id:E.id,title:z.trim()||E.title,description:V,templateLabel:E.authorizations.editTemplateMetadata.isAuthorized?q:void 0}}})},[ec,ei,E,z,V,q]),ep=(0,h.A)(ed);(0,s.useLayoutEffect)(function(){return function(){eu.current&&ep.current()}},[ep,eu]);var ef=function(){ei({variables:{input:{id:E.id,isPrivate:!E.isPrivate}},optimisticResponse:{__typename:"RootMutationType",updateRepl:{__typename:"UpdateReplPayload",repl:(0,i._)((0,r._)({},E),{isPrivate:!E.isPrivate})}}}),(0,y.u4)(y.AZ.PRIVATE_TOGGLED,{enabled:!E.isPrivate,source:"workspace_info_modal"})},eh=E.isRenamed?"Name your App":"Default name: ".concat(E.title),em=rt.includes(E.workspaceCta),eg=(0,eW.c)(),ev=(null==(t=E.owner)?void 0:t.__typename)==="Team";return(0,a.FD)("div",{css:re.root,"data-can-change-description":E.authorizations.editMetadata.isAuthorized,children:[(0,a.Y)(tI.B,{forkParams:{trackingData:{forkSource:"editReplPopoverMenuItem"}},repl:E,teamContext:(null==(g=E.owner)?void 0:g.__typename)==="Team"?E.owner.id:void 0,children:(0,a.Y)(tJ,{repl:E,isTemplate:J,showCloseButton:I,setActiveDialog:B,setIsEditing:F,updateIconUrl:function(e){return ei({variables:{input:{id:E.id,iconUrl:e}},optimisticResponse:{__typename:"RootMutationType",updateRepl:{__typename:"UpdateReplPayload",repl:(0,i._)((0,r._)({},E),{iconUrl:e})}}})},updateReplInfo:ed,isFeaturedRepl:E.isFeaturedRepl})}),(0,a.Y)("form",{css:re.form,onSubmit:function(e){e.preventDefault(),ed()},children:(0,a.FD)(L.S,{align:"stretch",gap:16,children:[(0,a.FD)(eL.ui,{background:"default",gap:16,children:[(0,a.Y)(L.S,{children:(0,a.FD)(L.S,{gap:4,children:[(0,a.FD)(L.S,{row:!0,justify:"space-between",align:"end",children:[(0,a.Y)("label",{htmlFor:eg("name"),children:(0,a.Y)(P.EY,{variant:"small",color:"dimmer",multiline:!1,children:"Name"})}),(0,a.Y)(tX.A,{maxLength:60,value:z,hideLabel:!0})]}),(0,a.Y)(eG.pd,{style:{cursor:E.authorizations.editMetadata.isAuthorized?"auto":"not-allowed"},disabled:!E.authorizations.editMetadata.isAuthorized,maxLength:60,placeholder:eh,value:z,onChange:function(e){return W(e.target.value)},spellCheck:!1,id:eg("name"),dataCy:"ws-repl-info-title-input"})]})}),(0,a.Y)(L.S,{children:(0,a.FD)(L.S,{gap:4,children:[(0,a.FD)(L.S,{row:!0,justify:"space-between",align:"end",children:[(0,a.Y)("label",{htmlFor:eg("description"),children:(0,a.Y)(P.EY,{variant:"small",color:"dimmer",multiline:!1,children:"Description"})}),(0,a.Y)(tX.A,{maxLength:tu.z,value:V,hideLabel:!0})]}),(0,a.Y)(eG.ov,{disabled:!E.authorizations.editMetadata.isAuthorized,maxLength:tu.z,value:V,onChange:function(e){return j(e.target.value)},placeholder:"What does this App do?",css:[T.wp.minHeight(96),T.wp.maxHeight(256),{resize:"vertical"}],id:eg("description")})]})})]}),J&&E.authorizations.editTemplateMetadata.isAuthorized?(0,a.Y)(eL.ui,{background:"default",gap:4,children:(0,a.FD)(L.S,{gap:4,children:[(0,a.Y)("label",{htmlFor:eg("template"),children:(0,a.Y)(P.EY,{color:"dimmer",variant:"small",multiline:!1,children:"Template label"})}),(0,a.Y)(eG.pd,{value:q,maxLength:60,placeholder:"Template label",spellCheck:!1,onChange:function(e){return K(e.target.value)},id:eg("template")})]})}):null]})}),em?null:(0,a.FD)(L.S,{gap:24,p:8,children:[(0,a.FD)(L.S,{gap:24,children:[(0,a.Y)(Y.A,{replId:E.id,authz:E.authorizations.editMetadata,initialIconUrl:E.iconUrl,originIconUrl:null==(x=E.templateInfo)?void 0:x.iconUrl}),(0,a.Y)(S.A,{replId:E.id,authz:E.authorizations.editMetadata,initialImageUrl:null!=(D=E.imageUrl)?D:null==(C=E.templateInfo)?void 0:C.imageUrl,originImageUrl:null==(_=E.templateInfo)?void 0:_.imageUrl})]}),Q?(0,a.FD)(L.S,{gap:8,children:[(0,a.FD)(tQ.e2,{tag:"fieldset",name:eg("privacy"),value:E.isPrivate.toString(),onChange:function(){if(!eo){(0,y.u4)(y.AZ.POWER_UP_TOGGLE_REQUESTED,{powerUp:"private",setting:!E.isPrivate,source:"workspace_info_modal"});var e,n=!E.isPrivate;if(E.authorizations.editVisibility.isAuthorized||!1===n)return void ef();E.authorizations.editVisibility.code===u.S4.RequiresActiveSubscription&&(null==(e=E.org)?void 0:e.__typename)!=="Org"?B(t_.PowerUp):$(E.authorizations.editVisibility.message)}},row:!0,primary:!0,stretch:!0,children:[(0,a.Y)(tQ.$O,{id:eg("false"),value:"false",text:"Public",icon:(0,a.Y)(t7.A,{})}),(0,a.Y)(tQ.$O,{id:eg("true"),value:"true",text:"Private",icon:(0,a.Y)(t9.A,{})})]}),(0,a.Y)(P.EY,{variant:"small",color:"dimmest",children:(0,w.A)(E.isPrivate,ev)})]}):null]}),(0,a.Y)(tc.A,{isOpen:M===t_.DeleteRepl,onClose:function(){return B(null)},selectedRepls:[E],onDelete:function(){en()},deleting:et}),(0,a.Y)(td.A,{isOpen:M===t_.PowerUp,onClose:function(){return B(null)},reloadPageAfterPurchaseComplete:!0,type:"purchase",analyticsContext:{upgrade:{context:"workspace_info_modal"}}}),(0,a.Y)(tR.a,{isOpen:M===t_.UnpublishTemplate,onRequestClose:function(){return B(null)},children:(0,a.Y)(p.A,{confirmLabel:"Yes, unpublish this Template",isDestructive:!0,title:"Unpublish Template",onCancel:function(){return B(null)},onConfirm:function(){es.loading||(el(),B(null))},children:"Your App will no longer be discoverable on Templates. You can republish again at any time, and all of your comments or reactions will stick around."})}),(0,a.Y)(tR.a,{isOpen:M===t_.EditPublishedTemplateSettings,onRequestClose:function(){return B(null)},noPadding:!0,maxWidth:872,fitContent:!0,children:(0,a.Y)(nJ,{source:"replEnvironment",replId:E.id,getDesktopLayoutState:R})}),(0,a.Y)(tR.a,{isOpen:M===t_.PublishTemplate,onRequestClose:function(){return B(null)},noPadding:!0,maxWidth:872,fitContent:!0,children:(0,a.Y)(nJ,{source:"replEnvironment",replId:E.id,getDesktopLayoutState:R})}),(0,a.Y)(tR.a,{isOpen:M===t_.UpdatePublishedTemplate,onRequestClose:function(){return B(null)},noPadding:!0,children:(0,a.Y)(ta,{repl:E,getDesktopLayoutState:R})}),(0,a.Y)(tR.a,{isOpen:M===t_.Share,onRequestClose:function(){return B(null)},noPadding:!0,children:(0,a.Y)(eM,{repl:E})}),(0,a.Y)(tR.a,{isOpen:M===t_.TransferRepl,onRequestClose:function(){return B(null)},children:(0,a.Y)(t8,{repl:E,onDone:function(){return B(null)},onCancel:function(){return B(null)}})}),(0,a.Y)(tR.a,{isOpen:M===t_.FeatureRepl,onRequestClose:function(){return B(null)},centered:!0,maxWidth:650,children:(0,a.Y)(A.A,{isFeatured:E.isFeaturedRepl,repl:E,orgId:null==(k=E.org)?void 0:k.id,onCompleted:function(){return B(null)}})})]})}},11139:(e,n,t)=>{"use strict";t.d(n,{Q:()=>u,x:()=>c});var r=t(29935),i=t(12694),o=t(82643),a=t(21462),l=t(20207),s=t(34834),c=function(e){return e.escapeHatchGitExecWrite("git config --local core.sshCommand replit-git-ssh")};function u(){var e=(0,s.A)(),n=e.container,t=e.fs,u=e.git,d=(0,i._)((0,a.useState)({state:"loading"}),2),p=d[0],f=d[1];return(0,a.useEffect)(function(){function e(){return(e=(0,r._)(function(){var e;return(0,o.YH)(this,function(n){switch(n.label){case 0:return f({state:"loading"}),[4,u.getRepositoryState()];case 1:if((e=n.sent()).error&&f({state:"error",error:"Could not get repository status"}),e.error||e.state===l.Gi.NOT_INITIALIZED)return f({state:"error",error:"Could not get repository status"}),[2];return[4,c(u)];case 2:if(n.sent().error)return f({state:"error",error:"Could not configure SSH"}),[2];return f({state:"finished",hasInstalled:!0}),[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[n,t,u]),p}},11165:(e,n,t)=>{"use strict";t.d(n,{c:()=>d,w:()=>f});var r=t(83846),i=t(88263),o=t(21462),a=t(64583),l=t(48521),s=t(96556),c=t(76126),u=t(10429),d="@container (max-width: 480px)",p=(0,a.x)({wrapper:[(0,r._)({},d,[l.wp.colWithGap(8),l.wp.align.start])],inner:[l.wp.flex.growAndShrink(1)]});function f(e){var n=e.id,t=e.title,r=e.children,a=(0,s.c)()(n);return(0,i.FD)(u.S,{css:p.wrapper,row:!0,gap:8,justify:"space-between",align:"center",children:[(0,i.Y)(u.S,{css:p.inner,tag:"label",htmlFor:a,children:"string"==typeof t?(0,i.Y)(c.EY,{multiline:!1,children:t}):t}),(0,o.cloneElement)(r,{id:a})]})}},11721:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(88263),a=t(71117);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M14.47 20.53a.75.75 0 0 0 1.06 0l5-5a.75.75 0 0 0 0-1.06l-5-5a.75.75 0 1 0-1.06 1.06l3.72 3.72H8A3.25 3.25 0 0 1 4.75 11V4a.75.75 0 0 0-1.5 0v7A4.75 4.75 0 0 0 8 15.75h10.19l-3.72 3.72a.75.75 0 0 0 0 1.06Z",clipRule:"evenodd"})}))}},12125:(e,n,t)=>{"use strict";t.d(n,{A:()=>d});var r=t(17844),i=t(93629),o=t(17459),a=t(88263),l=t(64583),s=t(48521),c=t(38292),u=(0,l.x)({checked:[s.wp.backgroundColor.backgroundHigher],unchecked:[s.wp.color.foregroundDimmest]});function d(e){var n=e.alt,t=e.icon,l=e.checked,s=e.onClick,d=(0,o._)(e,["alt","icon","checked","onClick"]);return(0,a.Y)(c.K0,(0,i._)((0,r._)({},d),{css:l?u.checked:u.unchecked,alt:"".concat(l?"Disable":"Enable"," ").concat(n),onClick:s,children:t}))}},12507:(e,n,t)=>{"use strict";t.d(n,{F:()=>c});var r=t(12694),i=t(88263),o=t(21462),a=t(44370),l=t(49153),s=t(75802);function c(e){var n=(0,r._)((0,o.useState)(function(){var n,t,r,i,o,s,c;return t=(n={fs:e.fs,container:e.container,dotReplit:e.dotReplit,ports:e.ports,secrets:e.secrets}).container,r=n.fs,i=n.dotReplit,o=n.ports,s=n.secrets,(c=(0,a.y$)()).set(l.xs,t),c.set(l.fg,r),c.set(l.Vc,i),c.set(l.kK,o),c.set(l.$s,s),c}),1)[0];return(0,i.FD)(s.rF.Provider,{value:n,children:[e.children,(0,i.Y)(l.JH,{replId:e.replId,orgId:e.orgId})]})}},12520:(e,n,t)=>{"use strict";t.d(n,{l:()=>m});var r=t(88263),i=t(21462),o=t(10293),a=t(53231),l=t(45263),s=t(64583),c=t(48521),u=t(36112),d=t(76126),p=t(10429),f=t(97714),h=(0,s.x)({targetedElementWrapper:[c.wp.mt(8),c.wp.width("100%"),c.wp.flex.row,c.wp.align.center,c.wp.justify.end],targetedElement:[c.wp.borderRadius(),c.wp.colorMixBg(l.LU.accentPrimaryStronger,"transparent",.2)],clickable:[{cursor:"pointer"}]});function m(e){var n=e.targetedElement,t=e.openPane,l=(0,i.useCallback)(function(){n.filePath&&t&&((0,a.u4)(o.AZ.TARGETED_ELEMENT_FILE_LINK_CLICKED,{componentName:n.componentName,filePath:n.filePath,lineNumber:n.lineNumber}),t({type:"codeEditor",data:{path:n.filePath,line:n.lineNumber}}))},[n,t]);if(!n.componentName)return null;var s=n.filePath&&!!t,c=s?[h.targetedElement,h.clickable]:h.targetedElement;return(0,r.Y)(p.S,{css:h.targetedElementWrapper,children:(0,r.FD)(u.ui,{css:c,p:4,row:!0,align:"center",gap:4,onClick:s?l:void 0,children:[(0,r.Y)(f.A,{size:16}),(0,r.Y)(d.EY,{variant:"small",children:n.componentName})]})})}},12605:(e,n,t)=>{"use strict";t.d(n,{A:()=>d});var r=t(17844),i=t(93629),o=t(88263),a=t(79209),l=function(e){return{animationDuration:e?"2000ms":"800ms",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out"}},s=(0,a.i7)("\n  0% { transform: translate(0px, 0px) }\n  25% { transform: translate(0px, 80px) }\n  50% { transform: translate(100px, 80px) }\n  75% { transform: translate(100px, 160px) }\n  100% { transform: translate(0px, 160px) }\n"),c=(0,a.i7)("\n  0% { transform: translate(0px, 0px) }\n  25% { transform: translate(0px, -80px) }\n  50% { transform: translate(-100px, -80px) }\n  100% { transform: translate(-100px, -80px) }\n"),u=(0,a.i7)("\n  0% { transform: translate(0px, 0px) }\n  50% { transform: translate(0px, 0px) }\n  75% { transform: translate(0px, -80px) }\n  100% { transform: translate(100px, -80px) }\n");let d=function(e){var n=e.height,t=void 0===n?24:n,a=e.color,d=e.slow,p=void 0!==d&&d,f={width:84,height:64,fill:void 0===a?"#F26207":a,rx:12};return(0,o.FD)("svg",{width:t/1.2,height:t,viewBox:"0 0 200 240",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":"loading-animation-title",children:[(0,o.Y)("title",{id:"loading-animation-title",children:"loading animation"}),(0,o.Y)("rect",(0,i._)((0,r._)({css:[l(p),{animationName:s}]},f),{x:8,y:8})),(0,o.Y)("rect",(0,i._)((0,r._)({css:[l(p),{animationName:c}]},f),{x:108,y:88})),(0,o.Y)("rect",(0,i._)((0,r._)({css:[l(p),{animationName:u}]},f),{x:8,y:168}))]})}},12930:(e,n,t)=>{"use strict";t.d(n,{A:()=>a});var r=t(12694),i=t(21462),o=t(77958);function a(e,n){var t=(0,r._)((0,i.useState)(function(){var t;return null!=(t=o.A.get(e))?t:n}),2),a=t[0],l=t[1];return(0,i.useEffect)(function(){o.A.set(e,a)},[e,a]),[a,l]}},13242:(e,n,t)=>{"use strict";t.d(n,{B:()=>lk});var r,i,o,a,l,s=t(17844),c=t(93629),u=t(12694),d=t(22531),p=t(88263),f=t(21462),h=t(79730),m=t(22761),g=t(49153),v=t(88734),w=t(29935),y=t(86105),b=t(82643),S=t(35084),Y=t(77306),A=t(54790),x=t(83846),C=t(3018),_=t(79128),k=t(94176),D=t(1867),E=t(21640),R=t(12584),I=t(41114),F=t(86997);function T(){var e=(0,R._)(["\n  fragment ReplAnalyticsDurationResult on ReplAnalyticsDuration {\n    __typename\n    results {\n      __typename\n      value\n      count\n    }\n  }\n"]);return T=function(){return e},e}function P(){var e=(0,R._)(["\n  query ReplAnalyticsDuration(\n    $id: String!\n    $input: ReplAnalyticsDurationInput!\n  ) {\n    getRepl(id: $id) {\n      ... on Repl {\n        __typename\n        id\n        analyticsDuration(input: $input) {\n          ... on ReplAnalyticsDuration {\n            ...ReplAnalyticsDurationResult\n          }\n          ... on NotFoundError {\n            __typename\n            message\n          }\n          ... on UserError {\n            __typename\n            message\n          }\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return P=function(){return e},e}var L={},U=(0,I.J1)(T()),N=(0,I.J1)(P(),U),O=t(79209),M=t(33781),B=t(48521),H=(0,O.AH)([B.wp.maxHeight(320),B.wp.minHeight(240),{aspectRatio:"2 / 1"}]);function z(){var e=(0,M.D)().values;return{animation:{duration:0},backgroundColor:e.global.backgroundHigher,borderColor:e.global.outlineDimmer,borderWidth:1,titleFont:{family:"'IBM Plex Sans', sans-serif"},titleColor:e.global.foregroundDimmest,bodyFont:{family:"'IBM Plex Sans', sans-serif"},bodyColor:e.global.foregroundDimmest,footerFont:{family:"'IBM Plex Sans', sans-serif"},footerColor:e.global.foregroundDimmest,padding:8,cornerRadius:6}}var W=t(29e3),G=t(54087),V=t(76126),j=t(10429),Z=function(e){var n=e.data;E.t1.register(E.E8);var t=(0,M.D)().values;return(0,p.Y)(D.yP,{options:{responsive:!0,maintainAspectRatio:!1,datasets:{bar:{categoryPercentage:1,barPercentage:1}},plugins:{tooltip:z()},scales:{y:{title:{display:!0,text:"# Requests",color:t.global.foregroundDimmer,font:{family:"'IBM Plex Sans', sans-serif"}},ticks:{font:{family:"'IBM Plex Sans', sans-serif"},color:t.global.foregroundDimmer,callback:function(e){if("number"==typeof e&&Math.floor(e)===e)return e}},grid:{color:t.global.outlineDimmest}},x:{title:{font:{family:"'IBM Plex Sans', sans-serif"},display:!0,text:"Duration (ms)",color:t.global.foregroundDimmer},ticks:{autoSkip:!1,maxRotation:20,color:t.global.foregroundDimmer,font:{family:"'IBM Plex Sans', sans-serif"}},grid:{color:t.global.outlineDimmest}}}},data:{labels:n.results.map(function(e){var n=e.value.replace("ms","").split("-"),t=n[n.length-1];return t.includes("s+")?t.replace("s+","000+"):"< "+t}),datasets:[{borderWidth:0,data:n.results.map(function(e){return e.count}),backgroundColor:Array(n.results.length).fill(t.global.tealDefault)}]}})};let q=function(e){var n,t,r,i,o=e.replId,a=e.start,l=e.hours,c=(0,u._)((0,f.useState)(void 0),2),d=c[0],h=c[1],m=(n={variables:{id:o,input:{start:a,hours:l,deployment:!0}},ssr:!1,onCompleted:function(e){if("Repl"===e.getRepl.__typename)switch(e.getRepl.analyticsDuration.__typename){case"UserError":case"NotFoundError":h(Error(e.getRepl.analyticsDuration.message))}}},t=(0,s._)({},L,n),F.I(N,t)),g=m.data,v=m.loading,w=m.error;return w&&h(w),(0,p.FD)(j.S,{gap:8,children:[(0,p.Y)(V.EY,{variant:"subheadDefault",children:"Request Durations (ms)"}),(0,p.FD)(j.S,{children:[v?(0,p.Y)(j.S,{css:[H,B.wp.borderRadius(),W.S.backgroundPulse()]}):null,d?(0,p.Y)(G.N,{text:d.message,colorway:"negative"}):null,(null==g||null==(r=g.getRepl)?void 0:r.__typename)==="Repl"&&(null==(i=g.getRepl.analyticsDuration)?void 0:i.__typename)==="ReplAnalyticsDuration"?(0,p.Y)(j.S,{css:H,children:(0,p.Y)(Z,{data:g.getRepl.analyticsDuration})}):null]})]})};var K=t(4841);function $(){var e=(0,R._)(["\n  fragment ReplAnalyticsPageViewDataPoint on ReplAnalyticsPageViewsData {\n    __typename\n    timestamp\n    success\n    failure\n  }\n"]);return $=function(){return e},e}function J(){var e=(0,R._)(["\n  fragment ReplAnalyticsPageViews on ReplAnalyticsPageViews {\n    __typename\n    uniques\n    results {\n      ...ReplAnalyticsPageViewDataPoint\n    }\n  }\n  ","\n"]);return J=function(){return e},e}function Q(){var e=(0,R._)(["\n  query ReplAnalyticsPageViews(\n    $id: String!\n    $input: ReplAnalyticsPageViewsInput!\n  ) {\n    getRepl(id: $id) {\n      ... on Repl {\n        __typename\n        id\n        analyticsPageViews(input: $input) {\n          ... on ReplAnalyticsPageViews {\n            ...ReplAnalyticsPageViews\n          }\n          ... on NotFoundError {\n            __typename\n            message\n          }\n          ... on UserError {\n            __typename\n            message\n          }\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return Q=function(){return e},e}var X={},ee=(0,I.J1)($()),en=(0,I.J1)(J(),ee),et=(0,I.J1)(Q(),en),er=t(86020),ei=t(74002);E.t1.register(E.PP,E.kc,E.FN,E.No,E.m_);let eo=function(e){var n=e.labels,t=e.datasets,r=e.maintainAspectRatio,i=e.yAxisLabel,o=e.xAxisLabel,a=e.unit,l=(0,M.D)().values,u={labels:n.map(function(e){return e.toISOString()}),datasets:t.map(function(e){return(0,c._)((0,s._)({},e),{data:e.data.map(function(e){var n=e.x,t=e.y;return{x:n.toISOString(),y:t}}),pointRadius:.5,tension:.1})})},d=n.length;return(0,p.Y)(D.N1,{options:{clip:4,interaction:{mode:"nearest",intersect:!1},transitions:{active:{animation:{duration:0}}},elements:{point:{hoverRadius:4},line:{borderWidth:2}},responsive:!0,maintainAspectRatio:void 0===r||r,plugins:{tooltip:(0,c._)((0,s._)({},z()),{callbacks:{title:function(e){var n=new Date(e[0].label);return(0,er.A)(n,"MMM d, HH:mm (z)")}}})},scales:{y:{title:{display:!0,text:void 0===i?"# Requests":i,color:l.global.foregroundDimmer,font:{family:"'IBM Plex Sans', sans-serif"}},grid:{color:l.global.outlineDimmest},ticks:{font:{family:"'IBM Plex Sans', sans-serif"},color:l.global.foregroundDimmer,callback:function(e){if("number"==typeof e&&Math.floor(e)===e)return a?"".concat(e).concat(a):e}},min:0},x:{title:{display:!0,text:void 0===o?"Time":o,color:l.global.foregroundDimmer,font:{family:"'IBM Plex Sans', sans-serif"}},grid:{color:l.global.outlineDimmest},ticks:{font:{family:"'IBM Plex Sans', sans-serif"},color:l.global.foregroundDimmer,callback:function(e,t){var r=n[t];if(d<=24){if(r.getHours()%4!=0)return;return(0,er.A)(r,"HH:mm")}if(r.toISOString()===(0,ei.A)(r).toISOString())return(0,er.A)(r,"MMM d")}}}}},data:u})};var ea=function(e){var n=e.data,t=e.start,r=e.hours,i=(0,M.D)().values,o=Array(r).fill(0).map(function(e,n){return(0,K.A)(t,n)}),a=n.results.reduce(function(e,n){return e.set(n.timestamp,n),e},new Map),l=[{label:"Connected",data:o.map(function(e){var n;return{y:(null!=(n=a.get(e.toISOString()))?n:{success:0}).success,x:e}}),borderColor:i.global.accentPrimaryStronger,backgroundColor:i.global.accentPrimaryStronger},{label:"Failed",data:o.map(function(e){var n;return{y:(null!=(n=a.get(e.toISOString()))?n:{failure:0}).failure,x:e}}),borderColor:i.global.accentNegativeStronger,backgroundColor:i.global.accentNegativeStronger}];return(0,p.Y)(eo,{labels:o,datasets:l,maintainAspectRatio:!1})};let el=function(e){var n,t,r,i,o=e.replId,a=e.start,l=e.hours,c=(0,u._)((0,f.useState)(void 0),2),d=c[0],h=c[1],m=(n={variables:{id:o,input:{start:a,hours:l,deployment:!0}},ssr:!1,onCompleted:function(e){if("Repl"===e.getRepl.__typename)switch(e.getRepl.analyticsPageViews.__typename){case"UserError":case"NotFoundError":h(Error(e.getRepl.analyticsPageViews.message))}}},t=(0,s._)({},X,n),F.I(et,t)),g=m.data,v=m.loading,w=m.error,y=(null==g||null==(r=g.getRepl)?void 0:r.__typename)==="Repl"&&(null==(i=g.getRepl.analyticsPageViews)?void 0:i.__typename)==="ReplAnalyticsPageViews"?g.getRepl.analyticsPageViews:void 0,b=y?y.uniques:void 0;return w&&h(w),(0,p.FD)(j.S,{gap:8,children:[(0,p.FD)(j.S,{row:!0,align:"center",justify:"space-between",children:[(0,p.Y)(V.EY,{variant:"subheadDefault",multiline:!1,children:"Requests"}),b?(0,p.FD)(V.EY,{multiline:!1,children:[(0,p.Y)("strong",{children:b})," unique IP addresses"]}):null]}),(0,p.FD)(j.S,{children:[v?(0,p.Y)(j.S,{css:[B.wp.width("100%"),H,B.wp.borderRadius(),W.S.backgroundPulse()]}):null,d?(0,p.Y)(G.N,{text:d.message,colorway:"negative"}):null,y?(0,p.Y)(j.S,{css:H,children:(0,p.Y)(ea,{data:y,start:a,hours:l})}):null]})]})};function es(){var e=(0,R._)(["\n  fragment ReplAnalyticsTimeSeriesDataPoint on ReplAnalyticsTimeSeriesData {\n    __typename\n    timestamp\n    value\n    count\n    unit\n  }\n"]);return es=function(){return e},e}function ec(){var e=(0,R._)(["\n  fragment ReplAnalyticsTimeSeries on ReplAnalyticsTimeSeries {\n    __typename\n    results {\n      ...ReplAnalyticsTimeSeriesDataPoint\n    }\n  }\n  ","\n"]);return ec=function(){return e},e}function eu(){var e=(0,R._)(["\n  query ReplAnalyticsTimeSeries(\n    $id: String!\n    $input: ReplAnalyticsTimeSeriesInput!\n  ) {\n    getRepl(id: $id) {\n      ... on Repl {\n        __typename\n        id\n        analyticsTimeSeries(input: $input) {\n          ... on ReplAnalyticsTimeSeries {\n            ...ReplAnalyticsTimeSeries\n          }\n          ... on NotFoundError {\n            __typename\n            message\n          }\n          ... on UserError {\n            __typename\n            message\n          }\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return eu=function(){return e},e}var ed={},ep=(0,I.J1)(es()),ef=(0,I.J1)(ec(),ep),eh=(0,I.J1)(eu(),ef);t(66767),E.t1.register(E.PP,E.kc,E.FN,E.No,E.hE,E.m_,E.UA);let em=function(e){var n,t=e.data,r=e.start,i=e.end,o=e.label,a=e.unit,l=e.xAxisLabel,c=e.yAxisLabel,u=(0,M.D)().values,d=z(),f={datasets:[{label:o,data:t,fill:!1,borderColor:u.global.blueDimmer,tension:.1}]},h=(n=Math).max.apply(n,(0,y._)(t.map(function(e){return e.y}))),m=Math.ceil(a===k.zj.Percentage?Math.max(h,100):Math.ceil(1.2*h)),g=function(e,n){var t=n.getTime()-e.getTime();if(t<=36e5)return{unit:"minute",stepSize:5};if(t<=216e5)return{unit:"minute",stepSize:30};if(t<=864e5)return{unit:"hour",stepSize:2};if(t<=2592e5)return{unit:"hour",stepSize:6};if(t<=6048e5)return{unit:"hour",stepSize:12};else return{unit:"day",stepSize:1}}(r,i),v=g.unit,w=g.stepSize;return(0,p.Y)(D.N1,{data:f,options:{animation:!1,scales:{x:{type:"time",time:{unit:v},title:{display:!0,text:l},min:r.getTime(),max:i.getTime(),ticks:{stepSize:w,color:u.global.foregroundDimmer}},y:{title:{display:!0,text:c},type:"linear",suggestedMax:m,ticks:{font:{family:"'IBM Plex Sans', sans-serif"},color:u.global.foregroundDimmer,callback:function(e){return a?"".concat(e).concat(a):e}},min:0}},maintainAspectRatio:!1,responsive:!0,plugins:{tooltip:(0,s._)({},d)}}})};var eg=function(e){var n,t,r,i,o=e.start,a=e.end,l=e.timeSeriesFragment,s=e.xAxisLabel,c=e.yAxisLabel;if(0===l.results.length)return(0,p.Y)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"400px"},children:"No Data Available"});var d=(r=(n=l.results)[0].value,{label:r,unit:(i=null==(t=n[0])?void 0:t.unit)?function(e,n){var t=Object.entries(e).find(function(e){var t=(0,u._)(e,2);return t[0],t[1]===n});if(t)return e[t[0]]}(k.zj,i):void 0,data:n.map(function(e){return{x:new Date(e.timestamp),y:e.count}})}),f=d.label,h=d.unit,m=d.data;return(0,p.Y)(em,{data:m,start:o,end:a,label:f,unit:h,xAxisLabel:s,yAxisLabel:c})},ev=function(e){var n=e.data,t=e.start,r=e.hours,i=e.colorFn,o=Array(r).fill(0).map(function(e,n){return(0,K.A)(t,n)}),a=n.results.reduce(function(e,n){var t,r=n.timestamp,i=n.value,o=n.count,a=null!=(t=e.get(i))?t:new Map;return a.set(r,o),e.set(i,a),e},new Map),l=(0,y._)(a.keys()).map(function(e,n){var t=i(e,n),r=a.get(e);return{label:e,data:o.map(function(e){var n,t=null!=(n=null==r?void 0:r.get(e.toISOString()))?n:0;return{x:new Date(e),y:t}}),borderColor:t,backgroundColor:t}});return(0,p.Y)(eo,{labels:o,datasets:l,maintainAspectRatio:!1})};let ew=function(e){var n,t,r,i,o=e.replId,a=e.title,l=e.metric,c=e.start,d=e.hours,h=e.colorFn,m=(0,u._)((0,f.useState)(void 0),2),g=m[0],v=m[1],w=(n={variables:{id:o,input:{metric:l,start:c,hours:d,deployment:!0}},ssr:!1,onCompleted:function(e){if("Repl"===e.getRepl.__typename)switch(e.getRepl.analyticsTimeSeries.__typename){case"TooManyRequestsError":v(Error("Too many requests"));break;case"UserError":case"NotFoundError":v(Error(e.getRepl.analyticsTimeSeries.message))}}},t=(0,s._)({},ed,n),F.I(eh,t)),y=w.data,b=w.loading,S=w.error,Y=(null==y||null==(r=y.getRepl)?void 0:r.__typename)==="Repl"&&(null==(i=y.getRepl.analyticsTimeSeries)?void 0:i.__typename)==="ReplAnalyticsTimeSeries"?y.getRepl.analyticsTimeSeries:void 0;return S&&v(S),(0,p.FD)(j.S,{gap:8,children:[(0,p.Y)(j.S,{row:!0,align:"center",justify:"space-between",children:(0,p.Y)(V.EY,{variant:"subheadDefault",multiline:!1,children:a})}),(0,p.FD)(j.S,{children:[b?(0,p.Y)(j.S,{css:[B.wp.width("100%"),H,B.wp.borderRadius(),W.S.backgroundPulse()]}):null,g?(0,p.Y)(G.N,{text:g.message,colorway:"negative"}):null,Y?(0,p.Y)(j.S,{css:H,children:(0,k.P0)(l)?(0,p.Y)(eg,{start:c,end:(0,K.A)(c,d),timeSeriesFragment:Y}):(0,p.Y)(ev,{data:Y,start:c,hours:d,colorFn:h})}):null]})]})};var ey=t(89887),eb=t.n(ey);function eS(){var e=(0,R._)(["\n  fragment ReplAnalyticsTopListResult on ReplAnalyticsTopList {\n    __typename\n    results {\n      __typename\n      value\n      count\n    }\n  }\n"]);return eS=function(){return e},e}function eY(){var e=(0,R._)(["\n  query ReplAnalyticsTopList($id: String!, $input: ReplAnalyticsTopInput!) {\n    getRepl(id: $id) {\n      ... on Repl {\n        __typename\n        id\n        analyticsTopList(input: $input) {\n          ... on ReplAnalyticsTopList {\n            ...ReplAnalyticsTopListResult\n          }\n          ... on NotFoundError {\n            __typename\n            message\n          }\n          ... on UserError {\n            __typename\n            message\n          }\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return eY=function(){return e},e}var eA={},ex=(0,I.J1)(eS()),eC=(0,I.J1)(eY(),ex),e_=t(45263),ek=t(38292),eD=t(52917),eE=t(49888),eR=function(e){var n=e.data,t=e.variant;if(0===n.results.length)return(0,p.Y)(V.EY,{multiline:!1,children:"No results"});switch(t){case"map":return(0,p.Y)(eT,{data:n});case"pie":return(0,p.Y)(eF,{data:n,devices:!1});case"device-pie":return(0,p.Y)(eF,{data:n,devices:!0});case"table":return(0,p.Y)(eI,{data:n})}},eI=function(e){var n=e.data;return E.t1.register(E.Bs),(0,p.Y)(j.S,{children:n.results.map(function(e,n){return(0,p.FD)(j.S,{css:[{borderBottom:"1px solid ".concat(e_.LU.outlineDimmest)},{"&:last-of-type":{borderBottom:"none"}}],py:8,row:!0,gap:16,children:[(0,p.Y)(j.S,{css:[B.wp.flex.grow(1),B.wp.maxWidth("90%")],children:(0,p.Y)(V.EY,{title:e.value,multiline:!1,children:e.value})}),(0,p.Y)(j.S,{children:(0,p.Y)(V.EY,{multiline:!1,children:e.count})})]},n)})})},eF=function(e){var n=e.data,t=e.devices,r=(0,M.D)(),i=r.isDarkColorScheme,o=r.values,a=i?B.iB.categorical:B.iB.categorical.reverse(),l=new Map;return t?n.results.forEach(function(e){var n=e.value,t=e.count,r=n.match(/\(.*\)/);if(r&&r.length){var i=r[0].substring(1,r[0].length-1),o=l.get(i)||0;l.set(i,o+t)}else{var a=l.get("Unknown")||0;l.set("Unknown",a+t)}}):n.results.forEach(function(e){var n=e.value,t=e.count,r=n.replace(/ \(.*\)/,""),i=l.get(r)||0;l.set(r,i+t)}),(0,p.Y)(j.S,{css:H,children:(0,p.Y)(D.Fq,{options:{radius:"90%",maintainAspectRatio:!1,plugins:{tooltip:z()}},data:{labels:(0,y._)(l.keys()),datasets:[{borderWidth:+((0,y._)(l.keys()).length>1),borderColor:o.global.outlineDimmest,data:(0,y._)(l.values()),backgroundColor:Array(l.size).fill(0).map(function(e,n){return a[n%a.length]})}]}})})},eT=function(e){var n=e.data,r=eb()(function(){return Promise.all([t.e(1175),t.e(1434),t.e(8679),t.e(4289)]).then(t.bind(t,34289))},{loadableGenerated:{webpack:function(){return[34289]}},ssr:!1}),i=n.results.map(function(e){return{country:e.value,numHits:e.count}});return(0,p.Y)(r,{countries:i})};let eP=function(e){var n,t,r,i,o=e.replId,a=e.start,l=e.hours,c=e.metric,d=e.count,h=e.variant,m=void 0===h?"table":h,g=e.expandable,v=(0,k.sJ)(c),w=(0,u._)((0,f.useState)(void 0),2),y=w[0],b=w[1],S=(0,u._)((0,f.useState)(!1),2),Y=S[0],A=S[1],x=(n={variables:{id:o,input:{metric:c,start:a,hours:l,deployment:!0,count:Y?3*d:d}},ssr:!1,onCompleted:function(e){if("Repl"===e.getRepl.__typename)switch(e.getRepl.analyticsTopList.__typename){case"UserError":case"NotFoundError":b(Error(e.getRepl.analyticsTopList.message))}}},t=(0,s._)({},eA,n),F.I(eC,t)),C=x.data,_=x.loading,D=x.error;return D&&b(D),(0,p.FD)(j.S,{gap:8,children:[(0,p.FD)(j.S,{row:!0,gap:8,children:[(0,p.Y)(V.EY,{variant:"subheadDefault",multiline:!1,children:"device-pie"===m?"Top Devices":"Top ".concat(v)}),void 0!==g&&g?(0,p.Y)(ek.K0,{alt:Y?"Collapse list":"Expand list",onClick:function(){return A(!Y)},children:Y?(0,p.Y)(eD.A,{}):(0,p.Y)(eE.A,{})}):null]}),(0,p.FD)(j.S,{children:[_?(0,p.Y)(j.S,{css:[B.wp.height(80),B.wp.borderRadius(),W.S.backgroundPulse()]}):null,y?(0,p.Y)(G.N,{text:y.message,colorway:"negative"}):null,(null==C||null==(r=C.getRepl)?void 0:r.__typename)==="Repl"&&(null==(i=C.getRepl.analyticsTopList)?void 0:i.__typename)==="ReplAnalyticsTopList"?(0,p.Y)(eR,{variant:m,data:C.getRepl.analyticsTopList}):null]})]})};var eL=t(28944),eU=t(45641),eN=t(64583),eO=t(49580),eM=[{label:"six hours",key:6},{label:"one day",key:24},{label:"five days",key:120},{label:"one week",key:168},{label:"two weeks",key:336},{label:"thirty days",key:720}],eB={label:"one week",key:168},eH=B.kL.min(600),ez=(0,eN.x)({fullWidth:(0,x._)({},eH,{gridColumn:"span 2"})}),eW=(0,eN.x)({container:[B.wp.display.grid,B.wp.gap(32),B.wp.pb(32),(0,x._)({},eH,{gridTemplateColumns:"repeat(2, minmax(0, 1fr))"})],fullWidth:ez.fullWidth,map:[ez.fullWidth],pies:[ez.fullWidth,B.wp.flex.column,(0,x._)({gap:32},B.kL.min(480),[B.wp.flex.row,{" > *":{flex:1}}])]}),eG=function(e){var n=e.replId,t=(0,u._)((0,f.useState)(eB),2),r=t[0],i=r.key,o=r.label,a=t[1],l=(0,u._)((0,f.useState)((0,C.A)((0,_.A)(new Date),i-1)),2),s=l[0],c=l[1],d=(0,eU.g)("deployment-analytics-dot"),h=d.isDone,m=d.setAsDone,g=(0,C.A)((0,_.A)(new Date),23),v=(0,M.D)().values,w=[v.global.redStronger,v.global.redDimmer,v.global.redStrongest,v.global.redDimmest],y=[v.global.orangeDefault,v.global.orangeDimmer,v.global.orangeStronger,v.global.orangeDimmest],b=[v.global.blueDefault,v.global.blueDimmer,v.global.blueStronger,v.global.blueDimmest],S=[v.global.greenDefault,v.global.greenDimmer,v.global.greenStronger,v.global.greenDimmest];return(0,f.useEffect)(function(){(0,eL.Ae)({context:Y.P.Analytics})},[]),(0,f.useEffect)(function(){h||m()},[h,m]),(0,p.Y)(A.A,{children:(0,p.FD)(j.S,{css:eW.container,children:[(0,p.Y)(j.S,{css:eW.fullWidth,children:(0,p.Y)(eO.in,{items:eM,label:"Past ".concat(o),onAction:function(e){var n,t="string"==typeof e?parseInt(e,10):e;a(null!=(n=eM.find(function(e){return e.key===t}))?n:eB),c((0,C.A)((0,_.A)(new Date),t-1))},children:function(e){return(0,p.Y)(eO.Dr,{label:e.label,id:e.key},e.key)}})}),(0,p.Y)(j.S,{css:eW.fullWidth,children:(0,p.Y)(el,{replId:n,start:s,hours:i})}),(0,p.Y)(eP,{replId:n,metric:k.d0.Url,start:s,hours:i,count:4,expandable:!0}),(0,p.Y)(eP,{replId:n,metric:k.d0.Referrer,start:s,hours:i,count:4,expandable:!0}),(0,p.Y)(ew,{replId:n,title:"HTTP Statuses (24h)",metric:k.YE.Statuses,start:g,hours:24,colorFn:function(e,n){var t=Number(e);return t<300?S[n%S.length]:t<400?b[n%b.length]:t<500?y[n%y.length]:w[n%w.length]}}),(0,p.Y)(q,{replId:n,start:s,hours:i}),(0,p.FD)(j.S,{css:eW.pies,children:[(0,p.Y)(eP,{replId:n,metric:k.d0.Browser,start:s,hours:i,count:100,variant:"pie"}),(0,p.Y)(eP,{replId:n,metric:k.d0.Browser,start:s,hours:i,count:100,variant:"device-pie"})]}),(0,p.Y)(j.S,{css:eW.map,children:(0,p.Y)(eP,{replId:n,metric:k.d0.Country,start:s,hours:i,count:100,variant:"map"})})]})})},eV=t(77140),ej=t(52101);function eZ(){var e=(0,R._)(["\n  query HostingDeploymentConfigRedeploy($id: String!) {\n    hostingDeployment(id: $id) {\n      ... on HostingDeployment {\n        id\n        replitAppSubdomain\n        ignoredSecrets\n        activityLogs(count: 20) {\n          items {\n            id\n            ...HostingActivityLogLine2\n          }\n          pageInfo {\n            hasNextPage\n            nextCursor\n          }\n        }\n        currentBuild {\n          id\n          envVars {\n            name\n            value\n          }\n          suspendedReason\n        }\n        ...DeploymentsDeployOptionsDeployment\n        repl {\n          ...DeploymentsDeployOptionsAuthzRepl\n        }\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return eZ=function(){return e},e}var eq={},eK=(0,I.J1)(eZ(),ej.aW,eV.vz,eV.px),e$=t(10293),eJ=t(53231),eQ=t(46603),eX=t(49150),e0=t(54771),e1=t(83650),e2=t(14751),e4=(0,eN.x)({buttonLeft:[B.wp.borderRadius(8,0,0,8),B.wp.flex.growAndShrink(1)],buttonRight:[B.wp.borderRadius(0,8,8,0)]});function e5(e){var n=e.shouldShow,t=e.onDismissTour,r=(0,u._)((0,f.useState)(!1),2),i=r[0],o=r[1];return(0,p.FD)(p.FK,{children:[n?(0,p.FD)(j.S,{pb:12,row:!0,gap:2,justify:"center",children:[(0,p.Y)(eQ.$n,{iconLeft:(0,p.Y)(e2.A,{}),onClick:function(){(0,eJ.u4)(e$.AZ.DEPLOYMENT_MOBILE_DOWNLOAD_QR_VIEWED),o(!0)},text:"Deploy with the Replit App!",css:e4.buttonLeft}),(0,p.Y)(eQ.$n,{css:e4.buttonRight,text:"",iconLeft:(0,p.Y)(e1.A,{}),onClick:t})]}):null,(0,p.Y)(eX.a,{isOpen:i,onRequestClose:function(){o(!1),t()},children:(0,p.Y)(e0.A,{source:"deployment_build_success"})})]})}var e3=t(56687),e6=t(87882),e8=t(50069),e7=t(73361),e9=t(70431),ne=t(20156),nn=t(92855),nt=t(69258),nr=(0,eN.x)({self:B.wp.colWithGap(8),ctaGroup:{flexDirection:"row",gap:8,flexWrap:"wrap"},deployOptions:[B.wp.borderRadius(8),B.wp.border({color:e_.LU.outlineDimmest})]}),ni=function(e){var n,t,r,i,o,a,l,c,d,h,m,y,S,Y,A,x,C,_,k,D,E=e.deploymentId,R=e.replId,I=e.dotReplit,T=e.fs,P=e.ports,L=e.secrets,U=e.onError,N=e.expanded,O=e.setExpanded,M=e.shouldShowMobileTour,B=e.onDismissMobileTour,H=e.openNetworkingPane,z=e.onResume,W=e.hasAgentSession,V=(0,g.Tp)().redeployWithNoNewOptions,Z=(0,g.uS)(),q=(i=(n={deploymentId:E,dotReplit:I}).deploymentId,o=n.dotReplit,l=(a=(0,u._)((0,f.useState)(null),2))[0],c=a[1],(0,f.useEffect)(function(){var e=!1;function n(){return(n=(0,w._)(function(){var n;return(0,b.YH)(this,function(t){switch(t.label){case 0:return[4,(0,e3.XE)(o)];case 1:if(n=t.sent(),e)return[2];return c(n),[2]}})})).apply(this,arguments)}return!function(){n.apply(this,arguments)}(),function(){e=!0}},[o]),d=l,S=(h={variables:{id:i},ssr:!1,fetchPolicy:"cache-and-network"},m=(0,s._)({},eq,h),y=F.I(eK,m)).data,Y=y.loading,A=y.error,x=(null==S||null==(t=S.hostingDeployment)?void 0:t.__typename)==="HostingDeployment"?S.hostingDeployment:null,(null==S||null==(r=S.hostingDeployment)?void 0:r.__typename)==="NotFoundError"?{deployment:null,config:null,error:"Deployment not found",loading:!1}:null===d||!x&&Y?{data:null,erorr:null,loading:!0}:A||!x?{deployment:null,config:null,error:"Something went wrong",loading:!1}:{deployment:x,config:d,error:null,loading:!1}),K=(0,g.mj)().deployability,$=null==(C=q.deployment)?void 0:C.currentBuild,J=(0,e6.g)({secrets:L,replId:R}).devSecrets,Q=null==(_=q.deployment)?void 0:_.currentBuild.envVars,X=null==(k=q.deployment)?void 0:k.repl.authorizations.editSecrets.isAuthorized,ee=null==(D=q.deployment)?void 0:D.repl.authorizations.editDeploymentSecrets.isAuthorized,en=(0,f.useMemo)(function(){return J&&Q&&X&&ee?(0,ne.j)({secrets:new Map(null==Q?void 0:Q.map(function(e){return[e.name,e.value]})),otherSecrets:J}).missing.size:0},[J,Q,X,ee]);if(q.error)return(0,p.Y)(e8.Wx,{text:q.error});if(N)return $?(0,p.Y)(j.S,{css:nr.deployOptions,p:16,pt:12,children:(0,p.Y)(e7.S,{initialSubdomain:"",provider:$.provider,deploymentId:E,replId:R,fs:T,secrets:L,dotReplit:I,ports:P,onCancel:function(){return O(!1)},onDeploy:function(){return O(!1)},onError:U,initialSecretsSyncExpanded:en>0,openNetworkingPane:H,hasAgentSession:W})}):(0,p.Y)(G.N,{colorway:"warning",icon:(0,p.Y)(nt.A,{}),text:"Provider not found"});var et=q.loading||!K.redeploy.isAuthorized||Z!==v.d.Ready&&Z!==v.d.Suspended;return(0,p.FD)(j.S,{css:nr.self,children:[(0,p.Y)(e9.Y,{deployability:K,isRedeploy:!0}),(0,p.FD)(j.S,{css:nr.ctaGroup,children:[(0,p.Y)(eQ.$n,{disabled:et,onClick:(0,w._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:if(q.loading)return[2];if(Z===v.d.Suspended)return z(),[2];return[4,V({hasAgentSession:W})];case 1:return e.sent(),[2]}})}),text:Z===v.d.Suspended?"Resume":"Redeploy",iconLeft:(0,p.Y)(nn.A,{})}),(0,p.Y)(eQ.$n,{disabled:et,text:"Edit commands and secrets",onClick:function(){return O(!0)}}),(0,p.Y)(e5,{shouldShow:M,onDismissTour:B})]})]})},no=(0,eN.x)({line:{width:1,position:"absolute",left:3},circlePast:{position:"absolute",top:10,left:1,width:5,height:5,borderRadius:"100%",opacity:.5}}),na=(0,eN.x)({container:{width:7,position:"relative"},linePast:[no.line,{backgroundColor:e_.LU.outlineDimmest,top:15,bottom:-10}],linePresent:[no.line,{backgroundImage:"linear-gradient(to top, ".concat(e_.LU.outlineDimmest,", ").concat(e_.LU.outlineDimmer,")"),top:27,bottom:-10}],lineFuture:[no.line,{borderRight:"1px dashed "+e_.LU.outlineDimmer,top:23,bottom:-20}],lineFutureFailClosed:[no.line,{backgroundColor:e_.LU.outlineDimmest,top:19,bottom:-20}],lineFutureFailOpen:[no.line,{borderRight:"1px dashed "+e_.LU.outlineDimmer,top:22,bottom:-18}],circlePastGreen:[no.circlePast,B.wp.backgroundColor.accentPositiveDefault],circlePastRed:[no.circlePast,B.wp.backgroundColor.accentNegativeDefault],circlePastGray:[no.circlePast,B.wp.backgroundColor.outlineDimmer],circlePresent:[B.wp.backgroundColor.accentPrimaryStronger,{position:"absolute",top:20,left:0,width:7,height:7,borderRadius:"100%"}],circleFuture:{position:"absolute",top:12,left:-1,width:9,height:9},circleFutureFailClosed:[B.wp.backgroundColor.accentNegativeDefault,{position:"absolute",top:14,left:1,width:5,height:5,borderRadius:"100%",opacity:.6}]});function nl(e){var n,t;switch(e.type){case"pastSuccess":n=na.linePast,t=(0,p.Y)(j.S,{css:na.circlePastGreen});break;case"pastFail":n=na.linePast,t=(0,p.Y)(j.S,{css:na.circlePastRed});break;case"pastNeutral":n=na.linePast,t=(0,p.Y)(j.S,{css:na.circlePastGray});break;case"present":n=na.linePresent,t=(0,p.Y)(j.S,{css:na.circlePresent});break;case"future":n=na.lineFuture,t=(0,p.Y)("svg",{viewBox:"0 0 9 9",css:na.circleFuture,children:(0,p.Y)("circle",{cx:4.5,cy:4.5,r:4,fill:"none",stroke:e_.LU.outlineStrongest,strokeDasharray:"2 1"})});break;case"futureFailClosed":n=na.lineFutureFailClosed,t=(0,p.Y)(j.S,{css:na.circleFutureFailClosed});break;case"futureFailOpen":n=na.lineFutureFailOpen,t=null}return(0,p.FD)(j.S,{css:na.container,children:[(0,p.Y)(j.S,{css:n,"data-timeline-line":!0}),t]})}var ns=t(77449),nc=t(53135);function nu(){var e=(0,R._)(["\n  query HostingDeployActionHistory(\n    $input: HostingBuildDeployActionHistoryInput!\n  ) {\n    hostingBuildDeployActionHistory(input: $input) {\n      ... on HostingBuildDeployActionHistoryResults {\n        results {\n          ... on HostingBuildDeployLogAction {\n            log\n          }\n          ... on HostingBuildDeployStatusAction {\n            status\n            message\n          }\n        }\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n"]);return nu=function(){return e},e}var nd={},np=(0,I.J1)(nu()),nf=t(51026),nh=t(97782),nm=t(50175);function ng(){var e=(0,R._)(["\n  fragment HostingDeploymentDomainsDomain on HostingDeploymentDomain {\n    id\n    status\n    state\n    domain\n  }\n"]);return ng=function(){return e},e}function nv(){var e=(0,R._)(["\n  fragment HostingDeploymentDomainsHostingDeployment on HostingDeployment {\n    id\n    currentBuild {\n      id\n      status\n    }\n    repl {\n      id\n      apexProxy\n    }\n    domains {\n      id\n      ...HostingDeploymentDomainsDomain\n    }\n  }\n  ","\n"]);return nv=function(){return e},e}function nw(){var e=(0,R._)(["\n  query HostingDeploymentDomains($id: String!) {\n    hostingDeployment(id: $id) {\n      ... on HostingDeployment {\n        id\n        ...HostingDeploymentDomainsHostingDeployment\n      }\n    }\n  }\n  ","\n"]);return nw=function(){return e},e}function ny(){var e=(0,R._)(["\n  mutation LinkHostingDeploymentDomain(\n    $input: LinkHostingDeploymentDomainInput!\n  ) {\n    linkHostingDeploymentDomain(input: $input) {\n      ... on HostingDeployment {\n        id\n        domains {\n          ...HostingDeploymentDomainsDomain\n        }\n      }\n    }\n  }\n  ","\n"]);return ny=function(){return e},e}var nb={},nS=(0,I.J1)(ng()),nY=(0,I.J1)(nv(),nS),nA=(0,I.J1)(nw(),nY),nx=(0,I.J1)(ny(),nS);function nC(){var e=(0,R._)(["\n  fragment DeploymentSettingsAuthorizations on ReplAuthorizations {\n    addCustomDomain {\n      isAuthorized\n      code\n      message\n    }\n    deleteCustomDomain {\n      isAuthorized\n      code\n      message\n    }\n    deleteDeployment {\n      isAuthorized\n      code\n      message\n    }\n    editDeploymentStatus(provider: $provider) {\n      isAuthorized\n      code\n      message\n    }\n    editDeploymentTier(provider: $provider) {\n      isAuthorized\n      code\n      message\n    }\n  }\n"]);return nC=function(){return e},e}function n_(){var e=(0,R._)(["\n  query HostingDeploymentSettings($id: String!) {\n    hostingDeployment(id: $id) {\n      ... on HostingDeployment {\n        id\n        ...HostingDeploymentDomainsHostingDeployment\n        currentBuild {\n          id\n          provider\n          suspendedReason\n          machineConfiguration {\n            ...MachineConfiguration\n          }\n          machineJob {\n            ... on HostingBuildMachineJob {\n              failureNotifications\n            }\n          }\n          envVars {\n            name\n            value\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return n_=function(){return e},e}function nk(){var e=(0,R._)(["\n  query HostingDeploymentSettingsAuthz(\n    $replId: String!\n    $provider: HostingBuildProvider!\n  ) {\n    getRepl(id: $replId) {\n      __typename\n      ... on Repl {\n        id\n        authorizations {\n          ...DeploymentSettingsAuthorizations\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return nk=function(){return e},e}var nD={},nE=(0,I.J1)(nC()),nR=(0,I.J1)(n_(),nY,nh.yH),nI=(0,I.J1)(nk(),nE),nF=t(11882),nT=t(18870),nP=t(27108),nL=t(80762),nU=function(e){var n=e.stage,t=e.activeStage;return n===e.erroredStage?(0,p.Y)(nt.A,{alt:"error"}):n<t?(0,p.Y)(nT.A,{alt:"success"}):n===t?(0,p.Y)(nL.A,{alt:"current"}):(0,p.Y)(nP.A,{alt:"waiting"})},nN=function(e){var n=e.stage,t=e.activeStage,r=e.erroredStage;return void 0===t?null:n===r?"negative":n<t?"positive":n===t?"primary":null},nO=function(e){var n,t=e.stage,r=e.totalStagesWithTitle,i=e.activeStage,o=e.text,a=e.erroredStage,l=void 0!==i;return(0,p.Y)(f.Fragment,{children:(0,p.Y)(nF.a,{text:l?o:"",colorway:null!=(n=nN({stage:t,activeStage:i,erroredStage:a}))?n:void 0,variant:"filled",css:[l&&i<=t&&!a?W.S.foregroundPulse():{},B.wp.border({color:e_.LU.backgroundDefault}),B.wp.overflow("hidden"),(0,x._)({position:"relative",flex:1,height:26,zIndex:r-t,":first-of-type":{paddingLeft:6,paddingRight:6},":not(:first-of-type)":{paddingLeft:24},":not(:last-of-type)":{marginRight:-24}," span":B.wp.display.none},B.kL.min(400),{" span":B.wp.display.flex,":first-of-type":{paddingLeft:16,paddingRight:0}})],iconRight:l?(0,p.Y)(nU,{stage:t,activeStage:i,erroredStage:a}):void 0})},l&&i<=t&&!a?1:0)},nM=t(65518),nB=t(58809),nH=t(1230),nz=t(54319),nW=t(22677),nG=t(47630),nV=h.ZU.Object({description:h.ZU.String(),name:h.ZU.Optional(h.ZU.String()),type:h.ZU.Optional(h.ZU.String()),before:h.ZU.Optional(h.ZU.String()),after:h.ZU.Optional(h.ZU.String()),file:h.ZU.Optional(h.ZU.Union([h.ZU.String(),h.ZU.Null()])),File:h.ZU.Optional(h.ZU.Object({$kind:h.ZU.String(),file:h.ZU.String()}))}),nj=h.ZU.Object({errors:nH.wIV.properties.errors,suggestions:h.ZU.Array(nV)}),nZ={direction:"forward",state:{result:void 0,completed:!1},reducer:function(e,n){if((0,nH.VFn)(e.contents.contents,"hostingDebugSummaryEventContents")&&e.state===nH.qOk.COMPLETE&&e.sender.type===nH.utd.AI){var t=(0,nH.QNh)(e.contents.contents).result;if(nW.J(nj,t))return n.result=t,n.completed=e.state===nH.qOk.COMPLETE,!1}}},nq=t(59851),nK=t(31062),n$=t(75862),nJ=t(80621),nQ=t(90694),nX=(0,eN.x)({link:{color:e_.LU.foregroundDefault,textDecoration:"underline",":hover":{color:e_.LU.accentPrimaryStronger}},list:[{listStyle:"inside"}]});function n0(e){var n=e.provider,t=e.onViewApplicationLogs,r=(0,g.O6)();return(0,p.FD)(p.FK,{children:["Common issues for promote stage errors can be an error occurring while trying to run your run command, your application exiting unexpectedly, an error on your app server or a provisioning issue.",(0,p.Y)("br",{}),(0,p.Y)("br",{}),"Ways to debug:",(0,p.FD)("ul",{css:nX.list,children:[r?(0,p.Y)("li",{children:"This promotion may also be failing due to VNC incompatibilities."}):null,(0,p.Y)("li",{children:"Make sure your repl runs in the Workspace."}),(0,p.FD)("li",{children:["View our"," ",(0,p.Y)("a",{href:"https://docs.replit.com/cloud-services/deployments/troubleshooting",target:"_blank",css:nX.link,onClick:function(){return(0,eL.Ae)({context:"troubleshooting_doc"})},children:"troubleshooting tips."})]}),n!==S.Q0.Static&&t?(0,p.FD)("li",{children:["Look for errors in your application's server logs.",(0,p.Y)(eQ.$n,{text:"Logs",size:"small",iconLeft:(0,p.Y)(nQ.A,{}),onClick:t,css:B.wp.display.inlineFlex})," "]}):null,(0,p.Y)("li",{children:"Look for errors in your deploy logs."})]})]})}function n1(){var e=(0,g.O6)();return(0,p.FD)(p.FK,{children:["Common issues for build stage errors can be an error occurring while trying to run your build command or an compilation issue with your application code.",(0,p.Y)("br",{}),(0,p.Y)("br",{}),"Ways to debug:",(0,p.FD)("ul",{css:nX.list,children:[e?(0,p.Y)("li",{children:"This promotion may also be failing due to VNC incompatibilities."}):null,(0,p.Y)("li",{children:"Make sure your repl runs in the Workspace."}),(0,p.FD)("li",{children:["View our"," ",(0,p.Y)("a",{href:"https://docs.replit.com/cloud-services/deployments/troubleshooting",target:"_blank",css:nX.link,onClick:function(){return(0,eL.Ae)({context:"troubleshooting_doc"})},children:"troubleshooting tips."})]}),(0,p.Y)("li",{children:"Look for errors in your deploy logs."})]})]})}var n2=t(14886),n4=t(36112),n5=t(87523),n3=t(70900),n6=t(48052),n8=t(1926),n7=[B.wp.cursor.pointer,B.wp.reset.button,B.wp.color.foregroundDimmest,B.wp.focusRing,B.wp.hover(B.wp.color.foregroundDefault),{lineHeight:1.2,":not([disabled])":{cursor:"pointer"}}],n9=(0,eN.x)({errorsSection:[B.wp.colorMixBg(e_.LU.accentNegativeDimmest,"transparent",.3),B.wp.color.accentNegativeStrongest],errorsSectionTitleText:[B.wp.color.foregroundDefault],errorsList:[B.wp.display.flex,B.wp.colWithGap(4),B.wp.pt(6),B.wp.pl(24),{listStyleType:"disc"}],suggestionsSectionAssistant:[B.wp.colorMixBg(e_.LU.tealDimmest,"transparent",.15),B.wp.border({direction:"top",color:e_.LU.outlineDimmer})],aiSuggestionsTitle:[B.wp.color.blurpleStrongest,B.wp.align.center],aiSuggestionsList:B.wp.pl(24),textButton:[n7]});function te(e){var n,t,r,i,o,a,l,s,c,d,h,m,v,y,S,Y,A=e.title,x=e.debugSummary,C=e.view,_=e.provider,k=e.onViewBuildLogs,D=e.viewingBuildLogs,E=e.viewBuildLogsIcon,R=e.openFile,I=e.openDebugChat,F=(0,nK.A)(),T=(0,g.i$)(),P=(0,nz.NC)(),L=(0,f.useCallback)(function(e){(0,nq.Q)({error:e,context:"useHostingDebugSummary",extras:{replId:F,deploymentId:T,debugSummary:x,view:C,provider:_}})},[x,T,_,F,C]),U=(n=x.sessionId,t=(0,nz.NC)(),i=(r=(0,u._)((0,f.useState)(),2))[0],o=r[1],l=(a=(0,u._)((0,f.useState)(!0),2))[0],s=a[1],d=(c=(0,u._)((0,f.useState)(!1),2))[0],h=c[1],m=(0,f.useRef)(null),v=(0,f.useCallback)(function(e){s(!1),L(e),h(!0)},[L]),y=(0,nG.J2)(n?t.sessions.get(n):null),S=(0,f.useMemo)(function(){return null==y?void 0:y.reduce(nZ,"global").result},[y]),(0,nG.q3)(S,{next:function(e){e.result&&e.completed&&(o(e.result),m.current&&(clearTimeout(m.current),m.current=null),s(!1))},error:function(e){v(e instanceof Error?e:Error(String(e)))}}),(0,f.useEffect)(function(){if(l&&y)return m.current=setTimeout(function(){v(Error("Debug summary event timed out while loading."))},3e4),function(){m.current&&(clearTimeout(m.current),m.current=null)}},[l,y,v]),{loading:l,error:d,debugResult:i}),N=U.loading,O=U.debugResult,M=U.error,B=(0,g.om)().listFiles,H=(0,u._)((0,f.useState)([]),2),z=H[0],W=H[1],G=(0,nz.dm)(),V=G.assistantMode,j=G.getAssistantMessageModel,Z=G.getAssistantMessageIntent,q=(0,nJ.T)({mode:V,authz:(0,n$.L)().authorizations}),K=(Y=(0,w._)(function(){var e;return(0,b.YH)(this,function(n){switch(n.label){case 0:return[4,P.sessions.get(x.sessionId).once()];case 1:return[4,(e=n.sent()).updateSession({sessionType:nH.dF3.CHAT})];case 2:return n.sent(),[4,e.appendEvent({kind:"message",message:"Can you help me with this deployment issue?",modelType:j(q),intent:Z()})];case 3:return n.sent(),I(x.sessionId),[2]}})}),function(){return Y.apply(this,arguments)}),$=(0,f.useRef)(!1);return(0,f.useEffect)(function(){T&&O&&!$.current&&($.current=!0,(0,eL.QH)("viewed",{view:C,debugSummary:x,debugResult:O,replId:F,deploymentId:T}),O.suggestions.some(function(e){return!!tt(e)})&&B().then(function(e){e.files&&W(e.files)}))},[O,C,x,F,T,B]),(0,p.Y)(tn,{title:A,debugSummary:x,debugResult:O,provider:_,viewingBuildLogs:D,viewBuildLogsIcon:E,loading:N,files:z,error:M,onViewBuildLogs:k,openFile:R,onDebugWithAssistant:K})}function tn(e){var n=e.title,t=e.debugSummary,r=e.debugResult,i=e.provider,o=e.viewingBuildLogs,a=e.viewBuildLogsIcon,l=e.loading,s=e.files,c=e.error,u=e.onViewBuildLogs,d=e.openFile,f=e.onDebugWithAssistant;return(0,p.FD)(n4.ui,{elevated:!0,children:[(0,p.FD)(j.S,{css:n9.errorsSection,p:8,gap:4,children:[(0,p.FD)(j.S,{row:!0,gap:12,align:"center",justify:"space-between",children:[(0,p.FD)(j.S,{row:!0,gap:8,align:"center",children:[(0,p.Y)(nt.A,{color:e_.LU.accentNegativeStronger}),(0,p.Y)(V.EY,{css:n9.errorsSectionTitleText,multiline:!1,children:n})]}),(0,p.Y)(j.S,{row:!0,gap:0,children:"function"==typeof u?(0,p.Y)(j.S,{children:(0,p.FD)("button",{css:n9.textButton,onClick:u,children:[o?"Hide":"View"," logs"," ",(0,p.Y)(tr,{viewingBuildLogs:o,viewBuildLogsIcon:a})]})}):null})]}),(0,p.FD)(V.EY,{children:[l?(0,p.FD)(j.S,{row:!0,gap:4,align:"center",children:[(0,p.Y)(nL.A,{}),(0,p.Y)(V.EY,{children:"Analyzing error, generating suggestions..."})]}):(0,p.Y)(p.FK,{children:r?(0,p.FD)(p.FK,{children:[(0,p.Y)(V.EY,{children:"Your deployment attempt had the following errors:"}),(0,p.Y)("ul",{css:n9.errorsList,children:r.errors.map(function(e){return(0,p.Y)("li",{children:e},e)})})]}):null}),c?(0,p.FD)(p.FK,{children:[(0,p.FD)(V.EY,{children:["An error occurred while loading AI generated suggestions. Please try deploying again or follow the common debugging steps."," "]}),t.type===S.Uf.DeploymentBuildError?(0,p.Y)(n1,{}):null,t.type===S.Uf.DeploymentPromotionError?(0,p.Y)(n0,{provider:i}):null]}):null]})]}),!l&&r?(0,p.Y)(j.S,{css:n9.suggestionsSectionAssistant,children:(0,p.FD)(j.S,{p:8,gap:8,children:[(0,p.FD)(j.S,{css:n9.aiSuggestionsTitle,row:!0,gap:8,children:[(0,p.Y)(n6.A,{}),(0,p.Y)(V.EY,{multiline:!1,style:{flex:"1 1 auto",color:e_.LU.tealStrongest},children:"Assistant suggestions"}),(0,p.Y)(eQ.$n,{size:"small",iconLeft:(0,p.Y)(n8.A,{}),colorway:"teal",text:"Debug with ".concat(nz.BP),onClick:f})]}),(0,p.Y)("ol",{css:n9.aiSuggestionsList,children:r.suggestions.map(function(e,n){return(0,p.Y)(to,{suggestion:e,files:s,openFile:d},"".concat(t.id,"-").concat(n))})})]})}):null]})}function tt(e){var n,t,r,i;return"File"in e&&(null==(n=e.File)?void 0:n.file)!=="null"&&(null==(t=e.File)?void 0:t.file)!==""?(null==(r=e.File)?void 0:r.file.replace("./",""))||void 0:"file"in e&&"null"!==e.file&&""!==e.file&&(null==(i=e.file)?void 0:i.replace("./",""))||void 0}function tr(e){var n=e.viewingBuildLogs,t=e.viewBuildLogsIcon;return t||(n?(0,p.Y)(n3.A,{}):(0,p.Y)(n5.A,{}))}var ti=(0,eN.x)({self:{"[data-accordion-header]":[B.wp.align.start,B.wp.flex.growAndShrink(1),B.wp.rowWithGap(4)]},headerInner:[B.wp.flex.growAndShrink(1),B.wp.align.baseline,B.wp.rowWithGap(4)],description:[B.wp.textAlign.left,B.wp.color.foregroundDimmer,B.wp.rowWithGap(8),B.wp.flex.growAndShrink(1),B.wp.justify.spaceBetween],interactiveDescription:[n7,B.wp.textAlign.left,B.wp.color.foregroundDimmer,B.wp.rowWithGap(8),B.wp.flex.growAndShrink(1),B.wp.justify.spaceBetween],body:[B.wp.border(),B.wp.borderRadius(),B.wp.mt(4),B.wp.mb(8),B.wp.overflow("hidden"),B.wp.font.code,B.wp.fontSize("small"),{lineHeight:e_.LU.lineHeightSmall}],before:[B.wp.color.accentNegativeStrongest,B.wp.colorMixBg(e_.LU.accentNegativeDimmest,"transparent",.3),B.wp.px(6),B.wp.py(2)],after:[B.wp.color.accentPositiveStrongest,B.wp.colorMixBg(e_.LU.accentPositiveDimmest,"transparent",.3),B.wp.px(6)],fileLinkButton:[n7,B.wp.fontSize("small")]});function to(e){var n=e.suggestion,t=e.files,r=e.openFile,i=(0,f.useRef)(tt(n)),o=(0,u._)((0,f.useState)(),2),a=o[0],l=o[1];(0,f.useEffect)(function(){if(i.current&&!a){var e=!0,n=!1,r=void 0;try{for(var o,s=t[Symbol.iterator]();!(e=(o=s.next()).done);e=!0)if(o.value===i.current)return void l(i.current)}catch(e){n=!0,r=e}finally{try{e||null==s.return||s.return()}finally{if(n)throw r}}}},[t,a]);var s=(null==n?void 0:n.after)&&(null==n?void 0:n.after)!=="",c=(null==n?void 0:n.before)&&(null==n?void 0:n.before)!=="";return s||c?(0,p.Y)("li",{css:ti.self,children:(0,p.Y)(n2.A,{toggleOn:"chevron",chevron:"none",headerContent:function(e){var t=e.isExpanded,i=e.toggle;return(0,p.FD)(p.FK,{children:[(0,p.FD)(j.S,{css:ti.headerInner,children:[(0,p.FD)("button",{css:ti.interactiveDescription,onClick:i,children:[(0,p.Y)(V.EY,{maxLines:t?void 0:1,style:{color:"inherit"},children:n.description})," "]}),a?(0,p.Y)("button",{css:ti.fileLinkButton,onClick:function(e){e.stopPropagation(),r({path:a})},children:a}):null]}),(0,p.Y)(ek.K0,{alt:"Show suggestion",onClick:i,children:t?(0,p.Y)(n3.A,{}):(0,p.Y)(n5.A,{})})]})},headerProps:{"data-accordion-header":""},children:(0,p.FD)(j.S,{css:ti.body,children:[c?(0,p.Y)(j.S,{css:ti.before,children:(0,p.Y)("pre",{children:n.before})}):null,s?(0,p.Y)(j.S,{css:ti.after,children:(0,p.Y)("pre",{children:n.after})}):null]})})}):(0,p.Y)("li",{css:ti.self,children:(0,p.FD)(j.S,{css:ti.headerInner,children:[(0,p.FD)(j.S,{css:ti.description,children:[(0,p.Y)(V.EY,{style:{color:"inherit"},children:n.description})," "]}),a?(0,p.Y)("button",{css:ti.fileLinkButton,onClick:function(e){e.stopPropagation(),r({path:a})},children:a}):null]})})}function ta(e){var n=e.currentStatus,t=e.provider,r=e.logs,i=e.viewBuildLogs,o=e.debugSummary,a=e.openFile,l=e.openDebugChat,s=e.onViewBuildLogs,c=e.onViewApplicationLogs;if((0,g.mj)().hasDebugSummariesAuthorization&&o){var u=n===S.nH.Building?"Build failed":"Promotion failed";return(0,p.Y)(te,{title:u,debugSummary:o,view:Y.P.DeploymentInProgress,provider:t,openFile:a,openDebugChat:l})}return n===S.nH.Building?(0,p.Y)(tf,{provider:t,logs:r,openFile:a,viewBuildLogs:i,onViewBuildLogs:s}):n===S.nH.Promoting?(0,p.Y)(tp,{provider:t,logs:r,openFile:a,viewBuildLogs:i,onViewBuildLogs:s,onViewApplicationLogs:c}):null}function tl(e){var n=e.currentStatus,t=e.provider,r=e.debugSummary,i=e.openFile,o=e.openDebugChat,a=e.onViewApplicationLogs;return(0,g.mj)().hasDebugSummariesAuthorization&&r?(0,p.Y)(te,{title:"Deployment failed",debugSummary:r,view:"deploy_history_logs",provider:t,openFile:i,openDebugChat:o}):n===S.nH.Building?(0,p.Y)(tf,{provider:t,openFile:i}):n===S.nH.Promoting?(0,p.Y)(tp,{provider:t,openFile:i,onViewApplicationLogs:a}):null}var ts=(0,eN.x)({self:[B.wp.borderRadius(4),B.wp.overflow("hidden"),B.wp.border({color:e_.LU.outlineDimmer}),B.wp.mb(6)]});function tc(e){var n=e.title,t=e.debugSummary,r=e.provider,i=e.openFile,o=e.openDebugChat,a=e.onViewBuildLogs;return(0,p.Y)(j.S,{css:ts.self,children:(0,p.Y)(te,{title:n,debugSummary:t,view:Y.P.Deployment,provider:r,onViewBuildLogs:a,viewBuildLogsIcon:(0,p.Y)(nQ.A,{}),openFile:i,openDebugChat:o})})}var tu=(0,eN.x)({xtermContainer:[B.wp.display.flex,B.wp.pt(12),B.wp.pl(16),B.wp.overflow("hidden"),B.wp.borderRadius(4,4,0,0)],xterm:[B.wp.width("100%"),B.wp.maxWidth("100%"),B.wp.height(200)],xtermButton:B.wp.borderRadius(0,0,4,4)});function td(e){var n=e.title,t=e.description,r=e.logs,i=e.viewBuildLogs,o=e.onViewBuildLogs,a=e.openFile,l=(0,nB.V)(),s=(0,g.om)(),c=(0,u._)((0,nM.A)({openFile:a,listFiles:s.listFiles}),2),d=c[0],h=c[1],m=(0,f.useRef)(r?r.slice(-5):[]);return(0,f.useEffect)(function(){m.current.length&&m.current.forEach(function(e){null==d||d.write(e)})},[d]),(0,p.FD)(n4.ui,{elevated:!0,p:12,gap:12,children:[(0,p.FD)(j.S,{gap:8,children:[(0,p.FD)(j.S,{row:!0,gap:8,align:"center",children:[(0,p.Y)(nt.A,{color:e_.LU.accentNegativeStronger}),(0,p.Y)(V.EY,{multiline:!1,children:n})]}),(0,p.Y)(V.EY,{children:t})]}),void 0===i||i?null:(0,p.FD)(j.S,{children:[(0,p.Y)(j.S,{css:tu.xtermContainer,style:{backgroundColor:null==l?void 0:l.background},children:(0,p.Y)(j.D.div,{css:tu.xterm,ref:h})}),(0,p.Y)(eQ.$n,{text:"View all",iconLeft:(0,p.Y)(eE.A,{}),onClick:function(){return null==o?void 0:o()},css:tu.xtermButton})]})]})}function tp(e){return(0,p.Y)(td,(0,s._)({title:"Your app failed to promote",description:(0,p.Y)(n0,{provider:e.provider,onViewApplicationLogs:e.onViewApplicationLogs})},e))}function tf(e){return(0,p.Y)(td,(0,s._)({title:"Your app failed to build",description:(0,p.Y)(n1,{})},e))}function th(e){return(0,p.Y)(td,(0,s._)({title:"This build's deploy logs have expired",description:(0,p.Y)(p.FK,{children:"No information was found for this build. Deploy logs expire after 30 days."})},e))}var tm=t(69938),tg=t(59172),tv=[{id:0,title:"Provision",statusType:S.nH.Pending},{id:1,title:"Build",statusType:S.nH.Building},{id:2,title:"Bundle",statusType:S.nH.Running},{id:3,title:"Promote",statusType:S.nH.Promoting},{id:4,statusType:S.nH.Success}],tw=tv.filter(function(e){return"title"in e}),ty=function(e){return tv.find(function(n){return n.statusType===e})},tb=(0,eN.x)({base:{borderRadius:e_.LU.borderRadiusDefault,paddingLeft:6,paddingRight:6,height:24}}),tS=[B.wp.borderRadius(),{border:"1px solid ".concat(e_.LU.outlineDimmest)}],tY=(0,eN.x)({container:tS,header:[B.wp.width("100%")],headerLeft:[B.wp.align.baseline,B.wp.flex.shrink(1)],started:[B.wp.rowWithGap(6),B.wp.flex.growAndShrink(1),B.wp.justify.end,B.wp.color.foregroundDimmest],cancel:[tb.base,{'&[data-cancelable="true"]':{opacity:1,width:"auto"},'&[data-cancelable="false"]':{opacity:0,width:0}}],stages:[B.wp.flex.grow(1),{zIndex:0}],bottom:[B.wp.borderRadius(0,0,4,4),B.wp.overflow("hidden")],logsOpen:[B.wp.overflow("hidden"),B.wp.height("auto")],logsClosed:[B.wp.overflow("hidden"),B.wp.height(0)],xtermContainer:[B.wp.display.flex,B.wp.pt(12),B.wp.pl(16),B.wp.overflow("hidden")],xterm:[B.wp.width("100%"),B.wp.maxWidth("100%"),B.wp.height(340)],textButton:[B.wp.cursor.pointer,B.wp.reset.button,B.wp.color.foregroundDimmest,B.wp.focusRing,B.wp.hover(B.wp.color.foregroundDefault),{lineHeight:1.2,":not([disabled])":{cursor:"pointer"}}]}),tA=function(e){var n,t,r,i,o=(r={variables:{replId:(0,nK.A)(),provider:null!=(n=e.provider)?n:S.Q0.CloudRun},skip:!e.provider},i=(0,s._)({},nD,r),F.I(nI,i)).data,a=(null==o?void 0:o.getRepl.__typename)==="Repl"?o.getRepl.authorizations.editDeploymentStatus:void 0,l=null!=(t=null==a?void 0:a.isAuthorized)&&t;return(0,p.FD)(j.S,{p:16,pt:12,gap:12,children:[(0,p.FD)(j.S,{css:tY.header,row:!0,gap:8,justify:"space-between",children:[(0,p.FD)(j.S,{css:tY.headerLeft,row:!0,gap:8,children:[(0,p.Y)(V.EY,{variant:"subheadDefault",multiline:!1,children:"Deploying"}),e.timeStarted&&e.userDisplayName?(0,p.FD)(V.EY,{css:tY.started,multiline:!1,maxLines:1,children:["Started ".concat((0,nc.A)(new Date(e.timeStarted),Date.now(),{addSuffix:!0})," by "),(0,p.Y)("span",{children:e.userDisplayName})]}):null,(0,p.Y)(tg.m_,{isDisabled:l,tooltip:null==a?void 0:a.message,children:(0,p.Y)(eQ.$n,{size:"small",text:"Cancel",css:tY.cancel,onClick:e.onCancel,iconRight:e.isCanceling?(0,p.Y)(nL.A,{}):void 0,disabled:e.isCanceling||!l,"data-cancelable":e.onCancel?"true":"false"})})]}),(0,p.Y)(j.S,{row:!0,gap:6,justify:"end",children:e.onViewBuildLogs?(0,p.FD)("button",{css:tY.textButton,onClick:e.onViewBuildLogs,children:[e.viewBuildLogs?"Hide":"View"," logs"," ",e.viewBuildLogs?(0,p.Y)(n3.A,{}):(0,p.Y)(n5.A,{})]}):null})]}),(0,p.Y)(j.S,{css:tY.stages,row:!0,children:tw.map(function(n){var t=n.id,r=n.title;return(0,p.Y)(nO,{stage:t,totalStagesWithTitle:tw.length,text:r,activeStage:e.activeStage,erroredStage:e.erroredStage},t)})})]})},tx=function(e){return(0,g.uS)()===v.d.Preparing?(0,p.Y)(j.S,{css:tY.container,children:(0,p.Y)(tA,{})}):(0,p.Y)(tC,(0,s._)({},e))},tC=function(e){var n,t,r,i,o,a,l,c,d,h,m,v,Y,A,x=e.initialBuild,C=e.viewBuildLogsOnLoad,_=e.onViewLogs,k=e.onCanceled,D=e.onError,E=e.openFile,R=e.openDebugChat,I=(0,g.UM)(),T=(0,g.tq)(),P=T?{id:T.id,status:T.status,provider:T.provider,timeStarted:T.timeCreated,userDisplayName:T.user.displayName,debugSummary:T.debugSummary}:void 0,L=(0,f.useRef)(x||P),U=(n={skip:!(null==(i=L.current)?void 0:i.id),variables:{input:{buildId:null!=(A=null==(o=L.current)?void 0:o.id)?A:""}},fetchPolicy:"network-only",ssr:!1,onCompleted:function(e){if(null==e?void 0:e.hostingBuildDeployActionHistory)switch(e.hostingBuildDeployActionHistory.__typename){case"NotFoundError":break;case"UnauthorizedError":D(e.hostingBuildDeployActionHistory.message);break;case"HostingBuildDeployActionHistoryResults":var n=e.hostingBuildDeployActionHistory.results;if(n&&n.length>0){var t=[],r=[],i=!0,o=!1,a=void 0;try{for(var l,s=n[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=l.value;switch(c.__typename){case"HostingBuildDeployLogAction":t.push(c.log);break;case"HostingBuildDeployStatusAction":r.push(c)}}}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}eo({type:"setHistory",payload:t});var u=!0,d=!1,p=void 0;try{for(var f,h=r[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var m=f.value;ea(m.status,m.debugSummary)}}catch(e){d=!0,p=e}finally{try{u||null==h.return||h.return()}finally{if(d)throw p}}}break;default:D("Unexpected typename.")}},onError:function(e){D(e.message)}},t=(0,s._)({},nd,n),F.I(np,t)),N=U.loading,O=U.refetch;(0,g.kW)(function(e){switch(e.__typename){case"HostingBuildDeployLogAction":eo({type:"addLog",payload:e.log});break;case"HostingBuildDeployStatusAction":ea(e.status,e.debugSummary)}});var M=(0,u._)((0,f.useState)(L.current?null==(a=ty(L.current.status))?void 0:a.id:void 0),2),B=M[0],H=M[1],z=(0,u._)((0,f.useState)((null==(l=L.current)?void 0:l.status)==="failed"?null==(c=ty(null==(d=L.current)?void 0:d.status))?void 0:c.id:void 0),2),W=z[0],G=z[1],V=(0,u._)((0,f.useState)((null==(h=L.current)?void 0:h.debugSummary)||void 0),2),Z=V[0],q=V[1],K=(0,u._)((0,f.useState)(!1),2),$=K[0],J=K[1],Q=(0,g.om)(),X=(0,u._)((0,nM.A)({openFile:E,listFiles:Q.listFiles}),2),ee=X[0],en=X[1],et=(0,nB.V)(),er=(0,u._)((0,f.useReducer)(function(e,n){switch(n.type){case"setHistory":return ee&&ee.clear(),{allLogs:(0,y._)(n.payload).concat((0,y._)(e.allLogs))};case"addLog":return{allLogs:(0,y._)(e.allLogs).concat([n.payload]),recentLogs:[n.payload]};case"refetchLogs":return ee&&ee.clear(),N||O(),{allLogs:[]}}},{allLogs:[]}),2),ei=er[0],eo=er[1],ea=function(e,n){if(e===S.nH.Failed)G(B),n&&q(n);else{var t=ty(e);if(!t)return;H(t.id)}},el=(r=(0,w._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:return J(!0),[4,I()];case 1:return e.sent(),k(),[2]}})}),function(){return r.apply(this,arguments)}),es=(0,u._)((0,f.useState)(C||!1),2),ec=es[0],eu=es[1],ed=function(){eu(!ec),ec||(0,eL.Ae)({context:"deploy_progress_logs"})};(0,f.useEffect)(function(){(0,eL.Ae)({context:"deploy_progress"})},[]),(0,f.useEffect)(function(){var e;(null==(e=L.current)?void 0:e.id)&&T&&T.id!==L.current.id&&(L.current={id:T.id,status:T.status,provider:T.provider,timeStarted:T.timeCreated,userDisplayName:T.user.displayName,debugSummary:T.debugSummary},H(void 0),G(void 0),eo({type:"refetchLogs"}))},[T,null==(m=L.current)?void 0:m.id,O]),(0,f.useEffect)(function(){var e;void 0!==B&&(null==(e=L.current)?void 0:e.status)==="failed"&&G(B)},[B,null==(v=L.current)?void 0:v.status]),(0,f.useEffect)(function(){if(ee){if(ei.recentLogs)return void ei.recentLogs.forEach(function(e){return ee.write(e)});ei.allLogs.forEach(function(e){return ee.write(e)})}},[ei,ee]);var ep=null===(Y=tv.find(function(e){return e.id===B}))||void 0===Y?void 0:Y.statusType,ef=ep!==S.nH.Success&&!W;return L.current?(0,p.FD)(j.S,{css:tY.container,children:[(0,p.Y)(tA,{onCancel:ef?el:void 0,isCanceling:$,onViewBuildLogs:ed,viewBuildLogs:ec,provider:L.current.provider,timeStarted:L.current.timeStarted,userDisplayName:L.current.userDisplayName,activeStage:B,erroredStage:W}),(0,p.FD)(j.S,{css:tY.bottom,children:[(0,p.FD)(j.S,{css:ec?tY.logsOpen:tY.logsClosed,children:[(0,p.Y)(tm.a,{}),(0,p.Y)(j.S,{css:tY.xtermContainer,style:{backgroundColor:null==et?void 0:et.background},children:(0,p.Y)(j.D.div,{css:tY.xterm,ref:en})})]}),W&&ep?(0,p.FD)(p.FK,{children:[(0,p.Y)(tm.a,{}),(0,p.Y)(ta,{currentStatus:ep,provider:L.current.provider,debugSummary:Z,logs:ei.allLogs,viewBuildLogs:ec,openFile:E,openDebugChat:R,onViewBuildLogs:ed,onViewApplicationLogs:_})]}):null]})]}):null},t_=t(191),tk=t(41704),tD=t(93490),tE=function(e){return e.Current="current",e}(tE||{}),tR=(0,x._)({},"current",{icon:(0,p.Y)(function(e){var n=e.color;return(0,p.Y)(j.S,{css:[{textTransform:"capitalize"}],align:"center",row:!0,gap:8,children:(0,p.Y)(j.S,{tag:"span",css:[B.wp.width("8px"),B.wp.height("8px"),B.wp.borderRadius("full"),{backgroundColor:n,boxShadow:"0 0 12px ".concat(n)}]})})},{color:e_.LU.blueStronger}),text:"Current deployment"}),tI=j.D.div,tF=function(e){var n=e.activityLogItem.type,t=(0,u._)((0,f.useState)(!1),2),r=t[0],i=t[1],o=(0,u._)((0,f.useState)(!1),2),a=o[0],l=o[1],s=(0,f.useRef)(!1);(0,f.useEffect)(function(){s.current=!0;var e=setTimeout(function(){l(r)},200);return function(){clearTimeout(e)}},[r]);var c=n in tR&&tR[n];if(!c)return null;var d=c.icon,h=c.text;return(0,p.Y)(j.S,{p:8,onMouseEnter:function(){return i(!0)},onMouseLeave:function(){return i(!1)},children:(0,p.FD)(tD.A,{isOpen:a,onClickOutside:function(){return l(!1)},padding:8,children:[(0,p.Y)(tI,{css:B.wp.cursor.pointer,children:d}),(0,p.Y)(j.S,{css:[B.wp.maxWidth(240)],children:(0,p.Y)(V.EY,{children:h})})]})})},tT=t(51244),tP=t(973),tL=t(13340),tU=t(32852),tN=(0,eN.x)({rollbackPillSpan:[tP.b.listItem,B.wp.display.inlineBlock,B.wp.px(6),B.wp.fontSize(e_.LU.fontSizeDefault),B.wp.color.foregroundDimmer,B.wp.borderRadius(16),{whiteSpace:"nowrap"}],longId:[B.wp.maxWidth(260)],shortId:[B.wp.pl(4),B.wp.color.foregroundDimmer],buildIdColumn:[B.wp.flex.row,B.wp.minWidth(85)],pillSpanActivityLog:[B.wp.pl(16)],displayName:[B.wp.fontWeight.medium,B.wp.pl(6)],formattedText:[B.wp.pl(4),B.wp.overflow("hidden"),{textOverflow:"ellipsis",whiteSpace:"nowrap"}]}),tO=function(e){var n=e.build,t=n.id.slice(0,8),r=(0,u._)((0,f.useState)(!1),2),i=r[0],o=r[1],a=(0,u._)((0,f.useState)(!1),2),l=a[0],s=a[1],c=(0,f.useRef)(!1);return(0,f.useEffect)(function(){c.current=!0;var e=setTimeout(function(){s(i)},200);return function(){clearTimeout(e)}},[i]),(0,p.Y)("span",{onMouseEnter:function(){return o(!0)},onMouseLeave:function(){return o(!1)},children:(0,p.FD)(tD.A,{isOpen:l,onClickOutside:function(){return s(!1)},padding:8,children:[(0,p.Y)("span",{css:[tP.b.listItem,B.wp.display.inlineBlock,B.wp.px(2),B.wp.py(0),B.wp.borderRadius(4)],children:t}),(0,p.Y)(j.S,{css:[B.wp.maxWidth(260)],children:(0,p.Y)(V.EY,{variant:"small",children:n.id})})]})})},tM=(r={},(0,x._)(r,S.Ey.Deploy,"deployed"),(0,x._)(r,S.Ey.Rollback,"rolled back"),(0,x._)(r,S.Ey.Fail,"failed to deploy"),r),tB=function(e){var n,t=e.build,r=e.background,i=null==(n=t.rollbackSourceBuildId)?void 0:n.slice(0,8);r=null!=r?r:"higher";var o=(0,u._)((0,f.useState)(!1),2),a=o[0],l=o[1],s=(0,u._)((0,f.useState)(!1),2),c=s[0],d=s[1],h=(0,f.useRef)(!1);return(0,f.useEffect)(function(){h.current=!0;var e=setTimeout(function(){d(a)},200);return function(){clearTimeout(e)}},[a]),(0,p.Y)("span",{onMouseEnter:function(){return l(!0)},onMouseLeave:function(){return l(!1)},children:(0,p.FD)(tD.A,{isOpen:c,onClickOutside:function(){return d(!1)},padding:8,children:[(0,p.FD)(n4.ui,{background:r,css:tN.rollbackPillSpan,children:[(0,p.Y)(tU.A,{size:12}),(0,p.Y)(V.EY,{css:tN.shortId,children:i})]}),(0,p.Y)(j.S,{css:tN.longId,children:(0,p.Y)(V.EY,{variant:"small",children:t.rollbackSourceBuildId})})]})})},tH=function(e){var n=e.activityLogItem,t=n.type,r=n.build,i=e.formattedTime,o=r.user.displayName,a=t in tM&&tM[t];if(!a)return null;var l=r.rollbackSourceBuildId;return(0,p.FD)(j.S,{pb:4,align:"center",row:!0,children:[(0,p.Y)("span",{css:tN.buildIdColumn,children:(0,p.Y)(tO,{build:r})}),(0,p.Y)(tL.e,{src:r.user.image||null,size:16,username:r.user.username||"",fullName:r.user.fullName||""}),(0,p.Y)("span",{css:tN.displayName,children:o}),(0,p.FD)("span",{css:tN.formattedText,children:[" "+a," "+i]}),l?(0,p.Y)("span",{css:tN.pillSpanActivityLog,children:(0,p.Y)(tB,{build:r})}):null," "]})},tz=function(e){var n=e.activityLogItem,t=n.type,r=n.build,i=e.formattedTime,o=r.user.displayName,a=t in tM&&tM[t];if(!a)return null;var l=r.rollbackSourceBuildId;return(0,p.FD)(j.S,{children:[(0,p.FD)(j.S,{row:!0,align:"center",children:[(0,p.Y)(tO,{build:r}),l?(0,p.Y)("span",{css:tN.pillSpanActivityLog,children:(0,p.Y)(tB,{build:r})}):null]}),(0,p.FD)(j.S,{py:4,row:!0,align:"center",children:[(0,p.Y)(tL.e,{src:r.user.image||null,size:24,username:r.user.username||"",fullName:r.user.fullName||""}),(0,p.Y)("span",{css:tN.displayName,children:o}),(0,p.FD)("span",{css:tN.formattedText,children:[" "+a," "+i]})]})]})},tW=function(e){var n=e.activityLogItem,t=(0,tT.a)(),r=new Date(n.build.timeCreated),i=Date.now(),o=(0,nc.A)(r,i,{addSuffix:!0});return(0,p.Y)(p.FK,{children:t?(0,p.Y)(tz,{activityLogItem:n,formattedTime:o}):(0,p.Y)(tH,{activityLogItem:n,formattedTime:o})})},tG=t(39328),tV=t(29425),tj=t(75576),tZ=(0,eN.x)({title:[B.wp.fontSize(24),B.wp.pt(32)],subtitle:[B.wp.pt(6)],accordionContainer:[B.wp.pt(24)],accordion:[B.wp.backgroundColor.backgroundHigher,B.wp.borderRadius(6)],accordionItem:[B.wp.px(8),B.wp.py(2),B.wp.rowWithGap(8),B.wp.align.center],tableContainer:[B.wp.backgroundColor.backgroundDefault,B.wp.border({color:e_.LU.backgroundHigher}),B.wp.borderRadius(0,0,6,6),B.wp.px(12),B.wp.pb(6)],changedSecretsDisclaimer:[B.wp.py(8)],table:[B.wp.width("100%"),{".tr":{display:"flex",width:"100%",flexDirection:"row"},".th":{flexDirection:"row",borderBottom:"1px solid ".concat(e_.LU.outlineDimmest),color:e_.LU.foregroundDimmer},".td":{flexDirection:"row"}}],cell:[B.wp.fontWeight.normal,B.wp.fontSize(e_.LU.fontSizeDefault),B.wp.py(8),B.wp.display.flex,B.wp.flex.row,B.wp.align.center,B.wp.justify.spaceBetween],secretValue:[B.wp.pl(4),B.wp.color.foregroundDefault],noValue:[B.wp.pl(4),B.wp.color.foregroundDimmest],shortId:[B.wp.display.inlineBlock,B.wp.py(0),B.wp.borderRadius(4)],longId:[B.wp.maxWidth(260)]}),tq=function(e){var n=e.buildSecret,t=e.shortSecretLength,r=n.slice(0,void 0===t?8:t),i=(0,u._)((0,f.useState)(!1),2),o=i[0],a=i[1],l=(0,u._)((0,f.useState)(!1),2),s=l[0],c=l[1],d=(0,f.useRef)(!1);return((0,f.useEffect)(function(){d.current=!0;var e=setTimeout(function(){c(o)},200);return function(){clearTimeout(e)}},[o]),r.length===n.length)?(0,p.Y)("span",{children:r}):(0,p.Y)("span",{onMouseEnter:function(){return a(!0)},onMouseLeave:function(){return a(!1)},children:(0,p.FD)(tD.A,{isOpen:s,onClickOutside:function(){return c(!1)},padding:8,children:[(0,p.FD)("span",{css:tZ.shortId,children:[r,"..."]}),(0,p.Y)(j.S,{css:tZ.longId,children:(0,p.Y)(V.EY,{variant:"small",children:n})})]})})};function tK(e){var n=e.secretKey,t=e.build1Secret,r=e.build2Secret,i=e.hideSecret,o=e.selectedSecretsMap,a=e.updateSecretsMap,l=(0,u._)((0,f.useState)(o.get(n)),2),s=l[0],c=l[1],d=function(e){var t=e.buildSecret;return(0,p.Y)("td",{className:"td",children:(0,p.FD)(j.S,{css:tZ.cell,style:{justifyContent:"start"},children:[(0,p.Y)(tG.s,{id:n,value:null!=t?t:"",checked:s===t,onChange:function(){c(t),a({key:n,value:t})}}),t?(0,p.Y)("span",{css:tZ.secretValue,children:i?"":(0,p.Y)(tq,{buildSecret:t})}):(0,p.Y)("span",{css:tZ.noValue,children:"No Value"})]})})};return(0,p.FD)("tr",{children:[(0,p.Y)("td",{className:"td",children:(0,p.Y)(j.S,{css:tZ.cell,className:"cell",children:n})}),(0,p.Y)(d,{buildSecret:t}),(0,p.Y)(d,{buildSecret:r})]})}var t$=function(e){var n=e.secretKey,t=e.secretValue,r=e.hideSecret;return(0,p.FD)("tr",{children:[(0,p.Y)("td",{className:"td",children:(0,p.Y)(j.S,{css:tZ.cell,className:"cell",children:n})}),(0,p.Y)("td",{className:"td",children:(0,p.Y)("span",{css:tZ.cell,className:"cell",children:r?"":(0,p.Y)(tq,{buildSecret:t,shortSecretLength:20})})})]})};let tJ=function(e){var n=e.currentBuild,t=e.build,r=e.selectedSecretsMap,i=e.updateSecretsMap,o=(0,u._)((0,f.useState)(!1),2),a=o[0],l=o[1],s=(0,u._)((0,f.useState)(!1),2),c=s[0],d=s[1],h=(0,u._)((0,f.useState)(!0),2),m=h[0],g=h[1],v=(0,u._)((0,f.useState)(!0),2),w=v[0],y=v[1],b=(0,u._)((0,f.useState)(),2),S=b[0],Y=b[1];return((0,f.useEffect)(function(){var e,r,o,a,l,s,c,u,d,p=(r=(e={build1Secrets:n.envVars,build2Secrets:t.envVars}).build1Secrets,o=e.build2Secrets,a=new Map,l=new Map,s=new Map,c=new Map,u=new Set,d=new Map,r.forEach(function(e){s.set(e.name,e.value),u.add(e.name)}),o.forEach(function(e){c.set(e.name,e.value),u.add(e.name)}),u.forEach(function(e){var n=s.get(e)||void 0,t=c.get(e)||void 0;n===t?n&&(a.set(e,n),d.set(e,n)):(l.set(e,{build1Value:n,build2Value:t}),d.set(e,n))}),{unchangedSecrets:a,changedSecrets:l,defaultSelectedMap:d});p.defaultSelectedMap.forEach(function(e,n){i({key:n,value:e})}),Y(p)},[t.envVars,n.envVars,i]),S&&(0!==S.unchangedSecrets.size||0!==S.changedSecrets.size))?(0,p.FD)(p.FK,{children:[(0,p.Y)(j.S,{css:tZ.title,children:"Review Secrets"}),(0,p.Y)(V.EY,{css:tZ.subtitle,children:"Manage which secrets you would like to preserve from your production deployment or from your rollback target."}),S.changedSecrets.size>0?(0,p.Y)(j.S,{css:tZ.accordionContainer,children:(0,p.Y)(n2.A,{headerContent:(0,p.FD)(j.S,{css:tZ.accordionItem,children:[(0,p.Y)(nt.A,{color:e_.LU.yellowStronger}),S.changedSecrets.size,1===S.changedSecrets.size?" secret is ":" secrets are ","different across deployments"]}),expanded:c,onClick:function(){return d(!c)},css:tZ.accordion,children:(0,p.FD)(j.S,{css:tZ.tableContainer,children:[(0,p.Y)(V.EY,{css:tZ.changedSecretsDisclaimer,children:"Select secret values from either your production environment or rollback environment to copy over in your rollback."}),(0,p.FD)("table",{css:tZ.table,children:[(0,p.FD)("tr",{children:[(0,p.Y)("th",{className:"th",style:{width:"40%"},children:(0,p.Y)(j.S,{css:tZ.cell,children:"Key"})}),(0,p.Y)("th",{className:"th",style:{width:"30%"},children:(0,p.Y)(j.S,{css:tZ.cell,children:"Production"})}),(0,p.Y)("th",{className:"th",style:{width:"30%"},children:(0,p.FD)(j.S,{css:tZ.cell,children:["Rollback Build",(0,p.Y)(ek.K0,{alt:w?"Reveal Values":"Hide Values",onClick:function(){y(!w)},children:w?(0,p.Y)(tj.A,{}):(0,p.Y)(tV.A,{})})]})})]}),Array.from(S.changedSecrets.entries()).map(function(e){var n=(0,u._)(e,2),t=n[0],o=n[1];return(0,p.Y)(tK,{secretKey:t,build1Secret:o.build1Value,build2Secret:o.build2Value,hideSecret:w,selectedSecretsMap:r,updateSecretsMap:i},t)})]})]})})}):null,S.unchangedSecrets.size>0?(0,p.Y)(j.S,{css:tZ.accordionContainer,children:(0,p.Y)(n2.A,{headerContent:(0,p.FD)(j.S,{css:tZ.accordionItem,children:[(0,p.Y)(nT.A,{color:e_.LU.accentPositiveStronger}),S.unchangedSecrets.size,1===S.unchangedSecrets.size?" secret is ":" secrets are ","shared across deployments"]}),expanded:a,onClick:function(){return l(!a)},css:tZ.accordion,children:(0,p.Y)(j.S,{css:tZ.tableContainer,children:(0,p.FD)("table",{css:tZ.table,children:[(0,p.FD)("tr",{children:[(0,p.Y)("th",{className:"th",style:{width:"40%"},children:(0,p.Y)(j.S,{css:tZ.cell,children:"Key"})}),(0,p.Y)("th",{className:"th",style:{width:"60%"},children:(0,p.FD)(j.S,{css:tZ.cell,children:["Rollback Build",(0,p.Y)(ek.K0,{alt:m?"Reveal Values":"Hide Values",onClick:function(){g(!m)},children:m?(0,p.Y)(tj.A,{}):(0,p.Y)(tV.A,{})})]})})]}),Array.from(S.unchangedSecrets.entries()).map(function(e,n){var t=(0,u._)(e,2),r=t[0],i=t[1];return(0,p.Y)(t$,{secretKey:r,secretValue:i,hideSecret:m},n)})]})})})}):null]}):null};var tQ=t(84825),tX=t(61471),t0=t(31258),t1=t(6034),t2=t(37037),t4=t(59655),t5=t(17893);function t3(e){var n=e.type,t=e.view,r=e.provider,i=e.onViewBuildLogs,o=e.openFile,a=e.openDebugChat,l=e.onClickRollback,s=(0,nK.A)();return(0,p.Y)(rc,{replId:s,type:void 0===n?"default":n,view:t,provider:r,onSelect:i,openFile:o,openDebugChat:a,onClickRollback:l})}var t6=tv.filter(function(e){return"title"in e}),t8=(0,eN.x)({root:[{zIndex:0}]});function t7(e){var n=e.activeStage,t=e.erroredStage;return(0,p.Y)(j.S,{css:t8.root,px:8,pb:8,row:!0,children:t6.map(function(e){return(0,p.Y)(nO,{stage:e.id,text:e.title,totalStagesWithTitle:t6.length,activeStage:n,erroredStage:t},e.id)})})}var t9=(0,eN.x)({root:[B.wp.height("100%")],divider:[{marginLeft:8,marginRight:8,borderBottom:"1px solid "+e_.LU.outlineDimmest}],name:[B.wp.color.foregroundDefault,B.wp.fontWeight.medium],content:[B.wp.flex.growAndShrink(1),B.wp.position.relative],loading:[B.wp.coverContainer,B.wp.center],error:[B.wp.m(8),B.wp.borderRadius(8),B.wp.overflow("hidden")],xterm:[B.wp.coverContainer,{overflow:"hidden",borderBottomLeftRadius:8,borderBottomRightRadius:8,"& > div":[B.wp.coverContainer,B.wp.p(8)]}]}),re=(0,eN.x)({root:[tk.R1.maxWidth],title:[B.wp.fontSize(24),B.wp.pt(8)],subheader:[B.wp.fontSize(14)],content:[B.wp.flex.growAndShrink(1),B.wp.position.relative],prodToTargetContainer:[{b:{display:"contents",fontWeight:500}}],prodToTarget:[B.wp.flex.growAndShrink(1),B.wp.align.center,B.wp.justify.spaceBetween],prodStatusDot:[B.wp.width(12),B.wp.align.center],buildContainer:[B.wp.borderRadius(),{outline:"1px solid ".concat(e_.LU.outlineDimmer)},B.wp.backgroundColor.outlineDimmest,B.wp.width("45%"),B.wp.height("100%")],buildContainerTitle:[B.wp.fontSize(16),B.wp.align.center],buildContainerSubTitle:[B.wp.color.foregroundDimmer]});function rn(e){var n=e.build,t=e.isCurrentBuild,r=Date.now(),i=(0,nc.A)(new Date(n.timeCreated),r,{addSuffix:!0}),o=t?(0,p.Y)(j.S,{css:re.prodStatusDot,children:(0,p.Y)(tQ.$,{status:n.status})}):(0,p.Y)(t5.A,{color:e_.LU.outlineStrongest,size:12});return(0,p.FD)(j.S,{css:re.buildContainer,py:12,px:16,gap:8,children:[(0,p.FD)(j.S,{css:re.buildContainerTitle,row:!0,gap:6,children:[o,t?"Production":n.id.slice(0,8)]}),(0,p.FD)(j.S,{css:re.buildContainerSubTitle,row:!0,gap:6,align:"center",children:[(0,p.Y)(tL.e,{src:n.user.image||null,size:12,username:n.user.username||"",fullName:n.user.fullName||""}),(0,p.Y)("b",{children:" "+n.user.displayName})," deployed"," "+i]})]})}function rt(e){var n=e.build,t=e.onBack,r=e.onClickRollback,i=e.onError,o=(0,g.cF)(),a=(0,u._)((0,f.useState)(new Map),2),l=a[0],s=a[1],c=(0,tT.a)();return o?(0,p.FD)(j.S,{css:re.root,pt:12,pb:16,children:[(0,p.Y)(j.S,{pt:8,pl:8,row:!0,gap:8,align:"center",children:(0,p.Y)(ek.K0,{alt:"Back to timeline",onClick:function(){return t()},children:(0,p.Y)(t1.A,{})})}),(0,p.FD)(j.S,{css:re.content,px:8,children:[(0,p.Y)(j.S,{css:re.title,children:"Instant Rollback"}),(0,p.Y)(j.S,{css:re.subheader,pt:12,children:"Replace your current production with a previously successful deployment."}),(0,p.FD)(j.S,{css:re.prodToTargetContainer,pt:32,children:["Rolling back from ",(0,p.Y)("b",{children:"production"})," to the following"," ",(0,p.Y)("b",{children:"rollback target"}),":",(0,p.FD)(j.S,{css:re.prodToTarget,pt:16,row:!0,gap:8,children:[(0,p.Y)(rn,{build:o,isCurrentBuild:!0}),(0,p.Y)(t2.A,{}),(0,p.Y)(rn,{build:n,isCurrentBuild:!1})]})]}),c?null:(0,p.Y)(tJ,{build:n,currentBuild:o,updateSecretsMap:function(e){var n=e.key,t=e.value;s(l.set(n,t))},selectedSecretsMap:l}),(0,p.Y)(j.S,{pt:24,children:(0,p.Y)(eQ.$n,{text:"Confirm Rollback",iconLeft:(0,p.Y)(tU.A,{}),onClick:function(){var e=[];l.forEach(function(n,t){n&&e.push({name:t,value:n})}),r(e),t()},colorway:"primary"})})]})]}):(i("This deployment does not have a current build to rollback from"),null)}function rr(e){var n=e.build,t=e.onBack,r=e.fs,i=e.openFile,o=e.openDebugChat,a=e.onViewAppLogs,l=(0,u._)((0,nM.A)({openFile:i,listFiles:r.listFiles}),2),s=l[0],c=l[1],d=(0,ej.XH)({variables:{input:{buildId:n.id}},ssr:!1,fetchPolicy:"cache-and-network"}),h=d.data,m=d.loading,g=(0,f.useMemo)(function(){var e=[],n=h&&"HostingBuildDeployActionHistoryResults"===h.hostingBuildDeployActionHistory.__typename?h.hostingBuildDeployActionHistory.results:null;if(n){var t=void 0,r=void 0,i=void 0,o=!0,a=!1,l=void 0;try{for(var s,c,u=n[Symbol.iterator]();!(o=(c=u.next()).done);o=!0)!function(){var n=c.value;if("HostingBuildDeployLogAction"===n.__typename)return e.push(n.log);tv.some(function(e){return e.statusType===n.status})&&(t=n.status),n.status===S.nH.Failed&&(r=t)}()}catch(e){a=!0,l=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}var d=t?null==(s=ty(t))?void 0:s.id:void 0;return r&&(i=d),{logs:e,activeStage:d,erroredStage:i,erroredStatus:r}}},[h]);return(0,f.useEffect)(function(){s&&g&&s.write(g.logs.join(""))},[s,g]),(0,p.FD)(j.S,{css:t9.root,gap:8,children:[(0,p.FD)(j.S,{pt:8,px:8,row:!0,gap:8,align:"center",children:[(0,p.Y)(ek.K0,{alt:"Back to timeline",onClick:function(){return t()},children:(0,p.Y)(t1.A,{})}),(0,p.Y)(j.S,{children:(0,p.FD)(V.EY,{color:"dimmer",multiline:!1,children:[(0,p.Y)("span",{css:t9.name,children:n.user.displayName+" "}),(0,t_.f)(n.status)]})}),(0,p.Y)(tO,{build:n})]}),g||m?(0,p.FD)(p.FK,{children:[(null==g?void 0:g.erroredStatus)?(0,p.Y)(j.S,{css:t9.error,children:(0,p.Y)(tl,{currentStatus:g.erroredStatus,provider:n.provider,debugSummary:n.debugSummary,openFile:i,openDebugChat:o,onViewApplicationLogs:a})}):null,(0,p.Y)(t7,{activeStage:null==g?void 0:g.activeStage,erroredStage:null==g?void 0:g.erroredStage}),(0,p.Y)(j.S,{css:t9.divider}),(0,p.FD)(n4.ui,{css:t9.content,p:8,children:[(0,p.Y)(j.S,{css:t9.xterm,innerRef:c}),m||!s?(0,p.Y)(j.S,{css:t9.loading,children:(0,p.Y)(nL.A,{color:e_.LU.white,size:24})}):null]})]}):(0,p.Y)(th,{provider:n.provider,openFile:i})]})}var ri=(0,eN.x)({item:B.wp.rowWithGap(12),past:{":last-of-type":{"[data-timeline-line]":{display:"none"}}},future:{":last-of-type":{"[data-timeline-line]":{bottom:-19}}}}),ro=(0,eN.x)({empty:[B.wp.center,B.wp.align.stretch],items:[],loadMore:[B.wp.center],item:[B.wp.flex.growAndShrink(1),B.wp.color.foregroundDimmest,B.wp.hover(B.wp.color.foregroundDefault),{"&:hover .itemRight":{display:"flex"},"&:hover .itemLine":{display:"flex"}}],itemMainText:[B.wp.flex.growAndShrink(1),(0,x._)({},B.kL.min(640),B.wp.flex.growAndShrink(0))],itemLine:[B.wp.display.none,(0,x._)({},B.kL.min(640),[B.wp.flex.growAndShrink(1),B.wp.border({color:e_.LU.outlineDimmest,direction:"top"})])],itemRight:[B.wp.textAlign.right,B.wp.display.none],itemPast:[ri.item,ri.past],itemFuture:[ri.item,ri.future],disabledLog:{cursor:"not-allowed"}}),ra=(0,eN.x)({top:B.wp.rowWithGap(12),button:[B.wp.reset.button,B.wp.cursor.pointer,B.wp.borderRadius(8),B.wp.display.flex,B.wp.rowWithGap(6),B.wp.align.center,B.wp.px(8),B.wp.color.foregroundDimmer,B.wp.height(32),B.wp.hover(B.wp.color.foregroundDefault),{'&[data-highlight="true"]':[B.wp.color.accentNegativeStrongest,B.wp.backgroundColor.accentNegativeDimmest,B.wp.border({color:e_.LU.accentNegativeDimmer})]}],info:[B.wp.flex.growAndShrink(1),{'&[data-open="false"]':B.wp.pb(6)}],buttonContent:[B.wp.flex.growAndShrink(1),B.wp.rowWithGap(8),B.wp.align.center],failedBuildList:B.wp.pt(8)});function rl(e){var n=e.items,t=e.upcomingBuildStatus,r=e.view,i=e.provider,o=e.onClick,a=e.openFile,l=e.openDebugChat,s=(0,u._)((0,f.useState)(!1),2),c=s[0],d=s[1],h=(0,g.uS)(),m=n[0],w=m.build.debugSummary,y=h===v.d.Ready&&!t&&r!==Y.P.DeploymentInProgress&&w;return(0,p.FD)(j.S,{children:[(0,p.FD)(j.S,{css:ra.top,children:[(0,p.Y)(nl,{type:c?"futureFailOpen":"futureFailClosed"}),(0,p.FD)(j.S,{css:ra.info,"data-open":c,children:[y?(0,p.Y)(tc,{title:"".concat(n.length," ").concat((0,t0.A)("build",n.length)," failed"),debugSummary:w,onViewBuildLogs:function(){return o(m.build)},openFile:a,provider:i,openDebugChat:l}):null,(0,p.FD)("button",{onClick:function(){return d(!c)},css:ra.button,children:[(0,p.FD)(j.S,{css:ra.buttonContent,children:[(0,p.Y)(eE.A,{}),(0,p.Y)(V.EY,{children:"View all failed builds"}),c?null:(0,p.FD)(V.EY,{css:B.wp.color.foregroundDimmest,variant:"small",children:[n.length>1?"Most recent: ":null,(0,nc.A)(new Date(n[0].timeCreated),Date.now(),{addSuffix:!0})]})]}),c?(0,p.Y)(n3.A,{color:e_.LU.foregroundDimmer}):(0,p.Y)(n5.A,{color:e_.LU.foregroundDimmer})]})]})]}),c?(0,p.Y)(j.S,{css:ra.failedBuildList,children:n.map(function(e){return(0,p.Y)(rd,{item:e,onClick:function(){return o(e.build)},type:"future"},e.id)})}):null]})}function rs(e){var n=e.items,t=e.view,r=e.provider,i=e.onClick,o=e.openFile,a=e.openDebugChat,l=(0,u._)((0,f.useState)(!1),2),s=l[0],c=l[1],d=(0,g.mj)().hasDebugSummariesAuthorization,h=(0,g.tq)(),m=(0,f.useRef)(void 0);(0,f.useEffect)(function(){(null==h?void 0:h.status)!==void 0&&(m.current=null==h?void 0:h.status)},[h,null==h?void 0:h.status]);var v=!h&&m.current!==S.nH.Building&&m.current!==S.nH.Success,w=v?e_.LU.accentNegativeStronger:e_.LU.foregroundDimmer;if(0===n.length)return null;var y=n[0];return d&&y.build.debugSummary?(0,p.Y)(rl,{items:n,upcomingBuildStatus:m.current,view:t,provider:r,onClick:i,openFile:o,openDebugChat:a}):(0,p.FD)(j.S,{children:[(0,p.FD)(j.S,{css:ra.top,children:[(0,p.Y)(nl,{type:s?"futureFailOpen":"futureFailClosed"}),(0,p.Y)(j.S,{css:ra.info,"data-open":s,children:(0,p.FD)("button",{onClick:function(){return c(!s)},css:ra.button,"data-highlight":v,children:[(0,p.FD)(j.S,{css:ra.buttonContent,children:[v?(0,p.Y)(nt.A,{color:e_.LU.accentNegativeStronger}):null,(0,p.FD)(V.EY,{children:[n.length," ",(0,t0.A)("build",n.length)," failed"]}),s?null:(0,p.FD)(V.EY,{children:[n.length>1?"Most recent: ":null,(0,nc.A)(new Date(n[0].timeCreated),Date.now(),{addSuffix:!0})]})]}),s?(0,p.Y)(n3.A,{color:w}):(0,p.Y)(n5.A,{color:w})]})})]}),s?(0,p.Y)(j.S,{css:ra.failedBuildList,children:n.map(function(e){return(0,p.Y)(rd,{item:e,onClick:function(){return i(e.build)},type:"future"},e.id)})}):null]})}function rc(e){var n,t,r=e.replId,i=e.type,o=void 0===i?"default":i,a=e.view,l=e.provider,s=e.onSelect,c=e.openFile,u=e.openDebugChat,d=e.onClickRollback,h=(0,ej.jN)({variables:{replId:r,count:20},fetchPolicy:"cache-and-network",ssr:!1}),m=h.data,y=h.previousData,Y=h.loading,A=h.error,x=h.fetchMore,C=null!=m?m:y,_=(0,g.uS)(),k=(null==C?void 0:C.getRepl.__typename)==="Repl"?C.getRepl:null,D=(null==k||null==(t=k.hostingDeployment)?void 0:t.__typename)==="HostingDeployment"?k.hostingDeployment:null,E=(n=(0,w._)(function(){var e;return(0,b.YH)(this,function(n){switch(n.label){case 0:if(!(e=null==D?void 0:D.activityLogs.pageInfo.nextCursor))return[2];return[4,x({variables:{after:e,count:20}})];case 1:return n.sent(),[2]}})}),function(){return n.apply(this,arguments)}),R=(0,tX.A)({onLoadMore:E,rootMargin:"0px 0px 300px 0px"}).targetRef,I=(0,g.cF)(),F=(0,g.tq)(),T=(0,f.useRef)(void 0);if((0,f.useEffect)(function(){(null==F?void 0:F.id)!==void 0&&(T.current=null==F?void 0:F.id)},[null==F?void 0:F.id]),Y&&!D)return"failureQueue"===o?null:(0,p.Y)(rf,{});if(!(null==D?void 0:D.activityLogs))return null;var P=D.activityLogs,L=P.items,U=P.pageInfo;if(0===L.length)return null;if(A)return(0,p.Y)(j.S,{css:ro.empty,pb:8,children:(0,p.Y)(G.N,{colorway:"warning",icon:(0,p.Y)(nt.A,{}),text:"Something went wrong"})});var N=function(e,n){var t=[],r=(null==n?void 0:n.timeCreated)?new Date(n.timeCreated):null,i=!0,o=!1,a=void 0;try{for(var l,s=e[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=l.value;if(c.type!==S.Ey.Fail||r&&r.getTime()>new Date(c.build.timeCreated).getTime())break;t.push(c)}}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}return t}(L,I);return"failureQueue"===o?(0,p.Y)(tk.lQ,{render:N.length>0,initialHeight:44,children:(0,p.Y)(rs,{items:N,view:a,provider:l,onClick:s,openFile:c,openDebugChat:u})}):(0,p.FD)(j.S,{gap:8,"data-history-timeline-items":L.length-N.length,children:[(0,p.Y)(j.S,{css:ro.items,children:L.map(function(e,n){if(e.build.id===(null==I?void 0:I.id)||n<N.length)return null;var t=!1;return e.isRollbackCandidate&&e.build.status===S.nH.Success&&!e.build.rollbackSourceBuildId&&d&&_===v.d.Ready&&(t=!0),(0,p.Y)(rd,{item:e,onClick:function(){return s(e.build)},onClickRollback:t&&d?function(){return d(e.build)}:void 0},e.id)})}),U.nextCursor?(0,p.Y)(j.S,{css:ro.loadMore,children:(0,p.Y)(ek.K0,{disabled:Y,tooltipBehavior:"hidden",alt:"Show more",onClick:E,ref:R,children:Y?(0,p.Y)(nL.A,{}):(0,p.Y)(t4.A,{})})}):null]})}var ru=function(e){var n=e.onClickRollback,t=e.rollbackTooltip;if((0,tT.a)()&&!n)return(0,p.Y)(p.FK,{});var r=void 0===n;return(0,p.Y)(ek.K0,{alt:t,onClick:function(){return n?n():void 0},disabled:r,css:r&&ro.disabledLog,children:(0,p.Y)(tU.A,{})})};function rd(e){var n=e.item,t=e.onClick,r=e.onClickRollback,i=e.timeline,o=e.type,a=n.build.hasDeployLogs,l=!a,s=(0,tT.a)(),c=(0,g.uS)(),u="Rollback";r||(u="Cannot roll back, the image for this build is no longer available"),c!==v.d.Ready?u="Cannot roll back while a deployment is in progress":n.build.status!==S.nH.Success?u="Cannot roll back to a failed build":n.build.rollbackSourceBuildId&&(u="Cannot roll back, already rolled back to this deployment");var d=(0,p.FD)(j.S,{css:ro.item,pl:8,pr:4,pb:12,align:"center",row:!0,gap:8,style:s?{alignItems:"start"}:{},children:[(0,p.Y)(j.S,{css:ro.itemMainText,children:(0,p.Y)(tW,{activityLogItem:n})}),(0,p.Y)(j.S,{css:ro.itemLine,className:"itemLine"}),(0,p.FD)(j.S,{css:ro.itemRight,row:!0,gap:0,justify:"end",style:s?{display:"flex"}:{},className:"itemRight",children:[(0,p.Y)(tF,{activityLogItem:n}),(0,p.Y)(ru,{onClickRollback:r,rollbackTooltip:u}),(0,p.Y)(ek.K0,{alt:a?"View deploy logs":"Deploy logs expire after 30 days",onClick:t,disabled:l,css:l&&ro.disabledLog,children:(0,p.Y)(nQ.A,{})})]})]});return void 0===i||i?(0,p.FD)(j.S,{css:"past"===(void 0===o?"past":o)?ro.itemPast:ro.itemFuture,children:[(0,p.Y)(nl,{type:n.type===S.Ey.Fail?"pastFail":"pastSuccess"}),d]}):d}var rp=(0,eN.x)({loading:[{":last-of-type":{"[data-timeline-line]":{display:"none"}}}],loadingItem:[W.S.backgroundPulse(),B.wp.height(20.4),B.wp.mt(2),B.wp.ml(4),B.wp.flex.growAndShrink(1),B.wp.borderRadius(6),{opacity:.5,marginBottom:14}]});function rf(){return(0,p.Y)(j.S,{children:[,,,].fill(0).map(function(e,n){return(0,p.FD)(j.S,{css:rp.loading,row:!0,gap:12,children:[(0,p.Y)(nl,{type:"pastNeutral"}),(0,p.Y)(n4.ui,{elevated:!0,css:rp.loadingItem})]},n)})})}var rh=t(1205),rm=t(29542),rg=t.n(rm),rv=t(16439),rw=t(94299),ry=(0,eN.x)({root:[B.wp.flex.shrink(1)],name:[B.wp.color.foregroundDefault,B.wp.fontWeight.medium],item:[B.wp.flex.growAndShrink(1)],itemMainText:[B.wp.flex.growAndShrink(1),B.wp.align.center],itemRight:[B.wp.textAlign.right],disabledLog:{cursor:"not-allowed"}}),rb=function(e){var n=e.onClick,t=(0,g.uS)(),r=(0,g.cF)();if(t===v.d.Loading||!r)return(0,p.Y)(nL.A,{size:12});var i=r.status,o=r.hasDeployLogs,a=!o;return(0,p.Y)(j.S,{css:ry.root,row:!0,gap:0,children:(0,p.FD)(j.S,{css:ry.item,pr:4,align:"center",row:!0,gap:8,children:[(0,p.Y)(tQ.$,{status:i}),(0,p.Y)(j.S,{css:ry.itemMainText,children:(0,p.FD)(V.EY,{multiline:!1,children:[(0,p.Y)("span",{css:ry.name,children:r.user.displayName+" "}),(0,t_.f)(i,r.suspendedReason)+" ",!function(e){switch(e){case S.nH.Building:case S.nH.Promoting:case S.nH.Running:case S.nH.Pending:case S.nH.Failed:case S.nH.Success:return!0;case S.nH.Resuming:case S.nH.Suspending:case S.nH.Suspended:case S.nH.UpdatingTier:return!1}}(i)?null:(0,p.Y)(tg.m_,{tooltip:(0,rw.A)(new Date(r.timeCreated),"MMMM do, Y 'at' h:m aa z"),maxWidth:250,children:function(e,n){return(0,p.Y)("span",(0,c._)((0,s._)({},e),{ref:n,children:(0,nc.A)(new Date(r.timeCreated),Date.now(),{addSuffix:!0})}))}})]})}),(0,p.Y)(j.S,{css:ry.itemRight,children:(0,p.Y)(ek.K0,{alt:o?"View deploy logs":"Deploy logs expire after 30 days",onClick:n,disabled:a,css:a&&ry.disabledLog,children:(0,p.Y)(nQ.A,{})})})]})})},rS=(i={},(0,x._)(i,S.Q0.Gce,"Reserved VM"),(0,x._)(i,S.Q0.CloudRun,"Autoscale"),(0,x._)(i,S.Q0.Static,"Static"),(0,x._)(i,S.Q0.Cron,"Scheduled"),i);function rY(){var e=(0,R._)(["\n  query DeploymentSuspendedReplOrg($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        org {\n          id\n        }\n      }\n    }\n  }\n"]);return rY=function(){return e},e}var rA={},rx=(0,I.J1)(rY()),rC=t(82300),r_=t(79784),rk=t(62362),rD=(0,eN.x)({suspendedLink:[B.wp.color.accentPrimaryStronger],deploymentInfoWrapper:[B.wp.flex.growAndShrink(1),B.wp.rowWithGap(12),{':has( + [data-history-timeline-items="0"])':{"[data-timeline-line]":{display:"none"}}}],deploymentSuspension:[B.wp.flex.growAndShrink(1),B.wp.colWithGap(12)]});function rE(){var e,n,t,r=(0,nK.A)(),i=(0,g.cF)(),o=(0,g.mj)().deployability,a=(e={variables:{replId:r}},n=(0,s._)({},rA,e),F.I(rx,n)).data;if(!i)return null;var l=(null==a?void 0:a.getRepl.__typename)==="Repl"&&(null==(t=a.getRepl.org)?void 0:t.__typename)==="Org"?"Org Settings > Billing":"Account > Subscription",c=o.redeploy.isAuthorized?"You can resume your deployment to make it available once again.":"Navigate to ".concat(l," to resolve."),u="If no action is taken your deployment will be deleted ".concat(rC.wp," days after the date it was suspended. For more assistance reach out to our support team at ");return i.suspendedReason===S.UV.Ubb?(0,p.Y)(j.S,{css:rD.deploymentInfoWrapper,children:(0,p.Y)(j.S,{css:rD.deploymentSuspension,children:(0,p.Y)(G.N,{icon:(0,p.Y)(rk.A,{}),text:["Your deployment was suspended due to a billing failure. ".concat(c," ").concat(u),(0,p.Y)("a",{css:rD.suspendedLink,href:"mailto:support@replit.com",children:(0,p.Y)("u",{children:"support@replit.com"})},""),"."]})})}):i.suspendedReason===S.UV.SubscriptionRequired?(0,p.Y)(j.S,{css:rD.deploymentInfoWrapper,children:(0,p.Y)(j.S,{css:rD.deploymentSuspension,children:(0,p.Y)(G.N,{icon:(0,p.Y)(rk.A,{}),text:["Your deployment was suspended due to requiring an active ".concat(r_.en," membership. ").concat(c," ").concat(u),(0,p.Y)("a",{css:rD.suspendedLink,href:"mailto:support@replit.com",children:(0,p.Y)("u",{children:"support@replit.com"})},""),"."]})})}):null}function rR(){var e=(0,R._)(["\n  fragment ExecuteScheduledJobExecution on ScheduledJobExecution {\n    id\n    startedAt\n    endedAt\n    status\n  }\n"]);return rR=function(){return e},e}function rI(){var e=(0,R._)(["\n  mutation ExecuteScheduledJob($deploymentId: String!) {\n    executeScheduledJob(input: { deploymentId: $deploymentId }) {\n      __typename\n      ... on ExecuteScheduledJobResult {\n        execution {\n          ...ExecuteScheduledJobExecution\n        }\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return rI=function(){return e},e}var rF={},rT=(0,I.J1)(rR()),rP=(0,I.J1)(rI(),rT),rL=t(80714),rU=t(36640),rN=t(75040);function rO(e){var n,t,r=e.disabled,i=e.onSuccessfulExecution,o=(0,g.i$)(),a=(0,g.cF)(),l=(0,g.uS)(),c=(0,rU.A)().showError,d=(0,u._)((0,f.useState)(),2),h=d[0],m=d[1],w=function(e){m(e.message),c(e.message)},y=(0,u._)((n={onError:w,onCompleted:function(e){var n=e.executeScheduledJob;if("ExecuteScheduledJobResult"===n.__typename){null==i||i(n.execution);return}w(Error("An error occurred while executing the scheduled job"))}},t=(0,s._)({},rF,n),nm.n(rP,t)),2),b=y[0],Y=y[1].loading,A=!!(!o||!a||Y||h||void 0!==r&&r),x=(null==a?void 0:a.status)===S.nH.Success,C=l===v.d.Ready,_=!A&&C&&x,k=C?"You must successfully deploy your project before being able to run it":"Can't run while deployment is ".concat((0,rL.OS)(l));return(0,p.Y)(tg.m_,{tooltip:k,isDisabled:_,children:(0,p.Y)(eQ.$n,{text:"Run now",iconLeft:Y?(0,p.Y)(nL.A,{}):(0,p.Y)(rN.A,{}),size:"small",disabled:A||!_,onClick:function(){o&&!A&&b({variables:{deploymentId:o}})}})})}var rM=t(1040),rB=t(5504),rH=t(75414),rz=t(83023),rW=t(45149),rG=t(71117);function rV(e){return(0,p.Y)(rG.Ay,(0,c._)((0,s._)({},e),{children:(0,p.Y)("path",{fillRule:"evenodd",d:"M3.75 4A.25.25 0 0 1 4 3.75h3a.25.25 0 0 1 .25.25v3a.25.25 0 0 1-.25.25H4A.25.25 0 0 1 3.75 7V4ZM4 2.25A1.75 1.75 0 0 0 2.25 4v3c0 .966.784 1.75 1.75 1.75h3A1.75 1.75 0 0 0 8.75 7V4A1.75 1.75 0 0 0 7 2.25H4ZM16.75 4a.25.25 0 0 1 .25-.25h3a.25.25 0 0 1 .25.25v3a.25.25 0 0 1-.25.25h-3a.25.25 0 0 1-.25-.25V4ZM17 2.25A1.75 1.75 0 0 0 15.25 4v3c0 .966.784 1.75 1.75 1.75h3A1.75 1.75 0 0 0 21.75 7V4A1.75 1.75 0 0 0 20 2.25h-3ZM4 16.75a.25.25 0 0 0-.25.25v3c0 .138.112.25.25.25h3a.25.25 0 0 0 .25-.25v-3a.25.25 0 0 0-.25-.25H4ZM2.25 17c0-.966.784-1.75 1.75-1.75h3c.966 0 1.75.784 1.75 1.75v3A1.75 1.75 0 0 1 7 21.75H4A1.75 1.75 0 0 1 2.25 20v-3ZM18 15.25A2.75 2.75 0 0 0 15.25 18v3a.75.75 0 0 0 1.5 0v-3A1.25 1.25 0 0 1 18 16.75h3a.75.75 0 0 0 0-1.5h-3Zm3 5a.75.75 0 0 1 .75.75v.01a.75.75 0 0 1-1.5 0V21a.75.75 0 0 1 .75-.75ZM12.75 7a.75.75 0 0 0-1.5 0v3A1.25 1.25 0 0 1 10 11.25H7a.75.75 0 0 0 0 1.5h3A2.75 2.75 0 0 0 12.75 10V7Zm-10.5 5a.75.75 0 0 1 .75-.75h.01a.75.75 0 0 1 0 1.5H3a.75.75 0 0 1-.75-.75ZM12 2.25a.75.75 0 0 0 0 1.5h.01a.75.75 0 0 0 0-1.5H12Zm0 13a.75.75 0 0 1 .75.75v.01a.75.75 0 0 1-1.5 0V16a.75.75 0 0 1 .75-.75Zm4-4a.75.75 0 0 0 0 1.5h1a.75.75 0 0 0 0-1.5h-1Zm5 0a.75.75 0 0 1 .75.75v.01a.75.75 0 0 1-1.5 0V12a.75.75 0 0 1 .75-.75ZM12.75 20a.75.75 0 0 0-1.5 0v1a.75.75 0 0 0 1.5 0v-1Z",clipRule:"evenodd"})}))}var rj=(0,eN.x)({qrCodeWrapper:[B.wp.borderRadius(4),{backgroundColor:"white"}]}),rZ=function(e){var n=e.currentBuild,t=(0,rB._P)({type:"string",controlName:"flag-fallback-deployments-domain",default:rC.co}),r=(0,u._)((0,f.useState)([]),2),i=r[0],o=r[1],a=t!==rC.co;return(0,f.useEffect)(function(){var e=(null==(i=n.repl.hostingDeployment)?void 0:i.__typename)==="HostingDeployment"&&n.repl.hostingDeployment.id,r=[];switch(n.provider){case S.Q0.Gce:case S.Q0.CloudRun:case S.Q0.Static:var i,a,l,s,c,u,d=(null==(a=n.repl.hostingDeployment)?void 0:a.__typename)==="HostingDeployment"?null==(l=n.repl.hostingDeployment)?void 0:l.replitAppSubdomain:void 0;!d&&(null==(s=n.repl.owner)?void 0:s.username)&&(d="".concat(n.repl.slug,"-").concat(n.repl.owner.username)),d&&r.push({href:"https://".concat(d).concat((null==(u=window)||null==(c=u.location)?void 0:c.hostname)!=="replit.com"?".staging":"",".").concat(t),private:!1})}if(n.repl.domains){var p=n.repl.domains.filter(function(n){return(null==n?void 0:n.hosting_deployment_id)===e}),f=!0,h=!1,m=void 0;try{for(var g,v=p[Symbol.iterator]();!(f=(g=v.next()).done);f=!0){var w=g.value;w&&r.push({href:"https://".concat(w.domain),private:!1,state:"verified"!==w.state?w.state:void 0})}}catch(e){h=!0,m=e}finally{try{f||null==v.return||v.return()}finally{if(h)throw m}}}o(r)},[n,t]),(0,p.FD)(j.S,{gap:2,css:[B.wp.flex.growAndShrink(1)],children:[a?(0,p.Y)(G.N,{colorway:"warning",text:"The ".concat(rC.co," domain is currently unavailable, please use the ").concat(t," URL below.")}):null,i.map(function(e,n){return(0,p.FD)(j.S,{row:!0,gap:8,align:"center",children:[(0,p.Y)(V.EY,{css:[B.wp.flex.shrink(1)],multiline:!1,children:(0,p.Y)("a",{href:e.href,target:"_blank",css:[B.wp.color.foregroundDefault],children:e.href})}),e.private?(0,p.Y)(rW.A,{color:e_.LU.foregroundDefault}):null,(0,p.Y)("a",{href:e.href,target:"_blank",css:[B.wp.display.flex,B.wp.align.center],children:(0,p.Y)(rz.A,{color:e_.LU.foregroundDefault})}),(0,p.Y)(rq,{url:e.href}),e.state?(0,p.FD)(V.EY,{multiline:!1,children:["(","pushed_to_goval"===e.state?"verifying":e.state,")"]}):null]},"domains-".concat(n))})]})};function rq(e){var n=e.url,t=(0,u._)((0,f.useState)(!1),2),r=t[0],i=t[1];return(0,p.FD)(rH.Wv,{isOpen:r,onOpenChange:function(e){return i(e)},label:"QR Code",children:[(0,p.Y)(ek.K0,{alt:"QR Code",children:(0,p.Y)(rV,{})}),(0,p.Y)(j.S,{align:"start",children:(0,p.Y)(j.S,{css:rj.qrCodeWrapper,p:8,children:(0,p.Y)(rM.Ay,{size:128,value:n})})})]})}var rK=(0,O.i7)("\n    50% {\n      background-color: ".concat(e_.LU.accentPositiveDimmest,";\n      outline: 1px solid ").concat(e_.LU.accentPositiveDimmer,";\n      box-shadow: 0px 0px 32px rgba(0, 145, 24, 0.3);\n    }\n")),r$=(0,eN.x)({deploymentInfo:[B.wp.colWithGap(8),B.wp.p(16),B.wp.borderRadius(),{outline:"1px solid transparent"}]}),rJ=(0,eN.x)({textButton:[B.wp.reset.button,B.wp.color.foregroundDimmest,B.wp.hover(B.wp.color.accentPrimaryStrongest),{lineHeight:1.2,":not([disabled])":[B.wp.cursor.pointer,B.wp.color.accentPrimaryStronger,B.wp.focusRing]}],textLink:B.wp.hover(B.wp.color.accentPrimaryStrongest),labeledSection:[B.wp.flex.growAndShrink(1),(0,x._)({},B.kL.min(400),[B.wp.flex.row,B.wp.align.baseline])],labeledSectionFullWidth:[B.wp.flex.growAndShrink(1),(0,x._)({},B.kL.min(400),[B.wp.flex.row,B.wp.align.baseline,B.wp.flex.grow(1),B.wp.justify.spaceBetween])],buildStatus:[B.wp.flex.shrink(1)],deploymentInfo:r$.deploymentInfo,deploymentInfoAnimate:[r$.deploymentInfo,{animation:"".concat(rK," 700ms ease-out")}],deploymentInfoTitle:[B.wp.flex.wrap,B.wp.flex.shrink(0),B.wp.justify.spaceBetween],deploymentInfoContent:[(0,x._)({},B.kL.min(400),B.wp.colWithGap(4))],typeColumn:[B.wp.flex.wrap,B.wp.flex.shrink(1)]}),rQ=function(e){var n=e.text,t=e.onClick,r=e.disabled;return(0,p.Y)("button",{css:rJ.textButton,onClick:t,disabled:void 0!==r&&r,children:n})},rX=function(e){var n=e.name,t=e.sku,r=e.canManage,i=e.usageLink,o=e.onManageClick;return(0,p.FD)(j.S,{css:rJ.typeColumn,row:!0,gap:6,children:[(0,p.Y)(V.EY,{multiline:!1,children:n}),t?(0,p.FD)(V.EY,{color:"dimmest",multiline:!1,children:["(",t,")"]}):null,"function"==typeof o?(0,p.Y)(rQ,{text:"Manage",onClick:o,disabled:!r}):null,i?(0,p.Y)(rg(),{legacyBehavior:!0,href:"/usage",passHref:!0,children:(0,p.Y)("a",{css:rJ.textLink,children:(0,p.Y)(V.EY,{children:"See all usage"})})}):null]})},r0=function(e){var n=e.label,t=e.children,r=e.fullWidth;return(0,p.FD)(j.S,{css:r?rJ.labeledSectionFullWidth:rJ.labeledSection,children:[(0,p.Y)(j.S,{css:B.wp.minWidth(100),children:(0,p.Y)(V.EY,{css:B.wp.color.foregroundDimmer,multiline:!1,children:n})}),t]})},r1=function(e){var n=e.provider,t=e.machine,r=e.onViewBuildLogs,i=e.onManageClick,o=e.onViewAction,a=(0,g.uS)(),l=(0,g.cF)(),s=void 0!==l,c=n!==S.Q0.Static&&s&&null===l.hasImageTag,u=!!((a===v.d.Ready||a===v.d.Suspended)&&!c),d=null,h=null,m=null,w=null,y=(0,g.tq)(),b=(0,f.useRef)(void 0);(0,f.useEffect)(function(){y&&(b.current=null==y?void 0:y.id)},[y,null==y?void 0:y.id]);var A=(null==l?void 0:l.status)===S.nH.Success,x=(null==l?void 0:l.id)===b.current,C=(null==l?void 0:l.provider)!==S.Q0.Cron;switch(l&&(h=(0,p.FD)(p.FK,{children:[(0,p.Y)(r0,{label:"Status",children:(0,p.Y)(j.S,{css:rJ.buildStatus,row:!0,gap:4,align:"center",children:(0,p.Y)(rb,{onClick:function(){r(l)}})})}),C?(0,p.Y)(r0,{label:"Domain",children:(0,p.Y)(rZ,{currentBuild:l})}):null]})),n){case S.Q0.Gce:m=(0,p.Y)(r0,{label:"Type",fullWidth:!s,children:(0,p.Y)(rX,{name:rS[n],sku:null==t?void 0:t.configurationLabel,canManage:u,onManageClick:i})});break;case S.Q0.CloudRun:m=(0,p.Y)(r0,{label:"Type",fullWidth:!s,children:(0,p.Y)(rX,{name:rS[n],sku:t?"".concat(t.configurationLabel," / ").concat(t.maxInstances," Max"):"Beta",canManage:u,usageLink:!0,onManageClick:i})});break;case S.Q0.Static:m=(0,p.Y)(r0,{label:"Type",fullWidth:!s,children:(0,p.Y)(rX,{name:rS[n],sku:void 0,canManage:u&&s,onManageClick:i})});break;case S.Q0.Cron:if(!(null==l||null==(_=l.machineJob)?void 0:_.timezone))break;var _,k,D,E=null==l||null==(k=l.machineJob)?void 0:k.timezone,R=rv.m.find(function(e){return e.utc.includes(E)}),I=(null==R?void 0:R.abbr)||E;m=(0,p.Y)(r0,{label:"Type",fullWidth:!s,children:(0,p.Y)(rX,{name:rS[n],sku:"".concat(I,", ").concat(null==l||null==(D=l.machineJob)?void 0:D.crontab),canManage:!1})}),d=(0,p.Y)(rO,{onSuccessfulExecution:function(){o({type:Y.k.ChangeView,payload:{view:Y.P.Schedule}})}})}return(c&&(w=(0,p.Y)(j.S,{children:(0,p.Y)(G.N,{icon:(0,p.Y)(nt.A,{}),colorway:"warning",text:"To upgrade, please redeploy."})})),h||m||w)?(0,p.FD)(n4.ui,{elevated:!0,css:A&&x?rJ.deploymentInfoAnimate:rJ.deploymentInfo,style:{paddingTop:l?12:16},children:[l?(0,p.FD)(j.S,{css:rJ.deploymentInfoTitle,row:!0,gap:8,children:[(0,p.Y)(V.EY,{variant:"subheadDefault",multiline:!1,children:"Production"}),d,l.rollbackSourceBuildId?(0,p.Y)(tB,{build:l,background:"highest"}):null]}):null,(0,p.FD)(j.S,{css:rJ.deploymentInfoContent,gap:8,children:[(0,p.Y)(rE,{}),h,m,w]})]}):null},r2=t(95139),r4=t(41106),r5=t(71115),r3=t(48686),r6=t(99615),r8=t(17513),r7=(0,eN.x)({subView:[B.wp.flex.growAndShrink(1),B.wp.colWithGap(12)],deploymentInfoWrapper:[{':has( + [data-history-timeline-items="0"])':{"[data-timeline-line]":{display:"none"}}}],deploymentInfo:[B.wp.flex.growAndShrink(1),B.wp.colWithGap(12)]}),r9=function(e){var n,t,r,i=e.view,o=e.onLifecycleCommand,a=e.onViewAction,l=e.onError,s=e.openFile,c=e.hasAgentSession,d=(0,g.uS)(),h=(0,g.i$)(),m=(0,g.cF)(),w=(0,g.tq)(),y=(0,g.om)(),b=(0,g.g$)(),x=(0,r2.m6)(),C=(0,g.Tp)().rollbackToPreviousBuild,_=(n=(0,r5.useRouter)(),t=(0,r2.ME)(n,"storeReviewPrompt")&&(0,r2.Po)(n),r=(0,f.useCallback)(function(e){var n=e.source;t&&(0,r8._z)({messageType:r6.tF.REQUEST_STORE_REVIEW_PROMPT,source:n},(0,r3.Ak)())},[t]),(0,f.useMemo)(function(){return{isSupported:t,requestPrompt:r}},[t,r])),k=void 0!==m,D=(0,nK.A)(),E=(0,g.ik)(D),R=null==m?void 0:m.provider,I=k&&m.machineConfiguration?{configurationId:m.machineConfiguration.id,configurationLabel:m.machineConfiguration.label,configurationSlug:m.machineConfiguration.slug,maxInstances:null==m?void 0:m.maxMachineInstances}:void 0,F=(0,r4.A)("deployments-pane","deployments-mobile-download"),T=F.shouldDisplay,P=F.dismiss,L=F.register;(0,f.useEffect)(function(){L()},[L]),(0,f.useEffect)(function(){k&&d===v.d.Deploying&&_.requestPrompt({source:"deployProgress"})},[_,k,d]);var U=(null==m?void 0:m.status)&&m.status===S.nH.Success&&T&&!x,N=(0,u._)((0,f.useState)(!1),2),O=N[0],M=N[1],B=(0,u._)((0,f.useState)(null),2),H=B[0],z=B[1],W=(0,u._)((0,f.useState)(null),2),G=W[0],V=W[1],Z=(0,u._)((0,f.useState)(null),2),q=Z[0],K=Z[1];(0,f.useEffect)(function(){(0,eL.Ae)({context:Y.P.Deployment})},[]),(0,f.useEffect)(function(){(d===v.d.Preparing||d===v.d.Deploying)&&(i===Y.P.DeploymentInProgress||G||a({type:Y.k.ChangeView,payload:{view:Y.P.DeploymentInProgress}}))},[d,i,a,G]);var $=(0,f.useRef)(void 0);(0,f.useEffect)(function(){$.current=null==w?void 0:w.id},[null==w?void 0:w.id]);var J=(null==m?void 0:m.status)===S.nH.Success,Q=(null==m?void 0:m.id)===$.current;(0,f.useEffect)(function(){J&&Q&&a({type:Y.k.ChangeView,payload:{view:Y.P.Deployment}})},[J,Q,a]);var X=null==w?void 0:w.status,ee=(0,f.useRef)(X);(0,f.useEffect)(function(){X&&(ee.current=X)},[X]);var en=(0,g.Ol)(),et=(0,g.Rh)();if(G)return(0,p.Y)(rr,{build:G,fs:y,openFile:s,openDebugChat:function(e){a({type:Y.k.OpenPane,payload:{type:"ghostwriterChat",data:{sessionId:e}}})},onBack:function(){V(null)},onViewAppLogs:function(){a({type:Y.k.ChangeView,payload:{view:Y.P.Logs}})}});if(H)return(0,p.Y)(rt,{build:H,onBack:function(){z(null)},onClickRollback:function(e){C({rollbackCandidateBuildId:H.id,envVars:e})},onError:function(e){z(null),l(e)}});if(q===S.Q0.CloudRun)return(0,p.Y)(ns.J,{onError:l,onConfirm:function(e){a({type:Y.k.SendDeploymentLifecycleCommand,payload:{command:S.jP.UpdateMachineConfiguration,machineConfigurationId:e.configurationId,maxMachineInstances:e.maxInstances}})},onBack:function(){return K(null)}});if(q===S.Q0.Gce)return(0,p.Y)(rh.VW,{replId:D,isTeamRepl:E,initialMachineConfiguration:I,onConfirm:function(e){a({type:Y.k.SendDeploymentLifecycleCommand,payload:{command:S.jP.UpdateMachineConfiguration,machineConfigurationId:e.configurationId,maxMachineInstances:e.maxInstances}})},onBack:function(){return K(null)},onError:l});var er=!k||!h||d!==v.d.Ready&&d!==v.d.Suspended&&d!==v.d.ProcessingLifecycleCommand,ei=function(e){a({type:Y.k.OpenPane,payload:{type:"ghostwriterChat",data:{sessionId:e}}})};return(0,p.Y)(p.FK,{children:(0,p.Y)(A.A,{children:(0,p.FD)(j.S,{children:[(0,p.FD)(j.S,{row:!0,gap:12,children:[k?(0,p.Y)(nl,{type:"future"}):null,(0,p.FD)(j.S,{css:r7.subView,pb:12,children:[er?null:(0,p.Y)(ni,{dotReplit:en,fs:y,secrets:b,ports:et,deploymentId:h,replId:D,onError:l,expanded:O,setExpanded:M,shouldShowMobileTour:null!=U&&U,onDismissMobileTour:P,openNetworkingPane:function(){a({type:Y.k.OpenPane,payload:{type:"networking"}})},onResume:function(){o({command:S.jP.Resume})},hasAgentSession:c}),i===Y.P.DeploymentInProgress?(0,p.Y)(tx,{openFile:s,openDebugChat:ei,viewBuildLogsOnLoad:!k,onViewLogs:function(){a({type:Y.k.ChangeView,payload:{view:Y.P.Logs}})},onCanceled:function(){a({type:Y.k.ChangeView,payload:{view:Y.P.Deployment}}),l("Build cancelled")},onError:l}):null]})]}),k&&R?(0,p.FD)(p.FK,{children:[(0,p.Y)(t3,{type:"failureQueue",onViewBuildLogs:V,openFile:s,openDebugChat:ei,view:i,provider:R}),(0,p.FD)(j.S,{css:r7.deploymentInfoWrapper,row:!0,gap:12,children:[(0,p.Y)(nl,{type:"present"}),(0,p.Y)(j.S,{css:r7.deploymentInfo,pb:16,children:(0,p.Y)(r1,{provider:R,machine:I,onViewBuildLogs:V,onManageClick:function(){if(R===S.Q0.CloudRun||R===S.Q0.Gce)return void K(R);R===S.Q0.Static&&a({type:Y.k.ChangeView,payload:{view:Y.P.Settings}})},onViewAction:a})})]}),(0,p.Y)(t3,{onViewBuildLogs:V,openFile:s,openDebugChat:ei,view:i,provider:R,onClickRollback:function(e){z(e)}})]}):null]})})})};function ie(){var e=(0,R._)(["\n  fragment DeploymentsNewDeploymentRepl on Repl {\n    id\n    slug\n    owner {\n      ... on User {\n        id\n        username\n      }\n      ... on Team {\n        id\n        username\n      }\n    }\n    org {\n      __typename\n      id\n      slug\n      type\n    }\n  }\n"]);return ie=function(){return e},e}function it(){var e=(0,R._)(["\n  query DeploymentsNewDeployment($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        ...DeploymentsNewDeploymentRepl\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return it=function(){return e},e}var ir={},ii=(0,I.J1)(ie()),io=(0,I.J1)(it(),ii);function ia(){var e=(0,R._)(["\n  query DeploymentsPaneIntro($id: String!) {\n    getRepl(id: $id) {\n      ... on Repl {\n        id\n        owner {\n          __typename\n          ... on Team {\n            id\n          }\n        }\n        ...DeploymentsNewDeploymentRepl\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return ia=function(){return e},e}var il={},is=(0,I.J1)(ia(),ii),ic=t(16564),iu=t(48959),id=(0,eN.x)({self:[{marginLeft:"auto",marginRight:"auto",flex:"0 1 auto"}],link:[B.wp.color.foregroundDefault,tP.b.underlinedOnHover]});function ip(){return(0,p.Y)(G.N,{css:id.self,icon:(0,p.Y)(rz.A,{}),text:(0,p.Y)(rg(),{css:id.link,target:"_blank",href:"https://docs.replit.com/billing/deployment-repricing",children:"We've updated deployment pricingsee what's new."})})}var ih=t(50051),im=t(75176),ig=t(25073),iv=t(37039),iw=t(90419),iy=(0,eN.x)({cta:[B.wp.width("100%"),B.wp.maxWidth(320),{marginLeft:"auto",marginRight:"auto"}],ctaContainer:[B.wp.colWithGap(8),B.wp.align.center],ctaStatusBanner:[B.wp.textAlign.left],disabledBanner:[B.wp.py(6),{alignSelf:"center"}]});function ib(e){var n=e.provider,t=e.isDeployable,r=e.isDeployableCode,i=e.isDeployableExplanation,o=e.isIncludedInSubscription,a=e.loading,l=e.onProviderContinue,s=e.refetchDeployabilityQueryData,c=e.setShowPaymentMethodForm,u=e.showPaymentMethodForm,d=e.setShowSupportForm,f=e.replId,h=e.org,m=e.hasAgentSession,v=(0,g.gq)(),w=(0,r2.m6)();if(!t&&w)return(0,p.Y)(G.N,{text:i,colorway:"grey",css:iy.disabledBanner});if(o)return(0,p.FD)(p.FK,{children:[(0,p.Y)(eQ.$n,{colorway:"primary",onClick:l,text:"Included in your subscription",loading:a,css:iy.cta}),(0,p.Y)(V.EY,{color:"dimmer",children:i})]});var y=function(){if(h){var e=(0,ih.EG)(h).settings.href.toString()+"/billing";window.open(e,"_blank");return}c()};switch(r){case S.S4.RequiresActiveSubscription:return(0,p.Y)(j.S,{css:iy.ctaContainer,children:(0,p.Y)(im.A,{context:"workspace_hosting_pane",text:"Upgrade your plan to deploy",css:iy.cta,colorway:"primary",variant:"default",disabled:u,onPlanCheckoutComplete:s,highlightUpsell:"deployments"})});case S.S4.RequiresPaymentMethodOrSubscription:return(0,p.FD)(j.S,{css:iy.ctaContainer,children:[(0,p.Y)(im.A,{context:"workspace_hosting_pane",text:"Upgrade your plan to deploy",css:iy.cta,colorway:"primary",variant:"default",disabled:u,onPlanCheckoutComplete:s}),(0,p.Y)(eQ.$n,{variant:"nofill",colorway:"primary",text:"or add a payment method",css:iy.cta,disabled:u,loading:a,iconLeft:(0,p.Y)(iw.A,{}),onClick:y})]});case S.S4.RequiresSmsVerification:return(0,p.Y)(iu.A,{context:S.SG.Deployments,onSuccess:s});case S.S4.RequiresPaymentMethod:return(0,p.Y)(eQ.$n,{colorway:"primary",text:"Add a payment method",css:iy.cta,disabled:u,loading:a,iconLeft:(0,p.Y)(iw.A,{}),onClick:function(){return y()}});case S.S4.PaymentDelinquent:return(0,p.Y)(iv.d,{iconLeft:(0,p.Y)(iw.A,{}),text:"You have a failed payment. Please update your payment method to continue using deployments.",colorway:"negative",href:"/account#billing",target:"_blank"});case S.S4.RequiresUnbanning:return(0,p.Y)(iv.d,{text:"Your account currently has restrictions on deploying. We're here to help! Please reach out to our support team for assistance.",colorway:"warning",iconLeft:(0,p.Y)(nt.A,{}),css:iy.ctaStatusBanner,onClick:function(){return d()}});case S.S4.InsufficientBudget:return(0,p.FD)(p.FK,{children:[(0,p.Y)(G.N,{text:"You've reached your monthly usage budget. Increase your budget to continue deploying.",colorway:"warning",icon:(0,p.Y)(nt.A,{}),css:iy.ctaStatusBanner}),(0,p.Y)(ig.h,{onUpdateSuccess:s,replId:f})]});case S.S4.FeatureDisabled:case S.S4.FeatureUnsupportedForReplitTeams:case S.S4.FeatureUnsupportedForTeamsEdu:case S.S4.FeatureUnsupportedForTeamsFree:case S.S4.FeatureUnsupportedForTeamsPro:case S.S4.InsufficientPermissions:case S.S4.InsufficientQuota:case S.S4.RequiresActiveTeamsSubscription:case S.S4.RequiresEmailVerification:if(r===S.S4.InsufficientQuota&&"static"===n)return(0,p.FD)(j.S,{css:iy.ctaContainer,children:[(0,p.Y)(G.N,{text:"You have reached the maximum number of Static deployments available on your plan.",colorway:"grey",css:iy.disabledBanner}),(0,p.Y)(im.A,{context:"workspace_hosting_pane",text:"Upgrade your plan to deploy",css:iy.cta,colorway:"primary",variant:"default",disabled:u,onPlanCheckoutComplete:s})]});return(0,p.Y)(G.N,{text:i,colorway:"grey",css:iy.disabledBanner});case S.S4.Authorized:case S.S4.AuthorizedQuota:return(0,p.FD)(p.FK,{children:[m&&n===S.Q0.Static?(0,p.Y)(G.N,{text:"Static deployments are not yet officially supported for Agent Apps.",colorway:"warning",icon:(0,p.Y)(nt.A,{}),css:iy.cta}):null,(0,p.Y)(eQ.$n,{colorway:"primary",onClick:l,text:"Set up your deployment",loading:a,css:iy.cta}),v&&!v.hasDeploymentRepricing?(0,p.Y)(j.S,{row:!0,gap:8,align:"center",justify:"center",children:(0,p.Y)(ip,{})}):null]});default:(0,ic.A)(r)}}var iS=t(80456),iY=t(64513),iA=t(82377),ix=t(94009),iC=t(43593),i_=t(84788),ik=(0,eN.x)({type:[B.wp.borderRadius(8),B.wp.p(8)]});function iD(e){var n,t,r,i,o=e.replId,a=e.initialState,l=e.fs,c=e.secrets,d=e.dotReplit,h=e.ports,m=e.onBack,v=e.onDeploy,w=e.onError,y=e.openNetworkingPane,b=e.hasAgentSession,Y=(0,u._)((0,f.useState)(a),2),x=Y[0],C=Y[1],_=(n={variables:{replId:o},onError:function(e){return w(e.message)}},t=(0,s._)({},ir,n),F.I(io,t)),k=_.data,D=_.loading,E=(0,g._k)().scheduledDeploymentCostDetails,R=(null==k?void 0:k.getRepl.__typename)==="Repl"?k.getRepl:null,I=R?(0,iA.ER)({replSlug:R.slug,username:null==(r=R.owner)?void 0:r.username}):"",T=(0,i_.Os)(iC.IW.id,iC.Gp.ConfirmDeployment),P=(0,i_.Os)(iC._t.id,iC.ij.ConfirmDeployment);if(D)return(0,p.Y)(e8.cN,{});if(!R)return null;var L=(null==R||null==(i=R.owner)?void 0:i.__typename)==="Team";return x.type===S.Q0.Static?(0,p.FD)(p.FK,{children:[(0,p.Y)(A.A,{maxWidth:!0,children:(0,p.Y)(ek.K0,{alt:"Back",tooltipBehavior:"hidden",onClick:m,children:(0,p.Y)(t1.A,{})})}),(0,p.Y)(A.A,{maxWidth:!0,children:(0,p.Y)(n4.ui,{css:ik.type,elevated:!0,children:(0,p.Y)(r0,{label:"Type",fullWidth:!0,children:(0,p.Y)(rX,{name:rS[x.type]})})})}),(0,p.Y)(A.A,{maxWidth:!0,children:(0,p.Y)(e7.S,{initialSubdomain:I,deploymentId:null,replId:o,provider:x.type,onError:w,onCancel:m,onDeploy:v,dotReplit:d,fs:l,ports:h,secrets:c,openNetworkingPane:y,hasAgentSession:b})})]}):x.type===S.Q0.Gce?(0,p.FD)(p.FK,{children:[(0,p.Y)(rh.VW,{replId:o,isTeamRepl:L,onBack:m,onError:w,onChange:function(e){C({type:S.Q0.Gce,machine:e})}}),(0,p.Y)(A.A,{maxWidth:!0,children:(0,p.Y)(e7.S,{initialSubdomain:I,deploymentId:null,replId:o,provider:x.type,machine:x.machine,onError:w,onCancel:m,onDeploy:v,fs:l,secrets:c,dotReplit:d,ports:h,openNetworkingPane:y,hasAgentSession:b})}),(0,p.Y)(A.A,{maxWidth:!0,children:(0,p.FD)(V.EY,{color:"dimmest",children:["Your deployed app will incur charges for any resource usage."," ",(0,p.Y)("a",{href:iY.ik.ABOUT_USAGE_BASED_BILLING,target:"_blank",rel:"noopener",children:"Learn more"})]})})]}):x.type===S.Q0.Cron?(0,p.FD)(p.FK,{children:[(0,p.Y)(A.A,{maxWidth:!0,children:(0,p.Y)(e8.fw,{onBack:m})}),(0,p.Y)(A.A,{maxWidth:!0,children:(0,p.FD)(j.S,{gap:4,children:[(0,p.Y)(V.EY,{variant:"subheadBig",children:"Scheduled Job configuration"}),(0,p.FD)(V.EY,{variant:"small",color:"dimmer",children:["Scheduled deployments run at a specified time and frequency configured by you. During executions they spin up an on demand machine to run your code. You are billed for the total number of compute units used across all machines plus $",E.fixedCostPerMonth,"/month per scheduled deployment scheduler."]})]})}),(0,p.Y)(A.A,{maxWidth:!0,children:(0,p.Y)(ix.K,{id:"machineConfiguration",title:"Machine Configuration",information:"Your machine configuration determines the number of vCPUs and memory available to your app.",detail:"More machine configurations coming soon.",children:(0,p.Y)(n4.ui,{css:ik.type,elevated:!0,children:(0,p.Y)(rX,{name:"1 vCPU / 2 GiB RAM",sku:"$".concat(E.fixedConfigurationCostPerSec,"/sec")})})})}),(0,p.Y)(A.A,{maxWidth:!0,children:(0,p.Y)(e7.S,{initialSubdomain:I,deploymentId:null,replId:o,provider:x.type,onError:w,onCancel:function(){return m()},onDeploy:v,fs:l,secrets:c,dotReplit:d,ports:h,openNetworkingPane:y,hasAgentSession:b})}),(0,p.Y)(A.A,{maxWidth:!0,children:(0,p.FD)(V.EY,{color:"dimmest",children:["Your deployed app will incur charges for any resource usage."," ",(0,p.Y)("a",{href:iY.ik.ABOUT_USAGE_BASED_BILLING,target:"_blank",rel:"noopener",children:"Learn more"})]})})]}):x.machine?(0,p.FD)(p.FK,{children:[(0,p.Y)(A.A,{maxWidth:!0,children:(0,p.Y)(ek.K0,{alt:"Back",tooltipBehavior:"hidden",onClick:function(){C({type:S.Q0.CloudRun,machine:null}),T.goto(iC.Gp.ApproveDeployment),P.goto(iC.ij.ApproveDeployment)},children:(0,p.Y)(t1.A,{})})}),(0,p.Y)(A.A,{maxWidth:!0,children:(0,p.Y)(n4.ui,{css:ik.type,elevated:!0,children:(0,p.Y)(r0,{label:"Type",fullWidth:!0,children:(0,p.Y)(rX,{name:rS[x.type],sku:"".concat(x.machine.configurationLabel," / ").concat(x.machine.maxInstances," Max"),canManage:!0,onManageClick:function(){C({type:S.Q0.CloudRun,machine:null})}})})})}),(0,p.Y)(A.A,{maxWidth:!0,children:(0,p.Y)(e7.S,{initialSubdomain:I,deploymentId:null,replId:o,provider:x.type,machine:x.machine,onError:w,onCancel:function(){return C({type:S.Q0.CloudRun})},onDeploy:v,fs:l,secrets:c,dotReplit:d,ports:h,openNetworkingPane:y,hasAgentSession:b})})]}):(0,p.Y)(A.A,{maxWidth:!0,children:(0,p.Y)(ns.J,{onBack:m,onError:w,onConfirm:function(e){C({type:S.Q0.CloudRun,machine:e})}})})}var iE=t(4595),iR=t(58370),iI=t(39999),iF=t(82402),iT=t(66525),iP=t(47177),iL=t(46404),iU=t(9293),iN=B.kL.min(600),iO={order:"--provider-order"},iM={order:"var(".concat(iO.order,")")},iB=(0,O.AH)([B.wp.width("100%"),B.wp.maxWidth(340),(0,x._)({},iN,{order:iM.order})]),iH=(0,O.AH)([B.wp.reset.button,B.wp.overflow("hidden"),B.wp.position.relative,B.wp.focusRing,B.wp.borderRadius(),B.wp.width("100%")]),iz=(0,eN.x)({self:[iB,{"&::after":{content:"none"}}],selfLoading:[iB,W.S.foregroundPulse(),B.wp.border({color:e_.LU.backgroundHighest})],button:[iH,B.wp.border({color:e_.LU.outlineDimmer}),{"&:not(.is-disabled)":[tP.b.filledAndOutlined],"&.is-disabled":[B.wp.backgroundColor.backgroundHigher,{cursor:"not-allowed"}]}],buttonActive:[iH,B.wp.cursor.pointer,B.wp.backgroundColor.accentPrimaryDimmest,B.wp.border({color:e_.LU.accentPrimaryStronger})],content:[B.wp.p(8),B.wp.colWithGap(4),(0,x._)({},iN,B.wp.py(12))],contentRecommended:[B.wp.p(8),B.wp.colWithGap(4),(0,x._)({},iN,{paddingTop:12,paddingBottom:20})],recommended:[B.wp.py(4),B.wp.backgroundColor.backgroundHighest],recommendedActive:[B.wp.py(4),B.wp.backgroundColor.accentPrimaryDimmer],icon:[B.wp.display.none,B.wp.color.foregroundDimmer,B.wp.center,(0,x._)({},iN,B.wp.display.flex)],iconActive:[B.wp.display.none,B.wp.color.accentPrimaryStrongest,B.wp.center,(0,x._)({},iN,B.wp.display.flex)],title:[B.wp.center]});function iW(e){var n,t=e.loading,r=e.active,i=e.disabled,o=void 0!==i&&i,a=e.provider,l=e.onClick,s=e.title,c=e.description,u=e.recommended,d=e.index,f=e.isAgentDeployment,h=(n={},(0,x._)(n,S.Q0.CloudRun,(0,p.Y)(iT.A,{size:32})),(0,x._)(n,S.Q0.Gce,(0,p.Y)(iP.A,{size:32})),(0,x._)(n,S.Q0.Static,(0,p.Y)(iL.A,{size:32})),(0,x._)(n,S.Q0.Cron,(0,p.Y)(nP.A,{size:32})),n)[a];return(0,p.Y)("span",{css:t?iz.selfLoading:iz.self,children:(0,p.FD)("button",{css:r?iz.buttonActive:iz.button,className:o?"is-disabled":"",onClick:function(){return l(a)},disabled:t||o,style:(0,x._)({},iO.order,d),children:[u?(0,p.Y)(j.S,{css:r?iz.recommendedActive:iz.recommended,children:(0,p.Y)(V.EY,{variant:"small",children:f?"Chosen by Agent":"Recommended"})}):null,(0,p.FD)(j.S,{css:u?iz.contentRecommended:iz.content,children:[(0,p.Y)(j.S,{css:r?iz.iconActive:iz.icon,children:h}),(0,p.FD)(j.S,{children:[(0,p.Y)(j.S,{css:iz.title,row:!0,gap:4,children:(0,p.Y)(V.EY,{variant:"subheadDefault",multiline:!1,children:s})}),(0,p.Y)(V.EY,{multiline:!1,variant:"small",children:c})]})]})]})})}var iG=(0,eN.x)({container:[B.wp.maxWidth(420),{marginLeft:"auto",marginRight:"auto"}],item:[{display:"grid",gridTemplateColumns:"56px auto",gap:20}],text:[B.wp.flex.growAndShrink(1),B.wp.textAlign.left]});function iV(e){var n=e.header,t=e.info;return(0,p.FD)(j.S,{css:iG.container,gap:12,children:[(0,p.Y)(V.EY,{variant:"subheadDefault",children:n}),t.map(function(e,n){return(0,p.FD)(j.S,{css:iG.item,align:"center",children:[e.icon,(0,p.Y)(V.EY,{css:iG.text,children:e.text})]},n)})]})}var ij=[S.Q0.Gce,S.Q0.CloudRun,S.Q0.Static,S.Q0.Cron],iZ=(0,eN.x)({container:[B.wp.textAlign.center,tk.R1.maxWidth],title:[B.wp.width("100%"),B.wp.maxWidth(400),B.wp.align.center,{marginLeft:"auto",marginRight:"auto"}],body:B.wp.colWithGap(16),providers:[B.wp.flex.column,B.wp.align.center,(0,x._)({gap:8},iN,[B.wp.flex.row,B.wp.align.center,{gap:12}])],providerDetails:B.wp.colWithGap(16),ctaGroup:B.wp.colWithGap(8),payment:[B.wp.borderRadius("container"),B.wp.textAlign.left,B.wp.shadow(2)]}),iq=function(e){var n,t,r,i,o,a,l=e.replId,c=e.onError,d=e.onDeploy,h=e.onViewAction,m=e.initialSelectedProvider,v=e.disableUnrecommendedProviders,y=void 0!==v&&v,C=e.hasAgentSession,_=e.flow,k=(0,g.om)(),D=(0,g.g$)(),E=(0,g.Ol)(),R=(0,g.Rh)(),I=(0,g._k)(),T=I.getRvmDeploymentCostDetailsByConfigurationSlug,P=I.autoscaleDeploymentCostDetails,L=I.staticDeploymentCostDetails,U=I.scheduledDeploymentCostDetails,N=(0,u._)((0,f.useState)(!1),2),O=N[0],M=N[1],B=(0,u._)((0,f.useState)(!1),2),H=B[0],z=B[1],W=(0,u._)((0,f.useState)(null!=m?m:null),2),G=W[0],Z=W[1],q=(0,g.kM)({replId:l,onError:c,dotReplitService:E}),K=q.activeProvider,$=q.setActiveProvider,J=q.recommendedProvider,Q=(0,u._)((0,f.useState)(null!=(o=null==_?void 0:_.skipIntro)&&o),2),X=Q[0],ee=Q[1];y||(y=X&&!!(null==_?void 0:_.isAgentDeployment));var en=(n={variables:{id:l},onError:function(e){return c(e.message)}},t=(0,s._)({},il,n),F.I(is,t)),et=en.loading,er=en.data,ei=(0,u._)((0,f.useState)(!1),2),eo=ei[0],ea=ei[1],el=(0,g.mj)(),es=el.getDeployabilityByProvider,ec=el.refetch,eu=es(K),ed=eu.deploy,ep=eu.isIncludedInSubscription,ef=ed.isAuthorized,eh=ed.code,em=ed.message,eg=et||eo||void 0===K;(0,f.useEffect)(function(){(0,eL.Ae)({context:"intro"})},[]);var ev=(0,iR.Vv)(),ew=ev.getDescription,ey=ev.Icon,eb=(null==er||null==(r=er.getRepl)?void 0:r.__typename)==="Repl"&&(null==(i=er.getRepl.org)?void 0:i.type)==="team"?er.getRepl.org:void 0;(0,f.useEffect)(function(){X&&ef&&void 0!==K&&G!==K&&Z(K)},[K,G,X,ef]);var eS=(0,f.useCallback)((0,w._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:return ea(!0),[4,ec()];case 1:return e.sent(),ea(!1),[2]}})}),[ec,ea]),eY=(0,i_.Os)(iC.IW.id,iC.Gp.SetupDeployment),eA=(0,i_.Os)(iC._t.id,iC.ij.SetupDeployment);if(G)return(0,p.Y)(iD,{replId:l,initialState:G?{type:G}:{type:S.Q0.Gce,didCheckout:!0},fs:k,secrets:D,dotReplit:E,ports:R,onDeploy:d,onBack:function(){ee(!1),Z(null),eY.goto(iC.Gp.SetupDeployment),eA.goto(iC.ij.SetupDeployment)},onError:c,hasAgentSession:C,openNetworkingPane:function(){h({type:Y.k.OpenPane,payload:{type:"networking"}})}});var ex=(a={title:"Deploy to production",subtitle:ew({type:"deployments"})},(0,x._)(a,S.Q0.Gce,{display:!0,title:"Reserved VM",subtitle:"Always On Servers",header:"Reserved VMs are for long-running jobs and apps",info:[{text:"Reserved VMs ensure high uptime, minimizing disruptions for apps requiring persistent session data.",icon:(0,p.Y)(iS.Qm,{})},{text:"Reserved VMs are billed hourly starting at $".concat(T("e2-micro").costPerHour,"/hour."),icon:(0,p.Y)(iS.QX,{})},{text:"Suitable for bots, stateful APIs, webscraping, and long-running jobs.",icon:(0,p.Y)(iS.XD,{})}]}),(0,x._)(a,S.Q0.CloudRun,{display:!0,title:"Autoscale",subtitle:"".concat(J===S.Q0.CloudRun?"Best choice for most apps":"Meet demand exactly"),header:"Scale up and down to meet demand exactly",info:[{text:"Automatically scales from zero to any level of demand, making it inexpensive for most apps and effortless when you go viral.",icon:(0,p.Y)(iS.Js,{})},{text:P.fixedCostPerMonth?"Usage-based pricing. Billed at $".concat(P.costPerComputeUnitUsd," per compute unit, plus a fixed cost of $").concat(P.fixedCostPerMonth," per month per deployment."):"Compute units are billed at $".concat(P.costPerComputeUnitUsd," per compute unit."),icon:(0,p.Y)(iS.iw,{})},{text:"Suitable for web apps and stateless APIs.",icon:(0,p.Y)(iS.XD,{})}]}),(0,x._)(a,S.Q0.Static,{display:!0,title:"Static pages",subtitle:"Simple HTML websites",header:"Basic websites with no backend server",info:[{text:"You only pay for outbound data transfer included in Replit plans. $".concat(L.outboundDataCostPerGib,"/GiB otherwise."),icon:(0,p.Y)(iS.ly,{})},{text:"No database or data persistence.",icon:(0,p.Y)(iS.Y9,{})},{text:"Suitable for HTML, CSS, JavaScript sites.",icon:(0,p.Y)(iS.XD,{})}]}),(0,x._)(a,S.Q0.Cron,{display:!0,title:"Scheduled",subtitle:"Time-based job scheduler",header:"The easiest way to schedule for your apps to run",info:[{text:"Scheduled deployments run at a specified time and frequency configured by you.",icon:(0,p.Y)(iS.Y9,{})},{text:"Usage-based pricing. Each scheduled job is billed at $".concat(U.costPerComputeUnitUsd," per compute unit + $").concat(U.fixedCostPerMonth," per month for the scheduler."),icon:(0,p.Y)(iS.iw,{})},{text:"Suitable for internal tools, one-off tasks, and Cron jobs.",icon:(0,p.Y)(iS.XD,{})}]}),a);return(0,p.FD)(A.A,{centered:!0,children:[(0,p.Y)(eX.a,{isOpen:H,onRequestClose:function(){return z(!1)},children:(0,p.Y)(iF.A,{onRequestClose:function(){return z(!1)}})}),(0,p.FD)(j.S,{css:iZ.container,gap:32,children:[X?null:(0,p.FD)(j.S,{css:iZ.title,gap:4,children:[(0,p.Y)(ey,{pane:{type:"deployments"},size:48}),(0,p.Y)(V.Y9,{level:1,variant:"subheadBig",children:ex.title}),(0,p.FD)(V.EY,{color:"dimmer",children:[ex.subtitle," ",(0,p.Y)("a",{href:"https://docs.replit.com/category/replit-deployments",target:"_blank",rel:"noopener",children:"Learn more."})]}),(0,p.Y)(iI.v,{iconLeft:(0,p.Y)(iU.A,{}),text:" Choosing the right deployment type",href:"https://www.youtube.com/watch?v=sXP5d0k1atk",target:"_blank"})]}),(0,p.FD)(j.S,{css:iZ.body,children:[(0,p.Y)(j.S,{css:iZ.providers,children:ij.map(function(e,n){if(!ex[e].display)return null;var t=ex[e],r=t.title,i=t.subtitle,o=K===e,a=J===e;return(0,p.Y)(iW,{provider:e,loading:eg,active:o,onClick:function(e){$(e),M(!1)},title:r,description:i,recommended:a,index:e===J&&0===n?1.5:e===J&&2===n?.5:n,disabled:y&&!a,isAgentDeployment:(null==_?void 0:_.isAgentDeployment)&&a},e)})}),(0,p.FD)(j.S,{css:iZ.ctaGroup,children:[(0,p.Y)(ib,{loading:eg,provider:K,isDeployable:ef,isDeployableCode:eh,isDeployableExplanation:em,isIncludedInSubscription:ep,onProviderContinue:function(){K&&(X||(Z(K),eY.goto(iC.Gp.ApproveDeployment),eA.goto(iC.ij.ApproveDeployment)))},refetchDeployabilityQueryData:eS,setShowPaymentMethodForm:function(){return M(!0)},showPaymentMethodForm:O,setShowSupportForm:function(){return z(!0)},org:eb,replId:l,hasAgentSession:C}),O?(0,p.Y)(n4.ui,{elevated:!0,css:iZ.payment,p:16,children:(0,p.Y)(iE.y,{onSuccess:(0,w._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:return M(!1),[4,eS()];case 1:return e.sent(),[2]}})}),context:"workspace_hosting_pane"})}):null]})]}),(0,p.Y)(j.S,{css:iZ.providerDetails,children:!X&&K?(0,p.Y)(iV,{header:ex[K].header,info:ex[K].info}):null})]})]})},iK=t(58271),i$=t(35992);function iJ(){var e=(0,R._)(["\n  fragment ReplLogLine2 on ReplLog {\n    __typename\n    timestamp\n    line\n    level\n    isFromReplit\n    deploymentId\n    executionId\n    buildId\n  }\n"]);return iJ=function(){return e},e}function iQ(){var e=(0,R._)(["\n  query HostingDeploymentLogs2(\n    $replId: String!\n    $deploymentId: String!\n    $executionId: String\n    $start: DateTime\n    $end: DateTime\n    $message: String\n    $level: LogLevel\n    $limit: Int\n  ) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        __typename\n        hostingDeploymentLogs(\n          deploymentId: $deploymentId\n          executionId: $executionId\n          start: $start\n          end: $end\n          message: $message\n          level: $level\n          limit: $limit\n        ) {\n          ... on ReplLogs {\n            result {\n              ...ReplLogLine2\n            }\n          }\n          ... on NotFoundError {\n            message\n          }\n          ... on ServiceUnavailable {\n            message\n          }\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return iQ=function(){return e},e}function iX(){var e=(0,R._)(["\n  subscription HostingDeploymentLogUpdates(\n    $input: HostingDeploymentLogUpdatesInput!\n  ) {\n    hostingDeploymentLogUpdates(input: $input) {\n      ...ReplLogLine2\n    }\n  }\n  ","\n"]);return iX=function(){return e},e}var i0={},i1=(0,I.J1)(iJ()),i2=(0,I.J1)(iQ(),i1),i4=(0,I.J1)(iX(),i1),i5=t(12930),i3=t(19882),i6=(0,f.createContext)(null),i8=function(){var e=(0,f.useContext)(i6);if(!e)throw Error("Expected log context in context");return e},i7=function(e){var n,t,r,i,o=e.deploymentId,a=e.replId,l=e.executionId,d=e.openFile,p=(0,u._)((0,f.useState)(null),2),h=p[0],m=p[1],g=(0,u._)((0,f.useState)([]),2),v=g[0],S=g[1],Y=(0,u._)((0,f.useState)(),2),A=Y[0],x=Y[1],C=(0,u._)((0,f.useState)({message:"",executionId:l,start:null,end:null,level:null}),2),_=C[0],k=C[1],D=(0,f.useCallback)(function(){return k({message:"",executionId:l,start:null,end:null,level:null})},[l]),E=(0,u._)((0,f.useState)(!0),2),R=E[0],I=E[1],T=(0,u._)((0,f.useState)(!1),2),P=T[0],L=T[1],U=(0,u._)((0,f.useState)(!1),2),N=U[0],O=U[1],M=(0,u._)((0,f.useState)(!1),2),B=M[0],H=M[1],z=(0,u._)((0,i5.A)("deployments-logs-color",!0),2),W=z[0],G=z[1],V=(0,f.useRef)(!1),j=(0,i3.A)(function(e){var n=e.width;if(void 0!==n){var t=n>500;O(t),V.current||(V.current=!0,L(t))}}),Z=(0,iK.Xj)(),q=(n={ssr:!1,fetchPolicy:"network-only",variables:{deploymentId:o,replId:a,executionId:_.executionId?"d-scheduled-".concat(o,"-").concat(_.executionId):void 0,limit:100,level:_.level,message:_.message,start:null==(r=_.start)?void 0:r.toDate(Z).toISOString(),end:null==(i=_.end)?void 0:i.toDate(Z).toISOString()},onError:function(){x("Something went wrong"),S([])},onCompleted:function(e){if("hostingDeploymentLogs"in e.getRepl)if("ReplLogs"===e.getRepl.hostingDeploymentLogs.__typename){x(void 0);var n=e.getRepl.hostingDeploymentLogs.result,t=(0,y._)(n).reverse();if(!h)if(n.length>0){var r=new Date(n[0].timestamp);r.setSeconds(r.getSeconds()+1),m(r.toISOString())}else m(new Date().toISOString());S(t)}else x(e.getRepl.hostingDeploymentLogs.message),S([])}},t=(0,s._)({},i0,n),F.I(i2,t)),K=q.loading,$=q.fetchMore,J=q.subscribeToMore,Q=q.variables;(0,f.useEffect)(function(){K&&m(null)},[K]),(0,f.useEffect)(function(){m(null)},[_,o,a,l]),(0,f.useEffect)(function(){var e,n;if(h)return J({document:i4,variables:{input:{deploymentId:o,executionId:l,message:_.message,start:_.end?null==(e=_.start)?void 0:e.toDate(Z).toISOString():h,end:null==(n=_.end)?void 0:n.toDate(Z).toISOString(),level:_.level||void 0}},updateQuery:function(e,n){var t=n.subscriptionData;return(0,i$.jM)(e,function(e){if(!("hostingDeploymentLogs"in e.getRepl))return e;if("ReplLogs"===e.getRepl.hostingDeploymentLogs.__typename){var n=t.data.hostingDeploymentLogUpdates;e.getRepl.hostingDeploymentLogs.result.unshift(n)}return e})}})},[J,o,l,K,_,h,Z]);var X=(0,f.useRef)(null),ee=(0,f.useRef)(!1),en=(0,f.useRef)(!1),et=(0,f.useCallback)((0,w._)(function(){var e,n,t,r;return(0,b.YH)(this,function(i){switch(i.label){case 0:if(e=X.current?Math.abs(X.current.getTime()-Date.now()):0,K||X.current&&e<500||en.current||ee.current)return[2];return(n=new Date(v[0].timestamp)).setSeconds(n.getSeconds()-1),ee.current=!0,[4,$({variables:(0,c._)((0,s._)({},Q),{end:n.toISOString()})})];case 1:return t=i.sent().data,ee.current=!1,"hostingDeploymentLogs"in t.getRepl&&"ReplLogs"===t.getRepl.hostingDeploymentLogs.__typename&&(X.current=new Date,0===t.getRepl.hostingDeploymentLogs.result.length?en.current=!0:(r=(0,y._)(t.getRepl.hostingDeploymentLogs.result).reverse(),S(function(e){return(0,y._)(r).concat((0,y._)(e))}))),[2]}})}),[$,K,v,Q]);return(0,f.useMemo)(function(){return{logs:v,loading:K,error:A,fetchPage:et,isLive:R,setIsLive:I,isExpanded:P,setIsExpanded:L,filter:_,setFilter:k,clearFilter:D,deploymentId:o,containerRef:j,isWide:N,isWrapped:B,setIsWrapped:H,openFile:d,isColorful:W,setIsColorful:G}},[D,j,o,A,et,_,W,P,R,N,B,K,v,d,G])},i9=t(4880),oe=t(93707),on=t(90629),ot=t(44959),or=t(46231),oi=t.n(or),oo=t(94376),oa=t(33220),ol=(0,eN.x)({root:[B.wp.transition.none,B.wp.reset.button,B.wp.flex.row,B.wp.align.center,B.wp.font.code,B.wp.fontSize(12),B.wp.textAlign.left,B.wp.position.absolute,B.wp.top(0),B.wp.left(0),B.wp.width("100%"),B.wp.color.foregroundDefault,B.wp.border({color:e_.LU.outlineDimmest,direction:"bottom"}),B.wp.highRes({borderWidth:.5}),{outline:"none",userSelect:"auto","--cell-background":"".concat(e_.LU.backgroundDefault),"&:hover":{backgroundColor:e_.LU.interactiveBackground,"--cell-background":"".concat(e_.LU.interactiveBackground),".copy":{display:"block"}},'&[data-error="true"]':[B.wp.colorMixBg(e_.LU.accentNegativeDimmest,"transparent"),{borderBottomColor:e_.LU.accentNegativeDimmest,boxShadow:"0 -1px 0 0 "+e_.LU.accentNegativeDimmest,"&:hover":{"--cell-background":"".concat(e_.LU.accentNegativeDimmest),backgroundColor:"var(--cell-background) !important"},"&:active":{boxShadow:"0 -1px 0 0 "+e_.LU.accentPrimaryDefault}},B.wp.highRes({boxShadow:"0 -0.5px 0 0 "+e_.LU.accentNegativeDimmest,"&:active":{boxShadow:"0 -0.5px 0 0 "+e_.LU.accentPrimaryDefault}})]}],primaryCell:[B.wp.display.block,B.wp.pl(6),B.wp.py(6),B.wp.pr(4),B.wp.flex.growAndShrink(1),B.wp.minHeight(26),{whiteSpace:"nowrap",'&[data-wrapped="true"]':{whiteSpace:"normal"},'&[data-new-flag="false"]':{cursor:"pointer",overflow:"hidden",textOverflow:"ellipsis",'&[data-wrapped="true"]':{whiteSpace:"normal"}},a:{color:"inherit","&:hover":{textDecoration:"underline"}}}],secondaryCell:[B.wp.p(6),B.wp.color.foregroundDimmest,B.wp.truncate,{'&[data-error="true"]':B.wp.color.accentNegativeStrongest}],copyColumn:[{display:"none",position:"absolute",top:"50%",zIndex:1,left:"calc(var(--width) + var(--scroll-left-offset))",transform:"translate(-100%, -50%)"}],copyButton:[{backgroundColor:"var(--cell-background) !important",color:"inherit"}]}),os=(0,f.memo)(function(e){var n=e.log,t=e.y,r=e.height,i=e.resizeRef,o=e.index,a=e.isScrolling,l=e.columns,s=i8(),c=s.isWrapped,u=s.isColorful&&n.level===S.$b.Error&&["INFO","DEBUG","TRACE"].every(function(e){return!n.line.includes(e)}),d=(0,f.useMemo)(function(){return(0,oo.A)(n.line)},[n.line]);return(0,p.FD)("div",{tabIndex:0,role:"button",title:d,css:ol.root,style:{height:r,transform:"translateY(".concat(t,"px)")},"data-error":u,children:[l.map(function(e,t){var r=t===l.length-1,a=e.renderCell(n);return(0,p.Y)(j.S,{css:r?ol.primaryCell:ol.secondaryCell,style:{width:e.width},innerRef:r?i:void 0,"data-index":o,"data-error":u,"data-wrapped":c,children:a},e.key)}),(0,p.Y)("span",{css:ol.copyColumn,className:"copy",children:!a&&(0,p.Y)(oa.r,{textToCopy:d,tooltipDisable:!0,css:ol.copyButton})})]})}),oc=t(61358),ou=t(75549),od=new oc.tQ,op=function(e){var n,t,r,i=e.log,o=e.files,a=i8().openFile,l=i.line;l=i.level===S.$b.Error?(0,oo.A)(i.line):od.toHtml(i.line);var s=(0,u._)((0,f.useState)([]),2),c=s[0],d=s[1];(0,f.useEffect)(function(){(0,ou.C)(l,function(){return Promise.resolve(o)}).then(function(e){return d(e)})},[o,l]);var h=(0,f.useCallback)(function(e){e.preventDefault();var n=e.target;n.dataset.file&&a({path:n.dataset.file})},[a]);return(0,p.Y)("div",{dangerouslySetInnerHTML:{__html:(n=l,c.sort(function(e,n){return e.from-n.from}),t="",r=0,c.forEach(function(e){t+=n.slice(r,e.from);var i=n.slice(e.from,e.to);t+='<a href="#" data-file="'.concat(e.file,'">').concat(i,"</a>"),r=e.to}),t+=n.slice(r))},onKeyDown:h,onClick:h})},of=t(98450),oh=t(19732),om=function(e){var n=e.scrollRef,t=e.scrollBottomRef,r=(0,f.useRef)(!1);return(0,of.S)(function(){n.current&&setTimeout(function(){t.current&&((0,oh.A)(t.current),r.current=!0)},0)}),{didInitialScroll:r}},og=function(e){var n,t=e.didInitialScroll,r=e.itemHeight,i=e.scrollRef,o=i8(),a=o.fetchPage,l=o.setIsLive,s=(0,u._)((0,f.useState)(!1),2),c=s[0],d=s[1],p=(0,u._)((0,f.useState)(0),2),h=p[0],m=p[1],g=(0,u._)((0,f.useState)(0),2),v=g[0],y=g[1],S=(0,f.useRef)(),Y=(0,f.useRef)(!1);(0,f.useEffect)(function(){i.current&&m(i.current.offsetWidth-i.current.clientWidth)},[i]);var A=(0,f.useCallback)(function(e){(S.current||c)&&clearTimeout(S.current),d(!0),S.current=setTimeout(function(){d(!1),y(e.scrollLeft)},100)},[c]);return{scrollHandler:(0,f.useCallback)((n=(0,w._)(function(e){var n,i,o,s,c,u,d;return(0,b.YH)(this,function(p){switch(p.label){case 0:if(!(n=e.currentTarget)||Y.current)return[2];if(A(n),i=n.scrollHeight,o=n.scrollTop,l(c=i-(s=n.clientHeight)===o),u=20*r,!(!c&&o<u&&i>s&&t.current))return[3,5];Y.current=!0,p.label=1;case 1:return p.trys.push([1,3,,4]),[4,a()];case 2:return p.sent(),[3,4];case 3:return d=p.sent(),on.Cp(d),[3,4];case 4:Y.current=!1,p.label=5;case 5:return[2]}})}),function(e){return n.apply(this,arguments)}),[A,l,r,t,a]),isScrolling:c,scrollLeftOffset:v-h}},ov=function(e){var n=e.scrollRef,t=e.scrollBottomRef,r=i8(),i=r.loading,o=r.logs,a=r.isLive,l=r.isWrapped,s=(0,f.useRef)(0),c=(0,f.useRef)(o[0]),u=(0,f.useCallback)(function(){t.current&&(0,oh.A)(t.current)},[t]);(0,f.useEffect)(function(){var e=n.current;if(e&&!i&&0!==o.length){if(a)e.scrollHeight>e.clientHeight&&u();else if(c.current&&c.current.timestamp>o[0].timestamp){var t=e.scrollHeight;if(t!==s.current){var r=t-s.current,l=e.scrollTop;e.scrollTo({top:l+r,behavior:"instant"})}}c.current=o[0],s.current=e.scrollHeight}},[a,i,o,n,u]);var d=(0,f.useRef)(l);(0,f.useEffect)(function(){a&&d.current!==l&&(u(),d.current=l)},[a,l,u])},ow=(0,eN.x)({root:[{overflow:"auto"},B.wp.flex.growAndShrink(1)],virtualTable:[B.wp.width("100%"),B.wp.position.relative],tableHeader:[B.wp.display.flex,B.wp.flex.row,B.wp.backgroundColor.backgroundDefault,B.wp.position.sticky,B.wp.zIndex(1),B.wp.top(0),B.wp.border({color:e_.LU.outlineDimmest,direction:"bottom"})],columnHeader:[B.wp.color.foregroundDimmer,B.wp.fontSize(12),{lineHeight:"18px"},B.wp.px(6),B.wp.justify.center],infoTooltip:[B.wp.display.flex,B.wp.align.center,B.wp.gap(4),{lineHeight:0}],bottomAnchor:[B.wp.position.absolute,B.wp.bottom(0),B.wp.left(0),B.wp.right(0)]}),oy=function(){var e=i8().isColorful,n=(0,nB.V)();return(0,f.useMemo)(function(){var t={};if(n){var r=!0,i=!1,o=void 0;try{for(var a,l=Object.entries(n)[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var s=(0,u._)(a.value,2),c=s[0],d=s[1];t["--ansi-".concat(oi()(c))]=e?d:"currentColor"}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}}return t},[e,n])};function ob(){var e=i8(),n=e.loading,t=e.error,r=e.logs,i=e.isExpanded,o=e.isWrapped,a=e.isWide,l=!!(n||t),c=(0,f.useRef)(null),d=(0,f.useRef)(null),h=(0,r2.m6)(),m=oy(),v=h?44:26,w=(0,i9.Te)({count:(null==r?void 0:r.length)||0,getScrollElement:function(){return c.current},estimateSize:function(){return v},overscan:10,measureElement:function(e){return e.getBoundingClientRect().height},rangeExtractor:function(e){var n=new Set([0].concat((0,y._)((0,oe.vp)(e))));return(0,y._)(n)}});ov({scrollRef:c,scrollBottomRef:d});var b=og({didInitialScroll:om({scrollRef:c,scrollBottomRef:d}).didInitialScroll,itemHeight:v,scrollRef:c}),Y=b.scrollHandler,A=b.isScrolling,x=b.scrollLeftOffset,C=(0,g.cF)(),_=(null==C?void 0:C.provider)===S.Q0.Cron,k=(0,f.useMemo)(function(){var e;return 8*(e=Math).max.apply(e,(0,y._)((null==r?void 0:r.map(function(e){return e.line.length}))||[]))},[r]),D=(0,g.om)().listFiles,E=(0,u._)((0,f.useState)([]),2),R=E[0],I=E[1];(0,f.useEffect)(function(){D().then(function(e){e.files&&I(e.files)})},[D]);var F=(0,r2.m6)(),T=(0,f.useMemo)(function(){return[{key:"time",title:(0,p.FD)("span",{css:ow.infoTooltip,children:["Time",!F&&(0,p.Y)(tg.m_,{tooltip:"Logs persist for up to 30 days",css:ow.infoTooltip,children:(0,p.Y)(rk.A,{size:12})})]}),width:a?173:115,renderCell:function(e){var n=(0,ot.A)(e.timestamp);return(0,er.A)(n,a?"yyyy-MM-dd HH:mm:ss.SS":"MM-dd HH:mm:ss")}},i&&{key:"build",title:"Deployment",width:75,renderCell:function(e){var n=e.buildId.split("-");return n?n[0]:e.buildId}},_&&{key:"run",title:"Run",width:50,renderCell:function(e){var n,t=null==(n=e.executionId)?void 0:n.split("-");return t?t[t.length-1]:""}},i&&{key:"source",title:"Source",width:57,renderCell:function(e){return e.isFromReplit?"System":"User"}},{width:o?void 0:k,key:"log",title:"Log",renderCell:function(e){return(0,p.Y)(op,{files:R,log:e})}}].filter(Boolean)},[R,_,i,F,a,o,k]),P=(0,f.useMemo)(function(){return T.reduce(function(e,n){return e+(n.width||0)},0)},[T]);return(0,p.Y)(j.S,{innerRef:c,css:ow.root,onScroll:Y,children:(0,p.FD)(j.S,{style:(0,s._)({height:w.getTotalSize(),minWidth:P,"--scroll-left-offset":"".concat(x,"px")},m),css:ow.virtualTable,children:[(0,p.Y)(j.S,{css:ow.tableHeader,children:T.map(function(e){return(0,p.Y)(j.S,{tag:"div",css:ow.columnHeader,style:{width:e.width,flex:e.width?void 0:1,height:v},children:e.title},e.key)})}),w.getVirtualItems().map(function(e){var n=r[e.index];return n?(0,p.Y)(os,{log:n,height:e.size,y:e.start,resizeRef:w.measureElement,index:e.index,disabled:l,isScrolling:A,columns:T},e.key.toString()):null}),(0,p.Y)("div",{ref:d,css:ow.bottomAnchor})]})})}var oS=(0,eN.x)({root:[B.wp.flex.grow(1)],noLogsText:[B.wp.textAlign.center],viewError:[B.wp.pt(0)]});function oY(){var e=i8(),n=e.logs,t=e.error;return e.loading?(0,p.Y)(A.A,{css:oS.root,centered:!0,children:(0,p.Y)(e8.cN,{})}):0===n.length?(0,p.FD)(p.FK,{children:[t?(0,p.Y)(e8.Wx,{css:oS.viewError,text:t}):null,(0,p.Y)(A.A,{css:oS.root,children:(0,p.FD)(j.S,{pt:4,gap:8,children:[(0,p.Y)(V.EY,{css:oS.noLogsText,children:"No logs are available."}),(0,p.FD)(V.EY,{color:"dimmer",css:oS.noLogsText,children:["Having trouble?"," ",(0,p.Y)("a",{href:"https://docs.replit.com/cloud-services/deployments/troubleshooting",onClick:function(){return(0,eL.Ae)({context:"troubleshooting_doc"})},target:"_blank",children:"Troubleshooting tips"})]})]})})]}):(0,p.Y)(ob,{})}var oA=t(78535),ox=t(46726),oC=(0,eN.x)({buttonGroup:[B.wp.flex.row,B.wp.rowWithGap(1),{button:{"&:not(:first-child)":{borderTopLeftRadius:0,borderBottomLeftRadius:0},"&:not(:last-child)":{borderTopRightRadius:0,borderBottomRightRadius:0}}}]});function o_(e){var n=e.onClear,t=e.label,r=e.buttonProps,i=e.children,o=n?"primary":void 0,a=(0,u._)((0,f.useState)(!1),2),l=a[0],c=a[1];return(0,p.FD)(ox.Y,{css:oC.buttonGroup,children:[(0,p.FD)(rH.Wv,{label:t,isOpen:l,onOpenChange:c,noArrow:!0,background:"higher",children:[(0,p.Y)(eQ.$n,(0,s._)({colorway:o},r)),i]}),n?(0,p.Y)(eQ.$n,{colorway:o,text:"",iconLeft:(0,p.Y)(e1.A,{}),onClick:n}):null]})}var ok=t(33747),oD=(0,eN.x)({section:[B.wp.gap(8)],dateRangeInputs:[B.wp.display.grid,B.wp.gap(8),B.wp.align.center,{gridTemplateColumns:"min-content 200px",gridAutoFlow:"row",gridAutoRows:"1fr"}]}),oE=function(){var e=i8(),n=e.filter,t=e.setFilter;return(0,p.FD)(j.S,{css:oD.dateRangeInputs,children:[(0,p.Y)(ok.J,{variant:"text",children:"After"}),(0,p.Y)(oA.A,{granularity:"minute",hourCycle:24,value:n.start,onChange:function(e){return t(function(n){return(0,c._)((0,s._)({},n),{start:e})})}}),(0,p.Y)(ok.J,{variant:"text",children:"Before"}),(0,p.Y)(oA.A,{granularity:"minute",hourCycle:24,value:n.end,onChange:function(e){return t(function(n){return(0,c._)((0,s._)({},n),{end:e})})}})]})},oR=function(){var e=i8(),n=e.filter,t=e.setFilter,r=(0,iK.Xj)(),i=n.start||n.end,o="Date",a=n.start&&(0,er.A)(n.start.toDate(r),"M/d/yy"),l=n.end&&(0,er.A)(n.end.toDate(r),"M/d/yy");return a&&l?o="".concat(a," to ").concat(l):a?o="After ".concat(a):l&&(o="Before ".concat(l)),(0,p.Y)(o_,{label:"Date range",onClear:i?function(){return t(function(e){return(0,c._)((0,s._)({},e),{start:null,end:null})})}:void 0,buttonProps:{text:o,iconRight:i?void 0:(0,p.Y)(n5.A,{})},children:(0,p.Y)(j.S,{css:oD.section,p:8,children:(0,p.Y)(oE,{})})})},oI=t(77089),oF=t(81642),oT=function(){var e=i8(),n=e.filter,t=e.setFilter,r=(0,u._)((0,f.useState)(n.executionId),2),i=r[0],o=r[1];return(0,f.useEffect)(function(){o(n.executionId)},[n.executionId]),(0,p.Y)(oI.pd,{placeholder:"*****",value:i||"",onChange:function(e){var n=e.target.value;o(n),n&&5!==n.length||t(function(e){return(0,c._)((0,s._)({},e),{executionId:n})})},onBlur:function(){return t(function(e){return(0,c._)((0,s._)({},e),{executionId:i})})},onKeyDown:function(e){"Enter"===e.key&&t(function(e){return(0,c._)((0,s._)({},e),{executionId:i})})}})},oP=function(){var e=i8(),n=e.filter,t=e.setFilter;return(0,p.Y)(o_,{onClear:n.executionId?function(){return t(function(e){return(0,c._)((0,s._)({},e),{executionId:null})})}:void 0,label:"Run ID",buttonProps:{text:n.executionId?"Run: ".concat(n.executionId):"Run ID",iconRight:n.executionId?void 0:(0,p.Y)(n5.A,{})},children:(0,p.Y)(j.S,{p:8,children:(0,p.Y)(oF.A_,{children:(0,p.Y)(oT,{})})})})},oL=t(96556),oU=t(70548),oN=t(81526);function oO(e){return(0,p.Y)(rG.Ay,(0,c._)((0,s._)({},e),{children:(0,p.Y)("path",{fillRule:"evenodd",d:"M1.25 6A.75.75 0 0 1 2 5.25h20a.75.75 0 0 1 0 1.5H2A.75.75 0 0 1 1.25 6Zm3 6a.75.75 0 0 1 .75-.75h14a.75.75 0 0 1 0 1.5H5a.75.75 0 0 1-.75-.75Zm3 6a.75.75 0 0 1 .75-.75h8a.75.75 0 0 1 0 1.5H8a.75.75 0 0 1-.75-.75Z",clipRule:"evenodd"})}))}var oM=function(){var e=(0,g.cF)();return(null==e?void 0:e.provider)===S.Q0.Cron},oB=(0,eN.x)({root:[{"> *:first-child":B.wp.flex.grow(1)}],divider:B.wp.backgroundColor.outlineDimmer,section:[B.wp.p(8),B.wp.gap(8)],clearFilterButton:[B.wp.borderRadius(0),B.wp.width("fit-content")]}),oH=function(){var e=i8(),n=e.filter,t=e.setFilter,r=function(){t(function(e){return(0,c._)((0,s._)({},e),{level:e.level===S.$b.Error?null:S.$b.Error})})};return(0,p.Y)(eQ.$n,{colorway:n.level===S.$b.Error?"primary":void 0,text:"Errors only",iconLeft:(0,p.Y)(oU.S,{onChange:r,checked:n.level===S.$b.Error}),onClick:r})},oz=function(){var e=oM();return(0,p.FD)(p.FK,{children:[(0,p.Y)(oH,{}),(0,p.Y)(oR,{}),e&&(0,p.Y)(oP,{})]})},oW=function(){var e=i8(),n=e.filter,t=e.setFilter,r=e.clearFilter,i=oM(),o=!!(n.message||n.level||n.start||n.end||n.executionId),a=(0,oL.c)();return(0,p.Y)(o_,{label:"Filter",buttonProps:{text:"",iconLeft:(0,p.Y)(oO,{})},onClear:o?r:void 0,children:(0,p.FD)(j.S,{children:[(0,p.FD)(j.S,{p:8,row:!0,gap:8,children:[(0,p.Y)(oU.S,{name:"Filter by errors only",id:a("errors-only"),checked:n.level===S.$b.Error,onChange:function(e){return t(function(n){return(0,c._)((0,s._)({},n),{level:e?S.$b.Error:null})})}}),(0,p.Y)("label",{htmlFor:a("errors-only"),children:"Errors only"})]}),i?(0,p.FD)(p.FK,{children:[(0,p.Y)(tm.a,{css:oB.divider}),(0,p.Y)(j.S,{css:oB.section,children:(0,p.FD)(oF.A_,{children:[(0,p.Y)(ok.J,{color:"dimmer",children:"Run ID"}),(0,p.Y)(oT,{})]})})]}):null,(0,p.Y)(tm.a,{css:oB.divider}),(0,p.FD)(j.S,{css:oB.section,children:[(0,p.Y)(ok.J,{color:"dimmer",children:"Date range"}),(0,p.Y)(oE,{})]}),(0,p.Y)(tm.a,{css:oB.divider}),(0,p.Y)(eQ.$n,{variant:"nofill",onClick:function(){return r()},text:"Clear all filters",alignment:"start",css:oB.clearFilterButton})]})})};function oG(){var e=i8(),n=e.filter,t=e.setFilter,r=e.isWide,i=(0,u._)((0,f.useState)(n.message),2),o=i[0],a=i[1];return(0,f.useEffect)(function(){a(n.message)},[n.message]),(0,p.FD)(j.S,{css:oB.root,p:8,row:!0,gap:8,children:[(0,p.Y)(oN.I,{placeholder:"Search",value:o,onChange:function(e){a(e.target.value),""===e.target.value&&t(function(e){return(0,c._)((0,s._)({},e),{message:""})})},onBlur:function(){return t(function(e){return(0,c._)((0,s._)({},e),{message:o})})},onClear:function(){t(function(e){return(0,c._)((0,s._)({},e),{message:""})})},onKeyDown:function(e){"Enter"===e.key&&t(function(e){return(0,c._)((0,s._)({},e),{message:o})})}}),r?(0,p.Y)(oz,{}):(0,p.Y)(oW,{})]})}function oV(e){return(0,p.Y)(rG.Ay,(0,c._)((0,s._)({},e),{viewBox:"0 0 16 16",fill:"none",children:(0,p.Y)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 11.5H10A3.5 3.5 0 0013.5 8v0A3.5 3.5 0 0010 4.5H2.5m2 7L7 9m-2.5 2.5L7 14"})}))}var oj=t(12053),oZ=t(90899),oq=(0,eN.x)({root:[B.wp.border({color:e_.LU.outlineDimmest,direction:"top"}),B.wp.height(29)],group:[B.wp.display.flex,B.wp.rowWithGap(8)],button:[B.wp.color.foregroundDefault,B.wp.borderRadius(0),B.wp.height("100%")],liveIndicatorWrapper:[B.wp.width(16),B.wp.height(16),B.wp.display.flex,B.wp.align.center,B.wp.justify.center],liveIndicator:[B.wp.width(6),B.wp.height(6),B.wp.borderRadius("full"),B.wp.backgroundColor.accentPositiveStronger],checkboxWrapper:[B.wp.display.flex,B.wp.align.center,B.wp.rowWithGap(4),B.wp.cursor.pointer],checkbox:[{input:[B.wp.width(16),B.wp.height(16)]}]});function oK(){var e=i8(),n=e.isLive,t=e.setIsLive,r=e.isExpanded,i=e.setIsExpanded,o=e.isWrapped,a=e.setIsWrapped,l=e.isColorful,s=e.setIsColorful,c=(0,oL.c)();return(0,p.FD)(j.S,{css:oq.root,row:!0,gap:8,justify:"space-between",children:[(0,p.FD)(j.S,{css:oq.group,children:[(0,p.Y)(eQ.$n,{iconLeft:r?(0,p.Y)(eD.A,{rotate:90}):(0,p.Y)(eE.A,{rotate:90}),onClick:function(){return i(function(e){return!e})},variant:"nofill",text:r?"Collapse":"Expand",css:oq.button}),(0,p.FD)("label",{css:oq.checkboxWrapper,htmlFor:c("wrap"),children:[(0,p.Y)(oU.S,{id:c("wrap"),checked:o,onChange:function(){return a(function(e){return!e})},css:oq.checkbox}),(0,p.Y)(oV,{}),(0,p.Y)("span",{children:"Wrap"})]}),(0,p.FD)("label",{css:oq.checkboxWrapper,htmlFor:c("colorful"),children:[(0,p.Y)(oU.S,{id:c("colorful"),checked:l,onChange:function(){return s(function(e){return!e})},css:oq.checkbox}),(0,p.Y)(oZ.A,{}),(0,p.Y)("span",{children:"Colors"})]})]}),(0,p.Y)(j.S,{css:oq.group,children:(0,p.Y)(eQ.$n,{iconLeft:n?(0,p.Y)(j.S,{css:oq.liveIndicatorWrapper,children:(0,p.Y)(j.S,{css:oq.liveIndicator})}):(0,p.Y)(oj.A,{}),onClick:function(){return t(function(e){return!e})},variant:"nofill",text:"Live",css:oq.button})})]})}var o$=(0,eN.x)({root:[B.wp.flex.growAndShrink(1),B.wp.overflow("hidden")],header:[{borderBottom:"1px solid ".concat(e_.LU.outlineDimmest)}]}),oJ=function(e){var n=e.deploymentId,t=e.replId,r=e.executionId,i=e.onBack,o=e.openFile;return n?(0,p.Y)(oQ,{deploymentId:n,replId:t,executionId:r,onBack:i,openFile:o}):(0,p.Y)(A.A,{children:(0,p.Y)(G.N,{colorway:"warning",icon:(0,p.Y)(nt.A,{}),text:"Deployment not found"})})};function oQ(e){var n=e.deploymentId,t=e.replId,r=e.executionId,i=e.onBack,o=i7({deploymentId:n,replId:t,executionId:r,openFile:e.openFile});return(0,of.S)(function(){(0,eL.Ae)({context:Y.P.Logs})}),(0,p.Y)(i6.Provider,{value:o,children:(0,p.FD)(j.S,{css:o$.root,innerRef:o.containerRef,children:[i?(0,p.Y)(j.S,{css:o$.header,p:6,gap:8,children:(0,p.Y)(j.S,{row:!0,gap:8,align:"center",justify:"space-between",children:(0,p.Y)(ek.K0,{alt:"Back",onClick:i,children:(0,p.Y)(t1.A,{})})})}):null,(0,p.Y)(oG,{}),(0,p.Y)(oY,{}),(0,p.Y)(oK,{})]})})}var oX=[{label:"one hour",key:1},{label:"six hours",key:6},{label:"one day",key:24},{label:"three days",key:72},{label:"one week",key:168}],o0={label:"one hour",key:1},o1=B.kL.min(600),o2=(0,eN.x)({fullWidth:(0,x._)({},o1,{gridColumn:"span 2"})}),o4=(0,eN.x)({container:(0,x._)({display:"grid",gap:32},o1,{gridTemplateColumns:"repeat(2, minmax(0, 1fr))"}),fullWidth:o2.fullWidth}),o5=function(e){var n=e.replId,t=(0,u._)((0,f.useState)(o0),2),r=t[0],i=r.key,o=r.label,a=t[1],l=(0,C.A)(new Date,i),s=(0,M.D)().values,c=o6(l,o3(i));return(0,p.Y)(A.A,{children:(0,p.FD)(j.S,{css:o4.container,children:[(0,p.Y)(j.S,{css:o4.fullWidth,children:(0,p.Y)(eO.in,{items:oX,label:"Past ".concat(o),onAction:function(e){var n,t="string"==typeof e?parseInt(e,10):e;a(null!=(n=oX.find(function(e){return e.key===t}))?n:o0)},children:function(e){return(0,p.Y)(eO.Dr,{label:e.label,id:e.key},e.key)}})}),(0,p.Y)(j.S,{css:o4.fullWidth,children:(0,p.Y)(ew,{replId:n,title:"CPU Utilization",metric:k.YE.CPU,start:c,hours:i,colorFn:function(){return s.global.redDefault}})}),(0,p.Y)(j.S,{css:o4.fullWidth,children:(0,p.Y)(ew,{replId:n,title:"Memory Utilization",metric:k.YE.Memory,start:c,hours:i,colorFn:function(){return s.global.redDefault}})})]})})},o3=function(e){return e<=1?6e5:e<=6?18e5:e<=24?72e5:216e5},o6=function(e,n){var t=e.getTime()%n;return new Date(e.getTime()-t)},o8=t(56042);function o7(){var e=(0,R._)(["\n  query ScheduledJobListExecution($deploymentId: String!) {\n    scheduledJobListExecutions(input: { deploymentId: $deploymentId }) {\n      __typename\n      ... on ScheduledJobListExecutionsResults {\n        results {\n          id\n          startedAt\n          endedAt\n          status\n        }\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n"]);return o7=function(){return e},e}function o9(){var e=(0,R._)(["\n  mutation CancelScheduledJobExecution(\n    $deploymentId: String!\n    $executionId: String!\n  ) {\n    cancelScheduledJobExecution(\n      input: { deploymentId: $deploymentId, executionId: $executionId }\n    ) {\n      __typename\n      ... on CancelScheduledJobExecutionResult {\n        execution {\n          id\n          startedAt\n          endedAt\n          status\n        }\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n"]);return o9=function(){return e},e}var ae={},an=(0,I.J1)(o7()),at=(0,I.J1)(o9()),ar=t(37944),ai=t(1369),ao=(0,eN.x)({root:[B.wp.flex.growAndShrink(1),B.wp.overflow("hidden")],executionListHeader:[{borderBottom:"1px solid ".concat(e_.LU.outlineDimmest)}],executionList:[{overflow:"auto"},B.wp.flex.growAndShrink(1)],executionListRows:{width:"100%",position:"relative"},executionItem:[B.wp.rowWithGap(8),B.wp.align.center,B.wp.fontSize(12),B.wp.px(8),{position:"absolute",top:0,left:0,width:"100%",borderBottom:"1px solid ".concat(e_.LU.outlineDimmest),color:e_.LU.foregroundDimmer}],executionItemStatusDot:[B.wp.width("6px"),B.wp.height("6px"),B.wp.borderRadius("full"),B.wp.flex.shrink(0),B.wp.pr(4)],executionItemDistance:[B.wp.minWidth(100)],executionItemTimestamp:[B.wp.minWidth(90)],executionItemRunTime:[B.wp.minWidth(60)],executionItemStatus:[B.wp.minWidth(100),{textTransform:"capitalize"}],executionItemActions:[{marginLeft:"auto"}],noExecutionsText:[B.wp.textAlign.center],maxResultsMessage:[B.wp.fontSize(12),B.wp.color.foregroundDimmest]});function aa(e){var n=e.deploymentId,t=e.replId,r=e.openFile,i=(0,u._)((0,f.useState)(),2),o=i[0],a=i[1];return n?o?(0,p.Y)(oJ,{replId:t,deploymentId:n,executionId:o,onBack:function(){return a(void 0)},openFile:r}):(0,p.Y)(al,{deploymentId:n,onViewExecutionLogs:function(e){var n=e.split("-");a(n[n.length-1])}}):(0,p.Y)(A.A,{children:(0,p.Y)(G.N,{colorway:"warning",icon:(0,p.Y)(nt.A,{}),text:"Deployment not found"})})}function al(e){var n,t,r,i,o,a=e.deploymentId,l=e.onViewExecutionLogs,c=(0,u._)((0,f.useState)([]),2),d=c[0],h=c[1],m=(0,u._)((0,f.useState)(!1),2),g=m[0],v=m[1],w=(0,u._)((0,f.useState)(),2),b=w[0],S=w[1],A=(n={variables:{deploymentId:a},onError:function(e){S(e)},onCompleted:function(e){(null==e?void 0:e.scheduledJobListExecutions.__typename)==="ScheduledJobListExecutionsResults"&&h(e.scheduledJobListExecutions.results)}},t=(0,s._)({},ae,n),F.I(an,t)),x=A.loading,C=A.refetch,_=(0,u._)((r={onError:function(e){S(e)},onCompleted:function(e){var n=e.cancelScheduledJobExecution;"CancelScheduledJobExecutionResult"===n.__typename&&h(function(e){return e.map(function(e){return e.id===n.execution.id?n.execution:e})})}},i=(0,s._)({},ae,r),nm.n(at,i)),2),k=_[0],D=_[1].loading,E=!!(x||D||g||b);return(0,of.S)(function(){x||C(),(0,eL.Ae)({context:Y.P.Schedule})}),(0,p.FD)(j.S,{css:ao.root,children:[(0,p.FD)(j.S,{css:ao.executionListHeader,p:6,gap:8,children:[b?(0,p.Y)(G.N,{colorway:"warning",icon:(0,p.Y)(nt.A,{}),text:null!=(o=b.message)?o:"Something went wrong"}):null,(0,p.FD)(j.S,{row:!0,gap:8,align:"center",justify:"space-between",children:[(0,p.Y)(rO,{disabled:E,onSuccessfulExecution:function(e){h(function(n){return[e].concat((0,y._)(n)).slice(0,50)})}}),(0,p.Y)(ek.K0,{alt:"Refresh",disabled:E,onClick:function(){E||(v(!0),C().finally(function(){v(!1)}))},children:g?(0,p.Y)(nL.A,{}):(0,p.Y)(ai.A,{})})]})]}),(0,p.Y)(as,{executions:d,loading:x,disabled:E,onExecutionItemAction:function(e){switch(e.type){case"cancel":k({variables:{deploymentId:a,executionId:e.payload.id}});break;case"logs":l(e.payload.id)}}})]})}function as(e){var n=e.executions,t=e.loading,r=e.disabled,i=e.onExecutionItemAction,o=(0,f.useRef)(null),a=(0,r2.m6)()?44:28,l=(0,i9.Te)({count:n.length,getScrollElement:function(){return o.current},estimateSize:function(){return a},overscan:10});return t?(0,p.Y)(A.A,{centered:!0,children:(0,p.Y)(e8.cN,{})}):0===n.length?(0,p.Y)(A.A,{children:(0,p.FD)(j.S,{pt:4,gap:8,children:[(0,p.Y)(V.EY,{css:ao.noExecutionsText,children:"No runs yet..."}),(0,p.FD)(V.EY,{color:"dimmer",css:ao.noExecutionsText,children:["Having trouble?"," ",(0,p.Y)("a",{href:"https://docs.replit.com/cloud-services/deployments/troubleshooting",onClick:function(){return(0,eL.Ae)({context:"troubleshooting_doc"})},target:"_blank",children:"Troubleshooting tips"})]})]})}):(0,p.Y)(j.S,{innerRef:o,css:ao.executionList,children:(0,p.Y)(j.S,{style:{height:l.getTotalSize()},css:ao.executionListRows,children:l.getVirtualItems().map(function(e){var t=n[e.index];return(0,p.Y)(ap,{execution:t,height:e.size,y:e.start,index:e.index,onAction:i,disabled:r},e.key.toString())})})})}var ac=(o={},(0,x._)(o,S.vJ.Done,e_.LU.accentPositiveDefault),(0,x._)(o,S.vJ.Running,e_.LU.orangeStronger),(0,x._)(o,S.vJ.Failed,e_.LU.accentNegativeDefault),(0,x._)(o,S.vJ.Cancelled,e_.LU.greyDefault),(0,x._)(o,S.vJ.Unrecognized,e_.LU.greyDefault),o);function au(e){var n=e.status,t=n in ac?ac[n]:e_.LU.greyDefault;return(0,p.Y)(j.S,{tag:"span",css:ao.executionItemStatusDot,style:{backgroundColor:t,boxShadow:"0 0 8px ".concat(t)}})}var ad=function(e){return e.Cancel="cancel",e.Logs="logs",e}(ad||{});function ap(e){var n=e.execution,t=e.y,r=e.height,i=e.index,o=e.onAction,a=e.disabled,l=(null==n?void 0:n.endedAt)?(new Date(n.endedAt).valueOf()-new Date(n.startedAt).valueOf())/1e3:null;return(0,p.FD)(p.FK,{children:[(0,p.FD)(j.S,{title:n.id,css:ao.executionItem,style:{height:r,transform:"translateY(".concat(t,"px)")},children:[(0,p.Y)(au,{status:n.status}),(0,p.Y)(j.S,{css:ao.executionItemDistance,children:(0,o8.A)(new Date(n.startedAt),Date.now(),{addSuffix:!0})}),(0,p.FD)(j.S,{css:ao.executionItemTimestamp,children:[new Date(n.startedAt).toLocaleString("en-US",{month:"short",day:"2-digit"}),", ",new Date(n.startedAt).toLocaleString("en-US",{hour:"2-digit",minute:"2-digit",hourCycle:"h23"})]}),(0,p.Y)(j.S,{css:ao.executionItemRunTime,children:l?"".concat(l,"s"):"-"}),(0,p.Y)(j.S,{css:ao.executionItemStatus,children:n.status}),(0,p.FD)(j.S,{css:ao.executionItemActions,row:!0,gap:8,align:"center",children:[n.status===S.vJ.Running?(0,p.Y)(ek.K0,{alt:"Cancel",size:12,disabled:a,onClick:function(){return o({type:"cancel",payload:{id:n.id}})},children:(0,p.Y)(ar.A,{})}):null,(0,p.Y)(ek.K0,{alt:"Logs",size:18,disabled:a,onClick:function(){return o({type:"logs",payload:{id:n.id}})},children:(0,p.Y)(nQ.A,{})})]})]}),49===i?(0,p.Y)(j.S,{title:n.id,css:ao.executionItem,style:{height:r,transform:"translateY(".concat(t+r,"px)")},children:(0,p.Y)(V.EY,{css:ao.maxResultsMessage,children:"Only the most recent 50 runs are displayed currently"})}):null]})}var af=t(89956),ah=t(74192),am=t(77964);function ag(e){return(0,p.Y)(rG.Ay,(0,c._)((0,s._)({},e),{children:(0,p.Y)("path",{fillRule:"evenodd",d:"M4 2.25a.75.75 0 0 1 .75.75v7a.75.75 0 0 1-1.5 0V3A.75.75 0 0 1 4 2.25Zm8 0a.75.75 0 0 1 .75.75v4.25H15a.75.75 0 0 1 0 1.5H9a.75.75 0 0 1 0-1.5h2.25V3a.75.75 0 0 1 .75-.75Zm8 0a.75.75 0 0 1 .75.75v9a.75.75 0 0 1-1.5 0V3a.75.75 0 0 1 .75-.75Zm-8 9a.75.75 0 0 1 .75.75v9a.75.75 0 0 1-1.5 0v-9a.75.75 0 0 1 .75-.75ZM.25 14a.75.75 0 0 1 .75-.75h6a.75.75 0 0 1 0 1.5H4.75V21a.75.75 0 0 1-1.5 0v-6.25H1A.75.75 0 0 1 .25 14Zm16 2a.75.75 0 0 1 .75-.75h6a.75.75 0 0 1 0 1.5h-2.25V21a.75.75 0 0 1-1.5 0v-4.25H17a.75.75 0 0 1-.75-.75Z",clipRule:"evenodd"})}))}var av=t(29064),aw=(0,eN.x)({container:B.wp.colWithGap(24),pauseAndResumeButtons:B.wp.colWithGap(8),sectionContainer:B.wp.colWithGap(8),sectionButton:[B.wp.color.accentNegativeStrongest,B.wp.transition.snappy,(0,x._)({backgroundColor:e_.LU.interactiveBackground,borderColor:"transparent"},B.Tp.hover,{borderColor:"transparent"})]}),ay=function(e){var n=e.hideResume,t=e.hideSuspend,r=e.onLifecycleCommand,i=e.authorizations,o=(0,g.uS)(),a=(0,g.cF)(),l=(0,u._)((0,f.useState)(!1),2),s=l[0],c=l[1],d=i.editDeploymentStatus,h=d.isAuthorized,m=d.message,w=(null==a?void 0:a.status)===S.nH.Resuming,y=(null==a?void 0:a.status)===S.nH.Suspending,b=(null==a?void 0:a.status)===S.nH.Suspended,Y=w||y||o===v.d.ProcessingLifecycleCommand||o===v.d.Deploying,A=!(void 0!==n&&n)&&(b||w)&&(null==a?void 0:a.hasImageTag),x=!(void 0!==t&&t)&&!b&&!w&&(y||o===v.d.Deploying||o===v.d.Ready)&&(null==a?void 0:a.hasImageTag);return(0,p.Y)(p.FK,{children:(0,p.FD)(j.S,{css:aw.container,children:[A||x?(0,p.FD)(j.S,{css:aw.pauseAndResumeButtons,children:[A?(0,p.FD)(p.FK,{children:[(0,p.Y)(tg.m_,{tooltip:m,isDisabled:h,children:(0,p.Y)(eQ.$n,{text:w?"Resuming":"Resume",onClick:function(){return r({command:S.jP.Resume})},loading:w,disabled:Y||!h,iconLeft:w?(0,p.Y)(nL.A,{}):(0,p.Y)(am.A,{})})}),(0,p.Y)(V.EY,{color:"dimmer",children:"Your app will become accessible to users again"})]}):null,x?(0,p.FD)(p.FK,{children:[(0,p.Y)(tg.m_,{tooltip:m,isDisabled:h,children:(0,p.Y)(eQ.$n,{text:"Pause",onClick:function(){return r({command:S.jP.Suspend})},loading:y,disabled:Y||!h,iconLeft:y?(0,p.Y)(nL.A,{}):(0,p.Y)(ah.A,{})})}),(0,p.Y)(V.EY,{color:"dimmer",children:"Your deployment billing will continue, but all users will lose access to your app"})]}):null]}):null,(0,p.Y)(ab,{setIsDestroying:c,onLifecycleCommand:r,authorizations:i}),(0,p.Y)(aS,{isDestroying:s,setIsDestroying:c,onLifecycleCommand:r,authorizations:i})]})})};function ab(e){var n=e.setIsDestroying,t=e.onLifecycleCommand,r=e.authorizations,i=(0,u._)((0,f.useState)(!1),2),o=i[0],a=i[1],l=r.deleteDeployment,s=l.isAuthorized,c=l.message;return(0,p.FD)(p.FK,{children:[(0,p.FD)(j.S,{css:aw.sectionContainer,children:[(0,p.Y)(tg.m_,{tooltip:c,isDisabled:s,children:(0,p.Y)(eQ.$n,{text:"Change deployment type",onClick:function(){return a(!0)},disabled:!s,iconLeft:(0,p.Y)(ag,{})})}),(0,p.Y)(V.EY,{color:"dimmer",children:"To change your deployment type, you will need to shut down and create a new deployment"})]}),(0,p.Y)(eX.a,{isOpen:o,onRequestClose:function(){return a(!1)},children:(0,p.Y)(af.A,{confirmLabel:"Yes, delete my deployment",title:"Change Deployment Type",isDestructive:!0,onConfirm:function(){n(!0),a(!1),t({command:S.jP.Destroy})},onCancel:function(){return a(!1)},children:"To change your deployment type, you will need to shut down and create a new deployment. This will destroy your deployment and any associated deployment tiers, saved replit.app domain and deployment history. You can always come back and redeploy your App again."})})]})}function aS(e){var n=e.isDestroying,t=e.setIsDestroying,r=e.onLifecycleCommand,i=e.authorizations,o=(0,u._)((0,f.useState)(!1),2),a=o[0],l=o[1],s=i.deleteDeployment,c=s.isAuthorized,d=s.message;return(0,p.FD)(p.FK,{children:[(0,p.FD)(j.S,{css:aw.sectionContainer,children:[(0,p.Y)(tg.m_,{tooltip:d,isDisabled:c,children:(0,p.Y)(eQ.$n,{text:"Shut down",colorway:"negative",variant:"outlined",css:aw.sectionButton,onClick:function(){return l(!0)},disabled:n||!c,iconLeft:(0,p.Y)(av.A,{})})}),(0,p.Y)(V.EY,{color:"dimmer",children:"Your deployment billing will be canceled, and your deployed app will cease to exist"})]}),(0,p.Y)(eX.a,{isOpen:a,onRequestClose:function(){return l(!1)},children:(0,p.Y)(af.A,{confirmLabel:"Yes, delete my deployment",title:"Delete Deployment",isDestructive:!0,onConfirm:function(){t(!0),l(!1),r({command:S.jP.Destroy})},onCancel:function(){return l(!1)},children:"This will destroy your deployment and any associated deployment tiers, saved replit.app domain and deployment history. You can always come back and redeploy your repl again."})})]})}function aY(e){var n=e.shouldShowDownloadQR,t=(0,u._)((0,f.useState)(n),2),r=t[0],i=t[1];return(0,p.Y)(j.S,{children:(0,p.FD)(j.S,{gap:8,children:[(0,p.Y)(eQ.$n,{iconLeft:(0,p.Y)(e2.A,{}),text:"Install the Replit App",onClick:function(){return i(function(e){var n=!e;return n&&(0,eJ.u4)(eJ.AZ.DEPLOYMENT_MOBILE_DOWNLOAD_QR_VIEWED),n})}}),r?(0,p.Y)(e0.A,{source:"deployment_settings"}):null]})})}function aA(){var e=(0,R._)(["\n  query AutoscaleUsageSectionCurrentUser {\n    currentUser {\n      id\n      usageInterval {\n        ... on UsageInterval {\n          startDate\n          endDate\n          resources {\n            autoscaleComputeUnits {\n              usage\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return aA=function(){return e},e}var ax={},aC=(0,I.J1)(aA()),a_=t(46989),ak=t(56002),aD=(0,eN.x)({root:[B.wp.borderRadius(8),{outline:"1px solid transparent"}],outerRow:[B.wp.rowWithGap(12),B.wp.align.center],typeCol:[B.wp.flex.growAndShrink(1)]}),aE=function(e){var n,t=e.machineConfiguration,r=(n=(0,s._)({},ax,void 0),F.I(aC,n)).data,i=(0,f.useMemo)(function(){return function(e){var n,t,r=e.data;if((null==r||null==(n=r.currentUser)?void 0:n.__typename)==="CurrentUser"){var i=null==r||null==(t=r.currentUser)?void 0:t.usageInterval;if(i&&"UsageInterval"===i.__typename){var o=i.resources.autoscaleComputeUnits.usage,a=(0,a_.h7)(o,{resourceUsageType:"ComputeUnits"}),l=new Date(i.endDate).toLocaleString("default",{month:"short",day:"numeric"});return{description:"".concat(a," used this billing period"),renewalInfo:"Renews ".concat(l," ")}}}}({data:r})},[r]),o=(0,f.useMemo)(function(){if(null!=t)return"Autoscale (".concat(t.label,")")},[t]);if(!o||!i)return(0,p.Y)(j.S,{justify:"center",row:!0,children:(0,p.Y)(nL.A,{})});var a=e.authorizations.editDeploymentTier,l=a.isAuthorized,c=a.message;return(0,p.FD)(n4.ui,{elevated:!0,css:aD.root,p:8,pt:12,gap:4,children:[(0,p.FD)(j.S,{css:aD.outerRow,children:[(0,p.Y)(j.S,{css:aD.typeCol,gap:4,children:o?(0,p.Y)(V.EY,{multiline:!1,children:o}):null}),(0,p.Y)(ek.K0,{alt:l?"Edit":c,disabled:!l,onClick:e.onEditAutoscaleMachineConfiguration,children:(0,p.Y)(ak.A,{})})]}),i?(0,p.FD)(p.FK,{children:[(0,p.FD)(j.S,{css:aD.outerRow,children:[(0,p.Y)(V.EY,{multiline:!1,children:i.description}),(0,p.Y)(V.EY,{color:"dimmer",multiline:!1,children:i.renewalInfo})]}),(0,p.Y)(j.S,{css:aD.outerRow,children:(0,p.Y)(rg(),{legacyBehavior:!0,passHref:!0,href:"/usage",prefetch:!1,children:(0,p.Y)("a",{role:"button",children:"View account resource limits"})})})]}):null]})};function aR(){var e=(0,R._)(["\n  mutation HostingDeploymentsUnlinkDomain(\n    $input: UnlinkHostingDeploymentDomainInput!\n  ) {\n    unlinkHostingDeploymentDomain(input: $input) {\n      ... on HostingDeployment {\n        id\n        domains {\n          id\n        }\n      }\n    }\n  }\n"]);return aR=function(){return e},e}function aI(){var e=(0,R._)(["\n  mutation HostingDeploymentsVerifyDomain(\n    $input: VerifyHostingDeploymentDomainInput!\n  ) {\n    verifyHostingDeploymentDomain(input: $input) {\n      ... on HostingDeploymentDomain {\n        id\n        state\n      }\n    }\n  }\n"]);return aI=function(){return e},e}var aF={},aT=(0,I.J1)(aR()),aP=(0,I.J1)(aI()),aL=t(31569),aU=t(49045),aN=t(55545),aO=(0,aU.v)(["paddingRight"]),aM=aO.cssVars,aB=aO.styleTokens,aH=(0,eN.x)({inputWrapper:[B.wp.position.relative,B.wp.flex.growAndShrink(1),{input:[{paddingRight:aB.paddingRight}]}],copyButton:[B.wp.position.absolute,B.wp.top("50%"),B.wp.right(4),{transform:"translateY(-50%)"}]});function az(e){return(0,p.FD)(j.S,{css:aH.inputWrapper,style:(0,x._)({},aM.paddingRight,e.value?"36px":"8px"),children:[(0,p.Y)(oI.pd,(0,c._)((0,s._)({},e),{onClick:function(e){return e.currentTarget.select()}})),e.value?(0,p.Y)(ek.K0,{css:aH.copyButton,alt:"Copy",tooltipBehavior:"hidden",onClick:function(){return e.value&&(0,aL.default)(e.value)},children:(0,p.Y)(aN.A,{})}):null]})}var aW=(0,eN.x)({root:[B.wp.flex.column,(a={gap:8},(0,x._)(a,B.kL.min("mobileMax"),[B.wp.flex.row,{"& > div:nth-of-type(1)":{maxWidth:50},"& > div:nth-of-type(2)":{width:"30%"}}]),(0,x._)(a,"label",[B.wp.color.foregroundDimmer,{fontSize:e_.LU.fontSizeSmall}]),a)],col:[B.wp.colWithGap(4),B.wp.flex.growAndShrink(1)],records:[B.wp.borderRadius(12),(0,x._)({},B.kL.min("mobileMax"),B.wp.colWithGap(12))],divider:(0,x._)({display:"flex",height:1,backgroundColor:e_.LU.outlineDimmest},B.kL.min("mobileMax"),B.wp.display.none)});function aG(e){var n=e.hostname.split(".").slice(0,-2).join(".");return(0,p.FD)(j.S,{css:aW.root,children:[(0,p.FD)(j.S,{css:aW.col,children:[(0,p.Y)(j.S,{tag:"label",children:"Type"}),(0,p.Y)(oI.pd,{value:e.type,readOnly:!0})]}),(0,p.FD)(j.S,{css:aW.col,children:[(0,p.Y)(j.S,{tag:"label",children:"Hostname"}),(0,p.Y)(oI.pd,{value:""===n?"@":n,readOnly:!0})]}),(0,p.FD)(j.S,{css:aW.col,children:[(0,p.Y)(j.S,{tag:"label",children:"Record"}),(0,p.Y)(az,{value:e.record,readOnly:!0})]})]})}function aV(e){var n="replit-verify=".concat(e.deploymentId);return(0,p.FD)(n4.ui,{background:"default",css:aW.records,px:12,pt:8,pb:16,gap:16,children:[(0,p.Y)(aG,{hostname:e.hostname,type:"A",record:e.apexProxy}),(0,p.Y)(j.S,{css:aW.divider}),(0,p.Y)(aG,{hostname:e.hostname,type:"TXT",record:n})]})}var aj="https://docs.replit.com/cloud-services/deployments/custom-domains",aZ=(0,eN.x)({root:[B.wp.colWithGap(8),B.wp.borderRadius(8),B.wp.pl(8),B.wp.pr(4),B.wp.height(32),B.wp.justify.center]}),aq=(0,eN.x)({root:aZ.root,rootExpanded:[aZ.root,B.wp.height("auto"),B.wp.pt(4),B.wp.pb(12),B.wp.justify.start],domainRow:[B.wp.reset.button,B.wp.rowWithGap(8),B.wp.align.center,B.wp.justify.spaceBetween],domainWrapper:[B.wp.flex.shrink(1),B.wp.color.accentPrimaryStronger,{a:B.wp.hover(B.wp.color.accentPrimaryStrongest)}],statusDot:[B.wp.borderRadius("full"),B.wp.width(6),B.wp.height(6)],buttons:[B.wp.flex.column,B.wp.justify.spaceBetween,(l={gap:8},(0,x._)(l,B.kL.min("mobileMax"),B.wp.flex.row),(0,x._)(l,"button",[B.wp.flex.growAndShrink(1)]),l)]}),aK={verified:{color:e_.LU.accentPositiveDefault,text:"Verified"},verifying:{color:e_.LU.orangeDefault,text:"Verifying"},pushed_to_goval:{color:e_.LU.orangeDefault,text:"Verifying"},failed:{color:e_.LU.accentNegativeDefault,text:"Failed"}};function a$(e){var n,t,r,i,o=e.domain,a=e.deploymentId,l=e.apexProxy,c=e.authorizations,d=(0,u._)((0,f.useState)(!1),2),h=d[0],m=d[1],g=(0,u._)((0,f.useState)(!1),2),v=g[0],w=g[1],y=(0,u._)((n={variables:{id:a},fetchPolicy:"network-only",ssr:!1},t=(0,s._)({},nb,n),nf._(nA,t)),2),b=y[0],Y=y[1].loading,A=(0,u._)((r=(0,s._)({},aF,void 0),nm.n(aT,r)),2),x=A[0],C=A[1].loading,_=(0,u._)((i=(0,s._)({},aF,void 0),nm.n(aP,i)),2),k=_[0],D=_[1].loading,E=o.state===S.xp.Failed,R=c.addCustomDomain,I=R.isAuthorized,F=R.message,T=c.deleteCustomDomain,P=T.isAuthorized,L=T.message;return(0,p.FD)(n4.ui,{elevated:!0,css:h?aq.rootExpanded:aq.root,children:[(0,p.FD)(j.S,{css:aq.domainRow,style:{borderBottomLeftRadius:h?0:void 0,borderBottomRightRadius:h?0:void 0},children:[(0,p.FD)(j.S,{css:aq.domainWrapper,row:!0,gap:8,align:"center",children:[(0,p.Y)(V.EY,{multiline:!1,children:(0,p.Y)("a",{target:"_blank",href:"".concat(o.domain.startsWith("http://")||o.domain.startsWith("https://")?"":"https://").concat(o.domain),children:o.domain})}),(0,p.FD)(j.S,{row:!0,gap:4,align:"center",children:[(0,p.Y)(j.S,{css:aq.statusDot,style:{backgroundColor:aK[o.state].color}}),(0,p.Y)(V.EY,{color:"dimmer",variant:"small",children:aK[o.state].text})]})]}),(0,p.FD)(j.S,{row:!0,children:[(0,p.Y)(oa.r,{textToCopy:o.domain,tooltipSuccessText:"Copy link"}),(0,p.Y)(tg.m_,{tooltip:F,isDisabled:I,children:(0,p.Y)(ek.K0,{alt:"Edit",disabled:!I,tooltipBehavior:"hidden",onClick:function(){w(!1),m(function(e){return!e})},css:B.wp.color.foregroundDimmer,children:h?(0,p.Y)(n3.A,{}):(0,p.Y)(ak.A,{})})})]})]}),h?(0,p.Y)(j.S,{pl:4,pr:8,gap:12,children:v?(0,p.FD)(p.FK,{children:[(0,p.Y)(V.EY,{children:"Are you sure you want to unlink this domain?"}),(0,p.FD)(j.S,{css:aq.buttons,children:[(0,p.Y)(eQ.$n,{size:"small",variant:"outlined",text:"Cancel",onClick:function(){w(!1)}}),(0,p.Y)(eQ.$n,{size:"small",disabled:C,text:"Yes, unlink "+o.domain,colorway:"negative",onClick:function(){x({variables:{input:{hostingDeploymentDomainId:o.id}}})}})]})]}):(0,p.FD)(p.FK,{children:[(0,p.FD)(j.S,{gap:6,children:[E?(0,p.FD)(p.FK,{children:[(0,p.FD)(j.S,{row:!0,gap:6,align:"center",children:[(0,p.Y)(nt.A,{}),(0,p.Y)(V.EY,{children:"DNS Error"})]}),(0,p.FD)(V.EY,{children:["Failed to link domain",o.status?": ".concat(o.status.endsWith(".")?o.status.slice(0,-1):o.status):null,". Make sure your domain's DNS settings have these records."," ",(0,p.Y)("a",{target:"_blank",href:aj,children:"Learn more"})]})]}):(0,p.FD)(V.EY,{color:"dimmer",children:["Add these records to your domain's"," ",(0,p.Y)("strong",{css:B.wp.color.foregroundDefault,children:"DNS settings"}),". This may take up to 48 hours to fully apply."," ",(0,p.Y)("a",{target:"_blank",href:aj,children:"Learn more"})]}),(0,p.Y)(aV,{hostname:o.domain,apexProxy:l,deploymentId:a})]}),(0,p.FD)(j.S,{css:aq.buttons,children:[(0,p.Y)(eQ.$n,{iconLeft:Y||D?(0,p.Y)(nL.A,{}):(0,p.Y)(ai.A,{}),size:"small",text:E?"Retry linking":"Check status",onClick:function(){E?k({variables:{input:{hostingDeploymentDomainId:o.id}}}):b()}}),(0,p.Y)(tg.m_,{isDisabled:P,tooltip:L,children:(0,p.Y)(eQ.$n,{iconLeft:(0,p.Y)(av.A,{}),size:"small",disabled:C||!P,text:E?"Remove domain":"Unlink domain",colorway:"negative",onClick:function(){w(!0)}})})]})]})}):null]})}var aJ=t(82036),aQ=t.n(aJ);function aX(e){return(0,p.Y)(rG.Ay,(0,c._)((0,s._)({},e),{children:(0,p.Y)("path",{fillRule:"evenodd",d:"M2.25 3A.75.75 0 0 1 3 2.25h18a.75.75 0 0 1 0 1.5h-1.304c-.273 1.86-1.53 3.131-2.595 4.209l-.067.068C15.749 9.328 14.75 10.384 14.75 12c0 1.616.999 2.672 2.284 3.973l.067.068c1.065 1.078 2.322 2.35 2.595 4.209H21a.75.75 0 0 1 0 1.5H3a.75.75 0 0 1 0-1.5h1.304c.273-1.86 1.53-3.131 2.595-4.209l.067-.068C8.251 14.672 9.25 13.616 9.25 12c0-1.616-.999-2.672-2.284-3.973L6.9 7.959C5.834 6.88 4.577 5.609 4.304 3.75H3A.75.75 0 0 1 2.25 3Zm3.577.75c.257 1.217 1.131 2.134 2.207 3.223l.067.068C9.303 8.258 10.75 9.721 10.75 12c0 2.278-1.447 3.742-2.65 4.959l-.066.068c-1.076 1.089-1.95 2.006-2.207 3.223H7.75l3.8-2.85a.75.75 0 0 1 .9 0l3.8 2.85h1.923c-.257-1.217-1.131-2.134-2.207-3.223l-.067-.068c-1.202-1.217-2.649-2.68-2.649-4.959 0-2.278 1.447-3.742 2.65-4.959l.066-.068c1.076-1.089 1.95-2.006 2.207-3.223H5.827Zm7.923 16.5L12 18.938l-1.75 1.312h3.5Z",clipRule:"evenodd"})}))}var a0=t(22318),a1=(0,eN.x)({root:[B.wp.borderRadius(8),B.wp.border({color:e_.LU.outlineDimmer})],labelRow:[B.wp.rowWithGap(8),B.wp.align.center],labelText:[B.wp.flex.growAndShrink(1)],controls:[{"& > button":[B.wp.flex.growAndShrink(1)]}],valueRow:[B.wp.borderRadius(8),B.wp.pl(8),B.wp.pr(4),B.wp.height(32),B.wp.rowWithGap(8),B.wp.align.center,B.wp.justify.spaceBetween,{a:B.wp.hover(B.wp.color.accentPrimaryStrongest)}]}),a2=function(e){try{return new URL(e.startsWith("http")?e:"https://".concat(e)).hostname.toLowerCase()}catch(n){return e.trim().toLowerCase()}};function a4(e){var n,t,r=(0,u._)((0,f.useState)(!0),2),i=r[0],o=r[1],a=(0,u._)((0,f.useState)(""),2),l=a[0],c=a[1],d=(0,u._)((0,f.useState)(!1),2),h=d[0],m=d[1],g=(0,u._)((0,f.useState)(!1),2),v=g[0],w=g[1],y=(0,u._)((n={onCompleted:function(){e.onAdd()}},t=(0,s._)({},nb,n),nm.n(nx,t)),2),b=y[0],S=y[1].loading,Y=(0,f.useRef)(null),A=(0,f.useId)(),x=aQ()(l),C=S||!l||v&&!x,_=v&&!x?"Enter a valid domain":null,k=S?(0,p.Y)(nL.A,{}):(0,p.Y)(t2.A,{});return i||S||(k=(0,p.Y)(a0.A,{})),(0,p.FD)(j.S,{tag:"form",css:a1.root,p:8,gap:16,onSubmit:function(n){if(n.preventDefault(),i){var t,r=a2(l);c(r),w(!0),aQ()(r)?(o(!1),null==(t=Y.current)||t.focus()):m(!0);return}b({variables:{input:{hostingDeploymentId:e.deploymentId,domain:l}}})},children:[(0,p.FD)(j.S,{gap:8,children:[(0,p.FD)(j.S,{tag:"label",htmlFor:A,css:a1.labelRow,children:[x&&!i?(0,p.Y)(nT.A,{color:e_.LU.accentPositiveDefault}):null,(0,p.Y)(V.EY,{color:"dimmer",children:"First, enter your domain"})]}),i?(0,p.Y)(oI.pd,{id:A,autoFocus:!0,placeholder:"example.com",value:l,disabled:S,onChange:function(e){c(e.currentTarget.value),w(!1),m(!1)}}):(0,p.FD)(n4.ui,{elevated:!0,css:a1.valueRow,children:[(0,p.Y)(j.S,{href:"https://"+l,tag:"a",target:"_blank",children:l}),(0,p.Y)(ek.K0,{alt:"Edit",onClick:function(){return o(!0)},children:(0,p.Y)(ak.A,{color:e_.LU.foregroundDimmer})})]}),_&&h?(0,p.FD)(j.S,{row:!0,gap:4,align:"center",children:[(0,p.Y)(nt.A,{size:12,color:e_.LU.orangeDefault}),(0,p.Y)(V.EY,{variant:"small",children:_})]}):null]}),!i&&x?(0,p.Y)(a5,{apexProxy:e.apexProxy,domain:l,deploymentId:e.deploymentId}):null,(0,p.FD)(j.S,{css:a1.controls,row:!0,gap:8,justify:"space-between",children:[(0,p.Y)(eQ.$n,{type:"button",text:"Cancel",onClick:e.onCancel}),(0,p.Y)(eQ.$n,{ref:Y,iconRight:k,colorway:"primary",type:"submit",disabled:C,text:i?"Next":"Link domain"})]})]})}function a5(e){var n={A:{hostname:e.domain,record:e.apexProxy},TXT:{hostname:e.domain,record:"replit-verify=".concat(e.deploymentId)}};return(0,p.FD)(j.S,{gap:8,children:[(0,p.FD)(j.S,{css:a1.labelRow,children:[(0,p.Y)(aX,{color:e_.LU.foregroundDimmest}),(0,p.FD)(V.EY,{multiline:!0,css:a1.labelText,children:["Next, add the following records to your domain's DNS settings."," ",(0,p.Y)("a",{target:"_blank",href:aj,children:"Learn more"})]}),(0,p.Y)(oa.i,{textToCopy:JSON.stringify(n,null,2),text:"JSON",showIcon:!0,size:"small"})]}),(0,p.Y)(aV,{apexProxy:e.apexProxy,hostname:e.domain,deploymentId:e.deploymentId})]})}var a3=t(86814),a6=(0,eN.x)({primaryDomain:[B.wp.height(32),B.wp.justify.spaceBetween,B.wp.align.center,B.wp.pl(8),B.wp.pr(4),B.wp.borderRadius(8)],primaryDomainLink:[B.wp.flex.shrink(1),B.wp.color.accentPrimaryStronger,{a:B.wp.hover(B.wp.color.accentPrimaryStrongest)}]});function a8(e){var n,t,r,i=e.deployment,o=e.authorizations,a=(0,u._)((0,f.useState)(!1),2),l=a[0],c=a[1],d=(0,u._)((0,f.useState)(void 0),2),h=d[0],m=d[1],v=(0,rB._P)({type:"string",controlName:"flag-fallback-deployments-domain",default:rC.co});n={variables:{id:i.id},fetchPolicy:"cache-and-network",ssr:!1,pollInterval:h,onCompleted:function(e){var n,t;m((null==(n=e.hostingDeployment)?void 0:n.__typename)==="HostingDeployment"&&(null==(t=e.hostingDeployment.domains)?void 0:t.some(function(e){return e.state===S.xp.Verifying}))?3e4:void 0)}},t=(0,s._)({},nb,n),F.I(nA,t);var w=(null==i||null==(r=i.domains)?void 0:r.length)?i.domains:null,y=(null==i?void 0:i.currentBuild.status)===S.nH.Success,b=null==i?void 0:i.repl.apexProxy,Y=(0,g.cF)(),A=function(){var e,n,t,r,i,o=(null==Y||null==(e=Y.repl.hostingDeployment)?void 0:e.__typename)==="HostingDeployment"?null==(n=Y.repl.hostingDeployment)?void 0:n.replitAppSubdomain:void 0;if(!o&&(null==Y||null==(t=Y.repl.owner)?void 0:t.username)&&(o="".concat(Y.repl.slug,"-").concat(Y.repl.owner.username)),o)return"".concat(o).concat((null==(i=window)||null==(r=i.location)?void 0:r.hostname)!=="replit.com"?".staging":"",".").concat(v)}(),x=o.addCustomDomain,C=x.isAuthorized,_=x.message;return(0,p.FD)(j.S,{gap:8,children:[(0,p.FD)(n4.ui,{elevated:!0,css:a6.primaryDomain,row:!0,gap:4,children:[(0,p.Y)(V.EY,{multiline:!1,css:a6.primaryDomainLink,children:(0,p.Y)("a",{href:"https://".concat(A),target:"_blank",rel:"noreferrer noopener",children:A})}),(0,p.FD)(j.S,{row:!0,align:"center",children:[(0,p.Y)(oa.r,{textToCopy:null!=A?A:""}),(0,p.Y)(tg.m_,{tooltip:a7,children:(0,p.Y)(rW.A,{"aria-label":a7,color:e_.LU.foregroundDimmer,css:B.wp.m(4)})})]})]}),w&&i?(0,p.Y)(j.S,{gap:8,children:w.map(function(e){return(0,p.Y)(j.S,{children:(0,p.Y)(a$,{apexProxy:i.repl.apexProxy,deploymentId:i.id,domain:e,authorizations:o})},e.domain)})}):null,l&&b?(0,p.Y)(a4,{apexProxy:b,deploymentId:i.id,onAdd:function(){return c(!1)},onCancel:function(){return c(!1)}}):null,y?null:(0,p.Y)(G.N,{colorway:"warning",icon:(0,p.Y)(nt.A,{}),text:"You must successfully deploy your project before linking a domain"}),!1===l?(0,p.Y)(j.S,{row:!0,children:(0,p.Y)(tg.m_,{tooltip:_,isDisabled:C,children:(0,p.Y)(eQ.$n,{disabled:!y||!C,iconLeft:(0,p.Y)(a3.A,{}),text:"Link a domain",onClick:function(){return c(!0)},variant:"outlined",size:"small"})})}):null]})}var a7="The primary domain always ends in replit.app. To change, you must shut down your deployment and redeploy.";function a9(){var e=(0,R._)(["\n  mutation NotificationsSectionUpdateFailureNotifications(\n    $input: UpdateMachineJobFailureNotificationInput!\n  ) {\n    updateMachineJobFailureNotification(input: $input) {\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on UpdateMachineJobFailureNotificationResult {\n        failureNotifications\n      }\n    }\n  }\n"]);return a9=function(){return e},e}var le={},ln=(0,I.J1)(a9()),lt=t(42764),lr=t(98533);function li(e){return(0,p.Y)(rG.Ay,(0,c._)((0,s._)({},e),{children:(0,p.Y)("path",{fillRule:"evenodd",d:"M.47.47a.75.75 0 0 1 1.06 0l5.25 5.249a.745.745 0 0 1 .02.02l10.73 10.73.001.001 6 6a.75.75 0 1 1-1.061 1.06l-5.78-5.78H3a.75.75 0 0 1-.414-1.376l.063-.05c.06-.05.156-.136.275-.262.239-.252.575-.668.918-1.296C4.525 13.514 5.25 11.39 5.25 8a6.61 6.61 0 0 1 .173-1.517L.47 1.53a.75.75 0 0 1 0-1.06Zm6.283 7.344a5.096 5.096 0 0 0-.003.184V8c0 3.61-.775 5.986-1.592 7.484a8.768 8.768 0 0 1-.468.766h10.5L6.752 7.814Zm4.922-6.565A6.75 6.75 0 0 1 18.75 8v.011c-.026 1.617.177 3.23.604 4.79a.75.75 0 0 1-1.447.396 18.642 18.642 0 0 1-.657-5.204 5.25 5.25 0 0 0-8.164-4.37.75.75 0 0 1-.832-1.248 6.75 6.75 0 0 1 3.42-1.127ZM9.894 20.35a.75.75 0 0 1 1.025.273 1.25 1.25 0 0 0 2.162 0 .75.75 0 0 1 1.298.752 2.749 2.749 0 0 1-4.758 0 .75.75 0 0 1 .273-1.025Z",clipRule:"evenodd"})}))}var lo=(0,eN.x)({container:[B.wp.colWithGap(8)]});function la(e){var n,t,r=e.replId,i=e.isCurrentBuildSuccess,o=e.areFailureNotificationsEnabled,a=(0,rB._P)({controlName:"flag-cron-push-notifications",type:"boolean",default:!1,logFlagToAnalytics:!0}),l=(0,u._)((0,f.useState)(o),2),c=l[0],d=l[1],h=(0,u._)((0,f.useState)(void 0),2),m=h[0],g=h[1],v=(0,u._)((n={onCompleted:function(e){var n=e.updateMachineJobFailureNotification;((null==n?void 0:n.__typename)==="NotFoundError"||(null==n?void 0:n.__typename)==="UnauthorizedError"||(null==n?void 0:n.__typename)==="UserError")&&(g(n.message),d(function(e){return!e}))}},t=(0,s._)({},le,n),nm.n(ln,t)),1)[0],w=function(e){g(void 0),v({variables:{input:{replId:r,failureNotifications:e}}}),d(e)};return(0,p.FD)(j.S,{children:[m?(0,p.Y)(G.N,{text:m,colorway:"warning"}):null,(0,p.FD)(tg.m_,{isDisabled:i,tooltip:"Most recent build failed. Re-deploy successfully before enabling notifications",placement:"top-end",css:lo.container,children:[(0,p.FD)(lt.e2,{disabled:!i,tag:"fieldset",name:"notification-switch",value:c?"enabled":"disabled",onChange:function(e){w("enabled"===e)},row:!0,primary:!0,stretch:!0,children:[(0,p.Y)(lt.$O,{id:"failure-notifications-disabled",value:"disabled",text:"Disabled",icon:(0,p.Y)(li,{})}),(0,p.Y)(lt.$O,{id:"failure-notifications-enabled",value:"enabled",text:"Enabled",icon:(0,p.Y)(lr.A,{})})]}),(0,p.Y)(V.EY,{color:"dimmer",children:"Send email ".concat(a?"and push ":"","notifications when scheduled jobs fail")})]})]})}var ll=(0,eN.x)({container:[tk.R1.maxWidth,B.wp.py(8)],usageContainer:B.wp.colWithGap(16),header:B.wp.pb(8),paddedHeader:B.wp.pb(12)}),ls=function(e){var n=e.deploymentId,t=e.onLifecycleCommand,r=e.onError;return n?(0,p.Y)(lu,{deploymentId:n,onLifecycleCommand:t,onError:r}):(0,p.Y)(A.A,{children:(0,p.Y)(G.N,{colorway:"warning",icon:(0,p.Y)(nt.A,{}),text:"Deployment not found"})})},lc={__typename:"ReplAuthorizations",addCustomDomain:{__typename:"ReplAuthorization",isAuthorized:!1,code:S.S4.InsufficientPermissions,message:"Loading"},deleteCustomDomain:{__typename:"ReplAuthorization",isAuthorized:!1,code:S.S4.InsufficientPermissions,message:"Loading"},deleteDeployment:{__typename:"ReplAuthorization",isAuthorized:!1,code:S.S4.InsufficientPermissions,message:"Loading"},editDeploymentStatus:{__typename:"ReplAuthorization",isAuthorized:!1,code:S.S4.InsufficientPermissions,message:"Loading"},editDeploymentTier:{__typename:"ReplAuthorization",isAuthorized:!1,code:S.S4.InsufficientPermissions,message:"Loading"}};function lu(e){var n,t,r,i,o,a,l,c,d=(0,r2.m6)(),h=(0,u._)((0,f.useState)(!1),2),m=h[0],g=h[1];(0,f.useEffect)(function(){(0,eL.Ae)({context:Y.P.Settings})},[]);var v=(0,u._)((n=(0,s._)({},nD,void 0),nf._(nI,n)),2),w=v[0],y=v[1],b=y.data,x=y.error,C=(t={variables:{id:e.deploymentId},ssr:!1,fetchPolicy:"cache-and-network",onCompleted:function(e){var n;(null==e||null==(n=e.hostingDeployment)?void 0:n.__typename)==="HostingDeployment"&&w({variables:{replId:e.hostingDeployment.repl.id,provider:e.hostingDeployment.currentBuild.provider}})}},r=(0,s._)({},nD,t),F.I(nR,r)),_=C.data,k=C.loading,D=C.error,E=(null==_||null==(i=_.hostingDeployment)?void 0:i.__typename)==="HostingDeployment"?_.hostingDeployment:void 0,R=(null==E?void 0:E.currentBuild.provider)===S.Q0.Cron;if(m)return(0,p.Y)(ns.J,{onError:e.onError,onConfirm:function(n){e.onLifecycleCommand({command:S.jP.UpdateMachineConfiguration,machineConfigurationId:n.configurationId,maxMachineInstances:n.maxInstances})},onBack:function(){return g(!1)}});if(D)return(0,p.Y)(e8.Wx,{text:D.message});if(k||!E)return(0,p.Y)(A.A,{centered:!0,children:(0,p.Y)(e8.cN,{})});var I=E.currentBuild,T=null!=(l=null==I?void 0:I.machineConfiguration)?l:void 0,P=(null==b||null==(o=b.getRepl)?void 0:o.__typename)==="Repl"?b.getRepl.authorizations:lc;return(0,p.Y)(A.A,{children:(0,p.FD)(j.S,{css:ll.container,gap:32,children:[x?(0,p.Y)(G.N,{colorway:"negative",text:x.message}):void 0,I.provider===S.Q0.CloudRun?(0,p.FD)(j.S,{children:[(0,p.Y)(V.EY,{variant:"subheadDefault",css:ll.header,children:"Resource usage"}),(0,p.Y)(j.S,{css:ll.usageContainer,children:(0,p.Y)(aE,{machineConfiguration:T,onEditAutoscaleMachineConfiguration:function(){return g(!0)},authorizations:P})})]}):null,I.provider!==S.Q0.Cron?(0,p.FD)(j.S,{children:[(0,p.Y)(V.EY,{variant:"subheadDefault",css:ll.header,children:"Domains"}),(0,p.Y)(a8,{deployment:E,authorizations:P})]}):null,(0,p.FD)(j.S,{children:[(0,p.Y)(V.EY,{variant:"subheadDefault",css:ll.paddedHeader,children:"Manage deployment"}),(0,p.Y)(rE,{}),(0,p.Y)(ay,{onLifecycleCommand:e.onLifecycleCommand,authorizations:P})]}),R?(0,p.FD)(j.S,{children:[(0,p.Y)(V.EY,{variant:"subheadDefault",css:ll.paddedHeader,children:"Scheduled Job Notifications"}),(0,p.Y)(la,{replId:E.repl.id,isCurrentBuildSuccess:E.currentBuild.status===S.nH.Success,areFailureNotificationsEnabled:null!=(c=null==(a=E.currentBuild.machineJob)?void 0:a.failureNotifications)&&c})]}):null,d?null:(0,p.FD)(j.S,{children:[(0,p.Y)(V.EY,{variant:"subheadDefault",css:ll.paddedHeader,children:"Deploy on the go"}),(0,p.Y)(aY,{shouldShowDownloadQR:!1})]})]})})}var ld=t(54240),lp=t(9685),lf=t(15036),lh=t(98543),lm=t(5071),lg=t(19465),lv=t(58481),lw=[S.Q0.Gce,S.Q0.CloudRun,S.Q0.Cron],ly=(0,eN.x)({root:[{height:"100%"},B.wp.overflow("hidden"),B.wp.position.relative],content:[B.wp.overflow("auto"),B.wp.flex.growAndShrink(1),B.wp.position.relative]}),lb=function(e){var n,t,r,i,o,a,l,s,c,d,h,m,v,x,C=e.onViewUpdate,_=e.onError,k=e.refetch,D=e.openFile,E=e.openPane,R=e.initialView,I=e.error,F=e.flow,T=function(e){$({type:Y.k.SendDeploymentLifecycleCommand,payload:e})},P=(0,nK.A)(),L=(0,g.i$)(),U=(0,g.tq)(),N=(0,g.cF)(),O=(0,g.om)(),M="string"==typeof L,B=void 0===U&&!M,H=(0,lf.Ay)(),z=(0,lp.Q)(),W=!!z,V=(0,u._)((0,f.useState)(function(){return U?Y.P.DeploymentInProgress:B?Y.P.Intro:Y.P.Deployment}),2),Z=V[0],q=V[1];(0,f.useEffect)(function(){U&&q(Y.P.DeploymentInProgress)},[U]);var K=(0,g.e_)(),$=(n=(0,w._)(function(e){var n;return(0,b.YH)(this,function(t){switch(t.label){case 0:switch(C(),e.type){case Y.k.SendDeploymentLifecycleCommand:return[3,1];case Y.k.ChangeView:return[3,3];case Y.k.OpenPane:return[3,4]}return[3,7];case 1:return[4,K(e.payload)];case 2:if(t.sent(),e.payload.command===S.jP.Destroy)return q(Y.P.Intro),k(),[2];return e.payload.command===S.jP.UpdateMachineConfiguration&&k(),q(Y.P.Deployment),[3,8];case 3:return q(e.payload.view),[3,8];case 4:if("codeEditor"!==(n=e.payload).type||".replit"!==n.data.path)return[3,6];return[4,O.stat(".replit")];case 5:if(!t.sent().exists)return _("Could not find .replit configuration file."),[2];t.label=6;case 6:return E(n),[3,8];case 7:return[3,8];case 8:return[2]}})}),function(e){return n.apply(this,arguments)}),J=(t=null==N?void 0:N.provider,r=(0,rB._P)({controlName:"flag-supply-eye",logFlagToAnalytics:!1,default:!1}),o=(i=(0,eU.g)("deployment-analytics-dot")).isLoading,a=i.isDone,(0,f.useMemo)(function(){return[{value:Y.P.Deployment,label:"Overview",icon:(0,p.Y)(nn.A,{})}].concat((0,y._)(t===S.Q0.Cron?[{value:Y.P.Schedule,label:"Schedule",icon:(0,p.Y)(nP.A,{})}]:[]),(0,y._)(t!==S.Q0.Static?[{value:Y.P.Logs,label:"Logs",icon:(0,p.Y)(nQ.A,{})}]:[]),(0,y._)(t!==S.Q0.Cron?[{value:Y.P.Analytics,label:"Analytics",icon:(0,p.Y)(lm.A,{}),showDot:!o&&!a}]:[]),(0,y._)(t&&r&&lw.includes(t)?[{value:Y.P.ResourceMonitoring,label:"Resources",icon:(0,p.Y)(lv.A,{}),beta:!1}]:[]),[{value:Y.P.Settings,label:"Settings",icon:(0,p.Y)(lg.A,{})}])},[a,o,t,r])),Q=(l=(0,i_.Os)(iC.IW.id,iC.Gp.SetupDeployment,{onEnter:function(){Z!==Y.P.Intro&&l.goto(iC.Gp.MonitorDeployment)}}),s=(0,i_.Jw)(iC.IW.id,iC.Gp.ApproveDeployment),c=(0,i_.Jw)(iC.IW.id,iC.Gp.ConfirmDeployment),d=(0,i_.Os)(iC.IW.id,iC.Gp.MonitorDeployment),h=(0,i_.Os)(iC._t.id,iC.ij.SetupDeployment,{onEnter:function(){Z!==Y.P.Intro&&h.goto(iC.ij.MonitorDeployment)}}),m=(0,i_.Jw)(iC._t.id,iC.ij.ApproveDeployment),v=(0,i_.Jw)(iC._t.id,iC.ij.ConfirmDeployment),x=(0,i_.Os)(iC._t.id,iC.ij.MonitorDeployment),{shouldDisableUnrecommendedProviders:l.isActive||h.isActive,mergedTourRefs:(0,ld.S)([l.tourRef,s,c,d.tourRef,h.tourRef,m,v,x.tourRef],{breadcrumb:"client/deployments/Deployment/Views/useDeploymentGuidedTourSteps.ts:79"}),handleDeploy:function(){d.goto(iC.Gp.MonitorDeployment),x.goto(iC.ij.MonitorDeployment)}});return Z===Y.P.Intro?(0,p.Y)(j.S,{css:ly.content,innerRef:Q.mergedTourRefs,children:(0,p.Y)(iq,{initialSelectedProvider:R===Y.P.ReservedVMTierSelection?S.Q0.Gce:void 0,onViewAction:$,onError:_,onDeploy:function(){$({type:Y.k.ChangeView,payload:{view:Y.P.DeploymentInProgress}}),Q.handleDeploy(),z&&H({action:"deploying_app",sessionId:z})},replId:P,disableUnrecommendedProviders:Q.shouldDisableUnrecommendedProviders,hasAgentSession:W,flow:F})}):(0,p.FD)(j.S,{css:ly.root,innerRef:Q.mergedTourRefs,children:[J?(0,p.Y)(lh.P,{onClick:function(e){$({type:Y.k.ChangeView,payload:{view:e.value}})},tabs:J,value:Z===Y.P.DeploymentInProgress?Y.P.Deployment:Z}):null,(0,p.FD)(j.S,{css:ly.content,children:[I?(0,p.Y)(A.A,{children:(0,p.Y)(G.N,{colorway:"warning",icon:(0,p.Y)(nt.A,{}),text:I})}):null,Z===Y.P.Analytics?(0,p.Y)(eG,{replId:P}):null,Z===Y.P.Logs?(0,p.Y)(oJ,{replId:P,deploymentId:L,openFile:D}):null,Z===Y.P.ResourceMonitoring?(0,p.Y)(o5,{replId:P}):null,Z===Y.P.Settings?(0,p.Y)(ls,{onError:_,deploymentId:L,onLifecycleCommand:T}):null,Z===Y.P.Deployment||Z===Y.P.DeploymentInProgress?(0,p.Y)(r9,{view:Z,refetch:k,onViewAction:$,onError:_,openFile:D,onLifecycleCommand:T,hasAgentSession:W}):null,Z===Y.P.Schedule?(0,p.Y)(aa,{replId:P,deploymentId:L,openFile:D}):null]})]})},lS=t(63441);function lY(e){var n=e.initialView,t=e.flow,r=e.onViewUpdate,i=e.openFile,o=e.openPane,a=e.tabsNavRef,l=(0,g.Ki)(),s=(0,g.uS)(),c=(0,g.Jz)(),d=(0,u._)((0,f.useState)(null),2),h=d[0],m=d[1];return s===v.d.Loading?(0,p.Y)(lS.A,{pane:{type:"deployments"},headerText:"Deploy to production",loading:!0}):(0,p.Y)(lb,{tabsNavRef:a,initialView:n,onViewUpdate:function(){h&&m(null),r()},onError:m,refetch:l,openFile:i,openPane:o,error:h||c,flow:t})}var lA=t(69157),lx=t(9414),lC=h.ZU.Object({skipIntro:h.ZU.Optional(h.ZU.Boolean()),isAgentDeployment:h.ZU.Optional(h.ZU.Boolean())}),l_=h.ZU.Object({type:h.ZU.Literal("deployments"),data:h.ZU.Optional(h.ZU.Object({view:h.ZU.Enum(Y.P)})),flow:h.ZU.Optional(lC)}),lk={Content:function(e){var n=e.pane,t=n.data,r=n.flow,i=e.options.performPaneOperation,o=(0,f.useRef)(function(e){if(e&&(void 0===e?"undefined":(0,d._)(e))==="object"&&"view"in e&&e.view===Y.P.ReservedVMTierSelection)return Y.P.ReservedVMTierSelection}(t)),a=(0,f.useCallback)(function(e){return i({operation:"open",secondary:!0,pane:{type:(0,iR.QY)(e),data:e}})},[i]),l=(0,u._)((0,f.useState)(null),2),h=l[0],m=l[1],g=(0,lA.xQ)().getDeploymentCommand;(0,lx.Qt)(function(){var e={type:"deployments",getTabs:h?h.getTabs:function(){return null},setTab:h?h.setTab:function(){}},n=g();return n?(0,c._)((0,s._)({},e),{commands:[{commands:[n]}]}):e},[h,g]);var v=(0,f.useCallback)(function(e){i({operation:"open",pane:e,secondary:!0})},[i]);return(0,p.Y)(lY,{tabsNavRef:m,initialView:o.current,onViewUpdate:function(){o.current&&(o.current=void 0,i({operation:"replace",pane:{type:"deployments"}}))},openFile:a,openPane:v,flow:r})},Icon:function(e){var n=e.size;return(0,p.Y)(rG.Vx.Provider,{value:{color:e_.LU.greenStrongest,size:n},children:(0,p.Y)(nn.A,{})})},getTitle:function(){return"Deployments"},description:"Publish a live, stable, public version of your App, unaffected by the changes you make in the workspace",category:iR.bY.CloudServices,decode:function(e){return m.T(l_,e)}}},13416:(e,n,t)=>{"use strict";t.d(n,{k:()=>k,T:()=>D});var r=t(17844),i=t(88263),o=t(62341),a=t(93629),l=t(17459),s=t(6156),c=t(60632),u=t(79209),d=t(48521),p=t(11882),f=t(76126),h=(0,u.AH)([d.wp.fontSize(13)]);function m(e){var n=e.name,t=(0,l._)(e,["name"]),o=(0,c.Jn)(n.id),u=(0,s.vm)();if(!o)return null;var d=(0,c.LH)(o,u);return""===d.trim()?null:(0,i.Y)(p.a,(0,a._)((0,r._)({},t),{text:(0,i.Y)(f.EY,{css:h,color:"dimmest",children:d})}))}var g=t(8497),v=t(58370),w=t(41852),y=t(45263),b=t(64583),S=t(10429),Y=t(60152),A=t(99429),x=t(4291),C=t(28216),_=(0,b.x)({root:[d.wp.flex.growAndShrink(1),{paddingInline:A.eQ.inputBarPadding,"&:hover .icon":{backgroundColor:"var(".concat(y.qo.interactiveBackground,")")}}],iconAndIndicator:[d.wp.position.relative],iconContainer:[d.wp.position.relative,A.Ef,{width:A.eQ.iconSize,height:A.eQ.iconSize}],textContent:[d.wp.flex.growAndShrink(1)],aliasContainer:[d.wp.color.foregroundDimmest,d.wp.align.center,d.wp.flex.growAndShrink(1)],descriptionText:[{fontSize:"0.9em"}]});function k(e){var n=e.pane,t=e.active,o=e.labelHighlights,a=(0,v.Vv)(),l=a.Icon({pane:n}),s=a.getTitle(n),c=(0,v.qo)(n,{short:!0}),u=a.getTitlePill(n),d=(0,w.F9)({paneType:n.type}),h=(0,Y.mg)();return(0,i.FD)(S.S,{css:_.root,row:!0,align:"center",gap:A.eQ.inputBarPadding,style:h?{paddingTop:A.eQ.inputBarPadding,paddingBottom:A.eQ.inputBarPadding}:void 0,children:[(0,i.FD)(S.S,{css:_.iconAndIndicator,children:[(0,i.Y)(S.S,{css:_.iconContainer,style:{opacity:e.active?1:.7},children:l}),d?(0,i.Y)(g.b,{color:d}):null]}),(0,i.FD)(S.S,{css:_.textContent,gap:2,children:[(0,i.FD)(S.S,{row:!0,gap:4,justify:"space-between",children:[e.alias?(0,i.FD)(S.S,{row:!0,gap:8,css:_.textContent,children:[(0,i.Y)(f.EY,{children:s}),(0,i.FD)(S.S,{css:_.aliasContainer,row:!0,gap:4,children:["(",e.aliasPrefix?(0,i.FD)(f.EY,{color:"dimmest",children:[e.aliasPrefix," "]}):null,(0,i.Y)(C.e,{dimmed:!0,text:e.alias,highlight:o}),")"]})]}):(0,i.Y)(C.e,{dimmed:!t,text:s,highlight:o}),h&&null!=u?(0,i.Y)(p.a,(0,r._)({},u)):null]}),h&&null!=c?(0,i.Y)(C.e,{dimmed:!t,text:c,highlight:e.descriptionHighlights,multiline:!0,css:_.descriptionText}):null]}),e.shortcutCommand?(0,i.Y)(m,{name:e.shortcutCommand}):null]})}function D(e){var n=e.pane,t=e.aliases,r=void 0===t?[]:t;return function(e){var t=e.searchQuery,a=e.data,l=e.active;if("group"===a.type)return null;if(!t)return{score:1,render:{content:(0,i.Y)(k,{pane:n})}};var s=(0,o.w2)(t,a.label,{filterLowMatchScores:!0}),c=null;if(null!=a.description&&(c=(0,o.w2)(t,a.description,{filterLowMatchScores:!0,fuzzy:!1}))&&(c.score*=x.B.toolDescription),null!=s||null!=c)return{score:null!=(h=null!=(f=null==s?void 0:s.score)?f:null==c?void 0:c.score)?h:0,render:{content:(0,i.Y)(k,{pane:n,labelHighlights:null!=(m=null==s?void 0:s.ranges)?m:[],descriptionHighlights:null!=(g=null==c?void 0:c.ranges)?g:[],active:l})}};var u=!0,d=!1,p=void 0;try{for(var f,h,m,g,v,w=r[Symbol.iterator]();!(u=(v=w.next()).done);u=!0){var y=v.value,b="string"==typeof y?{alias:y,prefix:void 0}:y,S=b.alias,Y=b.prefix,A=(0,o.w2)(t,S,{filterLowMatchScores:!0});if(A)return{score:A.score,render:{content:(0,i.Y)(k,{pane:n,active:l,alias:S,aliasPrefix:Y,labelHighlights:A.ranges})}}}}catch(e){d=!0,p=e}finally{try{u||null==w.return||w.return()}finally{if(d)throw p}}return null}}},13424:(e,n,t)=>{"use strict";t.d(n,{a:()=>l});var r=t(12584),i=t(41114),o=t(12261);function a(){var e=(0,r._)(["\n  fragment WorkspaceHeaderReplMetadataRepl on Repl {\n    id\n    title\n    iconUrl\n    isFeaturedRepl\n    user {\n      id\n      ...UserLinkUser\n    }\n    org {\n      id\n      name\n      image\n      slug\n      type\n    }\n    project {\n      id\n      title\n    }\n  }\n  ","\n"]);return a=function(){return e},e}var l=(0,i.J1)(a(),o.N)},13467:e=>{e.exports={root:"WebPageVisit_root__oLhVh",divider:"WebPageVisit_divider__wQO3N",visitContent:"WebPageVisit_visitContent__9cmXb"}},13544:(e,n,t)=>{"use strict";t.d(n,{PZ:()=>eh,Wf:()=>ep});var r=t(12694),i=t(88263),o=t(21462),a=t(82300),l=t(79784),s=t(42415),c=t(5504),u=t(29935),d=t(82643),p=t(63380),f=t(17844),h=t(12584),m=t(41114),g=t(50175);function v(){var e=(0,h._)(["\n  mutation CreateAgentRollbackPreview(\n    $input: CreateAgentRollbackPreviewInput!\n  ) {\n    createAgentRollbackPreview(input: $input) {\n      ... on CreateAgentRollbackPreviewResult {\n        preview {\n          id\n          url\n          expiresAt\n        }\n      }\n      ... on ServiceUnavailable {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n"]);return v=function(){return e},e}var w={},y=(0,m.J1)(v()),b=t(49153),S=t(56687),Y=t(59851),A=t(36640),x=t(31062),C=t(54249);function _(e){var n,t=e.onPreviewLoaded,i=e.prewarm,a=void 0!==i&&i,l=e.date,s=(0,x.A)(),c=(0,b.g$)(),h=(0,C.q)(),m=h.neonDatabases,v=h.loading,_=m[0]?m[0].projectId:null,k=(0,A.A)().showError,D=(0,r._)((0,o.useState)(!1),2),E=D[0],R=D[1],I=(0,r._)((0,o.useState)(null),2),F=I[0],T=I[1],P=(0,r._)((0,o.useState)(null),2),L=P[0],U=P[1],N=(0,o.useCallback)(function(e,n){(0,Y.Q)({context:"PreviewAgentCheckpointButton",error:null!=n?n:Error(e),extras:{replId:s}}),k(e),T(e)},[s,k]),O=(0,r._)((n=(0,f._)({},w,void 0),g.n(y,n)),1)[0],M=(0,S.Gx)({secrets:c,replId:s}),B=v||E,H=(0,o.useCallback)((0,u._)(function(){var e,n,r,i,o,a;return(0,d.YH)(this,function(c){switch(c.label){case 0:if(B)return[2];c.label=1;case 1:return c.trys.push([1,,4,5]),R(!0),[4,M()];case 2:return n=c.sent(),[4,O({variables:{input:{replId:s,neonProjectId:_,timestamp:l.toISOString(),envVars:n}}})];case 3:if((null==(e=(r=c.sent()).data)?void 0:e.createAgentRollbackPreview.__typename)!=="CreateAgentRollbackPreviewResult")return N(null!=(o=null==(i=r.data)?void 0:i.createAgentRollbackPreview.message)?o:"Something went wrong."),[2];return U(a=r.data.createAgentRollbackPreview.preview.url),null==t||t(a),[3,5];case 4:return R(!1),[7];case 5:return[2]}})}),[B,M,O,s,_,l,N,t]);return(0,o.useEffect)(function(){!a||L||v||H()},[a,H,L,v]),{ready:!B,loading:E,loadPreview:H,previewUrl:L,error:F,validPreview:7>(0,p.A)(new Date,l)}}var k=t(31984),D=t(58271),E=t(88011),R=t(45005),I=t(73779),F=t(20041),T=t(89207),P=t(45263),L=t(46603),U=t(70548),N=t(33747),O=t(36112),M=t(76126),B=t(9969),H=t(59172),z=t(10429),W=t(75771),G=t(1998),V=t(58746),j=t(17893),Z=t(83023),q=t(80762),K=t(69258),$=t(19144),J=t.n($),Q=t(28741),X=t.n(Q);function ee(e){var n,t=e.setShowConfirmModal,a=e.onRevert,l=e.commitId,s=e.screenshot,c=e.date,p=_({commitId:l,prewarm:!0,date:c}),f=p.loading,h=p.error,m=p.previewUrl,g=(0,I.A)((n=(0,u._)(function(e){return(0,d.YH)(this,function(n){switch(n.label){case 0:return[4,e.getCommit({commit:l})];case 1:return[2,n.sent()]}})}),function(e){return n.apply(this,arguments)}),[l]),v=(0,C.q)(),w=v.loading,y=v.neonDatabases,b=(0,o.useMemo)(function(){if(w)return(0,R.Ok)(!0);if(0===y.length)return(0,R._)("No database found");var e=y[0],n=(0,D.Xj)();return(0,T.JW)(e,(0,E.Bq)(c,n))},[w,y,c]),S=(0,r._)((0,o.useState)(!1),2),Y=S[0],A=S[1],x=(0,i.Y)(Z.A,{});return h?x=(0,i.Y)(H.m_,{tooltip:h,children:(0,i.Y)(K.A,{})}):f&&(x=(0,i.Y)(q.A,{})),(0,i.FD)(z.S,{gap:24,children:[(0,i.FD)(z.S,{gap:16,children:[(0,i.Y)(M.Y9,{variant:"subheadBig",level:3,children:"Rollback to checkpoint"}),(0,i.FD)(z.S,{gap:24,children:[(0,i.Y)(z.S,{clsx:X().confirmationModalScreenshotContainer,children:s?(0,i.FD)(i.FK,{children:[(0,i.Y)(z.S,{clsx:X().confirmationModalScreenshot,children:(0,i.Y)(G.A,{src:s,alt:"Screenshot",layout:"fill",objectFit:"cover"})}),(0,i.FD)(z.S,{row:!0,align:"center",justify:"space-between",clsx:X().confirmationModalPreviewTextContainer,children:[(0,i.Y)(M.EY,{color:"dimmer",variant:"small",children:"Screenshot taken by the Agent"}),(0,i.Y)(L.$n,{size:"small",variant:"underlined",text:"View app at this checkpoint",disabled:f||!m,iconRight:x,onClick:function(){m&&window.open(m,"_blank")}})]})]}):(0,i.Y)(z.S,{align:"center",justify:"center",clsx:X().noScreenshotText,children:(0,i.Y)(M.EY,{color:"dimmer",children:"No screenshot available"})})}),(0,i.FD)(z.S,{gap:8,children:[(0,i.Y)(M.Y9,{variant:"subheadDefault",level:3,children:"Target checkpoint"}),(0,i.Y)(en,{commitData:g})]}),(0,i.FD)(z.S,{gap:12,children:[(0,i.Y)(M.Y9,{variant:"subheadDefault",level:3,children:"What will be rolled back"}),(0,i.FD)(z.S,{gap:8,children:[(0,i.FD)(z.S,{row:!0,align:"start",gap:8,children:[(0,i.Y)(H.m_,{tooltip:"Rollback must include files to be able to restore your app.",children:(0,i.Y)(U.S,{id:"restore-files",name:"restore-files",checked:!0,disabled:!0})}),(0,i.FD)(N.J,{htmlFor:"restore-files",variant:"text",clsx:X().flexGrowAndShrink,children:[(0,i.Y)(M.EY,{children:"Files"}),(0,i.Y)(M.EY,{color:"dimmer",variant:"small",children:"This will restore all files in your app back to the state they were in at time of the checkpoint."})]})]}),(0,i.FD)(z.S,{row:!0,align:"start",gap:8,children:[(0,i.Y)(H.m_,{tooltip:"Rollback must include agent memory to be able to restore your app.",children:(0,i.Y)(U.S,{id:"restore-agent-memory",name:"restore-agent-memory",checked:!0,disabled:!0})}),(0,i.FD)(N.J,{htmlFor:"restore-agent-memory",variant:"text",clsx:X().flexGrowAndShrink,children:[(0,i.Y)(M.EY,{children:"Agent memory"}),(0,i.Y)(M.EY,{color:"dimmer",variant:"small",children:"This will reset the knowledge that the Agent has about your app back to what it knew about at the time of the checkpoint."})]})]}),(0,i.FD)(z.S,{row:!0,align:"start",gap:8,children:[(0,i.Y)(H.m_,{tooltip:b.error,isDisabled:b.ok,children:(0,i.Y)(U.S,{id:"restore-database",name:"restore-database",disabled:!b.ok,checked:Y,onChange:function(){return A(!Y)}})}),(0,i.FD)(N.J,{htmlFor:"restore-database",variant:"text",clsx:X().flexGrowAndShrink,children:[(0,i.Y)(M.EY,{children:"Database"}),(0,i.Y)(M.EY,{color:"dimmer",variant:"small",children:"This will reset the data of your app back to the time of the checkpoint."})]})]})]})]})]})]}),(0,i.FD)(z.S,{row:!0,justify:"end",gap:8,children:[(0,i.Y)(L.$n,{text:"Cancel",onClick:function(){return t(!1)},variant:"outlined"}),(0,i.Y)(L.$n,{text:"Rollback to this checkpoint",loading:w,onClick:function(){a({rollbackDatabase:Y}),t(!1)},colorway:"primary"})]})]})}function en(e){var n=e.commitData,t=!n,r=n&&(null==n?void 0:n.error);return t?(0,i.FD)(O.ui,{clsx:[J().root,J().checkpointCard],row:!0,gap:8,children:[(0,i.Y)(q.A,{clsx:[X().statusIconLoading,X().lineHeightOffset]}),(0,i.Y)(z.S,{gap:2,clsx:J().flexGrowAndShrink,children:(0,i.FD)(W.A,{speed:2,height:40,backgroundColor:P.LU.backgroundHighest,foregroundColor:P.LU.backgroundHigher,children:[(0,i.Y)("rect",{rx:"2",ry:"2",x:"0",y:"0",width:"200",height:"15"}),(0,i.Y)("rect",{rx:"2",ry:"2",x:"0",y:"25",width:"300",height:"15"})]})})]}):r?(0,i.FD)(O.ui,{clsx:[J().checkpointCard,J().checkpointFailed],row:!0,gap:8,children:[(0,i.Y)(j.A,{clsx:[J().statusIcon,X().lineHeightOffset]}),(0,i.FD)(z.S,{gap:2,clsx:J().flexGrowAndShrink,children:[(0,i.Y)(M.EY,{children:"Failed to load commit"}),(0,i.Y)(M.EY,{color:"dimmer",variant:"small",children:"The commit may have been deleted or is no longer accessible"})]})]}):(0,i.FD)(O.ui,{clsx:[J().root,J().checkpointCard],row:!0,gap:8,children:[(0,i.Y)(V.A,{clsx:[J().statusIcon,X().lineHeightOffset]}),(0,i.FD)(z.S,{gap:2,clsx:J().flexGrowAndShrink,children:[(0,i.Y)(M.EY,{children:n.subject}),(0,i.Y)(M.EY,{color:"dimmer",children:n.body||(0,i.Y)("span",{clsx:J().noDescription,children:"No description provided"})}),(0,i.FD)(z.S,{row:!0,gap:6,align:"center",children:[(0,i.Y)(F.A,{name:n.author.name,email:n.author.email,color:"dimmest",allowPlaceholderAvatar:!0,small:!0}),(0,i.Y)(M.EY,{color:"dimmest",children:""}),(0,i.Y)(B.Dc,{date:new Date(n.author.date),textColor:"dimmest",textVariant:"small"}),(0,i.Y)(M.EY,{color:"dimmest",children:""}),(0,i.Y)(M.EY,{color:"dimmest",variant:"small",children:n.hash.substring(0,8)})]})]})]})}var et=t(77089),er=t(49150),ei=t(55821),eo=t(66257),ea=t(56002),el=t(93629),es=t(71117);function ec(e){return(0,i.Y)(es.Ay,(0,el._)((0,f._)({},e),{children:(0,i.Y)("path",{d:"M13.806 21.074a.75.75 0 0 1 .292 1.47 10.805 10.805 0 0 1-4.196 0 .75.75 0 1 1 .292-1.47 9.298 9.298 0 0 0 3.612 0ZM4.308 17.14a9.308 9.308 0 0 0 2.553 2.553.75.75 0 1 1-.835 1.247 10.805 10.805 0 0 1-2.964-2.965l.623-.417.623-.418Zm13.666 3.8a.75.75 0 0 1-.835-1.247l.835 1.247Zm1.718-3.8a.75.75 0 0 1 1.247.835 10.805 10.805 0 0 1-2.965 2.965l-.417-.624-.418-.623a9.31 9.31 0 0 0 2.553-2.553Zm-16.424-.206a.75.75 0 0 1 1.04.206l-1.246.835a.75.75 0 0 1 .206-1.041ZM1.25 12c0-.717.07-1.419.205-2.098a.75.75 0 1 1 1.47.292 9.3 9.3 0 0 0 0 3.612l.013.076a.75.75 0 0 1-1.483.216l-.089-.514A10.831 10.831 0 0 1 1.25 12Zm21.295 2.098a.75.75 0 1 1-1.47-.292l1.47.292ZM21.25 12c0-.619-.06-1.222-.176-1.806l.736-.145.735-.147a10.804 10.804 0 0 1 0 4.196l-.735-.147-.736-.145A9.298 9.298 0 0 0 21.25 12Zm.414-2.687a.75.75 0 0 1 .88.59l-1.47.291a.75.75 0 0 1 .59-.882ZM4.308 6.86a.75.75 0 0 1-1.246-.835l1.246.835Zm12.625-3.593a.75.75 0 0 1 1.04-.206 10.805 10.805 0 0 1 2.966 2.964.75.75 0 0 1-1.247.835 9.308 9.308 0 0 0-2.553-2.553.75.75 0 0 1-.206-1.04ZM6.026 3.062a.75.75 0 0 1 .835 1.246A9.306 9.306 0 0 0 4.308 6.86l-.623-.418-.623-.417a10.804 10.804 0 0 1 2.964-2.964Zm4.168-.136a.75.75 0 0 1-.292-1.47l.292 1.47ZM12 1.25c.717 0 1.419.07 2.098.205a.75.75 0 1 1-.292 1.47 9.3 9.3 0 0 0-3.612 0l-.145-.735-.147-.735c.68-.134 1.381-.205 2.098-.205ZM15.272 11.59a.5.5 0 0 1 0 .82l-4.342 3.04a.5.5 0 0 1-.787-.41V8.96a.5.5 0 0 1 .787-.41l4.342 3.04Z"})}))}var eu=t(58481);function ed(e){return(0,i.FD)(es.Ay,(0,el._)((0,f._)({},e),{children:[(0,i.FD)("g",{clipPath:"url(#clip0_7973_279)",children:[(0,i.Y)("path",{d:"M13.865 20.05a.75.75 0 0 1 .248 1.477l-.383.077a9.743 9.743 0 0 1-.778.108l-.393.032c-.395.022-.789.02-1.18-.004l-.39-.034-.076-.011a.75.75 0 0 1 .155-1.485l.077.005.33.028c.33.02.664.022.998.003l.332-.026c.332-.032.66-.085.983-.157l.076-.013Zm-7.481-1.996a8.241 8.241 0 0 0 2.205 1.468l.067.035a.75.75 0 0 1-.687 1.33l-.354-.169a9.754 9.754 0 0 1-2.251-1.564l1.02-1.1Zm11.886-.683a.75.75 0 1 1 1.14.974 9.752 9.752 0 0 1-2.39 2.022l-.068.036a.75.75 0 0 1-.704-1.322l.28-.176a8.26 8.26 0 0 0 1.742-1.534Zm-12.946.722a.75.75 0 0 1 1.06-.039l-1.02 1.1a.75.75 0 0 1-.04-1.06Zm-2.063-3.8a.75.75 0 0 1 .928.387l.028.07.117.313c.083.207.173.41.272.607l.152.294.033.07a.75.75 0 0 1-1.31.715l-.04-.066-.18-.348a9.737 9.737 0 0 1-.32-.716l-.138-.37-.022-.074a.75.75 0 0 1 .48-.883Zm17.767-2.47a.75.75 0 0 1 .702.796 9.74 9.74 0 0 1-.145 1.168l-.08.385a9.751 9.751 0 0 1-.47 1.498l-.032.07a.751.751 0 0 1-1.358-.633l.118-.31c.112-.312.206-.63.28-.957l.068-.327c.06-.328.101-.658.122-.988a.75.75 0 0 1 .795-.701Zm-1.924-5.389a.75.75 0 0 1 .993.152l.045.062.209.331a9.744 9.744 0 0 1 1.07 2.525.75.75 0 0 1-1.45.386 8.266 8.266 0 0 0-.905-2.137l-.177-.28-.038-.066a.75.75 0 0 1 .253-.973Zm-4.778-3.151a.75.75 0 0 1 .885-.475l.074.022.366.14a9.758 9.758 0 0 1 2.06 1.138l.313.236.058.05a.75.75 0 0 1-.923 1.174l-.062-.045-.265-.2a8.256 8.256 0 0 0-1.743-.963l-.31-.118-.07-.03a.75.75 0 0 1-.383-.93ZM12.207 2.26l.077.006a.75.75 0 0 1-.032 1.492l-.077.002h-.331a8.254 8.254 0 0 0-.995.078l-.076.007a.75.75 0 0 1-.133-1.492l.391-.047c.262-.026.523-.04.785-.046h.391ZM11.25 7a.75.75 0 0 1 1.5 0v4.932l3.666 2.444.061.046a.75.75 0 0 1-.827 1.241l-.066-.039-4-2.667a.75.75 0 0 1-.334-.624V7Z"}),(0,i.Y)("path",{d:"M10.64 2.354a9.754 9.754 0 0 1 10.257 5.67.75.75 0 1 1-1.368.613A8.253 8.253 0 0 0 6.41 5.94l-.241.231-3.276 3.08H5l.077.003a.75.75 0 0 1 0 1.493L5 10.75H1A.75.75 0 0 1 .25 10V6a.75.75 0 0 1 1.5 0v2.265l3.376-3.172a9.75 9.75 0 0 1 5.514-2.739Z"})]}),(0,i.Y)("defs",{children:(0,i.Y)("clipPath",{id:"clip0_7973_279",children:(0,i.Y)("path",{d:"M0 0h24v24H0z"})})})]}))}var ep=function(e){return e.InAgentChat="inAgentChat",e.InSessionList="inSessionList",e.InActiveSessionList="inActiveSessionList",e}({});function ef(e){var n=e.title,t=e.onRenameTitle,a=e.color,l=(0,r._)((0,o.useState)(!1),2),s=l[0],c=l[1],u=(0,r._)((0,o.useState)(n),2),d=u[0],p=u[1],f=function(){t&&t(d),c(!1)};return s?(0,i.Y)(et.pd,{color:a,value:d,onChange:function(e){return p(e.target.value)},onBlur:f,autoFocus:!0,onKeyDown:function(e){"Enter"===e.key&&f()},className:J().editableTitleInput}):(0,i.Y)(z.S,{row:!0,onClick:function(){return t&&c(!0)},style:{cursor:t?"pointer":"text"},clsx:J().editableTitle,children:(0,i.FD)(M.EY,{color:a,children:[d||n||(0,i.Y)("span",{clsx:J().noDescription,children:"No description provided"}),t?(0,i.Y)(ea.A,{size:16}):null]})})}function eh(e){var n=e.title,t=e.date,l=e.screenshot,s=e.commitId,u=e.onRevert,d=e.onOpenCommit,p=e.onRenameTitle,f=e.isReverting,h=e.isReverted,m=e.isValidTarget,g=e.costInfo,v=e.variant,w=(0,c._P)({controlName:a.eC}),y=(0,c._P)({controlName:"flag-back-to-the-future",logFlagToAnalytics:!0}),b=""===s,S=[J().root];"inAgentChat"===v?(S.push(J().checkpointCard),b?S.push(J().checkpointFailed):m&&S.push(J().checkpointOk)):S.push("inSessionList"===v?J().inSessionList:J().inActiveSessionList);var Y=(0,i.Y)(ed,{});f?Y=(0,i.Y)(q.A,{}):(!m||b)&&(Y=(0,i.Y)(j.A,{}));var A=(0,i.Y)(V.A,{clsx:J().statusIcon});h?A=(0,i.Y)(ei.A,{clsx:J().statusIconReverted}):b&&(A=(0,i.Y)(j.A,{clsx:J().statusIconFailed}));var x=(0,r._)((0,o.useState)(!1),2),C=x[0],_=x[1],k=(0,o.useCallback)(function(){y?_(!0):u({rollbackDatabase:!1})},[y,u]);return(0,i.FD)(z.S,{clsx:S.join(" "),row:!0,gap:8,children:[(0,i.Y)(z.S,{clsx:J().line}),A,(0,i.FD)(z.S,{row:!0,justify:"space-between",align:"center",clsx:J().flexGrowAndShrink,gap:12,children:[(0,i.FD)(z.S,{gap:4,clsx:J().flexGrowAndShrink,children:[(0,i.FD)(z.S,{clsx:J().statusRow,children:[(0,i.FD)(z.S,{row:!0,gap:4,children:[(0,i.Y)(M.EY,{variant:"small",color:"dimmer",children:b?"Failed":"Finished"}),(0,i.Y)(B.Dc,{textVariant:"small",textColor:"dimmer",live:!0,date:t})]}),(0,i.Y)(em,{costInfo:g})]}),b?(0,i.Y)(M.EY,{multiline:!0,children:"An unexpected error occurred while creating this checkpoint. This is most likely an issue with Replit."}):(0,i.Y)(ef,{title:n,onRenameTitle:p,color:h?"dimmer":"default"}),(0,i.FD)(z.S,{clsx:J().buttonRow,children:[(0,i.Y)(H.m_,{tooltip:!m||b?"This is not a valid rollback target":"Reset your app to this version",children:(0,i.Y)(L.$n,{clsx:J().button,size:"small",onClick:k,iconLeft:Y,disabled:f||!m||b,variant:"outlined",text:"Rollback here"})}),(0,i.Y)(L.$n,{clsx:J().button,size:"small",onClick:function(){return d(s)},disabled:!m||b,iconLeft:(0,i.Y)(eo.A,{}),variant:"outlined",text:"Changes"})]})]}),w?(0,i.Y)(ev,{screenshot:l,commitId:s,commitDate:t}):(0,i.Y)(eg,{screenshot:l})]}),(0,i.Y)(er.a,{isOpen:C,onRequestClose:function(){return _(!1)},centered:!0,children:(0,i.Y)(ee,{setShowConfirmModal:_,onRevert:u,commitId:s,screenshot:l,date:t})})]})}function em(e){var n,t,r=e.costInfo;if(!r)return null;var o=(n=r.isPaid,t=r.usageIndicatorVariant,n?t===k.G.Starter?"This used 1 of your ".concat(l.Lm," plan Agent checkpoints."):"This checkpoint cost ".concat(s.ri,"\xa2."):t===k.G.Starter?"This didn't use any of your ".concat(l.Lm," plan Agent checkpoints. No significant changes were made."):"This checkpoint didn't cost you anything. No significant changes were made.");return(0,i.FD)(i.FK,{children:[(0,i.Y)(M.EY,{variant:"small",color:"dimmer",children:""}),(0,i.Y)(H.m_,{tooltip:o,placement:"top",children:r.isPaid?(0,i.Y)(eu.A,{clsx:J().costText}):(0,i.Y)(M.EY,{variant:"small",style:{color:P.LU.accentPositiveStronger},children:"Free"})})]})}var eg=function(e){var n=e.screenshot;return n?(0,i.Y)(z.S,{clsx:J().screenshotContainer,children:(0,i.Y)(G.A,{layout:"fill",src:n,alt:"Screenshot",objectFit:"cover"})}):null},ev=function(e){var n=e.screenshot,t=_({commitId:e.commitId,onPreviewLoaded:function(e){window.open(e,"_blank")},date:e.commitDate}),r=t.loadPreview,o=t.loading,a=t.validPreview;if(!n)return null;if(!a)return(0,i.Y)(eg,{screenshot:n});var l=o?(0,i.Y)(q.A,{clsx:J().previewIcon}):(0,i.Y)(ec,{clsx:J().previewIcon});return(0,i.FD)(z.S,{clsx:J().screenshotContainer,onClick:r,children:[(0,i.Y)(G.A,{layout:"fill",src:n,alt:"Screenshot",objectFit:"cover"}),(0,i.FD)(z.S,{clsx:[J().previewOverlay,o?J().previewLoading:null],children:[l,(0,i.Y)(M.EY,{color:"default",children:"Preview"})]})]})}},13588:(e,n,t)=>{"use strict";t.d(n,{A:()=>g});var r=t(29935),i=t(82643),o=t(88263),a=t(21462),l=t(96907),s=t.n(l),c=t(36640),u=t(53231),d=t(34834),p=t(62153),f=t(27685),h=t(6281);function m(){var e=(0,d.A)(),n=(0,h.h)(h.bO),t=(0,h.h)(h.hQ),o=(0,h.Ou)(h.hQ),l=(0,h.ob)(h.hQ),m=(0,h.h)(h.E2),g=(0,h.cW)(),v=(0,h.wy)(),w=(0,h.Ff)(),y=(0,h.hq)(),b=(0,c.A)(),S=(0,p.J)().configs,Y=(0,h.ov)();return(0,a.useEffect)(function(){if(0!==S.length){var n=[],t=!1,r=!0,i=!1,a=void 0;try{for(var l,c=S[Symbol.iterator]();!(r=(l=c.next()).done);r=!0)!function(){var r=l.value,i=Promise.resolve(),a=v(r.id),c=s()(function(){var n=v(r.id),a=o();if(n===h.d_.Idle||(null==a?void 0:a.id)!==r.id){var l=(0,f.N)(r.id);i=i.then(function(){if(!t)return l.getInstalledPackages({id:r.id,services:e}).then(function(e){t||(w(r.id,e),g(r.id,h.d_.Idle))})})}},500);if(r.packagerFiles.length>0){var u=!0,d=!1,p=void 0;try{for(var m,y=r.packagerFiles[Symbol.iterator]();!(u=(m=y.next()).done);u=!0)!function(){var t=m.value;if(!t.endsWith("/")){var r=null!==a&&a!==h.d_.Initializing&&a!==h.d_.Uninitialized,i=e.fs.watchFilePath(t,{onChange:function(){if(!r){r=!0;return}c()}});n.push(i)}}()}catch(e){d=!0,p=e}finally{try{u||null==y.return||y.return()}finally{if(d)throw p}}}}()}catch(e){i=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw a}}return function(){t=!0;var e=!0,r=!1,i=void 0;try{for(var o,a=n[Symbol.iterator]();!(e=(o=a.next()).done);e=!0)(0,o.value)()}catch(e){r=!0,i=e}finally{try{e||null==a.return||a.return()}finally{if(r)throw i}}}}},[S,e.fs]),(0,a.useEffect)(function(){var n,t=!1;return(n=(0,r._)(function(){var n,r,o,a,l,s;return(0,i.YH)(this,function(i){n=!0,r=!1,o=void 0;try{for(a=function(){var n=s.value,r=v(n.id);if(r&&r!==h.d_.Uninitialized&&r!==h.d_.Initializing)return"continue";g(n.id,h.d_.Initializing),(0,f.N)(n.id).getInstalledPackages({id:n.id,services:e}).then(function(e){t||(w(n.id,e),g(n.id,h.d_.Idle))})},l=S[Symbol.iterator]();!(n=(s=l.next()).done);n=!0)a()}catch(e){r=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw o}}return[2]})}),function(){return n.apply(this,arguments)})(),function(){t=!0}},[S]),(0,a.useEffect)(function(){if(null===t&&0!==n.length){var e=n[0];v(e.id)===h.d_.Idle&&y(e)}},[m,t,n]),(0,a.useEffect)(function(){if(null!==t){var n,o=!1;return(n=(0,r._)(function(){var n,r,a,s,c,d,p,m,v,y,S,A,x,C,_,k,D,E;return(0,i.YH)(this,function(i){switch(i.label){case 0:switch(n=(0,f.N)(t.id),t.kind){case h.Vr.Install:return[3,1];case h.Vr.Uninstall:return[3,6]}return[3,11];case 1:g(t.id,h.d_.Installing),r=!0,a=!1,s=void 0;try{for(c=t.pkgs[Symbol.iterator]();!(r=(d=c.next()).done);r=!0)p=d.value,(0,u.u4)(u.AZ.PACKAGE_MANAGER_USED,{action:"installed",packageId:p.name})}catch(e){a=!0,s=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw s}}i.label=2;case 2:return i.trys.push([2,4,,5]),[4,n.install({id:t.id,pkgs:t.pkgs,services:e})];case 3:return i.sent(),1===t.pkgs.length?b.showNotice("Installed ".concat(null!=(m=t.pkgs[0].name)?m:"package")):b.showNotice("Installed ".concat(t.pkgs.length," packages")),[3,5];case 4:return i.sent(),1===t.pkgs.length?b.showError("Failed to install ".concat(null!=(v=t.pkgs[0].name)?v:"package")):b.showError("Failed to install ".concat(t.pkgs.length," packages")),Y(t.id,t.pkgs),[3,5];case 5:return[3,11];case 6:g(t.id,h.d_.Uninstalling),y=!0,S=!1,A=void 0;try{for(x=t.pkgs[Symbol.iterator]();!(y=(C=x.next()).done);y=!0)_=C.value,(0,u.u4)(u.AZ.PACKAGE_MANAGER_USED,{action:"removed",packageId:_.name})}catch(e){S=!0,A=e}finally{try{y||null==x.return||x.return()}finally{if(S)throw A}}i.label=7;case 7:return i.trys.push([7,9,,10]),[4,n.uninstall({id:t.id,pkgs:t.pkgs,services:e})];case 8:return i.sent(),1===t.pkgs.length?b.showNotice("Removed ".concat(null!=(k=t.pkgs[0].name)?k:"package")):b.showNotice("Removed ".concat(t.pkgs.length," packages")),[3,10];case 9:return i.sent(),1===t.pkgs.length?b.showError("Failed to remove ".concat(null!=(D=t.pkgs[0].name)?D:"package")):b.showError("Failed to remove ".concat(t.pkgs.length," packages")),Y(t.id,t.pkgs),[3,10];case 10:return[3,11];case 11:if(o)return[2];return[4,n.getInstalledPackages({id:t.id,services:e})];case 12:if(E=i.sent(),o)return[2];return w(t.id,E),g(t.id,h.d_.Idle),l(null),[2]}})}),function(){return n.apply(this,arguments)})(),function(){o=!0}}},[t]),null}function g(e){var n=e.children,t=(0,h.PY)();return(0,o.FD)(h.tB.Provider,{value:t,children:[(0,o.Y)(m,{}),n]})}},13601:e=>{e.exports={root:"Header_root__kohSy",surface:"Header_surface__wvtCj",buttonLeft:"Header_buttonLeft__z_g_m",buttonRight:"Header_buttonRight__5dQAr",checkpointMade:"Header_checkpointMade__k5QGo",checkpointMadeIcon:"Header_checkpointMadeIcon__lzN_w","icon-animate":"Header_icon-animate__b0czC",checkpointMadeText:"Header_checkpointMadeText__lShLs","text-animate":"Header_text-animate__TkFhf"}},13754:(e,n,t)=>{"use strict";t.d(n,{D:()=>d});var r,i=t(83846),o=t(88263),a=t(79209),l=t(48521),s=t(59172),c=t(29064),u=(0,a.AH)([l.wp.focusRing,l.wp.display.flex,l.wp.center,l.wp.borderRadius(4),l.wp.backgroundColor.backgroundRoot,l.wp.color.foregroundDefault,l.wp.cursor.pointer,l.wp.p(4),(r={transition:"background-color 0.2s",border:"none"},(0,i._)(r,l.Tp.hover,[l.wp.backgroundColor.backgroundHigher]),(0,i._)(r,":focus",{outline:"none"}),r)]),d=function(e){var n=e.onClick;return(0,o.Y)(s.m_,{tooltip:"Clear",placement:"bottom-start",children:(0,o.Y)("button",{"aria-label":"Clear",onClick:n,css:u,children:(0,o.Y)(c.A,{size:16})})})}},13800:(e,n,t)=>{"use strict";t.d(n,{H:()=>v});var r=t(17844),i=t(93629),o=t(17459),a=t(88263),l=t(21462),s=t(84550),c=t(35341),u=t(45263),d=t(94056),p=t(64583),f=t(48521),h=t(70548),m=t(66300),g=(0,p.x)({row:[f.wp.borderRadius(),f.wp.cursor.default,f.wp.color.foregroundDefault,f.wp.position.relative,f.wp.p(6),{transitionProperty:"box-shadow",transitionDuration:d.Ds.duration,transitionTimingFunction:d.Ds.timingFunction,borderWidth:"1px 0",borderStyle:"solid",borderColor:"transparent","&[data-href]":[f.wp.cursor.pointer],"&[data-hovered]":[{backgroundColor:u.LU.interactiveBackground,transitionDuration:"0ms"}],"&[data-focused]":[f.wp.focusRing,{backgroundColor:u.LU.interactiveBackgroundActive}],"&[data-selected]":[f.wp.backgroundColor.backgroundHigher,{"&[data-hovered]":{backgroundColor:u.LU.interactiveBackgroundActive}}],"&[data-disabled]":[f.wp.color.foregroundDimmer,{cursor:"not-allowed"}]}],checkboxCell:[f.wp.width(16),f.wp.px(6)]});function v(e){var n=e.id,t=e.columns,u=e.children,d=(0,o._)(e,["id","columns","children"]),p=(0,s.mz)().selectionBehavior;return(0,a.FD)(s.fI,(0,i._)((0,r._)({id:n,css:g.row},d),{children:["toggle"===p&&(0,a.Y)(m.n,{css:g.checkboxCell,children:(0,a.Y)(h.S,{slot:"selection",name:"select"})}),(0,a.Y)(c.pM,{items:t,children:"function"==typeof u?Array.from(null!=t?t:[]).map(function(e,n){return(0,a.Y)(l.Fragment,{children:u(e)},n)}):u})]}))}},13953:(e,n,t)=>{"use strict";t.d(n,{A:()=>o});var r=t(37743),i=t(22531),o=function(){function e(){(0,r._)(this,e)}return e.get=function(e,n){var t,r;try{t=sessionStorage.getItem(e)}catch(e){}if(null==t)return null;try{r=JSON.parse(t)}catch(e){}return null==r||"array"===n&&!Array.isArray(r)||n&&(void 0===r?"undefined":(0,i._)(r))!==n?null:r},e.set=function(e,n){try{sessionStorage.setItem(e,JSON.stringify(n))}catch(e){}},e.remove=function(e){try{sessionStorage.removeItem(e)}catch(e){}},e.keys=function(){try{return Object.keys(sessionStorage)}catch(e){return[]}},e}()},13968:(e,n,t)=>{"use strict";t.d(n,{j:()=>w,n:()=>v});var r=t(83846),i=t(88263),o=t(11165),a=t(64583),l=t(48521),s=t(46603),c=t(17070),u=t(11882),d=t(16251),p=t(91163),f=t(76126),h=t(10429),m=(0,a.x)({select:l.wp.minWidth(200),wrapper:[l.wp.rowWithGap(8),l.wp.align.center,(0,r._)({},o.c,[l.wp.flex.rowReverse])],rightComponentWrapper:(0,r._)({},o.c,[l.wp.ml(8)]),titleHeading:[l.wp.center,l.wp.justify.start],staffOnlyPill:[l.wp.height(18)]});function g(e){var n=e.children,t=e.settingName,r=e.settingDescription,a=e.settingId,l=e.title,s=e.rightComponent,c=e.isStaffOnly,d=l;return l||(d=r?(0,i.FD)(i.FK,{children:[(0,i.FD)(h.S,{css:m.titleHeading,row:!0,gap:8,children:[(0,i.Y)(f.EY,{multiline:!1,children:t}),c?(0,i.Y)(u.a,{css:m.staffOnlyPill,text:"Staff-only",colorway:"warning"}):null]}),(0,i.Y)(f.EY,{variant:"small",color:"dimmest",children:r})]}):(0,i.Y)(f.EY,{multiline:!1,children:t})),(0,i.Y)(o.w,{id:a,title:d,children:(0,i.FD)(h.S,{css:m.wrapper,children:[s?(0,i.Y)(h.S,{css:m.rightComponentWrapper,children:s}):null,n]})})}function v(e){var n=e.setting,t=e.currentValue,o=e.update,a=e.rightComponent,l=e.filterOptions,s=e.title;if("select"===n.type){var u,f=l?n.options.filter(l):n.options;return(0,i.Y)(g,{settingName:n.name,settingDescription:n.description,settingId:n.id,title:s,rightComponent:a,children:(0,i.Y)(d.l,{"aria-label":n.name,style:{marginRight:0},items:f,defaultSelectedKey:null==(u=f.find(function(e){return t===e.editorPreferencesValue}))?void 0:u.id,onSelectionChange:function(e){var t;if("string"!=typeof n.editorPreferencesKey)throw Error("Setting does not have an editorPreferencesKey");o((0,r._)({},n.editorPreferencesKey,null==(t=f.find(function(n){return n.id===e}))?void 0:t.editorPreferencesValue))},css:m.select,dataCy:n.id,children:function(e){return(0,i.Y)(c.nh,{id:e.id,label:e.title,dataCy:e.id,fixedHeight:32},e.id)}})})}if("boolean"===n.type)return(0,i.Y)(g,{settingName:n.name,settingDescription:n.description,settingId:n.id,title:s,rightComponent:a,children:(0,i.Y)(p.d,{"aria-label":n.name,isSelected:t,onChange:function(e){if("string"!=typeof n.editorPreferencesKey)throw Error("Setting does not have an editorPreferencesKey");o((0,r._)({},n.editorPreferencesKey,e))},dataCy:n.id})});throw Error("Unsupported setting type")}function w(e){var n,t=e.setting,r=e.currentValueOption,a=e.disabledReason,l=(0,i.FD)(i.FK,{children:[(0,i.Y)(f.EY,{multiline:!1,children:t.name}),(0,i.Y)(f.EY,{variant:"small",color:"dimmest",children:a})]});return(0,i.Y)(o.w,{id:t.id,title:l,children:(0,i.Y)(h.S,{css:m.wrapper,children:r?(0,i.Y)(s.$n,{text:null!=(n=null==r?void 0:r.title)?n:"Disabled",disabled:!0}):null})})}},13975:(e,n,t)=>{"use strict";t.d(n,{D4:()=>R,QS:()=>I});var r=t(17844),i=t(93629),o=t(88263),a=t(21462),l=t(79730),s=t(22761),c=t(54319),u=t(45485),d=t(64870),p=t(71380),f=t(34834),h=t(7252),m=t(2050),g=t(77681),v=t(49897),w=t(3423),y=t(53613),b=t(58370),S=t(69157),Y=t(9414),A=t(45263),x=t(38292),C=t(71117),_=t(46404),k=t(21242),D=l.ZU.Union([l.ZU.Object({type:l.ZU.Literal("local"),port:l.ZU.Number(),path:l.ZU.Optional(l.ZU.String())}),l.ZU.Object({type:l.ZU.Literal("external"),port:l.ZU.Number(),path:l.ZU.Optional(l.ZU.String())})]),E=l.ZU.Object({type:l.ZU.Literal("webview"),data:l.ZU.Optional(l.ZU.Object({previewScreenSize:l.ZU.Optional(v.R),ports:l.ZU.Optional(D),sessionId:l.ZU.Optional(l.ZU.String())}))}),R=function(e){return s.T(E,e)},I={Content:function(e){var n,t,l=e.pane.data,s=e.options,v=s.performPaneOperation,b=(0,f.A)(),A=b.container,C=b.runner,_=b.ports,D=(0,a.useRef)(null),E=(0,c.jt)(),R=(0,p.w)(_),I=(0,u.g)(),F=(0,a.useMemo)(function(){return I?g.YY:(0,g.Eo)(l,R)},[l,R,I]),T=null==l||null==(n=l.ports)?void 0:n.path,P=(0,a.useRef)(null!=T?T:"/"),L=(0,a.useCallback)(function(){return v({operation:"open",secondary:!0,pane:{type:"networking"}})},[v]),U=(0,a.useCallback)(function(){return v({operation:"open",secondary:!0,pane:{type:"agentChat"}})},[v]),N=(0,a.useCallback)(function(){return v({operation:"open",secondary:!0,pane:{type:"deployments"}})},[v]),O=(0,a.useCallback)(function(e){v({operation:"open",pane:e})},[v]),M=(0,a.useCallback)(function(e){v({operation:"replace",pane:{type:"webview",data:(0,i._)((0,r._)({},l),{previewScreenSize:e})}})},[l,v]),B=(0,a.useCallback)(function(e){P.current=e},[]),H=(0,a.useCallback)(function(){v({operation:"openPip",data:{type:E?"agent":"assistant",eventId:"",port:F,path:P.current}})},[F,v,E]),z=(0,S.xQ)({openDeploymentsPane:N,includeSharing:!0}).getCommandGroups;(0,Y.Qt)(function(){var e={type:"webview",refresh:function(){var e;null==(e=D.current)||e.refresh()},navigate:function(e,n){var t;null==(t=D.current)||t.navigateTo(e,n)}},n=z();return n.length>0?(0,i._)((0,r._)({},e),{commands:n}):e},[z]),(0,w.A)({runner:C,refreshWebView:null==(t=D.current)?void 0:t.refresh});var W=(0,a.useMemo)(function(){return void 0===F},[F]),G=(0,d.th)(F);return((0,h.El)({isVisible:!W&&!G&&s.isActive}),W)?(0,o.FD)(o.FK,{children:[(0,o.Y)(m.cR,{side:"left",children:(0,o.Y)(S.Cv,{openDeploymentsPane:N})}),(0,o.Y)(y.A,{openNetworkingTool:L,openAgentPane:U})]}):(0,o.FD)(o.FK,{children:[(0,o.Y)(m.cR,{side:"left",children:(0,o.Y)(S.Cv,{openDeploymentsPane:N})}),(0,o.Y)(m.cR,{side:"right",children:F?(0,o.Y)(x.K0,{size:36,alt:"Picture in Picture",onClick:H,children:(0,o.Y)(k.A,{})}):null}),(0,o.Y)(g.QJ,{ref:D,initialPort:F,initialPath:T,openPane:O,openNetworkingTool:L,ports:_,container:A,previewScreenSize:null==l?void 0:l.previewScreenSize,setPreviewScreenSize:M,onCurrentRelativeUrlChanged:B})]})},Icon:function(e){var n=e.size;return(0,o.Y)(C.Vx.Provider,{value:{color:A.LU.foregroundDimmer,size:n},children:(0,o.Y)(_.A,{})})},getTitle:function(){return"Preview"},description:"Preview your App",category:b.bY.WorkspaceFeatures,decode:R}},14420:e=>{e.exports={surface:"ErrorMessage_surface__Q9n5A"}},14893:(e,n,t)=>{"use strict";t.d(n,{IW:()=>j,Eo:()=>q,wb:()=>e_,AK:()=>W,oE:()=>z,Jl:()=>ep,cQ:()=>eu,I7:()=>ek,oh:()=>N,ch:()=>ef,bD:()=>eE,d_:()=>eL,sT:()=>eF,KZ:()=>eT,qP:()=>eP,wS:()=>eS,jP:()=>eo,lO:()=>eI,z1:()=>B,b7:()=>es,gR:()=>eA,MP:()=>eR,Ss:()=>H,vJ:()=>G,af:()=>V,j3:()=>ec,nd:()=>et,hk:()=>ea,XO:()=>el,mP:()=>ei,OK:()=>L,If:()=>$,g3:()=>ey,IE:()=>Q,ij:()=>eU});var r=t(29935),i=t(17844),o=t(12694),a=t(86105),l=t(22531),s=t(82643),c=t(292),u=t.n(c),d=t(21462),p=t(23099),f=t.n(p),h=t(35992),m=t(44370),g=t(68820),v=t(1230),w=t(54319),y=t(47630),b=t(69665),S=t(45005),Y=t(39101),A=t(5504),x=t(93369),C=t(45485),_=t(6598),k=t(37427),D=t(34834),E=t(52017),R=t(46434),I=t(74093),F=t(81738),T=t(73707),P=(0,m.eU)();function L(){return(0,F.h)(P)}var U=(0,m.eU)(!0);function N(){return(0,F.h)(U)}var O=(0,m.eU)(null,function(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=(0,h.jM)(e(P),t);return n(P,i),r.persist&&e(eb).persist(),i});function M(){return(0,F.ob)(O)}function B(){var e=M();return(0,d.useCallback)(function(n){return e(function(e){if(!e){e={runButton:n};return}e.runButton=n},{persist:!0})},[e])}function H(){var e=M();return(0,d.useCallback)(function(n,t){var r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).persist;return e(function(e){var r,i=null==e||null==(r=e.workflow)?void 0:r[n];i&&t(i)},{persist:r})},[e])}function z(){var e=M();return(0,d.useCallback)(function(n){return e(function(e){var t;null==e||null==(t=e.workflow)||t.splice(n,1)},{persist:!0})},[e])}function W(){var e=H();return(0,d.useCallback)(function(n){return e(n.workflowIndex,function(e){null==e||e.tasks.splice(n.taskIndex,1)},{persist:!0})},[e])}function G(){var e=H();return(0,d.useCallback)(function(n,t,r){var i=r.persist;return e(n.workflowIndex,function(e){e.tasks[n.taskIndex]=t},{persist:i})},[e])}function V(){var e=H();return(0,d.useCallback)(function(n,t,r){var i=r.persist;return e(n.workflowIndex,function(e){e.tasks=t},{persist:i})},[e])}function j(){var e=H();return(0,d.useCallback)(function(n){return e(n,function(e){var n,t=null!=(n=e.tasks[e.tasks.length-1])?n:{};e.tasks.push(t?(0,i._)({},t):{task:"shell.exec",args:""})})},[e])}var Z=(0,m.eU)(null,function(e,n,t){var r=n(O,function(e){if(void 0===e)return{workflow:[t]};e.workflow?e.workflow.push(t):e.workflow=[t]},{persist:!0});return u()(null==r?void 0:r.workflow),r.workflow.length-1});function q(){return(0,F.ob)(Z)}var K=(0,m.eU)(void 0);function $(){return(0,F.h)(K)}var J=(0,m.eU)(function(e){var n=e(K);return n?Object.entries(n).flatMap(function(e){var n=(0,o._)(e,2),t=n[0],r=n[1];return r.tasks.filter(function(e){return e.state===b.Dr.RUNNING||e.state===b.Dr.FINISHED||e.state===b.Dr.FAILED||e.state===b.Dr.ERROR}).map(function(e,n){return{task:e,taskIdx:n,runId:t,config:r.workflow.tasks[n]}})}):[]});function Q(){return(0,F.h)(J)}var X=(0,m.eU)(function(e){var n,t=e(P);return null!=(n=null==t?void 0:t.workflow)?n:[]}),ee=(0,g.mg)(X,function(e){var n;return null!=(n=null==e?void 0:e.map(function(e,n){return n}))?n:[]},f()),en=(0,m.eU)(function(e){var n=function(e){var n=!0,t=!1,i=void 0;try{for(var o,a=e.tasks[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;if("workflow.run"===l.task&&!r.includes(l.args))return(0,S._)('workflow "'.concat(l.args,'" not found'))}}catch(e){t=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(t)throw i}}return(0,S.Ok)(null)},t=e(X),r=e(er),i={};return t.forEach(function(e,t){var r=n(e);r.ok||(i[t]=r.error)}),i});function et(e){return(0,F.h)((0,d.useMemo)(function(){return(0,g.mg)(en,function(n){return e in n?n[e]:null})},[e]))}var er=(0,g.mg)(X,function(e){var n;return null!=(n=null==e?void 0:e.map(function(e){return e.name}))?n:[]},f());function ei(){return(0,F.h)(X)}function eo(){return(0,F.h)(eg)}function ea(){return(0,F.h)(ee)}function el(){return(0,F.h)(er)}function es(e){var n,t;return(0,F.h)((n=e.workflowIndex,t=e.taskIndex,(0,d.useMemo)(function(){return(0,g.mg)(X,function(e){var r;return e?null==(r=e[n])?void 0:r.tasks[t]:null})},[n,t])))}function ec(e){return(0,F.h)((0,d.useMemo)(function(){return(0,g.mg)(X,function(n){return n?n[e]:null})},[e]))}function eu(){return(0,F.Ou)(X)}function ed(e){var n=(0,d.useMemo)(function(){return(0,m.eU)(function(n){var t,r=null==(t=n(X)[e])?void 0:t.name;if(!r)return null;var i=n(K);return i?function(e,n){var t=[],r=!0,i=!1,o=void 0;try{for(var a,l=Object.values(e)[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var s=a.value;s.workflow.name===n&&t.push(s)}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return t.length?t.sort(function(e,n){return e.startTime-n.startTime}):null}(i,r):null})},[e]);return(0,d.useMemo)(function(){return(0,g.mg)(n,function(e){return e?e[e.length-1]:null})},[n])}function ep(e){return(0,F.Ou)(ed(e))}function ef(e){var n;return(0,F.AI)((n=ed(e),(0,d.useMemo)(function(){return(0,g.mg)(n,function(e){return(null==e?void 0:e.step)===b.zY.RUNNING})},[n])))}function eh(){return(eh=(0,r._)(function(e,n){var t;return(0,s.YH)(this,function(r){switch(r.label){case 0:return[4,e.updateDotReplit([(null==(t=n.workflow)?void 0:t.length)||n.runButton?{path:"workflows",op:"add",value:JSON.stringify(n)}:{path:"workflows",op:"remove",value:""}])];case 1:if(r.sent().error)return[2,(0,S._)("Error applying update")];return[2,(0,S.Ok)(null)]}})})).apply(this,arguments)}var em=(0,m.eU)(function(e){var n=e(P);if(!(null==n?void 0:n.workflow)||!(null==n?void 0:n.runButton))return null;var t=!0,r=!1,i=void 0;try{for(var o,a=n.workflow[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;if(l.name===n.runButton)return l}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return null}),eg=(0,g.mg)(em,function(e){var n;return null!=(n=null==e?void 0:e.name)?n:null}),ev=(0,m.eU)(function(e){var n=e(X).find(function(e){var n;return null==(n=e.metadata)?void 0:n.dotReplitRun});return n?n.name:null}),ew=(0,m.eU)(function(e){var n=e(K);if(!n)return null;var t=Object.values(n).filter(function(e){return e.step===b.zY.RUNNING});return 0===t.length?null:t});function ey(){var e,n=(0,F.h)(eg),t=(0,A._P)({controlName:"flag-run-migration"}),i=(0,D.A)().fs,o=(0,F.h)(ev);!n&&t&&(n=o);var a=(0,F.h)(ew),l=eR();e=(0,d.useMemo)(function(){return null!==a&&a.some(function(e){return"agent"===e.userId})},[a])||(null==a?void 0:a.some(function(e){return e.step===b.zY.RUNNING}))?k.ll.RUNNING:k.ll.IDLE;var c=(0,_.I)(function(e){var t;return t=(0,r._)(function(t){return(0,s.YH)(this,function(r){switch(r.label){case 0:return[4,i.flush()];case 1:return r.sent(),l(t),[2,!!n&&e.workflows.runWorkflow.rpc({workflowId:n})]}})}),function(e){return t.apply(this,arguments)}},[l,n,i]),u=(0,_.I)(function(e){return function(){var n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).graceful;null==a||a.forEach(function(t){e.workflows.stopRun.rpc({runId:t.runId,graceful:n})})}},[a]);return null!==n?{workflowId:n,run:c,stop:u,step:e,runningWorkflows:a}:null}var eb=(0,m.eU)({persist:(0,r._)(function(){return(0,s.YH)(this,function(e){return[2,(0,S.Ok)(null)]})})});function eS(){var e=(0,F.Ou)(eb);return(0,d.useCallback)(function(){return(0,e().persist)()},[e])}var eY=(0,m.eU)(!1);function eA(e){var n=(0,F.ob)(eY);(0,d.useEffect)(function(){n(e)},[n,e]),(0,d.useEffect)(function(){return function(){n(!1)}},[n,e])}var ex={PARSE_ERROR:"Failed to parse workflow configs from .replit",NOT_FOUND:"Missing .replit file",READ_FILE:"Error reading .replit"},eC=(0,m.eU)(void 0);function e_(){return(0,F.h)(eC)}function ek(e){var n,t,i,o,a,l,c=e.dotReplit,u=(0,F.Ou)(P),p=(0,F.ob)(P),h=(0,F.Ou)(eY),m=(0,F.ob)(eC),g=(0,F.ob)(U),v=(0,d.useCallback)(function(e){g(!1);var n=u();!(n&&h())&&(f()(e,n)||p(e||{}))},[g,u,h,p]),w=(0,d.useCallback)(function(e){g(!1),(0,E.Sb)(e.code)?m({code:e.code,message:ex[e.code],extras:e.extras}):m(void 0)},[m,g]);t=(n={onWorkflowsConfigChange:v,onRunStateChange:(0,F.ob)(K),onDotReplitStateChange:w}).onWorkflowsConfigChange,i=n.onDotReplitStateChange,o=n.onRunStateChange,a=(0,A._P)({controlName:"flag-run-migration"}),(0,I.b)((l=(0,r._)(function(e,n){var l;function c(){return(c=(0,r._)(function(){var n,r,o,a,c,u,d,p;return(0,s.YH)(this,function(s){switch(s.label){case 0:n=e.workflows.config.subscribe({},{signal:l}).resReadable,r=!1,o=!1,s.label=1;case 1:s.trys.push([1,6,7,12]),c=(0,R._)(n),s.label=2;case 2:return[4,c.next()];case 3:if(!(r=!(u=s.sent()).done))return[3,5];if(!(d=u.value).ok)return(0,E.QS)(d.payload)&&i(d.payload),[3,4];if(void 0!==d.payload.dotReplitState)return i(d.payload.dotReplitState),[3,4];t(d.payload.config),s.label=4;case 4:return r=!1,[3,2];case 5:return[3,12];case 6:return p=s.sent(),o=!0,a=p,[3,12];case 7:if(s.trys.push([7,,10,11]),!(r&&null!=c.return))return[3,9];return[4,c.return()];case 8:s.sent(),s.label=9;case 9:return[3,11];case 10:if(o)throw a;return[7];case 11:return[7];case 12:return[2]}})})).apply(this,arguments)}function u(){return(u=(0,r._)(function(){var n,t,r,i,a,c,u,d;return(0,s.YH)(this,function(s){switch(s.label){case 0:n=e.workflows.runState.subscribe({},{signal:l}).resReadable,t=!1,r=!1,s.label=1;case 1:s.trys.push([1,6,7,12]),a=(0,R._)(n),s.label=2;case 2:return[4,a.next()];case 3:if(!(t=!(c=s.sent()).done))return[3,5];if(!(u=c.value).ok)return[3,4];o(u.payload.state),s.label=4;case 4:return t=!1,[3,2];case 5:return[3,12];case 6:return d=s.sent(),r=!0,i=d,[3,12];case 7:if(s.trys.push([7,,10,11]),!(t&&null!=a.return))return[3,9];return[4,a.return()];case 8:s.sent(),s.label=9;case 9:return[3,11];case 10:if(r)throw i;return[7];case 11:return[7];case 12:return[2]}})})).apply(this,arguments)}return(0,s.YH)(this,function(t){switch(t.label){case 0:return l=n.signal,[4,e.workflows.init.rpc({useWorkflowGenerators:a},{signal:l})];case 1:if(!t.sent().ok)return[2];return[4,Promise.all([function(){return c.apply(this,arguments)}(),function(){return u.apply(this,arguments)}()])];case 2:return t.sent(),[2]}})}),function(e,n){return l.apply(this,arguments)}),[a,t,i,o]);var y=(0,F.AI)(P),b=(0,F.ob)(eb);(0,d.useEffect)(function(){b({persist:(0,r._)(function(){var e,n,t;return(0,s.YH)(this,function(r){return(n=y.current)?(t=null==(e=n.workflow)?void 0:e.filter(function(e){var n;return!(null==(n=e.metadata)?void 0:n.generated)}),[2,function(e,n){return eh.apply(this,arguments)}(c,{runButton:n.runButton,workflow:t})]):[2,(0,S._)("No config found")]})})})},[c,b,y])}var eD=(0,m.eU)([]);function eE(e,n){var t=(0,F.ob)(eD),r=(0,x.A)(e);(0,d.useEffect)(function(){var e=function(e){r.current(e)};return t(function(n){return(0,a._)(n).concat([e])}),function(){t(function(n){return n.filter(function(n){return n!==e})})}},[t].concat((0,a._)(n)))}function eR(){var e=(0,F.h)(eD);return(0,d.useCallback)(function(n){e.forEach(function(e){return e(n)})},[e])}function eI(){var e=(0,T.A)().didDisconnect,n=(0,C.g)(),t=N(),r=ey(),i=el(),o=(0,w.C9)().agentState,a=(0,y.J2)(o),l=(0,d.useMemo)(function(){var e;return!!a&&null!=r&&!!r.runningWorkflows&&(a.state===v.g32.AGENT_STATE_RUNNING||a.state===v.g32.AGENT_STATE_PAUSING||a.state===v.g32.AGENT_STATE_PAUSED&&(null==(e=a.reason)?void 0:e.$kind)==="waitingOnUserResponse")&&r.runningWorkflows.some(function(e){return"agent"===e.userId})},[a,null==r?void 0:r.runningWorkflows]),s=(0,Y.A)(l,1e3),c=(0,d.useMemo)(function(){return(null==r?void 0:r.step)===k.ll.RUNNING},[null==r?void 0:r.step]),u=(0,Y.A)(c,100),p=(0,d.useMemo)(function(){return s?u:c},[s,u,c]),f=(0,d.useMemo)(function(){return e||t},[e,t]);return{isHtmlRepl:n,isWorkflowsLoading:t,isWorkflowsRunning:c,isRunning:p,isAgentRunning:s,isOffline:f,isDisabled:(0,d.useMemo)(function(){var e=null==r?void 0:r.workflowId;return!e||!i.includes(e)},[i,null==r?void 0:r.workflowId]),runButtonWorkflowName:null==r?void 0:r.workflowId}}function eF(){var e=(0,D.A)().runner,n=ey(),t=eI(),r=t.isRunning,i=t.isHtmlRepl;return(0,d.useCallback)(function(t){var o,a;r||(i?null==e||null==(o=e.run)||o.call(e,null!=t?t:k.QG.RUN_BUTTON_CLICKED):null==n||null==(a=n.run)||a.call(n,null!=t?t:k.QG.RUN_BUTTON_CLICKED))},[r,e,n,i])}function eT(){var e=ey(),n=eI(),t=n.isRunning,r=n.isWorkflowsRunning;return(0,d.useCallback)(function(){if(t&&r){var n;null==e||null==(n=e.stop)||n.call(e,{graceful:!0})}},[t,r,e])}function eP(){var e=eF(),n=eT(),t=eI().isRunning;return(0,d.useCallback)(function(r){t?n():e(r)},[t,e,n])}function eL(){var e=eF(),n=eT(),t=eI().isRunning,r=(0,x.A)(t),i=(0,o._)((0,d.useState)(!1),2),a=i[0],l=i[1];return(0,d.useEffect)(function(){a&&(r.current||(e(),l(!1)))},[a,r,e]),(0,d.useCallback)(function(){a||(r.current?(l(!0),n()):e())},[a,r,e,n])}function eU(e,n){return function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(r>=5)return!1;var i=!0,o=!1,a=void 0;try{for(var s,c=t.tasks[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var u=function(){var t=s.value;if("shell.exec"===t.task&&t.waitForPort)return{v:!0};if("workflow.run"===t.task){var i=n.find(function(e){return e.name===t.args});if(i&&e(i,r+1))return{v:!0}}}();if("object"===(0,l._)(u))return u.v}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return!1}(e)}},14962:(e,n,t)=>{"use strict";t.d(n,{A:()=>c});var r=t(88263),i=t(45263),o=t(64583),a=t(48521),l=t(10429),s=(0,o.x)({root:[a.wp.borderRadius(8),a.wp.backgroundColor.backgroundRoot,a.wp.border({color:i.LU.outlineDimmest})],video:[a.wp.borderRadius(8),a.wp.width("100%")]});function c(e){var n=e.src,t=e.autoPlay,i=e.loop,o=e.width;return(0,r.Y)(l.S,{css:s.root,p:4,style:{width:void 0===o?280:o},children:(0,r.Y)("video",{css:s.video,src:n,autoPlay:void 0===t||t,loop:void 0===i||i,playsInline:!0,muted:!0})})}},14996:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(88263),a=t(71117);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M2.365 4.356a.75.75 0 0 1 .74-.016l13 7a.75.75 0 0 1 0 1.32l-13 7A.75.75 0 0 1 2 19V5a.75.75 0 0 1 .365-.644Zm1.135 1.9v11.488L14.168 12 3.5 6.256ZM18.5 12a.75.75 0 0 1 .75-.75h3a.75.75 0 0 1 0 1.5h-3a.75.75 0 0 1-.75-.75ZM11 6a.75.75 0 0 1 .75-.75h10.5a.75.75 0 0 1 0 1.5h-10.5A.75.75 0 0 1 11 6ZM11 18a.75.75 0 0 1 .75-.75h10.5a.75.75 0 0 1 0 1.5h-10.5A.75.75 0 0 1 11 18Z",clipRule:"evenodd"})}))}},15012:(e,n,t)=>{"use strict";t.d(n,{A:()=>U});var r=t(12694),i=t(88263),o=t(17844),a=t(12584),l=t(41114),s=t(86997),c=t(50175);function u(){var e=(0,a._)(["\n  query MultiplayerInviteUrl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        inviteUrl\n        owner {\n          ... on User {\n            id\n          }\n          ... on Team {\n            id\n            capabilities {\n              isBusinessPlan\n              hasValidSubscription\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return u=function(){return e},e}function d(){var e=(0,a._)(["\n  mutation MultiplayerRefreshInviteUrl($replId: String!) {\n    refreshMultiplayerInviteLink(replId: $replId) {\n      id\n      ... on Repl {\n        id\n        inviteUrl\n      }\n    }\n  }\n"]);return d=function(){return e},e}function p(){var e=(0,a._)(["\n  mutation DeleteMultiplayerInviteUrl($replId: String!) {\n    deleteMultiplayerInviteLink(replId: $replId) {\n      ... on Repl {\n        id\n        inviteUrl\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return p=function(){return e},e}var f={},h=(0,l.J1)(u()),m=(0,l.J1)(d()),g=(0,l.J1)(p()),v=t(36640),w=t(31569),y=t(53231),b=t(45263),S=t(64583),Y=t(48521),A=t(33220),x=t(77089),C=t(37039),_=t(36112),k=t(91163),D=t(76126),E=t(10429),R=t(51705),I=t(22318),F=t(80762),T=t(69258),P=(0,S.x)({container:[Y.wp.colWithGap(12),Y.wp.px(12)],header:[Y.wp.flex.row,Y.wp.justify.spaceBetween],globeIconContainer:[Y.wp.width(40),Y.wp.height(40),Y.wp.backgroundColor.accentPrimaryDimmer,Y.wp.borderRadius("full"),Y.wp.align.center,Y.wp.justify.center],title:[Y.wp.fontWeight.medium],inviteUrlContainer:[Y.wp.borderRadius(8),Y.wp.flex.row],input:[Y.wp.borderRadius(8,0,0,8),Y.wp.color.foregroundDimmer],copyToClipboard:[Y.wp.borderRadius(0,8,8,0)]}),L=function(){return(0,i.FD)(E.S,{row:!0,gap:12,children:[(0,i.Y)(E.S,{css:P.globeIconContainer,children:(0,i.Y)(R.A,{color:b.LU.accentPrimaryStrongest,size:20})}),(0,i.FD)(E.S,{children:[(0,i.Y)(D.EY,{css:P.title,id:"link-switch-label",multiline:!1,children:"Private join link"}),(0,i.Y)(D.EY,{variant:"small",color:"dimmest",multiline:!1,children:"Anyone with this link can edit files"})]})]})};function U(e){var n,t,a,l,u,d,p,S,R,U,N,O,M,B,H=e.replId,z=(0,v.A)(),W=z.showConfirm,G=z.showError,V=(n={variables:{replId:H}},t=(0,o._)({},f,n),s.I(h,t)),j=V.data,Z=V.loading,q=V.error,K=V.refetch,$=(0,r._)((a={variables:{replId:H},onError:function(e){return G(e.message)},onCompleted:function(){return W("Join link created")}},l=(0,o._)({},f,a),c.n(m,l)),2),J=$[0],Q=$[1],X=(0,r._)((u={variables:{replId:H},onError:function(e){return G(e.message)},onCompleted:function(e){if("UserError"===e.deleteMultiplayerInviteLink.__typename)return void G(e.deleteMultiplayerInviteLink.message);"Repl"===e.deleteMultiplayerInviteLink.__typename&&W("Join link deleted")}},d=(0,o._)({},f,u),c.n(g,d)),2),ee=X[0],en=X[1],et=(null==j||null==(p=j.repl)?void 0:p.__typename)==="Repl"?j.repl:null,er=Q.loading||en.loading,ei=(null==j||null==(S=j.repl)?void 0:S.__typename)==="Repl"&&(null==et||null==(R=et.owner)?void 0:R.__typename)==="Team",eo=(null==j||null==(U=j.repl)?void 0:U.__typename)==="Repl"&&(null==et||null==(N=et.owner)?void 0:N.__typename)==="Team"&&(null==et||null==(O=et.owner.capabilities)?void 0:O.isBusinessPlan)&&(null==et||null==(M=et.owner.capabilities)?void 0:M.hasValidSubscription),ea=(null==j||null==(B=j.repl)?void 0:B.__typename)==="Repl"&&(null==et?void 0:et.inviteUrl)&&1?window.location.origin+(null==et?void 0:et.inviteUrl):null;return Z||ei&&!eo?null:q?(0,i.FD)(E.S,{css:P.container,children:[(0,i.FD)(E.S,{css:P.header,children:[(0,i.Y)(L,{}),(0,i.Y)(k.d,{isSelected:!1,isDisabled:!0,"aria-labelledby":"link-switch-label"})]}),(0,i.Y)(C.d,{css:[Y.wp.textAlign.left],iconLeft:(0,i.Y)(T.A,{color:b.LU.accentNegativeStrongest}),colorway:"negative",text:"Error loading join link. Click here to try again, or contact support.",onClick:function(){return K({replId:H})}})]}):(0,i.FD)(E.S,{css:P.container,children:[(0,i.FD)(E.S,{css:P.header,children:[(0,i.Y)(L,{}),Z?(0,i.FD)(E.S,{row:!0,gap:4,align:"center",children:[(0,i.Y)(F.A,{color:b.LU.foregroundDimmer}),(0,i.Y)(D.EY,{color:"dimmer",multiline:!1,children:"Loading..."})]}):(0,i.Y)(k.d,{isSelected:!!ea,isDisabled:er,onChange:function(e){er||(e?J():ee())},"aria-labelledby":"link-switch-label"})]}),!Z&&ea?(0,i.FD)(i.FK,{children:[(0,i.FD)(_.ui,{css:P.inviteUrlContainer,children:[(0,i.Y)(x.pd,{type:"url",readOnly:!0,disabled:!0,value:er?"Loading...":ea,css:P.input}),(0,i.Y)(A.i,{textToCopy:ea,onClick:function(){ea?((0,w.default)(ea),(0,y.u4)(y.AZ.JOIN_LINK_COPIED,{replId:null==et?void 0:et.id,isTeamRepl:ei,source:"replEnvironment"}),W("Link copied")):G("Could not copy link")},tooltipSuccessText:"Copied to clipboard",text:"Copy join link",iconLeft:(0,i.Y)(I.A,{}),css:P.copyToClipboard,colorway:"primary",disabled:er})]}),(0,i.Y)(E.S,{children:(0,i.FD)(D.EY,{color:"dimmer",variant:"small",multiline:!1,children:["Want to revoke access to this link?"," ",(0,i.Y)("a",{css:Y.wp.linkStyle,role:"button",tabIndex:0,onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),er||J())},onClick:function(e){e.preventDefault(),er||J()},children:"Generate a new link"})]})})]}):null]})}},15744:(e,n,t)=>{"use strict";t.d(n,{gu:()=>d,zn:()=>m,ah:()=>h});var r=t(29935),i=t(12694),o=t(82643),a=t(21462),l=t(90629),s=t(49069);function c(){return(c=(0,r._)(function(e,n,t){var r;return(0,o.YH)(this,function(i){switch(i.label){case 0:if(!e.path||"number"!=typeof e.indexStart||"number"!=typeof e.indexEnd||!e.otVersion)return[2];if(t===e.otVersion)return[2,{path:e.path,indexStart:e.indexStart,indexEnd:e.indexEnd,otVersion:e.otVersion}];return[4,n({indexStart:e.indexStart,indexEnd:e.indexEnd,versionFrom:e.otVersion,versionTo:t})];case 1:return r=i.sent(),[2,{path:e.path,indexStart:r.indexStart,indexEnd:r.indexEnd,otVersion:t}]}})})).apply(this,arguments)}var u=t(34834);function d(e){return p.apply(this,arguments)}function p(){return(p=(0,r._)(function(e){var n,t,r,i,a,u,d;return(0,o.YH)(this,function(o){switch(o.label){case 0:if(n=e.anchor,t=e.version,r=e.transformSelection,i=e.content,!n.path)return[2,null];return[4,function(e,n,t){return c.apply(this,arguments)}(n,r,t)];case 1:if(!(a=o.sent()))return[2,null];return d=function(){if(a){var e=a.indexStart,n=a.indexEnd;try{var t=s.EY.of(i.split("\n")),r=t.lineAt(e),o=t.lineAt(n),c=t.sliceString(t.line(Math.max(r.number-2,1)).from,e),u=t.sliceString(n,t.line(Math.min(o.number+2,t.lines)).to);return{precode:c,code:t.sliceString(e,n),postcode:u}}catch(e){l.Cp(e)}}},[2,{anchor:n,newSelection:a,newPosition:u,getHighlight:d,snippet:f(i,a)}]}})})).apply(this,arguments)}var f=function(e,n){var t=s.EY.of(e.split("\n")),r=t.lineAt(n.indexStart).number,i=t.lineAt(n.indexEnd).number,o=[];r===i&&(r=Math.max(1,r-1),i=Math.min(t.lines,i+1));for(var a=r;a<=i;a++)o.push(t.line(a).text);return{startLineNumber:r,lines:o}};function h(e){var n=(0,u.A)().fs,t=(0,a.useRef)(null),r=(0,a.useRef)(null),o=(0,i._)((0,a.useState)(!1),2),l=o[0],s=o[1];return(0,a.useEffect)(function(){if(e){var i=function(){r.current=null,s(!1)},o=n.watchTextFile(e,{onReady:function(e){var n=e.transformSelection;t.current=e.initialContent.toString(),r.current=n,s(!0)},onMoveOrDelete:function(){i()},onError:function(){i()},onChange:function(e){t.current=e.latestContent}});return function(){i(),o()}}},[e,n]),{contentRef:t,transformSelectionRef:r,loadedFile:l}}function m(e){var n=(0,u.A)().fs,t=(0,i._)((0,a.useState)(null),2),r=t[0],o=t[1],s=h(null==e?void 0:e.path),c=s.contentRef,p=s.loadedFile,f=s.transformSelectionRef;return(0,a.useEffect)(function(){(null==e?void 0:e.path)&&p&&f.current&&null!==c.current&&d({anchor:e,version:n.getOTVersion(e.path),transformSelection:f.current,content:c.current}).then(function(e){o(e)}).catch(function(e){o(null),l.Cp(e)})},[n,e,p,f,c]),r}},15804:(e,n,t)=>{"use strict";t.d(n,{k:()=>o});var r=t(21462),i=t(51244);function o(){var e=(0,i.a)();return(0,r.useMemo)(function(){return!e&&function(){if("undefined"==typeof document)return!1;var e=document.createElement("input");return"webkitdirectory"in e||"mozdirectory"in e||"msdirectory"in e||"odirectory"in e||"directory"in e}()},[e])}},16007:(e,n,t)=>{"use strict";t.d(n,{b:()=>l,d:()=>a});var r=t(44370),i=t(81738),o=(0,r.eU)(null);function a(){return(0,i.ob)(o)}function l(){return(0,i.h)(o)}},16542:(e,n,t)=>{"use strict";t.d(n,{Y:()=>h});var r=t(12694),i=t(86105),o=t(88263),a=t(21462),l=t(23099),s=t.n(l),c=t(46603),u=t(36112),d=t(10429),p=t(80797),f=t.n(p);function h(e){var n=e.lines,t=e.maxLines,l=void 0===t?20:t,c=e.animate,u=void 0!==c&&c,p=e.diffMode,h=void 0!==p&&p,m=e.showControls,w=(0,r._)((0,a.useState)(80),2),y=w[0],b=w[1],S=(0,a.useRef)(null);(0,a.useEffect)(function(){S.current&&b(Math.min(Math.floor(S.current.clientWidth/8),100))},[]);var Y=(0,a.useMemo)(function(){return n.length<=8?8:l},[n,l]),A=(0,a.useMemo)(function(){return Array(Y).fill(null).map(function(){return Array(y).fill(null).map(function(){return{char:"\xb7",isText:!1,diffType:"same"}})})},[Y,y]),x=(0,r._)((0,a.useState)(A),2),C=x[0],_=x[1],k=(0,r._)((0,a.useState)(0),2),D=k[0],E=k[1],R=(0,r._)((0,a.useState)(u),2),I=R[0],F=R[1],T=(0,a.useRef)(null),P=(0,a.useRef)(performance.now()),L=(0,a.useRef)(C);(0,a.useEffect)(function(){L.current=C},[C]);var U=(0,a.useCallback)(function(){for(var e=Array(Y).fill(null).map(function(){return Array(y).fill(null).map(function(){return{char:"\xb7",isText:!1,diffType:"same"}})}),t=0;t<Y;t++)!function(t){var r=D-t;if(!(r<0)&&!(r>=n.length)){var o=Y-1-t,a=void 0,l="same";if(h&&"string"!=typeof n[r]){var s=n[r];a=s.content,l=s.type}else a=n[r];var c=a.trimStart(),u=a.length-c.length,d=[];if(u>y)d=Array(y).fill(null).map(function(){return{char:"\xb7",isText:!1,diffType:l}});else{var p=Array(u).fill(null).map(function(){return{char:"\xb7",isText:!1,diffType:l}}),f=c.slice(0,y-u).split("").map(function(e){return{char:e,isText:!0,diffType:l}});for(d=(0,i._)(p).concat((0,i._)(f));d.length<y;)d.push({char:"\xb7",isText:!1,diffType:l})}e[o]=d}}(t);s()(e,L.current)||_(e)},[D,n,h,Y,y]),N=(0,a.useCallback)(function(e){if(e-P.current>=100){var t=D+1;if(t>=n.length)return void F(!1);E(t),P.current=e}T.current=requestAnimationFrame(N)},[D,n.length]);return(0,a.useEffect)(function(){return u&&I&&(T.current=requestAnimationFrame(N)),function(){T.current&&cancelAnimationFrame(T.current)}},[u,N,I]),(0,a.useEffect)(function(){F(u),u||E(Y)},[u,Y]),(0,a.useEffect)(function(){U()},[D,U]),(0,o.FD)(d.S,{innerRef:S,children:[(0,o.Y)("pre",{className:f().textGrid,children:C.map(function(e,n){return(0,o.Y)(g,{line:e,lineIndex:n,numRows:Y},n)})}),void 0!==m&&m?(0,o.Y)(v,{animate:u,isAnimating:I,setTextPosition:E,setIsAnimating:F,lines:n,textPosition:D}):null]})}var m=(0,a.memo)(function(e){var n=e.char,t=e.isText,r=e.diffType,i=e.opacity,l=(0,a.useMemo)(function(){return t?"same"===r?f().textChar:"".concat(f().textChar," ").concat("added"===r?f().textAdded:f().textRemoved):f().dotChar},[t,r]);return(0,o.Y)("span",{className:l,style:{opacity:t?i:.7*i},children:n})}),g=(0,a.memo)(function(e){var n=e.line,t=e.lineIndex,r=e.numRows,i=(0,a.useMemo)(function(){var e=r/2;return .5+.5*(1-Math.abs(t-e)/e)},[t,r]);return(0,o.Y)("div",{className:f().gridLine,children:n.map(function(e,n){return(0,o.Y)(m,{char:e.char,isText:e.isText,diffType:e.diffType,opacity:i},n)})})}),v=(0,a.memo)(function(e){var n=e.animate,t=e.isAnimating,r=e.textPosition,i=e.setTextPosition,l=e.setIsAnimating,s=e.lines,d=(0,a.useCallback)(function(){i(0),l(n)},[n,l,i]),p=(0,a.useCallback)(function(){l(!1),i(function(e){var n=e+1;return n>=s.length?e:n})},[s.length,l,i]),f=(0,a.useCallback)(function(){l(function(e){return!e})},[l]),h=(0,a.useCallback)(function(){l(!1),i(Math.max(0,s.length-1))},[s.length,l,i]),m=r===s.length-1;return(0,o.FD)(u.ui,{row:!0,gap:8,children:[(0,o.Y)(c.$n,{size:"small",onClick:d,text:"Restart"}),m?null:(0,o.Y)(c.$n,{size:"small",onClick:f,text:t?"Pause":"Play"}),t||m?null:(0,o.FD)(o.FK,{children:[(0,o.Y)(c.$n,{size:"small",onClick:p,text:"Step Forward"}),(0,o.Y)(c.$n,{size:"small",onClick:h,text:"Step to End"})]})]})})},16584:(e,n,t)=>{"use strict";t.d(n,{i:()=>i,l:()=>r});var r=t(48521).iB.categorical,i=.0075},16610:(e,n,t)=>{"use strict";t.d(n,{Ln:()=>l,li:()=>a});var r=t(44370),i=t(81738),o=(0,r.eU)(null);function a(){return(0,i.ob)(o)}function l(){return(0,i.h)(o)}},16679:(e,n,t)=>{"use strict";t.d(n,{DJ:()=>_,O3:()=>Y,Ui:()=>k,Ww:()=>b,_x:()=>C,eQ:()=>A,xd:()=>E});var r=t(17844),i=t(93629),o=t(17459),a=t(12694),l=t(88263),s=t(21462),c=t(93369),u=t(19882),d=t(34834),p=t(58370),f=t(65518),h=t(58809),m=t(64583),g=t(49045),v=t(48521),w=t(10429);function y(e){for(var n=1,t=e.buffer.active._buffer.lines._array,r=e.buffer.active.length;r-- >0;){var i=t[r];if(i){for(var o=!1,a=0;a<e.cols;a++)if(0!==i.hasContent(a)){o=!0;break}if(o){n=r+1;break}}}return n}var b=8,S=(0,g.v)(["topOffset"]),Y=S.cssVars,A=S.styleTokens,x=(0,m.x)({wrapper:{display:"grid",gridTemplateColumns:"1fr"},terminal:{gridRow:1,gridColumn:1,position:"sticky",top:A.topOffset,"& .xterm":[v.wp.py(b),v.wp.pl(b),v.wp.height("100%"),v.wp.overflow("hidden")],"& .xterm-viewport":[v.wp.overflow("hidden")]},terminalForHistoricalOutputWrapper:[v.wp.overflow("hidden")]});function C(e){var n=e.autoFocus,t=e.wrapperResizeRef,a=e.xterm,c=e.bufferHeight,u=e.onInput,d=e.setOnMessage,p=e.onResizeTerminal,f=e.children,h=(0,o._)(e,["autoFocus","wrapperResizeRef","xterm","bufferHeight","onInput","setOnMessage","onResizeTerminal","children"]);return(0,s.useEffect)(function(){n&&a&&a.focus()},[a,n]),(0,s.useEffect)(function(){if(a){var e=a.onData(function(e){u&&u(e)}),n=a.onResize(function(){p&&p(a.getSize())});return function(){e.dispose(),n.dispose()}}},[a,u,p]),(0,s.useEffect)(function(){if(a)return d(function(e){return a.write(e)})},[d,a]),(0,l.Y)(w.S,{innerRef:t,children:(0,l.Y)(w.S,(0,i._)((0,r._)({},h),{css:x.wrapper,style:(0,r._)({height:c},h.style),children:f}))})}function _(e){var n=e.xtermRef,t=e.visibleHeight,a=e.maxHeight,s=(0,o._)(e,["xtermRef","visibleHeight","maxHeight"]);return(0,l.Y)(w.S,(0,i._)((0,r._)({innerRef:n,css:x.terminal},s),{style:(0,i._)((0,r._)({},s.style),{height:t,maxHeight:a})}))}function k(e){var n=e.maxHeight,t=e.openPane,r=e.convertEol,i=(0,d.A)().fs,o=(0,s.useCallback)(function(e){return t({type:(0,p.QY)(e),data:e})},[t]),l=(0,s.useCallback)(function(e,n){return t({type:"webview",data:{ports:{type:"local",path:e,port:n}}})},[t]),h=(0,a._)((0,f.A)({autoFit:!1,size:{rows:10},openFile:o,listFiles:i.listFiles,openWebview:l,openPane:t,convertEol:r}),2),m=h[0],g=h[1],v=(0,s.useMemo)(function(){return null==m?void 0:m._term},[m]),w=(0,a._)((0,s.useState)(function(){var e,n,t=null==v?void 0:v._core;return null!=(n=null==t||null==(e=t._renderService)?void 0:e.dimensions.css.cell.height)?n:16}),2),S=w[0],Y=w[1];(0,s.useEffect)(function(){if(v){var e,n=null==v?void 0:v._core,t=null==n||null==(e=n._renderService)?void 0:e.onDimensionsChange(function(e){Y(e.css.cell.height)});return function(){null==t||t.dispose()}}},[v]);var A=(0,s.useMemo)(function(){return Math.floor((n-2*b)/S)},[n,S]),x=(0,a._)((0,s.useState)("normal"),2),C=x[0],_=x[1],k=(0,a._)((0,s.useState)(1),2),D=k[0],E=k[1],R=(0,a._)((0,s.useState)(1),2),I=R[0],F=R[1],T=(0,a._)((0,s.useState)(!1),2),P=T[0],L=T[1],U=(0,c.A)(D),N=(0,c.A)(I),O=(0,c.A)(C);(0,s.useEffect)(function(){if(v){var e=v.buffer.onBufferChange(function(e){_(e.type),"alternate"===e.type&&(E(A),F(A),L(!1))});return function(){e.dispose()}}},[v,A]);var M=(0,s.useCallback)(function(){if(v)if("alternate"===O.current)E(A);else{var e=y(v),n=e>A;F(e),E(Math.min(e,A)),L(n)}},[v,A,O]),B=(0,u.A)(function(e){var n=e.widthChanged;v&&m&&n&&(m.fit(),M())},{type:"debounce",wait:200});(0,s.useEffect)(function(){var e=function(){if(v&&"alternate"!==O.current){var e=y(v),n=Math.min(e,A);e>N.current&&F(e),n>U.current&&E(n),e>A&&L(!0)}};if(v){var n=[v.onLineFeed(e),v.onCursorMove(e)];return function(){n.forEach(function(e){return e.dispose()})}}},[v,U,O,N,A]),(0,s.useEffect)(function(){if(v&&m){var e=m.getSize();e.rows!==A&&v.resize(e.cols,A),M()}},[v,m,A,M]);var H=(0,s.useMemo)(function(){return Math.ceil((Math.min(D,I)+1)*S+2*b)},[D,I,S]),z=(0,s.useMemo)(function(){return Math.ceil(P?(I+1)*S+2*b:H)},[S,P,H,I]);return(0,s.useEffect)(function(){m&&m.fit()},[m,D,I]),{visibleHeight:H,visibleLines:D,bufferHeight:z,bufferLines:I,bufferMode:C,hasScrollback:P,wrapperResizeRef:B,xterm:m,xtermRef:g}}function D(){}function E(e){var n=e.output,t=e.maxHeight,r=k({maxHeight:t,openPane:e.openPane,convertEol:e.convertEol}),i=r.visibleHeight,o=r.bufferHeight,a=r.wrapperResizeRef,c=r.xterm,u=r.xtermRef,d=(0,s.useCallback)(function(e){return c&&(null==c||c.clear(),e(n)),D},[c,n]),p=(0,h.V)();return(0,l.Y)(w.S,{css:x.terminalForHistoricalOutputWrapper,style:{height:i,background:null==p?void 0:p.background},children:(0,l.Y)(C,{onInput:D,xterm:c,wrapperResizeRef:a,bufferHeight:o,setOnMessage:d,onResizeTerminal:D,children:(0,l.Y)(_,{xtermRef:u,visibleHeight:i,maxHeight:t})})})}},16752:(e,n,t)=>{"use strict";t.d(n,{T:()=>o});var r=t(12584);function i(){var e=(0,r._)(["\n  fragment CreateProjectForkRepl on Repl {\n    id\n    publishedAs\n    deployment {\n      id\n      activeRelease {\n        id\n      }\n    }\n  }\n"]);return i=function(){return e},e}var o=(0,t(41114).J1)(i())},16842:(e,n,t)=>{"use strict";t.d(n,{V:()=>f});var r=t(17844),i=t(93629),o=t(88263),a=t(51846),l=t(84550),s=t(64583),c=t(48521),u=t(87523),d=t(70900),p=(0,s.x)({column:[c.wp.px(8),c.wp.py(6),c.wp.textAlign.left,c.wp.align.center,{whiteSpace:"nowrap",wordBreak:"break-word"}],columnSortIcon:[c.wp.px(2)]});function f(e){var n=(0,a.v)(e.style,{cursor:e.allowsSorting?"pointer":"default"});return(0,o.Y)(l.VP,(0,i._)((0,r._)({},e),{css:p.column,style:n,children:function(n){var t=n.allowsSorting,r=n.sortDirection;return(0,o.FD)(o.FK,{children:[e.children,t&&r&&(0,o.Y)("span",{"aria-hidden":"true",css:p.columnSortIcon,children:"ascending"===r?(0,o.Y)(d.A,{}):(0,o.Y)(u.A,{})})]})}}))}},17020:e=>{e.exports={root:"MobileAgentTourNudge_root__nMeVj",mobileQr:"MobileAgentTourNudge_mobileQr__Vu4bv",btnLeft:"MobileAgentTourNudge_btnLeft__NOLhn",btnBonsai:"MobileAgentTourNudge_btnBonsai__g_v15",btnRight:"MobileAgentTourNudge_btnRight__mQWdo"}},17552:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(88263),a=t(71117);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M2.25 8.25h2.325a3.751 3.751 0 0 0 7.35 0h9.825a.75.75 0 0 0 0-1.5h-9.825a3.751 3.751 0 0 0-7.35 0H2.25a.75.75 0 0 0 0 1.5Zm6-3a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5ZM2.25 15.75a.75.75 0 0 0 0 1.5h9.825a3.751 3.751 0 0 0 7.35 0h2.325a.75.75 0 0 0 0-1.5h-2.325a3.751 3.751 0 0 0-7.35 0H2.25Zm11.25.75a2.25 2.25 0 1 1 4.5 0 2.25 2.25 0 0 1-4.5 0Z",clipRule:"evenodd"})}))}},18583:(e,n,t)=>{"use strict";t.d(n,{A:()=>c,T:()=>s});var r=t(12694),i=t(21462),o=t(52340),a=t(7512),l=t(34834),s=".tutorial";function c(){var e=(0,l.A)().fs,n=(0,r._)((0,i.useState)({isLoading:!0,isTutorial:!1}),2),t=n[0],c=n[1];return(0,i.useEffect)(function(){e.watchDir(o.Dl,{onChange:function(e){c({isLoading:!1,isTutorial:e.some(function(e){return e.type===a.pt.Directory&&e.filename===s})})},onMoveOrDelete:function(){c({isLoading:!1,isTutorial:!1})},onError:function(){c({isLoading:!1,isTutorial:!1})}})},[e]),t}},18895:(e,n,t)=>{"use strict";t.d(n,{v:()=>A,A:()=>Y});var r=t(17844),i=t(12694),o=t(96907),a=t.n(o),l=t(67201),s=t(35079),c=t(34626),u=t(17459),d=t(90629),p=t(49381),f=t(40822),h="exit status 1",m=t(29935),g=t(86105),v=t(82643),w=t(10449);function y(){return(y=(0,m._)(function(e){var n,t,r,i,o,a,l;return(0,v.YH)(this,function(s){switch(s.label){case 0:if(t=e.container,0===(r=(0,u._)(e,["container"])).query.trim().length)return[2,b(f.F.EMPTY_QUERY)];if(t.getConnectionState()===w.KN.DISCONNECTED)return[2,b(f.F.CONTAINER_DISCONNECTED)];if(t.getConnectionState()===w.KN.CONNECTING)return[2,b(f.F.CONTAINER_CONNECTING)];return[4,(n=t).exec.apply(n,(0,g._)((0,p.Qq)(r)))];case 1:if(o=(i=s.sent()).output,a=i.error)switch(a){case h:return[2,b(f.F.EMPTY_RESULTS)];case"signal: broken pipe":return[2,b(f.F.PARTIAL_RESULTS)];case"Channel closed":return[2,b(f.F.CHANNEL_CLOSED)];default:return d.Cp(Error("Ripgrep search command failed with error: ".concat(a))),[2,{error:a,data:null}]}if(!(null==o?void 0:o.trim())||!(l=(0,p.xo)()(o))||0===l.filesMap.size)return[2,b(f.F.EMPTY_RESULTS)];return[2,b(l.error,l.filesMap)]}})})).apply(this,arguments)}function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{error:e,data:n}}var S="File Search Used";function Y(e){var n=e.container,t=e.onError,i=e.onUpdate,o=e.onLoadingStateChange,m=e.isStreaming,g=e.trackLatency,v=void 0!==g&&g,w=(0,s.A)({container:n}),y=[],b=(0,l.A)(),Y=Date.now(),A=function(e){i(y=e)};return a()(function(e){var n=(0,l.A)();b=n,Y=Date.now(),t(null),o(!0);var i=!0;if(""===e.query){A([]),o(!1);return}!function(e){var n=e.execer,t=e.onComplete,r=e.onError,i=e.onParse,o=(0,u._)(e,["execer","onComplete","onError","onParse"]);if(0===o.query.length)return t("abort");var a=new TextEncoder,l=(0,p.xo)(),s=0,c=0,m=function(){},g=function(e){r(e),t("error")},v=function(e){if(0===s&&"finished"===e)return void g(f.F.EMPTY_RESULTS);"finished"===e?t(e,{bytes:c}):t(e),m()},w=n.onOutput(function(e){var n=a.encode(e).length;c+=n;var t=l(e);if(t){var r=t.error,o=t.filesMap,u=t.filesMapChanges;r&&g(r),s=o.size,u.forEach(function(e){var n=o.get(e);n&&o.set(e,(0,p.l8)(n))}),i(o,u)}}),y=n.onStderr(function(e){if(e.trim()===h)return g(f.F.EMPTY_RESULTS);g(f.F.INVALID_COMMAND)});m=function(){w(),y()};var b=(0,p.Qq)(o);n.request({args:b,noUserEnv:!0}).then(function(e){if(e.error)return e.error.trim()===h?g(f.F.EMPTY_RESULTS):g(f.F.INVALID_COMMAND);v("finished")}).catch(function(e){return d.Cp(Error("Ripgrep search command failed with error: ".concat(e))),g(f.F.INVALID_COMMAND)})}((0,r._)({execer:w,onComplete:function(r,i){if(b===n){o(!1);var a,l,s,u,d="finished"===r&&i&&i.bytes===p.mj;d&&t(f.F.PARTIAL_RESULTS),v&&c.vF.time("".concat(S," - complete"),Date.now()-Y,{query:e.query,isRegex:e.isRegex,isCaseSensitive:e.isCaseSensitive,hasIncludes:(null!=(s=null==e||null==(a=e.includeGlobs)?void 0:a.length)?s:0)>0,hasExcludes:(null!=(u=null==e||null==(l=e.excludeGlobs)?void 0:l.length)?u:0)>0,latency:Date.now()-Y,isPartialResults:d})}},onError:function(e){b===n&&t(e)},onParse:function(t,r){if(b===n){if(i){if(v){var a,l,s,u;c.vF.time("".concat(S," - first_chunk"),Date.now()-Y,{query:e.query,isRegex:e.isRegex,isCaseSensitive:e.isCaseSensitive,hasIncludes:(null!=(s=null==e||null==(a=e.includeGlobs)?void 0:a.length)?s:0)>0,hasExcludes:(null!=(u=null==e||null==(l=e.excludeGlobs)?void 0:l.length)?u:0)>0})}A((0,p.Nn)([],t,r)),i=!1}else A((0,p.Nn)(y,t,r));m&&o(!1)}},mode:"json",context:0},e))},200)}function A(e){var n=e.container,t=a()(function(e,t,o){(function(e){return y.apply(this,arguments)})((0,r._)({container:n,mode:"json",context:1,isCaseSensitive:!1},e)).then(function(e){var n=e.data?function(e){var n={},t=!0,r=!1,o=void 0;try{for(var a,l=e.entries()[Symbol.iterator]();!(t=(a=l.next()).done);t=!0){var s=(0,i._)(a.value,2),c=s[0],u=s[1];n[c]=u.lines.map(function(e){return{content:e.content,lineNumber:e.lineNumber,matches:e.matches.map(function(e){return{column:e.start,length:e.length}})}}).filter(function(e){return e.matches.length>0})}}catch(e){r=!0,o=e}finally{try{t||null==l.return||l.return()}finally{if(r)throw o}}return n}(e.data):{},r=e.error===f.F.PARTIAL_RESULTS;if(r);else if(e.error)return t({error:e.error,results:null,isPartialResult:r});return t({error:null,results:n,isPartialResult:r})}).catch(o)},200);return function(e){return new Promise(function(n,r){return t(e,n,r)})}}},18942:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(88263),a=t(71117);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M3.25 6A2.75 2.75 0 0 1 6 3.25h12A2.75 2.75 0 0 1 20.75 6v12A2.75 2.75 0 0 1 18 20.75H6A2.75 2.75 0 0 1 3.25 18V6Z",clipRule:"evenodd"})}))}},19144:e=>{e.exports={checkpointOk:"CheckpointCard_checkpointOk__TyU2M",root:"CheckpointCard_root__uJ1Ha",checkpointCard:"CheckpointCard_checkpointCard__sxrnC",line:"CheckpointCard_line__gagLb",inSessionList:"CheckpointCard_inSessionList__ShuIJ",inActiveSessionList:"CheckpointCard_inActiveSessionList__HKKSR","pulse-gradient":"CheckpointCard_pulse-gradient__i_sDc",checkpointFailed:"CheckpointCard_checkpointFailed__JG4mD",statusRow:"CheckpointCard_statusRow__IDaA_",statusIcon:"CheckpointCard_statusIcon__V_9pZ",statusIconReverted:"CheckpointCard_statusIconReverted__8zzvr",statusIconFailed:"CheckpointCard_statusIconFailed__U_uip",costText:"CheckpointCard_costText__MLRxf",buttonRow:"CheckpointCard_buttonRow__wwaMy",button:"CheckpointCard_button__ZC97_",noDescription:"CheckpointCard_noDescription__sMNI8",editableTitle:"CheckpointCard_editableTitle___gTV2",editableTitleInput:"CheckpointCard_editableTitleInput__xCjrs",flexGrowAndShrink:"CheckpointCard_flexGrowAndShrink__cb8t1",screenshotContainer:"CheckpointCard_screenshotContainer__wPfBR",previewOverlay:"CheckpointCard_previewOverlay__UadHr",previewLoading:"CheckpointCard_previewLoading__k12JB",previewIcon:"CheckpointCard_previewIcon__bifBK"}},19279:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(29935),i=t(82643),o=t(39282),a=t(23046);function l(e){var n=e.container,t=e.dotReplit,l=(0,o.F)(null),s=(0,o.F)(null),c=(0,o.F)(null),u=(0,o.F)(null),d=null;function p(){return u.current?Promise.resolve(u.current):new Promise(function(e){var n=u.subscribe(function(t){t&&(n(),e(t))})})}return n.openChannel({service:"toolchain"},function(e){var n=e.channel;u.set(n);var t=n.onCommand(function(e){if(e.toolchainChanged){if(!e.toolchainChanged.configs)throw Error("Expected toolchain changed configs");l.current=e.toolchainChanged.configs}else if(e.nixModulesChanged){if(!e.nixModulesChanged.modules)throw Error("Expected modules changed modules");s.current=e.nixModulesChanged.modules,c.current=e.nixModulesChanged.modulesV2}});return n.request({toolchainGetRequest:{}}).then(function(e){var n;l.current=(null==(n=e.toolchainGetResponse)?void 0:n.configs)||null}),n.request({nixModulesGetRequest:{}}).then(function(e){var n;s.current=(null==(n=e.nixModulesGetResponse)?void 0:n.modules)||null}),n.request({nixModuleConfigGetRequest:{}}).then(function(e){var n;c.current=(null==(n=e.nixModuleConfigGetResponse)?void 0:n.modules)||null}),function(){t()}}),{configs:l,modules:s,moduleConfig:c,getConfigs:function(){return l.current?Promise.resolve(l.current):new Promise(function(e){var n=l.subscribe(function(t){if(n(),null===t)throw Error("Returned toolchain config should not be null");e(t)})})},getRegistry:function(){return(0,r._)(function(){return(0,i.YH)(this,function(e){switch(e.label){case 0:if(d)return[2,d];return[4,p()];case 1:return[4,e.sent().request({nixModulesGetRegistryRequest:{}})];case 2:return[2,d=e.sent().nixModulesGetRegistryResponse||null]}})})()},getModuleConfig:function(){return(0,r._)(function(){return(0,i.YH)(this,function(e){switch(e.label){case 0:return[4,p()];case 1:return[4,e.sent().request({nixModuleConfigGetRequest:{}})];case 2:return[2,e.sent().nixModuleConfigGetResponse||null]}})})()},setModuleConfig:function(e){return(0,r._)(function(){return(0,i.YH)(this,function(n){switch(n.label){case 0:return[4,p()];case 1:return[4,n.sent().request({nixModuleConfigSetRequest:{modules:e}})];case 2:return[2,n.sent().nixModuleConfigSetResponse||null]}})})()},addModule:function(e){return(0,r._)(function(){var n,r,o;return(0,i.YH)(this,function(i){switch(i.label){case 0:return r=[],[4,t.getConfig()];case 1:if((o=i.sent()).error&&o.error!==a.DO.NotFound)throw Error("Failed to read .replit"+o.error);if(-1!==(r=(null==(n=o.config)?void 0:n.modules)||[]).indexOf(e))return[3,3];return r.push(e),[4,t.updateDotReplit([{op:"add",path:"modules",value:JSON.stringify(r)}])];case 2:i.sent(),i.label=3;case 3:return[2]}})})()},removeModule:function(e){return(0,r._)(function(){var n,r,o,l;return(0,i.YH)(this,function(i){switch(i.label){case 0:return r=[],[4,t.getConfig()];case 1:if((o=i.sent()).error&&o.error!==a.DO.NotFound)throw Error("Failed to read .replit"+o.error);if((l=(r=(null==(n=o.config)?void 0:n.modules)||[]).filter(function(n){if(e===n)return!1;var t=n.match(/^(.+)\.nix$/);return(t&&t[1])!==e})).length===r.length)return[2];return[4,t.updateDotReplit([{op:"add",path:"modules",value:JSON.stringify(l)}])];case 2:return i.sent(),[2]}})})()},upgradeModule:function(e,n){return(0,r._)(function(){var r,o,l;return(0,i.YH)(this,function(i){switch(i.label){case 0:return[4,t.getConfig()];case 1:if((o=i.sent()).error&&o.error!==a.DO.NotFound)throw Error("Failed to read .replit"+o.error);return l=((null==(r=o.config)?void 0:r.modules)||[]).map(function(t){return e===t?n:t}),[4,t.updateDotReplit([{op:"add",path:"modules",value:JSON.stringify(l)}])];case 2:return i.sent(),[2]}})})()},buildModules:function(){var e=this;return(0,r._)(function(){var n;return(0,i.YH)(this,function(t){switch(t.label){case 0:return[4,p()];case 1:return n=t.sent(),[2,new Promise(function(t){var r=e.configs.subscribe(function(e){e&&(r(),t(void 0))});n.send({nixModulesBuildRequest:{}})})]}})})()}}}},19563:(e,n,t)=>{"use strict";t.d(n,{A:()=>p});var r=t(88263),i=t(45015),o=t(74367),a=t(45263),l=t(64583),s=t(29e3),c=t(48521),u=t(10429),d=(0,l.x)({container:[c.wp.position.relative],loadingGeneratedIcon:[s.S.foregroundPulse(a.LU.blurpleDimmest,a.LU.blurpleDefault),c.wp.borderRadius()]});function p(e){var n=e.replId,t=e.replIconUrl,a=e.size,l=(0,o.b)({replId:n,replIconUrl:t}),s=l.loading,c=l.generatedIconUrl;return(0,r.Y)(u.S,{css:d.container,children:(0,r.Y)(u.S,{css:s&&d.loadingGeneratedIcon,children:(0,r.Y)(i.Ay,{iconUrl:c||t,size:void 0===a?20:a,alt:""})})})}},19638:(e,n,t)=>{"use strict";t.d(n,{Ay:()=>v,fq:()=>y,pi:()=>m});var r=t(12694),i=t(88263),o=t(21462),a=t(48875),l=t(20828),s=t(13968),c=t(11165),u=t(64583),d=t(48521),p=t(69938),f=t(77089),h=t(76126),m=[{value:"spaces",title:"spaces"},{value:"tabs",title:"tabs"}],g=(0,u.x)({sizeInput:[d.wp.py(6),d.wp.flex.growAndShrink(0),{border:"none"}]});function v(){var e=(0,l.g)("indentDetection","indentFormatPastes","indentIsSpaces","indentSize"),n=e.preferences,t=e.update;return(0,i.FD)(i.FK,{children:[(0,i.Y)(s.n,{setting:a.KY.indentationDetection,currentValue:n.indentDetection,update:t}),(0,i.Y)(p.a,{}),(0,i.Y)(s.n,{setting:a.KY.indentFormatPastes,currentValue:n.indentFormatPastes,update:t}),(0,i.Y)(p.a,{}),(0,i.Y)(s.n,{setting:a.KY.indentIsSpaces,currentValue:n.indentIsSpaces,update:t}),(0,i.Y)(p.a,{}),(0,i.Y)(c.w,{id:"indentSize",title:(0,i.FD)(i.FK,{children:[(0,i.Y)(h.EY,{multiline:!1,children:"Indentation Size"}),(0,i.Y)(h.EY,{variant:"small",color:"dimmest",children:"The number of columns taken up by an indentation level."})]}),children:(0,i.Y)(y,{css:g.sizeInput,size:n.indentSize,onChange:function(e){t({indentSize:e})}})})]})}function w(e){return null==e||("string"==typeof e&&(e=parseInt(e,10)),isNaN(e))?2:(Number.isInteger(e)||(e=Math.round(e)),e<1)?1:e>16?16:e}function y(e){var n=e.size,t=e.onChange,a=e.className,l=(0,r._)((0,o.useState)(null),2),s=l[0],c=l[1],u=null!==s?s:n.toString(),d=""===u?"6ch":u.length+5.5+"ch";return(0,i.Y)(f.pd,{type:"number",style:{width:d},className:a,min:1,max:16,value:u,onBlur:function(){return c(null)},onChange:function(e){var n=e.target.value.trim(),r=e.target.valueAsNumber;if(""===n||isNaN(r))return void c(n);e.target.validity.valid?(c(null),t(w(r))):(c(n),""===n||isNaN(parseInt(n,10))||t(w(n)))}})}},19732:(e,n,t)=>{"use strict";t.d(n,{A:()=>o});var r=t(22531),i=t(29760);function o(e,n,t){t&&i.A(e,n),n&&(void 0===n?"undefined":(0,r._)(n))==="object"?(n.skipOverflowHiddenElements=!0,i.A(e,n)):i.A(e,{skipOverflowHiddenElements:!0})}},19906:(e,n,t)=>{"use strict";t.d(n,{A:()=>U});var r=t(29935),i=t(12694),o=t(56902),a=t(86105),l=t(82643),s=t(88263),c=t(21462),u=t(17844),d=t(12584),p=t(41114),f=t(86997);function h(){var e=(0,d._)(["\n  query BSODComponent {\n    currentUser {\n      id\n      username\n      image\n      isStaff: hasRole(role: REPLIT_STAFF)\n      isAdmin: hasRole(role: ADMIN)\n    }\n  }\n"]);return h=function(){return e},e}var m={},g=(0,p.J1)(h()),v=t(50964),w=t(3218),y=t(79209),b=t(64583),S=t(48521),Y=t(13340),A=t(46603),x=t(49150),C=t(54087),_=t(76126),k=t(10429),D=t(18870),E=t(69258),R=(0,y.AH)({".sentry-error-embed-wrapper":{zIndex:"".concat(S.U3," !important")}}),I=(0,b.x)({errorStack:[S.wp.p(16),S.wp.width("100%"),S.wp.backgroundColor.backgroundHigher,S.wp.borderRadius(8),S.wp.overflowY("hidden"),S.wp.font.code,S.wp.fontSize(12),{whiteSpace:"pre"}],userAndErrorIdContainer:[S.wp.width("100%"),S.wp.backgroundColor.backgroundHigher,S.wp.borderRadius(8)],error:[S.wp.font.code]}),F=/at (.+) \((https:\/\/.+\.js):(\d+):(\d+)\)/,T=/at (https:\/\/.+\.js):(\d+):(\d+)/;function P(){return(P=(0,r._)(function(e){var n,s,c,u,d,p,f,h;function m(){return(m=(0,r._)(function(e){var t,r,i;return(0,l.YH)(this,function(o){switch(o.label){case 0:if(t=n.get(e))return[2,t];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,fetch(e).then(function(e){return e.json()})];case 2:return r=o.sent(),i=new s.SourceMapConsumer(r),n.set(e,i),[2,i];case 3:return o.sent(),[2,null];case 4:return[2]}})})).apply(this,arguments)}return(0,l.YH)(this,function(g){switch(g.label){case 0:n=new Map,g.label=1;case 1:return g.trys.push([1,3,,4]),[4,t.e(3248).then(t.t.bind(t,33248,19))];case 2:return s=g.sent(),[3,4];case 3:throw g.sent(),Error("source-map not available");case 4:var v;if(!(c=e.stack))throw Error("expected error.stack to be defined");return u=c.split("\n").map(function(e){return e.trim()}).filter(function(e){return!!e}),p=(d=(0,o._)(u))[0],[4,Promise.all(d.slice(1).map((v=(0,r._)(function(e){var n,t,r,o,a,s,c,u,d,p;return(0,l.YH)(this,function(l){switch(l.label){case 0:if(F.test(e)){if(!(a=F.exec(e)))throw Error("expected result");t=(s=(0,i._)(a.slice(2),3))[0],r=s[1],o=s[2]}else{if(!T.test(e))return[2,e];if(!(c=T.exec(e)))throw Error("expected result");t=(u=(0,i._)(c.slice(1),3))[0],r=u[1],o=u[2]}return[4,function(e){return m.apply(this,arguments)}("".concat(t,".map"))];case 1:if(!(d=l.sent()))return[2,"    ".concat(e)];if(p=d.originalPositionFor({line:Number(r),column:Number(o)}),n)return[2,"    at ".concat(p.name," (").concat(p.source,":").concat(p.line,":").concat(p.column,")")];return[2,"    at ".concat(p.source,":").concat(p.line,":").concat(p.column)]}})}),function(e){return v.apply(this,arguments)})))];case 5:return f=g.sent(),Object.assign(h=Error(),{name:e.name,stack:[p].concat((0,a._)(f)).join("\n"),message:e.message},e),[2,h]}})})).apply(this,arguments)}var L=function(e){var n=e.bsod,t=(0,i._)((0,c.useState)(null),2),o=t[0],a=t[1];(0,c.useEffect)(function(){(0,r._)(function(){return(0,l.YH)(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,function(e){return P.apply(this,arguments)}(n.error)];case 1:return a(e.sent()),[3,3];case 2:return e.sent(),[2];case 3:return[2]}})})()},[n.error]);var u=(0,c.useMemo)(function(){var e,t,r,i;return o?null!=(r=null==(t=o.stack)?void 0:t.split("\n"))?r:[]:null!=(i=null==(e=n.error.stack)?void 0:e.split("\n"))?i:[]},[o,n.error.stack]);return(0,s.FD)("div",{css:I.errorStack,children:[(0,s.FD)("div",{children:["Origin: ",n.origin]}),null==u?void 0:u.map(function(e,n){var t=e.replace("webpack-internal:///./",""),r=t.includes("node_modules");return(0,s.Y)("div",{css:r&&S.wp.color.foregroundDimmest,children:t},n)})]})};let U=function(){var e,n,t,r,o=(0,i._)((0,w.eY)(),1)[0],a=(e={skip:!o},n=(0,u._)({},m,e),f.I(g,n)),l=a.data,c=a.loading,d=(0,v.i)().isOperational;if((0,w.ZM)(),!o)return null;var p=(null==l||null==(t=l.currentUser)?void 0:t.isStaff)||(null==l||null==(r=l.currentUser)?void 0:r.isAdmin);return(0,s.FD)(x.a,{isOpen:!0,preventClose:!0,onRequestClose:function(){},maxWidth:872,children:[(0,s.FD)(k.S,{gap:16,align:"center",children:[(0,s.Y)(_.EY,{variant:"headerDefault",children:"Your app is having a bit of trouble"}),(0,s.Y)(k.S,{row:!0,gap:8,align:"center",children:(0,s.Y)(C.N,{colorway:d?"positive":"negative",icon:d?(0,s.Y)(D.A,{}):(0,s.Y)(E.A,{}),text:(0,s.FD)(_.EY,{children:["Replit status:"," ",(0,s.Y)("a",{href:"https://status.replit.com",target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"underline",color:"inherit"},children:d?"operational":"experiencing issues"})]})})}),(0,s.Y)(_.EY,{variant:"text",multiline:!0,children:"The issue has been logged and the Replit team will look into it. Try reloading the page to get back to building."}),(0,s.FD)(k.S,{gap:16,css:I.userAndErrorIdContainer,p:16,children:[!c&&(null==l?void 0:l.currentUser)?(0,s.FD)(k.S,{row:!0,gap:16,align:"center",children:[(0,s.Y)(Y.e,{src:l.currentUser.image,username:l.currentUser.username,size:48}),(0,s.Y)(_.EY,{variant:"text",multiline:!1,children:l.currentUser.username})]}):null,(0,s.FD)("div",{css:I.error,children:["Error: ",o.eventId]})]}),p?(0,s.Y)(L,{bsod:o}):null,(0,s.Y)(A.$n,{onClick:function(){return window.location.reload()},colorway:"primary",stretch:!0,text:"Reload"}),!1]}),(0,s.Y)(y.mL,{styles:[R]})]})}},20041:(e,n,t)=>{"use strict";t.d(n,{A:()=>k});var r=t(29935),i=t(12694),o=t(82643),a=t(88263),l=t(21462),s=t(64607),c=t(17844),u=t(12584),d=t(41114),p=t(51026);function f(){var e=(0,u._)(["\n  query GitUserImageByUsername($username: String!) {\n    userByUsername(username: $username) {\n      id\n      image\n    }\n  }\n"]);return f=function(){return e},e}var h={},m=(0,d.J1)(f()),g=t(21303),v=t(41739),w=t(45263),y=t(64583),b=t(48521),S=t(13340),Y=t(76126),A=t(59172),x=t(10429),C=t(30354),_=(0,y.x)({gitUserContainer:[b.wp.flex.row],gitUserInnerContainer:[b.wp.align.center,b.wp.flex.row,{"& > :not(:first-child)":{marginLeft:w.LU.space4}}],gitUserInnerContainerFlipped:[b.wp.align.center,b.wp.flex.rowReverse,{"& > :not(:last-child)":{marginLeft:w.LU.space4}}],alignCenter:[b.wp.align.center]});function k(e){var n=e.name,t=e.email,r=e.allowPlaceholderAvatar,i=void 0!==r&&r,o=e.color,l=void 0===o?"default":o,s=e.small,c=void 0!==s&&s,u=e.flip,d=void 0!==u&&u,p=e.placement,f=e.showTooltip;return void 0===f||f?(0,a.Y)(x.S,{css:_.gitUserContainer,children:(0,a.Y)(A.m_,{placement:void 0===p?"bottom":p,tooltip:(0,a.Y)(Y.EY,{children:t}),children:(0,a.FD)(x.S,{css:d?_.gitUserInnerContainerFlipped:_.gitUserInnerContainer,children:[(0,a.Y)(D,{email:t,name:n,enablePlaceholder:i,small:c}),(0,a.Y)(Y.EY,{multiline:!1,color:l,variant:c?"small":"text",children:n})]})})}):(0,a.Y)(x.S,{css:_.gitUserContainer,children:(0,a.FD)(x.S,{css:d?_.gitUserInnerContainerFlipped:_.gitUserInnerContainer,children:[(0,a.Y)(D,{email:t,name:n,enablePlaceholder:i,small:c}),(0,a.Y)(Y.EY,{multiline:!1,color:l,variant:c?"small":"text",children:n})]})})}function D(e){var n,t,u=e.name,d=e.email,f=e.enablePlaceholder,w=void 0!==f&&f,y=e.small,b=void 0!==y&&y,Y=(0,i._)((n={initialFetchPolicy:"cache-and-network",nextFetchPolicy:"cache-first",ssr:!1},t=(0,c._)({},h,n),p._(m,t)),1)[0],A=(0,i._)((0,l.useState)(null),2),x=A[0],k=A[1];return(0,l.useEffect)(function(){var e;(e=(0,r._)(function(){var e,n,t,r,a,l,c,u,p,f;return(0,o.YH)(this,function(o){switch(o.label){case 0:if(!d.endsWith("@".concat(v.D)))return[3,1];return e=d.split("@")[0],(n=(0,i._)(e.split("+"),2))[0],t=n[1],k((0,g.d3)("https://github.com/".concat(t,".png"))),[3,4];case 1:if(!d.endsWith("@".concat(v.O)))return[3,3];return l=d.split("@")[0],(c=(0,i._)(l.split("-"),2))[0],[4,Y({variables:{username:c[1]}})];case 2:return(u=null==(a=o.sent().data)||null==(r=a.userByUsername)?void 0:r.image)&&k(u),[3,4];case 3:p=(0,s.Fx)(d),(f=new URL("https://gravatar.com/avatar/".concat(p))).searchParams.append("d","404"),k(f.toString()),o.label=4;case 4:return[2]}})}),function(){return e.apply(this,arguments)})()},[d,Y]),(0,l.useMemo)(function(){var e=b?12:16;return null===x?w?(0,a.Y)(C.A,{css:_.alignCenter,size:e}):null:(0,a.Y)(S.e,{css:_.alignCenter,username:u,src:x,onError:function(){return k(null)},size:e})},[x,w,b,u])}},20084:(e,n,t)=>{"use strict";t.d(n,{B:()=>ns,a:()=>nu});var r,i=t(29935),o=t(82643),a=t(88263),l=t(21462),s=t(79730),c=t(22761),u=t(54319),d=t(53231),p=t(6598),f=t(34834),h=t(92985),m=t(12694),g=t(69665),v=t(12930),w=t(19882),y=t(75501),b=t(84788),S=t(37427),Y=t(52017),A=t(2415),x=t(14893),C=t(64583),_=t(46603),k=t(69938),D=t(38292),E=t(76126),R=t(10429),I=t(77964),F=t(19465),T=(0,C.x)({emptyStateWrapper:[{lineHeight:"32px"}]});function P(e){var n,t=e.openPane,r=(0,x.g3)(),i=(0,x.oh)(),o=!!(null==r?void 0:r.workflowId),l=function(){if(null==r?void 0:r.run){r.run(S.QG.RUN_BUTTON_CLICKED),(0,d.u4)(d.AZ.WORKFLOW_RAN,{source:"console"});return}};return i?(0,a.Y)(R.S,{css:T.emptyStateWrapper,p:8,children:"The system is starting up"}):(0,a.FD)(R.S,{p:8,gap:8,children:[(0,a.Y)(E.EY,{children:"Results of your code will appear here when you run"}),(0,a.Y)(k.a,{}),(0,a.FD)(R.S,{pt:4,pb:8,gap:6,align:"start",children:[(0,a.Y)(E.EY,{variant:"small",color:"dimmer",children:"Default"}),(0,a.Y)(_.$n,{size:"small",text:null!=(n=null==r?void 0:r.workflowId)?n:Y.Ov,iconLeft:(0,a.Y)(I.A,{}),colorway:"positive",onClick:function(){(0,d.u4)(d.AZ.RUN_BUTTON_CLICKED,{source:"emptyConsole",runner:o?"workflows":"pid1"}),l()}})]}),(0,a.Y)(k.a,{}),(0,a.FD)(R.S,{gap:6,children:[(0,a.FD)(R.S,{row:!0,gap:4,align:"center",children:[(0,a.Y)(E.EY,{variant:"small",color:"dimmer",children:"Workflows"}),(0,a.Y)(D.K0,{alt:"Configure",onClick:function(){t({type:"workflows"})},children:(0,a.Y)(F.A,{size:12})})]}),(0,a.Y)(A.O,{})]})]})}var L=t(48578),U=t(46434),N=t(83846),O=t(17844),M=t(93629),B=t(94376),H=t(42377),z=t(16564),W=t(39101),G=t(34626),V=t(65104),j=t(83735),Z=t(74093),q=t(71380),K=t(16679),$=t(36899),J=t(31258),Q=t(64870),X=t(9969),ee=t(59172);function en(e){var n,t,r,i,o,s,c=e.startTime,u=e.endTime,d=(t=!u,i=(r=(0,m._)((0,l.useState)(function(){return Date.now()}),2))[0],o=r[1],(0,l.useEffect)(function(){if(t){var e=setInterval(function(){o(Date.now())},100);return function(){clearInterval(e)}}},[t]),i);c&&u?s=u-c:u||(s=d-c);var p=s?(0,a.Y)(ee.m_,{tooltip:"".concat(Math.round(s).toLocaleString(),"ms"),children:(n=s)<1e3?"".concat(Math.floor(n),"ms"):n<6e4?"".concat(Math.floor(n/1e3),"s"):"".concat(Math.floor(n/6e4),"m")}):null,f=(0,a.Y)(X.Dc,{live:!0,date:c,textVariant:"small",textColor:"dimmer",textTransform:"first-letter-capitalized"});return(0,a.Y)(a.FK,{children:p?(0,a.FD)(a.FK,{children:[p,et,f]}):f})}var et="\xa0\xa0",er=t(45263),ei=t(48521),eo=t(11882),ea=t(18870),el=t(87523),es=t(84331),ec=t(17893),eu=t(42306),ed=t(1926),ep=t(69258);function ef(e){return e&&0!==e.length?e[0].toUpperCase()+e.substring(1).toLowerCase():""}var eh=(0,C.x)({outputBlockMetadataWrapper:[{containerType:"size"},ei.wp.pl(4),ei.wp.pr(8),ei.wp.rowWithGap(4),ei.wp.align.center,ei.wp.justify.spaceBetween,ei.wp.height(28),ei.wp.backgroundColor.backgroundDefault,ei.wp.border({direction:"bottom",width:1,style:"solid",color:er.LU.backgroundHigher}),ei.wp.position.sticky,ei.wp.top(0),ei.wp.zIndex(1)],outputBlockMetadataWrapperLeft:[ei.wp.flex.shrink(1)],outputBlockMetadataWrapperRight:[],outputMetadataTooltip:[],executionPill:[ei.wp.flex.shrink(0),ei.wp.display.flex,{"@container (max-width: 120px)":[ei.wp.display.none]}],lastLineTextWrapper:[ei.wp.flex.shrink(1)],lastLineText:[ei.wp.display.block,ei.wp.maxWidth("100%"),ei.wp.overflow("hidden"),ei.wp.font.code,ei.wp.flex.shrink(1),{textOverflow:"ellipsis",whiteSpace:"nowrap"}],askAIButton:[ei.wp.display.flex,ei.wp.flex.row,ei.wp.align.center,ei.wp.m(0),{"@container (max-width: 120px)":[ei.wp.display.none]}],aiButtonWithoutPorts:[{"@container (max-width: 320px)":{padding:"0 4px","& > span":[ei.wp.display.none]}}],aiButtonWithPorts:[{"@container (max-width: 420px)":{padding:"0 4px","& > span":[ei.wp.display.none]}}],dateText:[ei.wp.flex.row,ei.wp.align.center,ei.wp.textAlign.right,ei.wp.flex.shrink(1),{marginLeft:"auto",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}],dateContainer:[ei.wp.overflow("hidden"),ei.wp.width(155),ei.wp.flex.shrink(0),{"@container (max-width: 480px)":[ei.wp.display.none]}],verticalDivider:[ei.wp.mx(6),{width:1,height:28,background:er.LU.backgroundHigher}],portInfoDomain:[ei.wp.display.flex,ei.wp.flex.row,ei.wp.align.center,ei.wp.m(0),{"@container (max-width: 400px)":ei.wp.display.none}],portInfoPorts:[ei.wp.display.flex,ei.wp.flex.row,ei.wp.align.center,ei.wp.m(0),{"@container (max-width: 320px)":ei.wp.display.none}],portTooltipHeader:[ei.wp.color.foregroundDimmer,ei.wp.fontWeight.normal,ei.wp.px(2),ei.wp.pb(2)],portTooltipColumnLeft:[ei.wp.textAlign.right],portTooltipColumnMiddle:[ei.wp.textAlign.center,ei.wp.px(4)],portInfoText:[ei.wp.mr(0)]}),em=[eh.askAIButton,eh.aiButtonWithoutPorts],eg=[eh.askAIButton,eh.aiButtonWithPorts],ev=(r={},(0,N._)(r,S._B.DEBUGGER,"debugger"),(0,N._)(r,S._B.PACKAGER,"packager"),(0,N._)(r,S._B.UNIT_TEST,"tests"),(0,N._)(r,S._B.EXECUTION,"run"),(0,N._)(r,S._B.PORT_INFO,"port"),(0,N._)(r,S._B.FORMATTER,"formatter"),(0,N._)(r,S._B.SAVE,"save"),r);function ew(e){var n=e.onClick,t=e.showingPorts;return(0,a.FD)(R.S,{css:t?eg:em,children:[(0,a.Y)(E.EY,{color:"dimmer",children:(0,a.Y)(_.$n,{size:"small",variant:"underlinedOnHover",iconLeft:(0,a.Y)(ed.A,{}),text:"Ask ".concat(u.BP),onClick:void 0===n?function(){}:n})}),(0,a.Y)(R.S,{css:eh.verticalDivider})]})}function ey(e){var n=e.openedPorts;return(0,a.Y)(R.S,{children:(0,a.FD)("table",{children:[(0,a.FD)("tr",{children:[(0,a.Y)("th",{css:eh.portTooltipHeader,children:"Internal"}),(0,a.Y)("th",{}),(0,a.Y)("th",{css:eh.portTooltipHeader,children:"External"})]}),(0,a.Y)("tbody",{children:n.map(function(e){var n=e.configuration,t=!0,r=null;switch(n.type){case Q.gH.FORWARDED:t=!0,r=":".concat(n.externalPort);break;case Q.gH.INTERNAL_ONLY:t=!1,r=null;break;case Q.gH.NO_MORE_EXTERNAL_PORTS_AVAILABLE:case Q.gH.MISCONFIGURED:case Q.gH.CONFIG_MISSING:t=!0,r=(0,a.Y)(ep.A,{})}return(0,a.FD)("tr",{children:[(0,a.FD)("td",{css:eh.portTooltipColumnLeft,children:[":",n.localPort]}),(0,a.Y)("td",{css:eh.portTooltipColumnMiddle,children:t?"":null}),(0,a.Y)("td",{children:r})]},n.localPort)})})]})})}function eb(e){var n=e.openPane,t=e.openedPorts,r=void 0!==t&&t.length>0,i=r?"{...}.replit.dev":"",o=(0,l.useMemo)(function(){return r?1===t.length?":".concat(t[0].configuration.localPort):"".concat(t.length," ").concat((0,J.A)("port",t.length)):""},[r,t]),s=(0,l.useCallback)(function(){n({type:"webview",data:{ports:r?{type:"local",port:t[0].configuration.localPort}:void 0}},!0)},[r,n,t]),c=(0,l.useCallback)(function(){n({type:"networking"},!0)},[n]);return r?(0,a.FD)(a.FK,{children:[(0,a.FD)(R.S,{css:eh.portInfoDomain,children:[(0,a.Y)(E.EY,{color:"dimmer",css:eh.portInfoText,children:(0,a.Y)(ee.m_,{tooltip:"Open Preview",children:(0,a.Y)(_.$n,{size:"small",variant:"underlinedOnHover",text:i,onClick:s})})}),(0,a.Y)(R.S,{css:eh.verticalDivider})]}),(0,a.FD)(R.S,{css:eh.portInfoPorts,children:[(0,a.Y)(E.EY,{color:"dimmer",css:eh.portInfoText,children:(0,a.Y)(ee.m_,{tooltip:(0,a.Y)(ey,{openedPorts:t}),children:(0,a.Y)(_.$n,{size:"small",variant:"underlinedOnHover",iconLeft:(0,a.Y)(ec.A,{color:er.LU.accentPositiveStronger}),text:o,onClick:c})})}),(0,a.Y)(R.S,{css:eh.verticalDivider})]})]}):null}function eS(e){var n=e.isDone,t=e.error,r=e.finishedTooltipText,i=e.executionPillText,o=e.runningTooltipText,a=e.circleColor,l=void 0===a?tokens.accentPositiveDefault:a,s=e.startTime,c=e.endTime,u=e.openPane,d=e.isCollapsed,p=e.setIsCollapsed,f=e.lastMeaningfullLine,h=e.openedPorts,m=e.onAiChatClick;return _jsxs(View,{css:eh.outputBlockMetadataWrapper,onDoubleClick:function(){return p(!d)},children:[_jsxs(View,{css:eh.outputBlockMetadataWrapperLeft,row:!0,gap:4,align:"center",onDoubleClick:function(e){return e.stopPropagation()},children:[_jsx(IconButton,{alt:d?"Expand":"Collapse",onClick:function(){return p(!d)},children:d?_jsx(ChevronRight,{}):_jsx(ChevronDown,{})}),_jsx(Pill,{color:"grey",text:ef(i),css:eh.executionPill}),_jsx(View,{css:eh.lastLineTextWrapper,children:d?_jsx(Text,{css:eh.lastLineText,variant:"small",children:f}):null})]}),_jsxs(View,{row:!0,gap:4,align:"center",onDoubleClick:function(e){return e.stopPropagation()},children:[_jsx(ew,{showingPorts:!!h&&h.length>0,onClick:m}),_jsx(eb,{openPane:u,openedPorts:h}),_jsxs(View,{css:eh.dateContainer,row:!0,justify:"space-between",children:[_jsx(Text,{color:"dimmer",variant:"small",css:eh.dateText,children:_jsx(OutputsTimeInfo,{startTime:s,endTime:c})}),_jsx(View,{css:eh.verticalDivider})]}),_jsx(View,{pl:4,pr:4,children:n?_jsx(Tooltip,{tooltip:r,children:void 0!==t?_jsx(WarningIcon,{}):_jsx(CheckIcon,{})}):_jsx(Tooltip,{tooltip:void 0===o?"Running...":o,children:_jsx(CircleFilledIcon,{color:l})})})]})]})}function eY(e){var n=_sliced_to_array(useState(""),2),t=n[0],r=n[1];return useEffect(function(){return e(function(e){var n,t=null==(n=stripAnsi(e).split("\n").reverse().find(function(e){return e.trim().length>0}))?void 0:n.trim();t&&r(t)})}),t}var eA=t(29e3),ex=(0,C.x)({terminalLoadingLine:[ei.wp.borderRadius(2),eA.S.foregroundPulse(),ei.wp.height(16),ei.wp.mb(4)]});function eC(e){var n=e.targetHeight,t=Math.min(Math.floor((n-8)/20),4),r=(0,l.useMemo)(function(){return Array.from({length:t}).map(function(e,n){return(0,a.Y)(R.S,{css:ex.terminalLoadingLine,style:{width:100*Math.random()+"%"}},n)})},[t]);return(0,a.Y)(R.S,{p:8,style:{height:n+"px"},children:(0,a.Y)(R.S,{style:{position:"sticky",top:36},children:r})})}var e_=t(54240),ek=t(25243),eD=t(2560),eE=t(53876),eR=t(48314),eI=t(41852),eF=t(58809),eT=t(6678),eP=t(49045),eL=t(2015),eU=t(96211),eN=t(37039),eO=(0,C.x)({button:[ei.wp.textAlign.left]});let eM=function(e){var n=e.onClick;return(0,eU.A)()?(0,a.Y)(eN.d,{text:"Missing required secrets. Click here to add them.",onClick:n,iconRight:(0,a.Y)(F.A,{}),colorway:"warning",css:eO.button}):null};var eB=t(51705),eH=t(84686),ez=t(18942),eW=t(64254).hp,eG=(0,eP.v)(["blockMinHeight","terminalBackgroundColor","previewHeight"]),eV=eG.cssVars,ej=eG.styleTokens,eZ=(0,C.x)({outputBlockMetadataWrapper:[{containerType:"size"},ei.wp.pl(4),ei.wp.pr(8),ei.wp.rowWithGap(4),ei.wp.align.center,ei.wp.justify.spaceBetween,ei.wp.height(28),ei.wp.backgroundColor.backgroundDefault,ei.wp.border({direction:"bottom",width:1,style:"solid",color:er.LU.backgroundHigher}),ei.wp.position.sticky,ei.wp.top(0),ei.wp.zIndex(1)],outputBlockMetadataWrapperLeft:[ei.wp.rowWithGap(4),ei.wp.align.center],outputBlockMetadataWrapperRight:[ei.wp.rowWithGap(4),ei.wp.align.center],taskNamePill:[ei.wp.maxWidth(100),ei.wp.flex.shrink(0),ei.wp.display.flex,{"> span":{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},"@container (max-width: 120px)":[ei.wp.display.none],"&:hover":{maxWidth:"none","> span":{overflow:"visible",textOverflow:"clip"}}}],dateText:[ei.wp.flex.row,ei.wp.align.center,ei.wp.textAlign.right,ei.wp.flex.shrink(1),{marginLeft:"auto",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}],dateContainer:[ei.wp.overflow("hidden"),ei.wp.width(120),ei.wp.flex.shrink(0),{"@container (max-width: 510px)":[ei.wp.display.none]}],outputBlockClosingBorder:[ei.wp.height(1),ei.wp.zIndex(1),ei.wp.border({direction:"bottom",width:1,style:"solid",color:er.LU.backgroundHigher}),{marginTop:-1}],outputBlockTerminalWrapper:[ei.wp.minHeight(ej.blockMinHeight)],terminal:{gridRow:1,gridColumn:1,position:"sticky",top:K.eQ.topOffset,"& .xterm":[ei.wp.py(K.Ww),ei.wp.pl(K.Ww),ei.wp.height("100%"),ei.wp.overflow("hidden")],"& .xterm-viewport":[ei.wp.overflow("hidden")],"& .xterm-scroll-area":{height:"0px !important"}},errorMessage:[{gridRow:1,gridColumn:1,position:"sticky",top:K.eQ.topOffset},ei.wp.py(K.Ww),ei.wp.pl(K.Ww),ei.wp.height("100%"),ei.wp.overflow("hidden")],searchWidget:{gridRow:1,gridColumn:1,position:"sticky",top:K.eQ.topOffset,height:30,margin:"2px 0 0 auto",zIndex:4},avatarWrapper:[ei.wp.flex.growAndShrink(0),ei.wp.rowWithGap(4),ei.wp.align.center],outputMetadataTooltip:[ei.wp.pl(4),ei.wp.pr(4)],verticalDivider:[ei.wp.mx(6),{width:1,height:28,background:er.LU.backgroundHigher}]});function eq(e){var n=e.isDone,t=e.hasError,r=e.errorMessage,i=e.finishedMessage,o=e.stopTask;return n?(0,a.Y)(ee.m_,{css:eZ.outputMetadataTooltip,tooltip:t?"Error".concat(r?": ".concat(r):""):"Finished".concat(i?": ".concat(i):""),children:t?(0,a.Y)(ep.A,{}):(0,a.Y)(ea.A,{})}):void 0!==o?(0,a.Y)(D.K0,{alt:"Stop",onClick:o,children:(0,a.Y)(ez.A,{color:er.LU.accentPositiveDefault})}):(0,a.Y)(ee.m_,{tooltip:"Running...",children:(0,a.Y)(eu.A,{color:er.LU.accentPositiveDefault})})}function eK(e){var n=e.isCollapsed,t=e.setIsCollapsed,r=e.taskName,i=e.isDone,o=e.hasError,s=e.errorMessage,c=e.startTime,u=e.endTime,d=e.activeUsers,p=e.openPane,f=e.openedPorts,h=e.onAIChatClick,m=e.stopTask,g="packager.installForAll"===r||"packager.installForLanguage"===r,v=(0,l.useCallback)(function(){p({type:"dependencies"})},[p]);return(0,a.FD)(R.S,{css:eZ.outputBlockMetadataWrapper,onDoubleClick:function(){return t(!n)},children:[g?(0,a.FD)(R.S,{css:eZ.outputBlockMetadataWrapperLeft,children:[(0,a.Y)(D.K0,{alt:"Open Packager",onClick:v,children:(0,a.Y)(eH.A,{})}),(0,a.Y)(eo.a,{color:"grey",text:"Packager",css:eZ.taskNamePill})]}):(0,a.FD)(R.S,{css:eZ.outputBlockMetadataWrapperLeft,onDoubleClick:function(e){return e.stopPropagation()},children:[(0,a.Y)(D.K0,{alt:n?"Expand":"Collapse",onClick:function(){return t(!n)},children:n?(0,a.Y)(es.A,{}):(0,a.Y)(el.A,{})}),(0,a.Y)(eo.a,{color:"grey",text:r,css:eZ.taskNamePill})]}),(0,a.FD)(R.S,{css:eZ.outputBlockMetadataWrapperRight,onDoubleClick:function(e){return e.stopPropagation()},children:[(0,a.Y)(ew,{showingPorts:!!f&&f.length>0,onClick:h}),(0,a.Y)(eb,{openPane:p,openedPorts:f}),(0,a.FD)(R.S,{css:eZ.dateContainer,row:!0,justify:"space-between",children:[(0,a.Y)(E.EY,{color:"dimmer",variant:"small",css:eZ.dateText,children:(0,a.Y)(en,{startTime:c,endTime:u})}),(0,a.Y)(R.S,{css:eZ.verticalDivider})]}),d.length>0?(0,a.Y)(R.S,{css:eZ.avatarWrapper,children:d.map(function(e){return(0,a.Y)(eL.A,{user:e,size:16},e.id)})}):null,(0,a.Y)(eq,{isDone:i,stopTask:m,hasError:o,errorMessage:s})]})]})}function e$(){}var eJ={noScroll:!0};function eQ(e){var n,t,r,s,c,u=e.taskIdx,d=e.runId,p=e.currentUserId,f=e.maxHeight,h=e.scrollParent,g=e.scrollPosition,v=e.openPane,w=e.openAIWithMessage,y=(0,K.Ui)({maxHeight:f,openPane:v}),b=y.visibleHeight,S=y.visibleLines,Y=y.bufferHeight,A=y.bufferLines,x=y.wrapperResizeRef,C=y.hasScrollback,_=y.xterm,k=y.xtermRef,D=(0,l.useMemo)(function(){return null==_?void 0:_._term},[_]),E=(0,l.useMemo)(function(){var e,n=null==D?void 0:D._core;return null!=(e=null==n?void 0:n._renderService.dimensions.css.cell)?e:{width:0,height:0}},[D]),I=(0,m._)((0,l.useState)(null),2),F=I[0],T=I[1],P=(0,m._)((0,l.useState)(!1),2),L=P[0],N=P[1],O=(0,l.useRef)(null);(0,l.useEffect)(function(){return function(){null!==O.current&&clearTimeout(O.current)}},[O]),(0,l.useEffect)(function(){if(D){if(g<1||!C)return void D.scrollToLine(0);var e=Y-b,n=A-S;if(e<1)return void D.scrollToLine(0);var t=Math.round(g/e*n);D.scrollToLine(t)}},[Y,A,C,g,D,b,S]);var M=(0,m._)((0,l.useState)(null),2),B=M[0],z=M[1];(0,Z.b)((n=(0,i._)(function(e,n){var t,r,i,a,l,s,c,f,h,m,g;return(0,o.YH)(this,function(o){switch(o.label){case 0:if(t=n.signal,!_||!F)return[2];i=(r=e.workflows.connectToTask.stream({runId:d,taskIdx:u,userId:p,processViewId:"outputs"},{signal:t})).reqWritable,a=r.resReadable,z({onInput:function(e){if(i.isWritable()){var n=new Uint8Array(eW.from(e));i.write({$kind:"stdin",stdin:n})}},onResizeTerminal:function(e){i.isWritable()&&i.write({$kind:"resize",size:e})},onFocus:function(){i.isWritable()&&i.write({$kind:"focused"})},onBlur:function(){i.isWritable()&&i.write({$kind:"blurred"})}}),i.write({$kind:"resize",size:_.getSize()}),l=!1,s=!1,o.label=1;case 1:o.trys.push([1,6,7,12]),f=(0,U._)(a),o.label=2;case 2:return[4,f.next()];case 3:if(!(l=!(h=o.sent()).done))return[3,5];if(!(m=h.value).ok){if("UNEXPECTED_DISCONNECT"===m.payload.code||"CANCEL"===m.payload.code||"NO_MATCHING_TASK_STATE"===m.payload.code)return[3,5];if("TASK_ERROR"===m.payload.code)return G.vF.info("[".concat(m.payload.code,"] ").concat(m.payload.message," in workflow outputs")),[3,4];throw Error("[".concat(m.payload.code,"] ").concat(m.payload.message))}"output"===m.payload.$kind&&F(m.payload.chunk),o.label=4;case 4:return l=!1,[3,2];case 5:return[3,12];case 6:return g=o.sent(),s=!0,c=g,[3,12];case 7:if(o.trys.push([7,,10,11]),!(l&&null!=f.return))return[3,9];return[4,f.return()];case 8:o.sent(),o.label=9;case 9:return[3,11];case 10:if(s)throw c;return[7];case 11:return[7];case 12:return z(null),i.close(),[2]}})}),function(e,t){return n.apply(this,arguments)}),[d,u,F,_,p]);var W=(0,l.useCallback)(function(e){return T(function(){return e}),function(){}},[]),V=(0,m._)((0,l.useState)(!1),2),q=V[0],J=V[1],Q=(0,m._)((0,l.useState)(""),2),X=Q[0],ee=Q[1],en=(0,l.useCallback)(function(e){v({type:"searchReplace",data:{initialQuery:e}},!0)},[v]),et=(0,$.EF)().onContextMenu,er=(0,eD.P)({xterm:_,isOutputsTerminal:!0,openAIWithMessage:w,openShellSearch:function(e){J(!0),ee(e)},openSearchAndReplace:en});(0,eT.Z)({xterm:_,onAskAssistant:function(e){null==w||w((0,H.kq)(e))}});var ei=(0,l.useCallback)(function(){if(D){var e=D.getSelectionPosition();e&&h(e.start.y*E.height-f/2)}},[D,f,h,E.height]);return(0,a.FD)(K._x,{xterm:_,wrapperResizeRef:x,bufferHeight:Y,setOnMessage:W,onInput:null!=(t=null==B?void 0:B.onInput)?t:e$,onResizeTerminal:null!=(r=null==B?void 0:B.onResizeTerminal)?r:e$,onFocus:null!=(s=null==B?void 0:B.onFocus)?s:e$,onBlur:null!=(c=null==B?void 0:B.onBlur)?c:e$,style:{pointerEvents:L?"none":"all"},onWheel:function(){N(!0),O.current&&clearTimeout(O.current),O.current=setTimeout(function(){N(!1)},200)},onKeyDown:function(e){"f"===e.key&&(0,j.T$)(e)&&(J(!0),e.preventDefault())},children:[q?(0,a.Y)(R.S,{css:eZ.searchWidget,children:(0,a.Y)(eE.p,{searchValue:X,setSearchValue:ee,findPrevious:function(e){(null==_?void 0:_.findPrevious(e,eJ))&&ei()},findNext:function(e){(null==_?void 0:_.findNext(e,eJ))&&ei()},exit:function(){return J(!1)}})}):null,(0,a.Y)(K.DJ,{xtermRef:k,visibleHeight:b,maxHeight:f,css:eZ.terminal,onContextMenu:function(e){return et(e,{command:er})}})]})}function eX(e){var n,t=e.runId,r=e.taskIdx,i=e.task,o=e.config,s=e.isCollapsed,c=e.setIsCollapsed,u=e.openPane,d=e.openedPorts,f=e.onAIChatClick,h="ERROR"===i.state||"FAILED"===i.state,m="ERROR"===i.state||"FAILED"===i.state?null==(n=i.result)?void 0:n.message:void 0,g="RUNNING"!==i.state,v=(0,eI.Q4)(),w=(0,l.useMemo)(function(){return i.userIds.map(function(e){return v.find(function(n){return n.id===e})}).filter(Boolean)},[i,v]),y="shell.exec"===o.task&&"args"in o?(0,Y.ZM)(o.args):o.task,b=(0,p.I)(function(e){return function(){e.workflows.stopTask.rpc({runId:t,taskIdx:r})}},[t,r]);return(0,a.Y)(eK,{isCollapsed:s,setIsCollapsed:c,taskName:y,isDone:g,hasError:h,errorMessage:m,startTime:i.startTime,endTime:g?i.endTime:void 0,activeUsers:w,openPane:u,openedPorts:d,stopTask:null!=b?b:void 0,onAIChatClick:f})}function e0(e){var n,t,r,s,c,u,d,f,h,g,v,y,b,Y,A,x,C,_,k,D,E,I,F,T,P,L,z=e.task,G=e.taskIdx,j=e.runId,Z=e.config,$=e.maxHeight,J=e.rootRef,Q=e.currentUser,X=e.ports,ee=e.openAIWithMessage,en=e.openPane,et=e.onDoExposePort,er=e.onDontExposePort,ei=(0,l.useRef)(null),eo=(0,m._)((0,l.useState)(!0),2),ea=eo[0],el=eo[1],es=(0,m._)((0,l.useState)(!1),2),ec=es[0],eu=es[1],ed=(0,m._)((0,l.useState)(0),2),ep=ed[0],ef=ed[1],eh=(0,eF.V)(),em=(0,W.A)(ea,ec?6e4:500),eg=null!=(P=(null==(I=z.metadata)?void 0:I.task)==="shell.exec"&&z.metadata.isInRecoveryMode)&&P,ev=(0,q.LO)(X,(null==(F=z.metadata)?void 0:F.task)==="shell.exec"?null==(T=z.metadata)?void 0:T.cgroupPath:void 0),ew=(0,m._)((0,l.useState)(S.p$.EXPANDED),2),ey=(t=(n={maxHeight:$,visualState:ew[0],onSetVisualState:ew[1]}).visualState,r=n.onSetVisualState,s=n.maxHeight,u=(c=(0,m._)((0,l.useState)(t===S.p$.EXPANDED?0:void 0),2))[0],d=c[1],f=(0,l.useRef)(null),g=(h=(0,m._)((0,l.useState)(t===S.p$.EXPANDED?"expanded":"collapsed"),2))[0],v=h[1],b=(y=(0,m._)((0,l.useState)(t===S.p$.COLLAPSED?0:void 0),2))[0],Y=y[1],A=(0,l.useCallback)(function(e){e&&d(e.getBoundingClientRect().height)},[]),x=(0,w.A)(function(e){var n=e.height;"expanded"===g&&d(n)},{type:"debounce",wait:200}),(0,l.useEffect)(function(){if(f.current)switch(g){case"start-collapsing":v("is-collapsing");break;case"is-collapsing":Y(0);break;case"start-expanding":v("is-expanding");break;case"is-expanding":Y(u);break;case"expanded":Y(void 0)}},[g,u]),C="expanded"!==g&&"is-expanding"!==g,_=(0,l.useCallback)(function(e){r(e?S.p$.COLLAPSED:S.p$.EXPANDED)},[r]),k=(0,l.useRef)(t),(0,l.useEffect)(function(){k.current===S.p$.EXPANDED&&t===S.p$.COLLAPSED&&f.current&&(v("start-collapsing"),Y(Math.min(f.current.getBoundingClientRect().height,s)),v("start-collapsing")),k.current===S.p$.COLLAPSED&&t===S.p$.EXPANDED&&v("start-expanding"),k.current=t},[s,t]),D=(0,l.useCallback)(function(){"is-collapsing"===g&&v("collapsed"),"is-expanding"===g&&v("expanded")},[g]),E=(0,l.useMemo)(function(){return{style:{height:b,transition:"height 120ms ease-out",overflow:"expanded"===g||"start-collapsing"===g?"visible":"hidden"},onTransitionEnd:D}},[b,g,D]),{collapsedStep:g,isCollapsed:C,setIsCollapsed:_,blockWrapperRef:f,blockWrapperProps:E,blockResizeRef:(0,e_.S)([x,A],{breadcrumb:"client/workspace/components/Outputs/useAnimatedBlockCollapsing.tsx:173"}),measuredBlockHeight:u}),eb=ey.collapsedStep,eS=ey.isCollapsed,eY=ey.setIsCollapsed,eA=ey.blockWrapperRef,ex=ey.blockWrapperProps,eD=ey.blockResizeRef,eE=ey.measuredBlockHeight;(0,l.useEffect)(function(){if(J.current){var e,n=J.current,t=function(){var t,r;ef(Math.max(0,n.scrollTop-(null!=(r=null==(t=ei.current)?void 0:t.offsetTop)?r:0))),eu(!0),e&&clearTimeout(e),e=setTimeout(function(){eu(!1)},500)};return n.addEventListener("scroll",t),function(){clearInterval(e),n.removeEventListener("scroll",t)}}},[J,ei]),(0,l.useEffect)(function(){if(ei.current&&J.current)return(0,V.l)(ei.current,function(){return el(!0),function(){el(!1)}},{root:J.current,threshold:0})},[J,ei]);var eR=(0,p.I)(function(e){return(0,i._)(function(){var n,t,r,i,a,l,s,c,u,d;return(0,o.YH)(this,function(o){switch(o.label){case 0:n=e.workflows.readTaskBuffer.subscribe({runId:j,taskIdx:G}).resReadable,t=new Uint8Array([]),r=!1,i=!1,o.label=1;case 1:o.trys.push([1,6,7,12]),l=(0,U._)(n),o.label=2;case 2:return[4,l.next()];case 3:if(!(r=!(s=o.sent()).done))return[3,5];if(!(c=s.value).ok)throw Error(c.payload.code+": "+c.payload.message);"output"===c.payload.$kind&&(t=eW.concat([t,c.payload.chunk])),"finished"===c.payload.$kind&&(u=(0,B.A)(t.toString()),ee((0,H.kq)(u))),o.label=4;case 4:return r=!1,[3,2];case 5:return[3,12];case 6:return d=o.sent(),i=!0,a=d,[3,12];case 7:if(o.trys.push([7,,10,11]),!(r&&null!=l.return))return[3,9];return[4,l.return()];case 8:o.sent(),o.label=9;case 9:return[3,11];case 10:if(i)throw a;return[7];case 11:return[7];case 12:return[2]}})})}),eI=(0,m._)((0,l.useState)(0),2),eT=eI[0],eP=eI[1],eL=(0,w.A)(function(e){var n=e.height;"expanded"===eb&&eP(n)},{type:"debounce",wait:200}),eU=(0,l.useCallback)(function(){en({type:"networking"})},[en]),eN=(0,l.useCallback)(function(e,n){en({type:"webview",data:{ports:{type:"local",path:e,port:n}}})},[en]),eO=(0,l.useCallback)(function(){en({type:"envEditor"})},[en]),eB="FINISHED"===z.state||"FAILED"===z.state,eH=!1;return"collapsed"===eb?eH=!1:(!eB||em)&&(eH=!0),(0,a.FD)(R.S,{innerRef:ei,children:[(0,a.Y)(eX,{runId:j,taskIdx:G,task:z,config:Z,isInRecoveryMode:eg,isCollapsed:eS,setIsCollapsed:eY,openPane:en,openedPorts:ev,onAIChatClick:function(){return null==eR?void 0:eR()}}),(0,a.FD)(R.S,{innerRef:eL,style:{position:"sticky",top:28},children:[(0,a.Y)(eM,{onClick:eO}),(0,a.Y)(ek.yN,{configurations:ev.map(function(e){return e.configuration}),openWebview:function(){eN("/",ev[0].configuration.localPort)},openNetworkingTool:eU,onDontExposePort:function(){1===ev.length&&er(ev[0].configuration.localPort)},onDoExposePort:function(){1===ev.length&&et(ev[0].configuration.localPort)}})]}),(0,a.Y)("div",(0,M._)((0,O._)({ref:eA},ex),{children:(0,a.Y)(R.S,{css:eZ.outputBlockTerminalWrapper,style:(L={},(0,N._)(L,eV.blockMinHeight,eE+"px"),(0,N._)(L,eV.terminalBackgroundColor,null==eh?void 0:eh.background),(0,N._)(L,K.O3.topOffset,28+eT+"px"),L),children:eH?(0,a.Y)(R.S,{innerRef:eD,children:(0,a.Y)(eQ,{taskIdx:G,runId:j,maxHeight:$-28-eT,currentUserId:Q.id,scrollParent:function(e){var n,t,r,i=e+(null!=(r=null==(n=ei.current)?void 0:n.offsetTop)?r:0);null==(t=J.current)||t.scrollTo({top:i})},scrollPosition:ep,openPane:en,openAIWithMessage:ee})}):(0,a.Y)(eC,{targetHeight:null!=eE?eE:0})})})),(0,a.Y)(R.S,{css:eZ.outputBlockClosingBorder})]})}function e1(e){var n,t,r=(0,l.useCallback)(function(){e.openPane({type:"dependencies"})},[e]),i=e.task.metadata;if(((null==i?void 0:i.task)==="packager.installForAll"||(null==i?void 0:i.task)==="packager.installForLanguage")&&(null==i?void 0:i.hasUserFacingOutput)===!0)return(0,a.Y)(e0,(0,O._)({},e));var o="ERROR"===e.task.state||"FAILED"===e.task.state,s="ERROR"===e.task.state||"FAILED"===e.task.state?null==(n=e.task.result)?void 0:n.message:void 0,c="FINISHED"===e.task.state?null==(t=e.task.result)?void 0:t.message:void 0,u="RUNNING"!==e.task.state;return(0,a.FD)(R.S,{children:[(0,a.FD)(R.S,{css:eZ.outputBlockMetadataWrapper,children:[(0,a.FD)(R.S,{css:eZ.outputBlockMetadataWrapperLeft,children:[(0,a.Y)(D.K0,{alt:"Open Packager",onClick:r,children:(0,a.Y)(eH.A,{})}),(0,a.Y)(eo.a,{color:"grey",text:"Packager",css:eZ.taskNamePill})]}),(0,a.FD)(R.S,{css:eZ.outputBlockMetadataWrapperRight,children:[(0,a.Y)(E.EY,{color:"dimmer",variant:"small",css:eZ.dateText,children:(0,a.Y)(en,{startTime:e.task.startTime,endTime:"RUNNING"!==e.task.state?e.task.endTime:void 0})}),(0,a.Y)(R.S,{css:eZ.verticalDivider}),(0,a.Y)(eq,{isDone:u,hasError:o,errorMessage:s,finishedMessage:c})]})]}),(0,a.Y)(R.S,{css:eZ.outputBlockTerminalWrapper,children:(0,a.Y)(R.S,{css:eZ.errorMessage,style:{color:er.LU.accentNegativeStronger},children:s})})]})}function e2(e){var n=e.task,t=e.config,r=e.openPane,i=t.args,o=(0,l.useCallback)(function(){r({type:"webview",data:{ports:{type:"local",port:i}}},!0)},[r,i]);return(0,a.FD)(R.S,{css:eZ.outputBlockMetadataWrapper,children:[(0,a.FD)(R.S,{css:eZ.outputBlockMetadataWrapperLeft,children:[(0,a.Y)(D.K0,{alt:"Open Preview",onClick:o,children:(0,a.Y)(eB.A,{})}),(0,a.Y)(eo.a,{color:"grey",text:":".concat(i),css:eZ.taskNamePill})]}),(0,a.FD)(R.S,{css:eZ.outputBlockMetadataWrapperRight,children:[(0,a.Y)(E.EY,{color:"dimmer",variant:"small",css:eZ.dateText,children:(0,a.Y)(en,{startTime:n.startTime})}),(0,a.Y)(R.S,{css:eZ.verticalDivider}),(0,a.Y)(ee.m_,{tooltip:"Finished",css:eZ.outputMetadataTooltip,children:(0,a.Y)(ea.A,{})})]})]})}function e4(e){var n=(0,eR.i)();if(!n)return null;var t=e.config.task;switch(t){case"shell.exec":case"dummy.echo":case"dummy.print":case"dummy.sleep":case"dummy.pass":case"dummy.fail":return(0,a.Y)(e0,(0,M._)((0,O._)({},e),{currentUser:n}));case"packager.installForLanguage":case"packager.installForAll":return(0,a.Y)(e1,(0,M._)((0,O._)({},e),{currentUser:n}));case"workspace.openWebview":return(0,a.Y)(e2,(0,M._)((0,O._)({},e),{config:e.config}));case"workflow.run":return null;default:(0,z.A)(t)}}var e5=t(973),e3=t(29064),e6=(0,eP.v)(["blockMinHeight","terminalBackgroundColor"]).styleTokens,e8=(0,C.x)({outputsListParent:[ei.wp.flex.growAndShrink(1),ei.wp.overflow("hidden"),ei.wp.borderRadius(0,0,8,8)],outputsListWrapper:[ei.wp.height("100%")],outputsList:[ei.wp.height("auto"),ei.wp.overflowY("scroll"),ei.wp.flex.growAndShrink(1)],outputsListSnapToBottom:{scrollSnapType:"y mandatory"},scrollSnap:[ei.wp.height(1),{marginTop:-1,pointerEvents:"none",scrollSnapAlign:"end"}],outputBlockCollapsingWrapper:[ei.wp.minHeight(e6.blockMinHeight)],outputBlockTerminalWrapper:[ei.wp.minHeight(e6.blockMinHeight),{backgroundColor:e6.terminalBackgroundColor}],outputBlockClosingBorder:[ei.wp.height(1),ei.wp.zIndex(1),ei.wp.border({direction:"bottom",width:1,style:"solid",color:er.LU.backgroundHigher}),{marginTop:-1}],workflowsListButton:[ei.wp.viewStyle,ei.wp.reset.button,ei.wp.p(2),ei.wp.height(22),ei.wp.rowWithGap(8),ei.wp.align.center,e5.b.nofill,{transitionProperty:"background-color, box-shadow, opacity",opacity:.8}],workflowsListButtonText:[{fontSize:er.LU.fontSizeSmall}]});function e7(e){var n=e.openPane,t=e.ports,r=e.openAIWithMessage,i=e.onClear,o=e.onDontExposePort,s=e.onDoExposePort,c=(0,m._)((0,l.useState)(0),2),u=c[0],d=c[1],p=(0,m._)((0,l.useState)(!0),2),f=p[0],h=p[1],S=(0,l.useRef)(null),Y=(0,b.Jw)(y.C.id,y.j.Output),A=(0,l.useRef)(0),C=(0,m._)((0,v.A)("show-only-latest-console-runs",!0),2),_=C[0],k=C[1],D=(0,x.IE)(),E=(0,w.A)(function(e){d(e.height)},{type:"throttle",wait:200}),I=(0,l.useMemo)(function(){var e=D.sort(function(e,n){return e.task.startTime-n.task.startTime}),n=e.filter(function(e){var n=e.task;return!_||n.state===g.Dr.RUNNING});return 0===n.length&&e.length>0?[e[e.length-1]]:n},[_,D]),F=(0,l.useMemo)(function(){return I.some(function(e){return e.task.state!==g.Dr.RUNNING})},[I]),T=0===I.length;return(0,a.Y)(R.S,{css:e8.outputsListParent,innerRef:Y,children:(0,a.FD)(R.S,{css:e8.outputsListWrapper,innerRef:E,children:[(0,a.Y)(ne,{onClear:i,showOnlyLatest:_,setShowOnlyLatest:k,hasFinishedRuns:F,openPane:n}),T?(0,a.Y)(P,{openPane:n}):(0,a.FD)(R.S,{css:[e8.outputsList,f&&e8.outputsListSnapToBottom],innerRef:S,onScroll:function(){S.current&&(S.current.scrollTop<A.current?h(!1):h(S.current.scrollHeight-S.current.scrollTop-20<u),A.current=S.current.scrollTop)},children:[I.map(function(e){var i=e.task,l=e.taskIdx,c=e.runId,d=e.config;return(0,a.Y)(e4,{task:i,taskIdx:l,runId:c,config:d,maxHeight:u,rootRef:S,ports:t,openPane:n,openAIWithMessage:r,onDoExposePort:s,onDontExposePort:o},c+"-"+l)}),f?(0,a.Y)(R.S,{css:e8.scrollSnap}):null]})]})})}var e9=(0,C.x)({header:[ei.wp.height(28),ei.wp.flex.row,ei.wp.align.center,ei.wp.justify.end,{borderBottom:"1px solid ".concat(er.LU.backgroundHigher),opacity:.8,":hover":{opacity:1}}],groupRight:[ei.wp.height("100%"),ei.wp.rowWithGap(4),ei.wp.px(2)]});function ne(e){return(0,a.Y)(R.S,{css:e9.header,align:"end",children:(0,a.FD)(R.S,{css:e9.groupRight,align:"center",children:[(0,a.Y)(L.g,{text:"Show Only Latest",isSelected:e.showOnlyLatest,onChange:e.setShowOnlyLatest}),(0,a.Y)(L.k,{altText:"Clear Past Runs",buttonText:"Clear Past Runs",icon:(0,a.Y)(e3.A,{}),onClick:e.onClear,disabled:!e.hasFinishedRuns})]})})}var nn=t(60632),nt=t(58370),nr=t(9414),ni=t(26716),no=t(71117),na=t(86278),nl=s.ZU.Object({type:s.ZU.Literal("runnerOutput")}),ns={id:"outputs.clear",name:"Clear console history",default:void 0};function nc(e){var n,t,r,s,c,m,g,v=e.runner,w=e.options,y=(t=(n=(0,f.A)()).fs,r=n.ports,s=(0,p.I)(function(e){return function(){return e.workflows.clearHistory.rpc({})}},[]),c=(0,l.useCallback)(function(){s&&s(),v.clearBlockHistory()},[v,s]),(0,nr.Qt)(function(){return{commands:[{commands:[{match:h.G2,data:{type:"action",label:"Clear History",icon:(0,a.Y)(e3.A,{}),run:function(){return c()}}}]}],type:"runnerOutput",startBlock:v.startBlock,endBlock:v.endBlock,writeOutputToBlock:v.writeOutputToBlock,writeErrorToBlock:v.writeErrorToBlock}},[v,c]),(0,nn.SJ)(function(){return[ns.id,v.clearBlockHistory]},[v]),m=(0,l.useCallback)(function(e){r.updateDotReplitPortsMapping(e,void 0)},[r]),{onClear:c,onDoExposePort:(0,l.useCallback)(function(e){r.tryExposingPortAutomatically(e)},[r]),onDontExposePort:m,ports:r,fs:t}),b=y.ports,S=y.onDontExposePort,Y=y.onDoExposePort,A=y.onClear,x=w.performPaneOperation,C=(0,l.useCallback)(function(e){x({operation:"open",secondary:"ghostwriterChat"===e.type,pane:e})},[x]),_=(0,ni.H)({openPane:C}),k=(0,u.dm)().assistantMode,D=(0,u.jt)(),E=(0,l.useCallback)((g=(0,i._)(function(e){return(0,o.YH)(this,function(n){return(0,d.u4)(d.AZ.ASSISTANT_USED,{action:"message_sent",assistant_mode:k,message_content:e,message_source:"console",is_agent_repl:D}),_(e),[2]})}),function(e){return g.apply(this,arguments)}),[D,k,_]);return(0,a.Y)(e7,{ports:b,openPane:C,openAIWithMessage:E,onClear:A,onDontExposePort:S,onDoExposePort:Y})}var nu={Content:function(e){var n=e.options,t=(0,f.A)().runner;return"outputs"!==t.mode?(0,a.Y)(R.S,{p:8,children:(0,a.Y)(E.EY,{children:"Console is not available."})}):(0,a.Y)(nc,{options:n,runner:t})},Icon:function(e){var n=e.size;return(0,a.Y)(no.Vx.Provider,{value:{color:er.LU.yellowStrongest,size:n},children:(0,a.Y)(na.A,{})})},getTitle:function(){return"Console"},description:"View the terminal output after running your code",category:nt.bY.WorkspaceFeatures,decode:function(e){return c.T(nl,e)}}},20156:(e,n,t)=>{"use strict";t.d(n,{H:()=>Y,j:()=>b});var r=t(12694),i=t(86105),o=t(88263),a=t(21462),l=t(31258),s=t(74837),c=t(45263),u=t(64583),d=t(973),p=t(48521),f=t(46603),h=t(76126),m=t(10429),g=t(87523),v=t(70900),w=t(86814),y=t(69258);function b(e){var n=e.secrets,t=e.otherSecrets,i=new Map,o=!0,a=!1,l=void 0;try{for(var s,c=t[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var u=(0,r._)(s.value,2),d=u[0],p=u[1];n.has(d)||i.set(d,p)}}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}return{missing:i}}var S=(0,u.x)({root:[p.wp.borderRadius(8),{border:"1px solid "+c.LU.outlineDimmer}],button:[p.wp.reset.button,d.b.nofill,p.wp.rowWithGap(8),p.wp.align.center,p.wp.height(32),p.wp.px(8),{border:"0 none",borderBottomLeftRadius:0,borderBottomRightRadius:0}],buttonText:[p.wp.flex.growAndShrink(1),p.wp.rowWithGap(8),p.wp.align.center],missingSecret:[p.wp.flex.growAndShrink(1)],subtitle:[{borderTop:"1px solid "+c.LU.outlineDimmest,top:-1},p.wp.py(8),p.wp.position.relative]});function Y(e){var n=e.secrets,t=e.otherSecrets,u=e.otherEnvName,d=e.onAddSecret,p=e.initialExpanded,Y=b({secrets:n,otherSecrets:t}).missing,A=(0,r._)((0,a.useState)(p),2),x=A[0],C=A[1],_=0===Y.size;if((0,a.useEffect)(function(){_&&C(!1)},[_]),_)return null;var k="".concat(Y.size," ").concat((0,l.A)("secret",Y.size)," out of sync"),D=1===Y.size?"A ".concat(u," secret is missing from this environment"):"".concat(Y.size," ").concat(u," secrets are missing from this environment");return(0,o.FD)(m.S,{css:S.root,children:[(0,o.FD)(m.S,{css:S.button,tag:"button",onClick:function(){return C(function(e){return!e})},children:[(0,o.FD)(m.S,{css:S.buttonText,children:[(0,o.Y)(y.A,{color:c.LU.orangeDefault}),(0,o.Y)(h.EY,{multiline:!1,children:k})]}),x?(0,o.Y)(v.A,{}):(0,o.Y)(g.A,{})]}),x?(0,o.FD)(m.S,{px:8,pb:8,children:[(0,o.Y)(h.EY,{css:S.subtitle,color:"dimmer",children:D}),(0,o.Y)(m.S,{gap:8,children:(0,i._)(Y.entries()).map(function(e){var n=(0,r._)(e,2),t=n[0],i=n[1];return(0,o.FD)(m.S,{row:!0,gap:8,children:[(0,o.FD)(m.S,{css:S.missingSecret,row:!0,gap:8,children:[(0,o.Y)(s.Ge,{value:t}),(0,o.Y)(s.iJ,{value:i})]}),i?(0,o.Y)(f.$n,{iconLeft:(0,o.Y)(w.A,{}),variant:"outlined",text:"Add secret",onClick:function(){return d({key:t,value:i})}}):null]},t)})})]}):null]})}},20646:(e,n,t)=>{"use strict";t.d(n,{A:()=>p,v:()=>u});var r=t(88263),i=t(21462),o=t(47526),a=t(56848),l=t(64583),s=t(48521),c=t(13641),u=a.f+1,d=(0,l.x)({inlinePlaceholder:[s.wp.visibility.hidden,{pointerEvents:"none"}],portal:[s.wp.position.absolute,s.wp.zIndex(u)]});function p(e){var n=e.isActive,t=e.children,a=(0,i.useRef)(null),l=(0,i.useRef)(null),s=(0,o.my)(a.current),u=null==s?void 0:s.rect,p=n&&null!=u;return(0,r.FD)(r.FK,{children:[(0,r.Y)("div",{ref:a,css:p?d.inlinePlaceholder:void 0,children:t}),p?(0,r.Y)(c.Z,{children:(0,r.Y)("div",{ref:l,css:d.portal,style:{left:u.left,top:u.top,height:u.height,width:u.width},children:t})}):null]})}},20729:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(88263),a=t(71117);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M12 8.75a3.25 3.25 0 1 0 0 6.5 3.25 3.25 0 0 0 0-6.5Zm-4.7 2.562a4.751 4.751 0 0 1 9.401.004.748.748 0 0 1 .309-.066h5.95a.75.75 0 1 1 0 1.5h-5.95a.748.748 0 0 1-.309-.066 4.751 4.751 0 0 1-9.402.004.747.747 0 0 1-.299.062H1.05a.75.75 0 0 1 0-1.5H7c.106 0 .208.022.3.062Z",clipRule:"evenodd"})}))}},20772:(e,n,t)=>{"use strict";t.d(n,{A:()=>u});var r=t(17844),i=t(93629),o=t(88263),a=t(21462),l=t(29775),s=t(82357),c="rag://rag_source_";function u(e){var n=e.openWebview,t=e.ragSources;return(0,a.useMemo)(function(){return function(e){var u,d=null==(u=e.node.properties)?void 0:u.href,p=(0,a.useMemo)(function(){if(n&&"string"==typeof d)try{var e=new URL(d);if("0.0.0.0"===e.hostname||"localhost"===e.hostname)return function(t){t.preventDefault(),n(e.pathname,parseInt(e.port,10))}}catch(e){return}},[d]);if("string"==typeof d&&d.startsWith(c)){var f=d.slice(c.length),h=null==t?void 0:t.find(function(e){return e.id===f});if(!h)return(0,o.FD)(a.Fragment,{children:["[",e.children,"]"]});var m=(0,l.A)(h.url);return(0,o.Y)(s.A,(0,i._)((0,r._)({},e),{href:"#"+m,filePath:"",target:""}))}return(0,o.Y)(s.A,(0,i._)((0,r._)({},e),{type:void 0!==p?"button":e.type,href:void 0!==p?"#":e.href,onClick:p}))}},[n,t])}},20823:e=>{e.exports={root:"PlanProposalV2_root__jZCCG",elevated:"PlanProposalV2_elevated__hTvWE",selected:"PlanProposalV2_selected__gzqCY",planContainer:"PlanProposalV2_planContainer__v_sKx",hasVisualPreviewSibling:"PlanProposalV2_hasVisualPreviewSibling__QaCKc",title:"PlanProposalV2_title__2YVzf",iconContainer:"PlanProposalV2_iconContainer__mmMeb",divider:"PlanProposalV2_divider__K9af_"}},21203:(e,n,t)=>{"use strict";t.d(n,{N:()=>r});var r=function(e){return e.FileNode="FILE_NODE",e.FileHeaderTab="FILE_HEADER_TAB",e.Code="CODE",e.Pane="PANE",e.NewPane="NEW_PANE",e}({})},21242:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(88263),a=t(71117);function l(e){return(0,o.FD)(a.Ay,(0,i._)((0,r._)({},e),{children:[(0,o.Y)("path",{fillRule:"evenodd",d:"M3 8.276a4.259 4.259 0 0 1 4.259-4.259h8.965a4.259 4.259 0 0 1 4.259 4.259v8.965a4.259 4.259 0 0 1-4.259 4.259H7.26A4.259 4.259 0 0 1 3 17.241V8.276Zm4.259-2.914a2.914 2.914 0 0 0-2.914 2.914v8.965a2.914 2.914 0 0 0 2.914 2.914h8.965a2.914 2.914 0 0 0 2.914-2.914V8.276a2.914 2.914 0 0 0-2.914-2.914H7.26Z",clipRule:"evenodd"}),(0,o.Y)("path",{d:"M9.948 5.057A3.057 3.057 0 0 1 13.006 2h6.436A3.057 3.057 0 0 1 22.5 5.057v6.437a3.057 3.057 0 0 1-3.058 3.058h-6.436a3.057 3.057 0 0 1-3.058-3.058V5.057Z"})]}))}},21394:(e,n,t)=>{"use strict";t.d(n,{Gu:()=>u,Vq:()=>s,_0:()=>p,pp:()=>d});var r=t(88263),i=t(64583),o=t(48521),a=t(10429),l=t(80762),s=600,c=(0,i.x)({overviewPane:[o.wp.flex.column,o.wp.gap(24),o.wp.width("100%"),o.wp.maxWidth(s),{margin:"0 auto"}],loading:[o.wp.center,o.wp.flex.growAndShrink(1)],emptyState:[o.wp.center,o.wp.flex.growAndShrink(1)]}),u=function(){return(0,r.Y)(a.S,{css:c.loading,children:(0,r.Y)(l.A,{})})},d=function(e){var n=e.children;return(0,r.Y)(a.S,{css:c.emptyState,children:n})},p=function(e){var n=e.children;return(0,r.Y)(a.S,{css:c.overviewPane,p:12,children:n})}},21513:(e,n,t)=>{"use strict";t.d(n,{A:()=>s});var r=t(17844),i=t(93629),o=t(17459),a=t(88263),l=t(28360);let s=function(e){var n=e.level,t=e.fontFamily,s=e.fontWeight,c=e.foreground,u=e.align,d=e.truncate,p=e.className,f=e.children,h=e.style,m=(0,o._)(e,["level","fontFamily","fontWeight","foreground","align","truncate","className","children","style"]),g=(0,r._)({fontSize:l.A.levels[n],fontFamily:l.A.fontFamily[void 0===t?"sans-serif":t],fontWeight:l.A.fontWeight[void 0===s?"medium":s],color:l.A.foreground[void 0===c?1:c],textAlign:void 0===u?"left":u},h);return void 0!==d&&d&&(g=(0,i._)((0,r._)({},g),{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",maxWidth:"100%"})),(0,a.Y)("h".concat(n),(0,i._)((0,r._)({},m),{style:g,className:void 0===p?"":p,children:f}))}},21846:(e,n,t)=>{"use strict";t.d(n,{A:()=>i});var r=t(21462);let i=function(e,n,t){(0,r.useEffect)(function(){var n=setTimeout(e,t);return function(){clearTimeout(n)}},n)}},21881:(e,n,t)=>{"use strict";t.d(n,{$:()=>a,C:()=>o});var r=t(79730),i=t(20207),o=function(e){return e.DASHBOARD="DASHBOARD",e.BRANCH="BRANCH",e.CURRENT_BRANCH="CURRENT_BRANCH",e.SETTINGS="SETTINGS",e.COMMIT="COMMIT",e}({}),a=r.ZU.Union([r.ZU.Object({type:r.ZU.Literal("DASHBOARD")}),r.ZU.Object({type:r.ZU.Literal("BRANCH"),branch:i.AR}),r.ZU.Object({type:r.ZU.Literal("CURRENT_BRANCH")}),r.ZU.Object({type:r.ZU.Literal("SETTINGS")}),r.ZU.Object({type:r.ZU.Literal("COMMIT"),hash:r.ZU.String()})])},21938:(e,n,t)=>{"use strict";t.d(n,{u:()=>m});var r=t(83846),i=t(88263),o=t(26987),a=t(45263),l=t(64583),s=t(49045),c=t(48521),u=t(10429),d=(0,s.v)(["fontSize"]),p=d.cssVars,f=d.styleTokens,h=(0,l.x)({button:[c.wp.reset.button,c.wp.flex.row,c.wp.align.center,c.wp.cursor.pointer,c.wp.hover({opacity:1}),{opacity:.6,fontFamily:a.LU.fontFamilyDefault,"*":{fontSize:f.fontSize,borderColor:a.LU.foregroundDimmest,color:a.LU.foregroundDimmest},":hover *":{borderColor:a.LU.foregroundDefault,color:a.LU.foregroundDefault}}],keyCombo:[{marginLeft:"calc(".concat(f.fontSize," * 0.3)")}]});function m(e){return(0,i.FD)(u.S,{className:e.className,tag:"button",css:h.button,style:(0,r._)({},p.fontSize,e.fontSize+"px"),onClick:e.onClick,children:[(0,i.Y)(u.S,{children:e.text}),e.keyCombo?(0,i.Y)(u.S,{css:h.keyCombo,justify:"center",children:(0,i.Y)(o._y,{fontSize:.8*e.fontSize,keyCombo:e.keyCombo})}):null]})}},21946:(e,n,t)=>{"use strict";t.d(n,{U:()=>l});var r=t(88263),i=t(21462),o=t(59318),a=t(47987),l=function(e){var n=e.children,t=(0,i.useRef)(null),l=(0,i.useRef)(null);return(0,i.useEffect)(function(){var e=function(e){var n,r,i=e.target;if(i&&"ArrowUp"===e.key){var o=t.current;o&&(null==(n=i.parentElement)?void 0:n.firstElementChild)===i&&(null==(r=o.querySelector("input"))||r.focus())}},n=l.current;if(n)return n.addEventListener("keydown",e,!1),function(){return n.removeEventListener("keydown",e,!1)}},[l,t]),(0,r.Y)(o.JC.Provider,{value:{ref:l,"aria-label":"Search Results"},children:(0,r.Y)(a.a.Provider,{value:{ref:t,onKeyDown:function(e){if("ArrowDown"===e.key){var n;e.preventDefault(),null==(n=l.current)||n.focus()}}},children:n})})}},21989:(e,n,t)=>{"use strict";t.d(n,{H:()=>s});var r=t(88263),i=t(63459),o=t(13340),a=t(76126),l=t(10429);function s(e){var n,t,s,c,u,d,p,f=(0,i.sx)({variables:{id:e.id}}).data,h=null==f?void 0:f.user;return e.showAvatarOnly?(0,r.Y)(o.e,{size:24,username:null!=(n=null==h?void 0:h.username)?n:"",fullName:null!=(t=null==h?void 0:h.fullName)?t:"",src:null!=(s=null==h?void 0:h.image)?s:""}):(0,r.FD)(l.S,{row:!0,gap:8,align:"center",children:[(0,r.Y)(o.e,{size:24,username:null!=(c=null==h?void 0:h.username)?c:"",fullName:null!=(u=null==h?void 0:h.fullName)?u:"",src:null!=(d=null==h?void 0:h.image)?d:""}),(0,r.Y)(a.EY,{variant:"small",color:"dimmer",children:null!=(p=null==h?void 0:h.username)?p:""})]})}},22305:(e,n,t)=>{"use strict";t.d(n,{DO:()=>v,D_:()=>p,Md:()=>u,Wt:()=>f,h0:()=>d,hK:()=>l,i_:()=>s,o2:()=>h,sC:()=>y,sh:()=>m,tH:()=>g,uu:()=>w});var r=t(44370),i=t(31538),o=t(79209),a=t(45263),l=[1,2,3,4,5,6,7,8,9,10],s=l.length-1,c=1/(2*s),u=(0,r.eU)(2),d=(0,r.eU)(function(e){return l[e(u)]}),p=(0,r.eU)(function(e){return(e(i.Je)*e(d)).toFixed(6)}),f=(0,r.eU)(function(e){return e(i.GS)*e(d)}),h=(0,r.eU)(0),m=(0,r.eU)(function(e){var n=0/s,t=l.length-1/s,r=0,i=0;return e(h)<n&&(r=(n-e(h))/c,i=n-c),e(h)>t&&(r=(e(h)-t)/c,i=t+c),{overage:r,point:i}}),g=function(e){return e.None="0ms",e.Normal="120ms",e}({}),v=["ArrowLeft","ArrowRight","Home","End"],w=(0,o.AH)({position:"relative",height:"16px",width:"100%",touchAction:"none"}),y=(0,o.AH)({position:"absolute",zIndex:2,top:"0",width:"16px",height:"16px",backgroundColor:a.LU.white,borderRadius:"100%",outline:"none",cursor:"pointer",willChange:"left, transition",boxShadow:"0 0 8px rgba(0,0,0,0.15)",":focus":{outline:"2px solid ".concat(a.LU.accentPrimaryDefault),":not(:focus-visible)":{outlineColor:"transparent"}}})},22334:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(88263),a=t(71117);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M7.24 3.25h9.52a2.751 2.751 0 0 1 2.462 1.526l3.449 6.888a.75.75 0 0 1 .079.336v6A2.75 2.75 0 0 1 20 20.75H4A2.75 2.75 0 0 1 1.25 18v-6a.75.75 0 0 1 .08-.336l3.448-6.888A2.75 2.75 0 0 1 7.24 3.25Zm0 1.5a1.25 1.25 0 0 0-1.118.694l-.001.002-2.907 5.804H8a.75.75 0 0 1 .624.334l1.777 2.666H13.6l1.777-2.666A.75.75 0 0 1 16 11.25h4.786l-2.907-5.804v-.002a1.25 1.25 0 0 0-1.119-.694m4.49 8h-4.849l-1.777 2.666a.75.75 0 0 1-.624.334h-4a.75.75 0 0 1-.624-.334L7.599 12.75H2.75V18A1.25 1.25 0 0 0 4 19.25h16A1.25 1.25 0 0 0 21.25 18v-5.25Zm-4.49-8H7.24h9.52Z",clipRule:"evenodd"})}))}},22425:(e,n,t)=>{"use strict";t.d(n,{L:()=>i,Y:()=>r});var r=(0,t(39282).F)(null);function i(e,n,t){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Date.now();Array.isArray(e)||(e=[e]);var a=null!=(i=n.output)?i:"",l=n.error,s=t?o:Date.now(),c="".concat(o,"-").concat(Math.random());r.set({input:e,output:a,error:l,start:o,end:s,cached:t,key:c})}},22443:(e,n,t)=>{"use strict";t.d(n,{A:()=>g});var r=t(17844),i=t(93629),o=t(17459),a=t(88263),l=t(84550),s=t(35341),c=t(45263),u=t(64583),d=t(48521),p=t(70548),f=t(36112),h=t(16842),m=(0,u.x)({tableHeader:[d.wp.color.foregroundDimmer,d.wp.textAlign.left,{"[data-focused]":[d.wp.focusRing,{outlineColor:c.LU.accentPrimaryDefault}]}],checkboxColumn:[d.wp.width(16),d.wp.px(8)]});function g(e){var n=e.columns,t=e.children,c=(0,o._)(e,["columns","children"]),u=(0,l.mz)(),d=u.selectionBehavior,g=u.selectionMode;return(0,a.Y)(f.ui,{children:function(e){return(0,a.FD)(l.A0,(0,i._)((0,r._)({clsx:e,css:m.tableHeader},c),{children:["toggle"===d&&(0,a.Y)(h.V,{css:m.checkboxColumn,children:"multiple"===g&&(0,a.Y)(p.S,{slot:"selection",name:"select-all"})}),(0,a.Y)(s.pM,{items:n,children:t})]}))}})}},22902:(e,n,t)=>{"use strict";t.d(n,{A:()=>p,r:()=>m});var r=t(12694),i=t(88263),o=t(21462),a=t(45263),l=t(48521),s=t(46603),c=t(21513),u=t(92395),d=t(59655);function p(e){var n=(0,r._)((0,o.useState)(!1),2),t=n[0],a=n[1],l=[],d=[];if(e.variables.length>0){var p=e.variables[0].parentVariableReference,f=!0,h=!1,g=void 0;try{for(var v,w=e.variables[Symbol.iterator]();!(f=(v=w.next()).done);f=!0){var y=v.value;y.parentVariableReference===p?l.push(y):d.push(y)}}catch(e){h=!0,g=e}finally{try{f||null==w.return||w.return()}finally{if(h)throw g}}}return(0,i.FD)(i.FK,{children:[(0,i.Y)(c.A,{truncate:!0,level:5,children:"Variables"}),(0,i.FD)(u.T,{align:"stretch",constrainWidth:!0,children:[l.map(function(n){return(0,i.Y)(m,{depth:0,variable:n,client:e.client},n.parentVariableReference+"/"+n.name)}),d.length>0&&(0,i.FD)(i.FK,{children:[(0,i.Y)(s.$n,{variant:"nofill",onClick:function(){return a(function(e){return!e})},text:"See ".concat(t?"Less":"More")}),t&&d.map(function(n){return(0,i.Y)(m,{depth:0,variable:n,client:e.client},n.parentVariableReference+"/"+n.name)})]})]})]})}function f(e){var n=e.variable,t=e.expanded;return n.variablesReference>0?(0,i.Y)("div",{css:[l.wp.transition.snappy,{transform:"rotate(".concat(t?0:-90,"deg)")}],children:(0,i.Y)(d.A,{})}):null}function h(e){var n=e.expanded,t=e.depth,r=e.variable;return 0!==t||"parentVariableReference"in r?(0,i.Y)("div",{css:[l.wp.flex.grow(0),l.wp.flex.shrink(0),l.wp.width(a.LU.space16),l.wp.display.flex,l.wp.align.center,l.wp.justify.end],children:(0,i.Y)(f,{expanded:n,variable:r})}):(0,i.Y)(f,{expanded:n,variable:r})}function m(e){var n=e.depth,t=e.variable,l=e.client,s=(0,r._)((0,o.useState)(!1),2),c=s[0],d=s[1],p=(0,r._)((0,o.useState)([]),2),f=p[0],g=p[1];return(0,o.useEffect)(function(){c&&l.fetchVariables(t.variablesReference).then(function(e){return g(e)},function(){return d(!1)})},[c,l,t.variablesReference]),(0,i.FD)(i.FK,{children:[(0,i.FD)("div",{className:"variable",onClick:function(){t.variablesReference>0&&d(function(e){return!e})},css:{"&":{display:"flex",alignItems:"center",maxWidth:"100%",height:a.LU.space32,minHeight:a.LU.space32,cursor:"pointer",color:a.LU.foregroundDimmer,borderRadius:a.LU.borderRadius4,fontSize:a.LU.fontSizeDefault,paddingLeft:"calc(".concat(n," * ").concat(a.LU.space16,")"),fontFamily:a.LU.fontFamilyCode},"&:hover":{backgroundColor:a.LU.backgroundHigher,color:a.LU.foregroundDefault},".label":{fontSize:a.LU.fontSizeDefault,paddingLeft:a.LU.space8,paddingRight:a.LU.space8,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",flex:"1 0 auto"},".type":{opacity:"0.5"},".value":{textAlign:"right",flexShrink:1}},children:[(0,i.Y)(h,{expanded:c,variable:t,depth:n}),(0,i.FD)("div",{className:"label",children:[t.name,t.type?(0,i.FD)("span",{className:"type",children:[" ",t.type]}):null,""!==t.value&&": "]}),(0,i.Y)("div",{className:"label value",children:(0,i.Y)("pre",{children:t.value})})]}),c?(0,i.Y)(u.T,{align:"stretch",constrainWidth:!0,children:f.map(function(e){return(0,i.Y)(m,{depth:n+1,variable:e,client:l},"parentVariableReference"in e?e.parentVariableReference+"/"+e.name:e.name)})}):null]})}},22940:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(21462),i=t(6598),o=t(37427),a=t(14893);function l(){var e=(0,a.lO)().isRunning,n=(0,a.jP)(),t=(0,a.mP)(),l=(0,a.MP)(),s=(0,r.useRef)(!0),c=(0,r.useRef)(null),u=(0,r.useRef)(!1),d=(0,i.I)(function(e){return function(n){return l(o.QG.AUTO_RUN),e.workflows.runWorkflow.rpc({workflowId:n})}},[l]);(0,r.useEffect)(function(){if(!u.current&&t.length>0){u.current=!0;var e=t.find(function(e){return e.name===n});e&&(0,a.ij)(e,t)&&(c.current=n)}},[n,t]),(0,r.useEffect)(function(){if(s.current&&!e&&c.current){var n,r=(null==(n=t.find(function(e){return e.name===c.current}))?void 0:n.author)==="agent";c.current&&r&&(s.current=!1,null==d||d(c.current))}},[e,d,t])}},22954:(e,n,t)=>{"use strict";t.d(n,{aI:()=>I,P6:()=>C,SY:()=>k,KZ:()=>E});var r=t(17844),i=t(12584),o=t(41114),a=t(86997),l=t(50175);function s(){var e=(0,i._)(["\n  fragment ForkContextRepl on Repl {\n    id\n    title\n    description\n    org {\n      id\n    }\n  }\n"]);return s=function(){return e},e}var c=(0,o.J1)(s()),u=t(91136),d=t(94304),p=t(63051),f=t(85575),h=t(12261),m=t(88291),g=t(13424);function v(){var e=(0,i._)(["\n  fragment WorkspaceHeaderReplInfoRepl on Repl {\n    id\n    title\n    rawTemplateLabel: templateLabel(disableFallbackToTitle: true)\n    description\n    isPrivate\n    isRenamed\n    url\n    slug\n    imageUrl\n    workspaceCta\n    publishedAs\n    publicForkCount\n    timeUpdated\n    owner {\n      ... on Team {\n        id\n      }\n      ... on User {\n        id\n      }\n    }\n    templateInfo {\n      iconUrl\n      imageUrl\n    }\n    authorizations {\n      editMetadata {\n        isAuthorized\n        message\n      }\n      editResources {\n        isAuthorized\n      }\n      editTemplateMetadata {\n        isAuthorized\n      }\n      editVisibility {\n        isAuthorized\n        code\n        message\n      }\n      fork {\n        isAuthorized\n      }\n      deleteRepl {\n        isAuthorized\n      }\n      publish {\n        isAuthorized\n      }\n    }\n    hostingDeployment {\n      ... on HostingDeployment {\n        id\n        currentBuild {\n          id\n        }\n      }\n    }\n    authorizations {\n      viewDeploymentConfig {\n        isAuthorized\n      }\n    }\n    user {\n      id\n      image\n      ...UserLinkUser\n    }\n    ...ForkContextRepl\n    ...WorkspaceHeaderReplMetadataRepl\n    ...PublishReleaseFormRepl\n    ...BulkDeleteConfirmationModalRepl\n    ...CreateProjectBeforeForkReplContext\n    ...TransferReplReplInfo\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return v=function(){return e},e}function w(){var e=(0,i._)(["\n  query WorkspaceHeaderReplInfo($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        ...WorkspaceHeaderReplInfoRepl\n      }\n    }\n  }\n  ","\n"]);return w=function(){return e},e}function y(){var e=(0,i._)(["\n  mutation WorkspaceHeaderReplInfoUnpublishTemplate(\n    $input: DeleteReplDeploymentInput!\n  ) {\n    deleteReplDeployment(input: $input) {\n      ... on Repl {\n        id\n        ...PublishReplData\n      }\n    }\n  }\n  ","\n"]);return y=function(){return e},e}function b(){var e=(0,i._)(["\n  mutation WorkspaceHeaderReplInfoUpdateRepl($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        ...WorkspaceHeaderReplInfoRepl\n      }\n    }\n  }\n  ","\n"]);return b=function(){return e},e}function S(){var e=(0,i._)(["\n  mutation WorkspaceHeaderReplInfoDeleteRepl($id: String!) {\n    deleteRepl(id: $id) {\n      id\n    }\n  }\n"]);return S=function(){return e},e}var Y={},A=(0,o.J1)(v(),h.N,c,g.a,p._O,f.l,m.lb,u.oD),x=(0,o.J1)(w(),A);function C(e){var n=(0,r._)({},Y,e);return a.I(x,n)}var _=(0,o.J1)(y(),d.xS);function k(e){var n=(0,r._)({},Y,e);return l.n(_,n)}var D=(0,o.J1)(b(),A);function E(e){var n=(0,r._)({},Y,e);return l.n(D,n)}var R=(0,o.J1)(S());function I(e){var n=(0,r._)({},Y,e);return l.n(R,n)}},23076:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(88263),a=t(71117);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M8 1.25a.75.75 0 0 1 .75.75v1.25h6.5V2a.75.75 0 0 1 1.5 0v1.25H19A2.75 2.75 0 0 1 21.75 6v14A2.75 2.75 0 0 1 19 22.75H5A2.75 2.75 0 0 1 2.25 20V6A2.75 2.75 0 0 1 5 3.25h2.25V2A.75.75 0 0 1 8 1.25Zm-.75 3.5H5c-.69 0-1.25.56-1.25 1.25v3.25h16.5V6c0-.69-.56-1.25-1.25-1.25h-2.25V6a.75.75 0 0 1-1.5 0V4.75h-6.5V6a.75.75 0 0 1-1.5 0V4.75Zm13 6H3.75V20c0 .69.56 1.25 1.25 1.25h14c.69 0 1.25-.56 1.25-1.25v-9.25Z",clipRule:"evenodd"})}))}},23288:(e,n,t)=>{"use strict";t.d(n,{A:()=>u});var r=t(17844),i=t(12584),o=t(41114),a=t(86997);function l(){var e=(0,i._)(["\n  query OrgAppPrivacySettings($orgId: String!) {\n    currentUser {\n      id\n      org(orgId: $orgId) {\n        ... on Org {\n          id\n          settings {\n            ... on OrgSettings {\n              requirePrivateDeployments\n              banPublicApps\n              banSourceCodeExport\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return l=function(){return e},e}var s={},c=(0,o.J1)(l());let u=function(e){var n,t,i,o,l=(n={skip:!e,variables:{orgId:e}},t=(0,r._)({},s,n),a.I(c,t)),u=l.data,d=l.loading,p=l.error;if(d||p)return{loading:d,error:p,requirePrivateDeployments:void 0};var f=(null==u||null==(o=u.currentUser)||null==(i=o.org)?void 0:i.__typename)==="Org"?u.currentUser.org.settings:void 0;return{loading:d,error:p,requirePrivateDeployments:(null==f?void 0:f.__typename)==="OrgSettings"&&f.requirePrivateDeployments,banPublicApps:(null==f?void 0:f.__typename)==="OrgSettings"&&f.banPublicApps,banSourceCodeExport:(null==f?void 0:f.__typename)==="OrgSettings"&&f.banSourceCodeExport}}},23714:(e,n,t)=>{"use strict";t.d(n,{y:()=>C});var r=t(83846),i=t(17844),o=t(93629),a=t(12694),l=t(88263),s=t(29542),c=t.n(s),u=t(21462),d=t(72659),p=t(36640),f=t(31062),h=t(50051),m=t(3997),g=t(64583),v=t(48521),w=t(46603),y=t(39999),b=t(49150),S=t(76126),Y=t(10429),A=(0,g.x)({self:[v.wp.container("root")],actions:[(0,r._)({},v.kL.max(475,"root"),[v.wp.colWithGap(8),v.wp.align.end])],buttons:[(0,r._)({},v.kL.max(350,"root"),[v.wp.colWithGap(8),v.wp.align.end])]}),x=function(){var e=(0,f.A)(),n=(0,d.DY)({variables:{id:e},ssr:!1,context:{noBatch:!0},pollInterval:6e4}),t=n.data,r=n.previousData,s=(0,p.A)(),g=s.showConfirm,v=s.showError,x=(0,a._)((0,m.B)({onFork:function(){g("Repl forked, redirecting...")},onError:function(){v("Error creating fork - please try again")}}),2),C=x[0],_=x[1].loading,k=(null==t?void 0:t.getRepl.__typename)==="Repl"?t.getRepl:null,D=(null==r?void 0:r.getRepl.__typename)==="Repl"?r.getRepl:null,E=(null==k?void 0:k.org)?k.org:null,R=(null==k?void 0:k.project)?k.project:null,I=(0,a._)((0,u.useState)(!1),2),F=I[0],T=I[1];return((0,u.useEffect)(function(){var n,t,r,i;if((null==k||null==(n=k.project)?void 0:n.mainRepl)&&D&&k.project.mainRepl.id===e)return(null==(r=D.project)||null==(t=r.mainRepl)?void 0:t.id)&&D.project.mainRepl.id===e||(i=setTimeout(function(){T(!0)},6e3)),function(){i&&clearTimeout(i)}},[e,k,D]),k&&E&&R)?(0,l.Y)(b.a,{isOpen:F,onRequestClose:function(){return T(!1)},centered:!0,children:(0,l.FD)(Y.S,{css:A.self,gap:16,children:[(0,l.Y)(S.Y9,{level:2,variant:"subheadBig",children:"This Repl is now part of a Project"}),(0,l.FD)(S.EY,{children:["This Repl is now the source of truth for a Project called"," ",R.title,". Continued development in this Repl may lead to unexpected changes."]}),(0,l.FD)(Y.S,{css:A.actions,row:!0,gap:8,justify:"space-between",align:"center",children:[(0,l.Y)(c(),{href:"https://docs.replit.com/teams/projects/overview",target:"_blank",children:(0,l.Y)(S.EY,{children:"Learn more"})}),(0,l.FD)(Y.S,{css:A.buttons,row:!0,gap:8,children:[(0,l.Y)(w.$n,{text:"Work in a new fork",onClick:function(){_||C({orgId:E.id,repl:k,forkSource:"convertedToProjectModal"})},disabled:_,loading:_}),(0,l.Y)(y.v,(0,o._)((0,i._)({colorway:"primary"},(0,h.gm)({org:E,projectId:R.id})),{text:"Visit Project dashboard"}))]})]})]})}):null},C=function(e){return e.repl.org?(0,l.Y)(x,{}):null}},23721:(e,n,t)=>{"use strict";t.d(n,{A:()=>ew,x:()=>ev});var r=t(29935),i=t(12694),o=t(82643),a=t(88263),l=t(21462),s=t(17844),c=t(12584),u=t(41114),d=t(86997);function p(){var e=(0,c._)(["\n  query ReplAuth($replID: String!) {\n    repl(id: $replID) {\n      ... on Repl {\n        id\n        config {\n          isServer\n        }\n      }\n    }\n    currentUser {\n      id\n      isLoggedIn\n    }\n  }\n"]);return p=function(){return e},e}var f={},h=(0,u.J1)(p()),m=t(64513),g=t(83150),v=t(51094),w=t(46531),y=t(23046),b=t(31062),S=t(53231),Y=t(34834),A=t(62153),x=t(63441),C="Import HTML package",_=[{title:"Get user info",content:[{type:"code",value:'<script type="module">const user = await getUserInfo() <\/script>'}]}],k=[{title:C,content:[{type:"code",value:'<script src="https://replit.com/public/js/repl-auth-v2.js"><\/script>'}]}],D=[{title:"Insert custom button",content:[{type:"code",value:'<button onclick="LoginWithReplit()"> Login </button>'}]}],E=t(86105),R=t(16564),I=t(6888),F=t(31569),T="Import Node package",P=[{title:"Get user info",content:[{type:"code",value:"const user = getUserInfo("},{type:"input",placeholder:"req"},{type:"code",value:")"}]}],L=[{title:T,content:[{type:"code",value:'const { getUserInfo } = require("@replit/repl-auth")'}]}],U=t(67251),N=t(41852),O=t(64583),M=t(48521),B=t(46603),H=t(38292),z=t(77089),W=t(36112),G=t(76126),V=t(10429),j=t(37037),Z=t(55545),q=t(62362),K=(0,O.x)({templateContainer:[M.wp.backgroundColor.backgroundRoot,M.wp.borderRadius(4),M.wp.p(4),M.wp.align.center],input:[M.wp.minWidth(64),M.wp.flex.growAndShrink(1)],codeExampleContainer:[M.wp.borderRadius(4),M.wp.flex.shrink(1)],codeExampleText:[M.wp.font.code,M.wp.color.foregroundDimmer,M.wp.py(4),M.wp.flex.growAndShrink(1)]}),$=function(e){var n=e.title,t=e.content,r=(0,i._)((0,l.useState)(t),2),o=r[0],s=r[1];return(0,a.FD)(V.S,{gap:4,children:[(0,a.FD)(V.S,{row:!0,gap:4,align:"center",children:[(0,a.Y)(G.EY,{variant:"subheadDefault",children:n}),"Get user info"===n?(0,a.Y)(H.K0,{disabled:!0,tooltipPlacement:"top",alt:"User object contains 'id', 'name', 'roles', and 'teams'",children:(0,a.Y)(q.A,{})}):null]}),(0,a.FD)(V.S,{gap:4,children:[(0,a.Y)(V.S,{css:K.templateContainer,row:!0,gap:4,justify:"center",children:t.map(function(e,t){var r=e.type;switch(r){case"input":return(0,a.Y)(z.pd,{onChange:function(e){var n=(0,E._)(o);n[t].value=e.target.value,s(n)},placeholder:e.placeholder,value:e.value||"",css:K.input},"".concat(n,"-").concat(t));case"code":return(0,a.Y)(V.S,{css:K.codeExampleContainer,children:(0,a.Y)(G.EY,{multiline:!1,css:K.codeExampleText,children:e.value})},"".concat(n,"-").concat(t));default:(0,R.A)(r)}})}),(0,a.Y)(J,{code:o.reduce(function(e,n){return"input"===n.type?e+(n.value||n.placeholder):e+n.value},""),packageImport:n===T||n===C})]})]})},J=function(e){var n=e.code,t=e.packageImport,r=(0,N.rM)(),i=(0,U.A)(r),o=(0,Y.A)().fs,l=(0,N.vO)();return i?(0,a.Y)(W.ui,{children:(0,a.Y)(B.$n,{size:"small",variant:"outlined",onClick:function(){var e,a;if(t&&r&&o)return"html"!==(0,g.an)(r)?void i({code:n,insertAt:0}):void o.readFile(r).then(function(e){if(e.error)throw e.error;var t=I.A.from(e.content).toString(),r=t.indexOf("</head>")-1;-1===r&&(r=t.indexOf("<script")),-1===r&&(r=t.indexOf("</body>")),-1===r&&(r=t.length),i({code:n,insertAt:r})});i({code:n,insertAt:null!=(a=null==(e=l())?void 0:e.position.offset)?a:0})},text:t?"Auto add":"Insert",iconRight:(0,a.Y)(j.A,{}),css:{width:"fit-content"}})}):(0,a.Y)(W.ui,{children:(0,a.Y)(B.$n,{size:"small",variant:"outlined",onClick:function(){return(0,F.default)(n)},text:"Copy",iconLeft:(0,a.Y)(Z.A,{}),css:{width:"fit-content"}})})},Q=function(e){var n=e.examples;return(0,a.Y)(V.S,{gap:16,children:n.map(function(e,n){return(0,a.Y)($,{title:e.title,content:e.content},n)})})};let X=function(e){var n=e.langKey;return(0,a.FD)(V.S,{gap:8,children:[" ","html"!==n&&(0,a.Y)(Q,{examples:k}),(0,a.Y)(Q,{examples:D})]})};var ee=[{title:"Fetch from client",content:[{type:"code",value:"CURL /__replauthuser"}]},{title:"Or access server request headers",content:[{type:"code",value:"X-Replit-User-Id"}]},{title:"",content:[{type:"code",value:"X-Replit-User-Name"}]},{title:"",content:[{type:"code",value:"X-Replit-User-Teams"}]},{title:"",content:[{type:"code",value:"X-Replit-User-Roles"}]}],en=t(79209),et=(0,en.AH)([M.wp.colWithGap(16)]);let er=function(){return(0,a.Y)(V.S,{css:et,children:ee.map(function(e,n){return(0,a.Y)($,{title:e.title,content:e.content},n)})})};var ei=(0,en.AH)([M.wp.colWithGap(8)]);let eo=function(e){var n=e.langKey,t=(0,a.Y)(er,{});switch(n){case"html":t=(0,a.Y)(Q,{examples:_});break;case"nodejs":t=(0,a.Y)(Q,{examples:P})}return(0,a.Y)(V.S,{css:ei,children:t})},ea=function(e){var n=e.langKey,t=null;switch(n){case"html":t=k;break;case"nodejs":t=L}return t?(0,a.Y)(V.S,{gap:8,children:(0,a.Y)(Q,{examples:t})}):null};var el=t(58370),es=t(45263),ec=t(39999),eu=t(69938),ed=t(54087),ep=t(54497),ef=t(38676),eh=t(30354),em=t(69258),eg=(0,O.x)({link:[M.wp.color.accentPrimaryStronger,M.wp.cursor.pointer],errorContainer:[M.wp.textAlign.center,M.wp.colWithGap(4)],usageSectionTitleText:[{color:es.LU.foregroundDimmest,textTransform:"uppercase",fontWeight:es.LU.fontWeightMedium}],divider:[M.wp.backgroundColor.outlineDimmer]}),ev=function(){var e=(0,Y.A)(),n=e.dotReplit,t=e.fs,a=(0,i._)((0,l.useState)(),2),s=a[0],c=a[1],u=(0,i._)((0,l.useState)(!1),2),d=u[0],p=u[1],f=(0,i._)((0,l.useState)(!1),2),h=f[0],m=f[1],g=(0,i._)((0,l.useState)(!0),2),w=g[0],b=g[1],S=(0,i._)((0,l.useState)(!0),2),A=S[0],x=S[1],C=(0,l.useCallback)((0,r._)(function(){var e,t,r,i,a;return(0,o.YH)(this,function(o){switch(o.label){case 0:c(void 0),b(!0),o.label=1;case 1:return o.trys.push([1,3,4,5]),[4,n.getConfig({bypassCache:!0})];case 2:switch((a=o.sent()).error){case y.DO.ParseError:throw Error("An error occurred parsing the .replit file, please ensure the syntax is valid");case y.DO.Disconnected:throw Error("Disconnected, cannot read .replit file.");case y.DO.NotFound:return x(!1),[2]}return p(!!(null==a||null==(t=a.config)||null==(e=t.auth)?void 0:e.buttonEnabled)),m(!!(null==a||null==(i=a.config)||null==(r=i.auth)?void 0:r.pageEnabled)),[3,5];case 3:return c(o.sent().message),[3,5];case 4:return b(!1),[7];case 5:return[2]}})}),[n,c,b,x,p,m]);return(0,l.useEffect)(function(){var e;(e=(0,r._)(function(){return(0,o.YH)(this,function(e){switch(e.label){case 0:if(!t)return[2];return[4,C()];case 1:return e.sent(),[2]}})}),function(){return e.apply(this,arguments)})()},[t,C]),(0,l.useEffect)(function(){if(t){var e=t.watchTextFile(v.v,{onChange:(0,r._)(function(){return(0,o.YH)(this,function(e){switch(e.label){case 0:return[4,C()];case 1:return e.sent(),[2]}})})});return function(){e(),m(!1),p(!1),b(!1)}}},[t,m,C]),{error:s,isDotReplitAuthButtonEnabled:d,isDotReplitAuthPageEnabled:h,isDotReplitAuthLoading:w,hasDotReplit:A,setError:c,setIsDotReplitAuthLoading:b,isDotReplitAuthEnabled:d||h}};function ew(){var e,n,t,c,u,p,v=(0,b.A)(),y=(0,Y.A)().dotReplit,C=(0,N.rM)(),_=C?(0,g.an)(C):null,k=(0,A.J)().configs,D=(0,i._)((0,l.useState)(""),2),E=D[0],R=D[1],I=(e={variables:{replID:v}},n=(0,s._)({},f,e),d.I(h,n)),F=I.data,T=I.error,P=I.loading,L=(null==F?void 0:F.repl.__typename)==="Repl"&&(null==F||null==(c=F.repl)||null==(t=c.config)?void 0:t.isServer),U=null!=(p=null==F||null==(u=F.currentUser)?void 0:u.isLoggedIn)&&p,O=ev(),H=O.error,z=O.isDotReplitAuthButtonEnabled,W=O.isDotReplitAuthPageEnabled,j=O.isDotReplitAuthLoading,Z=O.hasDotReplit,q=O.setError,K=O.setIsDotReplitAuthLoading,$=O.isDotReplitAuthEnabled;(0,l.useEffect)(function(){if(k.find(function(e){return"react"===e.language})||"jsx"===_||"tsx"===_)return void R("react");k.length>0&&R(k[0].language)},[_,E,R,k]);var J=(0,l.useCallback)((0,r._)(function(){return(0,o.YH)(this,function(e){switch(e.label){case 0:return K(!0),(0,S.u4)(S.AZ.AUTH_SIDEBAR_USED,{action:"Login Page Enabled"}),[4,y.updateDotReplit([(0,w.qG)(!0),(0,w.D8)(!1)])];case 1:return e.sent().error&&(q("Couldn't enable login page, please try again"),K(!1)),[2]}})}),[K,y,q]),Q=(0,l.useCallback)((0,r._)(function(){return(0,o.YH)(this,function(e){switch(e.label){case 0:return K(!0),(0,S.u4)(S.AZ.AUTH_SIDEBAR_USED,{action:"Login Button Enabled"}),[4,y.updateDotReplit([(0,w.qG)(!1),(0,w.D8)(!0)])];case 1:return e.sent().error&&(q("Couldn't enable login button, please try again"),K(!1)),[2]}})}),[K,y,q]),ee=(0,l.useCallback)((0,r._)(function(){return(0,o.YH)(this,function(e){switch(e.label){case 0:return K(!0),(0,S.u4)(S.AZ.AUTH_SIDEBAR_USED,{action:"Repl auth disabled"}),[4,y.updateDotReplit([(0,w.qG)(!1),(0,w.D8)(!1)])];case 1:return e.sent().error&&(q("Couldn't disable Log in with Replit, please try again"),K(!1)),[2]}})}),[K,y,q]),en=(0,l.useMemo)(function(){return U?Z?T?(0,a.Y)(V.S,{css:eg.errorContainer,children:(0,a.Y)(ed.N,{colorway:"warning",text:"An error ocurred retrieving auth for this App. Please try again later."})}):"html"===E||L?void 0:(0,a.Y)(V.S,{css:eg.errorContainer,children:(0,a.Y)(ed.N,{colorway:"warning",text:"Run your web app to use Log in with Replit"})}):(0,a.FD)(V.S,{css:eg.errorContainer,children:[(0,a.Y)(ed.N,{colorway:"warning",text:"Please create a .replit file to use Log in with Replit"}),(0,a.Y)(G.EY,{children:(0,a.Y)("a",{href:"https://docs.replit.com/replit-workspace/configuring-repl",target:"_blank",rel:"noopener",children:"Learn more about the .replit file"})})]}):(0,a.Y)(V.S,{css:eg.errorContainer,children:(0,a.Y)(ey,{})})},[T,Z,U,L,E]),et="html"===E||"nodejs"===E,er=(0,a.Y)(G.EY,{color:"dimmer",children:"You can use Log in with Replit with all web Apps. We have language clients for Nodejs and HTML - switch to an App that uses that language to see how to use it."}),ei=(0,a.FD)(V.S,{gap:24,children:[(0,a.FD)(V.S,{gap:8,children:[W?(0,a.FD)(G.EY,{color:"dimmer",children:["Your App will automatically direct users to a prebuilt login page. Start by importing the package below"," ",(0,a.FD)("span",{onClick:Q,css:eg.link,onKeyDown:Q,role:"button",tabIndex:0,children:[" ","or use your own custom button."]}),(0,a.Y)("br",{}),"Repl Auth is not intended for API authentication."]}):(0,a.FD)(G.EY,{color:"dimmer",children:["Your users can log in to your App using a custom button. Start by importing the package below"," ",(0,a.FD)("span",{onClick:J,css:eg.link,onKeyDown:J,role:"button",tabIndex:0,children:[" ","or use a prebuilt login page."]})]}),et?void 0:er]}),(0,a.FD)(V.S,{children:["nodejs"===E&&z?null:(0,a.Y)(ea,{langKey:E}),z?(0,a.Y)(X,{langKey:E}):null]}),(0,a.FD)(V.S,{gap:8,children:[(0,a.FD)(V.S,{gap:2,children:[(0,a.Y)(G.EY,{multiline:!1,variant:"small",css:eg.usageSectionTitleText,children:"Usage"}),(0,a.Y)(eu.a,{css:eg.divider})]}),(0,a.Y)(V.S,{children:(0,a.FD)(V.S,{gap:12,children:[" ","nodejs"===E&&z?(0,a.Y)(ea,{langKey:E}):null,(0,a.Y)(eo,{langKey:E})]})})]}),(0,a.Y)(B.$n,{onClick:ee,text:"Disable Auth",colorway:"negative",variant:"outlined",loading:j||P})]}),es=(0,el.Vv)().getDescription({type:"replAuth"}),ef=(0,a.FD)(V.S,{gap:8,children:[(0,a.Y)(G.EY,{css:M.wp.textAlign.center,children:es}),(0,a.Y)(B.$n,{colorway:"primary",onClick:J,text:"Enable Login Page",loading:j||P,disabled:!!H,iconLeft:(0,a.Y)(eh.A,{})}),(0,a.FD)(G.EY,{color:"dimmer",css:M.wp.textAlign.center,children:["Alternatively,"," ",(0,a.Y)("span",{onClick:Q,css:eg.link,onKeyDown:Q,role:"button",tabIndex:0,children:"use a custom login button"}),".",(0,a.Y)("br",{}),"Repl Auth is not intended for API authentication."]})]}),ew=(0,a.Y)(ec.v,{href:m.ik.REPL_AUTH,variant:"nofill",target:"_blank",rel:"noopener",iconLeft:(0,a.Y)(ep.A,{}),text:"Learn more"});return(0,a.Y)(x.A,{pane:{type:"replAuth"},maxWidth:$?600:450,headerText:"Login with Replit",body:(0,a.FD)(a.FK,{children:[H?(0,a.Y)(ed.N,{text:H,colorway:$?void 0:"warning",icon:(0,a.Y)(em.A,{})}):null,null!=en?en:$?ei:ef]}),action:en?void 0:ew})}var ey=function(){return(0,a.FD)(V.S,{gap:16,children:[(0,a.FD)(G.EY,{children:[(0,a.Y)("a",{href:m.ik.REPL_AUTH,target:"_blank",rel:"noopener",css:eg.link,children:"Replit Authentication"})," ","is the fastest and easiest way to set up authentication in your App. Try it out by logging in or signing up."]}),(0,a.Y)(ec.v,{href:"/auth",as:"/signup",colorway:"primary",text:"Sign up",iconLeft:(0,a.Y)(ef.A,{})})]})}},24048:(e,n,t)=>{"use strict";t.d(n,{A:()=>nx});var r=t(88263),i=t(95139),o=t(17844),a=t(93629),l=t(71115),s=t(48875),c=t(20828),u=t(5504),d=t(83735),p=t(53231),f=t(6156),h=t(12694),m=t(86105),g=t(21462),v=t(12584),w=t(41114),y=t(86997);function b(){var e=(0,v._)(["\n  query AiDeveloperSection {\n    currentUser {\n      id\n      isStaff: hasRole(role: REPLIT_STAFF)\n    }\n  }\n"]);return b=function(){return e},e}var S={},Y=(0,w.J1)(b()),A=t(54319),x=t(70415),C=t(11165),_=t(79209),k=t(48521),D=t(11882),E=(0,_.AH)([k.wp.height(18)]);function R(){return(0,r.Y)(D.a,{css:E,text:"Staff-only",colorway:"warning"})}var I=t(38292),F=t(77089),T=t(76126),P=t(10429),L=t(85233),U=t(18870),N=t(1369),O=(0,A.qK)(),M=A.Ku?[{title:"override",value:A.Ku}]:Array.from((0,m._)(Object.entries(x.B)).concat([["custom",""]]),function(e){return{title:e[0],value:e[1]}}),B=(0,A.lJ)()||A.Ku?M[0]:M[1];function H(){var e,n,t,i=(e=(0,o._)({},S,void 0),y.I(Y,e)).data,a=(null==i||null==(n=i.currentUser)?void 0:n.isStaff)||!1,l=(0,h._)((0,g.useState)(!Object.values(M).map(function(e){return e.value}).includes(O)),2),s=l[0],c=l[1],u=(0,h._)((0,g.useState)(""),2),d=u[0],p=u[1];return a?(0,r.Y)(C.w,{id:"chatServiceEndpoint",title:(0,r.FD)(r.FK,{children:[(0,r.FD)(P.S,{row:!0,gap:8,align:"center",justify:"start",children:[(0,r.Y)(T.EY,{multiline:!1,children:"AI Chat Service Endpoint"}),(0,r.Y)(R,{})]}),(0,r.FD)(P.S,{gap:8,children:[(0,r.FD)(T.EY,{variant:"small",color:"dimmest",children:["Current endpoint: ",O]}),(0,r.Y)(T.EY,{variant:"small",color:"dimmest",children:"Reloading window is required for change to take effect."})]})]}),children:(0,r.FD)(P.S,{gap:12,children:[(0,r.Y)(L.l,{css:[k.wp.minWidth(184)],initialSelectedItem:null!=(t=M.find(function(e){return e.value===O}))?t:O?M[M.length-1]:B,onChange:function(e){(null==e?void 0:e.title)!=="custom"?((0,A.WQ)(e.value),c(!1),window.location.reload()):c(!0)},items:M}),s?(0,r.FD)(P.S,{row:!0,gap:4,children:[(0,r.Y)(F.pd,{value:d,onChange:function(e){p(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&(0,A.WQ)(d)}}),(0,r.Y)(I.K0,{alt:"Update custom url",onClick:function(){(0,A.WQ)(d),window.location.reload()},children:O!==d?(0,r.Y)(N.A,{}):(0,r.Y)(U.A,{})})]}):null]})}):null}var z=t(35084);function W(){var e=(0,v._)(["\n  query CodeSuggestionPreferences($replId: String!) {\n    currentUser {\n      id\n      userSubscriptionType\n    }\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        org {\n          id\n        }\n      }\n    }\n  }\n"]);return W=function(){return e},e}var G={},V=(0,w.J1)(W()),j=t(79784),Z=t(13771),q=t(46603);function K(e){var n=e.context,t=e.text,i=(0,h._)((0,g.useState)(!1),2),o=i[0],a=i[1];return(0,r.FD)(r.FK,{children:[(0,r.Y)(q.$n,{text:void 0===t?"Activate":t,colorway:"primary",onClick:function(){return a(!0)}}),(0,r.Y)(Z.A,{isOpen:o,onClose:function(){return a(!1)},type:"purchase",analyticsContext:{upgrade:{context:n}}})]})}var $=t(68912),J=t(31062),Q=t(13968);function X(){var e,n,t,a,u=(t={variables:{replId:(0,J.A)()}},a=(0,o._)({},G,t),y.I(V,a)).data,d=(null==u||null==(e=u.currentUser)?void 0:e.userSubscriptionType)===z.Oh.HackerPro,f=(null==u?void 0:u.getRepl.__typename)==="Repl"&&null!=(n=u.getRepl.org)&&!!n.id,m=(0,i.Po)((0,l.useRouter)()),g=(0,$.f)().isTeamWithAiDisabled,v=(0,c.g)("codeSuggestion"),w=v.preferences,b=v.update;return g?null:(0,r.FD)(P.S,{gap:12,children:[(0,r.Y)(Q.n,{currentValue:w.codeSuggestion,update:function(e){var n=b(e),t=!0,r=!1,i=void 0;try{for(var o,a=Object.entries(e)[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=(0,h._)(o.value,2),s=l[0],c=l[1];(0,p.u4)(p.AZ.SETTINGS_TOGGLED,{settingChanged:s,updatedValue:c})}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n},setting:s.KY.codeSuggestion,title:(0,r.FD)(r.FK,{children:[(0,r.Y)(P.S,{row:!0,gap:8,align:"center",children:(0,r.Y)(T.EY,{multiline:!1,children:"AI Code Completion"})}),(0,r.FD)(T.EY,{variant:"small",color:"dimmest",children:["Code completion provides inline ghost text suggestions while you code.",(0,r.Y)("br",{}),"Press tab or swipe right on your mobile device to accept."]})]})}),f||d||m?null:(0,r.FD)(P.S,{row:!0,gap:8,align:"center",justify:"space-between",children:[(0,r.Y)(T.EY,{children:"Upgrade for full access to Replit AI"}),(0,r.Y)(K,{text:"Upgrade to Replit ".concat(j.en),context:"workspace_settings_pane"})]})]})}var ee=t(19638),en=t(45263),et=t(64583),er=t(36112),ei=t(77967),eo=t(86814);function ea(e){return e.slice().sort(function(e,n){return e-n})}var el=(0,et.x)({ruler:[k.wp.borderRadius(8)],remove:[k.wp.borderRadius(4)],title:[k.wp.pr(8),k.wp.overflow("visible"),k.wp.flex.shrink(0)],body:[k.wp.flex.wrapReverse,k.wp.align.start,k.wp.justify.end,k.wp.flex.growAndShrink(1),{gap:en.LU.space4}],list:[k.wp.flex.wrap,k.wp.flex.growAndShrink(1),k.wp.align.end,k.wp.justify.end,{gap:en.LU.space4}]});function es(e){var n=e.pos,t=e.onRemove;return(0,r.FD)(er.ui,{css:el.ruler,py:4,px:8,row:!0,gap:4,align:"center",elevated:!0,children:[(0,r.Y)(T.EY,{multiline:!1,children:n}),(0,r.Y)(I.K0,{css:el.remove,alt:"Remove ruler",onClick:t,children:(0,r.Y)(ei.A,{})})]})}function ec(){var e=(0,h._)((0,g.useState)(!1),2),n=e[0],t=e[1],i=(0,h._)((0,g.useState)(80),2),o=i[0],a=i[1],l=(0,g.useRef)(null),s=(0,g.useRef)(null),u=-1===o,d=o>=0&&o<=1e3,p=(0,c.g)("rulers"),f=p.preferences,v=p.update,w=ea(f.rulers);return(0,r.Y)(C.w,{id:"rulers",title:(0,r.Y)(T.EY,{css:el.title,multiline:!1,children:"Rulers"}),children:(0,r.FD)(P.S,{css:el.body,row:!0,children:[(0,r.Y)(P.S,{css:el.list,row:!0,children:w.map(function(e,n){return(0,r.Y)(es,{pos:e,onRemove:function(){v({rulers:w.filter(function(e,t){return t!==n})})}},n)})}),n?(0,r.FD)(P.S,{row:!0,gap:4,align:"center",children:[(0,r.Y)(F.pd,{ref:l,type:"number",style:{width:u?"6ch":o.toString().length+5.5+"ch"},value:o>=0?o.toString():"",onChange:function(e){if(""===e.target.value)a(-1);else{var n=parseInt(e.target.value,10);isNaN(n)||a(n)}},onKeyDown:function(e){"Escape"===e.key?(a(80),t(!1)):"Enter"===e.key&&d&&(v({rulers:ea((0,m._)(w).concat([o]))}),t(!1),a(80))},onBlur:function(e){e.relatedTarget!==s.current&&(t(!1),a(80))},onFocus:function(e){e.target.select()},autoFocus:!0}),(0,r.Y)(q.$n,{ref:s,text:"Accept",colorway:"primary",iconLeft:(0,r.Y)(U.A,{}),disabled:!d,onClick:function(){d&&(v({rulers:ea((0,m._)(w).concat([o]))}),t(!1),a(80))},onBlur:function(e){e.relatedTarget!==l.current&&(t(!1),a(80))}})]}):(0,r.Y)(r.FK,{children:w.length>=10?null:(0,r.Y)(q.$n,{text:"Add Ruler",iconLeft:(0,r.Y)(eo.A,{}),onClick:function(){return t(!0)}})})]})})}var eu=t(83846),ed=t(91163),ep=(0,et.x)({container:[(0,eu._)({},C.c,[k.wp.colWithGap(8)])],title:[k.wp.flex.growAndShrink(1)],switchWrapper:[k.wp.rowWithGap(8),k.wp.align.center,k.wp.justify.end,(0,eu._)({},C.c,[k.wp.flex.rowReverse])],switchLabel:[(0,eu._)({},C.c,[k.wp.ml(8)])]});function ef(){var e=(0,c.g)("showLeadingWhitespace","showTrailingWhitespace","showEnclosedWhitespace","showSelectedWhitespace"),n=e.preferences,t=e.update;return(0,r.FD)(P.S,{css:ep.container,row:!0,justify:"space-between",align:"start",children:[(0,r.FD)(P.S,{css:ep.title,children:[(0,r.Y)(T.EY,{children:"Show Whitespace"}),(0,r.Y)(T.EY,{multiline:!0,variant:"small",color:"dimmest",children:"Make whitespace characters visible, such as tabs and spaces."})]}),(0,r.FD)(P.S,{gap:12,children:[(0,r.FD)(P.S,{css:ep.switchWrapper,tag:"label",children:[(0,r.Y)(T.EY,{variant:"small",css:ep.switchLabel,children:"Leading"}),(0,r.Y)(ed.d,{"aria-label":"Show leading whitespace",isSelected:n.showLeadingWhitespace,onChange:function(e){t({showLeadingWhitespace:e})}})]}),(0,r.FD)(P.S,{css:ep.switchWrapper,tag:"label",children:[(0,r.Y)(T.EY,{variant:"small",css:ep.switchLabel,children:"Enclosed"}),(0,r.Y)(ed.d,{"aria-label":"Show enclosed whitespace",isSelected:n.showEnclosedWhitespace,onChange:function(e){t({showEnclosedWhitespace:e})}})]}),(0,r.FD)(P.S,{css:ep.switchWrapper,tag:"label",children:[(0,r.Y)(T.EY,{variant:"small",css:ep.switchLabel,children:"Trailing"}),(0,r.Y)(ed.d,{"aria-label":"Show trailing whitespace",isSelected:n.showTrailingWhitespace,onChange:function(e){t({showTrailingWhitespace:e})}})]}),(0,r.FD)(P.S,{css:ep.switchWrapper,tag:"label",children:[(0,r.Y)(T.EY,{variant:"small",css:ep.switchLabel,children:"Selected"}),(0,r.Y)(ed.d,{"aria-label":"Show selected whitespace",isSelected:n.showSelectedWhitespace,onChange:function(e){t({showSelectedWhitespace:e})}})]})]})]})}var eh=t(61005),em=t(17459),eg=t(51026);function ev(){var e=(0,v._)(["\n  fragment ThemesSwitcherCustomTheme on CustomTheme {\n    id\n    title\n    isCurrentUserThemeAuthor\n    colorScheme\n  }\n"]);return ev=function(){return e},e}function ew(){var e=(0,v._)(["\n  query ThemesSwitcherCurrentUserAuthoredThemes(\n    $input: CurrentUserAuthoredThemesInput!\n  ) {\n    currentUser {\n      id\n      authoredThemes(input: $input) {\n        ... on CustomThemeConnection {\n          items {\n            id\n            ...ThemesSwitcherCustomTheme\n          }\n          pageInfo {\n            nextCursor\n            hasNextPage\n          }\n        }\n        ... on UnauthorizedError {\n          message\n        }\n        ... on UserError {\n          message\n        }\n      }\n    }\n  }\n  ","\n"]);return ew=function(){return e},e}function ey(){var e=(0,v._)(["\n  query ThemesSwitcherCurrentUserInstalledThemes(\n    $input: CurrentUserInstalledThemesInput!\n  ) {\n    currentUser {\n      id\n      installedThemes(input: $input) {\n        ... on InstalledThemeConnection {\n          items {\n            id\n            themeVersion {\n              id\n            }\n            customTheme {\n              id\n              ...ThemesSwitcherCustomTheme\n            }\n          }\n          pageInfo {\n            nextCursor\n            hasNextPage\n          }\n        }\n        ... on UnauthorizedError {\n          message\n        }\n        ... on UserError {\n          message\n        }\n      }\n    }\n  }\n  ","\n"]);return ey=function(){return e},e}var eb={},eS=(0,w.J1)(ev()),eY=(0,w.J1)(ew(),eS),eA=(0,w.J1)(ey(),eS),ex=t(36640),eC=t(34467),e_=t(27469),ek=t(39695),eD=t(62038),eE=t(62916),eR=function(e){var n=(0,h._)((0,g.useState)(0),2),t=n[0],r=n[1];return(0,eE.A)(function(){null!==e.current&&r(e.current.getBoundingClientRect().height)},[e]),t},eI=t(93369),eF=t(61471),eT=t(29542),eP=t.n(eT),eL=t(90535),eU=t(973),eN=t(90899),eO=(0,et.x)({self:[{border:"1px solid",borderColor:en.LU.outlineDimmest},k.wp.zIndex(5),k.wp.maxHeight(300),k.wp.position.absolute,k.wp.overflowY("auto"),k.wp.width("100%"),k.wp.left(0),k.wp.borderRadius(8),k.wp.flex.column],apron:[k.wp.flex.grow(1),{borderTop:"1px solid",borderTopColor:en.LU.outlineDimmest}],menuItems:[k.wp.flex.growAndShrink(1),k.wp.overflowY("auto"),{listStyle:"none"}],menuApronItem:[eU.b.listItem],menuApronWrapper:[k.wp.flex.column]}),eM=(0,eL.xQ)();let eB=function(e){var n=e.children,t=e.className,i=e.bottomOffset;return(0,r.FD)(er.ui,{className:t,tag:"ul",elevated:!0,css:eO.self,style:{bottom:"calc(".concat(i,"px + ").concat(en.LU.space8,")")},children:[(0,r.Y)(P.S,{css:eO.menuItems,children:n}),(0,r.Y)(er.ui,{css:eO.apron,children:(0,r.FD)(P.S,{css:eO.menuApronWrapper,children:[(0,r.Y)(eP(),{legacyBehavior:!0,href:eM.href,as:eM.as,children:(0,r.FD)(P.D.a,{css:eO.menuApronItem,children:[(0,r.Y)(eN.A,{}),(0,r.Y)(T.EY,{multiline:!1,children:"Explore Themes"})]})}),(0,r.Y)(eP(),{legacyBehavior:!0,href:eL.y_.href,as:eL.y_.as,children:(0,r.FD)(P.S,{css:eO.menuApronItem,p:8,row:!0,gap:12,justify:"start",align:"center",children:[(0,r.Y)(eo.A,{}),(0,r.Y)(T.EY,{multiline:!1,children:"Create a Theme"})]})})]})})]})};var eH=t(59655),ez=t(80762),eW=(0,et.x)({trigger:[eU.b.filled,k.wp.p(8),k.wp.color.foregroundDefault,k.wp.border({width:0})],chevron:[k.wp.transition.snappy],selectLabel:[k.wp.flex.growAndShrink(1),{textAlign:"left",lineHeight:en.LU.lineHeightHeaderBig}],menuWrapper:[k.wp.position.relative],sectionHeadings:[k.wp.p(8),k.wp.fontWeight.bold,k.wp.fontSize(12),{borderTop:"1px solid ".concat(en.LU.outlineDimmer),textTransform:"uppercase"}],officialHeading:[k.wp.p(8),k.wp.fontWeight.bold,k.wp.fontSize(12),{textTransform:"uppercase"}]}),eG=P.D.li;function eV(e){var n=e.id,t=e.sections,i=e.initialSelectedItem,l=e.selectedItem,s=e.onChange,c=e.placeholder,u=e.dataCy,d=e.paginationOptions,p=(0,em._)(e,["id","sections","initialSelectedItem","selectedItem","onChange","placeholder","dataCy","paginationOptions"]),f=(0,g.useId)(),h=(0,eI.A)(s),m=(0,g.useRef)(null),v=eR(m),w=Object.values(t).flat(),y=(0,ek.WM)((0,a._)((0,o._)({items:w,initialSelectedItem:i,onSelectedItemChange:function(e){var n=e.selectedItem;n&&h.current(n)},stateReducer:function(e,n){var t=n.type,r=n.changes;switch(t){case ek.WM.stateChangeTypes.MenuKeyDownEnter:case ek.WM.stateChangeTypes.MenuKeyDownSpaceButton:case ek.WM.stateChangeTypes.ItemClick:return(0,a._)((0,o._)({},r),{isOpen:!0});default:return r}}},void 0!==l&&{selectedItem:l}),{id:f})),b=(0,eF.A)({onLoadMore:d.loadMore,rootMargin:"0px 0px 300px 0px"}).targetRef,S=function(e){var n,t=e.item,i=e.index;return(0,r.Y)(eG,(0,a._)((0,o._)({},y.getItemProps({item:t,index:i})),{"data-cy":t.dataCy,children:(0,r.Y)(eD.A,{highlighted:i===y.highlightedIndex,selected:t.id===(null==(n=y.selectedItem)?void 0:n.id),title:t.title})}))};return(0,r.FD)(P.S,{id:n,dataCy:u,children:[(0,r.Y)(e_.s,{children:(0,r.Y)("label",(0,a._)((0,o._)({},y.getLabelProps()),{children:"select a theme"}))}),(0,r.Y)("button",(0,a._)((0,o._)({type:"button",css:eW.trigger},p,y.getToggleButtonProps({ref:m})),{children:(0,r.FD)(P.S,{align:"center",row:!0,gap:8,children:[(0,r.Y)(eN.A,{size:16}),y.selectedItem?(0,r.Y)(T.EY,{css:eW.selectLabel,multiline:!1,children:y.selectedItem.title}):(0,r.Y)(T.EY,{color:"dimmer",css:eW.selectLabel,multiline:!1,children:c}),(0,r.Y)(eH.A,{rotate:180*!!y.isOpen,css:eW.chevron})]})})),(0,r.Y)("div",(0,a._)((0,o._)({},y.getMenuProps()),{css:eW.menuWrapper,children:y.isOpen&&w.length>0?(0,r.FD)(eB,{bottomOffset:v,children:[(0,r.Y)(T.EY,{color:"dimmer",css:eW.officialHeading,multiline:!1,children:"Official Themes"}),t.official.map(function(e,n){return(0,r.Y)(S,{item:e,index:n},"".concat(e.id))}),t.authored.length?(0,r.FD)(r.FK,{children:[(0,r.Y)(T.EY,{color:"dimmer",css:eW.sectionHeadings,multiline:!1,children:"Your Themes"}),t.authored.map(function(e,n){var i=t.official.length;return(0,r.Y)(S,{item:e,index:i+n},"".concat(e.id))})]}):null,t.installed.length?(0,r.FD)(r.FK,{children:[(0,r.Y)(T.EY,{color:"dimmer",css:eW.sectionHeadings,multiline:!1,children:"Community Themes"}),t.installed.map(function(e,n){var i=t.official.length+t.authored.length;return(0,r.Y)(S,{item:e,index:i+n},"".concat(e.id))})]}):null,d.authoredHasNextPage||d.installedHasNextPage?(0,r.Y)(P.S,{align:"center",children:d.loading?(0,r.Y)(P.S,{p:8,align:"center",children:(0,r.Y)(ez.A,{size:12})}):(0,r.Y)(I.K0,{tooltipBehavior:"hidden",alt:"Show more",onClick:d.loadMore,ref:b,children:(0,r.Y)(eH.A,{})})}):null]}):null}))]})}var ej=function(e,n){var t,r,i=n.fetchMoreResult;if((null==(t=e.currentUser)?void 0:t.authoredThemes.__typename)==="CustomThemeConnection"&&(null==(r=i.currentUser)?void 0:r.authoredThemes.__typename)==="CustomThemeConnection"){var l=e.currentUser.authoredThemes.items,s=i.currentUser.authoredThemes.items;return(0,a._)((0,o._)({},i),{currentUser:(0,a._)((0,o._)({},i.currentUser),{authoredThemes:(0,a._)((0,o._)({},i.currentUser.authoredThemes),{items:(0,m._)(l).concat((0,m._)(s))})})})}return i},eZ=function(e,n){var t,r,i=n.fetchMoreResult;if((null==(t=e.currentUser)?void 0:t.installedThemes.__typename)==="InstalledThemeConnection"&&(null==(r=i.currentUser)?void 0:r.installedThemes.__typename)==="InstalledThemeConnection"){var l=e.currentUser.installedThemes.items,s=i.currentUser.installedThemes.items;return(0,a._)((0,o._)({},i),{currentUser:(0,a._)((0,o._)({},i.currentUser),{installedThemes:(0,a._)((0,o._)({},i.currentUser.installedThemes),{items:(0,m._)(l).concat((0,m._)(s))})})})}return i},eq=function(e){var n=e.authoredThemesData,t=e.installedThemesData,r=e.fetchMoreAuthored,i=e.fetchMoreInstalled;return(0,g.useCallback)(function(){var e,o;(null==n||null==(e=n.currentUser)?void 0:e.authoredThemes.__typename)==="CustomThemeConnection"&&n.currentUser.authoredThemes.pageInfo.hasNextPage?r({variables:{input:{after:n.currentUser.authoredThemes.pageInfo.nextCursor,count:100}},updateQuery:ej}):(null==t||null==(o=t.currentUser)?void 0:o.installedThemes.__typename)==="InstalledThemeConnection"&&t.currentUser.installedThemes.pageInfo.hasNextPage&&i({variables:{input:{after:t.currentUser.installedThemes.pageInfo.nextCursor,count:100}},updateQuery:eZ})},[n,t,r,i])},eK=t(20644),e$=t(33781),eJ=t(29e3),eQ=t(54087),eX={select:function(e){return[e?eJ.S.backgroundPulse(en.LU.accentPrimaryDefault,en.LU.accentPrimaryDimmest):{}]}};let e0=function(e){var n,t,i,l,s,c,u,d,p,f,m=e.context,v=(0,em._)(e,["context"]),w=(0,g.useId)(),b=(0,ex.A)().showError,S=(n={variables:{input:{count:100}},fetchPolicy:"network-only",ssr:!1,notifyOnNetworkStatusChange:!0,onError:function(e){return b(e.message)},onCompleted:function(e){var n,t=null==(n=e.currentUser)?void 0:n.authoredThemes;((null==t?void 0:t.__typename)==="UnauthorizedError"||(null==t?void 0:t.__typename)==="UserError")&&b(t.message)}},t=(0,o._)({},eb,n),y.I(eY,t)),Y=S.data,A=S.loading,x=S.error,C=S.fetchMore,_=(0,h._)((i={variables:{input:{count:100}},fetchPolicy:"network-only",ssr:!1,notifyOnNetworkStatusChange:!0,onError:function(e){return b(e.message)},onCompleted:function(e){var n,t=null==(n=e.currentUser)?void 0:n.installedThemes;((null==t?void 0:t.__typename)==="UnauthorizedError"||(null==t?void 0:t.__typename)==="UserError")&&b(t.message)}},l=(0,o._)({},eb,i),eg._(eA,l)),2),D=_[0],E=_[1],R=E.data,I=E.loading,F=E.error,T=E.fetchMore,L=(0,e$.D)(),U=L.setActiveTheme,N=L.isSaving,O=L.error,M=L.theme;(0,g.useEffect)(function(){var e,n=null==Y||null==(e=Y.currentUser)?void 0:e.authoredThemes;(null==n?void 0:n.__typename)!=="CustomThemeConnection"||n.pageInfo.hasNextPage||D()},[Y,D]);var B=((null==R||null==(c=R.currentUser)||null==(s=c.installedThemes)?void 0:s.__typename)==="InstalledThemeConnection"?R.currentUser.installedThemes.items:[]).map(function(e){return e.customTheme}),H=(null==Y||null==(d=Y.currentUser)||null==(u=d.authoredThemes)?void 0:u.__typename)==="CustomThemeConnection"?Y.currentUser.authoredThemes.items:[];(0,g.useEffect)(function(){O&&b(O.message)},[O,b]);var z=eq({authoredThemesData:Y,installedThemesData:R,fetchMoreAuthored:C,fetchMoreInstalled:T}),W=(null==Y||null==(p=Y.currentUser)?void 0:p.authoredThemes.__typename)==="CustomThemeConnection"&&Y.currentUser.authoredThemes.pageInfo.hasNextPage,G=(null==R||null==(f=R.currentUser)?void 0:f.installedThemes.__typename)==="InstalledThemeConnection"&&R.currentUser.installedThemes.pageInfo.hasNextPage;if(x||F)return(0,r.Y)(P.S,{children:(0,r.Y)(eQ.N,{colorway:"negative",text:"Something went wrong loading your themes"})});var V={official:eC.U,authored:H,installed:B};return(0,r.Y)(P.S,{children:(0,r.Y)(eV,(0,o._)({css:[eX.select(N),k.wp.backgroundColor.backgroundDefault,{":not([disabled]):hover":{background:en.LU.backgroundHigher}}],id:w,dataCy:"preferences-theme-dropdown",sections:V,disabled:N,paginationOptions:{loadMore:z,authoredHasNextPage:W,installedHasNextPage:G,loading:A||I},selectedItem:M.isOfficial?eC.U.find(function(e){return e.id===M.id}):(0,a._)((0,o._)({},M),{title:M.name}),onChange:function(e){U(e.id),"isCurrentUserThemeAuthor"in e&&(0,eK.Ot)({themeId:e.id,colorScheme:e.colorScheme,isAlreadyInstalled:!0,isAuthor:e.isCurrentUserThemeAuthor,context:m})}},v))})};var e1=t(69938),e2=(0,et.x)({statusBannerContainer:[k.wp.maxWidth("calc(100% - 12px)")],themesSwitcher:[k.wp.minWidth(184),k.wp.backgroundColor.backgroundHigher]});function e4(e){var n=e.hideLayoutControl,t=e.className,h=e.resetLayout,m=(0,c.g)("isLayoutStacked","fontSize","minimapDisplay","wrapping","keyboardHandler","multiselectModifierKey","showFileTreeGitStatus","codeIntelligence","codeActionsOnSave","formatOnSave","semanticTokens","accessibleTerminal","shellBellAudio","webviewAutoOpenOnPortOpened","chatAudioNotification","agentAudioNotification","agentPushNotification","assistantPushNotification","forwardPortsAutomatically","acceptSuggestionOnCommitCharacter","enableCloseBracketMatching"),g=m.preferences,v=m.update,w=(0,i.Po)((0,l.useRouter)()),y=(0,i.m5)(),b=(0,eh.oR)(),S=(0,f.vm)(),Y=(0,u._P)({controlName:"flag-lsp-semantic-tokens",logFlagToAnalytics:!1}),A=(0,u._P)({controlName:"flag-authentic-zealous-robots"}),x=function(e){Object.keys(e).forEach(function(n){var t=e[n];(0,p.u4)(p.AZ.SETTINGS_TOGGLED,{settingChanged:n,updatedValue:t})}),v(e)};if(!g)return null;var _=(0,a._)((0,o._)({},s.KY.multiselectModifierKey),{options:s.KY.multiselectModifierKey.options.map(function(e){return(0,a._)((0,o._)({},e),{title:(0,d.t3)("cmdOrCtrlKey"===e.id?d.YX.CMD_OR_CTRL_KEY:d.YX.ALT_KEY,S)})})});return(0,r.FD)(er.ui,{className:t,background:"default",p:16,gap:12,children:[n?null:(0,r.FD)(r.FK,{children:[(0,r.Y)(Q.n,{setting:s.KY.layout,update:x,currentValue:g.isLayoutStacked,rightComponent:h?(0,r.Y)(I.K0,{alt:"Reset layout",onClick:function(){h.reset()},children:h.resetting?(0,r.Y)(ez.A,{}):(0,r.Y)(N.A,{})}):null}),(0,r.Y)(e1.a,{})]}),(0,r.Y)(Q.n,{setting:s.KY.fontSize,update:x,currentValue:g.fontSize}),(0,r.Y)(e1.a,{}),(0,r.Y)(C.w,{id:"acceptSuggestionOnCommitCharacter",title:(0,r.FD)(r.FK,{children:[(0,r.Y)(T.EY,{children:"Accept Suggestion on Commit Character"}),(0,r.FD)(T.EY,{variant:"small",color:"dimmest",children:["Controls whether suggestions should be accepted on commit characters. For example, in JavaScript, the semi-colon (",(0,r.Y)("code",{children:";"}),") can be a commit character that accepts the suggestion and types the character."]})]}),children:(0,r.Y)(ed.d,{"aria-label":"Accept suggestion on commit character",isSelected:g.acceptSuggestionOnCommitCharacter,onChange:function(e){x({acceptSuggestionOnCommitCharacter:e})}})}),(0,r.Y)(e1.a,{}),(0,r.Y)(C.w,{id:"enableCloseBracketMatching",title:(0,r.FD)(r.FK,{children:[(0,r.Y)(T.EY,{children:"Auto close brackets"}),(0,r.Y)(T.EY,{variant:"small",color:"dimmest",children:"Controls whether the editor should automatically close brackets after the user adds an opening bracket."})]}),children:(0,r.Y)(ed.d,{"aria-label":"Auto close brackets",isSelected:g.enableCloseBracketMatching,onChange:function(e){x({enableCloseBracketMatching:e})}})}),(0,r.Y)(e1.a,{}),(0,r.Y)(ee.Ay,{}),(0,r.Y)(e1.a,{}),(0,r.Y)(Q.n,{setting:s.KY.wrapping,update:x,currentValue:g.wrapping}),(0,r.Y)(e1.a,{}),y?null:(0,r.FD)(r.FK,{children:[(0,r.Y)(Q.n,{setting:s.KY.minimap,update:x,currentValue:g.minimapDisplay}),(0,r.Y)(e1.a,{})]}),(0,r.Y)(ec,{}),(0,r.Y)(e1.a,{}),(0,r.Y)(Q.n,{setting:s.KY.keyboardHandler,update:x,currentValue:g.keyboardHandler}),(0,r.Y)(e1.a,{}),(0,r.Y)(Q.n,{setting:_,update:x,currentValue:g.multiselectModifierKey}),(0,r.Y)(e1.a,{}),(0,r.Y)(Q.n,{setting:s.KY.showFileTreeGitStatus,update:x,currentValue:g.showFileTreeGitStatus}),(0,r.Y)(e1.a,{}),(0,r.Y)(e1.a,{}),(0,r.Y)(X,{}),(0,r.Y)(e1.a,{}),(0,r.Y)(H,{}),(0,r.Y)(e1.a,{}),(0,r.Y)(Q.n,{setting:s.KY.codeIntelligence,update:x,currentValue:g.codeIntelligence}),(0,r.Y)(e1.a,{}),Y&&g.codeIntelligence?(0,r.FD)(r.FK,{children:[(0,r.Y)(Q.n,{setting:s.KY.semanticTokens,update:x,currentValue:g.semanticTokens}),(0,r.Y)(e1.a,{})]}):null,(0,r.Y)(ef,{}),(0,r.Y)(e1.a,{}),(0,r.Y)(Q.n,{setting:s.KY.accessibleTerminal,update:x,currentValue:g.accessibleTerminal}),(0,r.Y)(e1.a,{}),(0,r.Y)(Q.n,{setting:s.KY.shellBellAudio,update:x,currentValue:g.shellBellAudio}),(0,r.Y)(e1.a,{}),(0,r.Y)(C.w,{id:"webviewAutoOpenOnPortOpened",title:(0,r.FD)(r.FK,{children:[(0,r.Y)(T.EY,{children:b?"Automatic Preview (unavailable in this Repl)":"Automatic Preview"}),(0,r.Y)(T.EY,{variant:"small",color:"dimmest",children:"Open a web preview automatically when a port is open"}),b?(0,r.Y)(P.S,{css:e2.statusBannerContainer,pt:8,children:(0,r.Y)(eQ.N,{colorway:"orange",text:'This preference is unavailable in Extension Apps. To view custom tools in dev mode, click the "Preview" button in Extension Devtools instead.'})}):null]}),children:(0,r.Y)(ed.d,{"aria-label":"Automatic Webview",isSelected:g.webviewAutoOpenOnPortOpened,isDisabled:b,onChange:function(e){x({webviewAutoOpenOnPortOpened:e})}})}),(0,r.Y)(e1.a,{}),(0,r.Y)(Q.n,{setting:s.KY.forwardPortsAutomatically,update:x,currentValue:g.forwardPortsAutomatically}),w?null:(0,r.FD)(r.FK,{children:[(0,r.Y)(e1.a,{}),(0,r.Y)(C.w,{id:"theme",title:"Theme",children:(0,r.Y)(e0,{css:e2.themesSwitcher,context:eK.iu.WorkspacePreferencesPane})})]}),(0,r.Y)(e1.a,{}),(0,r.Y)(Q.n,{setting:s.KY.chatAudioNotification,update:x,currentValue:g.chatAudioNotification}),A?(0,r.FD)(r.FK,{children:[(0,r.Y)(e1.a,{}),(0,r.Y)(Q.n,{setting:s.KY.agentAudioNotification,update:x,currentValue:g.agentAudioNotification})]}):null,(0,r.Y)(e1.a,{}),(0,r.Y)(Q.n,{setting:s.KY.agentPushNotification,update:x,currentValue:g.agentPushNotification}),(0,r.Y)(e1.a,{}),(0,r.Y)(Q.n,{setting:s.KY.assistantPushNotification,update:x,currentValue:g.assistantPushNotification})]})}var e5=t(5204),e3=t(32957),e6=t(29383),e8=t(9340),e7=t(24365),e9=t(26987),ne=t(29531),nn=t(28216),nt=t(42306),nr=t(56002),ni=t(86169),no=t(29064),na=t(69258);function nl(e){var n=(0,g.useRef)(null),t=(0,g.useRef)([]);function r(){n.current&&clearTimeout(n.current),t.current=[]}function i(n){e({type:"success",shortcut:n.length>1?[n[0],n[1]]:n[0]}),r()}return{onKeyDown:function(r){var o=n.current,a=t.current;r.preventDefault(),r.stopPropagation(),o&&clearTimeout(o);var l=(0,e7.yz)(r);if(l){if((0,e7.RW)(l))return void e({type:"update",recorded:a.length?[a[0],l]:[l]});if(a.length>0&&"Enter"===l)return void i(a);a.push(l),e({type:"update",recorded:a}),n.current=setTimeout(function(){return i(a)},600*(2!==a.length))}},startRecording:function(){r(),e({type:"start"})},stopRecording:function(){r(),e({type:"stop"})}}}var ns=(0,et.x)({row:[k.wp.minHeight(28)],left:[k.wp.flex.grow(0),k.wp.flex.shrink(1)],right:[k.wp.position.relative,k.wp.flex.grow(1),k.wp.flex.shrink(0)],recordingRow:[k.wp.flex.column,k.wp.align.center,k.wp.justify.end],recordingRowKeys:[k.wp.position.relative],recordingRowPlaceholder:[k.wp.display.flex,k.wp.align.baseline,k.wp.rowWithGap(4),{fontStyle:"italic"}],keys:[k.wp.display.inlineFlex,k.wp.rowWithGap(12)],secondaryText:[k.wp.display.flex,k.wp.flex.row,k.wp.align.center,k.wp.rowWithGap(4)],secondaryTextId:[k.wp.flex.grow(1),k.wp.flex.shrink(0)],secondaryTextDescription:[k.wp.flex.grow(0),k.wp.flex.shrink(1),k.wp.color.foregroundDimmest]}),nc=(0,et.x)({input:[{opacity:0,width:1}],searchingText:[{fontStyle:"italic"}]});function nu(e){var n,t,i,o,a=e.command,l=e.filter,s=e.shortcutsToCommands,c=e.onViewShortcutConflicts,u=(0,ne.ef)(),d=(0,ne.vU)(),p=(0,ne.UU)(a.id),f=(0,h._)((0,g.useState)(null),2),m=f[0],v=f[1],w=nl(function(e){switch(e.type){case"start":return void v({recorded:[]});case"stop":return void v(null);case"update":return void v({recorded:e.recorded});case"success":var n=(0,e7.u7)(e.shortcut);if(!n||u(a.id,n))return void v(null);v(null);return;case"error":return void v(function(n){var t;return{error:e.message,recorded:null!=(t=null==n?void 0:n.recorded)?t:[]}})}}),y=w.stopRecording,b=w.startRecording,S=w.onKeyDown,Y=(0,e3.A)(function(){return y()},[]),A=!!m;ng(A);var x=null!=(o=null==m?void 0:m.recorded)?o:[],C=null==m?void 0:m.error,_=l.length>0,k=null==(n=e8.A.match(l,a.name))?void 0:n.ranges,D=null==(t=e8.A.match(l,a.id))?void 0:t.ranges,E=(null==a?void 0:a.description)?null==(i=e8.A.match(l,a.description))?void 0:i.ranges:void 0,R=(0,e6.A)(function(){return l.replaceAll('"',"").split("-").map(function(e){return e.toLowerCase()})},[l]);return(0,r.FD)(P.S,{gap:8,"data-testid":a.id,children:[(0,r.FD)(P.S,{css:ns.row,row:!0,gap:8,align:"center",children:[(0,r.FD)(P.S,{css:ns.left,gap:2,children:[(0,r.Y)(nn.e,{text:a.name,highlight:k,dimmed:_}),(0,r.FD)(T.EY,{variant:"small",css:ns.secondaryText,multiline:!1,children:[_?(0,r.Y)(nn.e,{css:ns.secondaryTextId,text:a.id,highlight:D,dimmed:_}):null,a.description?(0,r.FD)(r.FK,{children:[_?(0,r.Y)(T.EY,{color:"dimmest",multiline:!1,children:""}):null,(0,r.Y)(nn.e,{css:ns.secondaryTextDescription,text:a.description,highlight:E,dimmed:_})]}):null]})]}),(0,r.FD)(P.S,{innerRef:A?Y:void 0,css:ns.right,row:!0,gap:16,align:"center",justify:"end",children:[A?(0,r.Y)(e5.n1,{autoFocus:!0,restoreFocus:!0,children:(0,r.Y)("input",{onKeyDown:S,css:nc.input})}):null,a.shortcut&&!A&&s.length>1?(0,r.Y)(I.K0,{"data-testid":"View conflicts",alt:"View conflicts",onClick:function(){(0,g.startTransition)(function(){a.shortcut&&c(nd([a.shortcut]))})},children:(0,r.Y)(na.A,{color:en.LU.foregroundDimmer})}):null,a.shortcut&&!A?(0,r.Y)(e9._y,{small:!0,keyCombo:a.shortcut,match:R}):null,a.shortcut||A?null:(0,r.FD)(r.FK,{children:[(0,r.Y)(q.$n,{size:"small",variant:"outlined",iconLeft:(0,r.Y)(eo.A,{}),text:"Add shortcut",onClick:function(){return b()}}),p?(0,r.Y)(I.K0,{alt:"Reset",onClick:function(){return u(a.id,p)},children:(0,r.Y)(N.A,{})}):null]}),A?(0,r.Y)(P.S,{css:ns.recordingRow,children:(0,r.FD)(P.S,{row:!0,gap:8,align:"center",children:[(0,r.Y)(P.S,{css:ns.recordingRowKeys,children:x.length>0?(0,r.Y)(P.S,{css:ns.keys,children:x.map(function(e,n){return(0,r.Y)(e9._y,{small:!0,keyCombo:e},"".concat(e,"-").concat(n))})}):(0,r.Y)(T.EY,{multiline:!1,color:"dimmest",css:ns.recordingRowPlaceholder,children:"Recording"})}),(0,r.Y)(I.K0,{alt:"Stop",onClick:function(){return y()},children:(0,r.Y)(ny,{})})]})}):null,a.shortcut&&!A?(0,r.FD)(P.S,{row:!0,gap:4,children:[p&&p!==a.shortcut?(0,r.Y)(I.K0,{alt:"Reset",onClick:function(){return u(a.id,p)},children:(0,r.Y)(N.A,{})}):null,(0,r.Y)(I.K0,{alt:"Change",onClick:function(){return b()},children:(0,r.Y)(nr.A,{})}),(0,r.Y)(I.K0,{alt:"Remove",onClick:function(){return d(a.id)},children:(0,r.Y)(no.A,{})})]}):null]})]}),C?(0,r.Y)(eQ.N,{icon:(0,r.Y)(na.A,{}),colorway:"warning",text:C,closable:!0,closeAction:function(){return v(function(e){var n;return{recorded:null!=(n=null==e?void 0:e.recorded)?n:[]}})}}):null]})}function nd(e){var n=e.flat();return n.length>1?n.map(function(e){return nd([e])}).join(" "):(0,e7.Ft)(n[0]).map(function(e){return'"'.concat(e,'"')}).join("-").replaceAll(" ","space")}var np=(0,et.x)({surface:[k.wp.borderRadius(8),k.wp.colWithGap(12)]});function nf(e){var n=e.search,t=e.setSearch,i=(0,g.useRef)(null),o=(0,h._)((0,g.useState)(!1),2),a=o[0],l=o[1];ng(a);var s=nl(function(e){var n,r,o;switch(e.type){case"start":l(!0),t(""),null==i||null==(n=i.current)||n.focus();return;case"stop":case"error":l(!1),null==i||null==(r=i.current)||r.focus(),null==i||null==(o=i.current)||o.select();return;case"success":return void t(nd([e.shortcut]));case"update":return void t(nd(e.recorded))}}),c=s.stopRecording,u=s.startRecording,d=s.onKeyDown;return(0,r.FD)(P.S,{row:!0,gap:8,align:"center",children:[(0,r.Y)(e5.n1,{children:(0,r.Y)(F.pd,{ref:i,placeholder:a?"Searching with pressed keys. Press Escape to exit":"Type to search keyboard shortcuts",onBlur:a?c:void 0,onChange:function(e){t(e.currentTarget.value)},onKeyDown:a?function(e){"Escape"===e.key?c():d(e)}:void 0,value:n})}),(0,r.Y)(P.S,{row:!0,gap:4,align:"center",children:a?(0,r.FD)(r.FK,{children:[(0,r.Y)(T.EY,{color:"dimmest",css:nc.searchingText,multiline:!1,children:"Searching"}),(0,r.Y)(I.K0,{alt:"Stop Recording",onClick:c,children:(0,r.Y)(ny,{})})]}):(0,r.Y)(I.K0,{alt:"Record Keys",onClick:u,children:(0,r.Y)(ni.A,{})})}),(0,r.Y)(I.K0,{alt:"Clear Input",disabled:0===n.length,onClick:function(){var e;t(""),null==i||null==(e=i.current)||e.focus()},children:(0,r.Y)(ei.A,{})})]})}function nh(){var e=(0,h._)((0,g.useState)(""),2),n=e[0],t=e[1],i=(0,g.useDeferredValue)(n);return(0,r.FD)(P.S,{p:0,gap:8,children:[(0,r.Y)(nf,{search:n,setSearch:t}),(0,r.Y)(nm,{search:i,setSearch:t})]})}var nm=(0,g.memo)(function(e){var n=e.search,t=e.setSearch,i=(0,ne.RI)(),o=(0,e6.A)(function(){return(0,m._)(i.values())},[i]),a=(0,g.useMemo)(function(){return e8.A.filter(n,o,{extract:function(e){var n="".concat(e.name," ").concat(e.id);return e.description&&(n+=" ".concat(e.description)),e.shortcut&&(n+=" ".concat(nd([e.shortcut]))),n}})},[n,o]),l=(0,g.useMemo)(function(){return a.reduce(function(e,n){var t=n.original,r=t.shortcut;if(!r)return e;var i=e.get(r);return i?i.push(t):i=[t],e.set(r,i),e},new Map)},[a]);return a.length>0?(0,r.Y)(er.ui,{css:np.surface,pt:8,children:a.map(function(e,i){var o;return(0,r.FD)(g.Fragment,{children:[i>0?(0,r.Y)(er.ui,{elevated:!0,style:{height:1}}):null,(0,r.Y)(nu,{command:e.original,filter:n,shortcutsToCommands:null!=(o=l.get(e.original.shortcut))?o:[],onViewShortcutConflicts:t})]},e.original.id)})}):null});function ng(e){var n="You have unsaved changes";(0,g.useEffect)(function(){var t=function(e){return e.preventDefault(),e.returnValue=n,n};if(e)return window.addEventListener("beforeunload",t),function(){window.removeEventListener("beforeunload",t)}},[e])}var nv=(0,_.i7)("0%{transform:scale(1);}40%{transform:scale(1.3);}100%{transform:scale(1);}"),nw=(0,et.x)({background:[{animationName:nv,animation:"".concat(nv," 2s cubic-bezier(0.4, 0, 0.6, 1) infinite"),boxShadow:"0 0 10px ".concat(en.LU.redStronger)},k.wp.height(11),k.wp.width(11),k.wp.borderRadius("full"),k.wp.position.absolute],container:[k.wp.position.relative,k.wp.align.center,k.wp.justify.center],icon:[{zIndex:1}]});function ny(){return(0,r.FD)(P.S,{css:nw.container,children:[(0,r.Y)(nt.A,{css:nw.icon,color:en.LU.redStronger}),(0,r.Y)(P.S,{css:nw.background})]})}var nb=t(96556);function nS(){var e=(0,nb.c)()("keyboard_shortcuts");return(0,r.FD)(er.ui,{background:"default",px:16,pb:16,gap:12,children:[(0,r.Y)(P.S,{tag:"label",htmlFor:e}),(0,r.Y)(nh,{})]})}var nY=t(90395),nA=(0,et.x)({headerContainer:[k.wp.flex.column,k.wp.justify.center,k.wp.px(16),k.wp.py(8)],subheading:[{fontStyle:"italic"},k.wp.color.foregroundDimmer,k.wp.mt(8),k.wp.mb(8)],tabs:[{width:"100%"}],tabList:[{"[aria-selected=true]":[k.wp.fontWeight.medium]}],tab:[k.wp.py(8),k.wp.px(16)]});function nx(e){var n=e.hideLayoutControl,t=e.resetLayout,o=(0,i.m5)();return(0,r.FD)(r.FK,{children:[(0,r.FD)(P.S,{css:nA.headerContainer,children:[(0,r.Y)(T.Y9,{variant:"subheadBig",level:3,children:"User Settings"}),(0,r.Y)(T.EY,{variant:"small",css:nA.subheading,children:"The following settings apply to your account and will be used across all your Apps."})]}),o?(0,r.Y)(e4,{hideLayoutControl:n,resetLayout:t}):(0,r.Y)(P.S,{children:(0,r.FD)(nY.tU,{css:nA.tabs,children:[(0,r.FD)(nY.wb,{withDividers:!1,css:nA.tabList,children:[(0,r.Y)(nY.oz,{css:nA.tab,children:"Editor preferences"}),(0,r.Y)(nY.oz,{css:nA.tab,children:"Keyboard shortcuts"})]}),(0,r.FD)(nY.T2,{children:[(0,r.Y)(nY.Kp,{children:(0,r.Y)(e4,{resetLayout:t})}),(0,r.Y)(nY.Kp,{children:(0,r.Y)(nS,{})})]})]})})]})}},24288:(e,n,t)=>{"use strict";t.d(n,{D:()=>a});var r=t(79730),i=t(22761),o=r.ZU.Object({type:r.ZU.Literal("commands"),data:r.ZU.Object({autoFocus:r.ZU.Boolean()})}),a=function(e){return i.T(o,e)}},24634:(e,n,t)=>{"use strict";t.d(n,{o:()=>a});var r=t(37743),i=t(82643),o=t(14208),a=function(){function e(n,t,i,o){(0,r._)(this,e),this.a=n,this.b=t,this.chunks=i,this.map=o}var n=e.prototype;return n.line=function(e,n){return n===o.mn.A?this.a.line(e):this.b.line(e)},n.bounds=function(e){if(0===this.chunks.length)return null;var n=(0,o.Dk)(this.chunks[0],e),t=(0,o.Dk)(this.chunks[this.chunks.length-1],e),r=e===o.mn.A?this.a.length:this.b.length,i=Math.min(t.to,r);return{from:n.from,to:i}},n.hasChanges=function(){return this.chunks.length>0},n.updateA=function(n,t,r){var i=this.b,a=(0,o.Pt)(n,i,{chunks:this.chunks,changesA:t},r),l=(0,o.k1)(n,i,a);return new e(n,i,a,l)},n.updateB=function(n,t,r){var i=this.a,a=(0,o.Pt)(i,n,{chunks:this.chunks,changesB:t},r),l=(0,o.k1)(i,n,a);return new e(i,n,a,l)},n.getContainingChunk=function(e,n){for(var t=0,r=this.chunks.length-1;t<=r;){var i=t+r>>>1,a=this.chunks[i],l=(0,o.Dk)(a,n);if(e>=l.from&&e<=l.to)return a;e<l.from?r=i-1:e>l.to&&(t=i+1)}return null},n.getCorrespondingLine=function(e,n){var t=this.map.get(n===o.mn.A?-e:e);return t?this.line(t,(0,o.Nl)(n)):null},n.getLineChangeType=function(e,n){if(this.map.get(n===o.mn.A?-e:e))return o.DE.UNCHANGED;var t=this.line(e,n),r=this.getContainingChunk(t.from,n);return r?(0,o.$F)(this.a,this.b,t,n,r.changes,r):o.DE.UNCHANGED},n.getLineStats=function(){for(var e={added:0,removed:0},n=1;n<=this.a.lines;n++)this.getLineChangeType(n,o.mn.A)!==o.DE.UNCHANGED&&e.removed++;for(var t=1;t<=this.b.lines;t++)this.getLineChangeType(t,o.mn.B)!==o.DE.UNCHANGED&&e.added++;return e},n.iterLines=function(e){var n,t,r,a;return(0,i.YH)(this,function(i){switch(i.label){case 0:n=e===o.mn.A?this.a:this.b,t=1,i.label=1;case 1:if(!(t<=n.lines))return[3,4];return r=n.line(t),a=this.getCorrespondingLine(r.number,e),[4,{line:r,correspondingLine:a}];case 2:i.sent(),i.label=3;case 3:return t++,[3,1];case 4:return[2]}})},n.iterRanges=function(){var e,n,t,r,o;return(0,i.YH)(this,function(i){switch(i.label){case 0:e=0,i.label=1;case 1:if(!(e<this.chunks.length))return[3,6];n=this.chunks[e].fromA,t=this.chunks[e].fromB,r=0,i.label=2;case 2:if(!(r<this.chunks[e].changes.length))return[3,5];return o=this.chunks[e].changes[r],[4,{fromA:n+o.fromA,toA:n+o.toA,fromB:t+o.fromB,toB:t+o.toB}];case 3:i.sent(),i.label=4;case 4:return r++,[3,2];case 5:return e++,[3,1];case 6:return[2]}})},e.create=function(n,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.r6,i=(0,o.Pt)(n,t,void 0,r),a=(0,o.k1)(n,t,i);return new e(n,t,i,a)},e}()},24712:(e,n,t)=>{"use strict";t.d(n,{A:()=>u});var r=t(88263),i=t(79209),o=t(45263),a=t(64583),l=t(48521),s=(0,i.AH)([l.wp.display.flex,l.wp.align.center,l.wp.justify.center,l.wp.backgroundColor.accentNegativeDefault,l.wp.minWidth(16),l.wp.height(16),l.wp.color.white,l.wp.position.absolute,l.wp.fontSize(o.LU.fontSizeSmall),{borderRadius:"10px",transform:"translate(50%, -50%)",padding:"2px 3px"}]),c=(0,a.x)({root:l.wp.display.flex,unreadIndicator:[l.wp.width(5),l.wp.height(5),l.wp.backgroundColor.redDefault,l.wp.position.absolute,{borderRadius:"10px",transform:"translate(8px, -1px)"}],count:s,countOverflow:[s,{transform:"translate(25%, -50%)"}]});function u(e){var n=e.unreadDot,t=e.size,i=void 0===t?12:t,o=e.count,a=void 0===o?null:o,l=a&&a>99,s=l?"99+":null==a?void 0:a.toString();return(0,r.FD)("span",{css:c.root,children:[(0,r.Y)("svg",{width:i,height:i,viewBox:"0 0 24 24",fill:"none",style:{color:"currentColor"},xmlns:"http://www.w3.org/2000/svg",children:(0,r.Y)("path",{d:"M21 15C21 15.5304 20.7893 16.0391 20.4142 16.4142C20.0391 16.7893 19.5304 17 19 17H7L3 21V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H19C19.5304 3 20.0391 3.21071 20.4142 3.58579C20.7893 3.96086 21 4.46957 21 5V15Z",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"})}),n?(0,r.Y)("div",{css:c.unreadIndicator}):null,!!a&&(0,r.Y)("div",{css:l?c.countOverflow:c.count,children:s})]})}},24850:(e,n,t)=>{"use strict";t.d(n,{A:()=>o});var r=t(21462),i=t(19523);function o(){var e=(0,i.yB)();(0,r.useEffect)(function(){},[e])}},24961:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(88263),a=t(71117);function l(e){return(0,o.FD)(a.Ay,(0,i._)((0,r._)({},e),{children:[(0,o.Y)("path",{d:"M10.47 9.97a.75.75 0 0 1 1.06 0l3.5 3.5a.75.75 0 1 1-1.06 1.06l-2.22-2.22v5.19a.75.75 0 0 1-1.5 0v-5.19l-2.22 2.22a.75.75 0 0 1-1.06-1.06l3.5-3.5Z"}),(0,o.Y)("path",{fillRule:"evenodd",d:"M1.055 3.055A2.75 2.75 0 0 1 3 2.25h5a.75.75 0 0 1 .624.334l1.777 2.666H19A2.75 2.75 0 0 1 21.75 8v11A2.75 2.75 0 0 1 19 21.75H3A2.75 2.75 0 0 1 .25 19V5c0-.73.29-1.429.805-1.945ZM3 3.75A1.25 1.25 0 0 0 1.75 5v14A1.25 1.25 0 0 0 3 20.25h16A1.25 1.25 0 0 0 20.25 19V8A1.25 1.25 0 0 0 19 6.75h-9a.75.75 0 0 1-.624-.334L7.599 3.75H3Z",clipRule:"evenodd"})]}))}},25073:(e,n,t)=>{"use strict";t.d(n,{h:()=>Y});var r=t(88263),i=t(17844),o=t(12584),a=t(41114),l=t(86997),s=t(63893);function c(){var e=(0,o._)(["\n  query WorkspaceUsageBudget($replId: String!) {\n    getRepl(id: $replId) {\n      __typename\n      ... on Repl {\n        id\n        org {\n          ... on Org {\n            id\n            authorizations {\n              editUsageLimit {\n                isAuthorized\n                message\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return c=function(){return e},e}function u(){var e=(0,o._)(["\n  query WorkspaceUsageBasedBillingAlerts($orgId: String) {\n    currentUser {\n      id\n      usageBasedBillingAlerts {\n        ...EditUsageBasedBillingAlertsFormInitialConfig\n      }\n      org(orgId: $orgId) {\n        ... on Org {\n          id\n          name\n          usageBasedBillingAlerts {\n            ...EditUsageBasedBillingAlertsFormInitialConfig\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return u=function(){return e},e}var d={},p=(0,a.J1)(c()),f=(0,a.J1)(u(),s.B9),h=t(5793),m=t(61627),g=t(64583),v=t(48521),w=t(54087),y=t(10429),b=t(70612),S=(0,g.x)({budgetContainer:[v.wp.colWithGap(8),v.wp.border(),v.wp.borderRadius(8),v.wp.p(8)],budgetContainerBorderless:[v.wp.colWithGap(8),v.wp.p(8)],bannerText:[v.wp.textAlign.left]});function Y(e){var n,t,o,a,s,c,u,g,v,Y,A=e.replId,x=e.onUpdateSuccess,C=e.style,_=(n={variables:{replId:A}},t=(0,i._)({},d,n),l.I(p,t)),k=_.data,D=_.loading,E=_.error,R=(0,h.R)(A).orgId,I=(o={variables:{orgId:R}},a=(0,i._)({},d,o),l.I(f,a)),F=I.data,T=I.loading,P=I.error;if(!k||!F||D||T)return null;if(R?(c=(null==(u=F.currentUser)?void 0:u.org.__typename)==="Org"?null==(g=F.currentUser)?void 0:g.org:void 0,s=(null==(v=F.currentUser)?void 0:v.org.__typename)==="Org"&&"UsageBasedBillingAlertsConfig"===F.currentUser.org.usageBasedBillingAlerts.__typename?F.currentUser.org.usageBasedBillingAlerts:void 0):s=(null==(Y=F.currentUser)?void 0:Y.usageBasedBillingAlerts.__typename)==="UsageBasedBillingAlertsConfig"?F.currentUser.usageBasedBillingAlerts:void 0,E)return(0,r.Y)(w.N,{css:S.bannerText,colorway:"red",text:E.message,icon:(0,r.Y)(b.A,{})});if(P)return(0,r.Y)(w.N,{css:S.bannerText,colorway:"red",text:P.message,icon:(0,r.Y)(b.A,{})});var L="Repl"===k.getRepl.__typename&&k.getRepl.org?k.getRepl.org:void 0,U=(null==L?void 0:L.authorizations.editUsageLimit.isAuthorized)===!1?L.authorizations.editUsageLimit.message:void 0;return U?(0,r.Y)(w.N,{css:S.bannerText,colorway:"red",text:"".concat(U," Reach out to an org admin to update your usage budget."),icon:(0,r.Y)(b.A,{})}):(0,r.Y)(y.S,{css:"outlined"===(void 0===C?"outlined":C)?S.budgetContainer:S.budgetContainerBorderless,children:(0,r.Y)(m.j,{org:c,initialSettings:s,onDone:function(){return x}})})}},25095:(e,n,t)=>{"use strict";t.d(n,{A:()=>tV,G:()=>tG});var r=t(29935),i=t(12694),o=t(86105),a=t(82643),l=t(88263),s=t(21462),c=t(69338),u=t(17844),d=t(12584),p=t(41114),f=t(86997),h=t(50175);function m(){var e=(0,d._)(["\n  fragment ObjectStorageBucket on Bucket {\n    id\n    externalId\n    name\n  }\n"]);return m=function(){return e},e}function g(){var e=(0,d._)(["\n  query ObjectStoragePane(\n    $replId: String!\n    $bucketsAfter: String\n    $bucketsCount: Int\n  ) {\n    currentUser {\n      id\n    }\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        org {\n          id\n        }\n        authorizations {\n          createObjectBucket {\n            isAuthorized\n            code\n            message\n          }\n          editObjectBucket {\n            isAuthorized\n            code\n            message\n          }\n        }\n        buckets(after: $bucketsAfter, count: $bucketsCount) {\n          ... on BucketConnection {\n            __typename\n            items {\n              ...ObjectStorageBucket\n            }\n            pageInfo {\n              nextCursor\n            }\n          }\n          ... on UnauthorizedError {\n            __typename\n            message\n          }\n        }\n        defaultBucket {\n          ... on Bucket {\n            ...ObjectStorageBucket\n          }\n          ... on Error {\n            message\n          }\n          ... on NotFoundError {\n            message\n          }\n          ... on UnauthorizedError {\n            message\n          }\n          ... on UserError {\n            message\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return g=function(){return e},e}function v(){var e=(0,d._)(["\n  mutation ObjectStoragePaneCreateBucket($input: CreateBucketInput!) {\n    createBucket(input: $input) {\n      ... on Bucket {\n        ...ObjectStorageBucket\n      }\n      ... on Error {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return v=function(){return e},e}var w={},y=(0,p.J1)(m()),b=(0,p.J1)(g(),y),S=(0,p.J1)(v(),y);function Y(e){var n=(0,u._)({},w,e);return h.n(S,n)}var A=t(46531),x=t(36640),C=t(31062),_=t(54240),k=t(43593),D=t(34834),E=t(84788);function R(){var e=(0,d._)(["\n  query CreateBucketName($teamId: Int, $name: String) {\n    bucketName: replTitle(teamId: $teamId, title: $name)\n  }\n"]);return R=function(){return e},e}var I={},F=(0,p.J1)(R()),T=t(64583),P=t(48521),L=t(96556),U=t(46603),N=t(77089),O=t(33747),M=t(49150),B=t(36112),H=t(76126),z=t(10429),W=t(80762),G=t(86814),V=(0,T.x)({createBucketButton:[P.wp.flex.growAndShrink(1),P.wp.justify.center,P.wp.textAlign.center],labeledInput:[P.wp.flex.growAndShrink(1),P.wp.textAlign.left],row:[P.wp.flex.growAndShrink(1),P.wp.pt(16),P.wp.rowWithGap(16),{flexBasis:"300px"}],wrapper:[P.wp.flex.wrap]});function j(e){var n,t,r,o,a,c,d,p,h,m,g,v,w,y,b=e.isOpen,S=e.loading,Y=e.handleCreateBucket,A=e.onRequestClose,x=(t=(n={}).preferredName,r=n.teamId,a=(o=(0,i._)((0,s.useState)(""),2))[0],c=o[1],d=(0,s.useRef)(null),p=(0,s.useRef)(!1),v=(h={variables:{name:t,teamId:r},fetchPolicy:"network-only",nextFetchPolicy:"cache-first",ssr:!1},m=(0,u._)({},I,h),g=f.I(F,m)).data,w=g.previousData,y=(null==v?void 0:v.bucketName)||(null==w?void 0:w.bucketName),(0,s.useEffect)(function(){y&&(p.current||c(y))},[y]),{name:a,setName:(0,s.useCallback)(function(e){p.current=!0,c(e.slice(0,60))},[]),nameInputRef:d}),_=x.name,k=x.setName,D=x.nameInputRef,E=(0,C.A)();return(0,l.Y)(z.S,{children:(0,l.Y)(M.a,{fitContent:!0,isOpen:b,onRequestClose:A,children:(0,l.FD)(B.ui,{children:[(0,l.Y)(H.Y9,{level:1,variant:"subheadBig",children:"Create a Bucket"}),(0,l.FD)(z.S,{css:V.wrapper,row:!0,children:[(0,l.Y)(z.S,{css:V.row,children:(0,l.Y)(Z,{name:_,setName:k,nameInputRef:D,disabled:S})}),(0,l.Y)(z.S,{css:V.row,children:(0,l.Y)(U.$n,{css:V.createBucketButton,text:S?"Creating bucket...":"Create bucket",onClick:function(){return Y({name:_,replId:E})},colorway:"primary",iconLeft:S?(0,l.Y)(W.A,{}):(0,l.Y)(G.A,{}),disabled:S})})]})]})})})}function Z(e){var n=e.name,t=e.setName,r=e.nameInputRef,i=e.disabled,o=(0,L.c)();return(0,l.FD)(z.S,{css:V.labeledInput,gap:8,children:[(0,l.Y)(O.J,{htmlFor:o("bucketName"),children:"Name"}),(0,l.Y)(N.pd,{spellCheck:!1,id:o("bucketName"),disabled:i,onChange:function(e){t(e.currentTarget.value)},value:n,ref:r,placeholder:"Name your Bucket"})]})}var q=t(93629),K=t(90629),$=t(22677),J=t(2789),Q=t(6888),X=t(99829),ee=t(34388),en=t(79730),et=en.ZU.Object({id:en.ZU.String(),name:en.ZU.String(),contentType:en.ZU.Optional(en.ZU.String()),timeCreated:en.ZU.String(),size:en.ZU.String()}),er=en.ZU.Array(et),ei={FILE:"file"},eo=function(e){return e[e.Direct=1]="Direct",e[e.Multipart=2]="Multipart",e}({});function ea(e){return"".concat(e.status," - ").concat(e.statusText)}function el(){return(el=(0,r._)(function(e){var n,t,r,i,o,l,s,c,u,d;return(0,a.YH)(this,function(a){switch(a.label){case 0:return n=e.bucketExternalId,t=e.pageToken,i=void 0===(r=e.maxResults)?1e3:r,o=e.matchGlob,l=new URLSearchParams({maxResults:i.toString()}),t&&l.append("pageToken",t),o&&l.append("matchGlob","**".concat(o,"**")),[4,fetch("/object-storage/storage/v1/b/".concat(n,"/o?").concat(l.toString()),{method:"GET",credentials:"same-origin"})];case 1:if(!(s=a.sent()).ok)throw Error("Failed to get objects: ".concat(ea(s)));return[4,s.json()];case 2:if(d=null!=(u=(c=a.sent()).items)?u:[],!$.J(er,d))throw(0,X.$J)(er,d);return[2,{items:d,nextPageToken:c.nextPageToken}]}})})).apply(this,arguments)}function es(e){return ec.apply(this,arguments)}function ec(){return(ec=(0,r._)(function(e){var n,t,r,i;return(0,a.YH)(this,function(o){switch(n=e.bucketExternalId,t=e.objectName,r=e.file,void 0===(i=e.uploadMethod)?1:i){case 1:return[2,function(e){return eu.apply(this,arguments)}({bucketExternalId:n,objectName:t,file:r})];case 2:return[2,function(e){return eh.apply(this,arguments)}({bucketExternalId:n,objectName:t,file:r})]}return[2]})})).apply(this,arguments)}function eu(){return(eu=(0,r._)(function(e){var n,t,r,i,o;return(0,a.YH)(this,function(a){switch(a.label){case 0:return n=e.bucketExternalId,t=e.objectName,r=e.file,i=encodeURIComponent(t),[4,fetch("/object-storage/upload/storage/v1/b/".concat(n,"/o?uploadType=media&name=").concat(i),{method:"POST",credentials:"same-origin",headers:{"X-Requested-With":"XMLHttpRequest"},body:r})];case 1:if(!(o=a.sent()).ok)throw Error("Failed to upload object: ".concat(ea(o)));return[2]}})})).apply(this,arguments)}function ed(){return(ed=(0,r._)(function(e){var n,t,r,i,o,l;return(0,a.YH)(this,function(a){switch(a.label){case 0:return n=e.bucketExternalId,t=e.encodedObjectName,r=e.file,[4,fetch("/object-storage/".concat(n,"/").concat(t,"?uploads"),{method:"POST",credentials:"same-origin",headers:{"Content-Length":"0","Content-Type":r.type,"X-Requested-With":"XMLHttpRequest"}})];case 1:if(!(i=a.sent()).ok)throw Error("Failed to initiate multipart upload: ".concat(ea(i)));return[4,i.text()];case 2:if(o=a.sent(),!(l=new DOMParser().parseFromString(o,"text/xml").getElementsByTagName("UploadId")[0].textContent))throw Error("Failed to initiate multipart upload: missing UploadId");return[2,l]}})})).apply(this,arguments)}function ep(){return(ep=(0,r._)(function(e){var n,t,r,i,o,l,s;return(0,a.YH)(this,function(a){switch(a.label){case 0:return n=e.bucketExternalId,t=e.encodedObjectName,r=e.partNumber,i=e.uploadId,o=e.chunk,[4,fetch("/object-storage/".concat(n,"/").concat(t,"?partNumber=").concat(r,"&uploadId=").concat(i),{method:"PUT",credentials:"same-origin",headers:{"Content-Length":o.length.toString(),"Content-Type":"text/xml","X-Requested-With":"XMLHttpRequest"},body:o})];case 1:if(!(l=a.sent()).ok)throw Error("Failed to upload chunk: ".concat(ea(l)));if(!(s=l.headers.get("x-upload-etag")))throw Error("Failed to upload chunk: missing x-upload-etag");return[2,{partNumber:r,etag:s}]}})})).apply(this,arguments)}function ef(){return(ef=(0,r._)(function(e){var n,t,r,i,o,l,s,c;return(0,a.YH)(this,function(a){switch(a.label){case 0:return n=e.bucketExternalId,t=e.encodedObjectName,r=e.uploadId,i=e.parts,l=(o=document.implementation.createDocument("","",null)).createElement("CompleteMultipartUpload"),i.forEach(function(e){var n=o.createElement("Part"),t=o.createElement("PartNumber");t.textContent=e.partNumber.toString(),n.appendChild(t);var r=o.createElement("ETag");r.textContent=e.etag,n.appendChild(r),l.appendChild(n)}),o.appendChild(l),s=new XMLSerializer().serializeToString(o),[4,fetch("/object-storage/".concat(n,"/").concat(t,"?uploadId=").concat(r),{method:"POST",credentials:"same-origin",headers:{"Content-Length":s.length.toString(),"Content-Type":"application/xml","X-Requested-With":"XMLHttpRequest"},body:s})];case 1:if(!(c=a.sent()).ok)throw Error("Failed to complete multipart upload: ".concat(ea(c)));return[2]}})})).apply(this,arguments)}function eh(){return(eh=(0,r._)(function(e){var n,t,r,i,o,l,s,c,u,d;return(0,a.YH)(this,function(a){switch(a.label){case 0:return n=e.bucketExternalId,t=e.objectName,r=e.file,[4,(0,ee.g6)(r)];case 1:return i=a.sent(),l=(o=Q.A.from(i)).toBuffer(),s=encodeURIComponent(t),[4,function(e){return ed.apply(this,arguments)}({bucketExternalId:n,encodedObjectName:s,file:r})];case 2:return c=a.sent(),u=(0,J.A)(5),[4,Promise.all(Array(Math.ceil(o.length/0x2000000)).fill(0).map(function(e,t){var r=l.subarray(0x2000000*t,(t+1)*0x2000000);return u(function(){return function(e){return ep.apply(this,arguments)}({bucketExternalId:n,encodedObjectName:s,partNumber:t+1,uploadId:c,chunk:r})})}))];case 3:return d=a.sent(),[4,function(e){return ef.apply(this,arguments)}({bucketExternalId:n,encodedObjectName:s,uploadId:c,parts:d})];case 4:return a.sent(),[2]}})})).apply(this,arguments)}function em(e){return eg.apply(this,arguments)}function eg(){return(eg=(0,r._)(function(e){var n,t,r;return(0,a.YH)(this,function(i){switch(i.label){case 0:return n=e.bucketExternalId,t=encodeURIComponent(e.objectName),[4,fetch("/object-storage/storage/v1/b/".concat(n,"/o/").concat(t),{method:"DELETE",credentials:"same-origin",headers:{"X-Requested-With":"XMLHttpRequest"}})];case 1:if(!(r=i.sent()).ok)throw Error("Failed to delete object: ".concat(ea(r)));return[2]}})})).apply(this,arguments)}function ev(){return(ev=(0,r._)(function(e){var n,t,r,i,o,l,s;return(0,a.YH)(this,function(a){switch(a.label){case 0:return n=e.sourceBucketExternalId,t=e.destinationBucketExternalId,r=e.sourceObjectName,i=e.destinationObjectName,o=encodeURIComponent(r),l=encodeURIComponent(i),[4,fetch("/object-storage/storage/v1/b/".concat(n,"/o/").concat(o,"/copyTo/b/").concat(t,"/o/").concat(l),{method:"POST",credentials:"same-origin",headers:{"X-Requested-With":"XMLHttpRequest"}})];case 1:if(!(s=a.sent()).ok)throw Error("Failed to copy object: ".concat(ea(s)));return[2]}})})).apply(this,arguments)}var ew=t(35992),ey=t(44370),eb=t(67201),eS=(0,ey.eU)(new Map);function eY(e){var n=e.items,t=e.objects,r=new Set(n.map(function(e){return e.name})),i=t.filter(function(e){return!r.has(e.name)});return(0,o._)(n).concat((0,o._)(i))}var eA=(0,ey.eU)(null,function(e,n,t){var r=t.bucketExternalId,i=t.objects,o=t.nextPageToken,a=t.isSearch;n(eS,function(e){return(0,ew.jM)(e,function(n){var t,l,s=e.get(r),c=n.get(r);if(!c)return void n.set(r,{items:i,nextPageToken:o,isLoading:!1});var u=eY({items:c.items,objects:i}),d=c.search;if(a){c.search=d={items:eY({items:null!=(l=null==d?void 0:d.items)?l:[],objects:i}),currentPageToken:null==s||null==(t=s.search)?void 0:t.currentPageToken,nextPageToken:o},c.items=u,c.isLoading=!1;return}c.items=u,c.search=void 0,c.currentPageToken=null==s?void 0:s.nextPageToken,c.nextPageToken=o,c.isLoading=!1})})}),ex=(0,ey.eU)(null,function(e,n,t){var r=t.bucketExternalId,i=t.isLoading;n(eS,function(e){return(0,ew.jM)(e,function(e){var n=e.get(r);if(!n)return void e.set(r,{items:[],isLoading:i});n.isLoading=i})})}),eC=(0,ey.eU)(null,function(e,n,t){var r=t.bucketExternalId,i=t.name,o=t.contentType,a=t.size,l={id:"optimistic-"+(0,eb.A)(),name:i,contentType:o,size:a,timeCreated:new Date().toISOString(),optimisticallyInserted:!0};n(eS,function(e){return(0,ew.jM)(e,function(e){var n=e.get(r);if(!n)return void e.set(r,{items:[l],isLoading:!1});var t=n.items.find(function(e){return e.name===i});t?Object.assign(t,l):n.items.push(l)})})}),e_=(0,ey.eU)(null,function(e,n,t){var r=t.name,i=t.bucketExternalId,o=t.isPendingDeletion,a=t.isOptimisticallyInserted;n(eS,function(e){return(0,ew.jM)(e,function(e){var n=e.get(i);if(!n)throw Error("Bucket not found when updating object");var t=n.items.findIndex(function(e){return e.name===r});if(-1===t)throw Error("Bucket not found when updating object");void 0!==o&&(n.items[t].isPendingDeletion=o),void 0!==a&&(n.items[t].optimisticallyInserted=a)})})}),ek=(0,ey.eU)(null,function(e,n,t){var r=t.name,i=t.bucketExternalId;n(eS,function(e){return(0,ew.jM)(e,function(e){var n=e.get(i);if(!n)throw Error("Bucket not found when removing object");var t=n.search;if(t){t.items=t.items.filter(function(e){return e.name!==r});return}e.set(i,{items:n.items.filter(function(e){return e.name!==r}),isLoading:n.isLoading,nextPageToken:n.nextPageToken,search:t})})})}),eD=new Intl.Collator;function eE(e){return e.sort(function(e,n){return eD.compare(e.displayName,n.displayName)})}var eR=[1e3,2500,5e3];function eI(){var e,n=(0,c.md)(eS),t=(0,c.Xr)(eA),o=(0,c.Xr)(ex),l=(0,i._)((0,s.useState)(!1),2),u=l[0],d=l[1],p=(0,i._)((0,s.useState)(1e3),2),f=p[0],h=p[1];return{fetchObjects:(0,s.useCallback)((e=(0,r._)(function(e){var r,i,l,s,c,u,p,h,m,g,v,w;return(0,a.YH)(this,function(a){switch(a.label){case 0:if(r=e.bucketExternalId,i=e.matchGlob,l=e.loadMorePageToken,s=e.isNewBucket,c=e.onError,s)return t({bucketExternalId:r,objects:[],isSearch:i}),[2];d(!0),a.label=1;case 1:return a.trys.push([1,3,4,5]),o({bucketExternalId:r,isLoading:!0}),p=n.get(r),h=i?null==p||null==(u=p.search)?void 0:u.currentPageToken:null==p?void 0:p.currentPageToken,[4,function(e){return el.apply(this,arguments)}({bucketExternalId:r,pageToken:null!=l?l:h,matchGlob:i,maxResults:f})];case 2:return g=(m=a.sent()).items,v=m.nextPageToken,t({bucketExternalId:r,objects:g,nextPageToken:v,isSearch:i}),[3,5];case 3:return w=a.sent(),K.Cp(w,{tags:{bucketExternalId:r,action:"fetchObjects"}}),null==c||c(w instanceof Error?w:Error("Failed to fetch objects")),[3,5];case 4:return o({bucketExternalId:r,isLoading:!1}),d(!1),[7];case 5:return[2]}})}),function(n){return e.apply(this,arguments)}),[t,o,n,f]),setMaxResults:h,maxResults:f,loading:u}}function eF(){var e=(0,i._)((0,s.useState)(!1),2),n=e[0],t=e[1],o=(0,c.Xr)(eC),l=(0,c.Xr)(ek),u=(0,c.Xr)(e_);function d(){return(d=(0,r._)(function(e){var n,i,s,c,d;return(0,a.YH)(this,function(p){switch(p.label){case 0:n=e.bucketExternalId,i=e.files,s=e.targetFolder,c=e.onError,t(!0),p.label=1;case 1:var f;return p.trys.push([1,3,,4]),[4,Promise.all(i.map((f=(0,r._)(function(e){var t,r;return(0,a.YH)(this,function(i){switch(i.label){case 0:t=s+(e.webkitRelativePath||e.dirPath||e.name),o({bucketExternalId:n,name:t,contentType:e.type,size:null==e?void 0:e.size.toString()}),r=e.size>0x1e00000?eo.Multipart:eo.Direct,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,es({bucketExternalId:n,objectName:t,file:e,uploadMethod:r})];case 2:return i.sent(),u({bucketExternalId:n,name:t,isOptimisticallyInserted:!1}),[3,4];case 3:return i.sent(),l({bucketExternalId:n,name:t}),[3,4];case 4:return[2]}})}),function(e){return f.apply(this,arguments)})))];case 2:return p.sent(),[3,4];case 3:return d=p.sent(),null==c||c(d),[3,4];case 4:return t(!1),[2]}})})).apply(this,arguments)}return{uploadFiles:function(e){return d.apply(this,arguments)},loading:n}}function eT(){var e=(0,d._)(["\n  query UserBuckets($input: CurrentUserBucketsInput!) {\n    currentUser {\n      id\n      buckets(input: $input) {\n        ... on BucketConnection {\n          __typename\n          items {\n            ...ObjectStorageBucket\n          }\n          pageInfo {\n            hasNextPage\n            nextCursor\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return eT=function(){return e},e}function eP(){var e=(0,d._)(["\n  query OrgBuckets($orgId: String!, $input: OrgBucketsInput!) {\n    currentUser {\n      id\n      org(orgId: $orgId) {\n        ... on Org {\n          id\n          buckets(input: $input) {\n            ... on BucketConnection {\n              __typename\n              items {\n                ...ObjectStorageBucket\n              }\n              pageInfo {\n                hasNextPage\n                nextCursor\n              }\n            }\n            ... on Error {\n              message\n            }\n          }\n        }\n        ... on Error {\n          message\n        }\n      }\n    }\n  }\n  ","\n"]);return eP=function(){return e},e}function eL(){var e=(0,d._)(["\n  mutation AddReplBucket($input: AddReplBucketInput!) {\n    addReplBucket(input: $input) {\n      __typename\n      ... on Bucket {\n        ...ObjectStorageBucket\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return eL=function(){return e},e}var eU={},eN=(0,p.J1)(eT(),y),eO=(0,p.J1)(eP(),y),eM=(0,p.J1)(eL(),y),eB=t(68264),eH=t(57679),ez=t(59318),eW=t(45263),eG=t(973),eV=t(29e3),ej=t(17070),eZ=t(75414),eq=t(18870),eK=t(87523),e$=(0,T.x)({self:[P.wp.flex.growAndShrink(1)],error:[P.wp.color.accentNegativeStronger],button:[P.wp.reset.button,P.wp.viewStyle,eG.b.nofill,P.wp.display.inlineFlex,{borderColor:eG.b.outlined.borderColor},P.wp.flex.growAndShrink(1)],select:[P.wp.display.flex,P.wp.flex.growAndShrink(1)],selectDisabled:[{backgroundColor:eW.LU.backgroundHigher}],popover:[P.wp.width("max-content"),P.wp.overflow("auto"),P.wp.p(1),P.wp.minWidth(240)],labeledInput:[P.wp.flex.growAndShrink(1),P.wp.minWidth(250)],listbox:[P.wp.maxHeight(300),P.wp.minWidth(300),P.wp.overflow("auto")],dropdownItemAndContainer:[P.wp.flex.row,P.wp.align.center,eG.b.listItem,P.wp.px(8),P.wp.py(4)],selectedItemAndContainer:[P.wp.px(8),P.wp.py(4),P.wp.justify.spaceBetween,P.wp.align.center,P.wp.rowWithGap(8)],selectedBucketName:[P.wp.align.center,P.wp.textAlign.left,P.wp.rowWithGap(8)],bucketName:[P.wp.textAlign.left,P.wp.rowWithGap(8)],loading:[P.wp.minWidth(200),P.wp.display.flex,P.wp.flex.grow(1),eV.S.backgroundPulse(eW.LU.backgroundHighest,eW.LU.backgroundHigher)]});function eJ(e){var n=e.buckets,t=e.error,r=e.loading,i=e.onChange,o=e.onLoadMore,a=e.selectedBucketId,c=(0,s.useId)();return(0,l.FD)(z.S,{css:e$.self,children:[(0,l.Y)(e2,{buckets:n,loading:r,selectedBucketId:a,onLoadMore:o,onSelectionChange:function(e){"string"==typeof e&&i(e)}}),t?(0,l.Y)(z.S,{css:e$.error,"aria-live":"polite","aria-atomic":"true",id:c,children:(0,l.Y)("span",{children:t})}):null]})}var eQ=(0,T.x)({self:[e$.dropdownItemAndContainer,P.wp.justify.spaceBetween,{backgroundColor:eW.LU.interactiveBackground}]});function eX(){return(0,l.Y)(z.S,{css:e$.selectDisabled,children:(0,l.Y)(z.S,{css:e$.selectedItemAndContainer,children:(0,l.Y)(z.S,{css:e$.selectedBucketName,children:(0,l.Y)(H.EY,{color:"dimmer",variant:"text",children:"No buckets available to add"})})})})}function e0(e){var n=e.title;return(0,l.FD)(z.S,{css:e$.selectedItemAndContainer,children:[(0,l.Y)(z.S,{css:e$.selectedBucketName,children:(0,l.Y)(H.EY,{variant:"text",children:n})}),(0,l.Y)(eK.A,{})]})}function e1(e){var n=e.bucketName,t=e.selected;return(0,l.FD)(z.S,{css:t?eQ.self:e$.dropdownItemAndContainer,children:[(0,l.Y)(z.S,{css:e$.bucketName,align:"center",children:(0,l.Y)(H.EY,{variant:"text",color:t?"default":"dimmer",children:n})}),(0,l.Y)(z.S,{pl:8,align:"center",row:!0,children:t?(0,l.Y)(eq.A,{}):null})]})}function e2(e){var n=e.buckets,t=e.loading,r=e.selectedBucketId,i=e.onLoadMore,o=e.onSelectionChange,a=(0,L.c)(),c=(0,s.useMemo)(function(){return n.find(function(e){return e.id===r})},[n,r]);return(0,l.FD)(z.S,{css:e$.labeledInput,gap:8,children:[(0,l.Y)(O.J,{htmlFor:a("bucket"),children:"Bucket"}),t?(0,l.Y)(N.pd,{css:e$.loading,disabled:!0}):(0,l.FD)(eB.l6,{css:e$.select,id:a("bucket"),onSelectionChange:o,"aria-label":"Bucket Select",children:[(0,l.Y)(eH.$,{css:e$.button,isDisabled:!c,children:c?(0,l.Y)(e0,{title:c.name}):(0,l.Y)(eX,{})}),(0,l.Y)(eZ.g_,{noArrow:!0,css:e$.popover,background:"default",placement:"bottom left",children:(0,l.Y)(ej.qF,{css:e$.listbox,onLoadMore:i,children:n.map(function(e){var n=e.id,t=e.name;return(0,l.Y)(ez.nh,{id:n,textValue:t,children:(0,l.Y)(e1,{bucketName:t,selected:n===r})},n)})})})]})]})}var e4=(0,T.x)({addBucketButton:[P.wp.flex.growAndShrink(1),P.wp.justify.center,P.wp.textAlign.center],row:[P.wp.flex.growAndShrink(1),P.wp.pt(16),P.wp.rowWithGap(16),{flexBasis:"300px"}],wrapper:[P.wp.flex.wrap]});function e5(e){var n,t,r,a,c,d,p,m,g,v,w,y,b,S,Y,A,x,_,k,D,E,R,I,F,T,P=e.excludeBucketIds,L=e.isOpen,N=e.onBucketAdded,O=e.onError,V=e.onRequestClose,j=e.orgId,Z=(0,i._)((0,s.useState)(),2),K=Z[0],$=Z[1],J=(0,C.A)(),Q=(g=(n={onError:O,orgId:j}).orgId,y=(w=(t={fetchPolicy:"network-only",onError:v=n.onError,skip:void 0!==g,ssr:!1,variables:{input:e3}},r=(0,u._)({},eU,t),f.I(eN,r))).data,b=w.fetchMore,S=w.loading,Y=(0,s.useCallback)(function(){var e,n,t;b({variables:{input:(0,q._)((0,u._)({},e3),{after:null==y||null==(t=y.currentUser)||null==(n=t.buckets)||null==(e=n.pageInfo)?void 0:e.nextCursor})},updateQuery:function(e,n){if(!(null==(a=n.fetchMoreResult)||null==(i=a.currentUser)||null==(r=i.buckets)?void 0:r.items))return e;var t=(0,u._)({},n.fetchMoreResult);if(null==(l=t.currentUser)?void 0:l.buckets){var r,i,a,l,s,c,d,p=null!=(d=null==e||null==(c=e.currentUser)||null==(s=c.buckets)?void 0:s.items)?d:[],f=t.currentUser.buckets.items;t.currentUser.buckets.items=(0,o._)(f).concat((0,o._)(p))}return t}})},[b,y]),x=(A=(a={fetchPolicy:"network-only",onError:v,skip:void 0===g,ssr:!1,variables:{input:e3,orgId:g||""}},c=(0,u._)({},eU,a),f.I(eO,c))).data,_=A.fetchMore,k=A.loading,E=(null==(D=(null==x||null==(d=x.currentUser)?void 0:d.org.__typename)==="Org"?null==x||null==(p=x.currentUser)?void 0:p.org:void 0)?void 0:D.buckets.__typename)==="BucketConnection"?null==D?void 0:D.buckets:void 0,R=(0,s.useCallback)(function(){_({variables:{input:(0,q._)((0,u._)({},e3),{after:null==E?void 0:E.pageInfo.nextCursor})},updateQuery:function(e,n){var t,r,i=n.fetchMoreResult,a=null==i?void 0:i.currentUser;if((null==a?void 0:a.__typename)!=="CurrentUser")return e;var l=null==i||null==(t=i.currentUser)?void 0:t.org;if((null==l?void 0:l.__typename)!=="Org")return e;var s=l.buckets;if("BucketConnection"!==s.__typename)return e;var c=null==e||null==(r=e.currentUser)?void 0:r.org;if((null==c?void 0:c.__typename)!=="Org")return i;var d=c.buckets;return"BucketConnection"!==d.__typename?i:(0,q._)((0,u._)({},i),{currentUser:(0,q._)((0,u._)({},a),{__typename:"CurrentUser",org:(0,q._)((0,u._)({},l),{__typename:"Org",buckets:(0,q._)((0,u._)({},s),{__typename:"BucketConnection",items:(0,o._)(s.items).concat((0,o._)(d.items))})})})})}})},[_,E]),I=(0,s.useCallback)(function(){g?R():Y()},[g,R,Y]),{buckets:g?null==E?void 0:E.items:null==y||null==(m=y.currentUser)?void 0:m.buckets.items,fetchMore:I,loading:k||S}),X=Q.buckets,ee=Q.fetchMore,en=Q.loading;(0,s.useEffect)(function(){!K&&X&&X.length>1&&$(X[0].id)},[K,X]);var et=(0,s.useMemo)(function(){return X?X.filter(function(e){return!(null!=P?P:[]).includes(e.id)}):[]},[X,P]);(0,s.useEffect)(function(){!K&&et&&et.length>0&&$(et[0].id)},[et,K]);var er=(0,i._)((F={variables:{input:{bucketId:null!=K?K:"",replId:J}}},T=(0,u._)({},eU,F),h.n(eM,T)),2),ei=er[0],eo=er[1].loading;return(0,l.Y)(z.S,{children:(0,l.Y)(M.a,{fitContent:!0,isOpen:L,onRequestClose:V,children:(0,l.FD)(B.ui,{children:[(0,l.Y)(H.Y9,{level:1,variant:"subheadBig",children:"Choose a Bucket"}),(0,l.FD)(z.S,{css:e4.wrapper,row:!0,children:[(0,l.Y)(z.S,{css:e4.row,children:(0,l.Y)(eJ,{buckets:et,loading:en,onChange:$,onLoadMore:ee,selectedBucketId:K})}),(0,l.Y)(z.S,{css:e4.row,children:(0,l.Y)(U.$n,{css:e4.addBucketButton,text:eo?"Adding Bucket to Repl...":"Add Bucket to Repl",onClick:function(){ei({onCompleted:function(e){var n="Bucket"===e.addReplBucket.__typename?e.addReplBucket:null;if(!n)return void O(Error("Failed to create bucket"));N(n,!1),$(void 0)},onError:O})},colorway:"primary",iconLeft:eo||en?(0,l.Y)(W.A,{}):(0,l.Y)(G.A,{}),disabled:eo||!K})})]})]})})})}var e3={count:10},e6=t(22531),e8=t(78452),e7=t(62153),e9=t(6281),ne=t(54087),nn=t(64631),nt=t(85233),nr=t(66257),ni=t(58275),no=t(89916),na=[{icon:(0,l.Y)(ni.A,{}),title:"JavaScript",value:"js"},{icon:(0,l.Y)(no.A,{}),title:"Python",value:"py"},{icon:(0,l.Y)(nr.A,{}),title:"All other languages",value:"other"}],nl={js:{packagerConfigLanguage:"nodejs",description:(0,l.Y)(nn.Ay,{components:{code:function(e){return(0,l.Y)(e8.A,(0,u._)({language:"json"},e))}},children:"This library supports Bun, Deno, and Node.js. It is not recommended for browser-based applications.\n  \nFor more information, see the [SDK Reference](https://docs.replit.com/cloud-services/storage-and-databases/object-storage/typescript-api-reference/)."}),packageName:"@replit/object-storage",commands:[{label:"Import Object Store Library",code:"const { Client } = require('@replit/object-storage');\nconst client = new Client();\n"},{label:"Download an object as text (i.e. JSON)",code:"const { ok, value: textValue, error } = await client.downloadAsText('file.json');\nif (!ok) {\n    // ... handle error ...\n}\n"},{label:"Download an object as its raw byte representation (i.e. images)",code:"const { ok, value: bytesValue, error } = await client.downloadAsBytes('file.png');\nif (!ok) {\n    // ... handle error ...\n}\n"},{label:"Download an object by streaming the object's contents (i.e. streaming data over an API)",code:"const { ok, value: stream, error } = await client.downloadAsStream('file.json');\nif (!ok) {\n    // ... handle error ...\n}\n"},{label:"Download an object to the filesystem",code:"const { ok, error } = await client.downloadToFilename('file.json', destFilename);\nif (!ok) {\n    // ... handle error ...\n}\n"},{label:"List the objects in the bucket",code:"const { ok, value, error } = await client.list();\nif (!ok) {\n    // ... handle error ...\n}\n"},{label:"Upload an object from text (i.e. JSON)",code:"const { ok, error } = await client.uploadFromText('file.json', data);\nif (!ok) {\n    // ... handle error ...\n}\n"},{label:"Upload an object from its byte representation (i.e. images)",code:"const { ok, error } = await client.uploadFromBytes('file.png', data);\nif (!ok) {\n    // ... handle error ...\n}\n"},{label:"Upload an object from the filesystem",code:"const { ok, error } = await client.uploadFromFilename('file.json', srcFilename);\nif (!ok) {\n    // ... handle error ...\n}\n"},{label:"Upload an object from a stream (i.e. streaming data over an API)",code:"const { ok, error } = await client.uploadFromStream('file.json', stream);\nif (!ok) {\n    // ... handle error ...\n}\n"},{label:"Delete an object from the bucket",code:"const { ok, error } = await client.delete('file.json');\nif (!ok) {\n    // ... handle error ...\n}\n"}]},py:{packagerConfigLanguage:"python3",description:(0,l.Y)(nn.Ay,{components:{code:function(e){return(0,l.Y)(e8.A,(0,u._)({language:"json"},e))}},children:"For more information, see the [SDK Reference](https://docs.replit.com/cloud-services/storage-and-databases/object-storage/python-api-reference/)."}),packageName:"replit-object-storage",commands:[{label:"Import Object Store Library",code:"from replit.object_storage import Client\nclient = Client()"},{label:"Download an object as text (i.e. JSON)",code:'client.download_as_text("file.json")'},{label:"Download an object as its raw byte representation (i.e. images)",code:'client.download_as_bytes("file.png")'},{label:"Download an object to the filesystem",code:'client.download_to_filename("file.json", dest_filename)'},{label:"List the objects in the bucket",code:"client.list()"},{label:"Upload an object from text (i.e. JSON)",code:'client.upload_from_text("file.json", data)'},{label:"Upload an object from its byte representation (i.e. images)",code:'client.upload_from_bytes("file.png", data)'},{label:"Upload an object from the filesystem",code:'client.upload_from_filename("file.json", src_filename)'},{label:"Delete an object from the bucket",code:'client.delete("file.json")'}]},other:{description:(0,l.Y)(nn.Ay,{components:{code:function(e){return(0,l.Y)(e8.A,(0,u._)({language:"json"},e))}},children:'\nYou can use the [Google Cloud client libraries](https://cloud.google.com/storage/docs/reference/libraries#use) to interact with your bucket in any of the supported languages.\n\nIf there isn\'t a client library for your language of choice, you can use the [JSON API](https://cloud.google.com/storage/docs/json_api).\n\nWith both the client libraries and the JSON API, only blob/file/object APIs are authorized.\n\n## Authorization\n\n### Client libraries\n\n1. Create a JSON file with these contents in your project root directory, `google_application_credentials.json`\n\n```\n{\n  "type": "external_account",\n  "audience": "replit",\n  "credential_source": {\n    "url": "http://127.0.0.1:1106/credential"\n  },\n  "token_url": "http://127.0.0.1:1106/token"\n}\n```\n\n2. Set the `GOOGLE_APPLICATION_CREDENTIALS` environment variable to `"google_application_credentials.json"`\n3. Set the `GCLOUD_PROJECT` environment variable to `""`\n\n### JSON API\n\n1. Issue a `POST` request to `http://127.0.0.1:1106/token`\n\n## Bucket Selection\nUsing Google Cloud APIs or libraries directly requires a bucket name parameter to be specified on all requests. This field is interchangeable with your bucket\'s ID within Replit Object Storage.\n\nTo get the ID of the default bucket for your App or Deployment, issue a `GET` request to `http://127.0.0.1:1106/object-storage/default-bucket`\n'}),commands:[]}},ns=(0,T.x)({statusBanner:[P.wp.maxWidth("fit-content")]});function nc(e){var n=e.onError,t=(0,i._)((0,s.useState)("js"),2),o=t[0],c=t[1],d=(0,x.A)().showConfirm,p=(0,D.A)().packager,f=(0,e7.J)().configs,h=(0,e9.hF)(),m=(0,i._)((0,s.useState)(!1),2),g=m[0],v=m[1],w=f.find(function(e){return e.language===nl[o].packagerConfigLanguage}),y=!!(nl[o].packagerConfigLanguage&&nl[o].packageName&&w),b=!!(w&&h(w.id).some(function(e){return e.name===nl[o].packageName})),S=(0,i._)((0,s.useState)(!1),2),Y=S[0],A=S[1];function C(){return(C=(0,r._)(function(){return(0,a.YH)(this,function(e){switch(e.label){case 0:if(!y)return n(Error("Package not available for selected language")),[2];return v(!0),[4,p.addPackages([{name:nl[o].packageName}])];case 1:return e.sent()?(d("Installed ".concat(nl[o].packageName," package")),A(!0)):n(Error("Failed to install ".concat(nl[o].packageName," package"))),[2]}})})).apply(this,arguments)}var _=na.find(function(e){return e.value===o}),k=Y||b;return(0,s.useLayoutEffect)(function(){var e=!0,n=!1,t=void 0;try{for(var r,i=na[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=function(){var e=r.value;if(nl[e.value].packagerConfigLanguage&&f.find(function(n){return n.language===nl[e.value].packagerConfigLanguage}))return c(e.value),{v:void 0}}();if("object"===(0,e6._)(o))return o.v}}catch(e){n=!0,t=e}finally{try{e||null==i.return||i.return()}finally{if(n)throw t}}c("other")},[]),(0,l.FD)(z.S,{gap:16,children:[(0,l.Y)(z.S,{row:!0,gap:0,children:(0,l.Y)(nt.l,{items:na,selectedItem:_,initialSelectedItem:na[0],onChange:function(e){A(!1),c(e.value)}})}),nl[o].description?nl[o].description:null,!k&&y?(0,l.Y)(U.$n,{onClick:function(){return C.apply(this,arguments)},text:"Install ".concat(nl[o].packageName," package"),colorway:"primary",loading:g}):null,_&&k?(0,l.Y)(ne.N,{text:"Package installed",colorway:"positive",css:ns.statusBanner}):null,nl[o].commands.map(function(e){return(0,l.FD)(z.S,{gap:6,children:[(0,l.Y)(H.EY,{children:e.label}),(0,l.Y)(nn.Ay,{components:{code:function(e){return(0,l.Y)(e8.A,(0,u._)({language:o},e))}},children:"```\n".concat(e.code)})]},e.label)})]})}function nu(){var e=(0,d._)(["\n  query ObjectStorageReplOrg($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        org {\n          id\n        }\n      }\n    }\n  }\n"]);return nu=function(){return e},e}var nd={},np=(0,p.J1)(nu()),nf=t(35084),nh=t(16564),nm=t(48959),ng=t(95139),nv=t(4595),nw=t(75176),ny=t(25073),nb=t(37039),nS=t(82402),nY=t(90419),nA=t(69258),nx=(0,T.x)({ctaStatusBanner:[P.wp.textAlign.left],cta:[P.wp.width("100%"),P.wp.maxWidth(320),{marginLeft:"auto",marginRight:"auto"}],payment:[P.wp.borderRadius(12),P.wp.textAlign.left,P.wp.shadow(2)]});function nC(e){var n=e.children,t=e.createBucketAuthz,o=e.actionDescription,c=e.refetchAuthzQueryData,u=e.loading,d=e.replId,p=(0,i._)((0,s.useState)(!1),2),f=p[0],h=p[1],m=(0,i._)((0,s.useState)(!1),2),g=m[0],v=m[1];return(0,l.FD)(l.FK,{children:[(0,l.FD)(z.S,{gap:8,children:[(0,l.Y)(n_,{replId:d,mainActionCTA:n,showPaymentMethodForm:f,setShowPaymentMethodForm:function(){return h(!0)},setShowSupportForm:function(){return v(!0)},createBucketAuthz:t,actionDescription:o,refetchAuthzQueryData:c,loading:u}),f?(0,l.Y)(B.ui,{elevated:!0,css:nx.payment,p:16,children:(0,l.Y)(nv.y,{onSuccess:(0,r._)(function(){return(0,a.YH)(this,function(e){switch(e.label){case 0:return h(!1),[4,c()];case 1:return e.sent(),[2]}})}),context:"workspace_object_storage_pane"})}):null]}),(0,l.Y)(M.a,{isOpen:g,onRequestClose:function(){return v(!1)},children:(0,l.Y)(nS.A,{onRequestClose:function(){return v(!1)}})})]})}function n_(e){var n=e.mainActionCTA,t=e.showPaymentMethodForm,r=e.setShowPaymentMethodForm,i=e.setShowSupportForm,o=e.createBucketAuthz,a=e.actionDescription,s=e.refetchAuthzQueryData,c=e.loading,u=e.replId,d=(0,ng.m6)();if(!o)return null;if(!o.isAuthorized&&d)return(0,l.Y)(ne.N,{text:o.message,colorway:"warning",icon:(0,l.Y)(nA.A,{}),css:nx.ctaStatusBanner});switch(o.code){case nf.S4.RequiresActiveSubscription:return(0,l.Y)(z.S,{gap:8,align:"center",children:(0,l.Y)(nw.A,{context:"workspace_object_storage_pane",text:"Upgrade your plan to ".concat(a,"."),css:nx.cta,colorway:"primary",variant:"default",disabled:t,onPlanCheckoutComplete:s})});case nf.S4.RequiresPaymentMethodOrSubscription:return(0,l.FD)(z.S,{gap:8,align:"center",children:[(0,l.Y)(nw.A,{context:"workspace_object_storage_pane",text:"Upgrade your plan to ".concat(a,"."),css:nx.cta,colorway:"primary",variant:"default",disabled:t,onPlanCheckoutComplete:s}),(0,l.Y)(U.$n,{variant:"nofill",colorway:"primary",text:"or add a payment method",css:nx.cta,disabled:t,loading:c,iconLeft:(0,l.Y)(nY.A,{}),onClick:function(){return r()}})]});case nf.S4.RequiresSmsVerification:return(0,l.Y)(nm.A,{context:nf.SG.ObjectStorage,onSuccess:s});case nf.S4.RequiresPaymentMethod:return(0,l.Y)(U.$n,{colorway:"primary",text:"Add a payment method",css:nx.cta,disabled:t,loading:c,iconLeft:(0,l.Y)(nY.A,{}),onClick:function(){return r()}});case nf.S4.RequiresUnbanning:return(0,l.Y)(nb.d,{text:"Your account is not currently allowed to ".concat(a,". We're here to help! Please reach out to our support team for assistance."),colorway:"warning",iconLeft:(0,l.Y)(nA.A,{}),css:nx.ctaStatusBanner,onClick:function(){return i()}});case nf.S4.InsufficientBudget:return(0,l.FD)(l.FK,{children:[(0,l.Y)(ne.N,{text:"You've reached your monthly usage budget. Increase your budget to ".concat(a,"."),colorway:"warning",icon:(0,l.Y)(nA.A,{}),css:nx.ctaStatusBanner}),(0,l.Y)(ny.h,{onUpdateSuccess:s,replId:u})]});case nf.S4.FeatureDisabled:case nf.S4.FeatureUnsupportedForReplitTeams:case nf.S4.FeatureUnsupportedForTeamsEdu:case nf.S4.FeatureUnsupportedForTeamsFree:case nf.S4.FeatureUnsupportedForTeamsPro:case nf.S4.InsufficientPermissions:case nf.S4.InsufficientQuota:case nf.S4.RequiresActiveTeamsSubscription:case nf.S4.PaymentDelinquent:case nf.S4.RequiresEmailVerification:return(0,l.Y)(ne.N,{text:o.message,colorway:"warning",icon:(0,l.Y)(nA.A,{}),css:nx.ctaStatusBanner});case nf.S4.Authorized:case nf.S4.AuthorizedQuota:return(0,l.Y)(l.FK,{children:n});default:(0,nh.A)(o.code)}}var nk=t(63441),nD=t(59172),nE=t(1998),nR=t(82842),nI=[{imageUrl:"/public/images/object-storage/objects-in-bucket.svg",text:"Store immutable files, like photos and documents, in writable buckets (databases for unstructured files).",altText:"An image and a file going into a bucket"},{imageUrl:"/public/images/object-storage/upload-to-cloud.svg",text:"Deploy apps that handle variable sets of files added by your users, like an upload-based photo gallery.",altText:"Images being uploaded to a cloud"},{imageUrl:"/public/images/object-storage/share-same-bucket.svg",text:"Buckets are automatically shared between development and production, so you can easily pass files to your users directly from the Workspace.",altText:"Development icon and deployment icon sharing a bucket"}],nF=(0,T.x)({action:[P.wp.width("100%"),P.wp.maxWidth(320),P.wp.px(32),{marginLeft:"auto",marginRight:"auto"}],rowText:[P.wp.flex.growAndShrink(1),P.wp.textAlign.left]});function nT(e){var n,t,r,o,a=e.createBucketAuthz,c=e.editBucketAuthz,d=e.refetchAuthzQueryData,p=e.onBucketAdded,h=e.onError,m=e.innerRef,g=(0,i._)((0,s.useState)(!1),2),v=g[0],w=g[1],y=(0,s.useCallback)(function(){return w(!1)},[]),b=(0,s.useCallback)(function(){return w(!0)},[]),S=(0,i._)((0,s.useState)(!1),2),A=S[0],x=S[1],_=(0,s.useCallback)(function(){return x(!1)},[]),k=(0,s.useCallback)(function(){return x(!0)},[]),D=(0,C.A)(),E=(n={variables:{replId:D}},t=(0,u._)({},nd,n),f.I(np,t)).data,R=(null==E?void 0:E.getRepl.__typename)==="Repl"?null==(r=E.getRepl.org)?void 0:r.id:void 0,I=(0,i._)(Y(),2),F=I[0],T=I[1].loading;return(0,l.FD)(l.FK,{children:[(0,l.Y)(e5,{isOpen:v,onBucketAdded:p,onError:h,onRequestClose:y,orgId:R}),(0,l.Y)(j,{isOpen:A,loading:T,handleCreateBucket:function(e){F({variables:{input:e},onCompleted:function(e){var n="Bucket"===e.createBucket.__typename?e.createBucket:null;if(!n)return void h(Error("Failed to create bucket"));p(n)},onError:h})},onRequestClose:_}),(0,l.Y)(nk.A,{pane:{type:"objectStorage"},maxWidth:450,body:nI.map(function(e,n){return(0,l.FD)(z.S,{row:!0,gap:16,children:[(0,l.Y)(z.S,{children:(0,l.Y)(nE.A,{src:e.imageUrl,width:44,height:44,alt:e.altText})}),(0,l.Y)(H.EY,{css:nF.rowText,children:e.text})]},n)}),innerRef:m,action:(0,l.FD)(nC,{replId:D,createBucketAuthz:a,actionDescription:"create a bucket",refetchAuthzQueryData:d,loading:T,children:[(0,l.Y)(U.$n,{css:nF.action,text:T?"Creating bucket...":"Create new bucket",onClick:k,colorway:"primary",iconLeft:T?(0,l.Y)(W.A,{}):(0,l.Y)(G.A,{}),disabled:T}),(0,l.Y)(z.S,{children:(0,l.Y)(nD.m_,{isDisabled:null==c?void 0:c.isAuthorized,tooltip:null!=(o=null==c?void 0:c.message)?o:"You are not authorized to edit buckets",delay:"default",placement:"bottom-start",children:(0,l.Y)(U.$n,{css:nF.action,text:"Use an existing bucket",onClick:b,iconLeft:(0,l.Y)(nR.A,{}),disabled:T||!(null==c?void 0:c.isAuthorized)})})})]})})]})}var nP=t(83846),nL=t(95983),nU=t(4880),nN=t(46330),nO=t(32957),nM=t(44070),nB=t(43177),nH=t(98444),nz=function(e){var n=e.folderPath,t=e.onDropNativeFiles,r=(0,i._)((0,nB.H)(function(){return{accept:[ei.FILE,nH.FILE],drop:function(e){return"files"in e&&t(e.files),{name:n}},collect:function(e){return{isOver:!!e.isOver()}}}}),2);return{isDraggedOver:r[0].isOver,drop:r[1]}},nW=function(e){var n=e.currentFolder,t=e.onDropNativeFiles,r=(0,i._)((0,nB.H)(function(){return{accept:[nH.FILE],drop:function(e,n){n.didDrop()||e.dirContent.then(function(e){t(e)})},collect:function(e){return{isOverCurrent:e.isOver({shallow:!0})}}}},[n]),2);return{isOverCurrent:r[0].isOverCurrent,drop:r[1]}},nG=t(51261),nV=t(49045),nj=t(96700),nZ=t(38292),nq=t(81526),nK=t(16251),n$=t(9969),nJ=t(87885),nQ=t(19139),nX=t(3694),n0=t(49444),n1=t(77247),n2=t(74338),n4=t(28051),n5=t(24961),n3=t(56889),n6=t(95383),n8=t(1369),n7=t(29064),n9="1px dashed ".concat(eW.LU.accentPrimaryDefault),te=P.kL.min(500),tn=(0,nV.v)(["bodyOutline","bodyMarginBottom"]),tt=tn.cssVars,tr=tn.styleTokens,ti=(0,T.x)({wrapper:[P.wp.flex.growAndShrink(1)],buttons:[(0,nP._)({},te,[P.wp.rowWithGap(8)])],secondaryButtons:[P.wp.flex.grow(1)],tableWrapper:[P.wp.flex.growAndShrink(1),P.wp.borderRadius(4),{outline:tr.bodyOutline,marginBottom:tr.bodyMarginBottom}],tableHeader:[P.wp.position.sticky,P.wp.top(0),P.wp.textAlign.left,P.wp.zIndex(1),P.wp.backgroundColor.backgroundDefault],tableHeaderMainColumn:[P.wp.textAlign.left,P.wp.p(4)],footer:[P.wp.mb(8),P.wp.pt(8),P.wp.flex.growAndShrink(1)],loadMoreButton:[P.wp.flex.growAndShrink(1)],pageSizeSelect:[P.wp.minWidth(75),{borderTopRightRadius:"".concat(eW.LU.space4," !important"),borderBottomRightRadius:"".concat(eW.LU.space4," !important")}],searchWrapper:[P.wp.flex.grow(1)]});function to(e){var n,t,d,p,f,h,m,g,v=e.bucketExternalId,w=e.onOpenCommandsTab,y=e.onError,b=(0,i._)((0,s.useState)(""),2),S=b[0],Y=b[1],A=(0,c.md)(eS).get(v),x=null!=(m=null==A?void 0:A.isLoading)&&m,C=(0,i._)((0,s.useState)(""),2),_=C[0],k=C[1],D=(t=(n={searchQuery:S,bucketState:A,currentFolder:_}).bucketState,d=n.currentFolder,(0,s.useMemo)(function(){if(!t)return{displayedItems:[],nextPageToken:void 0,total:0};var e=t.items,n=t.search,r=t.nextPageToken,i=n?n.items:e,a=n?n.nextPageToken:r,l=n?n.items.length:e.length,s=[],c=new Map,p=!0,f=!1,h=void 0;try{for(var m,g=i[Symbol.iterator]();!(p=(m=g.next()).done);p=!0){var v=m.value;if(v.name.startsWith(d)&&v.name!==d){var w=v.name.slice(d.length);if(!w.includes("/")){s.push((0,q._)((0,u._)({},v),{isFolder:!1,displayName:w}));continue}var y=w.split("/")[0];if(c.get(y)||c.set(y,{isFolder:!0,name:d+y+"/",displayName:y}),v.name===d+y+"/"){var b=c.get(y);if(!b)throw Error("Folder should have been added to map");b.optimisticallyInserted=v.optimisticallyInserted,b.isPendingDeletion=v.isPendingDeletion}}}}catch(e){f=!0,h=e}finally{try{p||null==g.return||g.return()}finally{if(f)throw h}}var S=eE(Array.from(c.values())),Y=eE(s);return{displayedItems:(0,o._)(S).concat((0,o._)(Y)),nextPageToken:a,total:l}},[t,d])),E=D.displayedItems,R=D.nextPageToken,I=D.total,F=!!R,T=(0,s.useMemo)(function(){return[{accessorKey:"name",header:"Name",size:500},{accessorKey:"added",header:"Added",size:200},{accessorKey:"size",header:"Size",size:200}]},[]),P=(0,nL.useReactTable)({data:E,columns:T,getCoreRowModel:(0,nL.getCoreRowModel)()}),L=P.getRowModel().rows,N=(0,s.useRef)(null),O=(0,nU.Te)({count:F?L.length+1:L.length,getScrollElement:function(){return N.current},estimateSize:function(){return 34},overscan:20}),M=eI(),B=M.fetchObjects,G=M.maxResults,V=M.setMaxResults,j=function(){var e=(0,i._)((0,s.useState)(!1),2),n=e[0],t=e[1],o=(0,c.Xr)(eC),l=(0,c.Xr)(e_),u=(0,c.Xr)(ek);function d(){return(d=(0,r._)(function(e){var n,r,i,s,c,d,p;return(0,a.YH)(this,function(a){switch(a.label){case 0:if(n=e.bucketExternalId,r=e.folderName,i=e.currentFolder,s=e.onError,r.includes("/"))return null==s||s(Error("Folder name cannot contain a forward slash")),[2];t(!0),o({bucketExternalId:n,name:c=i+r+"/",contentType:"text/plain",size:"0"}),d=new File([""],r,{type:"text/plain"}),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,es({bucketExternalId:n,objectName:c,file:d})];case 2:return a.sent(),l({bucketExternalId:n,name:c,isOptimisticallyInserted:!1}),[3,4];case 3:return p=a.sent(),null==s||s(p),u({bucketExternalId:n,name:c}),[3,4];case 4:return t(!1),[2]}})})).apply(this,arguments)}return{createFolder:function(e){return d.apply(this,arguments)},loading:n}}().createFolder,Z=eF().uploadFiles,K=(0,s.useRef)(null),$=(0,s.useRef)(null),J=(0,i._)((0,s.useState)(!1),2),Q=J[0],X=J[1],ee=(0,i._)((0,s.useState)(null),2),en=ee[0],et=ee[1],er=nW({currentFolder:_,onDropNativeFiles:function(e){Z({bucketExternalId:v,files:e,targetFolder:_,onError:y})}}),ei=er.isOverCurrent,eo=er.drop,ea=function(e){Y(e),""===e&&B({bucketExternalId:v,onError:y})},el=!(E&&E.length);return(0,l.FD)(l.FK,{children:[(0,l.FD)(z.S,{css:ti.wrapper,children:[(0,l.FD)(z.S,{css:ti.buttons,gap:8,children:[(0,l.FD)(z.S,{row:!0,gap:8,children:[(0,l.Y)(U.$n,{onClick:function(){K.current&&K.current.click()},text:"Upload files",colorway:"primary",iconLeft:(0,l.Y)(n1.A,{})}),(0,l.Y)(U.$n,{onClick:function(){$.current&&$.current.click()},text:"Upload folder",colorway:"primary",iconLeft:(0,l.Y)(n5.A,{})})]}),(0,l.FD)(z.S,{css:ti.secondaryButtons,row:!0,gap:8,justify:"space-between",children:[(0,l.Y)(U.$n,{onClick:function(){return X(!0)},text:"Create folder",iconLeft:(0,l.Y)(n4.A,{})}),(0,l.Y)(z.S,{css:ti.searchWrapper,children:(0,l.Y)(nq.I,{value:S,onChange:function(e){return ea(e.target.value)},onKeyDown:function(e){"Escape"===e.key&&ea(""),"Enter"===e.key&&B({bucketExternalId:v,matchGlob:S,onError:y})},onClear:function(){return ea("")},disabled:x})}),(0,l.Y)(U.$n,{onClick:function(){return B({bucketExternalId:v,matchGlob:S,onError:y})},text:"Refresh",loading:x,iconLeft:(0,l.Y)(n8.A,{})})]})]}),(0,l.FD)(z.S,{row:!0,gap:8,align:"center",justify:"space-between",children:[(0,l.Y)(tb,{currentFolder:_,bucketExternalId:v,setCurrentFolder:k,onError:y}),(0,l.Y)(z.S,{children:x?(0,l.Y)(W.A,{size:12}):(0,l.FD)(H.EY,{color:"dimmer",variant:"small",children:[F?"Loaded":"Total"," ",I]})})]}),(0,l.Y)(z.S,{innerRef:eo,css:ti.tableWrapper,style:(g={},(0,nP._)(g,tt.bodyOutline,(f=(p={isOverCurrent:ei,isEmpty:el}).isOverCurrent,h=p.isEmpty,f?n9:h?"1px dashed ".concat(eW.LU.outlineDefault):void 0)),(0,nP._)(g,tt.bodyMarginBottom,ei||el?eW.LU.space8:void 0),g),children:!el||Q?(0,l.Y)("div",{ref:N,className:"container",style:{overflow:"auto",flex:"1 1 auto"},children:(0,l.Y)("div",{style:{height:"".concat(O.getTotalSize(),"px")},children:(0,l.FD)("table",{style:{width:"100%"},children:[(0,l.Y)("thead",{css:ti.tableHeader,children:P.getHeaderGroups().map(function(e){return(0,l.Y)("tr",{children:e.headers.map(function(e){return(0,l.Y)("th",{css:ti.tableHeaderMainColumn,colSpan:e.colSpan,style:{width:e.getSize()},children:(0,nL.flexRender)(e.column.columnDef.header,e.getContext())},e.id)})},e.id)})}),(0,l.FD)("tbody",{children:[Q?(0,l.Y)(tA,{onCreateFolder:function(e){X(!1),j({bucketExternalId:v,folderName:e,currentFolder:_,onError:y})},onCanceled:function(){return X(!1)}}):null,O.getVirtualItems().map(function(e,n){if(e.index>L.length-1)return(0,l.Y)("tr",{style:{height:"".concat(e.size,"px"),transform:"translateY(".concat(e.start-n*e.size,"px)")},children:(0,l.Y)("td",{colSpan:3,children:(0,l.FD)(nj.Y,{css:ti.footer,children:[(0,l.Y)(U.$n,{css:ti.loadMoreButton,onClick:function(){return B({bucketExternalId:v,matchGlob:S,loadMorePageToken:R,onError:y})},text:x?"":"Load more",iconLeft:x?(0,l.Y)(W.A,{}):void 0,loading:x,disabled:x||!F}),(0,l.Y)(nK.l,{css:ti.pageSizeSelect,isDisabled:x||!F,"aria-label":"Select page size",selectedKey:G.toString(),onSelectionChange:function(e){return V(Number(e))},items:eR.map(function(e){return{id:e.toString()}}),children:function(e){return(0,l.Y)(ej.nh,{label:e.id},e.id)}})]})})},e.key.toString());var t=E[e.index];return t?t.isFolder?(0,l.Y)(tc,{index:n,virtualRow:e,item:t,setCurrentFolder:k,onDeleteClick:et,bucketExternalId:v,onError:y},t.name):(0,l.Y)(tu,{index:n,virtualRow:e,item:t,bucketExternalId:v,onDeleteClick:et,onError:y},t.name):null})]})]})})}):(0,l.Y)(l.FK,{children:x?(0,l.Y)(z.S,{align:"center",justify:"center",style:{flex:1},children:(0,l.Y)(W.A,{})}):(0,l.Y)(tk,{onOpenCommandsTab:w})})}),(0,l.Y)(nG.v,{fileUploadInputRef:K,dirUploadInputRef:$,uploadFiles:function(e){return Z({bucketExternalId:v,files:e.files,targetFolder:_,onError:y})}})]}),(0,l.Y)(tC,{bucketExternalId:v,requestedDeleteItem:en,onRequestClose:function(){return et(null)},onError:y})]})}var ta=(0,nV.v)(["rowOutline","rowOpacity","rowTextDecoration","rowCursor"]),tl=ta.cssVars,ts=ta.styleTokens;function tc(e){var n,t=e.index,r=e.virtualRow,i=e.item,o=e.bucketExternalId,a=e.setCurrentFolder,s=e.onDeleteClick,c=e.onError,u=eF().uploadFiles,d=(0,x.A)().showConfirm,p=nz({folderPath:i.name,onDropNativeFiles:function(e){d('Uploading files to "'.concat(i.name,'"')),u({bucketExternalId:o,files:e,targetFolder:i.name,onError:c})}}),f=p.isDraggedOver,h=p.drop;return(0,l.Y)(th,{index:t,virtualRow:r,item:i,ref:h,onDeleteClick:function(){return s(i)},icon:(0,l.Y)(n2.A,{}),timeCreatedCell:"-",sizeCell:"-",style:(n={},(0,nP._)(n,tl.rowOutline,f?n9:void 0),(0,nP._)(n,tl.rowCursor,"pointer"),n),onClick:function(){return a(i.name)},onKeyDown:function(e){"Enter"===e.key&&a(i.name)}})}function tu(e){var n,t,o,u,d,p=e.index,f=e.virtualRow,h=e.item,m=e.bucketExternalId,g=e.onDeleteClick,v=e.onError,w=encodeURIComponent(h.name),y="/object-storage/storage/v1/b/".concat(m,"/o/").concat(w,"?alt=media"),b=!!(h.optimisticallyInserted||h.isPendingDeletion),S=function(){var e=(0,i._)((0,s.useState)(!1),2),n=e[0],t=e[1],o=(0,c.Xr)(e_),l=(0,c.Xr)(eC),u=(0,c.Xr)(ek);function d(){return(d=(0,r._)(function(e){var n,r,i,s,c,d,p;return(0,a.YH)(this,function(a){switch(a.label){case 0:n=e.bucketExternalId,r=e.object,i=e.destinationFolder,s=e.onError,c=e.onSuccess,t(!0),d=i+r.name.split("/").pop(),o({bucketExternalId:n,name:r.name,isPendingDeletion:!0}),l({bucketExternalId:n,name:d,contentType:r.contentType,size:r.size}),a.label=1;case 1:return a.trys.push([1,4,,5]),[4,function(e){return ev.apply(this,arguments)}({destinationBucketExternalId:n,sourceBucketExternalId:n,sourceObjectName:r.name,destinationObjectName:d})];case 2:return a.sent(),[4,em({bucketExternalId:n,objectName:r.name})];case 3:return a.sent(),u({bucketExternalId:n,name:r.name}),o({bucketExternalId:n,name:d,isOptimisticallyInserted:!1}),null==c||c(),[3,5];case 4:return p=a.sent(),null==s||s(p),o({bucketExternalId:n,name:r.name,isPendingDeletion:!1}),u({bucketExternalId:n,name:d}),[3,5];case 5:return t(!1),[2]}})})).apply(this,arguments)}return{loading:n,moveObject:function(e){return d.apply(this,arguments)}}}().moveObject,Y=(0,x.A)().showConfirm,A=(t=(n={item:h,disableDrag:b,onDropOverFolder:function(e){return S({bucketExternalId:m,object:h,destinationFolder:e,onSuccess:function(){Y('Moved "'.concat(h.name,'" to "').concat(e,'"'))},onError:v})}}).item,o=n.disableDrag,u=n.onDropOverFolder,{isDragging:(d=(0,i._)((0,nM.i)(function(){return{type:ei.FILE,canDrag:!o,item:function(){return{name:t.name,type:ei.FILE}},collect:function(e){return{isDragging:!!e.isDragging()}},end:function(e,n){var t=n.getDropResult();t&&t&&u(t.name)}}},[o]),2))[0].isDragging,drag:d[1]}),C=A.isDragging,_=A.drag;return(0,l.Y)(th,{index:p,virtualRow:f,item:h,ref:_,onDeleteClick:function(){return g(h)},icon:(0,l.Y)(tx,{contentType:h.contentType}),timeCreatedCell:(0,l.Y)(n$.Dc,{date:h.timeCreated}),sizeCell:(0,nN.z)(Number(h.size),{isKib:!0,isKibNotation:!0}),style:(0,nP._)({},tl.rowOpacity,C?.5:void 0),additionalActionButtons:(0,l.Y)(l.FK,{children:(0,l.Y)(nZ.K0,{alt:"Download",css:tp.rowActionButton,children:(0,l.Y)("a",{download:h.displayName,href:y,css:P.wp.color.foregroundDefault,children:(0,l.Y)(nX.A,{})})})})})}var td=(0,T.x)({row:[P.wp.position.relative,P.wp.borderRadius(4),{outline:ts.rowOutline,outlineOffset:-1,opacity:ts.rowOpacity,cursor:ts.rowCursor,":hover":{background:"".concat(eW.LU.backgroundHigher," !important")},":hover #action-buttons":{display:"flex"},":focus":{outline:"2px solid ".concat(eW.LU.accentPrimaryDefault)}}],text:[P.wp.flex.shrink(1)]}),tp=(0,T.x)({row:[td.row],pendingRow:[td.row,P.wp.color.foregroundDimmest],tableData:[P.wp.p(4),{":first-of-type":{borderTopLeftRadius:4,borderBottomLeftRadius:4},":last-of-type, :nth-last-of-type(2)":{borderTopRightRadius:4,borderBottomRightRadius:4}}],text:td.text,strikeThroughText:[td.text,{textDecoration:"line-through"}],actionButtonTableData:[P.wp.position.relative],rowActionButtonGroup:[P.wp.position.absolute,P.wp.right(0),P.wp.top(0),P.wp.bottom(0),P.wp.rowWithGap(4),P.wp.align.center,P.wp.backgroundColor.backgroundHigher,{display:"none",borderTopRightRadius:4,borderBottomRightRadius:4}],rowActionButton:[eG.b.filled],loadingTableData:[P.wp.position.relative],loadingIconWrapper:[P.wp.position.absolute,P.wp.right(4),P.wp.top(0),P.wp.bottom(0),P.wp.justify.center],loadingIcon:[{borderRadius:"50%"},P.wp.backgroundColor.backgroundDefault]}),tf=function(){var e=(0,i._)((0,s.useState)(!1),2),n=e[0],t=e[1],r=(0,i._)((0,s.useState)(null),2),o=r[0],a=r[1];return(0,s.useEffect)(function(){if(null!==o){var e=function(){t(o.offsetWidth<o.scrollWidth||o.offsetHeight<o.scrollHeight)};e();var n=new ResizeObserver(e);return n.observe(o),function(){return n.disconnect()}}},[o]),{attachObserver:a,isOverflowing:n}},th=(0,s.forwardRef)(function(e,n){var t=e.index,r=e.virtualRow,i=e.item,o=e.onDeleteClick,a=e.icon,s=e.timeCreatedCell,c=e.sizeCell,d=e.style,p=e.onClick,f=e.onKeyDown,h=e.additionalActionButtons,m=i.isPendingDeletion?tp.strikeThroughText:tp.text,g=i.optimisticallyInserted||i.isPendingDeletion,v=tf(),w=v.attachObserver,y=v.isOverflowing;return(0,l.FD)("tr",{style:(0,q._)((0,u._)({},d),{height:"".concat(r.size,"px"),transform:"translateY(".concat(r.start-t*r.size,"px)"),background:r.index%2==0?"color-mix(in srgb, ".concat(eW.LU.backgroundDefault," 60%, ").concat(eW.LU.backgroundRoot,")"):void 0}),ref:n,tabIndex:0,css:g?tp.pendingRow:tp.row,onClick:p,onKeyDown:f,children:[(0,l.Y)("td",{css:tp.tableData,children:(0,l.Y)(nD.m_,{isDisabled:!y,tooltip:i.displayName,children:(0,l.FD)(z.S,{row:!0,gap:8,align:"center",children:[a,(0,l.Y)(H.EY,{multiline:!0,maxLines:1,css:m,ref:w,children:i.displayName})]})})}),(0,l.Y)("td",{css:tp.tableData,children:(0,l.Y)(H.EY,{multiline:!0,maxLines:1,css:m,children:s})}),(0,l.Y)("td",{css:tp.tableData,children:(0,l.Y)(H.EY,{multiline:!0,maxLines:1,css:m,children:c})}),g?null:(0,l.Y)("td",{css:tp.actionButtonTableData,children:(0,l.FD)(z.S,{css:tp.rowActionButtonGroup,px:4,id:"action-buttons",children:[h,(0,l.Y)(nZ.K0,{onClick:o,alt:"Delete",css:tp.rowActionButton,children:(0,l.Y)(n7.A,{color:eW.LU.accentNegativeDefault})})]})}),g?(0,l.Y)("td",{css:tp.loadingTableData,children:(0,l.Y)(z.S,{css:tp.loadingIconWrapper,children:(0,l.Y)(W.A,{css:tp.loadingIcon})})}):null]},i.name)}),tm=(0,nV.v)(["breadcrumbOutline","breadcrumbTextColor"]),tg=tm.cssVars,tv=tm.styleTokens,tw=(0,T.x)({breadcrumb:[{color:tv.breadcrumbTextColor,outline:tv.breadcrumbOutline}]}),ty=function(e){var n=e.split("/").filter(function(e){return""!==e}),t=n.map(function(e,t){return{folderName:e,path:n.slice(0,t+1).join("/")+"/"}});return[{folderName:"Objects",path:""}].concat((0,o._)(t))};function tb(e){var n=e.currentFolder,t=e.bucketExternalId,r=e.setCurrentFolder,i=e.onError,o=ty(n);return(0,l.Y)(z.S,{pt:12,pb:4,row:!0,gap:2,align:"center",children:o.map(function(e,n){var a=e.folderName,c=e.path,u=n===o.length-1;return(0,l.FD)(s.Fragment,{children:[(0,l.Y)(tS,{folderPath:c,folderName:a,bucketExternalId:t,onClick:function(){return r(c)},isLastBreadcrumb:u,onError:i}),u?null:(0,l.Y)(H.EY,{color:"dimmest",children:"/"})]},c)})})}function tS(e){var n,t=e.folderPath,r=e.folderName,i=e.bucketExternalId,o=e.onClick,a=e.isLastBreadcrumb,s=e.onError,c=eF().uploadFiles,u=nz({folderPath:t,onDropNativeFiles:function(e){return c({bucketExternalId:i,files:e,targetFolder:t,onError:s})}}),d=u.isDraggedOver,p=u.drop;return(0,l.Y)(U.$n,{ref:p,text:r,variant:"nofill",onClick:o,iconLeft:(0,l.Y)(n2.A,{}),size:"small",disabled:a,style:(n={},(0,nP._)(n,tg.breadcrumbTextColor,a?eW.LU.foregroundDefault:void 0),(0,nP._)(n,tg.breadcrumbOutline,d?n9:void 0),n),css:tw.breadcrumb})}var tY=(0,T.x)({icon:[P.wp.height(24),P.wp.width(24),P.wp.center]});function tA(e){var n=e.onCreateFolder,t=e.onCanceled,r=(0,i._)((0,s.useState)(""),2),o=r[0],a=r[1],c=(0,nO.A)(t,[]);return(0,l.Y)("tr",{children:(0,l.Y)("td",{colSpan:3,children:(0,l.FD)(z.S,{innerRef:c,row:!0,gap:8,align:"center",children:[(0,l.Y)(z.S,{css:tY.icon,children:(0,l.Y)(n2.A,{})}),(0,l.Y)(N.pd,{value:o,autoFocus:!0,onChange:function(e){return a(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&(n(o),a("")),"Escape"===e.key&&t()},autoCapitalize:"off",autoComplete:"off",autoCorrect:"off"})]})})})}function tx(e){var n=e.contentType;return n?n.startsWith("image/")?(0,l.Y)(n3.A,{}):n.startsWith("video/")?(0,l.Y)(nQ.A,{}):n.startsWith("audio/")?(0,l.Y)(n6.A,{}):(0,l.Y)(n0.A,{}):(0,l.Y)(n0.A,{})}function tC(e){var n,t=e.bucketExternalId,o=e.requestedDeleteItem,u=e.onRequestClose,d=e.onError,p=function(){var e=(0,i._)((0,s.useState)(!1),2),n=e[0],t=e[1],o=(0,c.Xr)(e_),l=(0,c.Xr)(ek);function u(){return(u=(0,r._)(function(e){var n,r,i,s;return(0,a.YH)(this,function(a){switch(a.label){case 0:n=e.bucketExternalId,r=e.objectName,i=e.onError,t(!0),o({bucketExternalId:n,name:r,isPendingDeletion:!0}),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,em({bucketExternalId:n,objectName:r})];case 2:return a.sent(),l({bucketExternalId:n,name:r}),[3,4];case 3:return s=a.sent(),null==i||i(s),o({bucketExternalId:n,name:r,isPendingDeletion:!1}),[3,4];case 4:return t(!1),[2]}})})).apply(this,arguments)}return{loading:n,deleteObject:function(e){return u.apply(this,arguments)}}}().deleteObject,f=function(){var e=(0,i._)((0,s.useState)(!1),2),n=e[0],t=e[1],o=(0,c.Xr)(e_),l=(0,c.Xr)(ek),u=(0,c.md)(eS);function d(){return(d=(0,r._)(function(e){var n,i,s,c,d,p,f;return(0,a.YH)(this,function(h){switch(h.label){case 0:n=e.bucketExternalId,i=e.folderPath,s=e.onError,t(!0),p=(null!=(d=null==(c=u.get(n))?void 0:c.items)?d:[]).filter(function(e){return e.name.startsWith(i)}),h.label=1;case 1:var m;return h.trys.push([1,3,,4]),[4,Promise.all(p.map((m=(0,r._)(function(e){return(0,a.YH)(this,function(t){switch(t.label){case 0:o({bucketExternalId:n,name:e.name,isPendingDeletion:!0}),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,em({bucketExternalId:n,objectName:e.name})];case 2:return t.sent(),l({bucketExternalId:n,name:e.name}),[3,4];case 3:return t.sent(),o({bucketExternalId:n,name:e.name,isPendingDeletion:!1}),[3,4];case 4:return[2]}})}),function(e){return m.apply(this,arguments)})))];case 2:return h.sent(),[3,4];case 3:return f=h.sent(),null==s||s(f),[3,4];case 4:return t(!1),[2]}})})).apply(this,arguments)}return{loading:n,deleteFolder:function(e){return d.apply(this,arguments)}}}().deleteFolder,h=(n=(0,r._)(function(){return(0,a.YH)(this,function(e){switch(e.label){case 0:if(!(null==o?void 0:o.isFolder))return[3,2];return[4,f({bucketExternalId:t,folderPath:o.name,onError:d})];case 1:return e.sent(),u(),[2];case 2:if(!o)return[3,4];return[4,p({bucketExternalId:t,objectName:o.name,onError:d})];case 3:e.sent(),u(),e.label=4;case 4:return[2]}})}),function(){return n.apply(this,arguments)});return(0,l.Y)(M.a,{isOpen:!!o,onRequestClose:u,children:o?(0,l.Y)(nJ.A,{name:o.displayName,description:'"'.concat(o.displayName,'" ').concat(o.isFolder?" and all its contents":""),entityType:o.isFolder?"folder":"file",hideModal:u,delete:h}):null})}var t_=(0,T.x)({wrapper:[P.wp.center,P.wp.colWithGap(16),P.wp.flex.grow(1),P.wp.justify.center,P.wp.borderRadius(4),P.wp.mb(8)],textWrapper:[P.wp.center,P.wp.colWithGap(4)],text:[P.wp.center],textButton:[P.wp.color.accentPrimaryStronger]});function tk(e){var n=e.onOpenCommandsTab;return(0,l.Y)(z.S,{css:t_.wrapper,children:(0,l.FD)(z.S,{css:t_.textWrapper,children:[(0,l.Y)(H.EY,{variant:"subheadBig",children:"No objects"}),(0,l.FD)(z.S,{css:t_.text,children:[(0,l.Y)(H.EY,{children:"Drag and drop or click to upload,"}),(0,l.FD)(z.S,{row:!0,gap:4,align:"center",children:[(0,l.Y)(H.EY,{children:"or"}),(0,l.Y)(U.$n,{variant:"underlinedOnHover",colorway:"primary",onClick:n,text:"upload using commands",css:t_.textButton})]})]})]})})}function tD(){var e=(0,d._)(["\n  mutation ObjectStorageSettingsDeleteBucket($input: DeleteBucketInput!) {\n    deleteBucket(input: $input) {\n      ... on Bucket {\n        id\n      }\n      ... on Error {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return tD=function(){return e},e}function tE(){var e=(0,d._)(["\n  mutation ObjectStorageSettingsRemoveReplBucket(\n    $input: RemoveReplBucketInput!\n  ) {\n    removeReplBucket(input: $input) {\n      __typename\n      ... on Bucket {\n        ...ObjectStorageBucket\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return tE=function(){return e},e}var tR={},tI=(0,p.J1)(tD()),tF=(0,p.J1)(tE(),y),tT=t(23021),tP=t(83650);function tL(e){var n,t,r=e.bucketId,o=e.bucketExternalId,a=e.onSettingsUpdate,c=e.onError,d=(0,C.A)(),p=(0,i._)((0,s.useState)(!1),2),f=p[0],m=p[1],g=function(){return m(!1)},v=(0,i._)((0,s.useState)(!1),2),w=v[0],y=v[1],b=function(){return y(!1)},S=(0,i._)((n=(0,u._)({},tR,void 0),h.n(tI,n)),2),Y=S[0],A=S[1].loading,x=(0,i._)((t=(0,u._)({},tR,void 0),h.n(tF,t)),2),_=x[0],k=x[1].loading;return(0,l.FD)(l.FK,{children:[(0,l.FD)(z.S,{gap:32,children:[(0,l.Y)(z.S,{gap:12,children:(0,l.FD)(z.S,{gap:6,children:[(0,l.Y)(H.EY,{variant:"subheadDefault",children:"Bucket ID"}),(0,l.Y)(nn.Ay,{children:"```\n".concat(o)})]})}),(0,l.FD)(z.S,{gap:12,children:[(0,l.FD)(z.S,{gap:6,children:[(0,l.Y)(U.$n,{text:k?"Removing Bucket from Repl...":"Remove Bucket from Repl",loading:k,css:P.wp.color.accentNegativeStronger,onClick:function(){return y(!0)}}),(0,l.Y)(H.EY,{color:"dimmest",children:"Your Repl will no longer be able to access this bucket. No data will be deleted and you can re-add this bucket at any time."})]}),(0,l.FD)(z.S,{gap:6,children:[(0,l.Y)(U.$n,{text:A?"Deleting":"Delete Bucket",loading:A,iconLeft:(0,l.Y)(n7.A,{color:eW.LU.accentNegativeStronger}),css:P.wp.color.accentNegativeStronger,onClick:function(){return m(!0)}}),(0,l.Y)(H.EY,{color:"dimmest",children:"You cannot undo this action."})]})]})]}),(0,l.Y)(M.a,{isOpen:w,onRequestClose:b,children:(0,l.Y)(tT.A,{prompt:"Remove Bucket?",desc:"This action will revoke this Repl's access to this bucket.",onCancel:b,confirmText:"Remove Bucket",icon:(0,l.Y)(tP.A,{}),onConfirm:function(){_({variables:{input:{bucketId:r,replId:d}},onError:c,onCompleted:function(e){"Bucket"===e.removeReplBucket.__typename?a({type:"removeBucket",data:{bucketId:r}}):c(Error("Failed to remove bucket: "+e.removeReplBucket.message))}}),b()}})}),(0,l.Y)(M.a,{isOpen:f,onRequestClose:g,children:(0,l.Y)(nJ.A,{name:"bucket",description:"this bucket and all its contents",entityType:"bucket",hideModal:g,delete:function(){return Y({variables:{input:{bucketId:r}},onError:c,onCompleted:function(e){"Bucket"===e.deleteBucket.__typename?a({type:"deleteBucket",data:{bucketId:r}}):c(Error("Failed to delete bucket: "+e.deleteBucket.message))}})}})})]})}var tU=t(29422),tN=t(69938),tO=t(49580),tM=t(13911),tB=t(88010),tH=t(19465),tz=[{icon:(0,l.Y)(tB.A,{}),title:"Objects",value:"objects"},{icon:(0,l.Y)(nr.A,{}),title:"Commands",value:"commands"},{icon:(0,l.Y)(tH.A,{}),title:"Settings",value:"settings"}],tW=(0,T.x)({self:[P.wp.flex.growAndShrink(1)],controlSeparator:[P.wp.color.outlineDefault,P.wp.px(8)],panels:[P.wp.flex.column,P.wp.px(8),P.wp.pt(12),P.wp.flex.growAndShrink(1)],objectTabPanel:[P.wp.flex.column,P.wp.flex.growAndShrink(1)]}),tG=function(){var e,n,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.onError,o=t.onCompleted,a=(0,C.A)(),l=(0,s.useCallback)(function(e){if((null==e?void 0:e.repl.__typename)==="Repl")try{return function(e){if("Repl"!==e.__typename)throw Error("Failed to fetch bucket data");var n,t=e.buckets;if(t&&"BucketConnection"!==t.__typename)throw Error(t.message);var r=null!=(n=null==t?void 0:t.items)?n:[];if(!r.length)return{buckets:r};var i=e.defaultBucket;if(i)if("Bucket"===i.__typename)return{initialBucket:i,buckets:r};else throw Error(i.message);return{initialBucket:r[0],buckets:r}}(e.repl)}catch(e){null==r||r(e)}},[]),c=(e={variables:{replId:a,bucketsCount:10},fetchPolicy:"cache-and-network",ssr:!1,onCompleted:function(e){if((null==e?void 0:e.repl.__typename)==="Repl"){var n=l(e);n&&(null==o||o(n))}}},n=(0,u._)({},w,e),f.I(b,n)),d=c.data,p=c.loading,h=c.error,m=c.refetch,g=(0,i._)((0,s.useState)(d?l(d):void 0),2),v=g[0],y=g[1];return(0,s.useEffect)(function(){d&&y(l(d))},[l,d]),{buckets:null==v?void 0:v.buckets,initialBucket:null==v?void 0:v.initialBucket,data:d,loading:p,error:h,refetch:m}};function tV(){var e,n,t,u,d,p,f=(0,i._)((0,s.useState)(),2),h=f[0],m=f[1],g=(0,s.useMemo)(function(){return null==h?void 0:h.map(function(e){return e.id})},[h]),v=(0,i._)((0,s.useState)(),2),w=v[0],y=v[1],b=(0,i._)((0,s.useState)("objects"),2),S=b[0],C=b[1],R=(0,i._)((0,s.useState)(!1),2),I=R[0],F=R[1],T=(0,s.useCallback)(function(){return F(!1)},[]),P=(0,s.useCallback)(function(){return F(!0)},[]),L=(0,i._)((0,s.useState)(!1),2),U=L[0],N=L[1],O=(0,s.useCallback)(function(){return N(!1)},[]),M=(0,s.useCallback)(function(){return N(!0)},[]),B=(0,c.md)(eS).get(null!=(d=null==w?void 0:w.externalId)?d:""),W=eI(),G=W.fetchObjects,V=W.loading,Z=(0,s.useCallback)(function(e){y(e),C("objects"),G({bucketExternalId:e.externalId})},[G]),q=(0,D.A)().dotReplit;(0,s.useEffect)(function(){w&&q.updateDotReplit([(0,A.Xl)(w.externalId)])},[w,q]);var $=(0,x.A)(),J=$.showConfirm,Q=$.showError,X=function(e){Q(e.message),K.v4(function(n){n.setTag("object-storage-pane",!0),K.Cp(e)})},ee=tG({onError:X,onCompleted:function(e){var n=e.buckets,t=e.initialBucket;m(n),!w&&t&&(y(t),G({bucketExternalId:null==t?void 0:t.externalId}))}}),en=ee.data,et=ee.loading,er=ee.error,ei=ee.refetch,eo=(0,i._)(Y(),2),ea=eo[0],el=eo[1].loading,es=(0,s.useCallback)(function(e){var n=!(arguments.length>1)||void 0===arguments[1]||arguments[1];m(function(n){return n?[e].concat((0,o._)(n)):[e]}),y(e),ei(),G({bucketExternalId:e.externalId,isNewBucket:n})},[G,ei]),ec=(0,s.useCallback)(function(e){var n=(null!=h?h:[]).filter(function(n){return n.id!==e});if(m(n),0===n.length){y(void 0),C("objects"),q.updateDotReplit([{path:"objectStorage",op:"remove"}]);return}y(n[0]),G({bucketExternalId:n[0].externalId}),C("objects")},[G,h,q]),eu=(null==en?void 0:en.repl.__typename)==="Repl"?en.repl.authorizations.createObjectBucket:void 0,ed=(null==en?void 0:en.repl.__typename)==="Repl"?en.repl.authorizations.editObjectBucket:void 0,ep=(null==en?void 0:en.repl.__typename)==="Repl"?null==(u=en.repl.org)?void 0:u.id:void 0,ef=(e=(0,E.Jw)(k._t.id,k.ij.UploadImages),n=(0,E.Jw)(k._t.id,k.ij.FindBucketId),(0,_.S)([e,n],{breadcrumb:"client/workspace/components/ObjectStorage/index.tsx:647"}));if(er)return(0,l.Y)(z.S,{p:16,children:(0,l.Y)(ne.N,{text:'Error: "'.concat(er.message,'". The issue has been logged and the Replit team will look into it.'),colorway:"negative"})});if(et&&!h)return(0,l.Y)(nk.A,{pane:{type:"objectStorage"},maxWidth:450,loading:!0,innerRef:ef});if(!w)return(0,l.Y)(nT,{createBucketAuthz:eu,editBucketAuthz:ed,refetchAuthzQueryData:ei,onBucketAdded:(t=(0,r._)(function(e){var n=arguments;return(0,a.YH)(this,function(t){return es(e,!(n.length>1)||void 0===n[1]||n[1]),[2]})}),function(e){return t.apply(this,arguments)}),onError:X,innerRef:ef});switch(S){case"objects":p=V&&void 0===B?(0,l.Y)(tU.A,{}):(0,l.Y)(z.S,{css:tW.objectTabPanel,children:(0,l.Y)(tM.A,{children:(0,l.Y)(to,{bucketExternalId:w.externalId,onOpenCommandsTab:function(){C("commands")},onError:X})})});break;case"commands":p=(0,l.Y)(z.S,{children:(0,l.Y)(nc,{onError:X})});break;case"settings":p=(0,l.Y)(z.S,{children:(0,l.Y)(tL,{bucketId:w.id,bucketExternalId:w.externalId,onSettingsUpdate:function(e){("deleteBucket"===e.type||"removeBucket"===e.type)&&ec(e.data.bucketId),"deleteBucket"===e.type&&J("Bucket deleted successfully"),"removeBucket"===e.type&&J("Bucket removed from Repl successfully")},onError:X})})}return(0,l.FD)(z.S,{innerRef:ef,css:tW.self,children:[(0,l.Y)(e5,{excludeBucketIds:null!=g?g:[],isOpen:I,onBucketAdded:function(e){T(),es(e,!1),J("Bucket added to Repl successfully")},onError:X,onRequestClose:T,orgId:ep}),(0,l.Y)(j,{isOpen:U,loading:el,handleCreateBucket:function(e){ea({variables:{input:{name:e.name,replId:e.replId}},onCompleted:function(e){var n="Bucket"===e.createBucket.__typename?e.createBucket:null;if(!n)return void X(Error("Failed to create bucket"));O(),es(n),J("Bucket created successfully")},onError:X})},onRequestClose:O}),(0,l.FD)(z.S,{px:8,py:4,align:"center",row:!0,children:[(0,l.Y)(tj,{buckets:h,onRequestAddBucket:P,onRequestCreateBucket:M,onSelect:Z,selectedBucketId:null==w?void 0:w.id}),(0,l.Y)(H.EY,{css:tW.controlSeparator,variant:"small",children:"/"}),(0,l.Y)(tZ,{onSelect:C,selectedView:S})]}),(0,l.Y)(tN.a,{}),(0,l.Y)(z.S,{css:tW.panels,children:p})]})}function tj(e){var n=e.buckets,t=e.onRequestAddBucket,r=e.onRequestCreateBucket,i=e.onSelect,o=e.selectedBucketId,a=(0,s.useMemo)(function(){if(n&&o)return n.find(function(e){return e.id===o})},[n,o]);return a&&n?(0,l.Y)(z.S,{children:(0,l.FD)(tO.in,{label:a.name,items:n,trigger:(0,l.Y)(U.$n,{size:"default",variant:"nofill",text:a.name,iconRight:(0,l.Y)(eK.A,{size:12})}),children:[n.map(function(e){return(0,l.Y)(tO.Dr,{icon:(0,l.Y)(eq.A,{visibility:e.id===a.id?"visible":"hidden"}),id:e.id,label:e.name,onAction:e.id!==a.id?function(){i(e)}:void 0},e.id)}),(0,l.Y)(tO.wv,{}),(0,l.Y)(tO.Dr,{icon:(0,l.Y)(G.A,{}),id:"create-new",label:"Create new bucket",onAction:r},"create-new"),(0,l.Y)(tO.Dr,{icon:(0,l.Y)(nR.A,{}),id:"add-existing",label:"Add an existing bucket",onAction:t},"add-existing")]})}):(0,l.Y)(z.S,{children:(0,l.Y)(U.$n,{size:"default",variant:"nofill",text:"Loading...",iconRight:(0,l.Y)(eK.A,{size:12})})})}function tZ(e){var n=e.onSelect,t=e.selectedView,r=(0,s.useMemo)(function(){return tz.find(function(e){return e.value===t})},[t]);return r?(0,l.Y)(z.S,{children:(0,l.Y)(tO.in,{onAction:function(e){var t=tz.find(function(n){return n.value===e});t&&n(t.value)},label:r.title,items:tz,trigger:(0,l.Y)(U.$n,{size:"default",variant:"nofill",text:r.title,iconLeft:r.icon,iconRight:(0,l.Y)(eK.A,{size:12})}),children:function(e){return(0,l.Y)(tO.Dr,{icon:e.icon,id:e.value,label:e.title},e.value)}})}):null}},25243:(e,n,t)=>{"use strict";t.d(n,{yN:()=>T});var r=t(12694),i=t(88263),o=t(21462),a=t(16564),l=t(31258),s=t(82272),c=t(64870),u=t(45641),d=t(64583),p=t(48521),f=t(46603),h=t(38292),m=t(76126),g=t(10429),v=t(83650),w=t(51705),y=t(17844),b=t(93629),S=t(71117);function Y(e){return(0,i.Y)(S.Ay,(0,b._)((0,y._)({},e),{children:(0,i.Y)("path",{fillRule:"evenodd",d:"M12 1.25a10.7 10.7 0 0 1 5.843 1.725l-1.089 1.089a9.19 9.19 0 0 0-3.05-1.157 16.05 16.05 0 0 1 1.556 2.651l-1.137 1.137A14.546 14.546 0 0 0 12 3.15a14.55 14.55 0 0 0-3.214 8.101h.782l-2.221 2.221c-.027-.24-.049-.48-.065-.721H2.78a9.194 9.194 0 0 0 1.284 4.004l-1.089 1.089A10.7 10.7 0 0 1 1.25 12C1.25 6.063 6.063 1.25 12 1.25Zm7.936 5.996 1.089-1.089A10.7 10.7 0 0 1 22.75 12c0 5.937-4.813 10.75-10.75 10.75a10.7 10.7 0 0 1-5.843-1.725l1.089-1.089a9.191 9.191 0 0 0 3.05 1.157 16.05 16.05 0 0 1-1.556-2.651l1.137-1.137A14.548 14.548 0 0 0 12 20.85a14.55 14.55 0 0 0 3.214-8.101h-.782l2.221-2.221c.027.24.049.48.065.721h4.502a9.193 9.193 0 0 0-1.284-4.004ZM2.78 11.25h4.502a16.05 16.05 0 0 1 3.014-8.343A9.255 9.255 0 0 0 2.78 11.25Zm10.924 9.843a16.051 16.051 0 0 0 3.014-8.343h4.502a9.255 9.255 0 0 1-7.516 8.343ZM22.53 2.53a.75.75 0 0 0-1.06-1.06l-20 20a.75.75 0 1 0 1.06 1.06l20-20Z",clipRule:"evenodd"})}))}var A=t(19465),x=(0,d.x)({wrapper:[p.wp.py(6),p.wp.flex.row,p.wp.align.center,p.wp.backgroundColor.backgroundHigher],wrapperWarning:[p.wp.py(6),p.wp.flex.row,p.wp.align.center,p.wp.backgroundColor.orangeDimmest],body:[p.wp.flex.growAndShrink(1)],firstLine:[p.wp.flex.wrap,p.wp.maxWidth("100%"),p.wp.overflow("hidden")],secondLine:[p.wp.px(6),p.wp.rowWithGap(2),p.wp.align.center,p.wp.flex.wrap,p.wp.maxWidth("100%"),p.wp.overflow("hidden"),p.wp.color.foregroundDimmest],secondLineWarning:[p.wp.px(6),p.wp.rowWithGap(2),p.wp.align.center,p.wp.flex.wrap,p.wp.maxWidth("100%"),p.wp.overflow("hidden"),p.wp.color.orangeStrongest],verticalDivider:[p.wp.ml(6),p.wp.mr(6),p.wp.height("1em"),p.wp.width(1),p.wp.backgroundColor.foregroundDefault]});function C(e){var n=e.openNetworkingTool,t=e.onClose,r=e.onDontExposePort,o=e.onDoExposePort,a=e.firstLine,l=e.secondLine,s=e.renderSecondLine,c=e.renderDontExposeButton,u=e.renderDoExposeButton,d=e.isWarning,p=void 0!==d&&d;return(0,i.FD)(g.S,{css:p?x.wrapperWarning:x.wrapper,children:[(0,i.FD)(g.S,{css:x.body,children:[(0,i.Y)(g.S,{css:x.firstLine,px:6,row:!0,gap:2,align:"center",children:a}),s?(0,i.Y)(g.S,{css:p?x.secondLineWarning:x.secondLine,children:l}):null]}),(0,i.FD)(g.S,{pr:6,row:!0,children:[(0,i.Y)(h.K0,{alt:"Networking tool",onClick:n,children:(0,i.Y)(A.A,{})}),void 0!==c&&c?(0,i.Y)(h.K0,{alt:"Don't expose this port to the web",onClick:r,children:(0,i.Y)(Y,{})}):null,void 0!==u&&u?(0,i.Y)(h.K0,{alt:"Expose this port to the web",onClick:o,children:(0,i.Y)(w.A,{})}):null,(0,i.Y)(h.K0,{alt:"Close",onClick:t,children:(0,i.Y)(v.A,{})})]})]})}function _(e){var n=e.configuration,t=e.openWebview,r=e.openNetworkingTool,o=e.onClose,a=e.onDontExposePort,l=e.renderSecondLine,c=(0,s.r$)(n.externalPort)?"{...}.replit.dev":"{...}.replit.dev:".concat(n.externalPort);return(0,i.Y)(C,{openNetworkingTool:r,onClose:o,firstLine:(0,i.FD)(i.FK,{children:[(0,i.FD)(m.EY,{children:["Port :",n.localPort," opened on"]}),(0,i.Y)(f.$n,{variant:"underlined",text:c,onClick:t})]}),secondLine:(0,i.FD)(i.FK,{children:[(0,i.Y)(m.EY,{children:"You can manage this config in the"}),(0,i.Y)(f.$n,{variant:"underlined",text:"Networking tool",onClick:r})]}),renderSecondLine:l,renderDontExposeButton:!0,onDontExposePort:a})}function k(e){var n=e.configuration,t=e.openNetworkingTool,r=e.onClose,o=e.renderSecondLine,a=e.onDoExposePort;return(0,i.Y)(C,{openNetworkingTool:t,onClose:r,firstLine:"Port :".concat(n.localPort," opened, but not exposed to the web."),secondLine:(0,i.Y)(f.$n,{variant:"underlined",text:"Expose this port?",onClick:t}),renderSecondLine:o,renderDoExposeButton:!0,onDoExposePort:a})}function D(e){var n=e.openNetworkingTool,t=e.configuration,r=e.onClose,o=e.renderSecondLine;return(0,i.Y)(C,{isWarning:!0,openNetworkingTool:n,onClose:r,firstLine:"Port :".concat(t.localPort," opened, but all available external ports are reserved."),secondLine:(0,i.FD)(i.FK,{children:[(0,i.Y)(m.EY,{children:"Remove an external port in"}),(0,i.Y)(f.$n,{variant:"underlined",text:"port configuration",onClick:n}),(0,i.Y)(m.EY,{children:"to open a new port."})]}),renderSecondLine:o})}function E(e){var n=e.openNetworkingTool,t=e.configuration,r=e.onClose,o=e.renderSecondLine;return(0,i.Y)(C,{isWarning:!0,openNetworkingTool:n,onClose:r,firstLine:"Port :".concat(t.localPort," opened, but is not configured properly."),secondLine:(0,i.FD)(i.FK,{children:[(0,i.Y)(m.EY,{children:"You can fix this in the"}),(0,i.Y)(f.$n,{variant:"underlined",text:"Networking tool",onClick:n})]}),renderSecondLine:o})}function R(e){var n=e.openNetworkingTool,t=e.configuration,r=e.onClose,o=e.renderSecondLine;return(0,i.Y)(C,{isWarning:!0,openNetworkingTool:n,onClose:r,firstLine:"Port :".concat(t.localPort," opened, but has missing configuration."),secondLine:(0,i.FD)(i.FK,{children:[(0,i.Y)(m.EY,{children:"You can fix this in the"}),(0,i.Y)(f.$n,{variant:"underlined",text:"Networking tool",onClick:n})]}),renderSecondLine:o})}function I(e){var n=e.configuration,t=e.openWebview,r=e.openNetworkingTool,o=e.onClose,l=e.onDontExposePort,s=e.onDoExposePort,u=e.renderSecondLine,d=n.type;switch(d){case c.gH.FORWARDED:return(0,i.Y)(_,{configuration:n,openWebview:t,openNetworkingTool:r,onClose:o,renderSecondLine:u,onDontExposePort:l});case c.gH.INTERNAL_ONLY:return(0,i.Y)(k,{configuration:n,openNetworkingTool:r,onClose:o,renderSecondLine:u,onDoExposePort:s});case c.gH.NO_MORE_EXTERNAL_PORTS_AVAILABLE:return(0,i.Y)(D,{configuration:n,openNetworkingTool:r,onClose:o,renderSecondLine:u});case c.gH.MISCONFIGURED:return(0,i.Y)(E,{configuration:n,openNetworkingTool:r,onClose:o,renderSecondLine:u});case c.gH.CONFIG_MISSING:return(0,i.Y)(R,{configuration:n,openNetworkingTool:r,onClose:o,renderSecondLine:u});default:(0,a.A)(d)}}function F(e){var n=e.configurations,t=e.openWebview,r=e.openNetworkingTool,o=e.onClose,a=e.renderSecondLine,s=n.filter(function(e){return e.type===c.gH.FORWARDED}),u=n.filter(function(e){return e.type!==c.gH.FORWARDED});return(0,i.Y)(C,{isWarning:!1,openNetworkingTool:r,onClose:o,firstLine:(0,i.FD)(i.FK,{children:[s.length>0?(0,i.FD)(i.FK,{children:[(0,i.FD)(m.EY,{children:[s.length," ",(0,l.A)("port",s.length)," ","opened on"]}),(0,i.Y)(f.$n,{variant:"underlined",text:"{...}.replit.dev",onClick:t})]}):null,s.length>0&&u.length>0?(0,i.Y)(g.S,{css:x.verticalDivider}):null,u.length>0?(0,i.FD)(m.EY,{children:[u.length," ",(0,l.A)("port",u.length)," ","did not open"]}):null]}),secondLine:(0,i.FD)(i.FK,{children:[(0,i.Y)(m.EY,{children:"You can manage this config in the"}),(0,i.Y)(f.$n,{variant:"underlined",text:"Networking tool",onClick:r})]}),renderSecondLine:a})}function T(e){var n=e.configurations,t=e.openWebview,a=e.openNetworkingTool,l=e.onClose,s=e.onDontExposePort,c=e.onDoExposePort,d=(0,u.Z)("port-nudges"),p=(0,r._)((0,o.useState)(!1),2),f=p[0],h=p[1],m=!d.isDone,g=(0,r._)((0,o.useState)(!0),2),v=g[0],w=g[1];function y(){w(!1),null==l||l()}return((0,o.useEffect)(function(){0===n.length&&w(!0)},[n]),(0,o.useEffect)(function(){if(!d.isDone){if(n.length>0&&!f)return void h(!0);0===n.length&&f&&d.setAsDone()}},[n,d,f]),v&&0!==n.length)?1===n.length?(0,i.Y)(I,{configuration:n[0],openNetworkingTool:a,openWebview:t,renderSecondLine:m,onClose:y,onDontExposePort:s,onDoExposePort:c}):(0,i.Y)(F,{configurations:n,openNetworkingTool:a,openWebview:t,renderSecondLine:m,onClose:y}):null}},25997:(e,n,t)=>{"use strict";t.d(n,{F:()=>r,X:()=>i});var r=function(e){return e.Welcome="Welcome",e.Forks="Forks",e.ProjectPane="ProjectPane",e}({}),i={id:"workspace-repo-projects-tour",steps:[{title:"Welcome to your Project",id:"Welcome",content:"Click here to see all forks inside this Project and navigate between them.",hideOverlay:!0},{title:"Project Forks",id:"Forks",content:"Move to a different Repl within this Project, or create a new one",hideTooltip:!0,hideOverlay:!0},{title:"Project Pane",id:"ProjectPane",content:"View your changes, and merge them back into the main Repl when you're ready.",hideOverlay:!0}]}},26019:(e,n,t)=>{"use strict";t.d(n,{$1:()=>l,jy:()=>o,mV:()=>a});var r=t(79209),i=t(45263),o=(0,r.AH)({position:"relative",overflowY:"auto",width:"100%",height:"100%",zIndex:3}),a=(0,r.AH)({position:"relative",overflowY:"auto",width:"100%",height:"100%",fontSize:"14px",backgroundColor:i.LU.backgroundDefault}),l=(0,r.AH)({display:"flex",alignItems:"stretch",width:"100%",height:"100%","& > .cm-editor":{flex:"1 1 auto",width:"100%"}})},26055:(e,n,t)=>{"use strict";t.d(n,{Wu:()=>A,n3:()=>b,qv:()=>Y});var r=t(12694),i=t(86105),o=t(88263),a=t(21462),l=t(48686),s=t(55825),c=t(94779),u=t(14893),d=t(45263),p=t(64583),f=t(48521),h=t(46603),m=t(42764),g=t(77089),v=t(76126),w=t(10429),y=t(86814);function b(e){var n=e.mode,t=void 0===n?"sequential":n,r=e.onChange,i=e.disabled;return(0,o.FD)(m.e2,{disabled:void 0!==i&&i,name:"mode",onChange:r,row:!0,value:null!=t?t:"sequential",children:[(0,o.Y)(m.$O,{id:"sequential",text:"Sequential",value:"sequential"}),(0,o.Y)(m.$O,{id:"parallel",text:"Parallel",value:"parallel"})]})}var S=(0,p.x)({root:[f.wp.maxHeight(520),f.wp.overflow("auto"),f.wp.backgroundColor.backgroundDefault,f.wp.borderRadius(0,0,4,4),f.wp.border({color:d.LU.backgroundHigher})],connectors:[f.wp.position.relative,f.wp.zIndex(0)],inputRow:[f.wp.position.relative],switchInputs:[f.wp.position.relative,f.wp.align.center,f.wp.justify.spaceBetween],nameWarning:[{color:d.LU.redDefault}],task:[f.wp.position.relative,f.wp.zIndex(1)],tasks:[f.wp.position.relative],taskItem:[f.wp.position.relative]});function Y(e){var n,t=e.workflow,r=e.readOnlyMode,i=e.addTask,a=e.reorderTask,l=e.taskIds,u=e.workflowIndex,d=e.simplified;return(0,o.FD)(w.S,{children:[t.tasks.length>0?(0,o.Y)(s.i,{mode:null!=(n=t.mode)?n:"sequential"}):null,(0,o.Y)(w.S,{css:S.tasks,pl:12,pb:8,gap:8,children:t.tasks.map(function(e,n,i){var p,f,h,m;return(0,o.FD)(w.S,{css:S.taskItem,children:[(0,o.Y)(s.L,{dragAble:!r,css:S.connectors,mode:t.mode,hideBottom:n>=i.length-1}),void 0!==u?(0,o.Y)(c.YZ,{css:S.task,disabled:r,format:null!=(h=null==(p=t.metadata)?void 0:p.generated)&&h,lastTask:1===i.length,onReorder:a,workflowIndex:u,taskIndex:n,simplified:d}):(0,o.Y)(c.S2,{css:S.task,disabled:r,format:null!=(m=null==(f=t.metadata)?void 0:f.generated)&&m,lastTask:1===i.length,onReorder:a,taskIndex:n,initialConfig:t.tasks[n],onChange:function(){},onRemove:function(){},simplified:d})]},l?l[n]:n)})}),r?null:(0,o.Y)(h.$n,{iconLeft:(0,o.Y)(y.A,{}),text:"Add task",onClick:i})]})}function A(e){var n,t=e.index,s=e.readOnly,c=(0,u.wS)(),d=(0,u.j3)(t),p=(0,u.XO)(),f=(0,u.Ss)(),h=(0,u.af)(),m=(0,u.IW)(),y=void 0!==s&&s||(null==d||null==(n=d.metadata)?void 0:n.generated)||(null==d?void 0:d.name)==="Project"&&"agent"===d.author,A=(0,a.useMemo)(function(){return p.filter(function(e){return e===(null==d?void 0:d.name)}).length>1},[d,p]),x=(0,a.useMemo)(function(){var e;return Array.from({length:null!=(e=null==d?void 0:d.tasks.length)?e:0},function(e){return(0,l.Ak)()})},[null==d?void 0:d.tasks.length]);return d?(0,o.FD)(w.S,{css:S.root,p:8,gap:8,children:[(0,o.Y)(v.EY,{variant:"small",color:"dimmest",children:"Workflow"}),A?(0,o.FD)(v.EY,{variant:"small",css:S.nameWarning,children:[d.name," already exists"]}):null,(0,o.Y)(w.S,{pb:4,row:!0,gap:8,align:"center",children:(0,o.Y)(g.pd,{onBlur:c,value:d.name,placeholder:"Name of your workflow",onChange:function(e){f(t,function(n){n.name=e.currentTarget.value})},disabled:y})}),(0,o.Y)(w.S,{css:S.switchInputs,row:!0,gap:4,children:(0,o.FD)(w.S,{children:[(0,o.Y)(v.EY,{variant:"small",color:"dimmest",children:"Mode"}),(0,o.Y)(b,{mode:d.mode,onChange:function(e){f(t,function(n){n.mode=e}),c()},disabled:y})]})}),(0,o.FD)(w.S,{css:S.inputRow,gap:4,children:[(0,o.Y)(v.EY,{variant:"small",color:"dimmest",children:"Tasks"}),(0,o.Y)(Y,{workflow:d,readOnlyMode:y,addTask:function(){return m(t)},reorderTask:function(e,n){var o=null==d?void 0:d.tasks;if(o&&e!==n){var a=(0,i._)(o),l=(0,r._)(a.splice(e,1),1)[0];a.splice(n,0,l);var s=(0,r._)(x.splice(e,1),1)[0];x.splice(n,0,s),h({workflowIndex:t},a,{persist:!0}),c()}},taskIds:x,workflowIndex:t})]})]}):(0,o.Y)(v.EY,{children:"Workflow not found"})}},26184:(e,n,t)=>{"use strict";t.d(n,{_:()=>s});var r=t(29935),i=t(82643),o=t(20207),a=t(20828),l=t(73779);function s(){var e,n,t,s=(0,a.g)("showFileTreeGitStatus").preferences.showFileTreeGitStatus,c=(0,l.A)((t=(0,r._)(function(e){var n,t;return(0,i.YH)(this,function(r){switch(r.label){case 0:if(!s)return[2,{status:null,error:null}];return[4,e.getRepositoryState()];case 1:if((n=r.sent()).error)return[2,n];if(n.type!==o.UN.NORMAL)return[2,{status:null,error:null}];return[4,e.status()];case 2:if((t=r.sent()).error)return[2,t];return[2,{status:t,error:null}]}})}),function(e){return t.apply(this,arguments)}),[s]);return c&&!c.error&&(null==(e=c.status)?void 0:e.changes)?function(e){var n=new Map,t=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;n.set(l.path,{index:l.type.index,worktree:l.type.worktree})}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n}(null==(n=c.status)?void 0:n.changes):null}},26518:(e,n,t)=>{"use strict";t.d(n,{k:()=>i});var r=t(16584),i=function(e,n,t,i){var o=[],a=0;e.forEach(function(e){var n=Math.max(e.percentage,r.i),t=n-e.percentage;0!==t&&(a+=t),o.push({percentage:n,usage:e.usage,adjusted:0!==t,grouped:!1,repl:e.repl})});var l=0===n?0:Math.max(n,r.i);if(l>0){var s=l-n;s>0&&(a+=s),o.push({percentage:l,adjusted:s>0,usage:t,grouped:!0,count:i})}if(a>0){var c=o.filter(function(e){return!e.adjusted}),u=c.length;if(u>0){var d=a/u,p=!0,f=!1,h=void 0;try{for(var m,g=c[Symbol.iterator]();!(p=(m=g.next()).done);p=!0){var v=m.value;v.percentage-=d}}catch(e){f=!0,h=e}finally{try{p||null==g.return||g.return()}finally{if(f)throw h}}}}return o}},26613:(e,n,t)=>{"use strict";t.d(n,{i:()=>b});var r=t(12694),i=t(21462),o=t(67201),a=t(17844),l=t(12584),s=t(41114),c=t(68197),u=t(50175);function d(){var e=(0,l._)(["\n  subscription StartOrgReplPresenceSession(\n    $input: StartOrgReplPresenceSessionInput!\n  ) {\n    startOrgReplPresenceSession(input: $input)\n  }\n"]);return d=function(){return e},e}function p(){var e=(0,l._)(["\n  mutation PingOrgReplPresenceSession(\n    $input: PingOrgReplPresenceSessionInput!\n  ) {\n    pingOrgReplPresenceSession(input: $input)\n  }\n"]);return p=function(){return e},e}var f={},h=(0,s.J1)(d()),m=(0,s.J1)(p()),g=t(31062),v=t(69549),w=t(79275),y=t(34834);function b(){var e,n,t,l=arguments.length>0&&void 0!==arguments[0]&&arguments[0],s=(0,g.A)(),d=(0,i.useRef)((0,o.A)()),p=(0,y.A)().container,b=(0,w.A)(p),S=(0,r._)((e=(0,a._)({},f,void 0),u.n(m,e)),1)[0],Y=b!==v.KN.CONNECTED||l;(0,i.useEffect)(function(){var e=!1;if(!Y&&b===v.KN.CONNECTED){var n=null;return function t(){S({variables:{input:{sessionId:d.current}},onCompleted:function(){e||(n=setTimeout(t,1e4))}})}(),function(){e=!0,n&&clearTimeout(n)}}},[b,d,S,Y]),n={variables:{input:{replId:s,sessionId:d.current}},skip:Y},t=(0,a._)({},f,n),c.R(h,t)}},26709:(e,n,t)=>{"use strict";t.d(n,{A:()=>C});var r=t(12694),i=t(88263),o=t(21462),a=t(35084),l=t(84316),s=t(45263),c=t(64583),u=t(48521),d=t(49580),p=t(59172),f=t(10429),h=t(18870),m=t(83650),g=t(92855),v=t(56002),w=t(29425),y=t(51705),b=t(80762),S=t(69258),Y=(0,c.x)({scopeSelector:[u.wp.position.relative],selectOption:[{"&:hover":{cursor:"auto"}}],icon:[u.wp.position.absolute,u.wp.top("50%"),u.wp.left(-4),{transform:"translate(-100%, -50%)"}]}),A=function(e){switch(e){case a.oO.Owner:return{icon:(0,i.Y)(y.A,{}),label:"Owner",description:"Full permissions including App deletion"};case a.oO.Deployer:return{icon:(0,i.Y)(g.A,{}),label:"Deployer",description:"Can edit, deploy, and manage resources"};case a.oO.Editor:return{icon:(0,i.Y)(v.A,{}),label:"Editor",description:"Can edit code and view resources"};case a.oO.Viewer:return{icon:(0,i.Y)(w.A,{}),label:"Viewer",description:"Can only view code and fork Apps"};case a.oO.None:return{icon:(0,i.Y)(m.A,{}),label:"None",description:"Cannot search, view, or edit Apps"}}},x=function(e){switch(e){case a.oO.Owner:return a.Fv.Owner;case a.oO.Deployer:return a.Fv.Deployer;case a.oO.Editor:return a.Fv.Editor;case a.oO.Viewer:return a.Fv.Viewer}};let C=function(e){var n,t=e.group,c=e.repl,u=e.options,m=e.onScopeChange,g=e.iconSize,v=void 0===g?24:g,w=(0,r._)((0,o.useState)(!1),2),y=w[0],C=w[1],_=(0,r._)((0,o.useState)(u.find(function(e){return e.status===a.jL.Current})),2),k=_[0],D=_[1],E="".concat(c.id,"-role-").concat((0,o.useId)()),R=k?A(k.role).label:void 0,I=c.authorizations.editPermissions.isAuthorized,F=(0,r._)((0,l.k6)({onCompleted:function(e){"OrgGroup"===e.updateOrgGroupScopes.__typename&&(m(),C(!0),setTimeout(function(){return C(!1)},2e3))}}),2),T=F[0],P=F[1],L=P.data,U=P.loading,N=P.error,O=(null==L?void 0:L.updateOrgGroupScopes)&&"OrgGroup"!==L.updateOrgGroupScopes.__typename?L.updateOrgGroupScopes.message:null==N?void 0:N.message;return n=O?(0,i.Y)(p.m_,{tooltip:O,children:(0,i.Y)(S.A,{size:v,color:s.LU.accentNegativeDefault})}):U?(0,i.Y)(b.A,{size:v}):y?(0,i.Y)(h.A,{size:v,color:s.LU.accentPositiveDefault}):null,(0,i.FD)(f.S,{css:Y.scopeSelector,row:!0,gap:8,justify:"end",children:[n?(0,i.Y)(f.S,{css:Y.icon,children:n}):null,(0,i.Y)(p.m_,{tooltip:"You cannot edit this group's permissions.",isDisabled:I,children:(0,i.Y)(d.in,{id:E,label:null!=R?R:"Select a role...","aria-label":"".concat(t.name,"'s access to ").concat(c.title),onAction:function(e){var n=u.find(function(n){return n.role===e});if(n&&n.role!==(null==k?void 0:k.role)){D(n);var r=n.role===a.oO.None?[]:[{resourceId:c.id,role:x(n.role)}],i=n.role===a.oO.None?[{resourceType:a.mW.Repl,resourceId:c.id}]:[];T({variables:{input:{orgGroupId:t.id,orgScopes:[],groupScopes:[],replScopes:r,removeScopes:i}}})}},items:u,disallowEmptySelection:!0,isDisabled:!I,children:function(e){var n=A(e.role),r=e.status===a.jL.Unavailable;return(0,i.Y)(d.Dr,{id:e.role,label:n.label,description:r?"".concat(t.name," cannot have ").concat(e.role," access"):n.description,css:Y.selectOption,icon:n.icon,isDisabled:r},e.role)}})})]})}},26716:(e,n,t)=>{"use strict";t.d(n,{H:()=>s});var r=t(29935),i=t(82643),o=t(21462),a=t(1230),l=t(54319);function s(e){var n,t,s,c,u=e.openPane,d=(n=(0,l.NC)(),t=(0,l.dm)().getAssistantMessageIntent,(0,o.useCallback)((s=(0,r._)(function(e){var r,o;return(0,i.YH)(this,function(i){switch(i.label){case 0:return[4,n.sessions.create({sessionType:a.dF3.CHAT})];case 1:if(!(r=i.sent()).ok)return[2,r];return(o=r.payload).appendEvent({kind:"message",message:e,intent:t()}),[2,{ok:!0,payload:{newSessionId:o.id}}]}})}),function(e){return s.apply(this,arguments)}),[n.sessions,t]));return(0,o.useCallback)((c=(0,r._)(function(e){var n;return(0,i.YH)(this,function(t){switch(t.label){case 0:return u({type:"ghostwriterChat"}),[4,d(e)];case 1:if(!(n=t.sent()).ok)return[2];return u({type:"ghostwriterChat",data:{sessionId:n.payload.newSessionId}}),[2]}})}),function(e){return c.apply(this,arguments)}),[u,d])}},26935:(e,n,t)=>{"use strict";t.d(n,{f:()=>y});var r=t(12694),i=t(88263),o=t(21462),a=t(69338),l=t(65762),s=t(93369),c=t(47526),u=t(56848),d=t(47311),p=t(33429),f=t(84788),h=t(49150),m=t(97681);function g(){var e,n,t=(0,f.rA)(),r=t.activeStep,o=t.goto,a=t.totalSteps,l=t.currentStepIndex,s=t.done;if(null==r)return null;var c=null!=(n=null==(e=r.modalConfig)?void 0:e.width)?n:320;return(0,i.Y)(h.a,{preventClose:!0,isOpen:!0,onRequestClose:function(){},centered:!0,maxWidth:"fit-content",noPadding:!0,transparent:!0,children:(0,i.Y)(m.p,{title:r.hideTitle?void 0:r.title,"aria-label":r.title,subtitle:r.subtitle,icon:r.icon,content:function(){return(0,i.Y)(i.FK,{children:"function"==typeof r.content?(0,i.Y)(r.content,{}):r.content})},hideCloseButton:r.hideCloseButton,hideNavigation:r.hideNavigation,onDismiss:function(){return s()},currentStepIndex:l,onCurrentStepChange:o,totalSteps:a,cypressCloseData:"tour-tooltip-close-button",compact:!0,colorway:r.colorway,containerStyle:{width:c}})})}var v=t(95570),w=d.O5.Provider;function y(e){var n,t,f=e.children,h=e.tour,m=e.onStep,y=e.onDone,b=e.colorway,S=(0,r._)((0,o.useState)(function(){return(0,d.Ws)({tour:h})}),1)[0],Y=(0,a.md)(d.MN,{store:S}),A=(0,a.md)(d.$h,{store:S});if(-1===A)throw Error("Current tour step is not in tour steps");var x=(0,r._)((0,l.en)({variables:{name:h.id},optimisticResponse:{__typename:"RootMutationType",markTourAsSeen2:{__typename:"TourSeen",id:h.id,seen:!0}}}),1)[0],C=(0,a.Xr)(d._,{store:S}),_=(0,o.useRef)();(0,o.useEffect)(function(){_.current=Y},[Y]);var k=(0,a.Xr)(d.vs,{store:S}),D=(0,a.md)(d.Tf,{store:S}),E=(0,a.md)(d.DA,{store:S}),R=(0,a.Xr)(d.$t,{store:S});window.startTour=function(){v.log("starting tour:",h.id,"from",h.steps[0].id),R()};var I=(0,a.md)(d.Yg,{store:S}),F=(0,a.md)(d.b5,{store:S}),T=(0,s.A)(m),P=(0,s.A)(y);(0,o.useEffect)(function(){return S.sub(d.Nc,function(){var e,n=S.get(d.Nc);n&&(null==(e=T.current)||e.call(T,n))})},[S,T,P]);var L=(0,o.useRef)(!1);(0,o.useEffect)(function(){var e;!L.current&&Y&&Y.id===h.steps[0].id&&(null==(e=T.current)||e.call(T,Y.id),L.current=!0)},[Y,T,h]),(0,o.useEffect)(function(){return S.sub(d._,function(){var e,n=S.get(d._),t=S.get(d.Nc);n&&(t&&(null==(e=P.current)||e.call(P,t)),x())})},[S,x,P]);var U=(0,l.D$)({variables:{tours:h.id},onCompleted:function(e){var n;S.set(d._,!!(null==e||null==(n=e.currentUser)?void 0:n.toursSeen[0].seen))}}).loading,N=(0,a.Xr)(d.cS,{store:S});(0,o.useEffect)(function(){N(U)},[N,U]);var O=(0,a.md)(d.MN,{store:S}),M=(0,a.Xr)(d.Hl,{store:S}),B=(0,a.md)(d.GM,{store:S}),H=(0,a.Xr)(d.GM,{store:S});if((0,c.CW)({targetElement:D,activeTourStep:O,goToNextStep:M,setTourPausedReason:H}),!E||!Y)return(0,i.Y)(w,{value:S,children:f});if(Y.isModal)return(0,i.FD)(w,{value:S,children:[(0,i.Y)(g,{}),f]});var z=0===A||!!(null==(n=_.current)?void 0:n.isModal)||!!(null==(t=h.options)?void 0:t.disableAnimation);return(0,i.FD)(w,{value:S,children:[D?(0,i.FD)(i.FK,{children:["user"===B?null:(0,i.Y)(u.J,{targetElement:D,transparent:Y.hideOverlay||"async"===B,disableAnimation:z}),!Y.hideTooltip&&(0,i.Y)(p.w,{targetElement:D,activeStep:Y,currentStepIndex:I,done:function(){return C(!0)},goto:function(e){k(e+A-I)},totalSteps:F,disableAnimation:z,colorway:b,doneText:h.doneText})]}):null,f]})}},26987:(e,n,t)=>{"use strict";t.d(n,{Js:()=>A,LH:()=>y,_y:()=>b});var r=t(83846),i=t(17844),o=t(93629),a=t(17459),l=t(88263),s=t(6156),c=t(24365),u=t(45263),d=t(64583),p=t(49045),f=t(48521),h=t(10429),m=(0,p.v)(["fontSize","gap","xPadding"]),g=m.cssVars,v=m.styleTokens,w=(0,d.x)({chord:[f.wp.display.inlineFlex,f.wp.rowWithGap(12)],shortcut:[f.wp.display.inlineFlex,{flexDirection:"row",fontSize:v.fontSize,"& > div":{marginRight:v.gap},"& > div:last-child":{marginRight:0}}]});function y(e,n){return((0,c.s4)(e)?e:[e]).map(function(e){return(0,c.Ft)(e).map(function(e){var t;return null!=(t=Y(n)[e])?t:e.toUpperCase()}).join("")}).join(" ")}function b(e){if((0,c.s4)(e.keyCombo))return(0,l.Y)(h.S,{"data-testid":"Keybinding:".concat(e.keyCombo.join(" ")),css:w.chord,children:e.keyCombo.map(function(n,t){return(0,l.Y)(b,(0,o._)((0,i._)({},e),{keyCombo:n}),t)})});var n,t=(0,c.Ft)(e.keyCombo),a=null!=(n=e.fontSize)?n:e.small?12:14,s=e.hideBorder?0:Math.round(.2*a);return(0,l.Y)(h.S,{"data-testid":"Keybinding:".concat(e.keyCombo),css:w.shortcut,style:(0,r._)({},g.gap,s+"px"),title:e.keyCombo,children:t.map(function(n){var t;return(0,l.Y)(A,{text:n,hideBorder:e.hideBorder,fontSize:e.fontSize,isActive:null==e||null==(t=e.match)?void 0:t.includes(n.toLowerCase())},n)})})}var S=(0,d.x)({root:[f.wp.color.foregroundDimmest,f.wp.position.relative,f.wp.justify.center,{fontSize:"inherit",textAlign:"center",textTransform:"capitalize",paddingLeft:v.xPadding,paddingRight:v.xPadding},f.wp.font.default],border:[f.wp.coverContainer,f.wp.borderRadius(4),{opacity:.5,border:"1px solid",borderColor:u.LU.outlineStrongest}],text:[{fontSize:v.fontSize}]}),Y=function(e){return{Ctrl:e?"":"Ctrl",Cmd:e?"":"Cmd",Alt:e?"":"Alt",Shift:e?"":"Shift",Enter:e?"Return":"Enter",ArrowLeft:"",ArrowRight:"",ArrowUp:"",ArrowDown:""," ":"Space"}};function A(e){var n,t,i,o=e.text,c=e.small,d=e.isActive,p=void 0!==d&&d,f=e.hideBorder,m=void 0!==f&&f,v=(0,a._)(e,["text","small","isActive","hideBorder"]),w=(0,s.vm)(),y=null!=(n=v.fontSize)?n:void 0!==c&&c?12:14,b=Math.round(1.4*y),A=Math.round(y*(m?.1:.2)),x=(t={},(0,r._)(t,g.fontSize,y+"px"),(0,r._)(t,g.xPadding,A+"px"),(0,r._)(t,"height",b),(0,r._)(t,"minWidth",m?void 0:b),t);p&&(x.fontWeight=u.LU.fontWeightMedium,x.color=u.LU.foregroundDefault);var C={borderColor:u.LU.foregroundDefault,opacity:1};return(0,l.FD)(h.S,{css:S.root,style:x,children:["string"==typeof o?(0,l.Y)(h.S,{css:S.text,children:null!=(i=Y(w)[o])?i:o}):o,m?null:(0,l.Y)(h.S,{css:S.border,style:p?C:void 0})]})}},27188:(e,n,t)=>{"use strict";t.d(n,{A:()=>d});var r=t(88263),i=t(45263),o=t(64583),a=t(48521),l=t(76126),s=t(10429),c=t(82842),u=(0,o.x)({container:[a.wp.width("100%"),a.wp.p(16),a.wp.colWithGap(12),a.wp.align.center]});let d=function(e){var n=e.title,t=e.description,o=e.illustration,a=void 0===o?(0,r.Y)(c.A,{size:32,fill:i.LU.foregroundDimmer}):o;return(0,r.FD)(s.S,{css:u.container,children:[a?(0,r.Y)(s.S,{children:a}):null,(0,r.Y)(l.EY,{variant:"subheadBig",children:void 0===n?"No results found":n}),(0,r.Y)(l.EY,{color:"dimmer",children:void 0===t?"Try adjusting your search or filters to find what you're looking for.":t})]})}},27685:(e,n,t)=>{"use strict";t.d(n,{N:()=>u});var r=t(29935),i=t(82643),o="index.html",a=/^\s*<script src="https:\/\/cdnjs\.cloudflare\.com\/ajax\/libs\/([^/]+)\/([^/]+)\/.+.js"><\/script>$/;let l={name:"html",getInstalledPackages:function(e){var n=e.services.fs;return(0,r._)(function(){return(0,i.YH)(this,function(e){switch(e.label){case 0:return[4,n.stat(o)];case 1:var t;if(!e.sent().exists)return[2,[]];return[2,new Promise((t=(0,r._)(function(e){var t;return(0,i.YH)(this,function(r){return t=n.watchTextFile(o,{onReady:function(n){var r=n.initialContent,i=[],o=!0,l=!1,s=void 0;try{for(var c,u=r.split("\n")[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var d=c.value.match(a);d&&i.push({name:d[1],version:d[2]})}}catch(e){l=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(l)throw s}}t(),e(i)},onError:function(){t(),e([])}}),[2]})}),function(e){return t.apply(this,arguments)}))]}})})()},getPackageInfo:function(e){var n=e.name;return(0,r._)(function(){var e,t;return(0,i.YH)(this,function(r){switch(r.label){case 0:return[4,fetch("/data/cdnjs/info/".concat(encodeURIComponent(n)),{credentials:"same-origin",headers:{"Content-Type":"application/json",Accept:"application/json"}})];case 1:if(!(e=r.sent()).ok)return[2,void 0];r.label=2;case 2:return r.trys.push([2,4,,5]),[4,e.json()];case 3:if(t=r.sent())return[2,{name:t.name,version:t.version,description:t.description,homepageURL:t.link,sourceCodeURL:t.include}];return[3,5];case 4:return r.sent(),[2,void 0];case 5:return[2]}})})()},search:function(e){var n=e.query;return(0,r._)(function(){var e;return(0,i.YH)(this,function(t){switch(t.label){case 0:return[4,fetch("/data/cdnjs/search/".concat(encodeURIComponent(n)),{credentials:"same-origin",headers:{"Content-Type":"application/json",Accept:"application/json"}})];case 1:if(!(e=t.sent()).ok)return[2,[]];return[4,e.json()];case 2:return[2,t.sent().map(function(e){return{name:e.name,version:e.version,description:e.description,homepageURL:e.link,sourceCodeURL:e.include}})]}})})()},install:function(e){var n=e.pkgs,t=e.services.fs;return(0,r._)(function(){var e,a,l,s,c,u,d;return(0,i.YH)(this,function(p){switch(p.label){case 0:return[4,t.stat(o)];case 1:if(!p.sent().exists)return[2];e=!0,a=!1,l=void 0,p.label=2;case 2:p.trys.push([2,7,8,9]),s=function(){var e;return(0,i.YH)(this,function(n){switch(n.label){case 0:var a;return e=u.value,[4,new Promise((a=(0,r._)(function(n){var a;return(0,i.YH)(this,function(l){return a=t.watchTextFile(o,{onReady:function(o){var l=o.initialContent,s=o.writeChange;return(0,r._)(function(){var r,o;return(0,i.YH)(this,function(i){switch(i.label){case 0:r='<script src="'.concat(e.sourceCodeURL,'"><\/script>\n'),-1===(o=l.indexOf("<script"))&&(o=l.indexOf("</body>")),-1===o&&(o=l.length),s({from:o,insert:r}),i.label=1;case 1:return i.trys.push([1,3,4,5]),[4,t.flush()];case 2:case 3:return i.sent(),[3,5];case 4:return a(),n(),[7];case 5:return[2]}})})()},onError:function(){a(),n()}}),[2]})}),function(e){return a.apply(this,arguments)}))];case 1:return n.sent(),[2]}})},c=n[Symbol.iterator](),p.label=3;case 3:if(e=(u=c.next()).done)return[3,6];return[5,(0,i.Ju)(s())];case 4:p.sent(),p.label=5;case 5:return e=!0,[3,3];case 6:return[3,9];case 7:return d=p.sent(),a=!0,l=d,[3,9];case 8:try{e||null==c.return||c.return()}finally{if(a)throw l}return[7];case 9:return[2]}})})()},uninstall:function(e){var n=e.pkgs,t=e.services.fs;return(0,r._)(function(){var e,l,s,c,u,d,p;return(0,i.YH)(this,function(f){switch(f.label){case 0:return[4,t.stat(o)];case 1:if(!f.sent().exists)return[2];e=!0,l=!1,s=void 0,f.label=2;case 2:f.trys.push([2,7,8,9]),c=function(){var e;return(0,i.YH)(this,function(n){switch(n.label){case 0:var l;return e=d.value,[4,new Promise((l=(0,r._)(function(n){var l;return(0,i.YH)(this,function(s){return l=t.watchTextFile(o,{onReady:function(o){var s=o.initialContent,c=o.writeChange;return(0,r._)(function(){var r,o,u,d,p,f,h,m,g;return(0,i.YH)(this,function(i){switch(i.label){case 0:r=0,o=!0,u=!1,d=void 0;try{for(p=s.split("\n")[Symbol.iterator]();!(o=(f=p.next()).done);o=!0)(m=(h=f.value).match(a))&&(g=m[1],e.name===g&&c({from:r,to:r+h.length+1})),r+=h.length+1}catch(e){u=!0,d=e}finally{try{o||null==p.return||p.return()}finally{if(u)throw d}}i.label=1;case 1:return i.trys.push([1,3,4,5]),[4,t.flush()];case 2:case 3:return i.sent(),[3,5];case 4:return l(),n(),[7];case 5:return[2]}})})()},onError:function(){l(),n()}}),[2]})}),function(e){return l.apply(this,arguments)}))];case 1:return n.sent(),[2]}})},u=n[Symbol.iterator](),f.label=3;case 3:if(e=(d=u.next()).done)return[3,6];return[5,(0,i.Ju)(c())];case 4:f.sent(),f.label=5;case 5:return e=!0,[3,3];case 6:return[3,9];case 7:return p=f.sent(),l=!0,s=p,[3,9];case 8:try{e||null==u.return||u.return()}finally{if(l)throw s}return[7];case 9:return[2]}})})()}};var s=t(9623);let c={name:"upm",getInstalledPackages:function(e){var n=e.id,t=e.services.packager;return(0,r._)(function(){var e;return(0,i.YH)(this,function(r){switch(r.label){case 0:return[4,t.listSpecfile(n)];case 1:if((e=r.sent()).error||null===e.packages)return[2,[]];return[2,e.packages]}})})()},getPackageInfo:function(e){var n=e.id,t=e.name,o=e.services.packager;return(0,r._)(function(){return(0,i.YH)(this,function(e){return[2,o.fetchPackageInfo(t,n)]})})()},search:function(e){var n=e.id,t=e.query,o=e.services.packager;return(0,r._)(function(){return(0,i.YH)(this,function(e){return[2,o.searchPackages(t,n)]})})()},install:function(e){var n=e.id,t=e.pkgs,o=e.services.packager;return(0,r._)(function(){return(0,i.YH)(this,function(e){switch(e.label){case 0:return[4,o.addPackages(t,n)];case 1:if(!e.sent())throw Error("Package install failed");return[2]}})})()},uninstall:function(e){var n=e.id,t=e.pkgs,o=e.services.packager;return(0,r._)(function(){var e;return(0,i.YH)(this,function(r){switch(r.label){case 0:return e=t.filter(function(e){return e.name}).map(function(e){return e.name}),[4,o.removePackages(e,n)];case 1:if(!r.sent())throw Error("Package uninstall failed");return[2]}})})()}};function u(e){switch(e){case"html":return l;case"nix":return s.A;default:return c}}},28051:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(88263),a=t(71117);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M4 3.75A1.25 1.25 0 0 0 2.75 5v14A1.25 1.25 0 0 0 4 20.25h16A1.25 1.25 0 0 0 21.25 19V8A1.25 1.25 0 0 0 20 6.75h-9a.75.75 0 0 1-.624-.334L8.599 3.75H4Zm-1.945-.695A2.75 2.75 0 0 1 4 2.25h5a.75.75 0 0 1 .624.334l1.777 2.666H20A2.75 2.75 0 0 1 22.75 8v11A2.75 2.75 0 0 1 20 21.75H4A2.75 2.75 0 0 1 1.25 19V5c0-.73.29-1.429.805-1.945ZM12 10.25a.75.75 0 0 1 .75.75v2.25H15a.75.75 0 0 1 0 1.5h-2.25V17a.75.75 0 0 1-1.5 0v-2.25H9a.75.75 0 0 1 0-1.5h2.25V11a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"})}))}},28069:(e,n,t)=>{"use strict";t.d(n,{Sl:()=>p,aT:()=>f,r8:()=>c});var r=t(83846),i=t(21462),o=t(35992),a=t(47630),l=t(19882),s=t(45263);function c(){var e=(0,a.HJ)({open:!1,overlayed:!1,width:0}),n=(0,l.A)(function(n){e.set((0,o.jM)(e.current,function(e){var t=Math.min(n.width,240);e.overlayed=n.width<500+t,e.width=t}))}),t=(0,i.useCallback)(function(n){return e.set((0,o.jM)(e.current,function(e){e.open=null!=n?n:!e.open}))},[e]),r=(0,i.useCallback)(function(){var n=e.current,r=n.open,i=n.overlayed;r&&i&&t(!1)},[e,t]);return{state:e,setSidebarContainerEl:n,toggleSidebar:t,closeIfNeeded:r}}var u=(0,t(49045).v)(["sidebarTransform","sidebarWidth","sidebarHeight","paddingLeft","sidebarOpacity","sidebarPointerEvents","sidebarBorder","sidebarBlanketPointerEvents","sidebarBlanketOpacity"]),d=u.cssVars,p=u.styleTokens;function f(e){var n,t,i="calc(100% - ".concat(s.LU.space16,")"),o="translate(".concat(s.LU.space8,", ").concat(s.LU.space8,")");return e.open?(n={},(0,r._)(n,d.paddingLeft,e.overlayed?"0":e.width+6+"px"),(0,r._)(n,d.sidebarWidth,e.width+"px"),(0,r._)(n,d.sidebarOpacity,"1"),(0,r._)(n,d.sidebarBlanketOpacity,e.overlayed?"1":"0"),(0,r._)(n,d.sidebarBlanketPointerEvents,e.overlayed?"all":"none"),(0,r._)(n,d.sidebarPointerEvents,"all"),(0,r._)(n,d.sidebarTransform,o),(0,r._)(n,d.sidebarHeight,i),n):(t={},(0,r._)(t,d.paddingLeft,"0"),(0,r._)(t,d.sidebarWidth,e.width+"px"),(0,r._)(t,d.sidebarOpacity,"0"),(0,r._)(t,d.sidebarBlanketOpacity,"0"),(0,r._)(t,d.sidebarBlanketPointerEvents,"none"),(0,r._)(t,d.sidebarPointerEvents,"none"),(0,r._)(t,d.sidebarTransform,o),(0,r._)(t,d.sidebarHeight,i),t)}},28380:(e,n,t)=>{"use strict";t.d(n,{A:()=>g});var r=t(29935),i=t(12694),o=t(86105),a=t(82643),l=t(21462),s=t(35330),c=t(83150),u=t(7512),d=t(53231),p=t(34834),f=t(3218),h=t(45708),m=t(3752);function g(e){var n,t,g,v=e.moveOrDeleteFile,w=(0,p.A)().fs,y=(0,l.useRef)(new Map),b=(0,m.mU)(),S=(0,i._)((0,l.useState)(!1),2),Y=S[0],A=S[1],x=(0,i._)((0,l.useState)(!1),2),C=x[0],_=x[1],k=(0,i._)((0,l.useState)([]),2),D=k[0],E=k[1],R=(0,h.i)(),I=(0,f.iO)(),F=D.map(function(e){return e.path}).map(function(e){return{title:e,path:e}}),T=(0,i._)((0,l.useState)(),2),P=T[0],L=T[1],U=(0,m.tn)();(0,l.useEffect)(function(){if(b&&!y.current.has(b)){var e=function(e){var n=e.node.path;U(e.eventType===u.dV.Move?{path:n,type:"move",to:e.to}:{path:n,type:"delete"}),v&&v(e),y.current.delete(b),E(function(e){return e.filter(function(e){return e.path!==b})})};(0,c.m6)(b)?w.watchTextFile(b,{onMoveOrDelete:e,onError:function(e,n){e.code||(w.flush(),w.persist({skipDebounce:!0}),I({error:e,extras:n,tags:{ot:!0},origin:"useContentsDiverged: fs.watchTextFile"}))},onReconnectFail:function(e,n){E(function(t){return(0,o._)(t.filter(function(e){return e.path!==b})||[]).concat([{path:b,prompt:n,cb:e}])}),A(!0),P||L(b)}}):w.watchFile(b,{onChange:function(){},onMoveOrDelete:e}),y.current.set(b,!0)}},[b,w,I,v,P,U]);var N=(n=(0,r._)(function(e){return(0,a.YH)(this,function(n){switch(n.label){case 0:return(0,d.u4)(d.AZ.FILE_RECONNECT_FALLBACK_CHOSEN,{choice:e}),(0,d.u4)(d.AZ.CONTENTS_DIVERGED_ACTION,{action:"local"===e?"client":"server"}),_(!0),[4,Promise.all(D.map(function(n){return E(function(e){var t=e.filter(function(e){return e.path!==n.path});return 0===t.length?A(!1):L(t[0].path),t}),n.cb(e)}))];case 1:return n.sent(),_(!1),[2]}})}),function(e){return n.apply(this,arguments)}),O=P?D.find(function(e){return e.path===P}):null,M=null==O?void 0:O.prompt,B=(0,s.M)({left:{code:null!=(t=null==M?void 0:M.localContent)?t:"",filePath:P},right:{code:null!=(g=null==M?void 0:M.remoteContent)?g:"",filePath:P}});return{isConverging:C,didContentsDiverge:Y,showMoreDetail:R,failedFiles:D,failedFilesOptions:F,selectedFile:P,setSelectedFile:L,reviewingPrompt:M,onChoice:N,local:B.left,remote:B.right}}},28418:(e,n,t)=>{"use strict";t.d(n,{c:()=>u});var r=t(88263),i=t(79784),o=t(64583),a=t(48521),l=t(36112),s=t(76126),c=(0,o.x)({root:[a.wp.borderRadius()]});function u(e){var n=e.aiName;return(0,r.Y)(l.ui,{elevated:!0,css:c.root,py:8,px:12,gap:8,align:"center",children:(0,r.FD)(s.EY,{children:["Guests are not allowed to use ",n," in ",i.Lm," Plan user's repls."]})})}},28462:(e,n,t)=>{"use strict";t.d(n,{V4:()=>c,VU:()=>d,aU:()=>u});var r=t(12584),i=t(41114),o=t(11725);function a(){var e=(0,r._)(["\n  fragment HandleReplRedirectionReplRedirect on ReplRedirect {\n    replUrl\n  }\n"]);return a=function(){return e},e}function l(){var e=(0,r._)(["\n  fragment HandleReplRedirectionSubscriptionExpired on ReplSubscriptionExpired {\n    isOwner\n    replId\n  }\n"]);return l=function(){return e},e}function s(){var e=(0,r._)(["\n  fragment HandleReplRedirectionRepl on Repl {\n    id\n    isOwner\n    language\n    ...ReplLinkRepl\n    authorizations {\n      editFileContents {\n        isAuthorized\n      }\n      connectToWorkspace {\n        isAuthorized\n      }\n    }\n    org {\n      id\n    }\n  }\n  ","\n"]);return s=function(){return e},e}var c=(0,i.J1)(a()),u=(0,i.J1)(l()),d=(0,i.J1)(s(),o.r)},28708:e=>{e.exports={errorMessage:"ErrorBoundary_errorMessage__3Jcbl"}},28741:e=>{e.exports={confirmationModalScreenshotContainer:"ConfirmRollbackModal_confirmationModalScreenshotContainer__7Tc1N",confirmationModalPreviewTextContainer:"ConfirmRollbackModal_confirmationModalPreviewTextContainer__YBoYt",confirmationModalScreenshot:"ConfirmRollbackModal_confirmationModalScreenshot__aWxsi",noScreenshotText:"ConfirmRollbackModal_noScreenshotText__soMJ7",flexGrowAndShrink:"ConfirmRollbackModal_flexGrowAndShrink__1dzId",lineHeightOffset:"ConfirmRollbackModal_lineHeightOffset__Xlkaz",statusIconLoading:"ConfirmRollbackModal_statusIconLoading__iRz8s"}},28776:(e,n,t)=>{"use strict";t.d(n,{d:()=>x,O:()=>C});var r,i=t(88263),o=t(21462),a=t(3136),l=t(11390),s=t(5504),c=t(29935),u=t(37743),d=t(82643),p=t(51367),f=t(34626),h=new(function(){function e(){(0,u._)(this,e)}var n=e.prototype;return n.export=function(e,n){var t=new Map,r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var s,c=a.value,u=c.spanContext(),d={name:c.name,service:"repl.it-web",trace_id:u.traceId,span_id:u.spanId,start:c.startTime,end:c.endTime,parent_id:c.parentSpanId,attributes:c.attributes};t.has(u.traceId)||t.set(u.traceId,[]),null==(s=t.get(u.traceId))||s.push(d)}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}var h=Array.from(t.values());if(0===h.length)return void n({code:p.V.SUCCESS});var m=(0,f.JM)();fetch("/datadog/traces",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-Requested-With":"fetch"},body:JSON.stringify({repl:{id:null==m?void 0:m.id,rootOriginReplUrl:null==m?void 0:m.rootOriginReplUrl},traces:h})}).then(function(){n({code:p.V.SUCCESS})}).catch(function(e){f.vF.error("Failed to send traces to Datadog: ".concat(e.message)),n({code:p.V.FAILED,error:e.message})})},n.shutdown=function(){return(0,c._)(function(){return(0,d.YH)(this,function(e){return[2]})})()},n.forceFlush=function(){return(0,c._)(function(){return(0,d.YH)(this,function(e){return[2]})})()},e}()),m=t(62019),g=t(51175),v=t(86466),w=t(1833),y=t(43628),b=t(4071),S=t(48514),Y=function(e){function n(){var e;return(0,u._)(this,n),e=(0,m._)(this,n,arguments),e.spanSet=new Map,e}(0,w._)(n,e);var t=n.prototype;return t.startSpan=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:y._.active(),i=(0,g._)((0,v._)(n.prototype),"startSpan",this).call(this,e,t,r);return this.spanSet.set(i.spanContext().spanId,i),i},t.pruneSpans=function(){this.spanSet.forEach(function(e){e.isRecording()&&e.setAttribute("pruned",!0)}),this.spanSet=new Map},n}(b.s),A=function(e){function n(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,u._)(this,n),(e=(0,m._)(this,n,[t]))._wsTracers=new Map,e._wsConfig=t,e}(0,w._)(n,e);var t=n.prototype;return t.getTracer=function(e,n,t){var r="".concat(e,"@").concat(n||"",":").concat((null==t?void 0:t.schemaUrl)||"");return this._wsTracers.has(r)||this._wsTracers.set(r,new Y({name:e,version:n,schemaUrl:null==t?void 0:t.schemaUrl},this._wsConfig,this)),this._wsTracers.get(r)},t.pruneSpansForTracer=function(e,n,t){var r,i="".concat(e,"@").concat(n||"",":").concat((null==t?void 0:t.schemaUrl)||"");this._wsTracers.has(i)&&(null==(r=this._wsTracers.get(i))||r.pruneSpans())},n}(S.Z);function x(){var e=(0,s._P)({controlName:"flag-open-telemetry-tracing"});return(0,o.useEffect)(function(){e&&((r=new A).addSpanProcessor(new l.J(h)),r.register({propagator:new a.lm}))},[e]),(0,i.Y)(i.FK,{})}function C(e){r.pruneSpansForTracer(e)}},28944:(e,n,t)=>{"use strict";t.d(n,{Ae:()=>i,QH:()=>o,Rl:()=>a});var r=t(53231),i=function(e){var n=e.context;(0,r.u4)(r.AZ.DEPLOYMENT_SECTION_VIEWED,{context:n})},o=function(e,n){(0,r.u4)(r.AZ.DEPLOYMENT_DEBUG_SUMMARY_USED,{action:e,context:n})},a=function(e){(0,r.u4)(r.AZ.DEPLOYMENT_ADD_SECRET_CLICKED,{context:e})}},28971:e=>{e.exports={root:"OutputOverlay_root__7HWFX","slide-up":"OutputOverlay_slide-up__0PCps"}},29422:(e,n,t)=>{"use strict";t.d(n,{A:()=>c});var r=t(88263),i=t(64583),o=t(48521),a=t(10429),l=t(80762),s=(0,i.x)({root:[o.wp.coverContainer,o.wp.center]});function c(){return(0,r.Y)(a.S,{css:s.root,children:(0,r.Y)(l.A,{size:32})})}},29440:(e,n,t)=>{"use strict";t.d(n,{J9:()=>u});var r=t(12694),i=t(86105),o=t(83150),a=t(7512),l=["json","md","draw","txt"],s=[".gitignore",".replit"];function c(e,n){var t=new Map,a=!0,l=!1,s=void 0;try{for(var c,u=e[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var d,p=c.value,f=(0,o.an)(p);if(f&&(!n||f.startsWith(n))){var h=null!=(d=t.get(f))?d:0;t.set(f,h+1)}}}catch(e){l=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw s}}return(0,i._)(t.entries()).sort(function(e,n){var t=(0,r._)(e,2)[1];return(0,r._)(n,2)[1]-t}).map(function(e){return(0,r._)(e,1)[0]})}function u(e,n){if(e.fileType===a.pt.Directory||!e.input)return[];if("."===e.input)return s.map(function(e){return{value:e,highlight:[{from:1,to:e.length}]}});if(e.input.startsWith("."))return s.filter(function(n){return n.startsWith(e.input)}).map(function(n){return{value:n,highlight:[{from:n.length-e.input.length,to:n.length}]}});var t=(0,o.an)(e.input),r=c(e.siblings.map(function(e){return e.filename}),t);if(r.length<3&&r.push.apply(r,(0,i._)(c(n(),t))),r.length<3){var u=t?l.filter(function(e){return e.startsWith(t)}):l;r.push.apply(r,(0,i._)(u))}return(0,i._)(new Set(r)).slice(0,3).map(function(n){var r=e.input;r.endsWith(".")?r=r.slice(0,-1):t&&(r=r.slice(0,-(t.length+1)));var i=r+"."+n;return{value:i,highlight:[{from:e.input.length,to:i.length}]}})}},29775:(e,n,t)=>{"use strict";t.d(n,{A:()=>i});var r="file://";function i(e){var n=e;return e.startsWith(r)&&(n=e.slice(r.length)),n.startsWith("/")&&(n=n.slice(1)),n}},30218:(e,n,t)=>{"use strict";t.d(n,{A:()=>i,l:()=>r});var r="https://linkedin.com/sharing/share-offsite";function i(e){var n=e.url,t=e.text,i=new URLSearchParams;t&&i.append("text",t),n&&i.append("url",n);var o=i.toString();return o.length>0?"".concat(r,"?").concat(o):r}},30736:(e,n,t)=>{"use strict";t.d(n,{A:()=>a});var r=t(31062),i=t(68213),o=t(34834);function a(){var e=(0,o.A)().container,n=(0,r.A)(),t=(0,i.A)(e,{fallbackToReplCo:!1}).url;if(!t)return null;var a=new URL(t).host,l=a.indexOf(":"),s="22";return -1!==l&&(a=a.substring(0,l),s="2022"),{sshUser:n,sshHostname:a,sshPort:s}}},30746:(e,n,t)=>{"use strict";t.d(n,{Ai:()=>p,Ot:()=>h,PY:()=>s,UK:()=>f,ob:()=>d,uB:()=>c});var r=t(12694),i=t(21462),o=t(44370),a=t(69338),l=t(50140);function s(){return(0,r._)((0,i.useState)(function(){return(0,o.y$)()}),1)[0]}var c=(0,i.createContext)(null);function u(){var e=(0,i.useContext)(c);if(!e)throw Error("Expected store in context");return e}var d=function(e){return(0,a.Xr)(e,{store:u()})},p=(0,o.eU)(null);function f(){return(0,a.md)(p,{store:u()})}function h(){return(0,l.yF)((0,i.useCallback)(function(e){return e(p)},[p]),{store:u()})}},31538:(e,n,t)=>{"use strict";t.d(n,{C5:()=>w,DO:()=>M,G:()=>R,GS:()=>N,Je:()=>P,NF:()=>h,NT:()=>T,No:()=>_,Rp:()=>d,Sh:()=>E,T1:()=>S,TJ:()=>b,VW:()=>A,WM:()=>U,Yb:()=>v,ZH:()=>s,b8:()=>y,gb:()=>C,k4:()=>I,kR:()=>F,mN:()=>L,sC:()=>H,tH:()=>O,uu:()=>B,xP:()=>l,yh:()=>f});var r=t(44370),i=t(42415),o=t(79209),a=t(45263),l=[1,2,4,8],s=(0,r.eU)(i.jc),c=(0,r.eU)(function(e){var n=e(s),t=n.costPerComputeUnitUsd*n.computeUnitsPerCpu;return[t,2*t,4*t,8*t]}),u=[[0,3],[0,4],[2,5],[3,6]],d=l.length-1,p=1/(2*d),f=(0,r.eU)(2),h=(0,r.eU)(function(e){return l[e(f)]}),m=(0,r.eU)(function(e){return e(c)[e(f)]}),g=(0,r.eU)(function(e){return u[e(f)]}),v=(0,r.eU)(0),w=(0,r.eU)(function(e){var n=e(D)[0]/d,t=e(D)[1]/d,r=0,i=0;return e(v)<n&&(r=(n-e(v))/p,i=n-p),e(v)>t&&(r=(e(v)-t)/p,i=t+p),{overage:r,point:i}}),y=(0,r.eU)(0),b=(0,r.eU)(0),S=[.5,1,2,4,8,16,32],Y=[[0,1],[0,1],[0,2],[0,3],[1,3],[2,3],[3,3]],A=S.length-1,x=1/(2*A),C=(0,r.eU)(4),_=(0,r.eU)(function(e){return S[e(C)]}),k=(0,r.eU)(function(e){var n=e(s).costPerComputeUnitUsd;return e(L)*n}),D=(0,r.eU)(function(e){return Y[e(C)]}),E=(0,r.eU)(0),R=(0,r.eU)(function(e){var n=e(g)[0]/A,t=e(g)[1]/A,r=0,i=0;return e(E)<n&&(r=(n-e(E))/x,i=n-x),e(E)>t&&(r=(e(E)-t)/x,i=t+x),{overage:r,point:i}}),I=(0,r.eU)(null,function(e,n){var t=e(f),r=e(D)[0],i=e(D)[1];t<r&&n(f,r),t>i&&n(f,i)}),F=(0,r.eU)(null,function(e,n){var t=e(C),r=e(g)[0],i=e(g)[1];t<r&&n(C,r),t>i&&n(C,i)}),T=(0,r.eU)(function(e){var n=e(D)[0]/d,t=e(D)[1]/d,r=e(g)[0]/A,i=e(g)[1]/A;return e(v)<n?(n-e(v))/p:e(v)>t?(e(v)-t)/p:e(E)<r?(r-e(E))/x:e(E)>i?(e(E)-i)/x:0}),P=(0,r.eU)(function(e){var n;return(1e5*(n={ramCost:e(k),cpuCost:e(m)}).ramCost+1e5*n.cpuCost)/1e5}),L=(0,r.eU)(function(e){var n=e(s).computeUnitsPerRam;return e(_)*n}),U=(0,r.eU)(function(e){var n=e(s).computeUnitsPerCpu;return e(h)*n}),N=(0,r.eU)(function(e){return e(L)+e(U)}),O=function(e){return e.None="0ms",e.Normal="200ms",e}({}),M=["ArrowLeft","ArrowRight","Home","End"],B=(0,o.AH)({position:"relative",height:"16px",width:"100%",touchAction:"none"}),H=(0,o.AH)({position:"absolute",zIndex:2,top:"0",width:"16px",height:"16px",backgroundColor:a.LU.white,borderRadius:"100%",outline:"none",cursor:"pointer",willChange:"left, transition",boxShadow:"0 0 8px rgba(0,0,0,0.15)",":focus":{outline:"2px solid ".concat(a.LU.accentPrimaryDefault),":not(:focus-visible)":{outlineColor:"transparent"}}})},31592:(e,n,t)=>{"use strict";t.d(n,{A9:()=>x,CX:()=>R,CY:()=>P,FL:()=>C,d1:()=>_,lb:()=>F,oh:()=>U,tD:()=>D});var r=t(17844),i=t(12584),o=t(41114),a=t(86997),l=t(50175),s=t(68197);function c(){var e=(0,i._)(["\n  fragment AnnotationsUser on User {\n    id\n    username\n    fullName\n    image\n  }\n"]);return c=function(){return e},e}function u(){var e=(0,i._)(["\n  fragment AnnotationMessageContent on MessageContentType {\n    __typename\n    ... on TextMessageContentType {\n      text\n    }\n    ... on PreviewMessageContentType {\n      preview\n    }\n    ... on StatusMessageContentType {\n      status\n    }\n  }\n"]);return u=function(){return e},e}function d(){var e=(0,i._)(["\n  fragment AnnotationsUIMessage on AnnotationMessage {\n    id\n    user {\n      id\n      ...AnnotationsUser\n    }\n    anchor {\n      id\n    }\n    timeCreated\n    content {\n      __typename\n      ...AnnotationMessageContent\n    }\n    currentUserIsAuthor\n    seen\n  }\n  ","\n  ","\n"]);return d=function(){return e},e}function p(){var e=(0,i._)(["\n  fragment AnnotationsUIAnchor on AnnotationAnchor {\n    id\n    user {\n      id\n      ...AnnotationsUser\n    }\n    path\n    otVersion\n    indexStart\n    indexEnd\n    isResolved\n    isGeneral\n    messages {\n      id\n      ...AnnotationsUIMessage\n    }\n  }\n  ","\n  ","\n"]);return p=function(){return e},e}function f(){var e=(0,i._)(["\n  query AnnotationAnchorsByRepl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        annotationAnchors {\n          id\n          ...AnnotationsUIAnchor\n        }\n      }\n    }\n    currentUser {\n      id\n      username\n      fullName\n      image\n    }\n  }\n  ","\n"]);return f=function(){return e},e}function h(){var e=(0,i._)(["\n  mutation CreateAnnotationAnchor(\n    $annotationAnchor: AnnotationAnchorInput!\n    $annotationMessage: AnnotationMessageInput\n    $highlight: AnnotationHighlightInput\n  ) {\n    createAnnotationAnchor(\n      annotationAnchor: $annotationAnchor\n      annotationMessage: $annotationMessage\n      highlight: $highlight\n    ) {\n      ... on UserError {\n        message\n      }\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n  }\n  ","\n"]);return h=function(){return e},e}function m(){var e=(0,i._)(["\n  mutation UpdateAnnotationAnchor(\n    $id: String!\n    $changes: AnnotationAnchorChangesInput!\n  ) {\n    updateAnnotationAnchor(id: $id, changes: $changes) {\n      ... on UserError {\n        message\n      }\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n  }\n  ","\n"]);return m=function(){return e},e}function g(){var e=(0,i._)(["\n  mutation CreateAnnotationMessage(\n    $replId: String!\n    $anchorId: String!\n    $annotationMessage: AnnotationMessageInput!\n    $highlight: AnnotationHighlightInput\n  ) {\n    createAnnotationMessage(\n      replId: $replId\n      anchorId: $anchorId\n      annotationMessage: $annotationMessage\n      highlight: $highlight\n    ) {\n      ... on UserError {\n        message\n      }\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n  }\n  ","\n"]);return g=function(){return e},e}function v(){var e=(0,i._)(["\n  mutation updateThreadPreview(\n    $threadId: String!\n    $messageId: String!\n    $message: String\n  ) {\n    updateThreadPreview(\n      threadId: $threadId\n      messageId: $messageId\n      message: $message\n    )\n  }\n"]);return v=function(){return e},e}function w(){var e=(0,i._)(["\n  subscription AnnotationUpdates($replId: String!) {\n    updatedAnnotation: annotationUpdatesByRepl(replId: $replId) {\n      id\n      ...AnnotationsUIAnchor\n    }\n  }\n  ","\n"]);return w=function(){return e},e}function y(){var e=(0,i._)(["\n  subscription MessagePreview($threadId: String!) {\n    threadPreview(threadId: $threadId) {\n      userId\n      messageId\n      message\n    }\n  }\n"]);return y=function(){return e},e}var b={},S=(0,o.J1)(c()),Y=(0,o.J1)(u()),A=(0,o.J1)(d(),S,Y),x=(0,o.J1)(p(),S,A),C=(0,o.J1)(f(),x);function _(e){var n=(0,r._)({},b,e);return a.I(C,n)}var k=(0,o.J1)(h(),x);function D(e){var n=(0,r._)({},b,e);return l.n(k,n)}var E=(0,o.J1)(m(),x);function R(e){var n=(0,r._)({},b,e);return l.n(E,n)}var I=(0,o.J1)(g(),x);function F(e){var n=(0,r._)({},b,e);return l.n(I,n)}var T=(0,o.J1)(v());function P(e){var n=(0,r._)({},b,e);return l.n(T,n)}var L=(0,o.J1)(w(),x);function U(e){var n=(0,r._)({},b,e);return s.R(L,n)}y()},31984:(e,n,t)=>{"use strict";t.d(n,{G:()=>r});var r=function(e){return e.Starter="starter",e.Paid="paid",e}({})},32156:(e,n,t)=>{"use strict";t.d(n,{A:()=>ea});var r,i=t(17844),o=t(93629),a=t(86105),l=t(88263),s=t(21462),c=t(63019),u=t(64583),d=t(48521),p=t(46603),f=t(76126),h=t(10429),m=t(16542);function g(e){var n=e.animate,t=e.diff,r=e.maxLines,i=(0,s.useMemo)(function(){return t.hunks.map(function(e){return e.lines}).flat()},[t]);return(0,l.Y)(h.S,{children:(0,l.Y)(m.Y,{animate:void 0!==n&&n,diffMode:!0,lines:i,maxLines:r},"diff-".concat(t.pathA,"-").concat(t.pathB))})}var v=t(83846),w=t(45263),y=t(33999),b=t(36112),S=w.LU.outlineDimmest,Y=(0,s.createContext)({});function A(){return(0,s.useContext)(Y)}function x(e){var n=e.diff,t=e.onPathClick,r=e.onViewFullDiff,i=e.children,o=(0,s.useMemo)(function(){var e=!0,t=!1,r=void 0;try{for(var i,o=n.headers[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value;if("index"===a.type)return{a:a.hashA,b:a.hashB}}}catch(e){t=!0,r=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw r}}},[n]),a=(0,s.useMemo)(function(){return{handlePathNavigation:t?function(e,r){var i="a"===e?n.pathA:n.pathB,a="a"===e?null==o?void 0:o.a:null==o?void 0:o.b;i&&t({path:i,revision:a,line:r})}:void 0,handleViewFullDiffNavigation:r?function(){var e=n.pathB||n.pathA,t=(null==o?void 0:o.b)||(null==o?void 0:o.a);e&&r({path:e,revision:t})}:void 0}},[n,t,r,o]);return(0,l.Y)(Y.Provider,{value:a,children:i})}var C=t(29935),_=t(12694),k=t(82643),D=t(80367),E=t(5016),R=t(41451),I=t(45912),F=t(33781);function T(){return(T=(0,C._)(function(e,n,t){var r,a,l,s,c,u,d;return(0,k.YH)(this,function(p){switch(p.label){case 0:if(0===e.hunks.length)return[2,e];if(r=e.pathA?I.Jh.from(e.pathA):null,a=e.pathB?I.Jh.from(e.pathB):null,l=null,s=null,!(r&&r.codeMirrorLanguage))return[3,4];if(!r.codeMirrorLanguage.support)return[3,1];return c=r.codeMirrorLanguage.support.language.parser,[3,3];case 1:return[4,r.codeMirrorLanguage.load()];case 2:c=p.sent().language.parser,p.label=3;case 3:l=c,p.label=4;case 4:if(!(a&&a.codeMirrorLanguage))return[3,8];if(!a.codeMirrorLanguage.support)return[3,5];return u=a.codeMirrorLanguage.support.language.parser,[3,7];case 5:return[4,a.codeMirrorLanguage.load()];case 6:u=p.sent().language.parser,p.label=7;case 7:s=u,p.label=8;case 8:if(t.aborted||!l&&!s)return[2,e];return d=e.hunks.map(function(e){var t=e.lines.filter(function(e){return null!==e.numberA}).map(function(e){return e.content}).join("\n"),r=e.lines.filter(function(e){return null!==e.numberB}).map(function(e){return e.content}).join("\n");e.heading&&(t=t?"".concat(e.heading,"\n").concat(t):"",r=r?"".concat(e.heading,"\n").concat(r):"");var a=(0,R.ZE)(t,n,l),c=(0,R.ZE)(r,n,s);return e.heading&&t&&a.shift(),e.heading&&r&&c.shift(),(0,o._)((0,i._)({},e),{lines:e.lines.map(function(n){if(null!==n.numberB)t="b",r=n.numberB;else if(null!==n.numberA)t="a",r=n.numberA;else throw Error("Invalid line, no number for either side");var t,r,l="a"===t?a[r-e.fromA]:c[r-e.fromB];if(!l)throw Error("Line not found in side ".concat(t));return(0,o._)((0,i._)({},n),{content:l})})})}),[2,(0,o._)((0,i._)({},e),{hunks:d})]}})})).apply(this,arguments)}var P=new WeakSet,L=t(33295),U=t(89635),N=t.n(U),O=t(31258),M=t(23499),B=t(47388),H="--number-width-a",z="--number-width-b",W=(0,u.x)({content:{marginLeft:w.LU.space8,wordBreak:"break-word",whiteSpace:"pre-wrap"},nbsp:{userSelect:"none"},span:{"&::selection":{backgroundColor:w.LU.accentPrimaryDimmer}},line:{display:"flex",flexDirection:"row",alignItems:"stretch",gap:"1ch",paddingLeft:"1ch",paddingRight:w.LU.space8,".is-patch-with-border &":{"&.is-added":{borderLeft:"1px solid ".concat(w.LU.accentPositiveDimmest)},"&.is-removed":{borderLeft:"1px solid ".concat(w.LU.accentNegativeDimmest)},"&.is-same":{borderLeft:"1px solid ".concat(S)}},"&.is-skipped":{paddingTop:w.LU.space4,paddingBottom:w.LU.space4,color:w.LU.foregroundDimmest,userSelect:"none"}},number:{flexShrink:0,whiteSpace:"nowrap",userSelect:"none",".is-added &":{color:w.LU.accentPositiveStronger},".is-removed &":{color:w.LU.accentNegativeStronger},".is-same &":{color:w.LU.foregroundDimmest},".is-skipped &":{position:"relative",left:"25%",color:w.LU.foregroundDimmest}},numberContainer:{display:"flex",flexDirection:"row",alignItems:"start",justifyContent:"flex-end",flexShrink:0,"&.is-side-a":{width:"var(".concat(H,")")},"&.is-side-b":{width:"var(".concat(z,")")}}});function G(e){var n=(0,F.D)().values;return(0,s.useMemo)(function(){if("same"===e)return"";var t="added"===e?n.global.accentPositiveDefault:n.global.accentNegativeDefault;return N()(t).alpha(.2).hex()},[e,n.global.accentPositiveDefault,n.global.accentNegativeDefault])}function V(e){var n=e.type,t=void 0===n?"same":n,r=e.changes,i=A().handleViewFullDiffNavigation,o=G(t);if(r<=0)return null;var a=!1,s=!1;return("removed"===t||"same"===t)&&(a=(0,l.Y)(M.A,{size:20})),("added"===t||"same"===t)&&(s=(0,l.Y)(M.A,{size:20})),(0,l.FD)("div",{className:"is-".concat(t," is-skipped"),css:W.line,style:{backgroundColor:o},children:[(0,l.Y)(Z,{side:"a",type:t,number:a}),(0,l.Y)(Z,{side:"b",type:t,number:s}),(0,l.Y)("div",{css:W.content,children:(0,l.Y)("span",{css:W.span,children:i?(0,l.Y)(p.$n,{text:"view ".concat(r," more ").concat((0,O.A)("change",r)),iconLeft:(0,l.Y)(B.A,{}),variant:"underlinedOnHover",colorway:"primary",onClick:function(){return i()}}):"".concat(r," more ").concat((0,O.A)("change",r)," not shown")})})]})}function j(e){var n=e.type,t=e.content,r=e.numberA,i=e.numberB,o=G(n);return(0,l.FD)("div",{className:"is-".concat(n),css:W.line,style:{backgroundColor:o},children:[(0,l.Y)(Z,{side:"a",type:n,number:void 0===r?null:r}),(0,l.Y)(Z,{side:"b",type:n,number:void 0===i?null:i}),(0,l.Y)("div",{className:"is-".concat(n),css:W.content,children:"string"==typeof t?(0,l.Y)("span",{css:W.span,children:t||(0,l.Y)("span",{css:W.nbsp,children:"\xa0"})}):t.map(function(e,n){var t=e.text,r=e.tags;return(0,l.Y)("span",{className:r,css:W.span,children:t||(0,l.Y)("span",{css:W.nbsp,children:"\xa0"})},n)})})]})}function Z(e){var n=e.side,t=e.type,r=e.number,i=A().handlePathNavigation;return!1===r?null:null===r?(0,l.Y)("div",{css:W.numberContainer,className:"is-side-".concat(n)}):(0,l.Y)("div",{css:W.numberContainer,className:"is-side-".concat(n),children:i&&"number"==typeof r?(0,l.Y)(p.$n,{text:(0,l.Y)("span",{css:W.number,children:r}),variant:"underlinedOnHover",onClick:function(){return i("removed"===t?"a":"b",r)}}):(0,l.Y)("span",{css:W.number,children:r})})}var q=(0,u.x)({hunk:[d.wp.flex.column,{":not(:first-of-type)":{borderTop:"1px solid ".concat(S)},":first-of-type [data-hunk-header]":{borderTopLeftRadius:3}}],header:[d.wp.colorMixBg(w.LU.interactiveBackground,w.LU.surfaceBackground),{gap:"1ch",padding:"".concat(w.LU.space4," 1ch"),".is-patch-with-border &":{borderLeft:"1px solid ".concat(S)}}],countAdded:[d.wp.textAlign.right,d.wp.color.accentPositiveStronger,d.wp.width("var(".concat(z,")"))],countRemoved:[d.wp.textAlign.right,d.wp.color.accentNegativeStronger,d.wp.width("var(".concat(H,")"))],sectionHeading:[d.wp.ml(8),d.wp.font.code,d.wp.color.foregroundDimmer],hunks:[d.wp.flex.column,d.wp.font.code,(r={lineHeight:w.LU.lineHeightSmall},(0,v._)(r,"> div:last-child"+L.v,d.wp.pb(2)),(0,v._)(r,"> div:first-child"+L.v,d.wp.pt(4)),r)]});function K(e){var n=e.hunk,t=e.hideHeader,r=e.maxLines,o=(0,s.useMemo)(function(){var e=0,t=0,r=!0,i=!1,o=void 0;try{for(var a,l=n.lines[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var s=a.value;"added"===s.type?t++:"removed"===s.type&&e++}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return{a:e,b:t}},[n]),a=(0,s.useMemo)(function(){return void 0!==r&&n.lines.length>r?n.lines.slice(0,r):n.lines},[n,r]);return(0,l.FD)(h.S,{css:q.hunk,children:[t?null:(0,l.FD)(h.S,{css:q.header,row:!0,align:"center","data-hunk-header":!0,children:[(0,l.FD)("span",{css:q.countRemoved,children:["-",o.a]}),(0,l.FD)("span",{css:q.countAdded,children:["+",o.b]}),n.heading?(0,l.Y)("span",{css:q.sectionHeading,children:n.heading}):null]}),(0,l.Y)(h.S,{css:q.hunks,children:a.map(function(e,n){return(0,l.Y)(j,(0,i._)({},e),n)})})]})}var $=t(37037),J=(0,u.x)({diff:[d.wp.flex.column,{"&.is-patch-with-border":d.wp.borderRadius(4)}],header:[d.wp.rowWithGap(8),d.wp.my(8),d.wp.align.center,d.wp.flex.wrap],headerFile:{lineHeight:1,"&.is-added":d.wp.color.accentPositiveStronger,"&.is-removed":d.wp.color.accentNegativeStronger},binaryTag:[d.wp.color.accentPrimaryStronger],container:[d.wp.flex.column,d.wp.overflow("hidden"),{".is-patch-with-border &":[d.wp.borderRadius(4),{"&.is-modified":{border:"1px solid ".concat(S),borderLeft:"none"},"&.is-added":{border:"1px solid ".concat(w.LU.accentPositiveDimmest),borderLeft:"none"},"&.is-removed":{border:"1px solid ".concat(w.LU.accentNegativeDimmest),borderLeft:"none"},"&.is-no-changes":{border:"1px solid ".concat(w.LU.outlineDimmer)},"&.is-binary":{border:"1px solid ".concat(w.LU.outlineDimmer)}}],"&.is-no-changes":[d.wp.p(8),d.wp.center],"&.is-binary":[d.wp.p(8),d.wp.center]}],file:[d.wp.flex.column,d.wp.font.code,{lineHeight:w.LU.lineHeightSmall,"> div:last-child":d.wp.pb(2),"> div:first-child":d.wp.pt(4)}]});function Q(e){var n,t,r,i,o,a,c=e.diff,u=e.maxLines,d=e.noHeader,p=e.noBorder,f=e.background,m=e.compressed,g=e.onPathClick,w=e.onViewFullDiff,y=(t=(n=(0,_._)((0,s.useState)(c),2))[0],r=n[1],i=(0,F.D)(),o=(0,s.useMemo)(function(){return(0,E.y)(i.values.editor.syntaxHighlighting)},[i.values.editor.syntaxHighlighting]),(0,s.useEffect)(function(){!o.module||P.has(o.module)||(D.G.mount(document,o.module),P.add(o.module))},[o.module]),(0,s.useEffect)(function(){r(c);var e=0,n=!0,t=!1,i=void 0;try{for(var a,l=c.hunks[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var s=a.value;if((e+=s.lines.length)>1e3)return}}catch(e){t=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(t)throw i}}var u=new AbortController,d=u.signal;return(function(e,n,t){return T.apply(this,arguments)})(c,o,d).then(function(e){d.aborted||r(e)}),function(){u.abort()}},[c,o]),t),b=(0,s.useMemo)(function(){var e=0,n=0,t=0,r=0,i=!0,o=!1,a=void 0;try{for(var l,s=c.hunks[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var u=l.value,d=0,p=0,f=!0,h=!1,g=void 0;try{for(var v,w=u.lines[Symbol.iterator]();!(f=(v=w.next()).done);f=!0){var y=v.value;y.numberA&&(t=Math.max(t,y.numberA)),y.numberB&&(r=Math.max(r,y.numberB)),"removed"===y.type&&d++,"added"===y.type&&p++}}catch(e){h=!0,g=e}finally{try{f||null==w.return||w.return()}finally{if(h)throw g}}e=Math.max(e,d),n=Math.max(n,p)}}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}var b=t.toString().length,S=r.toString().length;if((!m||c.hunks.length>1)&&c.pathA&&c.pathB){var Y=e.toString().length+1,A=n.toString().length+1;b=Math.max(b,Y),S=Math.max(S,A)}return{a:b,b:S}},[c,m]);return(0,l.Y)(x,{diff:c,onPathClick:g,onViewFullDiff:w,children:(0,l.FD)(h.S,{css:J.diff,className:p?"":"is-patch-with-border",style:(a={},(0,v._)(a,H,"".concat(b.a,"ch")),(0,v._)(a,z,"".concat(b.b,"ch")),a),children:[!d&&(c.pathA||c.pathB)?(0,l.Y)(ee,{diff:y}):null,(0,l.Y)(et,{diff:y,compressed:m,background:f,maxLines:u})]})})}function X(){return(0,l.Y)(f.EY,{css:J.binaryTag,variant:"small",children:"Binary"})}function ee(e){var n=e.diff;if(n.pathA&&n.pathB&&n.pathA===n.pathB)return(0,l.FD)(h.S,{css:J.header,children:[(0,l.Y)(en,{diff:n,side:"b"}),n.binary?(0,l.Y)(X,{}):null]});if(n.pathA&&n.pathB&&n.pathA!==n.pathB)return(0,l.FD)(h.S,{css:J.header,children:[(0,l.Y)(en,{diff:n,side:"a"}),n.binary?(0,l.Y)(X,{}):null,(0,l.Y)($.A,{color:w.LU.foregroundDimmest}),(0,l.Y)(en,{diff:n,side:"b"}),n.binary?(0,l.Y)(X,{}):null]});var t=n.pathA?"a":"b";return(0,l.FD)(h.S,{css:J.header,children:[(0,l.Y)(en,{diff:n,side:t}),n.binary?(0,l.Y)(X,{}):null]})}function en(e){var n=e.diff,t=e.side,r=A().handlePathNavigation,i="a"===t?n.pathA:n.pathB,o="a"===t?n.pathB:n.pathA;if(!i)return null;var a="";o!==i&&(a="b"===t?"is-added":"is-removed");var s=(0,l.Y)(f.EY,{className:a,css:J.headerFile,children:i});return r?(0,l.Y)(p.$n,{text:s,iconLeft:(0,l.Y)(y.A,{path:i}),onClick:function(){return r(t)},variant:"underlinedOnHover"}):(0,l.FD)(l.FK,{children:[(0,l.Y)(y.A,{path:i}),s]})}function et(e){var n=e.diff,t=e.background,r=e.compressed,i=e.maxLines,o=null===t?void 0:t||"root";if(n.binary)return(0,l.Y)(b.ui,{className:"is-binary",css:J.container,background:o,children:(0,l.Y)(f.EY,{color:"dimmest",children:"Changes can't be shown for binary files."})});if(!n.hunks.length)return(0,l.Y)(b.ui,{className:"is-no-changes",css:J.container,background:o,children:(0,l.Y)(f.EY,{color:"dimmer",children:"No additional changes"})});if(n.pathA&&n.pathB){var a=0,s=n.hunks.reduce(function(e,n){return e+n.lines.reduce(function(e,n){return e+ +("same"!==n.type)},0)},0),c=n.hunks.map(function(e){if(void 0!==i&&a>=i)return null;var t=void 0!==i?i-a:void 0;return s-=e.lines.slice(0,t).reduce(function(e,n){return e+ +("same"!==n.type)},0),a+=e.lines.length+1,(0,l.Y)(K,{hunk:e,hideHeader:r&&1===n.hunks.length,maxLines:t},a)});return(0,l.FD)(b.ui,{className:"is-modified",css:J.container,background:o,children:[c,(0,l.Y)(V,{changes:s})]})}var u=n.pathB?"b":"a",d="a"===u?"removed":"added",p=n.hunks.flatMap(function(e){return e.lines.filter(function(e){return e.type!==("a"===u?"added":"removed")}).map(function(e){return e.content})}),m=void 0!==i?p.slice(0,i):p,g=p.length-m.length;return(0,l.Y)(b.ui,{className:"is-".concat(d),css:J.container,background:o,children:(0,l.FD)(h.S,{css:J.file,children:[m.map(function(e,n){return(0,l.Y)(j,{type:d,content:e,numberA:"a"===u&&n+1,numberB:"b"===u&&n+1},n)}),g<=0?null:(0,l.Y)(V,{type:d,changes:g})]})})}var er=(0,u.x)({patch:d.wp.colWithGap(12),truncatedDiffsMessage:[d.wp.color.foregroundDimmest,d.wp.align.center,d.wp.justify.start]}),ei=/^diff --git /m;function eo(e){return{pathA:e.labelA,pathB:e.labelB,headers:[],binary:!1,hunks:e.hunks}}function ea(e){var n=e.patch,t=e.maxLines,r=e.maxDiffs,u=e.noHeader,d=e.noBorder,m=e.background,v=e.compressed,w=e.minimal,y=e.animate,b=void 0!==y&&y,S=e.onPathClick,Y=e.onViewFullDiff,A=(0,s.useMemo)(function(){return function e(n){return Array.isArray(n)?n.flatMap(function(n){return e(n)}):"string"==typeof n?ei.test(n)?(0,c.yf)(n):[eo((0,c.rj)(n))]:"headers"in n?[n]:[eo(n)]}(n)},[n]),x=(0,s.useMemo)(function(){var e=void 0!==r?Math.min(A.length,r):A.length;if(!v&&e===A.length)return A;for(var n=[],t=0;t<e;t++){var l=A[t];if(!v){n.push(l);continue}n.push((0,o._)((0,i._)({},l),{hunks:l.hunks.map(function(e){return function(e){for(var n,t,r,l,s=(0,a._)(e.lines),c=e.fromA,u=e.fromB,d=e.toA,p=e.toB;(null==(n=s[0])?void 0:n.type)==="same"&&(null==(t=s[1])?void 0:t.type)==="same";)s.shift(),c++,u++;for(;(null==(r=s[s.length-1])?void 0:r.type)==="same"&&(null==(l=s[s.length-2])?void 0:l.type)==="same";)s.pop(),d--,p--;return(0,o._)((0,i._)({},e),{fromA:c,fromB:u,toA:d,toB:p,lines:s})}(e)}).filter(function(e){return e.lines.length>0})}))}return n},[A,r,v]),C=A.length-x.length,_=1===C?"file":"files";return(0,l.FD)(h.S,{css:er.patch,children:[x.map(function(e,n){return w?(0,l.Y)(g,{diff:e,maxLines:t,animate:b},n):(0,l.Y)(Q,{diff:e,maxLines:t,noHeader:u,noBorder:d,background:m,compressed:v,onPathClick:S,onViewFullDiff:Y},n)}),C<=0?null:(0,l.Y)(h.S,{css:er.truncatedDiffsMessage,pt:4,row:!0,gap:4,children:Y?(0,l.Y)(p.$n,{text:"view in full (".concat(C," more changed ").concat(_,")"),iconLeft:(0,l.Y)(B.A,{}),onClick:function(){return Y({})},variant:"underlinedOnHover",colorway:"primary"}):(0,l.FD)(f.EY,{children:[C," other changed ",_," not shown"]})})]})}},32709:(e,n,t)=>{"use strict";t.d(n,{P:()=>xG});var r,i,o,a,l,s,c,u,d,p,f=t(88263),h=t(79730),m=t(22761),g=t(83846),v=t(12694),w=t(21462),y=t(29935),b=t(82643),S=t(54319),Y=t(60186),A=t(34834),x=t(1230),C=t(27903),_=t(47630),k=t(45263),D=t(14886),E=t(33220),R=t(17070),I=t(11882),F=t(16251),T=t(76126),P=t(59172),L=t(10429),U=t(95072),N=t(30354);function O(){var e=(0,S.C9)().agentState,n=(0,_.J2)(e);return(0,f.Y)(D.A,{headerContent:(0,f.Y)(T.EY,{children:"Agent state"}),children:(0,f.Y)(C.A,{code:JSON.stringify(n,null,2),language:"json"})})}function M(e){var n=(0,_.J2)(e.session.data);return(0,f.Y)(D.A,{headerContent:(0,f.Y)(T.EY,{children:"Session data"}),children:(0,f.Y)(C.A,{code:JSON.stringify(n,null,2),language:"json"})})}function B(e){var n=(0,_.J2)(e.session.data);return(0,f.Y)(R.nh,{id:e.session.id,label:(null==n?void 0:n.title)||"untitled"})}function H(e){var n=(0,_.J2)(e.event);return n?(0,f.Y)(L.S,{children:(0,f.Y)(D.A,{headerContent:(0,f.FD)(L.S,{row:!0,gap:8,children:[(0,f.Y)(z,{sender:n.sender.type}),(0,f.Y)(T.EY,{children:n.id}),(0,f.Y)(E.r,{textToCopy:n.id,tooltipSuccessText:"Copied to clipboard"})]}),children:(0,f.Y)(C.A,{code:JSON.stringify(n,null,2),language:"json"})})}):(0,f.Y)(L.S,{children:"No data found for event"})}function z(e){return(0,f.Y)(P.m_,{tooltip:e.sender===x.utd.AI?"Sent by AI":"Sent by user",children:(0,f.Y)(I.a,{variant:"filled",colorway:e.sender===x.utd.AI?"blurple":"green",text:e.sender===x.utd.AI?(0,f.Y)(U.A,{color:k.LU.blurpleStrongest}):(0,f.Y)(N.A,{color:k.LU.greenStrongest})})})}var W=t(86015),G=t(3752),V=t(64583),j=t(48521),Z=t(90395),q={"File context":function(){var e=(0,S.nt)(),n=(0,G.Sx)(),t=(0,(0,S.dm)().getAssistantMessageModel)({isAuthorized:!0}),r=(0,A.A)(),i=r.fs,o=r.dotReplit,a=(0,W.P)(i,o),l=(0,v._)((0,w.useState)(null),2),s=l[0],c=l[1];return(0,w.useEffect)(function(){var r=!1;function i(){return(i=(0,y._)(function(){var i;return(0,b.YH)(this,function(o){switch(o.label){case 0:return[4,a({modelType:t,filePreferences:e,recentFiles:n()})];case 1:if(i=o.sent(),r)return[2];return c(i),[2]}})})).apply(this,arguments)}return!function(){i.apply(this,arguments)}(),function(){r=!0}},[n,e,t,a]),(0,f.Y)(Y.A,{json:s})},"Session Events":function(){var e,n,t=(0,S.NC)(),r=(0,_.Rj)(function(){return t.sessions.query({types:[x.dF3.CHAT,x.dF3.REPL_CREATION_V3,x.dF3.AGENT_SESSION]}).list},[t],{default:[]}),i=(0,v._)((0,w.useState)(null!=(n=null==(e=r[0])?void 0:e.id)?n:null),2),o=i[0],a=i[1],l=(0,_.Rj)(function(){return o?t.sessions.get(o):null},[o,t]),s=(0,_.Rj)(function(){return null==l?void 0:l.transform({direction:"reverse",state:{},transformer:function(e){return e}},1e3)},[l]);return(0,f.FD)(f.FK,{children:[(0,f.Y)(O,{}),(0,f.FD)(L.S,{gap:16,children:[(0,f.Y)(F.l,{label:"Select a session",selectedKey:o,onSelectionChange:function(e){"string"==typeof e&&a(e)},children:r.map(function(e){return(0,f.Y)(B,{session:e},e.id)})}),l?(0,f.Y)(M,{session:l}):null,(0,f.Y)(L.S,{children:null==s?void 0:s.map(function(e){var n=(0,v._)(e,2),t=n[0],r=n[1];return(0,f.Y)(H,{event:r},t)})})]})]})}},K=(0,V.x)({wrapper:[j.wp.flex.growAndShrink(1),(r={},(0,g._)(r,"& > div",[j.wp.flex.growAndShrink(1),j.wp.overflowY("auto"),j.wp.colWithGap(4)]),(0,g._)(r,"& > div > div:first-of-type",[j.wp.flex.shrink(1),j.wp.overflowY("auto")]),(0,g._)(r,"& > div > div:last-of-type",[j.wp.flex.growAndShrink(1),j.wp.overflowY("auto")]),r)]}),$=t(9135),J=t(91163),Q=t(74094),X=t(86105),ee=t(17844),en=t(12584),et=t(41114),er=t(86997);function ei(){var e=(0,en._)(["\n  query AdminPanelGitView {\n    currentUser {\n      id\n      gitHubInfo {\n        accessToken\n        installations {\n          id\n          type\n          avatarUrl\n          name\n        }\n        userInfo {\n          name\n          email\n          avatarUrl\n        }\n      }\n    }\n  }\n"]);return ei=function(){return e},e}var eo={},ea=(0,et.J1)(ei()),el=t(57756),es=t(22425),ec=t(42425),eu=t(36112);function ed(e){var n=e.event,t=n.input,r=n.output,i=n.error,o=n.start,a=n.end,l=n.cached,s=(0,v._)((0,w.useState)(!0),2),c=s[0],u=s[1],d=(0,w.useCallback)(function(){return u(function(e){return!e})},[]),p="bash"===t[0]&&"-c"===t[1]?t.slice(2).join(" "):t.join(" "),h=r.trimEnd();return(0,f.FD)(L.S,{css:[(0,ec.Li)(i?"negative":"positive"),l?{opacity:.75}:void 0,j.wp.borderRadius(8)],children:[(0,f.FD)(L.S,{onClick:d,onKeyDown:function(e){("Enter"===e.key||" "===e.key)&&d()},tabIndex:0,css:[j.wp.font.code,j.wp.cursor.pointer],py:4,px:8,row:!0,gap:4,justify:"space-between",children:[(0,f.FD)("span",{css:{whiteSpace:"pre-wrap",wordBreak:"break-word"},children:["$ ",p]}),(0,f.FD)("span",{css:[j.wp.color.foregroundDimmer,j.wp.flex.shrink(0)],children:[i?(0,f.Y)("span",{css:[j.wp.mr(16)],children:i}):null,l?(0,f.Y)("span",{children:"CACHED"}):(0,f.FD)("span",{children:[a-o," ms"]})]})]}),c?null:(0,f.Y)(L.S,{css:[j.wp.borderRadius(0,0,8,8)],px:2,pb:2,children:(0,f.Y)(eu.ui,{elevated:!0,css:[j.wp.borderRadius(8)],p:8,children:(0,f.Y)(C.A,{code:h})})})]})}var ep=t(27890),ef=t(72498),eh=t(8721),em=t(35879),eg=t(9969);function ev(e){var n=e.t,t=e.children;return(0,f.FD)("span",{css:{display:"flex",alignItems:"flex-start",columnGap:"0.5rem"},children:[(0,f.FD)(T.EY,{css:{minWidth:"8em"},multiline:!1,children:[n,":"," "]}),(0,f.Y)("span",{children:t})]})}var ew=t(4880),ey=t(71618),eb=t(43056),eS=t(46603),eY=t(38292),eA=t(77089),ex=t(39328),eC=t(3694),e_=(0,V.x)({container:[j.wp.height("100%"),j.wp.position.relative],controls:[j.wp.backgroundColor.backgroundDefault]}),ek=(0,V.x)({in:[j.wp.color.greenStrongest],out:[j.wp.color.redStrongest],error:[j.wp.color.magentaStrongest]}),eD=[j.wp.flex.row,j.wp.rowWithGap(4),{"&:hover":{cursor:"pointer",".link":{textDecoration:"underline"}}}],eE=(0,V.x)({clickable:(0,X._)(eD),clickableHighlighted:(0,X._)(eD).concat([j.wp.backgroundColor.accentPositiveDimmer]),inner:[j.wp.flex.grow(1),j.wp.rowWithGap(4),j.wp.maxWidth("100%")],log:[j.wp.flex.growAndShrink(1),{opacity:.5}],row:[j.wp.my(4),j.wp.mx(4)],timestamp:[j.wp.fontSize(13),{cursor:"pointer"}]});function eR(e){var n,t=e.log,r=e.filters,i=e.timeRef,o=e.setTimeRef,a=(0,w.useMemo)(function(){return r.highlightOnly&&(0,ey.jQ)(t,r)},[r,t]),l=null!=(n=t.cmd.channel)?n:0,s=(0,w.useMemo)(function(){var e=(0,ee._)({},t.cmd);return delete e.channel,{cleaned:e,formatted:JSON.stringify(e,null,2)}},[t]),c=i?t.timestamp-i:t.timestamp,u=(0,v._)((0,ef.A)(!0),2),d=u[0],p=u[1];return(0,f.FD)(L.S,{css:eE.row,children:[(0,f.Y)(L.S,{role:"button",onClick:p,onKeyDown:p,tabIndex:0,css:a?eE.clickableHighlighted:eE.clickable,children:(0,f.FD)(L.S,{css:eE.inner,children:[(0,f.Y)(T.EY,{className:"icon",multiline:!1,children:"in"===t.dir?(0,f.Y)(L.S,{css:ek.in,children:""}):"out"===t.dir?(0,f.Y)(L.S,{css:ek.out,children:""}):(0,f.Y)(L.S,{css:ek.error,children:""})}),(0,f.Y)(T.EY,{className:"link",multiline:!1,children:(0,f.FD)("code",{children:["#",l," - ",t.channel.service,t.channel.name?"::".concat(t.channel.name):""]})}),(0,f.Y)(T.EY,{css:eE.log,multiline:!1,children:(0,f.Y)("code",{style:{overflow:"hidden",textOverflow:"ellipsis"},children:s.formatted})}),null!=c&&(0,f.Y)(L.S,{style:{opacity:.5},onClick:function(){o(t.timestamp)},children:(0,f.Y)(T.EY,{css:eE.timestamp,multiline:!1,children:t.timestamp===i?"(reference)":(0,f.FD)(f.FK,{children:[c.toFixed(0)," ms"]})})})]})}),!d&&(0,f.Y)(f.FK,{children:void 0!==s.cleaned&&(0,f.Y)(eb.U,{name:"cmd",src:s.cleaned})})]})}var eI=(0,V.x)({listContainer:[j.wp.position.relative,j.wp.height("100%")],listScroller:[j.wp.overflow("auto"),j.wp.coverContainer],listBox:[j.wp.width("100%"),j.wp.position.relative],listItem:[j.wp.position.absolute,j.wp.top(0),j.wp.left(0),j.wp.width("100%")]}),eF=(0,w.memo)(function(e){var n=e.logs,t=e.filters,r=e.timeRef,i=e.setTimeRef,o=(0,w.useRef)(null),a=(0,ew.Te)({count:n.length,getScrollElement:function(){return o.current},getItemKey:function(e){return n[e].id},estimateSize:function(){return 30},overscan:10});return(0,f.Y)("div",{css:eI.listContainer,children:(0,f.FD)("div",{ref:o,css:eI.listScroller,children:[(0,f.Y)("div",{css:eI.listBox,style:{height:"".concat(a.getTotalSize(),"px")},children:a.getVirtualItems().map(function(e){var o=e.index,l=e.key,s=e.start,c=n[o];return c?(0,f.Y)("div",{"data-index":o,ref:a.measureElement,css:eI.listItem,style:{transform:"translateY(".concat(s,"px)")},children:(0,f.Y)(eR,{log:c,filters:t,timeRef:r,setTimeRef:i})},l.toString()):null})}),(0,f.Y)("div",{className:"bottom-anchor"})]})})}),eT=function(e){var n=e.filters,t=e.updateFilters;return(0,f.FD)(L.S,{gap:4,children:[(0,f.Y)(T.EY,{variant:"subheadDefault",multiline:!1,children:"Regex (regex,flags):"}),(0,f.Y)(eA.pd,{id:"regex",onChange:function(e){var n=null;if(e.currentTarget.value){var r=(0,v._)(e.currentTarget.value.split(","),2),i=r[0],o=r[1];try{n=new RegExp(i,o)}catch(e){}}t({regexp:n})},placeholder:"\\w+,gi"}),(0,f.Y)(T.EY,{variant:"subheadDefault",multiline:!1,children:"Channel (comma separated ids, clear to reset)"}),(0,f.Y)(eA.pd,{id:"channels",onChange:function(e){t({channels:e.currentTarget.value.split(",").map(function(e){return e.trim()}).map(Number).filter(function(e){return!isNaN(e)})})},placeholder:"1,2,3"}),(0,f.Y)(T.EY,{variant:"subheadDefault",multiline:!1,children:"Directions:"}),(0,f.Y)(ex.z,{css:j.wp.rowWithGap(16),name:"direction",value:n.direction,onChange:function(e){var n=e.target.value;t({direction:"in"===n||"out"===n||""===n?n:""})},children:[{val:"",text:"Both"},{val:"in",text:"In"},{val:"out",text:"Out"}].map(function(e){return(0,f.FD)(L.S,{row:!0,gap:8,children:[(0,f.Y)(ex.s,{id:e.val,value:e.val}),(0,f.Y)("label",{htmlFor:e.val,children:e.text})]},e.val)})}),(0,f.Y)(T.EY,{variant:"subheadDefault",multiline:!1,children:"Filter style:"}),(0,f.Y)(ex.z,{css:j.wp.rowWithGap(16),name:"filter-style",value:n.highlightOnly?"highlight":"filter",onChange:function(e){return t({highlightOnly:"highlight"===e.target.value})},children:[{val:"highlight",text:"Highlight"},{val:"filter",text:"Filter"}].map(function(e){return(0,f.FD)(L.S,{row:!0,gap:8,children:[(0,f.Y)(ex.s,{id:e.val,value:e.val}),(0,f.Y)("label",{htmlFor:e.val,children:e.text})]},e.val)})})]})},eP=t(31569),eL=t(13256),eU=t(79275),eN=t(75308),eO=(0,V.x)({root:{height:"100%",overflow:"auto",padding:10,pre:{whiteSpace:"pre-wrap",wordWrap:"break-word"}},command:[j.wp.flex.shrink(1)]}),eM=t(20221),eB=t(77958),eH=t(5632),ez=t(44370),eW=t(69338),eG=(0,ez.eU)(null),eV=(0,ez.eU)(null),ej=function(){var e=(0,eW.Xr)(eG),n=(0,eW.Xr)(eV);return(0,w.useCallback)(function(t){if(!t){e(null),n(null);return}e({id:-1,connectionString:t,databaseId:-1,databaseName:"Admin Override",isFrozen:!1,isEphemeral:!1,projectId:"mock-project-id-does-not-exist",__typename:"NeonDatabase",maxComputeUnits:1,minComputeUnits:1,historyRetentionSeconds:86400,timeCreated:new Date().toString()}),n(t)},[n,e])},eZ=t(54359),eq=t(95570),eK=t(28844),e$=t.n(eK),eJ=t(6888),eQ=t(52340),eX=t(7512),e0=t(93369),e1=t(19523),e2="(click to upload dev build)",e4=(0,ez.eU)(["IDLE","pid2 running latest prod ".concat(e2)]);function e5(e,n){return e3.apply(this,arguments)}function e3(){return(e3=(0,y._)(function(e,n){var t,r,i;return(0,b.YH)(this,function(o){switch(o.label){case 0:return[4,e.exec("printenv","REPL_HOME")];case 1:if((t=o.sent()).error||!t.output)return n("IDLE","could not printenv REPL_HOME"),[2,null];return r=t.output.trim(),i=e$().join(r,".local/bin/pid2"),[2,{REPL_HOME:r,pid2BinDst:"/home/runner/bin/pid2",pid2BinDst2:i}]}})})).apply(this,arguments)}function e6(){return(e6=(0,y._)(function(e,n,t){var r,i,o,a,l,s,c,u,d,p,f,h,m,g;return(0,b.YH)(this,function(v){switch(v.label){case 0:return[4,(0,e1.EW)()];case 1:if("dev"===(o=v.sent()))return t("IDLE","dev is not a version we can upload to the container"),[2];return[4,function(e,n,t,r){return e8.apply(this,arguments)}(o,e,n,t)];case 2:return v.sent(),[4,e5(e,t)];case 3:if(!(a=v.sent()))return[2];return l=e$().join(a.REPL_HOME,".cache/replit/pid2/".concat(o)),s=e$().join(l,"pid2"),[4,e.exec("stat","-c","%N",a.pid2BinDst)];case 4:return c=v.sent(),[4,e.exec("stat","-c","%N",a.pid2BinDst2)];case 5:if(u=v.sent(),!c.error&&(null==(r=c.output)?void 0:r.includes(s))&&!u.error&&(null==(i=u.output)?void 0:i.includes(s)))return t("IDLE","pid2 version ".concat(o," already exists in container ").concat(e2)),[2];return d=e$().dirname(a.pid2BinDst),[4,e.exec("mkdir","-p",d)];case 6:if((p=v.sent()).error)throw Error("pid2: mkdir ".concat(d,": ").concat(p.error));return[4,e.exec("ln","-sf",s,a.pid2BinDst)];case 7:if((f=v.sent()).error)throw Error("pid2: link ".concat(a.pid2BinDst,": ").concat(f.error));return h=e$().dirname(a.pid2BinDst2),[4,e.exec("mkdir","-p",h)];case 8:if(v.sent().error)throw Error("pid2: mkdir ".concat(h,": ").concat(p.error));return[4,e.exec("ln","-sf",s,a.pid2BinDst2)];case 9:if(m=v.sent(),f.error)throw Error("pid2: link ".concat(a.pid2BinDst2,": ").concat(m.error));return t("RESTARTING","pid2 version ".concat(o," installed, restarting pid2")),[4,e.exec("bash","-c","kill -9 $(pidof pid2)")];case 10:return(g=v.sent()).error&&t("ERROR","pid2: couldn't kill ".concat(g.error)),t("IDLE","pid2 version ".concat(o," installed ").concat(e2)),[2]}})})).apply(this,arguments)}function e8(){return(e8=(0,y._)(function(e,n,t,r){var i,o,a,l,s,c,u,d,p,f;return(0,b.YH)(this,function(h){switch(h.label){case 0:return i=e$().join(eQ.Dl,".cache/replit/pid2/".concat(e)),o=e$().join(i,"success"),[4,t.stat(o)];case 1:if((a=h.sent()).exists&&a.type===eX.pt.File)return[2];return r("UPLOADING","pid2: uploading version ".concat(e," to container...")),[4,fetch("/pid2/bundle")];case 2:if(!(l=h.sent()).ok)throw Error("Error fetching PID2 bundle: ".concat(l.statusText));if(!l.body)throw Error("Error fetching PID2 bundle: ".concat(l));return[4,l.arrayBuffer()];case 3:return s=h.sent(),c=".cache/replit/pid2/pid2-".concat(e,".tar.gz"),[4,t.writeFile(c,eJ.A.from(s))];case 4:if((u=h.sent()).error)throw Error("pid2: writing tarball: ".concat(u.error));return[4,n.exec("mkdir","-p",i)];case 5:if((d=h.sent()).error)throw Error("pid2: mkdir: ".concat(d.error));return[4,n.exec("tar","-C",i,"-xf",c)];case 6:if((p=h.sent()).error)throw Error("pid2: untar: ".concat(p.error));return[4,t.writeFile(e$().join(i,"pid2.version"),e)];case 7:if((f=h.sent()).error)throw Error("pid2: writeVersion: ".concat(f.error));return[4,n.exec("touch",o)];case 8:return h.sent(),[4,n.exec("rm","-f",c)];case 9:return h.sent(),r("UPLOADED","pid2: ".concat(e," upload success")),[2]}})})).apply(this,arguments)}var e7=t(6598),e9=t(95570),ne=(0,V.x)({uploadMessage:[j.wp.flex.growAndShrink(1),j.wp.width("100%"),j.wp.font.code]}),nn=t(46434),nt=t(93629),nr=t(22531),ni=t(49069),no=t(86005),na=t(57547),nl=t(88726),ns=t(18918),nc=t(14047),nu=t(55315),nd=t(94626),np=t(82110),nf=t(74093);function nh(e){var n=(0,v._)((0,w.useState)(null),2),t=n[0],r=n[1],i=(0,_.J2)(e.logs),o=null!==t?i[i.length-t-1]:null,a=(0,nu.A)(),l=a.ref,s=a.view;(0,w.useEffect)(function(){s&&s.dispatch({changes:{from:0,to:s.state.doc.length,insert:o?o.data:""}})},[o,s]);var c=(0,w.useRef)(t);return(0,w.useEffect)(function(){c.current=t},[t]),(0,w.useEffect)(function(){return e.logs.subscribe(function(e){var n=c.current;(null===n||e.length-2===n)&&r(e.length-1)})},[e.logs]),(0,f.FD)(L.S,{css:nA.response,row:!0,gap:0,children:[(0,f.FD)(L.S,{css:nA.responseL,children:[(0,f.Y)(L.S,{css:nA.logHeader,align:"start",justify:"center",children:o?null==o?void 0:o.name:null}),(0,f.Y)(L.S,{css:nA.logData,children:(0,f.Y)(ns.Ay,{ref:l,language:"json",readOnly:!0})})]}),(0,f.FD)(L.S,{css:nA.responseR,children:[(0,f.Y)(L.S,{css:nA.logsHeader,children:(0,f.Y)(eS.$n,{size:"small",text:"Clear",disabled:!i.length,onClick:e.onClear})}),(0,f.Y)(L.S,{css:nA.logsList,children:i.map(function(e,n){var o=i.length-n-1;return(0,f.Y)("code",{role:"button",tabIndex:0,className:t===o?"selected":void 0,onClick:function(){r(o)},onKeyDown:function(e){"Enter"===e.key&&r(o)},children:e.name},o)})})]})]})}var nm=ni.Pe.define(),ng=ni.Pe.define(),nv=ni.Pe.define(),nw=no.Lz.theme({"&":{border:"1px solid ".concat(k.LU.outlineDefault),height:"225px"},"& .cm-panels":{backgroundColor:"unset"},"& .cm-panels.cm-panels-bottom":{borderTop:"1px solid ".concat(k.LU.outlineDefault)}}),ny=new nd.k(function(e,n){return[nw,ni.sU.define({create:function(){return null},update:function(e,n){var t=!0,r=!1,i=void 0;try{for(var o,a=n.effects[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;l.is(nm)&&(e=l.value),l.is(nv)&&(e=null)}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return e},provide:function(t){return[no.Z9.define(function(){var t,r,i=new AbortController;return{update:(t=(0,y._)(function(t){var o,a,l,s,c,u,d,p,f,h,m,g,v,w,y,S,Y,A,x,C,_,k,D,E,R,I,F,T,P,L,U,N,O,M;return(0,b.YH)(this,function(b){switch(b.label){case 0:if(!e)return[2];o=void 0,a=!0,l=!1,s=void 0;try{for(c=t.transactions[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){d=u.value,p=!0,f=!1,h=void 0;try{for(m=d.effects[Symbol.iterator]();!(p=(g=m.next()).done);p=!0){var B;(v=g.value).is(nm)&&v.value&&(o=v.value),v.is(ng)&&(null==r||r.write((B=v.value,JSON.parse(B,function(e,n){return(void 0===n?"undefined":(0,nr._)(n))==="object"&&"Uint8Array"===n.type&&void 0!==n.data?new Uint8Array(n.data):n})))),v.is(nv)&&i.abort()}}catch(e){f=!0,h=e}finally{try{p||null==m.return||m.return()}finally{if(f)throw h}}}}catch(e){l=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(l)throw s}}if(!o)return[2];switch(w=o.service,y=o.procedure,S=o.type,Y=e.client[w][y][S],A=void 0,x=1,o.type){case"rpc":return[3,1];case"stream":return[3,3];case"subscribe":return[3,5];case"upload":return[3,7]}return[3,9];case 1:case 5:return[4,Y(o.input,{signal:i.signal})];case 2:return C=b.sent(),n({name:"".concat(w,".").concat(y,".").concat(S,".").concat(x),data:nb(C)}),t.view.dispatch({effects:nv.of(null)}),[3,9];case 3:return[4,Y(null!=(_=o.input)?_:void 0,{signal:i.signal})];case 4:return D=(k=b.sent()).reqWritable,E=k.resReadable,r=D,A=E,[3,9];case 6:return A=b.sent().resReadable,[3,9];case 7:return[4,Y(null!=(R=o.input)?R:void 0,{signal:i.signal})];case 8:return F=(I=b.sent()).reqWritable,I.finalize,r=F,[3,9];case 9:if(!A)return[3,22];T=!1,P=!1,b.label=10;case 10:b.trys.push([10,15,16,21]),U=(0,nn._)(A),b.label=11;case 11:return[4,U.next()];case 12:if(!(T=!(N=b.sent()).done))return[3,14];O=N.value,n({name:"".concat(w,".").concat(y,".").concat(S,".").concat(x),data:nb(O)}),x++,b.label=13;case 13:return T=!1,[3,11];case 14:return[3,21];case 15:return M=b.sent(),P=!0,L=M,[3,21];case 16:if(b.trys.push([16,,19,20]),!(T&&null!=U.return))return[3,18];return[4,U.return()];case 17:b.sent(),b.label=18;case 18:return[3,20];case 19:if(P)throw L;return[7];case 20:return[7];case 21:t.view.dispatch({effects:nv.of(null)}),b.label=22;case 22:return[2]}})}),function(e){return t.apply(this,arguments)})}}),no.Lz.editable.from(t,function(e){return(null==e?void 0:e.type)!=="rpc"&&(null==e?void 0:e.type)!=="subscribe"}),nl.x.compute([t,"doc"],function(e){var n,r;return e.doc.length?null:(null==(n=e.field(t))?void 0:n.type)==="stream"||(null==(r=e.field(t))?void 0:r.type)==="upload"?{from:0,insert:"{\n   # ... input data\n}"}:{from:0,insert:'{\n  "service_name": {\n    "procedure_name": {\n      "rpc" | "stream" | "subscribe" | "upload": {\n        # ... init/input data\n      }\n    }\n  }\n}'}}),no.w4.of([{key:"Tab",run:function(e){var n;return!e.state.doc.length&&(e.dispatch({changes:null!=(n=e.state.facet(nl.x)[0])?n:void 0}),!0)}}]),no.S7.of(function(n){var r=function(){if(e){var t=nY(n.state.doc.toString());if(t){var r=t.type,i=t.service,o=t.procedure,a=t.input;r&&i&&o&&n.dispatch({effects:nm.of({type:r,service:i,procedure:o,input:a}),changes:"stream"===r||"upload"===r?{from:0,to:n.state.doc.length,insert:""}:void 0})}}},i=function(){n.dispatch({effects:ng.of(n.state.doc.toString()),changes:{from:0,to:n.state.doc.length,insert:""}})},o=function(){var r,i=n.state.field(t),o=new Set,a=n.state.doc.toString();return e&&i&&"rpc"!==i.type&&(o.add("Close"),("stream"===i.type||"upload"===i.type)&&a.startsWith("{")&&a.endsWith("}")&&o.add("Send")),e&&!i&&a.length&&(o.add("Clear"),(null==(r=nY(a))?void 0:r.type)&&o.add("Send")),o},a=nC.create({enabled:o(),onSend:function(){null==n.state.field(t)?r():i(),n.focus()},onClose:function(){n.dispatch({effects:[nv.of(null),nm.of(null)],changes:{from:0,to:n.state.doc.length,insert:""}})},onClear:function(){n.dispatch({changes:{from:0,to:n.state.doc.length,insert:""}}),n.focus()}});return{dom:a,top:!1,update:function(e){if((0,na.$H)(e,t,"doc")){var n=e.state.field(t);nC.update(a,function(e){return(0,nt._)((0,ee._)({},e),{enabled:o(),inProgress:n?"".concat(n.type,": ").concat(n.service,".").concat(n.procedure):void 0})})}}}})]}})]});function nb(e){return JSON.stringify(e,function(e,n){return n instanceof Uint8Array?Array.from(n):n},2)}var nS=["rpc","stream","subscribe","upload"];function nY(e){try{n=JSON.parse(e)}catch(e){return null}var n,t=0,r=null,i=null,o=null;try{for(;t<3;){var a=Object.keys(n)[0];if(void 0===a)throw Error("expected key");if(0===t&&(r=a),1===t&&(i=a),2===t)if(nS.includes(a))o=a;else throw Error("expected procedure type");n=n[a],t++}return{type:o,service:r,procedure:i,input:n}}catch(e){return{type:o,service:r,procedure:i,input:null}}}var nA=(0,V.x)({response:[j.wp.flex.growAndShrink(1),j.wp.border({width:1,color:k.LU.outlineDefault}),{marginTop:"4px"}],logHeader:[j.wp.height("37px"),j.wp.display.flex,j.wp.p(4),j.wp.border({width:1,color:k.LU.outlineDefault,direction:"bottom"})],logData:[j.wp.display.block,j.wp.flex.growAndShrink(1),{overflowY:"auto"}],logsHeader:[j.wp.display.flex,j.wp.align.end,j.wp.p(4),j.wp.border({width:1,color:k.LU.outlineDefault,direction:"bottom"})],logsList:[j.wp.display.block,j.wp.flex.growAndShrink(1),{overflowY:"auto"}],responseL:[j.wp.display.flex,j.wp.flex.growAndShrink(1),{overflowY:"auto"}],responseR:[j.wp.display.flex,j.wp.border({width:1,color:k.LU.outlineDefault,direction:"left"}),j.wp.width("40%"),j.wp.maxWidth("250px"),{overflowY:"auto","& code":{display:"block",cursor:"pointer",padding:"4px",borderBottom:"1px solid ".concat(k.LU.outlineDimmer),overflowX:"hidden",textOverflow:"ellipsis"},"& code.selected":{backgroundColor:k.LU.accentPrimaryDimmer},"& code:last-of-type":{borderBottom:"unset"}}]}),nx=["Send","Close","Clear"],nC=new nc.E(function(e){return(0,f.FD)(L.S,{children:[(0,f.Y)(L.S,{p:4,pb:0,children:(0,f.FD)(T.EY,{variant:"small",color:"dimmer",children:["Status:"," ",e.inProgress?(0,f.FD)(f.FK,{children:["In progress - ",e.inProgress]}):null]})}),(0,f.Y)(L.S,{p:4,row:!0,gap:4,children:Object.values(nx).map(function(n){return(0,f.Y)(eS.$n,{size:"small",disabled:!e.enabled.has(n),text:n,onClick:function(){switch(n){case"Send":e.onSend();break;case"Close":e.onClose();break;case"Clear":e.onClear()}}},n)})})]})});function n_(){var e=(0,en._)(["\n  fragment AdminPanelRepl on Repl {\n    id\n    title\n    description\n    isPrivate\n    timeCreated\n    timeUpdated\n    slug\n    url\n    language\n    user {\n      id\n    }\n    config {\n      isServer\n      isVnc\n      isAgentRepl\n    }\n    isRenamed\n    folderId\n    isOwner\n    origin {\n      id\n    }\n    source {\n      release {\n        id\n        repl {\n          id\n          url\n          templateLabel\n        }\n      }\n    }\n  }\n"]);return n_=function(){return e},e}function nk(){var e=(0,en._)(["\n  query AdminPanelReplView($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        ...AdminPanelRepl\n      }\n    }\n  }\n  ","\n"]);return nk=function(){return e},e}var nD={},nE=(0,et.J1)(n_()),nR=(0,et.J1)(nk(),nE),nI=t(31062),nF=t(79209),nT=t(18138),nP=(0,nF.AH)([j.wp.colWithGap(16),j.wp.p(4),{pre:{whiteSpace:"pre-wrap",wordWrap:"break-word"}}]),nL=t(53811),nU=t(67201),nN=t(36640),nO=t(34626),nM=t(29e3),nB=t(96556),nH=t(70548);function nz(e){var n=e.sessionId,t=(0,v._)((0,w.useState)(!1),2),r=t[0],i=t[1],o=(0,v._)((0,w.useState)(""),2),a=o[0],l=o[1],s=(0,v._)((0,w.useState)(!1),2),c=s[0],u=s[1],d=(0,nN.A)().showConfirm,p=(0,nB.c)();return null==n?(0,f.Y)(L.S,{children:(0,f.Y)(T.EY,{multiline:!1,children:"Something went wrong... no RUM session found... Try refreshing the page"})}):(0,f.FD)(L.S,{gap:8,children:[(0,f.FD)(T.EY,{variant:"small",multiline:!1,children:["RUM Session ID: ",n]}),(0,f.Y)(T.EY,{variant:"headerDefault",multiline:!1,children:"Submit an Issue"}),(0,f.FD)(L.S,{gap:16,children:[(0,f.Y)(eA.ov,{id:p("message"),placeholder:"What can we do better?",value:a,onChange:function(e){return l(e.target.value)},disabled:r}),(0,f.FD)(L.S,{row:!0,gap:8,children:[(0,f.Y)(nH.S,{id:p("issueInRecording"),checked:c,onChange:function(e){return u(e)}}),(0,f.Y)("label",{htmlFor:p("issueInRecording"),children:(0,f.Y)(T.EY,{multiline:!1,children:"Issue is demoed in recording"})})]}),(0,f.Y)(eS.$n,{onClick:function(){var e=(0,nU.A)();i(!0),(0,nO.yH)({name:"replitOnReplit:issue",context:{message:a,issueInRecording:c,customEventId:e}}),d("Issue submitted! Have a cookie \uD83C\uDF6A",5e3),setTimeout(function(){i(!1),l(""),u(!1)},5e3)},text:"Submit",disabled:r||0===a.trim().length,colorway:"primary"})]})]})}var nW=t(3218),nG=t(69665),nV=t(14893),nj=(0,V.x)({noWorkflow:[j.wp.flex.growAndShrink(1)]}),nZ=function(e){return e.Repl="repl",e.Pid2="pid2",e.Pid2Repl="pid2Repl",e.MuxedShell="pid2MuxedShell",e.Logs="logs",e.LSP="lsp",e.AI="ai",e.GhostwriterChat="aiChat",e.Git="git",e.History2="history2",e.Metadata="metadata",e.Override="override",e.DDRum="rum",e.CommandBar="commandBar",e.Workflows="workflows",e.TriggerBSOD="triggerBSOD",e}(nZ||{}),nq=(i={},(0,g._)(i,"repl",function(){var e,n,t,r,i,o,a,l,s,c,u=(0,nI.A)(),d=(e={variables:{replId:u}},n=(0,ee._)({},nD,e),er.I(nR,n)).data,p=(null==d?void 0:d.getRepl.__typename)==="Repl"?JSON.parse(JSON.stringify(d.getRepl)):void 0;return p&&(delete p.__typename,null==(t=p.user)||delete t.__typename,null==(r=p.origin)||delete r.__typename,delete p.config.__typename,null==(i=p.source)||delete i.__typename,null==(a=p.source)||null==(o=a.release)||delete o.__typename,null==(c=p.source)||null==(s=c.release)||null==(l=s.repl)||delete l.__typename),(0,f.FD)(L.S,{css:nP,children:[(0,f.Y)(nT.A,{replId:u}),(0,f.Y)("div",{children:p?(0,f.Y)(Y.A,{json:p}):null})]})}),(0,g._)(i,"pid2",function(){var e,n,t,r,i,o,a,l,s,c,u,d=(0,A.A)().container,p=null==(c=d.getContext())?void 0:c.repl,h=(0,e1.yB)(),m=(0,v._)((0,w.useState)("unknown"),2),g=m[0],S=m[1],Y=(0,v._)((0,w.useState)(null),2),x=Y[0],C=Y[1],_=(0,v._)((0,w.useState)(null),2),k=_[0],D=_[1],E=(0,v._)((0,w.useState)(null),2),R=E[0],I=E[1],F=(t=(n=(0,A.A)()).fs,i=null==(e=(r=n.container).getContext())?void 0:e.repl,o=(0,eW.Xr)(e4),l=(a=(0,v._)((0,eW.md)(e4),2))[0],a[1],s=(0,e0.A)(l),(0,w.useCallback)((0,y._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:if(!i||"IDLE"!==s.current&&"ERROR"!==s.current)return[2];return o(["STARTING","starting pid2 upload process"]),[4,function(e,n,t){return e6.apply(this,arguments)}(r,t,function(e,n){o([e,n])})];case 1:return e.sent(),[2]}})}),[s,i,o,r,t])),P=(0,v._)((0,eW.md)(e4),2),U=P[0],N=P[1],O=(0,e7.I)(function(e){return(0,y._)(function(){var n,t,r;return(0,b.YH)(this,function(i){switch(i.label){case 0:return S("loading"),n=setTimeout(function(){S("unhealthy")},5e3),[4,e5(d,C)];case 1:if(!(t=i.sent()))return S("unhealthy"),[2];return[4,d.exec("stat","-c","%N",t.pid2BinDst2)];case 2:return(r=i.sent()).error?C("LocalPid2 not installed: ".concat(r.output)):C("LocalPid2 installed: ".concat(r.output)),e.healthCheck.ping.rpc({}).then(function(e){D(e.payload),clearTimeout(n),e.ok?S("ok"):S("unhealthy")}).catch(function(){clearTimeout(n),S("unhealthy")}),[2]}})})});return u="ok"===g?"green":"unhealthy"===g?"red":"grey",(0,f.FD)(L.S,{pt:16,px:12,gap:12,children:[(0,f.FD)(T.Y9,{level:3,children:["Is pid2 enabled? ",h?"Yes":"No"]}),(0,f.Y)(eS.$n,{text:"Ping pid2 (state: ".concat(g,")"),colorway:u,disabled:!O,onClick:function(){null==O||O()}}),k?(0,f.Y)("code",{children:JSON.stringify(k,null,2)}):null,x?(0,f.Y)("code",{children:x}):null,(0,f.Y)(eS.$n,{colorway:"purple",text:"Upload pid2 to Repl",onClick:(0,y._)(function(){return(0,b.YH)(this,function(e){return p&&F(),[2]})})}),(0,f.FD)(T.EY,{css:ne.uploadMessage,children:["[",U,"] ",N]}),(0,f.Y)(eS.$n,{colorway:"red",text:"Delete uploaded pid2",onClick:(0,y._)(function(){var e,n,t;return(0,b.YH)(this,function(r){switch(r.label){case 0:if(!p)return[2];return[4,e5(d,I)];case 1:if(!(e=r.sent()))return[2];return[4,d.exec("rm","-f",e.pid2BinDst)];case 2:return n=r.sent(),[4,d.exec("rm","-f",e.pid2BinDst2)];case 3:if(t=r.sent(),n.error)return I("".concat(n.error,": ").concat(n.output)),[2];if(t.error)return I("".concat(t.error,": ").concat(t.output)),[2];return I("uploaded pid2 deleted"),[2]}})})}),R?(0,f.Y)(T.EY,{css:ne.uploadMessage,children:R}):null,(0,f.Y)(eS.$n,{text:"Assign pid2 client to window for testing",onClick:function(){window.pid2=h,e9.log("window.pid2: ",h)}})]})}),(0,g._)(i,"pid2Repl",function(){var e=(0,v._)((0,w.useState)(function(){return new np.N([])}),1)[0],n=(0,w.useCallback)(function(n){return e.update(function(e){return[n].concat((0,X._)(e))})},[e]),t=(0,v._)((0,w.useState)(null),2),r=t[0],i=t[1];(0,nf.b)(function(e){return i({client:e}),function(){return i(null)}},[]);var o=ny.use(r,n);return(0,f.FD)(f.FK,{children:[(0,f.Y)(ns.Ay,{language:"json",hideGutter:!0,extensions:o}),(0,f.Y)(nh,{logs:e,onClear:function(){return e.set([])}})]})}),(0,g._)(i,"pid2MuxedShell",function(){var e,n=(0,v._)((0,w.useState)([]),2),t=n[0],r=n[1];return(0,nf.b)((e=(0,y._)(function(e,n){var t,i,o,a,l,s,c,u,d;return(0,b.YH)(this,function(p){switch(p.label){case 0:t=n.signal,i=e.shellExec.monitorAll.subscribe({},{signal:t}).resReadable,o=!1,a=!1,p.label=1;case 1:p.trys.push([1,6,7,12]),s=(0,nn._)(i),p.label=2;case 2:return[4,s.next()];case 3:if(!(o=!(c=p.sent()).done))return[3,5];if(!(u=c.value).ok)return[2];r(u.payload.processes),p.label=4;case 4:return o=!1,[3,2];case 5:return[3,12];case 6:return d=p.sent(),a=!0,l=d,[3,12];case 7:if(p.trys.push([7,,10,11]),!(o&&null!=s.return))return[3,9];return[4,s.return()];case 8:p.sent(),p.label=9;case 9:return[3,11];case 10:if(a)throw l;return[7];case 11:return[7];case 12:return[2]}})}),function(n,t){return e.apply(this,arguments)}),[]),(0,f.Y)(L.S,{children:(0,f.Y)(Y.A,{json:t})})}),(0,g._)(i,"logs",function(e){var n=e.isHidden,t=(0,v._)((0,ef.A)(!1),2),r=t[0],i=t[1],o=(0,v._)((0,w.useState)(null),2),a=o[0],l=o[1],s=(0,ey.jg)(),c=(0,ey.lY)(),u=(0,ey.x6)(),d=(0,ey.R7)(),p=(0,ey.G2)(),h=(0,ey.ou)();return n?null:(0,f.FD)(L.S,{css:e_.container,gap:8,children:[(0,f.FD)(L.S,{css:e_.controls,px:4,pb:8,gap:8,children:[(0,f.Y)(eS.$n,{colorway:c?void 0:"positive",onClick:u,text:c?"Stop logging goval":"Start logging goval"}),(0,f.FD)(L.S,{row:!0,gap:4,justify:"space-between",children:[(0,f.Y)(eS.$n,{onClick:i,text:r?"Hide filters":"Show filters"}),a?(0,f.Y)(eS.$n,{onClick:function(){return l(null)},text:"Reset Time Ref"}):null,(0,f.Y)(eY.K0,{alt:"Download as JSON",onClick:function(){var e="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(s)),n=document.createElement("a");n.setAttribute("href",e);var t=new Date().toISOString();n.setAttribute("download","logs-".concat(t.slice(0,t.indexOf(".")).replaceAll("-","").replaceAll(":",""),".json")),n.click()},size:32,children:(0,f.Y)(eC.A,{})}),(0,f.Y)(eS.$n,{colorway:"negative",onClick:function(){return h()},text:"Clear logs"})]}),r?(0,f.Y)(eT,{filters:d,updateFilters:function(e){p((0,ee._)({},d,e))}}):null]}),(0,f.Y)(eF,{logs:s,filters:d,timeRef:a,setTimeRef:l})]})}),(0,g._)(i,"lsp",eb.O),(0,g._)(i,"ai",Q.uG),(0,g._)(i,"aiChat",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.isHidden,t=e.performPaneOperation;return n?null:(0,f.Y)(L.S,{css:K.wrapper,children:(0,f.FD)(Z.tU,{children:[(0,f.Y)(Z.wb,{"aria-label":"Tabs",children:Object.keys(q).map(function(e){return(0,f.Y)(Z.oz,{children:e},e)})}),(0,f.Y)(Z.T2,{children:Object.entries(q).map(function(e){var n=(0,v._)(e,2),r=n[0],i=n[1];return(0,f.Y)(Z.Kp,{children:(0,f.Y)(i,{performPaneOperation:t})},r)})})]})})}),(0,g._)(i,"git",function(){var e,n=(0,v._)((0,w.useState)([]),2),t=n[0],r=n[1],i=(e=(0,ee._)({},eo,void 0),er.I(ea,e)).data,o=(0,el.A)(es.Y);return(0,w.useEffect)(function(){o&&r(function(e){return e.length&&e[0].key===o.key?e:[o].concat((0,X._)(e)).slice(0,100)})},[o]),(0,f.FD)(L.S,{p:8,children:[(0,f.FD)(eu.ui,{elevated:!0,css:[j.wp.borderRadius(8),j.wp.p(8),j.wp.mb(8)],children:[(0,f.Y)("span",{children:"Git Service Connection Info"}),(0,f.Y)("pre",{children:(null==i?void 0:i.currentUser)?JSON.stringify(i,function(e,n){return"accessToken"===e?"censored":n},2):"No gitHubInfo"})]}),(0,f.Y)(L.S,{gap:4,children:t.length?t.map(function(e){return(0,f.Y)(ed,{event:e},e.key)}):"No events yet..."})]})}),(0,g._)(i,"history2",function(){var e=(0,el.A)(eh.pX)(),n=(0,el.A)(eh.aP)(),t=(0,v._)((0,ef.A)(!1),2),r=t[0],i=t[1];if(!e)return null;var o=e.filePath,a=e.changes,l=e.users,s=e.version,c=e.playing,u=e.count,d=a[s];if(!d)return(0,f.FD)(L.S,{children:[(0,f.FD)("div",{children:["Change at ",s," not found. Here's the state"]}),(0,f.Y)("pre",{children:JSON.stringify(e,null,2)})]});var p=null==l?void 0:l[d.userId],h=d.timestamp,m=r&&n?function(e,n){try{return(0,ep.$1)(e,n).op}catch(e){return e}}(d.changes,n.state.doc.sliceString(0)):null;return(0,f.FD)(L.S,{gap:16,p:4,children:[(0,f.FD)(L.S,{gap:4,children:[(0,f.Y)(ev,{t:"File",children:(0,f.Y)("pre",{children:o})}),(0,f.FD)(ev,{t:"Version",children:[s," / ",u-1]}),(0,f.Y)(ev,{t:"Playing",children:(0,f.Y)(em.R,{children:c?"true":"false"})}),(0,f.Y)(ev,{t:"Date",children:(0,f.Y)(eg.Dc,{date:h})})]}),p?(0,f.FD)(L.S,{children:[(0,f.Y)(ev,{t:"Author",children:p.username}),(0,f.FD)(L.S,{pl:8,gap:4,children:[(0,f.Y)(ev,{t:"ID",children:p.id}),(0,f.Y)(ev,{t:"Name",children:p.username}),(0,f.Y)(ev,{t:"Image",children:(0,f.Y)("a",{href:p.image,children:p.image})})]})]}):null,(0,f.Y)(J.d,{isSelected:r,onChange:i,children:"Changes"}),d?null:"No changes",r&&d?(0,f.Y)(f.FK,{children:(0,f.FD)(L.S,{children:[(0,f.Y)(ev,{t:"Changeset",children:(0,f.Y)("pre",{children:JSON.stringify(d,null,2)})}),n?(0,f.Y)(f.FK,{children:(0,f.FD)(L.S,{css:[j.wp.mt(4)],children:[(0,f.Y)(ev,{t:"OT",children:(0,f.Y)("pre",{children:JSON.stringify(m,null,2)})}),(0,f.Y)("p",{children:(0,f.FD)("small",{children:["Note that the OT value is translated ",(0,f.Y)("em",{children:"back"})," to an operational transformation from the CodeMirror changeset."]})})]})}):null]})}):null]})}),(0,g._)(i,"metadata",function(){var e=(0,A.A)().container;(0,eU.A)(e);var n=e.getConnectionMetadata();if(!n)return(0,f.Y)("div",{children:"no token yet, wait for connection"});var t=n.token,r=new URL(n.conmanURL).host,i='./conman-repl -t "'.concat(t,'" -u ').concat(r);return(0,f.FD)("div",{css:eO.root,children:[(0,f.FD)(L.S,{row:!0,gap:2,children:[(0,f.FD)(T.EY,{css:eO.command,multiline:!1,children:["conman Repl command: ",(0,f.Y)(em.R,{children:i})]}),(0,f.Y)(eY.K0,{alt:"Copy to clipboard",onClick:function(){return(0,eP.default)(i)},children:(0,f.Y)(eN.A,{})})]}),(0,f.FD)("div",{children:["metadata:",(0,f.Y)("pre",{children:JSON.stringify(n,null,2)})]}),(0,f.Y)("br",{}),(0,f.Y)("br",{}),(0,f.FD)("div",{children:["parsed token:",(0,f.Y)("pre",{children:JSON.stringify((0,eL.pI)(n.token),null,2)})]}),(0,f.Y)("br",{}),(0,f.Y)("br",{})]})}),(0,g._)(i,"override",function(){var e=(0,v._)((0,w.useState)(eB.A.get("gurl","string")||""),2),n=e[0],t=e[1],r=(0,v._)((0,w.useState)(""),2),i=r[0],o=r[1],a=ej(),l=(0,eM.RL)(),s=""===n?"null":JSON.stringify((0,eH.x)(n),null,2);return(0,f.FD)(L.S,{pt:16,px:12,gap:12,children:[(0,f.FD)(L.S,{gap:12,children:[(0,f.Y)(eZ.A,{label:"Custom gurl",placeholder:"ws://localhost:".concat(4560),value:n,onChange:function(e){return t(e.currentTarget.value)}}),(0,f.FD)("pre",{children:["metadata override preview:",s]}),(0,f.FD)(L.S,{row:!0,gap:12,children:[(0,f.Y)(eS.$n,{colorway:"positive",onClick:function(){eB.A.set("gurl",n),window.location.reload()},text:"Set gurl and reload"}),(0,f.Y)(eS.$n,{colorway:"yellow",onClick:function(){eB.A.set("gurl","wss://eval.canary.replit.com"),window.location.reload()},text:"Switch to canary & reload"}),(0,f.Y)(eS.$n,{colorway:"orange",onClick:function(){eB.A.remove("gurl"),window.location.reload()},text:"Unset gurl and reload"}),(0,f.Y)(eS.$n,{colorway:"red",onClick:function(){eB.A.set("gurl","ws://localhost:4560"),window.location.reload()},text:"Switch to localhost & reload"})]}),(0,f.Y)("div",{children:eB.A.get("gurl","string")?"currently in localStorage: ".concat(eB.A.get("gurl","string")):'No gurl set in local storage, using default gurl for this user, check "Token" tab for details'}),(0,f.Y)("p",{children:"Gurl order of precedence:"}),(0,f.FD)("ol",{style:{margin:12},children:[(0,f.Y)("li",{children:"gurl in localStorage (set above)"}),(0,f.FD)("li",{children:["If in development webapp and a theres a response from",(0,f.Y)("code",{children:"https://localhost:4563"})," or",(0,f.FD)("code",{children:["http://localhost:",4560]}),", then it will use that."]}),(0,f.FD)("li",{children:["default is ",(0,f.Y)("code",{children:"wss://eval.<usercluster>.replit.com"})]})]})]}),(0,f.Y)("hr",{css:[j.wp.my(16),{borderColor:k.LU.outlineDefault}]}),(0,f.FD)(L.S,{gap:12,children:[(0,f.Y)(T.EY,{multiline:!1,children:"Override Database"}),(0,f.Y)(eZ.A,{type:"text",value:i,onChange:function(e){o(e.target.value)}}),(0,f.Y)(L.S,{row:!0,gap:8,children:(0,f.Y)(eS.$n,{colorway:"positive",onClick:function(){a(i)},text:"Override Postgres connection string"})})]}),(0,f.Y)(eS.$n,{onClick:function(){window.ldClient=l,eq.log("window.ldClient: ",l)},text:"Assign LD client to window for testing"})]})}),(0,g._)(i,"rum",function(){var e,n=null==(e=nL.L.getInternalContext())?void 0:e.session_id,t=nL.L.getInitConfiguration(),r=null!=t&&100===t.sampleRate,i=(0,v._)((0,w.useState)(null!=n),2),o=i[0],a=i[1];return(0,f.Y)(L.S,{gap:16,p:4,children:r?(0,f.FD)(f.FK,{children:[(0,f.Y)(eS.$n,{onClick:o?function(){nL.L.stopSessionReplayRecording(),document.cookie="_dd_s=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",window.location.href=window.location.href.split("?")[0]}:function(){(0,nO.mC)({name:"replitOnReplit"}),setTimeout(function(){a(!0)},1e3)},text:o?"\uD83D\uDD34 Recording... Click to stop and reload page":"Start Recording",colorway:o?void 0:"primary",css:(0,ee._)({},o&&nM.S.backgroundPulse(k.LU.redDimmest,k.LU.redDimmer))}),o?(0,f.Y)(nz,{sessionId:n}):null]}):(0,f.Y)(eS.$n,{onClick:function(){window.location.href=window.location.href.split("?")[0].split("#")[0]+"?rum=1"},text:"Click to reload and start recording",colorway:"primary"})})}),(0,g._)(i,"commandBar",function(){var e=(0,$.H)(),n=(0,$.D)();return(0,f.Y)(L.S,{py:8,px:12,gap:12,children:(0,f.Y)(J.d,{isSelected:e,onChange:n,children:"Show match scores in Command Bar"})})}),(0,g._)(i,"workflows",function(){var e=(0,v._)((0,w.useState)([]),2),n=e[0],t=e[1],r=(0,v._)((0,w.useState)(void 0),2),i=r[0],o=r[1],a=(0,nV.OK)(),l=(0,nV.mP)(),s=(0,nV.If)();(0,w.useEffect)(function(){var e,n,r=null!=(n=null==l?void 0:l.map(function(e){return{id:e.name}}))?n:[];t(r),o(null==(e=r[0])?void 0:e.id)},[l]);var c=(0,e7.I)(function(e){return function(n){var t=n.workflowId;return e.workflows.runWorkflow.rpc({workflowId:t})}},[]),u=(0,e7.I)(function(e){return function(n){var t=n.runId;e.workflows.stopRun.rpc({runId:t})}},[]);return(0,f.FD)(L.S,{p:4,children:[(0,f.FD)(L.S,{children:[i?(0,f.Y)(F.l,{"aria-label":"Workflow",onSelectionChange:function(e){o(e)},selectedKey:i,items:n,children:function(e){return(0,f.Y)(R.nh,{label:e.id},e.id)}}):(0,f.Y)(L.S,{row:!0,align:"center",justify:"center",css:nj.noWorkflow,p:4,children:(0,f.Y)(T.EY,{children:"No workflow selected"})}),(0,f.Y)(eS.$n,{onClick:(0,y._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:if(!i||!c)return[2];return[4,c({workflowId:i})];case 1:return e.sent(),[2]}})}),text:"Run",disabled:!i})]}),s?(0,f.Y)(L.S,{children:Object.entries(s).map(function(e){var n=(0,v._)(e,2),t=n[0],r=n[1];return(0,f.FD)(L.S,{row:!0,gap:4,align:"center",children:[t," step: ",r.step,r.step===nG.zY.RUNNING?(0,f.Y)(eS.$n,{text:"Stop",onClick:function(){null==u||u({runId:t})}}):null]},t)})}):null,(0,f.FD)(L.S,{children:[(0,f.Y)(T.EY,{children:"Run State"}),(0,f.Y)(Y.A,{json:s})]}),(0,f.FD)(L.S,{children:[(0,f.Y)(T.EY,{children:"Config"}),(0,f.Y)(Y.A,{json:a})]})]})}),(0,g._)(i,"triggerBSOD",function(){var e=(0,nW.iO)();return(0,f.Y)(L.S,{gap:16,children:(0,f.Y)(eS.$n,{text:"Throw BSOD",onClick:function(){return e({error:Error("[DEBUG] TriggerBSOD"),origin:"debug: Debug"})}})})}),i),nK=Object.values(nZ),n$=(0,V.x)({surface:[j.wp.height("100%")],tabs:[{flexWrap:"wrap",flexDirection:"row",gap:"4px"}],tab:[j.wp.flex.growAndShrink(1),j.wp.overflow("auto")],content:[j.wp.flex.growAndShrink(1),j.wp.height("100%")]});function nJ(e){var n=e.paneOptions,t=(0,v._)((0,w.useState)("repl"),2),r=t[0],i=t[1],o=nK.map(function(e){return(0,f.Y)(eS.$n,{colorway:e===r?"primary":void 0,onClick:function(){return i(e)},text:e},e)});return(0,f.FD)(eu.ui,{background:"default",css:n$.surface,p:4,gap:8,children:[(0,f.Y)(L.S,{css:n$.tabs,children:o}),(0,f.Y)(L.S,{css:n$.tab,children:Object.entries(nq).map(function(e){var t=(0,v._)(e,2),i=t[0],o=t[1];return(0,f.Y)(L.S,{css:n$.content,style:{display:i!==r?"none":"inherit"},children:"override"===i&&"override"!==r?null:(0,f.Y)(o,{isHidden:n.isHidden||r!==i,performPaneOperation:n.performPaneOperation})},i)})})]})}var nQ=t(58370),nX=t(78184),n0=t(71117),n1=h.ZU.Object({type:h.ZU.Literal("adminPanel")}),n2={Content:function(e){var n=e.options;return(0,f.Y)(nJ,{paneOptions:n})},Icon:function(e){var n=e.size;return(0,f.Y)(n0.Vx.Provider,{value:{color:k.LU.redStronger,size:n},children:(0,f.Y)(nX.A,{})})},getTitle:function(){return"Debug"},getTitlePill:function(){return{text:"Staff-only",colorway:"warning"}},description:"Replit developer debugging tools",category:nQ.bY.Other,decode:function(e){return m.T(n1,e)}},n4=t(20828),n5=t(38633),n3=t(53463),n6=t(75915),n8=(0,V.x)({container:[j.wp.coverContainer,j.wp.py(4),j.wp.px(8)]});function n7(e){var n=e.performPaneOperation,t=(0,A.A)().fs,r="cmdOrCtrlKey"===(0,n4.g)("multiselectModifierKey").preferences.multiselectModifierKey?"cmdOrCtrlKey":"altKey",i=(0,n6.J)(!0),o=(0,w.useCallback)(function(e){return!i(e.filename)},[i]),a=(0,n3.u)({fs:t,filter:o,multiselectModifierKey:r,readOnly:!0,fontSize:13,manageWidth:!0,onFileSelect:function(e){var t=e.path;n({operation:"replace",pane:(0,n5.af)(t)})}});return(0,f.Y)(L.S,{css:n8.container,children:(0,f.Y)(n3.J,{store:a.store})})}var n9=t(24120),te=h.ZU.Object({type:h.ZU.Literal("agentFiles")}),tn={Content:function(e){return(0,f.Y)(n7,{performPaneOperation:e.options.performPaneOperation})},Icon:function(e){var n=e.size;return(0,f.Y)(n0.Vx.Provider,{value:{color:k.LU.blurpleStrongest,size:n},children:(0,f.Y)(n9.A,{})})},getTitle:function(){return"Files"},category:nQ.bY.WorkspaceFeatures,decode:function(e){return m.T(te,e)}},tt=t(83150),tr=t(9414),ti=t(33999),to=t(80762),ta=(0,V.x)({text:{width:"100%",textAlign:"center"},loaderContainer:[j.wp.display.flex,j.wp.center,j.wp.height("100%")]}),tl=h.ZU.Object({type:h.ZU.Literal("binary"),data:h.ZU.Object({path:h.ZU.String()})}),ts={Content:function(e){var n=e.pane,t=e.options;return(0,f.Y)(tc,{path:n.data.path,performPaneOperation:t.performPaneOperation})},Icon:function(e){var n=e.pane,t=e.size;return(0,f.Y)(ti.A,{path:n.data.path,size:t})},getTitle:function(e){return(0,tt.WP)(e.data.path)},category:nQ.bY.WorkspaceFeatures,decode:function(e){return m.T(tl,e)}};function tc(e){var n=e.path,t=e.performPaneOperation,r=(0,A.A)().fs,i=(0,n5.KA)({path:n,performPaneOperation:t});(0,tr.Qt)(function(){if(i)return{commands:[{commands:i?(0,X._)(i):[]}]}},[i]);var o=(0,v._)((0,w.useState)(null),2),a=o[0],l=o[1],s=(0,v._)((0,w.useState)(!0),2),c=s[0],u=s[1];return((0,w.useEffect)(function(){var e=r.watchFile(n,{onChange:function(e){l(e.toString("base64")),u(!1)},onError:function(){l(null),u(!1)},onMoveOrDelete:function(){l(null),u(!1)}});return function(){e(),u(!0),l(null)}},[r,n]),c)?(0,f.Y)(L.S,{css:ta.loaderContainer,children:(0,f.Y)(to.A,{})}):null===a?(0,f.Y)(T.EY,{multiline:!1,children:"Failed to load binary file"}):(0,f.FD)(f.FK,{children:[(0,f.Y)(n5.ou,{path:n,performPaneOperation:t}),(0,f.FD)(n5.UC,{centered:!0,children:[(0,f.Y)(T.EY,{css:ta.text,children:"The file is not displayed in the text editor because it is either binary or uses an unsupported text encoding."}),(0,f.Y)(eY.K0,{alt:"Download",css:[j.wp.position.absolute,j.wp.bottom(8),j.wp.right(8),j.wp.p(16)],children:(0,f.Y)("a",{href:"data:text/plain;base64,".concat(a),download:(0,tt.WP)(n),css:[j.wp.color.foregroundDimmer],children:(0,f.Y)(eC.A,{})})})]})]})}var tu=t(82250),td=t(73040),tp=t(44114),tf=t(82733),th=t(10293),tm=t(52756),tg=t(17459),tv=t(49153),tw=t(19882),ty=t(53231),tb=t(2130),tS=t(27685),tY=t(30746),tA=new Map,tx=t(62153),tC=t(93309),t_=t(6281),tk=t(19652),tD=(0,V.x)({shadow:{position:"absolute",'&[data-position="top"], &[data-position="bottom"]':{left:0,right:0,height:12},'&[data-position="left"], &[data-position="right"]':{top:0,bottom:0,height:12},'&[data-position="top"]':{top:0,backgroundImage:"linear-gradient(to top, transparent, var(--shadow-color))"},'&[data-position="bottom"]':{bottom:0,backgroundImage:"linear-gradient(to bottom, transparent, var(--shadow-color))"},'&[data-position="left"]':{left:0,backgroundImage:"linear-gradient(to left, transparent, var(--shadow-color))"},'&[data-position="right"]':{right:0,backgroundImage:"linear-gradient(to right, transparent, var(--shadow-color))"}}});function tE(e){var n=e.scrolledAmount,t=e.scrollableAmount,r=e.orientation,i=void 0===r?"vertical":r,o=e.hideEnd,a=e.shadowColor,l=void 0===a?"rgba(2, 2, 3, 0.32)":a;return(0,f.FD)(f.FK,{children:[n>0&&(0,f.Y)("div",{css:tD.shadow,"data-position":"vertical"===i?"top":"left",style:{"--shadow-color":l}}),!(void 0!==o&&o)&&n<t&&(0,f.Y)("div",{css:tD.shadow,"data-position":"vertical"===i?"bottom":"right",style:{"--shadow-color":l}})]})}var tR=t(83023),tI=t(62362),tF=t(84686),tT=t(86814),tP=t(29064),tL=(0,V.x)({header:[j.wp.height(36)],description:[j.wp.flex.column,j.wp.gap(8)],divider:[j.wp.backgroundColor.outlineDimmer],package:[j.wp.border({color:"transparent"}),j.wp.justify.spaceBetween,{"&:hover":{backgroundColor:k.LU.backgroundHighest}}],packageList:[j.wp.maxHeight(220),j.wp.overflowY("auto")],packageMetadata:[j.wp.flex.growAndShrink(1),j.wp.align.center,j.wp.overflow("hidden"),j.wp.mr(8)],packageName:[j.wp.truncate,j.wp.flex.growAndShrink(1),j.wp.mx(8),{"> a":[j.wp.ml(4),{color:"currentColor",lineHeight:0}]}],packagerRoot:[j.wp.flex.column,j.wp.gap(8)],packager:[j.wp.backgroundColor.backgroundHigher,j.wp.borderRadius(4),j.wp.overflow("hidden")],packagerHeader:[j.wp.flex.growAndShrink(1)],packagerHeaderTitle:[j.wp.truncate,j.wp.flex.shrink(1)],packagerEmptyState:[j.wp.backgroundColor.backgroundOverlay,j.wp.borderRadius(0,0,4,4),j.wp.color.foregroundDimmest],dividerInner:[j.wp.p(0),j.wp.m(0),{borderBottom:"1px solid",borderBottomColor:k.LU.backgroundHighest}]});function tU(e){var n,t,r,i,o,a,l=e.pkg,s=e.uninstall,c=(0,tY.UK)(),u=(t=(0,tY.UK)(),r=(0,A.A)(),o=(i=(0,v._)((0,w.useState)(null!=(n=tA.get("".concat(null==t?void 0:t.id,":").concat(l.name)))?n:null),2))[0],a=i[1],(0,w.useEffect)(function(){if((null==t?void 0:t.id)&&l.name){var e=l.name;if(!tA.has(e)){var n,i=(0,tS.N)(t.id),o=!1;return(n=(0,y._)(function(){var n;return(0,b.YH)(this,function(l){switch(l.label){case 0:return[4,i.getPackageInfo({id:t.id,name:e,services:r})];case 1:if((n=l.sent())&&"string"!=typeof(null==n?void 0:n.homepageURL)&&delete n.homepageURL,o)return[2];return tA.set("".concat(t.id,":").concat(e),null!=n?n:null),a(null!=n?n:null),[2]}})}),function(){return n.apply(this,arguments)})(),function(){o=!0}}}},[null==t?void 0:t.id,l.name]),o),d=(0,w.useMemo)(function(){var e=(null==u?void 0:u.description)||l.description;if(e&&/<[^>]+>|<\/[^>]+>/.test(e)){var n=document.createElement("DIV");return n.innerHTML=e,(n.textContent||n.innerText||"").trim()}return e},[null==u?void 0:u.description,l.description]),p=(0,tb.A)((null==u?void 0:u.license)||l.license),h=(0,w.useMemo)(function(){if(u){var e;return(0,nt._)((0,ee._)({},u),{version:null!=(e=null==u?void 0:u.version)?e:l.spec,name:(null==c?void 0:c.id)==="nix"&&(null==u?void 0:u.prettyName)||l.name,license:p,description:d})}return l},[null==c?void 0:c.id,d,u,p,l]),m=(0,t_.n5)(),g=(0,t_.BL)(),S=(0,w.useMemo)(function(){return m.some(function(e){return e.pkgs.some(function(e){return e.name===l.name})})},[l.name,m]),Y=(0,w.useMemo)(function(){return!!(null!==g&&g.pkgs.find(function(e){return e.name===l.name}))},[g]);return(0,f.FD)(L.S,{css:tL.package,p:4,row:!0,align:"center",tag:"li",children:[(0,f.FD)(L.S,{css:tL.packageMetadata,row:!0,children:[(0,f.Y)(tF.A,{}),(0,f.FD)(T.EY,{css:tL.packageName,children:[h.name,h.homepageURL?(0,f.Y)("a",{href:h.homepageURL,target:"_blank",children:(0,f.Y)(tR.A,{})}):null]}),h.version?(0,f.Y)(T.EY,{color:"dimmer",children:h.version}):null]}),(0,f.FD)(L.S,{css:[j.wp.gap(4),j.wp.align.center],row:!0,children:[h.description||h.license?(0,f.Y)(P.m_,{tooltip:(0,f.FD)("div",{children:[(0,f.Y)("div",{children:h.description}),h.license?(0,f.Y)(T.EY,{variant:"small",color:"dimmer",children:h.license}):null]}),children:(0,f.Y)(tI.A,{})}):null,(0,f.Y)(eY.K0,{alt:"Uninstall",disabled:Y||S,onClick:function(){s()},children:(0,f.Y)(tP.A,{})})]})]})}function tN(e){var n=e.onAddPackage,t=e.name,r=e.id,i=e.addText;return(0,f.FD)(L.S,{css:tL.packagerHeader,pl:4,row:!0,justify:"space-between",children:[(0,f.Y)(T.EY,{css:tL.packagerHeaderTitle,id:r,children:t}),(0,f.Y)(eY.K0,{alt:i,onClick:n,children:(0,f.Y)(tT.A,{})})]})}function tO(e){var n=e.packages,t=e.labelId,r=(0,tY.UK)(),i=(0,t_.q3)(),o=(0,w.useRef)(null),a=(0,ew.Te)({count:n.length,getScrollElement:function(){return o.current},estimateSize:function(){return 34},overscan:15,measureElement:function(e){return e.getBoundingClientRect().height}}),l=(0,v._)((0,w.useState)(0),2),s=l[0],c=l[1],u=(0,v._)((0,w.useState)(0),2),d=u[0],p=u[1],h=a.getTotalSize(),m=(0,tw.A)(function(e){return p(e.height)});return r?(0,f.Y)(L.S,{css:j.wp.position.relative,innerRef:m,children:(0,f.FD)(L.S,{innerRef:o,css:tL.packageList,onScroll:function(e){c(e.target.scrollTop)},children:[(0,f.Y)(tE,{scrolledAmount:s,scrollableAmount:h-d,hideEnd:!0}),(0,f.Y)(L.S,{style:{height:h},tag:"ul","aria-labelledby":t,children:a.getVirtualItems().map(function(e){var t=n[e.index];return(0,f.Y)(tU,{pkg:t,uninstall:function(){i({id:r.id,pkg:t})}},t.name)})})]})}):null}var tM=new Map;function tB(e){var n=e.onAddPackage,t=e.openFile,r=(0,tY.UK)(),i=(0,t_.H_)(null==r?void 0:r.id),o=(0,w.useMemo)(function(){return i.filter(function(e){return e.name}).sort(function(e,n){return e.name&&n.name?e.name.localeCompare(n.name):0})},[i]),a=(0,w.useId)(),l=(0,w.useCallback)(function(){n(null==r?void 0:r.id)},[n,null==r?void 0:r.id]),s=(null==r?void 0:r.id)==="nix",c=(0,w.useMemo)(function(){return null==r?void 0:r.packagerFiles.filter(function(e){return!e.includes("lock")&&!e.endsWith("/")})},[null==r?void 0:r.packagerFiles]),u=(0,tv.om)(),d=(0,v._)((0,w.useState)(r?tM.get(r.id):void 0),2),p=d[0],h=d[1];return((0,w.useEffect)(function(){function e(){return(e=(0,y._)(function(){var e,n,t,i,o,a,l;return(0,b.YH)(this,function(s){switch(s.label){case 0:if(!c||!r)return[2];e=!0,n=!1,t=void 0,s.label=1;case 1:s.trys.push([1,6,7,8]),i=c[Symbol.iterator](),s.label=2;case 2:if(e=(o=i.next()).done)return[3,5];return a=o.value,[4,u.readFile(a)];case 3:if("content"in s.sent())return tM.set(r.id,a),h(a),[3,5];s.label=4;case 4:return e=!0,[3,2];case 5:return[3,8];case 6:return l=s.sent(),n=!0,t=l,[3,8];case 7:try{e||null==i.return||i.return()}finally{if(n)throw t}return[7];case 8:return[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[r,u,c]),r)?(0,f.FD)(L.S,{css:tL.packagerRoot,children:[(0,f.Y)(L.S,{css:tL.packager,children:(0,f.Y)(D.A,{defaultExpanded:!0,headerContent:(0,f.Y)(tN,{id:a,name:r.name,addText:"Add new ".concat(s?"dependency":"package"),onAddPackage:l}),children:(0,f.FD)(f.FK,{children:[(0,f.Y)(tW,{css:tL.divider}),o.length>0?(0,f.Y)(tO,{packages:o,labelId:a}):(0,f.FD)(L.S,{css:tL.packagerEmptyState,p:8,align:"center",children:["No ",s?"dependencies":"packages"," found"]})]})})}),(0,f.Y)(eS.$n,{colorway:"primary",variant:"outlined",text:"Add new ".concat(s?"dependency":"package"),iconLeft:(0,f.Y)(tT.A,{}),onClick:l}),p?(0,f.Y)(eS.$n,{variant:"nofill",text:"Open ".concat(p),iconLeft:(0,f.Y)(tF.A,{}),onClick:function(){(0,ty.u4)(th.AZ.DEPENDENCIES_PACKAGER_FILE_OPENED,{packagerId:r.id,file:p}),t({path:p})}}):null]}):null}function tH(e){var n=e.configs,t=e.description,r=e.title,i=e.openFile,o=(0,tg._)(e,["configs","description","title","openFile"]);return(0,f.FD)(L.S,{children:[(0,f.Y)(L.S,{css:tL.header,row:!0,justify:"space-between",children:(0,f.Y)(T.Y9,{variant:"subheadDefault",level:2,children:r})}),(0,f.FD)(L.S,{gap:8,children:[(0,f.Y)(tk.s,{color:"dimmer",css:tL.description,children:t}),n.length>0?n.map(function(e){return(0,f.Y)(tC.A,{config:e,children:(0,f.Y)(tB,(0,ee._)({openFile:i},o))},e.id)}):null]})]})}function tz(e){var n=(0,tx.J)().configs,t=(0,w.useMemo)(function(){return n.find(function(e){return"nix"===e.id})},[n]);return t?(0,f.Y)(tH,(0,nt._)((0,ee._)({title:"System Dependencies",description:(0,f.FD)("span",{children:["Add additional support to your environment with"," ",(0,f.Y)("a",{href:"https://search.nixos.org/packages",target:"_blank",children:"Nix packages"}),"."]})},e),{configs:[t]})):null}var tW=function(){return(0,f.Y)("div",{css:tL.dividerInner})},tG=t(83966),tV=t(21394);function tj(e){var n=e.openFile,t=e.openConsole,r=e.openNixTab,i=(0,tx.J)().configs,o=(0,w.useMemo)(function(){return i.filter(function(e){return"nix"!==e.id})},[i]),a=(0,v._)((0,w.useState)({mode:"Overview"}),2),l=a[0],s=a[1];switch((0,tm.M)(th.AZ.DEPENDENCIES_TAB_VIEWED,{tab:"import"}),l.mode){case"Overview":return(0,f.Y)(tV._0,{children:(0,f.Y)(tH,{title:"Manage Imports",configs:o,openFile:n,onAddPackage:function(e){s({mode:"Search",initialPackager:e})},description:(0,f.FD)(f.FK,{children:[(0,f.Y)(T.EY,{children:"Packagers manage language-specific dependencies for your project. These can be imported directly from your codebase."}),0===o.length?(0,f.Y)(T.EY,{color:"dimmest",children:(0,f.FD)("p",{children:["You don't currently have any packagers. Add language support by"," ",(0,f.Y)("a",{href:"",onClick:function(e){e.preventDefault(),r()},children:"adding a System Module"}),"."]})}):null]})})});case"Search":return(0,f.Y)(tG.Y,{onBack:function(){return s({mode:"Overview"})},initialCategory:l.initialPackager,openConsole:t})}}var tZ=t(64513),tq=t(36296),tK=t(39999),t$=t(4990),tJ=(0,V.x)({systemModules:[j.wp.flex.column,j.wp.gap(8)],sectionHeader:[j.wp.height(36)]});function tQ(e){var n=e.openFile,t=e.openConsole,r=(0,tp.G)().modules,i=(0,v._)((0,w.useState)({mode:"Overview"}),2),o=i[0],a=i[1];if((0,tm.M)(th.AZ.DEPENDENCIES_TAB_VIEWED,{tab:"nix"}),!r)return null;switch(o.mode){case"Overview":return(0,f.FD)(tV._0,{children:[(0,f.FD)(L.S,{children:[(0,f.Y)(L.S,{css:tJ.sectionHeader,row:!0,justify:"space-between",children:(0,f.Y)(T.Y9,{variant:"subheadDefault",level:2,children:"System Modules"})}),(0,f.FD)(L.S,{css:tJ.systemModules,children:[(0,f.Y)(tk.s,{color:"dimmer",children:"Modules combine support for programming languages, formatters, and packagers. These provide the foundation for your App."}),(0,f.Y)(tq.A,{modules:r}),(0,f.Y)(eS.$n,{text:"Add new module",variant:r.length>0?"outlined":"default",colorway:"primary",iconLeft:(0,f.Y)(tT.A,{}),onClick:function(){a({mode:"Search",initialCategory:"Modules"})}}),(0,f.Y)(eS.$n,{text:"Open .replit",variant:"nofill",iconLeft:(0,f.Y)(t$.A,{}),onClick:function(){n({path:".replit"})}})]})]}),(0,f.Y)(tz,{onAddPackage:function(){a({mode:"Search",initialCategory:"Packages"})},openFile:n}),(0,f.Y)(tK.v,{href:tZ.ik.DEPENDENCY_MANAGEMENT,target:"_blank",rel:"noopener",variant:"underlinedOnHover",colorway:"primary",iconRight:(0,f.Y)(tR.A,{}),text:"Learn more about Nix and .replit configuration"})]});case"Search":return(0,f.Y)(tG.m,{onBack:function(){return a({mode:"Overview"})},initialCategory:o.initialCategory,openConsole:t})}}var tX=t(98543),t0=t(28259),t1=(0,V.x)({root:[j.wp.overflow("hidden"),j.wp.flex.growAndShrink(1)],content:[j.wp.flex.growAndShrink(1),j.wp.overflowY("auto")]});function t2(e){var n,t=e.openFile,r=e.openConsole,i=e.initialTab,o=(0,tx.J)(),a=o.configs,l=o.loading,s=(0,tp.G)(),c=s.modules,u=s.configs,d=(0,tf.A)(),p=(0,w.useMemo)(function(){return a.filter(function(e){return"nix"!==e.id})},[a]).length>0,h=(0,v._)((0,w.useState)(p?void 0===i?"import":i:"nix"),2),m=h[0],g=h[1];return((0,w.useEffect)(function(){p||g("nix")},[p,l]),a&&c&&u&&d&&!l)?("import"===m?n=(0,f.Y)(tj,{openFile:t,openConsole:r,openNixTab:function(){return g("nix")}}):"nix"===m&&(n=(0,f.Y)(tQ,{openFile:t,openConsole:r})),(0,f.FD)(L.S,{css:t1.root,children:[(0,f.Y)(tX.P,{tabs:[{value:"import",label:"Imports",icon:(0,f.Y)(tF.A,{})},{value:"nix",label:"System (Advanced)",icon:(0,f.Y)(t0.A,{})}],value:m,onClick:function(e){g(e.value)}}),(0,f.Y)(L.S,{css:t1.content,children:n})]})):(0,f.Y)(tV.Gu,{})}var t4=t(97185),t5=t(41049),t3=h.ZU.Object({type:h.ZU.Literal("dependencies"),initialTab:h.ZU.Optional(h.ZU.Union([h.ZU.Literal("import"),h.ZU.Literal("nix")]))}),t6={Content:function(e){var n=e.options.performPaneOperation,t=e.pane.initialTab,r=(0,w.useCallback)(function(e){return n({operation:"open",secondary:!0,pane:{type:"codeEditor",data:e}})},[n]),i=(0,w.useCallback)(function(){n({operation:"open",secondary:!0,pane:{type:"runnerOutput"}})},[n]);return(0,f.Y)(t2,{openFile:r,openConsole:i,initialTab:t})},Icon:function(e){var n=e.size;return(0,f.Y)(t5.A,{size:n})},getTitle:function(){return"Dependencies"},description:"Install, upgrade, and manage dependencies for your environment, build system, and application runtime",category:t4.b.WorkspaceFeatures,decode:function(e){return m.T(t3,e)}},t8=t(20207),t7=t(63019),t9=t(73779),re=t(90629),rn=function(e){var n=e.context,t=e.gitService,r=e.result,i=e.data;re.v4(function(e){e.setTag("service","git"),e.setTag("context",n),e.setExtra("env",t.getEnv()),i&&re.l7("data",i),re.Cp(r.error)})},rt=function(){var e=(0,y._)(function(e,n,t,r){var i,o,a;return(0,b.YH)(this,function(l){switch(l.label){case 0:if("generatedFile"===r.type)return[2,""];if("git"!==r.type)return[3,2];return i=r.revision,[4,e.getFileContents({path:t,revision:i,convertToBase64:(0,tt.FN)(t)})];case 1:if((o=l.sent()).error)throw rn({context:"use-file-at-revision-fetch-content",gitService:e,result:o,data:{path:t,revision:i}}),o.error;return[2,o.content||""];case 2:return[4,n.readFile(t,{fromDisk:!0})];case 3:if((a=l.sent()).error)throw a.error;return[2,a.content.toString("utf8")]}})});return function(n,t,r,i){return e.apply(this,arguments)}}();let rr=function(e,n){var t,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=(0,v._)((0,w.useState)(null),2),o=i[0],a=i[1],l=(0,v._)((0,w.useState)(!0),2),s=l[0],c=l[1],u=(0,A.A)().fs,d=(0,t9.A)((t=(0,y._)(function(t){var r,i;return(0,b.YH)(this,function(o){switch(o.label){case 0:c(!0),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,rt(t,u,e,n)];case 2:return r=o.sent(),c(!1),[2,{content:r,error:null}];case 3:return i=o.sent(),c(!1),[2,{content:null,error:i}];case 4:return[2]}})}),function(e){return t.apply(this,arguments)}),[e,n,u],r);return(0,w.useEffect)(function(){d&&(d.error?a(null):a(d.content))},[d]),{fileContent:o,loading:s}};var ri=t(98468),ro=t(11797),ra="rgba(180, 0, 0, 0.125)",rl="rgba(0, 180, 0, 0.125)",rs=no.Lz.theme({"&.cm-merge-b .cm-changedLine":{background:"rgba(0, 180, 0, 0.075)"},"&.cm-merge-a .cm-changedLine":{background:"rgba(180, 0, 0, 0.075)"},"&.cm-merge-b .cm-changedLineGutter":{background:rl},"&.cm-merge-a .cm-changedLineGutter":{background:ra},"&.cm-merge-b .cm-changedText":{background:rl,outline:"solid 1px ".concat(rl),borderRadius:"2px"},"&.cm-merge-a .cm-changedText":{background:ra,outline:"solid 1px ".concat(ra),borderRadius:"2px"},".cm-collapsedLines":{color:k.LU.accentPrimaryStrongest,background:k.LU.accentPrimaryDimmest,transition:"background 250ms ease","&:hover":{background:k.LU.accentPrimaryDimmer}}}),rc=[no.Lz.baseTheme({".cm-scroller":{height:"100% !important",overflowY:"auto !important"}}),no.Lz.theme({".cm-scroller":{height:"auto !important",overflowY:"visible !important"}})],ru=[ni.Nb.highest(rc),rs],rd=t(83355),rp=t(17969);function rf(e){var n,t,r,i=e.a,o=e.b,a=e.style,l=e.className,s=(0,tg._)(e,["a","b","style","className"]),c=(0,v._)((0,w.useState)(null),2),u=c[0],d=c[1],p=(0,v._)((0,w.useState)(null),2),h=p[0],m=p[1],g=(0,w.useRef)(!1),y=(0,e0.A)(s),b=(0,e0.A)(i.doc),S=(0,e0.A)(o.doc),Y=(0,ns.pm)((0,nt._)((0,ee._)({},i),{readOnly:!0})),A=(0,ns.pm)((0,nt._)((0,ee._)({},o),{readOnly:!0})),x=(n=(0,v._)((0,w.useState)(),2)[1],(0,w.useCallback)(function(e){n(function(){throw e})},[])),C=s.orientation,_=s.revertControls,k=s.renderRevertControl,D=s.collapseUnchanged,E=s.gutter,R=s.highlightChanges,I=void 0!==D,F=null==D?void 0:D.margin,T=null==D?void 0:D.minSize,P=null!=(t=null==h?void 0:h.a)?t:null,L=null!=(r=null==h?void 0:h.b)?r:null;return(0,ns.vO)(),(0,w.useEffect)(function(){var e=function(e){x(e)};if(u){var n=null;try{n=new ro.SV((0,nt._)((0,ee._)({},y.current),{parent:u,a:{doc:b.current,extensions:[no.Lz.exceptionSink.of(e),ru].concat((0,X._)(Y))},b:{doc:S.current,extensions:[no.Lz.exceptionSink.of(e),ru].concat((0,X._)(A))}}))}catch(n){e(n)}return n&&(m(n),g.current=!0),function(){if(n){m(null);try{n.destroy()}catch(n){e(n)}}}}},[u]),(0,w.useEffect)(function(){P&&!g.current&&P.dispatch({changes:{from:0,to:P.state.doc.length,insert:i.doc}})},[P,i.doc]),(0,w.useEffect)(function(){L&&!g.current&&L.dispatch({changes:{from:0,to:L.state.doc.length,insert:o.doc}})},[L,o.doc]),(0,w.useEffect)(function(){h&&!g.current&&rh(h,y.current.collapseUnchanged)},[h,y,i.doc,o.doc]),(0,w.useEffect)(function(){if(h&&!g.current){var e=I?{margin:F,minSize:T}:void 0;h.reconfigure({orientation:C,revertControls:_,renderRevertControl:k,collapseUnchanged:e,gutter:E,highlightChanges:R}),e&&rh(h,e)}},[h,C,_,k,I,F,T,E,R]),(0,rd.O)(P),(0,rd.O)(L),(0,w.useEffect)(function(){g.current=!1}),(0,f.FD)(f.FK,{children:[(0,f.Y)("div",{ref:d,className:l,style:a}),(0,f.Y)(rp.OE,{view:P}),(0,f.Y)(rp.OE,{view:L})]})}function rh(e,n){e&&n&&(e.reconfigure({collapseUnchanged:void 0}),e.reconfigure({collapseUnchanged:(0,ee._)({},n)}))}var rm=(0,V.x)({container:[j.wp.width(60),j.wp.height(24),j.wp.display.flex,j.wp.center,j.wp.borderRadius(4),j.wp.fontSize(k.LU.fontSizeSmall)]});function rg(e){var n,t,r;switch(e.type){case t8.PX.ADDED:case t8.PX.UNTRACKED:n="Added",t=k.LU.greenDimmest,r=k.LU.greenStrongest;break;case t8.PX.MODIFIED:n="Modified",t=k.LU.yellowDimmest,r=k.LU.yellowStrongest;break;case t8.PX.DELETED:n="Deleted",t=k.LU.redDimmest,r=k.LU.redStrongest;break;case t8.PX.RENAMED:n="Renamed",t=k.LU.tealDimmest,r=k.LU.tealStrongest;break;case t8.PX.COPIED:n="Copy",t=k.LU.limeDimmest,r=k.LU.limeStrongest;break;default:return null}return(0,f.Y)(L.S,{style:{backgroundColor:t,color:r},css:rm.container,children:(0,f.Y)("span",{children:n})})}function rv(e){var n,t,r;switch(e.type){case"ADDED":n="Added",t=k.LU.greenDimmest,r=k.LU.greenStrongest;break;case"MODIFIED":n="Modified",t=k.LU.yellowDimmest,r=k.LU.yellowStrongest;break;case"DELETED":n="Deleted",t=k.LU.redDimmest,r=k.LU.redStrongest;break;case"RENAMED":n="Renamed",t=k.LU.tealDimmest,r=k.LU.tealStrongest;break;case"COPIED":n="Copy",t=k.LU.limeDimmest,r=k.LU.limeStrongest;break;default:return null}return(0,f.Y)(L.S,{style:{backgroundColor:t,color:r},css:rm.container,children:(0,f.Y)("span",{children:n})})}var rw=t(13539),ry=t(42764),rb=t(37037),rS=t(87523),rY=t(70900),rA=[{"& > span:first-child-of-type":[j.wp.flex.grow(1),j.wp.textAlign.left]},{"& > span":[j.wp.flex.shrink(1)]},j.wp.height("auto"),j.wp.p(8),j.wp.fontWeight.medium,j.wp.backgroundColor.backgroundHigher,j.wp.flex.row,j.wp.align.center,j.wp.justify.spaceBetween,j.wp.overflow("hidden"),j.wp.cursor.pointer],rx=(0,V.x)({buttonFolded:[rA,j.wp.borderRadius(8)],buttonUnfolded:[rA,j.wp.borderRadius(8,8,0,0)],rowContainer:[j.wp.position.relative,j.wp.zIndex(1),j.wp.overflow("hidden")],diffContainer:[j.wp.flex.grow(1),j.wp.borderRadius(8)],bodyContainer:[j.wp.borderRadius(0,0,8,8),j.wp.p(8),j.wp.display.flex,j.wp.flex.row,j.wp.flex.wrap,j.wp.align.center,j.wp.justify.center,j.wp.backgroundColor.backgroundDefault,j.wp.border({color:k.LU.outlineDimmer,direction:"bottom"}),j.wp.border({color:k.LU.outlineDimmer,direction:"left"}),j.wp.border({color:k.LU.outlineDimmer,direction:"right"})],noChangesContainer:[j.wp.py(8),j.wp.px(8),j.wp.center,j.wp.width("100%")],innerContainer:[j.wp.display.flex,j.wp.align.center],splitContainer:[j.wp.display.flex,j.wp.flex.row,j.wp.justify.spaceBetween,j.wp.maxWidth("100%"),j.wp.align.center],splitChild:[{flexBasis:"50%"}],buttonGroupItem:[j.wp.width(64),j.wp.height(32)]}),rC=function(e){var n=e.value,t=e.onChange;return(0,f.FD)(ry.e2,{name:"SplitOrUnifiedDiff",value:n,onChange:t,row:!0,children:[(0,f.Y)(L.S,{css:rx.buttonGroupItem,children:(0,f.Y)(ry.$O,{value:"Unified",text:"Unified",id:"SplitOrUnifiedDiffUnified"})}),(0,f.Y)(L.S,{css:rx.buttonGroupItem,children:(0,f.Y)(ry.$O,{value:"Split",text:"Split",id:"SplitOrUnifiedDiffSplit"})})]})},r_=function(e){var n=e.folded,t=void 0!==n&&n,r=e.setFolded,i=e.diff,o="".concat(i.initial.path,"/").concat(i.initial.filename),a="".concat(i.final.path,"/").concat(i.final.filename);return(0,f.FD)(L.S,{css:t?rx.buttonFolded:rx.buttonUnfolded,onClick:function(){return r(!t)},children:[(0,f.FD)(L.S,{css:[rx.rowContainer,j.wp.flex.shrink(1)],align:"center",row:!0,gap:8,children:["RENAMED"===i.status||"COPIED"===i.status?(0,f.FD)(f.FK,{children:[(0,f.Y)(ti.A,{path:o}),(0,f.Y)(T.EY,{multiline:!1,children:i.initial.filename}),""===i.initial.path?null:(0,f.Y)(T.EY,{multiline:!1,color:"dimmest",css:[j.wp.fontWeight.normal],maxLines:1,children:i.initial.path}),(0,f.Y)(rb.A,{}),(0,f.Y)(ti.A,{path:a}),(0,f.Y)(T.EY,{multiline:!1,children:i.final.filename}),""===i.final.path?null:(0,f.Y)(T.EY,{multiline:!1,color:"dimmest",css:[j.wp.fontWeight.normal],children:i.final.path})]}):(0,f.FD)(f.FK,{children:[(0,f.Y)(ti.A,{path:a}),(0,f.Y)(T.EY,{multiline:!1,children:i.final.filename}),""===i.final.path?null:(0,f.Y)(T.EY,{multiline:!1,color:"dimmest",css:[j.wp.fontWeight.normal],children:i.final.path})]}),(0,f.Y)(E.r,{textToCopy:a,tooltipText:"Copy Full Path",tooltipPlacement:"bottom-end"})]}),(0,f.FD)(L.S,{css:rx.rowContainer,align:"center",row:!0,gap:8,children:[(0,f.Y)(rv,{type:i.status}),(0,f.Y)(eY.K0,{alt:t?"Collapse diff":"Expand diff",onClick:function(){return r(!t)},children:t?(0,f.Y)(rS.A,{}):(0,f.Y)(rY.A,{})})]})]})},rk=function(e){var n=e.diff,t=e.splitOrUnified,r=e.extensions;return"Split"===t?(0,f.Y)(rf,{a:{filePath:n.initial.filename,doc:n.initial.content},b:{filePath:n.final.filename,doc:n.final.content,extensions:r},collapseUnchanged:{},style:{width:"100%"}}):(0,f.Y)(ns.Ay,{filePath:n.final.filename,initialDoc:n.final.content,extensions:[ri.X.of(ni.EY.of(n.initial.content.split("\n")))],readOnly:!0,style:{width:"100%"}})},rD=function(e){return(0,tt.FN)(e)?"media":(0,tt.m6)(e)?"ot":"binary"},rE=function(e){var n=e.content,t=e.type,r=e.filename,i=e.extensions;switch(t){case"media":return(0,f.Y)(L.S,{css:[{display:"flex",height:"100%"}],children:(0,f.Y)(rw.jM,{src:(0,rw.p4)(n,(0,tt.P7)(r)),mime:(0,tt.P7)(r),fileName:r})});case"ot":return(0,f.Y)(ns.Ay,{filePath:r,initialDoc:n,readOnly:!0,style:{width:"100%"},extensions:i});default:return(0,f.Y)(T.EY,{color:"dimmest",multiline:!1,children:"This binary file has changed."})}},rR=function(e){var n=e.diff,t=e.splitOrUnified,r=e.extensions;if(n.loading)return(0,f.Y)(L.S,{css:rx.noChangesContainer,children:(0,f.Y)(to.A,{size:20})});if(n.initial.content===n.final.content)return(0,f.Y)(L.S,{css:rx.noChangesContainer,children:(0,f.Y)(T.EY,{color:"dimmest",multiline:!1,children:"There are no changes to show."})});if("DELETED"===n.status)return(0,f.Y)(L.S,{css:rx.noChangesContainer,children:(0,f.Y)(T.EY,{color:"dimmest",multiline:!1,children:"This file has been deleted."})});var i=rD(n.initial.filename),o=rD(n.final.filename);if("ADDED"===n.status)switch(o){case"media":return(0,f.Y)(L.S,{css:rx.noChangesContainer,children:(0,f.Y)(L.S,{css:rx.innerContainer,children:(0,f.Y)(rw.jM,{src:(0,rw.p4)(n.final.content,(0,tt.P7)(n.final.filename)),mime:(0,tt.P7)(n.final.filename),fileName:n.final.filename})})});case"ot":return(0,f.Y)(L.S,{css:rx.noChangesContainer,children:(0,f.Y)(ns.Ay,{filePath:n.final.filename,initialDoc:n.final.content,readOnly:!0,style:{width:"100%"},extensions:r})});default:return(0,f.Y)(L.S,{css:rx.noChangesContainer,children:(0,f.Y)(T.EY,{color:"dimmest",multiline:!1,children:"This binary file has been added."})})}return"binary"===i&&"binary"===o?(0,f.Y)(L.S,{css:rx.noChangesContainer,children:(0,f.Y)(T.EY,{color:"dimmest",multiline:!1,children:"This binary file has changed."})}):"ot"===i&&"ot"===o?(0,f.Y)(rk,{diff:n,splitOrUnified:t,extensions:r}):(0,f.FD)(L.S,{css:rx.splitContainer,p:8,children:[(0,f.Y)(L.S,{css:rx.splitChild,align:"center",justify:"center",children:(0,f.Y)(rE,{content:n.initial.content,type:i,filename:n.initial.filename,extensions:r})}),(0,f.Y)(L.S,{css:rx.splitChild,children:(0,f.Y)(rE,{content:n.final.content,type:o,filename:n.final.filename,extensions:r})})]})},rI=function(e){var n=e.diff,t=e.folded,r=e.setFolded,i=e.splitOrUnified;return(0,f.FD)(L.S,{css:rx.diffContainer,children:[(0,f.Y)(r_,{folded:t,setFolded:r,diff:n}),t?null:(0,f.Y)(eu.ui,{css:rx.bodyContainer,elevated:!0,children:(0,f.Y)(rR,{diff:n,splitOrUnified:i})})]},n.id)},rF=t(32156),rT=t(20729),rP=h.ZU.Object({type:h.ZU.Literal("git"),revision:h.ZU.String()}),rL=h.ZU.Object({type:h.ZU.Literal("fs")}),rU=h.ZU.Object({type:h.ZU.Literal("generatedFile"),content:h.ZU.String()}),rN=h.ZU.Object({left:h.ZU.Object({path:h.ZU.String(),data:h.ZU.Union([rP,rL,rU])}),right:h.ZU.Object({path:h.ZU.String(),data:h.ZU.Union([rP,rL,rU])})}),rO=h.ZU.Object({type:h.ZU.Literal("patch"),diff:t7.Zw}),rM=h.ZU.Object({type:h.ZU.Literal("diff"),data:h.ZU.Union([rN,h.ZU.Array(rN),rO])}),rB=(0,V.x)({container:[j.wp.p(8)],singleDiffWrapper:[j.wp.width("100%"),j.wp.backgroundColor.backgroundHigher,j.wp.borderRadius(4),j.wp.mb(8)],accordionBody:[j.wp.border({direction:"x",width:1,color:k.LU.backgroundHigher}),j.wp.border({direction:"bottom",width:1,color:k.LU.backgroundHigher}),j.wp.backgroundColor.backgroundDefault,j.wp.borderRadius(0,0,4,4)]});function rH(e){var n=e.left,t=e.right,r=e.splitOrUnified,i=(0,v._)((0,w.useState)(!0),2),o=i[0],a=i[1],l=rr(n.path,n.data),s=l.fileContent,c=l.loading,u=rr(t.path,t.data),d=u.fileContent,p=u.loading,h="generatedFile"===n.data.type?n.data.content:null,m="generatedFile"===t.data.type?t.data.content:null,g=s||h,y=d||m,b=(0,w.useMemo)(function(){return null===g&&null!==y?t8.Os.ADDED:null!==g&&null===y?t8.Os.DELETED:t8.Os.MODIFIED},[g,y]),S={id:"".concat(n.path,"-").concat(t.path),status:b,loading:c||p,initial:{filename:(0,tt.WP)(n.path),path:(0,tt._6)(n.path),content:null!=g?g:""},final:{filename:(0,tt.WP)(t.path),path:(0,tt._6)(t.path),content:null!=y?y:""}};return(0,f.Y)(L.S,{css:rB.singleDiffWrapper,children:(0,f.Y)(D.A,{expanded:o,onClick:function(){return a(function(e){return!e})},headerContent:(0,f.FD)(L.S,{row:!0,gap:8,children:[(0,f.Y)(ti.A,{path:n.path}),(0,f.Y)(T.EY,{multiline:!1,children:n.path})]}),children:(0,f.Y)(L.S,{css:rB.accordionBody,p:4,children:(0,f.Y)(rR,{splitOrUnified:r,diff:S})})})})}function rz(e){var n=e.patch;return(0,f.Y)(L.S,{css:rB.container,children:(0,f.Y)(rF.A,{patch:n.diff,compressed:!1,background:null})})}var rW={Content:function(e){var n=e.pane.data,t=(0,v._)((0,w.useState)("Split"),2),r=t[0],i=t[1],o=(0,w.useMemo)(function(){return Array.isArray(n)?n:[n]},[n]);return"type"in n&&"patch"===n.type?(0,f.Y)(rz,{patch:n}):(0,f.FD)(L.S,{gap:8,css:rB.container,children:[(0,f.Y)(rC,{value:r,onChange:i}),(0,f.Y)(L.S,{children:o.map(function(e){return"left"in e&&"right"in e?(0,f.Y)(rH,{left:e.left,right:e.right,splitOrUnified:r},e.left.path+e.right.path):null})})]})},Icon:function(){return(0,f.Y)(rT.A,{})},getTitle:function(e){var n=e.data,t=Array.isArray(n)?n:[n];if(1===t.length){var r=t[0];if("type"in r&&"patch"===r.type){var i=r.diff,o=i.labelA,a=i.labelB;return o===a?"Diff: ".concat((0,tt.WP)(null!=o?o:"")):"Diff: ".concat(o," - ").concat(a)}if("left"in r&&"right"in r)return r.left.path===r.right.path?"Diff: ".concat((0,tt.WP)(r.left.path)):"Diff: ".concat((0,tt.WP)(r.left.path)," - ").concat((0,tt.WP)(r.right.path))}return"Diff: ".concat(t.length," files")},category:nQ.bY.WorkspaceFeatures,decode:function(e){return m.T(rM,e)}},rG=t(96907),rV=t.n(rG);function rj(){var e=(0,en._)(["\n  query WorkspaceDraw($id: String!) {\n    currentUser {\n      id\n      username\n    }\n    getRepl(id: $id) {\n      ... on Repl {\n        __typename\n        id\n      }\n    }\n  }\n"]);return rj=function(){return e},e}var rZ={},rq=(0,et.J1)(rj()),rK=t(36018),r$=t(98009),rJ=function(e){return e.reduce(function(e,n){return e[n.id]=n,e},{})};let rQ=function(e,n,t){if(!e)return[];var r,i=n(e.getSceneElementsIncludingDeleted()),o=e.getAppState();return(r=t.reduce(function(e,n){var t,r,a;return n.id===(null==(t=o.editingElement)?void 0:t.id)||n.id===(null==(r=o.resizingElement)?void 0:r.id)||n.id===(null==(a=o.draggingElement)?void 0:a.id)||(i[n.id]&&i[n.id].version>n.version||i[n.id]&&i[n.id].version===n.version&&i[n.id].versionNonce!==n.versionNonce&&i[n.id].versionNonce<n.versionNonce?e.push(i[n.id]):e.push(n),delete i[n.id]),e},[])).concat.apply(r,(0,X._)(Object.values(i)))},rX=function(){var e,n,t=new Promise(function(t,r){e=t,n=r});return t.resolve=e,t.reject=n,t};var r0=t(54357),r1=t(33781),r2=t(80859),r4=(0,nF.AH)(".excalidraw.excalidraw-modal-container.excalidraw--mobile{margin-top:",r2.uF-1,"px;}");function r5(e){var n,r,i,o,a,l,s=e.fs,c=e.filePath,u=(0,v._)((0,w.useState)(void 0),2),d=u[0],p=u[1],h=(0,rK.A)(),m=(0,w.useRef)(function(e){return(0,X._)(e)}),g=(0,w.useRef)(function(e){return -1}),S=(0,w.useRef)(),Y=(0,w.useRef)(rX()),A=(0,e7.I)(function(e){return function(n){return e.excalidraw.update.rpc(n)}},[]);(0,w.useEffect)(function(){Promise.all([t.e(9248),t.e(5514)]).then(t.t.bind(t,5514,23)).then(function(e){m.current=function(n){return n.filter(function(n){return n.isDeleted||!e.isInvisiblySmallElement(n)})},g.current=e.getSceneVersion,p(e.Excalidraw)})},[]);var x=(0,w.useCallback)(function(){return S.current},[]),C=(n={variables:{id:(0,nI.A)()},ssr:!1},r=(0,ee._)({},rZ,n),er.I(rq,r)),_=C.data,D=C.loading,E=(null==_||null==(l=_.currentUser)?void 0:l.username)||"",R=(0,r1.D)().isDarkColorScheme,I=(0,r0.Q4)(),F=(0,r$.A)(),T=null==F?void 0:F.color,P=(0,v._)((0,w.useState)(new Map),2),U=P[0],N=P[1],O=(0,v._)((0,w.useState)(-1),2),M=O[0],B=O[1],H=(0,w.useRef)((0,nU.A)()).current;(0,w.useEffect)(function(){function e(){return(e=(0,y._)(function(){var e,n;return(0,b.YH)(this,function(t){switch(t.label){case 0:if(!_||!_.currentUser)return[2];return[4,Y.current];case 1:return t.sent(),e=x().getAppState().collaborators,n=new Map,I.forEach(function(t){if(t.username!==(null==_||null==(r=_.currentUser)?void 0:r.username)){var r,i=e.get(t.username)||{};n.set(t.username,(0,nt._)((0,ee._)({},i),{username:t.username,color:{background:t.color,foreground:t.color}}))}}),x().updateScene({collaborators:n}),[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[_,I,x]);var z=(0,w.useCallback)((i=(0,y._)(function(e,n){var t,r,i,o,a,l;return(0,b.YH)(this,function(s){n||(e=e.filter(function(e){return!U.has(e.id)||e.version>U.get(e.id)})),t=!0,r=!1,i=void 0;try{for(o=e[Symbol.iterator]();!(t=(a=o.next()).done);t=!0)l=a.value,U.set(l.id,l.version),N(new Map(U))}catch(e){r=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(r)throw i}}return null==A||A({paneId:H,path:c,$kind:"elements",elements:JSON.stringify(e)}),[2]})}),function(e,n){return i.apply(this,arguments)}),[A,H,c,U]);(0,nf.b)((o=(0,y._)(function(e,n){var t,r,i,o,a,l,s,u,d,p,f,h,m,v,w,y,S;return(0,b.YH)(this,function(b){switch(b.label){case 0:return t=n.signal,r=e.excalidraw.listen.subscribe({paneId:H,path:c},{signal:t}).resReadable,[4,Y.current];case 1:b.sent(),i=!1,o=!1,b.label=2;case 2:b.trys.push([2,7,8,13]),l=(0,nn._)(r),b.label=3;case 3:return[4,l.next()];case 4:if(!(i=!(s=b.sent()).done))return[3,6];if(!(u=s.value).ok)return[2];"collaborator"===u.payload.$kind?(d=x().getAppState().collaborators,f=(p=u.payload).pointer,h=p.selectedElementIds,d.set(u.payload.username,(0,nt._)((0,ee._)({},d.get(u.payload.username)),{pointer:f,selectedElementIds:h,username:u.payload.username})),x().updateScene({collaborators:d})):"elements"===u.payload.$kind?(m=JSON.parse(u.payload.elements),v=rQ(x(),rJ,m),(w=g.current(v))>M&&(B(w),x().updateScene({elements:v}))):"leave"===u.payload.$kind&&((y=x().getAppState().collaborators).delete(u.payload.username),x().updateScene({collaborators:y})),b.label=5;case 5:return i=!1,[3,3];case 6:return[3,13];case 7:return S=b.sent(),o=!0,a=S,[3,13];case 8:if(b.trys.push([8,,11,12]),!(i&&null!=l.return))return[3,10];return[4,l.return()];case 9:b.sent(),b.label=10;case 10:return[3,12];case 11:if(o)throw a;return[7];case 12:return[7];case 13:return[2]}})}),function(e,n){return o.apply(this,arguments)}),[H,c,x,M,g]),(0,w.useEffect)(function(){function e(){return(e=(0,y._)(function(){var e,n;return(0,b.YH)(this,function(t){switch(t.label){case 0:if(!c||!s)return[2];return[4,s.readFile(c)];case 1:if(!("content"in(e=t.sent())))return[3,3];return n=JSON.parse(e.content.toString()||"{}"),[4,Y.current];case 2:t.sent(),x().updateScene({elements:n.elements||[],appState:n.appState||{}}),x().scrollToContent(),t.label=3;case 3:return[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[c,s,x]);var W=(0,w.useCallback)(rV()((a=(0,y._)(function(e,n){var t;return(0,b.YH)(this,function(r){switch(r.label){case 0:if(t=e.filter(function(e){return!e.isDeleted}),!c)return[3,2];return[4,s.writeFile(c,eJ.A.from(JSON.stringify({elements:t,files:n})))];case 1:r.sent(),r.label=2;case 2:return[2]}})}),function(e,n){return a.apply(this,arguments)}),350),[c]),G=(0,w.useCallback)(function(e){var n=g.current(e);n>M&&(z(m.current(e),!1),B(n))},[z,m,g]);return(0,f.FD)(L.S,{css:{position:"relative",height:"100%",width:"100%",flex:1,boxShadow:T?"0 3px 0 3px ".concat(T):"none",backgroundColor:k.LU.backgroundDefault,"& .excalidraw [title~=Library]":{display:"none"}},onMouseLeave:function(){null==A||A({paneId:H,path:c,$kind:"leave"})},children:[d&&!D?(0,f.Y)(d,{ref:function(e){e&&(S.current=e,e.readyPromise&&e.readyPromise.then(function(e){Y.current.resolve(e)}).catch(function(e){Y.current.reject(e)}))},UIOptions:{canvasActions:{loadScene:!1}},isCollaborating:!0,theme:R?"dark":"light",onPointerUpdate:function(e){var n=e.pointer;null==A||A({paneId:H,path:c,$kind:"collaborator",pointer:n,selectedElementIds:x().getAppState().selectedElementIds||{}})},onChange:function(e,n,t){G(e),g.current(e)>M&&W(e,t)},name:E}):null,h?(0,f.Y)(nF.mL,{styles:[r4]}):null]})}function r3(e){var n=e.fs,t=e.filePath;return(0,f.Y)(r5,{fs:n,filePath:t},t)}var r6=t(40620),r8=h.ZU.Object({type:h.ZU.Literal("draw"),data:h.ZU.Object({path:h.ZU.String()})}),r7={Content:function(e){var n=e.pane,t=e.options.performPaneOperation;return(0,f.Y)(r9,{path:n.data.path,performPaneOperation:t})},Icon:function(e){var n=e.size;return(0,f.Y)(r6.A,{size:n})},getTitle:function(e){return(0,tt.WP)(e.data.path)},category:nQ.bY.WorkspaceFeatures,decode:function(e){return m.T(r8,e)}};function r9(e){var n=e.path,t=e.performPaneOperation,r=(0,A.A)().fs,i=(0,n5.KA)({path:n,performPaneOperation:t});return(0,tr.Qt)(function(){if(i)return{commands:[{commands:i}]}},[i]),(0,f.FD)(f.FK,{children:[(0,f.Y)(n5.ou,{path:n,performPaneOperation:t}),(0,f.Y)(n5.UC,{children:(0,f.Y)(r3,{fs:r,filePath:n})})]})}var ie=t(74837),it=t(45149),ir=h.ZU.Object({type:h.ZU.Literal("envEditor")}),ii={Content:function(e){var n=e.options.performPaneOperation,t=(0,A.A)().runner;return(0,f.Y)(ie.Ay,{getRunState:t.getRunState,performPaneOperation:n})},Icon:function(e){var n=e.size;return(0,f.Y)(it.A,{size:n})},getTitle:function(){return"Secrets"},description:"Store sensitive information (like API keys) securely in your App",category:nQ.bY.WorkspaceFeatures,decode:function(e){return m.T(ir,e)}},io=t(5504),ia=t(68912),il=t(97695),is=t(71115),ic=t(35084),iu=t(28069),id=t(80923),ip=t(95139),ih=t(13771),im=t(483),ig=t(49455),iv=t(79784),iw=t(75176),iy=t(73912),ib=t(56093),iS="The ".concat(iv.Lm," plan includes Basic ").concat(S.BP,". Upgrade for more capabilities."),iY=(0,V.x)({pill:[j.wp.cursor.pointer]}),iA=function(e){var n=(0,ib.A)(),t=n.showAiUpsell,r=n.refetch,i=(0,v._)((0,w.useState)(!1),2),o=i[0],a=i[1];return t?(0,f.FD)(f.FK,{children:[(0,f.Y)(P.m_,{tooltip:iS,children:(0,f.Y)(iy.a,{css:iY.pill,text:"BASIC",onClick:function(){return a(!0)}})}),(0,f.Y)(ih.A,{isOpen:o,onClose:function(){return a(!1)},type:"purchase",onPurchaseComplete:function(){var n;null==(n=e.onPurchaseComplete)||n.call(e),r()},reloadPageAfterPurchaseComplete:!0,contextualUpsell:(0,f.FD)(L.S,{gap:8,children:[(0,f.Y)(T.EY,{variant:"subheadBig",children:"Upgrade for Advanced AI"}),(0,f.Y)(T.EY,{multiline:!0,children:"Get the most advanced model with higher quality responses and generation"})]}),analyticsContext:{upgrade:{context:"ai_chat_upsell"}},highlightUpsell:"agent"})]}):null},ix=t(39782),iC=t(33131),i_=t(48052),ik=j.kL.max(520),iD=(0,V.x)({upgradeSurface:[j.wp.center,j.wp.borderRadius("container")],upgradeSurfaceAiItems:[(0,g._)({},ik,[j.wp.colWithGap(16)])],upgradeSurfaceAiItem:[j.wp.colWithGap(8),j.wp.align.center,j.wp.maxWidth(220),j.wp.textAlign.center],upgradeSurfaceAiItemTitle:[j.wp.rowWithGap(4),j.wp.align.center],shortText:[j.wp.display.none,(0,g._)({},ik,[j.wp.display.block])],longText:[j.wp.display.block,(0,g._)({},ik,[j.wp.display.none])]});function iE(){return(0,f.FD)(eu.ui,{elevated:!0,css:iD.upgradeSurface,p:16,gap:16,children:[(0,f.FD)(L.S,{children:[(0,f.Y)(L.S,{css:iD.longText,children:(0,f.Y)(iw.A,{context:"ai_chat_upsell",text:"Upgrade to Replit ".concat(iv.en," for more powerful AI"),variant:"default",highlightUpsell:"assistant"})}),(0,f.Y)(L.S,{css:iD.shortText,children:(0,f.Y)(iw.A,{context:"ai_chat_upsell",text:"Upgrade to ".concat(iv.en),variant:"default",highlightUpsell:"assistant",css:iD.shortText})})]}),(0,f.FD)(L.S,{css:iD.upgradeSurfaceAiItems,row:!0,gap:16,children:[(0,f.FD)(L.S,{css:iD.upgradeSurfaceAiItem,children:[(0,f.FD)(L.S,{css:iD.upgradeSurfaceAiItemTitle,children:[(0,f.Y)(i_.A,{size:16}),(0,f.Y)(T.EY,{variant:"subheadDefault",children:S.BP}),(0,f.Y)(iy.a,{text:"ADVANCED"})]}),(0,f.Y)(T.EY,{variant:"small",color:"dimmer",children:S.JY})]}),(0,f.FD)(L.S,{css:iD.upgradeSurfaceAiItem,children:[(0,f.FD)(L.S,{css:iD.upgradeSurfaceAiItemTitle,children:[(0,f.Y)(ix.l,{size:16}),(0,f.Y)(T.EY,{variant:"subheadDefault",children:"Agent"})]}),(0,f.Y)(T.EY,{variant:"small",color:"dimmer",children:S.RB})]})]})]})}function iR(){var e=(0,iC.A)();return(0,f.FD)(L.S,{row:!0,gap:4,align:"center",children:[(0,f.Y)(T.Y9,{level:1,variant:"subheadDefault",children:S.BP}),(0,f.Y)(iA,{onPurchaseComplete:e})]})}var iI=t(54087),iF=t(69258),iT="Connection to ".concat(S.BP," lost. Try refreshing the page."),iP=(0,V.x)({root:[{justifySelf:"end"}],errorBannerContainer:[j.wp.display.flex,j.wp.align.center,j.wp.flex.grow(1),j.wp.minHeight(32),j.wp.maxHeight(300),j.wp.overflow("auto")],errorBanner:[j.wp.minHeight("fit-content"),j.wp.p(8)]});function iL(){return(0,f.Y)(L.S,{css:iP.root,px:8,pb:8,children:(0,f.Y)(L.S,{css:iP.errorBannerContainer,justify:"center",children:(0,f.Y)(L.S,{css:iP.errorBanner,children:(0,f.Y)(iI.N,{icon:(0,f.Y)(iF.A,{}),colorway:"red",text:iT})})})})}var iU=t(51965),iN=function(){var e=(0,ib.A)(),n=e.showAiUpsell,t=e.refetch,r=(0,v._)((0,w.useState)(!1),2),i=r[0],o=r[1],a=(0,iC.A)();return n?(0,f.FD)(f.FK,{children:[(0,f.Y)(L.S,{tag:"button",css:iO.bannerWrapper,onClick:function(){return o(!0)},children:(0,f.Y)(iI.N,{icon:(0,f.Y)(iU.A,{}),colorway:"yellow",text:"Youre using the free Basic AI model. Upgrade to get better AI responses and more accurate code generation and analysis.",css:iO.banner})}),(0,f.Y)(ih.A,{isOpen:i,onClose:function(){return o(!1)},onPurchaseComplete:function(){t(),a()},reloadPageAfterPurchaseComplete:!0,type:"purchase",contextualUpsell:(0,f.FD)(L.S,{gap:8,children:[(0,f.Y)(T.EY,{variant:"subheadBig",children:"Upgrade for Advanced AI"}),(0,f.Y)(T.EY,{multiline:!0,children:"Get the most advanced model with higher quality responses and generation"})]}),analyticsContext:{upgrade:{context:"ai_chat_upsell"}},highlightUpsell:"agent"})]}):null},iO=(0,V.x)({bannerWrapper:[j.wp.cursor.pointer,j.wp.textAlign.left],banner:[j.wp.borderRadius(0)]}),iM=t(85259);function iB(e){return e.error&&e.error.type!==x.fqQ.EVENT_ERROR_TYPE_UNKNOWN?e.error.type:null}var iH=t(48899);let iz={direction:"reverse",state:{iterativeAgentEvents:[],didProcessLatestProposedActionsEvent:!1},transformer:function(e,n){var t=e.contents.contents;if((0,x.VFn)(t,"messageEventContents")){var r=(0,x.QNh)(t);if(e.sender.type===x.utd.USER)return{type:"userMessage",sender:{id:e.sender.id},uploadedFiles:r.uploadedFiles,codeReference:r.codeReference,content:r.content,targetedElement:r.targetedElement};var i,o,a,l,s,c,u,d,p,f,h,m,g,v,w,y,b,S,Y,A,C,_,k,D,E,R=iB(e),I=function(e){if(!(0,x.VFn)(e,"proposedFileChanges"))return{fileChanges:[],commitId:"",summary:""};var n=(0,x.QNh)(e),t=n.changes,r=n.commitId,i=n.summary;return{fileChanges:t.map(function(e){return(0,nt._)((0,ee._)({},e),{filePath:(0,iH.iD)(e.filePath)})}),commitId:r,summary:i}}((0,x.QNh)(t).extraActions),F=I.fileChanges,T=I.commitId,P=I.summary,L=(0,x.QNh)(t).assistantProposedActions,U=(0,x.ka6)(e),N=(o=L,a=F,l=(i=e.id,n.iterativeAgentEvents.filter(function(e){return(0,x.VFn)(e.contents,"installingPackages")||(0,x.VFn)(e.contents,"installedPackages")?(0,x.QNh)(e.contents).eventWhichProposedPackageInstall===i:(0,x.VFn)(e.contents,"startedShellExecution")||(0,x.VFn)(e.contents,"finishedShellExecution")?(0,x.QNh)(e.contents).eventWhichProposedShellExecution===i:(0,x.VFn)(e.contents,"appliedRunConfiguration")?(0,x.QNh)(e.contents).eventWhichProposedRunConfiguration===i:(0,x.VFn)(e.contents,"appliedDeploymentConfiguration")?(0,x.QNh)(e.contents).eventWhichProposedDeploymentConfiguration===i:!!(0,x.VFn)(e.contents,"appliedWorkflowConfiguration")&&(0,x.QNh)(e.contents).eventWhichProposedWorkflowConfiguration===i})),h=(null!=(s=null==o?void 0:o.shellCommands)?s:[]).map(function(e){var n,t,r;return l.forEach(function(r){(0,x.VFn)(r.contents,"startedShellExecution")&&r.contents.startedShellExecution.messageContentsOffset===e.messageContentsOffset&&(n=r.contents.startedShellExecution),(0,x.VFn)(r.contents,"finishedShellExecution")&&r.contents.finishedShellExecution.messageContentsOffset===e.messageContentsOffset&&(t=r.contents.finishedShellExecution)}),t&&t.processId===(null==n?void 0:n.processId)?{state:"finished",command:e.command,isDangerous:e.isDangerous,messageContentsOffset:e.messageContentsOffset,workingDirectory:e.workingDirectory,commandOutput:t.commandOutput,exitCode:t.exitCode}:n?{state:"running",command:e.command,isDangerous:e.isDangerous,messageContentsOffset:e.messageContentsOffset,workingDirectory:e.workingDirectory,processId:n.processId}:{state:"proposed",command:e.command,isDangerous:e.isDangerous,messageContentsOffset:e.messageContentsOffset,workingDirectory:e.workingDirectory}}),m=(null!=(c=null==o?void 0:o.packageInstalls)?c:[]).map(function(e){var n,t,r;return l.forEach(function(r){(0,x.VFn)(r.contents,"installingPackages")&&r.contents.installingPackages.messageContentsOffset===e.messageContentsOffset&&(n=r.contents.installingPackages),(0,x.VFn)(r.contents,"installedPackages")&&r.contents.installedPackages.messageContentsOffset===e.messageContentsOffset&&(t=r.contents.installedPackages)}),t&&t.processId===(null==n?void 0:n.processId)?{state:"installed",language:e.language,packageList:e.packageList,messageContentsOffset:e.messageContentsOffset,installationOutput:t.installationOutput,exitCode:t.exitCode}:n?{state:"installing",language:e.language,packageList:e.packageList,messageContentsOffset:e.messageContentsOffset,processId:n.processId}:{state:"proposed",language:e.language,packageList:e.packageList,messageContentsOffset:e.messageContentsOffset}}),g=null!=(u=o.workspaceToolNudges)?u:[],v=(null!=(d=o.runConfigurations)?d:[]).map(function(e){var n=l.some(function(n){return!!(0,x.VFn)(n.contents,"appliedRunConfiguration")&&n.contents.appliedRunConfiguration.messageContentsOffset===e.messageContentsOffset});return(0,ee._)({state:n?"applied":"proposed"},e)}),w=(null!=(p=o.workflowConfigurations)?p:[]).map(function(e){var n=l.some(function(n){return!!(0,x.VFn)(n.contents,"appliedWorkflowConfiguration")&&n.contents.appliedWorkflowConfiguration.messageContentsOffset===e.messageContentsOffset});return(0,ee._)({state:n?"applied":"proposed"},e)}),y=(null!=(f=o.deploymentConfigurations)?f:[]).map(function(e){var n=l.some(function(n){return!!(0,x.VFn)(n.contents,"appliedDeploymentConfiguration")&&n.contents.appliedDeploymentConfiguration.messageContentsOffset===e.messageContentsOffset});return(0,ee._)({state:n?"applied":"proposed"},e)}),b=(0,X._)(h.map(function(e){return(0,x.hT8)("shellCommand",e)})).concat((0,X._)(m.map(function(e){return(0,x.hT8)("packageInstall",e)})),(0,X._)(a.map(function(e){return(0,x.hT8)("fileChange",e)})),(0,X._)(g.map(function(e){return(0,x.hT8)("workspaceToolNudge",e)})),(0,X._)(v.map(function(e){return(0,x.hT8)("runConfiguration",e)})),(0,X._)(y.map(function(e){return(0,x.hT8)("deploymentConfiguration",e)})),(0,X._)(w.map(function(e){return(0,x.hT8)("workflowConfiguration",e)}))).sort(function(e,n){return(0,x.QNh)(e).messageContentsOffset-(0,x.QNh)(n).messageContentsOffset}),S=h.length>0,Y=m.length>0,A=v.length>0,C=y.length>0,_=w.length>0,{sortedActions:b,hasAnyWorkspaceProposedActions:S||Y||A||C||_}),O=N.sortedActions,M=N.hasAnyWorkspaceProposedActions,B=!1;return n.didProcessLatestProposedActionsEvent||(n.didProcessLatestProposedActionsEvent=B=L.didCountEditRequest||L.workflowConfigurations.length>0),{type:"assistantMessage",content:r.content,created:e.created,state:e.state,intent:{value:r.intent,kind:"message"},error:R,usedModelSelector:r.usedModelSelector,ragSources:function(e){var n=e.sources;if(null==n)return[];var t=n.slice().sort(function(e,n){return e.url.localeCompare(n.url)});return(0,iM.Qq)(t,"url")}(r),isDebugMessage:!1,sessionId:e.sessionId,proposedActions:(0,nt._)((0,ee._)({},L),{commitId:null!=(k=L.commitId)?k:T,summary:null!=(D=L.summary)?D:P,fileChanges:F,sortedActions:O,didCreateCheckpoint:null!=(E=L.didCreateCheckpoint)&&E,didCountEditRequest:U,hasAnyWorkspaceProposedActions:M}),isLatestProposedActionsEvent:B}}if((0,x.VFn)(t,"inlineActionEventContents")){var H=(0,x.QNh)(t);if(e.sender.type===x.utd.USER)return{type:"userMessage",sender:{id:e.sender.id},codeReference:H.codeReference,content:H.content};var z=iB(e);return{type:"assistantMessage",content:H.content,created:e.created,state:e.state,intent:{value:H.messageType,kind:"inline"},error:z,usedModelSelector:H.usedModelSelector,ragSources:[],isDebugMessage:H.messageType===x.Z1T.DEBUGGER,sessionId:e.sessionId,proposedActions:null,isLatestProposedActionsEvent:!1}}if((0,x.VFn)(t,"iterativeAgentEventContents")){var W=(0,x.QNh)(t);n.iterativeAgentEvents.push(W);var G=(0,x.zLm)(e);if(!G)return;return{type:"assistantAction",contents:W,created:e.created,sessionId:e.sessionId,eventIdWhichProposedAction:G}}}};var iW=t(97172),iG=t(29445),iV=t(38527),ij=t(71192),iZ=t(22318),iq=(0,V.x)({root:[j.wp.borderRadius(4),j.wp.border({color:k.LU.outlineDimmest})],header:[j.wp.border({color:k.LU.outlineDimmest,direction:"bottom"})],button:[{borderRadius:0,borderTopLeftRadius:4}]});function iK(e){var n=e.codeReference,t=e.onClick;return(0,f.FD)(eu.ui,{css:iq.root,elevated:!0,children:[(0,f.Y)(L.S,{css:iq.header,row:!0,gap:4,children:(0,f.Y)(eS.$n,{css:iq.button,size:"small",variant:"nofill",iconLeft:(0,f.Y)(ti.A,{size:12,path:n.filePath}),iconRight:(0,f.Y)(iZ.A,{}),text:"".concat(n.filePath," ").concat(n.range.lineFrom,":").concat(n.range.lineTo),onClick:t})}),(0,f.Y)(C.A,{lineNumbers:!0,lineNumbersStart:n.range.lineFrom,language:n.language,code:n.code,filePath:n.filePath})]})}var i$=t(45773),iJ=t(12520),iQ=t(21989);function iX(e){return(0,w.useCallback)(function(n){var t,r="string"==typeof n?{path:n}:n;e({type:null!=(t=(0,nQ.QY)(r))?t:"codeEditor",data:r})},[e])}var i0=(0,V.x)({event:[{justifyContent:"end"}],main:[j.wp.flex.growAndShrink(1)],userMessageAttachments:[j.wp.maxWidth("100%")],message:[j.wp.maxWidth(400),j.wp.px(8),j.wp.py(6),j.wp.borderRadius(),j.wp.colorMixBg(k.LU.accentPrimaryDefault,"transparent",.4)],codeReference:[{width:"100%"}]}),i1=(0,w.memo)(function(e){var n,t=e.data,r=e.openPane,i=e.readFile,o=iX(r);return t?(0,f.Y)(i2,{openFile:o,content:t.content,userId:Number(t.sender.id),codeReference:t.codeReference,uploadedFiles:t.uploadedFiles,readFile:i,targetedElement:null!=(n=t.targetedElement)?n:null}):null});function i2(e){var n=e.openFile,t=e.readFile,r=e.content,i=e.userId,o=e.codeReference,a=e.uploadedFiles,l=e.targetedElement,s=(0,i$.Vd)({openFile:n,messageSenderType:x.utd.USER});return(0,f.FD)(L.S,{css:i0.event,px:16,pt:32,pb:16,row:!0,gap:8,children:[(0,f.FD)(L.S,{css:i0.main,gap:8,align:"end",children:[a?(0,f.Y)(i4,{attachments:a,readFile:t}):null,(0,f.FD)(L.S,{css:i0.message,children:[(0,f.Y)(i$.d2,{text:r,codeComponent:s,messageState:x.qOk.COMPLETE}),l?(0,f.Y)(iJ.l,{targetedElement:l}):null]}),(null==o?void 0:o.code)?(0,f.Y)(L.S,{css:i0.codeReference,children:(0,f.Y)(iK,{codeReference:o,onClick:function(){var e=null==o?void 0:o.filePath;e&&n({path:e,line:null==o?void 0:o.range.lineTo})}})}):null]}),(0,f.Y)(L.S,{pt:6,children:(0,f.Y)(iQ.H,{id:i,showAvatarOnly:!0})})]})}function i4(e){var n=e.attachments,t=e.readFile;return 0===n.length?null:(0,f.Y)(L.S,{css:i0.userMessageAttachments,children:(0,f.Y)(iG.A,{fileAttachments:n.map(function(e){return(0,f.Y)(iV.m1,{attachment:e,readFile:t,getAttachmentTypeDisclaimer:(0,ij.F)({aiName:S.BP})},e.path)})})})}var i5=t(5793),i3=t(81646),i6=t(29775),i8=t(31258),i7=t(70973),i9=t(973),oe=t(32852),on=(0,V.x)({container:[j.wp.py(4),j.wp.px(8),j.wp.borderRadius(4),j.wp.flex.growAndShrink(1),j.wp.rowWithGap(8),j.wp.align.center,j.wp.border({color:"transparent"}),{backgroundColor:k.LU.interactiveBackground,"&.generation-complete":[i9.b.filledAndOutlined],"&.generation-in-progress":[nM.S.foregroundPulse()],"&.is-applied":[j.wp.py(2)]}],iconCol:[j.wp.py(4),{alignSelf:"flex-start"}],textCol:[j.wp.flex.growAndShrink(1),j.wp.colWithGap(4),j.wp.overflow("hidden")],filePathAndDiffLines:[j.wp.rowWithGap(4),j.wp.justify.spaceBetween,j.wp.align.center],filePath:[j.wp.flex.shrink(1)],diffLineStatsPill:[j.wp.fontWeight.medium],editSummary:[{".is-reverted &":[j.wp.color.foregroundDimmest,{textDecoration:"line-through"}]}]});function ot(e){var n=e.filePath,t=e.content,r=e.changeSummary,i=e.changeStatus,o=e.lineStats,a=e.onOpenDiff,l=e.state,s=l===x.u5I.GENERATION_COMPLETE,c=(0,w.useCallback)(function(){s&&a(n,{type:"generatedFile",content:t})},[n,a,s,t]);return(0,f.FD)(eu.ui,{css:on.container,className:"is-".concat(i.state," generation-").concat(function(e){switch(e){case x.u5I.GENERATION_IN_PROGRESS:return"in-progress";case x.u5I.GENERATION_REGENERATING:return"regenerating";case x.u5I.GENERATION_COMPLETE:return"complete";case x.u5I.GENERATION_ERROR:return"error";default:return"unknown"}}(l)),onClick:c,children:[(0,f.Y)(L.S,{css:on.iconCol,children:(0,f.Y)(ti.A,{path:n,fill:"reverted"===i.state?k.LU.foregroundDimmest:void 0})}),(0,f.FD)(L.S,{css:on.textCol,children:[(0,f.FD)(L.S,{css:on.filePathAndDiffLines,children:[(0,f.Y)(T.EY,{variant:"text",color:"default",multiline:!1,css:on.filePath,children:n}),"reverted"===i.state?(0,f.FD)(L.S,{row:!0,gap:4,align:"center",children:[(0,f.Y)(oe.A,{}),(0,f.Y)(T.EY,{variant:"text",color:"dimmer",children:"Reverted"})]}):s?(0,f.Y)(oi,{filePath:n,lineStats:o}):null]}),(0,f.Y)(L.S,{css:on.editSummary,children:(0,f.Y)(T.EY,{variant:"small",color:"dimmer",children:r})})]})]})}function or(e){var n=e.filePath,t=e.linesAdded,r=e.linesRemoved,i=e.onOpenDiff,o=e.commitHash;return(0,f.FD)(eu.ui,{css:on.container,className:"is-applied generation-complete",onClick:function(){return i(n,{type:"git",revision:o})},children:[(0,f.Y)(L.S,{css:on.iconCol,children:(0,f.Y)(ti.A,{path:n})}),(0,f.Y)(L.S,{css:on.textCol,children:(0,f.FD)(L.S,{css:on.filePathAndDiffLines,children:[(0,f.Y)(T.EY,{variant:"text",color:"default",children:n}),(0,f.Y)(oi,{filePath:n,lineStats:{added:t,removed:r}})]})})]})}function oi(e){var n=e.lineStats;return null==n?null:(0,f.FD)(L.S,{row:!0,gap:4,children:[(0,f.Y)(I.a,{css:on.diffLineStatsPill,compact:!0,colorway:"positive",text:"+".concat(n.added)}),(0,f.Y)(I.a,{css:on.diffLineStatsPill,compact:!0,colorway:"negative",text:"-".concat(n.removed)})]})}var oo=t(60423);function oa(e){var n=e.sessionId,t=e.eventIdWhichProposedShellExecution,r=(0,S.NC)(),i=(0,_.J2)(r.sessions.get(n));return{sendStartedShellExecutionMessage:(0,w.useCallback)(function(e){var n=e.processId,r=e.messageContentsOffset;return null==i?void 0:i.appendEvent({kind:"iterativeAgent",action:{eventIdWhichProposedShellExecution:t,processId:n,messageContentsOffset:r}})},[t,i]),sendFinishedShellExecutionMessage:(0,w.useCallback)(function(e){var n=e.commandOutput,r=e.exitCode,o=e.processId,a=e.messageContentsOffset;return null==i?void 0:i.appendEvent({kind:"iterativeAgent",action:{eventIdWhichProposedShellExecution:t,commandOutput:n,exitCode:r,processId:o,messageContentsOffset:a}})},[t,i])}}function ol(e){var n=e.sessionId,t=e.eventIdWhichProposedPackageInstall,r=(0,S.NC)(),i=(0,_.J2)(r.sessions.get(n));return{sendInstallingPackagesMessage:(0,w.useCallback)(function(e){var n=e.processId,r=e.messageContentsOffset;return null==i?void 0:i.appendEvent({kind:"iterativeAgent",action:{eventIdWhichProposedPackageInstall:t,processId:n,messageContentsOffset:r}})},[t,i]),sendInstalledPackagesMessage:(0,w.useCallback)(function(e){var n=e.installationOutput,r=e.exitCode,o=e.processId,a=e.messageContentsOffset;return null==i?void 0:i.appendEvent({kind:"iterativeAgent",action:{eventIdWhichProposedPackageInstall:t,installationOutput:n,messageContentsOffset:a,exitCode:r,processId:o}})},[t,i])}}function os(e){var n=e.sessionId,t=e.eventIdWhichProposedRunConfiguration,r=(0,S.NC)(),i=(0,_.J2)(r.sessions.get(n));return(0,w.useCallback)(function(e){var n=e.messageContentsOffset;return null==i?void 0:i.appendEvent({kind:"iterativeAgent",action:{eventIdWhichProposedRunConfiguration:t,messageContentsOffset:n}})},[t,i])}function oc(e){var n=e.sessionId,t=e.eventIdWhichProposedWorkflowConfiguration,r=(0,S.NC)(),i=(0,_.J2)(r.sessions.get(n));return(0,w.useCallback)(function(e){var n=e.messageContentsOffset;return null==i?void 0:i.appendEvent({kind:"iterativeAgent",action:{eventIdWhichProposedWorkflowConfiguration:t,messageContentsOffset:n}})},[t,i])}function ou(e){var n=e.sessionId,t=e.eventIdWhichProposedDeploymentConfiguration,r=(0,S.NC)(),i=(0,_.J2)(r.sessions.get(n));return(0,w.useCallback)(function(e){var n=e.messageContentsOffset;return null==i?void 0:i.appendEvent({kind:"iterativeAgent",action:{eventIdWhichProposedDeploymentConfiguration:t,messageContentsOffset:n}})},[t,i])}var od=t(64254).hp;function op(){var e=(0,io._P)({controlName:"flag-agent-sandbox"});return{spawnCommand:(0,e7.I)(function(n){var t;return t=(0,y._)(function(t){var r;return(0,b.YH)(this,function(i){switch(i.label){case 0:return[4,n.shellExec.spawn.rpc({cmd:"bash",args:["-ci",t],sandbox:e?{rules:[{operation:"Modify",prefixes:["/home/runner/workspace/.replit","/home/runner/workspace/replit.nix","/home/runner/workspace/.cache/replit/","/home/runner/workspace/.local/state/replit/"],message:"A protected file was prevented from being modified. These files are crucial for the correct functionality of the application and should not be modified"},{operation:"Delete",prefixes:["/home/runner/workspace/.replit","/home/runner/workspace/replit.nix","/home/runner/workspace/.local/state/replit/"],message:"A protected file was prevented from being deleted. These files are crucial for the correct functionality of the application and should not be modified"},{operation:"Delete",prefixes:["/home/runner/workspace/.git"],message:"An unsafe operation with git was blocked to protect your application's history and the ability to go back to other points in time."}]}:void 0})];case 1:if(!(r=i.sent()).ok)return[2,r];return[2,{ok:!0,payload:r.payload.id}]}})}),function(e){return t.apply(this,arguments)}},[e]),killProcessId:(0,e7.I)(function(e){var n;return n=(0,y._)(function(n){return(0,b.YH)(this,function(t){switch(t.label){case 0:return[4,e.shellExec.kill.rpc({id:n})];case 1:return[2,t.sent()]}})}),function(e){return n.apply(this,arguments)}},[]),waitAndGetCommandOutput:(0,e7.I)(function(e){var n;return n=(0,y._)(function(n){var t,r,i,o,a,l,s,c,u,d,p,f,h,m,g,v,w,y;return(0,b.YH)(this,function(b){switch(b.label){case 0:t=e.shellExec.monitor.subscribe({id:n}).resReadable,r=-1,i=!1,o=!1,b.label=1;case 1:b.trys.push([1,6,7,12]),l=(0,nn._)(t),b.label=2;case 2:return[4,l.next()];case 3:if(!(i=!(s=b.sent()).done))return[3,5];if((c=s.value).ok&&"Finished"===c.payload.state)return r=c.payload.exitCode,[3,5];b.label=4;case 4:return i=!1,[3,2];case 5:return[3,12];case 6:return u=b.sent(),o=!0,a=u,[3,12];case 7:if(b.trys.push([7,,10,11]),!(i&&null!=l.return))return[3,9];return[4,l.return()];case 8:b.sent(),b.label=9;case 9:return[3,11];case 10:if(o)throw a;return[7];case 11:return[7];case 12:d=e.shellExec.readBuffer.subscribe({id:n}).resReadable,p=od.alloc(0),f=!1,h=!1,b.label=13;case 13:b.trys.push([13,18,19,24]),g=(0,nn._)(d),b.label=14;case 14:return[4,g.next()];case 15:if(!(f=!(v=b.sent()).done))return[3,17];if((w=v.value).ok&&"output"===w.payload.$kind&&(p=od.concat([p,w.payload.output])),w.ok&&"finished"===w.payload.$kind)return[2,{commandOutput:p.toString(),exitCode:r,processId:n}];b.label=16;case 16:return f=!1,[3,14];case 17:return[3,24];case 18:return y=b.sent(),h=!0,m=y,[3,24];case 19:if(b.trys.push([19,,22,23]),!(f&&null!=g.return))return[3,21];return[4,g.return()];case 20:b.sent(),b.label=21;case 21:return[3,23];case 22:if(h)throw m;return[7];case 23:return[7];case 24:return[2]}})}),function(e){return n.apply(this,arguments)}},[])}}var of=t(16679),oh=t(77964),om=t(1369),og=t(34640),ov=t(18942),ow=(0,V.x)({container:[j.wp.borderRadius(4),j.wp.flex.growAndShrink(1),j.wp.border({width:1,color:k.LU.interactiveBorder}),{"> div":{alignItems:"start"},"> div > button":[j.wp.mt(4),j.wp.mr(4)]}],headerWrapper:[j.wp.width("100%"),j.wp.flex.growAndShrink(1)],headerInner:[j.wp.width("100%")],textWrapper:[j.wp.flex.growAndShrink(1),j.wp.flex.wrap,j.wp.font.code,{lineHeight:k.LU.lineHeightDefault}],actionsWrapper:[j.wp.flex.growAndShrink(0),j.wp.height("100%")],terminalWrapper:[j.wp.width("100%"),{"> div":j.wp.borderRadius(0,0,4,4)}],warningIcon:[j.wp.mx(4)]});function oy(e){var n=e.command,t=e.eventId,r=e.sessionId,i=e.openPane,o=(0,v._)((0,w.useState)("proposed"!==n.state),2),a=o[0],l=o[1],s=op(),c=s.spawnCommand,u=s.killProcessId,d=s.waitAndGetCommandOutput,p=oa({sessionId:r,eventIdWhichProposedShellExecution:t}),h=p.sendStartedShellExecutionMessage,m=p.sendFinishedShellExecutionMessage;(0,w.useEffect)(function(){"running"===n.state&&l(!0),"finished"===n.state&&0===n.commandOutput.length&&l(!1)},[n]);var g=(0,w.useCallback)((0,y._)(function(){var e,t,r,i;return(0,b.YH)(this,function(o){switch(o.label){case 0:if(!c||!u||!d)return[2];if("running"!==n.state)return[3,2];return[4,u(n.processId)];case 1:case 6:return o.sent(),[2];case 2:return[4,c(n.command)];case 3:if(!(null==(e=o.sent())?void 0:e.ok))return[2];return[4,h({processId:t=e.payload,messageContentsOffset:n.messageContentsOffset})];case 4:if(!(null==(r=o.sent())?void 0:r.ok))return[2];return[4,d(t)];case 5:if(!(i=o.sent()))return[2];return[4,m((0,nt._)((0,ee._)({},i),{messageContentsOffset:n.messageContentsOffset}))]}})}),[n,u,m,h,c,d]),S=(0,w.useCallback)(function(){i({type:"shell",data:{initialCmd:"".concat(n.command,"\n")}})},[n.command,i]);return(0,f.Y)(ob,{command:n,isExpanded:a,toggleExpanded:function(){return l(function(e){return!e})},openPane:i,onRunInline:g,onRunInShell:S})}function ob(e){var n=e.command,t=e.isExpanded,r=e.toggleExpanded,i=e.openPane,o=e.onRunInline,a=e.onRunInShell,l=(0,f.Y)(oh.A,{}),s="Run";return"running"===n.state&&(l=(0,f.Y)(ov.A,{}),s="Stop"),"finished"===n.state&&(l=(0,f.Y)(om.A,{}),s="Run again"),(0,f.Y)(eu.ui,{elevated:!0,children:(0,f.Y)(D.A,{css:ow.container,expanded:t,onClick:r,disabled:"proposed"===n.state,chevron:"start",toggleOn:"chevron",headerContent:(0,f.Y)(L.S,{css:ow.headerWrapper,row:!0,children:(0,f.FD)(L.S,{row:!0,gap:8,align:"center",justify:"space-between",css:ow.headerInner,children:[(0,f.Y)(L.S,{row:!0,gap:8,align:"center",css:ow.textWrapper,children:n.command}),(0,f.Y)(L.S,{align:"start",css:ow.actionsWrapper,children:(0,f.FD)(L.S,{row:!0,gap:4,align:"center",children:[(0,f.Y)(eY.K0,{size:24,alt:"Run in Shell",onClick:a,children:(0,f.Y)(og.A,{})}),(0,f.Y)(eS.$n,{size:"small",colorway:"proposed"===n.state?"primary":void 0,text:s,iconLeft:l,onClick:o}),n.isDangerous?(0,f.Y)(P.m_,{tooltip:"This command is potentially dangerous!",children:(0,f.Y)(iF.A,{color:k.LU.accentNegativeDefault,css:ow.warningIcon})}):null]})})]})}),children:(0,f.FD)(L.S,{css:ow.terminalWrapper,children:["running"===n.state?(0,f.Y)(oo.A,{processId:n.processId,maxHeight:160,openPane:i,interactive:!0}):null,"finished"===n.state?(0,f.Y)(of.xd,{output:n.commandOutput,maxHeight:160,openPane:i}):null]})})})}var oS=t(24634);function oY(){var e,n=(0,A.A)().fs;return(0,w.useCallback)((e=(0,y._)(function(e){var t,r,i,o,a,l,s,c,u,d,p,f,h,m;return(0,b.YH)(this,function(g){switch(g.label){case 0:t=e.changes,r=new Map,i=!0,o=!1,a=void 0,g.label=1;case 1:g.trys.push([1,6,7,8]),l=t[Symbol.iterator](),g.label=2;case 2:if(i=(s=l.next()).done)return[3,5];if((c=s.value).state!==x.u5I.GENERATION_COMPLETE)return[3,4];return u=[""],[4,n.readFile(c.filePath)];case 3:(d=g.sent()).error||(u=d.content.toString().split("\n")),p=ni.EY.of(u),f=ni.EY.of(c.content.split("\n")),h=oS.o.create(p,f),r.set(c.filePath,h.getLineStats()),g.label=4;case 4:return i=!0,[3,2];case 5:return[3,8];case 6:return m=g.sent(),o=!0,a=m,[3,8];case 7:try{i||null==l.return||l.return()}finally{if(o)throw a}return[7];case 8:return[2,r]}})}),function(n){return e.apply(this,arguments)}),[n])}var oA=t(23099),ox=t.n(oA);function oC(e){var n=e.changeStatus,t=e.removePane,r=(0,G.tL)(),i=(0,v._)((0,w.useState)(null),2),o=i[0],a=i[1],l=(0,w.useRef)(n);return(0,w.useEffect)(function(){if("applied"!==l.current.state&&"applied"===n.state&&null!=o){var e,i=null==(e=r.find(function(e){var n=(0,v._)(e,2),t=(n[0],n[1]);return"diff"===t.type&&ox()(t.data,o)}))?void 0:e[0];i&&(t(i),a(null))}l.current=n},[n,o,r,t]),{onOpenTemporaryDiffPane:a}}var o_=t(26055),ok=t(31628),oD=t(52017);function oE(){var e,n=(0,ok.T)(),t=(0,nV.mP)(),r=(0,nV.Eo)(),i=(0,nV.Ss)(),o=(0,nV.z1)();return(0,w.useCallback)((e=(0,y._)(function(e){var a,l,s,c,u;return(0,b.YH)(this,function(d){if(!n)return[2];if(a=t.findIndex(function(n){return n.name===e.workflowName}),l=e.commands.map(function(e){return{task:"shell.exec",args:e}}),s="sequential"===e.mode?"sequential":"parallel",a>=0){if("agent"===(u=t[a]).author||(null==(c=u.metadata)?void 0:c.generated))return[2];i(a,function(e){var n=t[a].tasks;e.tasks=(0,oD.pC)(n,l)},{persist:!0})}else r({name:e.workflowName,author:n,tasks:l,mode:s});return e.setRunButton&&o(e.workflowName),[2]})}),function(n){return e.apply(this,arguments)}),[n,t,i,r,o])}var oR=t(18870),oI=t(19465),oF=(0,V.x)({container:[j.wp.borderRadius(4),j.wp.flex.growAndShrink(1),j.wp.border({width:1,color:k.LU.interactiveBorder})],infoWrapper:[j.wp.flex.growAndShrink(1),j.wp.flex.wrap],inlineRunButton:[j.wp.display.inlineFlex,j.wp.backgroundColor.greyDimmest,j.wp.color.greyStrongest,j.wp.align.center,j.wp.borderRadius(8),j.wp.py(2),j.wp.px(6),j.wp.mx(2)],actionsWrapper:[j.wp.flex.growAndShrink(0)]});function oT(e){var n=e.text;return(0,f.FD)(L.S,{css:oF.inlineRunButton,row:!0,gap:6,children:[(0,f.Y)(oh.A,{size:12}),(0,f.Y)(T.EY,{children:n})]})}function oP(e){var n,t=e.workflowConfiguration,r=e.eventId,i=e.sessionId,o=e.openPane,a=(0,w.useCallback)(function(){o({type:"workflows"})},[o]),l=oE(),s=oc({sessionId:i,eventIdWhichProposedWorkflowConfiguration:r}),c=(0,w.useCallback)(function(){l(t),s({messageContentsOffset:t.messageContentsOffset})},[l,s,t]);return(0,f.FD)(eu.ui,{elevated:!0,css:oF.container,p:8,children:[(0,f.FD)(L.S,{row:!0,align:"start",justify:"space-between",children:[(0,f.FD)(L.S,{row:!0,align:"center",gap:8,css:oF.infoWrapper,children:["Set",(0,f.Y)(oT,{text:t.workflowName}),"to run"]}),(0,f.FD)(L.S,{row:!0,gap:4,align:"center",css:oF.actionsWrapper,children:[(0,f.Y)(eY.K0,{size:24,alt:"Open Workflows",onClick:a,children:(0,f.Y)(oI.A,{})}),(0,f.Y)(eS.$n,{size:"small",colorway:"proposed"===t.state?"primary":void 0,onClick:c,text:"proposed"===t.state?"Apply":"Applied",disabled:"proposed"!==t.state,iconLeft:(0,f.Y)(oR.A,{})})]})]}),(0,f.Y)(o_.qv,{workflow:(n=t.commands.map(function(e){return{task:"shell.exec",args:e}}),{name:t.workflowName,tasks:n,mode:t.mode}),readOnlyMode:!0,simplified:!0})]})}var oL=t(47388),oU=(0,V.x)({container:[j.wp.borderRadius(4),j.wp.flex.growAndShrink(1),j.wp.rowWithGap(8),i9.b.filledAndOutlined],iconCol:[j.wp.py(4)],textCol:[j.wp.flex.growAndShrink(1),j.wp.justify.center]});function oN(e){var n=e.toolName,t=e.openPane,r=(0,nQ.Vv)();return oO.includes(n)?(0,f.FD)(eu.ui,{css:oU.container,px:8,py:4,onClick:function(){return t({type:n})},children:[(0,f.Y)(L.S,{css:oU.iconCol,children:r.Icon({pane:{type:n},size:16})}),(0,f.FD)(L.S,{css:oU.textCol,children:[(0,f.Y)(T.EY,{color:"default",children:r.getTitle({type:n})}),(0,f.Y)(T.EY,{color:"dimmer",variant:"small",children:r.getDescription({type:n})})]}),(0,f.Y)(L.S,{css:oU.iconCol,children:(0,f.Y)(oL.A,{})})]}):null}var oO=["agentChat","deployments","envEditor"];function oM(){return(0,e7.I)(function(e){var n;return n=(0,y._)(function(n){var t,r;return(0,b.YH)(this,function(i){return t=n.buildCommand,r=n.runCommand,[2,e.agentToolDeployConfig.update.rpc({build:t?["sh","-c",t]:void 0,run:["sh","-c",r]})]})}),function(e){return n.apply(this,arguments)}},[])}var oB=t(92855),oH=(0,V.x)({container:[j.wp.borderRadius(4),j.wp.flex.growAndShrink(1),j.wp.border({width:1,color:k.LU.interactiveBorder})],runCommandPill:[j.wp.font.code,j.wp.flex.growAndShrink(0)],infoWrapper:[j.wp.flex.growAndShrink(1),j.wp.flex.wrap,j.wp.height("100%")],actionsWrapper:[j.wp.flex.growAndShrink(0)]});function oz(e){var n=e.deploymentConfiguration,t=e.eventId,r=e.sessionId,i=e.openPane,o=(0,w.useCallback)(function(){i({type:"deployments"})},[i]),a=oM(),l=ou({sessionId:r,eventIdWhichProposedDeploymentConfiguration:t}),s=(0,w.useCallback)((0,y._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:if(!a)return[2];return[4,a({buildCommand:n.buildCommand,runCommand:n.runCommand})];case 1:if(!e.sent().ok)return[2];return[4,l({messageContentsOffset:n.messageContentsOffset})];case 2:return e.sent(),[2]}})}),[a,n.buildCommand,n.messageContentsOffset,n.runCommand,l]),c=n.buildCommand.length>0,u="Set deployment run command to ";return c&&(u=" and run command to "),(0,f.Y)(eu.ui,{elevated:!0,css:oH.container,p:8,children:(0,f.FD)(L.S,{row:!0,align:"start",justify:"space-between",children:[(0,f.FD)(L.S,{row:!0,align:"center",gap:8,css:oH.infoWrapper,children:[c?(0,f.FD)(f.FK,{children:["Set deployment build command to"," ",(0,f.Y)(I.a,{text:n.buildCommand,css:oH.runCommandPill})]}):null,u,(0,f.Y)(I.a,{text:n.runCommand,css:oH.runCommandPill})]}),(0,f.FD)(L.S,{row:!0,gap:4,align:"center",css:oH.actionsWrapper,children:[(0,f.Y)(eY.K0,{size:24,alt:"Open Deployments",onClick:o,children:(0,f.Y)(oB.A,{})}),(0,f.Y)(eS.$n,{size:"small",onClick:s,text:"proposed"===n.state?"Apply":"Applied",disabled:"proposed"!==n.state,colorway:"proposed"===n.state?"primary":void 0,iconLeft:(0,f.Y)(oR.A,{})})]})]})})}var oW=t(77485),oG=t(64254).hp;function oV(){return{spawnInstall:(0,e7.I)(function(e){var n;return n=(0,y._)(function(n){var t,r,i;return(0,b.YH)(this,function(o){switch(o.label){case 0:return t=n.language,r=n.packageList,[4,e.agentToolPackager.spawnInstallPackages.rpc({language:t,pkgs:r})];case 1:if(!(i=o.sent()).ok)return[2,i];return[2,{ok:!0,payload:i.payload.id}]}})}),function(e){return n.apply(this,arguments)}},[]),waitAndGetSpawnedInstallPackagesResult:(0,e7.I)(function(e){var n;return n=(0,y._)(function(n){var t,r,i,o,a,l,s,c,u,d;return(0,b.YH)(this,function(p){switch(p.label){case 0:t=e.agentToolPackager.waitAndGetSpawnedInstallPackagesResult.subscribe({processId:n}).resReadable,r=oG.alloc(0),i=!1,o=!1,p.label=1;case 1:p.trys.push([1,6,7,12]),l=(0,nn._)(t),p.label=2;case 2:return[4,l.next()];case 3:if(!(i=!(s=p.sent()).done))return[3,5];if((c=s.value).ok&&"output"===c.payload.$kind&&(r=oG.concat([r,c.payload.output])),c.ok&&"finished"===c.payload.$kind)return u=c.payload.exitCode,[2,{installationOutput:r.toString(),exitCode:u}];p.label=4;case 4:return i=!1,[3,2];case 5:return[3,12];case 6:return d=p.sent(),o=!0,a=d,[3,12];case 7:if(p.trys.push([7,,10,11]),!(i&&null!=l.return))return[3,9];return[4,l.return()];case 8:p.sent(),p.label=9;case 9:return[3,11];case 10:if(o)throw a;return[7];case 11:return[7];case 12:return[2]}})}),function(e){return n.apply(this,arguments)}})}}function oj(e){var n,t,r=e.eventId,i=e.packageInstall,o=e.sessionId,a=e.openPane,l=(n=(0,A.A)().git,(0,w.useCallback)((t=(0,y._)(function(e){var t,r;return(0,b.YH)(this,function(i){switch(i.label){case 0:return[4,n.status()];case 1:if((t=i.sent()).error)return[2,t];if(0===(r=null!=e?e:t.changes.map(function(e){return e.path})).length)return[2];return[2,n.stageFiles({add:r})]}})}),function(e){return t.apply(this,arguments)}),[n])),s=(0,v._)((0,w.useState)("installed"===i.state&&0!==i.exitCode),2),c=s[0],u=s[1];(0,w.useEffect)(function(){"installing"===i.state&&u(!0),"installed"===i.state&&0===i.exitCode&&u(!1)},[i]);var d=oV(),p=d.spawnInstall,h=d.waitAndGetSpawnedInstallPackagesResult,m=ol({sessionId:o,eventIdWhichProposedPackageInstall:r}),g=m.sendInstallingPackagesMessage,S=m.sendInstalledPackagesMessage,Y=(0,w.useCallback)((0,y._)(function(){var e,n,t;return(0,b.YH)(this,function(r){switch(r.label){case 0:if(!p||!h)return[2];return u(!0),[4,null==p?void 0:p({language:i.language,packageList:i.packageList})];case 1:if(!(null==(e=r.sent())?void 0:e.ok))return[2];return[4,g({processId:n=e.payload,messageContentsOffset:i.messageContentsOffset})];case 2:return r.sent(),[4,h(n)];case 3:if(!(t=r.sent()))return[2];return 0===t.exitCode&&u(!1),[4,S({installationOutput:t.installationOutput,exitCode:t.exitCode,processId:n,messageContentsOffset:i.messageContentsOffset})];case 4:return r.sent(),[4,l()];case 5:return r.sent(),[2]}})}),[p,h,i,g,S,l]);return(0,f.Y)(oq,{packageInstall:i,isExpanded:c,toggleExpanded:function(){return u(function(e){return!e})},openPane:a,onInstallClick:Y})}var oZ=(0,V.x)({container:[j.wp.borderRadius(4),j.wp.flex.growAndShrink(1),j.wp.border({width:1,color:k.LU.interactiveBorder}),{"> div":{alignItems:"start"},"> div > button":[j.wp.mt(4),j.wp.mr(4)]}],headerWrapper:[j.wp.width("100%"),j.wp.flex.growAndShrink(1)],headerInner:[j.wp.mb(2)],packagesWrapper:[j.wp.width("100%"),j.wp.py(4),{display:"flex",flexDirection:"row",flexWrap:"wrap",gap:k.LU.space8}],package:[j.wp.borderRadius(4),j.wp.px(8),j.wp.py(4),j.wp.width("calc(50% - ".concat(k.LU.space4,")")),j.wp.backgroundColor.backgroundHighest],terminalWrapper:[j.wp.width("100%"),{"> div":j.wp.borderRadius(0,0,4,4)}]});function oq(e){var n=e.packageInstall,t=e.isExpanded,r=e.toggleExpanded,i=e.openPane,o=e.onInstallClick,a=(0,w.useCallback)(function(){i({type:"dependencies"})},[i]),l="Install",s=(0,f.Y)(tF.A,{}),c=!1;return"installing"===n.state&&(l="Installing...",s=(0,f.Y)(to.A,{}),c=!0),"installed"===n.state&&(l="Installed",s=(0,f.Y)(oR.A,{}),c=!0),(0,f.Y)(eu.ui,{elevated:!0,children:(0,f.Y)(D.A,{css:oZ.container,expanded:t,onClick:r,disabled:"proposed"===n.state,chevron:"start",toggleOn:"chevron",headerContent:(0,f.FD)(L.S,{css:oZ.headerWrapper,children:[(0,f.FD)(L.S,{row:!0,gap:8,align:"center",justify:"space-between",css:oZ.headerInner,children:[(0,f.Y)(T.EY,{variant:"text",color:"default",children:"Dependencies"}),(0,f.FD)(L.S,{row:!0,gap:4,align:"center",children:[(0,f.Y)(eY.K0,{size:24,alt:"Open Dependencies",onClick:a,children:(0,f.Y)(t5.A,{})}),(0,f.Y)(eS.$n,{text:l,iconLeft:s,disabled:c,size:"small",colorway:"proposed"===n.state?"primary":void 0,onClick:o})]})]}),(0,f.Y)(L.S,{css:oZ.packagesWrapper,children:n.packageList.map(function(e,n){return(0,f.Y)(eu.ui,{css:oZ.package,row:!0,gap:8,align:"center",justify:"space-between",children:(0,f.FD)(L.S,{row:!0,gap:4,align:"center",children:[(0,f.Y)(tF.A,{}),(0,f.Y)(T.EY,{children:e})]})},n+"-"+e)})})]}),children:(0,f.FD)(L.S,{css:oZ.terminalWrapper,children:["installing"===n.state?(0,f.Y)(oW.A,{processId:n.processId,openPane:i,maxHeight:160}):null,"installed"===n.state?(0,f.Y)(of.xd,{output:n.installationOutput,maxHeight:160,openPane:i}):null]})})})}function oK(){var e,n=(0,ok.T)(),t=(0,nV.mP)(),r=(0,nV.Eo)(),i=(0,nV.Ss)(),o=(0,nV.z1)();return(0,w.useCallback)((e=(0,y._)(function(e){var a;return(0,b.YH)(this,function(l){return n&&((a=t.findIndex(function(n){return n.name===e.workflowName}))>=0?i(a,function(n){var t="agent"===n.author,r=n.tasks.find(function(n){return"shell.exec"===n.task&&n.args===e.oldCommand});if(r)r.args=e.newCommand;else{if(t){var i=n.tasks.find(function(e){return"shell.exec"===e.task}),o=n.tasks.filter(function(e){return"shell.exec"!==e.task});n.tasks=(0,X._)(o).concat([(0,nt._)((0,ee._)({},i),{task:"shell.exec",args:e.newCommand})]);return}n.tasks=[{task:"shell.exec",args:e.newCommand}]}},{persist:!0}):r({name:e.workflowName,author:n,tasks:[{task:"shell.exec",args:e.newCommand}]}),e.setRunButton&&o(e.workflowName)),[2]})}),function(n){return e.apply(this,arguments)}),[n,t,i,r,o])}var o$=(0,V.x)({container:[j.wp.borderRadius(4),j.wp.flex.growAndShrink(1),j.wp.border({width:1,color:k.LU.interactiveBorder})],infoWrapper:[j.wp.flex.growAndShrink(1),j.wp.flex.wrap],runCommandPill:[j.wp.font.code,j.wp.flex.growAndShrink(0)],inlineRunButton:[j.wp.display.inlineFlex,j.wp.backgroundColor.greyDimmest,j.wp.color.greyStrongest,j.wp.align.center,j.wp.borderRadius(8),j.wp.py(2),j.wp.px(6),j.wp.mx(2)],actionsWrapper:[j.wp.flex.growAndShrink(0)]});function oJ(e){var n=e.text;return(0,f.FD)(L.S,{css:o$.inlineRunButton,row:!0,gap:6,children:[(0,f.Y)(oh.A,{size:12}),(0,f.Y)(T.EY,{children:n})]})}function oQ(e){var n=e.runConfiguration,t=e.eventId,r=e.sessionId,i=e.openPane,o=(0,w.useCallback)(function(){i({type:"workflows"})},[i]),a=oK(),l=os({sessionId:r,eventIdWhichProposedRunConfiguration:t}),s=(0,w.useCallback)(function(){a(n),l({messageContentsOffset:n.messageContentsOffset})},[a,l,n]);return(0,f.Y)(eu.ui,{elevated:!0,css:o$.container,p:8,children:(0,f.FD)(L.S,{row:!0,align:"start",justify:"space-between",children:[(0,f.FD)(L.S,{row:!0,align:"center",gap:8,css:o$.infoWrapper,children:["Set",(0,f.Y)(oJ,{text:n.workflowName}),"to",(0,f.Y)(I.a,{text:n.newCommand,css:o$.runCommandPill})]}),(0,f.FD)(L.S,{row:!0,gap:4,align:"center",css:o$.actionsWrapper,children:[(0,f.Y)(eY.K0,{size:24,alt:"Open Workflows",onClick:o,children:(0,f.Y)(oI.A,{})}),(0,f.Y)(eS.$n,{size:"small",colorway:"proposed"===n.state?"primary":void 0,onClick:s,text:"proposed"===n.state?"Apply":"Applied",disabled:"proposed"!==n.state,iconLeft:(0,f.Y)(oR.A,{})})]})]})})}function oX(e){var n=e.sessionId,t=e.eventIdWhichProposedChanges,r=(0,S.NC)(),i=(0,_.Rj)(function(){return n?r.sessions.get(n):void 0},[n,r]),o=(0,_.Rj)(function(){return null==i?void 0:i.reduce(o0,1e3)},[i]);return(0,w.useMemo)(function(){var e=null==o?void 0:o[t];return null!=e?e:{state:"pending"}},[o,t])}var o0={direction:"reverse",state:{},reducer:function(e,n){if((null==(t=e.contents.contents)?void 0:t.$kind)==="iterativeAgentEventContents"){var t,r=e.contents.contents.iterativeAgentEventContents.contents;if((null==r?void 0:r.$kind)==="appliedFileChanges"){var i=r.appliedFileChanges.eventWhichProposedChanges;if(n[i])return;n[i]={state:"applied",appliedChanges:r.appliedFileChanges.appliedChanges,commitHash:r.appliedFileChanges.commitHash};return}if((null==r?void 0:r.$kind)==="revertedFileChanges"){var o=r.revertedFileChanges.eventWhichProposedChanges;if(n[o])return;n[o]={state:"reverted",revertedChanges:r.revertedFileChanges.revertedChanges};return}}}},o1=t(49444);let o2=(0,w.memo)(function(e){var n=e.text,t=e.ragSources,r=e.proposedActions,i=e.eventId,o=e.eventState,a=e.markdownCodeComponent,l=e.markdownLinkComponent,s=e.sessionId,c=e.openPane,u=e.removePane,d=[];null!=t&&d.push((0,f.Y)(o5,{eventState:o,ragSources:t,openPane:c},"rag-sources"));var p=null!=r?r:{sortedActions:[],commitId:"",fileChanges:[]},h=p.sortedActions,m=p.commitId,g=p.fileChanges,S=oY(),Y=(0,v._)((0,w.useState)(function(){return new Map}),2),A=Y[0],C=Y[1];(0,w.useEffect)(function(){function e(){return(e=(0,y._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:return[4,S({changes:g})];case 1:return C(e.sent()),[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[g,S]);var _=h.reduce(function(e,t){var r=(0,x.QNh)(t).messageContentsOffset;if(null==r||!s)return e;var d=(0,X._)(e.parts);if(d.push((0,f.Y)(i$.d2,{text:n.slice(e.chars,r),codeComponent:a,linkComponent:l,messageState:o},"text-slice-".concat(e.chars,"-to-").concat(r))),(0,x.VFn)(t,"fileChange")){var p=(0,x.QNh)(t);d.push((0,f.Y)(o3,{change:p,commitId:m,lineStats:A.get(p.filePath),sessionId:s,eventId:i,openPane:c,removePane:u},p.filePath))}else if((0,x.VFn)(t,"shellCommand")){var h=(0,x.QNh)(t);d.push((0,f.Y)(oy,{command:h,openPane:c,eventId:i,sessionId:s},h.command))}else if((0,x.VFn)(t,"packageInstall"))d.push((0,f.Y)(oj,{eventId:i,sessionId:s,packageInstall:t.packageInstall,openPane:c},t.packageInstall.language+"---"+t.packageInstall.packageList.join("-")));else if((0,x.VFn)(t,"workspaceToolNudge")){var g=(0,x.QNh)(t);"deployments"===g.toolName?d.push((0,f.Y)(i7.K4,{onConfigure:function(){return c({type:"deployments"})},paneType:"ghostwriterChat"},g.toolName)):d.push((0,f.Y)(o6,{nudge:g,openPane:c},g.toolName))}else(0,x.VFn)(t,"runConfiguration")?d.push((0,f.Y)(oQ,{runConfiguration:t.runConfiguration,openPane:c,eventId:i,sessionId:s},t.runConfiguration.workflowName+"---"+t.runConfiguration.oldCommand+"---"+t.runConfiguration.newCommand)):(0,x.VFn)(t,"deploymentConfiguration")?d.push((0,f.Y)(oz,{deploymentConfiguration:t.deploymentConfiguration,openPane:c,eventId:i,sessionId:s},t.deploymentConfiguration.buildCommand+"---"+t.deploymentConfiguration.runCommand)):(0,x.VFn)(t,"workflowConfiguration")&&d.push((0,f.Y)(oP,{workflowConfiguration:t.workflowConfiguration,openPane:c,eventId:i,sessionId:s},t.workflowConfiguration.workflowName+"---"+t.workflowConfiguration.commands.join("&&")));return{chars:r,parts:d}},{chars:0,parts:d}),k=_.chars,D=_.parts,E=n.slice(k).trim();E.length>0&&D.push((0,f.Y)(i$.d2,{text:E,codeComponent:a,linkComponent:l,messageState:o},"remaining-text"));var R=h.filter(function(e){return null==(0,x.QNh)(e).messageContentsOffset}),I=!0,F=!1,T=void 0;try{for(var P,L=R[Symbol.iterator]();!(I=(P=L.next()).done);I=!0){var U=P.value;if((0,x.VFn)(U,"fileChange")){var N=(0,x.QNh)(U);D.push((0,f.Y)(o3,{change:N,commitId:m,lineStats:A.get(N.filePath),sessionId:s,eventId:i,openPane:c,removePane:u},N.filePath))}}}catch(e){F=!0,T=e}finally{try{I||null==L.return||L.return()}finally{if(F)throw T}}return(0,f.Y)(f.FK,{children:D})});var o4=(0,V.x)({container:[j.wp.borderRadius()],accordionItem:[j.wp.flex.growAndShrink(1)],list:[j.wp.display.flex,j.wp.colWithGap(2),j.wp.p(4),j.wp.border({color:k.LU.outlineDefault}),j.wp.borderRadius()],listItem:[j.wp.cursor.pointer,i9.b.listItem,j.wp.p(4),j.wp.borderRadius(4)],header:[j.wp.color.foregroundDimmer]});function o5(e){var n=e.eventState,t=e.ragSources,r=e.openPane;if(0===t.length)return null;var i=(0,i8.A)("file",t.length);return(0,f.Y)(eu.ui,{css:o4.container,row:!0,children:(0,f.Y)(D.A,{css:o4.accordionItem,headerContent:(0,f.FD)(L.S,{row:!0,gap:6,align:"center",css:o4.header,children:[(0,f.Y)(o1.A,{}),(0,f.Y)(T.EY,{children:n===x.qOk.IN_PROGRESS?"Reading ".concat(t.length," ").concat(i,""):"Read ".concat(t.length," ").concat(i)})]}),children:(0,f.Y)("ul",{"aria-label":"RAG sources",css:o4.list,children:t.map(function(e){var n=(0,i6.A)(e.url);return(0,f.Y)("li",{children:(0,f.FD)(L.S,{css:o4.listItem,row:!0,gap:4,onClick:function(){return r({type:"codeEditor",data:{path:n}})},children:[(0,f.Y)(ti.A,{path:n,size:16}),(0,f.Y)(T.EY,{variant:"small",children:n})]})},e.url)})})})})}function o3(e){var n=e.change,t=e.commitId,r=e.lineStats,i=e.sessionId,o=e.eventId,a=e.openPane,l=e.removePane,s=oX({sessionId:i,eventIdWhichProposedChanges:o}),c=oC({changeStatus:s,removePane:l}).onOpenTemporaryDiffPane,u=(0,w.useCallback)(function(e,n){var r={type:"diff",data:{left:{path:e,data:{type:"git",revision:t}},right:{path:e,data:n}}};a(r),c(r.data)},[a,t,c]);if(!n)return null;if("applied"===s.state){var d=s.appliedChanges,p=s.commitHash,h=d.find(function(e){return e.filePath===n.filePath});return h?(0,f.Y)(or,(0,ee._)({commitHash:p,onOpenDiff:u},h)):null}return(0,f.Y)(ot,(0,nt._)((0,ee._)({},n),{changeStatus:s,lineStats:r,onOpenDiff:u}))}function o6(e){var n=e.nudge,t=e.openPane;return(0,f.Y)(oN,(0,nt._)((0,ee._)({},n),{openPane:t}))}var o8=(0,w.memo)(function(e){var n=e.eventId,t=e.eventState,r=e.content,i=e.intent,o=e.ragSources,a=e.proposedActions,l=e.sessionId,s=e.openPane,c=e.removePane,u=e.markdownCodeComponent,d=e.markdownLinkComponent;return r||t===x.qOk.COMPLETE?i===x.qRv.ITERATIVE_AGENT?(0,f.Y)(o2,{text:r,eventId:n,eventState:t,ragSources:o,proposedActions:a,markdownCodeComponent:u,markdownLinkComponent:d,sessionId:l,openPane:s,removePane:c}):(0,f.Y)(i$.d2,{text:r,codeComponent:u,linkComponent:d,messageState:t}):(0,f.Y)(to.A,{})}),o7=t(42415),o9=t(45641);function ae(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.commit,t=void 0===n||n,r=(0,A.A)().git,i=(0,v._)((0,w.useState)(!1),2),o=i[0],a=i[1],l=(0,v._)((0,w.useState)(null),2),s=l[0],c=l[1];return(0,w.useEffect)(function(){function e(){return(e=(0,y._)(function(){var e;return(0,b.YH)(this,function(n){switch(n.label){case 0:return[4,r.isInitialized()];case 1:if(null!=(e=n.sent()).error)return c(e.error),[2];if(a(e.initialized),!e.initialized)return[3,7];if(!t)return[3,6];n.label=2;case 2:return n.trys.push([2,4,,6]),[4,r.getCommit({commit:"HEAD"})];case 3:case 5:return n.sent(),[3,6];case 4:return n.sent(),[4,r.commit({message:"Initial commit"})];case 6:return a(!0),[3,9];case 7:return[4,r.init({initialCommit:t})];case 8:n.sent(),a(!0),n.label=9;case 9:return[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[r,t]),{isGitInitialized:o,gitError:s}}var an=(0,V.x)({root:[j.wp.width("100%")],banner:[j.wp.width("100%")],li:[{listStyle:"none"}]});function at(e){var n=e.changedPaths,t=e.openPane,r=(0,v._)((0,w.useState)(100),2),i=r[0],o=r[1],a=(0,tw.A)(function(e){o(e.width/10)});return(0,f.Y)(L.S,{innerRef:a,css:an.root,children:(0,f.Y)(iI.N,{css:an.banner,icon:(0,f.Y)(tI.A,{}),colorway:"yellow",text:(0,f.FD)(tk.s,{variant:"small",children:[S.BP," has detected other changes to these files since this code was generated:",(0,f.Y)("ul",{style:{margin:0},children:n.map(function(e){return(0,f.Y)("li",{css:an.li,children:(0,f.Y)(eS.$n,{variant:"underlined",size:"small",iconLeft:(0,f.Y)(ti.A,{path:e,size:16}),text:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{maxLength:30,truncateFrom:"middle"},t=n.maxLength,r=void 0===t?30:t,i=n.truncateFrom;return e.length<=r?e:"start"===(void 0===i?"middle":i)?"..."+e.slice(e.length-r,e.length):e.slice(0,r/2)+"..."+e.slice(-r/2)}(e,{truncateFrom:"start",maxLength:i}),onClick:function(){return t({type:"codeEditor",data:{path:e}})}})},e)})}),"You can retry this ",o7.go," or overwrite those changes and apply ",S.BP," edits anyway."]})})})}var ar=t(16564),ai=t(35992),ao=t(51094),aa=t(93038);function al(e){var n,t,r,i,o,a,l,s,c,u,d,p,f=e.sessionId,h=e.eventId,m=e.sortedActions,g=e.changesSummary,Y=e.handleAutoRestart,C=e.doAutoApplyChanges,k=(r=(n={sessionId:f,prevUserMessageContent:e.prevUserMessageContent}).sessionId,i=n.prevUserMessageContent,o=(0,A.A)().git,(0,w.useCallback)((t=(0,y._)(function(e){var n,t,a,l,s,c,u,d,p,f,h,m,g,v;return(0,b.YH)(this,function(w){switch(w.label){case 0:return n=e.changes,t=e.summary,o.forceRefresh(),[4,o.status()];case 1:if((a=w.sent()).error)return[2,a];if(0===a.changes.length||(l="Assistant checkpoint",0===n.length))return[2,{error:S.ic.NOTHING_TO_COMMIT}];t&&(l+=": ".concat(t)),l+="\n\nAssistant generated file changes:\n",s=!0,c=!1,u=void 0;try{for(d=n[Symbol.iterator]();!(s=(p=d.next()).done);s=!0)f=p.value,l+="- ".concat(f.filePath,": ").concat(f.changeSummary,"\n")}catch(e){c=!0,u=e}finally{try{s||null==d.return||d.return()}finally{if(c)throw u}}return i&&(l+="\n---\n\nUser prompt:\n\n".concat(i)),h=a.changes.filter(function(e){return!e.staged}).filter(function(e){return aa.UC.includes(e.path)}).map(function(e){return e.path}),m=a.changes.filter(function(e){return e.staged}).map(function(e){return e.path}),g=n.map(function(e){return e.filePath}),v=new Set((0,X._)(h).concat((0,X._)(m),(0,X._)(g))),[4,o.stageFiles({add:Array.from(v)})];case 2:return w.sent(),[2,o.commit({message:l,trailers:{"Replit-Commit-Author":"Assistant","Replit-Commit-Session-Id":r}})]}})}),function(e){return t.apply(this,arguments)}),[o,i,r])),D=(0,_.HJ)(void 0);(0,w.useEffect)(function(){var e=function(e){return"workspaceToolNudge"===e.$kind?{action:e,state:"skipped",checked:!1}:"shellCommand"===e.$kind&&e.shellCommand.isDangerous?{action:e,state:"preparing",checked:!1}:{action:e,state:"preparing",checked:!0}};D.update((0,ai.jM)(function(n){if(!n)return m.map(e);for(var t=0;t<m.length;t++)n[t]?n[t].action=m[t]:n.push(e(m[t]))}))},[D,m]);var E=(0,v._)((0,w.useState)({state:"idle"}),2),R=E[0],I=E[1],F=(0,e0.A)(R),T=(0,w.useRef)(!1),P=(l=(a={sessionId:f,eventIdWhichProposedChanges:h}).sessionId,s=a.eventIdWhichProposedChanges,c=(0,S.NC)(),u=(0,_.J2)(c.sessions.get(l)),(0,w.useCallback)(function(e){var n=e.appliedChanges,t=e.commitHash;return null==u?void 0:u.appendEvent({kind:"iterativeAgent",action:{eventIdWhichProposedChanges:s,appliedChanges:n,commitHash:t}})},[s,u])),L=oY(),U=op(),N=U.spawnCommand,O=U.waitAndGetCommandOutput,M=oa({sessionId:f,eventIdWhichProposedShellExecution:h}),B=M.sendStartedShellExecutionMessage,H=M.sendFinishedShellExecutionMessage,z=oV(),W=z.spawnInstall,G=z.waitAndGetSpawnedInstallPackagesResult,V=ol({sessionId:f,eventIdWhichProposedPackageInstall:h}),j=V.sendInstallingPackagesMessage,Z=V.sendInstalledPackagesMessage,q=oK(),K=os({sessionId:f,eventIdWhichProposedRunConfiguration:h}),$=oE(),J=oc({sessionId:f,eventIdWhichProposedWorkflowConfiguration:h}),Q=oM(),en=ou({sessionId:f,eventIdWhichProposedDeploymentConfiguration:h}),et=(d=(0,A.A)().fs,(0,w.useCallback)((p=(0,y._)(function(e){var n,t;return(0,b.YH)(this,function(r){switch(r.label){case 0:return n=e.change,[4,d.writeFile(n.filePath,n.content)];case 1:if(null!==(t=r.sent()).error)return[2,{error:t.error}];return[2,{}]}})}),function(e){return p.apply(this,arguments)}),[d])),er=(0,w.useMemo)(function(){return N&&O&&W&&G&&Q},[Q,N,W,O,G]),ei=(0,w.useCallback)((0,y._)(function(){var e,n,t,r,i,o,a,l,s,c,u,d,p,f,h,m,v,w,y,A,C,_,E,R,U,M,z,V,X,ei,eo,ea,el,es,ec,eu,ed,ep;return(0,b.YH)(this,function(b){switch(b.label){case 0:if(!D.current||"idle"!==F.current.state||!er)return[2];return I({state:"working"}),[4,L({changes:e=D.current.map(function(e){return(0,x.VFn)(e.action,"fileChange")?(0,x.QNh)(e.action):null}).filter(function(e){return null!==e})})];case 1:n=b.sent(),t=new Set,r=!1,D.update((0,ai.jM)(function(e){null==e||e.forEach(function(e){e.state="preparing"===e.state&&e.checked?"scheduled":"skipped"})})),i=-1,o=!1,a=!1,b.label=2;case 2:b.trys.push([2,30,31,36]),s=(0,nn._)(D.current),b.label=3;case 3:return[4,s.next()];case 4:if(!(o=!(c=b.sent()).done))return[3,29];if(u=c.value,i++,"scheduled"!==u.state)return[3,28];switch(D.update((0,ai.jM)(function(e){e&&(e[i].state="working")})),d=function(){D.update((0,ai.jM)(function(e){e&&(e[i]={action:e[i].action,checked:e[i].checked,state:"done"})}))},p=function(e){D.update((0,ai.jM)(function(n){n&&(n[i]={action:n[i].action,checked:n[i].checked,state:"failed",error:e})}))},h=(f=u.action).$kind){case"workspaceToolNudge":return[3,5];case"shellCommand":return[3,6];case"packageInstall":return[3,11];case"runConfiguration":return[3,16];case"deploymentConfiguration":return[3,19];case"fileChange":return[3,22];case"workflowConfiguration":return[3,24]}return[3,27];case 5:return[3,28];case 6:return m=f.shellCommand,[4,null==N?void 0:N(m.command)];case 7:if(!(null==(v=b.sent())?void 0:v.ok))return p("Spawning shell command failed"),[3,28];return[4,B({processId:v.payload,messageContentsOffset:m.messageContentsOffset})];case 8:if(!(null==(w=b.sent())?void 0:w.ok))return p("Server request failed"),[3,28];return[4,null==O?void 0:O(v.payload)];case 9:if(!(y=b.sent())||0!==y.exitCode)return p("Shell command failed"),[3,28];return[4,H((0,nt._)((0,ee._)({},y),{messageContentsOffset:m.messageContentsOffset}))];case 10:if(!(null==(A=b.sent())?void 0:A.ok))return p("Server request failed"),[3,28];return d(),[3,28];case 11:return C=f.packageInstall,[4,null==W?void 0:W({language:C.language,packageList:C.packageList})];case 12:if(!(null==(_=b.sent())?void 0:_.ok))return p("spawning packager failed"),[3,28];return[4,j({processId:_.payload,messageContentsOffset:C.messageContentsOffset})];case 13:if(!(null==(E=b.sent())?void 0:E.ok))return p("Server request failed"),[3,28];return[4,null==G?void 0:G(_.payload)];case 14:if(!(R=b.sent())||0!==R.exitCode)return p("Failed to run packager"),[3,28];return[4,Z({installationOutput:R.installationOutput,exitCode:R.exitCode,processId:_.payload,messageContentsOffset:C.messageContentsOffset})];case 15:if(!(null==(U=b.sent())?void 0:U.ok))return p("Server request failed"),[3,28];return d(),[3,28];case 16:return[4,q(M=f.runConfiguration)];case 17:return b.sent(),[4,K({messageContentsOffset:M.messageContentsOffset})];case 18:if(!(null==(z=b.sent())?void 0:z.ok))return p("Server request failed"),[3,28];return d(),[3,28];case 19:return V=f.deploymentConfiguration,[4,null==Q?void 0:Q({buildCommand:V.buildCommand,runCommand:V.runCommand})];case 20:if(!(null==(X=b.sent())?void 0:X.ok))return p("failed configuring deployment"),[3,28];return[4,en({messageContentsOffset:V.messageContentsOffset})];case 21:if(!(null==(ei=b.sent())?void 0:ei.ok))return p("Server request failed"),[3,28];return d(),[3,28];case 22:return[4,et({change:f.fileChange})];case 23:if(b.sent().error)return p("file write failed"),[3,28];return d(),t.add(f.fileChange.filePath),[3,28];case 24:return[4,$(eo=f.workflowConfiguration)];case 25:return b.sent(),[4,J({messageContentsOffset:eo.messageContentsOffset})];case 26:if(!(null==(ea=b.sent())?void 0:ea.ok))return p("Server request failed"),[3,28];return d(),r=!0,[3,28];case 27:(0,ar.A)(h),b.label=28;case 28:return o=!1,[3,3];case 29:return[3,36];case 30:return el=b.sent(),a=!0,l=el,[3,36];case 31:if(b.trys.push([31,,34,35]),!(o&&null!=s.return))return[3,33];return[4,s.return()];case 32:b.sent(),b.label=33;case 33:return[3,35];case 34:if(a)throw l;return[7];case 35:return[7];case 36:return es=e.filter(function(e){return t.has(e.filePath)}).map(function(e){return{filePath:e.filePath,changeSummary:e.changeSummary}}),r&&es.push({filePath:ao.v,changeSummary:"Updated app configuration"}),[4,k({changes:es,summary:g})];case 37:if(eu="hash"in(ec=b.sent())?ec.hash:null,ed="error"in ec?ec.error:null,!eu)return ed===S.ic.NOTHING_TO_COMMIT?I({state:"failed",error:"Nothing to commit",canRetryApply:!1}):I({state:"failed",error:"Commit failed: "+ed,canRetryApply:!0}),[2];return[4,P({appliedChanges:es.map(function(e){var t,r,i=e.filePath,o=e.changeSummary,a=n.get(i);return{filePath:i,linesAdded:null!=(t=null==a?void 0:a.added)?t:0,linesRemoved:null!=(r=null==a?void 0:a.removed)?r:0,changeSummary:o}}),commitHash:eu})];case 38:if(!(null==(ep=b.sent())?void 0:ep.ok))return I({state:"failed",error:"Server request failed",canRetryApply:!0}),[2];return I({state:"done"}),Y(),T.current=!1,[2]}})}),[D,F,er,k,g,L,P,Y,N,B,O,H,W,j,G,Z,q,K,Q,en,et,$,J]),eo=(0,w.useCallback)(function(){D.update((0,ai.jM)(function(e){null==e||e.forEach(function(e){e.state="preparing"})})),I({state:"idle"}),F.current={state:"idle"},ei()},[ei,F,D]),ea=(0,_.J2)(D),el=(0,w.useCallback)(function(e){D.update((0,ai.jM)(function(n){n&&"preparing"===n[e].state&&(n[e].checked=!n[e].checked)}))},[D]);return(0,w.useEffect)(function(){C&&er&&"idle"===F.current.state&&!0!==T.current&&(T.current=!0,ei())},[ei,C,F,T,er]),{state:R,multistepActions:ea,toggleMultistepActionCheck:el,applyActions:ei,reapplyActions:eo}}var as=t(17893),ac=t(75040),au=(0,V.x)({wrapper:[j.wp.width("100%"),j.wp.p(8),j.wp.borderRadius(4)],actionRowWrapper:[j.wp.height(24)],actionRow:[j.wp.maxWidth("100%"),j.wp.flex.growAndShrink(1),j.wp.overflow("hidden")],handleOverflow:[j.wp.maxWidth("100%"),j.wp.flex.growAndShrink(1),j.wp.overflow("hidden")],alignBaseline:[j.wp.height("100%"),{alignItems:"baseline"}],iconWrapper:[j.wp.width(20)],errorText:[j.wp.color.accentNegativeStronger]});function ad(e){var n=e.action,t=n.state;switch(t){case"preparing":return null;case"scheduled":case"skipped":return(0,f.Y)(as.A,{});case"working":return(0,f.Y)(to.A,{});case"done":return(0,f.Y)(oR.A,{color:k.LU.accentPositiveDefault});case"failed":return(0,f.Y)(P.m_,{tooltip:n.error,children:(0,f.Y)(iF.A,{color:k.LU.accentNegativeDefault})});default:(0,ar.A)(t)}}function ap(e){var n=e.action,t=n.$kind;switch(t){case"workspaceToolNudge":return null;case"shellCommand":return(0,f.FD)(L.S,{align:"center",row:!0,gap:4,css:au.handleOverflow,children:[(0,f.Y)(og.A,{}),(0,f.FD)(L.S,{row:!0,gap:2,css:au.alignBaseline,children:["Run shell command:"," ",(0,f.Y)(T.EY,{multiline:!1,variant:"code",children:n.shellCommand.command})]})]});case"packageInstall":return(0,f.FD)(L.S,{align:"center",row:!0,gap:4,css:au.handleOverflow,children:[(0,f.Y)(t5.A,{}),(0,f.FD)(L.S,{row:!0,gap:2,css:au.alignBaseline,children:["Install dependencies:",n.packageInstall.packageList.map(function(e){return(0,f.Y)(I.a,{text:e},e)})]})]});case"fileChange":return(0,f.FD)(L.S,{align:"center",row:!0,gap:4,css:au.handleOverflow,children:[(0,f.Y)(o1.A,{}),(0,f.FD)(L.S,{row:!0,gap:4,css:au.alignBaseline,children:["Edit file",(0,f.Y)(T.EY,{multiline:!1,variant:"code",children:n.fileChange.filePath})]})]});case"runConfiguration":return(0,f.FD)(L.S,{align:"center",row:!0,gap:4,css:au.handleOverflow,children:[(0,f.Y)(ac.A,{}),(0,f.FD)(L.S,{row:!0,gap:4,css:au.alignBaseline,children:["Configure ",(0,f.Y)(I.a,{text:n.runConfiguration.workflowName})," ","workflow"]})]});case"deploymentConfiguration":var r=n.deploymentConfiguration.buildCommand.length>0,i=n.deploymentConfiguration.runCommand.length>0,o="";return r&&!i?o="Configure deployment build command":!r&&i?o="Configure deployment run command":r&&i&&(o="Configure deployment build and run commands"),(0,f.FD)(L.S,{align:"center",row:!0,gap:4,css:au.handleOverflow,children:[(0,f.Y)(oB.A,{}),(0,f.Y)(L.S,{row:!0,gap:4,css:au.alignBaseline,children:(0,f.Y)(L.S,{row:!0,align:"center",children:o})})]});case"workflowConfiguration":return(0,f.FD)(L.S,{align:"center",row:!0,gap:4,css:au.handleOverflow,children:[(0,f.Y)(ac.A,{}),(0,f.FD)(L.S,{row:!0,gap:4,css:au.alignBaseline,children:["Configure ",(0,f.Y)(I.a,{text:n.workflowConfiguration.workflowName})," ","workflow"]})]});default:(0,ar.A)(t)}}function af(e){var n=e.sessionId,t=e.eventId,r=e.sortedActions,i=e.changesSummary,o=e.changeStatus,a=e.onCancel,l=al({sessionId:n,eventId:t,handleAutoRestart:e.handleAutoRestart,doAutoApplyChanges:e.doAutoApplyChanges,sortedActions:r,changesSummary:i,prevUserMessageContent:e.prevUserMessageContent}),s=l.applyActions,c=l.reapplyActions,u=l.multistepActions,d=l.toggleMultistepActionCheck,p=l.state,h=(0,w.useMemo)(function(){return!!("failed"===p.state||(null==u?void 0:u.some(function(e){return"failed"===e.state})))},[u,p.state]);return u&&0!==u.length&&("applied"!==o.state||h)?(0,f.Y)(ah,{multistepActions:u,multistepState:p,onCancel:a,applyActions:s,reapplyActions:c,toggleMultistepActionCheck:d}):null}function ah(e){var n=e.multistepActions,t=e.multistepState,r=e.onCancel,i=e.applyActions,o=e.reapplyActions,a=e.toggleMultistepActionCheck,l=(0,w.useMemo)(function(){return null==n?void 0:n.some(function(e){return"preparing"===e.state&&!0===e.checked})},[n]);return(0,f.FD)(eu.ui,{elevated:!0,css:au.wrapper,gap:8,children:[(0,f.Y)(T.EY,{children:"Apply all:"}),(0,f.FD)(L.S,{gap:8,css:au.handleOverflow,children:[(0,f.Y)(L.S,{gap:4,css:au.handleOverflow,children:null==n?void 0:n.map(function(e,n){return(0,f.FD)(L.S,{row:!0,gap:8,css:au.actionRow,children:[(0,f.Y)(L.S,{align:"center",justify:"center",css:au.iconWrapper,children:"preparing"===e.state?(0,f.Y)(nH.S,{name:e.action.$kind,checked:e.checked,onChange:function(){a(n)}}):(0,f.Y)(ad,{action:e})}),(0,f.Y)(L.S,{align:"center",css:au.actionRowWrapper,children:(0,f.Y)(ap,{action:e.action})})]},n+"---"+e.action.$kind)})}),"idle"===t.state?(0,f.FD)(L.S,{row:!0,gap:8,children:[(0,f.Y)(eS.$n,{text:"Cancel",onClick:r}),(0,f.Y)(eS.$n,{text:"Ok",colorway:"primary",disabled:!l,onClick:i})]}):null,"failed"===t.state?(0,f.FD)(L.S,{row:!0,gap:16,css:au.errorText,align:"center",children:[(0,f.Y)(L.S,{children:t.error}),t.canRetryApply?(0,f.Y)(eS.$n,{text:"Try again",colorway:"primary",onClick:o}):null]}):null]})]})}var am=t(75414);function ag(e){var n=e.runState,t=e.onClick,r=n===x.g32.AGENT_STATE_PAUSING,i=(0,v._)((0,w.useState)(!1),2),o=i[0],a=i[1],l=(0,w.useCallback)((0,y._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:return[4,t()];case 1:return e.sent(),a(!1),[2]}})}),[t]);return(0,f.FD)(am.Wv,{label:"Pause ".concat(S.g$," confirmation"),placement:"top",trigger:"click",isOpen:o,onOpenChange:a,children:[(0,f.Y)(eS.$n,{text:r?"Pausing ".concat(S.g$,""):"Pause ".concat(S.g$),colorway:"red",disabled:r}),(0,f.FD)(L.S,{p:8,gap:8,children:[(0,f.FD)(T.EY,{children:["Are you sure you want to pause"," ",(0,S.Nn)({variant:"casual",capitalizeFirstChar:!1}),"?"]}),(0,f.FD)(L.S,{row:!0,gap:4,children:[(0,f.Y)(eS.$n,{text:"Cancel",onClick:function(){return a(!1)}}),(0,f.Y)(eS.$n,{text:"Pause ".concat(S.g$),onClick:l,colorway:"red"})]})]})]})}function av(){return(av=(0,y._)(function(e,n){var t,r;return(0,b.YH)(this,function(i){switch(i.label){case 0:var o;return t={},r=null,[4,Promise.all(n.map((o=(0,y._)(function(n){var i;return(0,b.YH)(this,function(o){switch(o.label){case 0:return[4,e.readFile(n)];case 1:return(i=o.sent()).error?r=i.error:t[n]=i.content.toString(),[2]}})}),function(e){return o.apply(this,arguments)})))];case 1:return i.sent(),[2,{contents:t,error:r}]}})})).apply(this,arguments)}var aw=t(98363),ay=t(70612),ab=t(53317),aS=(0,V.x)({buttonRow:[j.wp.flex.wrap],errorContainer:[j.wp.rowWithGap(8),j.wp.align.center,j.wp.color.accentNegativeDefault],statusBanner:[j.wp.width("100%")]});function aY(e){var n,t,r,i,o,a,l,s,c,u,d,p,h,m,Y=e.fileChanges,C=e.commitId,k=e.summary,D=e.sortedActions,E=e.eventId,R=e.sessionId,I=e.openAiChatSettingsPanel,F=e.openPane,P=e.removePane,U=e.hasAnyWorkspaceProposedActions,N=e.isLatestProposedActionsEvent,O=e.isMessageComplete,M=e.prevUserMessageContent,B=(0,o9.Z)("workspace-assistant-auto-apply-changes"),H=(0,o9.Z)("workspace-assistant-auto-restart-repl"),z=(0,n4.g)("assistantAutoApplyChanges","assistantAutoRestartRepl").preferences,W=1===Y.length&&!U,G=Y.length>0,V=z.assistantAutoApplyChanges&&B.isDone,Z=ae().isGitInitialized,q=(0,S.jt)(),K=(0,S.hT)(),$=(0,S.zS)(),J=q&&(K===x.g32.AGENT_STATE_RUNNING||K===x.g32.AGENT_STATE_PAUSING),Q=(0,v._)((0,w.useState)(null),2),X=Q[0],en=Q[1],et=(0,w.useCallback)((0,y._)(function(){return(0,b.YH)(this,function(e){try{$()}catch(e){en("Unable to pause agent: ".concat(e))}return[2]})}),[$]),er=oX({sessionId:R,eventIdWhichProposedChanges:E}),ei=Y.some(function(e){return e.state===x.u5I.GENERATION_REGENERATING}),eo=O&&"pending"===er.state&&!ei,ea=oC({changeStatus:er,removePane:P}).onOpenTemporaryDiffPane,el=(t=(n={filePaths:(0,w.useMemo)(function(){return Y.map(function(e){return e.filePath})},[Y]),commitId:C}).commitId,r=n.filePaths,i=(0,A.A)().fs,a=(o=(0,v._)((0,w.useState)(null),2))[0],l=o[1],c=(0,t9.A)((s=(0,y._)(function(e){var n,i,o,a,l,s,c,u,d,p;return(0,b.YH)(this,function(f){switch(f.label){case 0:if(n=null,i={},!t)return[2,{error:t8.uA.NO_COMMITS}];o=!0,a=!1,l=void 0,f.label=1;case 1:f.trys.push([1,6,7,8]),s=r[Symbol.iterator](),f.label=2;case 2:if(o=(c=s.next()).done)return[3,5];return u=c.value,[4,e.getFileContents({path:u,revision:t,convertToBase64:!1})];case 3:(d=f.sent()).error?n=d.error:d.content&&(i[u]=d.content),f.label=4;case 4:return o=!0,[3,2];case 5:return[3,8];case 6:return p=f.sent(),a=!0,l=p,[3,8];case 7:try{o||null==s.return||s.return()}finally{if(a)throw l}return[7];case 8:return[2,n?{error:n}:{fileContents:i,error:null}]}})}),function(e){return s.apply(this,arguments)}),[t,r],{keepStaleResult:!0}),(0,w.useEffect)(function(){(null==c?void 0:c.error)&&l(c.error)},[c]),d=(u=(0,v._)((0,w.useState)({}),2))[0],p=u[1],(0,w.useEffect)(function(){(function(e,n){return av.apply(this,arguments)})(i,r).then(function(e){var n=e.contents,t=e.error;p(n),t&&l(t)});var e=r.map(function(e){return i.watchTextFile(e,{onChange:(0,y._)(function(){var n;return(0,b.YH)(this,function(t){switch(t.label){case 0:return[4,i.readFile(e)];case 1:if((n=t.sent()).error)return l(n.error),[2];return p(function(t){return(0,nt._)((0,ee._)({},t),(0,g._)({},e,n.content.toString()))}),[2]}})})})});return function(){e.forEach(function(e){return e()})}},[i,r]),(0,w.useMemo)(function(){if(null==c||null==d)return{changedPaths:[],hasAnyChangedPaths:!1,error:a,isLoading:!0};if(a)return{changedPaths:[],hasAnyChangedPaths:!1,error:a,isLoading:!1};var e=r.filter(function(e){if(!c.fileContents)return!1;var n=d[e],t=c.fileContents[e];return void 0!==n&&void 0!==t&&d[e]!==c.fileContents[e]});return{changedPaths:e,hasAnyChangedPaths:e.length>0,error:a,isLoading:!1}},[d,c,r,a])),es=el.changedPaths,ec=el.hasAnyChangedPaths,eu=el.isLoading,ed=(0,nV.d_)(),ep=(0,v._)((0,w.useState)(!1),2),ef=ep[0],eh=ep[1],em=(h=(0,S.NC)(),m=(0,_.J2)(h.sessions.get(R)),(0,w.useCallback)(function(){return null==m?void 0:m.appendEvent({kind:"message",intent:x.qRv.ITERATIVE_AGENT,modelType:x.e3q.ADVANCED,message:"The recent code changes you proposed are outdated. Please try generating new file edits which accomplish the same goal.",uploadedFiles:[],useRag:!1,webviewTargetedElement:void 0,fileContext:[],mostRecentFile:void 0})},[m])),eg=(0,w.useCallback)((0,y._)(function(){return(0,b.YH)(this,function(e){return z.assistantAutoRestartRepl&&(ed(),eh(!0)),[2]})}),[z.assistantAutoRestartRepl,ed]),ev=(0,w.useMemo)(function(){return!!V&&!!N&&!!eo&&!J},[J,eo,V,N]),ew=al({sessionId:R,eventId:E,handleAutoRestart:eg,doAutoApplyChanges:ev,sortedActions:D,changesSummary:k,prevUserMessageContent:M}),ey=ew.applyActions,eb=ew.state,eY="working"===eb.state,eA="failed"===eb.state?eb.error:void 0,ex="failed"===eb.state&&eb.canRetryApply,eC=(0,w.useCallback)((0,y._)(function(){return(0,b.YH)(this,function(e){return ey(),B.isDone||B.setAsDone(),[2]})}),[ey,B]),e_=(0,v._)((0,w.useState)(!1),2),ek=e_[0],eD=e_[1],eE=(0,w.useCallback)(function(){if(W)return eC();eD(!0)},[eC,W]),eR=(0,w.useCallback)(function(){var e=Y.map(function(e){return{left:{path:e.filePath,data:{type:"git",revision:C}},right:{path:e.filePath,data:{type:"generatedFile",content:e.content}}}});F({type:"diff",data:e}),ea(e)},[C,F,Y,ea]);(0,w.useEffect)(function(){ev&&eE()},[ev,eE]);var eI=(0,f.Y)(iI.N,{css:aS.statusBanner,icon:(0,f.Y)(tI.A,{}),colorway:"teal",text:(0,f.FD)(f.FK,{children:[S.BP," can automatically apply proposed changes to your App. You can enable this behavior in"," ",(0,f.Y)(eS.$n,{css:j.wp.display.inlineFlex,variant:"underlined",size:"small",onClick:I,text:"".concat(S.BP," Settings")}),"."]}),closable:!0,closeAction:B.setAsDone}),eF=(0,f.Y)(iI.N,{css:aS.statusBanner,icon:(0,f.Y)(tI.A,{}),colorway:"teal",text:(0,f.FD)(f.FK,{children:[S.BP," automatically restarted your App after applying file changes. You can disable this behavior in"," ",(0,f.Y)(eS.$n,{css:j.wp.display.inlineFlex,variant:"underlined",size:"small",onClick:I,text:"".concat(S.BP," Settings")}),"."]}),closable:!0,closeAction:H.setAsDone}),eT=J?(0,f.FD)(T.EY,{variant:"small",color:"dimmer",children:[(0,S.Nn)({capitalizeFirstChar:!0})," is currently active. Changes cannot be applied until ",(0,S.Nn)()," finishes working."]}):null;return N&&Z?eY||ei?(0,f.FD)(L.S,{row:!0,gap:8,align:"center",children:[ei?(0,f.Y)(T.EY,{color:"dimmer",children:"Thinking"}):eY?(0,f.Y)(T.EY,{color:"dimmer",children:"Applying changes"}):null,(0,f.Y)(to.A,{})]}):O?(0,f.FD)(L.S,{gap:8,align:"start",children:[B.isDone?null:eI,(0,f.Y)(aA,{changeStatus:er,isLoadingFilesChangedSinceCommit:eu,hasAnyChangedPaths:ec,changedPaths:es,openPane:F,handleRetryProposingChanges:em,handleApplyChanges:eE,isAgentActive:J,agentRunState:K,handlePauseAgent:et,assistantAutoApplyChanges:z.assistantAutoApplyChanges,openMultiDiffPane:eR,isMultistepApplyUIVisible:ek,hasSingleFileChangeOnly:W,hasAnyFileChanges:G}),eT,null==X?null:(0,f.FD)(L.S,{css:aS.errorContainer,children:[(0,f.Y)(ay.A,{}),X,(0,f.Y)(eS.$n,{text:"Try again",onClick:et,variant:"underlined",iconLeft:(0,f.Y)(ab.A,{})})]}),null==eA?null:(0,f.FD)(L.S,{css:aS.errorContainer,children:[(0,f.Y)(ay.A,{}),eA,ex?(0,f.Y)(eS.$n,{text:"Try again",onClick:eE,variant:"underlined",iconLeft:(0,f.Y)(ab.A,{})}):null]}),!ef||H.isDone?null:eF,ek?(0,f.Y)(af,{sessionId:R,eventId:E,sortedActions:D,changesSummary:k,changeStatus:er,onCancel:function(){eD(!1)},handleAutoRestart:eg,doAutoApplyChanges:ev,prevUserMessageContent:M}):null]}):null:null}function aA(e){var n=e.changeStatus,t=e.isLoadingFilesChangedSinceCommit,r=e.hasAnyChangedPaths,i=e.changedPaths,o=e.openPane,a=e.handleRetryProposingChanges,l=e.handleApplyChanges,s=e.isAgentActive,c=e.agentRunState,u=e.handlePauseAgent,d=e.assistantAutoApplyChanges,p=e.openMultiDiffPane,h=e.isMultistepApplyUIVisible,m=e.hasSingleFileChangeOnly,g=e.hasAnyFileChanges;return h||"pending"!==n.state?null:t?(0,f.Y)(L.S,{css:aS.buttonRow,row:!0,gap:8,align:"center",children:(0,f.Y)(eS.$n,{text:"Validating code changes",iconLeft:(0,f.Y)(to.A,{}),disabled:!0})}):r?(0,f.FD)(f.FK,{children:[(0,f.Y)(at,{changedPaths:i,openPane:o}),(0,f.FD)(L.S,{css:aS.buttonRow,row:!0,gap:8,align:"center",children:[(0,f.Y)(eS.$n,{text:"Retry ".concat(o7.go),onClick:a,iconLeft:(0,f.Y)(ab.A,{})}),(0,f.Y)(eS.$n,{text:"Overwrite and apply",onClick:l,iconLeft:(0,f.Y)(oR.A,{}),colorway:"warning"})]})]}):(0,f.FD)(L.S,{css:aS.buttonRow,row:!0,gap:8,align:"center",children:[s?(0,f.Y)(ag,{runState:c,onClick:u}):null,(0,f.Y)(P.m_,{tooltip:"Pause agent before applying changes",placement:"top",isDisabled:!s,children:(0,f.Y)(eS.$n,{text:m?"Apply":"Apply all",onClick:l,iconLeft:(0,f.Y)(oR.A,{}),disabled:s,colorway:d?"green":"primary"})}),g?(0,f.Y)(eS.$n,{text:"Preview code changes",onClick:p,iconLeft:(0,f.Y)(aw.A,{}),disabled:s}):null]})}function ax(e){var n=e.proposedActions,t=(0,tg._)(e,["proposedActions"]);return n&&(n.fileChanges.length>0||n.hasAnyWorkspaceProposedActions)?(0,f.Y)(aY,(0,ee._)({},t,n)):null}function aC(){return(0,f.Y)(L.S,{px:16,py:8,children:(0,f.Y)(iI.N,{text:"".concat(S.BP," saved your work"),icon:(0,f.Y)(oR.A,{}),colorway:"primary"})})}var a_=t(54759),ak=t(58481),aD=function(e){return e.None="none",e.Starter="starter",e.Paid="paid",e}({}),aE=(0,V.x)({root:[j.wp.borderRadius(),j.wp.border({color:k.LU.outlineDimmest})],icon:{paddingTop:3},mainContent:[j.wp.flex.growAndShrink(1),j.wp.colWithGap(4)],footer:[{"@container (max-width: 400px)":[j.wp.colWithGap(8),j.wp.align.start,j.wp.height("100%")]}],footerActions:[j.wp.flex.growAndShrink(1),j.wp.flex.row,j.wp.justify.end,j.wp.color.foregroundDimmer,{"@container (max-width: 400px)":{width:"100%"}}],footerSmallButtonContainer:[j.wp.display.inlineFlex,{"@container (max-width: 400px)":[j.wp.flex.grow(1)]}],footerSmallButton:[{marginTop:-10,marginRight:-4},{"@container (max-width: 400px)":{margin:0}}],timestamp:[j.wp.rowWithGap(4),j.wp.flex.wrap],summaryContainer:[j.wp.width(200)]});function aR(e){var n=e.commitId,t=e.changeSetSummary,r=e.date,i=e.isAtCheckpoint,o=e.isRestoring,a=e.wasReverted,l=e.isLoading,s=e.onCommitRestore,c=e.onOpenCommit,u=e.restoreButtonText,d=e.usageIndicatorVariant,p=(0,nI.A)(),h=(0,i5.R)(p).orgId,m=(0,i3.M)(h).hasUserExhaustedMonthlyCredits,g="starter"===d?"Used 1 ".concat(iv.Lm," plan ").concat(S.BP," ").concat(o7.go):"The ".concat(o7.go," for this checkpoint used ").concat(o7.a7,"\xa2 ").concat(m?"":"of your usage credits",".");return(0,f.FD)(eu.ui,{elevated:!0,css:aE.root,py:4,px:8,row:!0,gap:8,children:[(0,f.Y)(L.S,{css:aE.icon,children:(0,f.Y)(rT.A,{color:k.LU.foregroundDimmest})}),(0,f.FD)(L.S,{css:aE.mainContent,children:[(0,f.FD)(L.S,{row:!0,gap:8,align:"center",justify:"space-between",children:[(0,f.FD)(L.S,{row:!0,gap:4,children:[(0,f.Y)(T.EY,{maxLines:2,color:a&&!i?"dimmer":"default",style:{textDecoration:a&&!i?"line-through":void 0},children:i?"Currently at checkpoint":"Checkpoint made"}),a&&!i?(0,f.Y)(T.EY,{color:"dimmer",children:"Reverted"}):null]}),"none"!==d?(0,f.Y)(P.m_,{tooltip:g,placement:"top",children:(0,f.Y)(ak.A,{})}):null]}),(0,f.Y)(L.S,{children:void 0!==l&&l?(0,f.Y)(L.S,{css:aE.summaryContainer,children:(0,f.Y)(a_.Ay,{speed:2,backgroundColor:k.LU.backgroundHighest,foregroundColor:k.LU.backgroundHigher,height:18,children:(0,f.Y)("rect",{x:"0",y:"0",rx:"4",ry:"4",width:"200",height:"16"})})}):t?(0,f.Y)(T.EY,{color:"dimmer",variant:"small",children:t}):null}),(0,f.FD)(L.S,{css:aE.footer,row:!0,align:"center",children:[(0,f.FD)(L.S,{row:!0,gap:8,children:[r?(0,f.Y)(L.S,{css:aE.timestamp,style:{color:k.LU.foregroundDimmer},children:(0,f.Y)(eg.Dc,{textVariant:"small",live:!0,date:r})}):null,n?(0,f.Y)(aI,{commitId:n,onOpenCommit:c}):null]}),(0,f.Y)(L.S,{css:aE.footerActions,children:n&&s&&!i?(0,f.Y)(P.m_,{tooltip:"Already at this checkpoint",isDisabled:!i,css:aE.footerSmallButtonContainer,children:(0,f.Y)(eS.$n,{css:aE.footerSmallButton,onClick:s,iconLeft:o?(0,f.Y)(to.A,{}):a?(0,f.Y)(ab.A,{}):(0,f.Y)(oe.A,{}),disabled:o||i,size:"small",variant:"outlined",text:a?"Restore checkpoint":void 0===u?"Go to this checkpoint":u})}):null})]})]})]})}function aI(e){var n=e.commitId,t=e.onOpenCommit;return(0,f.FD)(L.S,{css:aE.timestamp,style:{color:k.LU.foregroundDimmer},children:[(0,f.Y)(T.EY,{variant:"small",multiline:!1,children:""}),t?(0,f.Y)(eS.$n,{variant:"underlinedOnHover",text:n.slice(0,8),size:"small",onClick:function(){return t(n)}}):(0,f.Y)(T.EY,{variant:"small",children:n})]})}var aF=(0,V.x)({errorContainer:[j.wp.color.accentNegativeDefault]});function aT(e){var n,t=e.commitHash,r=e.created,i=e.onOpenCommit,o=e.onRestoreToCommit,a=e.isRestoring,l=e.error,s=void 0===l?null:l,c=e.currentCommit,u=void 0===c?null:c,d=e.commitDetails,p=void 0===d?null:d,h=e.isLoading,m=e.usageIndicatorVariant,g=(null==u?void 0:u.hash)===t,v=(null==u?void 0:u.trailers[t8.aT])===t,w=(n=(0,y._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:if(!o)return[2];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,o()];case 2:case 3:return e.sent(),[3,4];case 4:return[2]}})}),function(){return n.apply(this,arguments)});return(0,f.FD)(L.S,{px:16,py:8,gap:8,children:[s?(0,f.Y)(L.S,{css:aF.errorContainer,children:s}):null,(0,f.Y)(aR,{commitId:t,changeSetSummary:null==p?void 0:p.subject,date:r,isAtCheckpoint:!!(v||g),isRestoring:void 0!==a&&a,onCommitRestore:w,onOpenCommit:i,isLoading:void 0!==h&&h,usageIndicatorVariant:m})]})}function aP(e){var n,t,r=e.commitHash,i=e.created,o=e.onOpenCommit,a=e.onRestoreToCommit,l=(0,v._)((0,w.useState)(!1),2),s=l[0],c=l[1],u=(0,v._)((0,w.useState)(null),2),d=u[0],p=u[1],h=(0,v._)((0,w.useState)(!0),2),m=h[0],g=h[1],S=(0,v._)((0,w.useState)(null),2),Y=S[0],A=S[1],x=(0,v._)((0,w.useState)(null),2),C=x[0],_=x[1],k=(0,v._)((0,w.useState)(!0),2),D=k[0],E=k[1];(0,t9.A)((n=(0,y._)(function(e){var n,t,i,o;return(0,b.YH)(this,function(a){switch(a.label){case 0:return[4,Promise.all([e.getCommit({commit:"HEAD"}),e.getCommit({commit:r})])];case 1:return t=(n=v._.apply(void 0,[a.sent(),2]))[0],i=n[1],t.error?A(null):(o={},Object.entries(t.trailers||{}).forEach(function(e){var n=(0,v._)(e,2),t=n[0],r=n[1];o[t]=null!=r?r:""}),A({hash:t.hash,trailers:o})),i.error?_(null):_({subject:i.subject}),g(!1),[2,{error:null}]}})}),function(e){return n.apply(this,arguments)}),[r]),(0,w.useEffect)(function(){if(D){var e=setTimeout(function(){E(!1)},3e3);return function(){return clearTimeout(e)}}},[D]);var R=(t=(0,y._)(function(){return(0,b.YH)(this,function(e){if(!a)return[2];c(!0);try{a(),p(null)}catch(e){p("Failed to restore to checkpoint")}finally{c(!1)}return[2]})}),function(){return t.apply(this,arguments)});return(0,f.Y)(aT,{commitHash:r,created:i,onOpenCommit:o,onRestoreToCommit:R,isRestoring:s,error:d,currentCommit:Y,commitDetails:C,isLoading:m,usageIndicatorVariant:aD.None})}var aL=(0,V.x)({container:[j.wp.flex.growAndShrink(1)],costInfo:[j.wp.height(24)]});function aU(e){var n=e.eventId,t=e.sessionId,r=e.hasUserExhaustedMonthlyCredits,i=e.didCountEditRequest,o=oX({sessionId:t,eventIdWhichProposedChanges:n});return(0,f.Y)(L.S,{css:aL.container,row:!0,gap:4,justify:"start",children:i&&"pending"===o.state?(0,f.Y)(L.S,{css:aL.costInfo,row:!0,align:"center",children:(0,f.Y)(P.m_,{tooltip:"This ".concat(o7.go," used ").concat(o7.a7,"\xa2 ").concat(r?"":"of your usage credits","."),placement:"bottom",children:(0,f.Y)(ak.A,{color:k.LU.foregroundDimmer})})}):null})}var aN=t(64631),aO=t(47566),aM=(0,V.x)({revertText:[j.wp.color.orangeStronger,j.wp.fontWeight.medium],mergeText:[j.wp.color.purpleStronger,j.wp.fontWeight.medium],pullRequestId:[j.wp.fontWeight.medium],hash:[j.wp.fontWeight.medium],filePathPrefix:[j.wp.color.foregroundDimmest],commitBody:[j.wp.font.code,{whiteSpace:"pre-wrap"},{fontSize:k.LU.fontSizeSmall}],clickableName:[j.wp.cursor.pointer,{"&:hover":{textDecoration:"underline"}}],tooltip:[j.wp.display.inlineFlex,j.wp.rowWithGap(4),j.wp.align.center],path:[{fontSize:k.LU.fontSizeSmall},j.wp.font.code],currentBranchIndicator:[j.wp.height(16),j.wp.width(16),j.wp.align.center],currentBranchDot:[j.wp.height(6),j.wp.width(6),j.wp.backgroundColor.accentPrimaryStronger,j.wp.borderRadius("full")],branchNameWrapper:[j.wp.flex.row,j.wp.align.center],fixTooltipDisplay:{"& > span":{display:"inline-block"}},headingWrapper:[j.wp.display.inlineFlex,j.wp.rowWithGap(4),j.wp.align.center,j.wp.flex.shrink(1),j.wp.overflow("hidden")],headingRemote:[{verticalAlign:"text-bottom"},j.wp.mr(4)],headingCurrent:[j.wp.px(4)],current:[j.wp.position.relative,j.wp.top("-1px"),j.wp.display.inlineFlex,j.wp.pl(2),j.wp.pr(8)],icon:[{verticalAlign:"baseline !important"},j.wp.mr(4)],bodyContainer:[j.wp.border({color:k.LU.outlineDimmest,direction:"full"}),j.wp.borderRadius(8),j.wp.p(16)]});function aB(e){var n=e.text,t=e.className;return(0,f.Y)("span",{className:t,css:aM.revertText,children:n})}function aH(e){var n=e.text,t=e.className;return(0,f.Y)("span",{className:t,css:aM.mergeText,children:n})}function az(e){var n,t=e.id,r=e.hash,i=e.className;return n=void 0===r||r?"string"==typeof t&&t.startsWith("#")?t:"#".concat(t):"string"==typeof t&&t.startsWith("#")?t.slice(1):"".concat(t),(0,f.Y)("span",{className:i,css:aM.pullRequestId,children:n})}function aW(e){var n=e.hash,t=e.length,r=e.className;return(0,f.Y)("span",{className:r,css:aM.hash,children:n.slice(0,(void 0===t?8:t)+1)})}function aG(e){var n=e.subject,t=e.remoteName,r=e.quoted,i=void 0!==r&&r,o=e.className;return t?(0,f.Y)(aN.Ay,{className:o,background:!1,lineBreaks:!0,themed:!0,useRemarkGfm:!0,remarkGitHubOptions:{repository:t},children:i?'"'.concat(n,'"'):n}):(0,f.Y)("span",{className:o,children:i?'"'.concat(n,'"'):n})}function aV(e){var n=e.body,t=e.view,r=e.className;return"Source"===(void 0===t?"Source":t)?(0,f.Y)(L.S,{css:aM.bodyContainer,children:(0,f.Y)("pre",{className:r,css:aM.commitBody,children:n})}):(0,f.Y)(L.S,{css:aM.bodyContainer,children:(0,f.Y)(aN.Ay,{className:r,background:!1,mentionsLink:!0,lineBreaks:!0,themed:!0,useRemarkGfm:!0,children:n})})}function aj(){return(0,f.Y)("span",{css:aM.fixTooltipDisplay,children:(0,f.Y)(P.m_,{tooltip:"This is your current branch",children:(0,f.Y)(L.S,{css:aM.currentBranchIndicator,children:(0,f.Y)(L.S,{css:aM.currentBranchDot})})})})}function aZ(e){var n=e.name,t=e.remote,r=e.current,i=void 0!==r&&r,o=e.heading,a=void 0!==o&&o,l=e.icon,s=void 0!==l&&l,c=e.onClick,u=e.className,d=null;return(!0===s?d=a?(0,f.Y)(aO.A,{size:16}):(0,f.Y)(aO.A,{css:aM.icon,size:12}):s&&(d=s),a)?(0,f.FD)("div",{css:aM.headingWrapper,children:[d,(0,f.FD)(T.EY,{variant:"subheadDefault",multiline:!1,children:[t?(0,f.FD)(f.FK,{children:[(0,f.Y)("span",{css:aM.headingRemote,children:t}),(0,f.Y)("span",{css:aM.headingRemote,children:"/"})]}):null,c?(0,f.Y)(a$,{label:"View branch",onClick:c,children:n}):(0,f.Y)("span",{children:n})]}),i?(0,f.Y)("span",{css:a?aM.headingCurrent:aM.current,children:(0,f.Y)(aj,{})}):null]}):(0,f.FD)("span",{className:u,css:aM.branchNameWrapper,children:[d,t?(0,f.FD)("span",{children:[t,"/"]}):null,c?(0,f.Y)(a$,{label:"View branch",onClick:c,children:n}):(0,f.Y)("span",{children:n}),i?(0,f.Y)(aj,{}):null]})}function aq(e){var n=e.path,t=e.prefix,r=e.onClick,i=e.className,o=(0,tt.WP)(n),a=!r&&(o===n||null!==t&&t+o===n);return(0,f.Y)("span",{css:aM.fixTooltipDisplay,children:(0,f.Y)(P.m_,{maxWidth:"auto",tooltip:(0,f.Y)(aK,{path:n,openable:!!r}),isDisabled:a,children:r?(0,f.FD)(a$,{label:"Open ".concat(o),onClick:r,className:i,children:[t?(0,f.Y)("span",{css:aM.filePathPrefix,children:t}):null,(0,f.Y)("span",{children:o})]}):(0,f.FD)("span",{className:i,children:[t?(0,f.Y)("span",{css:aM.filePathPrefix,children:t}):null,(0,f.Y)("span",{children:o})]})})})}function aK(e){var n=e.path,t=e.openable;return(0,f.FD)("span",{css:aM.tooltip,children:[void 0===t||t?(0,f.Y)("span",{children:"Open"}):null,(0,f.Y)("span",{css:aM.path,children:n})]})}function a$(e){var n=e.label,t=e.onClick,r=e.className,i=e.children;return(0,f.Y)("span",{className:r,css:aM.clickableName,role:"button",tabIndex:-1,"aria-label":n,onClick:t,onKeyDown:function(e){("Enter"===e.key||" "===e.key)&&(null==t||t())},children:i})}var aJ=(0,V.x)({path:[j.wp.flex.growAndShrink(1),j.wp.align.center],source:[j.wp.color.foregroundDimmest],sourceArrow:[j.wp.mx(8)]});function aQ(e){var n=e.path,t=e.prefix,r=e.source,i=e.onClick;return(0,f.FD)(L.S,{css:aJ.path,row:!0,gap:8,children:[(0,f.Y)(ti.A,{path:n}),(0,f.FD)(T.EY,{multiline:!1,children:[(0,f.Y)(aq,{path:n,prefix:t,onClick:i}),r?(0,f.FD)("span",{css:aJ.source,children:[(0,f.Y)("span",{css:aJ.sourceArrow,children:""}),(0,f.Y)(aq,{path:r})]}):null]})]})}var aX=t(49150),a0=t(37944),a1=(0,V.x)({list:[j.wp.px(4),j.wp.colWithGap(2)]});function a2(e){var n,t,r=e.isOpen,i=e.files,o=e.commitHash,a=e.callback,l=(0,e0.A)(a),s=(0,w.useCallback)(function(){var e;null==(e=l.current)||e.call(l,!0)},[l]),c=(0,w.useCallback)(function(){var e;null==(e=l.current)||e.call(l,!1)},[l]),u=(n=o,(0,t9.A)((t=(0,y._)(function(e){var t,r;return(0,b.YH)(this,function(i){switch(i.label){case 0:if(!n)return[2,{error:t8.uA.INVALID_REFERENCE}];return[4,e.status()];case 1:if((t=i.sent()).error)return[2,{error:t.error}];return[4,e.getCommit({commit:n})];case 2:if((r=i.sent()).error)return[2,{error:r.error}];return[2,r]}})}),function(e){return t.apply(this,arguments)}),[n])),d=u&&!u.error&&u.subject;return(0,f.Y)(aX.a,{isOpen:r,onRequestClose:c,children:r?(0,f.FD)(L.S,{gap:8,children:[(0,f.Y)(T.Y9,{level:2,children:u?"Restore to ".concat(null!=d?d:"".concat(S.BP," checkpoint")):(0,f.Y)(to.A,{})}),0===i.length?(0,f.Y)(T.EY,{multiline:!1,children:"No file changes for this commit."}):(0,f.FD)(f.FK,{children:[(0,f.Y)(a4,{files:i}),(0,f.FD)(L.S,{row:!0,gap:8,justify:"end",children:[(0,f.Y)(eS.$n,{text:"Cancel",iconLeft:(0,f.Y)(a0.A,{}),onClick:c}),(0,f.Y)(eS.$n,{text:"Restore Commit",iconLeft:(0,f.Y)(oe.A,{}),colorway:"primary",onClick:s})]})]})]}):null})}function a4(e){var n=e.files;return(0,f.Y)(L.S,{gap:12,children:(0,f.FD)(L.S,{gap:4,children:[(0,f.Y)(T.EY,{multiline:!1,children:"The following ".concat((0,i8.A)("file",n.length)," will be modified")}),(0,f.Y)(a5,{files:n})]})})}function a5(e){var n=e.files,t=(0,w.useMemo)(function(){return n.length>20?n.slice(0,20):n},[n]);return(0,f.Y)(L.S,{children:(0,f.FD)("ul",{css:a1.list,children:[t.map(function(e){return(0,f.Y)("li",{children:(0,f.Y)(aQ,{path:e.path,source:e.originalPath})},e.path)}),n.length<=20?null:(0,f.Y)("li",{children:(0,f.FD)(T.EY,{color:"dimmer",children:[" ",n.length-20," more"," ",(0,i8.A)("file",n.length-20)]})})]})})}function a3(){var e,n,t=(0,v._)((0,w.useState)(function(){return{isOpen:!1,files:[]}}),2),r=t[0],i=t[1],o=(e=(0,A.A)().git,(0,w.useCallback)((n=(0,y._)(function(n){var t,r,i,o;return(0,b.YH)(this,function(a){switch(a.label){case 0:return t=n.commitA,r=n.commitB,[4,e.status()];case 1:if(null!==(i=a.sent()).error)return[2,{error:i.error}];return[4,e.getChangesBetweenCommits({a:t,b:r})];case 2:if(null!==(o=a.sent()).error)return[2,{error:o.error}];return[2,{error:null,files:o.files}]}})}),function(e){return n.apply(this,arguments)}),[e]));return{confirmRestoreToCommit:(0,w.useCallback)(function(e){var n;return new Promise((n=(0,y._)(function(n,t){var r,a;return(0,b.YH)(this,function(l){switch(l.label){case 0:return[4,o({commitA:"HEAD",commitB:e})];case 1:if((r=l.sent()).error)return t(r.error),[2];if(0===r.files.length)return t("No files changed"),[2];return a=function(e){i({isOpen:!1,files:[],callback:void 0,commitHash:void 0}),n(e)},i({isOpen:!0,files:r.files,callback:a,commitHash:e}),[2]}})}),function(e,t){return n.apply(this,arguments)}))},[o]),restoreConfirmationModal:(0,w.useMemo)(function(){return(0,f.Y)(a2,(0,ee._)({},r))},[r])}}var a6=t(37003);function a8(e){var n=e.children,t=e.intent,r=e.showUpsell,i=e.date;return(0,f.FD)(L.S,{row:!0,gap:8,align:"center",children:[(0,f.Y)(i_.A,{size:24}),(0,f.Y)(T.EY,{variant:"small",color:"dimmer",children:S.BP}),r?(0,f.Y)(iA,{}):null,(0,f.Y)(eg.Dc,{textVariant:"small",textColor:"dimmest",date:i}),(null==t?void 0:t.kind)==="message"?(0,f.Y)(a6.m2,{intent:t.value,icon:{color:k.LU.foregroundDimmest,size:12},text:{color:"dimmest",variant:"small"}}):null,(null==t?void 0:t.kind)==="inline"?(0,f.Y)(a6.vc,{type:t.value,icon:{color:k.LU.foregroundDimmest,size:12},text:{color:"dimmest",variant:"small"}}):null,n]})}var a7=(0,V.x)({footerRight:[j.wp.flex.growAndShrink(1)]});function a9(e){var n=e.children,t=e.headerProps,r=void 0===t?{showUpsell:!1,intent:null,date:new Date}:t,i=e.headerActions,o=e.footer,a=e.footerActions,l=(0,tg._)(e,["children","headerProps","headerActions","footer","footerActions"]);return(0,f.FD)(L.S,(0,nt._)((0,ee._)({px:16,py:8,gap:8},l),{children:[(0,f.Y)(a8,(0,nt._)((0,ee._)({},r),{children:i})),n,o||a?(0,f.FD)(L.S,{row:!0,gap:8,align:"center",justify:"space-between",children:[(0,f.Y)(L.S,{children:o}),(0,f.Y)(L.S,{css:a7.footerRight,row:!0,gap:8,align:"center",justify:"end",children:a})]}):null]}))}function le(e){var n=(0,S.Gk)(),t=(0,v._)((0,w.useState)(n),1)[0];switch(e.type){case x.fqQ.MANUALLY_ABORTED:return(0,f.Y)(iI.N,{icon:(0,f.Y)(tI.A,{}),text:"Message was stopped"});case x.fqQ.USAGE_LIMIT:return(0,f.Y)(iI.N,{icon:(0,f.Y)(iF.A,{}),colorway:"orange",text:"Usage limit reached"});default:return(0,f.Y)(iI.N,{icon:(0,f.Y)(iF.A,{}),colorway:"red",text:t?"Something went wrong":"Please refresh the page and try again"})}}var ln=t(21881),lt=t(20772);function lr(){var e,n=(0,A.A)().git;return(0,w.useCallback)((e=(0,y._)(function(e){var t,r,i;return(0,b.YH)(this,function(o){switch(o.label){case 0:return t=e.commitHash,[4,n.status()];case 1:if(null!=(r=o.sent()).error)return[2,{error:r.error}];return[4,n.restoreCommit({commit:t})];case 2:if(i=o.sent(),n.forceRefresh(),null!=i.error)return[2,{error:i.error}];return[2,{}]}})}),function(n){return e.apply(this,arguments)}),[n])}var li=(0,w.memo)(function(e){var n,t,r,i,o,a,l,s=e.id,c=e.data,u=e.prevData,d=e.openPane,p=e.removePane,h=e.openAiChatSettingsPanel,m=e.isLastEvent,g=lr(),v=a3(),S=v.confirmRestoreToCommit,Y=v.restoreConfirmationModal,A=(0,nI.A)(),C=(0,i5.R)(A).orgId,_=(0,i3.M)(C).hasUserExhaustedMonthlyCredits,k=iX(d),D=(0,w.useCallback)(function(e,n){return d({type:"webview",data:{ports:{path:e,port:n,type:"local"}}})},[d]),E=(n=(0,y._)(function(){var e;return(0,b.YH)(this,function(n){switch(n.label){case 0:if(!(null==(e=c.proposedActions)?void 0:e.commitId))return[2];return[4,S(c.proposedActions.commitId)];case 1:if(!n.sent())return[3,3];return[4,g({commitHash:c.proposedActions.commitId})];case 2:n.sent(),n.label=3;case 3:return[2]}})}),function(){return n.apply(this,arguments)}),R=(0,i$.Vd)({openFile:k,messageSenderType:x.utd.AI}),I=(0,lt.A)({openWebview:D,ragSources:c.ragSources}),F=(0,w.useCallback)(function(e){return d({type:"git",data:{mode:{type:ln.C.COMMIT,hash:e}}})},[d]),T=c.state===x.qOk.COMPLETE,P=null==(t=c.proposedActions)?void 0:t.didCreateCheckpoint,U=(null==u?void 0:u.type)==="userMessage"?u.content:void 0;return(0,f.FD)(L.S,{children:[Y,P?m?(0,f.Y)(aC,{}):(0,f.Y)(aP,{commitHash:null!=(a=null==(r=c.proposedActions)?void 0:r.commitId)?a:"",created:c.created,onOpenCommit:F,onRestoreToCommit:E}):null,(0,f.FD)(a9,{"data-cy":"message-from-ai",headerProps:{showUpsell:!0,date:c.created,intent:c.intent},headerActions:(0,f.Y)(aU,{eventId:s,sessionId:c.sessionId,didCountEditRequest:null!=(l=null==(i=c.proposedActions)?void 0:i.didCountEditRequest)&&l,hasUserExhaustedMonthlyCredits:_}),footer:T&&c.error?(0,f.Y)(le,{type:c.error}):null,children:[(0,f.Y)(o8,{eventId:s,content:c.content,intent:(null==(o=c.intent)?void 0:o.kind)==="message"?c.intent.value:null,ragSources:c.ragSources,proposedActions:c.proposedActions,sessionId:c.sessionId,openPane:d,removePane:p,markdownCodeComponent:c.isDebugMessage?void 0:R,markdownLinkComponent:I,eventState:c.state}),(0,f.Y)(ax,{eventId:s,proposedActions:c.proposedActions,isLatestProposedActionsEvent:c.isLatestProposedActionsEvent,isMessageComplete:T,sessionId:c.sessionId,openAiChatSettingsPanel:h,openPane:d,removePane:p,prevUserMessageContent:U})]})]})}),lo=(0,V.x)({container:[j.wp.flex.growAndShrink(1),j.wp.borderRadius(),j.wp.py(4),j.wp.px(8),j.wp.border({color:k.LU.outlineDimmest}),i9.b.filledAndOutlined],runButton:[j.wp.rowWithGap(4),j.wp.justify.center,j.wp.align.center,j.wp.height(24),j.wp.minWidth(48),j.wp.cursor.pointer,j.wp.position.relative,j.wp.fontWeight.medium]});function la(e){var n=e.isWorkflowLoading,t=e.isRunning,r=e.forceDisable,i=e.handleRunButtonClick;return n?(0,f.FD)(L.S,{css:lo.runButton,children:[(0,f.Y)(to.A,{size:12}),(0,f.Y)(T.EY,{multiline:!1,variant:"small",children:"Loading"})]}):t?(0,f.FD)(L.S,{css:lo.runButton,onClick:i,children:[(0,f.Y)(om.A,{size:12}),(0,f.Y)(T.EY,{multiline:!1,variant:"small",children:"Rerun"})]}):(0,f.FD)(L.S,{disabled:r,css:lo.runButton,onClick:i,children:[(0,f.Y)(oh.A,{size:12}),(0,f.Y)(T.EY,{multiline:!1,variant:"small",children:"Run"})]})}function ll(){var e,n,t,r,i,o=(0,nV.oh)(),a=(0,nV.lO)(),l=a.isRunning,s=a.isDisabled,c=a.runButtonWorkflowName,u=(0,nV.d_)(),d=(0,w.useCallback)(function(){(0,ty.u4)(ty.AZ.RUN_BUTTON_CLICKED,{source:"assistantRerunButton",runner:"workflows"}),u()},[u]);return(0,f.Y)(eu.ui,{css:lo.container,children:(0,f.Y)(P.m_,{placement:"top",tooltip:(t=(e={forceDisable:s,runButtonText:c,isRunning:l,isWorkflowLoading:o}).forceDisable,r=e.isRunning,i=e.isWorkflowLoading,n=t?"Run button is not configured":i?"Connecting to the workspace":r?"Rerun app":"Run app",(0,f.Y)(T.EY,{variant:"small",color:"dimmer",children:n})),children:(0,f.Y)(la,{forceDisable:s,handleRunButtonClick:d,isRunning:l,isWorkflowLoading:o})})})}var ls=(0,V.x)({errorContainer:[j.wp.color.accentNegativeDefault]});function lc(e){var n,t,r,i=e.sessionId,o=e.commitHash,a=e.created,l=e.eventId,s=e.eventWhichProposedChanges,c=e.onOpenCommit,u=e.appliedChanges,d=e.usageIndicatorVariant,p=e.changeSetSummary,h=e.didCountEditRequest,m=(0,ip.m5)(),g=(0,n4.g)("assistantAutoRestartRepl").preferences,Y=(0,v._)((0,w.useState)(!1),2),A=Y[0],x=Y[1],C=(0,v._)((0,w.useState)(null),2),k=C[0],D=C[1],E=lu("HEAD"),R=lu("HEAD^1"),I=E&&!E.error&&E.hash===o,F="reverted"===oX({sessionId:i,eventIdWhichProposedChanges:s}).state,P=E&&!E.error&&E.trailers[t8.aT]===o,U=lr(),N=a3(),O=N.confirmRestoreToCommit,M=N.restoreConfirmationModal,B=(n=i,t=(0,S.NC)(),r=(0,_.J2)(t.sessions.get(n)),(0,w.useCallback)(function(e){if(null!=n)return null==r?void 0:r.appendEvent({kind:"iterativeAgent",action:e})},[r,n]));function H(){return(H=(0,y._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:if(!o)return[2];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,O(o)];case 2:return e.sent()&&z(o),[3,4];case 3:return e.sent(),D("Something went wrong. Please try again."),[3,4];case 4:return[2]}})})).apply(this,arguments)}function z(e){return W.apply(this,arguments)}function W(){return(W=(0,y._)(function(e){var n;return(0,b.YH)(this,function(t){switch(t.label){case 0:if(!e)return[2];return x(!0),[4,U({commitHash:e})];case 1:if((n=t.sent()).error)return D(n.error),x(!1),[2];return D(null),x(!1),[2]}})})).apply(this,arguments)}var G=R&&!R.error,V=(0,f.FD)(f.FK,{children:[(0,f.Y)(T.EY,{variant:"small",color:"dimmer",children:"You may need to re-run your App to see the latest changes take effect."}),m?null:(0,f.Y)(ll,{})]});return(0,f.FD)(L.S,{px:16,py:8,gap:8,children:[M,k?(0,f.FD)(L.S,{css:ls.errorContainer,row:!0,gap:8,align:"center",children:[(0,f.Y)(ay.A,{}),k]}):null,I?G?(0,f.Y)(aR,{commitId:o,changeSetSummary:p,date:a,isAtCheckpoint:!1,isRestoring:A,onOpenCommit:c,onCommitRestore:(0,y._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:return[4,z(R.hash)];case 1:return e.sent(),B({eventIdWhichProposedChanges:s,eventIdWhichAppliedChanges:l,revertedChanges:u}),[2]}})}),restoreButtonText:"Undo these changes",usageIndicatorVariant:h?d:aD.None}):null:(0,f.Y)(aR,{commitId:o,changeSetSummary:p,date:a,isAtCheckpoint:!!P,isRestoring:A,onCommitRestore:function(){return H.apply(this,arguments)},onOpenCommit:c,usageIndicatorVariant:h?d:aD.None,wasReverted:F}),(0,f.Y)(L.S,{gap:8,align:"start",children:I&&!g.assistantAutoRestartRepl?V:null})]})}function lu(e){var n;return(0,t9.A)((n=(0,y._)(function(n){var t;return(0,b.YH)(this,function(r){switch(r.label){case 0:return[4,n.getCommit({commit:e})];case 1:if((t=r.sent()).error)return[2,t];return[2,{hash:t.hash,trailers:t.trailers,error:null,body:t.body,subject:t.subject}]}})}),function(e){return n.apply(this,arguments)}),[e])}function ld(e){var n=e.id,t=e.data,r=e.proposedActionEventData,i=e.openPane,o=e.checkpointUsageIndicatorVariant,a=(0,_.J2)(r),l=(0,w.useCallback)(function(e){return i({type:"git",data:{mode:{type:ln.C.COMMIT,hash:e}}})},[i]);if((null==a?void 0:a.type)!=="assistantMessage"||!a.proposedActions)return null;if((0,x.VFn)(t.contents.contents,"appliedFileChanges")){var s=a.proposedActions,c=s.summary,u=s.didCountEditRequest;return(0,f.Y)(lc,(0,nt._)((0,ee._)({},(0,x.QNh)(t.contents.contents)),{sessionId:t.sessionId,eventId:n,created:t.created,onOpenCommit:l,usageIndicatorVariant:o,changeSetSummary:c,didCountEditRequest:u}))}return(0,x.VFn)(t.contents.contents,"revertedFileChanges"),null}var lp=t(51830),lf=t(71452),lh=t(94056),lm=t(49045),lg=(0,lm.v)(["opacity"]),lv=lg.cssVars,lw=lg.styleTokens,ly=(0,V.x)({fade:[j.wp.position.absolute,j.wp.top(-1),j.wp.left(0),j.wp.width("100%"),j.wp.height(40),j.wp.backgroundGradient(k.LU.surfaceBackground,"transparent"),{pointerEvents:"none",opacity:lw.opacity,transitionProperty:"opacity",transitionDuration:lh.Ds.duration,transitionTimingFunction:lh.Ds.timingFunction}]});function lb(e){var n=e.show,t=(0,w.useRef)(null);return(0,lf.d)(t,null!=n?n:new np.N(!0),function(e){return(0,g._)({},lv.opacity,e?"1":"0")}),(0,f.Y)("div",{ref:t,css:ly.fade})}var lS=t(93080),lY=(0,V.x)({bannerContainer:[j.wp.position.sticky],loadingContainer:[j.wp.center,j.wp.flex.growAndShrink(1)]});function lA(e){var n,t,r=e.shouldAutoscrollRef,i=(0,tg._)(e,["shouldAutoscrollRef"]),o=(0,w.useRef)(new Map),a=i.sessionId,l=(n=(0,w.useRef)(null),t=(0,_.HJ)(!1),(0,w.useEffect)(function(){var e=n.current;if(e){var r=function(){var n=e.scrollTop>0;t.current!==n&&t.set(n)},i=requestAnimationFrame(r),o=function(){i&&cancelAnimationFrame(i),i=requestAnimationFrame(r)};return e.addEventListener("scroll",o),function(){e.removeEventListener("scroll",o),i&&cancelAnimationFrame(i)}}},[n,t]),{scrollerRef:n,isScrolledDown:t}),s=l.scrollerRef,c=l.isScrolledDown;return(0,f.FD)(lS.y,{shouldAutoScrollRef:r,scrollCacheKey:a,scrollCache:o.current,scrollerRef:s,children:[(0,f.Y)(L.S,{css:lY.bannerContainer,children:(0,f.Y)(iN,{})}),(0,f.Y)(lx,(0,ee._)({},i)),(0,f.Y)(lb,{show:c})]})}function lx(e){var n=e.sessionId,t=(0,tg._)(e,["sessionId"]),r=(0,S.NC)(),i=(0,_.J2)(r.sessions.get(n)),o=(0,w.useMemo)(function(){return null==i?void 0:i.transform(iz,1e3)},[i]),a=(0,_.Rj)(function(){return null==o?void 0:o.tuples},[o],{preserve:!1}),l=(0,_.Rj)(function(){return null==o?void 0:o.mapped},[o],{preserve:!1}),s=(0,_.J2)(null==i?void 0:i.leaf),c=(0,lp.F)()?aD.Starter:aD.Paid,u=(0,iW.z7)();return a&&l?(0,f.Y)(iW.cX,{value:u,children:a.map(function(e,n){var r=(0,v._)(e,2),i=r[0],o=r[1];return(0,f.Y)(lC,(0,ee._)({id:i,data:o,prevData:n>0?a[n-1][1]:void 0,isLastEvent:i===s,checkpointUsageIndicatorVariant:c,eventDataMap:l},t),i)})}):(0,f.Y)(L.S,{css:lY.loadingContainer,children:(0,f.Y)(to.A,{})})}function lC(e){var n=e.id,t=e.data,r=e.prevData,i=e.eventDataMap,o=(0,tg._)(e,["id","data","prevData","eventDataMap"]),a=(0,A.A)(),l=a.secrets,s=a.fs,c=(0,_.J2)(t),u=(0,_.J2)(r);if((null==c?void 0:c.type)==="userMessage")return(0,f.Y)(i1,{data:c,openPane:o.openPane,readFile:s.readFile});if((null==c?void 0:c.type)==="assistantMessage")return(0,f.Y)(li,(0,ee._)({id:n,data:c,prevData:u,addSecretEntries:l.addEntries},o));if((null==c?void 0:c.type)==="assistantAction"){var d=i.get(c.eventIdWhichProposedAction);return(0,f.Y)(ld,(0,ee._)({id:n,data:c,proposedActionEventData:d},o))}return null}var l_=t(54240),lk=t(35567),lD=t(6796),lE=t(15811),lR=t(48875),lI=t(13968),lF=t(69938);function lT(e){var n=e.hasAccessToAdvancedModel,t=(0,io._P)({controlName:"flag-poliwag-override"}),r=(0,n4.g)("assistantAutoApplyChanges","assistantAutoRestartRepl","assistantAdvancedModelOverride"),i=r.preferences,o=r.update,a=(0,S.so)(),l=a.advancedModel,s=a.overrideModel,c=t?(0,f.FD)(f.FK,{children:[(0,f.Y)(lI.n,{setting:lR.KY.assistantAdvancedModelOverride,currentValue:i.assistantAdvancedModelOverride,update:o,title:(0,f.FD)(f.FK,{children:[(0,f.Y)(L.S,{row:!0,gap:8,align:"center",justify:"start",children:(0,f.Y)(T.EY,{multiline:!1,children:"Model Override"})}),(0,f.Y)(L.S,{row:!0,gap:8,children:(0,f.FD)(T.EY,{variant:"small",color:"dimmest",children:["Current: ",(null!=s?s:l).name.readable]})})]})}),(0,f.Y)(lF.a,{})]}):null;return(0,f.FD)(f.FK,{children:[c,n?(0,f.Y)(lI.n,{setting:lR.KY.assistantAutoApplyChanges,update:o,currentValue:i.assistantAutoApplyChanges}):(0,f.Y)(lI.j,{setting:lR.KY.assistantAutoApplyChanges,currentValueOption:void 0,disabledReason:"Advanced Assistant can automatically apply code changes."}),(0,f.Y)(lF.a,{}),n?(0,f.Y)(lI.n,{setting:lR.KY.assistantAutoRestartRepl,update:o,currentValue:i.assistantAutoRestartRepl}):(0,f.Y)(lI.j,{setting:lR.KY.assistantAutoRestartRepl,currentValueOption:void 0,disabledReason:"Advanced Assistant can automatically restart your App after applying changes."})]})}var lP=t(50175);function lL(){var e=(0,en._)(["\n  query UserPrompts {\n    currentUser {\n      id\n      aiPrompts {\n        ... on UserAiPromptsResult {\n          prompts {\n            id\n            prompt\n            title\n          }\n        }\n      }\n    }\n  }\n"]);return lL=function(){return e},e}function lU(){var e=(0,en._)(["\n  mutation UpdateUserAiPrompts($input: UpdateUserAiPromptsInput!) {\n    updateUserAiPrompts(input: $input) {\n      ... on AICustomPrompt {\n        id\n        prompt\n        title\n      }\n    }\n  }\n"]);return lU=function(){return e},e}function lN(){var e=(0,en._)(["\n  mutation EditUserAiPrompt($input: EditUserAiPromptInput!) {\n    editUserAiPrompt(input: $input) {\n      ... on AICustomPrompt {\n        id\n        prompt\n        title\n      }\n    }\n  }\n"]);return lN=function(){return e},e}function lO(){var e=(0,en._)(["\n  mutation DeleteUserAiPrompts($input: DeleteUserAiPromptsInput!) {\n    deleteUserAiPrompt(input: $input) {\n      ... on DeleteUserAiPromptResult {\n        id\n      }\n    }\n  }\n"]);return lO=function(){return e},e}function lM(){var e=(0,en._)(["\n  query ReplSelectedPrompt($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        replAiPromptId\n      }\n    }\n  }\n"]);return lM=function(){return e},e}function lB(){var e=(0,en._)(["\n  mutation UpdateReplAiPromptSelection(\n    $input: UpdateReplAiPromptSelectionInput!\n  ) {\n    updateReplAiPromptSelection(input: $input) {\n      ... on UpdateReplAiPromptSelectionResult {\n        repl {\n          id\n        }\n      }\n    }\n  }\n"]);return lB=function(){return e},e}function lH(){var e=(0,en._)(["\n  mutation DeleteReplAiPromptSelection(\n    $input: DeleteReplAiPromptSelectionInput!\n  ) {\n    deleteReplAiPromptSelection(input: $input) {\n      ... on DeleteReplAiPromptSelectionResult {\n        repl {\n          id\n        }\n      }\n    }\n  }\n"]);return lH=function(){return e},e}var lz={},lW=(0,et.J1)(lL()),lG=(0,et.J1)(lU()),lV=(0,et.J1)(lN()),lj=(0,et.J1)(lO()),lZ=(0,et.J1)(lM()),lq=(0,et.J1)(lB()),lK=(0,et.J1)(lH()),l$=t(27165),lJ=(0,V.x)({input:[j.wp.maxHeight("200px"),{resize:"vertical",overflow:"auto"}],buttonContainer:[j.wp.width("100%"),j.wp.rowWithGap(6),j.wp.justify.end,j.wp.pt(4)]});function lQ(e){var n,t,r,i=e.refetchPrompts,o=e.onClose,a=(0,v._)((0,w.useState)(""),2),l=a[0],s=a[1],c=(0,v._)((0,w.useState)(""),2),u=c[0],d=c[1],p=(0,v._)((0,w.useState)(!1),2),h=p[0],m=p[1],g=(0,v._)((n={onCompleted:function(){(0,ty.u4)(ty.AZ.ASSISTANT_USED,{action:"custom_prompt_saved",title:u,prompt:l}),x(),i(),o(),m(!1)},onError:function(){m(!0)}},t=(0,ee._)({},lz,n),lP.n(lG,t)),2),S=g[0],Y=g[1].loading,A=(r=(0,y._)(function(){var e,n;return(0,b.YH)(this,function(t){switch(t.label){case 0:if(e=l.trim(),n=u.trim(),!e||!n)return[2];return[4,S({variables:{input:{prompt:e,title:n}}})];case 1:return t.sent(),[2]}})}),function(){return r.apply(this,arguments)}),x=function(){s(""),d("")},C=Y||!l||!u;return(0,f.FD)(L.S,{py:4,gap:8,children:[h?(0,f.Y)(iI.N,{icon:(0,f.Y)(ay.A,{}),colorway:"red",text:"Could not save prompt. Try again."}):null,(0,f.Y)(l$.l,{onSubmit:function(e){e.preventDefault(),A()},children:(0,f.FD)(L.S,{gap:4,children:[(0,f.FD)(L.S,{row:!0,gap:6,align:"center",children:[(0,f.Y)(T.EY,{children:"Title"}),(0,f.Y)(T.EY,{variant:"small",color:"dimmer",children:"(max 70 characters)"})]}),(0,f.Y)(eA.pd,{disabled:Y,value:u,onChange:function(e){var n=e.target.value;n.length<=70&&d(n)}}),(0,f.Y)(T.EY,{children:"Prompt"}),(0,f.Y)(eA.ov,{disabled:Y,value:l,onChange:function(e){var n=e.target.value;n.length<=15e3&&s(n)},css:lJ.input,autoSize:!0}),(0,f.FD)(L.S,{css:lJ.buttonContainer,children:[(0,f.Y)(eS.$n,{colorway:"primary",text:"Save",type:"submit",disabled:C,loading:Y}),(0,f.Y)(eS.$n,{text:"Cancel",onClick:function(){o(),m(!1)}})]})]})})]})}var lX=t(11337),l0=(0,V.x)({input:[j.wp.maxHeight("200px"),{resize:"vertical",overflow:"auto"}],buttonContainer:[j.wp.width("100%"),j.wp.rowWithGap(6),j.wp.justify.end],form:[j.wp.colWithGap(6)],promptItem:[j.wp.borderRadius(),j.wp.py(6),j.wp.px(8)]});function l1(e){var n,t,r,i,o,a,l=e.isOpen,s=e.prompts,c=e.promptDataLoading,u=e.onClose,d=e.refetchPrompts,p=(0,v._)((0,w.useState)(!1),2),h=p[0],m=p[1],S=(0,v._)((0,w.useState)(s||[]),2),Y=S[0],A=S[1],x=(0,v._)((0,w.useState)(new Set),2),C=x[0],_=x[1],k=(0,v._)((n={onCompleted:function(){d()}},t=(0,ee._)({},lz,n),lP.n(lj,t)),2),E=k[0],R=k[1].loading,I=(0,v._)((r={onCompleted:function(){d()}},i=(0,ee._)({},lz,r),lP.n(lV,i)),2),F=I[0],P=I[1].loading;(0,w.useEffect)(function(){s&&A(function(e){return s.map(function(n){return C.has(n.id)&&e.find(function(e){return e.id===n.id})||n})})},[s,C]);var U=function(e,n,t){A(function(r){return r.map(function(r){return r.id===e?(0,nt._)((0,ee._)({},r),(0,g._)({},n,t)):r})}),_(function(n){return new Set(n).add(e)})},N=(o=(0,y._)(function(e){var n;return(0,b.YH)(this,function(t){switch(t.label){case 0:if(!(null==(n=Y.find(function(n){return n.id===e}))?void 0:n.title)||!(null==n?void 0:n.prompt))return[2];return[4,F({variables:{input:{promptId:n.id,prompt:n.prompt,title:n.title}}})];case 1:return t.sent(),_(function(n){var t=new Set(n);return t.delete(e),t}),[2]}})}),function(e){return o.apply(this,arguments)}),O=function(e){A(function(n){return n.map(function(n){return n.id===e&&s&&s.find(function(n){return n.id===e})||n})}),_(function(n){var t=new Set(n);return t.delete(e),t})},M=(a=(0,y._)(function(e){return(0,b.YH)(this,function(n){return E({variables:{input:{promptId:e}}}),[2]})}),function(e){return a.apply(this,arguments)});return(0,f.FD)(aX.a,{isOpen:l,onRequestClose:function(){u(),m(!1)},children:[(0,f.Y)(T.EY,{variant:"subheadBig",children:"Manage Prompts"}),s?(0,f.FD)(L.S,{py:8,gap:4,children:[(0,X._)(Y).sort(function(e,n){return e.title.localeCompare(n.title,void 0,{sensitivity:"base"})}).map(function(e){return(0,f.Y)(D.A,{headerContent:(0,f.Y)(T.EY,{children:e.title}),children:(0,f.Y)(eu.ui,{elevated:!0,css:l0.promptItem,children:(0,f.FD)(lX.lV,{css:l0.form,onSubmit:function(n){n.preventDefault(),N(e.id)},children:[(0,f.FD)(L.S,{row:!0,gap:6,align:"center",children:[(0,f.Y)(T.EY,{children:"Title"}),(0,f.Y)(T.EY,{variant:"small",color:"dimmer",children:"(max 70 characters)"})]}),(0,f.Y)(eA.pd,{disabled:P,value:e.title,onChange:function(n){return U(e.id,"title",n.target.value)}}),(0,f.Y)(T.EY,{children:"Prompt"}),(0,f.Y)(eA.ov,{disabled:P,value:e.prompt,onChange:function(n){return U(e.id,"prompt",n.target.value)},css:l0.input,autoSize:!0}),(0,f.FD)(L.S,{css:l0.buttonContainer,children:[(0,f.Y)(eS.$n,{colorway:"red",text:"Delete",onClick:function(){return M(e.id)},disabled:R}),(0,f.Y)(eS.$n,{colorway:"primary",text:"Save",type:"submit",disabled:!C.has(e.id)||P||!e.title||!e.prompt}),(0,f.Y)(eS.$n,{text:"Reset",onClick:function(){return O(e.id)},disabled:!C.has(e.id)})]})]})})},e.id)}),c?(0,f.FD)(L.S,{py:4,row:!0,gap:6,align:"center",children:[(0,f.Y)(to.A,{size:16}),(0,f.Y)(T.EY,{variant:"small",color:"dimmer",children:"Updating prompts"})]}):null]}):null,(0,f.Y)(L.S,{py:4,gap:8,children:h?(0,f.Y)(lQ,{refetchPrompts:d,onClose:function(){return m(!1)}}):(0,f.Y)(eS.$n,{text:"Add new prompt",iconLeft:(0,f.Y)(tT.A,{}),colorway:"primary",onClick:function(){return m(!0)}})})]})}var l2="default",l4={id:l2,prompt:"".concat(S.BP," will operate using its default behavior."),title:"Default"},l5=(0,V.x)({select:[j.wp.flex.growAndShrink(1),{"& button":{height:"auto",minHeight:"32px"},"& button > span > div > span":{textAlign:"justify"}}],selectContainer:[j.wp.width("100%"),j.wp.align.center],loadingContainer:[j.wp.borderRadius(),j.wp.mr(24),j.wp.gap(6)],loadingPrompt:[j.wp.width("fit-content"),j.wp.px(4),nM.S.foregroundPulse(),{color:"transparent"}]});function l3(){var e,n,t,r,i,o,a,l,s,c,u,d,p=(0,v._)((0,w.useState)(!1),2),h=p[0],m=p[1],g=(0,nI.A)(),Y=(e={notifyOnNetworkStatusChange:!0},n=(0,ee._)({},lz,e),er.I(lW,n)),A=Y.data,x=Y.loading,C=Y.refetch,_=(t={variables:{replId:g}},r=(0,ee._)({},lz,t),er.I(lZ,r)),k=_.data,D=_.refetch,E=(0,v._)((i={onCompleted:function(){D()}},o=(0,ee._)({},lz,i),lP.n(lq,o)),1)[0],I=(0,v._)((a={update:function(e,n){var t,r=n.data;(null==r||null==(t=r.deleteReplAiPromptSelection)?void 0:t.__typename)==="DeleteReplAiPromptSelectionResult"&&r.deleteReplAiPromptSelection.repl.id&&e.modify({id:e.identify({__typename:"Repl",id:g}),fields:{replAiPromptId:function(){}}})}},l=(0,ee._)({},lz,a),lP.n(lK,l)),1)[0],P=A&&(null==(c=A.currentUser)?void 0:c.aiPrompts.__typename)==="UserAiPromptsResult"?null==(u=A.currentUser)?void 0:u.aiPrompts.prompts:[],U=(null==k?void 0:k.getRepl.__typename)==="Repl"?k.getRepl.replAiPromptId:void 0,N=(s=(0,y._)(function(e){var n,t,r;return(0,b.YH)(this,function(i){switch(i.label){case 0:if(e!==l2)return[3,3];if(!U)return[3,2];return[4,I({variables:{input:{replId:g,promptId:U}}})];case 1:i.sent(),i.label=2;case 2:return[2];case 3:return[4,E({variables:{input:{promptId:e,replId:g}}})];case 4:return(null==(t=i.sent().data)||null==(n=t.updateReplAiPromptSelection)?void 0:n.__typename)==="UpdateReplAiPromptSelectionResult"&&(r=P.find(function(n){return n.id===e}),(0,ty.u4)(th.AZ.ASSISTANT_USED,{action:"custom_prompt_selected",title:null==r?void 0:r.title,prompt:null==r?void 0:r.prompt})),[2]}})}),function(e){return s.apply(this,arguments)});return(0,f.FD)(L.S,{gap:4,children:[(0,f.FD)(T.EY,{multiline:!1,children:[S.BP," Prompt"]}),(0,f.FD)(T.EY,{variant:"small",color:"dimmest",children:["Personalize your ",S.BP," with custom rules & instructions"]}),x?(0,f.FD)(eu.ui,{css:l5.loadingContainer,px:8,py:8,elevated:!0,children:[(0,f.Y)(T.EY,{css:l5.loadingPrompt,children:"Sample prompt title"}),(0,f.Y)(T.EY,{variant:"small",css:l5.loadingPrompt,children:"Sample prompt contents. These are rules & instructions for Assistant behavior."})]}):(0,f.FD)(L.S,{css:l5.selectContainer,row:!0,gap:4,children:[(0,f.Y)(F.l,{"aria-label":"Assistant Custom Prompt",style:{marginRight:0},items:[l4].concat((0,X._)(P)),defaultSelectedKey:(null==(d=P.find(function(e){return U===e.id}))?void 0:d.id)||l2,onSelectionChange:function(e){var n;N((null==(n=P.find(function(n){return n.id===e}))?void 0:n.id)||l2)},css:l5.select,children:function(e){return(0,f.Y)(R.nh,{id:e.id,label:e.title,description:e.prompt,dataCy:e.id},e.id)}}),(0,f.Y)(eY.K0,{alt:"Manage prompts",onClick:function(){return m(!0)},children:(0,f.Y)(oI.A,{})})]}),(0,f.Y)(l1,{isOpen:h,prompts:P,promptDataLoading:x,onClose:function(){m(!1)},refetchPrompts:C})]})}var l6=t(90329),l8=t(82568),l7=t(92520),l9=t(34384),se=t(50051),sn=t(8054),st=t(32957),sr=(0,lm.v)(["fontSize","padding","border"]),si=sr.cssVars,so=sr.styleTokens,sa=(0,V.x)({root:[j.wp.center,j.wp.flex.growAndShrink(1)],input:[{backgroundColor:"transparent",border:so.border,fontSize:so.fontSize,padding:so.padding},j.wp.flex.growAndShrink(1)]});function sl(e){var n,t,r=(0,v._)((0,w.useState)(e.initialValue),2),i=r[0],o=r[1],a=(0,e0.A)(e.onCancel),l=(0,st.A)(function(){return a.current()},[]),s=(0,w.useRef)(null);(0,w.useEffect)(function(){var e;null==(e=s.current)||e.select()},[]);var c=e.compact?(n={},(0,g._)(n,si.border,"0 none"),(0,g._)(n,si.fontSize,k.LU.fontSizeSmall),(0,g._)(n,si.padding,"0 ".concat(k.LU.space2)),n):(t={},(0,g._)(t,si.padding,"".concat(k.LU.space8)),(0,g._)(t,si.fontSize,k.LU.fontSizeDefault),t);return(0,f.Y)(L.S,{style:c,innerRef:l,css:sa.root,row:!0,gap:4,tag:"form",onSubmit:function(n){n.preventDefault(),i&&e.onSubmit(i)},children:(0,f.Y)(eA.pd,{placeholder:"Name this chat",ref:s,css:sa.input,value:i,onChange:function(e){return o(e.currentTarget.value)},onKeyDown:function(n){"Escape"===n.key&&e.onCancel()}})})}var ss=t(63756),sc=t(13641),su=t(59655),sd=t(90694);function sp(e){var n,t=(0,v._)((0,w.useState)(!1),2),r=t[0],i=t[1];return r?(0,f.Y)(sl,{compact:!0,initialValue:null!=(n=e.title)?n:"",onCancel:function(){return i(!1)},onSubmit:function(n){i(!1),e.onRename(n)}}):(0,f.Y)(sh,{title:e.title,archived:e.archived,onRename:function(){return i(!0)},onToggleArchived:e.onToggleArchived})}var sf=(0,V.x)({root:[j.wp.flex.growAndShrink(1),{maxWidth:"100%"}],button:[j.wp.reset.button,j.wp.rowWithGap(4),j.wp.align.center,j.wp.flex.growAndShrink(1),i9.b.nofill,{fontWeight:k.LU.fontWeightMedium,svg:[j.wp.color.foregroundDimmest],"&:hover svg":[j.wp.color.foregroundDimmer]}],popover:[j.wp.borderRadius(4),j.wp.shadow(1),j.wp.border()],item:[i9.b.listItem,j.wp.minWidth(140),j.wp.px(4),j.wp.py(2)]});function sh(e){var n=["Rename",e.archived?"Unarchive":"Archive"],t=(0,l8.WM)({items:n,onSelectedItemChange:function(n){switch(n.selectedItem){case"Rename":e.onRename();break;case"Archive":case"Unarchive":e.onToggleArchived()}}}),r=(0,v._)((0,w.useState)(null),2),i=r[0],o=r[1],a=(0,v._)((0,w.useState)(null),2),l=a[0],s=a[1],c=(0,l6.E)(i,l,{modifiers:[{name:"offset",options:{offset:[0,8]}},{name:"preventOverflow",options:{padding:16}}],placement:"bottom"});return(0,f.Y)(f.FK,{children:(0,f.FD)(L.S,{css:sf.root,children:[(0,f.FD)(L.S,(0,nt._)((0,ee._)({tag:"button",css:sf.button,px:4},t.getToggleButtonProps({refKey:"innerRef",ref:o})),{children:[(0,f.Y)(sn.n,{variant:"small",color:e.title?"default":"dimmest",multiline:!1,text:e.title||"New chat"}),(0,f.Y)(su.A,{rotate:180*!!t.isOpen,size:12})]})),(0,f.Y)(L.S,(0,nt._)((0,ee._)({},t.getMenuProps({refKey:"innerRef"})),{children:t.isOpen?(0,f.Y)(sc.Z,{children:(0,f.Y)(eu.ui,(0,nt._)((0,ee._)({elevated:!0,style:c.styles.popper,innerRef:s,css:sf.popover},c.attributes.popper),{children:n.map(function(e,n){var r=t.highlightedIndex===n?{backgroundColor:k.LU.interactiveBackground}:void 0;return(0,f.Y)(L.S,(0,nt._)((0,ee._)({css:sf.item,style:r},t.getItemProps({refKey:"innerRef",item:e,index:n})),{children:(0,f.Y)(T.EY,{variant:"small",children:e})}),e)})}))}):null}))]})})}var sm=(0,V.x)({tooltip:[j.wp.textAlign.center,j.wp.p(4)]});function sg(e){var n=(0,S.fS)(),t=(0,o9.Z)("assistant-now-defaulting-to-claude-3-5"),r=t.isLoading,i=t.isDone,o=t.setAsDone,a=(null==n?void 0:n.qualified)===l7.oE.qualified&&!1===r&&!1===i;return(0,w.useEffect)(function(){setTimeout(function(){o()},5e3)},[o]),(0,f.Y)(P.m_,{isOpen:a,onOpenChange:function(e){e||o()},maxWidth:300,tooltip:(0,f.FD)(L.S,{css:sm.tooltip,children:[(0,f.FD)(T.EY,{children:["Currently using ",null==n?void 0:n.readable,"."]}),(0,f.Y)(T.EY,{children:"Configure settings here."})]}),children:(0,f.Y)(eY.K0,{alt:"Settings",onClick:function(){o(),e.onClick()},children:(0,f.Y)(oI.A,{})})})}function sv(e){var n=e.sessionCostInCents,t=(0,l9.ET)(),r=t.orgId,i=t.orgSlug,o=(0,io._P)({controlName:"flag-no-header-usage"}),a=r&&i?"".concat((0,se.EG)({slug:i}).usage.href,"#agent"):"/usage#agent";return(0,f.Y)(ss.A,{alt:n&&o?"Your usage for this chat: $".concat((n/100).toFixed(2)):"Usage Page",href:a,target:"_blank",onClick:function(){(0,ty.u4)(ty.AZ.ASSISTANT_USED,{action:"opened_usage_link",intent_type:null,model:null,user_model_selection:null,message_content:null,message_source:"chat_pane",message_surface:"workspace_ai_pane"})},children:(0,f.Y)(ak.A,{})})}var sw=(0,V.x)({root:[j.wp.height(28),j.wp.rowWithGap(4),j.wp.px(2),j.wp.justify.spaceBetween,j.wp.align.center],center:[j.wp.flex.growAndShrink(1),j.wp.align.center],right:[j.wp.rowWithGap(0)]});function sy(e){var n=e.onSidebarButtonClick,t=e.onAddButtonClick,r=e.title,i=e.prefsButton,o=e.usageButton,a=e.sessionCost;return(0,f.FD)(L.S,{align:"center",row:!0,gap:0,children:[(0,f.Y)(L.S,{children:(0,f.Y)(eY.K0,{alt:"All chats",onClick:n,children:(0,f.Y)(sd.A,{})})}),(0,f.Y)(eS.$n,{iconLeft:(0,f.Y)(tT.A,{}),text:"New chat",size:"small",variant:"nofill",onClick:t}),(0,f.Y)(L.S,{css:sw.center,children:r}),(0,f.FD)(L.S,{row:!0,gap:4,align:"center",children:[a,o,i]})]})}var sb=t(6088),sS=(0,V.x)({container:[j.wp.flex.growAndShrink(1),j.wp.flex.column,j.wp.position.relative],body:[j.wp.flex.growAndShrink(1),j.wp.overflowY("auto")],footer:[j.wp.minHeight(40),j.wp.flex.row,j.wp.align.center],settingsPaneButton:[j.wp.display.inlineFlex,j.wp.mx(4),{verticalAlign:"bottom",gap:k.LU.space4}],heading:[j.wp.fontWeight.medium],upgradePill:[i9.b.filled,(o={},(0,g._)(o,k.qo.interactiveBackground,k.LU.yellowDimmest),(0,g._)(o,k.qo.interactiveBackgroundActive,k.LU.yellowDimmer),o)]});function sY(e){var n=e.hasAccessToAdvancedModel,t=e.onOpenUserSettings,r=(0,v._)((0,w.useState)(!1),2),i=r[0],o=r[1];return(0,f.FD)(eu.ui,{css:sS.container,background:"default",children:[(0,f.FD)(L.S,{css:sS.body,py:8,px:16,gap:8,children:[(0,f.Y)(lF.a,{}),(0,f.Y)(l3,{}),(0,f.Y)(lF.a,{}),(0,f.FD)(L.S,{row:!0,gap:4,align:"center",children:[(0,f.Y)(T.EY,{css:sS.heading,variant:"text",children:"Advanced ".concat(S.BP," Preferences")}),n?null:(0,f.Y)(iy.a,{css:sS.upgradePill,text:iv.en,onClick:function(){return o(!0)}})]}),(0,f.Y)(lT,{hasAccessToAdvancedModel:n}),(0,f.Y)(lF.a,{})]}),(0,f.Y)(lF.a,{}),(0,f.Y)(L.S,{css:sS.footer,py:8,px:16,children:(0,f.FD)(T.EY,{variant:"small",children:["Looking for more workspace settings?"," ",(0,f.Y)(eS.$n,{css:sS.settingsPaneButton,iconLeft:(0,f.Y)(oI.A,{}),size:"small",variant:"underlined",text:"Open User Settings",onClick:t})]})}),(0,f.Y)(ih.A,{isOpen:i,onClose:function(){return o(!1)},reloadPageAfterPurchaseComplete:!0,type:"purchase",analyticsContext:{upgrade:{context:"ai_chat_upsell",surface:"assistant_settings"}},highlightUpsell:"assistant"})]})}function sA(e){var n=e.onBack;return(0,f.Y)(L.S,{css:sw.root,children:(0,f.FD)(L.S,{row:!0,align:"center",children:[(0,f.Y)(eY.K0,{onClick:n,alt:"Back to session",children:(0,f.Y)(sb.A,{})}),(0,f.Y)(T.EY,{children:"Settings"})]})})}var sx=t(64612),sC=t(42672),s_=t(17078),sk=t(96612),sD=t(4515),sE=t(93158),sR=t(93582),sI=function(){var e=(0,v._)((0,w.useState)(!1),2),n=e[0],t=e[1],r=(0,v._)((0,w.useState)({x:0,y:0}),2);return{clicked:n,setClicked:t,points:r[0],setPoints:r[1]}},sF=function(){var e=sI(),n=e.clicked,t=e.setClicked,r=e.points,i=e.setPoints;(0,w.useEffect)(function(){var e=function(){return t(!1)};return document.addEventListener("click",e),function(){document.removeEventListener("click",e)}},[t]);var o=(0,w.useCallback)(function(e){var n=e.x,r=e.y;t(!0),i({x:n,y:r})},[t,i]),a=(0,w.useCallback)(function(e){e.preventDefault(),e.stopPropagation(),o({x:e.clientX,y:e.clientY})},[o]),l=(0,w.useCallback)(function(){t(!1)},[t]);return{triggerProps:{onContextMenu:a},menuProps:(0,nt._)((0,ee._)({},r),{isOpen:n}),onClose:l,open:o}},sT=(0,V.x)({menu:[j.wp.position.fixed,j.wp.flex.column,j.wp.borderRadius(8),j.wp.shadow(1),{"& > :first-child":[j.wp.borderRadius(8,8,0,0)],"& > :last-child":[j.wp.borderRadius(0,0,8,8)]}],item:[j.wp.reset.button,{'&:not([disabled]):not([aria-disabled="true"])':[i9.b.listItem],'&[disabled], &[aria-disabled="true"]':[j.wp.color.foregroundDimmest]},j.wp.p(8),j.wp.rowWithGap(8),j.wp.align.center],underlay:[j.wp.position.fixed,{top:0,left:0,bottom:0,right:0}]}),sP=function(e){e.preventDefault()},sL=function(e){var n=e.children,t=e.isOpen,r=e.defaultOpen,i=e.onOpenChange,o=e.x,a=e.y,l=(0,tg._)(e,["children","isOpen","defaultOpen","onOpenChange","x","y"]),s=(0,s_.T)({isOpen:t,defaultOpen:r,onOpenChange:i}),c=(0,w.useRef)(null),u=(0,sk.l)({},s,c),d=u.modalProps,p=u.underlayProps;return t?(0,f.Y)(sD.hJ,{portalContainer:document.body,children:(0,f.Y)("div",(0,nt._)((0,ee._)({css:sT.underlay},p),{onContextMenu:sP,children:(0,f.Y)(sE.Ay,{children:(0,f.Y)(eu.ui,(0,nt._)((0,ee._)({elevated:!0,css:sT.menu},d,l),{innerRef:c,tag:"ul",role:"menubar","aria-orientation":"vertical","aria-label":"Context",style:{left:o,top:a},children:(0,f.Y)(sR.Se,{options:{direction:"vertical"},children:n})}))})}))}):null},sU=L.D.button,sN=(0,w.forwardRef)(function(e,n){var t=e.children,r=e.iconLeft,i=e.isDisabled,o=void 0!==i&&i,a=e.onClick,l=(0,tg._)(e,["children","iconLeft","isDisabled","onClick"]),s=(0,w.useRef)(null),c=(0,v._)((0,sR.A9)(s,o),4),u=c[0],d=c[1],p=c[2],h=c[3];(0,sR.xK)(d,s);var m=(0,w.useCallback)(function(e){o||(h(),null==a||a(e))},[h,o,a]);return(0,f.FD)(sU,(0,nt._)((0,ee._)({disabled:o,css:sT.item,role:"menuitem",ref:(0,sC.P)(n,s),tabIndex:u,onKeyDown:p,onClick:m},l),{children:[r,(0,f.Y)(T.EY,{multiline:!1,children:t})]}))}),sO=t(23499),sM=(0,lm.v)(["sessionBackground","actionsButtonDisplay"]),sB=sM.cssVars,sH=sM.styleTokens,sz=(0,V.x)({loading:[j.wp.coverContainer,j.wp.center],tabs:[j.wp.height("100%")],tabsInner:[j.wp.height("100%")],tabPanel:[j.wp.height("100%")],tabContent:[j.wp.position.relative,j.wp.height("100%"),j.wp.flex.growAndShrink(1)],tabListLeft:[j.wp.viewStyle,j.wp.rowWithGap(2)],tab:[j.wp.viewStyle,i9.b.nofill,j.wp.px(8),j.wp.height(30),j.wp.justify.center,j.wp.borderRadius(4),{"&[data-selected]":{backgroundColor:k.LU.interactiveBackgroundActive}}],sessions:[j.wp.position.absolute,j.wp.overflow("hidden"),j.wp.px(8),{top:0,left:0,right:0,bottom:0}],session:[j.wp.px(6),j.wp.py(4),j.wp.border({direction:"bottom"}),i9.b.listItem,j.wp.borderRadius(),(a={backgroundColor:sH.sessionBackground},(0,g._)(a,j.$_.canHover,(0,g._)({},sB.actionsButtonDisplay,"none")),(0,g._)(a,"&:hover",(0,g._)({},sB.actionsButtonDisplay,"block")),a)],emptyState:[j.wp.center,j.wp.p(16)],header:[j.wp.rowWithGap(4),j.wp.height(24),j.wp.align.center],title:[j.wp.flex.growAndShrink(1)],actionsButton:[{opacity:.5,display:sH.actionsButtonDisplay,"&:hover":{opacity:1}}],sessionListWrapper:[{overflow:"auto"},j.wp.flex.growAndShrink(1)],sessionListInner:[j.wp.position.relative],sessionListItem:[j.wp.position.absolute,j.wp.top(0),j.wp.left(0),j.wp.width("100%")]});function sW(e){var n=e.onClick;return(0,f.FD)(L.S,{style:(0,g._)({},sB.sessionBackground,k.LU.accentPrimaryDimmest),css:sz.session,onClick:n,children:[(0,f.Y)(L.S,{css:sz.header,children:(0,f.Y)(L.S,{css:sz.title,children:(0,f.Y)(T.EY,{multiline:!1,children:"New Chat"})})}),(0,f.Y)(T.EY,{multiline:!1,color:"dimmest",variant:"small",children:"just now"})]})}function sG(e){var n,t=e.selected,r=e.onClick,i=e.session,o=(0,v._)((0,w.useState)(!1),2),a=o[0],l=o[1],s=sF(),c=s.menuProps,u=s.triggerProps,d=s.open,p=(0,_.J2)(i.data);return p?a?(0,f.FD)(L.S,{children:[(0,f.Y)(sl,{initialValue:null!=(n=p.title)?n:"",onCancel:function(){return l(!1)},onSubmit:function(e){i.updateSession({title:e}),l(!1)}}),(0,f.Y)(L.S,{px:4,children:(0,f.Y)(eg.Dc,{textColor:"dimmest",textVariant:"small",date:i.created})})]}):(0,f.FD)(f.FK,{children:[(0,f.FD)(L.S,(0,nt._)((0,ee._)({style:t?(0,g._)({},sB.sessionBackground,k.LU.backgroundHigher):void 0,css:sz.session,onClick:r},u),{children:[(0,f.FD)(L.S,{css:sz.header,children:[(0,f.Y)(L.S,{css:sz.title,children:(0,f.Y)(sn.n,{multiline:!1,text:p.title.length>0?p.title:"Untitled"})}),(0,f.Y)(eY.K0,{css:sz.actionsButton,alt:"Actions",tooltipBehavior:"hidden",onClick:function(e){var n=e.target.getBoundingClientRect();d({x:n.x,y:n.y})},children:(0,f.Y)(sO.A,{})})]}),(0,f.Y)(eg.Dc,{textColor:"dimmest",textVariant:"small",date:i.created})]})),(0,f.FD)(sL,(0,nt._)((0,ee._)({},c),{children:[(0,f.Y)(sN,{onClick:function(){return l(!0)},children:"Rename"}),(0,f.Y)(sN,{onClick:function(){i.updateSession({archived:!p.archived})},children:(null==p?void 0:p.archived)?"Unarchive":"Archive"})]}))]}):null}function sV(){return(0,f.Y)(L.S,{css:sz.emptyState,children:(0,f.Y)(T.EY,{color:"dimmest",children:"No chats"})})}function sj(e){var n=e.sessions,t=e.currentSessionId,r=e.onSessionClick,i=(0,w.useRef)(null),o=(0,ew.Te)({overscan:10,count:n.length,getItemKey:function(e){return n[e].id},getScrollElement:function(){return i.current},estimateSize:function(){return 52}});return(0,f.Y)(L.S,{innerRef:i,css:sz.sessionListWrapper,children:(0,f.Y)(L.S,{style:{height:o.getTotalSize()},css:sz.sessionListInner,children:o.getVirtualItems().map(function(e){var i=n[e.index];return(0,f.Y)("div",{ref:o.measureElement,"data-index":e.index,css:sz.sessionListItem,style:{height:e.size,transform:"translateY(".concat(e.start,"px)")},children:(0,f.Y)(sG,{session:i,selected:i.id===t,onClick:function(){return r(i.id)}})},e.key.toString())})})})}function sZ(e){var n=(0,S.NC)(),t=(0,_.J2)(n.sessions.chat.archived),r=(0,w.useMemo)(function(){return t?Array.from(t.values()).sort(function(e,n){return n.created.getTime()-e.created.getTime()}):[]},[t]);return t?0===r.length?(0,f.Y)(sV,{}):(0,f.Y)(sj,{sessions:r,currentSessionId:e.currentSessionId,onSessionClick:e.onSessionClick}):(0,f.Y)(L.S,{css:sz.loading,children:(0,f.Y)(to.A,{})})}function sq(e){var n=(0,S.NC)(),t=(0,_.J2)(n.sessions.chat.open.list);return t?0===t.length?(0,f.Y)(sW,{onClick:function(){return e.onNewSessionClick()}}):(0,f.Y)(sj,{sessions:t,currentSessionId:e.currentSessionId,onSessionClick:e.onSessionClick}):(0,f.Y)(L.S,{css:sz.loading,children:(0,f.Y)(to.A,{})})}var sK=["Chats","Archived"];function s$(e){var n=(0,v._)((0,w.useState)("Chats"),2),t=n[0],r=n[1];return(0,f.Y)(sx.tU,{selectedKey:t,onSelectionChange:r,css:sz.tabs,children:(0,f.FD)(L.S,{css:sz.tabsInner,children:[(0,f.Y)(L.S,{gap:4,p:8,children:(0,f.Y)(sx.wb,{"aria-label":"Chats",css:sz.tabListLeft,children:sK.map(function(e){return(0,f.Y)(sx.oz,{id:e,css:sz.tab,children:(0,f.Y)(T.EY,{color:"dimmer",children:e})},e)})})}),(0,f.Y)(L.S,{css:sz.tabContent,children:sK.map(function(n){return(0,f.Y)(sx.Kp,{id:n,css:sz.tabPanel,children:(0,f.Y)(L.S,{css:sz.sessions,children:"Chats"===n?(0,f.Y)(sq,(0,ee._)({},e)):(0,f.Y)(sZ,(0,ee._)({},e))})},n)})})]})})}var sJ=(0,V.x)({sessionsListContainer:[j.wp.flex.growAndShrink(1),j.wp.overflowY("auto")],footer:[j.wp.border({direction:"top",color:k.LU.outlineDimmest})]});function sQ(e){var n=e.currentSessionId,t=e.onSessionClick,r=e.onNewSessionClick,i=e.onSettingsButtonClick;return(0,f.FD)(f.FK,{children:[(0,f.Y)(L.S,{css:sJ.sessionsListContainer,children:(0,f.Y)(s$,{currentSessionId:n,onSessionClick:t,onNewSessionClick:r})}),(0,f.Y)(L.S,{css:sJ.footer,children:(0,f.Y)(eS.$n,{text:"Settings",iconLeft:(0,f.Y)(oI.A,{}),alignment:"start",onClick:i,size:"small",variant:"nofill"})})]})}var sX=t(1310),s0=t(92317),s1=t(57949),s2=t(61928),s4=t(90419),s5="assistant_freemium_quota";function s3(){var e=(0,v._)((0,w.useState)(!1),2),n=e[0],t=e[1],r=(0,s0.V)().assistantEdits,i=(0,v._)((0,w.useState)(!1),2),o=i[0],a=i[1];return(0,s1.N)({usage:null==r?void 0:r.usage,limit:null==r?void 0:r.limit,percentThreshold:s1.h,onHitThreshold:function(){t(!0),a(!0)}}),(0,s1.N)({usage:null==r?void 0:r.usage,limit:null==r?void 0:r.limit,percentThreshold:100,onHitThreshold:function(){(0,ty.u4)(ty.AZ.ASSISTANT_USED,{action:"hit_freemium_quota"})}}),(0,f.FD)(am.Wv,{isOpen:n,onOpenChange:function(e){t(e),e||a(!1)},label:"Usage",placement:"bottom start",children:[(0,f.Y)(eY.K0,{alt:"Usage",disabled:!r,children:(0,f.Y)(L.S,{css:s6.iconBadgeWrapper,children:(0,f.Y)(ak.A,{})})}),(0,f.Y)(L.S,{css:s6.popoverWrapper,p:8,children:(0,f.FD)(L.S,{gap:12,children:[(0,f.FD)(T.EY,{css:s6.header,children:["Free ",S.BP," usage"]}),(0,f.Y)(s8,{limit:null==r?void 0:r.limit,usage:null==r?void 0:r.usage,isShowingAlertExplanation:o})]})})]})}var s6=(0,V.x)({popoverWrapper:[j.wp.width(280)],header:[j.wp.fontWeight.bold],measureBar:[j.wp.height(8)],usageMeterAndTitle:[j.wp.display.flex,j.wp.flex.row,j.wp.justify.spaceBetween,j.wp.align.center],iconBadgeWrapper:[j.wp.position.relative]});function s8(e){var n=e.limit,t=e.usage,r=e.isShowingAlertExplanation,i=(0,v._)((0,w.useState)(!1),2),o=i[0],a=i[1],l=(0,iC.A)();if(!n||void 0===t)return(0,f.Y)(to.A,{});var s=t>=n,c=Math.floor(t/n*100),u="You've used ".concat(c,"% of your ").concat(iv.Lm," plan ").concat(S.BP," ").concat((0,sX.pluralize)(o7.go),". ").concat(S.BP," creates edits when asked to make a change to the code.");return(0,f.FD)(f.FK,{children:[(0,f.Y)(L.S,{gap:4,children:(0,f.Y)(s7,{title:"".concat(S.BP," ").concat((0,sX.pluralize)(o7.go)),current:t,max:n})}),s?(0,f.Y)(ce,{}):null,r?(0,f.Y)(iI.N,{text:u,colorway:"primary"}):null,(0,f.Y)(iw.A,{text:"Upgrade for more",colorway:"brand",variant:"outlined",context:s5,iconLeft:(0,f.Y)(s4.A,{}),highlightUpsell:"assistant"}),(0,f.Y)(ih.A,{isOpen:o,onClose:function(){return a(!1)},reloadPageAfterPurchaseComplete:!0,type:"purchase",analyticsContext:{upgrade:{context:s5}},onPurchaseComplete:function(){l()}})]})}function s7(e){var n=e.title,t=e.current,r=e.max;return(0,f.FD)(L.S,{gap:6,children:[(0,f.FD)(L.S,{css:s6.usageMeterAndTitle,children:[(0,f.Y)(T.EY,{height:"singleLine",children:n}),(0,f.FD)(T.EY,{height:"singleLine",color:"dimmer",children:[t," / ",r]})]}),(0,f.Y)("div",{children:(0,f.Y)(s2.W,{css:s6.measureBar,total:r,current:t,color:k.LU.blueDefault,tooltipHidden:!0})})]})}var s9=(0,V.x)({root:[j.wp.border({color:k.LU.orangeDimmer}),j.wp.borderRadius(),j.wp.py(4),j.wp.px(6),j.wp.colorMixBg(k.LU.orangeDimmer,"transparent",.25)],text:[j.wp.color.orangeStronger]});function ce(){return(0,f.Y)(L.S,{css:s9.root,children:(0,f.Y)(T.EY,{css:s9.text,children:"You've used 100% of your free AI quota."})})}var cn=t(34002),ct=(0,V.x)({root:[j.wp.flex.growAndShrink(1)],header:[j.wp.height(28),{zIndex:1}],main:[j.wp.position.relative,j.wp.flex.growAndShrink(1),j.wp.justify.end],content:[j.wp.flex.growAndShrink(1),{paddingLeft:iu.Sl.paddingLeft,justifyContent:"end"}],sidebarBlanket:[j.wp.coverContainer,{zIndex:3,backgroundColor:k.LU.backgroundOverlay,pointerEvents:iu.Sl.sidebarBlanketPointerEvents,opacity:iu.Sl.sidebarBlanketOpacity}],sidebar:[j.wp.position.absolute,j.wp.top(0),j.wp.left(0),j.wp.borderRadius(),{pointerEvents:iu.Sl.sidebarPointerEvents,width:iu.Sl.sidebarWidth,height:iu.Sl.sidebarHeight,opacity:iu.Sl.sidebarOpacity,transform:iu.Sl.sidebarTransform,border:"1px solid "+k.LU.outlineDimmest,zIndex:3}]});function cr(e){var n=e.sessionId,t=e.children,r=e.isSettingsPanelOpen,i=e.setIsSettingsPanelOpen,o=e.setSessionId,a=e.openUserSettingsPane,l=e.onNewSessionClick,s=e.sidebarState,c=(0,S.NC)(),u=(0,_.Rj)(function(){return n?c.sessions.get(n):null},[c,n]),d=(0,_.Rj)(function(){return null==u?void 0:u.data},[u]),p=(0,_.J2)(c.sessions.chat.open),h=(0,_.J2)(c.sessions.chat.archived),m=(0,S.UK)().hasAccessToAdvancedModel,g=(0,lp.F)(),v=s.state,y=s.setSidebarContainerEl,b=s.toggleSidebar,Y=s.closeIfNeeded;function A(){i(!0),Y()}var x=(0,w.useCallback)(function(){(0,ty.u4)(ty.AZ.ASSISTANT_USED,{action:"new_session",intent_type:null,model:null,user_model_selection:null,message_content:null,message_source:"chat_pane",message_surface:"workspace_ai_pane"}),Y(),l()},[Y,l]),C=(0,w.useCallback)(function(){if(u&&d){var e=d.archived;if((0,ty.u4)(ty.AZ.ASSISTANT_USED,{action:e?"chat_unarchived":"chat_archived",intent_type:null,model:null,user_model_selection:null,message_content:null,message_source:"chat_pane",message_surface:"workspace_ai_pane"}),u.id===n){var t=e?h:p;if(t&&t.size>1){var r=Array.from(t.keys()).find(function(e){return e!==u.id});o(null!=r?r:null)}else x()}u.updateSession({archived:!e})}},[h,x,p,u,d,n,o]),k=(0,w.useCallback)(function(e){(0,ty.u4)(ty.AZ.ASSISTANT_USED,{action:"chat_renamed",intent_type:null,model:null,user_model_selection:null,message_content:null,message_source:"chat_pane",message_surface:"workspace_ai_pane"}),null==u||u.updateSession({title:e})},[u]),D=(0,im.s)().addAttachments,E=(0,lE.A)({addAttachments:D}),R=E.isDraggedOver,I=E.drop,F=(0,w.useRef)(null);(0,lf.d)(F,v,iu.aT);var T=(0,io._P)({controlName:"flag-no-header-usage"}),P=d?(0,f.Y)(sp,{title:d.title,archived:d.archived,onRename:k,onToggleArchived:C},d.id):null,U=(0,cn.L)(n),N=(0,f.Y)(sy,{onAddButtonClick:x,onSidebarButtonClick:function(){return b()},title:P,prefsButton:(0,f.Y)(sg,{onClick:A}),usageButton:g?(0,f.Y)(s3,{}):(0,f.Y)(sv,{sessionCostInCents:U}),sessionCost:U&&!T?(0,f.Y)(lk._,{cents:U}):null}),O=(0,l_.S)([F,I]);return(0,f.FD)(L.S,{css:ct.root,px:4,innerRef:O,children:[(0,f.Y)(eu.ui,{css:ct.header,children:r?(0,f.Y)(sA,{onBack:function(){return i(!1)}}):N}),(0,f.FD)(L.S,{css:ct.main,innerRef:y,children:[r?null:(0,f.Y)(L.S,{css:ct.sidebarBlanket,onClick:function(){return b(!1)}}),(0,f.Y)(eu.ui,{css:ct.sidebar,children:(0,f.Y)(sQ,{currentSessionId:n,onNewSessionClick:x,onSessionClick:function(e){i(!1),o(e),Y()},onSettingsButtonClick:A})}),(0,f.Y)(L.S,{css:ct.content,children:r?(0,f.Y)(sY,{hasAccessToAdvancedModel:m,onOpenUserSettings:a}):t})]}),R?(0,f.Y)(lD.A,{}):null]})}var ci=t(78432),co=t(76607),ca=t(75862),cl=t(71848),cs=t(51151),cc=t(28418),cu=t(3859),cd=t(51952),cp=t(63893);function cf(){var e=(0,en._)(["\n  fragment StartWithAiUsageBudget on UsageBasedBillingBudget {\n    id\n    hasReachedBudget\n  }\n"]);return cf=function(){return e},e}function ch(){var e=(0,en._)(["\n  query AssitantUsageBanner($orgId: String) {\n    currentUser {\n      id\n      ...CoreSubscriptionPlanStatus\n      usageBasedBillingBudget {\n        __typename\n        ... on UsageBasedBillingBudget {\n          ...StartWithAiUsageBudget\n        }\n      }\n      usageBasedBillingAlerts {\n        ...EditUsageBasedBillingAlertsFormInitialConfig\n      }\n      org(orgId: $orgId) {\n        __typename\n        ... on Org {\n          id\n          name\n          usageBasedBillingBudget {\n            __typename\n            ... on UsageBasedBillingBudget {\n              ...StartWithAiUsageBudget\n            }\n          }\n          usageBasedBillingAlerts {\n            ...EditUsageBasedBillingAlertsFormInitialConfig\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return ch=function(){return e},e}var cm={},cg=(0,et.J1)(cf()),cv=(0,et.J1)(ch(),cd.y,cg,cp.B9),cw=t(4595),cy=t(58542),cb=t(61627),cS=(0,V.x)({bannerContainer:[j.wp.pb(6)],buttonLink:[j.wp.reset.button,i9.b.underlined]});function cY(e){var n,t,r,i,o,a,l,s,c,u,d,p,h=e.assistantAuthz,m=(0,v._)((0,w.useState)(!1),2),g=m[0],y=m[1],b=(0,v._)((0,w.useState)(!1),2),Y=b[0],A=b[1],x=(0,v._)((0,w.useState)(!1),2),C=x[0],_=x[1],k=null==(r=(0,cy.y)().paymentMethod)?void 0:r.last4,D=(0,nI.A)(),E=(0,i5.R)(D).orgId,R=(n={variables:{orgId:E}},t=(0,ee._)({},cm,n),er.I(cv,t)),I=R.data,F=R.loading,P=!1;E?(i=(null==I||null==(o=I.currentUser)?void 0:o.org.__typename)==="Org"&&"UsageBasedBillingAlertsConfig"===I.currentUser.org.usageBasedBillingAlerts.__typename?I.currentUser.org.usageBasedBillingAlerts:void 0,P=(null==I||null==(a=I.currentUser)?void 0:a.org.__typename)==="Org"&&(null==(l=I.currentUser.org.usageBasedBillingBudget)?void 0:l.__typename)==="UsageBasedBillingBudget"&&I.currentUser.org.usageBasedBillingBudget.hasReachedBudget):(i=(null==I||null==(s=I.currentUser)?void 0:s.usageBasedBillingAlerts.__typename)==="UsageBasedBillingAlertsConfig"?I.currentUser.usageBasedBillingAlerts:void 0,P=(null==I||null==(u=I.currentUser)||null==(c=u.usageBasedBillingBudget)?void 0:c.__typename)==="UsageBasedBillingBudget"&&I.currentUser.usageBasedBillingBudget.hasReachedBudget);var U=null!=(d=null==I?void 0:I.currentUser)?d:null,N=(null==U?void 0:U.org.__typename)==="Org"?U.org:void 0,O=null!=(p=null==U?void 0:U.hasCore)&&p;return F||(null==h?void 0:h.advancedAssistant.isAuthorized)||C?null:k||O?P?(0,f.FD)(L.S,{children:[(0,f.Y)(aX.a,{isOpen:Y,onRequestClose:function(){return A(!1)},children:(0,f.Y)(cb.j,{org:N,initialSettings:i,onDone:function(){return A(!1)}})}),(0,f.Y)(L.S,{css:cS.bannerContainer,children:(0,f.Y)(iI.N,{icon:(0,f.Y)(ak.A,{}),text:(0,f.FD)(T.EY,{variant:"small",children:["You must"," ",(0,f.Y)("button",{css:cS.buttonLink,onClick:function(){A(!0)},children:"increase your usage budget"})," ","to enable Advanced ",S.BP,"."]}),colorway:"blue",closable:!0,closeAction:function(){return _(!0)}})})]}):null:(0,f.FD)(L.S,{children:[(0,f.Y)(aX.a,{isOpen:g,onRequestClose:function(){return y(!1)},children:(0,f.FD)(L.S,{gap:16,children:[(0,f.Y)(T.EY,{variant:"subheadDefault",multiline:!1,children:"Add Payment Method"}),(0,f.Y)(cw.y,{onSuccess:function(){y(!1)}})]})}),(0,f.Y)(L.S,{css:cS.bannerContainer,children:(0,f.Y)(iI.N,{icon:(0,f.Y)(s4.A,{}),text:(0,f.FD)(T.EY,{variant:"small",children:["You must"," ",(0,f.Y)("button",{css:cS.buttonLink,onClick:function(){y(!0)},children:"add a billing method"})," ","to enable Advanced ",S.BP,"."]}),colorway:"blue",closable:!0,closeAction:function(){return _(!0)}})})]})}var cA=t(61311),cx=t(17307),cC=t(52784),c_=t(47104),ck=t(36061),cD=t(68264),cE=t(57679),cR=t(22012),cI=t(59318),cF=t(51244),cT=t(33747),cP=t(4983),cL=t(2115),cU=(0,V.x)({root:[j.wp.flex.growAndShrink(1),j.wp.color.foregroundDimmer],label:[j.wp.visuallyHidden],selectButton:[j.wp.reset.button,j.wp.flex.row,j.wp.rowWithGap(4),j.wp.cursor.pointer,j.wp.align.center,j.wp.px(4),j.wp.py(2),i9.b.nofill,j.wp.color.foregroundDimmest,j.wp.fontSize(12),{'&[aria-expanded="true"] .chevron':{transform:"rotate(180deg)"},"&:hover":j.wp.color.foregroundDefault}],pooverSurface:[j.wp.borderRadius(4),j.wp.border({color:k.LU.outlineDefault})]});function cN(e){var n,t=e.assistantMode,r=e.availableModels,i=e.assistantAdvancedAuthz,o=e.showModelNames,a=void 0===o||o,l=e.basicModeAffordances,s=e.advancedModeAffordances,c=e.onChange,u=r.basicModel,d=r.advancedModel,p=r.overrideModel,h=(0,cF.a)();return(0,f.Y)(L.S,{css:cU.root,children:(0,f.FD)(cD.l6,{selectedKey:t,onSelectionChange:function(e){switch(e){case"basic":case"advanced":c(e)}},children:[(0,f.Y)(cT.J,{css:cU.label,children:"Assistant mode"}),(0,f.FD)(cE.$,{css:cU.selectButton,children:[(0,f.Y)(a6.D8,{model:"basic"===t?x.e3q.BASIC:x.e3q.ADVANCED,size:12}),"basic"===t?"Basic":"Advanced",(0,f.Y)(su.A,{size:12})]}),(0,f.Y)(cR.A,{placement:h?"top":void 0,children:(0,f.Y)(eu.ui,{css:cU.pooverSurface,elevated:!0,children:(0,f.FD)(cI.qF,{"aria-label":"Assistant chat mode",selectionMode:"single",children:[(0,f.Y)(cI.nh,{id:"basic","aria-label":"basic",children:(0,f.Y)(cM,{readableModelName:u.name.readable,isSelected:"basic"===t,modeAffordances:void 0===l?"Ask questions":l,showModelNames:a})}),(0,f.Y)(cI.nh,{id:"advanced","aria-label":"advanced",children:(0,f.Y)(cB,{readableModelName:null!=(n=null==p?void 0:p.name.readable)?n:d.name.readable,isSelected:"advanced"===t,isOverrideActive:null!=r.overrideModel,authz:i,modeAffordances:void 0===s?"Generate code & actions":s,showModelNames:a})})]})})})]})})}var cO=(0,V.x)({root:[j.wp.px(8),j.wp.py(6),j.wp.rowWithGap(8),j.wp.align.center,j.wp.cursor.pointer,j.wp.hover({backgroundColor:k.LU.backgroundHighest})],content:[j.wp.colWithGap(0),j.wp.flex.growAndShrink(1)],modelName:[j.wp.rowWithGap(6),j.wp.align.center]});function cM(e){var n=e.readableModelName,t=e.isSelected,r=e.modeAffordances,i=e.showModelNames;return(0,f.FD)(L.S,{css:cO.root,children:[(0,f.Y)(L.S,{children:(0,f.Y)(cP.A,{color:k.LU.foregroundDimmer})}),(0,f.FD)(L.S,{css:cO.content,children:[(0,f.Y)(L.S,{css:cO.modelName,children:(0,f.Y)(T.EY,{variant:"small",children:"Basic"})}),(0,f.FD)(T.EY,{variant:"small",color:"dimmer",children:[r," ",i?"with ".concat(n):""]})]}),(0,f.Y)(L.S,{children:t?(0,f.Y)(oR.A,{color:k.LU.foregroundDefault}):null})]})}function cB(e){var n=e.readableModelName,t=e.authz,r=e.isSelected,i=e.isOverrideActive,o=e.modeAffordances,a=e.showModelNames;return(0,f.FD)(L.S,{css:cO.root,children:[(0,f.Y)(L.S,{children:(0,f.Y)(cL.A,{color:k.LU.foregroundDefault})}),(0,f.FD)(L.S,{css:cO.content,children:[(0,f.FD)(L.S,{css:cO.modelName,children:[(0,f.Y)(T.EY,{variant:"small",children:"Advanced"}),t.isAuthorized?(0,f.FD)(T.EY,{variant:"small",color:"dimmer",children:[o7.a7,"\xa2/",o7.go]}):null,t.isAuthorized?null:(0,f.Y)(iy.a,{text:iv.en}),void 0!==i&&i?(0,f.Y)(I.a,{colorway:"orange",text:"Override"}):null]}),(0,f.FD)(T.EY,{variant:"small",color:"dimmer",children:[o," ",a?"with ".concat(n):""]})]}),(0,f.Y)(L.S,{children:r?(0,f.Y)(oR.A,{color:k.LU.foregroundDefault}):null})]})}var cH=(0,V.x)({root:[j.wp.borderRadius(4,4,0,0),j.wp.rowWithGap(6),j.wp.align.center,j.wp.minHeight(28),j.wp.backgroundColor.backgroundHigher,j.wp.position.relative,j.wp.container("assistantControlBar")],modeSelectContainer:[j.wp.flex.growAndShrink(1)],modelIndicatorText:[{"@container (max-width: 270px)":{display:"none"}}],modelIndicatorTooltip:[j.wp.colWithGap(8),j.wp.p(4),j.wp.width("100%")]});function cz(e){var n,t,r,i,o,a=e.availableModels,l=e.assistantAdvancedAuthz,s=void 0===l?{isAuthorized:!0}:l,c=e.onModeSelectChange,u=(0,S.dm)().assistantMode,d=(0,S.fS)();return(0,f.FD)(L.S,{css:cH.root,px:6,children:[(0,f.Y)(i_.A,{}),(0,f.Y)(L.S,{css:cH.modeSelectContainer,children:(0,f.Y)(cN,{availableModels:a,assistantMode:u,assistantAdvancedAuthz:s,onChange:c})}),(0,f.Y)(cW,{assistantMode:u,assistantAdvancedAuthz:s,isOverrideActive:"advanced"===u&&null!=a.overrideModel,preferredAdvancedModelName:null==d?void 0:d.readable,text:(n=a,t=u,r=n.basicModel,i=n.advancedModel,o=n.overrideModel,"basic"===t?r.name.readable:"advanced"===t&&o?o.name.readable:i.name.readable)})]})}function cW(e){var n=e.assistantMode,t=e.assistantAdvancedAuthz,r=e.isOverrideActive,i=void 0!==r&&r,o=e.preferredAdvancedModelName,a=e.text;return(0,f.FD)(L.S,{row:!0,gap:4,align:"center",children:[i?(0,f.Y)(I.a,{colorway:"orange",text:"Override"}):null,(0,f.Y)(T.EY,{css:cH.modelIndicatorText,variant:"small",color:"dimmer",children:a}),(0,f.Y)(P.m_,{tooltip:"basic"===n?(0,f.Y)(cG,{assistantAdvancedAuthz:t}):(0,f.Y)(cV,{assistantAdvancedAuthz:t,preferredAdvancedModelName:i?o:void 0}),placement:"top-end",children:(0,f.Y)(tI.A,{color:k.LU.foregroundDimmest})})]})}function cG(e){var n=e.assistantAdvancedAuthz;return(0,f.Y)(L.S,{css:cH.modelIndicatorTooltip,children:(0,f.FD)(T.EY,{variant:"small",children:[(0,f.Y)("strong",{children:"Basic"}),": ",S.BP,n.isAuthorized?" will answer questions about your code or the Replit environment using a lightweight model.":" will answer general coding questions."]})})}function cV(e){var n=e.assistantAdvancedAuthz,t=e.preferredAdvancedModelName;return(0,f.FD)(L.S,{css:cH.modelIndicatorTooltip,children:[(0,f.FD)(T.EY,{variant:"small",children:[(0,f.Y)("strong",{children:"Advanced"}),": In addition to answering questions,"," ",S.BP," will write code, propose file changes & shell commands, and use advanced code search techniques."]}),n.isAuthorized&&t?(0,f.FD)(T.EY,{variant:"small",children:["Note that ",t," is best for code generation, and you will experience degraded performance with other models."]}):null]})}var cj=t(84344),cZ=t(93759),cq=t(43333),cK=t(34591),c$=t(44916),cJ=t(32507),cQ=t(41392),cX=t(43593),c0=t(84788),c1=t(75247),c2=t(47443),c4=t(51492),c5=t(11903),c3=ni.sj.define({combine:function(e){var n;return null!=(n=e[0])?n:[]},compare:ox()}),c6=new nd.k(function(e){return c3.of(e)}),c8=t(56962),c7=t(89618),c9=(0,V.x)({popover:[j.wp.borderRadius(4),j.wp.border({color:k.LU.outlineDefault}),j.wp.overflow("hidden"),j.wp.maxWidth(290)]}),ue=t(73967),un=t(37039),ut=t(28216),ur=t(74338);function ui(e){return(0,f.FD)(n0.Ay,(0,nt._)((0,ee._)({},e),{children:[(0,f.Y)("path",{fillRule:"evenodd",d:"M1.25 5A2.75 2.75 0 0 1 4 2.25h4.999c.251 0 .485.125.625.334L11.4 5.25H20A2.75 2.75 0 0 1 22.75 8v4.5a.75.75 0 0 1-1.5 0V8c0-.69-.56-1.25-1.25-1.25h-9a.751.751 0 0 1-.625-.335L8.598 3.75H4c-.69 0-1.25.56-1.25 1.25v14c0 .69.56 1.25 1.25 1.25h9a.75.75 0 0 1 0 1.5H4A2.75 2.75 0 0 1 1.25 19V5Z",clipRule:"evenodd"}),(0,f.Y)("path",{fillRule:"evenodd",d:"M18.438 13.8c-.147-.4-.73-.4-.875 0l-1.005 2.744a.458.458 0 0 1-.298.278l-2.436.746a.446.446 0 0 0 0 .857l2.437.752a.458.458 0 0 1 .297.279l1.005 2.745c.146.399.728.399.875 0l1.004-2.745a.458.458 0 0 1 .297-.278l2.437-.75a.446.446 0 0 0 0-.857l-2.437-.749a.458.458 0 0 1-.297-.278L18.437 13.8Z",clipRule:"evenodd"})]}))}var uo=t(82842);function ua(e){return(0,f.Y)(n0.Ay,(0,nt._)((0,ee._)({},e),{children:(0,f.Y)("path",{d:"M12 1c.717 0 1.36.441 1.617 1.11l2.298 5.975 5.975 2.298a1.732 1.732 0 0 1 0 3.234l-5.975 2.298-2.298 5.975a1.732 1.732 0 0 1-3.234 0l-2.298-5.975-5.975-2.298a1.732 1.732 0 0 1 0-3.234l5.975-2.298 2.298-5.975C10.641 1.441 11.283 1 12 1Z"})}))}var ul=(0,V.x)({root:[i9.b.listItem,j.wp.p(4),j.wp.colWithGap(2)],content:[],left:[j.wp.flex.growAndShrink(1),j.wp.rowWithGap(4),j.wp.align.center,{fontSize:k.LU.fontSizeSmall}],warning:[{color:k.LU.accentNegativeDefault}],dir:[{opacity:.6},j.wp.flex.shrink(100)]});function us(e){var n=e.path,t=e.highlighted,r=e.ranges,i=e.status,o=t?{backgroundColor:k.LU.interactiveBackgroundActive}:void 0,a=i?({included:(0,f.Y)(oR.A,{}),overflowing:(0,f.Y)(iF.A,{}),truncated:(0,f.Y)(iF.A,{}),unsupported:(0,f.Y)(iF.A,{})})[i]:null,l=(0,ue.dt)({path:n,ranges:null!=r?r:[]}),s=l.directory,c=l.filename,u=s&&s.text.split("/"),d=u&&u.length>2?"".concat(u[0],"/.../").concat(u[u.length-1],"/"):s&&s.text+"/";return(0,f.Y)(P.m_,{maxWidth:600,closeDelay:"none",tooltip:n,children:(0,f.FD)(L.S,{css:ul.root,style:o,children:[(0,f.FD)(L.S,{row:!0,gap:8,align:"center",style:o,children:[(0,f.FD)(L.S,{css:ul.left,style:o,children:[(0,f.Y)(ti.A,{path:n,size:16}),(0,f.Y)(ut.e,{text:c.text,highlight:c.ranges,dimmed:!t}),s?(0,f.Y)(L.S,{color:"dimmest",css:ul.dir,children:(0,f.Y)(ut.e,{text:d||"",highlight:s.ranges,dimmed:!t})}):null]}),(0,f.Y)(P.m_,{tooltip:"File not supported",isDisabled:"unsupported"!==i,children:a})]}),"overflowing"===i||"truncated"===i?(0,f.Y)(T.EY,{css:ul.warning,variant:"small",children:"Exceeds file memory"}):null]})})}var uc=(0,lm.v)(["iconColor","placeholderColor","itemTransform","inputBorderRadius","inputBorder"]),uu=uc.cssVars,ud=uc.styleTokens,up=(0,V.x)({root:[j.wp.width(290),j.wp.maxHeight(300),j.wp.display.flex],inputRow:[j.wp.position.relative,(s={},(0,g._)(s,uu.iconColor,k.LU.foregroundDimmest),(0,g._)(s,uu.placeholderColor,k.LU.foregroundDimmer),(0,g._)(s,":focus-within, :hover",(l={},(0,g._)(l,uu.iconColor,k.LU.foregroundDimmer),(0,g._)(l,uu.placeholderColor,k.LU.foregroundDimmest),l)),s)],searchIcon:[j.wp.coverContainer,j.wp.align.start,j.wp.justify.center,{color:ud.iconColor,pointerEvents:"none"}],input:[j.wp.p(4),j.wp.pl(24)],header:[j.wp.height(24),j.wp.align.center,j.wp.display.flex,j.wp.justify.spaceBetween],selectionButton:[j.wp.reset.button,i9.b.nofill,j.wp.p(2),{fontSize:k.LU.fontSizeSmall}],menu:[j.wp.flex.growAndShrink(1),{overflow:"auto",borderBottom:"1px solid "+k.LU.outlineDimmer}],item:[{transform:ud.itemTransform,position:"absolute",top:0,left:0,width:"100%"}]});function uf(e,n){return n.status&&!e.status?1:e.status&&!n.status?-1:"included"===n.status&&"included"!==e.status?1:"included"===e.status&&"included"!==n.status?-1:0}function uh(e){var n,t,r,i,o,a,l,s=e.fileContextInclusions,c=e.findFiles,u=e.overscan,d=e.onChange,p=e.unSelectAllFiles,h=e.isRagAuthorized,m=e.ragState,Y=e.updatePopperPositionRef,A=(0,w.useRef)(null),x=(0,v._)((0,w.useState)(""),2),C=x[0],_=x[1],D=(0,v._)((0,w.useState)(!1),2),E=D[0],R=D[1],I=(t=(n=(0,v._)((0,w.useState)({loading:!0,error:null,items:null}),2))[0],r=n[1],(i=(0,w.useRef)(null)).current||(i.current=(0,co.A)((o=(0,y._)(function(e){var n;return(0,b.YH)(this,function(t){switch(t.label){case 0:return[4,c(e)];case 1:return n=t.sent(),(0,w.startTransition)(function(){r(null!==n.error?{error:n.error,loading:!1,items:null}:{items:n.files,total:n.total,error:null,loading:!1})}),[2]}})}),function(e){return o.apply(this,arguments)}),{wait:40})),a=(0,w.useCallback)(function(e){var n;return null==(n=i.current)?void 0:n.call(i,e).catch(function(){})},[]),(0,w.useEffect)(function(){return a(""),function(){try{var e;null==(e=i.current)||e.cancel()}catch(e){}}},[a]),{files:t.items,loading:t.loading,error:t.error,total:t.total,update:a}),F=I.files,N=I.total,O=I.loading,M=I.error,B=I.update,H=(0,w.useRef)(null),z=(0,e0.A)(C),W=(0,w.useMemo)(function(){var e=new Map(s.map(function(e){return[e.path,e.inclusionStatus]})),n=null==F?void 0:F.map(function(n){var t=n.path;return{path:t,ranges:n.ranges,status:e.get(t)}});if(!n)return null;if(H.current&&!z.current)return(0,c7.A)(n,{existing:H.current,getKey:function(e){return e.path}});if(z.current)return n;var t=n.sort(uf);return H.current=t,t},[F,s,z]),G=(0,w.useMemo)(function(){var e;return null!=(e=null==W?void 0:W.filter(function(e){return e.status}))?e:[]},[W]);(0,w.useEffect)(function(){if(!O){var e;null==(e=Y.current)||e.call(Y)}},[O,Y]);var V=(0,l8.Bp)({inputValue:C,items:null!=W?W:[],isOpen:!0,defaultHighlightedIndex:0,stateReducer:function(e,n){var t=n.changes;switch(n.type){case l8.Bp.stateChangeTypes.InputKeyDownEnter:case l8.Bp.stateChangeTypes.ItemClick:return(0,ai.jM)(t,function(n){n.highlightedIndex=e.highlightedIndex});default:return t}},onHighlightedIndexChange:function(e){void 0!==e.highlightedIndex&&-1!==e.highlightedIndex&&q.getVirtualItems()[e.highlightedIndex]&&q.scrollToIndex(e.highlightedIndex)},onStateChange:function(e){switch(e.type){case l8.Bp.stateChangeTypes.InputKeyDownEnter:case l8.Bp.stateChangeTypes.ItemClick:if(!e.selectedItem)break;var n,t,r,i=G.includes(e.selectedItem)?"exclude":"include";d({path:e.selectedItem.path,preference:i}),null==(r=A.current)||r.select();break;case l8.Bp.stateChangeTypes.InputChange:_(null!=(n=e.inputValue)?n:""),B(null!=(t=e.inputValue)?t:"")}}}),Z=(0,w.useRef)(null),q=(0,ew.Te)({count:null!=(l=null==W?void 0:W.length)?l:0,getScrollElement:function(){return Z.current},estimateSize:function(){return 32},getItemKey:function(e){var n,t;return null!=(t=null==W||null==(n=W[e])?void 0:n.path)?t:""},overscan:void 0===u?4:u}),K="".concat(k.LU.space4," ").concat(k.LU.space4," 0 0");return!O||(null==W?void 0:W.length)||(K=k.LU.space4),(0,f.FD)(L.S,{css:up.root,style:(0,g._)({},uu.inputBorderRadius,K),children:[(0,f.FD)(L.S,{px:6,py:2,align:"center",row:!0,gap:6,children:[(0,f.Y)(T.EY,{css:j.wp.fontWeight.medium,children:"Context"}),h?(0,f.Y)(L.S,{children:(0,f.Y)(ua,{color:k.LU.tealDefault,size:12})}):null]}),(0,f.FD)(L.S,{px:6,children:[h?(0,f.Y)(iI.N,{colorway:"teal",text:(0,f.FD)(L.S,{children:[(0,f.FD)(L.S,{row:!0,gap:4,css:j.wp.align.center,children:[(0,f.FD)(T.EY,{variant:"small",children:[S.BP," will automatically decide context."]}),(null==m?void 0:m.remainingFilesToIndex)?(0,f.Y)(P.m_,{maxWidth:300,tooltip:(0,f.FD)(L.S,{css:j.wp.textAlign.center,children:[(0,f.FD)(T.EY,{children:[S.BP," is getting to know your code"]}),(0,f.Y)(T.EY,{color:"dimmer",children:"(".concat(m.remainingFilesToIndex," files remaining)")})]}),children:(0,f.Y)(to.A,{size:12})}):null]}),(0,f.Y)(T.EY,{variant:"small",children:"You may highlight specific files if you'd like."})]})}):null,h?null:(0,f.Y)(un.d,{iconLeft:(0,f.Y)(U.A,{}),onClick:function(){return R(!0)},colorway:"yellow",text:"Have ".concat(S.BP," decide context automatically")})]}),(0,f.FD)(L.S,{css:up.inputRow,p:4,children:[(0,f.Y)(L.S,{css:up.searchIcon,pl:12,children:O?(0,f.Y)(to.A,{size:12}):(0,f.Y)(uo.A,{size:12})}),(0,f.Y)(eA.pd,(0,ee._)({autoFocus:!0,placeholder:"Search files",css:up.input},V.getInputProps({ref:A})))]}),M?(0,f.Y)(iI.N,{icon:(0,f.Y)(iF.A,{}),text:M}):null,void 0!==N?(0,f.FD)(L.S,{css:up.header,px:4,row:!0,gap:2,children:[(0,f.Y)(T.EY,{variant:"small",color:"dimmest",children:"".concat(s.length,"/").concat(N," selected")}),s.length?(0,f.Y)(L.S,{tag:"button",css:up.selectionButton,onClick:function(){return function(){var e=[],n=!0,t=!1,r=void 0;try{for(var i,o=(null!=F?F:[])[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value;e.push(a.path)}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}p({paths:e})}()},children:"Unselect All"}):null]}):null,(0,f.Y)("div",(0,nt._)((0,ee._)({css:up.menu},V.getMenuProps({ref:Z})),{children:(0,f.Y)("div",{style:{height:"".concat(q.getTotalSize(),"px"),width:"100%",position:"relative"},children:q.getVirtualItems().map(function(e){var n=e.index,t=e.key,r=e.start,i=null==W?void 0:W[n];return i?(0,f.Y)(L.S,(0,nt._)((0,ee._)({"data-index":n,css:up.item,style:(0,g._)({},uu.itemTransform,"translateY(".concat(r,"px)"))},V.getItemProps({item:i,index:n,refKey:"innerRef",ref:q.measureElement})),{"aria-selected":void 0!==i.status,children:(0,f.Y)(us,{highlighted:n===V.highlightedIndex,path:i.path,ranges:i.ranges,status:i.status})}),t.toString()):null})})})),(0,f.Y)(ih.A,{isOpen:E,onClose:function(){return R(!1)},reloadPageAfterPurchaseComplete:!0,type:"purchase",analyticsContext:{upgrade:{context:"ai_context_menu",surface:"ghostwriter_power_up_dialog"}}})]})}var um=(0,V.x)({button:[j.wp.height(24),j.wp.reset.button,j.wp.align.center,j.wp.cursor.pointer,j.wp.px(4),j.wp.py(2),j.wp.rowWithGap(4),i9.b.nofill,j.wp.color.foregroundDimmer,{"&:hover":j.wp.color.foregroundDefault,"@container (max-width: 400px)":{"> div > span":j.wp.display.none}}]});function ug(e){var n,t=(0,v._)((0,w.useState)(!1),2),r=t[0],i=t[1],o=(0,v._)((0,w.useState)(null),2),a=o[0],l=o[1],s=(0,v._)((0,w.useState)(null),2),c=s[0],u=s[1];(0,w.useEffect)(function(){var e=function(e){"Escape"===e.key&&i(!1)};if(r)return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}},[r]);var d=(0,l6.E)(a,c,{modifiers:[{name:"offset",options:{offset:[0,4]}},{name:"preventOverflow",options:{padding:16}}],placement:"top-start"}),p=(0,w.useCallback)(function(){d.update&&d.update()},[d]),h=(0,w.useRef)(p);(0,w.useEffect)(function(){h.current=p},[p]);var m=e.fileContextInclusions,g=e.findFiles,y="Add file context",b=m.filter(function(e){return"included"===e.inclusionStatus});b.length&&(y=1===b.length?(n=(0,tt.WP)(b[0].path)).length>20?n.slice(0,10)+"..."+n.slice(-10):n:b.length+" files");var S=(0,w.useId)();return(0,f.FD)(c8.cQ,{children:[(0,f.Y)(eS.$n,{iconLeft:e.isRagAuthorized?(0,f.Y)(ui,{}):(0,f.Y)(ur.A,{}),text:y,css:um.button,ref:l,onClick:function(){return i(function(e){return!e})},"aria-label":"Select files","aria-haspopup":!0,"aria-expanded":r,"aria-controls":S}),(0,f.Y)(cR.A,{isOpen:r,shouldCloseOnInteractOutside:function(e){var n;return n=[c,a],!(e instanceof Node&&n.some(function(n){return null==n?void 0:n.contains(e)}))&&(i(!1),!0)},isKeyboardDismissDisabled:!0,children:(0,f.Y)(eu.ui,(0,nt._)((0,ee._)({id:S,elevated:!0,style:d.styles.popper,innerRef:u,css:c9.popover},d.attributes.popper),{children:(0,f.Y)(uh,{overscan:e.overscan,onChange:e.onChange,unSelectAllFiles:e.unSelectAll,findFiles:g,fileContextInclusions:m,isRagAuthorized:e.isRagAuthorized,updatePopperPositionRef:h,ragState:e.ragState})}))})]})}var uv={render:function(e){var n=e.file,t=n.path,r=n.match,i=(0,nc.J)((0,f.Y)(L.S,{css:ul.root,style:{width:"100%"},className:"option",children:(0,f.FD)(L.S,{css:ul.content,children:[(0,f.FD)(L.S,{css:ul.left,children:[(0,f.Y)(ti.A,{path:t,size:16}),(0,f.Y)(ut.e,{text:r.filename.text,highlight:r.filename.ranges,dimmed:!0}),r.directory?(0,f.Y)(L.S,{color:"dimmest",css:ul.dir,children:(0,f.Y)(ut.e,{text:r.directory.text+"/",highlight:r.directory.ranges,dimmed:!0})}):null]}),"included"===n.inclusionStatus?(0,f.Y)(oR.A,{}):null]})}));return i.style.display="flex",i.style.width="100%",i},position:81},uw=no.Lz.theme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:k.LU.fontFamilyDefault,fontSize:k.LU.fontSizeSmall},"& > ul > li":{padding:"0px",display:"flex",alignItems:"center"},"& > ul > li[aria-selected] .option":{backgroundColor:k.LU.backgroundHighest}},".cm-completionLabel":{width:0}}),uy=new nd.k(function(e){if(!e)return[];function n(){return(n=(0,y._)(function(n){var t,r,i,o,a;return(0,b.YH)(this,function(l){switch(l.label){case 0:if(!e||!n.matchBefore(/@(\S*)/g)||null===(t=n.matchBefore(/\w*/)))return[2,null];return[4,e(t.text)];case 1:return i=null!=(r=l.sent().files)?r:[],o=new Map(n.state.facet(c3).map(function(e){return[e.path,e.inclusionStatus]})),a=i.map(function(e){var n=e.path,t=e.ranges;return{label:n,displayLabel:" ",file:{path:n,inclusionStatus:o.get(n),match:(0,ue.dt)({path:n,ranges:null!=t?t:[]})}}}),[2,{from:t.from,filter:!1,options:a}]}})})).apply(this,arguments)}return[uw,(0,cj.yU)({defaultKeymap:!1,icons:!1,aboveCursor:!0,addToOptions:[uv],override:[function(e){return n.apply(this,arguments)}],maxRenderedOptions:100})]}),ub=new nd.k(function(e){return no.Lz.updateListener.of(function(n){var t=!0,r=!1,i=void 0;try{for(var o,a=n.transactions[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value.annotation(cj.rK);l&&e(l.label)}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}})}),uS=t(62019),uY=t(37743),uA=t(1833),ux=t(35602),uC=t.n(ux),u_=(0,V.x)({root:[j.wp.display.inlineFlex],button:[j.wp.reset.button,j.wp.display.inlineFlex,j.wp.px(2),i9.b.outlined,j.wp.borderRadius(4),j.wp.rowWithGap(2),j.wp.align.center],warning:{color:k.LU.redDefault}}),uk=new nc.E(function(e){var n=(0,tt.WP)(e.path),t=(0,tt._6)(e.path);return(0,f.Y)(P.m_,{isDisabled:!t&&!e.warning,tooltip:(0,f.FD)(L.S,{children:[e.warning?(0,f.Y)(T.EY,{variant:"small",css:u_.warning,children:e.warning}):null,t?(0,f.FD)(T.EY,{variant:"small",color:"dimmest",children:[t,"/"]}):null]}),children:function(t,r){return(0,f.Y)(L.S,(0,nt._)((0,ee._)({css:u_.root,innerRef:r},t),{children:(0,f.FD)(L.S,{tag:"button",css:u_.button,onClick:function(){return e.onClick()},children:[(0,f.Y)(ti.A,{size:12,path:e.path}),(0,f.Y)(T.EY,{variant:"small",children:n}),e.warning?(0,f.Y)(iF.A,{size:12}):null]})}))}})}),uD=function(e){function n(e,t){var r;return(0,uY._)(this,n),(r=(0,uS._)(this,n)).file=e,r.onClick=t,r}(0,uA._)(n,e);var t=n.prototype;return t.eq=function(e){return this.file.path===e.file.path&&this.file.inclusionStatus===e.file.inclusionStatus},t.toDOM=function(){var e=this.file,n=e.path,t=e.inclusionStatus,r=null;switch(t){case"included":break;case"unsupported":r="File not supported";break;case"truncated":case"overflowing":r="Exceedes memory limit"}var i=uk.create({path:n,onClick:this.onClick,warning:r});return i.style.display="inline",i},n}(no.xO),uE=function(e,n){return new no.dT({regexp:RegExp("".concat(e.map(function(e){var n=e.path;return"@".concat(uC()(n))}).join("|")),"g"),decoration:function(t,r){var i,o=t[0].substring(1,null==(i=t[0])?void 0:i.length),a=e.find(function(e){return e.path===o});return a?no.NZ.replace({widget:new uD(a,function(){return n(o)}),inclusive:!0}):null}})},uR=new nd.k(function(e){return e?no.Z9.fromClass(function(){function n(t){(0,uY._)(this,n);var r=t.state.facet(c3);this.match=r.length&&e?uE(r,e):null,this.placeholders=this.match?this.match.createDeco(t):no.NZ.none}return n.prototype.update=function(n){var t=n.state.facet(c3);if(0===t.length){this.match=null,this.placeholders=no.NZ.none;return}if((0,na.$H)(n,c3)){this.match=uE(t,e),this.placeholders=this.match.createDeco(n.view);return}if((0,na.$H)(n,"doc")){if(!this.match){this.match=uE(t,e),this.placeholders=this.match.createDeco(n.view);return}this.placeholders=this.match.updateDeco(n,this.placeholders)}},n}(),{decorations:function(e){return e.placeholders},provide:function(e){return no.Lz.atomicRanges.of(function(n){var t;return(null==(t=n.plugin(e))?void 0:t.placeholders)||no.NZ.none})}}):[]}),uI=t(80446),uF=t(37237),uT=t(98106),uP=t(24726),uL=(0,lm.v)(["padding","columnGap"]),uU=uL.cssVars,uN=uL.styleTokens,uO=no.Lz.theme((c={"&":{flexGrow:1},"& .cm-content":{fontFamily:k.LU.fontFamilyDefault}},(0,g._)(c,"& .".concat(cJ.Fb),{display:"none"}),(0,g._)(c,"& .cm-cursor",{borderLeftColor:k.LU.foregroundDefault,borderLeftWidth:"1px"}),c)),uM=(0,V.x)({controlBarContainer:[j.wp.position.absolute,j.wp.width("100%"),j.wp.top(0),j.wp.left(0),j.wp.border({width:1,color:k.LU.outlineDimmer,direction:"bottom"})],footer:[j.wp.height(32)],left:[j.wp.flex.growAndShrink(1),{cursor:"text"}],right:[j.wp.display.flex,j.wp.rowWithGap(8),j.wp.align.end],rightColumn:[j.wp.display.flex,j.wp.flex.column,j.wp.align.center],codemirror:[j.wp.display.flex,j.wp.flex.grow(1),j.wp.maxHeight(300),{"& .cm-editor":[j.wp.flex.grow(1)]}],send:[j.wp.borderRadius(),j.wp.mr(2)],sendDisabled:[(0,ec.Li)("grey")],sendEnabled:[(0,ec.Li)("teal")],chatInput:[j.wp.borderRadius(4),i9.b.filledAndOutlined,j.wp.p(4),j.wp.position.relative,{"@media (hover: hover)":{":not([disabled], [aria-disabled])":{cursor:"text"}},padding:uN.padding,columnGap:uN.columnGap,rowGap:k.LU.space4,border:"1px solid ".concat(k.LU.outlineDimmest),"&:not([disabled], [aria-disabled])":{borderColor:k.LU.outlineDimmer},"&:hover:not([disabled], [aria-disabled]):hover":{borderColor:k.LU.tealStronger},"&:focus-within":{borderColor:k.LU.tealStronger}}]});function uB(e){var n,t,r,i,o,a,l,s,c,u=(0,ip.m5)(),d=(0,ip.m6)(),p=(t=(n={view:e.view,setPromptEditor:e.inputRef}).view,r=n.setPromptEditor,i=(0,w.useRef)(null),o=(0,e0.A)(r),(0,w.useEffect)(function(){if(t){var e=o.current;return e({setValue:function(e){t.state.doc.toString()!==e&&t.dispatch({changes:{from:0,to:t.state.doc.length,insert:e}})},getValue:function(){return t.state.doc.toString()},focus:function(){t.focus(),t.dispatch({selection:{anchor:t.state.doc.length}})},animatePlaceholder:function(){t.dispatch({effects:uI.om.of(!0)}),(0,cQ.U)(i,"border-color",k.LU.accentPrimaryDefault),setTimeout(function(){requestAnimationFrame(function(){var e;null==(e=i.current)||e.style.removeProperty("border-color")})},60),t.focus()}}),function(){e(null)}}},[t,o]),i),h=(0,uI.hk)({text:e.placeholderText}),m=(0,cA.Vn)(e.view,uI.Im),v=c5.bZ.use(e.maxLength),y=(0,e0.A)(e.onSubmit),b=uH.use((0,w.useCallback)(function(e){return y.current(e)},[y]),!e.isConnected),S=uy.use(e.findFiles),Y=uR.use(e.openFile),A=c6.use(e.fileContextInclusions),x=cZ.L.use({analyticsSurface:e.analyticsSurface,shouldTrack:!0}),C=e.updateFileContext,_=ub.use((0,w.useCallback)(function(e){return null==C?void 0:C({path:e,preference:"include"})},[C])),D=c1.U.use({addAttachments:e.addAttachments,onAutoAttachedLargePaste:function(e){(0,ty.u4)(ty.AZ.ASSISTANT_USED,{action:"auto_attached_large_paste",fileSize:e})}}),E=(0,c0.Jw)(cX.IW.id,cX.Gp.GenerateVisualizationCode),R=(0,c0.Jw)(cX._t.id,cX.ij.GenerateStylingCode),I=(!e.view||!0===m)&&!e.isLastEventInProgress||e.isSessionLoading&&!e.isLastEventInProgress||(null==(a=e.assistantModeAuthz)?void 0:a.isAuthorized)===!1||e.isSubmitDisabled,F=e.attachments,T=e.attachmentButton,P=e.controlBar,U=e.debugButton,N=e.fileContextButton,O=e.visualSelectorButton,M=(0,c2.e)(),B=e.isSessionLoading,H=e.isLastEventInProgress,z=(0,w.useMemo)(function(){return B?{sendButtonIcon:(0,f.Y)(to.A,{}),sendButtonAlt:"Loading"}:H?{sendButtonIcon:(0,f.Y)(uP.A,{}),sendButtonAlt:"Stop"}:{sendButtonIcon:(0,f.Y)(uT.A,{}),sendButtonAlt:"Send"}},[B,H]),W=z.sendButtonIcon,G=z.sendButtonAlt,V=function(){if(e.isLastEventInProgress)return void e.onStop();if(e.view){var n=e.view.state.doc.toString();n&&(e.onSubmit(n),e.view.dispatch({changes:{from:0,to:e.view.state.doc.length}}))}},j=(0,uF.z)({type:"assistant"}),Z=(0,l_.S)([p,E,R,j],{breadcrumb:"client/workspace/components/AiChat/ChatInput/index.tsx:371"}),q=void 0;return e.isSubmitDisabled&&e.submitDisabledReason?q=e.submitDisabledReason:(null==(l=e.assistantModeAuthz)?void 0:l.isAuthorized)===!1&&(q=null==(s=e.assistantModeAuthz)?void 0:s.message),(0,f.FD)(eu.ui,{css:uM.chatInput,innerRef:Z,style:(c={flexDirection:"compact"===e.variant?"row":void 0},(0,g._)(c,uU.padding,"compact"===e.variant?"2px 5px":"4px 4px"),(0,g._)(c,uU.columnGap,u||d?"0px":"4px"),(0,g._)(c,"paddingTop",e.controlBar?k.LU.space32:void 0),c),children:[P?(0,f.Y)(L.S,{css:uM.controlBarContainer,children:P}):null,F,(0,f.Y)(c$.A,{ref:e.codemirrorRef,css:uM.codemirror,fontSize:14,extensions:[uO,b,x,D,h,c5.tP,v,A,Y,S,_,cK.r,cq.N,e.isPasteAndDropSupported?D:[],M?[]:c_.fd]}),(0,f.FD)(L.S,{css:uM.footer,py:4,row:!0,gap:8,align:"end",children:["compact"===e.variant?null:(0,f.FD)(L.S,{css:uM.left,row:!0,gap:8,align:"center",onClick:function(n){if(n.target===n.currentTarget){var t;null==(t=e.view)||t.focus()}},children:[T,O,N,U]}),(0,f.FD)(L.S,{css:uM.right,style:{alignItems:"compact"===e.variant?"flex-end":"center"},children:["compact"===e.variant?null:(0,f.Y)(c5.v$,{view:e.view}),e.feedbackButton,(0,f.FD)(L.S,{css:uM.rightColumn,children:["compact"===e.variant?(0,f.Y)(c5.v$,{view:e.view}):null,u?(0,f.Y)(c4.J,{variant:"assistant",alt:G,onClick:V,dataCy:"ai-chat-send-button",iconOverride:e.isLastEventInProgress?(0,f.Y)(uP.A,{}):void 0}):(0,f.Y)(eu.ui,{elevated:!0,css:uM.send,children:e.isConnected?(0,f.Y)(eY.K0,{css:I?uM.sendDisabled:uM.sendEnabled,disabled:I,tooltipContents:q,tooltipBehavior:I?"default":"hidden",dataCy:"ai-chat-send-button",alt:G,onClick:V,children:W}):(0,f.Y)(eY.K0,{disabled:!0,alt:"Connecting",children:(0,f.Y)(to.A,{})})})]})]})]})]})}var uH=new nd.k(function(e,n){return no.Lz.domEventHandlers({keydown:function(t,r){!((0,cj.lq)(r.state).length>0)&&("Enter"===t.key&&t.metaKey&&t.stopPropagation(),"Enter"===t.key&&!t.shiftKey)&&(t.preventDefault(),n||r.state.field(uI.Im)||(e(r.state.doc.toString()),r.dispatch({changes:{from:0,to:r.state.doc.length}})))}})}),uz=t(25907);function uW(){var e=(0,en._)(["\n  query GetRagAuthorization($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        authorizations {\n          useRag {\n            isAuthorized\n            code\n            message\n          }\n        }\n      }\n    }\n  }\n"]);return uW=function(){return e},e}var uG={},uV=(0,et.J1)(uW());function uj(){var e,n,t,r,i=(0,v._)((0,w.useState)(null),2),o=i[0],a=i[1],l=(0,nI.A)(),s=(e={variables:{replId:l}},n=(0,ee._)({},uG,e),er.I(uV,n)),c=s.data,u=s.refetch,d=(null==c||null==(r=c.repl)?void 0:r.__typename)==="Repl"&&c.repl.authorizations.useRag.isAuthorized;return(0,nf.b)((t=(0,y._)(function(e,n){var t,r,i,o,l,s,c,u,p;return(0,b.YH)(this,function(f){switch(f.label){case 0:if(t=n.signal,!d)return[2];r=e.viktor.subscribeCurrentState.subscribe({},{signal:t}).resReadable,i=!1,o=!1,f.label=1;case 1:f.trys.push([1,6,7,12]),s=(0,nn._)(r),f.label=2;case 2:return[4,s.next()];case 3:if(!(i=!(c=f.sent()).done))return[3,5];if(!(u=c.value).ok)return a({error:u.payload.message}),[3,5];a(u.payload),f.label=4;case 4:return i=!1,[3,2];case 5:return[3,12];case 6:return p=f.sent(),o=!0,l=p,[3,12];case 7:if(f.trys.push([7,,10,11]),!(i&&null!=s.return))return[3,9];return[4,s.return()];case 8:f.sent(),f.label=9;case 9:return[3,11];case 10:if(o)throw l;return[7];case 11:return[7];case 12:return[2]}})}),function(e,n){return t.apply(this,arguments)}),[d]),{isRagAuthorized:d,ragState:o,refetchRagAuthorization:(0,w.useCallback)(function(){u({replId:l})},[u,l])}}var uZ={direction:"reverse",state:{id:null,state:null},reducer:function(e,n){return n.id=e.id,n.state=e.state,!1}},uq=t(93436),uK=t(74291),u$=t(80621),uJ=(0,V.x)({attachments:[j.wp.px(4),j.wp.py(8)]});function uQ(e){var n,t,r,i,o,a,l,s,c,u,d,p,h,m,g,Y,C,k,D,E=e.assistantAuthz,R=e.sendMessage,I=e.stopMessage,F=e.openFile,T=e.openGitCommit,P=e.inputRef,L=e.isSessionLoading,U=e.sessionId,N=e.fileContextInclusions,O=e.dataAppTourGenerateCodeStep,M=e.portfolioWebsiteTourGenerateCodeStep,B=e.shouldAutoscrollRef,H=(0,S.NC)(),z=(0,_.Rj)(function(){return U?H.sessions.get(U):null},[H,U],{default:null}),W=(0,ip.m5)(),V=(0,io._P)({controlName:"flag-agent-debug-info-button"}),j=(0,io._P)({controlName:"flag-assistant-visual-editor-button"}),Z=!(0,lp.F)()&&(null==E?void 0:E.advancedAssistant.isAuthorized),q=(0,A.A)().fs;ae();var K=(n=(0,G.Sx)(),t=(0,n6.J)(),(0,w.useCallback)((r=(0,y._)(function(e){var r,i,o,a,l;return(0,b.YH)(this,function(s){switch(s.label){case 0:return[4,q.listFiles()];case 1:if((r=s.sent()).error||!r.files)return[2,{error:null!=(i=r.error)?i:"Something went wrong",files:null}];if(o=r.files.filter(function(e){return!t(e)}),!e)return[3,3];return[4,(0,ue.UI)(e,o)];case 2:return l=s.sent(),[3,4];case 3:l=(0,c7.A)(o,{existing:n(),getKey:function(e){return e}}).map(function(e){return{path:e}}),s.label=4;case 4:return a=l,[2,{total:o.length,files:a,error:null}]}})}),function(e){return r.apply(this,arguments)}),[q,t,n])),$=(0,_.Rj)(function(){return null==z?void 0:z.reduce(uZ,1)},[z],{default:null}),J=(null==$?void 0:$.state)===x.qOk.IN_PROGRESS,Q=(0,S.GS)(),ee=(0,S.Y9)(),en=(0,S.so)(),et=(0,S.Gk)(),er=uj(),ei=er.isRagAuthorized,eo=er.ragState,ea=er.refetchRagAuthorization;(0,w.useEffect)(function(){ea()},[null==E||null==(k=E.advancedAssistant)?void 0:k.isAuthorized,ea]);var el=(0,v._)((0,w.useState)(!1),2),es=el[0],ec=el[1],eu=(0,v._)((0,w.useState)("ai_model_selector"),2),ed=eu[0],ep=eu[1],ef=(0,S.dm)(),eh=ef.assistantMode,em=ef.setAssistantMode,eg=(0,S.K2)().limits.messageCharacters,ev=(0,ip.m5)(),ew=(0,nN.A)().showError,ey=(0,im.s)(),eb=ey.attachments,eS=ey.urlAttachments,eY=ey.removeAttachment,eA=ey.addAttachments,ex=ey.addUrlAttachment,eC=ey.removeUrlAttachment,e_=ey.clearAttachments,ek=ey.isLoading,eD=(0,u$.T)({mode:eh,authz:E}),eE=(o=(i={authz:eD,sendMessage:R,shouldAutoscrollRef:B}).authz,a=i.sendMessage,l=i.shouldAutoscrollRef,s=(0,S.Gk)(),c=(0,S.jt)(),u=uj().isRagAuthorized,p=(d=(0,uz.Zo)()).toggleVisualEditor,h=d.element,g=(m=(0,S.dm)()).getAssistantMessageIntent,Y=m.getAssistantMessageModel,C=m.getAssistantMode,(0,w.useCallback)(function(e,n){if(s){var t=Y(o);(0,ty.u4)(ty.AZ.ASSISTANT_USED,{action:"message_sent",assistant_mode:C(),message_content:e,message_source:"chat_pane",message_surface:"workspace_ai_pane",is_agent_repl:c}),a({message:e,attachments:n,useRag:u,modelType:t,intent:g(),webviewTargetedElement:null!=h?h:void 0}),l.current=!0,h&&p()}},[s,g,C,Y,o,a,u,l,h,p,c]));function eR(){return(eR=(0,y._)(function(e){return(0,b.YH)(this,function(n){return eD.isAuthorized&&(eE(e,(0,X._)(eb).concat((0,X._)(eS.map(function(e){return e.file})))),e_(),e.trim().length>0&&((null==O?void 0:O.isActive)?O.next():(null==M?void 0:M.isActive)&&M.next())),[2]})})).apply(this,arguments)}var eI=(0,nu.A)(),eF=eI.ref,eT=eI.view,eP=null!=(D=(0,cA.Vn)(eT,c_.Wd))?D:[];return(0,f.FD)(f.FK,{children:[(0,f.Y)(uB,{codemirrorRef:eF,view:eT,assistantModeAuthz:eD,placeholderText:"Ask ".concat(S.BP,", use @ to include specific files..."),isPasteAndDropSupported:!0,isConnected:et,inputRef:P,isLastEventInProgress:J,isSessionLoading:L,isSubmitDisabled:ek,submitDisabledReason:ek?"Please wait for files to finish uploading":null,findFiles:K,fileContextInclusions:N,updateFileContext:function(e){return Q(e.path,e.preference)},openFile:F,openGitCommit:T,maxLength:eg,onStop:I,onSubmit:function(e){return eR.apply(this,arguments)},analyticsSurface:"workspace_ai_sidebar",attachments:(0,f.Y)(iG.A,{css:uJ.attachments,detectedUrls:eP.map(function(e){return(0,f.Y)(cC.A,{url:e,addUrlAttachment:ex,removeUrlAttachment:eC,onError:ew},e)}),fileAttachments:eb.map(function(e){return(0,f.Y)(iV.m1,{attachment:e,removeAttachment:eY,getAttachmentTypeDisclaimer:(0,ij.F)({aiName:S.BP}),imagesDisabledMessage:"basic"===eh?"".concat(S.BP," can't see images in Basic mode"):void 0},e.path)})}),attachmentButton:(0,f.Y)(cx.e,{status:L?"loading":"composing",addAttachments:eA}),addAttachments:eA,debugButton:V&&U?(0,f.Y)(uq.A,{sessionId:U,sessionType:x.dF3.CHAT}):void 0,fileContextButton:(0,f.Y)(ug,{isInMobileWorkspace:ev,onChange:function(e){return Q(e.path,e.preference)},unSelectAll:function(e){return ee(e.paths)},findFiles:K,fileContextInclusions:N,isRagAuthorized:ei,ragState:eo}),controlBar:(0,f.Y)(cz,{availableModels:en,assistantAdvancedAuthz:null==E?void 0:E.advancedAssistant,onModeSelectChange:function(e){if(!(null==E?void 0:E.advancedAssistant.isAuthorized)&&"advanced"===e){ep("ai_model_selector"),ec(!0);return}e!==eh&&(0,ty.u4)(ty.AZ.ASSISTANT_USED,{action:"mode_changed",intent_type:null,mode:e,message_content:null,message_source:"chat_pane",message_surface:"workspace_ai_pane"}),em(e)}}),feedbackButton:!W&&z&&Z?(0,f.Y)(ck.M,{session:z}):void 0,visualSelectorButton:j?(0,f.Y)(uK.G,{}):void 0}),(0,f.Y)(ih.A,{isOpen:es,onClose:function(){return ec(!1)},reloadPageAfterPurchaseComplete:!0,type:"purchase",highlightUpsell:"assistant",analyticsContext:{upgrade:{context:ed,surface:"ghostwriter_power_up_dialog"}}})]})}var uX=(0,V.x)({surface:[j.wp.borderRadius(),j.wp.textAlign.center],buttonContainer:[j.wp.width("100%"),j.wp.justify.center]});function u0(e){var n=e.assistantAuthz,t=e.getFileContext,r=e.hideInput,i=(0,tg._)(e,["assistantAuthz","getFileContext","hideInput"]),o=(0,v._)((0,w.useState)(!1),2),a=o[0],l=o[1],s=(0,lp.F)(),c=(0,cu.x)(),u=(0,s0.V)().assistantEdits,d=(0,S.dm)(),p=d.assistantMode,h=d.setAssistantMode,m=!!("advanced"===p&&s&&!(null==u?void 0:u.isUnderQuota)),g=(null==n?void 0:n.advancedAssistant.code)===ic.JB.PaymentDelinquent,y=(0,io._P)({controlName:"flag-freemium-ai-load-shedder"}),b=(0,iC.A)(),Y=function(){(0,ty.u4)(ty.AZ.ASSISTANT_USED,{action:"mode_changed",intent_type:null,mode:"basic",message_content:null,message_source:"chat_pane",message_surface:"workspace_ai_pane"}),h("basic")};return m?(0,f.FD)(L.S,{py:8,px:6,children:[(0,f.FD)(eu.ui,{elevated:!0,css:uX.surface,py:8,px:12,gap:8,align:"center",children:[(0,f.FD)(T.EY,{variant:"subheadDefault",children:["You've run out of free ",S.BP," ",(0,i8.A)(o7.go)]}),(0,f.FD)(T.EY,{children:["Upgrade to ",iv.en," to continue generating code. You can still ask ",S.BP," questions in Basic mode."]}),(0,f.FD)(L.S,{css:uX.buttonContainer,row:!0,gap:8,children:[(0,f.Y)(eS.$n,{text:"Upgrade to ".concat(iv.en),iconLeft:(0,f.Y)(cL.A,{}),onClick:function(){return l(!0)},colorway:"brand"}),(0,f.Y)(eS.$n,{text:"Switch to Basic mode",onClick:function(){return Y()}})]})]}),(0,f.Y)(ih.A,{isOpen:a,onClose:function(){return l(!1)},type:"purchase",analyticsContext:{upgrade:{context:"assistant_freemium_quota"}},onPurchaseComplete:b,reloadPageAfterPurchaseComplete:!0})]}):r?null:g?(0,f.Y)(L.S,{p:8,children:(0,f.Y)(un.d,{iconLeft:(0,f.Y)(s4.A,{}),text:"You have a failed payment. Please update your payment method to continue using AI services.",colorway:"negative",href:"/account#billing",target:"_blank"})}):s&&y?(0,f.Y)(cs.n,{aiName:S.BP}):c?(0,f.Y)(L.S,{p:8,children:(0,f.Y)(cc.c,{aiName:S.BP})}):(0,f.FD)(L.S,{px:8,pb:8,children:[(0,f.Y)(cY,{assistantAuthz:n}),(0,f.Y)(uQ,(0,ee._)({assistantAuthz:n,getFileContext:t},i))]})}var u1=(0,w.forwardRef)(function(e,n){var t,r,i,o,a,l,s,c,u,d,p,h,m,g,Y,C,k,D=(0,id.A)(),E=(0,v._)((0,w.useState)(!1),2),R=E[0],I=E[1],F=e.openPane,T=e.onSessionChange,P=e.removePane,L=(0,v._)((0,w.useState)(null!=(k=e.initialSessionId)?k:null),2),U=L[0],N=L[1],O=(0,v._)((0,w.useState)(!1),2),M=O[0],B=O[1],H=(0,S.NC)(),z=(0,_.Rj)(function(){return U?H.sessions.get(U):null},[H,U],{default:null}),V=(0,iu.r8)();(0,w.useImperativeHandle)(n,function(){return{updateActiveSessionId:function(e){N(null!=e?e:null)},openSettingsPanel:eg.openSettingsPanel,toggleSidebar:function(){V.toggleSidebar()}}}),(0,w.useEffect)(function(){null==T||T(U)},[T,U]),t=(0,v._)((0,cl.jd)({fetchPolicy:"network-only",ssr:!1}),1)[0],r=(0,w.useMemo)(function(){return rV()(t,2e3,{trailing:!0})},[t]),(0,S.zv)("received-completed-event",function(e){var n=e.event.contents.contents;(0,x.VFn)(n,"messageEventContents")&&(0,x.QNh)(n).assistantProposedActions.didCountEditRequest&&r()});var j=(0,S.q4)(),Z=(0,w.useRef)(!1),q=(0,v._)((0,w.useState)(null),2),K=q[0],$=q[1],J=(0,is.useRouter)(),Q=(0,ip.ME)(J,"hideChatInput"),en=(0,ca.L)(),et=en.authorizations,er=en.loading,ei=(0,S.dm)().getAssistantMode;function eo(e){if(N(e),!D&&(null==K||K.focus(),!e)){var n;null==K||null==(n=K.setValue)||n.call(K,"")}}var ea=(0,w.useCallback)(function(e){return F((0,n5.af)(e))},[F]),el=(0,w.useCallback)(function(e){return F({type:"git",data:{mode:{type:ln.C.COMMIT,hash:e}}})},[F]),es=(0,A.A)(),ec=es.fs,eu=es.dotReplit,ed=(o=(i={recentFilesObservable:(0,G.rE)(),getFileContext:(0,W.P)(ec,eu),assistantMode:ei()}).recentFilesObservable,a=i.getFileContext,l=i.assistantMode,s=(0,e0.A)(a),c=(0,S.Vg)(),u=(0,S.nt)(),p=(d=(0,v._)((0,w.useState)([]),2))[0],h=d[1],(0,w.useEffect)(function(){var e=function(e){return n.apply(this,arguments)};function n(){return(n=(0,y._)(function(e){var n,t;return(0,b.YH)(this,function(r){switch(r.label){case 0:return[4,null==(n=s.current)?void 0:n.call(s,{modelType:"advanced"===l?x.e3q.ADVANCED:x.e3q.BASIC,filePreferences:u,recentFiles:e})];case 1:if(!(t=r.sent()))return[2];return h(function(e){var n=e.filePreferences,t=e.fileContextState,r=new Map(t.fileContext.map(function(e){return[e.filePath,"included"]})),i=!0,o=!1,a=void 0;try{for(var l,s=n[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=(0,v._)(l.value,2),u=c[0],d=c[1];if("exclude"===d){r.delete(u);continue}if(t.unsupportedPreferredFiles.has(u)){r.set(u,"unsupported");continue}r.set(u,"included"===r.get(u)?"included":"overflowing")}}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}return(0,X._)(r.entries()).map(function(e){var n=(0,v._)(e,2);return{path:n[0],inclusionStatus:n[1]}})}({fileContextState:t,filePreferences:u})),[2]}})})).apply(this,arguments)}return e(o.current),o.subscribe((0,co.A)(e,{wait:2e3}))},[o,u,l,s]),{fileContextInclusions:p,getFileContext:(0,w.useMemo)(function(){return function(){return a({modelType:"advanced"===l?x.e3q.ADVANCED:x.e3q.BASIC,filePreferences:c(),recentFiles:o.current})}},[a,c,l,o])}),ep=ed.fileContextInclusions,ef=ed.getFileContext,eh=e.inputRef,em=(0,w.useCallback)(function(e){$(e),null==eh||eh(e)},[eh]),eg=(g=(m=(0,v._)((0,w.useState)(!1),2))[0],Y=m[1],{isSettingsPanelOpen:g,openSettingsPanel:(0,w.useCallback)(function(){return Y(!0)},[]),openUserSettingsPane:(0,w.useCallback)(function(){F({type:"preferences"})},[F]),setIsSettingsPanelOpen:Y}),ev=!!(null==et?void 0:et.advancedAssistant.isAuthorized),ew=(null==et?void 0:et.advancedAssistant.code)===ic.JB.PaymentDelinquent,ey=(0,w.useCallback)((C=(0,y._)(function(e){var n,t,r,i,o,a,l,s,c,u,d,p;return(0,b.YH)(this,function(f){switch(f.label){case 0:if(n=e.message,t=e.attachments,r=e.useRag,i=e.modelType,o=e.intent,a=e.webviewTargetedElement,M)return[2];if(B(!0),l=z)return[3,2];return[4,H.sessions.create({sessionType:x.dF3.CHAT})];case 1:if(!(s=f.sent()).ok)return B(!1),[2];l=s.payload,f.label=2;case 2:return N(l.id),c=t.map(function(e){return{path:e.path,mimeType:e.file.type}}),[4,ef()];case 3:return d=(u=f.sent()).fileContext,p=u.mostRecentFile,[4,l.appendEvent({kind:"message",intent:o,modelType:i,message:n,uploadedFiles:c,useRag:r,webviewTargetedElement:a,fileContext:d,mostRecentFile:p})];case 4:return f.sent(),B(!1),[2]}})}),function(e){return C.apply(this,arguments)}),[M,z,ef,H]),eb=(0,w.useCallback)((0,y._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:if(!z)return[3,2];return[4,z.abortLastEvent()];case 1:e.sent(),B(!1),e.label=2;case 2:return[2]}})}),[z]),eS=(0,ig.o)(),eY=(0,nN.A)().showError;return(0,f.FD)(im.S,{sessionId:null!=U?U:void 0,uploadFiles:eS,onError:eY,children:[(0,f.FD)(cr,(0,nt._)((0,ee._)({sessionId:U,setSessionId:eo,onNewSessionClick:function(){eo(null),null==K||K.animatePlaceholder()},sidebarState:V},eg),{children:[z?(0,f.Y)(lA,{openPane:F,removePane:P,sessionId:null==z?void 0:z.id,shouldAutoscrollRef:Z,openAiChatSettingsPanel:eg.openSettingsPanel}):(0,f.Y)(ci.T,{showPromptSuggestions:!Q,sessionType:x.dF3.CHAT,onPromptSuggestionClick:K?function(e){var n;null==K||null==(n=K.setValue)||n.call(K,e.text),D||null==K||K.focus()}:void 0,onSwitchToAgent:function(){return F({type:"agentChat"})},openAiChatSettingsPanel:eg.openSettingsPanel,titleContent:er||ev?null:(0,f.Y)(iR,{}),footerContent:er||ev||ew?void 0:(0,f.Y)(iE,{})}),j?(0,f.Y)(iL,{}):(0,f.Y)(u0,{assistantAuthz:et,sendMessage:ey,stopMessage:eb,openFile:ea,openGitCommit:el,inputRef:em,isSessionLoading:M,sessionId:U,getFileContext:ef,fileContextInclusions:ep,shouldAutoscrollRef:Z,hideInput:Q})]})),(0,f.Y)(ih.A,{isOpen:R,onClose:function(){return I(!1)},type:"purchase",analyticsContext:{upgrade:{context:"ai_model_selector",surface:"ghostwriter_power_up_dialog"}}})]})}),u2=t(98305),u4=t(41820),u5=t(96592),u3=t(87713),u6=h.ZU.Object({type:h.ZU.Literal("ghostwriterChat"),data:h.ZU.Optional(h.ZU.Object({sessionId:h.ZU.Optional(h.ZU.String()),newSessionType:h.ZU.Optional(h.ZU.Enum(x.dF3))}))}),u8=(0,V.x)({root:[j.wp.center,j.wp.flex.growAndShrink(1),j.wp.p(16)]});function u7(){return(0,f.Y)(L.S,{css:u8.root,children:(0,f.Y)(T.EY,{children:"AI is disabled for this team"})})}var u9={Content:function(e){var n=e.pane.data,t=e.options,r=(0,S.NC)(),i=(0,_.Rj)(function(){return(null==n?void 0:n.sessionId)?r.sessions.get(n.sessionId):null},[r,null==n?void 0:n.sessionId],{default:null}),o=(0,io._P)({controlName:"flag-killswitch-ghostwriter-chat",logFlagToAnalytics:!1}),a=t.performPaneOperation,l=(0,w.useCallback)(function(e){a({operation:"open",pane:e,secondary:!0})},[a]),s=(0,w.useCallback)(function(e){a({operation:"remove",pane:{id:e}})},[a]),c=(0,G.AU)("workspaceTourGuide"),u=(0,v._)((0,w.useState)(null),2),d=u[0],p=u[1];(0,tr.HP)(function(){return d},[d]);var h=(0,w.useRef)(""),m=(0,w.useRef)(null==n?void 0:n.sessionId),g=(0,w.useRef)(null==n?void 0:n.sessionId),y=(0,w.useRef)(null);(0,w.useEffect)(function(){if(g.current!==(null==n?void 0:n.sessionId)){var e;g.current=null==n?void 0:n.sessionId,null==(e=y.current)||e.updateActiveSessionId(null==n?void 0:n.sessionId)}},[null==n?void 0:n.sessionId]);var b=(0,w.useCallback)(function(e){g.current!==e&&(g.current=null!=e?e:void 0,a({operation:"replace",pane:{type:"ghostwriterChat",data:e?{sessionId:e}:void 0}}))},[a]),Y=(0,il.u)(i),A=Y.FeedbackModal,x=Y.feedbackCommandGroup,C=(0,u4.y)({sessionId:null==n?void 0:n.sessionId,type:"assistant"}).usageCommand;return((0,tr.Qt)(function(){var e={type:"ghostwriterChat",setInputText:d?d.setValue:function(e){h.current=e}},n=[{name:"Chat",commands:[{data:{type:"action",icon:(0,f.Y)(u3.A,{}),label:"New chat",run:function(){b(null),null==d||d.animatePlaceholder()}}},{data:{type:"action",icon:(0,f.Y)(sd.A,{}),label:"All chats",run:function(){var e;null==(e=y.current)||e.toggleSidebar()}}}]},{name:"Settings",commands:[C,{data:{type:"action",icon:(0,f.Y)(oI.A,{}),label:"Settings",run:function(){var e;null==(e=y.current)||e.openSettingsPanel()}}}]},x];return(0,nt._)((0,ee._)({},e),{commands:n})},[d,b,y,C,x]),(0,ia.f)().isTeamWithAiDisabled)?(0,f.Y)(u7,{}):o?(0,f.Y)(u2.A,{textVariant:"headerDefault",showImage:!0}):(0,f.FD)(f.FK,{children:[(0,f.Y)(u1,{ref:y,inputRef:p,initialSessionId:m.current,openPane:l,removePane:s,isGuidedWorkspaceTourActive:null!=c&&c,analyticsMessageSurface:"workspace_ai_pane",onSessionChange:b}),(0,f.Y)(A,{})]})},Icon:function(e){var n=e.size,t=e.color;return(0,f.Y)(n0.Vx.Provider,{value:{color:t,size:n},children:t?(0,f.Y)(u5.A,{color:t}):(0,f.Y)(i_.A,{})})},getTitle:function(){return S.BP},description:S.C3,category:nQ.bY.WorkspaceFeatures,decode:function(e){return m.T(u6,e)}},de=(0,w.createContext)(null);function dn(){var e=(0,w.useContext)(de);if(!e)throw Error("Expected store in context");return e}var dt=(0,ez.eU)([]),dr=(0,ez.eU)(function(e){return e(dt)},function(e,n,t){var r=e(dt),i=Math.random().toString(36).substring(7);n(dt,[{id:i,type:t,dismiss:function(){var t=e(dt).filter(function(e){return e.id!==i});n(dt,t)}}].concat((0,X._)(r)))});function di(){return(0,eW.Xr)(dr,{store:dn()})}function da(e,n){(0,ty.u4)(th.AZ.GIT_FEATURE_USED,(0,ee._)({action:e,source:"git-pane"},n))}var dl=t(38212),ds=(0,V.x)({checkboxLabel:j.wp.rowWithGap(8)});function dc(){var e=(0,w.useId)(),n=(0,v._)((0,w.useState)(!0),2),t=n[0],r=n[1],i=(0,v._)((0,w.useState)(!1),2),o=i[0],a=i[1],l=di(),s=(0,A.A)().git;function c(){return(c=(0,y._)(function(){var e;return(0,b.YH)(this,function(n){switch(n.label){case 0:if(o)return[2];return a(!0),[4,s.init({initialCommit:t,includeAllInitialFiles:!0})];case 1:return(e=n.sent()).error?(a(!1),l(e.error)):(s.forceRefresh(),da("repository-initialized")),[2]}})})).apply(this,arguments)}return(0,f.FD)(f.FK,{children:[(0,f.Y)(eS.$n,{text:o?"Initializing...":"Initialize Git Repository",iconLeft:o?(0,f.Y)(to.A,{}):(0,f.Y)(dl.A,{}),colorway:"primary",loading:o,onClick:function(){return c.apply(this,arguments)}}),(0,f.FD)(L.S,{css:ds.checkboxLabel,tag:"label",children:[(0,f.Y)(nH.S,{id:e,checked:t,onChange:function(e){return r(e)},size:"small"}),(0,f.Y)(T.EY,{variant:"small",multiline:!1,children:"Create initial commit with all changes"})]})]})}var du=t(18402),dd=t(31475);function dp(){var e,n=(0,t9.A)((e=(0,y._)(function(e){return(0,b.YH)(this,function(n){return[2,{connectedToGithub:df(e),error:null}]})}),function(n){return e.apply(this,arguments)}));return null==n||n.error?null:n.connectedToGithub}function df(e){return e.hasProfile(t8.HJ.GITHUB)}var dh=t(98739);function dm(e){var n=e.label,t=e.allowReconnect,r=e.callback,i=(0,v._)((0,w.useState)(!1),2),o=i[0],a=i[1],l=(0,A.A)().git,s=dp(),c=(0,rK.A)(),u=(0,dd.P)({onAuth:function(){da("github-user-connected"),a(!1),l.refreshProfiles({preferredProvider:t8.HJ.GITHUB}),null==r||r()},onClose:function(){return a(!1)}});return s&&!(void 0!==t&&t)?(0,f.Y)(eS.$n,{text:"Connected to GitHub",colorway:"primary",iconLeft:(0,f.Y)(oR.A,{}),disabled:!0}):(0,f.Y)(eS.$n,{text:o||null===s?"Connecting...":c?"Visit account page to connect to GitHub":void 0===n?"Connect to GitHub":n,colorway:"primary",iconLeft:o?(0,f.Y)(to.A,{}):(0,f.Y)(dh.A,{}),loading:o,onClick:function(){if(c)return void du.M.openExternalUrl("/account#connected-services");a(!0),u()}})}var dg=t(40684);function dv(e){return!!e&&("string"==typeof e?e.includes(dg.Oe):e.fetch.includes(dg.Oe))}function dw(e){return e.endsWith(".git")?e.slice(0,-4):e}function dy(e){if(!e)return null;var n="string"==typeof e?e:e.fetch;return dv(n)?dw(n):null}function db(e){var n="string"==typeof e?e:e.fetch;if(dv(n)){var t=(n=dw(n)).split("/");if(t.length<2)return null;var r=t[t.length-2],i=t[t.length-1];return"".concat(r,"/").concat(i)}return null}var dS=t(83650),dY=(0,V.x)({body:[j.wp.borderRadius(0,0,8,8)],remedies:[j.wp.flex.wrap,{gap:"8px"}]});function dA(e){var n=e.description,t=e.remedies,r=e.error;return(0,f.FD)(eu.ui,{css:dY.body,p:4,gap:8,elevated:!0,children:[(0,f.Y)(T.EY,{children:n}),(0,f.FD)(L.S,{css:dY.remedies,row:!0,align:"center",justify:"end",children:[t,(0,f.Y)(eS.$n,{text:"Dismiss",iconLeft:(0,f.Y)(dS.A,{}),onClick:r.dismiss})]})]})}function dx(e){var n,t=e.error,r=(0,t9.A)((n=(0,y._)(function(e){var n,r,i,o,a,l,s,c,u,d;return(0,b.YH)(this,function(p){switch(p.label){case 0:switch(t.type){case t8.uA.UNKNOWN_NOT_GIT:return[3,1];case t8.uA.UNKNOWN:return[3,2];case t8.uA.CHANNEL_CLOSED:return[3,3];case t8.uA.NOT_INITIALIZED:return[3,4];case t8.uA.UNAUTHENTICATED:return[3,5];case t8.uA.INDEX_FILE_CORRUPT:return[3,7];case t8.uA.UNKNOWN_REMOTE:return[3,8];case t8.uA.UNKNOWN_REF:return[3,9];case t8.uA.INDEX_LOCKED:return[3,10];case t8.uA.NO_COMMITS:return[3,11];case t8.uA.PATH_MATCHED_NO_FILES:return[3,12];case t8.uA.USER_NOT_CONFIGURED:return[3,13];case t8.uA.INVALID_REFERENCE:return[3,14];case t8.uA.BRANCH_ALREADY_EXISTS:return[3,15];case t8.uA.MERGE_CONFLICT:return[3,16];case t8.uA.UPSTREAM_NOT_SET:return[3,17];case t8.uA.HEAD_DETACHED:return[3,18];case t8.uA.DIRTY_WORKTREE:return[3,19];case t8.uA.PROTECTED_BRANCH:return[3,20];case t8.uA.PUSH_REJECTED:return[3,21];case t8.uA.REMOTE_ALREADY_EXISTS:return[3,22];case t8.uA.TIMEOUT:return[3,23];case t8.uA.ALREADY_INITIALIZED:return[3,24]}return[3,25];case 1:return n="Unknown error from the Git service. This is probably a bug in the app.",r=null,[3,26];case 2:return n="There was an unrecognized fatal error with Git. This is probably a bug in the app.",r=null,[3,26];case 3:return n="The command was interrupted. Please try again.",r=null,[3,26];case 4:return n="There isn't a Git repository in the Repl's root directory.",r=null,[3,26];case 5:return[4,e.getRemotes()];case 6:if((i=p.sent()).error)return[2,i];if(0!==i.remotes.size){o=!1,a=!0,l=!1,s=void 0;try{for(c=i.remotes.values()[Symbol.iterator]();!(a=(u=c.next()).done);a=!0)if(d=u.value,dv(d)){o=!0;break}}catch(e){l=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(l)throw s}}if(o){if(df(e))return n="Failed to authenticate with the remote. Please ensure that Replit has access to this repository on GitHub.",r=(0,f.Y)(dm,{label:"Update GitHub Repository Access",callback:t.dismiss,allowReconnect:!0}),[3,26];return n="Failed to authenticate with the remote. You have not connected your Replit account to GitHub, so Replit may not have access to the remote repository. Please connect your account to GitHub and try again.",r=(0,f.Y)(dm,{label:"Connect to GitHub",callback:t.dismiss,allowReconnect:!0}),[3,26]}}return n="Failed to authenticate with the remote.",r=null,[3,26];case 7:return n="The Git index file is corrupt. This can happen if the index file is manually edited, or if the Git repository is corrupted.",r=null,[3,26];case 8:return n="The remote specified isn't configured.",r=null,[3,26];case 9:return n="Remote ref of current branch is missing, publish your branch or restore the remote branch",r=null,[3,26];case 10:return n="Git tried to perform an action but the index lockfile still exists. This means Git either crashed previously or is still running an action.",r=null,[3,26];case 11:return n="There are no commits in the repository.",r=null,[3,26];case 12:return n="The path specified didn't match any files.",r=null,[3,26];case 13:return n="There isn't any user information configured for Git.",r=null,[3,26];case 14:return n="An unknown/invalid reference was specified. This is usually a branch, but it could be something else, such as a tag.",r=null,[3,26];case 15:return n="The branch specified already exists.",r=null,[3,26];case 16:return n="There was an unexpected merge conflict.",r=null,[3,26];case 17:return n="The upstream branch isn't set.",r=null,[3,26];case 18:return n="The HEAD is detached. You have a commit checked out, not a branch.",r=null,[3,26];case 19:return n="There are uncommitted changes.",r=null,[3,26];case 20:return n="This operation cannot be performed on a protected branch.",r=null,[3,26];case 21:return n="The push was rejected by the remote. This is usually because the remote has commits that aren't in the local repository.",r=null,[3,26];case 22:return n="The remote specified already exists.",r=null,[3,26];case 23:return n="The remote operation timed out.",r=null,[3,26];case 24:return n="There is already a Git repository in the Repl's root directory.",r=null,[3,26];case 25:return n="We ran into an unknown error that we don't have a description for. This is probably a bug with the app.",r=null,[3,26];case 26:return[2,{description:n,remedies:r,error:null}]}})}),function(e){return n.apply(this,arguments)}),[t],{refresh:!1});if(!r)return(0,f.Y)(dA,{description:null,remedies:null,error:t});if(r.error)return(0,f.Y)(dA,{description:"Unknown error from the Git service. This is probably a bug in the app.",remedies:null,error:t});var i=r.description,o=r.remedies;return(0,f.Y)(dA,{description:i,remedies:o,error:t})}var dC=(0,V.x)({errorNotification:[{pointerEvents:"all"},j.wp.p(1),j.wp.backgroundColor.accentNegativeDimmer,j.wp.borderRadius(8),j.wp.shadow(3)],header:[j.wp.display.flex,j.wp.flex.row,j.wp.align.center,j.wp.justify.spaceBetween,j.wp.color.accentNegativeStrongest],errorType:[j.wp.font.code,{opacity:.75}],body:[j.wp.backgroundColor.backgroundHigher,j.wp.borderRadius(0,0,8,8)]});function d_(e){var n=e.error;return(0,f.FD)(L.S,{css:dC.errorNotification,children:[(0,f.FD)(L.S,{css:dC.header,py:4,px:8,children:[(0,f.FD)(L.S,{row:!0,gap:4,align:"center",children:[(0,f.Y)(iF.A,{}),(0,f.Y)(T.EY,{variant:"subheadDefault",multiline:!1,children:function(e){switch(e.type){case t8.uA.UNKNOWN_NOT_GIT:return"Unknown Error";case t8.uA.UNKNOWN:return"Unknown Git Error";case t8.uA.NOT_INITIALIZED:case t8.uA.UNAUTHENTICATED:case t8.uA.INDEX_FILE_CORRUPT:case t8.uA.UNKNOWN_REMOTE:case t8.uA.UNKNOWN_REF:case t8.uA.INDEX_LOCKED:case t8.uA.NO_COMMITS:case t8.uA.PATH_MATCHED_NO_FILES:case t8.uA.USER_NOT_CONFIGURED:case t8.uA.INVALID_REFERENCE:case t8.uA.BRANCH_ALREADY_EXISTS:case t8.uA.MERGE_CONFLICT:case t8.uA.HEAD_DETACHED:case t8.uA.DIRTY_WORKTREE:case t8.uA.PUSH_REJECTED:case t8.uA.PROTECTED_BRANCH:case t8.uA.REMOTE_ALREADY_EXISTS:case t8.uA.ALREADY_INITIALIZED:case t8.uA.TIMEOUT:case t8.uA.OBJECT_HAS_NO_NOTE:case t8.uA.NOTE_SUCCESSFULLY_REMOVED:case t8.uA.NOTE_SUCCESSFULLY_OVERWRITTEN:case t8.uA.OBJECT_ALREADY_HAS_NOTE:return"Git Error";default:return"Unknown Error"}}(n)})]}),(0,f.Y)(T.EY,{css:dC.errorType,multiline:!1,children:n.type})]}),(0,f.Y)(L.S,{css:dC.body,pt:4,pb:8,px:8,gap:8,children:(0,f.Y)(dx,{error:n})})]})}var dk=(0,V.x)({errorList:[{pointerEvents:"none"},{transition:"background-color 100ms"},j.wp.position.absolute,j.wp.top(0),j.wp.bottom(0),j.wp.left(0),j.wp.right(0),j.wp.p(8),j.wp.colWithGap(16),j.wp.zIndex(10)]});function dD(){var e=(0,eW.md)(dr,{store:dn()});return(0,f.Y)(L.S,{style:{backgroundColor:e.length>0?"rgba(0, 0, 0, 0.25)":"transparent"},css:dk.errorList,children:e.map(function(e){return(0,f.Y)(d_,{error:e},e.id)})})}function dE(){var e,n,t,r,i,o=(0,v._)((0,w.useState)(!1),2),a=o[0],l=o[1],s=(0,A.A)().git,c=(n=(e=(0,v._)((0,w.useState)(!1),2))[0],t=e[1],r=(0,A.A)().git,(0,w.useEffect)(function(){return r.onBusyChange(t)},[r]),n),u=di(),d=(0,t9.A)((i=(0,y._)(function(e){var n,t;return(0,b.YH)(this,function(r){switch(r.label){case 0:return[4,e.isInitialized()];case 1:if((n=r.sent()).error)return u(n.error),[2,n];if(!n.initialized)return[2,{hasRemotes:!1,error:null}];return[4,e.getRemotes()];case 2:if((t=r.sent()).error)return u(t.error),[2,t];return[2,{hasRemotes:t.remotes.size>0,error:null}]}})}),function(e){return i.apply(this,arguments)}),[u]);if(null==d?void 0:d.error)return null;var p=!!d&&d.hasRemotes,h=c||a||null===d;function m(){return(m=(0,y._)(function(){var e;return(0,b.YH)(this,function(n){switch(n.label){case 0:if(s.isBusy()||h)return[2];if(l(!0),!p)return[3,2];return[4,s.fetch()];case 1:(e=n.sent()).error?u(e.error):da("remote-fetched"),n.label=2;case 2:return[4,s.refreshProfiles()];case 3:return n.sent(),s.forceRefresh(),setTimeout(function(){return l(!1)},500),[2]}})})).apply(this,arguments)}return(0,f.Y)(eY.K0,{alt:p?"Refresh and Fetch":"Refresh",size:24,onClick:function(){return m.apply(this,arguments)},disabled:h,children:h?(0,f.Y)(to.A,{}):(0,f.Y)(om.A,{})})}var dR=t(20041),dI=t(81526),dF=L.D.button,dT=(0,V.x)({fullWidth:[j.wp.width("100%")],paddedX:[j.wp.px(8)],loadingContainer:[j.wp.display.flex,j.wp.align.center,j.wp.justify.center,j.wp.py(48)],menu:[j.wp.maxWidth(390),j.wp.width(280),j.wp.display.flex,j.wp.flex.shrink(1),j.wp.maxHeight(640),j.wp.borderRadius(8),j.wp.overflow("hidden")],form:[j.wp.display.flex,j.wp.flex.growAndShrink(1),j.wp.flex.column,j.wp.overflow("hidden")],body:[j.wp.py(8),j.wp.colWithGap(8),j.wp.flex.growAndShrink(1),j.wp.overflow("auto")],branchMetadata:[j.wp.flex.shrink(1)],selector:[j.wp.display.flex,j.wp.align.center,j.wp.rowWithGap(4)],menuItem:[{backgroundColor:"inherit"},i9.b.listItem,j.wp.px(8),j.wp.py(4),j.wp.borderRadius(0),j.wp.align.start],virtualItem:[j.wp.position.absolute,j.wp.top(0),j.wp.left(0),j.wp.width("100%"),j.wp.overflow("hidden")],virtualList:[j.wp.position.relative],divider:[j.wp.mt(8),j.wp.mb(8),j.wp.ml(0),j.wp.mr(0)],errorText:[j.wp.color.accentNegativeStronger,j.wp.mt(4)],createBranchButton:[j.wp.height(32),j.wp.overflow("hidden"),{whiteSpace:"nowrap",textOverflow:"ellipsis"}]}),dP=function(e,n){var t,r,i,o=di(),a=(0,A.A)().git,l=(0,v._)((0,w.useState)(!0),2),s=l[0],c=l[1],u=(0,t9.A)((t=(0,y._)(function(e){var n,t,r,i,a,l,s,u,d,p,f,h,m,g,v,w,y,S,Y,A,x;return(0,b.YH)(this,function(b){switch(b.label){case 0:return c(!0),[4,e.isInitialized()];case 1:if((n=b.sent()).error)return o(n.error),c(!1),[2,n];if(!n.initialized)return c(!1),[2,{active:[],stale:[],important:[],error:null}];return[4,e.listBranches()];case 2:if((t=b.sent()).error)return o(t.error),c(!1),[2,t];return[4,e.findDefaultBranches()];case 3:if((r=b.sent()).error)return o(r.error),c(!1),[2,r];i=t.branches,a=new Set,l=!0,s=!1,u=void 0;try{for(d=function(){var e=f.value,n=i.find(function(n){return(0,t8.CC)(n,e)});n&&a.add(n)},p=r.refs[Symbol.iterator]();!(l=(f=p.next()).done);l=!0)d()}catch(e){s=!0,u=e}finally{try{l||null==p.return||p.return()}finally{if(s)throw u}}h=Date.now()-72e6,m=[],g=[],v=!0,w=!1,y=void 0;try{for(S=i[Symbol.iterator]();!(v=(Y=S.next()).done);v=!0)A=Y.value,a.has(A)||(A.commit.author.date>h?m.push(A):g.push(A))}catch(e){w=!0,y=e}finally{try{v||null==S.return||S.return()}finally{if(w)throw y}}return x=Array.from(a),c(!1),[2,{active:m,stale:g,important:x,error:null}]}})}),function(e){return t.apply(this,arguments)}),[o]),d=(r=(0,y._)(function(n){var t;return(0,b.YH)(this,function(r){switch(r.label){case 0:if(s||(0,t8.CC)(e,n))return[2];return c(!0),[4,a.switchBranch(n)];case 1:return(t=r.sent()).error?(o(t.error),c(!1)):(a.forceRefresh(),da("branch-switched")),[2]}})}),function(e){return r.apply(this,arguments)}),p=(i=(0,y._)(function(e){var n;return(0,b.YH)(this,function(t){switch(t.label){case 0:if(s||""===e)return[2];return c(!0),[4,a.createBranch({name:e,checkout:!0})];case 1:return(n=t.sent()).error?(o(n.error),c(!1)):(a.forceRefresh(),da("branch-created")),[2]}})}),function(e){return i.apply(this,arguments)});if((0,w.useEffect)(function(){null!==e&&(c(!1),n({type:ln.C.CURRENT_BRANCH}))},[e,n]),null===u||s)return{loading:s,active:[],stale:[],important:[],handleSwitchBranch:d,handleCreateBranch:p,error:null};if(u.error)return{loading:s,active:[],stale:[],important:[],handleSwitchBranch:d,handleCreateBranch:p,error:u.error};var f=u.active,h=u.stale,m=u.important;return{loading:s,active:null!=f?f:[],stale:null!=h?h:[],important:null!=m?m:[],handleSwitchBranch:d,handleCreateBranch:p,error:null}},dL=function(e){var n=e.branch,t=dP(n,e.switchMode),r=t.loading,i=t.active,o=t.important,a=t.stale,l=t.handleSwitchBranch,s=t.handleCreateBranch,c=(0,v._)((0,w.useState)(!1),2),u=c[0],d=c[1],p=(0,v._)((0,w.useState)(""),2),h=p[0],m=p[1],g=(0,v._)((0,w.useState)(!1),2),S=g[0],Y=g[1];return(0,f.Y)(dG,{isOpen:u,setIsOpen:d,important:o,active:i,stale:a,current:n,query:h,setQuery:m,onSwitchBranch:l,createBranchLoading:S,createBranch:(0,y._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:return Y(!0),[4,s(h)];case 1:return e.sent(),m(""),Y(!1),[2]}})}),loading:r})},dU=function(e){var n=e.onClick,t=e.children,r=(0,w.useRef)(null),i=(0,v._)((0,sR.A9)(r,!1),4),o=i[0],a=i[1],l=i[2],s=i[3];return(0,sR.xK)(a,r),(0,f.Y)(dF,{ref:r,role:"menuitem",css:dT.menuItem,onClick:function(e){s(),n(e)},onKeyDown:l,tabIndex:o,children:t})},dN=function(e){var n=e.branch;return(0,f.FD)(L.S,{css:dT.branchMetadata,row:!0,gap:8,align:"center",children:[(0,f.Y)(dR.A,{name:n.commit.author.name,email:n.commit.author.email,color:"dimmer",allowPlaceholderAvatar:!0,placement:"top",showTooltip:!1,small:!0}),(0,f.Y)(T.EY,{color:"dimmer",variant:"small",children:(0,eg.ie)({date:n.commit.author.date})})]})},dO=function(e){var n=e.branch,t=e.current,r=e.onSwitchBranch,i=(0,w.useMemo)(function(){return(0,t8.FF)(n,t)},[n,t]);return(0,f.FD)(dU,{onClick:function(){return r(n)},children:[(0,f.Y)(T.EY,{multiline:!1,children:(0,f.Y)(aZ,{name:n.name,remote:n.type===t8.xx.REMOTE?n.remote:null,current:i})}),(0,f.Y)(dN,{branch:n})]})},dM=function(e,n){return n.filter(function(n){return(0,t8.fn)(n).toLowerCase().includes(e.toLowerCase())})},dB=function(e,n,t){var r=0,i=[];if(e.length+n.length+t.length===0)return i;if(e.length>0){i.push({key:"heading-important-".concat(r++),type:"heading",title:"Important"});for(var o=0;o<e.length;++o)i.push({key:"branch-important-".concat(r++),type:"branch",branch:e[o]});n.length+t.length>0&&i.push({key:"divider-important-".concat(r++),type:"divider"})}if(n.length>0){i.push({key:"heading-active-".concat(r++),type:"heading",title:"Active"});for(var a=0;a<n.length;++a)i.push({key:"branch-active-".concat(r++),type:"branch",branch:n[a]});t.length>0&&i.push({key:"divider-active-".concat(r++),type:"divider"})}if(t.length>0){i.push({key:"heading-stale-".concat(r++),type:"heading",title:"Stale"});for(var l=0;l<t.length;++l)i.push({key:"branch-stale-".concat(r++),type:"branch",branch:t[l]})}return i},dH=function(e){var n=e.item,t=e.current,r=e.onSwitchBranch;return"heading"===n.type?(0,f.Y)(L.S,{css:dT.paddedX,children:(0,f.Y)(T.EY,{multiline:!1,variant:"small",color:"dimmest",css:j.wp.fontWeight.medium,children:n.title})}):"divider"===n.type?(0,f.Y)(L.S,{css:dT.divider,children:(0,f.Y)(lF.a,{})}):(0,f.Y)(L.S,{children:(0,f.Y)(dO,{branch:n.branch,current:t,onSwitchBranch:r})})},dz=function(e){var n=e.items,t=e.current,r=e.onSwitchBranch,i=(0,w.useRef)(null),o=(0,ew.Te)({overscan:10,count:n.length,getScrollElement:function(){return i.current},estimateSize:function(e){var t,r;return null!=(t=void 0===(r=n[e])?0:"heading"===r.type?30:"branch"===r.type?65:"divider"===r.type?20:void 0)?t:0}});return(0,f.Y)(sR.Se,{options:{direction:"vertical"},children:(0,f.Y)("div",{css:dT.body,ref:i,children:(0,f.Y)("ul",{css:dT.virtualList,style:{height:"".concat(o.getTotalSize(),"px")},children:o.getVirtualItems().map(function(e){return(0,f.Y)("div",{css:dT.virtualItem,style:{transform:"translateY(".concat(e.start,"px)")},"data-index":e.index,ref:o.measureElement,children:(0,f.Y)(dH,{item:n[e.index],current:t,onSwitchBranch:r})},e.key.toString())})})})})},dW=function(e){var n=e.query,t=e.setQuery,r=e.filteredImportant,i=e.filteredActive,o=e.filteredStale,a=e.current,l=e.onSwitchBranch,s=e.createBranchLoading,c=e.createBranch,u=e.loading,d=(0,w.useMemo)(function(){return dB(r,i,o)},[r,i,o]),p='Create Branch "'.concat(n,'"'),h=(0,w.useMemo)(function(){return(0,X._)(r).concat((0,X._)(i),(0,X._)(o)).some(function(e){return e.name===n})},[n,r,i,o]);return(0,f.Y)(L.S,{css:dT.menu,children:(0,f.Y)("form",{onSubmit:function(e){e.preventDefault(),c()},css:dT.form,children:u?(0,f.Y)(L.S,{css:dT.loadingContainer,children:(0,f.Y)(to.A,{})}):(0,f.FD)(f.FK,{children:[(0,f.Y)(L.S,{p:8,children:(0,f.Y)(dI.I,{value:n,onChange:function(e){t(e.target.value)},onClear:function(){t("")},loading:!1,placeholder:"Find or create a branch..."})}),(0,f.Y)(L.S,{css:dT.paddedX,children:(0,f.Y)(lF.a,{})}),d.length>0?(0,f.Y)(dz,{items:d,current:a,onSwitchBranch:l}):null,h||""===n?null:(0,f.FD)(L.S,{p:8,children:[(0,f.Y)(eS.$n,{text:p,size:"small",iconLeft:s?(0,f.Y)(to.A,{}):(0,f.Y)(tT.A,{}),stretch:!0,css:dT.createBranchButton,disabled:s||!(0,t8.eB)(n),type:"submit"}),(0,t8.eB)(n)?null:(0,f.Y)(T.EY,{variant:"small",css:dT.errorText,multiline:!1,children:"Invalid branch name"})]})]})})})},dG=function(e){var n=e.isOpen,t=e.setIsOpen,r=e.important,i=e.active,o=e.stale,a=e.current,l=e.query,s=e.setQuery,c=e.onSwitchBranch,u=e.createBranchLoading,d=e.createBranch,p=e.loading,h=(0,w.useMemo)(function(){return dM(l,r)},[l,r]),m=(0,w.useMemo)(function(){return dM(l,i)},[l,i]),g=(0,w.useMemo)(function(){return dM(l,o)},[l,o]);return(0,f.FD)(am.Wv,{label:"View Branches",placement:"bottom",isOpen:n,onOpenChange:function(e){t(e)},offset:16,children:[function(e){var t=e.onClick,r=(0,tg._)(e,["onClick"]);return(0,f.Y)(eS.$n,{variant:"nofill",text:(0,f.FD)(T.EY,(0,nt._)((0,ee._)({multiline:!1,variant:"small",css:dT.selector},r),{children:[(0,f.Y)(aZ,{name:a.name,remote:a.type===t8.xx.REMOTE?a.remote:null,icon:!0}),n?(0,f.Y)(rY.A,{}):(0,f.Y)(rS.A,{})]})),size:"small",stretch:!0,alignment:"start",css:dT.fullWidth,onClick:t})},(0,f.Y)(dW,{query:l,setQuery:s,filteredImportant:h,filteredActive:m,filteredStale:g,current:a,onSwitchBranch:c,createBranchLoading:u,createBranch:d,loading:p})]})},dV=t(72395),dj=(0,V.x)({container:[j.wp.height(36),j.wp.px(8),j.wp.py(4),j.wp.rowWithGap(8),j.wp.backgroundColor.backgroundDefault,j.wp.align.center,j.wp.justify.spaceBetween,j.wp.zIndex(1),{borderBottom:"1px solid ".concat(k.LU.outlineDimmer)}],left:[j.wp.rowWithGap(4),j.wp.align.center,j.wp.flex.growAndShrink(1)],right:[j.wp.rowWithGap(8),j.wp.align.center],back:{marginLeft:-4}}),dZ=function(e){var n=e.openSettings;return(0,f.FD)(L.S,{css:dj.container,children:[(0,f.FD)(L.S,{css:dj.left,children:[(0,f.Y)(dV.A,{size:16}),(0,f.Y)(T.EY,{variant:"subheadDefault",multiline:!1,children:"Repository"})]}),(0,f.FD)(L.S,{css:dj.right,children:[(0,f.Y)(d0,{openSettings:n}),(0,f.Y)(dE,{})]})]})},dq=function(e){var n=e.branch,t=e.switchMode,r=e.openSettings;return(0,f.FD)(L.S,{css:dj.container,children:[(0,f.Y)(L.S,{css:dj.left,children:(0,f.Y)(dL,{branch:n,switchMode:t})}),(0,f.FD)(L.S,{css:dj.right,children:[(0,f.Y)(d0,{openSettings:r}),(0,f.Y)(dE,{})]})]})},dK=function(e){var n=e.onBack;return(0,f.FD)(L.S,{css:dj.container,children:[(0,f.FD)(L.S,{css:dj.left,children:[(0,f.Y)(dQ,{onBack:n,alt:"Back"}),(0,f.Y)(T.EY,{variant:"subheadDefault",multiline:!1,children:"Settings"})]}),(0,f.Y)(L.S,{css:dj.right})]})},d$=function(e){var n=e.switchMode,t=e.openSettings;return(0,f.FD)(L.S,{css:dj.container,children:[(0,f.FD)(L.S,{css:dj.left,children:[(0,f.Y)(dX,{switchMode:n}),(0,f.Y)(T.EY,{variant:"subheadDefault",multiline:!1,children:"Commit"})]}),(0,f.FD)(L.S,{css:dj.right,children:[(0,f.Y)(d0,{openSettings:t}),(0,f.Y)(dE,{})]})]})};function dJ(e){var n=e.mode,t=e.branch,r=e.switchMode,i=e.onBack,o=function(){return r({type:ln.C.SETTINGS})};switch(n){case ln.C.DASHBOARD:return(0,f.Y)(dZ,{openSettings:o});case ln.C.BRANCH:case ln.C.CURRENT_BRANCH:if(null===t)throw Error("Tried to show branch in header, but branch is null");return(0,f.Y)(dq,{branch:t,switchMode:r,openSettings:o});case ln.C.SETTINGS:return(0,f.Y)(dK,{onBack:i});case ln.C.COMMIT:return(0,f.Y)(d$,{switchMode:r,openSettings:o});default:return(0,f.FD)(L.S,{css:dj.container,children:[(0,f.Y)(L.S,{css:dj.left}),(0,f.Y)(L.S,{css:dj.right})]})}}function dQ(e){var n=e.onBack,t=e.alt;return(0,f.Y)(eY.K0,{css:dj.back,alt:t,size:28,onClick:n,children:(0,f.Y)(sb.A,{})})}function dX(e){var n=e.switchMode;return(0,f.Y)(dQ,{css:dj.back,onBack:function(){return n({type:ln.C.CURRENT_BRANCH})},alt:"Back to current branch"})}function d0(e){var n=e.openSettings;return(0,f.Y)(eY.K0,{alt:"Settings",size:24,onClick:n,children:(0,f.Y)(oI.A,{})})}function d1(){return(0,f.FD)(L.S,{children:[(0,f.Y)(T.EY,{multiline:!1,children:"Unsupported state: you are applying a mailbox patch."}),(0,f.Y)(T.EY,{multiline:!1,children:"Please finish the patch manually."})]})}function d2(){return(0,f.FD)(L.S,{children:[(0,f.Y)(T.EY,{multiline:!1,children:"Unsupported state: you are in the middle of a bisect."}),(0,f.Y)(T.EY,{multiline:!1,children:"Please finish the bisect manually."})]})}function d4(){var e=(0,en._)(["\n  query PushBranchButtonIsProjectRepl($id: String!) {\n    repl(id: $id) {\n      __typename\n      ... on Repl {\n        id\n        project {\n          id\n        }\n      }\n    }\n  }\n"]);return d4=function(){return e},e}var d5={},d3=(0,et.J1)(d4()),d6=function(e){return"repl-".concat(e)},d8=function(e){var n=e.replId,t=e.branch;return"repl-".concat(n,"/").concat(t)},d7=function(){var e=(0,y._)(function(e){var n,t,r,i,o,a,l,s;return(0,b.YH)(this,function(c){switch(c.label){case 0:return n=e.git,r=d6(t=e.replId),i="".concat(t,"@ssh.v1.replit.dev:."),[4,n.getRemotes()];case 1:if((o=c.sent()).error)return[2,o];if(!o.remotes.has(r))return[3,4];if((null==(a=o.remotes.get(r))?void 0:a.fetch)===i)return[3,3];return[4,n.setRemoteURL({remote:r,url:i})];case 2:if((l=c.sent()).error)return[2,l];c.label=3;case 3:return[2,{error:null,remote:{name:r,url:i}}];case 4:return[4,n.addRemote({name:r,url:i,fetch:!0})];case 5:if((s=c.sent()).error&&s.error!==t8.uA.REMOTE_ALREADY_EXISTS)return[2,s];return[2,{error:null,remote:{name:r,url:i}}]}})});return function(n){return e.apply(this,arguments)}}(),d9=t(66525),pe=(0,V.x)({statusText:[j.wp.display.flex,j.wp.flex.row,j.wp.textAlign.left],settingsButton:[j.wp.reset.button,j.wp.linkStyle,j.wp.fontWeight.medium,j.wp.textAlign.left,j.wp.ml(4)]}),pn=function(e){var n=e.onViewSettingsClick;return(0,f.Y)("button",{css:pe.settingsButton,onClick:n,children:"Settings view."})};function pt(e){var n,t,r,i,o,a,l=e.branch,s=e.onViewSettingsClick,c=e.performPaneOperation,u=(0,v._)((0,w.useState)(!1),2),d=u[0],p=u[1],h=(0,v._)((0,w.useState)(!1),2),m=h[0],g=h[1],S=(0,v._)((0,w.useState)(null),2),Y=S[0],x=S[1],C=(0,v._)((0,w.useState)(!1),2),_=C[0],k=C[1],D=(n={variables:{id:(0,nI.A)()}},t=(0,ee._)({},d5,n),er.I(d3,t)).data,E=(null==D||null==(i=D.repl)?void 0:i.__typename)==="Repl"&&(null==(o=D.repl.project)?void 0:o.id)||!1,R=di(),F=(0,A.A)().git,P=(0,t9.A)((r=(0,y._)(function(e){var n,t,r,i,o,a,l;return(0,b.YH)(this,function(s){switch(s.label){case 0:return[4,e.isInitialized()];case 1:if((n=s.sent()).error)return R(n.error),rn({context:"publish-branch-button-initialized",gitService:e,result:n}),[2,{remote:null,error:n.error}];if(!n.initialized)return[2,{remote:null,error:null}];return[4,e.getRemotes()];case 2:if((t=s.sent()).error)return rn({context:"publish-branch-button-get-remotes",gitService:e,result:t}),R(t.error),[2,t];return r=function(e){if(!e||!e.size)return null;if(e.has("origin"))return"origin";var n=!0,t=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=(0,v._)(i.value,2),l=a[0];if(!({url:a[1].fetch}).url.endsWith(".replit.dev:."))return l}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}return null}(t.remotes),[4,e.status()];case 3:if((i=s.sent()).error)return R(i.error),rn({context:"publish-branch-button-status",gitService:e,result:i}),[2,i];if(!(i.branch&&r))return[3,5];return o=(0,t8.w9)(i.branch),a="refs/remotes/".concat(r,"/").concat(o),[4,e.branchExists(a)];case 4:(l=s.sent()).error?(rn({context:"publish-branch-button-branch-exists",gitService:e,result:l,data:{upstream:o,fullRemoteRef:a}}),R(l.error)):l.exists&&x("".concat(r,"/").concat(o)),s.label=5;case 5:return[2,{remote:r,error:null}]}})}),function(e){return r.apply(this,arguments)}),[R],{keepStaleResult:!1});if((0,w.useEffect)(function(){function e(){return(e=(0,y._)(function(){var e;return(0,b.YH)(this,function(n){switch(n.label){case 0:if(!(_&&Y))return[3,2];return[4,F.setBranchUpstream({upstream:Y})];case 1:(e=n.sent()).error&&(rn({context:"publish-branch-button-set-branch-upstream",gitService:F,result:e,data:{upstream:Y}}),R(e.error)),k(!1),x(null),n.label=2;case 2:return[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[F,R,_,Y]),null==P?void 0:P.error)return null;var U=P?P.remote:null,N=null===P,O=l.type!==t8.xx.LOCAL||!U||_;function M(){return(M=(0,y._)(function(){var e;return(0,b.YH)(this,function(n){switch(n.label){case 0:if(!U||d)return[2];if(Y)return g(!0),[2];return p(!0),[4,F.push({publish:{remote:U}})];case 1:return(e=n.sent()).error?(p(!1),R(e.error),rn({context:"publish-branch-button-push",gitService:F,result:e,data:{remote:U}})):(F.forceRefresh(),da("branch-published-to-remote")),[2]}})})).apply(this,arguments)}var B="".concat(U,"/").concat(l.name);return(a=d?"Pushing to '".concat(B,"'..."):l.type!==t8.xx.LOCAL?"Branch has already been pushed to '".concat(B,"'"):N?"Checking if branch ".concat(l.name," can be pushed..."):U?"Push branch as '".concat(B,"'"):"No remotes to push to",E&&P&&!U)?(0,f.FD)(f.FK,{children:[(0,f.Y)(eS.$n,{iconLeft:(0,f.Y)(I.a,{text:"Beta",variant:"outline",colorway:"blue"}),text:"Collaborate in the Project pane",onClick:function(){c({operation:"open",pane:{type:"project"}})},iconRight:(0,f.Y)(oL.A,{})}),(0,f.Y)(T.EY,{color:"dimmer",children:"Use the Project pane to merge your changes between repls and collaborate with your teammates. You've received early access to this feature with your Replit Teams subscription."})]}):(0,f.FD)(f.FK,{children:[Y?(0,f.Y)(aX.a,{isOpen:m,onRequestClose:function(){return g(!1)},children:(0,f.FD)(L.S,{gap:24,children:[(0,f.Y)(T.EY,{variant:"headerDefault",children:"Branch already exists"}),(0,f.Y)(T.EY,{children:"Upstream branch '".concat(Y,"' already exists.\n          To push the branch, please confirm you would like to set upstream branch to it.")}),(0,f.Y)(eS.$n,{text:"Set upstream to '".concat(Y,"'"),onClick:function(){Y&&(k(!0),g(!1))}})]})}):null,N||U?null:(0,f.Y)(iI.N,{text:(0,f.Y)(L.S,{css:pe.statusText,children:(0,f.FD)("span",{children:["No remote repositories configured. To push your changes, add a remote repository in the",(0,f.Y)(pn,{onViewSettingsClick:s})]})}),colorway:"warning",closable:!1}),(0,f.Y)(eS.$n,{text:a,iconLeft:N||d?(0,f.Y)(to.A,{}):(0,f.Y)(d9.A,{}),onClick:function(){return M.apply(this,arguments)},loading:N||d,disabled:O})]})}var pr=function(e,n,t){var r=new Set,i=!0,o=!1,a=void 0;try{for(var l,s=n[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=l.value;r.add(c.hash)}}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}var u=!0,d=!1,p=void 0;try{for(var f,h=t[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var m=f.value;r.add(m.hash)}}catch(e){d=!0,p=e}finally{try{u||null==h.return||h.return()}finally{if(d)throw p}}return e.filter(function(e){return!r.has(e.hash)})},pi=t(56902),po=t(5126),pa=t(54534),pl=t(60632),ps=t(29531),pc={height:32,width:"100%",resize:"none",border:"none"},pu={width:"100%",resize:"none",border:"none"},pd=(0,V.x)({surface:[j.wp.borderRadius(0,0,8,8)],button:[j.wp.height("auto"),j.wp.py(8),j.wp.fontWeight.medium,j.wp.borderRadius(8,8,0,0),j.wp.justify.start,j.wp.border({color:k.LU.outlineDimmer,direction:"bottom"}),{"> span:first-child":{flexGrow:1,textAlign:"start"}}],requiredText:[j.wp.display.inlineFlex,j.wp.rowWithGap(4)],subjectFieldHeader:[j.wp.center,j.wp.justify.spaceBetween],subjectInput:pc,bodyInput:pu,subjectInputDisabled:[pc,{opacity:.5}],bodyInputDisabled:[pu,{opacity:.5}],required:[j.wp.color.accentNegativeStronger],keyCombo:[j.wp.display.inlineFlex,j.wp.rowWithGap(4),j.wp.flex.grow(1),j.wp.align.center],keyComboText:[j.wp.fontWeight.normal,j.wp.color.foregroundDimmest]});function pp(e){var n=e.message,t=e.disabled,r=void 0!==t&&t,i=e.onMessageChange,o=e.onCommitShortcut,a=(0,v._)((0,w.useState)(!0),2),l=a[0],s=a[1],c=(0,v._)((0,w.useState)(!1),2),u=c[0],d=c[1],p=(0,v._)((0,w.useState)(!1),2),h=p[0],m=p[1],g=(0,w.useRef)(null),y=(0,w.useRef)(null),b=(0,pi._)(n.split("\n\n")),S=b[0],Y=void 0===S?"":S,A=b.slice(1).join("\n\n"),x=(0,cF.a)();function C(e,n){i((e=e.replaceAll("\n"," "))+(n?"\n\n"+n:""))}var _=(0,pl.Jn)(pa.Pi.gitCommit.id);return(0,ps.RD)(pa.cl,h),(0,pl.SJ)(function(){return[pa.Pi.gitCommit.id,{run:function(){null==o||o()},scope:pa.cl,bubble:!1}]},[o]),(0,f.FD)(L.S,{children:[(0,f.Y)(eS.$n,{css:pd.button,text:(0,f.FD)("span",{css:pd.requiredText,children:[(0,f.Y)("span",{children:"Message"}),l?(0,f.Y)(pm,{}):null]}),secondaryText:x||!_?void 0:(0,f.FD)("span",{css:pd.keyCombo,children:[(0,f.Y)("span",{css:pd.keyComboText,children:"Commit:"}),(0,f.Y)(pl._y,{keyCombo:_,small:!0})]}),iconRight:l?(0,f.Y)(rS.A,{}):(0,f.Y)(rY.A,{}),onClick:function(){return s(function(e){return!e})},size:"small"}),(0,f.FD)(eu.ui,{css:pd.surface,p:8,gap:12,elevated:!0,children:[(0,f.Y)(pf,{ref:g,value:Y,compact:l,disabled:r,onChange:function(e){C(e,A)},onNewline:function(){if(l)s(!1),d(!0);else{if(!y.current)return;y.current.focus(),y.current.setSelectionRange(0,0)}},onFocus:function(){m(!0)},onBlur:function(){m(!1)}}),l&&!A?null:(0,f.Y)(ph,{ref:y,value:A,compact:l,disabled:r,onChange:function(e){if(C(Y,e),l&&!e){var n;null==(n=g.current)||n.focus()}else l&&s(!1)},onBackspaceWhenEmpty:function(){g.current&&g.current.focus()},onFocus:function(){u&&d(!1),m(!0)},onBlur:function(){m(!1)},autoFocus:u})]})]})}var pf=(0,w.forwardRef)(function(e,n){var t=e.value,r=e.compact,i=void 0!==r&&r,o=e.disabled,a=void 0!==o&&o,l=e.onChange,s=e.onNewline,c=e.onFocus,u=e.onBlur,d=(0,w.useRef)(null),p=(0,po.A)().ref,h=(0,l_.S)([n,p,d],{breadcrumb:"client/workspace/components/Git/modified/CommitMessage.tsx:267"});return(0,f.FD)(L.S,{gap:8,children:[i?null:(0,f.Y)(L.S,{css:pd.subjectFieldHeader,row:!0,children:(0,f.Y)(T.EY,{variant:"small",color:"dimmer",multiline:!1,children:(0,f.FD)("span",{css:pd.requiredText,children:[(0,f.Y)("span",{children:"Summary"}),(0,f.Y)(pm,{})]})})}),(0,f.Y)(eA.ov,{ref:i?n:h,css:a?pd.subjectInputDisabled:pd.subjectInput,placeholder:"Summary of your commit...",value:t,disabled:a,onChange:function(e){return null==l?void 0:l(e.currentTarget.value)},onKeyDown:function(e){"Enter"!==e.key||e.defaultPrevented||(e.preventDefault(),e.stopPropagation(),null==s||s())},onFocus:c,onBlur:u})]})}),ph=(0,w.forwardRef)(function(e,n){var t=e.value,r=e.compact,i=void 0!==r&&r,o=e.disabled,a=void 0!==o&&o,l=e.autoFocus,s=e.onChange,c=e.onBackspaceWhenEmpty,u=e.onFocus,d=e.onBlur,p=(0,po.A)().ref,h=(0,l_.S)([n,p],{breadcrumb:"client/workspace/components/Git/modified/CommitMessage.tsx:335"});return(0,f.FD)(L.S,{gap:8,children:[i?null:(0,f.Y)(T.EY,{variant:"small",color:"dimmer",multiline:!1,children:"Description"}),(0,f.Y)(eA.ov,{ref:i?n:h,css:a?pd.bodyInputDisabled:pd.bodyInput,placeholder:"Description of your commit...",value:t,disabled:a,onChange:function(e){return null==s?void 0:s(e.currentTarget.value)},onKeyDown:function(e){"Backspace"===e.key&&""===t&&(e.preventDefault(),e.stopPropagation(),null==c||c())},onFocus:u,onBlur:d,autoFocus:void 0!==l&&l})]})});function pm(){return(0,f.Y)(P.m_,{tooltip:"This field is required.",placement:"top",children:(0,f.Y)("span",{css:pd.required,children:"*"})})}var pg=t(47718),pv=t(29383),pw=t(79398),py=(0,V.x)({actionsIndex:[j.wp.height(24),j.wp.align.center,j.wp.borderRadius(4)],actionsWorktree:[j.wp.height(24),j.wp.flex.row,j.wp.align.center,j.wp.borderRadius(4)],unstage:[j.wp.height(24),j.wp.width(24),j.wp.borderRadius(2)],stage:[j.wp.px(12),j.wp.height(24),j.wp.width(24),j.wp.borderRadius(2)],discard:[j.wp.pl(16),j.wp.pr(12),j.wp.height(24),j.wp.width(24),j.wp.borderRadius(2)],discardIcon:{transform:"scale(0.85)"},divider:[j.wp.height("75%"),j.wp.width(1),j.wp.backgroundColor.outlineStronger]});function pb(e){var n=e.file,t=e.list,r=e.stageFiles,i=e.restoreFiles,o=e.disabled,a=void 0!==o&&o,l=(0,v._)((0,w.useState)(!1),2),s=l[0],c=l[1],u=(0,v._)((0,w.useState)(!1),2),d=u[0],p=u[1];function h(){return(h=(0,y._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:if(a)return[2];return c(!0),[4,r({reset:[n.path]})];case 1:return e.sent(),c(!1),[2]}})})).apply(this,arguments)}function m(){return(m=(0,y._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:if(a)return[2];return c(!0),[4,r({add:[n.path]})];case 1:return e.sent(),c(!1),[2]}})})).apply(this,arguments)}function g(){return(g=(0,y._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:if(a||"worktree"!==t)return[2];return p(!0),[4,i(n.path)];case 1:return e.sent(),p(!1),[2]}})})).apply(this,arguments)}return a=a||d||s,"index"===t?(0,f.Y)(eu.ui,{elevated:!0,css:py.actionsIndex,children:(0,f.Y)(eY.K0,{css:py.unstage,alt:"Unstage changes",size:18,tooltipDelay:"long",onClick:function(){return h.apply(this,arguments)},disabled:a,children:s?(0,f.Y)(to.A,{}):(0,f.Y)(pw.A,{})})}):(0,f.FD)(eu.ui,{elevated:!0,css:py.actionsWorktree,children:[(0,f.Y)(eY.K0,{css:py.discard,alt:"Discard changes",size:18,tooltipDelay:"long",onClick:function(){return g.apply(this,arguments)},disabled:a,children:d?(0,f.Y)(to.A,{}):(0,f.Y)(oe.A,{css:py.discardIcon})}),(0,f.Y)("div",{css:py.divider}),(0,f.Y)(eY.K0,{css:py.stage,alt:"Stage changes",size:18,tooltipDelay:"long",onClick:function(){return m.apply(this,arguments)},disabled:a,children:s?(0,f.Y)(to.A,{}):(0,f.Y)(tT.A,{})})]})}function pS(e){var n,t=e.file,r=e.list,i=e.stageFiles,o=e.restoreFiles,a=e.pathMap,l=e.disabled,s=e.onFilePathClick,c=null==a?void 0:a.get(t.path),u=null==(n=t.source)?void 0:n.path,d="index"===r?t.type.index:t.type.worktree,p=(0,pv.A)(function(){if(d!==t8.PX.DELETED)return function(){return s({path:t.path})}},[t.path,s,d]);return(0,f.FD)(L.S,{py:2,row:!0,gap:4,align:"center",children:[(0,f.Y)(aQ,{path:t.path,prefix:c,source:u,onClick:p}),(0,f.Y)(rg,{type:d}),(0,f.Y)(pb,{file:t,list:r,stageFiles:i,restoreFiles:o,disabled:void 0!==l&&l})]})}var pY=(0,V.x)({actions:[j.wp.backgroundColor.backgroundHighest,j.wp.borderRadius(8)],buttonDiscard:[j.wp.borderRadius(8,0,0,8)],buttonStage:[j.wp.borderRadius(0,8,8,0)],divider:[j.wp.my(8),j.wp.width(1),j.wp.backgroundColor.outlineStronger]});function pA(e){var n=e.type,t=e.stageFiles,r=e.restoreFiles,i=e.disabled,o=void 0!==i&&i,a=(0,v._)((0,w.useState)(!1),2),l=a[0],s=a[1],c=(0,v._)((0,w.useState)(!1),2),u=c[0],d=c[1];function p(){return h.apply(this,arguments)}function h(){return(h=(0,y._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:if(o)return[2];return s(!0),[4,t({all:"index"!==n})];case 1:return e.sent(),s(!1),[2]}})})).apply(this,arguments)}function m(){return(m=(0,y._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:if(o||"worktree"!==n)return[2];return d(!0),[4,r(!0)];case 1:return e.sent(),d(!1),[2]}})})).apply(this,arguments)}return o=o||u||l,"index"===n?(0,f.Y)(eS.$n,{text:"Unstage All",iconLeft:l?(0,f.Y)(to.A,{}):(0,f.Y)(pw.A,{}),onClick:p,disabled:o,loading:l,size:"small"}):(0,f.FD)(L.S,{css:pY.actions,row:!0,gap:2,children:[(0,f.Y)(eS.$n,{css:pY.buttonDiscard,text:"Discard All",iconLeft:u?(0,f.Y)(to.A,{}):(0,f.Y)(oe.A,{}),onClick:function(){return m.apply(this,arguments)},disabled:o,loading:u,size:"small"}),(0,f.Y)("div",{css:pY.divider}),(0,f.Y)(eS.$n,{css:pY.buttonStage,text:"Stage All",iconLeft:l?(0,f.Y)(to.A,{}):(0,f.Y)(tT.A,{}),onClick:p,disabled:o,loading:l,size:"small"})]})}var px=(0,V.x)({header:[j.wp.px(8),j.wp.rowWithGap(4),j.wp.align.center],headerFoldable:[j.wp.py(4),j.wp.pl(4),j.wp.pr(8),j.wp.rowWithGap(4),j.wp.align.center],headerText:[j.wp.flex.grow(1)],body:[j.wp.px(8),j.wp.maxHeight("25vh"),j.wp.overflowY("auto")]});function pC(e){var n,t=e.files,r=e.type,i=e.stageFiles,o=e.restoreFiles,a=e.onFilePathClick,l=e.pathMap,s=e.foldable,c=void 0!==s&&s,u=e.disabled,d=void 0!==u&&u,p=(0,v._)((0,w.useState)(!1),2),h=p[0],m=p[1],g=(0,w.useRef)(null),y=(0,w.useRef)(null),b=(0,ew.Te)({count:t.length,getScrollElement:function(){return y.current},getItemKey:function(e){return t[e].path},estimateSize:function(){return 28},overscan:20}),S=b.getVirtualItems();return c&&h?(0,f.Y)(L.S,{py:4,children:(0,f.FD)(L.S,{css:c?px.headerFoldable:px.header,children:[(0,f.Y)(p_,{files:t,type:r,setFolded:m,foldable:!0,folded:!0}),(0,f.Y)(pA,{type:r,stageFiles:i,restoreFiles:o,disabled:d})]})}):(0,f.FD)(L.S,{innerRef:g,pt:4,pb:8,gap:4,children:[(0,f.FD)(L.S,{css:c?px.headerFoldable:px.header,children:[(0,f.Y)(p_,{files:t,type:r,setFolded:m,foldable:c}),(0,f.Y)(pA,{type:r,stageFiles:i,restoreFiles:o,disabled:d})]}),(0,f.Y)(L.D.div,{ref:y,css:px.body,children:(0,f.Y)("div",{style:{minHeight:b.getTotalSize()},children:(0,f.Y)("div",{style:{transform:"translateY(".concat(null==(n=S[0])?void 0:n.start,"px)"),willChange:"transform"},children:S.map(function(e){var n=t[e.index];return(0,f.Y)("div",{"data-index":e.index,children:(0,f.Y)(pS,{file:n,list:r,stageFiles:i,restoreFiles:o,onFilePathClick:a,pathMap:l,disabled:d},n.path)},e.key.toString())})})})})]})}function p_(e){var n=e.files,t=e.type,r=e.setFolded,i=e.foldable,o=void 0!==i&&i,a=e.folded,l=(0,i8.A)("file",n.length),s="".concat(n.length," ").concat("index"===t?"staged":"changed"," ").concat(l);return o&&void 0!==a&&a?(0,f.FD)(f.FK,{children:[(0,f.Y)(eY.K0,{alt:"Show list",onClick:function(){return r(!1)},children:(0,f.Y)(rS.A,{})}),(0,f.Y)(T.EY,{css:px.headerText,multiline:!1,children:s})]}):(0,f.FD)(f.FK,{children:[o?(0,f.Y)(eY.K0,{alt:"Hide list",onClick:function(){return r(!0)},children:(0,f.Y)(rY.A,{color:k.LU.foregroundDimmest})}):null,(0,f.Y)(T.EY,{css:px.headerText,color:"dimmest",multiline:!1,children:s})]})}var pk=(0,V.x)({list:[j.wp.px(4),j.wp.colWithGap(2)]});function pD(e){var n=e.show,t=e.files,r=e.pathMap,i=e.callback,o=(0,e0.A)(i),a=(0,w.useCallback)(function(){var e;null==(e=o.current)||e.call(o,!0)},[o]),l=(0,w.useCallback)(function(){var e;null==(e=o.current)||e.call(o,!1)},[o]);return(0,f.Y)(aX.a,{isOpen:n,onRequestClose:l,children:n?(0,f.FD)(L.S,{gap:8,children:[(0,f.FD)(T.Y9,{level:2,children:["Discard ",(0,i8.A)("Change",t.length)]}),(0,f.Y)(pE,{files:t,pathMap:r}),(0,f.FD)(L.S,{row:!0,gap:8,justify:"end",children:[(0,f.Y)(eS.$n,{text:"Cancel",iconLeft:(0,f.Y)(a0.A,{}),onClick:l}),(0,f.Y)(eS.$n,{text:"Discard ".concat((0,i8.A)("Change",t.length)),iconLeft:(0,f.Y)(oe.A,{}),colorway:"negative",onClick:a})]})]}):null})}function pE(e){var n=e.files,t=e.pathMap,r=[],i=[],o=!0,a=!1,l=void 0;try{for(var s,c=n[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var u=s.value;u.type.worktree===t8.PX.UNTRACKED?i.push(u):r.push(u)}}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}return!r.length&&i.length?(0,f.FD)(L.S,{gap:4,children:[(0,f.Y)(T.EY,{children:1===i.length?"Do you want to permanently delete this file?":"Do you want to permanently delete these files?"}),(0,f.Y)(pR,{files:i,pathMap:t})]}):r.length&&!i.length?(0,f.FD)(L.S,{gap:4,children:[(0,f.Y)(T.EY,{children:1===r.length?"Do you want to undo the changes to this file?":"Do you want to undo the changes to these files?"}),(0,f.Y)(pR,{files:r,pathMap:t})]}):(0,f.FD)(L.S,{gap:12,children:[r.length?(0,f.FD)(L.S,{gap:4,children:[(0,f.FD)(T.Y9,{level:3,children:["Tracked ",(0,i8.A)("File",r.length)]}),(0,f.Y)(T.EY,{multiline:!1,children:1===r.length?"This file will have its changes undone.":"These files will have their changes undone."}),(0,f.Y)(pR,{files:r,pathMap:t})]}):null,i.length?(0,f.FD)(L.S,{gap:4,children:[(0,f.FD)(T.Y9,{level:3,children:["Untracked ",(0,i8.A)("File",i.length)]}),(0,f.Y)(T.EY,{multiline:!1,children:1===i.length?"This file will be permanently deleted.":"These files will be permanently deleted."}),(0,f.Y)(pR,{files:i,pathMap:t})]}):null]})}function pR(e){var n=e.files,t=e.pathMap,r=(0,w.useMemo)(function(){return n.length>20?n.slice(0,20):n},[n]);return(0,f.Y)(L.S,{children:(0,f.FD)("ul",{css:pk.list,children:[r.map(function(e){var n;return(0,f.Y)("li",{children:(0,f.Y)(aQ,{path:e.path,prefix:t.get(e.path),source:null==(n=e.source)?void 0:n.path})},e.path)}),n.length<=20?null:(0,f.Y)("li",{children:(0,f.FD)(T.EY,{color:"dimmer",children:["... ",n.length-20," more"," ",(0,i8.A)("file",n.length-20)]})})]})})}function pI(e){var n=(0,v._)((0,w.useState)(function(){return{show:!1,files:[]}}),2),t=n[0],r=n[1];return{openRestoreConfirmationModal:(0,w.useCallback)(function(e){return new Promise(function(n){0===e.length&&n(!1),r({show:!0,files:e,callback:function(e){r({show:!1,files:[],callback:void 0}),n(e)}})})},[]),restoreConfirmationModal:(0,w.useMemo)(function(){return(0,f.Y)(pD,(0,nt._)((0,ee._)({},t),{pathMap:e}))},[t,e])}}var pF=[{"& > span:first-child":[j.wp.flex.grow(1),j.wp.textAlign.left]},{"& > span":[j.wp.flex.shrink(1)]}],pT=(0,V.x)({buttonFolded:[pF,j.wp.height("auto"),j.wp.py(8),j.wp.fontWeight.medium],buttonUnfolded:[pF,j.wp.height("auto"),j.wp.py(8),j.wp.fontWeight.medium,j.wp.border({color:k.LU.outlineDimmer,direction:"bottom"}),j.wp.borderRadius(8,8,0,0)],container:[j.wp.flex.grow(1),j.wp.borderRadius(8)],lists:[j.wp.borderRadius(0,0,8,8)],divider:[j.wp.height(1),j.wp.minHeight(1),j.wp.width("100%"),j.wp.backgroundColor.outlineDimmer],autoStageMessage:[j.wp.center],noChangesMessage:[j.wp.center],details:[j.wp.rowWithGap(4),j.wp.fontWeight.normal,j.wp.color.foregroundDimmest]});function pP(e){var n,t,r=e.status,i=e.stageFiles,o=e.restoreFiles,a=e.onStagedFileClick,l=e.disabled,s=void 0!==l&&l,c=(0,v._)((0,w.useState)(!1),2),u=c[0],d=c[1],p=(0,v._)((0,w.useState)(!1),2),h=p[0],m=p[1],g=(0,v._)((0,w.useState)(!1),2),S=g[0],Y=g[1],A=(0,w.useMemo)(function(){return(0,pg.b)(r.changes.map(function(e){return e.path}))},[r]),x=(0,v._)((0,w.useMemo)(function(){var e=[],n=[],t=!0,i=!1,o=void 0;try{for(var a,l=r.changes[Symbol.iterator]();!(t=(a=l.next()).done);t=!0){var s=a.value;s.staged&&e.push(s),s.type.worktree!==t8.PX.UNMODIFIED&&n.push(s)}}catch(e){i=!0,o=e}finally{try{t||null==l.return||l.return()}finally{if(i)throw o}}return[e,n]},[r.changes]),2),C=x[0],_=x[1],k=C.length>0&&_.length>0,D=pI(A),E=D.openRestoreConfirmationModal,R=D.restoreConfirmationModal,I=(0,w.useCallback)((n=(0,y._)(function(e){return(0,b.YH)(this,function(n){switch(n.label){case 0:if(!("all"in e))return[3,2];return m(!0),[4,i(e)];case 1:return n.sent(),m(!1),[3,4];case 2:return[4,i(e)];case 3:n.sent(),n.label=4;case 4:return[2]}})}),function(e){return n.apply(this,arguments)}),[i]),F=(0,w.useCallback)((t=(0,y._)(function(e){var n,t;return(0,b.YH)(this,function(r){switch(r.label){case 0:if(!0!==e)return[3,4];return Y(!0),[4,E(_)];case 1:if(!r.sent())return[3,3];return[4,o(e)];case 2:r.sent(),r.label=3;case 3:return Y(!1),[3,8];case 4:if("string"==typeof e){if(!(t=_.find(function(n){return n.path===e})))throw Y(!1),Error("Could not find file in worktree list");n=[t]}else n=_.filter(function(n){return e.includes(n.path)});return[4,E(n)];case 5:if(!r.sent())return[3,7];return[4,o(e)];case 6:r.sent(),r.label=7;case 7:Y(!1),r.label=8;case 8:return[2]}})}),function(e){return t.apply(this,arguments)}),[E,o,_]);return u?(0,f.Y)(pL,{setFolded:d,changeCount:_.length,stagedCount:C.length,disabled:s,folded:!0}):0===C.length&&0===_.length?(0,f.FD)(L.S,{style:{opacity:s?.725:void 0},css:pT.container,children:[(0,f.Y)(pL,{setFolded:d,changeCount:_.length,stagedCount:C.length,disabled:s}),(0,f.Y)(eu.ui,{css:pT.lists,elevated:!0,children:(0,f.Y)(L.S,{css:pT.noChangesMessage,py:16,px:4,children:(0,f.Y)(T.EY,{color:"dimmest",multiline:!1,children:"No changed or staged files."})})})]}):(0,f.FD)(f.FK,{children:[(0,f.FD)(L.S,{style:{opacity:s?.725:void 0},css:pT.container,children:[(0,f.Y)(pL,{setFolded:d,changeCount:_.length,stagedCount:C.length,disabled:s}),(0,f.FD)(eu.ui,{css:pT.lists,elevated:!0,children:[0===C.length?null:(0,f.Y)(pC,{type:"index",files:C,stageFiles:I,restoreFiles:F,onFilePathClick:a,pathMap:A,foldable:k,disabled:s||h||S}),k?(0,f.Y)("div",{css:pT.divider}):null,0===_.length?null:(0,f.FD)(f.FK,{children:[(0,f.Y)(pC,{type:"worktree",files:_,stageFiles:I,restoreFiles:F,onFilePathClick:a,pathMap:A,foldable:k,disabled:s||h||S}),k?null:(0,f.Y)(L.S,{css:pT.autoStageMessage,pt:4,pb:8,px:4,children:(0,f.Y)(T.EY,{variant:"small",color:"dimmest",multiline:!1,children:"Committing will automatically stage your changes."})})]})]})]}),R]})}function pL(e){var n=e.folded,t=void 0!==n&&n,r=e.setFolded,i=e.changeCount,o=e.stagedCount,a=e.disabled;return(0,f.Y)(eS.$n,{css:t?pT.buttonFolded:pT.buttonUnfolded,text:"Review Changes",secondaryText:(0,f.Y)(pU,{folded:t,changeCount:i,stagedCount:o}),onClick:function(){return r(!t)},iconRight:t?(0,f.Y)(rS.A,{}):(0,f.Y)(rY.A,{}),disabled:void 0!==a&&a,size:"small"})}function pU(e){var n=e.folded,t=e.changeCount,r=e.stagedCount;if(!n)return null;var i=t>0,o=r>0;return i||o?(0,f.FD)("span",{css:pT.details,children:[i?(0,f.FD)("span",{children:[t," ",(0,i8.A)("change",t)]}):null,i&&o?(0,f.Y)("span",{children:"/"}):null,o?(0,f.FD)("span",{children:[r," staged"]}):null]}):(0,f.Y)("span",{css:pT.details,children:(0,f.Y)("span",{children:"no changes"})})}function pN(e){var n=e.status,t=e.onStagedFileClick,r=e.defaultMessage,i=(0,v._)((0,w.useState)(n),2),o=i[0],a=i[1],l=(0,v._)((0,w.useState)(null!=r?r:""),2),s=l[0],c=l[1],u=(0,v._)((0,w.useState)(0),2),d=u[0],p=u[1],h=(0,v._)((0,w.useState)(!1),2),m=h[0],g=h[1],S=di();(0,w.useEffect)(function(){return a(n)},[n]);var Y=(0,A.A)().git;if(!o||!o.changes.length)return(0,f.Y)(L.S,{gap:8,children:(0,f.Y)(T.EY,{color:"dimmest",multiline:!1,children:"There are no changes to commit."})});var x=o.changes.length,C=o.changes.filter(function(e){return e.staged}).length;function _(){return(_=(0,y._)(function(e){var n,t;return(0,b.YH)(this,function(r){switch(r.label){case 0:if(m)return[2];return p(function(e){return e+1}),[4,Y.stageFiles(e)];case 1:if((n=r.sent()).error)return[3,3];return[4,Y.status()];case 2:return(t=r.sent()).error?(rn({context:"commit-area-status",gitService:Y,result:t,data:{opts:e}}),S(t.error)):a(t),Y.forceRefresh(),[3,4];case 3:S(n.error),rn({context:"commit-area-stage-files",gitService:Y,result:n,data:{opts:e}}),r.label=4;case 4:return p(function(e){return e-1}),[2]}})})).apply(this,arguments)}function k(){return(k=(0,y._)(function(e){var n,t;return(0,b.YH)(this,function(r){switch(r.label){case 0:if(m)return[2];return p(function(e){return e+1}),[4,Y.restoreFiles(e)];case 1:if((n=r.sent()).error)return[3,3];return[4,Y.status()];case 2:return(t=r.sent()).error?(rn({context:"commit-area-status",gitService:Y,result:t,data:{files:e}}),S(t.error)):a(t),Y.forceRefresh(),[3,4];case 3:rn({context:"commit-area-restore-files",gitService:Y,result:n,data:{files:e}}),S(n.error),r.label=4;case 4:return p(function(e){return e-1}),[2]}})})).apply(this,arguments)}function D(){return E.apply(this,arguments)}function E(){return(E=(0,y._)(function(){var e,n;return(0,b.YH)(this,function(t){switch(t.label){case 0:if(""===s||m||0===x||d>0)return[2];if(g(!0),0!==C)return[3,2];return[4,Y.stageFiles({all:!0})];case 1:t.sent(),t.label=2;case 2:return[4,Y.commit({message:s})];case 3:if(!(e=t.sent()).error)return[3,4];return g(!1),S(e.error),rn({context:"commit-area-commit",gitService:Y,result:e,data:{message:s}}),[3,6];case 4:return da("commit-created",{hasDescription:-1!==s.trim().indexOf("\n\n")}),[4,Y.status()];case 5:n=t.sent(),g(!1),n.error?(S(n.error),rn({context:"commit-area-status",gitService:Y,result:n,data:{message:s}})):(c(""),a(n)),Y.forceRefresh(),t.label=6;case 6:return[2]}})})).apply(this,arguments)}var R="Nothing to commit";if(m)R="Committing...";else if(C>0&&C<x){var I=(0,i8.A)("change",C);R="Commit ".concat(C," staged ").concat(I)}else x>0&&(R="Stage and commit all changes");var F=!s||0===x||d>0||m;return(0,f.FD)(L.S,{gap:8,children:[(0,f.Y)(pp,{message:s,disabled:m,onMessageChange:c,onCommitShortcut:D}),(0,f.Y)(pP,{status:o,stageFiles:function(e){return _.apply(this,arguments)},restoreFiles:function(e){return k.apply(this,arguments)},onStagedFileClick:t,disabled:m}),F?(0,f.Y)(P.m_,{tooltip:d>0?"Changes in progress":0===x?"There are no changes to commit.":"You must enter a commit message before you can commit.",children:(0,f.Y)(eS.$n,{text:R,onClick:D,disabled:F,loading:m,colorway:"primary",iconLeft:(0,f.Y)(oR.A,{}),stretch:!0})}):(0,f.Y)(eS.$n,{text:R,onClick:D,disabled:F,loading:m,colorway:"primary",iconLeft:(0,f.Y)(oR.A,{}),stretch:!0})]})}var pO=/\s\(#(\d+)\)$/,pM=/^Revert "(.+)"/,pB=/^This reverts commit ([a-f0-9]+)(?:, reversing changes made to ([a-f0-9]+))?\./;function pH(e){var n=pM.exec(e.subject),t=pB.exec(e.body);if(n&&t){var r,i=t[1],o=n[1],a=pO.exec(o);return a&&(r=parseInt(a[1],10)),{hash:i,subject:o,pr:r}}return null}var pz=/\B#\d+\b/g,pW=/^Merged? pull request (#\d+\b)/,pG=/^Merge branch '(.+)'/,pV=/into (.+)$/;function pj(e){if("GitHub"===e.committer.name&&"noreply@github.com"===e.committer.email){var n=e.subject.match(pz);if(n){var t,r=parseInt(n[n.length-1].slice(1),10);if(r)return pO.test(e.subject)&&(t=e.subject.replace(pO,"").trim()),!t&&pW.test(e.subject)&&e.body&&-1===e.body.indexOf("\n")&&(t=e.body),{type:"pull-request",id:r,subject:t,reverts:pH(e)}}}if(pW.test(e.subject)){var i,o=pW.exec(e.subject);if(o)return e.body&&-1===e.body.indexOf("\n")&&(i=e.body),{type:"pull-request",id:parseInt(o[1].slice(1),10),subject:i,reverts:pH(e)}}if(pG.test(e.subject)){var a=pG.exec(e.subject);if(a){var l=pV.exec(e.subject);return{type:"branch",source:a[1],target:l?l[1]:null}}}return e.parents&&e.parents.length>2?{type:"octopus",parents:e.parents}:e.parents&&e.parents.length>1?{type:"simple",a:e.parents[0],b:e.parents[1]}:null}var pZ={position:"absolute",top:0,height:9,width:9,border:"1px solid ".concat(k.LU.purpleStrongest),borderRadius:"50%"},pq=(0,V.x)({markerContainer:[j.wp.display.flex,j.wp.align.center,j.wp.justify.center,j.wp.minHeight(20),j.wp.minWidth(20)],commitMarker:[j.wp.height(4),j.wp.width(4),j.wp.backgroundColor.foregroundDefault,j.wp.borderRadius("full")],collapsedMarkerIconDot:[j.wp.height(3),j.wp.width(3),j.wp.backgroundColor.foregroundDimmer,j.wp.borderRadius("full")],collapsedMarkerIconContainer:[j.wp.display.flex,j.wp.align.center,j.wp.justify.center,{"div + div":{marginLeft:1}}],collapsedMarker:[j.wp.display.flex,j.wp.align.center,j.wp.justify.center,j.wp.height(20),j.wp.width(20),j.wp.backgroundColor.backgroundHighest,j.wp.borderRadius("full")],revertMarker:[j.wp.display.flex,j.wp.height(20),j.wp.width(20),j.wp.backgroundColor.orangeDimmest,j.wp.borderRadius("full"),j.wp.align.center,j.wp.justify.center],mergeMarker:[j.wp.display.flex,j.wp.height(20),j.wp.width(20),j.wp.backgroundColor.purpleDimmest,j.wp.borderRadius("full"),j.wp.align.center,j.wp.justify.center],mergeMarkerIconContainer:[j.wp.position.relative,j.wp.height(9),j.wp.width(13)],mergeMarkerIconLeft:[(0,ee._)({},pZ),j.wp.left(0)],mergeMarkerIconRight:[(0,ee._)({},pZ),j.wp.right(0)],boundaryMarker:[j.wp.height(6),j.wp.width(6),j.wp.backgroundColor.backgroundDefault,j.wp.borderRadius("full"),{border:"1px solid ".concat(k.LU.backgroundHighest)}]});function pK(e){var n=function(e){switch(e){case"none":default:return null;case"commit":return(0,f.Y)(p$,{});case"revert":return(0,f.Y)(pJ,{});case"merge":return(0,f.Y)(pQ,{});case"boundary":return(0,f.Y)(pX,{});case"collapsed":return(0,f.Y)(p0,{})}}(e.type);return n?(0,f.Y)("div",{css:pq.markerContainer,children:n}):null}function p$(){return(0,f.Y)("div",{css:pq.commitMarker})}function pJ(){return(0,f.Y)("div",{css:pq.revertMarker,children:(0,f.Y)(oe.A,{size:12,color:k.LU.orangeStrongest})})}function pQ(){return(0,f.Y)("div",{css:pq.mergeMarker,children:(0,f.FD)("div",{css:pq.mergeMarkerIconContainer,children:[(0,f.Y)("div",{css:pq.mergeMarkerIconLeft}),(0,f.Y)("div",{css:pq.mergeMarkerIconRight})]})})}function pX(){return(0,f.Y)("div",{css:pq.boundaryMarker})}function p0(){return(0,f.Y)("div",{css:pq.collapsedMarker,children:(0,f.FD)("div",{css:pq.collapsedMarkerIconContainer,children:[(0,f.Y)("div",{css:pq.collapsedMarkerIconDot}),(0,f.Y)("div",{css:pq.collapsedMarkerIconDot}),(0,f.Y)("div",{css:pq.collapsedMarkerIconDot})]})})}var p1=[j.wp.position.absolute,j.wp.left(0),j.wp.width(18)],p2=(0,V.x)({connectorSegmentBorderSolid:[p1,{borderRight:"1px solid ".concat(k.LU.outlineDimmest)}],connectorSegmentBorderDashed:[p1,{borderRight:"1px dashed ".concat(k.LU.outlineDimmest)}]});function p4(e){var n=e.boundaryTop,t=void 0!==n&&n,r=e.boundaryBottom,i=void 0!==r&&r,o=e.joint,a=void 0===o?"top":o,l=e.hideTop,s=void 0!==l&&l,c=e.hideBottom,u=void 0!==c&&c;if(s&&u)return null;if(t===i&&!s&&!u)return(0,f.Y)(p3,{top:0,bottom:0,dashed:t&&i});var d=s?null:(0,f.Y)(p5,{start:"top",joint:a,dashed:t}),p=u?null:(0,f.Y)(p5,{start:"bottom",joint:a,dashed:i});return(0,f.FD)(f.FK,{children:[d,p]})}function p5(e){var n,t,r=e.start,i=e.joint,o=e.dashed,a="center"===i?(n={},(0,g._)(n,r,0),(0,g._)(n,"height","50%"),n):(t={},(0,g._)(t,r,0),(0,g._)(t,r===i?"height":i,8),t);return(0,f.Y)(p3,(0,nt._)((0,ee._)({},a),{dashed:void 0!==o&&o}))}function p3(e){var n=e.top,t=e.bottom,r=e.height,i=e.dashed;return(0,f.Y)("div",{css:void 0!==i&&i?p2.connectorSegmentBorderDashed:p2.connectorSegmentBorderSolid,style:{top:n,bottom:t,height:r}})}var p6=(0,V.x)({container:{position:"relative",marginLeft:30,marginRight:4,paddingLeft:6,userSelect:"none"},containerInteractive:[i9.b.nofill,{position:"relative",marginLeft:30,marginRight:4,paddingLeft:6,userSelect:"none"}],nodeFoldedIconContainer:{position:"absolute",top:"50%",transform:"translateY(-50%)",right:8,zIndex:1,opacity:0,"div:hover > &":{transition:"opacity 120ms ease-out",opacity:1}},nodeUnFoldedIconContainer:{position:"absolute",top:"50%",transform:"translateY(-50%)",right:8,zIndex:1},nodeContentContainer:[j.wp.colWithGap(4),{position:"relative",paddingTop:8,paddingBottom:8,paddingRight:8}],nodeHeader:{display:"block",height:20},nodeUnfoldedContentSurface:[j.wp.mt(4),j.wp.mb(8),j.wp.p(8),j.wp.borderRadius(8),{marginLeft:36,marginRight:8,overflowX:"hidden"}],unfoldedContentContainer:[j.wp.position.relative]});function p8(e){var n=e.boundaryTop,t=e.boundaryBottom,r=void 0!==t&&t,i=e.hideConnectorTop,o=e.hideConnectorBottom,a=void 0!==o&&o,l=e.joint,s=void 0===l?"top":l,c=e.marker,u=e.header,d=e.unfoldedContent,p=e.children,h=e.className,m=(0,v._)((0,w.useState)(!0),2),g=m[0],y=m[1];return(0,f.FD)(L.S,{className:h,css:j.wp.position.relative,children:[(0,f.Y)(p4,{boundaryTop:void 0!==n&&n,boundaryBottom:r,joint:s,hideTop:void 0!==i&&i,hideBottom:a}),c?(0,f.Y)(p9,{joint:s,children:c}):null,d?(0,f.FD)(L.S,{css:p6.containerInteractive,role:"button",tabIndex:0,onClick:function(){y(!g)},onKeyDown:function(e){("Enter"===e.key||" "===e.key)&&y(!g)},children:[g?(0,f.Y)("div",{css:p6.nodeFoldedIconContainer,children:(0,f.Y)(rS.A,{})}):(0,f.Y)("div",{css:p6.nodeUnFoldedIconContainer,children:(0,f.Y)(rY.A,{})}),(0,f.FD)(L.S,{css:p6.nodeContentContainer,children:[u?(0,f.Y)(L.S,{css:p6.nodeHeader,children:u}):null,p?(0,f.Y)(L.S,{children:p}):null]})]}):(0,f.Y)(L.S,{css:p6.container,children:(0,f.FD)(L.S,{css:p6.nodeContentContainer,children:[u?(0,f.Y)(L.S,{css:p6.nodeHeader,children:u}):null,p?(0,f.Y)(L.S,{children:p}):null]})}),!d||g?null:(0,f.FD)(L.S,{css:p6.unfoldedContentContainer,children:[a?null:(0,f.Y)(p3,{top:0,bottom:0,dashed:r}),(0,f.Y)(eu.ui,{css:p6.nodeUnfoldedContentSurface,elevated:!0,children:d})]})]})}var p7=(0,V.x)({top:{position:"absolute",top:8,left:18,transform:"translateX(-50%)"},bottom:{position:"absolute",bottom:8,left:18,transform:"translateX(-50%)"},center:{position:"absolute",top:"50%",left:18,transform:"translateX(-50%) translateY(-50%)"}});function p9(e){var n=e.joint,t=e.children;return(0,f.Y)("div",{css:p7[void 0===n?"top":n],children:t})}var fe=t(12053),fn=(0,V.x)({container:[j.wp.height("100%")],textContainer:[j.wp.center],text:[j.wp.flex.shrink(0)]});function ft(e){var n=e.text,t=(0,tg._)(e,["text"]);return(0,f.Y)(p8,(0,ee._)({marker:(0,f.Y)(pK,{type:"boundary"}),joint:"center",header:(0,f.FD)(L.S,{css:fn.container,row:!0,gap:8,align:"center",justify:"space-between",children:[(0,f.Y)(lF.a,{}),(0,f.FD)(L.S,{css:fn.textContainer,row:!0,gap:4,children:[(0,f.Y)(fe.A,{size:12,color:k.LU.foregroundDimmest}),(0,f.Y)(T.EY,{css:fn.text,variant:"small",color:"dimmest",multiline:!1,children:n})]}),(0,f.Y)(lF.a,{})]})},t))}var fr=t(55545),fi=(0,V.x)({definitionList:{display:"grid",gridTemplateColumns:"auto 1fr",paddingLeft:k.LU.space4,"> dt":{display:"flex",alignItems:"center",paddingBottom:k.LU.space2},"> dd":{marginLeft:k.LU.space12,paddingBottom:k.LU.space2}},listHeader:[j.wp.fontWeight.medium],commitList:[j.wp.colWithGap(2),j.wp.pl(4)]}),fo=function(e,n){var t=!e.body,r=null,i=null;return n&&"type"in n?(r=n,"pull-request"===n.type&&(n.reverts&&(i=n.reverts),n.subject&&(t=!0))):n&&(i=n),{hideBody:t,merge:r,revert:i}},fa=function(e){var n=e.hash;return(0,f.Y)(E.i,{size:"small",iconLeft:(0,f.Y)(fr.A,{}),textToCopy:n,text:n.slice(0,7),tooltipSuccessText:"Hash copied!"})},fl=function(e){var n=e.onClick,t=e.text,r=e.loading;return(0,f.Y)(P.m_,{tooltip:"Discard current changes and restore files to time of commit",children:(0,f.Y)(eS.$n,{text:t,onClick:n,size:"small",iconLeft:void 0!==r&&r?(0,f.Y)(to.A,{}):(0,f.Y)(oe.A,{})})})},fs=function(e,n){return e.name!==n.name||e.email!==n.email},fc=function(e,n){return!(6e4>Math.abs(e-n))};function fu(e){var n=e.commit,t=e.info,r=fs(n.committer,n.author),i=fc(n.author.date,n.committer.date),o=fo(n,void 0===t?null:t),a=o.hideBody,l=o.merge,s=o.revert;return(0,f.FD)(L.S,{gap:8,children:[a?null:(0,f.FD)(L.S,{gap:8,children:[(0,f.Y)(T.EY,{children:(0,f.Y)(aV,{body:n.body})}),(0,f.Y)(lF.a,{css:j.wp.backgroundColor.outlineDimmer})]}),(0,f.FD)(L.S,{children:[(0,f.Y)(T.EY,{css:fi.listHeader,multiline:!1,children:"Author"}),(0,f.FD)("dl",{css:fi.definitionList,children:[(0,f.Y)("dt",{children:"Name:"}),(0,f.Y)("dd",{children:n.author.name}),(0,f.Y)("dt",{children:"Email:"}),(0,f.Y)("dd",{children:n.author.email})]})]}),r?(0,f.FD)(L.S,{children:[(0,f.Y)(T.EY,{css:fi.listHeader,multiline:!1,children:"Committer"}),(0,f.FD)("dl",{css:fi.definitionList,children:[(0,f.Y)("dt",{children:"Name:"}),(0,f.Y)("dd",{children:n.committer.name}),(0,f.Y)("dt",{children:"Email:"}),(0,f.Y)("dd",{children:n.committer.email})]})]}):null,(0,f.FD)(L.S,{children:[(0,f.Y)(T.EY,{css:fi.listHeader,multiline:!1,children:"Commit"}),(0,f.FD)("dl",{css:fi.definitionList,children:[i?(0,f.FD)(f.FK,{children:[(0,f.Y)("dt",{children:"Authored:"}),(0,f.Y)("dd",{children:(0,f.Y)(eg.Dc,{date:n.author.date,dateFormat:"absolute"})}),(0,f.Y)("dt",{children:"Committed:"}),(0,f.Y)("dd",{children:(0,f.Y)(eg.Dc,{date:n.committer.date,dateFormat:"absolute"})})]}):(0,f.FD)(f.FK,{children:[(0,f.Y)("dt",{children:"Date:"}),(0,f.Y)("dd",{children:(0,f.Y)(eg.Dc,{date:n.author.date,dateFormat:"absolute"})})]}),(0,f.Y)("dt",{children:"Hash:"}),(0,f.Y)("dd",{children:(0,f.Y)(fa,{hash:n.hash})}),l&&"pull-request"===l.type?(0,f.FD)(f.FK,{children:[(0,f.Y)("dt",{children:"PR:"}),(0,f.FD)("dd",{children:["#",l.id]})]}):null,l&&"branch"===l.type?(0,f.FD)(f.FK,{children:[(0,f.Y)("dt",{children:"Merged:"}),(0,f.Y)("dd",{children:l.source}),l.target?(0,f.FD)(f.FK,{children:[(0,f.Y)("dt",{children:"Into:"}),(0,f.Y)("dd",{children:l.target})]}):null]}):null,s?(0,f.FD)(f.FK,{children:[(0,f.Y)("dt",{children:"Reverted:"}),(0,f.Y)("dd",{children:s.hash})]}):null]})]}),l&&"simple"===l.type?(0,f.FD)(L.S,{children:[(0,f.Y)(T.EY,{css:fi.listHeader,multiline:!1,children:"Merged"}),(0,f.FD)(L.S,{css:fi.commitList,children:[(0,f.Y)(T.EY,{multiline:!1,children:l.a}),(0,f.Y)(T.EY,{multiline:!1,children:l.b})]})]}):null,l&&"octopus"===l.type?(0,f.FD)(L.S,{children:[(0,f.Y)(T.EY,{css:fi.listHeader,multiline:!1,children:"Merged"}),(0,f.Y)(L.S,{css:fi.commitList,children:l.parents.map(function(e,n){return(0,f.Y)(T.EY,{multiline:!1,children:e},n)})})]}):null]})}var fd=(0,V.x)({headerText:[j.wp.rowWithGap(4),j.wp.flex.row,j.wp.align.stretch,j.wp.fontWeight.medium,{"> span":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}}],headerContainer:[{"> span":{width:"calc(100%)"}}],button:[j.wp.reset.button,j.wp.linkStyle,j.wp.color.foregroundDefault,j.wp.fontWeight.medium,{display:"block",width:"100%",textAlign:"left"}]}),fp=function(e){var n=e.author;return(0,f.FD)(L.S,{row:!0,gap:8,align:"center",children:[(0,f.Y)(dR.A,{name:n.name,email:n.email,color:"dimmer",allowPlaceholderAvatar:!0,small:!0}),(0,f.Y)(eg.Dc,{date:n.date,textColor:"dimmest",textVariant:"small"})]})},ff=function(e){var n=e.children;return(0,f.Y)(T.EY,{css:fd.headerText,multiline:!1,maxLines:1,children:n})},fh=function(e){var n=e.commit,t=e.onViewCommitClick,r=e.children;return(0,f.Y)(L.S,{css:fd.headerContainer,gap:4,align:"start",justify:"start",children:(0,f.Y)(P.m_,{tooltip:"View ".concat(n.hash.slice(0,7)),children:(0,f.Y)("button",{css:fd.button,onClick:function(){return t(n.hash)},children:r})})})};function fm(e){var n=e.commit,t=(0,tg._)(e,["commit"]);return(0,f.Y)(p8,(0,nt._)((0,ee._)({marker:(0,f.Y)(pK,{type:"commit"}),header:(0,f.Y)(ff,{children:(0,f.Y)(aG,{subject:n.subject})}),unfoldedContent:(0,f.Y)(fu,{commit:n})},t),{children:(0,f.Y)(fp,{author:n.author})}))}var fg=function(e){var n=e.commit,t=e.onViewCommitClick,r=(0,tg._)(e,["commit","onViewCommitClick"]);return(0,f.Y)(p8,(0,nt._)((0,ee._)({marker:(0,f.Y)(pK,{type:"commit"}),header:(0,f.Y)(fh,{commit:n,onViewCommitClick:function(){return t(n.hash)},children:(0,f.Y)(ff,{children:(0,f.Y)(aG,{subject:n.subject})})})},r),{children:(0,f.Y)(fp,{author:n.author})}))},fv=t(82455);function fw(e){var n,t=e.commit,r=e.info,i=(0,tg._)(e,["commit","info"]);return"branch"!==r.type&&(n="pull-request"===r.type&&r.subject?r.subject:t.subject),(0,f.Y)(p8,(0,nt._)((0,ee._)({marker:(0,f.Y)(pK,{type:"merge"}),header:(0,f.FD)(ff,{children:[(0,f.Y)(aH,{text:"merged"}),(0,f.Y)(fb,{info:r,hash:t.hash,subject:t.subject})]}),unfoldedContent:(0,f.Y)(fu,{commit:t,info:r})},i),{children:(0,f.FD)(L.S,{gap:8,children:[n?(0,f.Y)(T.EY,{color:"dimmer",variant:"small",multiline:!1,children:(0,f.Y)(aG,{subject:n})}):null,(0,f.Y)(fp,{author:t.author})]})}))}var fy=function(e){var n,t=e.commit,r=e.info,i=e.onViewCommitClick,o=(0,tg._)(e,["commit","info","onViewCommitClick"]);return"branch"!==r.type&&(n="pull-request"===r.type&&r.subject?r.subject:t.subject),(0,f.Y)(p8,(0,nt._)((0,ee._)({marker:(0,f.Y)(pK,{type:"merge"}),header:(0,f.Y)(fh,{commit:t,onViewCommitClick:function(){return i(t.hash)},children:(0,f.FD)(ff,{children:[(0,f.Y)(aH,{text:"merged"}),(0,f.Y)(fb,{info:r,hash:t.hash,subject:t.subject})]})})},o),{children:(0,f.FD)(L.S,{gap:8,children:[n?(0,f.Y)(T.EY,{color:"dimmer",variant:"small",multiline:!1,children:(0,f.Y)(aG,{subject:n})}):null,(0,f.Y)(fp,{author:t.author})]})}))};function fb(e){var n=e.info,t=e.hash,r=e.subject,i=(0,f.Y)("span",{css:j.wp.fontWeight.medium,children:r});switch(n.type){case"pull-request":return(0,f.FD)(f.FK,{children:[(0,f.Y)("span",{children:"pull request"}),(0,f.Y)(az,{id:n.id}),n.reverts&&n.reverts.pr?(0,f.FD)(f.FK,{children:[(0,f.Y)("span",{children:"-"}),(0,f.Y)(aB,{text:"reverts"}),(0,f.Y)(az,{id:n.reverts.pr})]}):null]});case"branch":if(!n.target)return(0,f.FD)(f.FK,{children:[(0,f.Y)("span",{children:"branch"}),(0,f.Y)(aZ,{name:n.source})]});return(0,f.FD)(f.FK,{children:[(0,f.Y)(aZ,{name:n.source}),(0,f.Y)("span",{children:"into"}),(0,f.Y)(aZ,{name:n.target})]});case"simple":return(0,f.FD)(f.FK,{children:[(0,f.Y)(aW,{hash:n.a}),(0,f.Y)(fv.A,{css:{alignSelf:"center"},size:12}),(0,f.Y)(aW,{hash:n.b})]});case"octopus":return(0,f.FD)(f.FK,{children:[(0,f.Y)("span",{children:"commit"}),(0,f.Y)(aW,{hash:t}),(0,f.FD)("span",{children:["(",n.parents.length," parents)"]})]});default:return i}}function fS(e){var n=e.commit,t=e.info,r=(0,tg._)(e,["commit","info"]);return(0,f.Y)(p8,(0,nt._)((0,ee._)({marker:(0,f.Y)(pK,{type:"revert"}),header:(0,f.FD)(ff,{children:[(0,f.Y)(aB,{text:"reverted"}),(0,f.Y)(aW,{hash:t.hash}),(0,f.Y)(aG,{subject:t.subject,quoted:!0})]}),unfoldedContent:(0,f.Y)(fu,{commit:n,info:t})},r),{children:(0,f.Y)(fp,{author:n.author})}))}var fY=function(e){var n=e.commit,t=e.info,r=e.onViewCommitClick,i=(0,tg._)(e,["commit","info","onViewCommitClick"]);return(0,f.Y)(p8,(0,nt._)((0,ee._)({marker:(0,f.Y)(pK,{type:"revert"}),header:(0,f.Y)(fh,{commit:n,onViewCommitClick:function(){return r(n.hash)},children:(0,f.FD)(ff,{children:[(0,f.Y)(aB,{text:"reverted"}),(0,f.Y)(aW,{hash:t.hash}),(0,f.Y)(aG,{subject:t.subject,quoted:!0})]})})},i),{children:(0,f.Y)(fp,{author:n.author})}))},fA=(0,V.x)({body:[j.wp.flex.growAndShrink(1)],virtualItem:[j.wp.position.absolute,j.wp.top(0),j.wp.left(0),j.wp.width("100%"),j.wp.overflow("hidden")],virtualList:[j.wp.position.relative]}),fx=function(){return 60};function fC(e){var n=e.items,t=(0,w.useRef)(null),r=(0,ew.Te)({overscan:10,count:n.length,getScrollElement:function(){return t.current},estimateSize:fx});return(0,f.Y)("div",{ref:t,css:fA.body,children:(0,f.Y)("div",{css:fA.virtualList,style:{height:"".concat(r.getTotalSize(),"px")},children:r.getVirtualItems().map(function(e){return(0,f.Y)("div",{css:fA.virtualItem,style:{transform:"translateY(".concat(e.start,"px)")},"data-index":e.index,ref:r.measureElement,children:(0,f.Y)(f_,{items:n,index:e.index})},e.key.toString())})})})}function f_(e){var n=e.items,t=e.index,r=n[t],i=0===t,o=t===n.length-1;if("boundary"===r.type)return(0,f.Y)(ft,{text:r.text,hideConnectorTop:i,hideConnectorBottom:o,boundaryTop:!0,boundaryBottom:!0},r.text);var a=n[t-1]?n[t-1].type:null,l=n[t+1]?n[t+1].type:null;return(0,f.Y)(fk,{commit:r.commit,hideConnectorTop:i,hideConnectorBottom:o,boundaryTop:"commit"!==a,boundaryBottom:"commit"!==l,onViewCommitClick:r.onViewCommitClick},r.commit.hash)}function fk(e){var n=e.commit,t=e.onViewCommitClick,r=(0,tg._)(e,["commit","onViewCommitClick"]),i=pj(n);if(i)return t?(0,f.Y)(fy,(0,ee._)({info:i,commit:n,onViewCommitClick:t},r)):(0,f.Y)(fw,(0,ee._)({info:i,commit:n},r));var o=pH(n);return o?t?(0,f.Y)(fY,(0,ee._)({info:o,commit:n,onViewCommitClick:t},r)):(0,f.Y)(fS,(0,ee._)({info:o,commit:n},r)):t?(0,f.Y)(fg,(0,ee._)({commit:n,onViewCommitClick:t},r)):(0,f.Y)(fm,(0,ee._)({commit:n},r))}var fD=(0,V.x)({warning:[j.wp.align.start],header:[j.wp.fontWeight.bold]});function fE(){return(0,f.FD)(f.FK,{children:[(0,f.Y)(iI.N,{css:fD.warning,icon:(0,f.Y)(iF.A,{}),colorway:"warning",text:(0,f.FD)(f.FK,{children:[(0,f.Y)("span",{css:fD.header,children:"Can't push or pull from GitHub"}),(0,f.Y)("br",{}),(0,f.Y)("span",{children:"This Repl has a GitHub repository as a remote, but you are not connected to GitHub."})]})}),(0,f.Y)(dm,{})]})}var fR=t(56042),fI=(0,V.x)({text:[j.wp.flex.shrink(1)]});function fF(e){var n=e.date,t=(0,v._)((0,w.useState)(null),2),r=t[0],i=t[1];return((0,w.useEffect)(function(){if(n){var e=function(){var e=new Date,t="just now";e.getTime()-n.getTime()>6e4&&(t=(0,fR.A)(n,e,{addSuffix:!0})),i(t=t.replace(/minutes?/,"min"))};e();var t=setInterval(e,6e4);return function(){clearInterval(t),i(null)}}},[n]),r)?(0,f.FD)(T.EY,{css:fI.text,color:"dimmest",variant:"small",multiline:!1,children:["last fetched ",r]}):null}function fT(e){var n=e.hasRemoteMergeConflict,t=e.hasUnpulledCommits,r=e.hasUnpushedCommits,i=e.workTreeDirty,o=[];return i&&t&&o.push("Can't pull: you have uncommitted changes"),n&&(t||r)&&(t&&r?(i||o.push("Warning: pulling will start a merge with conflicts"),o.push("Can't push: unpulled changes must be merged first")):t?i||o.push("Warning: pulling will start a merge with conflicts"):r&&o.push("Can't push: merge conflict with remote")),o.length?(0,f.Y)(f.FK,{children:o.map(function(e){return(0,f.Y)(iI.N,{text:e,colorway:"warning",icon:(0,f.Y)(iF.A,{})},e)})}):null}var fP=(0,V.x)({divider:[j.wp.mx(8)]});function fL(e){var n=e.ahead,t=e.behind;if(!n&&!t)return(0,f.Y)(T.EY,{color:"dimmest",multiline:!1,children:"Nothing to pull or push"});var r=null,i=null;if(t){var o=(0,i8.A)("commit",t);r="".concat(t," ").concat(o," to pull")}if(n){var a=(0,i8.A)("commit",n);i="".concat(n," ").concat(a," to push")}return(0,f.FD)(T.EY,{color:"dimmer",variant:"small",multiline:!1,children:[r?(0,f.Y)("span",{children:r}):null,r&&i?(0,f.Y)("span",{css:fP.divider,children:""}):null,i?(0,f.Y)("span",{children:i}):null]})}function fU(e){return fN.apply(this,arguments)}function fN(){return(fN=(0,y._)(function(e){var n,t;return(0,b.YH)(this,function(r){switch(r.label){case 0:return n=null,[4,Promise.race([e,new Promise(function(e){return n=setTimeout(function(){re.v4(function(e){e.setTag("gitPane",!0),re.Cp(Error("Remote update operation timed out"))}),e({error:t8.uA.TIMEOUT})},9e4)})])];case 1:return t=r.sent(),n&&clearTimeout(n),[2,t]}})})).apply(this,arguments)}var fO=(0,V.x)({container:[j.wp.flex.grow(1)],branch:[j.wp.mr(4),j.wp.color.foregroundDefault,j.wp.fontWeight.medium,{"&:hover":{textDecoration:"underline"}}],divider:[j.wp.color.foregroundDimmest],text:[j.wp.ml(4),j.wp.color.foregroundDimmest]});function fM(e){var n=e.upstream,t=e.remotes,r=(0,w.useMemo)(function(){return function(e,n){var t=null,r=null;if(e instanceof Map){var i=(0,t8.xM)(n),o=i[0];if(t=i[1],!o||!t)return null;var a=e.get(o);if(!a)return null;r=dy(a)}else t=n,r=dy(e);return r&&dv(r)?"".concat(r,"/tree/").concat(t):null}(t,n)},[n,t]);return(0,f.FD)(T.EY,{css:fO.container,variant:"small",multiline:!1,children:[r?(0,f.Y)("a",{css:fO.branch,href:r,target:"_blank",children:n}):(0,f.Y)("span",{css:fO.branch,children:n}),(0,f.Y)("span",{css:fO.divider,children:""}),(0,f.Y)("span",{css:fO.text,children:"upstream"})]})}var fB=t(44989),fH=(0,V.x)({container:[j.wp.borderRadius(8)],loading:[j.wp.height(64),nM.S.backgroundPulse(),j.wp.borderRadius(8)],header:[j.wp.py(4),j.wp.px(8),j.wp.rowWithGap(8),j.wp.align.center,j.wp.flex.shrink(1),j.wp.border({color:k.LU.outlineDimmer,direction:"bottom"})],fetch:{border:"none"},body:[j.wp.px(8),j.wp.pt(8),j.wp.pb(12),j.wp.colWithGap(8)],buttons:[j.wp.flex.grow(1)],sync:[j.wp.flex.grow(1)],pull:[j.wp.pr(12),j.wp.borderRadius(8,0,0,8),j.wp.border({color:k.LU.outlineDefault,direction:"right"})],push:[j.wp.borderRadius(0,8,8,0)]});function fz(e){var n=e.remotes,t=e.gotoPendingState,r=di(),i=function(e){var n,t=e.onError,r=e.onPullConflicts,i=(0,v._)((0,w.useState)(!1),2),o=i[0],a=i[1],l=(0,v._)((0,w.useState)(!1),2),s=l[0],c=l[1],u=(0,v._)((0,w.useState)(!1),2),d=u[0],p=u[1],f=(0,v._)((0,w.useState)(!1),2),h=f[0],m=f[1],g=(0,A.A)().git,S=(0,t9.A)((n=(0,y._)(function(e){var n,t,r,i,o,a,l,s,c,u,d,p,f,h,m,g,v,w;return(0,b.YH)(this,function(y){switch(y.label){case 0:return i={upstream:null,hasUnpulledCommits:!1,hasUnpushedCommits:!1,hasRemoteMergeConflict:!1,pullMode:t8.Xo.FF_ONLY,canPull:!1,canPush:!1,workTreeDirty:!1,needGitHubConnection:!1,ahead:0,behind:0,lastFetched:null},[4,e.getRepositoryState()];case 1:if((o=y.sent()).error)return[2,o];if(a=o.state,o.type!==t8.UN.NORMAL)return[2,{error:t8.uA.INVALID_STATE}];return(a===t8.Gi.DIRTY_WORKTREE||a===t8.Gi.DIRTY_INDEX)&&(i.workTreeDirty=!0),[4,e.status()];case 2:if((l=y.sent()).error)return[2,l];if(s=l.branch,c=null==(n=l.upstream)?void 0:n.branch,d=null!=(u=null==(t=l.upstream)?void 0:t.ahead)?u:0,f=null!=(p=null==(r=l.upstream)?void 0:r.behind)?p:0,!s)return[2,{error:t8.uA.HEAD_DETACHED}];if(i.ahead=d,i.behind=f,!c)return[3,7];return i.upstream=c,i.hasUnpulledCommits=f>0,i.hasUnpushedCommits=d>0,[4,e.lastFetched()];case 3:if((h=y.sent()).error)return[2,h];return i.lastFetched=h.lastFetched,[4,e.canMergeBranches(s,c)];case 4:if((m=y.sent()).error)return[2,m];if(m.canMerge||(i.hasRemoteMergeConflict=!0),e.hasProfile(t8.HJ.GITHUB))return[3,6];if(!(g=(0,t8.z5)(c)))return[2,{error:t8.uA.INVALID_REFERENCE}];return[4,e.getRemotes()];case 5:if((v=y.sent()).error)return[2,v];if(!(w=v.remotes.get(g)))return[2,{error:t8.uA.INVALID_REFERENCE}];dv(w)&&(i.needGitHubConnection=!0),y.label=6;case 6:i.workTreeDirty||i.needGitHubConnection||(i.canPull=!0),!i.hasUnpushedCommits||i.hasUnpulledCommits||i.needGitHubConnection||(i.canPush=!0),d>0&&(i.pullMode=i.hasRemoteMergeConflict?t8.Xo.MERGE:t8.Xo.REBASE),y.label=7;case 7:return[2,(0,nt._)((0,ee._)({},i),{error:null})]}})}),function(e){return n.apply(this,arguments)}));if(!S)return{type:"loading"};if(S.error||!S.upstream)return{type:"error",error:S.error};if(!S.upstream)return{type:"noUpstream"};var Y=S.upstream,x=S.hasUnpulledCommits,C=S.hasUnpushedCommits,_=S.hasRemoteMergeConflict,k=S.pullMode,D=S.canPull,E=S.canPush,R=S.workTreeDirty,I=S.needGitHubConnection,F=S.ahead,T=S.behind,P=S.lastFetched;if(I)return{type:"needGitHubConnection",upstream:Y};var L=o||s||d||h,U=!Y||I||L,N=!D||L,O=!E||L,M=!D&&!E||_||L;function B(){return(B=(0,y._)(function(){var e;return(0,b.YH)(this,function(n){switch(n.label){case 0:if(U)return[2];return a(!0),[4,fU(g.fetch())];case 1:return e=n.sent(),g.forceRefresh(),a(!1),e.error?t(e.error):da("remote-fetched"),[2]}})})).apply(this,arguments)}function H(){return(H=(0,y._)(function(){var e;return(0,b.YH)(this,function(n){switch(n.label){case 0:if(N)return[2];return c(!0),[4,fU(g.pull({mode:k,allowConflicts:!0}))];case 1:return e=n.sent(),c(!1),e.error?t(e.error):(e.hasConflicts&&r(),g.forceRefresh(),da("upstream-pulled")),[2]}})})).apply(this,arguments)}function z(){return(z=(0,y._)(function(){var e;return(0,b.YH)(this,function(n){switch(n.label){case 0:if(O)return[2];return p(!0),[4,fU(g.push())];case 1:return e=n.sent(),g.forceRefresh(),p(!1),e.error?t(e.error):da("upstream-pushed"),[2]}})})).apply(this,arguments)}function W(){return(W=(0,y._)(function(){var e,n;return(0,b.YH)(this,function(r){switch(r.label){case 0:if(M)return[2];if(m(!0),!D)return[3,2];return[4,fU(g.pull({mode:k}))];case 1:if((e=r.sent()).error)return t(e.error),m(!1),[2];da("upstream-pulled"),r.label=2;case 2:if(!E)return[3,4];return[4,g.push()];case 3:if((n=r.sent()).error)return t(n.error),m(!1),[2];da("upstream-pushed"),r.label=4;case 4:return g.forceRefresh(),m(!1),[2]}})})).apply(this,arguments)}return{type:"remote",fetch:function(){return B.apply(this,arguments)},fetching:o,fetchDisabled:U,lastFetched:P,pull:function(){return H.apply(this,arguments)},pulling:s,pullDisabled:N,pullMode:k,canPull:D,push:function(){return z.apply(this,arguments)},pushing:d,pushDisabled:O,canPush:E,sync:function(){return W.apply(this,arguments)},syncing:h,syncDisabled:M,upstream:Y,hasUnpulledCommits:x,hasUnpushedCommits:C,hasRemoteMergeConflict:_,workTreeDirty:R,ahead:F,behind:T}}({onError:r,onPullConflicts:t}),o="error"===i.type?i.error:null;return((0,w.useEffect)(function(){o&&r(o)},[o,r]),"loading"===i.type)?(0,f.Y)(eu.ui,{css:fH.loading,elevated:!0}):"error"===i.type||"noUpstream"===i.type?null:"needGitHubConnection"===i.type?(0,f.FD)(eu.ui,{css:fH.container,elevated:!0,children:[(0,f.FD)(L.S,{css:fH.header,children:[(0,f.Y)(fM,{upstream:i.upstream,remotes:n}),(0,f.Y)(eS.$n,{css:fH.fetch,text:"Fetch",iconLeft:(0,f.Y)(om.A,{}),disabled:!0,variant:"outlined",size:"small"})]}),(0,f.Y)(L.S,{css:fH.body,children:(0,f.Y)(fE,{})})]}):(0,f.FD)(eu.ui,{css:fH.container,elevated:!0,children:[(0,f.FD)(L.S,{css:fH.header,children:[(0,f.Y)(fM,{upstream:i.upstream,remotes:n}),(0,f.Y)(fF,{date:i.lastFetched}),(0,f.Y)(eS.$n,{css:fH.fetch,text:"Fetch",iconLeft:i.fetching?(0,f.Y)(to.A,{}):(0,f.Y)(om.A,{}),onClick:i.fetch,loading:i.fetching,disabled:i.fetchDisabled,variant:"outlined",size:"small"})]}),(0,f.FD)(L.S,{css:fH.body,children:[(0,f.Y)(fT,{hasRemoteMergeConflict:i.hasRemoteMergeConflict,hasUnpulledCommits:i.hasUnpulledCommits,hasUnpushedCommits:i.hasUnpushedCommits,workTreeDirty:i.workTreeDirty}),(0,f.Y)(fL,{ahead:i.ahead,behind:i.behind}),(0,f.FD)(L.S,{css:fH.buttons,row:!0,gap:8,children:[(0,f.Y)("div",{css:fH.sync,children:(0,f.Y)(P.m_,{tooltip:"Pull & push the latest changes",children:(0,f.Y)(eS.$n,{css:fH.sync,text:"Sync with Remote",iconLeft:i.syncing?(0,f.Y)(to.A,{}):(0,f.Y)(fv.A,{rotate:90}),onClick:i.sync,loading:i.syncing,disabled:i.syncDisabled,size:"small"})})}),(0,f.FD)(L.S,{row:!0,children:[(0,f.Y)(eS.$n,{css:fH.pull,text:"Pull",iconLeft:i.pulling?(0,f.Y)(to.A,{}):(0,f.Y)(eC.A,{}),onClick:i.pull,loading:i.pulling,disabled:i.pullDisabled,size:"small"}),(0,f.Y)(eS.$n,{css:fH.push,text:"Push",iconLeft:i.pushing?(0,f.Y)(to.A,{}):(0,f.Y)(fB.A,{}),onClick:i.push,loading:i.pushing,disabled:i.pushDisabled,size:"small"})]})]})]})]})}var fW=(0,V.x)({remoteUrl:[{border:"none"},j.wp.height("auto"),j.wp.py(4),j.wp.px(8)]});function fG(e){var n=e.branch,t=e.remotes,r=(0,v._)((0,w.useMemo)(function(){if(n.type===t8.xx.LOCAL)return[null,null,null];var e=t.get(n.remote);if(!e)return[null,null,null];var r=dy(e),i=db(e),o=dv(r);return[r,i,o]},[n,t]),3),i=r[0],o=r[1],a=r[2];return i&&o?(0,f.Y)(tK.v,{css:fW.remoteUrl,text:o,href:i,target:"_blank",iconLeft:a?(0,f.Y)(dh.A,{}):void 0,iconRight:(0,f.Y)(tR.A,{}),variant:"outlined",size:"small"}):null}var fV=(0,nF.i7)({from:{opacity:0},to:{opacity:1}}),fj=(0,V.x)({loadingView:[{animation:"".concat(fV," 0.125s 0.25s linear backwards")},j.wp.flex.grow(1),j.wp.display.flex,j.wp.center]});function fZ(){return(0,f.Y)(L.S,{css:fj.loadingView,children:(0,f.Y)(to.A,{size:48})})}var fq=(0,V.x)({view:[j.wp.flex.grow(1)],sectionContainer:[j.wp.colWithGap(8)],section:[j.wp.pt(8),j.wp.pb(16),j.wp.px(8),j.wp.colWithGap(8),j.wp.border({color:k.LU.outlineDimmest,direction:"bottom"})],remoteUpdatesHeader:[],reviewChangesHeader:[],headerText:[j.wp.fontWeight.medium],replMergingHeader:[j.wp.rowWithGap(8),j.wp.align.center],switchToBranch:[j.wp.p(4),j.wp.flex.row,j.wp.align.center,j.wp.justify.spaceBetween,j.wp.mt(0),j.wp.mb(0)]});function fK(e){var n,t,r,i,o,a=e.status,l=e.remotes,s=e.branch,c=e.onStagedFileClick,u=e.onViewCommitClick,d=e.onViewSettingsClick,p=e.gotoPendingState,h=e.current,m=void 0!==h&&h,g=e.performPaneOperation,S=m?null==a||null==(i=a.upstream)?void 0:i.behind:void 0,Y=m?null==a||null==(o=a.upstream)?void 0:o.ahead:void 0,A=(n=di(),r=(0,t9.A)((t=(0,y._)(function(e){var n,t,r,i,o,a,l,c,u;return(0,b.YH)(this,function(d){switch(d.label){case 0:return[4,e.isInitialized()];case 1:if((n=d.sent()).error)return rn({context:"use-branch-commits",gitService:e,result:n}),[2,{error:n.error}];if(!n.initialized)return[2,{log:[],onlyRemote:[],onlyLocal:[],error:null}];if(!s)return[2,{error:null}];if(!(!s.tracking||0===S&&0===Y))return[3,3];return t=(0,t8.qK)(s,!0),[4,e.log({max:100,revRange:t})];case 2:if((r=d.sent()).error)return rn({context:"use-branch-commits",gitService:e,result:r,data:{branch:s,behind:S,ahead:Y,revision:t}}),[2,r];return[2,{log:r.commits,error:null}];case 3:return i=(0,t8.qK)(s),[4,Promise.all([e.log({max:100,revRange:s.name}),e.log({max:100,revRange:"".concat(s.name,"..").concat(i)}),e.log({max:100,revRange:"".concat(i,"..").concat(s.name)})])];case 4:if(o=d.sent(),l=(a=(0,v._)(o,3))[0],c=a[1],u=a[2],l.error)return rn({context:"use-branch-commits-log",gitService:e,result:l,data:{branch:s,behind:S,ahead:Y,remoteBranch:i}}),[2,{error:l.error}];if(c.error)return rn({context:"use-branch-commits-only-remote",gitService:e,result:c,data:{branch:s,behind:S,ahead:Y,remoteBranch:i}}),[2,{error:c.error}];if(u.error)return rn({context:"use-branch-commits-only-local",gitService:e,result:u,data:{branch:s,behind:S,ahead:Y,remoteBranch:i}}),[2,{error:u.error}];return[2,{log:l.commits,onlyRemote:c.commits,onlyLocal:u.commits,error:null}]}})}),function(e){return t.apply(this,arguments)}),[s,S,Y]),(0,w.useMemo)(function(){if(!r)return null;if(r.error)return n(r.error),{error:r.error};var e=r.log,t=r.onlyRemote,i=r.onlyLocal;return t||i?(e&&(e=pr(e,null!=t?t:[],null!=i?i:[])),{log:e,onlyRemote:t,onlyLocal:i,error:null}):{log:e,error:null}},[n,r])),x=!!l&&l.size>0,C=(null==s?void 0:s.type)===t8.xx.LOCAL,_=(0,w.useMemo)(function(){if(!A||A.error)return[];var e=[],n=A.log,t=void 0===n?[]:n,r=A.onlyRemote,i=void 0===r?[]:r,o=A.onlyLocal,a=void 0===o?[]:o,l=t.length>0,s=i.length>0,c=a.length>0;return s&&(e.push({type:"boundary",text:"Not pulled from remote"}),e.push.apply(e,(0,X._)(f$(i,u)))),c&&(e.push({type:"boundary",text:"Not pushed to remote"}),e.push.apply(e,(0,X._)(f$(a,u)))),l&&((s||c)&&e.push({type:"boundary",text:"Up to date with remote"}),e.push.apply(e,(0,X._)(f$(t,u)))),e},[A,u]);return s?(0,f.FD)(L.S,{css:fq.view,pt:4,pb:8,px:4,gap:8,children:[(0,f.FD)(L.S,{gap:8,children:[C?(0,f.Y)(L.S,{css:fq.section,children:(0,f.Y)(pt,{performPaneOperation:g,branch:s,onViewSettingsClick:d})}):null,m&&!C&&l&&x?(0,f.FD)(L.S,{css:fq.section,children:[(0,f.FD)(L.S,{row:!0,gap:8,align:"center",justify:"space-between",children:[(0,f.Y)(T.EY,{css:fq.headerText,multiline:!1,children:"Remote Updates"}),(0,f.Y)(fG,{branch:s,remotes:l})]}),(0,f.Y)(fz,{remotes:l,gotoPendingState:p})]}):null,m&&a?(0,f.FD)(L.S,{css:fq.section,children:[(0,f.Y)(L.S,{row:!0,gap:8,align:"center",children:(0,f.Y)(T.EY,{css:fq.headerText,multiline:!1,children:"Commit"})}),(0,f.Y)(pN,{status:a,onStagedFileClick:c})]}):null]}),A?(0,f.Y)(fC,{items:_}):(0,f.Y)(fZ,{})]}):(0,f.Y)("div",{children:"No branch"})}function f$(e,n){return e.map(function(e){return{type:"commit",commit:e,onViewCommitClick:n}})}function fJ(){return(0,f.FD)(L.S,{children:[(0,f.Y)(T.EY,{multiline:!1,children:"Unsupported state: you are in the middle of a cherry-pick."}),(0,f.Y)(T.EY,{multiline:!1,children:"Please finish the cherry-pick manually."})]})}let fQ=function(e){var n,t=(0,t9.A)((n=(0,y._)(function(n){var t,r,i;return(0,b.YH)(this,function(o){switch(o.label){case 0:return[4,n.isInitialized()];case 1:if((t=o.sent()).error)return[2,{error:t.error}];if(!t.initialized)return[2,{error:t8.uA.NOT_INITIALIZED}];return[4,n.log({max:1,revRange:e})];case 2:if((r=o.sent()).error)return[2,{error:r.error}];if(0===r.commits.length)return[2,{error:t8.uA.NO_COMMITS}];return[2,{commit:null!=(i=r.commits[0])?i:null,error:null}]}})}),function(e){return n.apply(this,arguments)}),[e]);return(0,w.useMemo)(function(){return t?t.error?{error:t.error}:t:null},[t])},fX=function(e){var n,t=di(),r=(0,t9.A)((n=(0,y._)(function(n){var t,r,i,o,a,l;return(0,b.YH)(this,function(s){switch(s.label){case 0:return i=e.hash,[4,n.getFilesForCommit(i)];case 1:if(null==(o=s.sent())?void 0:o.error)return rn({context:"use-commit-diffs",gitService:n,result:o,data:{commit:e}}),[2,{error:o.error,diffs:[]}];return a=(null==o||null==(t=o.files)?void 0:t.filter(function(e){return["ADDED","MODIFIED","COPIED","RENAMED","TYPE_CHANGED"].includes(e.type)}))||[],l=(null==o||null==(r=o.files)?void 0:r.filter(function(e){return["DELETED","MODIFIED","COPIED","RENAMED","TYPE_CHANGED"].includes(e.type)}))||[],[2,{error:null,diffs:Array.from(new Set((0,X._)(a).concat((0,X._)(l)))).map(function(e){var n,t;return{id:(0,nU.A)(),status:e.type,loading:!1,initial:{filename:(0,tt.WP)(null!=(n=e.originalPath)?n:e.path),path:(0,tt._6)(null!=(t=e.originalPath)?t:e.path),content:""},final:{filename:(0,tt.WP)(e.path),path:(0,tt._6)(e.path),content:""}}})}]}})}),function(e){return n.apply(this,arguments)}),[e]);return(0,w.useMemo)(function(){return r?r.error?(t(r.error),null):r:null},[t,r])};var f0=function(){var e=(0,y._)(function(e,n,t,r){var i,o,a;return(0,b.YH)(this,function(l){switch(l.label){case 0:return i=""===n?t:"".concat(n,"/").concat(t),[4,e.getFileContents({path:i,revision:r,convertToBase64:(0,tt.FN)(i)})];case 1:if((o=l.sent()).error)throw o.error;return[2,null!=(a=null==o?void 0:o.content)?a:""]}})});return function(n,t,r,i){return e.apply(this,arguments)}}(),f1=function(){var e=(0,y._)(function(e,n,t){var r,i,o,a;return(0,b.YH)(this,function(l){switch(l.label){case 0:return i=n.hash,[4,f0(e,t.final.path,t.final.filename,i)];case 1:if(o=l.sent(),a="",!(!n.grafted&&(null==(r=n.parents)?void 0:r.length)))return[3,3];return[4,f0(e,t.initial.path,t.initial.filename,"".concat(i,"^"))];case 2:a=l.sent(),l.label=3;case 3:return[2,(0,nt._)((0,ee._)({},t),{loading:!1,initial:(0,nt._)((0,ee._)({},t.initial),{content:a}),final:(0,nt._)((0,ee._)({},t.final),{content:o})})]}})});return function(n,t,r){return e.apply(this,arguments)}}(),f2=t(66257),f4=t(29425),f5=(0,V.x)({splitOrUnisonContainer:[j.wp.flex.wrap],emphasizedText:[j.wp.fontWeight.medium],buttonGroupItem:[j.wp.width(64),j.wp.height(32)],textContainer:[j.wp.mt(8),j.wp.overflow("break-all")]}),f3=function(e){var n=e.children;return(0,f.Y)(L.S,{css:f5.splitOrUnisonContainer,gap:8,align:"center",justify:"space-between",row:!0,children:n})},f6=function(e){var n=e.value,t=e.onChange;return(0,f.FD)(ry.e2,{name:"SplitOrUnifiedDiff",value:n,onChange:t,row:!0,children:[(0,f.Y)(L.S,{css:f5.buttonGroupItem,children:(0,f.Y)(ry.$O,{value:"Unified",text:"Unified",id:"SplitOrUnifiedDiffUnified"})}),(0,f.Y)(L.S,{css:f5.buttonGroupItem,children:(0,f.Y)(ry.$O,{value:"Split",text:"Split",id:"SplitOrUnifiedDiffSplit"})})]})},f8=function(e){var n=e.value,t=e.onChange;return(0,f.Y)(eY.K0,{alt:"Markdown"===n?"View Source":"View Markdown",onClick:function(){return t("Markdown"===n?"Source":"Markdown")},children:"Markdown"===n?(0,f.Y)(f2.A,{}):(0,f.Y)(f4.A,{})})},f7=function(e){var n=e.files,t=e.totalFiles;return n===t?(0,f.FD)(T.EY,{css:f5.textContainer,children:["Showing"," ",(0,f.FD)("span",{css:f5.emphasizedText,children:[t," changed ",(0,i8.A)("file",t),"."]})]}):(0,f.FD)(T.EY,{css:f5.textContainer,children:["Showing"," ",(0,f.FD)("span",{css:f5.emphasizedText,children:[n," of ",t," changed ",(0,i8.A)("file",t),"."]})]})},f9=function(e){var n=e.query,t=e.setQuery,r=e.totalDiffs,i=e.diffs,o=e.splitOrUnified,a=e.setSplitOrUnified,l=e.folded,s=e.setFolded,c=(0,w.useMemo)(function(){return i.filter(function(e){var t="".concat(e.final.path,"/").concat(e.final.filename),r="".concat(e.initial.path,"/").concat(e.initial.filename);return t.toLowerCase().includes(n.toLowerCase())||r.toLowerCase().includes(n.toLowerCase())})},[n,i]);return(0,f.FD)(L.S,{gap:16,children:[(0,f.Y)(dI.I,{value:n,onChange:function(e){t(e.target.value)},onClear:function(){t("")},loading:!1,placeholder:"Filter changed files"}),(0,f.FD)(f3,{children:[(0,f.Y)(f7,{files:c.length,totalFiles:r}),i.length>0?(0,f.Y)(f6,{value:o,onChange:function(e){return a(e)}}):null]}),c.map(function(e){var n;return(0,f.Y)(rI,{folded:null==(n=l[e.id])||n,setFolded:function(n){return s(e.id,n)},diff:e,splitOrUnified:o},e.id)})]})},he=(0,V.x)({metaContainer:[j.wp.flex.wrap]});let hn=function(e){var n=e.author,t=e.committer,r=fs(t,n),i=fc(t.date,n.date);return(0,f.FD)(L.S,{css:he.metaContainer,row:!0,gap:4,align:"center",children:[r&&i?(0,f.FD)(f.FK,{children:[(0,f.Y)(dR.A,{name:n.name,email:n.email,color:"dimmer",allowPlaceholderAvatar:!0,small:!0}),(0,f.Y)(T.EY,{variant:"small",children:"authored"}),(0,f.Y)(eg.Dc,{date:n.date,textColor:"dimmest",textVariant:"small"}),(0,f.Y)(T.EY,{variant:"small",children:"and"})]}):null,r&&!i?(0,f.FD)(f.FK,{children:[(0,f.Y)(dR.A,{name:n.name,email:n.email,color:"dimmer",allowPlaceholderAvatar:!0,small:!0}),(0,f.Y)(T.EY,{variant:"small",children:"authored"}),(0,f.Y)(T.EY,{variant:"small",children:"and"})]}):null,(0,f.Y)(dR.A,{name:t.name,email:t.email,color:"dimmer",allowPlaceholderAvatar:!0,small:!0}),!r&&i?(0,f.FD)(f.FK,{children:[(0,f.Y)(T.EY,{variant:"small",children:"authored "}),(0,f.Y)(eg.Dc,{date:n.date,textColor:"dimmest",textVariant:"small"}),(0,f.Y)(T.EY,{variant:"small",children:"and "})]}):null,(0,f.Y)(T.EY,{variant:"small",children:"committed"}),(0,f.Y)(eg.Dc,{date:t.date,textColor:"dimmest",textVariant:"small"})]})};var ht=(0,V.x)({dullText:[j.wp.color.foregroundDimmest],tooltipContainer:[j.wp.display.inlineBlock]}),hr=function(e){var n=e.onViewCommitClick,t=e.hash;return(0,f.Y)("span",{css:ht.tooltipContainer,children:(0,f.Y)(P.m_,{tooltip:"View commit",children:(0,f.Y)("button",{css:[j.wp.reset.button,j.wp.linkStyle,j.wp.fontWeight.medium],onClick:function(){return n(t)},children:t.slice(0,7)})})})};let hi=function(e){var n=e.parents,t=e.grafted,r=e.onViewCommitClick;return(0,f.FD)(T.EY,{variant:"small",children:[(0,f.FD)("span",{css:ht.dullText,children:[t?"Grafted with ":null,n.length," ",(0,i8.A)("parent",n.length)," "]}),0===n.length?null:n.map(function(e,t){return(0,f.FD)(w.Fragment,{children:[(0,f.Y)(hr,{hash:e,onViewCommitClick:r}),t===n.length-1?"":(0,f.Y)("span",{css:ht.dullText,children:", "})]},e)})]})},ho=function(e){var n=e.source,t=e.target;return t?(0,f.FD)(f.FK,{children:[(0,f.Y)("span",{children:"branch"}),(0,f.Y)(aZ,{name:n}),(0,f.Y)("span",{children:" into "}),(0,f.Y)(aZ,{name:t})]}):(0,f.FD)(f.FK,{children:[(0,f.Y)("span",{children:"branch"}),(0,f.Y)(aZ,{name:n})]})};var ha="gitCommitSubject",hl=(0,nF.AH)([j.wp.display.inline,{fontSize:"inherit",fontWeight:"inherit",lineHeight:"inherit"}]),hs=(0,V.x)({header:[(u={},(0,g._)(u,"& .".concat(ha),hl),(0,g._)(u,"& .".concat(ha," > div"),hl),(0,g._)(u,"& .".concat(ha," p"),hl),u)],markerContainer:[j.wp.display.inlineFlex,j.wp.mr(4)],mergeContainer:[j.wp.rowWithGap(4),j.wp.flex.row,j.wp.flex.wrap,j.wp.align.stretch,j.wp.flex.shrink(0)]});let hc=function(e){var n=e.merge,t=e.revert,r=e.subject,i=e.remotes,o=e.onViewCommitClick,a=(0,w.useMemo)(function(){var e,r=null;if(((null==n?void 0:n.type)==="pull-request"?r=n.id:t&&(null==t?void 0:t.pr)&&(r=t.pr),r)&&i){var o=i.get("origin");if(!o){var a=Array.from(i.values());if(1!==a.length)return;o=a[0]}return null!=(e=db(o))?e:void 0}},[n,i,t]);return(0,f.FD)(T.Y9,{level:2,variant:"subheadDefault",multiline:!0,css:hs.header,children:[n?(0,f.FD)("span",{css:hs.mergeContainer,children:[(0,f.Y)("span",{css:hs.markerContainer,children:(0,f.Y)(pK,{type:"merge"})}),(0,f.Y)(aH,{text:"merged"}),(null==n?void 0:n.type)==="pull-request"?(0,f.FD)(f.FK,{children:["PR ",(0,f.Y)(az,{id:n.id,hash:!0}),(null==t?void 0:t.pr)?(0,f.FD)(f.FK,{children:[(0,f.Y)(aB,{text:"reverts"})," ",(0,f.Y)(az,{id:t.pr,hash:!0})]}):null]}):null,(null==n?void 0:n.type)==="branch"?(0,f.Y)(f.FK,{children:(0,f.Y)(ho,{source:n.source,target:n.target})}):null]}):null,t&&!n?(0,f.FD)(f.FK,{children:[(0,f.Y)("span",{css:hs.markerContainer,children:(0,f.Y)(pK,{type:"revert"})}),(0,f.Y)(aB,{text:"reverted"})," ",(0,f.Y)("button",{css:[j.wp.reset.button,j.wp.linkStyle,j.wp.fontWeight.medium],onClick:function(){(null==t?void 0:t.hash)!==void 0&&o(t.hash)},children:t.hash.slice(0,7)})," - "]}):null,(0,f.Y)(aG,{className:ha,subject:r,remoteName:a})]})};var hu=(0,V.x)({splitContainer:[j.wp.display.flex,j.wp.flex.row,j.wp.flex.shrink(1),j.wp.flex.wrap,j.wp.justify.spaceBetween,j.wp.maxWidth("100%"),j.wp.border({color:k.LU.outlineDimmest,direction:"bottom"}),j.wp.pb(16)]});let hd=function(e){var n,t,r=e.git,i=e.commit,o=e.info,a=e.onViewCommitClick,l=void 0===a?function(){}:a,s=e.remotes,c=e.status,u=(0,w.useMemo)(function(){return(0,pg.b)(c?c.changes.map(function(e){return e.path}):[])},[c]),d=(0,w.useMemo)(function(){if(!c)return[];var e=[],n=!0,t=!1,r=void 0;try{for(var i,o=c.changes[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value;a.type.worktree!==t8.PX.UNMODIFIED&&e.push(a)}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}return e},[c]),p=(0,nN.A)().showConfirm,h=di(),m=(0,v._)((0,w.useState)(!1),2),g=m[0],S=m[1],Y=(0,v._)((0,w.useState)(""),2),A=Y[0],x=Y[1],C=(0,v._)((0,w.useState)("Split"),2),_=C[0],k=C[1],D=(0,v._)((0,w.useState)("Markdown"),2),E=D[0],R=D[1],I=(0,v._)((0,w.useState)({}),2),F=I[0],P=I[1],U=(0,v._)((0,w.useState)([]),2),N=U[0],O=U[1],M=fo(i,o),B=M.hideBody,H=M.merge,z=M.revert,W=i.hash,G=i.subject,V=i.body,Z=i.committer,q=i.author,K=i.grafted,$=null!=(t=i.parents)?t:[],J=fX(i),Q=(0,w.useCallback)((0,y._)(function(){var e,n,t,o=arguments;return(0,b.YH)(this,function(a){switch(a.label){case 0:return e=!(o.length>0)||void 0===o[0]||o[0],[4,r.restoreFiles(e,i.hash)];case 1:if((n=a.sent()).error)return[3,3];return[4,r.status()];case 2:return(t=a.sent()).error?(h(t.error),rn({context:"commit-view",gitService:r,result:t,data:{files:e,commit:i.hash}})):p("Restored commit!"),r.forceRefresh(),[3,4];case 3:h(n.error),rn({context:"commit-view",gitService:r,result:n,data:{files:e,commit:i.hash}}),a.label=4;case 4:return[2]}})}),[i.hash,r,h,p]),en=pI(u),et=en.openRestoreConfirmationModal,er=en.restoreConfirmationModal,ei=(0,w.useCallback)((0,y._)(function(){var e,n,t,r=arguments;return(0,b.YH)(this,function(i){switch(i.label){case 0:if(!0!==(e=!(r.length>0)||void 0===r[0]||r[0]))return[3,6];if(S(!0),0!==d.length)return[3,2];return[4,Q()];case 1:return i.sent(),S(!1),[2];case 2:return[4,et(d)];case 3:if(!i.sent())return[3,5];return[4,Q()];case 4:i.sent(),i.label=5;case 5:return S(!1),[3,10];case 6:if("string"==typeof e){if(!(t=d.find(function(n){return n.path===e})))throw S(!1),Error("Could not find file in worktree list");n=[t]}else n=d.filter(function(n){return e.includes(n.path)});return[4,et(n)];case 7:if(!i.sent())return[3,9];return[4,Q(e)];case 8:i.sent(),i.label=9;case 9:S(!1),i.label=10;case 10:return[2]}})}),[et,Q,d]);(0,w.useEffect)(function(){var e;O(null!=(e=null==J?void 0:J.diffs.map(function(e){return(0,nt._)((0,ee._)({},e),{loading:!0})}))?e:[])},[J]),(0,w.useEffect)(function(){null!==J&&J.error&&h(J.error)},[J,h]);var eo=(n=(0,y._)(function(e,n){var t,o,a;return(0,b.YH)(this,function(l){switch(l.label){case 0:if(P(function(t){var r=(0,ee._)({},t);return r[e]=n,r}),!(t=N.find(function(n){return n.id===e})))return h(t8.uA.INVALID_STATE),rn({context:"commit-view",gitService:r,result:{error:t8.uA.INVALID_STATE},data:{diffId:e}}),[2];if(!(!n&&t.loading))return[3,4];l.label=1;case 1:return l.trys.push([1,3,,4]),[4,f1(r,i,t)];case 2:return o=l.sent(),O(function(n){var t=(0,X._)(n),r=t.findIndex(function(n){return n.id===e});return t[r]=o,t}),[3,4];case 3:return rn({context:"commit-view",gitService:r,result:a=l.sent(),data:{diffId:e}}),h(a),[2];case 4:return[2]}})}),function(e,t){return n.apply(this,arguments)});return(0,f.FD)(L.S,{p:16,gap:16,children:[(0,f.Y)(hc,{remotes:s,merge:H,revert:z,subject:G,onViewCommitClick:l}),(0,f.FD)(f3,{children:[(0,f.FD)(L.S,{row:!0,gap:8,css:[j.wp.flex.shrink(1)],align:"start",children:[(0,f.Y)(fa,{hash:W}),(0,f.Y)(fl,{onClick:function(){return ei()},text:"Restore All",loading:g})]}),B?null:(0,f.Y)(f8,{value:E,onChange:function(e){R(e)}})]}),B?null:(0,f.Y)(aV,{body:V,view:E}),(0,f.FD)(L.S,{css:hu.splitContainer,children:[(0,f.Y)(hn,{author:q,committer:Z}),(0,f.Y)(hi,{parents:$,grafted:K,onViewCommitClick:l})]}),null!==H?(0,f.Y)(T.EY,{variant:"small",color:"dimmest",children:"There is more than one parent, diffing against the first parent."}):null,null===J?(0,f.Y)(fZ,{}):(0,f.Y)(f9,{query:A,setQuery:x,totalDiffs:J.diffs.length,diffs:N,splitOrUnified:_,setSplitOrUnified:k,folded:F,setFolded:eo}),er]})};function hp(e){var n=e.hash,t=e.remotes,r=e.onViewCommitClick,i=e.switchMode,o=e.status,a=(0,A.A)().git,l=di(),s=fQ(null!=n?n:"");if(null===s)return(0,f.Y)(fZ,{});if(s.error)return s.error===t8.uA.NOT_INITIALIZED?i({type:ln.C.CURRENT_BRANCH}):(l(s.error),(s.error===t8.uA.UNKNOWN||s.error===t8.uA.UNKNOWN_NOT_GIT)&&rn({context:"commit-view",gitService:a,result:s,data:{hash:n}})),null;if(null===s.commit)return l(t8.uA.UNKNOWN),null;var c=s.commit,u=pj(c)||pH(c);return(0,f.Y)(hd,{git:a,commit:c,info:u,onViewCommitClick:r,remotes:t,status:o})}var hf=(0,V.x)({branch:[i9.b.nofill,j.wp.py(12),j.wp.px(8),j.wp.colWithGap(2),j.wp.justify.center,j.wp.borderRadius(8),j.wp.flex.shrink(1)],branchMetadata:[j.wp.flex.shrink(1)]});function hh(e){var n=e.branch,t=e.current,r=e.onClick;return(0,f.FD)(L.S,{css:hf.branch,tabIndex:0,role:"button","aria-label":"Switch to branch ".concat((0,t8.qK)(n,!0)),onClick:r,onKeyDown:function(e){("Enter"===e.key||" "===e.key)&&(null==r||r())},children:[(0,f.Y)(T.EY,{multiline:!1,children:(0,f.Y)(aZ,{name:n.name,remote:n.type===t8.xx.REMOTE?n.remote:null,current:void 0!==t&&t,onClick:r,icon:!0})}),(0,f.Y)(hm,{branch:n})]})}function hm(e){var n=e.branch;return(0,f.FD)(L.S,{css:hf.branchMetadata,row:!0,gap:8,align:"center",children:[(0,f.Y)(dR.A,{name:n.commit.author.name,email:n.commit.author.email,color:"dimmest",allowPlaceholderAvatar:!0}),(0,f.Y)(eg.Dc,{date:n.commit.author.date,textColor:"dimmest",textVariant:"small"})]})}var hg=(0,V.x)({expandButton:[{verticalAlign:"middle"},j.wp.justify.spaceBetween],branchListContainer:[j.wp.display.flex],topRowInteractive:[{verticalAlign:"middle"},j.wp.justify.spaceBetween,j.wp.borderRadius(8,8,0,0)],branchList:[j.wp.borderRadius(8)],branchListFoldable:[j.wp.borderRadius(0,0,8,8)]});function hv(e){var n=e.name,t=e.branches,r=e.current,i=void 0===r?null:r,o=e.foldable,a=void 0!==o&&o,l=e.folded,s=e.switchBranch,c=(0,v._)((0,w.useState)(!!a&&void 0!==l&&l),2),u=c[0],d=c[1],p=(0,w.useMemo)(function(){return t.map(function(e){return(0,f.Y)(hh,{branch:e,current:(0,t8.FF)(e,i),onClick:function(){return s(e)}},(0,t8.fn)(e))})},[t,i,s]);return u?(0,f.Y)(eS.$n,{css:hg.expandButton,text:n,iconRight:(0,f.Y)(rS.A,{}),onClick:function(){return d(!1)},size:"big"}):a?(0,f.FD)(L.S,{css:hg.branchListContainer,children:[(0,f.Y)(eS.$n,{css:hg.topRowInteractive,text:n,iconRight:(0,f.Y)(rY.A,{}),onClick:function(){return d(!0)},size:"big"}),(0,f.Y)(eu.ui,{css:hg.branchListFoldable,elevated:!0,children:p})]}):(0,f.FD)(L.S,{css:hg.branchListContainer,children:[(0,f.Y)(L.S,{p:4,row:!0,align:"center",justify:"space-between",children:(0,f.Y)(T.EY,{variant:"subheadDefault",multiline:!1,children:n})}),(0,f.Y)(eu.ui,{css:hg.branchList,elevated:!0,children:p})]})}var hw=(0,V.x)({container:[j.wp.borderRadius(8)],button:[j.wp.flex.grow(1)],inputDisabled:[{opacity:.75}]});function hy(){var e=(0,v._)((0,w.useState)(!0),2),n=e[0],t=e[1],r=(0,v._)((0,w.useState)(""),2),i=r[0],o=r[1],a=(0,v._)((0,w.useState)(!1),2),l=a[0],s=a[1],c=di(),u=(0,A.A)().git;function d(){t(!0),o("")}function p(){return h.apply(this,arguments)}function h(){return(h=(0,y._)(function(){var e;return(0,b.YH)(this,function(r){switch(r.label){case 0:if(n||!i||l)return[2];return s(!0),[4,u.createBranch({name:i,checkout:!0})];case 1:return(e=r.sent()).error?(c(e.error),s(!1)):(u.forceRefresh(),s(!1),o(""),t(!0),da("branch-created")),[2]}})})).apply(this,arguments)}if(n)return(0,f.Y)(eS.$n,{text:"Create Branch",iconLeft:(0,f.Y)(tT.A,{}),onClick:function(){return t(!1)}});var m=!i||!(0,t8.eB)(i);return(0,f.FD)(eu.ui,{css:hw.container,p:8,gap:8,elevated:!0,children:[(0,f.Y)(hb,{value:i,onChange:o,onSubmit:p,onCancel:d,disabled:l}),(0,f.FD)(L.S,{row:!0,gap:4,children:[(0,f.Y)(eS.$n,{css:hw.button,text:"Cancel",onClick:d,disabled:l}),(0,f.Y)(eS.$n,{css:hw.button,text:"Create Branch",colorway:"primary",iconLeft:(0,f.Y)(tT.A,{}),onClick:p,loading:l,disabled:m})]})]})}function hb(e){var n=e.value,t=e.disabled,r=e.onChange,i=e.onSubmit,o=e.onCancel;function a(e){(0,t8.Uy)(e)&&(null==r||r(e))}return(0,f.Y)(eA.pd,{value:n,css:t?hw.inputDisabled:void 0,disabled:t,placeholder:"Enter a name for your new branch",onChange:function(e){return a(e.currentTarget.value)},onKeyDown:function(e){var t=e.key,r=function(){return e.preventDefault()};switch(t){case"Enter":null==i||i(),r();break;case"Escape":null==o||o(),r();break;case" ":if(""===n){r();break}a(n+"-"),r()}},onBlur:function(){""===n&&(null==o||o())},autoFocus:!0})}function hS(e){var n,t,r=e.currentBranch,i=e.switchMode,o=di(),a=(0,A.A)().git,l=(0,v._)((0,w.useState)(null),2),s=l[0],c=l[1],u=(0,t9.A)((n=(0,y._)(function(e){var n,t,r,i,a,l,s,c,u,d,p,f,h,m,g,v,w,y,S;return(0,b.YH)(this,function(b){switch(b.label){case 0:return[4,e.listBranches()];case 1:if((n=b.sent()).error)return o(n.error),rn({context:"dashboard-view",gitService:e,result:n}),[2,n];return[4,e.findDefaultBranches()];case 2:if((t=b.sent()).error)return o(t.error),[2,t];r=n.branches,i=new Set,a=!0,l=!1,s=void 0;try{for(c=function(){var e=d.value,n=r.find(function(n){return(0,t8.CC)(n,e)});n&&i.add(n)},u=t.refs[Symbol.iterator]();!(a=(d=u.next()).done);a=!0)c()}catch(e){l=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw s}}p=Date.now()-5184e6,f=[],h=[],m=!0,g=!1,v=void 0;try{for(w=r[Symbol.iterator]();!(m=(y=w.next()).done);m=!0)S=y.value,i.has(S)||(S.commit.author.date>p?f.push(S):h.push(S))}catch(e){g=!0,v=e}finally{try{m||null==w.return||w.return()}finally{if(g)throw v}}return[2,{active:f,stale:h,important:Array.from(i),error:null}]}})}),function(e){return n.apply(this,arguments)}),[o]),d=(t=(0,y._)(function(e){var n;return(0,b.YH)(this,function(t){switch(t.label){case 0:if(null!==s)return[2];return(0,t8.CC)(r,e)&&i({type:ln.C.CURRENT_BRANCH}),c(e),[4,a.switchBranch(e)];case 1:return(n=t.sent()).error?(o(n.error),rn({context:"dashboard-view",gitService:a,result:n,data:{branch:e.name}}),c(null)):(a.forceRefresh(),da("branch-switched")),[2]}})}),function(e){return t.apply(this,arguments)});if((0,w.useEffect)(function(){null!==s&&(0,t8.CC)(r,s)&&(c(null),i({type:ln.C.CURRENT_BRANCH}))},[r,s,i]),!u||null!==s)return(0,f.Y)(fZ,{});if(u.error)return(0,f.Y)("div",{children:u.error});var p=u.active,h=u.stale,m=u.important;return(0,f.Y)(L.S,{gap:8,children:(0,f.FD)(L.S,{pb:8,px:8,gap:16,children:[r?(0,f.FD)(L.S,{gap:8,children:[(0,f.Y)(hv,{branches:[r],current:r,name:"Current Branch",switchBranch:d}),(0,f.Y)(hy,{})]}):null,(0,f.Y)(T.EY,{variant:"subheadDefault",multiline:!1,css:fq.switchToBranch,children:"Switch Branch"}),0===m.length?null:(0,f.Y)(hv,{branches:m,current:r,name:"Important",switchBranch:d,foldable:!0}),0===p.length?null:(0,f.Y)(hv,{branches:p,current:r,name:"Active",switchBranch:d,foldable:!0}),0===h.length?null:(0,f.Y)(hv,{branches:h,current:r,name:"Stale",switchBranch:d,foldable:!0,folded:!0})]})})}function hY(){return(0,f.FD)(L.S,{children:[(0,f.Y)(T.EY,{multiline:!1,children:"Unsupported state: your HEAD is currently detached."}),(0,f.Y)(T.EY,{multiline:!1,children:"Please checkout a branch."})]})}function hA(){return(0,f.FD)(L.S,{children:[(0,f.Y)(T.EY,{multiline:!0,children:"Unsupported state: your index is currently locked. This can happen if multiple git processes are running operations at the same time."}),(0,f.Y)(T.EY,{multiline:!0,children:"Please resolve the issue. If you are sure you do not have git operations running, you can delete your .git/index.lock file."})]})}var hx=(0,V.x)({fileLeft:[j.wp.flex.grow(1),j.wp.align.center]});function hC(e){var n=e.files,t=e.uniquePathMap,r=e.onFileClick,i=[];if(n instanceof Map){var o=!0,a=!1,l=void 0;try{for(var s,c=n[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var u=(0,v._)(s.value,2),d=u[0],p=u[1],h=t.get(d);i.push({path:d,prefix:h,resolved:p})}}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}}else{var m=!0,g=!1,w=void 0;try{for(var y,b=n[Symbol.iterator]();!(m=(y=b.next()).done);m=!0){var S=y.value,Y=t.get(S);i.push({path:S,prefix:Y,resolved:!0})}}catch(e){g=!0,w=e}finally{try{m||null==b.return||b.return()}finally{if(g)throw w}}}return(0,f.Y)(L.S,{gap:4,children:i.map(function(e){var n=e.path,t=e.prefix,i=e.resolved;return(0,f.FD)(L.S,{row:!0,gap:8,align:"center",children:[(0,f.FD)(L.S,{css:hx.fileLeft,row:!0,gap:8,children:[(0,f.Y)(ti.A,{path:n}),(0,f.Y)(T.EY,{multiline:!1,children:(0,f.Y)(aq,{path:n,prefix:t,onClick:function(){return r({path:n,type:"conflict"})}})})]}),i?(0,f.Y)(oR.A,{color:k.LU.greenStronger}):(0,f.Y)(iF.A,{color:k.LU.orangeStronger})]},n)})})}function h_(e){var n=e.hasConflicts?(0,f.FD)(f.FK,{children:[(0,f.Y)("span",{css:j.wp.fontWeight.medium,children:"Resolve all conflicts to complete merge."}),(0,f.Y)("br",{}),(0,f.Y)("span",{children:"You can't do anything else until the merge has been completed or aborted."})]}):(0,f.FD)(f.FK,{children:[(0,f.Y)("span",{css:j.wp.fontWeight.medium,children:"You are in the middle of a merge."}),(0,f.Y)("br",{}),(0,f.Y)("span",{children:"You can't do anything else until the merge has been completed or aborted. You have no conflicts to resolve, so the merge can be completed without any further action."})]});return(0,f.Y)(iI.N,{colorway:"warning",icon:(0,f.Y)(iF.A,{}),text:n})}var hk=(0,V.x)({left:[{flexBasis:0,flexGrow:1},j.wp.colWithGap(8)],right:{flexBasis:0,flexGrow:1},branch:[j.wp.p(8),j.wp.rowWithGap(4),j.wp.flex.grow(1),j.wp.center,j.wp.borderRadius(8)]});function hD(e){var n,t=e.branch,r=e.refs,i=e.refsAreBranches,o=e.isUpstreamPull;if(!r.length)return null;if(o){var a=(0,v._)((0,t8.xM)(r[0]),2),l=a[0],s=a[1];l&&s&&(n=(0,f.Y)(eu.ui,{css:hk.branch,elevated:!0,children:(0,f.Y)(aZ,{remote:l,name:s,icon:!0,heading:!0})}))}return n||(n=r.map(function(e){return(0,f.Y)(eu.ui,{css:hk.branch,elevated:!0,children:(0,f.Y)(aZ,{name:e,icon:!!i||(0,f.Y)(rT.A,{size:16}),heading:!0})},e)})),(0,f.FD)(L.S,{row:!0,gap:4,align:"center",justify:"space-between",children:[(0,f.Y)(L.S,{css:hk.left,children:n}),(0,f.Y)(rb.A,{size:24,color:k.LU.foregroundDimmest}),(0,f.Y)(L.S,{css:hk.right,children:(0,f.Y)(eu.ui,{css:hk.branch,elevated:!0,children:(0,f.Y)(aZ,{name:t,icon:!0,current:!0,heading:!0})})})]})}function hE(e){return(0,f.Y)(n0.Ay,(0,nt._)((0,ee._)({},e),{children:(0,f.Y)("path",{fillRule:"evenodd",d:"M6 3.75a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5ZM2.25 6a3.75 3.75 0 1 1 4.527 3.67 8.25 8.25 0 0 0 7.554 7.553A3.751 3.751 0 0 1 21.75 18a3.75 3.75 0 0 1-7.43.726 9.75 9.75 0 0 1-7.57-4.53V21a.75.75 0 0 1-1.5 0V9.675A3.751 3.751 0 0 1 2.25 6ZM18 15.75a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5Z",clipRule:"evenodd"})}))}var hR=(0,V.x)({fakePaneHeader:[j.wp.backgroundColor.backgroundDefault,j.wp.align.center,{borderBottom:"1px solid ".concat(k.LU.outlineDimmer)}],listContainer:[j.wp.borderRadius(8)],list:[],listDisabled:[{opacity:.5},j.wp.pb(8),j.wp.colWithGap(8)],listHeader:[j.wp.pb(4),j.wp.flex.grow(1),j.wp.border({color:k.LU.outlineDimmer,direction:"bottom"})],listFiles:[j.wp.px(8)],includeOtherFiles:[{cursor:"pointer",maxWidth:"max-content",userSelect:"none"},j.wp.rowWithGap(8)]});function hI(e){var n,t=e.onFileClick,r=e.gotoPendingState,i=(0,v._)((0,w.useState)(!0),2),o=i[0],a=i[1],l=(0,v._)((0,w.useState)(!1),2),s=l[0],c=l[1],u=(0,v._)((0,w.useState)(!1),2),d=u[0],p=u[1],h=s||d,m=di(),g=(0,A.A)().git,S=(0,w.useId)(),Y=(0,t9.A)((n=(0,y._)(function(e){var n,t,r,i,o,a,l,s,c,u,d,p,f,h,m,g,w,y,S,Y;return(0,b.YH)(this,function(b){switch(b.label){case 0:return[4,e.status()];case 1:if((n=b.sent()).error)return rn({context:"use-merging-view-state-status",gitService:e,result:n}),[2,n];if(!(t=n.branch))return[2,{error:t8.uA.HEAD_DETACHED}];return[4,e.getConflictingFiles()];case 2:if((r=b.sent()).error)return[2,r];return i=r.files,[4,e.getMergingRefs()];case 3:if((o=b.sent()).error)return rn({context:"use-merging-view-state-merging-refs",gitService:e,result:o,data:{status:n,conflictingFiles:i}}),[2,o];a=o.commits,c=(s=(l=o.branches).length>0)?l:a,u=n.changes.filter(function(e){return!e.unmerged}).map(function(e){return e.path}),d=!0,p=!0,f=!1,h=void 0;try{for(m=i[Symbol.iterator]();!(p=(g=m.next()).done);p=!0)if(!(0,v._)(g.value,2)[1]){d=!1;break}}catch(e){f=!0,h=e}finally{try{p||null==m.return||m.return()}finally{if(f)throw h}}return w=(0,pg.b)(n.changes.map(function(e){return e.path})),y=i.size>0,S=u.length>0,Y=null!==n.upstream&&1===l.length&&l[0]===n.upstream.branch,[2,{refs:c,branch:t,conflictingFiles:i,otherChangedFiles:u,refsAreBranches:s,allIsResolved:d,uniquePathMap:w,hasConflicts:y,hasOtherChanges:S,isUpstreamPull:Y,error:null}]}})}),function(e){return n.apply(this,arguments)}));if((0,w.useEffect)(function(){(null==Y?void 0:Y.error)&&m(Y.error)},[null==Y?void 0:Y.error,m]),!Y)return(0,f.Y)(fZ,{});if(Y.error)return null;var x=Y.refs,C=Y.branch,_=Y.conflictingFiles,k=Y.otherChangedFiles,D=Y.refsAreBranches,E=Y.allIsResolved,R=Y.uniquePathMap,I=Y.hasConflicts,F=Y.hasOtherChanges,P=Y.isUpstreamPull;function U(){return(U=(0,y._)(function(){var e,n,t,i,a,l,s,u,d,p,f;return(0,b.YH)(this,function(v){switch(v.label){case 0:if(!E||h)return[2];c(!0),e=[],n=!0,t=!1,i=void 0;try{for(a=_.keys()[Symbol.iterator]();!(n=(l=a.next()).done);n=!0)s=l.value,e.push(s)}catch(e){t=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(t)throw i}}return o&&(u=e).push.apply(u,(0,X._)(k)),[4,g.stageFiles({all:!1})];case 1:if((d=v.sent()).error)return m(d.error),c(!1),[2];return[4,g.stageFiles({add:e})];case 2:if((p=v.sent()).error)return m(p.error),c(!1),[2];return[4,g.mergeContinue()];case 3:if(!(f=v.sent()).error)return[3,5];return[4,g.stageFiles({all:!1})];case 4:return v.sent(),m(f.error),c(!1),[3,6];case 5:r(),g.forceRefresh(),v.label=6;case 6:return[2]}})})).apply(this,arguments)}function N(){return(N=(0,y._)(function(){var e;return(0,b.YH)(this,function(n){switch(n.label){case 0:if(h)return[2];return p(!0),[4,g.mergeAbort()];case 1:return(e=n.sent()).error?(m(e.error),p(!1),rn({context:"merging-view-abort",gitService:g,result:e,data:{branch:C}})):(r(),g.forceRefresh()),[2]}})})).apply(this,arguments)}var O=P?"Complete in-progress pull":"Complete in-progress merge";return I&&(O=P?"Resolve pull conflicts":"Resolve merge conflicts"),(0,f.FD)(L.S,{children:[(0,f.FD)(L.S,{css:hR.fakePaneHeader,p:8,row:!0,gap:8,children:[(0,f.Y)(hE,{}),(0,f.Y)(T.EY,{variant:"subheadDefault",multiline:!1,children:O})]}),(0,f.FD)(L.S,{pt:16,pb:8,px:8,gap:12,children:[(0,f.Y)(hD,{branch:C,refs:x,refsAreBranches:D,isUpstreamPull:P}),(0,f.Y)(h_,{hasConflicts:I}),(0,f.FD)(eu.ui,{css:hR.listContainer,p:8,gap:8,elevated:!0,children:[(0,f.FD)(L.S,{pb:8,gap:8,children:[(0,f.Y)(L.S,{css:hR.listHeader,children:(0,f.Y)(T.EY,{css:j.wp.fontWeight.medium,multiline:!1,children:"Conflicting Files"})}),(0,f.Y)(L.S,{css:hR.listFiles,children:I?(0,f.Y)(hC,{files:_,uniquePathMap:R,onFileClick:t}):(0,f.Y)(T.EY,{variant:"small",color:"dimmest",multiline:!1,children:"There are no conflicting files in this merge."})})]}),F?(0,f.FD)(L.S,{css:o?hR.list:hR.listDisabled,children:[(0,f.Y)(L.S,{css:hR.listHeader,children:(0,f.Y)(T.EY,{css:j.wp.fontWeight.medium,multiline:!1,children:"Other Changed Files"})}),(0,f.Y)(L.S,{css:hR.listFiles,children:(0,f.Y)(hC,{files:k,uniquePathMap:R,onFileClick:t})})]}):null]}),(0,f.FD)(L.S,{css:hR.includeOtherFiles,tag:"label",children:[(0,f.Y)(nH.S,{id:S,checked:o,onChange:function(e){return a(e)}}),(0,f.Y)(T.EY,{multiline:!1,children:"Include other changed files in commit"})]}),(0,f.FD)(L.S,{gap:8,children:[(0,f.Y)(eS.$n,{text:P?"Complete pull":"Complete merge and commit",colorway:"primary",iconLeft:s?(0,f.Y)(to.A,{}):(0,f.Y)(hE,{}),disabled:!E||h,loading:s,onClick:function(){return U.apply(this,arguments)}}),(0,f.Y)(eS.$n,{text:P?"Abort pull":"Abort merge",colorway:"negative",iconLeft:d?(0,f.Y)(to.A,{}):(0,f.Y)(a0.A,{}),disabled:h,loading:d,onClick:function(){return N.apply(this,arguments)}})]})]})]})}var hF=(0,V.x)({fakePaneHeader:[j.wp.backgroundColor.backgroundDefault,j.wp.align.center,{borderBottom:"1px solid ".concat(k.LU.outlineDimmer)}],listContainer:[j.wp.borderRadius(8)],list:[],listDisabled:[{opacity:.5},j.wp.pb(8),j.wp.colWithGap(8)],listHeader:[j.wp.pb(4),j.wp.flex.grow(1),j.wp.border({color:k.LU.outlineDimmer,direction:"bottom"})],listFiles:[j.wp.px(8)],includeOtherFiles:[{cursor:"pointer",maxWidth:"max-content",userSelect:"none"},j.wp.rowWithGap(8)]});function hT(e){var n,t=e.onFileClick,r=e.gotoPendingState,i=(0,v._)((0,w.useState)(!0),2),o=i[0],a=i[1],l=(0,v._)((0,w.useState)(!1),2),s=l[0],c=l[1],u=(0,v._)((0,w.useState)(!1),2),d=u[0],p=u[1],h=s||d,m=di(),g=(0,A.A)().git,S=(0,w.useId)(),Y=(0,t9.A)((n=(0,y._)(function(e){var n,t,r,i,o,a,l,s,c,u,d,p,f,h;return(0,b.YH)(this,function(m){switch(m.label){case 0:return[4,e.status()];case 1:if((n=m.sent()).error)return rn({context:"use-rebasing-view-state-status",gitService:e,result:n}),[2,n];if(!(t=n.branch))return[2,{error:t8.uA.HEAD_DETACHED}];return[4,e.getConflictingFiles()];case 2:if((r=m.sent()).error)return[2,r];i=r.files,o=n.changes.filter(function(e){return!e.unmerged}).map(function(e){return e.path}),a=!0,l=!0,s=!1,c=void 0;try{for(u=i[Symbol.iterator]();!(l=(d=u.next()).done);l=!0)if(!(0,v._)(d.value,2)[1]){a=!1;break}}catch(e){s=!0,c=e}finally{try{l||null==u.return||u.return()}finally{if(s)throw c}}return p=(0,pg.b)(n.changes.map(function(e){return e.path})),f=i.size>0,h=o.length>0,[2,{branch:t,conflictingFiles:i,otherChangedFiles:o,allIsResolved:a,uniquePathMap:p,hasConflicts:f,hasOtherChanges:h,error:null}]}})}),function(e){return n.apply(this,arguments)}));if((0,w.useEffect)(function(){(null==Y?void 0:Y.error)&&m(Y.error)},[null==Y?void 0:Y.error,m]),!Y)return(0,f.Y)(fZ,{});if(Y.error)return null;var x=Y.branch,C=Y.conflictingFiles,_=Y.otherChangedFiles,k=Y.allIsResolved,D=Y.uniquePathMap,E=Y.hasConflicts,R=Y.hasOtherChanges;function I(){return(I=(0,y._)(function(){var e,n,t,i,a,l,s,u,d,p,f;return(0,b.YH)(this,function(v){switch(v.label){case 0:if(!k||h)return[2];c(!0),e=[],n=!0,t=!1,i=void 0;try{for(a=C.keys()[Symbol.iterator]();!(n=(l=a.next()).done);n=!0)s=l.value,e.push(s)}catch(e){t=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(t)throw i}}return o&&(u=e).push.apply(u,(0,X._)(_)),[4,g.stageFiles({all:!1})];case 1:if((d=v.sent()).error)return m(d.error),c(!1),[2];return[4,g.stageFiles({add:e})];case 2:if((p=v.sent()).error)return m(p.error),c(!1),[2];return[4,g.escapeHatchGitExecWrite("git rebase --continue")];case 3:if(!(f=v.sent()).error)return[3,5];return[4,g.stageFiles({all:!1})];case 4:return v.sent(),m(f.error),c(!1),[3,6];case 5:r(),g.forceRefresh(),v.label=6;case 6:return[2]}})})).apply(this,arguments)}function F(){return(F=(0,y._)(function(){var e;return(0,b.YH)(this,function(n){switch(n.label){case 0:if(h)return[2];return p(!0),[4,g.escapeHatchGitExecWrite("git rebase --abort")];case 1:return(e=n.sent()).error?(m(e.error),p(!1),rn({context:"rebasing-view-abort",gitService:g,result:e,data:{branch:x}})):(r(),g.forceRefresh()),[2]}})})).apply(this,arguments)}var P="Complete in-progress rebase";return E&&(P="Resolve conflicts"),(0,f.FD)(L.S,{children:[(0,f.FD)(L.S,{css:hF.fakePaneHeader,p:8,row:!0,gap:8,children:[(0,f.Y)(hE,{}),(0,f.Y)(T.EY,{variant:"subheadDefault",multiline:!1,children:P})]}),(0,f.FD)(L.S,{pt:16,pb:8,px:8,gap:12,children:[(0,f.Y)(h_,{hasConflicts:E}),(0,f.FD)(eu.ui,{css:hF.listContainer,p:8,gap:8,elevated:!0,children:[(0,f.FD)(L.S,{pb:8,gap:8,children:[(0,f.Y)(L.S,{css:hF.listHeader,children:(0,f.Y)(T.EY,{css:j.wp.fontWeight.medium,multiline:!1,children:"Conflicting Files"})}),(0,f.Y)(L.S,{css:hF.listFiles,children:E?(0,f.Y)(hC,{files:C,uniquePathMap:D,onFileClick:t}):(0,f.Y)(T.EY,{variant:"small",color:"dimmest",multiline:!1,children:"There are no conflicting files in this step."})})]}),R?(0,f.FD)(L.S,{css:o?hF.list:hF.listDisabled,children:[(0,f.Y)(L.S,{css:hF.listHeader,children:(0,f.Y)(T.EY,{css:j.wp.fontWeight.medium,multiline:!1,children:"Other Changed Files"})}),(0,f.Y)(L.S,{css:hF.listFiles,children:(0,f.Y)(hC,{files:_,uniquePathMap:D,onFileClick:t})})]}):null]}),(0,f.FD)(L.S,{css:hF.includeOtherFiles,tag:"label",children:[(0,f.Y)(nH.S,{id:S,checked:o,onChange:function(e){return a(e)}}),(0,f.Y)(T.EY,{multiline:!1,children:"Include other changed files in commit"})]}),(0,f.FD)(L.S,{gap:8,children:[(0,f.Y)(eS.$n,{text:"commit and continue rebase",colorway:"primary",iconLeft:s?(0,f.Y)(to.A,{}):(0,f.Y)(hE,{}),disabled:!k||h,loading:s,onClick:function(){return I.apply(this,arguments)}}),(0,f.Y)(eS.$n,{text:"Abort rebase",colorway:"negative",iconLeft:d?(0,f.Y)(to.A,{}):(0,f.Y)(a0.A,{}),disabled:h,loading:d,onClick:function(){return F.apply(this,arguments)}})]})]})]})}function hP(){return(0,f.FD)(L.S,{children:[(0,f.Y)(T.EY,{multiline:!1,children:"Unsupported state: you are in the middle of a rebase."}),(0,f.Y)(T.EY,{multiline:!1,children:"Please finish the rebase manually."})]})}function hL(){return(0,f.FD)(L.S,{children:[(0,f.Y)(T.EY,{multiline:!1,children:"Unsupported state: you are in the middle of a revert."}),(0,f.Y)(T.EY,{multiline:!1,children:"Please finish the revert manually."})]})}var hU=t(13340);function hN(e){var n=e.username,t=e.avatar,r=e.fullName;return(0,f.FD)(L.S,{row:!0,gap:8,align:"center",children:[(0,f.Y)(hU.e,{src:null!=t?t:null,username:n,fullName:r}),(0,f.Y)(T.EY,{variant:"subheadDefault",multiline:!1,children:n})]})}var hO=(0,V.x)({list:{"> div:first-child":j.wp.borderRadius(8,8,0,0),"> div:last-child":[j.wp.borderRadius(0,0,8,8),{border:"none"}]},profile:[i9.b.filled,j.wp.flex.row,j.wp.justify.spaceBetween,j.wp.p(12),j.wp.borderRadius(0),j.wp.border({color:k.LU.outlineDefault,direction:"bottom"})],information:[j.wp.flex.shrink(1)],email:[j.wp.flex.shrink(1)],connectToGithubContainer:[j.wp.backgroundColor.backgroundHigher],notConnectedText:[j.wp.pb(4)],settingsButton:{background:"transparent",border:"none","&:hover":{textDecoration:"underline"}},radio:{pointerEvents:"none"}});function hM(e){var n=e.profiles,t=e.current,r=e.showConnectToGithub,i=e.onSelectProvider,o=(0,is.useRouter)(),a=(0,ip.Po)(o),l=(0,w.useId)();return(0,f.FD)(ex.z,{name:l,css:hO.list,value:null!=t?t:"",children:[n.map(function(e){var n=e.provider===t8.HJ.GITHUB?"GitHub":"Default Profile",r=void 0;return e.provider===t8.HJ.GITHUB&&(r=a?"/mobile/auth/github/app_permissions":"/auth/github/app_permissions?close=1"),(0,f.Y)(hB,{profile:e,providerName:n,current:e.provider===t,onSelectProvider:i,settingsURL:r},e.provider)}),r?(0,f.FD)(L.S,{css:hO.connectToGithubContainer,p:12,gap:4,children:[(0,f.Y)(L.S,{row:!0,gap:4,align:"center",children:(0,f.Y)(hN,{username:"GitHub Account",fullName:"GitHub Account"})}),(0,f.Y)(T.EY,{color:"dimmest",css:hO.notConnectedText,multiline:!1,children:"Your GitHub account is not connected."}),(0,f.Y)(dm,{})]}):null]})}function hB(e){var n=e.profile,t=e.current,r=e.providerName,i=e.settingsURL,o=e.onSelectProvider,a=n.provider,l=n.name,s=n.username,c=n.email,u=n.avatar,d=(0,w.useId)();return(0,f.FD)(L.S,{onClick:function(){return o(a)},css:hO.profile,children:[(0,f.FD)(L.S,{css:hO.information,gap:4,children:[(0,f.FD)(L.S,{row:!0,gap:8,align:"center",children:[(0,f.Y)(hN,{username:s,avatar:u,fullName:l}),i?(0,f.Y)(tK.v,{css:hO.settingsButton,text:"".concat(r," Settings"),iconRight:(0,f.Y)(tR.A,{}),href:i,target:"_blank",variant:"outlined",size:"small"}):(0,f.Y)(T.EY,{color:"dimmest",variant:"small",multiline:!1,children:r})]}),(0,f.FD)(T.EY,{color:"dimmest",css:hO.email,multiline:!1,children:[l," <",c,">"]})]}),(0,f.Y)(ex.s,{css:hO.radio,id:d,checked:t,value:a})]})}var hH=(0,V.x)({profileContainer:[j.wp.flex.column]});function hz(){var e,n=(0,A.A)().git,t=(0,t9.A)((e=(0,y._)(function(e){var n,t,r;return(0,b.YH)(this,function(i){return n=e.getCurrentProfile(),t=e.getProfiles(),[2,{profiles:t,current:null!=(r=null==n?void 0:n.provider)?r:null,hasGitHub:!e.hasProfile(t8.HJ.GITHUB),error:null}]})}),function(n){return e.apply(this,arguments)}));if(!t)return null;if(null!==t.error)return rn({context:"git-profiles",gitService:n,result:{error:t.error}}),null;var r=t.profiles,i=t.current,o=t.hasGitHub;return(0,f.Y)(L.S,{css:hH.profileContainer,children:(0,f.Y)(hM,{profiles:r,current:i,showConnectToGithub:o,onSelectProvider:function(e){n.setCurrentProfile(e),e===t8.HJ.REPLIT_DEFAULT?da("profile-changed",{profile:"replit"}):e===t8.HJ.GITHUB&&da("profile-changed",{profile:"github"})}})})}function hW(){var e=(0,en._)(["\n  query GithubRemoteConfigRepl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        description\n        isPrivate\n        slug\n        url\n      }\n    }\n  }\n"]);return hW=function(){return e},e}function hG(){var e=(0,en._)(["\n  query GithubRemoteConfigUser {\n    currentUser {\n      ... on CurrentUser {\n        id\n        gitHubInfo {\n          accessToken\n        }\n      }\n    }\n  }\n"]);return hG=function(){return e},e}function hV(){var e=(0,en._)(["\n  mutation GithubRemoteConfigCreateGithubRepo($input: CreateGithubRepoInput!) {\n    createGithubRepo(input: $input) {\n      ... on CreateGithubRepoResult {\n        remoteUrl\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return hV=function(){return e},e}var hj={},hZ=(0,et.J1)(hW()),hq=(hG(),(0,et.J1)(hV())),hK=t(76713),h$=t(51705),hJ=(0,V.x)({errorText:[j.wp.color.accentNegativeStronger,j.wp.pl(4)]});function hQ(e){var n,t,r,i,o,a=e.remoteName,l=e.updateRemote,s=(0,nN.A)().showConfirm,c=(0,A.A)().git,u=(0,rK.A)(),d=dp(),p=(0,nB.c)(),h=(0,nI.A)(),m=(0,w.useRef)(null),g=(0,w.useRef)(null),S=(0,v._)((0,w.useState)(),2),Y=S[0],x=S[1],C=(n={variables:{replId:h}},t=(0,ee._)({},hj,n),er.I(hZ,t)).data,_=(null==C?void 0:C.repl.__typename)==="Repl"?C.repl:{slug:void 0,description:void 0,isPrivate:void 0,url:void 0},k=_.slug,D=_.description,E=_.isPrivate,R=_.url,I=(0,v._)((r=(0,ee._)({},hj,void 0),lP.n(hq,r)),2),F=I[0],P=I[1].loading,U=(0,dd.P)({onAuth:function(){da("github-user-connected")}}),N=(0,v._)((0,w.useState)(null==E||E),2),O=N[0],M=N[1],B=(0,v._)((0,w.useState)(k),2),H=B[0],z=B[1],W=(0,v._)((0,w.useState)(),2),G=W[0],V=W[1],Z=(0,v._)((0,w.useState)(null!=D?D:R&&"Repository for https://replit.com".concat(R)),2),q=Z[0],K=Z[1],$=(0,v._)((0,w.useState)(),2),J=$[0],Q=$[1],X=function(){V(void 0),Q(void 0),x(void 0)},en=(i=(0,y._)(function(e){var n,t,r;return(0,b.YH)(this,function(i){switch(i.label){case 0:return[4,c.getRemotes()];case 1:if((n=i.sent()).error)return x("Error finding current remotes, ".concat(n.error)),[2];if(!n.remotes.has(a))return[3,3];return[4,c.setRemoteURL({remote:a,url:e})];case 2:if((t=i.sent()).error)return x("Error (".concat(t.error,") setting ").concat(a," to use ").concat(e," as a remote.")),[2];return l(e),da("remote-edited"),[2];case 3:return[4,c.addRemote({name:a,url:e})];case 4:if((r=i.sent()).error)return x("Error (".concat(r.error,") adding ").concat(a," ").concat(e," as a remote.")),[2];return l(e),da("remote-added"),[2]}})}),function(e){return i.apply(this,arguments)}),et=(o=(0,y._)(function(){var e,n,t,r;return(0,b.YH)(this,function(i){switch(i.label){case 0:if(X(),!H)return[2];if(!(0,t8.em)(H))return V("Invalid remote name."),[2];return[4,F({variables:{input:{name:H,description:null!=D?D:null,homepage:"replit.com".concat(R),isPrivate:O,ownerType:ic.nr.User}}})];case 1:if((null==(e=(r=i.sent()).data)?void 0:e.createGithubRepo.__typename)==="UnauthorizedError"||(null==(n=r.data)?void 0:n.createGithubRepo.__typename)==="UserError")return x(r.data.createGithubRepo.message),[2];return(null==(t=r.data)?void 0:t.createGithubRepo.__typename)==="CreateGithubRepoResult"&&(en(r.data.createGithubRepo.remoteUrl),da("github-repository-published"),s("Created repository on Github")),[2]}})}),function(){return o.apply(this,arguments)});return d?(0,f.FD)(L.S,{children:[(0,f.Y)(T.EY,{color:"dimmest",multiline:!1,children:"Repository name"}),(0,f.Y)(eA.pd,{ref:m,placeholder:"Enter repository name",value:H,onChange:function(e){V(void 0),z(e.target.value)},onKeyDown:function(e){if("Enter"===e.key){var n;e.preventDefault(),null==(n=g.current)||n.focus()}}}),(0,f.Y)(T.EY,{css:hJ.errorText,multiline:!1,children:G}),(0,f.Y)(hK.A,{height:1}),(0,f.Y)(T.EY,{color:"dimmest",multiline:!1,children:"Repository description"}),(0,f.Y)(eA.ov,{ref:g,maxLength:350,name:"Repository description",placeholder:"Enter repository description",value:null!=q?q:void 0,onChange:function(e){Q(void 0),K(e.target.value)}}),(0,f.Y)(T.EY,{css:hJ.errorText,multiline:!1,children:J}),(0,f.Y)(hK.A,{height:1}),(0,f.Y)(T.EY,{color:"dimmest",multiline:!1,children:"Privacy"}),(0,f.FD)(ry.e2,{tag:"fieldset",id:p("privacy"),name:p("privacy"),value:O,onChange:function(e){return M(e)},row:!0,css:[j.wp.width("100%")],children:[(0,f.Y)(ry.$O,{id:p("false"),value:!1,text:"Public",icon:(0,f.Y)(h$.A,{})}),(0,f.Y)(ry.$O,{id:p("true"),value:!0,text:"Private",icon:(0,f.Y)(it.A,{})})]}),(0,f.Y)(hK.A,{height:2}),(0,f.Y)(eS.$n,{text:P?"Creating Repository on GitHub":"Create Repository on GitHub",colorway:"primary",iconLeft:(0,f.Y)(dh.A,{}),onClick:et,loading:P}),Y?(0,f.Y)(T.EY,{css:hJ.errorText,maxLines:2,multiline:!1,children:Y}):null]}):u?(0,f.Y)(L.S,{children:(0,f.Y)(eS.$n,{colorway:"primary",iconLeft:(0,f.Y)(dh.A,{}),text:"Open Account page to connect to GitHub",onClick:function(){du.M.openExternalUrl("/account#connected-services")}})}):(0,f.Y)(L.S,{children:(0,f.Y)(eS.$n,{colorway:"primary",iconLeft:(0,f.Y)(dh.A,{}),text:"Connect to GitHub",onClick:U})})}var hX=(0,nF.AH)(j.wp.border({width:1,color:k.LU.outlineDimmer}),j.wp.borderRadius(8)),h0=(0,nF.AH)(i9.b.filled,j.wp.flex.row,j.wp.justify.spaceBetween,j.wp.align.center,j.wp.px(8),j.wp.py(4),j.wp.borderRadius(8,8,0,0)),h1=(0,nF.AH)(j.wp.borderRadius(8,8,0,0)),h2=(0,nF.AH)(j.wp.borderRadius(8)),h4=(0,nF.AH)(j.wp.p(8)),h5=(0,nF.AH)(j.wp.flex.growAndShrink(1));function h3(e){var n=e.title,t=e.expanded,r=e.content,i=e.onClick;return(0,f.FD)(L.S,{css:hX,children:[(0,f.FD)(L.S,{css:[h0,t?h1:h2],onClick:i,children:[(0,f.Y)(L.S,{css:h5,children:(0,f.Y)(T.EY,{variant:"subheadDefault",multiline:!1,children:n})}),t?(0,f.Y)(rY.A,{size:20}):(0,f.Y)(rS.A,{size:20})]}),t?(0,f.Y)(L.S,{css:h4,children:r}):null]})}var h6=(0,nF.AH)(j.wp.rowWithGap(4)),h8=(0,nF.AH)(j.wp.flex.growAndShrink(1)),h7=(0,nF.AH)(j.wp.color.accentNegativeStronger,j.wp.pl(4));function h9(e){var n,t=e.initialRemoteUrl,r=e.remoteName,i=e.updateRemote,o=(0,A.A)().git,a=(0,v._)((0,w.useState)(),2),l=a[0],s=a[1];(0,w.useEffect)(function(){s(void 0)},[t]);var c=(0,v._)((0,w.useState)(),2),u=c[0],d=c[1],p=(0,v._)((0,w.useState)(!1),2),h=p[0],m=p[1],g=(n=(0,y._)(function(){var e,n,t;return(0,b.YH)(this,function(a){switch(a.label){case 0:if(a.trys.push([0,5,6,7]),!l)return[2];if(m(!0),!(0,t8.C2)(l))throw Error("Invalid remote url.");return[4,o.getRemotes()];case 1:if((e=a.sent()).error)throw Error("Error finding current remotes, ".concat(e.error));if(!e.remotes.has(r))return[3,3];return[4,o.setRemoteURL({remote:r,url:l})];case 2:if((n=a.sent()).error)throw rn({context:"remote-input",gitService:o,result:n,data:{remote:r,url:l}}),Error("Error (".concat(n.error,") setting ").concat(r," to use ").concat(l," as a remote."));return da("remote-edited"),i(l),[2];case 3:return[4,o.addRemote({name:r,url:l})];case 4:if((t=a.sent()).error)throw rn({context:"remote-input",gitService:o,result:t,data:{remote:r,url:l}}),Error("Error (".concat(t.error,") adding ").concat(r," ").concat(l," as a remote."));return da("remote-added"),[3,7];case 5:return d(a.sent().message),[3,7];case 6:return m(!1),[7];case 7:return[2]}})}),function(){return n.apply(this,arguments)});return(0,f.FD)(L.S,{children:[(0,f.Y)(eA.pd,{name:"Remote URL",placeholder:"Enter Remote URL",value:null!=l?l:t,autoComplete:"off",autoCorrect:"off",onChange:function(e){d(void 0),s(e.target.value)},inputMode:"url","aria-label":"Remote URL",onKeyDown:function(e){"Enter"===e.key&&g()}}),u?(0,f.Y)(T.EY,{variant:"small",css:h7,multiline:!1,children:u}):null,l&&l!==t?(0,f.FD)(f.FK,{children:[(0,f.Y)(hK.A,{height:1}),(0,f.FD)(L.S,{css:h6,children:[(0,f.Y)(eS.$n,{css:h8,text:"Cancel",iconLeft:(0,f.Y)(dS.A,{}),onClick:function(){return s(void 0)}}),(0,f.Y)(eS.$n,{css:h8,text:h?"Saving":"Save",loading:h,colorway:"primary",iconLeft:(0,f.Y)(oR.A,{}),onClick:g})]})]}):null]})}var me="origin",mn=function(e){return e[e.GitHub=0]="GitHub",e}(mn||{});function mt(){var e,n=(0,t9.A)((e=(0,y._)(function(e){var n,t,r,i;return(0,b.YH)(this,function(o){switch(o.label){case 0:return[4,e.getRemotes()];case 1:if((n=o.sent()).error)return rn({context:"remote-config",gitService:e,result:n}),[2,{url:void 0,name:me,error:n.error}];if(!(r=(0,v._)(null!=(t=n.remotes.values())?t:void 0,1)[0]))return[2,{url:void 0,name:me,error:null}];return[2,{url:r.push||r.fetch,name:null!=(i=r.name)?i:me,error:null}]}})}),function(n){return e.apply(this,arguments)}));return null==n?(0,f.FD)(L.S,{css:j.wp.center,children:[(0,f.Y)(T.EY,{color:"dimmest",multiline:!1,children:"Loading remote information."}),(0,f.Y)(fZ,{})]}):(null==n?void 0:n.error)?null:(0,f.Y)(mr,{initialRemoteUrl:null==n?void 0:n.url,remoteName:null==n?void 0:n.name})}function mr(e){var n=e.initialRemoteUrl,t=e.remoteName,r=(0,v._)((0,w.useState)(n),2),i=r[0],o=r[1],a=(0,v._)((0,w.useState)(""===n||void 0===n?0:void 0),2),l=a[0],s=a[1],c=function(e){o(e)};return(0,f.FD)(L.S,{children:[(0,f.Y)(T.EY,{variant:"subheadDefault",multiline:!1,children:"Remote"}),(0,f.Y)(hK.A,{height:1}),(0,f.Y)(h9,{remoteName:t,initialRemoteUrl:i,updateRemote:c}),(0,f.Y)(hK.A,{height:2}),(0,f.Y)(h3,{title:"GitHub",expanded:0===l,onClick:function(){return s(function(e){return 0===e?void 0:0})},content:(0,f.Y)(hQ,{remoteName:t,updateRemote:c})})]})}var mi=(0,nF.AH)(j.wp.px(16));function mo(){return(0,f.FD)(L.S,{css:mi,children:[(0,f.Y)(hK.A,{height:2}),(0,f.Y)(mt,{}),(0,f.Y)(hK.A,{height:2}),(0,f.Y)(ma,{})]})}function ma(){return(0,f.FD)(L.S,{children:[(0,f.Y)(T.EY,{variant:"subheadDefault",multiline:!1,children:"Commit author"}),(0,f.Y)(hK.A,{height:1}),(0,f.Y)(hz,{})]})}function ml(){return(0,f.Y)(L.S,{children:(0,f.Y)(T.EY,{multiline:!0,children:"Something went wrong. Please refresh the page and try again."})})}var ms=(0,V.x)({fakePaneHeader:[j.wp.backgroundColor.backgroundDefault,j.wp.align.center,{borderBottom:"1px solid ".concat(k.LU.outlineDimmer)}]});function mc(e){var n=e.onFileClick,t=e.status;return(0,f.FD)(L.S,{children:[(0,f.Y)(mu,{}),(0,f.FD)(L.S,{p:8,pt:16,gap:16,children:[(0,f.Y)(iI.N,{colorway:"orange",icon:(0,f.Y)(iF.A,{}),text:"Your current branch doesn't have any commits. You need to make an initial commit before continuing."}),(0,f.FD)(L.S,{css:fq.section,children:[(0,f.Y)(L.S,{css:fq.reviewChangesHeader,children:(0,f.Y)(T.EY,{css:fq.headerText,multiline:!1,children:"Commit"})}),(0,f.Y)(pN,{status:t,onStagedFileClick:n,defaultMessage:"Initial commit"})]})]})]})}function mu(){var e,n=di(),t=(0,t9.A)((e=(0,y._)(function(e){var t;return(0,b.YH)(this,function(r){switch(r.label){case 0:return[4,e.status()];case 1:return(t=r.sent()).error&&(rn({context:"unborn-branch-view-status",gitService:e,result:t}),n(t.error)),[2,t]}})}),function(n){return e.apply(this,arguments)}),[n]);return(null==t?void 0:t.error)?null:(0,f.Y)(L.S,{css:ms.fakePaneHeader,px:8,py:4,row:!0,gap:8,children:(null==t?void 0:t.branch)?(0,f.Y)(aZ,{name:t.branch,current:!0,heading:!0}):null})}var md=t(63441),mp=(0,V.x)({gitPane:[j.wp.position.relative,j.wp.display.flex,j.wp.minHeight("100%")],gitPaneContent:[j.wp.flex.growAndShrink(1),j.wp.overflow("auto")]});function mf(e){var n,t=e.isActive,r=e.performPaneOperation,i=e.mode,o=void 0===i?{type:ln.C.CURRENT_BRANCH}:i,a=(0,w.useRef)(),l=(0,w.useCallback)(function(e){r({operation:"replace",pane:{type:"git",data:{mode:e}}})},[r]),s=(0,v._)((0,w.useState)(!1),2),c=s[0],u=s[1];mv(void 0!==t&&t);var d=(0,t9.A)((n=(0,y._)(function(e){var n,t,r,i,o,a,l,s,c,u;return(0,b.YH)(this,function(d){switch(d.label){case 0:return[4,e.getRepositoryState()];case 1:if((n=d.sent()).error)return[2,n];if(t=n.state,r=n.type,i=null,o=null,a=null,r===t8.UN.INITIALIZING)return[3,6];return[4,e.status()];case 2:if((l=d.sent()).error)return rn({context:"git-pane-status",gitService:e,result:l,data:{state:t,type:r}}),[2,l];return i=l,[4,e.getRemotes()];case 3:if((s=d.sent()).error)return rn({context:"git-pane-remotes",gitService:e,result:s,data:{state:t,type:r}}),[2,s];if(o=s.remotes,!i.branch)return[3,5];return[4,e.getBranch(i.branch)];case 4:if((c=d.sent()).error)return rn({context:"git-pane-branch",gitService:e,result:c,data:{state:t,type:r}}),[2,c];a=c.branch,d.label=5;case 5:return[3,8];case 6:return[4,e.status()];case 7:if((u=d.sent()).error)return rn({context:"git-pane-status-initializing",gitService:e,result:u,data:{state:t,type:r}}),[2,{state:t,type:r,status:i,remotes:o,currentBranch:a,error:null}];i=u,d.label=8;case 8:return[2,{state:t,type:r,status:i,remotes:o,currentBranch:a,error:null}]}})}),function(e){return n.apply(this,arguments)})),p=!d||d.error?null:d.currentBranch,h=(0,w.useCallback)(function(e){switch(l(e),e.type){case ln.C.DASHBOARD:da("pane-mode-changed",{mode:"dashboard"});break;case ln.C.BRANCH:da("pane-mode-changed",{mode:"branch"});break;case ln.C.CURRENT_BRANCH:da("pane-mode-changed",{mode:"current-branch"});break;case ln.C.SETTINGS:da("pane-mode-changed",{mode:"settings"})}},[l]),m=(0,w.useCallback)(function(){a.current?(h(a.current),a.current=void 0):h({type:ln.C.CURRENT_BRANCH})},[h]),g=(0,e0.A)(o),S=(0,w.useCallback)(function(e){var n=function(e){a.current=g.current,h(e)};switch(e.type){case ln.C.DASHBOARD:n(e);break;case ln.C.BRANCH:if((0,t8.FF)(e.branch,p)){n({type:ln.C.CURRENT_BRANCH});break}n(e);break;case ln.C.CURRENT_BRANCH:case ln.C.SETTINGS:case ln.C.COMMIT:n(e)}},[h,p,g]),Y=(0,w.useCallback)(function(e){var n=e.path,t=e.type,i=(0,nQ.QY)({path:n});if("codeEditor"!==i)return void r({operation:"open",pane:{type:i,data:{path:n}},secondary:!0});"conflict"===(void 0===t?"change":t)?r({operation:"open",pane:{type:"codeEditor",data:{path:n}},secondary:!0}):r({operation:"open",pane:{type:"diff",data:{left:{path:n,data:{type:"git",revision:"HEAD"}},right:{path:n,data:{type:"fs"}}}},secondary:!0})},[r]),A=(0,w.useCallback)(function(e){S({type:ln.C.COMMIT,hash:e})},[S]),x=(0,w.useCallback)(function(){u(!0)},[]);if(o.type===ln.C.BRANCH&&(0,t8.FF)(o.branch,p)&&h({type:ln.C.CURRENT_BRANCH}),(0,w.useEffect)(function(){return u(!1)},[d]),c||!d||d.error)return(0,f.Y)(mh,{children:(null==d?void 0:d.error)?(0,f.Y)(md.A,{pane:{type:"git"},headerText:"Git pane is unavailable.",bodyText:(0,f.FD)(f.FK,{children:["Something went wrong. Error: ",(0,f.Y)("code",{children:d.error})]}),asciiArt:"Computer"}):(0,f.Y)(fZ,{})});switch(d.type){case t8.UN.INITIALIZING:case t8.UN.INTERMEDIATE:case t8.UN.DETACHED_HEAD:return(0,f.Y)(mh,{children:(0,f.Y)(mm,{state:d.state,status:d.status,onFileClick:Y,gotoPendingState:x})});case t8.UN.NORMAL:if(o.type===ln.C.BRANCH&&!o.branch||o.type===ln.C.CURRENT_BRANCH&&!p)return(0,f.Y)(mh,{header:(0,f.Y)(dJ,{mode:ln.C.DASHBOARD,branch:null,switchMode:S,onBack:m}),children:(0,f.Y)(hS,{currentBranch:null,switchMode:S})});var C=null;return o.type===ln.C.CURRENT_BRANCH?C=p:o.type===ln.C.BRANCH&&(C=o.branch),(0,f.Y)(mh,{header:(0,f.Y)(dJ,{mode:o.type,branch:C,switchMode:S,onBack:m}),children:(0,f.Y)(mg,{performPaneOperation:r,mode:o,status:d.status,remotes:d.remotes,currentBranch:p,switchMode:S,onStagedFileClick:Y,onViewCommitClick:A,onViewSettingsClick:function(){return S({type:ln.C.SETTINGS})},gotoPendingState:x})})}}function mh(e){var n=e.header,t=e.children,r=(0,v._)((0,w.useState)(function(){return(0,ez.y$)()}),1)[0];return(0,f.Y)(de.Provider,{value:r,children:(0,f.FD)(L.S,{css:mp.gitPane,children:[(0,f.Y)(dD,{}),n,(0,f.Y)(L.S,{css:mp.gitPaneContent,children:t})]})})}function mm(e){var n=e.state,t=e.status,r=e.onFileClick,i=e.gotoPendingState,o=(0,io._P)({controlName:"flag-new-rebase-editor",logFlagToAnalytics:!1,default:!1});switch(n){case t8.Gi.NOT_INITIALIZED:return(0,f.Y)(md.A,{pane:{type:"git"},action:(0,f.Y)(dc,{})});case t8.Gi.ON_UNBORN_BRANCH:return(0,f.Y)(mc,{onFileClick:r,status:t});case t8.Gi.MERGING:return(0,f.Y)(hI,{onFileClick:r,gotoPendingState:i});case t8.Gi.REBASING:return o?(0,f.Y)(hT,{gotoPendingState:i,onFileClick:r}):(0,f.Y)(hP,{});case t8.Gi.REVERTING:return(0,f.Y)(hL,{});case t8.Gi.CHERRY_PICKING:return(0,f.Y)(fJ,{});case t8.Gi.APPLYING_MAILBOX:return(0,f.Y)(d1,{});case t8.Gi.BISECTING:return(0,f.Y)(d2,{});case t8.Gi.DETACHED_HEAD:return(0,f.Y)(hY,{});case t8.Gi.INDEX_LOCKED:return(0,f.Y)(hA,{});case t8.Gi.CLEAN:case t8.Gi.DIRTY_INDEX:case t8.Gi.DIRTY_WORKTREE:return(0,f.Y)(ml,{});default:(0,ar.A)(n)}}function mg(e){var n=e.mode,t=e.status,r=e.remotes,i=e.currentBranch,o=e.switchMode,a=e.onStagedFileClick,l=e.onViewCommitClick,s=e.onViewSettingsClick,c=e.gotoPendingState,u=e.performPaneOperation;switch(n.type){case ln.C.DASHBOARD:return(0,f.Y)(hS,{currentBranch:i,switchMode:o});case ln.C.BRANCH:return(0,f.Y)(fK,{performPaneOperation:u,status:t,branch:n.branch,remotes:r,onStagedFileClick:a,onViewCommitClick:l,onViewSettingsClick:s,gotoPendingState:c});case ln.C.CURRENT_BRANCH:return(0,f.Y)(fK,{performPaneOperation:u,status:t,remotes:r,branch:i,onStagedFileClick:a,onViewCommitClick:l,onViewSettingsClick:s,gotoPendingState:c,current:!0});case ln.C.SETTINGS:return(0,f.Y)(mo,{});case ln.C.COMMIT:return(0,f.Y)(hp,{status:t,remotes:r,onViewCommitClick:l,hash:n.hash,switchMode:o});default:(0,ar.A)(n)}}function mv(e){var n=(0,A.A)().git;(0,w.useEffect)(function(){e&&setTimeout(function(){n.forceRefresh()},100)},[e,n])}var mw=h.ZU.Object({type:h.ZU.Literal("git"),data:h.ZU.Optional(h.ZU.Object({mode:ln.$}))}),my={Content:function(e){var n,t=e.options,r=t.isActive,i=t.performPaneOperation,o=e.pane;return(0,f.Y)(mf,{isActive:r,performPaneOperation:i,mode:null==(n=o.data)?void 0:n.mode})},Icon:function(e){var n=e.size;return(0,f.Y)(n0.Vx.Provider,{value:{color:k.LU.greenStrongest,size:n},children:(0,f.Y)(dl.A,{})})},getTitle:function(){return"Git"},description:"Version control for your App",category:nQ.bY.WorkspaceFeatures,decode:function(e){return m.T(mw,e)}};function mb(){var e=(0,nW.iO)();return(0,w.useCallback)(function(n,t,r){e({origin:"History2: useHistoryBSOD",error:n,tags:{source:"ws-history2",type:t},extras:(0,ee._)({state:eh.pX.current()},r)})},[e])}function mS(e){(0,ty.u4)(th.AZ.HISTORY_USED,{action:e,which:"ws"})}function mY(e){var n=e.onClose;return(0,f.Y)(eS.$n,{text:"Cancel",onClick:function(){mS("historyExplicitlyClosed"),n()}})}function mA(){var e,n="/replEnvironmentMobile"===(0,is.useRouter)().pathname,t=(0,eh.N_)(),r=(0,eh.DH)(),i=!t||0===t.count;return(0,f.Y)(J.d,{isDisabled:i,onChange:function(e){return r({comparing:e})},isSelected:null!=(e=null==t?void 0:t.comparing)&&e,children:n?"Compare":"Compare Latest"})}function mx(){var e=(0,eh.N_)();if(!e||0===e.count)return null;var n=e.changes[e.version].timestamp;return(0,f.Y)(eg.Dc,{textColor:"dimmer",dateFormat:"switch",date:n})}function mC(e){var n=e.reversed,t=void 0!==n&&n,r=e.hideName,i=void 0!==r&&r,o=e.color,a=void 0===o?"default":o,l=(0,eh.N_)(),s=(0,w.useMemo)(function(){return[t?j.wp.rowReverseWithGap(4):j.wp.rowWithGap(4),j.wp.align.center]},[t]);if(!l)return null;if(0===l.count)return(0,f.FD)(L.S,{css:s,children:[(0,f.Y)(t$.A,{size:24}),(0,f.Y)(T.EY,{color:a,multiline:!1,children:"Server Authored"})]});var c=l.changes[l.version];if(!l.users)return(0,f.FD)(L.S,{css:s,children:[(0,f.Y)(hU.e,{size:24,src:"/public/images/ghost.svg",username:"Unknown"}),i?null:(0,f.Y)(T.EY,{color:a,multiline:!1,children:"Unknown"})]});var u=l.users[c.userId];if(!u)if(c.timestamp>16546464e5)return(0,f.FD)(L.S,{css:s,children:[(0,f.Y)(t$.A,{size:24}),i?null:(0,f.Y)(T.EY,{color:a,multiline:!1,children:"Server Authored"})]});else return(0,f.FD)(L.S,{css:s,children:[(0,f.Y)(hU.e,{size:24,src:"/public/images/ghost.svg",username:"Unknown"}),i?null:(0,f.Y)(T.EY,{color:a,multiline:!1,children:"Unknown"})]});return(0,f.FD)(L.S,{css:s,children:[(0,f.Y)(hU.e,{size:24,src:u.image,username:u.username}),i?null:(0,f.Y)(T.EY,{color:a,multiline:!1,children:u.username})]})}var m_=t(71672);function mk(){var e=(0,en._)(["\n  query WorkspaceHistory2Users($ids: [Int!]!) {\n    currentUser {\n      id\n      username\n      image\n    }\n    usersByIds(ids: $ids) {\n      id\n      username\n      image\n    }\n  }\n"]);return mk=function(){return e},e}function mD(){var e=(0,en._)(["\n  query WorkspaceHistory2CurrentUserDate {\n    currentUser {\n      id\n      timeCreated\n    }\n  }\n"]);return mD=function(){return e},e}var mE=(0,et.J1)(mk()),mR=(mD(),t(38904)),mI=t(89264),mF=function(e){function n(e){var t;return(0,uY._)(this,n),(t=(0,uS._)(this,n,[e])).name="UserError",t}return(0,uA._)(n,e),n}((0,mI._)(Error));function mT(e,n,t){return new Promise(function(r,i){try{var o,a=e.watchTextFile(n,{onReady:(o=(0,y._)(function(e){var n,o;return(0,b.YH)(this,function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),[4,t(e)];case 1:return n=l.sent(),r(n),[3,3];case 2:return o=l.sent(),i(o),[3,3];case 3:return a(),[2]}})}),function(e){return o.apply(this,arguments)})})}catch(e){i(e)}})}var mP=mR.Ry;function mL(){return(mL=(0,y._)(function(e,n){var t,r,i,o,a,l,s,c,u,d,p,f,h,m,g,v,w,y;return(0,b.YH)(this,function(b){switch(b.label){case 0:t=new Set,r=!0,i=!1,o=void 0;try{for(a=n[Symbol.iterator]();!(r=(l=a.next()).done);r=!0)(s=l.value).userId&&t.add(s.userId)}catch(e){i=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}if(0===t.size)return[2,{}];if(t.size>=mP)return[2,"too_many_users"];return[4,e.query({query:mE,variables:{ids:Array.from(t)}})];case 1:if(u=(c=b.sent()).data,d=c.error)throw d;p=u.currentUser?[u.currentUser].concat((0,X._)(u.usersByIds)):u.usersByIds,f={},h=!0,m=!1,g=void 0;try{for(v=p[Symbol.iterator]();!(h=(w=v.next()).done);h=!0)f[(y=w.value).id]={id:y.id,username:y.username,image:y.image}}catch(e){m=!0,g=e}finally{try{h||null==v.return||v.return()}finally{if(m)throw g}}return[2,f]}})})).apply(this,arguments)}function mU(){return(mU=(0,y._)(function(e,n,t){var r,i,o;return(0,b.YH)(this,function(a){switch(a.label){case 0:var l;return[4,mT(e,t,(l=(0,y._)(function(e){var n,t;return(0,b.YH)(this,function(r){return(n=e.fetchChanges,0===(t=e.version))?[2,{isDisposed:!1,result:[]}]:[2,n(1,t,"")]})}),function(e){return l.apply(this,arguments)}))];case 1:if((r=a.sent()).isDisposed)return[2,{data:null,handledError:"File deleted or removed."}];return[4,function(e,n){return mL.apply(this,arguments)}(n,i=r.result)];case 2:if("too_many_users"===(o=a.sent()))return[2,{data:{changes:i,users:null},handledError:null}];return[2,{data:{changes:i,users:o},handledError:null}]}})})).apply(this,arguments)}var mN=t(57078),mO=(0,nF.AH)({display:"grid",gridTemplateColumns:"auto 1fr",rowGap:"0.5rem",columnGap:"1rem","> dt":{display:"flex",alignItems:"center",fontWeight:"bold"}});function mM(e){var n=e.onCloseHistory,t=(0,nN.A)().showError,r=(0,v._)((0,w.useState)(!1),2),i=r[0],o=r[1],a=(0,v._)((0,w.useState)(!1),2),l=a[0],s=a[1],c=(0,A.A)().fs,u=(0,eh.N_)(),d=mb(),p="Reset",h=!0;function m(){return(m=(0,y._)(function(){var e,r;return(0,b.YH)(this,function(i){switch(i.label){case 0:if(!u||!c||l)return[2];i.label=1;case 1:var a,p;return i.trys.push([1,3,4,5]),s(!0),mS("versionRestored"),e=u.filePath,[4,(a=u.version+1,mT(c,e,(p=(0,y._)(function(n){var t,r,i,o,l,s,u,d;return(0,b.YH)(this,function(p){switch(p.label){case 0:if(t=n.fetchChanges,r=n.writeChange,a>(i=n.version))throw Error("Cannot reset to a version that does not exist");if(a===i)return[2];o=null,p.label=1;case 1:return p.trys.push([1,3,,4]),[4,t(1,i,"")];case 2:if((l=p.sent()).isDisposed)throw new mF("File deleted or removed.");return o=l.result,[3,4];case 3:throw p.sent(),new mF("Something went wrong while resetting the file. It is possible that a bad connection is to blame. Please try again.");case 4:u=(s=(0,pi._)(o.slice(a,o.length).reverse()))[0],d=s.slice(1).reduce(function(e,n){return e.compose(n.invertedChanges)},u.invertedChanges);try{r(d)}catch(e){throw re.Cp(e),new mF("Something went wrong while resetting the file. Maybe the file changed while you were restoring it? Please try again.")}return[4,c.flush(new Set([e]))];case 5:return p.sent(),[2]}})}),function(e){return p.apply(this,arguments)})))];case 2:return i.sent(),n(),[3,5];case 3:if((r=i.sent())instanceof mF)return t(r.message),[2];return d(r,"restore"),[3,5];case 4:return o(!1),s(!1),[7];case 5:return[2]}})})).apply(this,arguments)}return u?0===u.count?(p="No history",h=!0):l||i?(p="Resetting...",h=!0):u.playing?(p="Playing...",h=!0):u.version===u.count-1?(p="Viewing latest",h=!0):(p="Reset editor to here",h=!1):(p="Loading...",h=!0),(0,f.FD)(f.FK,{children:[(0,f.Y)(eS.$n,{text:p,disabled:h,onClick:function(){return o(!0)},colorway:"primary",iconLeft:(0,f.Y)(mN.A,{})}),u&&0!==u.count&&(0,f.Y)(aX.a,{isOpen:i,onRequestClose:function(){l||o(!1)},children:(0,f.FD)(L.S,{gap:24,children:[(0,f.Y)(T.Y9,{variant:"headerDefault",level:2,children:"Reset file version"}),(0,f.Y)(eu.ui,{elevated:!0,css:[j.wp.borderRadius(8)],px:16,py:12,children:(0,f.FD)("dl",{css:mO,children:[(0,f.Y)("dt",{children:"File"}),(0,f.Y)("dd",{children:u.filePath}),(0,f.Y)("dt",{children:"Version"}),(0,f.FD)("dd",{children:[u.version+1,(0,f.FD)("span",{css:[j.wp.color.foregroundDimmest],children:[(0,f.Y)("span",{css:j.wp.mx(8),children:"/"}),u.count]})]}),(0,f.Y)("dt",{children:"Date"}),(0,f.Y)("dd",{children:(0,f.Y)(eg.Dc,{date:u.changes[u.version].timestamp,dateFormat:"absolute"})}),(0,f.Y)("dt",{children:"Author"}),(0,f.Y)("dd",{children:(0,f.Y)(mC,{})})]})}),(0,f.Y)(iI.N,{icon:(0,f.Y)(tI.A,{}),colorway:"positive",text:"Resetting is non-destructive. The reset content will become a new version at the end of history. You can always go back to the version you just had."}),(0,f.FD)(L.S,{row:!0,gap:8,justify:"end",children:[(0,f.Y)(eS.$n,{text:"Cancel",disabled:l,onClick:function(){return o(!1)}}),(0,f.Y)(eS.$n,{text:l?"Resetting Version...":"Reset Version",disabled:l,colorway:"primary",onClick:function(){return m.apply(this,arguments)},iconLeft:(0,f.Y)(mN.A,{})})]})]})})]})}let mB=(0,w.forwardRef)(function(e,n){var t=(0,eh.N_)(),r=(0,w.useRef)(null);(0,w.useImperativeHandle)(n,function(){return r.current}),t&&r.current&&(r.current.setAttribute("aria-valuemin","1"),r.current.setAttribute("aria-valuemax",String(t.count)),r.current.setAttribute("aria-valuenow",String(t.version+1)));var i=(0,w.useMemo)(function(){return(0,f.Y)("div",{ref:r,role:"slider",tabIndex:0,css:{position:"absolute",top:"0",left:"calc((100% - 16px) * var(--scrubber-progress, 0))",width:"16px",height:"16px",backgroundColor:k.LU.accentPrimaryDefault,borderRadius:"100%",outline:"none",cursor:"pointer",transition:"left var(--scrubber-transition-time, 100ms) ease-out",willChange:"left, transition",":focus":{boxShadow:"0 0 0 1px ".concat(k.LU.foregroundDefault," inset")}}})},[]);return t&&t.count>1?i:null}),mH=(0,w.forwardRef)(function(e,n){var t=(0,eh.N_)(),r=(0,w.useMemo)(function(){return(0,f.FD)(f.FK,{children:[(0,f.Y)("div",{ref:n,"aria-hidden":!0,css:{position:"relative",top:"0",width:"100%",height:"16px",margin:"0",cursor:"pointer"}}),(0,f.Y)("div",{"aria-hidden":!0,css:{position:"absolute",top:"6px",left:"0",width:"100%",height:"4px",margin:"0",overflow:"hidden",pointerEvents:"none",backgroundColor:k.LU.backgroundHighest,borderRadius:"2px"},children:(0,f.Y)("div",{"aria-hidden":!0,css:{position:"absolute",top:"0",left:"0",width:"100%",height:"4px",margin:"0",pointerEvents:"none",backgroundColor:k.LU.accentPrimaryDefault,transformOrigin:"left",transform:"scaleX(var(--scrubber-progress, 0))",transition:"transform var(--scrubber-transition-time, 100ms) ease-out",willChange:"transform, transition"}})})]})},[n]),i=(0,w.useMemo)(function(){return(0,f.Y)("div",{ref:n,"aria-hidden":!0,css:{width:"100%",height:"16px",pointerEvents:"none"},children:(0,f.Y)("div",{css:{position:"absolute",width:"100%",height:"4px",top:"6px",left:"0",backgroundColor:k.LU.backgroundHighest,borderRadius:"2px"}})})},[n]);return t&&t.count>1?r:i});var mz=["ArrowLeft","ArrowRight","Home","End"];function mW(){var e=(0,eh.N_)(),n=(0,eh.DH)(),t=(0,v._)((0,w.useState)(!1),2),r=t[0],i=t[1],o=(0,w.useRef)(null),a=(0,w.useRef)(null),l=(0,w.useRef)(null),s=function(e){(0,cQ.U)(o,"--scrubber-transition-time",e)},c=function(e){(0,cQ.U)(o,"--scrubber-progress",e.toString())};return e&&!r&&(c(e.version/(e.count-1)),e.playing?s("50ms"):s("100ms")),(0,w.useEffect)(function(){if(e&&a.current&&l.current&&!r){var t=a.current,o=l.current,u=function(r){if(0===r.button){i(!0),o.focus();var a=t.getBoundingClientRect(),l=o.getBoundingClientRect(),u=a.width,d=l.width,p=r.target===t?d/2:r.clientX-l.left,f=null,h=function(t){var r=Math.max(0,Math.min(1,(t-a.left-p)/(u-d)));r!==f&&(f=r,c(r),n({version:Math.round(r*(e.count-1)),playing:!1}))};h(r.clientX);var m=function(e){s("0ms"),h(e.clientX),e.preventDefault(),e.stopPropagation()},g=function(){window.removeEventListener("pointermove",m),window.removeEventListener("pointerup",g),window.removeEventListener("pointercancel",g),s("100ms"),i(!1)};window.addEventListener("pointermove",m),window.addEventListener("pointerup",g),window.addEventListener("pointercancel",g),r.preventDefault(),r.stopPropagation()}};return t.addEventListener("pointerdown",u),o.addEventListener("pointerdown",u),function(){t.removeEventListener("pointerdown",u),o.removeEventListener("pointerdown",u)}}},[e,n,r]),(0,w.useEffect)(function(){if(e&&l.current&&!r){var t=l.current,i=function(t){if(e&&mz.includes(t.key)){var r=t.shiftKey?10:1,i=e.version,o=e.count-1,a=Math.max(0,i-r),l=Math.min(o,i+r),s=null;switch(t.key){case"ArrowLeft":s=a;break;case"ArrowRight":s=l;break;case"Home":s=0;break;case"End":s=o}null!==s&&(n({version:s,playing:!1}),t.preventDefault(),t.stopPropagation())}};return t.addEventListener("keydown",i),function(){t.removeEventListener("keydown",i)}}},[e,n,r]),(0,w.useMemo)(function(){return(0,f.FD)(L.S,{innerRef:o,css:{position:"relative",height:"16px",width:"100%",touchAction:"none","--scrubber-progress":1,"--scrubber-transition-time":"100ms",":hover, :focus-within":{filter:"brightness(1.1)"},":hover:focus-within":{filter:"brightness(1.2)"}},children:[(0,f.Y)(mH,{ref:a}),(0,f.Y)(mB,{ref:l})]})},[])}function mG(){var e=(0,eh.N_)(),n=0,t=0;e&&0!==e.count&&(n=e.version+1,t=e.count);var r=e?"default":"dimmer";return(0,f.FD)(L.S,{row:!0,gap:4,justify:"space-between",children:[(0,f.Y)(T.EY,{css:{minWidth:"2ch",textAlign:"right"},color:r,multiline:!1,children:n}),(0,f.Y)(T.EY,{css:{width:"1ch",textAlign:"center"},color:"dimmer",multiline:!1,children:"/"}),(0,f.Y)(T.EY,{css:{minWidth:"2ch",textAlign:"left"},color:"dimmer",multiline:!1,children:t})]})}function mV(e){if(e<0)throw Error('Require at least zero ops to compute pace, got "'+e+'"');return 1/Math.log(e+2)*100}var mj=t(74192);function mZ(){var e,n,t,r,i=(0,eh.N_)(),o=(0,eh.DH)(),a=(null!=(n=null==i||null==(e=i.changes)?void 0:e.length)?n:1)-1,l=null!=(t=null==i?void 0:i.version)?t:0,s=null!=(r=null==i?void 0:i.playing)&&r,c=!i||0===i.count,u=function(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:mV,i=(0,v._)((0,w.useState)(!1),2),o=i[0],a=i[1],l=(0,w.useCallback)(function(){n(1)},[n]),s=(0,w.useCallback)(function(){if(e+1>t)return void a(!1);n(e+1)},[n,e,t]);return(0,w.useEffect)(function(){if(o){var e=setTimeout(function(){s()},r(t));return function(){return clearTimeout(e)}}},[o,s,r,t]),{isPlaying:o,start:function(){a(!0)},stop:function(){a(!1)},reset:l}}(l,function(e){return o({version:e})},a),d=u.isPlaying,p=u.start,h=u.stop;(0,w.useEffect)(function(){d&&!s?h():!d&&s&&p()},[s,d,p,h]);var m="Loading...";return i&&(d?m="Pause":i.version===i.count-1?m="Play file history from beginning":0===i.version?m="Play file history":i.version>0&&(m="Play file history from here")),(0,f.Y)(eY.K0,{alt:m,size:24,disabled:c,onClick:function(){l===a?o({version:0,playing:!0}):o({playing:!s})},children:d?(0,f.Y)(mj.A,{}):(0,f.Y)(oh.A,{})})}var mq=t(84331);function mK(){return(0,f.FD)(L.S,{row:!0,gap:4,align:"center",children:[(0,f.Y)(mZ,{}),(0,f.Y)(m$,{}),(0,f.Y)(mG,{}),(0,f.Y)(mJ,{})]})}function m$(){var e=(0,eh.N_)(),n=(0,eh.DH)(),t=!e||0===e.version||0===e.count;return(0,f.Y)(eY.K0,{alt:"Move backwards one version",size:24,disabled:t,onClick:function(){e&&e.version>0&&n({version:e.version-1})},children:(0,f.Y)(sb.A,{})})}function mJ(){var e=(0,eh.N_)(),n=(0,eh.DH)(),t=!e||e.version===e.count-1||0===e.count;return(0,f.Y)(eY.K0,{alt:"Move forwards one version",size:24,disabled:t,onClick:function(){e&&e.version<e.count-1&&n({version:e.version+1})},children:(0,f.Y)(mq.A,{})})}function mQ(e){var n,t,r,i,o,a=e.filePath,l=e.onCloseHistory,s="/replEnvironmentMobile"===(0,is.useRouter)().pathname,c=s?j.wp.borderRadius(0):j.wp.borderRadius(0,0,8,8),u=(0,eh.N_)(),d=(0,eh.DH)(),p=(0,eh.s7)(),h=mb(),m=(t=(n=(0,v._)((0,w.useState)({data:null,loading:!0,error:null,handledError:null}),2))[0],r=n[1],i=(0,A.A)().fs,o=(0,m_.m)(),(0,w.useEffect)(function(){if(!a)return void r({data:null,loading:!1,error:null,handledError:null});r({data:null,loading:!0,error:null,handledError:null});var e=!1;return(function(e,n,t){return mU.apply(this,arguments)})(i,o,a).then(function(n){var t=n.data,i=n.handledError;if(!e){if(i)return void r({data:null,loading:!1,error:null,handledError:i});r({data:t,loading:!1,error:null,handledError:null})}}).catch(function(n){e||(n instanceof Error||(n=Error(n)),r({data:null,loading:!1,error:n,handledError:null}))}),function(){e=!0}},[a,i,o]),t),g=m.data,y=m.loading,b=m.error;return(0,w.useEffect)(function(){return b?void h(b,"history2-index",{filePath:a}):g&&!y?(d({filePath:a,changes:g.changes,users:g.users}),mS("historyLoaded"),function(){p()}):void 0},[a,g,y,b,h,d,p]),(0,f.FD)(L.S,{css:[j.wp.zIndex(3),j.wp.overflow("hidden"),c,j.wp.backgroundColor.backgroundDefault,{borderTop:"2px solid ".concat(k.LU.backgroundHigher),boxShadow:"rgba(2, 2, 3, 0.125) 0px -16px 32px 0px"}],p:8,gap:8,children:[(0,f.FD)(eu.ui,{css:[j.wp.position.relative,j.wp.colWithGap(4),j.wp.px(12),j.wp.pt(8),j.wp.pb(8),j.wp.align.center,j.wp.borderRadius(8),j.wp.overflow("hidden")],elevated:!0,children:[(0,f.Y)(mW,{}),(0,f.FD)(L.S,{css:[j.wp.display.flex,j.wp.flex.row,j.wp.align.center,j.wp.justify.spaceBetween,j.wp.width("100%")],children:[(0,f.Y)(mK,{}),u&&u.count>0?(0,f.FD)(L.S,{row:!0,gap:4,align:"center",children:[(0,f.Y)(mx,{}),y||s?null:(0,f.Y)(T.EY,{color:"dimmer",multiline:!1,children:""}),(0,f.Y)(mC,{color:"dimmer",hideName:s,reversed:!0})]}):null]})]}),(0,f.FD)(L.S,{css:[j.wp.display.flex,j.wp.flex.row],children:[(0,f.Y)(mX,{justify:"flex-start",children:(0,f.Y)(mA,{})}),(0,f.FD)(mX,{justify:"flex-end",children:[(0,f.Y)(mY,{onClose:l}),(0,f.Y)(mM,{onCloseHistory:l})]})]})]})}function mX(e){var n=e.children,t=e.justify;return(0,f.Y)("div",{css:{display:"flex",flexGrow:1,flexBasis:0,alignItems:"center",justifyContent:t,columnGap:k.LU.space8,minWidth:0},children:n})}var m0=t(44725),m1=t(95866),m2=t(64967),m4=(0,t(87859).D)();function m5(e){if(!(e instanceof ni.ZX))return{compareTo:e.field(m4.state,!1),changed:!1};var n=e.state.field(m4.state,!1),t=e.startState.field(m4.state,!1)!==n;return{compareTo:n,changed:t}}function m3(e,n){e.state.field(m4.state,!1)!==n&&e.dispatch({effects:m4.effect.of(n)})}var m6=ni.sU.define({create:function(){return null},update:function(e,n){var t=m5(n),r=t.compareTo,i=t.changed;if(!r)return null;if(!n.docChanged&&!i)return e;var o=n.state.doc.toString();return new m2.PF(o,r)}}),m8=null!=(d=globalThis.requestIdleCallback)?d:globalThis.requestAnimationFrame,m7=null!=(p=globalThis.cancelIdleCallback)?p:globalThis.cancelAnimationFrame,m9=no.NZ.line({class:"cm-diff-deleted"}),ge=function(e){function n(e,t){var r;return(0,uY._)(this,n),(r=(0,uS._)(this,n)).insertion=e,r.highlight=t,r}(0,uA._)(n,e);var t=n.prototype;return t.destroy=function(){this.pendingHighlight&&m7(this.pendingHighlight)},t.toDOM=function(){var e=document.createElement("div");return e.className="cm-diff-inserted cm-line",this.updateDOM(e),e},t.eq=function(e){return!e.pendingHighlight&&this.insertion===e.insertion},t.updateDOM=function(e){var n=this;return this.pendingHighlight&&(m7(this.pendingHighlight),this.pendingHighlight=null),this.insertion.length?e.textContent=this.insertion:e.innerHTML="&nbsp;",this.highlight&&this.insertion.length&&(this.pendingHighlight=m8(function(){if(n.highlight){n.pendingHighlight=null;try{var t=n.highlight();e.innerHTML="",e.append(t)}catch(e){}}})),!0},n}(no.xO),gn=ni.sU.define({create:function(){return no.NZ.none},update:function(e,n){var t=n.state.field(m6,!1);if(!t)return no.NZ.none;var r=m5(n).changed;if(!n.docChanged&&!r)return e.map(n.changes);var i=[],o=function(e,n){i.push({from:e,to:e,value:n})},a=t.startInsertions();if(a){var l=!0,s=!1,c=void 0;try{for(var u,d=a[Symbol.iterator]();!(l=(u=d.next()).done);l=!0)!function(){var e=u.value,t=new ge(e.content,function(){return gt(n.state,e.content)});o(0,no.NZ.widget({widget:t,side:-1,block:!0}))}()}catch(e){s=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(s)throw c}}}var p=!0,f=!1,h=void 0;try{for(var m,g=t.lines()[Symbol.iterator]();!(p=(m=g.next()).done);p=!0){var v=m.value;if(v.isDeleted&&o(v.from,m9),v.insertions){var w=!0,y=!1,b=void 0;try{for(var S,Y=v.insertions[Symbol.iterator]();!(w=(S=Y.next()).done);w=!0)!function(){var e=S.value,t=new ge(e.content,function(){return gt(n.state,e.content)});o(v.to,no.NZ.widget({widget:t,side:1,block:!0}))}()}catch(e){y=!0,b=e}finally{try{w||null==Y.return||Y.return()}finally{if(y)throw b}}}}}catch(e){f=!0,h=e}finally{try{p||null==g.return||g.return()}finally{if(f)throw h}}return no.NZ.set(i,!0)},provide:function(e){return no.Lz.decorations.from(e)}});function gt(e,n){var t,r=document.createDocumentFragment(),i=null==(t=e.facet(m0.BH))?void 0:t.parser;if(!i){var o=document.createElement("span");return o.textContent=n,r.append(o),r}var a=i.parse(n),l=0;if((0,m1.DM)(a,{style:function(n){return(0,m0.GY)(e,n)}},function(e,t,i){if(e>l){var o=document.createElement("span");o.textContent=n.slice(l,e),r.append(o)}var a=document.createElement("span");a.className=i,a.textContent=n.slice(e,t),r.append(a),l=t}),l<n.length){var s=document.createElement("span");s.textContent=n.slice(l),r.append(s)}return r}var gr=function(e){function n(e){var t;return(0,uY._)(this,n),(t=(0,uS._)(this,n)).line=e,t}(0,uA._)(n,e);var t=n.prototype;return t.eq=function(e){return this.line===e.line},t.toDOM=function(){var e=document.createElement("div");return e.className="cm-diff-gutter-element-fallback",e.innerText=this.line.toString(),e},n}(no.wJ),gi=function(e){function n(e,t){var r;return(0,uY._)(this,n),(r=(0,uS._)(this,n)).elementClass="cm-diff-gutter-block",r.lines=e,t&&(r.preceding=t),r}(0,uA._)(n,e);var t=n.prototype;return t.eq=function(e){var n,t,r,i;if((null==(n=this.lines)?void 0:n.length)!==(null==e||null==(t=e.lines)?void 0:t.length)||(null==(r=this.preceding)?void 0:r.length)!==(null==e||null==(i=e.preceding)?void 0:i.length))return!1;if(this.preceding&&e.preceding)for(var o=0;o<this.preceding.length;o++){var a=this.preceding[o],l=e.preceding[o];if(a.height!==l.height||a.left!==l.left||a.right!==l.right)return!1}if(this.lines&&e.lines)for(var s=0;s<this.lines.length;s++){var c=this.lines[s],u=e.lines[s];if(c.height!==u.height||c.left!==u.left||c.right!==u.right)return!1}return!0},t.toDOM=function(){var e=this,n=document.createElement("div");if(this.preceding){var t=this.preceding.slice().reverse(),r=0,i=!0,o=!1,a=void 0;try{for(var l,s=t[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=l.value;r+=c.height;var u=this.piece(c);u.style.position="absolute",u.style.top="-".concat(r,"px"),n.prepend(u)}}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}}var d=this.lines.map(function(n){return e.piece(n)});return n.append.apply(n,(0,X._)(d)),n},t.piece=function(e){var n=e.height,t=e.left,r=e.right,i=document.createElement("span");i.className="cm-diff-gutter-part",null!==t&&(i.innerText=t.toString());var o=document.createElement("span");o.className="cm-diff-gutter-part",null!==r&&(o.innerText=r.toString());var a=document.createElement("div");return a.className="cm-diff-gutter-element",a.style.height="".concat(n,"px"),a.append(i,o),(null===t||null===r)&&(null===r&&a.classList.add("cm-diff-gutter-deleted"),null===t&&a.classList.add("cm-diff-gutter-inserted")),a},n}(no.wJ),go=(0,no.cU)({class:"cm-lineNumbers cm-diff-gutter",markers:function(e){var n=e.viewportLineBlocks,t=[],r=m5(e.state).compareTo,i=e.state.field(m6,!1),o=function(e,n){t.push({from:e,to:e,value:n})};if(!r||!i){var a=!0,l=!1,s=void 0;try{for(var c,u=n[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var d=c.value,p=e.state.doc.lineAt(d.from).number;if(d.type===no._B.Text)o(d.from,new gr(p));else if(Array.isArray(d.type)){var f=!0,h=!1,m=void 0;try{for(var g,v=d.type[Symbol.iterator]();!(f=(g=v.next()).done);f=!0){var w=g.value;if(w.type===no._B.Text){o(w.from,new gr(p));break}}}catch(e){h=!0,m=e}finally{try{f||null==v.return||v.return()}finally{if(h)throw m}}}}}catch(e){l=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw s}}return ni.om.of(t,!0)}var y=!0,b=!1,S=void 0;try{for(var Y,A=n[Symbol.iterator]();!(y=(Y=A.next()).done);y=!0){var x=Y.value,C=[],_=e.state.doc.lineAt(x.from).number,k=i.line(_);if(k){var D=e.defaultLineHeight,E=k.offset,R=k.isDeleted,I=k.insertions,F=1===_?i.startInsertions():null,T=F?F.length:0,P=F?[]:null;if(!(Array.isArray(x.type)&&x.type.length>=T+(null!=(O=null==I?void 0:I.length)?O:0)+1)){if(F&&P){var L=!0,U=!1,N=void 0;try{for(var O,M,B=F[Symbol.iterator]();!(L=(M=B.next()).done);L=!0){var H=M.value;P.push({height:D,left:null,right:H.number})}}catch(e){U=!0,N=e}finally{try{L||null==B.return||B.return()}finally{if(U)throw N}}}if(C.push({height:x.height,left:_,right:R?null:_+E}),I){var z=!0,W=!1,G=void 0;try{for(var V,j=I[Symbol.iterator]();!(z=(V=j.next()).done);z=!0){var Z=V.value;C.push({height:D,left:null,right:Z.number})}}catch(e){W=!0,G=e}finally{try{z||null==j.return||j.return()}finally{if(W)throw G}}}o(x.from,new gi(C,P));continue}for(var q=0;q<x.type.length;q++){var K=x.type[q];if((null==K?void 0:K.type)===no._B.Text){if(F&&P)for(var $=0;$<F.length;$++){var J,Q=F[$],X=x.type[q-$-1];P.push({height:null!=(J=null==X?void 0:X.height)?J:D,left:null,right:Q.number})}if(C.push({height:K.height,left:_,right:R?null:_+E}),I)for(var ee=0;ee<I.length;ee++){var en,et=I[ee],er=x.type[q+ee+1];C.push({height:null!=(en=null==er?void 0:er.height)?en:D,left:null,right:et.number})}break}}o(x.from,new gi(C,P))}}}catch(e){b=!0,S=e}finally{try{y||null==A.return||A.return()}finally{if(b)throw S}}return ni.om.of(t,!0)},lineMarkerChange:function(e){if(e.docChanged)return!0;var n=!0,t=!1,r=void 0;try{for(var i,o=e.transactions[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value;if(m5(a).changed)return!0}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}return!1},initialSpacer:function(e){return new gr(e.state.doc.lines)},updateSpacer:function(e,n){var t=n.state.doc.lines;return m5(n.state).compareTo?new gi([{height:0,left:t,right:t}]):new gr(t)}}),ga="#0053A644",gl="#c93c3733",gs=[no.Lz.theme({".cm-diff-inserted":{backgroundColor:ga},".cm-diff-deleted":{backgroundColor:gl},".cm-diff-gutter .cm-diff-gutter-block":{position:"relative",padding:"0"},".cm-diff-gutter-element":{display:"flex",width:"100%",alignItems:"center",columnGap:"8px",padding:"0 6px",borderLeft:"4px solid transparent"},".cm-diff-gutter-part":{display:"inline-block",height:"100%",width:"50%",textAlign:"center"},".cm-diff-gutter-inserted":{backgroundColor:ga,borderLeftColor:"#0053A6"},".cm-diff-gutter-deleted":{backgroundColor:gl,borderLeftColor:"#c93c37"},".cm-diff-gutter + .cm-foldGutter":{width:"0",transform:"translateX(-12px)",overflow:"visible"},".cm-diff-gutter .cm-diff-gutter-element":{paddingRight:"16px"},".cm-diff-gutter .cm-diff-gutter-element-fallback":{paddingRight:"12px"}}),m4.state,m6,gn,go,(0,m0.Lv)({openText:"",closedText:""})],gc=t(48122),gu=function(e){return e[e.Insertion=0]="Insertion",e[e.Deletion=1]="Deletion",e}({}),gd=function(){function e(n){(0,uY._)(this,e),this.map=new Map,this.duration=n}var n=e.prototype;return n.set=function(e,n,t,r,i){var o=this.map.get(e);o||(o=new Map,this.map.set(e,o)),o.set(n,{from:e,to:n,time:t,type:r,cursor:i})},n.get=function(e,n){var t=this.map.get(e);if(t)return t.get(n)},n.update=function(n){var t=Date.now(),r=new e(this.duration),i=!0,o=!1,a=void 0;try{for(var l,s=this[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=l.value;if(!(t-c.time>this.duration)){var u=n.changes.mapPos(c.from,-1,ni.iR.TrackDel),d=n.changes.mapPos(c.to,-1,ni.iR.TrackDel);if(null!==u&&null!==d){var p=c.cursor;n.docChanged&&(p=!1),r.set(u,d,c.time,c.type,p)}}}}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}return n.changes.iterChangedRanges(function(e,n,i,o){r.set(i,o,t,+(i===o),!0)},!0),r},n.cursors=function(){var e,n,t,r,i,o,a;return(0,b.YH)(this,function(l){switch(l.label){case 0:e=!0,n=!1,t=void 0,l.label=1;case 1:l.trys.push([1,6,7,8]),r=this[Symbol.iterator](),l.label=2;case 2:if(e=(i=r.next()).done)return[3,5];if(!(o=i.value).cursor)return[3,4];return[4,{type:o.type,pos:o.to}];case 3:l.sent(),l.label=4;case 4:return e=!0,[3,2];case 5:return[3,8];case 6:return a=l.sent(),n=!0,t=a,[3,8];case 7:try{e||null==r.return||r.return()}finally{if(n)throw t}return[7];case 8:return[2]}})},n[Symbol.iterator]=function(){var e=[],n=!0,t=!1,r=void 0;try{for(var i,o=this.map.values()[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value,l=!0,s=!1,c=void 0;try{for(var u,d=a.values()[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var p=u.value;e.push(p)}}catch(e){s=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(s)throw c}}}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}return e[Symbol.iterator]()},e}(),gp=function(){function e(n){var t=this;(0,uY._)(this,e),this.view=n,this.overlay=document.createElement("div"),this.overlay.className="cm-overlay-generic",this.overlay.style.pointerEvents="none",this.overlay.style.contain="size style",this.overlay.setAttribute("aria-hidden","true"),this.view.scrollDOM.appendChild(this.overlay),this.elements=new Map,this.measureRequest={key:this,read:function(){var e=[],n=t.view.scrollDOM.getBoundingClientRect(),r=t.view.scrollDOM.scrollTop,i=t.view.scrollDOM.scrollLeft,o=!0,a=!1,l=void 0;try{for(var s,c=t.elements.values()[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var u=s.value,d=u.dom,p=u.pos,f=u.offsetX,h=u.offsetY,m=t.view.coordsAtPos(p),g=t.view.lineBlockAt(p);if(!m){e.push({dom:d,x:null,y:null});continue}var v=g.top-r+n.top+t.view.documentPadding.top,w=Math.round((m.top-v)/t.view.defaultLineHeight)*t.view.defaultLineHeight+v,y=i+m.left-n.left+f,b=r+w-n.top+h;e.push({dom:d,x:y,y:b})}}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}return e},write:function(e){var n=!0,t=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done);n=!0)!function(){var e=i.value,n=e.dom,t=e.x,r=e.y;if(null===t||null===r)return n.style.visibility="hidden",n.style.transition="none";n.style.visibility="",n.style.transform="translate(".concat(t,"px, ").concat(r,"px)"),n.style.transition.startsWith("none")&&requestAnimationFrame(function(){n.style.transition=""})}()}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}}}}var n=e.prototype;return n.destroy=function(){this.view.scrollDOM.removeChild(this.overlay)},n.map=function(e){if(e.geometryChanged||e.viewportChanged){if(e.docChanged){var n=Array.from(this.elements.values()),t=!0,r=!1,i=void 0;try{for(var o,a=n[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value,s=e.changes.mapPos(l.pos,-1,ni.iR.TrackDel);if(!s){this.removeElement(l.dom);continue}l.pos=s}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}}this.view.requestMeasure(this.measureRequest)}},n.addElement=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(!this.elements.has(e)){var i={dom:e,pos:n,offsetX:t,offsetY:r};return this.elements.set(e,i),this.overlay.appendChild(e),e.style.visibility="hidden",e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.willChange="transform",e.style.transition="none",this.view.requestMeasure(this.measureRequest),i}},n.removeElement=function(e){this.elements.has(e)&&(this.elements.delete(e),e.parentNode===this.overlay&&this.overlay.removeChild(e))},n.updateElement=function(e,n){var t=n.pos,r=n.offsetX,i=n.offsetY,o=this.elements.get(e);o&&(void 0!==t&&(o.pos=t),void 0!==r&&(o.offsetX=r),void 0!==i&&(o.offsetY=i),this.view.requestMeasure(this.measureRequest))},n.clear=function(){this.elements.clear(),this.overlay.innerHTML=""},e}(),gf="cm-flash-insertion",gh="cm-flash-deletion",gm="cm-flash-element",gg=no.Lz.theme((0,g._)({},".".concat(gf,", .").concat(gh),{display:"inline-block"})),gv=function(e){function n(){return(0,uY._)(this,n),(0,uS._)(this,n,arguments)}(0,uA._)(n,e);var t=n.prototype;return t.isNested=function(){for(var e=this.parentElement;e&&!e.classList.contains("cm-line");){if(e instanceof n&&e.type===this.type)return!0;e=e.parentElement}return!1},t.stop=function(){var e,n;null==(n=this.animation)||null==(e=n.cancel)||e.call(n)},t.play=function(){var e=this.isPlaying;if(this.stop(),!this.isNested()){var n=Date.now()-parseInt(this.getAttribute("data-time")||"0",10);if(!(n>1e3)){var t=this.type===gu.Insertion?"rgba(100, 255, 0, 0.3)":"rgba(255, 32, 32, 0.25)";this.animate&&(this.animation=this.animate({backgroundColor:e?[t,t,"transparent"]:["transparent",t,"transparent"],offset:[0,.05,1]},{id:"cm-flash-anim",duration:1e3,easing:"ease-in-out",delay:-n}))}}},t.connectedCallback=function(){this.play()},t.attributeChangedCallback=function(e,n,t){"data-time"===e&&t&&this.play()},(0,gc._)(n,[{key:"type",get:function(){return this.classList.contains(gf)?gu.Insertion:gu.Deletion}},{key:"isPlaying",get:function(){var e;return(null==(e=this.animation)?void 0:e.playState)==="running"}}],[{key:"observedAttributes",get:function(){return["data-time"]}}]),n}((0,mI._)(HTMLElement));customElements.get(gm)||customElements.define(gm,gv);var gw=function(){function e(n){(0,uY._)(this,e),this.view=n,this.prevFlashes=new gd(1e3),this.decorations=no.NZ.set([]),this.hasRenderedOnce=!1,this.overlay=new gp(n)}var n=e.prototype;return n.destroy=function(){this.overlay.destroy()},n.update=function(e){if(!this.hasRenderedOnce){e.docChanged&&(this.hasRenderedOnce=!0);return}var n=this.prevFlashes.update(e),t=[],r=!0,i=!1,o=void 0;try{for(var a,l=n[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var s=a.value;switch(s.type){case gu.Insertion:t.push({from:s.from,to:s.to,value:(c=s.time,no.NZ.mark({class:gf,tagName:gm,attributes:{"data-time":c.toString()}}))});break;case gu.Deletion:var c,u,d=e.state.wordAt(s.from);d&&t.push({from:d.from,to:s.to,value:(u=s.time,no.NZ.mark({class:gh,tagName:gm,attributes:{"data-time":u.toString()}}))})}}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}this.overlay.clear();var p=this.view.defaultLineHeight.toString()+"px",f=!0,h=!1,m=void 0;try{for(var g,v=n.cursors()[Symbol.iterator]();!(f=(g=v.next()).done);f=!0){var w=g.value,y=w.type,b=w.pos,S=function(e,n){var t=e===gu.Insertion?"rgba(0, 100, 255, 1)":"rgba(255, 32, 32, 1)",r=document.createElement("div");return r.style.width="3px",r.style.height=n,r.style.borderRadius="1px",r.style.backgroundColor=t,r.animate&&r.animate({opacity:[1,0]},{duration:500,delay:400,fill:"forwards"}),r}(y,p);this.overlay.addElement(S,b)}}catch(e){h=!0,m=e}finally{try{f||null==v.return||v.return()}finally{if(h)throw m}}this.prevFlashes=n,this.decorations=no.NZ.set(t,!0)},e}(),gy=no.Z9.fromClass(gw,{decorations:function(e){return e.decorations}}),gb=ni.Nb.lowest([gg,gy]),gS=t(26019),gY=function(){function e(n){(0,uY._)(this,e),this.changes=[],this.forward=[],this.inverted=[],this.locations=[];var t=!0,r=!1,i=void 0;try{for(var o,a,l=n[Symbol.iterator]();!(t=(a=l.next()).done);t=!0)o=this,function(){var e=a.value,n=e.changes,t=e.invertedChanges,r=null,i=!1;n.iterChangedRanges(function(e,n,t,o){i||(r||(r=o),t!==o&&(i=!0))}),o.forward.push(n),o.inverted.push(t),o.locations.push(r)}()}catch(e){r=!0,i=e}finally{try{t||null==l.return||l.return()}finally{if(r)throw i}}}var n=e.prototype;return n.slice=function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length;if(n>this.length||t>this.length||n<0||t<0)throw Error("Invalid version range");if(n===t){if(0===this.length)return[ni.VR.empty(0),null];var r=this.forward[n].newLength;return[ni.VR.empty(r),null]}var i=n<t?gA(this.forward.slice(n,t)):gA(this.inverted.slice(t,n).reverse()),o=n<t?n:t-1,a=null!=(e=this.locations[o])?e:null;return null!==a&&a>i.newLength&&(a=i.newLength),[i,a]},n.get=function(e){if(e>this.length||e<0)throw Error("Invalid version");return this.changes[e]},n.documentFor=function(e){if(e>this.length||e<0)throw Error("Invalid version");if(0===this.length)return"";var n=(0,v._)(this.slice(0,e),1)[0],t=ni.EY.of([""]);return n.apply(t).sliceString(0)},(0,gc._)(e,[{key:"length",get:function(){return this.forward.length}}]),e}();function gA(e){if(0===e.length)return ni.VR.empty(0);if(1===e.length)return e[0];var n=(0,pi._)(e),t=n[0],r=n.slice(1),i=t,o=!0,a=!1,l=void 0;try{for(var s,c=r[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var u=s.value;i=i.compose(u)}}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}return i}var gx=t(80161),gC=new nd.k(function(){return(0,no.BE)()}),g_=[gb,gs];function gk(e){var n,t,r,i=e.filePath,o=(0,eh.N_)(),a=(0,nu.A)(),l=a.ref,s=a.view;(0,gx.Hn)(s),(0,eh.sC)(s);var c=mb();n=(0,w.useMemo)(function(){return(null==o?void 0:o.changes)?new gY(o.changes):null},[null==o?void 0:o.changes]),t=(0,w.useMemo)(function(){return n?n.documentFor(n.length):null},[n]),r=(0,w.useRef)({current:-1,next:0,pending:!1}),(0,w.useEffect)(function(){if(s)return function(){r.current.pending=!1,r.current={current:-1,next:0,pending:!1}}},[s]),(0,w.useEffect)(function(){if(s&&o&&n){o.comparing?m3(s,t):m3(s,null);var e=r.current;e.next=o.version,e.pending||e.current===e.next||(e.pending=!0,requestAnimationFrame(function(){!1!==e.pending&&(e.pending=!1,s&&n&&e.current!==e.next&&(function(e,n,t,r){var i=(0,v._)(n.slice(t+1,r+1),2),o=i[0],a=i[1];if(o.length!==e.state.doc.length){var l=(0,v._)(n.slice(0,r+1),1)[0];if(l.length!==e.state.doc.length)throw Error("Unresolvable mismatch between changes and document");e.dispatch({changes:{from:0,to:e.state.doc.length}}),e.dispatch({changes:l});return}e.dispatch({changes:o,effects:a?no.Lz.scrollIntoView(a,{yMargin:10}):void 0})}(s,n,e.current,e.next),e.current=e.next))}))}},[s,o,n,t]);var u=gC.use();return(0,f.Y)("div",{css:gS.jy,children:(0,f.Y)("div",{css:gS.mV,children:o&&0===o.count?(0,f.Y)(gD,{}):(0,f.Y)("div",{css:gS.mV,children:(0,f.Y)(ns.Ay,{ref:l,css:gS.$1,filePath:i,extensions:[u,g_],initializing:!o,onException:function(e){c(e,"viewer-codemirror")},readOnly:!0,noHistory:!0,hideGutter:!0})})})})}function gD(){return(0,f.Y)("div",{css:[gS.mV,{display:"flex",alignItems:"center",justifyContent:"center"}],children:(0,f.Y)("span",{children:"This file has no history."})})}var gE=h.ZU.Object({type:h.ZU.Literal("history"),data:h.ZU.Object({path:h.ZU.Union([h.ZU.String(),h.ZU.Null()])})}),gR={Content:function(e){var n=e.pane,t=e.options;return(0,f.Y)(gI,(0,nt._)((0,ee._)({},n.data),{performPaneOperation:t.performPaneOperation}))},Icon:function(e){var n=e.size;return(0,f.Y)(mN.A,{size:n})},getTitle:function(e){return e.data.path?"History - ".concat((0,tt.WP)(e.data.path)):"History - no file open"},category:nQ.bY.WorkspaceFeatures,decode:function(e){return m.T(gE,e)}};function gI(e){var n=e.path,t=e.performPaneOperation,r=(0,v._)((0,w.useState)(function(){return(0,ez.y$)()}),1)[0],i=(0,v._)((0,w.useState)(function(){return(0,ez.y$)()}),1)[0],o=(0,n5.KA)({path:n,performPaneOperation:t});(0,tr.Qt)(function(){if(o)return{commands:[{commands:o}]}},[o]);var a=(0,pv.A)(function(){return function(){t({operation:"replace",pane:{type:"codeEditor",data:{path:n}}})}},[n,t]);return n?(0,f.Y)(gx.dz.Provider,{value:r,children:(0,f.Y)(eh.GK.Provider,{value:i,children:(0,f.FD)("div",{css:{position:"relative",display:"flex",flexDirection:"column",overflowY:"hidden",height:"100%",width:"100%"},children:[(0,f.Y)(n5.ou,{path:n,performPaneOperation:t}),(0,f.Y)(gk,{filePath:n}),(0,f.Y)(mQ,{filePath:n,onCloseHistory:a})]})})}):null}var gF=t(61908),gT=t(67251),gP=t(41852),gL=(0,V.x)({button:{width:"fit-content"}});function gU(e){var n=e.code,t=e.activeFile,r=(0,gP.vO)(),i=(0,gT.A)(t),o=i?{text:"Insert",iconRight:(0,f.Y)(rb.A,{}),onClick:function(){var e,t,o;return i({code:n,insertAt:null!=(o=null==(t=r())||null==(e=t.position)?void 0:e.offset)?o:"end"})}}:{text:"Copy",iconLeft:(0,f.Y)(fr.A,{}),onClick:function(){return(0,eP.default)(n)}};return(0,f.Y)(eu.ui,{background:"default",children:(0,f.Y)(eS.$n,(0,ee._)({size:"small",variant:"outlined",css:gL.button},o))})}var gN=(0,V.x)({self:j.wp.colWithGap(4),content:[j.wp.backgroundColor.backgroundRoot,j.wp.borderRadius(4),j.wp.p(4),j.wp.align.center,j.wp.maxWidth("100%"),j.wp.overflowX("auto"),{width:"fit-content"}]});function gO(e){var n=e.method,t=e.content,r=e.activeFile,i=(0,v._)((0,w.useState)(t),2),o=i[0],a=i[1];return(0,f.FD)(L.S,{css:gN.self,children:[(0,f.Y)(gG,{title:n}),(0,f.Y)(L.S,{css:gN.content,row:!0,gap:4,children:o.map(function(e,t){var r="".concat(n,"-").concat(t);return"input"===e.type?(0,f.Y)(gB,{i:t,value:e.value,placeholder:e.placeholder,setContent:a},r):(0,f.Y)(gz,{value:e.value},r)})}),(0,f.Y)(gU,{code:o.reduce(function(e,n){return e+(n.value||("input"===n.type?n.placeholder:""))},""),activeFile:r})]})}var gM=(0,V.x)({self:[j.wp.width(64),j.wp.height(24),j.wp.zIndex(1)]});function gB(e){var n=e.i,t=e.value,r=e.placeholder,i=e.setContent;return(0,f.Y)(eA.pd,{onChange:function(e){i(function(t){return t.map(function(t,r){return n===r?(0,nt._)((0,ee._)({},t),{value:e.target.value}):t})})},placeholder:r,value:t||"",css:gM.self})}var gH=(0,V.x)({self:[j.wp.borderRadius(0),j.wp.backgroundColor.backgroundRoot],code:[j.wp.font.code,j.wp.color.greyStronger,j.wp.p(4),{whiteSpace:"pre-wrap"}]});function gz(e){var n=e.value;return(0,f.Y)(L.S,{css:gH.self,children:(0,f.Y)(T.EY,{css:gH.code,children:n})})}var gW=(0,V.x)({self:j.wp.rowWithGap(4),bold:{fontWeight:k.LU.fontWeightMedium}});function gG(e){var n=e.title,t=(0,v._)((0,pv.A)(function(){var e=(0,pi._)(n.split(" "));return[e[0],e.slice(1).join(" ")]},[n]),2),r=t[0],i=t[1];return(0,f.FD)(L.S,{css:gW.self,children:[(0,f.Y)(T.EY,{css:gW.bold,multiline:!1,children:r}),(0,f.Y)(T.EY,{color:"dimmer",multiline:!1,children:i})]})}var gV=function(e){return e.IMPORT="Import the database",e.CREATE="Create a new database",e.SET="Set a key to a value",e.GET="Get a key's value",e.DELETE="Delete a key",e.LIST="List all keys",e.LIST_PREFIX="List keys with a prefix",e}(gV||{}),gj={language:"Bash",methods:[g$("Set a key to a value","curl $REPLIT_DB_URL -d '{{key}} = {{value}}'"),g$("Get a key's value","curl $REPLIT_DB_URL/{{key}}"),g$("Delete a key","curl -XDELETE $REPLIT_DB_URL/{{key}}"),g$("List all keys",'curl "$REPLIT_DB_URL?prefix={{key}}"')]},gZ={language:"Node",methods:[g$("Import the database",'const Database = require("@replit/database")'),g$("Create a new database","const db = new Database()"),g$("Set a key to a value",'db.set("{{key}}", "{{value}}").then(() => {})'),g$("Get a key's value",'db.get("{{key}}").then(value => {})'),g$("Delete a key",'db.delete("{{key}}").then(() => {})'),g$("List all keys","db.list().then(keys => {\n  console.log(keys);\n})"),g$("List keys with a prefix",'db.list("{{prefix}}").then(matches => {})')]},gq={language:"Go",methods:[g$("Import the database",'import "github.com/replit/database-go"'),g$("Set a key to a value",'db.Set("{{key}}", "{{value}}")'),g$("Get a key's value",'value, _ := database.Get("{{key}}")'),g$("Delete a key",'database.Delete("{{key}}")'),g$("List all keys",'keys, _ := database.ListKeys("")'),g$("List keys with a prefix",'matches, _ := database.ListKeys("{{prefix}}")')]},gK={language:"Python",methods:[g$("Import the database","from replit import db"),g$("Set a key to a value",'db["{{key}}"] = "{{value}}"'),g$("Get a key's value",'db["{{key}}"]'),g$("Delete a key",'del db["{{key}}"]'),g$("List all keys","keys = db.keys()\nprint(list(keys))"),g$("List keys with a prefix",'matches = db.prefix("{{prefix}}")')]};function g$(e,n){return{method:e,content:function(e){for(var n=[],t=0;t<e.length;){var r=e.indexOf("{{",t),i=e.indexOf("}}",t);if(-1===r||-1===i){n.push({type:"code",value:e.substring(t)});break}n.push({type:"code",value:e.substring(t,r)}),n.push({type:"input",placeholder:e.substring(r+2,i)}),t=i+2}return n}(n)}}var gJ=(0,V.x)({self:j.wp.colWithGap(24),code:[j.wp.font.code,j.wp.color.greyStronger,j.wp.backgroundColor.backgroundRoot,j.wp.p(4),j.wp.borderRadius(4)]});function gQ(e){var n=e.activeFile,t=(0,pv.A)(function(){switch(n?(0,tt.an)(n):"bash"){case"js":case"ts":case"tsx":case"jsx":case"mjs":return gZ;case"go":return gq;case"py":return gK;default:return gj}},[n]);return(0,f.FD)(L.S,{css:gJ.self,children:[(0,f.FD)(T.EY,{color:"dimmer",children:["You can use the Database from any App by making HTTP requests or a client library as outlined below. Weve set an environment variable called ",(0,f.Y)("code",{css:gJ.code,children:"REPLIT_DB_URL"})," in your App if you'd like to interact with the database directly."]}),t.methods.map(function(e){return(0,f.Y)(gO,{method:e.method,content:e.content,activeFile:n},"".concat(t.language).concat(e.method))})]})}function gX(e){var n=e.title,t=e.defaultExpanded,r=e.children;return(0,f.Y)(D.A,{defaultExpanded:t,headerContent:(0,f.Y)(T.EY,{variant:"subheadDefault",multiline:!1,children:n}),children:(0,f.Y)(L.S,{p:12,gap:8,children:r})})}var g0=(0,nF.i7)("from{opacity:0}to{opacity:1}"),g1=(0,V.x)({self:[{animation:"".concat(g0," 100ms forwards ease-in-out alternate")}],selfLoadingText:[j.wp.height(16),j.wp.width(48),j.wp.borderRadius(4),nM.S.backgroundPulse()],selfLoading:[j.wp.height(12),j.wp.borderRadius(16),nM.S.backgroundPulse()],text:[j.wp.rowWithGap(4),{display:"inline-flex"}],textSpan:[j.wp.width("fit-content"),j.wp.display.inlineFlex]});function g2(e){var n,t,r=e.database,i=e.loading,o=(null==r?void 0:r.sizeMB)||0,a=(n=1e6*(n=o)/1048576,"".concat(n.toFixed(),"/50 MiB")),l=i||!r;return(0,f.Y)(L.S,{css:g1.self,gap:8,children:l?(0,f.FD)(f.FK,{children:[(0,f.Y)(L.S,{css:g1.selfLoadingText}),(0,f.Y)(L.S,{css:g1.selfLoading})]}):(0,f.FD)(f.FK,{children:[(0,f.FD)(T.EY,{color:"dimmer",css:g1.text,multiline:!1,children:[(0,f.Y)(L.D.span,{css:g1.textSpan,children:a}),(0,f.Y)(L.D.span,{css:g1.textSpan,children:"|"}),(0,f.Y)(L.D.span,{css:g1.textSpan,children:(t=(t=null==r?void 0:r.keysCount)||0,"".concat(t," ").concat((0,i8.A)("key",t)))})]}),(0,f.Y)(s2.W,{current:o,total:50,tooltip:a})]})},l?"databaseLoadingStats":"databaseLoadedStats")}function g4(){var e=(0,en._)(["\n  fragment DatabaseUsage on Database {\n    id\n    keysCount\n    sizeMB\n  }\n"]);return g4=function(){return e},e}function g5(){var e=(0,en._)(["\n  query Database($replID: String!) {\n    repl(id: $replID) {\n      ... on Repl {\n        id\n        database {\n          id\n          ...DatabaseUsage\n        }\n      }\n    }\n    currentUser {\n      id\n      isLoggedIn\n    }\n  }\n  ","\n"]);return g5=function(){return e},e}var g3={},g6=(0,et.J1)(g4()),g8=(0,et.J1)(g5(),g6),g7=t(54497),g9=(0,V.x)({sectionWrapper:[j.wp.width("100%"),j.wp.maxWidth(450)]});function ve(e){var n,t,r,i,o,a,l,s,c,u=e.performPaneOperation,d=(l=(i={variables:{replID:(0,nI.A)()},pollInterval:1e4},o=(0,ee._)({},g3,i),a=er.I(g8,o)).data,s=a.error,c=a.loading,l&&("Repl"===l.repl.__typename?t=null==l||null==(r=l.repl)?void 0:r.database:n="Could not fetch Database info"),s&&("GraphQL error: You don't have access to this database"===s.message?t=null:n=s.message),{db:t,loading:c,error:n}),p=d.db,h=d.error,m=d.loading,g=(0,gP.rM)(),v=(0,nQ.Vv)().getTitle({type:"database"});return(0,f.Y)(md.A,{pane:{type:"database"},headerText:v,action:(0,f.FD)(L.S,{css:g9.sectionWrapper,gap:16,children:[h?(0,f.Y)(iI.N,{colorway:"negative",text:h}):null,(0,f.Y)(gX,{title:"Storage capacity",children:(0,f.Y)(g2,{database:p,loading:m})}),(0,f.Y)(gX,{title:"How to use the database",children:(0,f.Y)(gQ,{activeFile:g})}),(0,f.Y)(vn,{performPaneOperation:u})]})})}function vn(e){var n=e.performPaneOperation;return(0,f.Y)(tK.v,{href:tZ.ik.REPL_DATABASE,target:"_blank",rel:"noopener",onClick:function(e){e.preventDefault(),n({operation:"open",pane:{type:"docs",data:{url:tZ.ik.REPL_DATABASE}}})},iconLeft:(0,f.Y)(g7.A,{}),text:"Learn more in the docs"})}var vt=t(7440),vr=h.ZU.Object({type:h.ZU.Literal("database")}),vi={Content:function(e){var n=e.options.performPaneOperation;return(0,f.Y)(ve,{performPaneOperation:n})},Icon:function(e){var n=e.size;return(0,f.Y)(n0.Vx.Provider,{value:{color:k.LU.blurpleStronger,size:n},children:(0,f.Y)(vt.A,{})})},getTitle:function(){return"Replit Key-Value Store"},description:"Free, easy-to-use key-value store suitable for unstructured data, caching, session management, fast lookups, and flexible data models",category:nQ.bY.CloudServices,decode:function(e){return m.T(vr,e)}},vo=t(69945),va=t.n(vo),vl=t(15503),vs=t(19732),vc=t(92985),vu=t(69584),vd=t(48578),vp=t(29422),vf=t(639),vh=(0,w.memo)(vu.A),vm=(0,V.x)({bodyRoot:[j.wp.flex.growAndShrink(1),j.wp.overflowY("auto")],contentRoot:[j.wp.height("100%"),j.wp.width("100%"),j.wp.overflow("auto"),j.wp.zIndex(2),j.wp.align.center,j.wp.py(16),j.wp.px(16),j.wp.borderRadius(8),(0,g._)({margin:"0 auto"},"@media only screen and (min-width: ".concat(lh.LO.tabletMin,"px)"),j.wp.px(32))],emptyState:[{"& button":[{color:k.LU.foregroundDimmer}]}],markdownContainer:[j.wp.width("100%"),{"& .rendered-markdown":[j.wp.flex.column,j.wp.center],"& .rendered-markdown > *":[j.wp.maxWidth(840),j.wp.width("100%")],"& .rendered-markdown > table":j.wp.maxWidth("100%")}],paneRoot:[j.wp.position.relative,j.wp.display.flex,j.wp.flex.column,j.wp.overflowY("hidden"),j.wp.height("100%"),j.wp.width("100%")]});function vg(e){var n,t,r=(0,A.A)().fs,i=(0,v._)((n=(0,w.useRef)(!1),t=(0,w.useRef)(null),[(0,tw.A)(function(){n.current=!0,t.current&&clearTimeout(t.current),t.current=setTimeout(function(){n.current=!1},150)},{type:"throttle",wait:37.5}),n]),2),o=i[0],a=i[1],l=(0,w.useRef)(null),s=(0,vl.j)(),c=e.path,u=e.performPaneOperation,d=(0,w.useCallback)(function(){u({operation:"replace",pane:{type:"codeEditor",data:{path:c}}}),u({operation:"commit"})},[u,c]);(0,tr.Qt)(function(){return{commands:[{commands:[{match:vc.G2,data:{label:"Open in Editor",icon:(0,f.Y)(f2.A,{}),type:"action",run:d}}]}]}},[d]);var p=e.isHidden,h=(0,vf.Af)();(0,w.useEffect)(function(){if(!p){var e=va()(function(e){(0,vs.A)(e,{behavior:s?"auto":"smooth",scrollMode:"if-needed"})},100),n=va()(function(n){if(c===(null==n?void 0:n.path)&&n&&!a.current){var t=l.current?function(e,n){var t=e.querySelectorAll(".rendered-markdown [data-sourcepos]");if(!(null==t?void 0:t.length))return null;var r=Array.from(t).reverse(),i=n.line,o=n.column,a=!0,l=!1,s=void 0;try{for(var c,u=r[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var d=c.value,p=d.dataset.sourcepos;if(!p)throw Error("Expected data source pos on selected element");var f=(0,v._)(p.split("-"),2),h=f[0],m=f[1],g=(0,v._)(h.split(":").map(Number),2),w=g[0],y=g[1],b=(0,v._)(m.split(":").map(Number),2),S=b[0],Y=b[1];if(i>=w&&o>=y&&(i<S||i===S&&o<=Y))return d}}catch(e){l=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw s}}}(l.current,n.position):null;t&&e(t)}},200),t=h.subscribe(n);return function(){n.cancel(),e.cancel(),t()}}},[h,p,s,c]);var m=(0,v._)((0,w.useState)(null),2),g=m[0],y=m[1];return(0,w.useEffect)(function(){return y(null),r.watchTextFile(c,{onReady:function(e){y(e.initialContent.toString())},onChange:function(e){y(e.latestContent)},onMoveOrDelete:function(e){e.eventType===eX.dV.Delete&&u({operation:"replace",pane:{type:"commands",data:{autoFocus:!0}}})}})},[c,r,u]),(0,f.FD)(L.S,{css:vm.paneRoot,children:[(0,f.Y)(n5.ou,{path:e.path,performPaneOperation:u,children:g&&g.trim().length?(0,f.Y)(vd.k,{altText:"Open file in editor",buttonText:"Open in Editor",onClick:d,icon:(0,f.Y)(f2.A,{})}):null}),(0,f.Y)(L.S,{css:vm.bodyRoot,children:(0,f.Y)(vv,{ref:o,content:g,fs:r,markdownContainerRef:l,openInEditor:d,path:c})})]})}var vv=(0,w.forwardRef)(function(e,n){var t=e.content,r=e.fs,i=e.markdownContainerRef,o=e.openInEditor,a=e.path;return null===t?(0,f.Y)(vw,{}):(0,f.Y)(L.S,{css:vm.contentRoot,gap:8,innerRef:n,children:(0,f.Y)(L.S,{innerRef:i,css:vm.markdownContainer,children:t.trim().length?(0,f.Y)(vh,{path:a,source:t,fs:r,sourcePos:!0}):(0,f.Y)("div",{className:"rendered-markdown rendered-markdown-empty",children:(0,f.FD)(L.S,{css:vm.emptyState,gap:4,align:"center",innerRef:n,children:[(0,f.Y)(T.EY,{color:"dimmer",children:(0,f.Y)("i",{children:"This file is empty"})}),(0,f.Y)(eS.$n,{text:"Open in Editor",iconLeft:(0,f.Y)(f2.A,{}),onClick:o,variant:"nofill"})]})})})})});function vw(){var e=(0,v._)((0,w.useState)(!1),2),n=e[0],t=e[1];return(0,w.useEffect)(function(){var e=setTimeout(function(){return t(!0)},500);return function(){clearTimeout(e)}},[]),n?(0,f.Y)(vp.A,{}):null}var vy=t(75169),vb=h.ZU.Object({type:h.ZU.Literal("markdown"),data:h.ZU.Object({path:h.ZU.String({minLength:1})})}),vS={Content:function(e){var n=e.pane,t=e.options;return(0,f.Y)(vg,{path:n.data.path,isHidden:!!t.isHidden,performPaneOperation:t.performPaneOperation})},Icon:function(e){var n=e.size;return(0,f.Y)(vy.A,{fill:"currentColor",size:n})},getTitle:function(e){return e.data.path?(0,tt.WP)(e.data.path):"Markdown"},category:nQ.bY.WorkspaceFeatures,decode:function(e){return m.T(vb,e)}},vY=h.ZU.Object({type:h.ZU.Literal("media"),data:h.ZU.Object({path:h.ZU.String()})}),vA={Content:function(e){var n=e.pane,t=e.options;return(0,f.Y)(vx,{path:n.data.path,performPaneOperation:t.performPaneOperation})},Icon:function(e){var n=e.pane,t=e.size;return(0,f.Y)(ti.A,{path:n.data.path,size:t})},getTitle:function(e){return(0,tt.WP)(e.data.path)},category:nQ.bY.WorkspaceFeatures,decode:function(e){return m.T(vY,e)}};function vx(e){var n=e.path,t=e.performPaneOperation,r=(0,A.A)().fs,i=(0,n5.KA)({path:n,performPaneOperation:t}),o=i?(0,X._)(i):[],a=(0,w.useCallback)(function(){t({operation:"replace",pane:{type:"codeEditor",data:{path:n}}})},[t,n]),l={match:vc.G2,data:{label:"Open in Editor",icon:(0,f.Y)(f2.A,{}),type:"action",run:function(){a()}}};return(0,tt.Z7)(n)&&o.push(l),(0,tr.Qt)(function(){if(i)return{commands:[{commands:o}]}},[i]),(0,f.FD)(f.FK,{children:[(0,f.Y)(n5.ou,{path:n,performPaneOperation:t,children:(0,f.Y)(vd.k,{altText:"Open file in editor",buttonText:"Open in Editor",onClick:a,icon:(0,f.Y)(f2.A,{})})}),(0,f.Y)(n5.UC,{centered:!0,children:(0,f.Y)(rw.Ay,{filePath:n,fs:r})})]})}var vC="DATABASE_URL",v_="PGDATABASE",vk="PGHOST",vD="PGPORT",vE="5432",vR="PGUSER",vI="PGPASSWORD",vF=function(e){var n=e.connectionString,t=e.databaseName,r=new URL(n.replace("postgres://","https://").replace("postgresql://","https://"));return new Map([[vC,n],[v_,t],[vk,r.host],[vD,vE],[vR,r.username],[vI,r.password]])};function vT(){return(vT=(0,y._)(function(e){var n,t;function r(){return(r=(0,y._)(function(){var e,r,i,o,a,l,s,c,u,d;return(0,b.YH)(this,function(p){switch(p.label){case 0:return[4,n.read()];case 1:e=p.sent(),r=new Map,i=!0,o=!1,a=void 0;try{for(l=t[Symbol.iterator]();!(i=(s=l.next()).done);i=!0)u=(c=(0,v._)(s.value,2))[0],d=c[1],e.get(u)!==d&&r.set(u,d)}catch(e){o=!0,a=e}finally{try{i||null==l.return||l.return()}finally{if(o)throw a}}return r.size>0&&n.addEntries(r),[2]}})})).apply(this,arguments)}return(0,b.YH)(this,function(i){switch(i.label){case 0:return n=e.secrets,t=vF({connectionString:e.connectionString,databaseName:e.databaseName}),[4,function(){return r.apply(this,arguments)}()];case 1:return i.sent(),[2]}})})).apply(this,arguments)}var vP=t(65237),vL=function(e){(0,ty.u4)(ty.AZ.DATABASE_USED,(0,ee._)({type:"PostgreSQL",provider:"neon"},e))},vU=t(75576),vN=function(e){var n=e.envVarKey,t=e.envVarValue,r=e.isSecret,i=(0,nB.c)()("db-env-var-".concat(n)),o=(0,v._)((0,w.useState)(!1),2),a=o[0],l=o[1];return(0,f.FD)(L.S,{css:[j.wp.flex.wrap,j.wp.align.end,j.wp.pb(8),{gap:k.LU.space8}],row:!0,children:[(0,f.FD)(L.S,{css:[{flexBasis:250},j.wp.flex.grow(0),j.wp.flex.shrink(1)],gap:8,children:[(0,f.Y)("label",{css:j.wp.color.foregroundDimmer,htmlFor:i,children:n}),(0,f.Y)(eA.pd,{id:i,type:!r||a?"text":"password",readOnly:!0,value:t})]}),(0,f.Y)(eS.$n,{text:"Copy",iconLeft:(0,f.Y)(eN.A,{}),onClick:function(){(0,eP.default)(t),vL({action:"envVarCopied",envVarKey:n,envVarType:"value"})}}),r?(0,f.Y)(eS.$n,{text:a?"Hide":"View",iconLeft:a?(0,f.Y)(vU.A,{}):(0,f.Y)(f4.A,{}),onClick:function(){return l(function(e){return!e})}}):null]})},vO=function(e){return(0,w.useCallback)(function(n){return function(e){return vT.apply(this,arguments)}({secrets:e,connectionString:n.connectionString,databaseName:n.databaseName})},[e])},vM=function(e){var n=e.connectionString,t=e.databaseName,r=(0,pv.A)(function(){return vF({connectionString:n,databaseName:t})},[n,t]),i=r.get(vk),o=r.get(vR),a=r.get(vI);if("string"!=typeof i||"string"!=typeof o||"string"!=typeof a)throw Error("Expected all envVars to exist");var l=vO((0,A.A)().secrets);return(0,w.useEffect)(function(){l({connectionString:n,databaseName:t})},[n,t,l]),(0,f.FD)(L.S,{gap:8,children:[(0,f.Y)(vN,{envVarKey:vC,envVarValue:n,isSecret:!0}),(0,f.Y)(vN,{envVarKey:v_,envVarValue:t}),(0,f.Y)(vN,{envVarKey:vk,envVarValue:i}),(0,f.Y)(vN,{envVarKey:vD,envVarValue:vE}),(0,f.Y)(vN,{envVarKey:vR,envVarValue:o}),(0,f.Y)(vN,{envVarKey:vI,envVarValue:a,isSecret:!0})]})};function vB(){var e=(0,en._)(["\n  fragment CurrentUserUsageBasedBillingSummary on CurrentUser {\n    __typename\n    usageBasedBilling {\n      __typename\n      ... on UserUsageBasedBillingSummary {\n        capabilities {\n          canUseUsageBasedBilling\n          explanation\n          hasPaymentMethod\n        }\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on ServiceUnavailable {\n        message\n      }\n    }\n  }\n"]);return vB=function(){return e},e}var vH=(0,et.J1)(vB());function vz(){var e=(0,en._)(["\n  query DatabaseFrozen {\n    currentUser {\n      id\n      userSubscriptionType\n      ...CurrentUserUsageBasedBillingSummary\n    }\n  }\n  ","\n"]);return vz=function(){return e},e}var vW={},vG=(0,et.J1)(vz(),vH),vV=t(95081),vj=t(48959),vZ=t(55568),vq=t(25073),vK=t(82402),v$=(0,V.x)({cta:[j.wp.width("100%")],ctaStatusBanner:[j.wp.textAlign.left]});function vJ(e){var n=e.loading,t=e.ubbExplanation,r=e.hasPaymentMethod,i=e.handleOnUnpause,o=e.refetchUbbCapabilitiesQueryData,a=e.setShowPaymentMethodForm,l=e.showPaymentMethodForm,s=e.setShowSupportForm,c=e.replId,u=(0,ip.m6)();return t===ic.sb.NeedsSubscription||t===ic.sb.NeedsSubscriptionOrPaymentMethod?u?(0,f.Y)(iI.N,{text:"You need a subscription to use PostgreSQL databases. Navigate to Account > Billing to upgrade.",colorway:"warning",icon:(0,f.Y)(iF.A,{}),css:v$.ctaStatusBanner}):(0,f.FD)(f.FK,{children:[(0,f.Y)(iw.A,{context:"workspace_postgresql_pane",text:"Upgrade your plan to unpause database",css:v$.cta,colorway:"primary",variant:"outlined",disabled:l,onPlanCheckoutComplete:o}),(0,f.Y)(eS.$n,{variant:"nofill",colorway:"primary",text:"or add a payment method",css:v$.cta,disabled:l,loading:n,iconLeft:(0,f.Y)(s4.A,{}),onClick:function(){return a()}})]}):t===ic.sb.NeedsSmsVerification?(0,f.Y)(vj.A,{context:ic.SG.Neon,onSuccess:o}):t===ic.sb.NeedsPaymentMethod?u?(0,f.Y)(iI.N,{text:"You have used all free usage for this month. Check your email for more information or contact support.",colorway:"warning",icon:(0,f.Y)(iF.A,{}),css:v$.ctaStatusBanner}):(0,f.Y)(eS.$n,{colorway:"primary",text:"Add a payment method",css:v$.cta,disabled:l,loading:n,iconLeft:(0,f.Y)(s4.A,{}),onClick:function(){return a()}}):t===ic.sb.NeedsUnbanning?(0,f.Y)(un.d,{text:"Your account currently has restrictions on use PostgreSQL databases. We're here to help! Please reach out to our support team for assistance.",colorway:"warning",iconLeft:(0,f.Y)(iF.A,{}),css:v$.ctaStatusBanner,onClick:function(){return s()}}):t===ic.sb.InsufficientBudget?(0,f.FD)(f.FK,{children:[(0,f.Y)(iI.N,{text:"You've reached your monthly usage budget. Increase your budget to unpause your database.",colorway:"warning",icon:(0,f.Y)(iF.A,{}),css:v$.ctaStatusBanner}),(0,f.Y)(vq.h,{onUpdateSuccess:o,replId:c})]}):(0,f.FD)(f.FK,{children:[(0,f.Y)(eS.$n,{colorway:"primary",onClick:i,text:"Unpause database",loading:n,css:v$.cta}),!1===r?(0,f.Y)(un.d,{text:"Add a payment method to avoid downtime",colorway:"warning",iconLeft:(0,f.Y)(iF.A,{}),css:v$.ctaStatusBanner,onClick:function(){return u?null:a()}}):null]})}function vQ(e){var n=e.neonDatabase,t=e.currentUser,r=e.replId;return n.isEphemeral?(0,f.Y)(vZ.To,{isFrozen:n.isFrozen,scheduledFreezeTime:n.scheduledFreezeTime,scheduledDeletionTime:n.scheduledDeletionTime,currentUser:t}):(0,f.Y)(vX,{replId:r,neonProjectId:n.projectId})}function vX(e){var n,t,r,i=e.replId,o=e.neonProjectId,a=(0,v._)((0,w.useState)(!1),2),l=a[0],s=a[1],c=(0,v._)((0,w.useState)(!1),2),u=c[0],d=c[1],p=(0,nN.A)().showError,h=(n={notifyOnNetworkStatusChange:!0,onError:function(e){p(e.message)}},t=(0,ee._)({},vW,n),er.I(vG,t)),m=h.loading,g=h.data,y=h.refetch,b=(0,v._)((0,vV.Yc)({refetchQueries:[{query:vV.Or,variables:{input:{replId:i}}}],onError:function(e){p("Error when unfreezing Neon database: ".concat(e.message)),vL({action:"unfreeze",success:!1})},update:function(e,n){var t,r=n.data,a=e.readQuery({query:vV.Or,variables:{input:{replId:i}}});(null==r?void 0:r.unfreezeNeonDatabase.__typename)==="UnfreezeNeonDatabaseResult"&&(null==a||null==(t=a.getNeonDatabases)?void 0:t.__typename)==="GetNeonDatabasesResult"&&e.writeQuery({query:vV.Or,variables:{input:{replId:i}},data:{__typename:"RootQueryType",getNeonDatabases:{__typename:"GetNeonDatabasesResult",databases:a.getNeonDatabases.databases.map(function(e){return e.projectId===o?(0,nt._)((0,ee._)({},e),{isFrozen:!1}):e})}}})},onCompleted:function(e){if((null==e?void 0:e.unfreezeNeonDatabase.__typename)!=="UnfreezeNeonDatabaseResult"){p("Error: Unfreezes Neon Database failed."),vL({action:"unfreeze",success:!1});return}(null==e?void 0:e.unfreezeNeonDatabase.success)?vL({action:"unfreeze",success:!0}):(p("Error: Unfreezes Neon Database failed."),vL({action:"unfreeze",success:!1}))}}),2),S=b[0],Y=b[1].loading,A=(null==g||null==(r=g.currentUser)?void 0:r.usageBasedBilling.__typename)==="UserUsageBasedBillingSummary"?g.currentUser.usageBasedBilling.capabilities:null;return(0,f.FD)(f.FK,{children:[(0,f.Y)(aX.a,{isOpen:u,onRequestClose:function(){return d(!1)},children:(0,f.Y)(vK.A,{onRequestClose:function(){return d(!1)}})}),(0,f.Y)(L.S,{gap:8,children:(0,f.Y)(vJ,{replId:i,loading:m||Y,ubbExplanation:null==A?void 0:A.explanation,hasPaymentMethod:null==A?void 0:A.hasPaymentMethod,handleOnUnpause:function(){S({variables:{input:{replId:i,neonProjectId:o}}})},refetchUbbCapabilitiesQueryData:y,setShowPaymentMethodForm:function(){return s(!0)},showPaymentMethodForm:l,setShowSupportForm:function(){return d(!0)}})})]})}var v0=t(46330),v1=t(63799),v2=t(58639),v4=t(53020),v5=t(68712),v3=t(94524),v6=t(48926),v8=t(87376),v7=t(8296),v9=t(23324),we=t(33813),wn=t(51846),wt=t(34352),wr=t(93529),wi=t(50558),wo={"td,th":{border:"1px solid "+k.LU.outlineDefault}},wa={"td,th":{paddingLeft:8,paddingTop:8,paddingBottom:8,paddingRight:8,whiteSpace:"nowrap"},"td:first-of-type,th:first-of-type":{paddingLeft:8}},wl={outline:"2px solid ".concat(k.LU.accentPrimaryDefault),outlineOffset:"-2px"},ws=(0,nF.AH)({":focus:focus-visible":wl}),wc=(0,nF.AH)(wl),wu=(0,nF.AH)([wa,wo,ws]),wd=(0,nF.AH)([j.wp.fontWeight.medium,wa,wo,ws]),wp=(0,nF.AH)({"tbody > tr:hover":{backgroundColor:k.LU.backgroundHigher,cursor:"pointer"}});function wf(e){var n=e.type,t=e.style,r=e.children,i=(0,v8.rs)().rowGroupProps;return(0,f.Y)(n,(0,nt._)((0,ee._)({},i),{style:t,children:r}))}function wh(e){var n=e.item,t=e.state,r=e.children,i=(0,w.useRef)(null),o=(0,v7.x)({node:n},t,i).rowProps;return(0,f.Y)("tr",(0,nt._)((0,ee._)({css:wd},o),{ref:i,children:r}))}function wm(e){var n,t=e.column,r=e.state,i=(0,w.useRef)(null),o=(0,v9.f)({node:t},r,i).columnHeaderProps,a=(0,we.o)(),l=a.isFocusVisible,s=a.focusProps;return(0,f.Y)("th",(0,nt._)((0,ee._)({},(0,wn.v)(o,s)),{css:[l&&wc,ws],colSpan:t.colspan,style:{textAlign:(null!=(n=t.colspan)?n:1)>1?"center":"left"},ref:i,children:t.rendered}))}function wg(e){var n=e.item,t=e.children,r=e.state,i=(0,w.useRef)(null),o=(0,wt.A)({node:n},r,i).rowProps,a=(0,we.o)(),l=a.isFocusVisible,s=a.focusProps;return(0,f.Y)("tr",(0,nt._)((0,ee._)({css:[l&&wc,wu]},(0,wn.v)(o,s)),{ref:i,children:t}))}function wv(e){var n=e.cell,t=e.state,r=(0,w.useRef)(null),i=(0,wr.a)({node:n},t,r).gridCellProps,o=(0,we.o)(),a=o.isFocusVisible,l=o.focusProps;return(0,f.Y)("td",(0,nt._)((0,ee._)({},(0,wn.v)(i,l)),{css:[a&&wc,ws],ref:r,children:n.rendered}))}function ww(e){var n=e.selectionMode,t=e.selectionBehavior,r=(0,v1.j)((0,nt._)((0,ee._)({},e),{showSelectionCheckboxes:"multiple"===n&&"replace"!==t})),i=(0,w.useRef)(null),o=r.collection,a=(0,wi.K)(e,r,i).gridProps;return(0,f.FD)("table",(0,nt._)((0,ee._)({},a),{ref:i,css:[(null==e?void 0:e.onRowAction)&&wp],style:{borderCollapse:"collapse"},children:[(0,f.Y)(wf,{type:"thead",children:o.headerRows.map(function(e){return(0,f.Y)(wh,{item:e,state:r,children:(0,X._)(e.childNodes).map(function(e){return(0,f.Y)(wm,{column:e,state:r},e.key)})},e.key)})}),(0,f.Y)(wf,{type:"tbody",children:(0,X._)(o.body.childNodes).map(function(e){return(0,f.Y)(wg,{item:e,state:r,children:(0,X._)(e.childNodes).map(function(e){return(0,f.Y)(wv,{cell:e,state:r},e.key)})},e.key)})})]}))}var wy=function(e){var n=e.ariaTableProps,t=e.rows,r=e.columns;return(0,f.FD)(ww,(0,nt._)((0,ee._)({},n),{children:[(0,f.Y)(v2.A,{columns:r,children:function(e){return(0,f.Y)(v4.V,{children:e.value})}}),(0,f.Y)(v5.B,{items:t,children:function(e){return(0,f.Y)(v3.f,{children:function(n){return(0,f.Y)(v6.f,{children:e[n]})}})}})]}))};function wb(e){var n=e.headerColumns,t=e.bodyData,r=e.ariaLabel,i=e.scrollRef,o=e.onRowAction,a=n.map(function(e,n){return{key:"string"==typeof e?e:"".concat(n),value:e}}),l=t.map(function(e,t){for(var r={id:t},i=0;i<e.length;i++){var o=n[i];r["string"==typeof o?o:"".concat(i)]=e[i]}return r});return(0,f.Y)(wy,{ariaTableProps:{selectionMode:"none","aria-label":void 0===r?"Database Table":r,onRowAction:o,scrollRef:i},columns:a,rows:l})}var wS=t(6034),wY=(0,V.x)({self:[j.wp.flex.column,j.wp.height("100%")],title:[j.wp.fontSize(14),j.wp.ml(8),j.wp.flex.growAndShrink(1)],main:[j.wp.overflow("auto"),j.wp.height("calc(100% - 60px)")]}),wA=function(e){var n=e.headerTitle,t=e.onGoBack,r=e.refresh,i=e.children;return(0,f.FD)(L.S,{css:wY.self,children:[(0,f.FD)(L.S,{pb:8,align:"center",row:!0,children:[(0,f.Y)(eY.K0,{alt:"Go back",size:24,type:"button",onClick:t,children:(0,f.Y)(wS.A,{})}),(0,f.Y)(T.EY,{css:wY.title,multiline:!1,children:n}),"function"==typeof r?(0,f.Y)(eY.K0,{alt:"Refresh",size:24,type:"button",onClick:r,children:(0,f.Y)(om.A,{})}):null]}),(0,f.Y)(L.S,{css:wY.main,children:i})]})},wx=(0,ez.eU)(["databaseManager"]),wC=(0,ez.eU)(null,function(e,n,t){var r=e(wx);n(wx,(0,X._)(r).concat([t])),vL({action:"pageNav",databasePage:t})}),w_=(0,ez.eU)(null,function(e,n){var t=e(wx);n(wx,t.slice(0,t.length-1))}),wk=(0,ez.eU)(function(e){var n=e(wx);return n[n.length-1]}),wD=function(){return(0,eW.Xr)(wC)},wE=function(){return(0,eW.Xr)(w_)},wR=function(e,n){var t,r=(0,A.A)().psql,i=(0,v._)((0,w.useState)(),2),o=i[0],a=i[1],l=(0,v._)((0,w.useState)(!1),2),s=l[0],c=l[1],u=(0,w.useCallback)((t=(0,y._)(function(){return(0,b.YH)(this,function(t){switch(t.label){case 0:if(!e)return[2];t.label=1;case 1:return t.trys.push([1,,3,4]),c(!0),[4,r.run({query:e,connectionString:n})];case 2:return a(t.sent()),[3,4];case 3:return c(!1),[7];case 4:return[2]}})}),function(){return t.apply(this,arguments)}),[n,r,e]);return(0,w.useEffect)(function(){u()},[n,r,e,u]),{data:o,loading:s,refetch:u}},wI=function(e){var n=e.rows,t=e.columns;return!Array.isArray(n)||n.length<1?null:{headerColumns:null!=t?t:[],bodyData:n.map(function(e){return Object.values(e)})}},wF=function(e){return wR("SELECT n.nspname as \"Schema\",\n  c.relname as \"Name\",\n  CASE c.relkind WHEN 'r' THEN 'table' WHEN 'v' THEN 'view' WHEN 'm' THEN 'materialized view' WHEN 'i' THEN 'index' WHEN 'S' THEN 'sequence' WHEN 's' THEN 'special' WHEN 'f' THEN 'foreign table' WHEN 'p' THEN 'partitioned table' WHEN 'I' THEN 'partitioned index' END as \"Type\",\n  pg_catalog.pg_get_userbyid(c.relowner) as \"Owner\",\n  pg_catalog.pg_size_pretty(pg_catalog.pg_total_relation_size(c.oid)) as \"Size\",\n  pg_catalog.obj_description(c.oid, 'pg_class') as \"Description\"\nFROM pg_catalog.pg_class c\n     LEFT JOIN pg_catalog.pg_namespace n ON n.oid = c.relnamespace\nWHERE c.relkind IN ('r','p','v','m','S','f','')\n      AND n.nspname <> 'pg_catalog'\n      AND n.nspname <> 'information_schema'\n      AND n.nspname !~ '^pg_toast'\n  AND pg_catalog.pg_table_is_visible(c.oid)\nORDER BY 1,2;",e.connectionString)},wT=(0,ez.eU)(void 0),wP=(0,ez.eU)(function(e){var n=e(wT);return null==n?void 0:n.rows.reduce(function(e,n){var t=n.table_name,r=n.column_name;return e[t]||(e[t]=[]),e[t].push(r),e},{})}),wL=function(e){var n=wR("SELECT table_name, column_name, data_type FROM information_schema.columns WHERE table_schema = 'public';",e.connectionString).data,t=(0,eW.Xr)(wT);(0,w.useEffect)(function(){t(n)},[n,t])},wU=function(e){var n=e.tableName,t=e.connectionString;return wR("SELECT table_name, column_name, data_type FROM information_schema.columns WHERE table_schema = 'public' AND table_name = '".concat(n.replace(/"/g,'""'),"';"),t).data},wN=function(e){var n=e.tableData,t=e.scrollRef,r=n.headerColumns,i=n.bodyData,o=wD(),a=(0,w.useCallback)(function(e){var n=parseInt(String(e),10);if(!isNaN(n)){var t=i[n][r.indexOf("Name")];o("table/".concat(t))}},[o,r,i]);return(0,f.Y)(wb,{headerColumns:r,bodyData:i,onRowAction:a,scrollRef:t})},wO=function(e){var n=e.psqlQueryResult,t=e.scrollRef,r=n.data;if(n.loading)return(0,f.Y)(L.S,{p:32,row:!0,justify:"center",children:(0,f.Y)(to.A,{})});if(null==r?void 0:r.error)return(0,f.Y)(L.S,{p:32,row:!0,justify:"center",children:(0,f.Y)(T.EY,{css:[j.wp.color.accentNegativeDefault,j.wp.maxWidth("100%")],children:null==r?void 0:r.error})});var i=r?wI(r):null;return i?(0,f.Y)(wN,{tableData:i,scrollRef:t}):(0,f.Y)(L.S,{p:32,row:!0,justify:"center",children:(0,f.Y)(T.EY,{css:[j.wp.color.accentPositiveDefault,j.wp.maxWidth("100%")],children:"No tables found"})})},wM=function(e){var n=e.connectionString,t=wE(),r=(0,w.useRef)(null),i=wF({connectionString:n}),o=i.refetch;return(0,f.Y)(wA,{headerTitle:"All tables",onGoBack:t,refresh:o,children:(0,f.Y)(L.S,{css:[j.wp.flex.growAndShrink(1),j.wp.overflow("auto")],innerRef:r,children:(0,f.Y)(wO,{psqlQueryResult:i,scrollRef:r})})})},wB="1px solid "+k.LU.outlineDefault,wH=(0,nF.AH)([j.wp.p(8),j.wp.backgroundColor.backgroundDefault,j.wp.align.center,j.wp.borderRadius(0),{borderLeft:wB,borderRight:wB,borderBottom:wB},{":not([disabled])":{":focus":{boxShadow:"none",outline:"2px solid ".concat(k.LU.accentPrimaryDefault),outlineOffset:"-2px"},":hover":{backgroundColor:k.LU.backgroundHigher}}}]),wz=function(e){var n=wF({connectionString:e.connectionString}),t=n.data,r=n.loading,i=(0,v._)((0,w.useState)(!1),2),o=i[0],a=i[1],l=(0,w.useCallback)(function(){a(!0)},[]),s=t?wI(t):null,c=(0,w.useRef)(null);if(!s||r)return null;var u=s.bodyData.length,d=s.headerColumns,p=s.bodyData;return(0,f.Y)(f.FK,{children:(0,f.FD)(L.S,{css:[j.wp.overflow("auto"),j.wp.display.grid],innerRef:c,children:[(0,f.Y)(wN,{tableData:{headerColumns:d,bodyData:o?p:p.slice(0,5)},scrollRef:c}),u-5>0&&!o?(0,f.Y)(eS.$n,{text:"".concat(u-5," more"),css:wH,onClick:l}):null]})})};function wW(e){var n=e.textAtom,t=e.variant,r=e.className,i=useAtomValue(n);return i?_jsx(Text,{className:r,variant:t,multiline:!1,children:i}):null}function wG(e){var n=e.title,t=e.doWarnAtom,r=e.inactive,i=(0,eW.md)(t);return(0,f.FD)(L.S,{row:!0,gap:4,align:"center",children:[(0,f.Y)(T.EY,{variant:"small",css:j.wp.color.foregroundDimmer,multiline:!1,children:void 0!==r&&r?n+" last run":n}),i?(0,f.Y)(iF.A,{color:k.LU.orangeStronger}):null]})}function wV(e){var n=e.title,t=e.totalAtom,r=e.currentAtom,i=e.countAtom,o=e.measure,a=e.limitText,l=e.inactive,s=void 0!==l&&l,c=(0,pv.A)(function(){return(0,ez.eU)(function(e){return wZ(e(r),e(t))})},[r,t]),u=(0,pv.A)(function(){return(0,ez.eU)(function(e){return a||function(e,n,t,r,i){if("empty"!==e&&void 0!==n)return"vCPU"===i?wq(100*Math.min(1,n/t))+"% of "+r+" vCPUs":wq(n).toLocaleString()+"/"+wq(t).toLocaleString()+" "+i}(e(c),e(r),e(t),i&&e(i),o)})},[a,c,r,t,i,o]),d=(0,pv.A)(function(){return(0,ez.eU)(function(e){var n=e(c);return"At limit"===n||"Close to limit"===n})},[c]);return(0,f.FD)(L.S,{css:[j.wp.flex.growAndShrink(2),{flexBasis:32}],gap:4,children:[n?(0,f.Y)(wG,{title:n,doWarnAtom:d,inactive:s}):null,(0,f.Y)(wj,{currentAtom:r,totalAtom:t,inactive:s,limitTextAtom:u,mini:!0})]})}function wj(e){var n=e.currentAtom,t=e.totalAtom,r=e.limitTextAtom,i=e.inactive,o=e.mini,a=(0,eW.md)(t),l=(0,eW.md)(n),s=(0,eW.md)(r),c=function(e){switch(e){case"empty":case"fine":default:return;case"At limit":return k.LU.accentNegativeDefault;case"Close to limit":return k.LU.orangeDefault}}(wZ(l,a));return(0,f.Y)(s2.W,{css:o&&j.wp.height(8),total:a,current:l,color:c,disabled:i,tooltip:s})}function wZ(e,n){if(void 0===e)return"empty";var t=e/n;return t>=1?"At limit":t>=.9?"Close to limit":"fine"}function wq(e){return Math.round((e+Number.EPSILON)*100)/100}var wK="https://docs.replit.com/cloud-services/storage-and-databases/postgresql-on-replit",w$="https://docs.replit.com/cloud-services/about-usage-based-billing#1-postgresql-usage-metrics",wJ=(0,V.x)({loadingGhost:[j.wp.borderRadius(6),{outline:"1px solid transparent"},j.wp.height(22)],storage:j.wp.rowWithGap(8)}),wQ=function(e){var n=e.dbSize,t=e.totalSize,r=(0,v0.z)(n),i=(0,v0.z)(t),o=(0,pv.A)(function(){return(0,ez.eU)(n)},[n]),a=(0,pv.A)(function(){return(0,ez.eU)(t)},[t]);return(0,f.FD)(f.FK,{children:[(0,f.FD)(T.EY,{css:j.wp.color.foregroundDimmer,multiline:!1,children:[r,"/",i]}),(0,f.Y)(wV,{totalAtom:a,currentAtom:o,limitText:"".concat(r," / ").concat(i),inactive:!1,measure:"MB"})]})},wX=function(e){var n,t,r=e.connectionString,i=e.quotaLogicalSizeBytes,o=wR("SELECT sum(pg_database_size(datname)) FROM pg_database;",r),a=o.data,l=o.loading,s=wR("SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' ORDER BY table_name;",r),c=s.data,u=s.loading,d=parseInt(null!=(t=null==a||null==(n=a.rows[0])?void 0:n.sum)?t:"0",10),p=null==c?void 0:c.rows.length;return l||u?(0,f.Y)(eu.ui,{elevated:!0,css:wJ.loadingGhost,justify:"center",align:"center",row:!0,children:(0,f.Y)(to.A,{})}):(0,f.FD)(L.S,{css:wJ.storage,children:[(0,f.FD)(T.EY,{multiline:!1,children:[p," ",1===p?"table":"tables"]}),(0,f.Y)(wQ,{dbSize:d,totalSize:i?parseInt(i,10):0x280000000})]})},w0=function(e){var n=e.neonDatabase,t=e.connectionString,r=e.onOpenDatabaseViewerClick,i=(0,o9.Z)("drizzle-studio-announcement"),o=i.setAsDone,a=i.isLoading,l=i.isDone;return(0,f.FD)(L.S,{gap:8,children:[(0,f.Y)(L.S,{children:(0,f.Y)(wX,{connectionString:t,quotaLogicalSizeBytes:n.quotaLogicalSizeBytes})}),(0,f.Y)(wz,{connectionString:t}),(0,f.Y)(eS.$n,{text:"See my data",iconLeft:(0,f.Y)(vt.A,{}),onClick:function(){r(),o()}}),a||l?null:(0,f.Y)(iI.N,{colorway:"primary",closable:!0,closeAction:o,title:"New: Database Studio",text:'Click "See my data" to launch the new Database editor. Modify, query, and visualize your data in an easy-to-use interface.'})]})},w1=(0,lm.v)(["databaseStatusColor"]),w2=w1.cssVars,w4=w1.styleTokens,w5=(0,V.x)({statusDot:[j.wp.width(8),j.wp.height(8),j.wp.backgroundColor.accentPositiveStronger,j.wp.borderRadius("full"),{filter:"drop-shadow(0 0 6px ".concat(w4.databaseStatusColor,")"),backgroundColor:w4.databaseStatusColor}],text:{color:w4.databaseStatusColor}});function w3(e){var n=e.isFrozen;return(0,f.FD)(L.S,{row:!0,gap:8,align:"center",style:(0,g._)({},w2.databaseStatusColor,n?k.LU.foregroundDimmest:k.LU.accentPositiveStronger),children:[n?null:(0,f.Y)(L.S,{css:w5.statusDot}),(0,f.FD)(T.EY,{css:w5.text,multiline:!1,children:["Database ",n?"paused":"connected"]}),n?(0,f.Y)(it.A,{css:w5.text}):null]})}var w6=function(e){var n=e.psqlQueryResult,t=e.tableName,r=e.connectionString,i=e.scrollRef,o=n.data,a=n.loading,l=wU({tableName:t,connectionString:r});if(a)return(0,f.Y)(L.S,{p:32,row:!0,justify:"center",children:(0,f.Y)(to.A,{})});if(null==o?void 0:o.error)return(0,f.Y)(L.S,{p:32,row:!0,justify:"center",children:(0,f.Y)(T.EY,{css:[j.wp.color.accentNegativeDefault,j.wp.maxWidth("100%")],children:null==o?void 0:o.error})});var s=o?wI(o):null;if(!s)return(0,f.Y)(L.S,{p:32,row:!0,justify:"center",children:(0,f.Y)(T.EY,{css:[j.wp.color.accentPositiveDefault,j.wp.maxWidth("100%")],children:"No rows"})});var c=s.headerColumns,u=s.bodyData;return(0,f.Y)(wb,{headerColumns:c.map(function(e,n){var t,r=null==l||null==(t=l.rows)?void 0:t.find(function(n){return n.column_name===e}),i=null==r?void 0:r.data_type,o=i?(0,f.Y)(I.a,{text:i}):null;return(0,f.FD)(L.S,{row:!0,gap:8,align:"center",children:[(0,f.Y)(T.EY,{multiline:!1,children:e}),o]},n)}),bodyData:u,scrollRef:i})},w8=function(e){var n=e.tableName,t=e.connectionString,r=wE(),i=(0,w.useRef)(null),o=wR('SELECT * FROM "'.concat(n.replace(/"/g,'""'),'" LIMIT ').concat(500),t),a=o.refetch;return(0,f.Y)(wA,{headerTitle:n,onGoBack:r,refresh:a,children:(0,f.Y)(L.S,{css:[j.wp.flex.growAndShrink(1),j.wp.overflow("auto")],innerRef:i,children:(0,f.Y)(w6,{psqlQueryResult:o,tableName:n,connectionString:t,scrollRef:i})})})},w7=t(22677),w9=h.ZU.Literal("overview"),ye=h.ZU.Literal("commands"),yn=h.ZU.Literal("settings"),yt=h.ZU.Literal("drizzle-studio");h.ZU.Union([w9,ye,yn,yt]);var yr=h.ZU.Object({restoreToCommitId:h.ZU.Optional(h.ZU.String())}),yi=h.ZU.Union([h.ZU.Object({type:yn,data:h.ZU.Optional(yr)})]),yo=h.ZU.Optional(yi);function ya(e){if(e&&w7.J(yo,e))return e}var yl=(0,w.createContext)(void 0),ys=function(){var e=(0,w.useContext)(yl);if(!e)throw Error("useNeonPaneTabs must be used within a TabProvider");return e},yc=function(e){var n=e.children,t=e.initialOpenAtTab,r=e.performPaneOperation,i=(0,v._)((0,w.useState)(function(){return t?t.type:"overview"}),2),o=i[0],a=i[1],l=(0,v._)((0,w.useState)(function(){return ya(t)}),2),s=l[0],c=l[1],u=(0,w.useRef)(t);(0,w.useEffect)(function(){t&&t!==u.current&&(u.current=t,a(t.type),c(ya(t)))},[t]);var d=(0,w.useCallback)(function(e){a(e),s&&(u.current=void 0,c(void 0),r({operation:"replace",pane:{type:"neon"}}))},[s,r]),p=(0,w.useCallback)(function(e){r({operation:"open",pane:{type:"agentChat",data:{sessionId:e}}})},[r]),h=(0,w.useMemo)(function(){return{selectedTab:o,openAtTab:s,selectTab:d,openAgentChatSession:p}},[o,s,d,p]);return(0,f.Y)(yl.Provider,{value:h,children:n})},yu=t(15423),yd=t(83942),yp=t(57189),yf=(0,ez.eU)(""),yh=(0,ez.eU)(null),ym=(0,ez.eU)(null,function(e,n,t){var r=t.query;r&&n(yf,r);var i=e(yh);i&&i.dispatch({changes:{from:0,to:i.state.doc.length,insert:r}})}),yg=t(68820),yv=t(50140),yw=(0,yg.tG)("replDatabasesQueryHistory",[]),yy=function(e,n){return!e.isPinned&&n.isPinned?1:e.isPinned&&!n.isPinned?-1:"number"==typeof e.pinnedTimestamp&&"number"==typeof n.pinnedTimestamp?e.pinnedTimestamp-n.pinnedTimestamp:n.timestamp-e.timestamp},yb=function(e,n){var t=e.findIndex(function(e){return!e.isPinned&&e.data===n.data});-1!==t?e.splice(t,1,n):e.push(n),e.sort(yy);var r=e.filter(function(e){return!e.isPinned}).length;if(r>=5){var i=r-5;e.splice(e.length-i,i)}},yS=t(24365),yY=t(26987);function yA(e){return(0,f.Y)(n0.Ay,(0,nt._)((0,ee._)({},e),{children:(0,f.Y)("path",{fillRule:"evenodd",d:"M6.862 1.606A.75.75 0 0 1 7.5 1.25h9a.75.75 0 0 1 .67 1.085l-.92 1.842v6.513c.983.988 2.5 2.622 2.5 4.81a.75.75 0 0 1-.75.75h-5.25V22a.75.75 0 0 1-1.5 0v-5.75H6a.75.75 0 0 1-.75-.75c0-2.188 1.517-3.822 2.5-4.81V4.177l-.92-1.842a.75.75 0 0 1 .032-.73ZM8.714 2.75l.457.915A.75.75 0 0 1 9.25 4v7a.75.75 0 0 1-.22.53c-.878.879-1.895 1.93-2.193 3.22h10.326c-.298-1.29-1.315-2.341-2.193-3.22a.75.75 0 0 1-.22-.53V4a.75.75 0 0 1 .08-.335l.457-.915H8.714Z",clipRule:"evenodd"})}))}function yx(e){return(0,f.Y)(n0.Ay,(0,nt._)((0,ee._)({},e),{children:(0,f.Y)("path",{fillRule:"evenodd",d:"M6.862 1.606A.75.75 0 0 1 7.5 1.25h9a.75.75 0 0 1 .67 1.085l-.92 1.842v6.513c.983.988 2.5 2.622 2.5 4.81a.75.75 0 0 1-.75.75h-5.25V22a.75.75 0 0 1-1.5 0v-5.75H6a.75.75 0 0 1-.75-.75c0-2.188 1.517-3.822 2.5-4.81V4.177l-.92-1.842a.75.75 0 0 1 .032-.73Z",clipRule:"evenodd"})}))}var yC=function(e){var n=e.id,t=e.data,r=e.isPinned,i=(0,yv.yF)((0,w.useCallback)(function(e,t){var r=e(yw).find(function(e){return e.id===n}),i=(null==r?void 0:r.data)||"";i&&(t(ym,{query:i}),vL({action:"queryHistoryItemSelected"}))},[n])),o=(0,yv.yF)((0,w.useCallback)(function(e,t){var r=e(yw);t(yw,(0,ai.jM)(r,function(e){var t=e.find(function(e){return e.id===n});t&&(t.isPinned=!t.isPinned,t.isPinned?t.pinnedTimestamp=Date.now():t.pinnedTimestamp=void 0),e.sort(yy)})),vL({action:"queryHistoryItemPinned"})},[n]));return(0,f.FD)(L.S,{css:[{borderTop:"1px solid ".concat(k.LU.outlineDefault),":hover":{background:k.LU.backgroundHigher}},j.wp.flex.row,j.wp.p(8),j.wp.color.foregroundDimmer,j.wp.align.center,j.wp.cursor.pointer],onClick:i,children:[(0,f.Y)(T.EY,{css:[j.wp.flex.growAndShrink(1)],multiline:!1,children:t}),(0,f.Y)(eY.K0,{alt:"Pin query",onClick:o,children:r?(0,f.Y)(yx,{fill:k.LU.accentPrimaryDefault}):(0,f.Y)(yA,{})})]})},y_=function(e){var n=e.onExpand,t=(0,eW.md)(yw);return(0,f.Y)(D.A,{onClick:n,headerContent:(0,f.FD)(L.S,{row:!0,gap:8,p:2,align:"center",children:[(0,f.Y)(mN.A,{}),(0,f.Y)(T.EY,{css:[j.wp.color.foregroundDimmest],multiline:!1,children:"Query History"})]}),children:(0,f.Y)(L.S,{gap:8,css:[j.wp.height("100%")],children:0===t.length?(0,f.Y)(L.S,{p:8,children:(0,f.Y)(T.EY,{css:[j.wp.color.foregroundDimmer],multiline:!1,children:"No query history"})}):(0,f.Y)(L.S,{children:t.map(function(e){return(0,f.Y)(yC,(0,ee._)({},e),e.id)})})})})},yk=new na.L(function(){return(0,no.qf)((0,nc.J)((0,f.Y)("div",{css:[{fontFamily:k.LU.fontFamilyCode},j.wp.color.foregroundDimmest],children:"Type PostgreSQL queries here to use the database."})))}),yD=new nd.k(function(e){return no.Lz.domEventHandlers({keydown:function(n){"Enter"===n.key&&n.metaKey&&(n.stopPropagation(),e())}})}),yE=new nd.k(function(e){return ni.Nb.high((0,yu.ll)((0,ee._)({dialect:yu.Rv},e)))}),yR=function(e){var n=e.queryResult,t=e.scrollRef;if(null==n?void 0:n.error)return(0,f.Y)(L.S,{px:8,children:(0,f.Y)(T.EY,{css:[j.wp.color.accentNegativeDefault],children:null==n?void 0:n.error})});if(!(null==n?void 0:n.rows))return null;var r=wI(n);if(!r)return(0,f.Y)(L.S,{px:8,children:(0,f.Y)(T.EY,{css:[j.wp.color.accentPositiveDefault],children:"Query successful, no rows returned"})});var i=r.headerColumns,o=r.bodyData;return(0,f.Y)(L.S,{px:8,children:(0,f.Y)(wb,{headerColumns:i,bodyData:o,scrollRef:t})})},yI=(0,nF.AH)([j.wp.height("100%"),j.wp.position.relative,j.wp.overflow("auto")]),yF=(0,nF.AH)([j.wp.position.sticky,j.wp.top(0),j.wp.left(0),j.wp.zIndex(1),j.wp.backgroundColor.backgroundDefault]),yT=function(e){var n=e.connectionString,t=(0,v._)((0,eW.fp)(yf),2),r=t[0],i=t[1],o=(0,nu.A)(),a=o.ref,l=o.view,s=(0,v._)((0,w.useState)(!1),2),c=s[0],u=s[1];(0,w.useEffect)(function(){return function(){var e;i(null!=(e=null==l?void 0:l.state.doc.toString())?e:"")}},[i,null==l?void 0:l.state.doc]);var d=(0,eW.Xr)(yh);(0,w.useEffect)(function(){d(l)},[d,l]),wL({connectionString:n});var p=(0,eW.md)(wP),h=yp.u4,m=(0,yd.A)({filePath:h}),g=(0,A.A)().psql,S=(0,v._)((0,w.useState)(),2),Y=S[0],x=S[1],C=(0,v._)((0,w.useState)(!1),2),_=C[0],D=C[1],E=(0,yv.yF)((0,w.useCallback)(function(e,n,t){if(t){var r={id:(0,nU.A)(),data:t,timestamp:Date.now()},i=e(yw);n(yw,(0,ai.jM)(i,function(e){yb(e,r)}))}},[])),R=(0,w.useCallback)(function(){function e(){return(e=(0,y._)(function(){var e;return(0,b.YH)(this,function(t){switch(t.label){case 0:if(!l)return[2];t.label=1;case 1:return t.trys.push([1,,3,4]),D(!0),E(e=null==l?void 0:l.state.doc.toString()),[4,g.run({query:e,connectionString:n})];case 2:return x(t.sent()),vL({action:"queryRan"}),[3,4];case 3:return D(!1),[7];case 4:return[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[n,g,E,l]),I=wD(),F=(0,w.useCallback)(function(){I("databaseManager")},[I]),T=(0,w.useCallback)(function(){I("tableSchemas")},[I]),U=(0,w.useRef)(null),N=yE.use({schema:p}),O=yD.use(R),M=(0,yS.Kg)();return(0,f.Y)(wA,{headerTitle:"Database Contents",onGoBack:F,children:(0,f.FD)(L.S,{css:[yI],gap:8,innerRef:U,children:[(0,f.FD)(L.S,{css:[c?null:yF],pb:8,gap:8,children:[(0,f.FD)(L.S,{css:[{border:"1px solid ".concat(k.LU.outlineDefault)},j.wp.borderRadius(2)],children:[(0,f.Y)(ns.Ay,{ref:a,filePath:h,css:[gS.$1,j.wp.backgroundColor.backgroundDefault,j.wp.borderRadius(8),j.wp.overflow("auto"),j.wp.minHeight(100),j.wp.maxHeight(500),{".cm-panel":{zIndex:1}}],initialDoc:r,extensions:[yk,N,m,O]}),(0,f.Y)(y_,{expanded:c,onExpand:function(){u(function(e){return!e})}})]}),(0,f.Y)(P.m_,{placement:"top",tooltip:(0,f.Y)(yY._y,{keyCombo:"".concat(M,"Enter"),fontSize:12}),children:(0,f.Y)(eS.$n,{text:"Run Query",iconLeft:_?(0,f.Y)(to.A,{}):(0,f.Y)(oR.A,{}),onClick:R,disabled:_})})]}),(0,f.Y)(yR,{queryResult:Y,scrollRef:U}),(0,f.Y)(L.S,{gap:8,py:8,children:(0,f.Y)(eS.$n,{css:j.wp.backgroundColor.backgroundDefault,text:"Show All Contents",iconLeft:(0,f.Y)(vt.A,{}),onClick:T})})]})})};function yP(e){var n=e.neonDatabase,t=e.currentUser,r=e.replId,i=e.connectionString,o=(0,eW.md)(wk),a=ys().selectTab;if("queryEditor"===o)return(0,f.Y)(yT,{connectionString:i});if("tableSchemas"===o)return(0,f.Y)(wM,{connectionString:i});if(o.startsWith("table/")){var l=o.slice(o.indexOf("/")+1);return(0,f.Y)(w8,{tableName:l,connectionString:i})}return(0,f.FD)(f.FK,{children:[n.isEphemeral&&!n.isFrozen?(0,f.Y)(vZ.To,{isFrozen:n.isFrozen,scheduledFreezeTime:n.scheduledFreezeTime,scheduledDeletionTime:n.scheduledDeletionTime,currentUser:t}):null,(0,f.FD)(L.S,{gap:8,children:[(0,f.Y)(L.S,{pt:1,row:!0,gap:8,align:"center",justify:"space-between",children:(0,f.Y)(w3,{isFrozen:n.isFrozen})}),n.isFrozen?(0,f.Y)(vQ,{neonDatabase:n,currentUser:t,replId:r}):(0,f.Y)(w0,{neonDatabase:n,connectionString:i,onOpenDatabaseViewerClick:function(){return a("drizzle-studio")}})]})]})}var yL=t(29542),yU=t.n(yL),yN=t(37804),yO=t(82300),yM=t(89207),yB=t(46989),yH=(0,V.x)({link:[j.wp.hover(j.wp.color.accentPrimaryStrongest)],title:j.wp.pb(8),wrapper:[j.wp.flex.grow(1)],card:[j.wp.colWithGap(4),j.wp.p(8),j.wp.borderRadius(8),{outline:"1px solid transparent"}],projectId:[{p:j.wp.color.foregroundDimmer}],remove:[j.wp.py(8)]});function yz(){var e=(0,l9.ET)(),n=e.orgId,t=e.orgSlug,r=n&&t?"".concat((0,se.EG)({slug:t}).usage.href,"#postgres-storage"):"/usage#postgres-storage";return(0,f.Y)(yU(),{legacyBehavior:!0,href:r,passHref:!0,children:(0,f.Y)("a",{css:yH.link,children:(0,f.Y)(T.EY,{children:"View account resource limits"})})})}var yW=function(e){var n=e.replId,t=e.neonDatabase,r=(0,nN.A)().showError,i=(0,v._)((0,vV.BI)({refetchQueries:[{query:vV.Or,variables:{input:{replId:n}}}],update:function(e,t,r){var i=t.data,o=r.variables;if(null==i||!i.deleteNeonDatabase||"success"in i.deleteNeonDatabase){var a=e.readQuery({query:vV.Or,variables:{input:{replId:n}}});o&&(null==a?void 0:a.getNeonDatabases.__typename)==="GetNeonDatabasesResult"&&e.writeQuery({query:vV.Or,variables:{input:{replId:n}},data:{__typename:"RootQueryType",getNeonDatabases:{__typename:"GetNeonDatabasesResult",databases:a.getNeonDatabases.databases.filter(function(e){return e.databaseId!==o.input.databaseId})}}})}}}),2),o=i[0],a=i[1].loading,l=(0,w.useCallback)(function(){d(!0)},[]),s=(0,w.useCallback)((0,y._)(function(){var e,i,a;return(0,b.YH)(this,function(l){switch(l.label){case 0:return[4,o({variables:{input:{replId:n,databaseId:t.databaseId}}})];case 1:if(i=(e=l.sent()).data,a=e.errors,d(!1),a&&a.length>0)return r("Error when deleting Neon database: ".concat(null==a?void 0:a.join())),vL({action:"removed",success:!1}),[2];if((null==i?void 0:i.deleteNeonDatabase.__typename)!=="DeleteNeonDatabaseResult")return r("Error: ".concat(null==i?void 0:i.deleteNeonDatabase.message)),vL({action:"removed",success:!1}),[2];return(null==i?void 0:i.deleteNeonDatabase.success)?vL({action:"removed",success:!0}):(r("Error: Delete Neon Database failed."),vL({action:"removed",success:!1})),[2]}})}),[o,t.databaseId,n,r]),c=(0,v._)((0,w.useState)(!1),2),u=c[0],d=c[1];return{isPendingDelete:u,cancelDelete:(0,w.useCallback)(function(){d(!1)},[]),removeDatabase:s,deleteLoading:a,handleRemoveDatabaseClick:l}},yG=function(e){var n=yW({replId:e.replId,neonDatabase:e.neonDatabase}),t=n.isPendingDelete,r=n.cancelDelete,i=n.removeDatabase,o=n.deleteLoading,a=n.handleRemoveDatabaseClick;return(0,f.Y)(f.FK,{children:t||o?(0,f.FD)(eu.ui,{p:8,gap:8,elevated:!0,children:[(0,f.Y)(T.EY,{children:"Removing this database will permanently destroy all the data."}),(0,f.Y)(iI.N,{icon:(0,f.Y)(iF.A,{}),colorway:"warning",text:"This action cannot be undone."}),(0,f.Y)(eS.$n,{text:"Yes, Remove Database",colorway:"negative",disabled:o,iconLeft:(0,f.Y)(tP.A,{}),onClick:i}),(0,f.Y)(eS.$n,{autoFocus:!0,text:"Cancel",disabled:o,onClick:r})]}):(0,f.Y)(eS.$n,{css:yH.remove,text:"Remove Database",disabled:o,iconLeft:(0,f.Y)(tP.A,{}),onClick:a})})};function yV(e){var n=e.neonDatabase,t=e.openAtTabData,r=(0,nI.A)(),i=(0,yN.pK)().data,o=(0,w.useMemo)(function(){return function(e){var n,t,r=e.data;if((null==r||null==(n=r.currentUser)?void 0:n.__typename)==="CurrentUser"){var i=null==r||null==(t=r.currentUser)?void 0:t.usageInterval;if(i&&"UsageInterval"===i.__typename){var o=i.resources.neonComputeTime.usage,a=i.resources.neonDataStorage.usage,l=(0,yB.h7)(o,{resourceUsageType:"Hours"}),s=(0,yB.h7)(a,{resourceUsageType:"GiB"}),c=new Date(i.endDate).toLocaleString("default",{month:"short",day:"numeric"});return{computeTimeUsageFormatted:"".concat(l," of compute time used this billing period"),storageUsageFormatted:"".concat(s," of storage used this billing period"),renewalInfo:"Renews ".concat(c," ")}}}}({data:i})},[i]),a=(0,io._P)({controlName:yO.g5,logFlagToAnalytics:!1}),l=(0,io._P)({controlName:yO.vA,logFlagToAnalytics:!1});return(0,f.FD)(L.S,{justify:"space-between",css:yH.wrapper,children:[(0,f.FD)(L.S,{gap:12,children:[(0,f.FD)(L.S,{children:[(0,f.Y)(T.EY,{variant:"subheadDefault",css:yH.title,children:"Database ID"}),(0,f.Y)(eu.ui,{elevated:!0,css:yH.card,children:(0,f.Y)(aN.Ay,{css:yH.projectId,children:"".concat(n.projectId)})})]}),(0,f.FD)(L.S,{children:[(0,f.Y)(T.EY,{variant:"subheadDefault",css:yH.title,children:"Account resource usage"}),(0,f.Y)(eu.ui,{elevated:!0,css:yH.card,children:o?(0,f.FD)(f.FK,{children:[(0,f.FD)(L.S,{children:[(0,f.Y)(T.EY,{color:"dimmer",multiline:!1,children:null==o?void 0:o.computeTimeUsageFormatted}),(0,f.Y)(T.EY,{color:"dimmer",multiline:!1,children:null==o?void 0:o.storageUsageFormatted}),(0,f.Y)(T.EY,{color:"dimmest",multiline:!1,children:null==o?void 0:o.renewalInfo})]}),(0,f.Y)(yz,{})]}):(0,f.Y)(L.S,{justify:"center",row:!0,children:(0,f.Y)(to.A,{})})})]}),a?(0,f.Y)(yM.SE,{neonDatabase:n,restoreToCommitId:null==t?void 0:t.restoreToCommitId}):null,l?(0,f.Y)(yM.qP,{neonDatabase:n}):null]}),(0,f.Y)(yG,{replId:r,neonDatabase:n})]})}var yj=function(e){var n=e.size;return(0,f.FD)("svg",{viewBox:"0 0 128 36",preserveAspectRatio:"xMidYMin",height:void 0===n?16:n,fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,f.Y)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 6.207A6.207 6.207 0 0 1 6.207 0h23.586A6.207 6.207 0 0 1 36 6.207v20.06c0 3.546-4.488 5.085-6.664 2.286l-6.805-8.754v10.615A5.586 5.586 0 0 1 16.945 36H6.207A6.207 6.207 0 0 1 0 29.793V6.207Zm6.207-1.241c-.686 0-1.241.555-1.241 1.24v23.587c0 .686.555 1.242 1.24 1.242h10.925c.343 0 .434-.278.434-.621V16.18c0-3.547 4.488-5.086 6.665-2.286l6.805 8.753V6.207c0-.686.064-1.241-.621-1.241H6.207Z",fill:"#12FFF7"}),(0,f.Y)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 6.207A6.207 6.207 0 0 1 6.207 0h23.586A6.207 6.207 0 0 1 36 6.207v20.06c0 3.546-4.488 5.085-6.664 2.286l-6.805-8.754v10.615A5.586 5.586 0 0 1 16.945 36H6.207A6.207 6.207 0 0 1 0 29.793V6.207Zm6.207-1.241c-.686 0-1.241.555-1.241 1.24v23.587c0 .686.555 1.242 1.24 1.242h10.925c.343 0 .434-.278.434-.621V16.18c0-3.547 4.488-5.086 6.665-2.286l6.805 8.753V6.207c0-.686.064-1.241-.621-1.241H6.207Z",fill:"url(#a)"}),(0,f.Y)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 6.207A6.207 6.207 0 0 1 6.207 0h23.586A6.207 6.207 0 0 1 36 6.207v20.06c0 3.546-4.488 5.085-6.664 2.286l-6.805-8.754v10.615A5.586 5.586 0 0 1 16.945 36H6.207A6.207 6.207 0 0 1 0 29.793V6.207Zm6.207-1.241c-.686 0-1.241.555-1.241 1.24v23.587c0 .686.555 1.242 1.24 1.242h10.925c.343 0 .434-.278.434-.621V16.18c0-3.547 4.488-5.086 6.665-2.286l6.805 8.753V6.207c0-.686.064-1.241-.621-1.241H6.207Z",fill:"url(#b)"}),(0,f.Y)("path",{d:"M29.793 0A6.207 6.207 0 0 1 36 6.207v20.06c0 3.546-4.488 5.085-6.664 2.286l-6.805-8.754v10.615A5.586 5.586 0 0 1 16.945 36a.62.62 0 0 0 .62-.62v-19.2c0-3.547 4.488-5.086 6.665-2.286l6.805 8.753V1.241C31.035.556 30.479 0 29.793 0Z",fill:"#B9FFB3"}),(0,f.Y)("path",{d:"M60.686 10.6v9.416l-9.13-9.416h-4.752V26h4.334V15.88L61.082 26h3.938V10.6h-4.334ZM73.054 22.568V19.84h9.702v-3.278h-9.702v-2.53h11.77V10.6H68.632V26h16.434v-3.432H73.054ZM96.583 26.506c6.094 0 10.054-2.992 10.054-8.206 0-5.214-3.96-8.206-10.054-8.206S86.551 13.086 86.551 18.3c0 5.214 3.938 8.206 10.032 8.206Zm0-3.652c-3.388 0-5.478-1.65-5.478-4.554 0-2.904 2.112-4.554 5.478-4.554 3.388 0 5.478 1.65 5.478 4.554 0 2.904-2.09 4.554-5.478 4.554ZM123.249 10.6v9.416l-9.13-9.416h-4.752V26h4.334V15.88L123.645 26h3.938V10.6h-4.334Z",fill:"currentColor"}),(0,f.FD)("defs",{children:[(0,f.FD)("linearGradient",{id:"a",x1:"36",y1:"36",x2:"4.345",y2:"0",gradientUnits:"userSpaceOnUse",children:[(0,f.Y)("stop",{stopColor:"#B9FFB3"}),(0,f.Y)("stop",{offset:"1",stopColor:"#B9FFB3",stopOpacity:"0"})]}),(0,f.FD)("linearGradient",{id:"b",x1:"36",y1:"36",x2:"14.617",y2:"27.683",gradientUnits:"userSpaceOnUse",children:[(0,f.Y)("stop",{stopColor:"#1A1A1A",stopOpacity:".9"}),(0,f.Y)("stop",{offset:"1",stopColor:"#1A1A1A",stopOpacity:"0"})]})]})]})},yZ=(0,nF.AH)([j.wp.color.foregroundDimmest,{textDecoration:"underline"}]),yq=function(){return(0,f.Y)(L.S,{gap:8,css:[j.wp.width("100%")],py:8,children:(0,f.FD)(L.S,{row:!0,gap:8,align:"center",justify:"space-between",children:[(0,f.Y)("a",{target:"_blank",href:wK,css:yZ,children:"Docs"}),(0,f.FD)(L.S,{row:!0,gap:8,align:"center",children:[(0,f.Y)(T.EY,{css:[j.wp.fontSize(14)],multiline:!1,children:"Powered by"}),(0,f.Y)(yj,{})]})]})})},yK=t(89887);function y$(){return(0,f.Y)("div",{children:"Loading..."})}var yJ=t.n(yK)()(function(){return Promise.all([t.e(1006),t.e(1974),t.e(4857)]).then(t.bind(t,14857)).then(function(e){return e.DrizzleStudio_DO_NOT_USE_OR_YOU_WILL_BE_FIRED})},{loadableGenerated:{webpack:function(){return[14857]}},ssr:!1,loading:function(){return(0,f.Y)(y$,{})}}),yQ=function(e){var n,r=(0,v._)((0,w.useState)((0,y._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:return[4,t.e(8017).then(t.bind(t,98017))];case 1:return[2,e.sent().neon]}})})),1)[0];return(0,w.useCallback)((n=(0,y._)(function(n){var t,i,o=arguments;return(0,b.YH)(this,function(a){switch(a.label){case 0:return t=o.length>1&&void 0!==o[1]?o[1]:[],i=o.length>2?o[2]:void 0,[4,r];case 1:return[4,a.sent()(e)(n,t,{arrayMode:(null==i?void 0:i.mode)==="array"})];case 2:return[2,a.sent()]}})}),function(e){return n.apply(this,arguments)}),[r,e])};function yX(e){var n=e.connectionString,t=e.databaseId,r=yQ(n);return(0,tm.M)(th.AZ.DRIZZLE_STUDIO_USED,{action:"opened"}),(0,f.Y)(yJ,{databaseId:"".concat(t.toString(),"-").concat(n),queryFn:r})}var y0=t(66340),y1=t(35341),y2=t(53077),y4=t.n(y2),y5=t(33172),y3={tab:{color:"--tab-color",borderBottomColor:"--tab-border-bottom-color"},tabList:{boxShadow:"--tab-list-box-shadow"}},y6=function(e){return"var(".concat(e,")")},y8=(0,V.x)({tab:[j.wp.display.flex,j.wp.reset.button,j.wp.position.relative,j.wp.rowWithGap(8),j.wp.p(8),j.wp.borderRadius(4,4,0,0),j.wp.align.center,{marginBottom:-1,color:y6(y3.tab.color),userSelect:"none"},i9.b.listItem,{paddingBottom:7,borderWidth:0,borderBottomWidth:"1px",borderBottomColor:y6(y3.tab.borderBottomColor)},{".with-dividers &":{"&:not(:last-child)":{marginRight:1},"&:not(:last-child)::after":{content:'""',position:"absolute",display:"block",width:1,height:16,backgroundColor:k.LU.outlineDefault,right:-1}}}],tabSpan:[{display:"inline-block",lineHeight:1}],tabList:[j.wp.display.flex,j.wp.flex.grow(0),j.wp.flex.row,j.wp.align.stretch,{paddingBottom:1,boxShadow:y6(y3.tabList.boxShadow)}],tabPanel:[j.wp.focusRing,{'&[data-inert="true"]':{display:"none"}}]}),y7=function(e){var n,t=e.isSelected,r=e.isFocused,i=e.isDisabled,o="transparent";r?o=k.LU.accentPrimaryDefault:t&&(o=k.LU.foregroundDefault);var a=k.LU.foregroundDimmer;return t?a=k.LU.foregroundDefault:i&&(a=k.LU.foregroundDimmest),n={},(0,g._)(n,y3.tab.color,a),(0,g._)(n,y3.tab.borderBottomColor,o),n},y9=function(e){var n=e.withUnderline;return(0,g._)({},y3.tabList.boxShadow,n?"inset 0 -1px 0 ".concat(k.LU.outlineDimmest):"none")};function be(e){var n=e.children,t=e.onSelectionChange,r=e.defaultSelectedKey,i=(0,tg._)(e,["children","onSelectionChange","defaultSelectedKey"]);return(0,y0.wR)()?null:(0,f.Y)(sx.tU,(0,nt._)((0,ee._)({},i),{onSelectionChange:t,defaultSelectedKey:r,children:n}))}var bn=(0,w.forwardRef)(function(e,n){var t=e.children,r=e.withUnderline,i=e.withDividers,o=e.className,a=(0,tg._)(e,["children","withUnderline","withDividers","className"]);return(0,f.Y)(sx.wb,(0,nt._)((0,ee._)({ref:n},a),{className:y4()(o,void 0!==i&&i&&"with-dividers"),css:y8.tabList,style:y9({withUnderline:void 0===r||r}),children:t}))}),bt=(0,w.forwardRef)(function(e,n){var t=e.children,r=e.id,i=(0,tg._)(e,["children","id"]);return(0,f.Y)(sx.Kp,(0,nt._)((0,ee._)({id:r,ref:n},i),{css:y8.tabPanel,children:t}))}),br=(0,w.forwardRef)(function(e,n){var t=e.children,r=e.iconLeft,i=e.iconRight,o=e.as,a=e.href,l=e.shallow,s=e.scroll,c=(0,tg._)(e,["children","iconLeft","iconRight","as","href","shallow","scroll"]),u=(0,ee._)((0,nt._)((0,ee._)({},c),{css:y8.tab,style:function(e){return y7({isSelected:e.isSelected,isFocused:e.isFocusVisible,isDisabled:e.isDisabled})}}),(0,y5.J)({as:o,href:a,shallow:l,scroll:s}));return"function"==typeof t?(0,f.Y)(sx.oz,(0,nt._)((0,ee._)({ref:n},u),{children:function(e){return(0,f.FD)(f.FK,{children:[r,(0,f.Y)("span",{css:y8.tabSpan,children:t(e)}),i]})}})):(0,f.FD)(sx.oz,(0,nt._)((0,ee._)({ref:n},u),{children:[r,(0,f.Y)("span",{css:y8.tabSpan,children:t}),i]}))});function bi(e){var n=e.children;return"function"==typeof n?(0,f.Y)(y1.pM,{children:n}):(0,f.Y)(f.FK,{children:n})}var bo=t(47177),ba=(0,V.x)({wrapper:[j.wp.flex.column,j.wp.flex.grow(1)],studioTabPanel:[j.wp.flex.column,j.wp.flex.grow(1)],overviewTabPanel:[j.wp.colWithGap(8),j.wp.flex.column,j.wp.flex.grow(1),j.wp.p(12)],docs:[vP.h,j.wp.maxWidth("100%")],settingsTabPanel:[j.wp.flex.column,j.wp.flex.grow(1),j.wp.p(12)],title:[j.wp.my(8),{borderBottomWidth:1,borderBottomStyle:"solid",borderBottomColor:k.LU.outlineDefault}]}),bl=function(e){var n,t=e.neonDatabases,r=e.currentUser,i=t[0],o=(0,nI.A)(),a=ys(),l=a.selectedTab,s=a.selectTab,c=a.openAtTab,u=(0,eW.md)(eV);if("string"!=typeof vF({connectionString:i.connectionString,databaseName:i.databaseName}).get(vk))throw Error("Expected host to be set");var d=u||((n=new URL(i.connectionString.replace("postgres://","https://").replace("postgresql://","https://"))).pathname="/".concat(i.databaseName),n.search="?sslmode=require",n.toString().replace("https://","postgresql://"));return(0,f.FD)(be,{css:ba.wrapper,onSelectionChange:s,selectedKey:l,children:[(0,f.FD)(bn,{withDividers:!1,children:[(0,f.Y)(br,{id:"overview",iconLeft:(0,f.Y)(tI.A,{}),children:"Overview"}),(0,f.Y)(br,{id:"drizzle-studio",iconLeft:(0,f.Y)(bo.A,{}),isDisabled:i.isFrozen,children:"My Data"}),(0,f.Y)(br,{id:"commands",iconLeft:(0,f.Y)(f2.A,{}),children:"Commands"}),(0,f.Y)(br,{id:"settings",iconLeft:(0,f.Y)(oI.A,{}),children:"Settings"})]}),(0,f.FD)(bi,{children:[(0,f.Y)(bt,{id:"overview",css:ba.overviewTabPanel,children:(0,f.Y)(yP,{neonDatabase:i,currentUser:r,replId:o,connectionString:d})}),(0,f.Y)(bt,{id:"drizzle-studio",css:ba.studioTabPanel,children:i.isFrozen?(0,f.Y)(iI.N,{text:"This database is frozen and cannot be used.",colorway:"warning",icon:(0,f.Y)(iF.A,{})}):(0,f.Y)(yX,{connectionString:d,databaseId:i.databaseId})}),(0,f.FD)(bt,{id:"commands",css:ba.overviewTabPanel,children:[(0,f.Y)(aN.Ay,{css:ba.docs,children:"\nPostgreSQL is a powerful open source relational database system that is widely used in web applications and other software development projects. You can easily create a production-ready PostgreSQL database directly within Replit. For more information on PostgreSQL, visit the [official documentation](https://www.postgresql.org/docs/). Repls use PostgreSQL version 15.\n\nHere is some information to help you get started:\n\n1. Replit databases are backed by [Neon](https://neon.tech/). The [Neon documentation](https://neon.tech/docs/connect/connect-from-any-app#connection-examples) provides guides on how to connect various frameworks, such as Django, to your PostgreSQL database.\n\n1. Environment Variables: We provided environment variables `DATABASE_URL`, `PGDATABASE`, `PGHOST`, `PGHOST`, `PGPORT`, `PGUSER`, `PGPASSWORD`. Provide these values to your framework of choice to connect to your database.\n\n1. Connection pooling: See [Neon documentation](https://neon.tech/docs/connect/connection-pooling) for connection pooling.\n\n1. Compute lifecycle: Neon databases go to sleep after 5 minutes of inactivity. You may experience disconnects or reconnects depending on your client.\n"}),(0,f.Y)(L.S,{css:ba.title,py:8,children:(0,f.Y)(T.EY,{variant:"subheadBig",multiline:!1,children:"Environment variables"})}),(0,f.Y)(vM,{connectionString:d,databaseName:i.databaseName})]}),(0,f.Y)(bt,{id:"settings",css:ba.settingsTabPanel,children:(0,f.Y)(yV,{neonDatabase:i,openAtTabData:(null==c?void 0:c.type)==="settings"&&(null==c?void 0:c.data)?c.data:void 0})})]}),(0,f.Y)(L.S,{pt:16,px:8,children:(0,f.Y)(yq,{})})]})};function bs(){var e=(0,en._)(["\n  query NeonStartPage($replId: String!) {\n    currentUser {\n      id\n      usageInterval {\n        ... on UsageInterval {\n          resources {\n            neonComputeTime {\n              allotment\n              usage\n            }\n            neonDataStorage {\n              allotment\n              usage\n            }\n          }\n        }\n      }\n    }\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        authorizations {\n          createDatabase {\n            isAuthorized\n            code\n            message\n          }\n        }\n      }\n    }\n  }\n"]);return bs=function(){return e},e}var bc={},bu=(0,et.J1)(bs()),bd=t(80456),bp=t(84353),bf=t(54249),bh=(0,V.x)({cta:[j.wp.width("100%"),j.wp.maxWidth(320),{marginLeft:"auto",marginRight:"auto"}],ctaContainer:[j.wp.colWithGap(8),j.wp.align.center],ctaStatusBanner:[j.wp.textAlign.left],payment:[j.wp.borderRadius(12),j.wp.textAlign.left,j.wp.shadow(2)],detailsItem:[j.wp.display.grid,j.wp.gap(16),{gridTemplateColumns:"56px auto",gap:16}],detailsText:[j.wp.flex.growAndShrink(1),j.wp.textAlign.left]});function bm(e){var n=e.loadingAgentCreate,t=e.loading,r=e.createDatabaseAuthz,i=e.handleOnCreate,o=e.refetchUbbCapabilitiesQueryData,a=e.setShowPaymentMethodForm,l=e.showPaymentMethodForm,s=e.setShowSupportForm,c=e.hasOneClickCreation,u=e.replId,d=e.handleAgentCreate,p=(0,ip.m6)();if(!r)return(0,f.Y)(L.S,{css:bh.ctaContainer,children:(0,f.Y)(to.A,{})});if(!r.isAuthorized&&p)return(0,f.Y)(iI.N,{text:r.message,colorway:"warning",icon:(0,f.Y)(iF.A,{}),css:bh.ctaStatusBanner});switch(r.code){case ic.S4.RequiresPaymentMethodOrSubscription:return(0,f.Y)(L.S,{css:bh.ctaContainer,children:(0,f.Y)(iw.A,{context:"workspace_postgresql_pane",text:"Upgrade your plan to create a database",css:bh.cta,colorway:"primary",variant:"default",disabled:l,onPlanCheckoutComplete:o})});case ic.S4.RequiresActiveSubscription:return(0,f.FD)(L.S,{css:bh.ctaContainer,children:[(0,f.Y)(iw.A,{context:"workspace_postgresql_pane",text:"Upgrade your plan to create a database",css:bh.cta,colorway:"primary",variant:"default",disabled:l,onPlanCheckoutComplete:o}),(0,f.Y)(eS.$n,{variant:"nofill",colorway:"primary",text:"or add a payment method",css:bh.cta,disabled:l,loading:t,iconLeft:(0,f.Y)(s4.A,{}),onClick:function(){return a()}})]});case ic.S4.RequiresSmsVerification:return(0,f.Y)(vj.A,{context:ic.SG.Neon,onSuccess:o});case ic.S4.RequiresPaymentMethod:return(0,f.Y)(eS.$n,{colorway:"primary",text:"Add a payment method",css:bh.cta,disabled:l,loading:t,iconLeft:(0,f.Y)(s4.A,{}),onClick:function(){return a()}});case ic.S4.RequiresUnbanning:return(0,f.Y)(un.d,{text:"Your account currently has restrictions on creating a database. We're here to help! Please reach out to our support team for assistance.",colorway:"warning",iconLeft:(0,f.Y)(iF.A,{}),css:bh.ctaStatusBanner,onClick:function(){return s()}});case ic.S4.InsufficientBudget:return(0,f.FD)(f.FK,{children:[(0,f.Y)(iI.N,{text:"You've reached your monthly usage budget. Increase your budget to create a database.",colorway:"warning",icon:(0,f.Y)(iF.A,{}),css:bh.ctaStatusBanner}),(0,f.Y)(vq.h,{onUpdateSuccess:o,replId:u})]});case ic.S4.PaymentDelinquent:case ic.S4.FeatureDisabled:case ic.S4.FeatureUnsupportedForReplitTeams:case ic.S4.FeatureUnsupportedForTeamsEdu:case ic.S4.FeatureUnsupportedForTeamsFree:case ic.S4.FeatureUnsupportedForTeamsPro:case ic.S4.InsufficientPermissions:case ic.S4.InsufficientQuota:case ic.S4.RequiresActiveTeamsSubscription:case ic.S4.RequiresEmailVerification:return(0,f.Y)(iI.N,{text:r.message,colorway:"warning",icon:(0,f.Y)(iF.A,{}),css:bh.ctaStatusBanner});case ic.S4.Authorized:case ic.S4.AuthorizedQuota:return(0,f.Y)(L.S,{css:bh.ctaContainer,children:c?(0,f.FD)(f.FK,{children:[(0,f.Y)(eS.$n,{colorway:"primary",onClick:d,css:bh.cta,text:"Ask agent to set up a database",iconLeft:n?(0,f.Y)(to.A,{}):(0,f.Y)(f.FK,{}),loading:n,disabled:t}),(0,f.Y)(eS.$n,{onClick:i,css:bh.cta,text:t?"":"Create manually",iconLeft:t?(0,f.Y)(to.A,{}):(0,f.Y)(f.FK,{}),loading:t,disabled:n})]}):(0,f.Y)(eS.$n,{colorway:"primary",onClick:i,css:bh.cta,text:t?"":"Create a database",iconLeft:t?(0,f.Y)(to.A,{}):(0,f.Y)(f.FK,{}),loading:t})});default:(0,ar.A)(r.code)}}var bg=function(){var e,n,t,r,i,o,a,l,s,c,u,d=(0,v._)((0,w.useState)(!1),2),p=d[0],h=d[1],m=(0,v._)((0,w.useState)(!1),2),g=m[0],Y=m[1],C=(0,nI.A)(),_=(0,nN.A)().showError,k=(e=ys().openAgentChatSession,n=(0,S.NC)(),t=(0,nN.A)().showError,i=(r=(0,v._)((0,w.useState)(!1),2))[0],o=r[1],a=(0,io._P)({controlName:"agent-empty-state-db-creation"}),l=(0,S.jt)()&&a,s=(0,w.useCallback)((0,y._)(function(){var r,i;return(0,b.YH)(this,function(a){switch(a.label){case 0:if(!l)return[2];o(!0),a.label=1;case 1:return a.trys.push([1,4,,5]),[4,n.sessions.create({sessionType:x.dF3.AGENT_SESSION})];case 2:if(!(r=a.sent()).ok)throw Error("Failed to create agent session");return e(r.payload.id),[4,r.payload.appendEvent({kind:"requestFeatureAdd",feature:x.vqu.REQUEST_FEATURE_ADD_TYPE_NEON_DATABASE})];case 3:return a.sent(),[3,5];case 4:return i=a.sent(),o(!1),t("Error creating database via agent: ".concat(i instanceof Error?i.message:"Unknown error")),[3,5];case 5:return[2]}})}),[n.sessions,l,e,t]),{hasOneClickCreation:l,didStartAgentCreation:i,handleAgentCreate:s}),D=k.didStartAgentCreation,E=k.handleAgentCreate,R=k.hasOneClickCreation;(0,bf.q)({skipQuery:!D,pollInterval:D?1e4:void 0});var I=(c={notifyOnNetworkStatusChange:!0,variables:{replId:C},onError:function(e){_(e.message)}},u=(0,ee._)({},bc,c),er.I(bu,u)),F=I.loading,P=I.data,U=I.refetch,N=(0,A.A)(),O=N.psql,M=vO(N.secrets),B=(0,v._)((0,vV.ou)({refetchQueries:[{query:vV.Or,variables:{input:{replId:C}}}],onError:function(e){_("Error when creating Neon database: ".concat(e.message)),vL({action:"created",success:!1})},update:function(e,n){var t=n.data;(null==t?void 0:t.createNeonDatabase.__typename)==="CreateNeonDatabaseResult"&&e.writeQuery({query:vV.Or,variables:{input:{replId:C}},data:{__typename:"RootQueryType",getNeonDatabases:{__typename:"GetNeonDatabasesResult",databases:[t.createNeonDatabase.database]}}})},onCompleted:function(e){return(0,y._)(function(){var n,t;return(0,b.YH)(this,function(r){switch(r.label){case 0:if((null==e?void 0:e.createNeonDatabase.__typename)!=="CreateNeonDatabaseResult")return[3,5];if(!(0,bp.I)(e.createNeonDatabase.database))return _("Error: could not create database, please try again"),[2];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,O.ensureNixPsqlModuleInstalled(!0)];case 2:return r.sent(),M({connectionString:(n=e.createNeonDatabase.database).connectionString,databaseName:n.databaseName}),vL({action:"created",success:!0}),[3,4];case 3:return t=r.sent(),_("Error: ".concat(t.message)),[3,4];case 4:return[3,6];case 5:return _("Error: ".concat(null==e?void 0:e.createNeonDatabase.message)),vL({action:"created",success:!1}),[2];case 6:return[2]}})})()}}),2),H=B[0],z=B[1].loading,W=(null==P?void 0:P.repl.__typename)==="Repl"?P.repl.authorizations.createDatabase:void 0;return(0,f.FD)(f.FK,{children:[(0,f.Y)(aX.a,{isOpen:g,onRequestClose:function(){return Y(!1)},children:(0,f.Y)(vK.A,{onRequestClose:function(){return Y(!1)}})}),(0,f.Y)(md.A,{pane:{type:"neon"},maxWidth:450,body:(0,f.FD)(L.S,{gap:16,children:[(0,f.FD)(L.S,{css:bh.detailsItem,children:[(0,f.Y)(bd.Y9,{}),(0,f.FD)(T.EY,{css:bh.detailsText,children:["Get charged for what you use across compute time and storage (",(0,f.Y)("a",{href:w$,target:"_blank",rel:"noopener",children:"see pricing"}),")."]})]}),(0,f.FD)(L.S,{css:bh.detailsItem,children:[(0,f.Y)(bd.iw,{}),(0,f.FD)(T.EY,{css:bh.detailsText,children:["Replit ",iv.en," members receive $",o7.Qz,"/month in credits to offset expenses (",(0,f.Y)("a",{href:w$,target:"_blank",rel:"noopener",children:"see allocations"}),")."]})]})]}),action:(0,f.FD)(L.S,{gap:8,children:[(0,f.Y)(bm,{loadingAgentCreate:D,handleAgentCreate:E,hasOneClickCreation:R,replId:C,loading:F||z,createDatabaseAuthz:W,handleOnCreate:function(){H({variables:{input:{replId:C}}})},refetchUbbCapabilitiesQueryData:U,setShowPaymentMethodForm:function(){return h(!0)},showPaymentMethodForm:p,setShowSupportForm:function(){return Y(!0)}}),(0,f.Y)(tK.v,{href:wK,variant:"nofill",target:"_blank",rel:"noopener",iconLeft:(0,f.Y)(g7.A,{}),text:"Learn more"}),p?(0,f.Y)(eu.ui,{elevated:!0,css:bh.payment,p:16,children:(0,f.Y)(cw.y,{onSuccess:(0,y._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:return h(!1),[4,U()];case 1:return e.sent(),[2]}})}),context:"workspace_postgresql_pane"})}):null]})})]})};let bv=function(){var e=(0,bf.q)(),n=e.loading,t=e.neonDatabases,r=e.currentUser,i=(0,eW.md)(eG);return i&&r?(0,f.Y)(bl,{neonDatabases:[i],currentUser:r}):0===t.length&&n?(0,f.Y)(md.A,{pane:{type:"neon"},maxWidth:450,loading:!0}):t.length>0&&r?(0,f.Y)(bl,{neonDatabases:t,currentUser:r}):(0,f.Y)(bg,{})};var bw=h.ZU.Object({type:h.ZU.Literal("neon"),data:h.ZU.Optional(h.ZU.Object({openAtTab:yi}))}),by={Content:function(e){var n=e.pane.data,t=e.options;return(0,f.Y)(yc,{initialOpenAtTab:null==n?void 0:n.openAtTab,performPaneOperation:t.performPaneOperation,children:(0,f.Y)(bv,{})})},Icon:function(e){var n=e.size;return(0,f.Y)(n0.Vx.Provider,{value:{color:k.LU.blueStrongest,size:n},children:(0,f.Y)(bo.A,{})})},getTitle:function(){return"Database"},description:"Fully-managed, usage-based PostgreSQL database with 10GB of fast read/write storage",category:nQ.bY.CloudServices,decode:function(e){return m.T(bw,e)}},bb=t(82272),bS=t(64870),bY=t(70998),bA=t(70430),bx=t(49580),bC=t(46404),b_="VNC ports do not require external port",bk=(0,V.x)({secondaryUrl:[j.wp.color.foregroundDimmest,j.wp.fontSize("small"),j.wp.focusRing,{"&:hover":[j.wp.cursor.pointer,j.wp.color.accentPrimaryStrongest]}],portHeader:[j.wp.align.baseline],openPort:[j.wp.color.accentPositiveStronger],localPortIcon:[j.wp.color.foregroundDefault,j.wp.px(4),{flex:"0 0 auto",marginLeft:"auto"}],portStatus:[j.wp.py(0),j.wp.px(4),j.wp.overflow("hidden")],newPort:[j.wp.color.foregroundDefault,j.wp.rowWithGap(4),j.wp.align.center,j.wp.my(1),j.wp.borderRadius(16),j.wp.height(20)],externalPortButton:[{"&":[j.wp.height(20),j.wp.borderRadius(16),j.wp.color.foregroundDefault]}],textButton:[j.wp.cursor.pointer,j.wp.reset.button,j.wp.color.accentPrimaryStronger,j.wp.focusRing,j.wp.hover(j.wp.color.accentPrimaryStrongest),{lineHeight:1.2,":not([disabled])":{cursor:"pointer"}}],newPortInput:[j.wp.height(20),j.wp.my(1)],newPortClose:j.wp.mr(4),vncTooltip:[j.wp.flex.growAndShrink(1)]});function bD(e){var n,t,r,i=e.localPort,o=e.externalPort,a=e.isLocalhost,l=e.onPortChange,s=(0,A.A)().ports.updateDotReplitPortsMapping,c=(n=(0,A.A)().ports,r=new Set(null==(t=(0,el.A)(n.portsState))?void 0:t.map(function(e){var n;return null!=(n=(0,bS.Zd)(e.configuration))&&n}).filter(Boolean)),Array.from(bS.ZA).sort(function(e,n){return e-n}).map(function(e){return{isAvailable:!r.has(e),externalPort:e}}));return(0,f.Y)(L.S,{row:!0,children:void 0!==o&&0!==o?(0,f.Y)(eS.$n,{css:bk.externalPortButton,iconRight:(0,f.Y)(dS.A,{}),text:":".concat(o),size:"small",onClick:function(){i&&(s(i,void 0,a),null==l||l())}}):(0,f.Y)(bx.in,{label:"Set external port",onAction:function(e){if(i){var n=c.find(function(n){return String(n.externalPort)===e});n&&n.isAvailable&&(s(i,n.externalPort,a),null==l||l())}},children:c.map(function(e){var n=e.isAvailable,t=e.externalPort;return(0,f.Y)(bx.Dr,{id:String(t),"aria-label":String(t),isDisabled:!n,label:":".concat(t)},String(t))})})})}function bE(e){var n=e.portState,t=null;switch(n.configuration.type){case bS.gH.MISCONFIGURED:t=(0,f.Y)(P.m_,{tooltip:"Port misconfigured",delay:"default",children:(0,f.Y)(iF.A,{})});break;case bS.gH.CONFIG_MISSING:t=(0,f.Y)(P.m_,{tooltip:"Configuration missing",delay:"default",children:(0,f.Y)(iF.A,{})});break;case bS.gH.NO_MORE_EXTERNAL_PORTS_AVAILABLE:t=(0,f.Y)(iF.A,{});break;case bS.gH.FORWARDED:t=(0,f.Y)(rb.A,{});case bS.gH.INTERNAL_ONLY:}return(0,f.Y)("span",{css:bk.localPortIcon,children:t})}function bR(e){var n=e.portState,t=e.width,r=(0,bS.s$)(n.configuration)?"localhost":"0.0.0.0";return(0,f.FD)(bY.VP,{width:t||130,children:[(0,f.FD)(T.EY,{css:n.isOpen&&bk.openPort,children:[r,":",n.configuration.localPort]}),(0,f.Y)(bE,{portState:n})]})}function bI(e){var n=e.portState,t=e.openWebview,r=e.openVncOutput,i=e.width;if(n.configuration.type===bS.gH.NO_MORE_EXTERNAL_PORTS_AVAILABLE)return(0,f.Y)(bY.VP,{width:i||180,children:(0,f.Y)(iI.N,{css:bk.portStatus,icon:(0,f.Y)(iF.A,{}),text:"No ports available"})});var o=!!r&&n.configuration.isVnc,a=!o&&!!t&&n.isOpen&&n.configuration.type===bS.gH.FORWARDED;return(0,f.FD)(bY.VP,{width:i||180,children:[n.configuration.isVnc?(0,f.Y)(P.m_,{tooltip:b_,css:bk.vncTooltip,children:(0,f.Y)(iI.N,{css:bk.portStatus,icon:(0,f.Y)(tI.A,{}),text:b_})}):(0,f.Y)(bD,{localPort:n.configuration.localPort,externalPort:(0,bS.Zd)(n.configuration),isLocalhost:(0,bS.s$)(n.configuration)}),a?(0,f.Y)(eY.K0,{alt:"Open in Preview",onClick:t,css:j.wp.color.foregroundDefault,children:(0,f.Y)(bC.A,{})}):null,o?(0,f.Y)(eY.K0,{alt:"View VNC output",onClick:r,css:j.wp.color.foregroundDefault,children:(0,f.Y)(bC.A,{})}):null]})}function bF(e){var n,t=e.portState;return t.isOpen?(0,f.FD)(f.FK,{children:[(0,f.Y)(bY.VP,{width:100,children:(n=t.processInfo.cmdline[0].split("/"))[n.length-1]}),(0,f.Y)(bY.VP,{width:100,children:t.processInfo.pid})]}):(0,f.Y)(bY.VP,{width:100})}var bT=function(e){return e.OPEN_WEBVIEW="OPEN_WEBVIEW",e.OPEN_VNC_OUTPUT="OPEN_VNC_OUTPUT",e.EXTERNAL_LINK="EXTERNAL_LINK",e.REMOVE="REMOVE",e}(bT||{});function bP(e){var n=e.portState,t=e.onAction,r=[{label:"Open external link",key:"EXTERNAL_LINK",icon:(0,f.Y)(tR.A,{})},{label:"Remove port config",key:"REMOVE",icon:(0,f.Y)(tP.A,{})}];return n.configuration.isVnc?r.unshift({label:"View VNC output",key:"OPEN_VNC_OUTPUT",icon:(0,f.Y)(bC.A,{})}):r.unshift({label:"Open Preview",key:"OPEN_WEBVIEW",icon:(0,f.Y)(bC.A,{})}),(0,f.Y)(bY.VP,{width:30,last:!0,children:(0,f.Y)(bx.in,{trigger:(0,f.Y)(eY.K0,{alt:"More",children:(0,f.Y)(sO.A,{})}),items:r,onAction:function(e){switch(e){case"OPEN_WEBVIEW":case"OPEN_VNC_OUTPUT":case"EXTERNAL_LINK":case"REMOVE":t({type:e,payload:{portState:n}})}},children:function(e){return(0,f.Y)(bx.Dr,{label:e.label,icon:e.icon},e.key)}})})}function bL(e){var n=e.portState,t=e.portAction;return(0,f.FD)(bY.fI,{children:[(0,f.Y)(bR,{portState:n}),(0,f.Y)(bI,{portState:n,openWebview:function(){t({type:"OPEN_WEBVIEW",payload:{portState:n}})},openVncOutput:function(){t({type:"OPEN_VNC_OUTPUT",payload:{portState:n}})}}),(0,f.Y)(bF,{portState:n}),(0,f.Y)(bP,{portState:n,onAction:t})]},n.configuration.localPort)}var bU=function(e){var n=e.text,t=e.onClick;return(0,f.Y)("button",{css:bk.textButton,onClick:t,children:n})};function bN(e){var n,t=e.openDotReplit,r=(0,v._)((0,w.useState)(!1),2),i=r[0],o=r[1],a=(0,v._)((0,w.useState)(),2),l=a[0],s=a[1],c=null==(n=(0,A.A)().ports.portsState.current)?void 0:n.some(function(e){return e.configuration.localPort===l});return i?(0,f.FD)(bY.fI,{children:[(0,f.FD)(bY.VP,{width:130,children:[(0,f.Y)(eY.K0,{css:bk.newPortClose,alt:"Close",onClick:function(){return o(!1)},size:18,children:(0,f.Y)(dS.A,{})}),(0,f.Y)(eA.pd,{css:bk.newPortInput,value:(null==l?void 0:l.toString())||"",onChange:function(e){return s(e.target.value?parseInt(e.target.value,10):void 0)}})]}),(0,f.Y)(bY.VP,{children:c?(0,f.Y)(iI.N,{css:bk.portStatus,colorway:"warning",text:"Local port already exists"}):(0,f.Y)(bD,{localPort:l,isLocalhost:!1,onPortChange:function(){return o(!1)}})})]}):(0,f.FD)(bY.fI,{children:[(0,f.Y)(bY.VP,{width:130,children:(0,f.Y)(eS.$n,{css:bk.newPort,iconLeft:(0,f.Y)(tT.A,{size:12}),text:"New port",size:"small",onClick:function(){return o(!0)}})}),(0,f.Y)(bY.VP,{children:(0,f.FD)(T.EY,{variant:"small",children:["This port config is saved in the"," ",(0,f.Y)(bU,{text:".replit file",onClick:t}),"."," "]})})]})}function bO(e){var n,t=e.openDotReplit,r=e.openWebview,i=e.openVncOutput,o=e.ports,a=e.container,l=(0,rK.A)(),s=(0,bb.Ik)({container:a,ports:o,addDevToolsSuffix:!l}),c=(0,nN.A)().showError,u=(0,A.A)().ports,d=u.portsState,p=u.removeDotReplitPortsMapping,h=function(e){switch(e.type){case"OPEN_WEBVIEW":r(e.payload.portState.configuration.localPort);break;case"OPEN_VNC_OUTPUT":i();break;case"EXTERNAL_LINK":var n=(0,bS.Zd)(e.payload.portState.configuration);if(!(null==s?void 0:s.presentationUrl))return void c("URL not available.");var t=(0,bb.jq)(null==s?void 0:s.presentationUrl,n).toString();window.open(t,"_blank");break;case"REMOVE":p(e.payload.portState.configuration.localPort,(0,bS.Zd)(e.payload.portState.configuration))}};return(0,f.FD)(L.S,{p:12,gap:16,children:[(null==s?void 0:s.presentationUrl)?(0,f.FD)(f.FK,{children:[(0,f.Y)(bA.A,{url:s.presentationUrl}),(0,f.Y)(lF.a,{})]}):null,(0,f.FD)(L.S,{gap:4,children:[(0,f.FD)(L.S,{css:bk.portHeader,row:!0,gap:8,children:[(0,f.Y)(T.EY,{children:"Ports"}),(0,f.Y)(yU(),{legacyBehavior:!0,href:"https://docs.replit.com/replit-workspace/workspace-features/webview",passHref:!0,children:(0,f.Y)("a",{css:bk.secondaryUrl,target:"_blank",children:"Learn more"})})]}),(0,f.FD)(bY.XI,{children:[(0,f.FD)(bY.fI,{children:[(0,f.Y)(bY.VP,{header:!0,width:130,children:"Internal Port"}),(0,f.Y)(bY.VP,{header:!0,width:180,children:"External Port"}),(0,f.Y)(bY.VP,{header:!0,width:100,children:"Name"}),(0,f.Y)(bY.VP,{header:!0,width:100,children:"Pid"})]}),d.current&&(null==(n=d.current)?void 0:n.length)>0?d.current.map(function(e){return(0,f.Y)(bL,{portState:e,portAction:h},e.configuration.localPort)}):null,(0,f.Y)(bN,{openDotReplit:t})]})]})]})}var bM=t(98952),bB=h.ZU.Object({type:h.ZU.Literal("networking")}),bH={Content:function(e){var n,t=e.options.performPaneOperation,r=(0,nN.A)().showError,i=(0,A.A)(),o=i.fs,a=i.container,l=i.ports;return(0,f.Y)(bO,{openDotReplit:(0,y._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:return[4,o.stat(".replit")];case 1:if(!e.sent().exists)return r("Could not find .replit configuration file."),[2];return t({operation:"open",secondary:!0,pane:{type:"codeEditor",data:{path:".replit"}}}),[2]}})}),openWebview:(n=(0,y._)(function(e){return(0,b.YH)(this,function(n){return t({operation:"open",pane:{type:"webview",data:{ports:e?{type:"local",port:e}:void 0}},secondary:!0}),[2]})}),function(e){return n.apply(this,arguments)}),openVncOutput:(0,y._)(function(){return(0,b.YH)(this,function(e){return t({operation:"open",pane:{type:"vnc"},secondary:!0}),[2]})}),container:a,ports:l})},Icon:function(e){var n=e.size;return(0,f.Y)(bM.A,{size:n})},getTitle:function(){return"Networking"},description:"Configure web server ports for your App",category:nQ.bY.WorkspaceFeatures,decode:function(e){return m.T(bB,e)}},bz=t(25095),bW=t(88010),bG=h.ZU.Object({type:h.ZU.Literal("objectStorage")}),bV={Content:bz.A,Icon:function(e){var n=e.size;return(0,f.Y)(n0.Vx.Provider,{value:{color:k.LU.tealStrongest,size:n},children:(0,f.Y)(bW.A,{})})},getTitle:function(){return"Object Storage"},description:"Persistent, shared file storage which can be accessed programmatically in your App",category:nQ.bY.CloudServices,decode:function(e){return m.T(bG,e)}},bj=t(98810),bZ=t.n(bj),bq=t(13439),bK=t(91509),b$=(0,V.x)({canvas:{width:"100%",height:"100%",outline:"none",position:"absolute",top:0,left:0}});function bJ(e){var n=e.data,t=e.onSave,r=(0,w.useRef)(null),i=(0,w.useRef)(null),o=(0,A.A)().fs,a=(0,nN.A)(),l=a.showError,s=a.showConfirm,c=(0,v._)((0,w.useState)(!1),2),u=c[0],d=c[1],p=(0,tw.A)(function(){var e=r.current;if(!e)return null;e.width=e.offsetWidth,e.height=e.offsetHeight;var n=e.getContext("2d");n&&(n.imageSmoothingEnabled=!1)},{type:"debounce",wait:100});return(0,w.useEffect)(function(){var e=r.current;if(e){e.width=e.offsetWidth,e.height=e.offsetHeight;var o=bZ()({canvas:e,data:n}),a=function(){return t(o.save())};return o.on("change",a),o.on("save",a),o.on("export",function(){return d(!0)}),i.current=o,e.focus(),function(){o&&o.cleanUp(),i.current&&(i.current=null)}}},[n,t,r]),(0,f.FD)(f.FK,{children:[(0,f.Y)("canvas",{css:b$.canvas,ref:function(e){r.current=e,p(e)},tabIndex:0}),(0,f.Y)(aX.a,{isOpen:u,onRequestClose:function(){return d(!1)},children:(0,f.Y)(bK.A,{prompt:"Export",desc:"What name to give to the exported file?",placeholder:"filename",type:"text",onCancel:function(){return d(!1)},onConfirm:function(e){if(!i.current)return void d(!1);var n="".concat(e,".png"),t=i.current.curFrame().toPNG();o.writeFile(n,eJ.A.from(t)).then(function(e){if(e.error)return void l("Failed to write to file ".concat(n));s("Successfully exported to ".concat(n)),d(!1)})}})})]})}function bQ(e){var n,t=e.activeFile,r=(0,A.A)().fs,i=(0,v._)((0,w.useState)(!0),2),o=i[0],a=i[1],l=(0,v._)((0,w.useState)(null),2),s=l[0],c=l[1],u=(0,nN.A)().showError,d=t.endsWith(".kbmsprite");(0,w.useEffect)(function(){var e=!1;function n(){return(n=(0,y._)(function(){var n,i,o;return(0,b.YH)(this,function(l){switch(l.label){case 0:return[4,r.readFile(t)];case 1:if(n=l.sent(),a(!1),e)return[2];if(n.error)return u("failed to read ".concat(t)),[2];return o=(i=n.content.toString())&&JSON.parse(i),c(d?(0,bq.L)(o):o),[2]}})})).apply(this,arguments)}return!function(){n.apply(this,arguments)}(),function(){e=!0}},[r,t,u,d]);var p=(0,w.useCallback)((n=(0,y._)(function(e){return(0,b.YH)(this,function(n){switch(n.label){case 0:if(!d)return[3,2];return[4,(0,bq.t)(e)];case 1:e=n.sent(),n.label=2;case 2:return[4,r.writeFile(t,eJ.A.from(JSON.stringify(e)))];case 3:return n.sent().error&&u("Failed to save ".concat(t,", please try again")),[2]}})}),function(e){return n.apply(this,arguments)}),[r,t,u,d]);return o?(0,f.Y)(to.A,{}):s?(0,f.Y)(bJ,{data:s,onSave:p}):(0,f.Y)(bX,{onCreate:function(e){return c(e)}})}function bX(e){var n=e.onCreate,t=(0,v._)((0,w.useState)(""),2),r=t[0],i=t[1],o=(0,v._)((0,w.useState)(""),2),a=o[0],l=o[1],s=Number(r),c=Number(a);return(0,f.FD)(L.S,{p:8,gap:8,children:[(0,f.Y)(T.EY,{variant:"subheadDefault",multiline:!1,children:"Create a Pedit file"}),(0,f.Y)(eA.pd,{placeholder:"width",value:r,onChange:function(e){return i(e.target.value)}}),(0,f.Y)(eA.pd,{placeholder:"height",value:a,onChange:function(e){return l(e.target.value)}}),(0,f.Y)(eS.$n,{text:"Create",disabled:!(s>0&&c>0),onClick:function(){n({width:Math.ceil(s),height:Math.ceil(c)})}})]})}var b0=t(56002),b1=h.ZU.Object({type:h.ZU.Literal("pedit"),data:h.ZU.Object({path:h.ZU.String()})}),b2={Content:function(e){var n=e.pane,t=e.options.performPaneOperation;return(0,f.Y)(b4,{path:n.data.path,performPaneOperation:t})},Icon:function(e){var n=e.size;return(0,f.Y)(b0.A,{size:n})},getTitle:function(e){return(0,tt.WP)(e.data.path)},category:nQ.bY.WorkspaceFeatures,decode:function(e){return m.T(b1,e)}};function b4(e){var n=e.path,t=e.performPaneOperation,r=(0,n5.KA)({path:n,performPaneOperation:t});return(0,tr.Qt)(function(){if(r)return{commands:[{commands:r}]}},[r]),(0,f.FD)(f.FK,{children:[(0,f.Y)(n5.ou,{path:n,performPaneOperation:t}),(0,f.Y)(n5.UC,{children:(0,f.Y)(bQ,{activeFile:n})})]})}var b5=t(50081),b3=(0,V.x)({badge:[j.wp.backgroundColor.backgroundHighest,j.wp.borderRadius(4),{padding:"0 0.35em"}],header:[j.wp.flex.grow(1),j.wp.pr(16),j.wp.height(24)],result:[j.wp.borderRadius(4),j.wp.overflow("hidden")]});function b6(e){var n=e.isActive,t=e.performPaneOperation,r=(0,v._)((0,w.useState)({}),2),i=r[0],o=r[1],a=(0,G.t3)(),l=(0,tr.gB)(),s=(0,w.useCallback)(function(){var e=!0,n=!1,t=void 0;try{for(var r,i=a()[Symbol.iterator]();!(e=(r=i.next()).done);e=!0)!function(){var e,n=r.value;if("codeEditor"!==n[1].type)return;var t=l(n[0]);if(t&&"codeEditor"===t.type){var i=n[1].data.path,a=null==(e=t.fetchProblems)?void 0:e.call(t);i&&a&&o(function(e){return(0,nt._)((0,ee._)({},e),(0,g._)({},i,a))})}}()}catch(e){n=!0,t=e}finally{try{e||null==i.return||i.return()}finally{if(n)throw t}}},[l,a]);return((0,w.useEffect)(function(){n&&s()},[n,s]),(0,tr.Qt)(function(){return{type:"problems",updateProblems:function(e,n){o(function(t){return(0,nt._)((0,ee._)({},t),(0,g._)({},e,n))})}}},[o]),Object.values(i).some(function(e){return e.length>0}))?(0,f.Y)(L.S,{p:8,gap:8,children:Object.keys(i).map(function(e){return 0===i[e].length?null:(0,f.Y)(eu.ui,{elevated:!0,css:b3.result,children:(0,f.Y)(D.A,{chevron:"end",defaultExpanded:!0,headerContent:(0,f.FD)(L.S,{css:b3.header,py:4,justify:"space-between",row:!0,gap:8,align:"center",children:[(0,f.FD)(L.S,{row:!0,gap:8,align:"center",children:[(0,f.Y)(ti.A,{path:e}),(0,f.Y)(T.EY,{children:e})]}),(0,f.Y)(L.S,{css:b3.badge,children:i[e].length>99?"99+":i[e].length})]}),children:(0,f.Y)(L.S,{px:6,py:6,children:i[e].map(function(n,r){var i=n.range.start.line+1,o=n.range.start.character;return(0,f.Y)(b5.A,{problem:n,onClick:function(){t({operation:"open",pane:{type:"codeEditor",data:{path:e,line:i,col:o}},secondary:!0})}},"".concat(i,"-").concat(o,"-").concat(r))})})},e)},e)})}):(0,f.Y)(md.A,{pane:{type:"problems"},maxWidth:450,bodyText:"No problems found in your workspace \uD83C\uDF89"})}function b8(e){return(0,f.Y)(n0.Ay,(0,nt._)((0,ee._)({},e),{children:(0,f.Y)("path",{fillRule:"evenodd",d:"M5 3.75A1.25 1.25 0 0 0 3.75 5v14.19l2.72-2.72a.75.75 0 0 1 .53-.22h12A1.25 1.25 0 0 0 20.25 15V5A1.25 1.25 0 0 0 19 3.75H5Zm-1.945-.695A2.75 2.75 0 0 1 5 2.25h14A2.75 2.75 0 0 1 21.75 5v10A2.75 2.75 0 0 1 19 17.75H7.31l-3.78 3.78A.75.75 0 0 1 2.25 21V5c0-.73.29-1.429.805-1.945Zm7.225 4.496a.75.75 0 0 1-.153 1.05L8.254 10l1.873 1.399a.75.75 0 1 1-.897 1.202l-2.679-2a.75.75 0 0 1 0-1.202l2.679-2a.75.75 0 0 1 1.05.152Zm3.44 0a.75.75 0 0 1 1.05-.152l2.679 2a.75.75 0 0 1 0 1.202l-2.679 2a.75.75 0 1 1-.897-1.202L15.746 10l-1.873-1.399a.75.75 0 0 1-.152-1.05Z",clipRule:"evenodd"})}))}var b7=h.ZU.Object({type:h.ZU.Literal("problems")}),b9={Content:function(e){var n=e.options,t=n.isActive,r=n.performPaneOperation;return(0,f.Y)(b6,{isActive:t,performPaneOperation:r})},Icon:function(e){var n=e.size;return(0,f.Y)(b8,{size:n})},getTitle:function(){return"Problems"},description:"View problems in your code detected by static analysis tools like type checkers and linters",category:nQ.bY.WorkspaceFeatures,decode:function(e){return m.T(b7,e)}},Se=t(42890);function Sn(){var e=(0,en._)(["\n  fragment ProjectMergeSectionRepl on Repl {\n    id\n    title\n  }\n"]);return Sn=function(){return e},e}function St(){var e=(0,en._)(["\n  fragment ProjectMergeSectionCurrentUser on CurrentUser {\n    id\n  }\n"]);return St=function(){return e},e}var Sr=(0,et.J1)(Sn()),Si=(0,et.J1)(St());function So(){var e=(0,en._)(["\n  fragment ReplToReplMergeOrg on Org {\n    id\n    slug\n  }\n"]);return So=function(){return e},e}function Sa(){var e=(0,en._)(["\n  fragment ReplMergeRelatedRepl on Repl {\n    id\n    url\n    nextPagePathname\n    ...ReplSelectorRepl\n  }\n  ","\n"]);return Sa=function(){return e},e}function Sl(){var e=(0,en._)(["\n  fragment ReplToReplMergeProject on Project {\n    id\n    mainRepl {\n      id\n      ...ReplMergeRelatedRepl\n    }\n  }\n  ","\n"]);return Sl=function(){return e},e}function Ss(){var e=(0,en._)(["\n  fragment ReplToReplMergeCurrentRepl on Repl {\n    id\n    ...ProjectMergeSectionRepl\n  }\n  ","\n"]);return Ss=function(){return e},e}function Sc(){var e=(0,en._)(["\n  query ReplToReplMergeGetRelatedRepls($id: String!) {\n    repl(id: $id) {\n      __typename\n      ... on Repl {\n        id\n        project {\n          id\n          repls {\n            items {\n              ...ReplMergeRelatedRepl\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return Sc=function(){return e},e}var Su=(0,et.J1)(So()),Sd=(0,et.J1)(Sa(),Se.a$),Sp=(0,et.J1)(Sl(),Sd),Sf=(0,et.J1)(Ss(),Sr);function Sh(){var e=(0,en._)(["\n  query ProjectPane($id: String!) {\n    repl(id: $id) {\n      __typename\n      ... on Repl {\n        id\n        ...ReplToReplMergeCurrentRepl\n        project {\n          ...ReplToReplMergeProject\n          org {\n            ...ReplToReplMergeOrg\n          }\n        }\n      }\n    }\n    currentUser {\n      ...ProjectMergeSectionCurrentUser\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return Sh=function(){return e},e}Sc();var Sm={},Sg=(0,et.J1)(Sh(),Sf,Sp,Su,Si),Sv=t(25997),Sw=t(6868),Sy=function(){var e=(0,v._)((0,w.useReducer)(function(){return Math.random()},Math.random()),2);return[e[0],e[1]]},Sb=function(e){var n,t=e.ours,r=e.theirs,i=(0,v._)(Sy(),2),o=i[0],a=i[1],l=(0,t9.A)((n=(0,y._)(function(e){var n,i,o,a,l,s,c;return(0,b.YH)(this,function(u){switch(u.label){case 0:return[4,Promise.all([e.log({max:100,revRange:t}),null!==r?e.log({max:100,revRange:"".concat(t,"..").concat(r)}):null,null!==r?e.log({max:100,revRange:"".concat(r,"..").concat(t)}):null])];case 1:if(n=u.sent(),o=(i=(0,v._)(n,3))[0],a=i[1],l=i[2],o.error)return[2,o];if(null==a?void 0:a.error)return[2,a];if(null==l?void 0:l.error)return[2,l];return[2,{error:null,both:o.commits,theirs:null!=(s=null==a?void 0:a.commits)?s:[],ours:null!=(c=null==l?void 0:l.commits)?c:[]}]}})}),function(e){return n.apply(this,arguments)}),[t,r,o]);return[(0,w.useMemo)(function(){return null===l?{error:null}:l.error?l:{error:null,both:pr(l.both,l.theirs,l.ours),theirs:l.theirs,ours:l.ours}},[l]),a]},SS=function(){var e,n=(0,A.A)().git,t=(0,v._)((0,w.useState)({loading:!1,error:null}),2),r=t[0],i=t[1];return[(0,w.useCallback)((e=(0,y._)(function(e){var t,r,o,a,l;return(0,b.YH)(this,function(s){switch(s.label){case 0:return t=e.remote,r=e.branch,a=void 0!==(o=e.allowConflicts)&&o,i({loading:!0,error:null}),[4,n.pull({mode:t8.Xo.MERGE,allowConflicts:a,experimental_override_remote:{name:t,branch:r}})];case 1:return(l=s.sent()).error?i({loading:!1,error:l.error}):(i({loading:!1,error:null}),n.forceRefresh()),[2]}})}),function(n){return e.apply(this,arguments)}),[n]),r]},SY=function(e){var n,t,r,i,o,a,l,s,c,u,d,p,f,h,m,g,S,Y,A,x,C,_=e.selectedReplId,k=(n=null!=_?_:null,(r=(0,t9.A)((t=(0,y._)(function(e){var t;return(0,b.YH)(this,function(r){switch(r.label){case 0:if(!n)return[2,{hasStarted:!1,error:null,remote:null}];return[4,d7({git:e,replId:n})];case 1:if((t=r.sent()).error)return[2,{hasStarted:!0,error:t.error}];return[2,{hasStarted:!0,error:null,remote:t.remote}]}})}),function(e){return t.apply(this,arguments)}),[n]))&&r.hasStarted?r.error?{state:"Error",error:r.error}:{state:"Success",error:null,remote:r.remote}:{state:"Loading",error:null}),D=(0,v._)(SS(),2),E=D[0],R=D[1],I=(0,v._)((o=(i=(0,v._)(Sy(),2))[0],a=i[1],[(0,t9.A)((l=(0,y._)(function(e){var n;return(0,b.YH)(this,function(t){switch(t.label){case 0:return[4,e.getRepositoryState()];case 1:return(n=t.sent()).error,[2,n]}})}),function(e){return l.apply(this,arguments)}),[o]),a]),2),F=I[0],T=I[1],P=(0,v._)((c=(s=(0,v._)(Sy(),2))[0],u=s[1],[(0,t9.A)((d=(0,y._)(function(e){var n;return(0,b.YH)(this,function(t){switch(t.label){case 0:return[4,e.status()];case 1:return(n=t.sent()).error,[2,n]}})}),function(e){return d.apply(this,arguments)}),[c]),u]),1)[0],L=(0,v._)(Sb({ours:"main",theirs:_?d8({replId:_,branch:"main"}):null}),2),U=L[0],N=L[1],O=(0,v._)((f=(p={remoteName:_?d6(_):null,onCompleted:function(){T(),N()}}).remoteName,h=p.onCompleted,g=(m=(0,v._)((0,w.useState)(!1),2))[0],S=m[1],A=(Y=(0,v._)(Sy(),2))[0],x=Y[1],(0,t9.A)((C=(0,y._)(function(e){var n;return(0,b.YH)(this,function(t){switch(t.label){case 0:if(!f)return[2,{error:null}];return S(!0),[4,e.fetch({remote:f})];case 1:return n=t.sent(),S(!1),null==n.error&&h(),[2,n]}})}),function(e){return C.apply(this,arguments)}),[f,A]),[g,x]),2);return{state:F,status:P,commits:U,isFetching:O[0],refetch:O[1],remote:k,pull:{state:R,doPull:function(e){"Success"===k.state&&E((0,nt._)((0,ee._)({},e),{remote:k.remote.name}))}}}},SA=(0,w.createContext)(null);function Sx(){var e=(0,w.useContext)(SA);if(null===e)throw Error("useProjectGitState must be used inside a ProjectGitStateProvider");return e}var SC=t(13692);function S_(){var e=(0,en._)(["\n  fragment ProjectReplsComboBoxRepl on Repl {\n    id\n    ...ReplMergeRelatedRepl\n  }\n  ","\n"]);return S_=function(){return e},e}function Sk(){var e=(0,en._)(["\n  query ProjectReplsComboBox($id: String!, $replsInput: ProjectReplsInput!) {\n    repl(id: $id) {\n      __typename\n      ... on Repl {\n        id\n        project {\n          id\n          mainRepl {\n            ...ProjectReplsComboBoxRepl\n          }\n          repls(input: $replsInput) {\n            items {\n              ...ProjectReplsComboBoxRepl\n            }\n            pageInfo {\n              nextCursor\n              hasNextPage\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return Sk=function(){return e},e}var SD={},SE=(0,et.J1)(S_(),Sd),SR=(0,et.J1)(Sk(),SE),SI=t(39101),SF=t(31342),ST=(0,V.x)({replSelector:[j.wp.minWidth(300)],item:[j.wp.display.grid,j.wp.overflow("hidden"),{gap:4,gridAutoRows:"min-content",gridAutoFlow:"row",whiteSpace:"nowrap",textOverflow:"ellipsis"}]}),SP={username:"Unknown User",image:""},SL=function(e){var n,t,r,i=e.replId,o=e.onSelect,a=e.selectedReplId,l=(0,tg._)(e,["replId","onSelect","selectedReplId"]),s=(0,v._)((0,w.useState)(""),2),c=s[0],u=s[1],d=(0,SI.A)(c,250),p=(0,nN.A)().showError,h=(0,v._)((0,w.useState)({options:[],mainRepl:null,nextCursor:null}),2),m=h[0],g=h[1],S=(n={variables:{id:i,replsInput:{count:10,filters:{title:{search:d}}}},ssr:!1,fetchPolicy:"cache-and-network",notifyOnNetworkStatusChange:!0,onCompleted:function(e){var n,t,r,i=e&&"Repl"===e.repl.__typename&&(null==(n=e.repl.project)?void 0:n.__typename)==="Project"?e.repl.project:null,o=(null==i?void 0:i.repls.__typename)==="ReplConnection"?i.repls:null;i&&o||p("Something went wrong loading Apps - please try again."),g({mainRepl:null!=(t=null==i?void 0:i.mainRepl)?t:null,nextCursor:(null==o?void 0:o.pageInfo.hasNextPage)&&o.pageInfo.nextCursor?o.pageInfo.nextCursor:null,options:null!=(r=null==o?void 0:o.items)?r:[]})}},t=(0,ee._)({},SD,n),er.I(SR,t)),Y=S.loading,A=S.refetch,x=S.networkStatus,C=(r=(0,y._)(function(){var e,n,t,r,o,a;return(0,b.YH)(this,function(l){switch(l.label){case 0:if(!(m.nextCursor&&x!==SC.p.fetchMore))return[3,2];return n=m.options,[4,A({id:i,replsInput:{count:10,filters:{title:{search:d}},cursor:m.nextCursor}})];case 1:(r=(t=l.sent())&&"Repl"===t.data.repl.__typename&&(null==(e=t.data.repl.project)?void 0:e.__typename)==="Project"&&"ReplConnection"===t.data.repl.project.repls.__typename?t.data.repl.project.repls:null)||p("Something went wrong loading Apps - please try again."),a=null!=(o=null==r?void 0:r.items)?o:[],g((0,nt._)((0,ee._)({},m),{nextCursor:(null==r?void 0:r.pageInfo.hasNextPage)&&r.pageInfo.nextCursor?r.pageInfo.nextCursor:null,options:n.concat(a)})),l.label=2;case 2:return[2]}})}),function(){return r.apply(this,arguments)}),_=(0,pv.A)(function(){var e=m.mainRepl,n=m.options.filter(function(e){return e.id!==i});return""===d&&e&&e.id!==i?[e].concat((0,X._)(n.filter(function(n){return n.id!==e.id}))):n},[m,i,d]),k=(0,v._)((0,w.useState)(!1),2),D=k[0],E=k[1];(0,w.useEffect)(function(){if(!D){var e=_.find(function(e){return e.id===a});e&&(E(!0),""===c&&u(e.title))}},[D,c,a,_]);var F=(0,e0.A)(o),P=(0,w.useCallback)(function(e){var n=_.find(function(n){return n.id===e});n&&(F.current(n),u(n.title))},[_,F]);return(0,f.Y)(SF.a,(0,nt._)((0,ee._)({menuTrigger:"focus",inputValue:c,onInputChange:function(e){u(e)},onSelectionChange:P,items:_,selectedKey:a,css:ST.replSelector,isLoading:Y,allowsEmptyCollection:!0,onLoadMore:C,emptyMessage:"No Apps found",maxHeight:200},l),{children:function(e){var n,t,r,i;return(0,f.FD)(R.if,{textValue:e.title,children:[(0,f.Y)(hU.e,{src:null!=(r=null==(n=e.owner)?void 0:n.image)?r:SP.image,username:null!=(i=null==(t=e.owner)?void 0:t.username)?i:SP.username,size:24}),(0,f.FD)(L.S,{css:ST.item,children:[(0,f.Y)(T.EY,{children:e.title}),(0,f.FD)(L.S,{row:!0,gap:8,align:"center",children:[(0,f.Y)(T.EY,{children:e.owner?"@".concat(e.owner.username):""}),m.mainRepl&&m.mainRepl.id===e.id?(0,f.Y)(I.a,{text:"Main Repl",variant:"filled"}):null]})]})]})}}))},SU=t(40973),SN=t(64254).hp,SO=[{"& > span:first-child-of-type":[j.wp.flex.grow(1),j.wp.textAlign.left]},{"& > span":[j.wp.flex.shrink(1)]},j.wp.height("auto"),j.wp.p(8),j.wp.fontWeight.medium,j.wp.backgroundColor.backgroundHigher,j.wp.flex.row,j.wp.align.center,j.wp.justify.spaceBetween,j.wp.overflow("hidden"),j.wp.cursor.pointer],SM=(0,V.x)({buttonFolded:[SO,j.wp.borderRadius(8)],buttonUnfolded:[SO,j.wp.borderRadius(8,8,0,0)],rowContainer:[j.wp.position.relative,j.wp.zIndex(1),j.wp.overflow("hidden")],diffContainer:[j.wp.flex.grow(1),j.wp.borderRadius(8)],bodyContainer:[j.wp.borderRadius(0,0,8,8),j.wp.p(8),j.wp.display.flex,j.wp.flex.row,j.wp.flex.wrap,j.wp.align.center,j.wp.justify.center,j.wp.backgroundColor.backgroundDefault,j.wp.border({color:k.LU.outlineDimmer,direction:"bottom"}),j.wp.border({color:k.LU.outlineDimmer,direction:"left"}),j.wp.border({color:k.LU.outlineDimmer,direction:"right"})],noChangesContainer:[j.wp.py(8),j.wp.px(8),j.wp.center,j.wp.width("100%")],innerContainer:[j.wp.display.flex,j.wp.align.center],splitContainer:[j.wp.display.flex,j.wp.flex.row,j.wp.justify.spaceBetween,j.wp.maxWidth("100%"),j.wp.align.center],splitChild:[{flexBasis:"50%"}]}),SB=function(e){var n=e.folded,t=void 0!==n&&n,r=e.setFolded,i=e.diff,o="".concat(i.initial.path,"/").concat(i.initial.filename),a="".concat(i.final.path,"/").concat(i.final.filename);return(0,f.FD)(L.S,{css:t?SM.buttonFolded:SM.buttonUnfolded,onClick:function(){return r(!t)},children:[(0,f.FD)(L.S,{css:[SM.rowContainer,j.wp.flex.shrink(1)],align:"center",row:!0,gap:8,children:["RENAMED"===i.status||"COPIED"===i.status?(0,f.FD)(f.FK,{children:[(0,f.Y)(ti.A,{path:o}),(0,f.Y)(T.EY,{multiline:!1,children:i.initial.filename}),""===i.initial.path?null:(0,f.Y)(T.EY,{multiline:!1,color:"dimmest",css:[j.wp.fontWeight.normal],maxLines:1,children:i.initial.path}),(0,f.Y)(rb.A,{}),(0,f.Y)(ti.A,{path:a}),(0,f.Y)(T.EY,{multiline:!1,children:i.final.filename}),""===i.final.path?null:(0,f.Y)(T.EY,{multiline:!1,color:"dimmest",css:[j.wp.fontWeight.normal],children:i.final.path})]}):(0,f.FD)(f.FK,{children:[(0,f.Y)(ti.A,{path:a}),(0,f.Y)(T.EY,{multiline:!1,children:i.final.filename}),""===i.final.path?null:(0,f.Y)(T.EY,{multiline:!1,color:"dimmest",css:[j.wp.fontWeight.normal],children:i.final.path})]}),(0,f.Y)(E.r,{textToCopy:a,tooltipText:"Copy Full Path",tooltipPlacement:"bottom-end"})]}),(0,f.FD)(L.S,{css:SM.rowContainer,align:"center",row:!0,gap:8,children:[(0,f.Y)(rv,{type:i.status}),(0,f.Y)(eY.K0,{alt:t?"Collapse diff":"Expand diff",onClick:function(){return r(!t)},children:t?(0,f.Y)(rS.A,{}):(0,f.Y)(rY.A,{})})]})]})},SH=function(e){var n=e.diff,t=e.splitOrUnified,r=e.extensions;return"Split"===t?(0,f.Y)(rf,{a:{filePath:n.initial.filename,doc:n.initial.content},b:{filePath:n.final.filename,doc:n.final.content,extensions:r},collapseUnchanged:{},style:{width:"100%"}}):(0,f.Y)(ns.Ay,{filePath:n.final.filename,initialDoc:n.final.content,extensions:[ri.X.of(ni.EY.of(n.initial.content.split("\n")))],readOnly:!0,style:{width:"100%"}})},Sz=function(e){return(0,tt.FN)(e)?"media":(0,tt.m6)(e)?"ot":"binary"},SW=function(e){var n=e.content,t=e.type,r=e.filename,i=e.extensions;switch(t){case"media":return(0,f.Y)(L.S,{css:[{display:"flex",height:"100%"}],children:(0,f.Y)(rw.jM,{src:(0,rw.p4)(n,(0,tt.P7)(r)),fileName:r,mime:(0,tt.P7)(r)})});case"ot":return(0,f.Y)(ns.Ay,{filePath:r,initialDoc:n,readOnly:!0,style:{width:"100%"},extensions:i});default:return(0,f.Y)(T.EY,{color:"dimmest",multiline:!1,children:"This binary file has changed."})}},SG=function(e){var n=e.diff,t=e.splitOrUnified,r=e.extensions;if(n.initial.content===n.final.content)return(0,f.Y)(L.S,{css:SM.noChangesContainer,children:(0,f.Y)(T.EY,{color:"dimmest",multiline:!1,children:"There are no changes to show."})});if("DELETED"===n.status)return(0,f.Y)(L.S,{css:SM.noChangesContainer,children:(0,f.Y)(T.EY,{color:"dimmest",multiline:!1,children:"This file has been deleted."})});var i=(0,SU.A)(SN.from(n.initial.content))?"binary":Sz(n.initial.filename),o=(0,SU.A)(SN.from(n.final.content))?"binary":Sz(n.final.filename);if("binary"===i||"binary"===o)return(0,f.Y)(L.S,{css:SM.noChangesContainer,children:(0,f.Y)(T.EY,{color:"dimmest",multiline:!1,children:"This binary file has changed."})});if("ADDED"===n.status)switch(o){case"media":return(0,f.Y)(L.S,{css:SM.noChangesContainer,children:(0,f.Y)(L.S,{css:SM.innerContainer,children:(0,f.Y)(rw.jM,{src:(0,rw.p4)(n.final.content,(0,tt.P7)(n.final.filename)),fileName:n.final.filename,mime:(0,tt.P7)(n.final.filename)})})});case"ot":return(0,f.Y)(L.S,{css:SM.noChangesContainer,children:(0,f.Y)(ns.Ay,{filePath:n.final.filename,initialDoc:n.final.content,readOnly:!0,style:{width:"100%"},extensions:r})});default:return(0,f.Y)(L.S,{css:SM.noChangesContainer,children:(0,f.Y)(T.EY,{color:"dimmest",multiline:!1,children:"This binary file has been added."})})}return"ot"===i&&"ot"===o?(0,f.Y)(SH,{diff:n,splitOrUnified:t,extensions:r}):(0,f.FD)(L.S,{css:SM.splitContainer,p:8,children:[(0,f.Y)(L.S,{css:SM.splitChild,align:"center",justify:"center",children:(0,f.Y)(SW,{content:n.initial.content,type:i,filename:n.initial.filename,extensions:r})}),(0,f.Y)(L.S,{css:SM.splitChild,children:(0,f.Y)(SW,{content:n.final.content,type:o,filename:n.final.filename,extensions:r})})]})},SV=function(e){var n,t=e.diff,r=e.fetchDiffFileContents,i=e.splitOrUnified,o=(0,v._)((0,w.useState)({expanded:!1,loading:!1,content:null,error:null}),2),a=o[0],l=o[1],s=(n=(0,y._)(function(e){var n;return(0,b.YH)(this,function(i){switch(i.label){case 0:if(l((0,nt._)((0,ee._)({},a),{expanded:!e,loading:null==a.content})),e)return[3,2];return[4,r(t)];case 1:n=i.sent(),l(function(e){return(0,nt._)((0,ee._)({},e),{loading:!1,error:n.error?n.error:null,content:null==n.error?{initial:n.content.base,final:n.content.head}:null})}),i.label=2;case 2:return[2]}})}),function(e){return n.apply(this,arguments)});return(0,f.FD)(L.S,{css:SM.diffContainer,children:[(0,f.Y)(SB,{folded:!a.expanded,setFolded:s,diff:t}),a.expanded?(0,f.FD)(eu.ui,{css:SM.bodyContainer,elevated:!0,children:[a.error?(0,f.Y)(iI.N,{colorway:"negative",icon:(0,f.Y)(iF.A,{}),text:a.error}):null,a.loading?(0,f.Y)(L.S,{p:8,children:(0,f.Y)(to.A,{})}):null,a.content?(0,f.Y)(SG,{diff:(0,nt._)((0,ee._)({},t),{initial:(0,nt._)((0,ee._)({},t.initial),{content:a.content.initial}),final:(0,nt._)((0,ee._)({},t.final),{content:a.content.final})}),splitOrUnified:i}):null]}):null]},t.id)},Sj=function(e){return e.Git="Git",e.Fs="Fs",e}({});function SZ(){return(SZ=(0,y._)(function(e){var n,t;return(0,b.YH)(this,function(r){switch(r.label){case 0:return n=e.path,[4,e.fs.readFile(n,{fromDisk:!0})];case 1:if((t=r.sent()).error)return[2,{content:null,error:t.error}];return[2,{content:t.content.toString("utf8"),error:null}]}})})).apply(this,arguments)}function Sq(e){return SK.apply(this,arguments)}function SK(){return(SK=(0,y._)(function(e){var n,t,r;return(0,b.YH)(this,function(i){switch(i.label){case 0:if(n=e.file,t=e.fs,r=e.git,"Fs"!==n.type)return[3,2];return[4,function(e){return SZ.apply(this,arguments)}({path:n.path,fs:t})];case 1:case 3:return[2,i.sent()];case 2:return[4,r.getFileContents({path:n.path,revision:n.revision,convertToBase64:(0,tt.FN)(n.path)})]}})})).apply(this,arguments)}function S$(e){return SJ.apply(this,arguments)}function SJ(){return(SJ=(0,y._)(function(e){var n,t,r,i,o,a,l,s,c,u,d;return(0,b.YH)(this,function(p){switch(p.label){case 0:return n=e.fs,t=e.git,r=e.base,i=e.head,s=Promise.all,[4,Sq({git:t,fs:n,file:i})];case 1:return c=[p.sent()],[4,Sq({git:t,fs:n,file:r})];case 2:return[4,s.apply(Promise,[c.concat([p.sent()])])];case 3:if(a=(o=v._.apply(void 0,[p.sent(),2]))[0],(l=o[1]).error)return[2,{error:"fetchFileContentsForDiff could not fetch base file from ".concat(r.type," for ").concat(r.path),content:null}];if(a.error)return[2,{error:"fetchFileContentsForDiff could not fetch base file from ".concat(i.type," for ").concat(i.path),content:null}];return[2,{error:null,content:{base:null!=(u=l.content)?u:"",head:null!=(d=a.content)?d:""}}]}})})).apply(this,arguments)}var SQ={z:!0,findCopies:!0,findCopiesHarder:!0,findRenames:!0,nameStatus:!0},SX={z:"-z",findCopies:"--find-copies",findCopiesHarder:"--find-copies-harder",findRenames:"--find-renames",nameStatus:"--name-status"};function S0(e){switch(e){case t8.PX.UNMODIFIED:return null;case t8.PX.MODIFIED:return t8.Os.MODIFIED;case t8.PX.TYPE_CHANGED:return t8.Os.TYPE_CHANGED;case t8.PX.DELETED:return t8.Os.DELETED;case t8.PX.RENAMED:return t8.Os.RENAMED;case t8.PX.COPIED:return t8.Os.COPIED;case t8.PX.UNTRACKED:case t8.PX.UNMERGED:case t8.PX.ADDED:return t8.Os.ADDED;default:(0,ar.A)(e)}}var S1=function(e,n){return""===e?n:"".concat(e,"/").concat(n)};function S2(e,n){return n.filter(function(n){var t="".concat(n.final.path,"/").concat(n.final.filename),r="".concat(n.initial.path,"/").concat(n.initial.filename);return t.toLowerCase().includes(e.toLowerCase())||r.toLowerCase().includes(e.toLowerCase())})}function S4(e){var n=e.children,t=e.headerContent;return(0,f.FD)(L.S,{gap:16,children:[(0,f.FD)(L.S,{row:!0,gap:8,align:"center",justify:"space-between",children:[(0,f.Y)(T.Y9,{level:2,variant:"subheadDefault",children:"Changed Files"}),t]}),n]})}function S5(e){var n,t,r,i,o,a,l,s,c,u=(0,A.A)(),d=u.fs,p=u.git,h=(0,v._)((0,w.useState)(""),2),m=h[0],g=h[1],S=(0,v._)((0,w.useState)("Split"),2),Y=S[0],x=S[1],C=(n={type:"revisionToRevisionDiff",head:e.head,base:e.base},t=(0,nt._)((0,ee._)({},n),{flags:(0,nt._)((0,ee._)({},SQ),{nameStatus:!0})}),i=(0,t9.A)((r=(0,y._)(function(e){var n,r;return(0,b.YH)(this,function(i){switch(i.label){case 0:return n=function(e){var n,t=e.base,r=null!=(n=e.flags)?n:SQ,i=["git","diff"];switch(Object.keys(r).forEach(function(e){SX[e]&&i.push(SX[e])}),e.type){case"revisionToRevisionDiff":i.push("".concat(t,"...").concat(e.head));break;case"revisionToIndexDiff":i.push("--staged",t);break;default:(0,ar.A)(e)}return i}(t),[4,e.escapeHatchGitExecRead(n.join(" "),{serviceMethod:"useGitDiff"})];case 1:if((r=i.sent()).error||null===r.output)return[2,{error:t8.uA.UNKNOWN}];return[2,{diff:r.output,error:null}]}})}),function(e){return r.apply(this,arguments)})),o=(0,pv.A)(function(){return null==i?{loading:!0,error:null,data:null}:i.error?{loading:!1,error:i.error,data:null}:{loading:!1,error:null,data:i.diff}},[i]),(0,pv.A)(function(){if(null==o||o.loading)return{loading:!0,error:null,data:null};if(o.error)return{loading:!1,error:o.error,data:null};var e,n=null!=(e=o.data)?e:"",t=(0,t8.By)(n),r=(0,t8.GM)(n);return{loading:!1,error:null,data:Array.from(new Set((0,X._)(t).concat((0,X._)(r)))).filter(function(e){return["DELETED","ADDED","MODIFIED","COPIED","RENAMED","TYPE_CHANGED"].includes(e.type)}).map(function(e){var n,t;return{id:(0,nU.A)(),status:e.type,initial:{filename:(0,tt.WP)(null!=(n=e.originalPath)?n:e.path),path:(0,tt._6)(null!=(t=e.originalPath)?t:e.path)},final:{filename:(0,tt.WP)(e.path),path:(0,tt._6)(e.path)}}})}},[o])),_=(0,pv.A)(function(){var e;return S2(m,null!=(e=C.data)?e:[])},[m,C]),k=(a=(0,y._)(function(n){return(0,b.YH)(this,function(t){switch(t.label){case 0:return[4,S$({git:p,fs:d,base:{type:Sj.Git,revision:e.base,path:S1(n.initial.path,n.initial.filename)},head:{type:Sj.Git,revision:e.head,path:S1(n.final.path,n.final.filename)}})];case 1:return[2,t.sent()]}})}),function(e){return a.apply(this,arguments)}),D=(l=Sx().status,s=(0,pv.A)(function(){return l&&null==l.error?l.changes:[]},[l]),(0,pv.A)(function(){return s.map(function(e){var n,t,r,i,o=null!=(r=null!=(t=S0(e.type.worktree))?t:S0(e.type.index))?r:t8.Os.UNKNOWN,a=null!=(i=null==(n=e.source)?void 0:n.path)?i:e.path;return{id:(0,nU.A)(),status:o,initial:{filename:(0,tt.WP)(a),path:(0,tt._6)(a)},final:{filename:(0,tt.WP)(e.path),path:(0,tt._6)(e.path)}}})},[s])),E=(0,pv.A)(function(){return S2(m,D)},[m,D]),R=(c=(0,y._)(function(e){return(0,b.YH)(this,function(n){switch(n.label){case 0:return[4,S$({git:p,fs:d,base:{type:Sj.Git,revision:"HEAD",path:S1(e.initial.path,e.initial.filename)},head:{type:Sj.Fs,path:S1(e.final.path,e.final.filename)}})];case 1:return[2,n.sent()]}})}),function(e){return c.apply(this,arguments)});return C.loading?(0,f.Y)(S4,{children:(0,f.Y)(to.A,{})}):C.error||null==C.data?(0,f.Y)(S4,{children:(0,f.Y)(T.EY,{children:"Something went wrong. Please try another Repl."})}):0===C.data.length&&0===D.length?(0,f.Y)(S4,{children:(0,f.FD)(L.S,{row:!0,gap:4,align:"center",children:[(0,f.Y)(aw.A,{}),(0,f.Y)(T.EY,{children:"No changes to merge"})]})}):(0,f.Y)(S4,{headerContent:(0,f.FD)(L.S,{row:!0,gap:8,children:[(0,f.Y)(rC,{value:Y,onChange:x}),(0,f.Y)(dI.I,{value:m,onChange:function(e){g(e.target.value)},onClear:function(){g("")},loading:!1,placeholder:"Filter changed files"})]}),children:(0,f.FD)(L.S,{gap:12,children:[E.length?(0,f.FD)(L.S,{gap:8,children:[(0,f.Y)(T.Y9,{level:3,variant:"text",color:"dimmer",children:"Uncommitted Changes"}),E.map(function(e){return(0,f.Y)(SV,{diff:e,splitOrUnified:Y,fetchDiffFileContents:R},e.id)})]}):null,_.length?(0,f.FD)(L.S,{gap:8,children:[(0,f.Y)(T.Y9,{level:3,variant:"text",color:"dimmer",children:"Committed Changes"}),_.map(function(e){return(0,f.Y)(SV,{diff:e,splitOrUnified:Y,fetchDiffFileContents:k},e.id)})]}):null]})})}var S3=function(e){var n=e.selectedRepl,t=e.isMainRepl,r=d8({replId:n.id,branch:"main"}),i="HEAD";return(0,f.Y)(S5,{base:t?i:r,head:t?r:i})};function S6(){var e=(0,v._)((0,w.useState)(!1),2),n=e[0],t=e[1],r=(0,A.A)().fs;return(0,w.useEffect)(function(){var e=!1,n=r.watchPathStat(".gitignore",{onNewStat:function(n){e||t(!n.exists)},onError:function(){}});return function(){e=!0,n()}},[r]),n?(0,f.Y)(iI.N,{icon:(0,f.Y)(tI.A,{}),text:(0,f.FD)(T.EY,{children:["This project does not have a .gitignore file. It is recommended that all projects have a .gitignore file. You can find templates for .gitignore files for different languages"," ",(0,f.Y)("a",{href:"https://github.com/github/gitignore",target:"_blank",rel:"noopener noreferrer",children:"here"}),"."]})}):null}var S8=t(74108);function S7(e){var n,t=e.selectedRepl,r=(0,t9.A)((n=(0,y._)(function(e){var n;return(0,b.YH)(this,function(t){switch(t.label){case 0:return[4,e.getRepositoryState()];case 1:if((n=t.sent()).error)return[2,{error:null,message:"Something went wrong, this Repl's git state could not be read. Please make sure there is still a .git folder."}];if(n.state!==t8.Gi.CLEAN)return[2,{error:null,message:"This Repl has uncommitted changes. This will prevent any merges. Please undo or commit your changes before leaving the Repl."}];return[2,{error:null,message:null}]}})}),function(e){return n.apply(this,arguments)})),i=null==r?void 0:r.message;return(0,f.FD)(L.S,{gap:12,children:[(0,f.Y)(T.Y9,{level:2,variant:"subheadDefault",children:"Main Repl"}),(0,f.FD)(T.EY,{children:["You are in the main Repl for the project. If you want to merge in changes, head to"," ",t?(0,f.Y)(yU(),(0,nt._)((0,ee._)({target:"_blank"},(0,S8.q1)(t,{initialPaneType:"project"})),{children:t.title})):"a fork","."]}),i?(0,f.Y)(iI.N,{icon:(0,f.Y)(tI.A,{}),colorway:"negative",text:i}):null]})}var S9=t(10101),Ye=t(66112);function Yn(){var e=(0,en._)(["\n  query PushToRemoteRepl($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        title\n        ...CrosisContextRepl\n      }\n    }\n    currentUser {\n      id\n      ...CrosisContextCurrentUser\n    }\n  }\n  ","\n  ","\n"]);return Yn=function(){return e},e}var Yt={},Yr=(0,et.J1)(Yn(),Ye.c,Ye.N),Yi=t(69549),Yo=t(70079),Ya=t(62356),Yl=t(5751);function Ys(){return(Ys=(0,y._)(function(e){var n,t,r;return(0,b.YH)(this,function(i){switch(i.label){case 0:return n=e.git,t=e.commitMessage,[4,n.stageFiles({all:!0})];case 1:if(i.sent().error)return[2,{success:!1,error:"Could not commit your changes"}];return[4,n.getRepositoryState()];case 2:if((r=i.sent()).error)return[2,{success:!1,error:"Could not commit your changes"}];if(r.state!==t8.Gi.DIRTY_INDEX)return[3,4];return[4,n.commit({message:t})];case 3:if(i.sent().error)return[2,{success:!1,error:"Could not commit your changes"}];i.label=4;case 4:return[2,{success:!0,error:null}]}})})).apply(this,arguments)}var Yc=(0,V.x)({infoIcon:[j.wp.color.foregroundDimmer,{marginTop:3}],infoMessage:{flex:1}}),Yu=function(e){return e.CannotMerge="CannotMerge",e.NothingToMerge="NothingToMerge",e.OnlyUncommittedChanges="OnlyUncommittedChanges",e.UncommittedAndCommittedChanges="UncommittedAndCommittedChanges",e.OnlyCommittedChanges="OnlyCommittedChanges",e}(Yu||{}),Yd=function(){var e,n,t=Sx(),r=t.commits,i=t.state;if((null==i?void 0:i.error)!=null||!(null==i?void 0:i.type)||i.type!==t8.UN.NORMAL||(null==i?void 0:i.state)==null||null!=r.error||!(null==r?void 0:r.ours))return"CannotMerge";var o=i.state===t8.Gi.DIRTY_WORKTREE||i.state===t8.Gi.DIRTY_INDEX,a=!!((null==r||null==(e=r.ours)?void 0:e.length)&&(null==r||null==(n=r.ours)?void 0:n.length)>0);return o&&!a?"OnlyUncommittedChanges":o&&a?"UncommittedAndCommittedChanges":!o&&a?"OnlyCommittedChanges":"NothingToMerge"};function Yp(e){var n,t,r,i,o,a,l,s,c,u,d,p,h,m,g,S,Y,x,C,_,k,D,E,R,I=e.sourceRepl,F=e.destinationRepl,U=e.projectId,N=e.mainReplId,O=e.orgId,M=e.currentUser,B=(0,nN.A)().showError,H=(0,nB.c)()("includeUncommittedChanges"),z=(0,v._)((0,w.useState)(!1),2),W=z[0],G=z[1],V=(0,v._)((t=(n={destinationReplId:F.id,sourceReplId:I.id,onSuccess:function(e){var n=e.didAutoCommit;(0,Sw.L)({action:"merge",orgId:O,projectId:U,autoCommitEnabled:n,sourceReplType:I.id===N?"mainRepl":"devRepl",destinationReplType:F.id===N?"mainRepl":"devRepl"})}}).sourceReplId,r=n.destinationReplId,i=n.onSuccess,o=(0,A.A)().git,a=(0,w.useRef)(null),s=(l=(0,v._)((0,w.useState)(!1),2))[0],c=l[1],d=(u=(0,nN.A)()).showError,p=u.showConfirm,h={variables:{id:r}},m=(0,ee._)({},Yt,h),g=er.I(Yr,m),S=(0,w.useCallback)(function(){if(!g.data)return null;var e=g.data,n=e.repl,t=e.currentUser;if(!t||"Repl"!==n.__typename)return null;if(a.current)if(a.current.replId===n.id&&a.current.currentUserId===t.id)return a.current;else a.current.container.close();var r=(0,Yi.Ay)({onUnrecoverableError:function(e){re.Cp(e,{tags:{projects:!0},extra:{replid:n.id}})}});r.connect({context:(0,Yo.O)({repl:n,currentUser:t}),getMinimumRetryDelayMs:function(){return 0}});var i=(0,yp.Ay)({container:r}),o=(0,Ya.A)({container:r,fs:i}),l=(0,Yl.A)({container:r,fs:i,enableReplspaceSshTokenPassthrough:!0});return a.current={container:r,git:o,fs:i,replspace:l,replId:n.id,currentUserId:t.id},a.current},[g.data]),(0,w.useEffect)(function(){if(a.current){var e=a.current.container;return function(){e.close()}}},[]),[(0,w.useCallback)((0,y._)(function(){var e,n,r,a,l,s,u,f,h,m,v=arguments;return(0,b.YH)(this,function(w){switch(w.label){case 0:if(e=(v.length>0&&void 0!==v[0]?v[0]:{autoCommit:!1}).autoCommit,null==(r=(null==(n=g.data)?void 0:n.repl.__typename)==="Repl"?g.data.repl:null))return d("Please try again."),[2];a=r.title,c(!0),w.label=1;case 1:if(w.trys.push([1,7,8,9]),!e)return[3,3];return[4,function(e){return Ys.apply(this,arguments)}({git:o,commitMessage:e.message})];case 2:if((l=w.sent()).error)return d(l.error),[2];w.label=3;case 3:if(!(s=S()))return d('Could not merge: the "'.concat(a,'" Repl could not be reached, please try again.')),[2];return[4,(u=s.git).getRepositoryState()];case 4:if((f=w.sent()).error)return d('Could not merge: the "'.concat(a,"\" Repl's git state could not be read, please try again.")),[2];if(f.state!==t8.Gi.CLEAN)return d('Could not merge: the "'.concat(a,'" Repl has uncommitted changes, please open that repl and commit or reset any changes.')),[2];return[4,d7({git:u,replId:t})];case 5:if(w.sent().error)return d('Could not merge: the "'.concat(a,'" Repl could not be reached, please try again.')),[2];return[4,u.pull({experimental_override_remote:{name:d6(t),branch:"main"},allowConflicts:!1,mode:t8.Xo.REBASE})];case 6:if((h=w.sent()).error){switch(h.error){case t8.uA.MERGE_CONFLICT:m="this would result in a merge conflict. Get the latest changes in your repl, then try again.";break;case t8.uA.DIRTY_WORKTREE:m='the "'.concat(a,'" Repl has uncommitted changes, please open that repl and commit or reset any changes.');break;case t8.uA.HEAD_DETACHED:m='the "'.concat(a,'" Repl is on an unknown branch, please open that repl and checkout a branch before merging.');break;default:m='please check the "'.concat(a,'" Repl or try again.')}return d("Could not merge: ".concat(m)),[2]}return p("Changes pushed!"),o.forceRefresh(),null==i||i({didAutoCommit:!!e}),[3,9];case 7:return w.sent(),d("Could not merge: something went wrong, please try again."),[3,9];case 8:return c(!1),[7];case 9:return[2]}})}),[g,S,t,d,p,o,i]),{loading:s}]),2),j=V[0],Z=V[1].loading,q=(C=(Y={replId:F.id,orgId:O,projectId:U,currentUserId:M.id}).replId,_=Y.orgId,k=Y.projectId,D=Y.currentUserId,Object.values(null!=(x=(0,S9.Si)({orgId:_,projectId:k})[C])?x:{}).filter(function(e){return e.id!==D})),K=Yd(),$="NothingToMerge"===K||"CannotMerge"===K||Z,J="Automatic commit for ".concat(I.title);switch(K){case"NothingToMerge":R="You do not have any commits to merge in yet";break;case"CannotMerge":R="You cannot merge right now";break;case"OnlyUncommittedChanges":case"UncommittedAndCommittedChanges":case"OnlyCommittedChanges":R="Your changes will be pulled into ".concat(F.title);break;default:(0,ar.A)(K)}var Q=(E=(0,y._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:switch(K){case"NothingToMerge":return[3,1];case"CannotMerge":return[3,2];case"OnlyCommittedChanges":return[3,3];case"UncommittedAndCommittedChanges":return[3,5];case"OnlyUncommittedChanges":return[3,7]}return[3,9];case 1:return B("No changes to merge"),[3,10];case 2:return B("You cannot merge right now"),[3,10];case 3:return[4,j({autoCommit:!1})];case 4:case 6:case 8:return e.sent(),[3,10];case 5:return[4,j({autoCommit:!!W&&{message:J}})];case 7:return[4,j({autoCommit:{message:J}})];case 9:(0,ar.A)(K),e.label=10;case 10:return[2]}})}),function(){return E.apply(this,arguments)});return(0,f.FD)(L.S,{gap:8,children:[q.length>0?(0,f.Y)(iI.N,{icon:(0,f.Y)(iF.A,{}),colorway:"orange",text:"".concat(F.title," has active coders (@").concat(q[0].username).concat(q.length>1?" and others":"","). Merging may disrupt ongoing work.")}):null,(0,f.Y)(P.m_,{tooltip:R,isDisabled:null===R,placement:"top",maxWidth:300,children:(0,f.Y)(eS.$n,{colorway:"primary",text:"Merge changes into ".concat(F.title),disabled:$,onClick:Q,loading:Z,iconLeft:Z?(0,f.Y)(to.A,{}):void 0})}),"OnlyUncommittedChanges"===K?(0,f.FD)(L.S,{row:!0,gap:6,children:[(0,f.Y)(tI.A,{css:Yc.infoIcon}),(0,f.Y)(T.EY,{color:"dimmer",css:Yc.infoMessage,children:"All changes are uncommitted, so they will be automatically committed when you merge"})]}):null,"UncommittedAndCommittedChanges"===K?(0,f.FD)(L.S,{row:!0,gap:6,children:[(0,f.Y)(nH.S,{id:H,checked:W,onChange:G}),(0,f.Y)(cT.J,{htmlFor:H,children:(0,f.Y)(T.EY,{color:"dimmer",children:"Include uncommitted changes in merge"})}),(0,f.Y)(P.m_,{tooltip:"Any changes you have not committed will be automatically committed and merged",delay:"default",children:(0,f.Y)(tI.A,{css:Yc.infoIcon})})]}):null]})}function Yf(){var e=(0,en._)(["\n  query ProjectCommitGraphRemoteRepl($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        title\n      }\n    }\n  }\n"]);return Yf=function(){return e},e}var Yh={},Ym=(0,et.J1)(Yf()),Yg=t(64732),Yv=(0,V.x)({input:[j.wp.py(0),j.wp.minHeight(24),j.wp.pl(12)]}),Yw=function(){var e,n=(0,A.A)().git;return(0,w.useCallback)((e=(0,y._)(function(e){return(0,b.YH)(this,function(t){switch(t.label){case 0:return[4,n.stageFiles({all:!0})];case 1:return t.sent(),[4,n.commit({message:e,allowEmpty:!1})];case 2:return t.sent(),n.forceRefresh(),[2]}})}),function(n){return e.apply(this,arguments)}),[n])},Yy=function(e){var n,t=e.onDone,r=(0,v._)((0,w.useState)(""),2),i=r[0],o=r[1],a=Yw(),l=(0,v._)((0,w.useState)(!1),2),s=l[0],c=l[1],u=(n=(0,y._)(function(e){return(0,b.YH)(this,function(n){switch(n.label){case 0:if(!("Enter"===e.key&&e.metaKey))return[3,2];return e.stopPropagation(),e.preventDefault(),c(!0),[4,a(i)];case 1:n.sent(),c(!1),n.label=2;case 2:return"Escape"===e.key&&(o(""),t()),[2]}})}),function(e){return n.apply(this,arguments)});return(0,f.Y)(eA.pd,{autoFocus:!0,autoCapitalize:"off","aria-label":"Commit message",placeholder:"cmd+enter to commit",onKeyDown:u,onChange:function(e){o(e.target.value)},disabled:s,onBlur:t,css:Yv.input})},Yb=(0,lm.v)(["commit-text-foreground","commit-extended-text-foreground","commit-graph-color","segment-grid-area"]),YS=Yb.cssVars,YY=Yb.styleTokens,YA=[j.wp.position.absolute,{top:6,left:3,width:10,height:10,borderRadius:"50%"}],Yx=(0,V.x)({graph:[j.wp.display.grid,{gridTemplateAreas:'\n        "title-left title-left"\n        "action-left action-left"\n        "left left"\n        "spacer title-right"\n        "spacer action-right"\n        "spacer right"\n        "split-left split-right"\n        "common common"',gridTemplateColumns:"minmax(16px, min-content) 1fr",gridTemplateRows:"min-content ".repeat(8).trim()},(0,g._)({},j.kL.min("tabletMin"),{gridTemplateAreas:'\n          "title-left title-right"\n          "action-left action-right"\n          "left right" \n          "split-left split-right"  \n          "common common"',gridTemplateColumns:"1fr 1fr",gridTemplateRows:"min-content ".repeat(5).trim()})],segment:[j.wp.flex.column,j.wp.align.start,j.wp.justify.end,{listStyleType:"none",gridArea:YY["segment-grid-area"],minWidth:0,maxWidth:"100%"}],action:[{gridArea:YY["segment-grid-area"]}],title:[{gridArea:YY["segment-grid-area"]}],commit:[{minWidth:0,maxWidth:"100%"},{'&[data-interactive="true"]':[i9.b.nofill,j.wp.border({width:0})]}],decoration:[j.wp.position.relative,{height:"100%",width:16}],commitDot:[YA,{backgroundColor:YY["commit-graph-color"]}],commitDotUntracked:[YA,{"&:before":[YA,{boxSizing:"border-box",top:-2,left:-2,content:'""',border:"2px dashed ".concat(YY["commit-graph-color"])}],border:"2px solid ".concat(k.LU.accentPrimaryStronger)}],line:[{marginLeft:"auto",marginRight:"auto",position:"absolute",width:"2px",left:"calc(50% - ".concat(1,"px)"),height:"calc(100% - ".concat(8,"px)"),backgroundColor:YY["commit-graph-color"],transform:"translateY(".concat(15,"px)")},{background:"linear-gradient(to top, transparent 0%,  ".concat(YY["commit-graph-color"]," ").concat(10,"px)")},{"li:last-child  &":{height:"calc(100% - ".concat(15,"px)"),background:"none",backgroundColor:YY["commit-graph-color"]}}],commitColumn:[j.wp.viewStyle,j.wp.colWithGap(8),j.wp.minHeight(24),{minWidth:0,maxWidth:"calc(100% - ".concat(16,"px)"),overflow:"hidden"}],commitMessage:[{color:YY["commit-text-foreground"]}],commitDescription:[{color:YY["commit-extended-text-foreground"]}],splitLeft:[{gridArea:"split-left",position:"relative",height:16,width:"100%"}],splitRight:[{gridArea:"split-right",position:"relative",height:16,width:16}],curveRight:[j.wp.position.absolute,{bottom:0,left:7,borderRadius:"100% 0 0 0",borderTop:"2px solid ".concat(YY["commit-graph-color"]),borderLeft:"2px solid ".concat(YY["commit-graph-color"]),height:9,width:9}],curveUp:[j.wp.position.absolute,{top:0,left:0,borderRadius:"0 0 100% 0",borderBottom:"2px solid ".concat(YY["commit-graph-color"]),borderRight:"2px solid ".concat(YY["commit-graph-color"]),height:9,width:9}],fullLine:[{position:"absolute",width:2,height:"100%",left:7,backgroundColor:YY["commit-graph-color"]}],sidewaysLine:[{position:"absolute",width:"calc(100% - ".concat(16,"px)"),height:2,left:16,top:7,backgroundColor:YY["commit-graph-color"]}],compactLine:[j.wp.height("100%"),j.wp.position.relative,{gridArea:"spacer"},(0,g._)({},j.kL.min("tabletMin"),{display:"none"})]}),YC=function(e){var n=e.children,t=e.hasLeft,r=e.hasRight;return(0,f.FD)(L.S,{css:Yx.graph,children:[n,(0,f.Y)(YE,{hasLeft:t,hasRight:r}),(0,f.Y)("div",{css:Yx.compactLine,children:(0,f.Y)("div",{css:Yx.decoration,children:(0,f.Y)("div",{css:Yx.fullLine,style:t?(0,g._)({},YS["commit-graph-color"],k.LU.accentPrimaryDefault):{}})})})]})},Y_=function(e){var n,t,r=e.children,i=e.area,o=e.title,a=e.action;if(!w.Children.count(r))return null;var l="common"===i?(n={},(0,g._)(n,YS["segment-grid-area"],i),(0,g._)(n,YS["commit-graph-color"],k.LU.outlineDefault),(0,g._)(n,YS["commit-text-foreground"],k.LU.foregroundDimmer),(0,g._)(n,YS["commit-extended-text-foreground"],k.LU.foregroundDimmest),n):(t={},(0,g._)(t,YS["segment-grid-area"],i),(0,g._)(t,YS["commit-graph-color"],k.LU.accentPrimaryDefault),(0,g._)(t,YS["commit-text-foreground"],k.LU.accentPrimaryStrongest),(0,g._)(t,YS["commit-extended-text-foreground"],k.LU.foregroundDimmest),t);return(0,f.FD)(f.FK,{children:["common"===i?null:(0,f.Y)(YD,{area:i,children:o}),"common"===i?null:(0,f.Y)(Yk,{area:i,children:a}),(0,f.Y)(L.S,{style:l,tag:"ol",css:Yx.segment,"aria-label":i,children:r})]})},Yk=function(e){var n=e.children,t=e.area,r=(0,g._)({},YS["segment-grid-area"],"action-".concat(t));return(0,f.Y)(L.S,{style:r,css:Yx.action,py:4,row:!0,gap:8,children:n})},YD=function(e){var n=e.children,t=e.area,r=(0,g._)({},YS["segment-grid-area"],"title-".concat(t));return(0,f.Y)(L.S,{style:r,css:Yx.title,children:"string"==typeof n?(0,f.Y)(T.Y9,{level:3,variant:"subheadDefault",color:"dimmer",children:n}):n})},YE=function(e){var n=e.hasLeft,t=e.hasRight,r=(0,g._)({},YS["commit-graph-color"],n?k.LU.accentPrimaryDefault:"transparent"),i=(0,g._)({},YS["commit-graph-color"],t?k.LU.accentPrimaryDefault:"transparent");return n||t?(0,f.FD)(f.FK,{children:[(0,f.FD)("div",{css:Yx.splitLeft,children:[(0,f.FD)("div",{css:Yx.decoration,children:[(0,f.Y)("div",{css:Yx.line,"data-line":!0,style:r}),(0,f.Y)("div",{css:Yx.fullLine,"data-full-line":!0,style:r})]}),(0,f.Y)("div",{css:Yx.curveRight,style:i}),(0,f.Y)("div",{css:Yx.sidewaysLine,style:i})]}),(0,f.Y)("div",{css:Yx.splitRight,style:i,children:(0,f.Y)("div",{css:Yx.curveUp})})]}):null},YR=function(e){var n=e.onClick,t=e.children,r=e.className;return n?(0,f.Y)(eS.SC,{className:r,onPress:n,css:j.wp.reset.button,children:t}):(0,f.Y)("div",{className:r,children:t})},YI=function(e){var n=e.message,t=e.description,r=e.type,i=e.onClick;return(0,f.FD)(L.S,{tag:"li",css:Yx.commit,pr:8,row:!0,align:"start",justify:"start","data-interactive":!!i,children:[(0,f.FD)("div",{css:Yx.decoration,children:[(0,f.Y)("div",{css:Yx.line}),(0,f.Y)("div",{css:"working"===r?Yx.commitDotUntracked:Yx.commitDot})]}),(0,f.FD)(YR,{onClick:i,css:Yx.commitColumn,children:[(0,f.Y)(T.EY,{multiline:!1,css:Yx.commitMessage,style:"working"===r?(0,g._)({},YS["commit-text-foreground"],k.LU.accentPrimaryStronger):{},children:n}),t?(0,f.Y)(T.EY,{css:Yx.commitDescription,children:t}):null]})]})},YF=function(){var e=(0,v._)((0,w.useState)(!1),2),n=e[0],t=e[1];return n?(0,f.Y)("li",{children:(0,f.Y)(Yy,{onDone:function(){return t(!1)}})}):(0,f.Y)(YI,{type:"working",message:"uncommitted changes",onClick:function(){return t(!0)}})},YT=function(e){var n,t,r,i,o,a,l,s,c,u,d,p=(u={variables:{id:e.selectedRepl.id}},d=(0,ee._)({},Yh,u),er.I(Ym,d)).data,h=Sx(),m=h.state,g=h.commits,v=(null==m?void 0:m.error)?null:null!=(l=null==m?void 0:m.state)?l:null,w=(null==m?void 0:m.error)?null:null!=(s=null==m?void 0:m.type)?s:null,y=(null==p||null==(n=p.repl)?void 0:n.__typename)==="Repl"&&p.repl.title||"Remote",b=((c=w===t8.UN.NORMAL&&v!==t8.Gi.CLEAN,true),c);if(null==g?void 0:g.error)return(0,f.Y)(T.EY,{children:g.error});var S=!!(null==g||null==(t=g.theirs)?void 0:t.length),Y=!!(null==g||null==(r=g.ours)?void 0:r.length)||b;return(0,f.FD)(YC,{hasLeft:S,hasRight:Y,children:[S?(0,f.Y)(Y_,{area:"left",title:y,children:null==g||null==(i=g.theirs)?void 0:i.map(function(e){return(0,f.Y)(YI,{message:e.subject,description:"".concat(e.author.name,", ").concat((0,Yg.K)(e.author.date))},e.hash)})}):null,Y?(0,f.FD)(Y_,{area:"right",title:"My workspace",children:[b?(0,f.Y)(YF,{}):null,null==g||null==(o=g.ours)?void 0:o.map(function(e){return(0,f.Y)(YI,{message:e.subject,description:"".concat(e.author.name,", ").concat((0,Yg.K)(e.author.date))},e.hash)})]}):null,(0,f.Y)(Y_,{area:"common",children:null==g||null==(a=g.both)?void 0:a.map(function(e){return(0,f.Y)(YI,{message:e.subject,description:"".concat(e.author.name,", ").concat((0,Yg.K)(e.author.date))},e.hash)})})]})},YP=function(e){var n=(0,v._)((0,w.useState)(function(){return(0,ez.y$)()}),1)[0];return(0,f.FD)(de.Provider,{value:n,children:[(0,f.Y)(dD,{}),(0,f.Y)(YT,(0,ee._)({},e))]})},YL=(0,V.x)({header:[j.wp.border({color:k.LU.outlineDimmest,direction:"bottom"})],headerLeft:[j.wp.flex.wrap,j.wp.align.center,{flex:1}],comboBoxAndActions:[j.wp.flex.wrap,j.wp.flex.shrink(1)],iconButton:[j.wp.color.foregroundDimmer,j.wp.hover(j.wp.color.foregroundDefault)],swapIcon:[j.wp.color.foregroundDimmest,{rotate:"90deg"}],warnings:[{"&:empty":j.wp.display.none}],toggle:[j.wp.minWidth(123)],errorView:[j.wp.rowWithGap(8),j.wp.justify.center],viewSection:[j.wp.px(8),j.wp.py(12),{":not(:last-of-type)":j.wp.border({color:k.LU.outlineDimmest,direction:"bottom"})}]}),YU=function(e){var n=e.selectedRepl,t=e.currentRepl,r=e.remoteResult,i=e.tab,o=e.isMainRepl;return n?"Loading"===r.state?(0,f.Y)(to.A,{}):"Error"===r.state?(0,f.Y)(T.EY,{children:"Something went wrong, please try again."}):"changes"===i?(0,f.Y)(S3,{selectedRepl:n,isMainRepl:o}):(0,f.Y)(YP,{selectedRepl:n,currentRepl:t}):(0,f.Y)(T.EY,{children:"Select a Repl to compare against your current Repl."})},YN=(0,w.forwardRef)(function(e,n){var t,r,i,o,a,l=e.repl,s=e.project,c=e.openGitPane,u=e.org,d=e.currentUser,p=!!s.mainRepl&&l.id===s.mainRepl.id,h=(0,v._)((0,w.useState)(p?null:null!=(r=s.mainRepl)?r:null),2),m=h[0],g=h[1],y=(0,v._)((0,w.useState)("changes"),2),b=y[0],S=y[1],Y=function(){return S("changes"===b?"commits":"changes")};(0,w.useEffect)(function(){(0,Sw.L)({action:"tabOpened",orgId:u.id,projectId:s.id,tab:b,replType:p?"mainRepl":"devRepl"})},[b,s,u,p]);var A=SY({selectedReplId:null!=(i=null==m?void 0:m.id)?i:null}),x=A.isFetching,C=A.refetch,_=A.state,k=A.remote,D=A.pull,E=D.doPull,R=D.state,I=R.error,F=R.loading,P=(null==_?void 0:_.error)?null:null!=(o=null==_?void 0:_.state)?o:null;return(0,f.Y)(SA.Provider,{value:A,children:(0,f.FD)(L.S,{innerRef:n,children:[(0,f.FD)(L.S,{css:YL.header,p:8,row:!0,gap:2,children:[(0,f.FD)(L.S,{css:YL.headerLeft,row:!0,gap:8,children:["changes"===b?(0,f.Y)(eS.$n,{css:YL.toggle,text:"Changes",iconLeft:(0,f.Y)(aw.A,{}),iconRight:(0,f.Y)(fv.A,{css:YL.swapIcon}),onClick:Y},"toggle"):(0,f.Y)(eS.$n,{css:YL.toggle,text:"Commits",iconLeft:(0,f.Y)(rT.A,{}),iconRight:(0,f.Y)(fv.A,{css:YL.swapIcon}),onClick:Y},"toggle"),(0,f.Y)(T.EY,{color:"dimmer",multiline:!0,children:"compared against"}),(0,f.FD)(L.S,{css:YL.comboBoxAndActions,row:!0,gap:8,children:[(0,f.Y)(SL,{"aria-label":"Select a Repl",replId:l.id,selectedReplId:null!=(a=null==m?void 0:m.id)?a:null,onSelect:g}),(0,f.FD)(L.S,{row:!0,gap:0,align:"center",children:[(0,f.Y)(eY.K0,{alt:"Pull",onClick:function(){E({branch:"main"}),(0,Sw.L)({action:"pull",orgId:u.id,projectId:s.id,replType:p?"mainRepl":"devRepl"})},disabled:F||p,css:YL.iconButton,children:x?(0,f.Y)(to.A,{}):(0,f.Y)(fe.A,{})}),m?(0,f.Y)(ss.A,(0,nt._)((0,ee._)({alt:"Go to ".concat(m.title),target:"_blank"},(0,S8.q1)(m,{initialPaneType:"project"})),{css:YL.iconButton,children:(0,f.Y)(tR.A,{})})):null]})]})]}),(0,f.Y)(L.S,{pt:4,row:!0,gap:8,children:(0,f.Y)(eY.K0,{alt:"Fetch",onClick:C,disabled:"Success"!==k.state,css:YL.iconButton,children:x?(0,f.Y)(to.A,{}):(0,f.Y)(om.A,{})})})]}),(0,f.FD)(L.S,{css:YL.warnings,p:8,gap:12,children:[I===t8.uA.DIRTY_WORKTREE?(0,f.Y)(L.S,{css:YL.errorView,children:(0,f.Y)(iI.N,{colorway:"negative",icon:(0,f.Y)(iF.A,{}),text:"You have uncommitted changes. Please commit them before pulling."})}):null,I===t8.uA.MERGE_CONFLICT?(0,f.FD)(L.S,{css:YL.errorView,children:[(0,f.Y)(iI.N,{colorway:"negative",icon:(0,f.Y)(iF.A,{}),text:"There were conflicts in the changes you are trying to pull. Click to resolve them."}),(0,f.Y)(eS.$n,{text:"Resolve Manually",onClick:function(){c(),E({branch:"main",allowConflicts:!0}),(0,Sw.L)({projectId:s.id,orgId:u.id,action:"pullWithConflicts",replType:p?"mainRepl":"devRepl"})},colorway:"negative"})]}):null,P===t8.Gi.MERGING?(0,f.Y)(iI.N,{colorway:"primary",text:"Merge in progress"}):null,P===t8.Gi.REBASING?(0,f.Y)(iI.N,{colorway:"primary",text:"Rebase in progress"}):null,(0,f.Y)(S6,{})]}),p?(0,f.Y)(L.S,{css:YL.viewSection,children:(0,f.Y)(S7,{selectedRepl:null!=m?m:void 0})}):null,!p&&m?(0,f.Y)(L.S,{css:YL.viewSection,children:(0,f.Y)(Yp,{destinationRepl:m,sourceRepl:l,projectId:s.id,mainReplId:null==(t=s.mainRepl)?void 0:t.id,orgId:u.id,currentUser:d})}):null,(0,f.Y)(L.S,{css:YL.viewSection,children:(0,f.Y)(YU,{currentRepl:l,selectedRepl:m,remoteResult:k,isMainRepl:p,tab:b})})]})})}),YO=t(11139),YM=(0,V.x)({container:[j.wp.p(8)]});function YB(e){var n,t,r,i,o=e.isActive,a=e.performPaneOperation,l=(0,c0.Jw)(Sv.X.id,Sv.F.ProjectPane),s=(0,nI.A)(),c=(0,YO.Q)(),u=(n={variables:{id:s}},t=(0,ee._)({},Sm,n),er.I(Sg,t)),d=u.data,p=u.loading,h=u.error,m=(null==d?void 0:d.repl.__typename)==="Repl"?d.repl:null,g=(null==d?void 0:d.currentUser)?d.currentUser:null,v=(null==m||null==(r=m.project)?void 0:r.__typename)==="Project"?m.project:null,y=(null==v||null==(i=v.org)?void 0:i.__typename)==="Org"?v.org:null,b=(0,nN.A)().showError,S="error"===c.state?c.error:null;return((0,w.useEffect)(function(){S&&b(S)},[b,S]),mv(o),p||"loading"===c.state)?(0,f.Y)(L.S,{p:16,row:!0,gap:8,justify:"center",children:(0,f.Y)(to.A,{})}):y&&v?!h&&m&&g?(0,f.Y)(YN,{ref:l,repl:m,project:v,org:y,openGitPane:function(){return a({operation:"open",pane:{type:"git"}})},currentUser:g}):(0,f.Y)(L.S,{css:YM.container,children:(0,f.Y)(T.EY,{children:"Something went wrong, please try again."})}):(0,f.Y)(L.S,{css:YM.container,children:(0,f.Y)(T.EY,{children:"This Repl is not a project!"})})}function YH(e){return(0,f.Y)(n0.Ay,(0,nt._)((0,ee._)({},e),{children:(0,f.Y)("path",{fillRule:"evenodd",d:"M6 3.75a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5ZM2.25 6a3.75 3.75 0 1 1 4.5 3.675V21a.75.75 0 0 1-1.5 0V9.675A3.751 3.751 0 0 1 2.25 6Zm10 0a.75.75 0 0 1 .75-.75h3A2.75 2.75 0 0 1 18.75 8v6.325A3.751 3.751 0 0 1 18 21.75a3.75 3.75 0 0 1-.75-7.425V8A1.25 1.25 0 0 0 16 6.75h-3a.75.75 0 0 1-.75-.75ZM18 15.75a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5Z",clipRule:"evenodd"})}))}var Yz=h.ZU.Object({type:h.ZU.Literal("project")}),YW={Content:function(e){var n=e.options,t=n.isActive,r=n.performPaneOperation;return(0,f.Y)(YB,{isActive:t,performPaneOperation:r})},Icon:function(){return(0,f.Y)(YH,{})},getTitle:function(){return"Project"},description:"Manage changes in your Project and sync or merge changes across Apps in the Project",category:nQ.bY.WorkspaceFeatures,decode:function(e){return m.T(Yz,e)}},YG=h.ZU.Object({type:h.ZU.Literal("replitAuth")});function YV(){var e=(0,en._)(["\n  query ReplitAuth($id: String!) {\n    getRepl(id: $id) {\n      ... on Repl {\n        id\n        title\n        iconUrl\n        hasAuthUsers\n        authorizations {\n          editMetadata {\n            isAuthorized\n          }\n          manageAuth {\n            isAuthorized\n            code\n            message\n          }\n        }\n        authProviderConfig {\n          ... on AuthProviderConfig {\n            id\n            minimizedProviders\n          }\n        }\n      }\n    }\n  }\n"]);return YV=function(){return e},e}function Yj(){var e=(0,en._)(["\n  query ReplitAuthUsers(\n    $id: String!\n    $count: Int\n    $after: String\n    $orderBy: ReplitAuthUserOrderByInput\n    $filter: ReplitAuthUserFilterInput\n  ) {\n    getRepl(id: $id) {\n      ... on Repl {\n        id\n        authUsers(\n          count: $count\n          after: $after\n          orderBy: $orderBy\n          filter: $filter\n        ) {\n          items {\n            id\n            banned\n            timeCreated\n            lastLoggedIn\n            username\n            displayName\n            image\n            email\n            userId\n          }\n          pageInfo {\n            hasNextPage\n            nextCursor\n          }\n        }\n      }\n    }\n  }\n"]);return Yj=function(){return e},e}function YZ(){var e=(0,en._)(["\n  mutation UpdateRepl($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        title\n        iconUrl\n      }\n    }\n  }\n"]);return YZ=function(){return e},e}function Yq(){var e=(0,en._)(["\n  mutation UpdateReplitAuthProviderConfig(\n    $input: UpdateReplitAuthProviderConfigInput!\n  ) {\n    updateReplitAuthProviderConfig(input: $input) {\n      ... on AuthProviderConfig {\n        id\n        minimizedProviders\n      }\n    }\n  }\n"]);return Yq=function(){return e},e}function YK(){var e=(0,en._)(["\n  mutation UpdateReplitAuthUserBanStatus(\n    $input: UpdateReplitAuthUserBanStatusInput!\n  ) {\n    updateReplitAuthUserBanStatus(input: $input) {\n      ... on UpdateReplitAuthUserBanStatusOutput {\n        success\n        message\n        user {\n          id\n          banned\n        }\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n"]);return YK=function(){return e},e}var Y$={},YJ=(0,et.J1)(YV());function YQ(e){var n=(0,ee._)({},Y$,e);return er.I(YJ,n)}var YX=(0,et.J1)(Yj()),Y0=(YZ(),(0,et.J1)(Yq())),Y1=(0,et.J1)(YK()),Y2=t(22954),Y4=t(94703),Y5=t(84491),Y3=(0,V.x)({banner:[j.wp.mb(16)]});function Y6(){return(0,f.Y)(iI.N,{icon:(0,f.Y)(tI.A,{}),text:"Enable Replit Auth by asking the Agent to add this feature. Just say 'Add Replit Auth to my app'.",css:Y3.banner})}var Y8=t(83576),Y7=t(68800),Y9=t(5499),Ae=t(31577),An=(0,V.x)({loadingContainer:[j.wp.height("100%")],sectionContainer:[j.wp.mb(24)],providerItem:[j.wp.gap(8)],form:[j.wp.p(0)],sectionTitle:[j.wp.mb(16)],sectionSubtitle:[j.wp.mb(16)],providerIconContainer:[j.wp.mr(8),j.wp.flex.row,j.wp.align.center],errorText:[{color:k.LU.foregroundDefault}],configContent:[{maxWidth:430}],pageTitle:[j.wp.mb(16)]}),At=[{id:"google",label:"Google",icon:(0,f.Y)(function(e){return(0,f.Y)(n0.Ay,(0,nt._)((0,ee._)({},e),{children:(0,f.Y)("path",{d:"M16.855 6.55c-1.25-1.19-2.83-1.8-4.6-1.8-3.13 0-5.78 2.11-6.73 4.96-.24.72-.38 1.49-.38 2.29s.13 1.57.38 2.29c.95 2.85 3.6 4.96 6.73 4.96 1.62 0 2.99-.44 4.07-1.16 1.26-.85 2.11-2.1 2.4-3.58h-6.47V10h11.3c.12.73.19 1.48.19 2.27 0 3.65-1.3 6.73-3.56 8.82-1.98 1.83-4.69 2.91-7.93 2.91-4.69 0-8.74-2.7-10.71-6.62a11.86 11.86 0 0 1 0-10.76C3.515 2.7 7.565 0 12.255 0c3.24 0 5.95 1.19 8.02 3.13l-3.42 3.42Z"})}))},{size:16})},{id:"github",label:"GitHub",icon:(0,f.Y)(dh.A,{size:16})},{id:"x",label:"X",icon:(0,f.Y)(Ae.A,{size:16})},{id:"apple",label:"Apple",icon:(0,f.Y)(Y7.A,{size:16})},{id:"email",label:"Email",icon:(0,f.Y)(Y9.A,{size:16})}];function Ar(e){var n,t,r=e.replId,i=e.hasAuthUsers,o=YQ({variables:{id:r}}),a=o.data,l=o.loading,s=(0,nN.A)(),c=s.showError,u=s.showConfirm,d=(0,v._)((0,w.useState)(""),2),p=d[0],h=d[1],m=(0,v._)((0,w.useState)([]),2),g=m[0],y=m[1],b=(0,SI.A)(g,500),S=(0,nB.c)(),Y=(0,w.useRef)(void 0),A=(0,w.useRef)([]),x=(0,v._)((0,Y2.KZ)({onError:function(e){return c((0,Y4.A)(e.message))},onCompleted:function(e){u("App info updated successfully");var n=e.updateRepl.repl;n&&"url"in n&&n.url&&n.url!==Y.current&&(window.history.replaceState(null,"",n.url+window.location.search+window.location.hash),Y.current=n.url)}}),1)[0],C=(0,v._)((n={onError:function(e){return c((0,Y4.A)(e.message))},onCompleted:function(e){if(!e.updateReplitAuthProviderConfig||"AuthProviderConfig"!==e.updateReplitAuthProviderConfig.__typename)return void c("Failed to update login providers");u("Login providers updated"),A.current=(0,X._)(b)}},t=(0,ee._)({},Y$,n),lP.n(Y0,t)),1)[0];(0,w.useEffect)(function(){(0!==b.length||0!==A.current.length)&&(b.length===A.current.length&&b.every(function(e){return A.current.includes(e)})||C({variables:{input:{replId:r,minimizedProviders:At.map(function(e){return e.id}).filter(function(e){return!b.includes(e)})}}}))},[b,r,C]);var _=(0,w.useCallback)(function(){if((null==a?void 0:a.getRepl)&&"Repl"===a.getRepl.__typename){h(a.getRepl.title||""),"url"in a.getRepl&&"string"==typeof a.getRepl.url&&(Y.current=a.getRepl.url);var e=a.getRepl.authProviderConfig,n=At.map(function(e){return e.id});e&&"AuthProviderConfig"===e.__typename&&e.minimizedProviders&&(n=n.filter(function(n){return!e.minimizedProviders.includes(n)})),y(n),A.current=(0,X._)(n)}},[a]);(0,w.useEffect)(function(){a&&_()},[a,_]);var k=function(){x({variables:{input:{id:r,title:p}}})},D=function(e){y(function(n){return n.includes(e)?n.filter(function(n){return n!==e}):(0,X._)(n).concat([e])})};if(l)return(0,f.Y)(L.S,{css:An.loadingContainer,row:!0,justify:"center",align:"center",children:(0,f.Y)(to.A,{size:24})});var E=(null==a?void 0:a.getRepl)&&"Repl"===a.getRepl.__typename?a.getRepl:null;return E?(0,f.FD)(L.S,{css:An.configContent,children:[!1===i&&(0,f.Y)(Y6,{}),(0,f.Y)(T.EY,{variant:"subheadBig",css:An.pageTitle,children:"Configure your log in screen"}),(0,f.FD)(L.S,{css:An.sectionContainer,children:[(0,f.Y)(T.EY,{css:An.sectionTitle,variant:"subheadDefault",children:"App info"}),(0,f.Y)("form",{css:An.form,onSubmit:function(e){e.preventDefault(),k()},children:(0,f.Y)(L.S,{align:"stretch",gap:16,children:(0,f.FD)(eu.ui,{background:"default",gap:16,children:[(0,f.Y)(L.S,{children:(0,f.FD)(L.S,{gap:4,children:[(0,f.FD)(L.S,{row:!0,justify:"space-between",align:"end",children:[(0,f.Y)("label",{htmlFor:S("app-name"),children:(0,f.Y)(T.EY,{variant:"small",color:"dimmer",multiline:!1,children:"Name"})}),(0,f.Y)(Y8.A,{maxLength:60,value:p,hideLabel:!0})]}),(0,f.Y)(eA.pd,{value:p,onChange:function(e){return h(e.target.value)},onBlur:k,placeholder:"Your app name",maxLength:60,id:S("app-name")})]})}),(0,f.Y)(Y5.A,{replId:r,authz:{isAuthorized:E&&E.authorizations.editMetadata.isAuthorized},initialIconUrl:E.iconUrl||"",originIconUrl:""})]})})})]}),(0,f.FD)(L.S,{css:An.sectionContainer,children:[(0,f.Y)(T.EY,{css:An.sectionTitle,variant:"subheadDefault",children:"Log in providers"}),(0,f.Y)(T.EY,{multiline:!0,css:An.sectionSubtitle,children:"Choose which login options to display prominently. Unchecked options will appear in a dropdown menu."}),(0,f.Y)(L.S,{gap:12,children:At.map(function(e){return(0,f.FD)(L.S,{css:An.providerItem,row:!0,align:"center",children:[(0,f.Y)(nH.S,{checked:g.includes(e.id),onChange:function(){return D(e.id)},id:S("provider-".concat(e.id))}),(0,f.Y)("label",{htmlFor:S("provider-".concat(e.id)),children:(0,f.FD)(L.S,{css:j.wp.flex.row,align:"center",children:[(0,f.Y)(L.S,{css:An.providerIconContainer,children:e.icon}),(0,f.Y)(T.EY,{children:e.label})]})})]},e.id)})})]})]}):(0,f.Y)(L.S,{children:(0,f.Y)(T.EY,{css:An.errorText,children:"Error loading app information."})})}var Ai=t(27188),Ao=t(68350),Aa=t(66300),Al=t(13800),As={userId:"USER_ID",name:"NAME",username:"USERNAME",added:"LAST_LOGIN",email:"EMAIL"},Ac=[{key:"userId",label:"User ID",isRowHeader:!0,className:"userIdColumn",allowSorting:!1},{key:"username",label:"Username",className:"usernameColumn",allowSorting:!0},{key:"email",label:"Email",className:"emailColumn",allowSorting:!0},{key:"name",label:"Name",className:"nameColumn",allowSorting:!0},{key:"lastLoggedIn",label:"Last logged in",className:"lastLoggedInColumn",allowSorting:!0},{key:"actions",label:"",alignment:"end",className:"actionsColumn"}],Au=(0,V.x)({container:[j.wp.flex.column,j.wp.flex.grow(1)],headerTitle:[j.wp.mb(16),j.wp.flex.row,j.wp.align.center,j.wp.gap(8)],tableWrapper:[j.wp.flex.column,j.wp.flex.grow(1)],table:[j.wp.width("100%"),j.wp.container("table"),{"& .userIdColumn":{minWidth:100,maxWidth:200,width:"15%"},"& .nameColumn":{minWidth:200,maxWidth:350,width:"20%"},"& .usernameColumn":{minWidth:150,maxWidth:250,width:"20%"},"& .emailColumn":(0,g._)({minWidth:200,maxWidth:350,width:"25%"},j.kL.max(800,"table"),[{display:"none"}]),"& .lastLoggedInColumn":{minWidth:150,maxWidth:200,width:"10%"},"& .actionsColumn":{width:"10%"}}],searchContainer:[j.wp.mb(16),{width:"fit-content"}]}),Ad=(0,V.x)({modalContent:[j.wp.flex.column,j.wp.gap(16)],detailsRow:[j.wp.flex.column,j.wp.gap(4)],label:[j.wp.color.foregroundDefault,{fontSize:k.LU.fontSizeSmall,lineHeight:k.LU.lineHeightDefault,fontWeight:k.LU.fontWeightMedium}],value:[j.wp.gap(8),j.wp.color.foregroundDimmer,{fontSize:k.LU.fontSizeDefault,lineHeight:k.LU.lineHeightDefault}],buttonsContainer:[j.wp.gap(8)]}),Ap=(0,V.x)({title:[j.wp.mb(16)]});function Af(e,n){var t,r,i=(0,nN.A)(),o=i.showConfirm,a=i.showError,l=(0,v._)((t=(0,ee._)({},Y$,void 0),lP.n(Y1,t)),1)[0];return r=(0,y._)(function(){var t,r;return(0,b.YH)(this,function(i){switch(i.label){case 0:if(!n)return[2];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,l({variables:{input:{replId:e,userId:Number(n.userId),action:n.banned?"UNBAN":"BAN"}},update:function(e,t){var r=t.data;(null==r?void 0:r.updateReplitAuthUserBanStatus.__typename)==="UpdateReplitAuthUserBanStatusOutput"&&r.updateReplitAuthUserBanStatus.success&&e.modify({id:e.identify({__typename:"ReplitAuthUser",id:n.id}),fields:{banned:function(){return!n.banned}}})}})];case 2:return(null==(r=null==(t=i.sent().data)?void 0:t.updateReplitAuthUserBanStatus)?void 0:r.__typename)==="UpdateReplitAuthUserBanStatusOutput"&&r.success?o(r.message):(null==r?void 0:r.__typename)==="NotFoundError"||(null==r?void 0:r.__typename)==="UnauthorizedError"?a(r.message):a("Failed to update ban status"),[3,4];case 3:return i.sent(),a("Failed to update ban status"),[3,4];case 4:return[2]}})}),function(){return r.apply(this,arguments)}}function Ah(e){var n,t,r,i,o=e.replId,a=e.hasAuthUsers,l=(0,v._)((0,w.useState)(""),2),s=l[0],c=l[1],u=(0,v._)((0,w.useState)(null),2),d=u[0],p=u[1],h=(0,v._)((0,w.useState)(!1),2),m=h[0],g=h[1],S=(0,v._)((0,w.useState)({field:"LAST_LOGIN",direction:"DESC"}),2),Y=S[0],A=S[1],x=(0,w.useRef)(null),C=(0,SI.A)(s,500),_=(n={variables:{id:o,count:50,orderBy:Y,filter:C?{search:C}:void 0},fetchPolicy:"cache-and-network",nextFetchPolicy:"cache-first",notifyOnNetworkStatusChange:!0,ssr:!1},t=(0,ee._)({},Y$,n),er.I(YX,t)),k=_.data,D=_.loading,E=_.error,R=_.fetchMore,F=(0,w.useMemo)(function(){if((null==k?void 0:k.getRepl)&&"Repl"===k.getRepl.__typename&&k.getRepl.authUsers)return k.getRepl.authUsers},[k]),P=(0,w.useMemo)(function(){var e;return null!=(e=null==F?void 0:F.items)?e:[]},[F]),U=null!=(i=null==F?void 0:F.pageInfo.hasNextPage)&&i,O=(0,w.useMemo)(function(){return P.some(function(e){return e.email})},[P]),M=(0,w.useMemo)(function(){return Ac.filter(function(e){return"email"!==e.key||O})},[O]),B=(r=(0,y._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:if(D||!U)return[2];return[4,R({variables:{id:o,count:50,after:null==F?void 0:F.pageInfo.nextCursor,orderBy:Y,filter:C?{search:C}:void 0},updateQuery:function(e,n){var t,r,i=n.fetchMoreResult;if((null==(t=i.getRepl)?void 0:t.__typename)!=="Repl"||!i.getRepl.authUsers)return e;var o=(null==(r=e.getRepl)?void 0:r.__typename)==="Repl"&&e.getRepl.authUsers?e.getRepl.authUsers.items:[],a=(0,X._)(o).concat((0,X._)(i.getRepl.authUsers.items));return(0,nt._)((0,ee._)({},i),{getRepl:(0,nt._)((0,ee._)({},i.getRepl),{authUsers:(0,nt._)((0,ee._)({},i.getRepl.authUsers),{items:a})})})}})];case 1:return e.sent(),[2]}})}),function(){return r.apply(this,arguments)}),H=(0,w.useCallback)(function(e){e.column&&A({field:As[e.column]||"LAST_LOGIN",direction:"ascending"===e.direction?"ASC":"DESC"})},[]),z=(0,w.useMemo)(function(){return null!==d&&P.find(function(e){return e.userId===d})||null},[P,d]);return(0,f.Y)("div",{ref:x,children:(0,f.FD)(L.S,{css:Au.container,children:[!a&&(0,f.Y)(Y6,{}),(0,f.FD)(L.S,{css:Au.headerTitle,children:[(0,f.Y)(N.A,{size:24}),(0,f.Y)(T.EY,{variant:"subheadBig",children:"Users"})]}),(0,f.Y)(L.S,{css:Au.searchContainer,children:(0,f.Y)(dI.I,{placeholder:"Search users",value:s,onChange:function(e){return c(e.target.value)},onClear:function(){return c("")}})}),(0,f.Y)(eu.ui,{css:Au.tableWrapper,elevated:!0,children:(0,f.Y)(Ao.h,{css:Au.table,autoLayout:!0,title:"Authenticated Users",columns:M,items:P,selectionMode:"none",selectionBehavior:"replace",loading:D,loadingPlaceholder:{numRows:50,height:36},errorMessage:null==E?void 0:E.message,emptyState:(0,f.Y)(Ai.A,{title:D?"Loading users...":"No users",description:function(){if(!D)return C?"No users match your search criteria.":"Users who log in to your app will appear here."}(),illustration:(0,f.Y)(N.A,{size:24})}),canLoadMore:U,onLoadMore:B,isLoadingMore:F&&D,onSortChange:H,children:function(e){return(0,f.FD)(Al.H,{id:e.id,children:[(0,f.Y)(Aa.n,{className:"userIdColumn",children:(0,f.Y)(T.EY,{children:e.userId})},"userId-".concat(e.id)),(0,f.Y)(Aa.n,{className:"usernameColumn",children:(0,f.FD)(L.S,{row:!0,align:"center",gap:8,children:[(0,f.Y)(hU.e,{src:e.image||null,username:e.username||"",size:20}),(0,f.Y)(T.EY,{children:e.username||""}),e.banned?(0,f.Y)(I.a,{text:"Banned",colorway:"negative",variant:"muted",compact:!0}):null]})},"username-".concat(e.id)),O?(0,f.Y)(Aa.n,{className:"emailColumn",children:(0,f.Y)(T.EY,{children:e.email||""})},"email-".concat(e.id)):null,(0,f.Y)(Aa.n,{className:"nameColumn",children:(0,f.Y)(T.EY,{children:e.displayName||""})},"name-".concat(e.id)),(0,f.Y)(Aa.n,{className:"lastLoggedInColumn",children:e.lastLoggedIn?(0,f.Y)(eg.Dc,{date:e.lastLoggedIn,dateFormat:"relative"}):"Never"},"lastLoggedIn-".concat(e.id)),(0,f.Y)(Aa.n,{className:"actionsColumn",children:(0,f.Y)(Am,{user:e,onViewDetails:function(){p(e.userId),g(!0)},replId:o})},"actions-".concat(e.id))]},e.id)}})}),z?(0,f.Y)(Ag,{user:z,isOpen:m,onClose:function(){g(!1),p(null)},portalContainer:x.current,replId:o}):null]})})}var Am=function(e){var n=e.user,t=e.onViewDetails,r=Af(e.replId,n);return(0,f.Y)(L.S,{row:!0,justify:"end",children:(0,f.FD)(bx.in,{placement:"bottom end",trigger:(0,f.Y)(eY.K0,{alt:"Actions",children:(0,f.Y)(sO.A,{})}),children:[(0,f.Y)(bx.Dr,{label:"View details",onAction:t}),(0,f.Y)(bx.Dr,{label:n.banned?"Unban user":"Ban user",onAction:r})]})})};function Ag(e){var n=e.user,t=e.isOpen,r=e.onClose,i=e.portalContainer,o=Af(e.replId,n);return n?(0,f.Y)(aX.a,{isOpen:t,onRequestClose:r,portalContainer:i,children:(0,f.FD)(L.S,{css:Ad.modalContent,children:[(0,f.FD)(L.S,{row:!0,align:"center",gap:8,css:Ap.title,children:[(0,f.Y)(hU.e,{src:n.image||null,username:n.username||"",size:32}),(0,f.Y)(T.EY,{variant:"subheadBig",children:n.username||""}),n.banned?(0,f.Y)(I.a,{colorway:"negative",text:"Banned",variant:"muted"}):null]}),(0,f.FD)(L.S,{css:Ad.detailsRow,children:[(0,f.Y)(T.EY,{css:Ad.label,children:"User ID"}),(0,f.Y)(T.EY,{css:Ad.value,children:n.userId})]}),n.displayName?(0,f.FD)(L.S,{css:Ad.detailsRow,children:[(0,f.Y)(T.EY,{css:Ad.label,children:"Name"}),(0,f.Y)(T.EY,{css:Ad.value,children:n.displayName})]}):null,n.email?(0,f.FD)(L.S,{css:Ad.detailsRow,children:[(0,f.Y)(T.EY,{css:Ad.label,children:"Email"}),(0,f.Y)(T.EY,{css:Ad.value,children:n.email})]}):null,(0,f.FD)(L.S,{css:Ad.detailsRow,children:[(0,f.Y)(T.EY,{css:Ad.label,children:"Account created"}),(0,f.Y)(T.EY,{css:Ad.value,children:(0,f.Y)(eg.Dc,{dateFormat:"absolute",absoluteFormat:{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"},date:new Date(n.timeCreated)})})]}),(0,f.FD)(L.S,{css:Ad.detailsRow,children:[(0,f.Y)(T.EY,{css:Ad.label,children:"Last login"}),(0,f.Y)(T.EY,{css:Ad.value,children:(null==n?void 0:n.lastLoggedIn)?(0,f.Y)(eg.Dc,{dateFormat:"absolute",absoluteFormat:{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"},date:new Date(n.lastLoggedIn)}):"Never"})]}),(0,f.Y)(L.S,{row:!0,justify:"start",css:Ad.buttonsContainer,children:(0,f.Y)(eS.$n,{text:n.banned?"Unban User":"Ban User",onClick:o,colorway:n.banned?"primary":"negative",iconLeft:n.banned?void 0:(0,f.Y)(a0.A,{})})})]})}):(r(),null)}var Av=(0,V.x)({container:[j.wp.flex.column,j.wp.flex.growAndShrink(1),j.wp.height("100%")],header:[j.wp.border({color:k.LU.outlineDimmest,width:1,direction:"bottom"}),j.wp.overflowX("auto"),j.wp.overflowY("hidden")],tabs:[j.wp.flex.growAndShrink(1),{height:"100%",'[role="tablist"]':{height:"100%"}}],body:[j.wp.flex.growAndShrink(1),j.wp.overflowY("auto")],centered:[j.wp.flex.column,j.wp.justify.center,j.wp.align.center,j.wp.height("100%"),j.wp.p(16)],bannerWrapper:[j.wp.width("fit-content")],loadingContainer:[j.wp.flex.column,j.wp.justify.center,j.wp.align.center,j.wp.height("100%")]}),Aw={Content:function(){var e,n,t,r=(0,nI.A)(),i=(0,v._)((0,w.useState)(0),2),o=i[0],a=i[1],l=YQ({variables:{id:r}}),s=l.data,c=l.loading,u=(null==s||null==(e=s.getRepl)?void 0:e.__typename)==="Repl"?s.getRepl:null,d=null==u?void 0:u.hasAuthUsers;return c?(0,f.Y)(L.S,{css:Av.loadingContainer,children:(0,f.Y)(to.A,{})}):(null==u||null==(t=u.authorizations)||null==(n=t.manageAuth)?void 0:n.isAuthorized)?(0,f.FD)(L.S,{css:Av.container,children:[(0,f.Y)(L.S,{css:Av.header,children:(0,f.Y)(Z.tU,{css:Av.tabs,selectedIndex:o,onSelectionChange:a,children:(0,f.FD)(Z.wb,{"aria-label":"Authentication Options",children:[(0,f.Y)(Z.oz,{children:(0,f.FD)(L.S,{row:!0,align:"center",gap:8,children:[(0,f.Y)(N.A,{size:16})," Users"]})}),(0,f.Y)(Z.oz,{children:(0,f.FD)(L.S,{row:!0,align:"center",gap:8,children:[(0,f.Y)(oI.A,{size:16})," Configure"]})})]})})}),(0,f.Y)(eu.ui,{css:Av.body,elevated:!1,children:(0,f.Y)(L.S,{p:16,children:0===o?(0,f.Y)(Ah,{replId:r,hasAuthUsers:d}):(0,f.Y)(Ar,{replId:r,hasAuthUsers:d})})})]}):(0,f.Y)(L.S,{css:Av.centered,children:(0,f.Y)(L.S,{css:Av.bannerWrapper,children:(0,f.Y)(iI.N,{colorway:"warning",icon:(0,f.Y)(iF.A,{}),text:"You are not authorized to manage Auth."})})})},Icon:function(e){var n=e.size;return(0,f.Y)(n0.Vx.Provider,{value:{color:k.LU.orangeStrongest,size:n},children:(0,f.Y)(N.A,{})})},getTitle:function(){return"Auth (Beta)"},description:"Let users log in to your App using a prebuilt login page",category:nQ.bY.CloudServices,decode:function(e){return m.T(YG,e)}},Ay=t(20084),Ab=t(99615),AS=t(17513),AY=t(27469),AA=t(42377),Ax=t(83735),AC=t(71380),A_=t(36899),Ak=t(2560),AD=t(82326),AE=(0,ez.eU)(0),AR=(0,ez.eU)(function(e){return e(AE)<=AD.bX?"compact":"normal"}),AI={CURSOR_SAVE:"\x1b[s",CURSOR_RESTORE:"\x1b[u",ERASE_TO_END_OF_SCREEN:"\x1b[0J",COLOR_RESET:"\x1b[0m",COLOR_BRIGHT_BLACK:"\x1b[0;90m"},AF=(0,nF.AH)([j.wp.position.absolute,j.wp.left(8),j.wp.right(0),j.wp.zIndex(5)]);function AT(e){var n,t,r,i,o,a,l,s,c,u,d,p,h,m=e.lineNumber,g=e.paneHeight,Y=e.shell,A=e.sendToShellChannel,C=e.onClose,k=(0,w.useMemo)(function(){return null==Y?void 0:Y._term},[Y]),D=(0,w.useMemo)(function(){var e,n=null==k?void 0:k._core;return null!=(e=null==n?void 0:n._renderService.dimensions.css.cell)?e:{width:0,height:0}},[k]),E=(0,w.useRef)(""),R=(0,w.useRef)(!1),I=(0,w.useRef)(null),F=(0,v._)((0,w.useState)(64),2),T=F[0],P=F[1],U=(0,w.useRef)(null),N=(0,w.useCallback)(function(e){return P(e.height)},[P]),O=(t=(0,S.NC)(),i=(r=(0,v._)((0,w.useState)(null),2))[0],o=r[1],l=(a=(0,v._)((0,w.useState)(!1),2))[0],s=a[1],c=(0,w.useCallback)((n=(0,y._)(function(e){var n,r;return(0,b.YH)(this,function(i){switch(i.label){case 0:return s(!0),[4,t.sessions.create({sessionType:x.dF3.INLINE_CHAT})];case 1:if(!(n=i.sent()).ok)return s(!1),[2,n];return o(r=n.payload),[4,r.appendEvent({kind:"shellSuggestion",message:e,modelType:x.e3q.BASIC})];case 2:return i.sent(),[2]}})}),function(e){return n.apply(this,arguments)}),[t]),u=(0,w.useCallback)((0,y._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:if(!i)return[3,2];return[4,i.abortLastEvent()];case 1:e.sent(),s(!1),e.label=2;case 2:return[2]}})}),[i]),p=(d=(0,_.Rj)(function(){return null==i?void 0:i.reduce(AP,1)},[i],{default:{message:"",completed:!1}})).message,h=d.completed,(0,w.useEffect)(function(){h&&s(!1)},[h]),{sendMessage:c,stopMessage:u,loading:l,message:p,completed:h}),M=O.sendMessage,B=O.stopMessage,H=O.message,z=O.loading,W=O.completed;(0,w.useEffect)(function(){if(0===H.length){E.current="";return}E.current!==H&&(R.current&&(Y.write(AI.CURSOR_RESTORE),Y.write(AI.ERASE_TO_END_OF_SCREEN)),Y.write(AI.CURSOR_SAVE),Y.write(AI.COLOR_BRIGHT_BLACK),Y.write(H.replaceAll("\n","\r\n").trim()),Y.write(AI.COLOR_RESET),R.current=!0,E.current=H)},[Y,H]);var G=(0,w.useCallback)(function(){(0,ty.u4)(ty.AZ.AI_INLINE_EVENT,{action:"generation_stopped",intent_type:"generate",source:"shell"}),B(),R.current&&(Y.write(AI.CURSOR_RESTORE),Y.write(AI.ERASE_TO_END_OF_SCREEN),Y.write(AI.COLOR_RESET)),C()},[Y,B,C]);(0,w.useEffect)(function(){return Y.onData(function(){B(),C()}).dispose},[Y,B,C]);var V=(0,AD.D3)({id:(0,nU.A)(),inputRef:U,loading:z,onSubmit:function(){J?$():((0,ty.u4)(ty.AZ.AI_INLINE_EVENT,{action:"message_sent",intent_type:"generate",source:"shell",message_content:j}),Q())},onClose:G}),j=V.value,Z=V.setValue,q=V.onKeyDown,K=V.escPressed,$=(0,w.useCallback)(function(){if(!R.current||!H)return void G();Y.write(AI.CURSOR_RESTORE),Y.write(AI.ERASE_TO_END_OF_SCREEN),Y.write(AI.COLOR_RESET),A(H),(0,ty.u4)(ty.AZ.AI_INLINE_EVENT,{action:"suggestion_accepted",intent_type:"generate",source:"shell"}),C()},[H,Y,A,C,G]),J=W&&I.current===j,Q=(0,w.useCallback)(function(){I.current=j,(0,ty.u4)(ty.AZ.AI_INLINE_EVENT,{action:"message_sent",intent_type:"generate",source:"shell",message_content:j}),M(j)},[M,j]),X=D.height*(m+1)+8,ee="top";X+T>g&&(ee="bottom",X=g-D.height*(m+1)+4);var en=(0,S.Gk)(),et=(0,v._)((0,w.useState)(function(){return(0,ez.y$)()}),1)[0],er=(0,eW.Xr)(AE,{store:et}),ei=(0,eW.md)(AR,{store:et}),eo=(0,tw.A)(function(e){return er(e.width)});return(0,f.Y)(L.S,{css:AF,style:{top:"top"===ee?X:void 0,bottom:"bottom"===ee?X:void 0},children:(0,f.FD)(AD.y1,{requestMeasure:N,type:"generateCode",isCodeMirrorPocket:!1,innerRef:eo,children:[(0,f.Y)(AD.pd,{value:j,inputRef:U,onChange:function(e){return Z(e.currentTarget.value)},placeholder:"Enter a prompt to generate a shell command",onKeyDown:q,autoFocus:!0}),(0,f.FD)(AD.wi,{children:[(0,f.FD)(f.FK,{children:[(0,f.Y)(AD.sb,{type:"generateCode"}),W?(0,f.Y)(eY.K0,{alt:"Rerun the same prompt",onClick:function(){return Q()},size:12,colorway:"grey",children:(0,f.Y)(om.A,{})}):null]}),J?(0,f.FD)(f.FK,{children:[(0,f.Y)(eS.$n,{variant:"outlined",size:"small",text:"Reject",onClick:function(){(0,ty.u4)(ty.AZ.AI_INLINE_EVENT,{action:"suggestion_rejected",intent_type:"generate",source:"shell"}),G()}}),(0,f.Y)(eS.$n,{size:"small",text:"Accept",colorway:"blurple",onClick:$,dataCy:"ghostwriter-inline-accept-suggestion"})]}):(0,f.Y)(AD.XT,{escPressed:K,connecting:!en,loading:z,disabled:!j||!j.trim(),promptPresentation:"normal"===ei,onClick:function(){z?((0,ty.u4)(ty.AZ.AI_INLINE_EVENT,{action:"generation_stopped",intent_type:"generate",source:"shell",message_content:j}),B()):((0,ty.u4)(ty.AZ.AI_INLINE_EVENT,{action:"message_sent",intent_type:"generate",source:"shell",message_content:j}),Q())}})]})]})})}var AP={direction:"reverse",state:{message:"",completed:!1},reducer:function(e,n){var t;e.sender.type===x.utd.AI&&(null==(t=e.contents.contents)?void 0:t.$kind)==="shellSuggestionEventContents"&&e.contents.contents.shellSuggestionEventContents.content&&(n.message=e.contents.contents.shellSuggestionEventContents.content,n.completed=e.state===x.qOk.COMPLETE)}},AL=t(25243);function AU(e){var n=e.portsOpenedByThisShell,t=e.performPaneOperation,r=e.onClose,i=(0,A.A)().ports,o=(0,w.useCallback)(function(e){i.updateDotReplitPortsMapping(e,void 0)},[i]),a=(0,w.useCallback)(function(e){i.tryExposingPortAutomatically(e)},[i]);return(0,f.Y)(AL.yN,{configurations:n.map(function(e){return e.configuration}),openWebview:function(){t({operation:"open",secondary:!0,pane:{type:"webview",data:{ports:n.length>0?{type:"local",port:n[0].configuration.localPort}:void 0}}})},openNetworkingTool:function(){t({operation:"open",secondary:!0,pane:{type:"networking"}})},onClose:function(){null==r||r()},onDontExposePort:function(){1===n.length&&o(n[0].configuration.localPort)},onDoExposePort:function(){1===n.length&&a(n[0].configuration.localPort)}})}var AN=t(53876),AO=t(6678),AM=(0,nF.AH)([j.wp.height("100%"),j.wp.overflow("hidden"),{"& .xterm":[j.wp.pl(8),j.wp.pt(8),j.wp.pb(4),j.wp.height("100%")]}]),AB=(0,V.x)({container:[j.wp.height("100%"),{"&:focus-within .controls":{opacity:1}}],xterm:AM,xtermWithBorderRadius:[AM,{"& .xterm-viewport":[j.wp.borderRadius(0,0,8,8)]}]}),AH=(0,nF.AH)([j.wp.position.absolute,j.wp.flex.row,j.wp.top(8),j.wp.right(8),j.wp.height(30),j.wp.align.center,j.wp.zIndex(8),{opacity:0}]);function Az(e){var n,t,r=e.shell,i=e.shellMetadata,o=e.sendToShellChannel,a=e.shellRef,l=e.className,s=e.openSearchAndReplace,c=e.openAIWithMessage,u=e.performPaneOperation,d=e.isGeneratePromptVisible,p=e.currentPromptLineNumber,h=e.onOpenGeneratePrompt,m=e.onCloseGeneratePrompt,g=e.searchState,y=e.setSearchState,b=(0,n4.g)("accessibleTerminal").preferences.accessibleTerminal,S=(0,AC.kP)(null!=(n=null==i?void 0:i.cgroup)?n:void 0);r&&g.isSearching&&(t=(0,f.Y)(AN.p,{searchValue:g.searchText,setSearchValue:function(e){y({isSearching:!0,searchText:e})},findPrevious:r.findPrevious,findNext:r.findNext,exit:function(){return y({isSearching:!1})}}));var Y=(0,ip.m5)(),A=(0,A_.EF)().onContextMenu,x=(0,Ak.P)({xterm:r,isOutputsTerminal:!1,openAIWithMessage:c,openShellSearch:function(e){y({isSearching:!0,searchText:e})},openSearchAndReplace:s,openGeneratePrompt:h});(0,AO.Z)({xterm:r,onAskAssistant:function(e){c((0,AA.yt)(e))}}),(0,w.useEffect)(function(){null==r||r.fit()},[r,S]);var C=(0,v._)((0,w.useState)(0),2),_=C[0],k=C[1],D=(0,tw.A)(function(e){k(e.height)},{type:"throttle",wait:200});return(0,f.FD)(L.S,{className:l,innerRef:D,css:AB.container,onKeyDown:function(e){"f"===e.key&&(0,Ax.T$)(e)&&(y({isSearching:!0,searchText:""}),e.preventDefault())},children:[!b&&(0,f.Y)(AY.s,{children:'Enable "Accessible Terminal" in Workspace Settings to use a screen reader with the shell.'}),(0,f.FD)(L.S,{css:[j.wp.coverContainer,j.wp.flex.column],onClick:function(){d&&(m(),null==r||r.focus())},children:[(0,f.Y)(L.S,{css:[Y?AB.xterm:AB.xtermWithBorderRadius,j.wp.flex.growAndShrink(1),d?{pointerEvents:"none",filter:"opacity(0.75)"}:null],innerRef:a,onContextMenu:function(e){return A(e,{command:x})}}),(0,f.Y)(AU,{portsOpenedByThisShell:S,performPaneOperation:u,onClose:function(){null==r||r.focus(),null==r||r.fit()}})]}),r&&d?(0,f.Y)(AT,{lineNumber:p,paneHeight:_,shell:r,sendToShellChannel:o,onClose:function(){m(),r.focus()}}):null,r?(0,f.Y)(L.S,{className:"controls",css:AH,children:t}):null]})}var AW=t(26716),AG=t(64254).hp,AV=(0,nF.AH)([j.wp.position.relative,j.wp.height("100%")]);function Aj(e){var n,t,r,i,o,a,l,s=e.shellId,c=e.paneId,u=e.performPaneOperation,d=e.userId,p=e.xterm,h=e.xtermRef,m=e.currentPromptLineNumber,g=e.isGeneratePromptVisible,Y=e.onOpenGeneratePrompt,A=e.onCloseGeneratePrompt,x=e.searchState,C=e.setSearchState,_=(0,v._)((0,w.useState)(void 0),2),k=_[0],D=_[1],E=(0,w.useCallback)(function(e){u({operation:"open",secondary:!0,pane:{type:"searchReplace",data:{initialQuery:e}}})},[u]),R=(0,AW.H)({openPane:function(e){u({operation:"open",secondary:!0,pane:e})}}),I=(0,S.dm)().assistantMode,F=(0,S.jt)(),T=(0,w.useCallback)(function(e){(0,ty.u4)(ty.AZ.ASSISTANT_USED,{action:"message_sent",assistant_mode:I,message_content:e,message_source:"shell",is_agent_repl:F}),R(e)},[F,I,R]),P=(0,w.useRef)(null);(0,nf.b)((n=(0,y._)(function(e,n){var t,r,i,o,a,l,u;return(0,b.YH)(this,function(f){var h;return(t=n.signal,p)?(i=(r=e.shellExec.connect.stream({id:s,userId:d,processViewId:c,size:p.getSize()},{signal:t})).reqWritable,o=r.resReadable,P.current=a=function(e){i.write({$kind:"stdin",stdin:new Uint8Array(AG.from(e))})},l=p.onResize((h=(0,y._)(function(n){return(0,b.YH)(this,function(t){switch(t.label){case 0:return[4,e.shellExec.resize.rpc({id:s,userId:d,processViewId:c,size:n})];case 1:return t.sent(),[2]}})}),function(e){return h.apply(this,arguments)})),u=p.onData(a),p.write("\x1bc"),(0,y._)(function(){var e,n,t,r,i,a,l;return(0,b.YH)(this,function(s){switch(s.label){case 0:e=!1,n=!1,s.label=1;case 1:s.trys.push([1,6,7,12]),r=(0,nn._)(o),s.label=2;case 2:return[4,r.next()];case 3:if(!(e=!(i=s.sent()).done))return[3,5];if(!(a=i.value).ok)return p.clear(),[2];"output"===a.payload.$kind&&p.write(a.payload.output),s.label=4;case 4:return e=!1,[3,2];case 5:return[3,12];case 6:return l=s.sent(),n=!0,t=l,[3,12];case 7:if(s.trys.push([7,,10,11]),!(e&&null!=r.return))return[3,9];return[4,r.return()];case 8:s.sent(),s.label=9;case 9:return[3,11];case 10:if(n)throw t;return[7];case 11:return[7];case 12:return[2]}})})(),[2,function(){P.current=null,i.close(),l.dispose(),u.dispose()}]):[2]})}),function(e,t){return n.apply(this,arguments)}),[p,s,d,c]),(0,nf.b)((t=(0,y._)(function(e,n){var t,r,i,o,a,l,c,u,d;return(0,b.YH)(this,function(p){switch(p.label){case 0:t=n.signal,r=e.shellExec.monitor.subscribe({id:s},{signal:t}).resReadable,i=!1,o=!1,p.label=1;case 1:p.trys.push([1,6,7,12]),l=(0,nn._)(r),p.label=2;case 2:return[4,l.next()];case 3:if(!(i=!(c=p.sent()).done))return[3,5];if(!(u=c.value).ok)if("NO_PROCESS_MATCHING_ID"===u.payload.code)return[3,4];else return[3,5];"NotStarted"!==u.payload.state&&u.payload.cgroupPath&&D({cgroup:u.payload.cgroupPath}),p.label=4;case 4:return i=!1,[3,2];case 5:return[3,12];case 6:return d=p.sent(),o=!0,a=d,[3,12];case 7:if(p.trys.push([7,,10,11]),!(i&&null!=l.return))return[3,9];return[4,l.return()];case 8:p.sent(),p.label=9;case 9:return[3,11];case 10:if(o)throw a;return[7];case 11:return[7];case 12:return[2]}})}),function(e,n){return t.apply(this,arguments)}),[s]);var U=(0,w.useCallback)(function(e){return!!P.current&&(P.current(e),!0)},[P]);return i=(r={sendInput:U,paste:function(e){return!!p&&(p.paste(e),!0)}}).sendInput,o=r.paste,a=(0,is.useRouter)(),l=(0,ip.Po)(a),(0,w.useEffect)(function(){if(l){var e=function(e,n){i(n)?(0,AS.XE)(e):(0,AS.Cf)(e)},n=function(e){"unknown"===e||(0,ar.A)(e)},t=function(t){(0,AS.V)(t,function(t){var r=t.type;switch(r){case Ab.tF.SHELL_INSERT_INPUT:e(t.id,t.input);break;case Ab.tF.SHELL_COMMAND:n(t.command);break;case Ab.tF.SHELL_PASTE_TEXT:o(t.text)?(0,AS.XE)(t.id):(0,AS.Cf)(t.id);break;default:(0,ar.A)(r)}})};return window.addEventListener("message",t),function(){window.removeEventListener("message",t)}}},[l,i,o]),(0,f.Y)(L.S,{css:AV,children:(0,f.Y)(Az,{shell:p,shellMetadata:k,shellRef:h,performPaneOperation:u,currentPromptLineNumber:m,isGeneratePromptVisible:g,sendToShellChannel:U,openSearchAndReplace:E,openAIWithMessage:T,onOpenGeneratePrompt:Y,onCloseGeneratePrompt:A,searchState:x,setSearchState:C})})}var AZ=t(50025),Aq=t(2296),AK=t(65518),A$=t(2015),AJ=(0,V.x)({wrapper:[j.wp.height("100%"),j.wp.flex.column],headerWrapper:[j.wp.flex.growAndShrink(0),j.wp.align.center,j.wp.justify.spaceBetween,j.wp.rowWithGap(4),j.wp.px(4),j.wp.border({direction:"bottom",color:k.LU.outlineDimmest}),j.wp.height(28)],headerGroupLeft:[j.wp.flex.growAndShrink(1)],headerGroupRight:[j.wp.flex.shrink(0)],failureWrapper:[j.wp.color.accentNegativeStronger],avatarWrapper:[j.wp.flex.growAndShrink(0),j.wp.rowWithGap(4),j.wp.align.center],terminalWrapper:[j.wp.height("100%"),j.wp.flex.growAndShrink(1)],shellListItemWrapper:[j.wp.width("100%"),j.wp.overflow("hidden")],shellListButton:[j.wp.viewStyle,j.wp.reset.button,j.wp.p(2),j.wp.height(22),j.wp.rowWithGap(8),j.wp.align.center,i9.b.nofill,j.wp.flex.shrink(1),{transitionProperty:"background-color, box-shadow, opacity",opacity:.8}],shellListButtonLabel:[j.wp.display.flex,j.wp.align.center,j.wp.rowWithGap(8),j.wp.flex.shrink(1)],shellListItem:[j.wp.display.flex,j.wp.rowWithGap(8),j.wp.borderRadius(),j.wp.px(6),j.wp.py(4),j.wp.align.center,j.wp.color.foregroundDefault,j.wp.cursor.pointer,{transitionProperty:"background-color, box-shadow",backgroundColor:"transparent",borderWidth:1,borderStyle:"solid",borderColor:"transparent",outline:"2px solid ".concat(k.LU.accentPrimaryDefault),outlineOffset:"-2px",outlineColor:"transparent"},{"&[data-hovered],&[data-focused]":{backgroundColor:k.LU.interactiveBackground},"&[data-selected]":{backgroundColor:k.LU.interactiveBackgroundActive},"&[aria-disabled]":{color:k.LU.foregroundDimmest,cursor:"not-allowed"}}],shellListItemText:[j.wp.font.code,j.wp.fontSize(k.LU.fontSizeSmall),j.wp.flex.shrink(0)],shellListItemCommand:[j.wp.font.code,j.wp.fontSize(k.LU.fontSizeSmall),j.wp.flex.growAndShrink(1),{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}],shellListCurrentText:[j.wp.fontSize(k.LU.fontSizeSmall),j.wp.color.greyDefault],shellListNotRunningText:[j.wp.fontSize(k.LU.fontSizeSmall),j.wp.color.greyDefault],runningShellsCountBadge:[j.wp.width(18),j.wp.height(18),j.wp.align.center,j.wp.justify.center,j.wp.backgroundColor.backgroundHighest,j.wp.borderRadius("full"),j.wp.fontSize(k.LU.fontSizeSmall)]});function AQ(e){var n,t,r,i,o,a,l,s,c,u,d,p,h,m,y,b,S,Y,x,C,_,k,D,E,R,I,F,T,P,U,N,O,M,B,H,z,W=e.paneId,G=e.performPaneOperation,V=e.emitPaneMetrics,j=e.initialPwd,Z=e.initialCmd,q=e.isActive,K=(0,v._)((0,w.useState)({state:"not-connected"}),2),$=K[0],J=K[1],Q="connected"===$.state?$.id:void 0,X=(0,ok.T)(),en=(0,w.useCallback)(function(e){return J({state:"connected",id:e})},[J]),et=(r=(n={isActive:q,performPaneOperation:G,emitPaneMetrics:V}).performPaneOperation,i=n.emitPaneMetrics,o=n.isActive,a=(0,w.useCallback)(function(e){r({operation:"open",secondary:!0,pane:{type:(0,nQ.QY)(e),data:e}})},[r]),l=(0,w.useCallback)(function(e,n){r({operation:"open",secondary:!0,pane:{type:"webview",data:{ports:{type:"local",path:e,port:n}}}})},[r]),s=(0,A.A)().fs,c=(0,nI.A)(),u=(0,w.useRef)(null),d=(0,w.useRef)(""),h=(p=(0,v._)((0,w.useState)(0),2))[0],m=p[1],b=(y=(0,v._)((0,w.useState)(!1),2))[0],S=y[1],Y=(0,w.useRef)(!1),x=(0,AZ.QU)({onFTCSState:function(e){var n=e.state;n===AZ.Od.CommandExecuted&&(Y.current=!0),n===AZ.Od.CommandFinished&&(Y.current=!1),u.current=n},onOpenGeneratePrompt:function(){Y.current||S(!0)},onUpdateCurrentPromptLineNumber:m}),C=(0,w.useCallback)(function(e,n){if(n.startsWith("A")){var t=n.replace(/^A;/,"");(0,ty.u4)(ty.AZ.SHELL_COMMAND_EVALED,{context:t,replId:c,api:"pid2",pwd:d.current})}n.startsWith("B")&&(d.current=n.replace(/^B;/,""))},[c]),_=(0,w.useCallback)(function(e){return r({operation:"open",pane:e,secondary:!0})},[r]),D=(k=(0,v._)((0,AK.A)({openFile:a,listFiles:s.listFiles,openWebview:l,onInBandOSCMessages:(t={},(0,g._)(t,AZ.n8,x),(0,g._)(t,82,C),t),openPane:_,emitPaneMetrics:i}),2))[0],E=k[1],R=(0,w.useCallback)(function(){Y.current||((0,ty.u4)(ty.AZ.AI_SHELL_CONTEXT_MENU_GENERATE_CLICKED),S(!0))},[]),I=(0,w.useCallback)(function(){S(!1)},[]),F=(0,w.useId)(),T="scope-shell-".concat(F),(0,ps.RD)(T,o),(0,ps.SJ)(function(){return[AZ.Ws.id,{run:function(){Y.current||S(!0)},scope:T,bubble:!1}]},[S]),(0,tr.HP)(function(){return D},[D]),U=(P=(0,v._)((0,w.useState)({isSearching:!1}),2))[0],N=P[1],O=(0,w.useCallback)(function(){var e;N({isSearching:!0,searchText:null!=(e=null==D?void 0:D._term.getSelection())?e:""})},[D]),M=(0,w.useCallback)(function(){N({isSearching:!1})},[]),B=(0,w.useCallback)(function(){U.isSearching?M():O()},[O,M,U]),H=(0,w.useCallback)(function(){null==D||D.clear()},[D]),z=(0,w.useMemo)(function(){return[{match:vc.G2,data:{type:"action",label:"Clear Shell",icon:(0,f.Y)(tP.A,{}),run:H}},{match:vc.G2,data:{type:"action",label:"Find in Shell",icon:(0,f.Y)(uo.A,{}),run:O}}]},[O,H]),(0,tr.Qt)(function(){return{commands:[{commands:z}],type:"shell"}},[z]),{xterm:D,xtermRef:E,searchState:U,setSearchState:N,toggleSearch:B,isGeneratePromptVisible:b,currentPromptLineNumber:h,onOpenGeneratePrompt:R,onCloseGeneratePrompt:I,clearShell:H});return(0,f.FD)(L.S,{css:AJ.wrapper,children:[(0,f.Y)(AX,{step:$,setStep:J,shellId:Q,initialCmd:Z,initialPwd:j,switchShellSession:en,toggleSearch:et.toggleSearch,clearShell:et.clearShell}),(0,f.FD)(L.S,{css:AJ.terminalWrapper,children:[X&&void 0!==Q?(0,f.Y)(Aj,(0,ee._)({shellId:Q,paneId:W,performPaneOperation:G,userId:X},et)):null,"errored"===$.state?(0,f.Y)(L.S,{css:AJ.failureWrapper,p:8,children:"Failed to load the Shell."}):null]})]})}function AX(e){var n=e.shellId,t=e.step,r=e.setStep,i=e.initialPwd,o=e.initialCmd,a=e.switchShellSession,l=e.toggleSearch,s=e.clearShell,c=(0,w.useRef)(!1),u=(0,e7.I)(function(e){var n;return n=(0,y._)(function(n){var t;return(0,b.YH)(this,function(a){switch(a.label){case 0:if(c.current)return[2];return c.current=!0,[4,e.shellExec.spawn.rpc({cmd:"bash",cwd:(null==n?void 0:n.restoreFromPaneState)?i:void 0,initialCmd:(null==n?void 0:n.restoreFromPaneState)?o:void 0,autoCleanup:!0})];case 1:return(t=a.sent()).ok?r({state:"connected",id:t.payload.id}):"UNEXPECTED_DISCONNECT"===t.payload.code?r({state:"not-connected"}):r({state:"errored"}),c.current=!1,[2]}})}),function(e){return n.apply(this,arguments)}},[r,i,o]),d=(0,e7.I)(function(e){return(0,y._)(function(){return(0,b.YH)(this,function(t){switch(t.label){case 0:if(!n)return[3,2];return[4,e.shellExec.kill.rpc({id:n})];case 1:t.sent(),t.label=2;case 2:return[2]}})})},[n]);return(0,f.FD)(L.S,{css:AJ.headerWrapper,children:[(0,f.FD)(L.S,{css:AJ.headerGroupLeft,row:!0,gap:2,align:"center",children:[(0,f.Y)(A0,{shellId:n,spawnShell:u,switchShellSession:a,step:t}),(0,f.Y)(A4,{})]}),(0,f.FD)(L.S,{css:AJ.headerGroupRight,row:!0,gap:4,align:"center",children:[(0,f.Y)(eY.K0,{alt:"Search in Shell",onClick:function(){l()},children:(0,f.Y)(uo.A,{color:k.LU.foregroundDimmest})}),(0,f.Y)(eY.K0,{alt:"Clear Output",onClick:function(){s()},children:(0,f.Y)(tP.A,{color:k.LU.foregroundDimmest})}),(0,f.Y)(eY.K0,{alt:"Kill Shell",disabled:void 0===d,onClick:function(){null==d||d()},children:(0,f.Y)(dS.A,{color:k.LU.foregroundDimmest})})]})]})}function A0(e){var n,t=e.step,r=e.shellId,i=e.spawnShell,o=e.switchShellSession,a=(0,v._)((0,w.useState)([]),2),l=a[0],s=a[1],c=l.find(function(e){return e.id===r});return((0,nf.b)((n=(0,y._)(function(e,n){var t,r,i,o,a,l,c,u,d;return(0,b.YH)(this,function(p){switch(p.label){case 0:t=n.signal,r=e.shellExec.monitorAll.subscribe({},{signal:t}).resReadable,i=!1,o=!1,p.label=1;case 1:p.trys.push([1,6,7,12]),l=(0,nn._)(r),p.label=2;case 2:return[4,l.next()];case 3:if(!(i=!(c=p.sent()).done))return[3,5];if(!(u=c.value).ok)return[2];s(u.payload.processes.filter(function(e){return"Running"===e.state})),p.label=4;case 4:return i=!1,[3,2];case 5:return[3,12];case 6:return d=p.sent(),o=!0,a=d,[3,12];case 7:if(p.trys.push([7,,10,11]),!(i&&null!=l.return))return[3,9];return[4,l.return()];case 8:p.sent(),p.label=9;case 9:return[3,11];case 10:if(o)throw a;return[7];case 11:return[7];case 12:return[2]}})}),function(e,t){return n.apply(this,arguments)}),[]),(0,w.useEffect)(function(){"not-connected"===t.state&&(null==i||i({restoreFromPaneState:!0}))},[i,t.state]),(0,w.useEffect)(function(){"connected"===t.state&&(l.find(function(e){return e.id===r})||(l.length>0?o(l[0].id):null==i||i()))},[r,l,i,t.state,o]),c&&"Running"===c.state)?(0,f.Y)(f.FK,{children:(0,f.FD)(bx.in,{trigger:(0,f.FD)(cE.$,{css:AJ.shellListButton,children:[(0,f.Y)(rS.A,{size:12}),(0,f.Y)(L.S,{css:AJ.shellListButtonLabel,children:(0,f.Y)(A2,{shellState:c})}),(0,f.Y)(A1,{userIdsToProcessViewIds:c.userIdsToProcessViewIds}),l.length>1?(0,f.Y)(P.m_,{tooltip:"".concat(l.length," Shells are running"),children:(0,f.Y)(L.S,{css:AJ.runningShellsCountBadge,children:l.length})}):null]}),children:[l.filter(function(e){return"Running"===e.state}).sort(function(e,n){var t,r;return("Running"===e.state&&null!=(t=e.idx)?t:0)-("Running"===n.state&&null!=(r=n.idx)?r:0)}).map(function(e){var n,t=null!=(n=e.command)?n:e.previousCommand,r=e.cwd.replace(/^\/home\/runner/,"~"),i="".concat(r).concat(t?": ".concat(t):""),a=e.id===c.id;return(0,f.FD)(c8.Dr,{css:AJ.shellListItem,onAction:function(){o(e.id)},textValue:i,children:[(0,f.Y)(A2,{shellState:e}),a?(0,f.Y)(T.EY,{css:AJ.shellListCurrentText,children:"Current"}):null,(0,f.Y)(A1,{userIdsToProcessViewIds:e.userIdsToProcessViewIds})]},e.id)}),(0,f.Y)(bx.wv,{}),(0,f.Y)(bx.Dr,{label:"New Shell",icon:(0,f.Y)(tT.A,{}),onAction:function(){null==i||i()}})]})}):null}function A1(e){var n=e.userIdsToProcessViewIds,t=(0,gP.Q4)(),r=(0,w.useMemo)(function(){var e;return null!=(e=Object.keys(null!=n?n:{}).map(function(e){return parseInt(e,10)}).map(function(e){return t.find(function(n){return n.id===e})}).filter(Boolean))?e:[]},[n,t]);return 0===r.length?null:(0,f.Y)(L.S,{css:AJ.avatarWrapper,children:r.map(function(e){return(0,f.Y)(A$.A,{user:e,size:16},e.id)})})}function A2(e){var n,t=e.shellState;if("Running"!==t.state)return(0,f.Y)(T.EY,{css:AJ.shellListNotRunningText,children:"Not Running"});var r=void 0!==t.command||void 0!==t.previousCommand;return(0,f.FD)(L.S,{css:AJ.shellListItemWrapper,row:!0,children:[(0,f.Y)(T.EY,{css:AJ.shellListItemText,children:t.cwd.replace(/^\/home\/runner/,"~")}),r?(0,f.FD)(f.FK,{children:[":\xa0",(0,f.Y)(T.EY,{css:AJ.shellListItemCommand,style:{color:void 0===t.command?k.LU.greyDefault:void 0},children:null!=(n=t.command)?n:t.previousCommand})]}):null]})}function A4(){var e=(0,Aq.A)();return(null==e?void 0:e.status)==="rebuilding"||(null==e?void 0:e.status)==="rebuilding-after-error"?(0,f.Y)(P.m_,{tooltip:"The environment is rebuilding in the background due to a change in configuration files",children:(0,f.Y)(to.A,{color:k.LU.foregroundDimmest})}):null}var A5=h.ZU.Object({type:h.ZU.Literal("shell"),data:h.ZU.Optional(h.ZU.Object({initialPwd:h.ZU.Optional(h.ZU.String()),initialCmd:h.ZU.Optional(h.ZU.String())}))}),A3={Content:function(e){var n,t,r=e.pane,i=e.options;return(0,f.Y)(AQ,{paneId:i.paneId,isActive:i.isActive,initialPwd:null==(n=r.data)?void 0:n.initialPwd,initialCmd:null==(t=r.data)?void 0:t.initialCmd,performPaneOperation:i.performPaneOperation,emitPaneMetrics:i.emitPaneMetrics})},Icon:function(e){var n=e.size;return(0,f.Y)(n0.Vx.Provider,{value:{color:k.LU.blueStrongest,size:n},children:(0,f.Y)(og.A,{})})},getTitle:function(){return"Shell"},description:"Directly access your App through a command line interface (CLI)",category:nQ.bY.WorkspaceFeatures,decode:function(e){return m.T(A5,e)}};function A6(){var e=(0,en._)(["\n  query SshPane($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        authorizations {\n          connectUsingSsh {\n            isAuthorized\n            message\n            code\n          }\n        }\n        org {\n          id\n          type\n        }\n      }\n      ... on ReplRedirect {\n        replUrl\n      }\n      ... on SubscriptionExpiredError {\n        replId\n      }\n    }\n  }\n"]);return A6=function(){return e},e}function A8(){var e=(0,en._)(["\n  query SshPaneCurrentUser {\n    currentUser {\n      id\n      __typename\n      publicSshKeys {\n        ... on PublicSshKeysOutput {\n          keys {\n            id\n            key\n            label\n            timeCreated\n          }\n        }\n        ... on UnauthorizedError {\n          message\n        }\n      }\n    }\n  }\n"]);return A8=function(){return e},e}var A7={},A9=(0,et.J1)(A6()),xe=(0,et.J1)(A8()),xn=t(39640),xt=t(23906),xr=t(75061),xi=t(99102),xo=t(36775),xa=t(69507),xl=t(1649),xs=t(74601),xc=t(76686),xu=t(88510),xd=t(30736),xp=t(1998),xf=t(26976),xh=t(667);function xm(e){return(0,f.FD)(xh.A,(0,nt._)((0,ee._)({},e),{children:[(0,f.FD)("g",{clipPath:"url(#clip0_6530_283)",children:[(0,f.Y)("mask",{id:"mask0_6530_283",width:"24",height:"24",x:"0",y:"0",maskUnits:"userSpaceOnUse",children:(0,f.Y)("path",{fill:"#fff",fillRule:"evenodd",d:"M17.019 23.836c.378.147.809.138 1.19-.046l4.942-2.377A1.5 1.5 0 0 0 24 20.06V3.939a1.5 1.5 0 0 0-.85-1.352L18.21.21a1.494 1.494 0 0 0-1.705.29l-9.46 8.63-4.12-3.128a.999.999 0 0 0-1.276.057L.327 7.261a1 1 0 0 0-.001 1.48L3.899 12 .326 15.26a1 1 0 0 0 .001 1.479L1.65 17.94a.999.999 0 0 0 1.276.057l4.12-3.128 9.46 8.63c.15.15.325.262.514.336Zm.985-17.284L10.826 12l7.178 5.448V6.552Z",clipRule:"evenodd"})}),(0,f.FD)("g",{mask:"url(#mask0_6530_283)",children:[(0,f.Y)("path",{fill:"#0065A9",d:"M23.15 2.591 18.207.211A1.495 1.495 0 0 0 16.5.5L.312 15.26a1 1 0 0 0 0 1.479l1.323 1.202a1 1 0 0 0 1.277.057l19.495-14.79A.993.993 0 0 1 24 4v-.057a1.5 1.5 0 0 0-.85-1.352Z"}),(0,f.Y)("g",{filter:"url(#filter0_d_6530_283)",children:(0,f.Y)("path",{fill:"#007ACC",d:"m23.15 21.409-4.944 2.38A1.495 1.495 0 0 1 16.5 23.5L.312 8.74a1 1 0 0 1 0-1.479L1.636 6.06a1 1 0 0 1 1.277-.057l19.495 14.79A.993.993 0 0 0 24 20v.058a1.5 1.5 0 0 1-.85 1.35Z"})}),(0,f.Y)("g",{filter:"url(#filter1_d_6530_283)",children:(0,f.Y)("path",{fill:"#1F9CF0",d:"M18.206 23.79a1.495 1.495 0 0 1-1.706-.29c.553.553 1.5.162 1.5-.621V1.12C18 .34 17.053-.054 16.5.5a1.496 1.496 0 0 1 1.706-.29l4.944 2.377c.52.25.85.776.85 1.352v16.122a1.5 1.5 0 0 1-.85 1.352l-4.944 2.377Z"})}),(0,f.Y)("path",{fill:"url(#paint0_linear_6530_283)",fillRule:"evenodd",d:"M17.004 23.836c.378.147.81.138 1.19-.046l4.942-2.377a1.5 1.5 0 0 0 .85-1.352V3.939a1.5 1.5 0 0 0-.85-1.352L18.195.21A1.494 1.494 0 0 0 16.49.5L7.03 9.13 2.91 6.002a.999.999 0 0 0-1.276.057L.313 7.261a1 1 0 0 0-.002 1.48L3.885 12 .31 15.26a1 1 0 0 0 .002 1.479l1.321 1.202a.999.999 0 0 0 1.276.057l4.12-3.128 9.46 8.63c.15.15.325.263.514.336Zm.985-17.284L10.812 12l7.177 5.448V6.552Z",clipRule:"evenodd",opacity:".25"})]})]}),(0,f.FD)("defs",{children:[(0,f.FD)("filter",{id:"filter0_d_6530_283",width:"28.015",height:"22.139",x:"-2.015",y:"3.799",colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",children:[(0,f.Y)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,f.Y)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,f.Y)("feOffset",{}),(0,f.Y)("feGaussianBlur",{stdDeviation:"1"}),(0,f.Y)("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),(0,f.Y)("feBlend",{in2:"BackgroundImageFix",mode:"overlay",result:"effect1_dropShadow_6530_283"}),(0,f.Y)("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_6530_283",result:"shape"})]}),(0,f.FD)("filter",{id:"filter1_d_6530_283",width:"11.5",height:"27.876",x:"14.5",y:"-1.938",colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",children:[(0,f.Y)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,f.Y)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,f.Y)("feOffset",{}),(0,f.Y)("feGaussianBlur",{stdDeviation:"1"}),(0,f.Y)("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),(0,f.Y)("feBlend",{in2:"BackgroundImageFix",mode:"overlay",result:"effect1_dropShadow_6530_283"}),(0,f.Y)("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_6530_283",result:"shape"})]}),(0,f.FD)("linearGradient",{id:"paint0_linear_6530_283",x1:"11.985",x2:"11.985",y1:".062",y2:"23.938",gradientUnits:"userSpaceOnUse",children:[(0,f.Y)("stop",{stopColor:"#fff"}),(0,f.Y)("stop",{offset:"1",stopColor:"#fff",stopOpacity:"0"})]}),(0,f.Y)("clipPath",{id:"clip0_6530_283",children:(0,f.Y)("path",{fill:"#fff",d:"M0 0h24v24H0z"})})]})]}))}function xg(){return(0,f.Y)(xp.A,{src:"/public/images/cursor-ide-logo.png",width:24,height:24,alt:"Cursor Logo"})}function xv(e){var n=e.editor,t=e.disabled,r=(0,xc.A)(n),i=r.openEditor,o=r.onConfirmConfig,a=r.isConfigModalOpen,l=r.closeConfigModal;return(0,f.FD)(eu.ui,{css:xb.connectInstructions,elevated:!0,children:[(0,f.FD)(L.S,{css:xb.connectHeader,children:[(0,f.FD)(T.Y9,{level:3,children:["Connect to ","vscode"===n?"VS Code":"Cursor"]}),(0,f.FD)(T.EY,{color:"dimmer",children:["One-click SSH setup will launch"," ","vscode"===n?"VS Code":"Cursor"," and configure keys for you."]})]}),(0,f.Y)(eS.$n,{text:t?"SSH Key Setup Required":"Launch ".concat("vscode"===n?"VS Code":"Cursor"),iconLeft:"vscode"===n?(0,f.Y)(xm,{}):(0,f.Y)(xg,{}),css:xb.launchEditorButton,disabled:t,onClick:function(){(0,ty.u4)(ty.AZ.OPEN_IN_VSCODE_CLICKED,{source:"ssh_pane",editor:n}),i()}}),(0,f.Y)(aX.a,{isOpen:a,onRequestClose:l,centered:!0,children:(0,f.Y)(xa.A,{onConfirm:o})})]})}function xw(e){var n=e.sshHostname,t=e.sshUser,r=e.sshPort,i=(0,xs.A)(),o="ssh -i ".concat(i,"/.ssh/replit -p ").concat(r," ").concat(t,"@").concat(n);return(0,f.FD)(eu.ui,{css:xb.connectInstructions,elevated:!0,children:[(0,f.FD)(L.S,{css:xb.connectHeader,children:[(0,f.Y)(T.Y9,{level:3,children:"Connect manually"}),(0,f.Y)(T.EY,{color:"dimmer",children:"Use the command below to connect via CLI or another IDE."})]}),(0,f.Y)(xo.A,{code:o,header:"Shell command",multiline:!1,onCopy:function(){(0,ty.u4)(ty.AZ.COPY_SSH_KEY_COMMAND_CLICKED,{source:"ssh_pane"})}})]})}function xy(e){var n=e.onPurchaseComplete,t=e.org,r=e.sshAuthz,i=(0,v._)((0,w.useState)(!1),2),o=i[0],a=i[1];return r.code===ic.S4.RequiresActiveSubscription&&(null==t?void 0:t.type)!==ic.NT.Team?(0,f.FD)(L.S,{gap:16,children:[(0,f.FD)(T.Y9,{level:3,variant:"subheadDefault",children:["SSH is only available to Replit ",iv.en," Members."]}),(0,f.FD)(T.EY,{children:["With SSH, you can access your App's shell remotely. SSH enables workflows like easy file transfer or using your favorite local IDE to edit your code on Replit."," ",(0,f.Y)("a",{href:"https://docs.replit.com/replit-workspace/ssh",target:"_blank",children:"Learn more here"})]}),(0,f.Y)(eS.$n,{onClick:function(){return a(!0)},text:"Join Replit ".concat(iv.en),iconLeft:(0,f.Y)(cP.A,{}),colorway:"blurple"}),(0,f.Y)(ih.A,{isOpen:o,onClose:function(){return a(!1)},reloadPageAfterPurchaseComplete:!0,type:"purchase",onPurchaseComplete:n,analyticsContext:{upgrade:{context:"workspace_ssh_pane"}}})]}):(0,f.Y)(iI.N,{colorway:"warning",text:r.message})}var xb=(0,V.x)({tabContainer:[j.wp.colWithGap(8),j.wp.p(8)],connectEmptyState:[j.wp.center,j.wp.border({color:k.LU.outlineDefault,width:1,style:"dashed"}),j.wp.borderRadius(4),j.wp.py(24),j.wp.px(12)],connectHeader:[j.wp.colWithGap(4)],connectInstructions:[j.wp.colWithGap(12),j.wp.p(8),j.wp.borderRadius(4)],launchEditorButton:[j.wp.borderRadius(8)]});function xS(e){var n=e.legacyKeys,t=e.openFile,r=(0,nI.A)(),i="legacy-ssh-keys-warning-".concat(r),o=(0,v._)((0,w.useState)(function(){return!eB.A.get(i,"boolean")}),2),a=o[0],l=o[1],s=(0,w.useRef)(!1);return((0,w.useEffect)(function(){return eB.A.get(i,"boolean")||l(!0),function(){s.current&&eB.A.set(i,!0)}},[i]),n&&0!==n.length&&a)?(0,f.Y)(L.S,{children:(0,f.Y)(un.d,{colorway:"warning",iconLeft:(0,f.Y)(iF.A,{}),text:"Don't see your SSH keys here? We're moving from App-level keys to user-level keys. Click here to view your existing keys and re-add them using the 'New SSH Key' button above.",onClick:function(){t(xi.L),s.current=!0}})}):null}function xY(e){var n,t,r,i,o,a,l=(o=(0,ee._)({},A7,void 0),er.I(xe,o)),s=l.data,c=l.loading,u=(0,v._)((0,w.useState)(!1),2),d=u[0],p=u[1],h=(0,v._)((0,w.useState)(0),2),m=h[0],g=h[1],S=(t=(n=(0,v._)((0,w.useState)(null),2))[0],r=n[1],i=(0,A.A)().fs,(0,w.useEffect)(function(){function e(){return(e=(0,y._)(function(){var e;return(0,b.YH)(this,function(n){switch(n.label){case 0:return[4,i.readFile(xi.L)];case 1:if((e=n.sent()).error===eX.Tr.NotFound||e.error===eX.Tr.IsDirectory)return[2];if(e.error)throw Error("Unexpected error reading authorized keys");return r(e.content.toString().split("\n").map(function(e){return e.startsWith("#")||(0,xt.A)(e)?null:e}).filter(Boolean)),[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[i]),t),Y=(0,xd.A)();if(c||!Y)return(0,f.Y)(md.A,{pane:{type:"ssh"},loading:!0,maxWidth:450});var x=Y.sshHostname,C=Y.sshUser,_=Y.sshPort,D=s&&(null==(a=s.currentUser)?void 0:a.__typename)==="CurrentUser"&&"PublicSshKeysOutput"===s.currentUser.publicSshKeys.__typename?s.currentUser.publicSshKeys.keys:[],E=D.length>=xn.L,R=0===D.length;return(0,f.FD)(Z.tU,{selectedIndex:m,onSelectionChange:g,children:[(0,f.FD)(Z.wb,{children:[(0,f.Y)(Z.oz,{iconLeft:(0,f.Y)(cP.A,{}),children:"Connect"}),(0,f.Y)(Z.oz,{iconLeft:(0,f.Y)(xf.A,{}),children:"Keys"})]}),(0,f.FD)(Z.T2,{children:[(0,f.Y)(Z.Kp,{children:(0,f.FD)(L.S,{css:xb.tabContainer,children:[(0,f.Y)(T.Y9,{variant:"subheadDefault",level:2,children:"Use Replit with another editor"}),(0,f.Y)(T.EY,{color:"dimmer",children:"SSH allows you to connect to an App from another machine or IDE."}),(0,f.FD)(L.S,{py:8,gap:16,children:[(0,f.Y)(xv,{editor:"vscode",disabled:R}),(0,f.Y)(xv,{editor:"cursor",disabled:R}),R?(0,f.FD)(L.S,{css:xb.connectEmptyState,gap:8,children:[(0,f.Y)(xf.A,{size:24,color:k.LU.foregroundDimmest}),(0,f.Y)(T.EY,{color:"dimmer",children:"You need to add an SSH key to your account before connecting"}),(0,f.Y)(eS.$n,{text:"Manage SSH keys",colorway:"primary",size:"small",onClick:function(){g(1)}})]}):(0,f.Y)(xw,{sshHostname:x,sshPort:_,sshUser:C})]}),(0,f.Y)(xl.p,{})]})}),(0,f.Y)(Z.Kp,{children:(0,f.FD)(L.S,{css:xb.tabContainer,children:[(0,f.FD)(L.S,{row:!0,justify:"space-between",children:[(0,f.Y)(T.Y9,{variant:"subheadDefault",level:2,children:"Manage SSH Keys"}),(0,f.Y)(P.m_,{tooltip:"You are over the SSH key limit. Please remove some of your keys to add more.",isDisabled:!E,children:(0,f.Y)(eS.$n,{text:"Add SSH key",colorway:"primary",size:"small",disabled:E,iconLeft:(0,f.Y)(tT.A,{}),onClick:function(){return p(!0)}})})]}),(0,f.Y)(T.EY,{color:"dimmer",children:"Add authorized keys to configure SSH access to this App."}),(0,f.Y)(xS,{legacyKeys:S,openFile:e.openFile}),(0,f.Y)(xu.f,{keys:D}),(0,f.Y)(aX.a,{isOpen:d,onRequestClose:function(){return p(!1)},centered:!0,children:(0,f.Y)(xr.P,{onConfirm:function(){return p(!1)}})})]})})]})]})}function xA(e){var n,t,r,i=(t={variables:{replId:(0,nI.A)()}},r=(0,ee._)({},A7,t),er.I(A9,r)),o=i.data,a=i.loading,l=i.refetch;if(!o||a)return(0,f.Y)(md.A,{pane:{type:"ssh"},loading:!0,maxWidth:450});if("ReplRedirect"===o.repl.__typename)throw Error("Got repl redirect for replId query");if("SubscriptionExpiredError"===o.repl.__typename)return(0,f.Y)(L.S,{children:(0,f.Y)(T.EY,{children:"This App is private and your subscription expired. Please reload for further action."})});var s=o.repl.authorizations.connectUsingSsh;return s.isAuthorized?(0,f.Y)(xY,(0,ee._)({},e)):(0,f.Y)(xy,{sshAuthz:s,org:null!=(n=o.repl.org)?n:void 0,onPurchaseComplete:function(){l()}})}var xx=t(86169),xC=h.ZU.Object({type:h.ZU.Literal("ssh")}),x_=(0,V.x)({root:[j.wp.height("100%"),j.wp.overflowY("auto"),nQ.tK],container:[j.wp.flex.grow(1)],wrapper:[j.wp.flex.grow(1),j.wp.py(8),j.wp.position.relative]}),xk={Content:function(e){var n=e.options;return(0,f.Y)(L.S,{css:x_.root,children:(0,f.Y)(L.S,{css:x_.container,gap:8,children:(0,f.Y)(L.S,{css:x_.wrapper,children:(0,f.Y)(xA,{openFile:function(e){return n.performPaneOperation({operation:"open",pane:(0,n5.af)(e),secondary:!0})}})})})})},Icon:function(e){var n=e.size;return(0,f.Y)(n0.Vx.Provider,{value:{color:k.LU.yellowStrongest,size:n},children:(0,f.Y)(xx.A,{})})},getTitle:function(){return"SSH"},description:"Configure remote access to connect to this Repl from another machine or IDE",category:nQ.bY.WorkspaceFeatures,decode:function(e){return m.T(xC,e)}},xD=t(5321),xE=t(10449),xR=t(68213),xI=(0,V.x)({toolButton:[j.wp.display.inlineBlock],actionContent:[j.wp.width(450),j.wp.maxWidth("100%"),j.wp.colWithGap(16)]});function xF(e){var n=e.vncUrl,t=e.onRetry,r=e.openNetworkingTool,i=null!=(0,AC.ff)(xE.wF),o=(0,f.Y)(eS.$n,{iconLeft:(0,f.Y)(om.A,{}),text:"Refresh connection",onClick:t});return i?(0,f.Y)(md.A,{pane:{type:"vnc"},action:(0,f.FD)(L.S,{css:xI.actionContent,children:[(0,f.Y)(iI.N,{colorway:"warning",text:(0,f.FD)(f.FK,{children:["There was an error connecting to the server",n?(0,f.FD)(f.FK,{children:[" at ",(0,f.Y)("br",{}),n]}):""]})}),n?(0,f.Y)(D.A,{headerContent:"Diagnosis",children:(0,f.Y)(L.S,{p:8,gap:8,children:(0,f.Y)(aN.Ay,{children:"If you see a connection error, it's possible that your internet service provider (ISP) has security settings blocking the URL shown above.\n\nPlease contact your ISP and ask them to unblock the URL. Here are the support links for common ISPs:\n\n- [Xfinity](https://www.xfinity.com/support/articles/report-blocked-website)\n- [Spectrum.net](https://www.spectrum.net/support/forms/unblock_site)\n      "})})}):null,o]})}):(0,f.Y)(md.A,{pane:{type:"vnc"},bodyText:(0,f.FD)(T.EY,{multiline:!0,children:["No VNC server is currently running with compatible ports available to view. Try running your App, and check the"," ",(0,f.Y)(eS.$n,{css:xI.toolButton,text:"Networking tool",iconLeft:(0,f.Y)(bM.A,{}),size:"small",onClick:r})," ","to ensure ports are being forwarded correctly."]}),action:o})}var xT=function(e){return e.Connecting="Connecting",e.Connected="Connected",e.Disconnected="Disconnected",e.Errored="Errored",e}(xT||{}),xP=(0,V.x)({root:[j.wp.position.relative,j.wp.height("100%"),j.wp.width("100%")],target:[j.wp.height("100%"),j.wp.width("100%")],overlay:[j.wp.coverContainer,j.wp.backgroundColor.backgroundDefault,{"&:empty":[j.wp.display.none]}],audio:[j.wp.position.absolute,j.wp.bottom(0),j.wp.right(0),{padding:"0.2em"}]});function xL(e){var n,r,i,o,a=e.fs,l=e.secrets,s=e.container,c=e.openNetworkingTool,u=(0,v._)((0,w.useState)(null),2),d=u[0],p=u[1],h=(0,v._)((0,w.useState)(void 0),2),m=h[0],g=h[1],S=(0,v._)((0,w.useState)(!1),2),Y=S[0],A=S[1],x=(0,v._)((0,w.useState)("Connecting"),2),C=x[0],_=x[1],k=(0,v._)((0,w.useState)(null),2),D=k[0],E=k[1],R=(0,v._)((0,w.useState)(!1),2),I=R[0],F=R[1],T=(0,v._)((0,w.useState)(!1),2),P=T[0],L=T[1],U=(0,w.useRef)(0),N=(0,w.useRef)(!1),O=(r=(n=(0,v._)((0,w.useState)(null),2))[0],i=n[1],o=(0,xR.A)(s).url,(0,w.useEffect)(function(){if(!r){if(s.getConnectionState()===xE.KN.CONNECTED){if(!o)return;i((0,bb.jq)(o.replace("http","ws"),xE.wF).toString());return}return s.onConnectionStateChanged(function(e){e===xE.KN.CONNECTED&&o&&i((0,bb.jq)(o.replace("http","ws"),xE.wF).toString())})}},[o,r,s]),{vncUrl:r}).vncUrl;(0,ty.u4)(ty.AZ.VNC_OPENED),(0,w.useEffect)(function(){return N.current=!0,function(){N.current=!1}},[]);var M=(0,v._)((0,w.useState)(null),2),B=M[0],H=M[1],z=(0,w.useRef)(function(){return null});(0,w.useEffect)(function(){z.current()},[B]);var W=(0,tw.A)(function(e){return H(e.width&&e.height?{width:e.width,height:e.height}:null)},{type:"throttle",wait:100}),G=(0,w.useRef)(function(e){});(0,w.useEffect)(function(){G.current(P)},[P]),(0,w.useEffect)(function(){if(!d){var e=!1;return t.e(8635).then(t.bind(t,38635)).then(function(n){e||p(n)}),function(){e=!0}}},[d]),(0,w.useEffect)(function(){"Disconnected"===C&&setTimeout(function(){_("Connecting")},Math.random()*(Math.pow(2,U.current)-1)*1e3)},[C]),(0,w.useEffect)(function(){if("Disconnected"===C){var e=setTimeout(function(){_("Connecting")},Math.random()*(Math.pow(2,U.current)-1)*1e3);return function(){clearTimeout(e)}}},[C]);var V=(0,nI.A)(),j=(0,io._P)({controlName:"flag-computer-use-vnc"});return(0,w.useEffect)(function(){if(O&&D&&d&&"Connecting"===C){U.current++;var e=d.default,n=s.getConnectionMetadata(),t={credentials:{username:null==n?void 0:n.token,password:null!=m?m:""},viewOnly:j};(0,ty.u4)(ty.AZ.VNC_CONNECTED);var r=new e(D,O,t);r.viewOnly=j,r.scaleViewport=!0,r.resizeSession=!j;var i=function(){U.current=0,_("Connected")},o=function(e){var n=e.detail.capabilities.audio;F(void 0!==window.MediaSource&&!!n)},a=function(e){if(z.current=function(){return null},G.current=function(e){},r.removeEventListener("securityfailure",c),r.removeEventListener("disconnect",a),r.removeEventListener("capabilities",o),r.removeEventListener("connect",i),!e.detail.clean){var n=s.getConnectionMetadata(),t=n?(0,eL.pI)(n.token):null;(0,ty.u4)(ty.AZ.VNC_ERRORED,{vncUrl:O,replId:V,cluster:null==t?void 0:t.cluster}),_("Errored");return}_("Disconnected")},c=function(){var e,n=function(){A(!0)};(e=(0,y._)(function(){var e;return(0,b.YH)(this,function(t){switch(t.label){case 0:return[4,l.read()];case 1:if(!(e=t.sent().get("VNC_PASSWORD")))return n(),[2];return g(e),[2]}})}),function(){return e.apply(this,arguments)})().catch(function(e){return re.Cp(e)})};return r.addEventListener("connect",i),r.addEventListener("capabilities",o),r.addEventListener("disconnect",a),r.addEventListener("securityfailure",c),z.current=function(){return r._windowResize()},F(!1),L(!1),G.current=function(n){n?((0,ty.u4)(ty.AZ.VNC_AUDIO_ENABLED),r.enableAudio(2,window.MediaSource.isTypeSupported("audio/webm;codecs=opus")?e.audioCodecs.OpusWebM:e.audioCodecs.MP3,32768)):r.disableAudio()},function(){N.current||(z.current=function(){return null},G.current=function(e){},r.removeEventListener("securityfailure",c),r.removeEventListener("disconnect",a),r.removeEventListener("capabilities",o),r.removeEventListener("connect",i),r.disconnect())}}},[d,D,s,O,a,m,C,V,l,j]),(0,f.FD)("div",{"data-cy":"vnc",css:xP.root,children:[I?(0,f.FD)("label",{css:xP.audio,children:["\uD83C\uDFA7"," ",(0,f.Y)("input",{type:"checkbox",checked:P,onChange:function(e){return L(e.target.checked)}})]}):null,(0,f.Y)("div",{ref:function(e){W(e),E(e)},css:xP.target,"data-cy":"vnc-output-".concat(C.toLowerCase())}),(0,f.FD)("div",{css:xP.overlay,children:["Connecting"===C?(0,f.Y)(md.A,{pane:{type:"vnc"},loading:!0}):null,"Disconnected"===C?(0,f.Y)(md.A,{pane:{type:"vnc"},bodyText:"Disconnected"}):null,"Errored"===C?(0,f.Y)(xF,{vncUrl:O,onRetry:function(){return _("Connecting")},openNetworkingTool:c}):null]}),(0,f.Y)(aX.a,{isOpen:Y,onRequestClose:function(){return A(!1)},children:(0,f.Y)(bK.A,{prompt:"Password",desc:"The output is password protected, please input it",placeholder:"password",type:"text",onCancel:function(){return A(!1)},onConfirm:function(e){g(e),A(!1)}})})]})}var xU=h.ZU.Object({type:h.ZU.Literal("vnc")}),xN=(0,V.x)({container:[j.wp.flex.growAndShrink(1)]}),xO={Content:function(e){var n=e.options.performPaneOperation,t=(0,A.A)(),r=t.fs,i=t.container,o=t.secrets,a=(0,w.useCallback)(function(){return n({operation:"open",secondary:!0,pane:{type:"networking"}})},[n]);return(0,f.Y)(L.S,{css:xN.container,children:(0,f.Y)(xL,{fs:r,container:i,secrets:o,openNetworkingTool:a})})},Icon:function(e){var n=e.size;return(0,f.Y)(bC.A,{size:n})},getTitle:function(){return"VNC"},description:"View your app's desktop screen output",category:nQ.bY.WorkspaceFeatures,decode:function(e){return m.T(xU,e)}},xM=t(13975),xB=t(45485),xH=t(2415),xz=h.ZU.Object({type:h.ZU.Literal("workflows")}),xW={Content:function(e){var n=e.options.isActive;return(0,xB.g)()?(0,f.Y)(L.S,{p:8,children:(0,f.Y)(T.EY,{children:"Workflows is not available."})}):(0,f.Y)(xH.A,{isActive:n})},Icon:function(e){var n=e.size;return(0,f.Y)(n0.Vx.Provider,{value:{color:k.LU.greenStrongest,size:n},children:(0,f.Y)(ac.A,{})})},getTitle:function(){return"Workflows"},description:"Configure different ways to run your App",category:nQ.bY.WorkspaceFeatures,decode:function(e){return m.T(xz,e)}};function xG(){return{codeEditor:tu.N,webview:xM.QS,media:vA,binary:ts,pedit:b2,vnc:xO,adminPanel:n2,runnerOutput:Ay.a,shell:A3,dependencies:t6,envEditor:ii,draw:r7,git:my,diff:rW,history:gR,database:vi,neon:by,markdown:vS,csvPreview:td.J,ssh:xk,ghostwriterChat:u9,problems:b9,networking:bH,objectStorage:bV,workflows:xW,project:YW,agentFiles:tn,integrations:gF.u,videoPlayer:xD.Rd,replitAuth:Aw}}},32752:(e,n,t)=>{"use strict";t.d(n,{P:()=>r});var r=function(e){return e.CommandBar="commandbar",e.FiletreeContextMenu="filetree-context-menu",e.SidebarSearch="sidebar-search",e.EditorContextMenu="editor-context-menu",e}({})},32941:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(88263),a=t(71117);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M1.012 18.902h1.784l1.413-3.98H9.89l1.413 3.98h1.783L7.928 4.852H6.172l-5.16 14.05Zm8.343-5.489-2.25-6.339h-.11l-2.25 6.34h4.61ZM16.34 18.772c.544.251 1.15.377 1.818.377.613 0 1.132-.091 1.557-.274.425-.183.766-.405 1.022-.666.257-.26.44-.505.55-.734h.082v1.427h1.619v-6.943c0-.837-.137-1.505-.412-2.004-.274-.498-.62-.87-1.036-1.118a3.733 3.733 0 0 0-1.283-.487 6.416 6.416 0 0 0-1.166-.123c-.53 0-1.07.073-1.62.22a4.114 4.114 0 0 0-1.509.754c-.457.357-.823.855-1.098 1.495l1.537.55c.179-.385.487-.746.927-1.085.439-.338 1.045-.507 1.818-.507.745 0 1.3.187 1.667.562.37.375.556.901.556 1.578v.055c0 .26-.094.444-.282.549-.183.105-.476.18-.878.226-.398.041-.917.103-1.557.186-.49.064-.977.15-1.462.26-.48.105-.919.266-1.317.48a2.518 2.518 0 0 0-.954.892c-.238.376-.356.865-.356 1.469 0 .686.16 1.271.48 1.756.32.48.752.848 1.297 1.105Zm3.684-1.455c-.44.252-.979.378-1.62.378-.644 0-1.177-.142-1.598-.426-.416-.288-.624-.713-.624-1.276 0-.412.11-.736.33-.974.223-.243.516-.423.877-.542.366-.124.76-.213 1.18-.268.174-.023.4-.05.68-.082.283-.037.574-.078.87-.124.303-.05.568-.107.797-.171.233-.069.384-.144.453-.227v1.482a2.569 2.569 0 0 1-1.345 2.23Z",clipRule:"evenodd"})}))}},33221:(e,n,t)=>{"use strict";t.d(n,{G:()=>c});var r=t(88263),i=t(64583),o=t(48521),a=t(10429),l=t(80762),s=(0,i.x)({loadingState:[o.wp.flex.growAndShrink(1),o.wp.center]});function c(){return(0,r.Y)(a.S,{css:s.loadingState,children:(0,r.Y)(l.A,{})})}},33392:(e,n,t)=>{"use strict";t.d(n,{K:()=>z});var r=t(12694),i=t(88263),o=t(21462),a=t(29935),l=t(82643),s=t(1230),c=t(5504),u=t(36640),d=t(15036),p=t(46603),f=t(11337),h=t(77089),m=t(76126),g=t(10429);function v(e){var n=e.showHeading,t=e.onSubmit,a=(0,r._)((0,o.useState)(""),2),l=a[0],s=a[1];return(0,i.Y)(f.lV,{onSubmit:function(e){e.preventDefault(),t(l)},children:(0,i.FD)(g.S,{gap:8,children:[void 0===n||n?(0,i.FD)(g.S,{gap:2,children:[(0,i.Y)(m.Y9,{variant:"subheadDefault",level:1,children:"Feedback"}),(0,i.Y)(m.EY,{color:"dimmer",children:"All feedback is reviewed by the Replit team."})]}):null,(0,i.FD)(g.S,{gap:8,style:{minHeight:120},children:[(0,i.Y)(h.ov,{placeholder:"Please share bugs, feature requests, and anything else related to your experience...",autoSize:!0,value:l,onChange:function(e){return s(e.currentTarget.value)},autoFocus:!0}),(0,i.Y)(p.$n,{colorway:"primary",text:"Send feedback",type:"submit"})]})]})})}var w=t(86105),y=t(45263),b=t(64583),S=t(973),Y=t(48521),A=t(39999),x=t(11882),C=t(23076),_=t(36164),k=t(17844),D=t(93629),E=t(71117);function R(e){return(0,i.Y)(E.Ay,(0,D._)((0,k._)({},e),{children:(0,i.Y)("path",{fillRule:"evenodd",d:"M7.945 3.052a1.25 1.25 0 0 0-.835-.302h-3a1.25 1.25 0 0 0-1.243 1.357 19.04 19.04 0 0 0 2.953 8.335l.003.006a18.75 18.75 0 0 0 5.77 5.769l.005.004a19.04 19.04 0 0 0 8.296 2.953 1.25 1.25 0 0 0 1.356-1.251V16.901a1.25 1.25 0 0 0-1.072-1.268 13.592 13.592 0 0 1-2.97-.74l-.002-.001a1.251 1.251 0 0 0-1.317.28l-.002.001-1.267 1.267a.75.75 0 0 1-.9.122 16.75 16.75 0 0 1-6.282-6.281.75.75 0 0 1 .122-.901L8.828 8.11a1.25 1.25 0 0 0 .28-1.317v-.002a13.59 13.59 0 0 1-.741-2.97 1.25 1.25 0 0 0-.422-.77ZM7.107 1.25a2.75 2.75 0 0 1 2.747 2.372c.119.904.34 1.791.659 2.645A2.75 2.75 0 0 1 9.89 9.17l-.858.858a15.249 15.249 0 0 0 4.94 4.94l.86-.86v-.001a2.75 2.75 0 0 1 2.901-.62 12.085 12.085 0 0 0 2.652.66 2.75 2.75 0 0 1 2.365 2.781v2.99a2.752 2.752 0 0 1-3.011 2.748 20.54 20.54 0 0 1-8.954-3.185 20.25 20.25 0 0 1-6.226-6.226 20.54 20.54 0 0 1-3.186-9.007A2.75 2.75 0 0 1 4.11 1.25h2.998Z",clipRule:"evenodd"})}))}var I=[Y.wp.borderRadius(),Y.wp.px(12),Y.wp.py(16),S.b.filled,Y.wp.hover({backgroundColor:y.LU.accentPrimaryDimmer}),Y.wp.width("50%"),Y.wp.justify.center,Y.wp.flex.column],F=(0,b.x)({container:I,containerActive:(0,w._)(I).concat([Y.wp.backgroundColor.accentPrimaryDimmest,Y.wp.border({color:y.LU.accentPrimaryDimmer})]),headline:[Y.wp.fontWeight.medium],premiumPill:[Y.wp.display.inlineBlock,Y.wp.height("20px"),{verticalAlign:"middle"}],text:[Y.wp.width("100%")]});function T(e){var n=e.optionKey,t=e.icon,r=e.headline,o=e.description,a=e.isPremium,l=e.isActive,s=e.setSelectedOption;return(0,i.FD)(g.S,{css:l?F.containerActive:F.container,gap:6,onClick:function(){s(n)},children:[(0,i.FD)(g.S,{row:!0,gap:4,align:"center",children:[t,(0,i.Y)(m.EY,{variant:"subheadDefault",css:F.headline,children:r}),a?(0,i.Y)(x.a,{colorway:"green",text:"Premium",css:F.premiumPill}):null]}),(0,i.Y)(g.S,{row:!0,gap:4,align:"center",children:(0,i.Y)(m.EY,{variant:"small",color:"dimmer",css:F.text,children:o})})]})}var P=(0,b.x)({callOptionContainer:[Y.wp.width("100%"),Y.wp.flex.column,Y.wp.align.center,Y.wp.justify.center,Y.wp.height("100px"),Y.wp.border({color:y.LU.outlineDimmer}),Y.wp.borderRadius()],helpButtonContainer:[{"@media (max-width: 600px)":{flexDirection:"column"}}]});function L(e){var n=e.onSubmit,t=(0,r._)((0,o.useState)(null),2),a=t[0],l=t[1],s=[{optionKey:"call",icon:(0,i.Y)(R,{size:20}),headline:"Schedule a call",description:"Have a discussion with a Replit employee over a video call.",isPremium:!0},{optionKey:"feedback",icon:(0,i.Y)(_.A,{size:20}),headline:"Share feedback & bugs",description:"Tell us about your experience. Feedback is reviewed by the Replit team."}];return(0,i.FD)(g.S,{gap:8,children:[(0,i.Y)(m.EY,{variant:"headerDefault",children:"Talk to us"}),(0,i.Y)(g.S,{row:!0,gap:8,css:P.helpButtonContainer,pr:6,children:s.map(function(e){return(0,i.Y)(T,{icon:e.icon,headline:e.headline,description:e.description,isPremium:e.isPremium,optionKey:e.optionKey,isActive:a===e.optionKey,setSelectedOption:l},e.optionKey)})}),"call"===a?(0,i.Y)(g.S,{css:P.callOptionContainer,children:(0,i.Y)(A.v,{iconLeft:(0,i.Y)(C.A,{}),text:"Select a time to chat",colorway:"blue",target:"_blank",href:"https://calendly.com/kody-low-repl/replit-support"})}):null,"feedback"===a?(0,i.Y)(v,{showHeading:!1,onSubmit:function(e){n(e),l(null)}}):null]})}var U=t(70484),N=t(6156),O=t(49150);function M(e){var n=(0,U.A)(),t=(0,N.jl)(),a=(0,r._)((0,o.useState)(0),2),l=a[0],s=a[1],c=(0,o.useRef)(null),u="visualViewport"in window;(0,o.useEffect)(function(){if(!n)return void s(0);if(t&&u){var e=window.visualViewport;if(!e)return;var r=function(){s(window.innerHeight-e.height-e.offsetTop)};return r(),e.addEventListener("resize",r),e.addEventListener("scroll",r),function(){e.removeEventListener("resize",r),e.removeEventListener("scroll",r)}}n&&s(20)},[n,t,u]);var d=(0,o.useMemo)(function(){var t;return(0,D._)((0,k._)({},e.underlayProps||{}),{style:(0,D._)((0,k._)({},(null==(t=e.underlayProps)?void 0:t.style)||{}),{paddingBottom:n?l:void 0})})},[e.underlayProps,n,l]);return(0,i.Y)(O.a,(0,D._)((0,k._)({},e),{underlayProps:d,className:e.className,children:(0,i.Y)("div",{ref:c,children:e.children})}))}var B=(0,b.x)({container:[Y.wp.minWidth("300px"),{maxWidth:"90vw","@media (max-width: 600px)":{minWidth:"90vw"}}]});function H(e){var n,t=e.isOpen,r=e.onClose,p=e.onSubmit,f=e.session,h=e.source,m=void 0===h?"header":h,g=(0,u.A)(),w=g.showConfirm,y=g.showError,b=(n=(0,a._)(function(e){var n;return(0,l.YH)(this,function(t){switch(t.label){case 0:if(!f)return[2];return[4,f.submitUserFeedback({type:s.O3q.AGENT_FEEDBACK_UNKNOWN,comment:e})];case 1:return(null==(n=t.sent())?void 0:n.ok)?w("Feedback received."):y("Failed to send feedback. Please try again."),null==p||p(e),r(),[2]}})}),function(e){return n.apply(this,arguments)}),S=(0,c._P)({controlName:"flag-top-ai-spenders",type:"boolean"});return(0,o.useEffect)(function(){t&&f&&(0,d.pI)({action:"open_feedback_modal_from_".concat(m),sessionId:f.id})},[t,f,m]),(0,i.Y)(M,{isOpen:t,onRequestClose:r,centered:!0,css:B.container,children:S?(0,i.Y)(L,{onSubmit:b}):(0,i.Y)(v,{onSubmit:b})})}function z(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"command",t=arguments.length>2?arguments[2]:void 0,a=(0,r._)((0,o.useState)(!1),2),l=a[0],s=a[1],c=(0,o.useCallback)(function(){s(!0)},[]),u=(0,o.useCallback)(function(){s(!1)},[]),d=(0,o.useCallback)(function(){return e?(0,i.Y)(H,{isOpen:l,onClose:u,session:e,source:n,onSubmit:t}):null},[l,e,u,n,t]);return{openFeedbackModal:c,closeFeedbackModal:u,FeedbackModal:d}}},33429:(e,n,t)=>{"use strict";t.d(n,{w:()=>g});var r=t(17844),i=t(93629),o=t(12694),a=t(88263),l=t(21462),s=t(47993),c=t(90329),u=t(32957),d=t(19882),p=t(20646),f=t(45263),h=t(59172),m=t(97681);function g(e){var n=e.targetElement,t=e.activeStep,g=e.goto,v=e.currentStepIndex,w=e.totalSteps,y=e.done,b=e.disableAnimation,S=e.placement,Y=e.cypressCloseData,A=e.onClickOutside,x=e.innerRef,C=e.width,_=e.colorway,k=e.doneText,D=(0,o._)((0,l.useState)(null),2),E=D[0],R=D[1],I=(0,o._)((0,l.useState)(null),2),F=I[0],T=I[1],P=(0,c.E)(n,E,{placement:void 0===S?"right":S,modifiers:[{name:"arrow",options:{element:F,padding:8}},{name:"offset",options:{offset:[0,16]}},{name:"preventOverflow",options:{padding:8}},{name:"flip",options:{fallbackPlacements:["top","bottom","left","right"]}},{name:"computeStyles",options:{adaptive:!1}}]}),L=(0,d.A)(function(){var e;null==(e=P.update)||e.call(P)},{type:"throttle",wait:100});(0,l.useEffect)(function(){L(n)},[n,L]),(0,l.useImperativeHandle)(x,function(){return{updateTooltip:function(){var e;null==(e=P.update)||e.call(P)}}});var U=(0,u.A)(function(){A&&A()},[A]);return(0,s.createPortal)((0,a.FD)("div",(0,i._)((0,r._)({ref:function(e){U.current=e,R(e)},style:P.styles.popper,css:{transition:b?"all":"all 0.5s ease-out",zIndex:p.v+1,width:null!=C?C:320}},P.attributes.popper),{children:[(0,a.Y)(m.p,{title:t.title,subtitle:t.subtitle,icon:t.icon,content:t.content,onDismiss:y,currentStepIndex:v,onCurrentStepChange:g,totalSteps:w,cypressCloseData:void 0===Y?"tour-tooltip-close-button":Y,hideCloseButton:t.hideCloseButton,hideNavigation:t.hideNavigation,colorway:_,doneText:k}),(0,a.Y)("span",{style:P.styles.arrow,css:[h.RE,{"&::after":_?{backgroundColor:f.ky[_].dimmest,border:"1px solid "+f.ky[_].dimmer}:{backgroundColor:f.LU.backgroundDefault,border:"1px solid "+f.LU.backgroundHighest}}],ref:T})]})),document.body)}},33512:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(88263),a=t(84550);let l=function(e){return(0,o.Y)(a.BF,(0,i._)((0,r._)({},e),{children:e.children}))}},33932:(e,n,t)=>{"use strict";t.d(n,{A:()=>_});var r=t(88263),i=t(29542),o=t.n(i),a=t(71115),l=t(17844),s=t(12584),c=t(41114),u=t(86997);function d(){var e=(0,s._)(["\n  query NotAllowedModal {\n    currentUser {\n      id\n      isStaff: hasRole(role: REPLIT_STAFF)\n    }\n  }\n"]);return d=function(){return e},e}var p={},f=(0,c.J1)(d()),h=t(64513),m=t(31062),g=t(45263),v=t(64583),w=t(48521),y=t(46603),b=t(49150),S=t(76126),Y=t(59172),A=t(10429),x=t(592),C=(0,v.x)({staffHelpers:[w.wp.border({color:g.LU.accentNegativeDefault,width:1,style:"solid"}),w.wp.overflow("hidden")]});let _=function(e){var n,t,i,s=e.isOpen,c=(0,a.useRouter)(),d=(n={skip:!s},t=(0,l._)({},p,n),u.I(f,t)).data,g=(0,m.A)(),v=null==d||null==(i=d.currentUser)?void 0:i.isStaff;return(0,r.Y)(b.a,{preventClose:!0,isOpen:s,centered:!0,onRequestClose:function(){},maxWidth:600,children:(0,r.FD)(A.S,{gap:32,children:[(0,r.Y)(A.S,{row:!0,gap:16,align:"center",children:(0,r.Y)(S.Y9,{css:{width:"fit-content"},level:2,variant:"headerDefault",children:"You cant run this Repl right now."})}),(0,r.FD)(A.S,{gap:16,children:[(0,r.FD)(S.EY,{children:["It may be temporarily unavailable or it may have violated our"," ",(0,r.Y)(o(),{legacyBehavior:!0,href:h.aC.TERMS_OF_SERVICE,children:"Terms of Service"}),"."]}),(0,r.Y)(S.EY,{children:"If you are the owner of this Repl and believe you should be able to run it, you can try again later or contact support."}),v?(0,r.FD)(A.S,{css:C.staffHelpers,gap:8,children:[(0,r.FD)(A.S,{row:!0,gap:8,children:[(0,r.Y)(Y.m_,{tooltip:"You are seeing this functionality because you have special permissions.",children:(0,r.Y)(x.A,{})}),(0,r.Y)(S.Y9,{level:3,children:"Debug Info"})]}),(0,r.Y)(A.S,{children:(0,r.FD)(S.EY,{children:["Repl ID ",g," is not allowed to run. This is most likely due to a policy takedown."]})}),(0,r.Y)(A.S,{children:(0,r.FD)(S.EY,{multiline:!1,children:[(0,r.Y)(o(),{legacyBehavior:!0,href:"https://us5.datadoghq.com/logs?query=%40replid%3A".concat(g),children:"All datadog logs"})," ",""," ",(0,r.Y)(o(),{legacyBehavior:!0,href:"https://us5.datadoghq.com/logs?query=%40replid%3A".concat(g,"+taking+down"),children:"Takedown-specific logs"})]})})]}):null]}),(0,r.FD)(A.S,{row:!0,gap:16,justify:"end",children:[(0,r.Y)(y.$n,{text:"Reload",onClick:function(){window.location.reload()}}),(0,r.Y)(y.$n,{text:"Leave",onClick:function(){c.push("/home","~/")}})]})]})})}},33995:(e,n,t)=>{"use strict";t.d(n,{A:()=>s});var r=t(46434),i=t(29935),o=t(82643),a=t(74093),l=t(95570);function s(){var e;return(0,a.b)((e=(0,i._)(function(e,n){var t,i,a,s,c,u,d,p;return(0,o.YH)(this,function(e){switch(e.label){case 0:return n.signal,[3,12];case 1:e.trys.push([1,6,7,12]),c=(0,r._)(t),e.label=2;case 2:return[4,c.next()];case 3:if(!(i=!(u=e.sent()).done))return[3,5];(d=u.value).ok&&(d.payload.extras?l.log("[pid2]: ".concat(d.payload.message),d.payload.extras):l.log("[pid2]: ".concat(d.payload.message))),e.label=4;case 4:return i=!1,[3,2];case 5:return[3,12];case 6:return p=e.sent(),a=!0,s=p,[3,12];case 7:if(e.trys.push([7,,10,11]),!(i&&null!=c.return))return[3,9];return[4,c.return()];case 8:e.sent(),e.label=9;case 9:return[3,11];case 10:if(a)throw s;return[7];case 11:return[7];case 12:return[2]}})}),function(n,t){return e.apply(this,arguments)}),[]),null}},34002:(e,n,t)=>{"use strict";t.d(n,{L:()=>l}),t(88263);var r=t(1230),i=t(54319),o=t(47630),a=t(42415);function l(e){var n=(0,i.NC)(),t=(0,o.Rj)(function(){return e?n.sessions.get(e):null},[n,e]);return(0,o.Rj)(function(){return null==t?void 0:t.reduce(s,"global").result.map(function(e){return e.cents})},[t])}t(35567);var s={direction:"forward",state:{cents:0},reducer:function(e,n){(0,r.ka6)(e)&&(n.cents+=a.a7)}}},34172:(e,n,t)=>{"use strict";t.d(n,{A:()=>z});var r=t(12694),i=t(88263),o=t(29542),a=t.n(o),l=t(21462),s=t(17844),c=t(12584),u=t(41114),d=t(50175),p=t(31592);function f(){var e=(0,c._)(["\n  mutation DeleteThreadMessage($id: String!) {\n    deleteThreadMessage(messageId: $id) {\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return f=function(){return e},e}var h={},m=(0,u.J1)(f(),p.A9),g=t(31628),v=t(36640),w=t(73414),y=t(17040),b=t(79833),S=t(29206),Y=t(5275),A=t(26394),x=t(20828),C=t(78452),_=t(29572),k=t(79209),D=t(45263),E=t(64631),R=["a","pre","code","em","strong","p","ul","ol","li","img","del","h1","h2","h3","h4","h5","h6","sup","sub","br","hr","blockquote","span","div"];let I=(0,l.memo)(function(e){var n=e.content,t=(0,x.g)("fontSize").preferences.fontSize,r=(0,l.useCallback)(function(e){return(0,i.Y)(C.A,(0,s._)({},e))},[]);return(0,i.Y)("div",{css:[{"& ol":{paddingInlineStart:"20px"},"& ul":{paddingInlineStart:"20px",listStyle:"initial"}}],children:(0,i.Y)(y.$,{css:(0,k.AH)({wordBreak:"break-word",boxSizing:"border-box",whiteSpace:"normal",lineHeight:1.5,color:D.LU.foregroundDefault,fontFamily:"".concat(D.LU.fontFamilyDefault," !important"),fontSize:t,textSizeAdjust:"100%","h1, h2, h3, h4, h5, h6":{color:D.LU.foregroundDefault,fontWeight:D.LU.fontWeightMedium,marginBottom:D.LU.space16,lineHeight:1.25,wordWrap:"break-word"},"h1, h2":{paddingBottom:D.LU.space8,borderBottom:"1px solid ".concat(D.LU.backgroundHigher),marginTop:D.LU.space32},h1:{fontSize:"2em"},h2:{fontSize:"1.5em"},h3:{fontSize:"1.25em",marginTop:D.LU.space24},h4:{fontSize:"1em",marginTop:D.LU.space16},h5:{fontSize:"0.875em"},h6:{color:D.LU.foregroundDimmer,fontSize:"0.85em"},".anchor":{float:"left",lineHeight:1,marginLeft:"calc(-1 * ".concat(D.LU.space16,")"),paddingRight:D.LU.space4},".anchor:focus":{outline:"none"},p:{marginBottom:D.LU.space16,fontSize:t,fontFamily:"".concat(D.LU.fontFamilyDefault," !important")},"p:last-child":{marginBottom:0},table:{borderSpacing:0,borderCollapse:"collapse",display:"block",width:"100%",overflow:"auto",marginBottom:D.LU.space16,wordBreak:"normal",th:{fontWeight:D.LU.fontWeightMedium},"td, th":{padding:"".concat(D.LU.space8," ").concat(D.LU.space12),border:"1px solid ".concat(D.LU.backgroundHighest),minWidth:"16ch"},tr:{backgroundColor:D.LU.backgroundDefault,borderTop:"1px solid ".concat(D.LU.backgroundHighest)},"tr:nth-of-type(2n)":{backgroundColor:D.LU.backgroundRoot}},"hr:after":{clear:"both"},"li > p":{marginBottom:0},li:{marginTop:D.LU.space4},dd:{marginLeft:0},"ol, ul":{paddingLeft:D.LU.space16,marginTop:0,marginBottom:0},ul:{listStyle:"initial",listStyleType:"disc",marginBottom:D.LU.space16},ol:{listStyle:"decimal",marginBottom:D.LU.space16},"ol ol, ol ul, ul ol, ul ul":{paddingLeft:D.LU.space16,marginTop:0,marginBottom:0,paddingBottom:0},"ul ul":{listStyleType:"circle"},"ul ul ul":{listStyleType:"square"},"ol ol, ul ol":{listStyleType:"lower-roman"},"ol ol ol, ol ul ol, ul ol ol, ul ul ol":{listStyleType:"lower-alpha"},pre:{fontFamily:"".concat(D.LU.fontFamilyCode," !important"),margin:"".concat(D.LU.space16," 0"),borderRadius:4,wordBreak:"break-all",wordWrap:"break-word",whiteSpace:"pre-wrap",color:D.LU.foregroundDefault},"pre:last-child":{marginBottom:"0 !important"},blockquote:{padding:"0 1em",marginBottom:D.LU.space16,borderLeft:"".concat(D.LU.space2," solid ").concat(D.LU.backgroundHighest),paddingLeft:D.LU.space16},"blockquote > *":{color:"".concat(D.LU.foregroundDimmer," !important")},"blockquote > :last-child":{marginBottom:"0 !important",borderBottom:"none !important"},"blockquote > :first-child":{marginTop:"0 !important"},kbd:{display:"inline-block",padding:"3px 5px",font:"11px ".concat(D.LU.fontFamilyCode),color:D.LU.foregroundDimmer,verticalAlign:"middle",backgroundColor:D.LU.backgroundHigher,border:"none",borderRadius:3,boxShadow:"inset 0 -1px 0 ".concat(D.LU.backgroundHighest)},a:{color:D.LU.accentPrimaryStronger,backgroundColor:"initial"},"> :first-child":{marginTop:"0 !important",paddingTop:"0 !important"},"> :last-child":{borderBottom:"none !important",marginBottom:"0 !important",paddingBottom:"0 !important"},'[type="checkbox"]':{boxSizing:"border-box",marginRight:D.LU.space8,padding:0},details:{marginBottom:D.LU.space16,display:"block",background:D.LU.backgroundHigher,borderRadius:D.LU.borderRadius4,padding:D.LU.space16},summary:{display:"list-item",userSelect:"none",cursor:"pointer",fontWeight:D.LU.fontWeightBold},"details[open] > summary":{borderBottom:"1px solid ".concat(D.LU.backgroundHighest),marginBottom:D.LU.space16,paddingBottom:D.LU.space16},hr:{height:1,backgroundColor:D.LU.backgroundHigher,margin:"".concat(D.LU.space24," 0"),border:0}}),allowedElements:R,remarkPlugins:[E.yN,Y.A,A.A,S.A],linkTarget:"_blank",rehypePlugins:[b.A],components:{code:r,img:_.A},children:n})})});var F=t(11882),T=t(54087),P=t(76126),L=t(59172),U=t(49330),N=t(10429),O=t(55625),M=t(93333),B=t(18870),H=t(29064);let z=(0,l.memo)(function(e){var n,t,o=e.thread,c=e.message,u=(0,g.T)(),p=(0,v.A)().showError,f=(0,r._)((n={onError:function(e){p(e.message)},onCompleted:function(e){var n;(null==(n=e.deleteThreadMessage)?void 0:n.__typename)==="UserError"&&p(e.deleteThreadMessage.message)}},t=(0,s._)({},h,n),d.n(m,t)),2),y=f[0],b=f[1].loading,S=!!(o&&o.indexStart===o.indexEnd),Y={statusBanner:{resolved:"Thread resolved. Re-open it any time in the inbox.",unresolved:"Thread re-opened"},outdated:"Outdated",outdatedTooltip:"The code has changed since the comment was left"},A=(0,l.useMemo)(function(){return{diff:(0,w.G)(c.timeCreated),full:(0,w.n)(c.timeCreated)}},[c]);if(!c.user)return null;var x=u===c.user.id?[{label:"Delete",icon:(0,i.Y)(H.A,{}),isDestructive:!0}]:[];return(0,i.FD)(N.S,{children:[(0,i.FD)(N.S,{pb:4,row:!0,justify:"space-between",children:[(0,i.FD)(N.S,{row:!0,align:"center",gap:8,children:[(0,i.Y)(a(),{legacyBehavior:!0,passHref:!0,href:"/@".concat(c.user.username),children:(0,i.Y)("a",{children:(0,i.Y)(U.K,{small:!0,src:c.user.image,username:c.user.username})})}),(0,i.Y)("p",{children:(0,i.Y)(L.m_,{tooltip:A.full,placement:"top",children:(0,i.Y)(P.EY,{variant:"small",color:"dimmer",multiline:!1,children:A.diff})})}),x.length>0?(0,i.Y)(O.A,{items:x,onItemClick:function(e){"Delete"!==e.label||b||y({variables:{id:c.id}})},label:"More"}):null]}),S?(0,i.Y)(L.m_,{tooltip:Y.outdatedTooltip,children:(0,i.Y)(F.a,{colorway:"negative",text:Y.outdated})}):null]}),"StatusMessageContentType"===c.content.__typename&&"resolved"===c.content.status?(0,i.Y)(T.N,{colorway:"positive",icon:(0,i.Y)(B.A,{}),text:Y.statusBanner.resolved}):null,"StatusMessageContentType"===c.content.__typename&&"unresolved"===c.content.status?(0,i.Y)(T.N,{colorway:"primary",icon:(0,i.Y)(M.A,{}),text:Y.statusBanner.unresolved}):null,"TextMessageContentType"===c.content.__typename&&(0,i.Y)(I,{content:c.content.text})]})})},34434:(e,n,t)=>{"use strict";t.d(n,{L:()=>i,M:()=>o});var r=t(49069),i=r.Pe.define(),o=r.Pe.define()},34640:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(88263),a=t(71117);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M9.341 6.066 12 18.43l2.655-12.364a3.57 3.57 0 0 0 .029-1.183.748.748 0 0 1-.042-.21 2.262 2.262 0 0 0-.721-1.188 3.12 3.12 0 0 0-1.923-.735 3.12 3.12 0 0 0-1.923.735 2.263 2.263 0 0 0-.721 1.189.747.747 0 0 1-.042.209 3.57 3.57 0 0 0 .029 1.183Zm-1.565-.642a5.61 5.61 0 0 0 .096.944l2.46 11.441-5.034-8.286a3.551 3.551 0 0 1-.281-.7.755.755 0 0 0-.038-.148c-.152-.652-.1-1.313.187-1.846.336-.626 1.087-1.242 2.61-1.405Zm.248-1.525c-2.108.127-3.501.957-4.18 2.22-.398.74-.51 1.562-.42 2.353-1.179.603-1.866 1.732-2.09 2.892-.257 1.334.07 2.85 1.11 3.817a.758.758 0 0 0 .037.032l9.045 7.368a.75.75 0 0 0 .948 0l9.045-7.368a.723.723 0 0 0 .038-.032c1.039-.968 1.366-2.483 1.109-3.817-.224-1.161-.913-2.292-2.094-2.894.09-.79-.023-1.61-.42-2.351-.68-1.263-2.073-2.093-4.18-2.22a3.76 3.76 0 0 0-1.062-1.542c-.906-.795-2.08-1.107-2.912-1.107-.832 0-2.006.312-2.912 1.107A3.76 3.76 0 0 0 8.024 3.9Zm8.196 1.525a5.607 5.607 0 0 1-.096.944l-2.457 11.44 5.03-8.285a3.543 3.543 0 0 0 .309-.801c.166-.667.117-1.347-.176-1.893-.336-.626-1.087-1.242-2.61-1.405Zm3.932 4.54a5.077 5.077 0 0 1-.162.32l-5.092 8.388 5.653-4.605c.568-.542.823-1.481.642-2.419-.133-.688-.486-1.298-1.041-1.684ZM9.1 18.67l-5.094-8.386a5.033 5.033 0 0 1-.16-.317c-.554.385-.906.994-1.039 1.681-.18.938.074 1.877.642 2.419l5.65 4.603Z",clipRule:"evenodd"})}))}},34849:(e,n,t)=>{"use strict";t.d(n,{S:()=>a});var r=t(21462),i=t(1230),o=t(54319);function a(){var e=(0,o.C9)().agentState;return(0,r.useMemo)(function(){return e?e.select(function(e){switch(null==e?void 0:e.state){case i.g32.AGENT_STATE_RUNNING:case i.g32.AGENT_STATE_PAUSING:return!0;default:return!1}}):null},[e])}},35079:(e,n,t)=>{"use strict";t.d(n,{A:()=>c});var r=t(29935),i=t(17459),o=t(82643),a=t(47946),l=t(72826),s=function(e){return e.CHANNEL_OPENED="CHANNEL_OPENED",e.OUTPUT_RECEIVED="OUTPUT_RECEIVED",e.STDERR_RECEIVED="STDERR_RECEIVED",e.STATE_CHANGED="STATE_CHANGED",e}({});function c(e){var n,t=e.container,c=(0,l.Ay)(),u=null,d=!1;function p(){return(p=(0,r._)(function(){return(0,o.YH)(this,function(e){if(d)throw Error("closed");return u?[2,u]:[2,new Promise(function(e){c.once(s.CHANNEL_OPENED,function(n){e(n)})})]})})).apply(this,arguments)}var f="",h="",m=t.openChannel({service:"exec"},function(e){var n=e.channel,t=!1;return n.onCommand(function(e){if(null!=e.output)f+=e.output,c.emit(s.OUTPUT_RECEIVED,e.output);else if(null!=e.stderr)h+=e.stderr,c.emit(s.STDERR_RECEIVED,e.stderr);else if(null!=e.state){if(!t){t=!0;return}c.emit(s.STATE_CHANGED,{state:e.state,outputBuffer:f,stderrBuffer:h}),e.state===a.api.State.Stopped&&(f="",h="")}}),u=n,c.emit(s.CHANNEL_OPENED,n),function(){u=null}});return{request:(n=(0,r._)(function(e){var n,t,r,l,s,c,u,d,f,h;return(0,o.YH)(this,function(o){switch(o.label){case 0:return n=e.env,t=e.args,l=void 0===(r=e.lifecycle)?a.api.Exec.Lifecycle.NON_BLOCKING:r,c=void 0!==(s=e.splitStderr)&&s,u=e.noUserEnv,d=(0,i._)(e,["env","args","lifecycle","splitStderr","noUserEnv"]),[4,function(){return p.apply(this,arguments)}()];case 1:return h=(f=o.sent()).request({exec:{env:n,args:t,lifecycle:l,splitStderr:c,noUserEnv:null!=u&&u}}),l===a.api.Exec.Lifecycle.STDIN&&"stdin"in d&&(f.send({input:d.stdin}),f.send({inputClose:{}})),[2,h]}})}),function(e){return n.apply(this,arguments)}),onOutput:function(e){return c.on(s.OUTPUT_RECEIVED,e),function(){c.off(s.OUTPUT_RECEIVED,e)}},onStderr:function(e){return c.on(s.STDERR_RECEIVED,e),function(){c.off(s.STDERR_RECEIVED,e)}},onStateChanged:function(e){return c.on(s.STATE_CHANGED,e),function(){c.off(s.STATE_CHANGED,e)}},getStatus:function(){return u?u.status:"closed"},dispose:function(){d=!0,m(),u=null}}}},35330:(e,n,t)=>{"use strict";t.d(n,{N:()=>E,M:()=>D});var r=t(17844),i=t(93629),o=t(17459),a=t(12694),l=t(88263),s=t(21462),c=t(62019),u=t(37743),d=t(1833),p=t(49069),f=t(86005),h=t(64967),m=f.Lz.baseTheme({".cm-diff-inserted":{backgroundColor:"#0053A644",borderLeft:"#0053A6 solid 3px"},".cm-diff-deleted":{backgroundColor:"#c93c3733",borderLeft:"#c93c37 solid 3px"}}),g=f.NZ.line({attributes:{class:"cm-diff-inserted"}}),v=f.NZ.line({attributes:{class:"cm-diff-deleted"}}),w=p.Pe.define({map:function(e,n){return e.map(n)}}),y=function(e){function n(){return(0,u._)(this,n),(0,c._)(this,n,arguments)}(0,d._)(n,e);var t=n.prototype;return t.toDOM=function(){var e=document.createElement("div");return e.className="cm-diff-alignment cm-line",e.innerHTML="&nbsp;",e},t.ignoreEvent=function(){return!1},n}(f.xO);function b(e){var n=new p.vB,t=new y;e.sort(function(e,n){return e.character-n.character});var r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done);r=!0)for(var s=a.value,c=s.character,u=s.padding,d=0;d<u;d++)n.add(c,c,f.NZ.widget({widget:t,side:-1,block:!0}))}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return n.finish()}function S(e){var n=e.coloredLines,t=e.colorDecoration;return[m,f.Z9.fromClass(function e(r){(0,u._)(this,e);var i=new p.vB,o=!0,a=!1,l=void 0;try{for(var s,c=n[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var d=s.value,f=r.state.doc.line(d);i.add(f.from,f.from,t)}}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}this.decorations=i.finish()},{decorations:function(e){return e.decorations}}),p.sU.define({create:function(){return f.NZ.none},update:function(e,n){var t=!0,r=!1,i=void 0;try{for(var o,a=n.effects[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;if(l.is(w))return l.value}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n.docChanged?e.map(n.changes):e},provide:function(e){return f.Lz.decorations.from(e)}})]}var Y=t(18918),A=t(55315),x=t(27903),C=function(){var e=function(e,n){return f.Lz.domEventHandlers({scroll:function(t,r){if(r===e&&t.target){var i=t.target;if(i.scrollTop){var o=i.scrollTop;n.scrollDOM.scrollTo({top:o})}}}})},n=new p.xx,t=new p.xx;return{extensions:function(){return{right:n.of([]),left:t.of([])}},setup:function(r,i){r.dispatch({effects:t.reconfigure(e(r,i))}),i.dispatch({effects:n.reconfigure(e(i,r))})}}}(),_=C.extensions,k=C.setup;function D(e){var n=e.left,t=e.right,l=e.showDiffDecorations,c=void 0===l||l,u=n.code,d=(0,o._)(n,["code"]),f=t.code,m=(0,o._)(t,["code"]),y=(0,A.A)(),Y=y.ref,x=y.view,C=(0,A.A)(),D=C.ref,E=C.view,R=(0,s.useMemo)(function(){var e=_().left;return d.extensions?[d.extensions,e]:e},[d.extensions]),I=(0,s.useMemo)(function(){var e=_().right;return m.extensions?[m.extensions,e]:e},[m.extensions]);d=(0,i._)((0,r._)({},d),{extensions:R}),m=(0,i._)((0,r._)({},m),{extensions:I});var F=(0,a._)((0,s.useState)(!1),2),T=F[0],P=F[1],L=(0,a._)((0,s.useState)(!1),2),U=L[0],N=L[1];return(0,s.useEffect)(function(){if(x&&E&&T&&U&&c){var e=setTimeout(function(){var e;k(x,E),e=(0,h.nw)(x.state.doc.sliceString(0),E.state.doc.sliceString(0)),x.dispatch({effects:[p.Pe.appendConfig.of(S({coloredLines:e.leftColored.sort(function(e,n){return e-n}),colorDecoration:v})),w.of(b(e.leftPadded))]}),E.dispatch({effects:[p.Pe.appendConfig.of(S({coloredLines:e.rightColored.sort(function(e,n){return e-n}),colorDecoration:g})),w.of(b(e.rightPadded))]})});return function(){return clearTimeout(e)}}},[x,E,T,U,c]),(0,s.useEffect)(function(){x&&(x.dispatch({changes:{from:0,to:x.state.doc.length,insert:u}}),P(!0))},[u,x]),(0,s.useEffect)(function(){E&&(E.dispatch({changes:{from:0,to:E.state.doc.length,insert:f}}),N(!0))},[f,E]),{left:{view:x,ref:Y,code:u,options:d,ready:T},right:{view:E,ref:D,code:f,options:m,ready:U}}}function E(e){var n=e.diffViewer,t=(0,o._)(e,["diffViewer"]),i=(0,r._)({},n.options,t);return(0,l.FD)(l.FK,{children:[(0,l.Y)(Y.Ay,(0,r._)({ref:n.ref,css:{height:n.ready?0:"auto"},initialDoc:n.code,lineWrapping:!1,readOnly:!0},i)),!n.ready&&(0,l.Y)(x.A,{code:n.code,language:i.language,filePath:i.filePath,lineNumbers:!i.hideGutter,fontSize:i.fontSize})]})}},35420:(e,n,t)=>{"use strict";t.d(n,{D:()=>a});var r=t(79730),i=t(22761),o=r.ZU.Object({type:r.ZU.Literal("preferences")}),a=function(e){return i.T(o,e)}},35567:(e,n,t)=>{"use strict";t.d(n,{F:()=>l,_:()=>s});var r=t(88263),i=t(80295),o=t(76126),a=t(59172);function l(e){var n=(0,i.e)(e.sessionId);return null===n?null:(0,r.Y)(s,{cents:n})}function s(e){return(0,r.Y)(a.m_,{tooltip:"Usage for this chat",children:(0,r.FD)(o.EY,{color:"dimmer",variant:"small",children:["$",(e.cents/100).toFixed(2)]})})}},36061:(e,n,t)=>{"use strict";t.d(n,{M:()=>f});var r=t(88263),i=t(33392),o=t(45263),a=t(64583),l=t(48521),s=t(46603),c=t(38292),u=t(68868),d="Have feedback?",p=(0,a.x)({button:[l.wp.color.foregroundDimmest]});function f(e){var n=e.session,t=e.variant,a=(0,i.K)(n,"header"),l=a.openFeedbackModal,f=a.FeedbackModal;return(0,r.FD)(r.FK,{children:["default"===(void 0===t?"default":t)?(0,r.Y)(s.$n,{text:d,size:"small",variant:"nofill",onClick:l,style:{height:28},css:p.button}):(0,r.Y)(c.K0,{alt:d,onClick:l,children:(0,r.Y)(u.A,{color:o.LU.accentPrimaryStronger})}),(0,r.Y)(f,{})]})}},36164:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(88263),a=t(71117);function l(e){return(0,o.FD)(a.Ay,(0,i._)((0,r._)({},e),{children:[(0,o.Y)("path",{d:"M20.777 2.774a.844.844 0 0 1 .329 1.147l-.844 1.52a.845.845 0 1 1-1.476-.818l.845-1.52a.844.844 0 0 1 1.146-.33Zm4.368 3.148a.844.844 0 0 1-.308 1.152L22.77 8.267a.843.843 0 1 1-.844-1.46l2.067-1.194a.844.844 0 0 1 1.152.309ZM8.052 20.36a3.375 3.375 0 0 0 6.618-1.031l-6.618 1.03Zm-1.677.26-1.82.284a2.363 2.363 0 0 1-2.408-1.152l-.478-.825a2.346 2.346 0 0 1 .199-2.65L12.024 3.61a2.362 2.362 0 0 1 3.885.295l6.37 10.994a2.355 2.355 0 0 1-1.677 3.506l-4.257.662a5.062 5.062 0 0 1-9.97 1.553Zm18.577-9.766-1.63-.436a.844.844 0 0 0-.437 1.63l1.63.436a.844.844 0 0 0 .437-1.63Zm-11.61-6.189L3.184 17.331a.658.658 0 0 0-.056.75l.478.827a.675.675 0 0 0 .688.328l16.048-2.5a.666.666 0 0 0 .475-.99L14.45 4.749a.675.675 0 0 0-1.107-.087"}),(0,o.Y)("path",{d:"M20.777 2.774a.844.844 0 0 1 .329 1.147l-.844 1.52a.845.845 0 1 1-1.476-.818l.845-1.52a.844.844 0 0 1 1.146-.33Zm4.368 3.148a.844.844 0 0 1-.308 1.152L22.77 8.267a.843.843 0 1 1-.844-1.46l2.067-1.194a.844.844 0 0 1 1.152.309ZM8.052 20.36a3.375 3.375 0 0 0 6.618-1.031l-6.618 1.03Zm-1.677.26-1.82.284a2.363 2.363 0 0 1-2.408-1.152l-.478-.825a2.346 2.346 0 0 1 .199-2.65L12.024 3.61a2.362 2.362 0 0 1 3.885.295l6.37 10.994a2.355 2.355 0 0 1-1.677 3.506l-4.257.662a5.062 5.062 0 0 1-9.97 1.553Zm18.577-9.766-1.63-.436a.844.844 0 0 0-.437 1.63l1.63.436a.844.844 0 0 0 .437-1.63Zm-11.61-6.189L3.184 17.331a.658.658 0 0 0-.056.75l.478.827a.675.675 0 0 0 .688.328l16.048-2.5a.666.666 0 0 0 .475-.99L14.45 4.749a.675.675 0 0 0-1.107-.087"})]}))}},36296:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(88263),i=t(21462),o=t(58937),a=t(10429);function l(e){var n=e.modules,t=(0,i.useMemo)(function(){return n.filter(function(e){return"replit"!==e.id})},[n]);return(0,r.Y)(a.S,{gap:8,children:t.map(function(e){return(0,r.Y)(o.A,{module:e,defaultExpanded:!0,isInstalled:!0},e.id)})})}},36899:(e,n,t)=>{"use strict";t.d(n,{tz:()=>Q,SF:()=>S,EF:()=>V});var r=t(83846),i=t(17844),o=t(88263),a=t(21462),l=t(5204),s=t(80923),c=t(71452),u=t(35992),d=t(44370),p=t(68820),f=t(12694),h=t(69338),m=t(83170),g=(0,a.createContext)(null);function v(){var e=(0,a.useContext)(g);if(!e)throw Error("Expected store in context");return e}function w(e){return(0,h.md)(e,{store:v()})}function y(e){return(0,m.k)(e,v())}var b=function(e){return(0,h.Xr)(e,{store:v()})};function S(e){var n=(0,f._)((0,a.useState)(function(){return(0,d.y$)()}),1)[0];return(0,o.Y)(g.Provider,{value:n,children:e.children})}var Y=(0,t(49045).v)(["display","visibility","transform","maxHeight","width"]),A=Y.cssVars,x=Y.styleTokens,C=t(45263),_=t(36112),k=(0,d.eU)(null),D=(0,d.eU)("default"),E=(0,d.eU)({command:null,offset:{x:0,y:0},visible:!1}),R=(0,p.mg)(E,function(e){return e.offset}),I=(0,p.mg)(E,function(e){return e.command}),F=(0,p.mg)(E,function(e){return e.visible}),T=(0,p.mg)(E,function(e){return e.onKeyDownHandler}),P=(0,p.mg)(k,function(e){var n;return null!=(n=null==e?void 0:e.initial)?n:null}),L=(0,d.eU)(function(e){var n=e(R);if(!n)return null;var t=n.y,r=window.innerHeight-t,i=e(P),o=null!==i?i-r:0;return o>0&&(t=Math.max(16,t-Math.min(200,o))),t}),U=(0,d.eU)(function(e){var n=e(R);if(!n)return null;var t=n.x,r=window.innerWidth,i=e(O),o=t+(null!=i?i:M)-r+16;return o>0&&(t=Math.max(16,t-o)),t}),N=(0,d.eU)(function(e){var n=e(U),t=e(L);return null==n||null===t?null:(0,r._)({},A.transform,"translate(".concat(n,"px, ").concat(t,"px)"))}),O=(0,d.eU)(null),M=180,B=(0,d.eU)(function(e){var n=e(O);return(0,r._)({},A.width,(null===n?M:n)+"px")}),H=(0,d.eU)(function(e){var n=e(L);return null===n?null:(0,r._)({},A.maxHeight,"calc(100vh - ".concat(C.LU.space16," - ").concat(n,"px)"))}),z=(0,d.eU)(null,function(e,n){n(k,null),n(O,null),n(W,null),n(E,function(e){return(0,u.jM)(e,function(e){e.visible=!1,e.command=null})})}),W=(0,d.eU)(null),G=(0,d.eU)(null,function(e,n,t){if(n(D,t.background),t.width&&n(O,t.width),t.target){var r=t.target.getBoundingClientRect(),i={x:r.x,y:r.y+r.height+8};n(W,r),n(E,function(e){return(0,u.jM)(e,function(e){e.command=t.command,e.offset=i,e.visible=!0,e.onKeyDownHandler=t.onKeyDownHandler})});return}n(E,function(e){return(0,u.jM)(e,function(e){e.command=t.command,e.offset=t.offset,e.visible=!0,e.onKeyDownHandler=t.onKeyDownHandler})})});function V(){var e=b(G),n=b(z),t=y(F),r=(0,_.X$)({elevated:!0});return{openContextMenu:(0,a.useCallback)(function(n){e(n.target instanceof HTMLElement?{command:n.command,target:n.target,width:n.width,background:r,onKeyDownHandler:n.onKeyDownHandler}:{command:n.command,offset:n.target,target:null,width:n.width,background:r,onKeyDownHandler:n.onKeyDownHandler})},[e,r]),closeContextMenu:n,isVisible:t,onContextMenu:(0,a.useCallback)(function(n,t){var i=t.command,o=t.width,a=t.onKeyDownHandler;n.preventDefault(),e({command:i,offset:{x:n.clientX,y:Math.min(window.innerHeight-64,n.clientY)},target:null,width:o,background:r,onKeyDownHandler:a})},[e,r])}}var j=t(64583),Z=t(48521),q=t(13641),K=t(91668),$=(0,j.x)({surface:[Z.wp.shadow(3),Z.wp.borderRadius(8),Z.wp.position.absolute,{top:0,left:0,border:"1px solid",borderColor:C.LU.outlineDefault,maxWidth:"min(500px, calc(100vw - ".concat(C.LU.space16,"))"),minWidth:"min(100px, calc(100vw - ".concat(C.LU.space16,"))"),maxHeight:x.maxHeight,width:x.width,transform:x.transform,visibility:x.visibility,display:x.display}]});function J(){var e=w(W);return e?(0,o.Y)("div",{style:{position:"fixed",width:e.width,height:e.height,top:e.y,left:e.x}}):null}var Q=(0,a.memo)(function(){var e=b(z),n=w(I),t=w(T),u=y(F),d=(0,a.useRef)(function(){});(0,a.useEffect)(function(){var e=function(e){if(e){var n;null==(n=d.current)||n.call(d);return}};return e(u.current),u.subscribe(e)},[u]);var p=b(k),f=(0,a.useRef)(null);(0,a.useEffect)(function(){var n=function(n){var t;n.target instanceof HTMLElement&&(null==(t=f.current)?void 0:t.contains(n.target))||e()},t=function(){e()},r=function(e){e?(window.addEventListener("blur",t),document.addEventListener("pointerdown",n)):(window.removeEventListener("blur",t),document.removeEventListener("pointerdown",n))},i=u.subscribe(r);return function(){i(),r(!1)}},[u,e]);var h=y(N);(0,c.d)(f,h),(0,c.d)(f,y(H)),(0,c.d)(f,u,function(e){var n;return n={},(0,r._)(n,A.visibility,e?"visible":"hidden"),(0,r._)(n,A.display,e?"flex":"none"),n});var m=y(B);(0,c.d)(f,m);var g=(0,s.A)(),v=w(F)&&!g,S=w(D),Y=(0,i._)({},h.current,m.current);return n?(0,o.FD)(q.Z,{children:[(0,o.Y)(J,{}),(0,o.Y)(l.n1,{autoFocus:v,restoreFocus:!0,contain:!0,children:(0,o.Y)(_.ui,{onKeyDown:function(n){"Escape"===n.key&&e()},innerRef:f,css:$.surface,style:Y,background:S,children:(0,o.Y)(K.r,{iconBreadcrumbs:!0,command:n,onAction:e,onSelect:e,onTotalHeightChange:p,onKeyDown:t,focusRef:d,compact:!0})})})]}):null})},37003:(e,n,t)=>{"use strict";t.d(n,{D8:()=>v,m2:()=>A,vc:()=>x});var r=t(17844),i=t(93629),o=t(17459),a=t(88263),l=t(1230),s=t(64583),c=t(48521),u=t(76126),d=t(10429),p=t(4983),f=t(2115),h=t(38107),m=t(94553),g=new Map([[l.e3q.BASIC,p.A],[l.e3q.ADVANCED,f.A]]);function v(e){var n=e.model,t=(0,o._)(e,["model"]),i=g.get(n);return i?(0,a.Y)(i,(0,r._)({},t)):null}l.e3q.BASIC,l.e3q.ADVANCED;var w=new Map([[l.qRv.GENERATE,m.A],[l.qRv.TRANSFORM,m.A],[l.qRv.EXPLAIN,h.A],[l.qRv.REPLIT_DOCS,h.A]]),y=new Map([[l.qRv.GENERATE,"Generate"],[l.qRv.TRANSFORM,"Modify"],[l.qRv.EXPLAIN,"Explain"],[l.qRv.REPLIT_DOCS,"Ask replit.com"]]),b=new Map([[l.Z1T.GENERATE_CODE,m.A],[l.Z1T.TRANSFORM_CODE,m.A],[l.Z1T.EXPLAIN_CODE,h.A],[l.Z1T.DEBUGGER,h.A]]),S=new Map([[l.Z1T.GENERATE_CODE,"Generate"],[l.Z1T.TRANSFORM_CODE,"Modify"],[l.Z1T.EXPLAIN_CODE,"Explain"],[l.Z1T.DEBUGGER,"Debug"]]),Y=(0,s.x)({iconLabel:[c.wp.rowWithGap(4),c.wp.align.center]});function A(e){var n=e.intent,t=e.icon,o=e.text,l=w.get(n),s=y.get(n);return l&&s?(0,a.FD)(d.S,{css:Y.iconLabel,children:[(0,a.Y)(l,(0,r._)({},t)),(0,a.Y)(u.EY,(0,i._)((0,r._)({},o),{children:s}))]}):null}function x(e){var n=e.type,t=e.icon,o=e.text,l=b.get(n),s=S.get(n);return l&&s?(0,a.FD)(d.S,{css:Y.iconLabel,children:[(0,a.Y)(l,(0,r._)({},t)),(0,a.Y)(u.EY,(0,i._)((0,r._)({},o),{children:s}))]}):null}},37039:(e,n,t)=>{"use strict";t.d(n,{d:()=>Y});var r=t(83846),i=t(88263),o=t(29542),a=t.n(o),l=t(21462),s=t(45263),c=t(42425),u=t(64583),d=t(973),p=t(48521),f=t(38292),h=t(36112),m=t(76126),g=t(10429),v=t(83650),w=t(71117),y=(0,u.x)({bannerTextWrapper:[p.wp.flex.growAndShrink(1)],anchor:[p.wp.reset.button,p.wp.rowWithGap(16),p.wp.center,p.wp.flex.growAndShrink(1),(0,r._)({},p.$_.max("mobileMax"),[p.wp.rowWithGap(8)])],bView:[p.wp.reset.button,p.wp.rowWithGap(16),p.wp.center,p.wp.flex.growAndShrink(1),p.wp.cursor.pointer,(0,r._)({},p.$_.max("mobileMax"),[p.wp.rowWithGap(8)])],closeIcon:[p.wp.flex.grow(0),{background:"transparent"}]}),b=g.D.a,S=g.D.button,Y=(0,l.forwardRef)(function(e,n){var t=e.className,r=e.colorway,o=e.closable,l=e.iconLeft,u=e.iconRight,Y=e.title,A=e.text,x=e.closeAction,C=e.textAlign,_={title:[p.wp.fontWeight.bold,p.wp.pb(4),C?p.wp.textAlign[C]:p.wp.textAlign.center],text:[p.wp.flex.growAndShrink(1),C?p.wp.textAlign[C]:p.wp.textAlign.center]},k=(0,i.FD)(i.FK,{children:[(0,i.Y)(w.Z_,{size:16,children:l}),(0,i.FD)(g.S,{css:y.bannerTextWrapper,children:[Y?(0,i.Y)(m.EY,{css:_.title,variant:"text",children:Y}):null,(0,i.Y)(m.EY,{css:_.text,variant:"small",children:A})]}),(0,i.Y)(w.Z_,{size:16,children:u})]}),D=r?s.ky[r].default:s.LU.accentPrimaryDefault,E=[p.wp.rowWithGap(4),p.wp.align.center,Y?p.wp.p(8):p.wp.p(4),p.wp.pl(8),p.wp.borderRadius(),p.wp.flex.growAndShrink(1),r?(0,c.KU)(r):d.b.filledAndOutlined,{"&:focus-within":{boxShadow:"0 0 0 2px "+D}}];return(0,i.FD)(g.S,{css:E,children:["href"in e?(0,i.Y)(a(),{legacyBehavior:!0,as:e.as,href:e.href,passHref:!0,prefetch:e.prefetch,replace:e.replace,scroll:e.scroll,shallow:e.shallow,children:(0,i.Y)(b,{ref:n,className:t,rel:e.rel,role:"link",target:e.target,css:y.anchor,children:k})}):(0,i.Y)(S,{ref:n,className:t,onClick:e.onClick,type:e.type,css:y.bView,children:k}),o?(0,i.Y)(h.ui,{elevated:!0,css:y.closeIcon,children:(0,i.Y)(f.K0,{alt:"Close",tooltipBehavior:"hidden",colorway:r,onClick:x,children:(0,i.Y)(v.A,{})})}):null]})});Y.displayName="StatusBannerButton"},37237:(e,n,t)=>{"use strict";t.d(n,{W:()=>a,z:()=>o});var r=t(21462),i=new(t(82110)).N(new Map);function o(e){var n=e.type,t=e.position,o=void 0===t?"bottom":t,a=(0,r.useRef)(null);return(0,r.useEffect)(function(){var e=a.current;if(e instanceof HTMLElement)return i.update(function(t){var r=new Map(t);return r.set(n,{element:e,position:o}),r}),function(){i.update(function(t){var r,i=new Map(t);return(null==(r=i.get(n))?void 0:r.element)===e&&i.delete(n),i})}},[n,o]),a}function a(e){var n=i.current.get(e);return null!=n?n:null}},37290:(e,n,t)=>{"use strict";t.d(n,{f:()=>r});var r=new Map([["envEditor",["Environment variables"]],["ghostwriterChat",["Chat",{alias:"Ghostwriter",prefix:"previously"}]],["shell",["Terminal"]],["objectStorage",["Blobject Storage","Blob Cloud"]],["dependencies",["Packages","System dependencies","Nix","Modules"]],["integrations",["Cloud Services","OpenAI","Slack"]],["agentProgress",["Agent Progress","AI Agent","Preview","Output","Webview"]],["neon",[{alias:"Supabase",prefix:"similar to"}]],["webview",["Preview","Output",{alias:"Webview",prefix:"previously"}]]])},37772:(e,n,t)=>{"use strict";t.d(n,{I:()=>s});var r=t(88263),i=t(45263),o=t(64583),a=t(10429),l=(0,o.x)({container:[{maskImage:"linear-gradient(to right, white 80%, transparent)"}]}),s=function(e){var n=e.className;return(0,r.Y)(a.S,{className:n,css:l.container,children:(0,r.FD)("svg",{viewBox:"0 0 448 59",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.Y)("path",{d:"M28 14.5C56 14.5 56 44.5 84 44.5",stroke:i.LU.accentPositiveDimmest}),(0,r.Y)("path",{d:"M196 14.5C224 14.5 224 44.5 252 44.5",stroke:i.LU.accentPositiveDimmest}),(0,r.Y)("path",{d:"M280 14.5C308 14.5 308 44.5 336 44.5",stroke:i.LU.accentPositiveDimmest}),(0,r.Y)("path",{d:"M364 14.5C392 14.5 392 44.5 420 44.5",stroke:i.LU.accentPositiveDimmest}),(0,r.Y)("path",{d:"M168 14.5C140 14.5 140 44.5 112 44.5",stroke:i.LU.accentPositiveDimmest}),(0,r.Y)("path",{d:"M112 14.5C140 14.5 140 44.5 168 44.5",stroke:i.LU.accentPositiveDimmest}),(0,r.Y)("path",{d:"M336 14.5C308 14.5 308 44.5 280 44.5",stroke:i.LU.accentPositiveDimmest}),(0,r.Y)("path",{d:"M420 14.5C392 14.5 392 44.5 364 44.5",stroke:i.LU.accentPositiveDimmest}),(0,r.Y)("path",{d:"M252 14.5C224 14.5 224 44.5 196 44.5",stroke:i.LU.accentPositiveDimmest}),(0,r.Y)("rect",{width:"28",height:"28",rx:"4",fill:i.LU.accentPositiveDimmest}),(0,r.Y)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.6868 9.64645C11.8821 9.84171 11.8821 10.1583 11.6868 10.3536L8.04036 14L11.6868 17.6464C11.8821 17.8417 11.8821 18.1583 11.6868 18.3536C11.4915 18.5488 11.175 18.5488 10.9797 18.3536L6.9797 14.3536C6.78444 14.1583 6.78444 13.8417 6.9797 13.6464L10.9797 9.64645C11.175 9.45118 11.4915 9.45118 11.6868 9.64645ZM16.313 9.64645C16.5083 9.45118 16.8249 9.45118 17.0201 9.64645L21.0201 13.6464C21.2154 13.8417 21.2154 14.1583 21.0201 14.3536L17.0201 18.3536C16.8249 18.5488 16.5083 18.5488 16.313 18.3536C16.1178 18.1583 16.1178 17.8417 16.313 17.6464L19.9595 14L16.313 10.3536C16.1178 10.1583 16.1178 9.84171 16.313 9.64645Z",fill:i.LU.accentPositiveStrongest}),(0,r.Y)("rect",{x:"84",y:"31",width:"28",height:"28",rx:"4",fill:i.LU.accentPositiveDimmest}),(0,r.Y)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M95.6868 40.6464C95.8821 40.8417 95.8821 41.1583 95.6868 41.3536L92.0404 45L95.6868 48.6464C95.8821 48.8417 95.8821 49.1583 95.6868 49.3536C95.4915 49.5488 95.175 49.5488 94.9797 49.3536L90.9797 45.3536C90.7844 45.1583 90.7844 44.8417 90.9797 44.6464L94.9797 40.6464C95.175 40.4512 95.4915 40.4512 95.6868 40.6464ZM100.313 40.6464C100.508 40.4512 100.825 40.4512 101.02 40.6464L105.02 44.6464C105.215 44.8417 105.215 45.1583 105.02 45.3536L101.02 49.3536C100.825 49.5488 100.508 49.5488 100.313 49.3536C100.118 49.1583 100.118 48.8417 100.313 48.6464L103.959 45L100.313 41.3536C100.118 41.1583 100.118 40.8417 100.313 40.6464Z",fill:i.LU.accentPositiveStronger}),(0,r.Y)("rect",{x:"168",y:"31",width:"28",height:"28",rx:"4",fill:i.LU.accentPositiveDimmest}),(0,r.Y)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M179.687 40.6464C179.882 40.8417 179.882 41.1583 179.687 41.3536L176.04 45L179.687 48.6464C179.882 48.8417 179.882 49.1583 179.687 49.3536C179.492 49.5488 179.175 49.5488 178.98 49.3536L174.98 45.3536C174.784 45.1583 174.784 44.8417 174.98 44.6464L178.98 40.6464C179.175 40.4512 179.492 40.4512 179.687 40.6464ZM184.313 40.6464C184.508 40.4512 184.825 40.4512 185.02 40.6464L189.02 44.6464C189.215 44.8417 189.215 45.1583 189.02 45.3536L185.02 49.3536C184.825 49.5488 184.508 49.5488 184.313 49.3536C184.118 49.1583 184.118 48.8417 184.313 48.6464L187.959 45L184.313 41.3536C184.118 41.1583 184.118 40.8417 184.313 40.6464Z",fill:i.LU.accentPositiveStronger}),(0,r.Y)("rect",{x:"252",y:"31",width:"28",height:"28",rx:"4",fill:i.LU.accentPositiveDimmest}),(0,r.Y)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M263.687 40.6464C263.882 40.8417 263.882 41.1583 263.687 41.3536L260.04 45L263.687 48.6464C263.882 48.8417 263.882 49.1583 263.687 49.3536C263.492 49.5488 263.175 49.5488 262.98 49.3536L258.98 45.3536C258.784 45.1583 258.784 44.8417 258.98 44.6464L262.98 40.6464C263.175 40.4512 263.492 40.4512 263.687 40.6464ZM268.313 40.6464C268.508 40.4512 268.825 40.4512 269.02 40.6464L273.02 44.6464C273.215 44.8417 273.215 45.1583 273.02 45.3536L269.02 49.3536C268.825 49.5488 268.508 49.5488 268.313 49.3536C268.118 49.1583 268.118 48.8417 268.313 48.6464L271.959 45L268.313 41.3536C268.118 41.1583 268.118 40.8417 268.313 40.6464Z",fill:i.LU.accentPositiveStronger}),(0,r.Y)("rect",{x:"336",y:"31",width:"28",height:"28",rx:"4",fill:i.LU.accentPositiveDimmest}),(0,r.Y)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M347.687 40.6464C347.882 40.8417 347.882 41.1583 347.687 41.3536L344.04 45L347.687 48.6464C347.882 48.8417 347.882 49.1583 347.687 49.3536C347.492 49.5488 347.175 49.5488 346.98 49.3536L342.98 45.3536C342.784 45.1583 342.784 44.8417 342.98 44.6464L346.98 40.6464C347.175 40.4512 347.492 40.4512 347.687 40.6464ZM352.313 40.6464C352.508 40.4512 352.825 40.4512 353.02 40.6464L357.02 44.6464C357.215 44.8417 357.215 45.1583 357.02 45.3536L353.02 49.3536C352.825 49.5488 352.508 49.5488 352.313 49.3536C352.118 49.1583 352.118 48.8417 352.313 48.6464L355.959 45L352.313 41.3536C352.118 41.1583 352.118 40.8417 352.313 40.6464Z",fill:i.LU.accentPositiveStronger}),(0,r.Y)("rect",{x:"420",y:"31",width:"28",height:"28",rx:"4",fill:i.LU.accentPositiveDimmest}),(0,r.Y)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M431.687 40.6464C431.882 40.8417 431.882 41.1583 431.687 41.3536L428.04 45L431.687 48.6464C431.882 48.8417 431.882 49.1583 431.687 49.3536C431.492 49.5488 431.175 49.5488 430.98 49.3536L426.98 45.3536C426.784 45.1583 426.784 44.8417 426.98 44.6464L430.98 40.6464C431.175 40.4512 431.492 40.4512 431.687 40.6464ZM436.313 40.6464C436.508 40.4512 436.825 40.4512 437.02 40.6464L441.02 44.6464C441.215 44.8417 441.215 45.1583 441.02 45.3536L437.02 49.3536C436.825 49.5488 436.508 49.5488 436.313 49.3536C436.118 49.1583 436.118 48.8417 436.313 48.6464L439.959 45L436.313 41.3536C436.118 41.1583 436.118 40.8417 436.313 40.6464Z",fill:i.LU.accentPositiveStronger}),(0,r.Y)("line",{x1:"28",y1:"14",x2:"444",y2:"14",stroke:i.LU.accentPositiveDimmest,strokeWidth:"2"})]})})}},37773:(e,n,t)=>{"use strict";t.d(n,{KP:()=>g,Pl:()=>k,WZ:()=>y,iN:()=>A,sT:()=>Y});var r=t(62019),i=t(37743),o=t(83846),a=t(1833),l=t(23099),s=t.n(l),c=t(49069),u=t(86005),d=t(57547),p=t(61666),f=t(53231),h=t(45263),m="cm-active-in-message-secret";function g(e,n){for(var t=[],r=e.state.field(S).iter(),i=new Set;r.value;){if(!r.value.dismissed&&n[r.value.id]){var o="`".concat(n[r.value.id],"`");t.push({from:r.from,to:r.to,insert:o}),i.add(r.value.provider)}r.next()}t.length&&e.dispatch({changes:t,annotations:b.of({providers:Array.from(i)})})}var v=u.Lz.theme((0,o._)({},".".concat(m),{display:"inline-block",color:h.LU.foregroundDimmer,backgroundColor:h.LU.orangeDimmer,"&::selection":{color:h.LU.foregroundDefault}})),w=function(e){function n(e){var t,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2?arguments[2]:void 0;return(0,i._)(this,n),(t=(0,r._)(this,n)).provider=e,t.dismissed=o,t.id=null!=a?a:"secret-".concat(n.counter++),t}(0,a._)(n,e);var t=n.prototype;return t.eq=function(e){return e instanceof n&&this.id===e.id},t.dismiss=function(){return new n(this.provider,!0,this.id)},n.range=function(e,n,t){return new this(e).range(n,t)},n}(c.FB);w.counter=0,w.prototype.startSide=1,w.prototype.endSide=-1;var y=c.Pe.define(),b=c.YH.define(),S=c.sU.define({create:function(){return c.om.empty},update:function(e,n){var t=null;n.changes.empty||(e.size&&(e=(e=e.map(n.changes)).update({filter:function(e,n){return e!==n}})),n.changes.iterChangedRanges(function(e,r,i,o){var a=n.startState.doc.lineAt(e).from,l=n.startState.doc.lineAt(r).to,s=n.state.doc.lineAt(i).from,c=n.state.doc.lineAt(o).to,u=function(e,n,t,r,i,o){function a(e){return" "===e||"	"===e||"\n"===e||"\r"===e}function l(e){return 0===e.length||0===e.trim().length}var s=e.slice(t,r),c=n.slice(i,o);if(l(s)&&l(c))return null;for(var u=i;u>0&&!a(n[u-1]);)u--;for(var d=o;d<n.length&&!a(n[d]);)d++;if(i===o&&t<r){if(t>0&&!a(e[t-1])){var p=!l(s),f=r<e.length&&!a(e[r]);if(p||!f)return{fromB:u,toB:d}}if(r<e.length&&!a(e[r])){var h=!l(s),m=t>0&&!a(e[t-1]);if(h||!m)return{fromB:u,toB:d}}if(l(s))return null}for(;u<d&&a(n[u]);)u++;for(;d>u&&a(n[d-1]);)d--;return u>=d?null:{fromB:u,toB:d}}(n.startState.sliceDoc(a,l),n.state.sliceDoc(s,c),e-a,r-a,i-s,o-s);u&&(null!=t||(t=[]),t.push({from:u.fromB+s,to:u.toB+s}))}));var r=!0,i=!1,o=void 0;try{for(var a,l=n.effects[Symbol.iterator]();!(r=(a=l.next()).done);r=!0)if(a.value.is(y)){for(var s=new c.vB,u=e.iter();u.value;)s.add(u.from,u.to,u.value.dismiss()),u.next();e=s.finish();continue}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}if(t){var d=!0,f=!1,h=void 0;try{for(var m,g=t[Symbol.iterator]();!(d=(m=g.next()).done);d=!0)!function(){var t=m.value;e=e.update({filter:function(e,n){return e<t.from||n>t.to}});var r=(0,p.V)(n.state.sliceDoc(t.from,t.to));if(r){var i=r.map(function(e){return w.range(e.provider,t.from+e.start,t.from+e.end)});e=e.update({add:i,sort:!0})}}()}catch(e){f=!0,h=e}finally{try{d||null==g.return||g.return()}finally{if(f)throw h}}}return e}}),Y=c.sU.define({create:function(){return[]},compare:function(e,n){return s()(e,n)},update:function(e,n){if(!(0,d.$H)(n,S))return e;for(var t=[],r=n.state.field(S).iter();r.value;)r.value.dismissed||t.push({id:r.value.id,provider:r.value.provider,key:n.state.sliceDoc(r.from,r.to)}),r.next();return t}}),A=c.sU.define({create:function(){return!1},update:function(e,n){return(0,d.$H)(n,Y)?n.state.field(Y).length>0:e}}),x=u.NZ.mark({class:m,inclusiveStart:!0,inclusiveEnd:!0}),C=c.sU.define({create:function(){return u.NZ.none},update:function(e,n){if(!(0,d.$H)(n,S))return e;for(var t=new c.vB,r=n.state.field(S).iter();r.value;)r.value.dismissed||t.add(r.from,r.to,x),r.next();return t.finish()},provide:function(e){return u.Lz.decorations.from(e)}}),_=u.Lz.updateListener.of(function(e){if((0,d.$H)(e,S)){var n=null!=(a=e.startState.field(Y,!1))?a:[],t=e.state.field(Y).filter(function(e){return!n.some(function(n){return n.id===e.id})});t.length&&(0,f.u4)(f.AZ.IN_MESSAGE_SCANNER_USED,{action:"secrets_detected",providers:t.map(function(e){return e.provider})});var r=!0,i=!1,o=void 0;try{for(var a,l,s=e.transactions[Symbol.iterator]();!(r=(l=s.next()).done);r=!0){var c=l.value,u=!0,p=!1,h=void 0;try{for(var m,g=c.effects[Symbol.iterator]();!(u=(m=g.next()).done);u=!0)if(m.value.is(y)){var v=c.startState.field(S,!1);if(v){for(var w=new Set,A=v.iter();A.value;)A.value.dismissed||w.add(A.value.provider),A.next();w.size&&(0,f.u4)(f.AZ.IN_MESSAGE_SCANNER_USED,{action:"secrets_dismissed",providers:Array.from(w)})}}}catch(e){p=!0,h=e}finally{try{u||null==g.return||g.return()}finally{if(p)throw h}}var x=c.annotation(b);x&&(0,f.u4)(f.AZ.IN_MESSAGE_SCANNER_USED,{action:"secrets_replaced",providers:x.providers})}}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}}}),k=[S,v,c.Nb.highest(C),Y,A,_]},37804:(e,n,t)=>{"use strict";t.d(n,{Ak:()=>m,pK:()=>f,yQ:()=>v});var r=t(17844),i=t(12584),o=t(41114),a=t(86997),l=t(50175);function s(){var e=(0,i._)(["\n  query DatabaseUsageSectionCurrentUser {\n    currentUser {\n      id\n      usageInterval {\n        ... on UsageInterval {\n          startDate\n          endDate\n          resources {\n            neonComputeTime {\n              usage\n            }\n            neonDataStorage {\n              usage\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return s=function(){return e},e}function c(){var e=(0,i._)(["\n  mutation RollbackNeonDatabase($input: RollbackNeonDatabaseInput!) {\n    rollbackNeonDatabase(input: $input) {\n      __typename\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on RollbackNeonDatabaseResult {\n        database {\n          id\n        }\n      }\n    }\n  }\n"]);return c=function(){return e},e}function u(){var e=(0,i._)(["\n  mutation SetNeonHistoryRetentionPeriod(\n    $input: SetNeonDatabaseConfigurationInput!\n  ) {\n    setNeonDatabaseConfiguration(input: $input) {\n      __typename\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on SetNeonDatabaseConfigurationResult {\n        database {\n          id\n          historyRetentionSeconds\n        }\n      }\n    }\n  }\n"]);return u=function(){return e},e}var d={},p=(0,o.J1)(s());function f(e){var n=(0,r._)({},d,e);return a.I(p,n)}var h=(0,o.J1)(c());function m(e){var n=(0,r._)({},d,e);return l.n(h,n)}var g=(0,o.J1)(u());function v(e){var n=(0,r._)({},d,e);return l.n(g,n)}},38082:e=>{e.exports={root:"Layout_root__zbmnW","fade-in":"Layout_fade-in___4xKz",middle:"Layout_middle__CTNFw",enter:"Layout_enter__U3ed7",divider:"Layout_divider__K1Gu3",secondarySection:"Layout_secondarySection__QzsOI",primaryTools:"Layout_primaryTools__ynQG1",secondaryTools:"Layout_secondaryTools__xDqvE",secondaryToolsScroll:"Layout_secondaryToolsScroll__ZeWEF",fade:"Layout_fade__5GmrQ",fadeTop:"Layout_fadeTop__y79T3",fadeBottom:"Layout_fadeBottom__spqF7"}},38107:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(88263),a=t(71117);function l(e){return(0,o.FD)(a.Ay,(0,i._)((0,r._)({},e),{children:[(0,o.Y)("path",{fillRule:"evenodd",d:"M6.196 4.696a1.475 1.475 0 0 1 1.043-.432h2.897a.632.632 0 0 0 0-1.264H7.239A2.74 2.74 0 0 0 4.5 5.74v12.642a2.74 2.74 0 0 0 2.74 2.74h11.378c.35 0 .632-.283.632-.632v-8.534a.738.738 0 0 0-1.475 0v3.687H7.24a2.74 2.74 0 0 0-1.475.431V5.74c0-.39.156-.766.432-1.043ZM7.4 17.12h10.376v2.528H7.399a1.52 1.52 0 0 1-1.007-.37 1.197 1.197 0 0 1-.417-.894c0-.335.15-.657.417-.894a1.52 1.52 0 0 1 1.007-.37Z",clipRule:"evenodd"}),(0,o.Y)("path",{fillRule:"evenodd",d:"M16.389 2.266c-.13-.355-.648-.355-.778 0l-.893 2.44a.407.407 0 0 1-.264.247l-2.166.663a.396.396 0 0 0 0 .762l2.166.669c.123.038.22.13.264.247l.893 2.44c.13.355.648.355.778 0l.893-2.44a.407.407 0 0 1 .264-.247l2.166-.666a.396.396 0 0 0 0-.762l-2.166-.666a.407.407 0 0 1-.264-.247l-.893-2.44Z",clipRule:"evenodd"})]}))}},38167:(e,n,t)=>{"use strict";t.d(n,{Sv:()=>i,_3:()=>l,xC:()=>a});var r=t(42415),i={autoscaleDeploymentCostDetails:r.jc,rvmDeploymentCostDetails:r.N3,scheduledDeploymentCostDetails:r.$S,staticDeploymentCostDetails:r.uE},o={autoscaleDeploymentCostDetails:r.xz,rvmDeploymentCostDetails:r.D6,scheduledDeploymentCostDetails:r.VH,staticDeploymentCostDetails:r.uE};function a(e){return e.hasDeploymentRepricing?o:i}function l(e,n){switch(e){case"e2-micro":case"e2-small":case"e2-medium":case"n1-custom-1-4096":case"e2-standard-2":case"e2-standard-4":return n.rvmDeploymentCostDetails[e];default:return{costPerHour:null,costPerMonth:null}}}},38387:(e,n,t)=>{"use strict";t.d(n,{A:()=>o});var r=t(21462),i=t(34626);function o(){(0,r.useEffect)(function(){var e=null;return!function n(){if(window.performance.memory){var t=window.performance.memory,r=t.jsHeapSizeLimit,o=t.totalJSHeapSize,a=t.usedJSHeapSize,l=window.performance.now();i.vF.info("perf:browser_memory",{jsHeapSizeLimit:r,totalJSHeapSize:o,usedJSHeapSize:a,timeElapsed:l}),e=setTimeout(n,-(5*Math.log(Math.random())*6e4))}}(),function(){e&&clearTimeout(e)}},[])}},38633:(e,n,t)=>{"use strict";t.d(n,{Bm:()=>U,CK:()=>V,Gp:()=>G,KA:()=>j,UC:()=>H,Y9:()=>P,Yw:()=>M,af:()=>z,ou:()=>W});var r=t(29935),i=t(82643),o=t(88263),a=t(71115),l=t.n(a),s=t(21462),c=t(48686),u=t(83150),d=t(29383),p=t(31569),f=t(71868),h=t(60652),m=t(95139),g=t(34834),v=t(17513),w=t(92985),y=t(95778),b=t(1342),S=t(58370),Y=t(41852),A=t(99615),x=t(79209),C=t(45263),_=t(48521),k=t(10429),D=t(75308),E=t(55545),R=t(3694),I=t(22318),F=t(29064),T=(0,x.AH)([_.wp.height(28),_.wp.flex.row,_.wp.align.center,{borderBottom:"1px solid ".concat(C.LU.backgroundHigher),opacity:.8,":hover":{opacity:1}}]);function P(e){return"/replEnvironmentDesktop"!==l().pathname?null:(0,o.Y)(k.S,{css:T,children:e.children})}var L=(0,x.AH)([_.wp.flex.row,_.wp.align.center,_.wp.flex.growAndShrink(1),_.wp.overflowX("auto"),_.wp.height("100%"),{"&::-webkit-scrollbar":{height:0},scrollbarWidth:"none"}]);function U(e){return(0,o.Y)(k.S,{css:L,children:e.children})}var N=(0,x.AH)([_.wp.flex.row,_.wp.align.center,_.wp.height("100%")]),O=(0,x.AH)([_.wp.flex.row,_.wp.align.center,_.wp.height("100%"),_.wp.px(2)]);function M(e){return(0,o.Y)(k.S,{css:N,children:(0,o.Y)(k.S,{css:O,children:e.children})})}var B=(0,x.AH)([_.wp.flex.growAndShrink(1),_.wp.position.relative,_.wp.overflow("hidden"),_.wp.borderRadius(0,0,8,8)]);function H(e){return(0,o.Y)(k.S,{css:[B,e.children&&_.wp.center],children:e.children})}function z(e){return{type:(0,S.QY)({path:e}),data:{path:e}}}function W(e){var n=e.path,t=e.performPaneOperation,r=e.children,i=(0,s.useCallback)(function(e){t({operation:"replace",pane:z(e)})},[t]);return(0,o.FD)(P,{children:[(0,o.Y)(U,{children:(0,o.Y)(y.D,{path:n,onFileClick:i})}),r?(0,o.Y)(M,{children:r}):null]})}function G(e,n){return{match:w.G2,data:{label:"Download",icon:(0,o.Y)(R.A,{}),type:"action",run:function(){return(0,r._)(function(){var t;return(0,i.YH)(this,function(r){switch(r.label){case 0:return[4,n.readFile(e)];case 1:if((t=r.sent()).error)return[2,{type:"error",message:"Error downloading file"}];return[4,(0,f.A)(e,t.content)];case 2:return r.sent(),[2]}})})()}}}}function V(e,n){return{match:w.G2,data:{label:"Download",icon:(0,o.Y)(R.A,{}),type:"action",run:function(){return(0,r._)(function(){var t,r,o;return(0,i.YH)(this,function(i){switch(i.label){case 0:return[4,n.readFile(e)];case 1:if((t=i.sent()).error||!(r=t.content.toString("base64")))return[2,{type:"error",message:"Error downloading file"}];return o=(0,u.WP)(e),(0,v._z)({messageType:A.tF.DOWNLOAD_FILE,fileName:o,fileContent:r},(0,c.Ak)()),[2]}})})()}}}}function j(e){var n=e.path,t=e.performPaneOperation,a=(0,g.A)(),l=(0,Y.gi)(),s=(0,m.m6)();return(0,d.A)(function(){var e,c;return n?[{match:w.G2,data:{label:"Copy file path",icon:(0,o.Y)(D.A,{}),type:"action",run:function(){(0,p.default)(n)}}},{match:w.G2,data:{label:"Copy link",icon:(0,o.Y)(I.A,{}),type:"action",run:function(){var e=(0,b.Ax)({path:n});(0,p.default)(e)}}},(e=a.fs,c=function(e){t({operation:"replace",pane:{type:(0,S.QY)({path:e}),data:{path:e}}})},{match:w.G2,data:{label:"Duplicate file",icon:(0,o.Y)(E.A,{}),type:"action",run:function(){return(0,r._)(function(){var t;return(0,i.YH)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,(0,h.A)(n,e)];case 1:return t=r.sent(),[3,3];case 2:return r.sent(),[2,{type:"error",message:"Error duplicating file"}];case 3:return c(t),[2]}})})()}}}),s?V(n,a.fs):G(n,a.fs),{match:w.G2,data:{label:"Delete",icon:(0,o.Y)(F.A,{color:C.LU.redDefault}),type:"action",run:function(){l(n)}}}]:null},[n,a.fs,s,l,t])}},38676:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(88263),a=t(71117);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M8.5 3.75a3.25 3.25 0 1 0 0 6.5 3.25 3.25 0 0 0 0-6.5ZM3.75 7a4.75 4.75 0 1 1 9.5 0 4.75 4.75 0 0 1-9.5 0ZM20 7.25a.75.75 0 0 1 .75.75v2.25H23a.75.75 0 0 1 0 1.5h-2.25V14a.75.75 0 0 1-1.5 0v-2.25H17a.75.75 0 0 1 0-1.5h2.25V8a.75.75 0 0 1 .75-.75ZM1.641 15.641A4.75 4.75 0 0 1 5 14.25h7A4.75 4.75 0 0 1 16.75 19v2a.75.75 0 0 1-1.5 0v-2A3.25 3.25 0 0 0 12 15.75H5A3.25 3.25 0 0 0 1.75 19v2a.75.75 0 0 1-1.5 0v-2c0-1.26.5-2.468 1.391-3.359Z",clipRule:"evenodd"})}))}},38904:(e,n,t)=>{"use strict";t.d(n,{Ry:()=>o,vF:()=>r,z$:()=>i});var r=100,i=3,o=250},39689:(e,n,t)=>{"use strict";t.d(n,{J:()=>E,o:()=>D});var r=t(83846),i=t(17844),o=t(93629),a=t(12694),l=t(88263),s=t(29542),c=t.n(s),u=t(21462),d=t(16564),p=t(64583),f=t(48521),h=t(59172),m=t(10429),g=t(66134),v=t(74108),w=t(45015),y=t(76126),b=t(46989),S=(0,p.x)({title:[f.wp.flex.grow(1)]}),Y=function(e){var n=e.title,t=e.usage,r=e.resourceUsageType,i=e.icon;return(0,l.FD)(m.S,{row:!0,gap:8,align:"center",children:["string"==typeof i?(0,l.Y)(w.Ay,{size:16,iconUrl:i,alt:n}):i,(0,l.Y)(y.EY,{css:S.title,multiline:!1,children:n}),(0,l.Y)(y.EY,{color:"dimmer",multiline:!1,children:(0,b.h7)(t,{resourceUsageType:r,gibsDisplayAsBytes:!0})})]})},A=t(16584),x=t(45149),C=t(29064),_=(0,p.x)({self:[f.wp.height("100%")]}),k=m.D.a;function D(e){return e?"Repl"===e.__typename?e.title:"DeletedRepl"===e.__typename?"Deleted Repl":void(0,d.A)(e):"Repl"}var E=function(e){var n,t,s=e.color,p=e.resourceUsageType,f=e.section,m=f.grouped,w=f.percentage,y=f.usage,b=100*w,S=m?f.count:1,E=m||(null==(t=f.repl)?void 0:t.__typename)!=="Repl"?g.Ii:(0,v.q1)(f.repl),R=(0,a._)((0,u.useState)(!1),2),I=R[0],F=R[1];return(0,l.Y)(h.m_,{tooltip:m?(0,l.Y)(Y,{title:"+".concat(S," more"),usage:y,resourceUsageType:p}):(0,l.Y)(Y,{title:D(f.repl),usage:y,resourceUsageType:p,icon:(n=f.repl)?"Repl"===n.__typename?n.iconUrl:"DeletedRepl"===n.__typename?(0,l.Y)(C.A,{}):void(0,d.A)(n):(0,l.Y)(x.A,{})}),placement:"top",delay:"none",isOpen:I,maxWidth:400,children:function(e,n){return(0,l.Y)(c(),(0,o._)((0,i._)({legacyBehavior:!0},E),{passHref:!0,children:(0,l.Y)(k,{tabIndex:-1,onMouseOver:function(){return F(!0)},onMouseLeave:function(){return F(!1)},ref:n,css:_.self,style:(0,r._)({minWidth:"calc(".concat(100*A.i,"%)"),width:"calc(".concat(b,"% - 0.9px)"),backgroundColor:s},"&:lastOfType",{width:"".concat(b,"%")})})}))}})}},39899:(e,n,t)=>{"use strict";t.d(n,{g:()=>S,h:()=>w});var r=t(29935),i=t(12694),o=t(86105),a=t(82643),l=t(88263),s=t(90629),c=t(6888),u=t(92985),d=t(73967),p=t(33999),f=t(76126),h=t(10429),m=t(4291),g=t(49444),v=t(69258);function w(e){return y.apply(this,arguments)}function y(){return(y=(0,r._)(function(e){var n,t,r,i;return(0,a.YH)(this,function(o){switch(o.label){case 0:if(n=e.searchQuery,t=e.paths,r=e.run,i=e.description,!n)return[2,t.map(function(e){return{data:{type:"action",label:e,icon:(0,l.Y)(p.A,{path:e}),description:i,run:function(){return r(e)}},match:function(){return{score:1,render:(0,d.SS)({path:e,description:i})}}}})];return[4,(0,d.UI)(n,t)];case 1:return[2,o.sent().map(function(e){var n=e.path,t=e.score,o=e.ranges;return{data:{type:"action",label:n,icon:(0,l.Y)(p.A,{path:n}),run:function(){return r(n)}},match:function(){return{score:t,render:(0,d.SS)({path:n,ranges:o,description:i})}}}})]}})})).apply(this,arguments)}function b(){return(0,l.FD)(h.S,{row:!0,gap:8,children:[(0,l.Y)(v.A,{}),(0,l.Y)(f.EY,{color:"dimmest",multiline:!1,children:"Something went wrong searching your App's files. Please try again."})]})}function S(e){var n;return(0,u.gu)({type:"context",label:"Files",description:"Find a file",icon:(0,l.Y)(g.A,{}),keyboardShortcut:e.keyboardShortcut?e.keyboardShortcut:void 0},{match:(0,u.u4)({defaultScore:m.q.findOrCreateFile}),commands:(n=(0,r._)(function(n){var t,u,d,f,h,m,g,y,S,Y,A,x,C,_,k,D,E,R,I,F;return(0,a.YH)(this,function(T){switch(T.label){case 0:return t=e.fs,u=e.shouldHideFile,[4,Promise.resolve(e.getRecentFiles())];case 1:if(d=T.sent(),f=[],!(n.searchQuery||n.active))return[3,3];return[4,t.listFiles()];case 2:if((h=T.sent()).error)return s.Cp(Error("Find or create file returned an error"),{extra:{message:h.error}}),[2,[{data:{type:"error",label:h.error,icon:(0,l.Y)(v.A,{})},match:function(){return{score:1,render:{content:(0,l.Y)(b,{})}}}}]];if(!h.files)throw Error("Expected files");m=!0,g=!1,y=void 0;try{for(S=h.files[Symbol.iterator]();!(m=(Y=S.next()).done);m=!0)A=Y.value,u(A)||d.includes(A)||f.push(A)}catch(e){g=!0,y=e}finally{try{m||null==S.return||S.return()}finally{if(g)throw y}}T.label=3;case 3:return x=[],[4,Promise.all([w({searchQuery:n.searchQuery,paths:d,description:"Recently opened",run:function(n){e.openFile({path:n})}}),w({searchQuery:n.searchQuery,paths:f,run:function(n){e.openFile({path:n})}})])];case 4:if(_=(C=i._.apply(void 0,[T.sent(),2]))[0],k=C[1],!e.getCurrentlyOpenFilePanesCommands)return[3,6];return[4,e.getCurrentlyOpenFilePanesCommands({searchQuery:n.searchQuery})];case 5:E=T.sent(),(D=x).push.apply(D,(0,o._)(E)),T.label=6;case 6:return _.length&&(R=x).push.apply(R,(0,o._)(_)),k.length&&(I=x).push.apply(I,(0,o._)(k)),0===k.length&&0===_.length&&n.active&&(F=n.searchQuery,x.push({data:{label:F,description:"Create a new file",icon:(0,l.Y)(p.A,{path:F}),type:"action",run:(0,r._)(function(){return(0,a.YH)(this,function(n){switch(n.label){case 0:return[4,t.writeFile(F,c.A.from(""))];case 1:if(n.sent().error)return[2,{type:"error",message:'Could not create "'+F+'"'}];return e.openFile({path:F}),[2]}})})},match:function(){return{score:1}}})),[2,x]}})}),function(e){return n.apply(this,arguments)})})}},40049:e=>{e.exports={root:"TipsFloatingBanner_root__z4hkr",icon:"TipsFloatingBanner_icon__8GTJb",tipContent:"TipsFloatingBanner_tipContent__RP36w",tipImage:"TipsFloatingBanner_tipImage__WC1cH",fadeEnter:"TipsFloatingBanner_fadeEnter__duiiB",fadeEnterActive:"TipsFloatingBanner_fadeEnterActive__tK5QI",fadeExit:"TipsFloatingBanner_fadeExit__4DM6B",fadeExitActive:"TipsFloatingBanner_fadeExitActive___TEAW",flexShrink:"TipsFloatingBanner_flexShrink__YFnZM"}},40651:(e,n,t)=>{"use strict";t.d(n,{R:()=>u,b:()=>d});var r=t(84344),i=t(6268),o=t(60930),a=t(73561),l=t(18102),s=t(24335),c=t(42862),u=function(e){var n=e.state.field(a.RJ,!1),t=e.state.facet(o.q);if(!(null==n?void 0:n.presented)||Date.now()-n.timestamp<150)return!1;var u=e.state.selection.main.head,d=e.state.doc.lineAt(u);if(u<=d.from+d.length-d.text.trimStart().length){var p=n.changes.closestRange(u);if(p.value instanceof s.kp){var f=p.value.unfulfilled.toString(),h=(0,c.t)(f,e.state.tabSize);if(h>0&&h>=e.state.tabSize)return!1}}var m=n.changes.asChangeSpec(),g=e.state.changes(m),v=n.changes.extendSelection(e.state.selection);return(0,r.N)(e),e.dispatch({changes:g,selection:v,scrollIntoView:!0,effects:a.xq.of(n.dismiss(a.UW.ACCEPTED_BY_USER)),annotations:[l.A.of(!0),i._B.of("full")]}),t.onSuggestionAccepted(e,n),!0},d=function(e){var n=e.state.field(a.RJ,!1),t=e.state.facet(o.q);return!!(null==n?void 0:n.presented)&&(e.dispatch({effects:a.xq.of(n.dismiss(a.UW.DISMISSED_BY_USER))}),t.onSuggestionExplicitlyDismissed(e,n),!0)}},40684:(e,n,t)=>{"use strict";t.d(n,{$l:()=>r,DX:()=>u,Gz:()=>c,Oe:()=>d,Pt:()=>p,b0:()=>f,g8:()=>l,sY:()=>i,vA:()=>a,xv:()=>o,y:()=>s});var r=/^([A-Za-z0-9_]{1,15})\/?$/,i=/^([%A-Za-z0-9]+|-)*\/?$/,o=/^([A-Za-z\d](?:[A-Za-z\d]|-){0,38})\/?$/,a=/^https:\/\/(www\.)?youtube\.com(\/(c|channel|user|@(\w)+))*(\/([A-Za-z0-9_-]+))*(\/?)$/,l=/^(.{2,32}#[0-9]{4})$|^([a-zA-Z0-9_.]{2,32})$/,s=/^(https:\/\/)?(www\.)?((discordapp\.com\/invite)|(discord\.gg))\/(\w+)$/,c="https://twitter.com/",u="https://www.linkedin.com/in/",d="https://github.com/",p="https://x.com/",f=/\/$/},40740:(e,n,t)=>{"use strict";t.d(n,{A:()=>s});var r=t(17844),i=t(93629),o=t(88263),a=t(84550),l=(0,t(64583).x)({table:{maxWidth:"100%",minWidth:"100%",outline:"none",borderSpacing:1,alignSelf:"start"}});let s=function(e){return(0,o.Y)(a.XI,(0,i._)((0,r._)({css:l.table},e),{children:e.children}))}},40792:(e,n,t)=>{"use strict";t.d(n,{M:()=>u});var r=t(12694),i=t(21462),o=t(1230),a=t(54319),l=t(34626),s=t(15036),c=t(51830);function u(){var e,n,t,u=(e=(0,i.useRef)(new Map),n=(0,i.useRef)(new Map),t=(0,i.useRef)(null),{addMessage:function(r,i){if(e.current.set(i,r),l.vF.info("user message received",{eventId:i,sessionId:r.sessionId,sender:r.sender,created:r.created,agentRunning:(null==(a=t.current)?void 0:a.state)===o.g32.AGENT_STATE_RUNNING}),t.current&&(null==(s=t.current.reason)?void 0:s.$kind)!=="waitingOnPlanApproval"){var a,s,c=setTimeout(function(){var a;e.current.delete(i),l.vF.info("user message ghosted",{eventId:i,sessionId:r.sessionId,sender:r.sender,created:r.created,duration:Date.now()-r.created.getTime(),agentRunning:(null==(a=t.current)?void 0:a.state)===o.g32.AGENT_STATE_RUNNING}),n.current.delete(i)},t.current.state===o.g32.AGENT_STATE_PAUSED?3e4:6e4);n.current.set(i,c)}},acknowledgeMessage:function(t){var r=t.eventId,i=t.acknowledged,o=e.current.get(r);if(o){var a=i.getTime()-o.created.getTime();l.vF.info("user message acknowledged",{eventId:r,timeToAcknowledge:a,sessionId:o.sessionId,sender:o.sender,created:o.created,acknowledged:i});var s=n.current.get(r);s&&(clearTimeout(s),n.current.delete(r)),e.current.delete(r)}},agentStateChanged:function(e){if((null==(a=t.current)||null==(i=a.reason)?void 0:i.$kind)!=="waitingOnPlanApproval"||e.state!==o.g32.AGENT_STATE_RUNNING){var i,a,l,s=null==(l=e.reason)?void 0:l.$kind;if("userPaused"===s||"waitingOnPlanApproval"===s){(function(){var e=!0,t=!1,i=void 0;try{for(var o,a=n.current.entries()[Symbol.iterator]();!(e=(o=a.next()).done);e=!0){var l=(0,r._)(o.value,2),s=l[0],c=l[1];clearTimeout(c),n.current.delete(s)}}catch(e){t=!0,i=e}finally{try{e||null==a.return||a.return()}finally{if(t)throw i}}})(),t.current=e;return}t.current=e}}}),d=u.addMessage,p=u.acknowledgeMessage,f=u.agentStateChanged;(0,a.zv)("agent-state-changed",function(e){f(e.state);var n,t=null==(n=e.state.reason)?void 0:n.$kind;if(t){var r=new Map([["userPaused","user_paused"],["planConcluded","plan_concluded"],["waitingOnPlanApproval","waiting_on_plan_approval"],["waitingOnUserResponse","waiting_on_user_input"],["rateLimited","quota_reached"],["error","agent_error_encountered"],["stepLimitExceeded","step_limit_exceeded"]]).get(t);r&&(0,s.pI)({action:r,sessionId:e.sessionId})}});var h=(0,c.F)()?"starter":void 0;(0,a.zv)("received-completed-event",function(e){var n=e.event.contents.contents;if((0,o.VFn)(n,"messageEventContents")){var t=e.event,r=t.id,i=t.created,a=t.sessionId;d({sender:t.sender.id,sessionId:a,created:i},r)}if((0,o.VFn)(n,"agentTimelineEventContents")){var l=e.event.sessionId,c=n.agentTimelineEventContents,u=c.toolData;switch(c.toolName){case"propose_new_mvp_plan":return(0,s.pI)({action:"first_agent_message_received",sessionId:l,replOwnerPlanName:h});case"mark_current_step_as_succeeded":return(0,s.pI)({action:"step_completed",sessionId:l,replOwnerPlanName:h});case"mark_current_step_as_failed":return(0,s.pI)({action:"step_failed",sessionId:l,replOwnerPlanName:h})}if(u)switch(u.$kind){case"commitData":return(0,s.pI)({action:"checkpoint_created",sessionId:l,freeCheckpoint:u.commitData.billingRate===o.pSr.ZERO_RATED,replOwnerPlanName:h});case"agentPlanStepBegin":var f=u.agentPlanStepBegin.planStep,m=f.id,g=f.name,v=f.blueprints;return(0,s.pI)({action:"step_started",stepId:m,stepName:g,stepBlueprints:v,sessionId:l,replOwnerPlanName:h});case"blueprintsSetup":var w=u.blueprintsSetup.blueprintData;return(0,s.pI)({action:"blueprints_setup",stepBlueprints:w.map(function(e){return e.name}),sessionId:l,replOwnerPlanName:h});case"acknowledgeUserMessage":var y=u.acknowledgeUserMessage.eventIds,b=!0,S=!1,Y=void 0;try{for(var A,x=y[Symbol.iterator]();!(b=(A=x.next()).done);b=!0){var C=A.value;p({eventId:C,acknowledged:new Date})}}catch(e){S=!0,Y=e}finally{try{b||null==x.return||x.return()}finally{if(S)throw Y}}}}})}},40822:(e,n,t)=>{"use strict";t.d(n,{F:()=>r});var r=function(e){return e.PARTIAL_RESULTS="Displaying partial results, try being more specific with your search.",e.EMPTY_RESULTS="Nothing came up searching your App's content.",e.EMPTY_QUERY="No search query was provided.",e.INVALID_LINE="We encountered an invalid line while parsing your search results.",e.INVALID_COMMAND="Ripgrep returned an invalid response.",e.CONTAINER_DISCONNECTED="Disconnected from the container.",e.CONTAINER_CONNECTING="Connecting to the container.",e.CHANNEL_CLOSED="Channel was closed.",e}({})},40836:(e,n,t)=>{"use strict";t.d(n,{$Y:()=>p,Ku:()=>m,a1:()=>f,jq:()=>h});var r=t(88263),i=t(21462),o=t(57547),a=t(37773),l=t(61311),s=t(82110),c=t(47630),u=t(5504),d=(0,i.createContext)(null);function p(e){var n=e.children,t=(0,u._P)({type:"boolean",controlName:"flag-scan-in-message-secrets"}),o=(0,i.useMemo)(function(){return{secrets:new s.N([]),replaceListeners:new s.do,dismissListeners:new s.do}},[]);return t?(0,r.Y)(d.Provider,{value:o,children:n}):(0,r.Y)(r.FK,{children:n})}function f(){return!!(0,i.useContext)(d)}function h(){var e=(0,i.useContext)(d);return{inMessageSecrets:(0,c.J2)(null==e?void 0:e.secrets,[]),replaceInMessageSecrets:(0,i.useCallback)(function(n){null==e||e.replaceListeners.notify(n)},[e]),dismissInMessageSecrets:(0,i.useCallback)(function(){null==e||e.dismissListeners.notify()},[e])}}function m(e){var n=(0,i.useContext)(d);(0,i.useEffect)(function(){var t=null==e?void 0:e.plugin(l.Pb);if(n&&e&&t&&!t.destroyed){var r=t.bind({changed:function(e){return(0,o.$H)(e,a.sT)},callback:function(e){n.secrets.set(e.state.field(a.sT))},destroy:function(){n.secrets.set([])}}),i=n.replaceListeners.add(function(n){(0,a.KP)(e,n)}),s=n.dismissListeners.add(function(){e.dispatch({effects:a.WZ.of(!0)})});return function(){r(),i(),s()}}},[e,n])}},41049:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(88263),a=t(71117);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M18.5 6a1 1 0 0 1 1 1v13h-2V7a1 1 0 0 1 1-1ZM15.243 6.03a1 1 0 0 1 .727 1.213l-3.242 12.97-1.94-.485 3.242-12.97a1 1 0 0 1 1.213-.728ZM11.385 6.077a1 1 0 0 1 .538 1.308L6.538 20.308l-1.846-.77 5.385-12.923a1 1 0 0 1 1.308-.538ZM5.47 3.47a.75.75 0 0 1 1.06 0l2 2a.75.75 0 0 1 0 1.06l-2 2a.75.75 0 0 1-1.06-1.06l.72-.72H3a.75.75 0 0 1 0-1.5h3.19l-.72-.72a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"})}))}},41561:(e,n,t)=>{"use strict";t.d(n,{A:()=>d});var r=t(12694),i=t(86105),o=t(21462),a=t(39101),l=t(17844),s=t(93629),c=function(e){return/\s/.test(e)};function u(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];var i=(0,r._)((0,o.useState)(null),2),a=i[0],u=i[1],d=(0,o.useCallback)(u,[u]),p=(0,o.useRef)(n);(0,o.useEffect)(function(){p.current=n},[n]);var f=(0,r._)((0,o.useState)(null),2),h=f[0],m=f[1];return(0,o.useEffect)(function(){if(a){var e=function(){var e=a.value,n=a.selectionStart;if(!n)return void m(null);var t=1===n||c(e[n-2]||""),r=e.length?e[n-1]:null;m(function(i){if(i&&(n<i.index||0===n))return null;if(!r||!i&&!t)return i;var o=p.current.includes(r);return i||o?i?c(r)?null:(0,s._)((0,l._)({},i),{text:e.slice(i.index,n)}):{index:n,text:"",match:r}:i})},n=function(){m(null)};return a.addEventListener("focus",e),a.addEventListener("keyup",e),a.addEventListener("blur",n),function(){m(null),a.removeEventListener("focus",e),a.removeEventListener("keyup",e),a.removeEventListener("blur",n)}}},[a,m]),[h,d]}function d(e){var n=(0,o.useRef)(e);(0,o.useEffect)(function(){n.current=e},[e]);var t=(0,r._)((0,o.useState)(!1),2),l=t[0],s=t[1],c=(0,r._)((0,o.useState)(null),2),d=c[0],p=c[1],f=(0,r._)(u.apply(void 0,(0,i._)(Object.keys(e))),2),h=f[0],m=f[1],g=(0,o.useRef)(h);(0,o.useEffect)(function(){g.current=h},[h]);var v=(0,a.A)(h,100);return(0,o.useEffect)(function(){if(!v)return void p(null);var e=v.match,t=v.text,r=n.current[e]?n.current[e]:null;if(!r)return void p(null);var i=!1;return s(!0),r(t).then(function(e){i||g.current===v&&(s(!1),p({textTrigger:v,results:e,applySuggestion:function(e){var n=e.targetValue,t=e.suggestionValue,r=n.slice(0,v.index),i=t,o=n.slice(v.index+v.text.length);o&&o.startsWith(" ")||(i+=" ");var a=r+i+o;return{cursorIndex:(r+i).length+(o&&o.startsWith(" ")?1:0),fullValue:a}}}))}),function(){i=!0}},[v,p]),[{isLoading:l,suggestions:d},m]}},41665:e=>{e.exports={root:"Footer_root__Kzk8_"}},41679:(e,n,t)=>{"use strict";t.d(n,{Ve:()=>r,aF:()=>i,yN:()=>o});var r="Tools",i=600,o="CommandBar"},41704:(e,n,t)=>{"use strict";t.d(n,{R1:()=>f,lQ:()=>h,sX:()=>p});var r=t(83846),i=t(17844),o=t(12694),a=t(88263),l=t(21462),s=t(93702),c=t(64583),u=t(48521),d=t(10429),p=u.kL.min(600),f=(0,c.x)({maxWidth:{width:"100%",maxWidth:600,alignSelf:"center"},hiddenOnMobile:[u.wp.display.none,(0,r._)({},p,u.wp.display.flex)],hiddenOnDesktop:[u.wp.display.flex,(0,r._)({},p,u.wp.display.none)]});function h(e){var n,t,r,c,u=e.children,p=e.render,f=e.timeout,h=void 0===f?300:f,m=e.initialHeight,g=(0,l.useRef)(null),v=(0,l.useRef)(null),w=(n=v,r=(t=(0,o._)((0,l.useState)(0),2))[0],c=t[1],(0,l.useEffect)(function(){if(n.current){var e=new ResizeObserver(function(e){var n=!0,t=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value.borderBoxSize[0].blockSize;c(a)}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}});return e.observe(n.current),function(){return e.disconnect()}}},[r,n]),r),y=w>0?w:m,b={transition:h+"ms ease-out",transitionProperty:"height, opacity",opacity:0,height:0,visibility:"hidden"},S={entering:{opacity:1,height:y},entered:{transitionProperty:"opacity",opacity:1,height:y,visibility:"visible"},exiting:{opacity:0,height:0,visibility:"visible"},exited:{opacity:0,height:0,visibility:"hidden"}};return(0,a.Y)(s.Ay,{nodeRef:g,timeout:h,in:p,children:function(e){return(0,a.Y)(d.S,{innerRef:g,style:(0,i._)({},b,S[e]),children:(0,a.Y)(d.S,{innerRef:v,children:u})})}})}},41739:(e,n,t)=>{"use strict";t.d(n,{D:()=>i,O:()=>r});var r="users.noreply.replit.com",i="users.noreply.github.com"},41820:(e,n,t)=>{"use strict";t.d(n,{y:()=>p});var r=t(88263),i=t(21462),o=t(34384),a=t(5504),l=t(53231),s=t(50051),c=t(80295),u=t(34002),d=t(58481),p=function(e){var n=e.sessionId,t=e.type,p=void 0===t?"assistant":t,f=(0,o.ET)(),h=f.orgId,m=f.orgSlug,g=(0,a._P)({controlName:"flag-no-header-usage"}),v=(0,u.L)(null!=n?n:null),w=(0,c.e)(null!=n?n:null),y="assistant"===p?v:w,b=h&&m?"".concat((0,s.EG)({slug:m}).usage.href,"#").concat(p):"/usage#".concat(p),S=(0,i.useCallback)(function(){(0,l.u4)("assistant"===p?l.AZ.ASSISTANT_USED:l.AZ.AGENT_USED,{action:"opened_usage_link",intent_type:null,model:null,user_model_selection:null,message_content:null,message_source:"chat_pane",message_surface:"workspace_ai_pane"}),window.open(b,"_blank")},[b,p]),Y=(0,i.useMemo)(function(){return{data:{type:"action",icon:(0,r.Y)(d.A,{}),label:y&&g?"Usage (this chat: $".concat((y/100).toFixed(2),")"):"Usage",run:S}}},[y,g,S]),A=(0,i.useMemo)(function(){return{name:"Usage",commands:[Y]}},[Y]);return{handleUsageClick:S,usageCommand:Y,usageCommandGroup:A,cents:y,usageHref:b}}},42093:(e,n,t)=>{"use strict";t.d(n,{A:()=>c});var r=t(21462),i=t(20828),o=t(31062),a=t(53231),l=t(34834),s=new Set([3e3,3001,3002,3003,3306,4e3,4200,5e3,5432,5173,6e3,6800,7e3,7001,8e3,8008,8080,8081,8888,9e3,9001,1e4,25565,25577,8887,27017,27018]);function c(){var e=(0,l.A)().container,n=(0,i.g)("webviewAutoOpenOnPortOpened").preferences.webviewAutoOpenOnPortOpened,t=(0,o.A)();(0,r.useEffect)(function(){return e.onPortOpened(function(e){var r=e.port,i=e.address,o=e.isForwarded,l=e.isVnc,c=e.externalPort;if(o)return void(0,a.u4)(a.AZ.WS_PORT_OPENED,{type:l?"vnc":"webview",replId:t,port:r,externalPort:c,address:i,webviewAutoOpenOnPortOpened:n});(0,a.u4)(a.AZ.WS_UNFORWARDED_PORT_OPENED,{port:r,isCommon:s.has(r),address:i,type:l?"vnc":"webview",replId:t,externalPort:c})})},[e,t,n])}},42306:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(88263),a=t(71117);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M1.25 12C1.25 6.063 6.063 1.25 12 1.25S22.75 6.063 22.75 12 17.937 22.75 12 22.75 1.25 17.937 1.25 12Z",clipRule:"evenodd"})}))}},42893:e=>{e.exports={timelineTitle:"TimelineSteps_timelineTitle__lwnxs",timelineItems:"TimelineSteps_timelineItems__6OKfL",timelineItem:"TimelineSteps_timelineItem__MZEOS",timelineItemIcon:"TimelineSteps_timelineItemIcon__nKQmE",timelineItemContent:"TimelineSteps_timelineItemContent__LkkgQ",text:"TimelineSteps_text__xSUam"}},43056:(e,n,t)=>{"use strict";t.d(n,{U:()=>O,O:()=>U});var r=t(83846),i=t(17844),o=t(93629),a=t(12694),l=t(86105),s=t(88263),c=t(21462),u=t(60186),d=t(5025),p=t(58162),f=t(72498),h=t(13754),m=t(41852),g=t(45263),v=t(48521),w=t(96556),y=t(42764),b=t(70548),S=t(38292),Y=t(77089),A=t(91163),x=t(76126),C=t(10429),_=t(78184),k=t(18870),D=t(83650),E=t(55544),R=t(29425),I=t(17552),F=t(71117);function T(e){return(0,s.Y)(F.Ay,(0,o._)((0,i._)({},e),{children:(0,s.Y)("path",{fillRule:"evenodd",d:"M1.25 6A.75.75 0 0 1 2 5.25h20a.75.75 0 0 1 0 1.5H2A.75.75 0 0 1 1.25 6Zm0 6a.75.75 0 0 1 .75-.75h20a.75.75 0 0 1 0 1.5H2a.75.75 0 0 1-.75-.75Zm0 6a.75.75 0 0 1 .75-.75h20a.75.75 0 0 1 0 1.5H2a.75.75 0 0 1-.75-.75Z",clipRule:"evenodd"})}))}var P=t(62362),L=t(80762),U=function(e){var n,t,u,g,_,k,D=e.isHidden,E=(t=(n=(0,a._)((0,c.useState)(null),2))[0],u=n[1],g=(0,m.rM)(),(0,c.useEffect)(function(){g!==t&&null!=g&&u(g)},[g,t]),t),F=(0,p.A)(E||""),T=(0,a._)((0,c.useState)(null==(_=F[0])?void 0:_.clientId),2),P=T[0],L=T[1];P&&!F.find(function(e){return P===e.clientId})&&L(null==(k=F[0])?void 0:k.clientId),!P&&F.length&&L(F[0].clientId);var U=(0,w.c)(),O=(0,a._)((0,f.A)(!0),2),B=O[0],H=O[1],z=(0,a._)((0,c.useState)(""),2),W=z[0],G=z[1],V=(0,a._)((0,c.useState)(function(){return{}}),2),j=V[0],Z=V[1],q=(0,a._)((0,f.A)(!0),2),K=q[0],$=q[1],J=(0,a._)((0,f.A)(!0),2),Q=J[0],X=J[1],ee=(0,c.useCallback)(function(e,n){Z(function(t){var a;return(0,o._)((0,i._)({},t),(0,r._)({},e,[n].concat((0,l._)(null!=(a=t[e])?a:[])).slice(0,100)))})},[]),en=(0,c.useCallback)(function(e,n,t){Z(function(r){if(r[e]){for(var o=0;o<r[e].length;o++)if(r[e][o].id===n){r[e][o]=t(r[e][o]);break}r[e]=r[e].slice(0,100)}return(0,i._)({},r)})},[]),et=(0,c.useCallback)(function(){P&&Z(function(e){return(0,o._)((0,i._)({},e),(0,r._)({},P,[]))})},[P]),er=(0,c.useMemo)(function(){return F.find(function(e){return e.clientId===P})},[F,P]),ei=null==er?void 0:er.isOpen(E||""),eo=(0,c.useCallback)(function(){var e=null==er?void 0:er.clientId;e&&ee(e,{canceled:!1,notification:{method:"probe",params:{filePath:E,state:null==er?void 0:er.getServerState(),capabilities:null==er?void 0:er.getServerCapabilities(),diagnostics:ei?null==er?void 0:er.getDiagnostics(E||""):[],isOpen:ei,isSupportedFile:null==er?void 0:er.isSupportedFile(E||"")}},requestTime:new Date,type:"probe"})},[ee,E,er,ei]),ea=(0,c.useMemo)(function(){if(!P)return[];var e,n,t=W.split(",").map(function(e){return e.trim()}).filter(Boolean);if(!t.length)return null!=(e=j[P])?e:[];var r=null!=(n=j[P])?n:[];return K||(r=r.filter(function(e){return null==e.notification})),Q||(r=r.filter(function(e){return null==e.request})),W&&(r=r.filter(function(e){return t.some(function(n){var t;return null==(t=e.request||e.notification)?void 0:t.method.toLowerCase().includes(n.toLowerCase())})})),r},[W,j,P,K,Q]);return((0,c.useEffect)(function(){return(0,d.xW)(F.flatMap(function(e){return[e.onRequest(function(n){B&&ee(e.clientId,{id:n.id,canceled:!1,request:n.data,requestTime:new Date})}),e.onResponse(function(n){B&&en(e.clientId,n.id,function(e){return(0,i._)((0,o._)((0,i._)({},e),{responseTime:new Date}),void 0!==n.result?{response:n.result}:{error:n.error})})}),e.onCancelRequest(function(n){B&&en(e.clientId,n,function(e){return(0,o._)((0,i._)({},e),{canceled:!0})})}),e.onDiagnostics(function(n){var t=n.path,r=n.diagnostics;B&&ee(e.clientId,{canceled:!1,notification:{method:"textDocument/publishDiagnostics for "+t,params:r},requestTime:new Date,type:"diagnostics"})}),e.onServerStateChange(function(n){B&&ee(e.clientId,{canceled:!1,notification:{method:"state",params:{serverState:n}},requestTime:new Date,type:"state"})}),e.onServerCapabilitiesChange(function(n){B&&ee(e.clientId,{canceled:!1,notification:{method:"capabilities",params:{serverCapabilities:n}},requestTime:new Date,type:"capabilities"})}),e.onSendNotification(function(n){B&&ee(e.clientId,{canceled:!1,notification:n,requestTime:new Date})}),e.onReceiveNotification(function(n){B&&ee(e.clientId,{canceled:!1,notification:n,requestTime:new Date})})]}))},[ee,en,B,F]),D)?null:(0,s.FD)(C.S,{css:[v.wp.flex.column],children:[(0,s.FD)(C.S,{css:[v.wp.m(4),v.wp.position.sticky,v.wp.top(0),v.wp.backgroundColor.backgroundDefault,v.wp.zIndex(1)],row:!0,align:"center",children:[(0,s.Y)(x.EY,{multiline:!1,children:P?(0,s.FD)(s.FK,{children:[(0,s.Y)(M,{})," logs for ",(0,s.Y)("code",{children:E})]}):"No LSP client available"}),(0,s.Y)(S.K0,{alt:"Probe LSP",onClick:eo,children:(0,s.Y)(R.A,{})}),(0,s.Y)(C.S,{css:v.wp.flex.grow(1)}),(0,s.Y)(A.d,{"aria-label":"Enable LSP Logs",isSelected:B,onChange:H})]}),(0,s.Y)(C.S,{children:(0,s.Y)(y.e2,{name:"Visible LSP Client",value:P,onChange:L,row:!0,children:F.map(function(e){return(0,s.Y)(y.$O,{id:e.clientId,text:e.clientName,value:e.clientId},e.clientId)})})}),(0,s.FD)(C.S,{row:!0,gap:8,css:[v.wp.m(4),v.wp.mb(8)],children:[(0,s.FD)(C.S,{row:!0,gap:4,children:[(0,s.Y)(I.A,{}),(0,s.Y)(x.EY,{multiline:!1,children:"Show"})]}),(0,s.FD)(C.S,{row:!0,gap:4,children:[(0,s.Y)(b.S,{name:"showNotifications",id:U("showNotifications"),checked:K,onChange:$}),(0,s.Y)("label",{htmlFor:U("showNotifications"),children:" Notifications"})]}),(0,s.FD)(C.S,{row:!0,gap:4,children:[(0,s.Y)(b.S,{name:"showRequests",id:U("showRequests"),checked:Q,onChange:X}),(0,s.Y)("label",{htmlFor:U("showRequests"),children:" Requests"})]}),(0,s.Y)(C.S,{css:v.wp.flex.growAndShrink(1)}),(0,s.Y)(C.S,{row:!0,gap:4,children:(0,s.Y)(h.D,{onClick:et})})]}),(0,s.Y)(C.S,{row:!0,gap:4,children:(0,s.Y)(Y.pd,{id:U("filterLsp"),placeholder:"Filter by method (Separate by ,)",onChange:function(e){return G(e.target.value)},value:W})}),(0,s.FD)(C.S,{css:[v.wp.flex.grow(1),v.wp.flex.column,v.wp.overflow("auto")],children:[ea.map(function(e,n){var t;return(0,s.Y)(N,{log:e},null!=(t=e.id)?t:e.requestTime.valueOf()+""+n)}),!ea.length&&(0,s.Y)(C.S,{css:v.wp.m(4),children:"\uD83D\uDE14 No logs yet..."})]})]})},N=(0,c.memo)(function(e){var n,t,r,i,o,l,c=e.log,u=c.requestTime,d=c.responseTime,p=c.request,h=c.response,m=c.notification,g=c.id,w=(0,a._)((0,f.A)(!0),2),y=w[0],b=w[1];return(0,s.FD)(C.S,{css:[v.wp.my(4),v.wp.mx(4)],children:[(0,s.FD)(C.S,{role:"button",onClick:b,onKeyDown:b,tabIndex:0,css:[{"&:hover":{cursor:"pointer",".lspLog-requestMethod":{textDecoration:"underline"}}}],row:!0,gap:4,children:[(0,s.FD)(C.S,{css:[v.wp.flex.grow(1),v.wp.rowWithGap(2)],children:[(0,s.Y)(x.EY,{className:"lspLog-emoji",multiline:!1,children:(t=(n=c).type,r=n.canceled,i=n.response,o=n.notification,"state"===t?(0,s.Y)(E.A,{}):"diagnostics"===t?(0,s.Y)(_.A,{}):"capabilities"===t?(0,s.Y)(T,{}):"probe"===t?(0,s.Y)(R.A,{}):r?(0,s.Y)(D.A,{}):o?(0,s.Y)(P.A,{}):void 0!==i?(0,s.Y)(k.A,{}):(0,s.Y)(L.A,{}))}),(0,s.FD)(x.EY,{className:"lspLog-requestMethod",multiline:!1,children:[(0,s.Y)("code",{children:null==(l=p||m)?void 0:l.method}),null!=g&&(0,s.FD)("code",{className:"lspLog-logId",css:{opacity:.5},children:["#",g]})]})]}),(0,s.Y)(C.S,{css:{opacity:.5},children:null!=d&&(0,s.FD)(x.EY,{css:v.wp.fontSize(13),multiline:!1,children:[d.valueOf()-u.valueOf(),"ms"]})})]}),!y&&(0,s.FD)(s.FK,{children:[void 0!==p&&(0,s.Y)(O,{name:"request.params",src:p.params}),void 0!==m&&(0,s.Y)(O,{name:"notification.params",src:m.params}),void 0!==h&&(0,s.Y)(O,{name:"response",src:h})]})]})}),O=(0,c.memo)(function(e){var n=e.name,t=e.src;return(0,s.Y)(C.S,{css:{marginTop:5,".node-ellipsis":{letterSpacing:-2},".object-key span":{letterSpacing:0},".object-key-val":{paddingBottom:"0 !important"},'.object-key + span[style*="margin"], .array-key + span[style*="margin"]':{marginLeft:"0 !important"},".variable-row, .pushed-content .object-key-val":{paddingLeft:"10px !important",paddingBottom:"0 !important"}},children:(0,s.Y)(u.A,{json:(0,r._)({},n,t)})})}),M=function(){return(0,s.Y)(x.EY,{multiline:!1,css:{display:"inline",fontStyle:"italic",fontWeight:600,textShadow:"".concat(g.LU.redDimmer," 2px 2px")},children:"LSP"})}},43061:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(88263),a=t(71117);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M7 2.25a.75.75 0 0 1 .692.462l5 12a.75.75 0 0 1-1.384.577L9.72 11.48H4.28l-1.587 3.808a.75.75 0 0 1-1.384-.578l5-12A.75.75 0 0 1 7 2.25ZM4.904 9.98h4.192L7 4.95 4.904 9.98ZM14.25 8a.75.75 0 0 1 .75-.75h4A3.75 3.75 0 0 1 21.25 14 3.75 3.75 0 0 1 19 20.75h-4a.75.75 0 0 1-.75-.75V8Zm1.5 6.75v4.5H19a2.25 2.25 0 0 0 0-4.5h-3.25Zm3.25-1.5a2.25 2.25 0 0 0 0-4.5h-3.25v4.5H19Z",clipRule:"evenodd"})}))}},43169:(e,n,t)=>{"use strict";t.d(n,{H:()=>l});var r=t(12694),i=t(65749),o=t(1230),a=t(54319);function l(){var e=(0,r._)((0,i.Ko)({fetchPolicy:"network-only",ssr:!1}),1)[0];(0,a.zv)("received-completed-event",function(n){var t,r=n.event.contents.contents;(0,o.VFn)(r,"agentTimelineEventContents")&&(null==(t=r.agentTimelineEventContents.toolData)?void 0:t.$kind)==="commitData"&&e()})}},43593:(e,n,t)=>{"use strict";t.d(n,{Gp:()=>r.jz,IW:()=>r.IW,_t:()=>i._t,ij:()=>i.jz});var r=t(83346),i=t(28962)},43747:(e,n,t)=>{"use strict";t.d(n,{w:()=>l});var r=t(21462),i=t(41392),o=t(19732),a=t(45263);function l(e){return(0,r.useCallback)(function(n){var t,r=null==(t=e.current)?void 0:t.querySelector('[data-event-id="'.concat(n,'"]'));r instanceof HTMLElement&&((0,o.A)(r,{behavior:"smooth"}),(0,i.U)(r,"outline","1px solid "+a.LU.accentPrimaryDefault),setTimeout(function(){return(0,i.U)(r,"outline","none")},2e3))},[e])}},44114:(e,n,t)=>{"use strict";t.d(n,{G:()=>s});var r=t(29935),i=t(82643),o=t(57756),a=t(34626),l=t(34834);function s(){var e=(0,l.A)().toolchain;function n(){return(n=(0,r._)(function(n){return(0,i.YH)(this,function(t){return[2,e.setModuleConfig(n)]})})).apply(this,arguments)}function t(){return(t=(0,r._)(function(n){return(0,i.YH)(this,function(t){switch(t.label){case 0:return[4,e.addModule(n).catch(function(e){a.vF.error("Toolchain: failed to add Nix module: "+e.message)})];case 1:return t.sent(),[2]}})})).apply(this,arguments)}function s(){return(s=(0,r._)(function(n){return(0,i.YH)(this,function(t){switch(t.label){case 0:return[4,e.removeModule(n).catch(function(e){a.vF.error("Toolchain: failed to remove Nix module: "+e.message)})];case 1:return t.sent(),[2]}})})).apply(this,arguments)}function c(){return(c=(0,r._)(function(n,t){return(0,i.YH)(this,function(r){switch(r.label){case 0:return[4,e.upgradeModule(n,t).catch(function(e){a.vF.error("Toolchain: failed to upgrade Nix module: "+e.message)})];case 1:return r.sent(),[2]}})})).apply(this,arguments)}return{modules:(0,o.A)(e.modules),configs:(0,o.A)(e.configs),moduleConfig:(0,o.A)(e.moduleConfig),setModuleConfig:function(e){return n.apply(this,arguments)},addModule:function(e){return t.apply(this,arguments)},removeModule:function(e){return s.apply(this,arguments)},upgradeModule:function(e,n){return c.apply(this,arguments)}}}},45485:(e,n,t)=>{"use strict";t.d(n,{g:()=>o});var r=t(21462),i=t(51472);function o(){var e=(0,r.useContext)(i.A);if(!e)throw Error("Expected Repl info to be in context");return"html"===e.language}},45639:(e,n,t)=>{"use strict";t.d(n,{s:()=>i});var r=t(45263),i="color-mix(in srgb, ".concat(r.LU.interactiveBackground," 60%, ").concat(r.LU.surfaceBackground,")")},45708:(e,n,t)=>{"use strict";t.d(n,{i:()=>d});var r=t(71115),i=t(17844),o=t(12584),a=t(41114),l=t(86997);function s(){var e=(0,o._)(["\n  query WorkspaceShowAdmin {\n    currentUser {\n      id\n      isAdmin: hasRole(role: ADMIN)\n    }\n  }\n"]);return s=function(){return e},e}var c={},u=(0,a.J1)(s());function d(){var e,n,t=(e=(0,i._)({},c,void 0),l.I(u,e)).data,o=(0,r.useRouter)();return(null==t||null==(n=t.currentUser)?void 0:n.isAdmin)||!!o.query.debug}},46014:(e,n,t)=>{"use strict";t.d(n,{lD:()=>u});var r=t(17844),i=t(12584),o=t(41114),a=t(86997);function l(){var e=(0,i._)(["\n  query OrgFlags($orgId: String!) {\n    currentUser {\n      id\n      org(orgId: $orgId) {\n        ... on Org {\n          id\n          flags {\n            id\n            type\n            value\n          }\n        }\n      }\n    }\n  }\n"]);return l=function(){return e},e}var s={},c=(0,o.J1)(l());function u(e){var n=(0,r._)({},s,e);return a.I(c,n)}},46115:(e,n,t)=>{"use strict";t.d(n,{A:()=>m});var r=t(12694),i=t(21462),o=t(17844),a=t(12584),l=t(41114),s=t(50175);function c(){var e=(0,a._)(["\n  mutation ReplFsUpdated($replId: String!) {\n    updateReplTimeUpdated(id: $replId) {\n      ... on Repl {\n        id\n        timeUpdated\n      }\n    }\n  }\n"]);return c=function(){return e},e}var u={},d=(0,l.J1)(c()),p=t(76607),f=t(69549),h=t(34834);function m(){var e,n,t,a,l,c,m,g=(0,r._)((e=(0,o._)({},u,void 0),s.n(d,e)),1)[0],v=(0,h.A)().fs,w=(a=(0,h.A)().container,c=(l=(0,r._)((0,i.useState)(null!=(t=null==(n=a.getContext())?void 0:n.repl)?t:null),2))[0],m=l[1],(0,i.useEffect)(function(){return a.onConnectionStateChanged(function(e){var n,t;e===f.KN.CONNECTED&&m(null!=(t=null==(n=a.getContext())?void 0:n.repl)?t:null)})},[m,a]),c),y=null==w?void 0:w.authorizations.editFileContents.isAuthorized,b=null==w?void 0:w.id;(0,i.useEffect)(function(){if(y&&b){var e=(0,p.A)(function(){return g({variables:{replId:b}})},{wait:6e4,maxWait:6e5}),n=v.onStatusChange(function(){e()});return function(){e.isScheduled()&&e.flush(),n()}}},[v,b,y,g])}},46330:(e,n,t)=>{"use strict";t.d(n,{z:()=>o});var r=["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],i=["B","KB","MB","GB","TB","PB","EB","ZB","YB"];function o(e,n){var t,o=n||{},a=o.signed,l=o.digitsNumber,s=o.isKib,c=o.isKibNotation;if(t=void 0!==a&&a?e<0?"-":"+":"",0===e)return"".concat(t,"0B");var u=void 0===s||s?1024:1e3,d=Math.floor(Math.log(Math.abs(e))/Math.log(u));return"".concat(t).concat(parseFloat(Math.abs(e/Math.pow(u,d)).toFixed(void 0===l?2:l))).concat((void 0!==c&&c?r:i)[d])}},46531:(e,n,t)=>{"use strict";t.d(n,{D8:()=>l,Df:()=>p,Ez:()=>r,GS:()=>d,KY:()=>u,Up:()=>i,Xl:()=>f,dA:()=>c,eH:()=>s,m_:()=>o,qG:()=>a});var r=function(e){return{op:"add",path:"run",value:JSON.stringify(e)}},i=function(e){return{op:"add",path:"compile",value:JSON.stringify(e)}},o=function(e){return{op:"remove",path:"string"==typeof e?e:e.join("/"),value:""}},a=function(e){return{op:"add",path:"auth/pageEnabled",value:JSON.stringify(e)}},l=function(e){return{op:"add",path:"auth/buttonEnabled",value:JSON.stringify(e)}},s=function(e){return{path:"deployment/run",op:"add",value:JSON.stringify(["sh","-c",e])}},c=function(e){return{path:"deployment/build",op:"add",value:JSON.stringify(["sh","-c",e])}},u=function(e){return{path:"deployment/ignorePorts",op:"add",value:e.toString()}},d=function(e){return{path:"deployment/deploymentTarget",op:"add",value:JSON.stringify(e)}},p=function(e){return{path:"deployment/publicDir",op:"add",value:JSON.stringify(e)}},f=function(e){return{path:"objectStorage/defaultBucketID",op:"add",value:JSON.stringify(e)}}},46614:e=>{e.exports={root:"RejectedPlanProposal_root__vYtbE"}},46963:(e,n,t)=>{"use strict";t.d(n,{g:()=>a});var r=t(12694),i=t(86105),o=t(21462);function a(e){var n=e.items,t=e.maxVisibleItems,a=e.reverse,l=(0,r._)((0,o.useState)(!1),2),s=l[0],c=l[1],u=n.length-t,d=u>1,p=(0,o.useMemo)(function(){var e=a?(0,i._)(n).reverse():n;return d&&!s?a?e.slice(0,t):e.slice(-t):e},[n,d,s,t,a]);return{isExpanded:s,setIsExpanded:c,maxItemsReached:d,visibleItems:p,hiddenItemsCount:u}}},46989:(e,n,t)=>{"use strict";t.d(n,{$p:()=>d,XV:()=>a,h7:()=>l,lX:()=>u});var r=t(16564),i=t(42415),o=t(31258),a=.01,l=function(e,n){var t=n.resourceUsageType,r=n.forceGib,i=n.precision,o=n.skipUnits,a=n.additional,l=n.minimumValue,s=n.truncateToMillions,u=n.gibsDisplayAsBytes,d=c({input:e,resourceUsageType:t,forceGib:void 0!==r&&r,precision:void 0===i?4:i,minimumValue:void 0===l?null:l,truncateToMillions:void 0!==s&&s,gibsDisplayAsBytes:void 0!==u&&u});return void 0!==o&&o?d.formattedValue:void 0!==a&&a?[d.formattedValue,"additional",d.units].join(" "):[d.formattedValue,d.units].join(" ")};function s(e,n){var t=n.precision,r=n.minimumValue,i=n.forceGib,o=r&&0!==e;return e>=0x40000000*(null!=r?r:1)||i?o&&e<0x40000000*r?{formattedValue:"<".concat(r.toLocaleString(void 0,{minimumFractionDigits:t})),units:"GiB"}:{formattedValue:d(e).toFixed(t),units:"GiB"}:o&&e<1048576*r?{formattedValue:"<".concat(r.toLocaleString(void 0,{minimumFractionDigits:t})),units:"MiB"}:{formattedValue:u(e).toFixed(t),units:"MiB"}}var c=function(e){var n=e.input,t=e.resourceUsageType,a=e.forceGib,l=e.precision,c=e.minimumValue,u=e.truncateToMillions,d=e.gibsDisplayAsBytes,p=c&&0!==n&&n<c;switch(t){case"Bytes":return s(n,{precision:l,minimumValue:c,forceGib:a});case"GiB":if(0===n)return{formattedValue:n.toFixed(l),units:"GiB"};if(d)return s(0x40000000*n,{precision:l,minimumValue:c,forceGib:!1});if(p)return{formattedValue:"<".concat(c.toLocaleString(void 0,{minimumFractionDigits:l})),units:"GiB"};return{formattedValue:n.toFixed(l),units:"GiB"};case"GiB-months":if(0===n)return{formattedValue:n.toFixed(l),units:"GiB-months"};if(p)return{formattedValue:"<".concat(c.toLocaleString(void 0,{minimumFractionDigits:l})),units:"GiB-months"};return{formattedValue:n.toFixed(l),units:"GiB-months"};case"ComputeUnits":if(n>=1e6&&u)return{formattedValue:(n/1e6).toLocaleString(void 0,{maximumFractionDigits:n>=1e6&&u?2:0})+" million",units:"compute units"};return{formattedValue:n.toLocaleString(void 0,{maximumFractionDigits:0}),units:"compute units"};case"ComputeHours":return{formattedValue:n.toLocaleString(void 0,{maximumFractionDigits:0}),units:"compute hours"};case"Requests":if(n>=1e6&&u)return{formattedValue:(n/1e6).toLocaleString(void 0,{maximumFractionDigits:n>=1e6&&u?2:0})+" million",units:"requests"};return{formattedValue:n.toLocaleString(void 0,{maximumFractionDigits:0}),units:"requests"};case"Site":return{formattedValue:n.toLocaleString(void 0,{maximumFractionDigits:0}),units:"site"};case"Hours":return{formattedValue:n.toLocaleString(void 0,{maximumFractionDigits:2}),units:"hours"};case"Deployments":return{formattedValue:n.toLocaleString(void 0,{maximumFractionDigits:2}),units:"days"};case"Tokens":return{formattedValue:n.toLocaleString(void 0,{maximumFractionDigits:0}),units:"tokens"};case"Minutes":return{formattedValue:n.toLocaleString(void 0,{maximumFractionDigits:0}),units:"minutes"};case"Dollars":return{formattedValue:n.toLocaleString(void 0,{maximumFractionDigits:2,style:"currency",currency:"USD"}),units:"dollars"};case"PlanSteps":return{formattedValue:n.toLocaleString(void 0,{maximumFractionDigits:0}),units:"plan steps"};case"Checkpoints":return{formattedValue:n.toLocaleString(void 0,{maximumFractionDigits:0}),units:"checkpoints"};case"EditRequests":return{formattedValue:n.toLocaleString(void 0,{maximumFractionDigits:0}),units:(0,o.A)(i.go)};case"None":return{formattedValue:n.toLocaleString(void 0,{maximumFractionDigits:0}),units:""};default:(0,r.A)(t)}},u=function(e){return e/1048576},d=function(e){return e/0x40000000}},47177:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(88263),a=t(71117);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M4.171 4.421c-.37.292-.421.493-.421.579 0 .086.052.287.421.579.362.285.932.574 1.702.83 1.534.512 3.7.841 6.127.841 2.427 0 4.593-.329 6.127-.84.77-.257 1.34-.546 1.701-.831.37-.292.422-.493.422-.579 0-.086-.052-.287-.422-.579-.361-.285-.93-.574-1.701-.83-1.534-.512-3.7-.841-6.127-.841-2.427 0-4.593.329-6.127.84-.77.257-1.34.546-1.702.831ZM20.25 7.103a8.448 8.448 0 0 1-1.649.73c-1.724.574-4.057.917-6.601.917-2.543 0-4.877-.343-6.601-.917a8.449 8.449 0 0 1-1.649-.73V12c0 .09.053.291.419.581.359.285.925.574 1.694.83 1.529.51 3.695.839 6.137.839 2.442 0 4.608-.328 6.137-.839.769-.256 1.335-.545 1.694-.83.366-.29.419-.492.419-.581V7.103ZM21.75 5c0-.743-.452-1.33-.993-1.757-.55-.433-1.298-.79-2.156-1.076-1.724-.574-4.057-.917-6.601-.917-2.543 0-4.877.343-6.601.917-.858.286-1.607.643-2.156 1.076C2.703 3.67 2.25 4.257 2.25 5v14c0 .74.447 1.329.987 1.757.548.434 1.294.791 2.15 1.077 1.721.574 4.055.916 6.613.916 2.558 0 4.892-.342 6.613-.916.856-.286 1.602-.643 2.15-1.077.54-.428.987-1.016.987-1.757V5Zm-1.5 9.108a8.394 8.394 0 0 1-1.637.726c-1.721.574-4.055.916-6.613.916-2.558 0-4.892-.342-6.612-.916a8.393 8.393 0 0 1-1.638-.726V19c0 .09.053.291.419.581.359.285.925.573 1.694.83 1.529.51 3.695.839 6.137.839 2.442 0 4.608-.328 6.137-.839.769-.257 1.335-.545 1.694-.83.366-.29.419-.492.419-.581v-4.892Z",clipRule:"evenodd"})}))}},47388:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(88263),a=t(71117);function l(e){return(0,o.FD)(a.Ay,(0,i._)((0,r._)({},e),{children:[(0,o.Y)("path",{fillRule:"evenodd",d:"M17.5 18.75c.69 0 1.25-.56 1.25-1.25v-11c0-.69-.56-1.25-1.25-1.25h-11c-.69 0-1.25.56-1.25 1.25v6.25a.75.75 0 0 1-1.5 0V6.5A2.75 2.75 0 0 1 6.5 3.75h11a2.75 2.75 0 0 1 2.75 2.75v11a2.75 2.75 0 0 1-2.75 2.75h-6.25a.75.75 0 0 1 0-1.5h6.25Z",clipRule:"evenodd"}),(0,o.Y)("path",{fillRule:"evenodd",d:"M8.25 9A.75.75 0 0 1 9 8.25h6a.75.75 0 0 1 .75.75v6a.75.75 0 0 1-1.5 0v-4.19l-9.97 9.97a.75.75 0 0 1-1.06-1.06l9.97-9.97H9A.75.75 0 0 1 8.25 9Z",clipRule:"evenodd"})]}))}},47526:(e,n,t)=>{"use strict";t.d(n,{AM:()=>d,CW:()=>u,my:()=>p});var r=t(12694),i=t(21462),o=t(69945),a=t.n(o),l=t(19882),s=t(84788),c=t(41852);function u(e){var n=e.targetElement,t=e.activeTourStep,r=e.goToNextStep,o=e.setTourPausedReason,a=(0,c.Av)(),l=(0,i.useRef)(void 0),s=(0,i.useCallback)(function(){(null==t?void 0:t.waitToAdvanceOn)==="webviewPortOpened"?(o("async"),l.current=a.subscribe(function(e){e&&o("user")})):r()},[null==t?void 0:t.waitToAdvanceOn,r,o,a]);(0,i.useEffect)(function(){if(null!=n&&null!=t&&t.advanceOnTargetClick)return n.addEventListener("click",s),function(){var e;n.removeEventListener("click",s),null==(e=l.current)||e.call(l),l.current=void 0}},[n,t,s])}function d(e){var n=(0,s._$)(),t=(0,r._)((0,i.useState)(!1),2),o=t[0],a=t[1];(0,i.useEffect)(function(){n||o||(e(),a(!0))},[n,e,o])}function p(e){var n=(0,r._)((0,i.useState)(null),2),t=n[0],o=n[1],s=(0,l.A)(function(){e&&o({rect:e.getBoundingClientRect(),docWidth:document.documentElement.clientWidth,docHeight:document.documentElement.clientHeight})},{type:"throttle",wait:100});return(0,i.useEffect)(function(){e&&s(e)},[e,s]),(0,i.useEffect)(function(){if(e){var n=a()(function(){o({rect:e.getBoundingClientRect(),docWidth:document.documentElement.clientWidth,docHeight:document.documentElement.clientHeight})},100);return window.addEventListener("resize",n),window.addEventListener("scroll",n),function(){window.removeEventListener("resize",n),window.removeEventListener("scroll",n),n.cancel()}}},[e]),t}},47745:(e,n,t)=>{"use strict";t.d(n,{D:()=>a});var r=t(79730),i=t(22761),o=r.ZU.Object({type:r.ZU.Literal("config"),flow:r.ZU.Union([r.ZU.Literal("githubImport"),r.ZU.Literal("incompleteConfig")])}),a=function(e){return i.T(o,e)}},48052:(e,n,t)=>{"use strict";t.d(n,{A:()=>s});var r=t(17844),i=t(93629),o=t(88263),a=t(45263),l=t(71117);function s(e){return(0,o.FD)(l.Ay,(0,i._)((0,r._)({},e),{children:[(0,o.FD)("g",{clipPath:"url(#clip0_7329_267)",children:[(0,o.Y)("path",{fill:a.LU.tealDefault,d:"M7.714 0a3.429 3.429 0 0 1 3.429 3.429v.026a5.143 5.143 0 0 0 5.137 5.116h.006a3.429 3.429 0 0 1 0 6.858 5.143 5.143 0 0 0-5.143 5.142 3.429 3.429 0 1 1-3.429-3.428h.007a5.143 5.143 0 0 0-.007-10.286 3.429 3.429 0 0 1 0-6.857Z"}),(0,o.Y)("path",{fill:a.LU.tealStronger,d:"M11.143 12a3.429 3.429 0 1 0-6.857 0 3.429 3.429 0 0 0 6.857 0Z"}),(0,o.Y)("path",{fill:"url(#paint0_radial_7329_267)",d:"M7.714 0a3.429 3.429 0 0 1 3.429 3.429v.026a5.143 5.143 0 0 0 5.137 5.116h.006a3.429 3.429 0 0 1 0 6.858 5.143 5.143 0 0 0-5.143 5.142 3.429 3.429 0 1 1-3.429-3.428h.007a5.143 5.143 0 0 0-.007-10.286 3.429 3.429 0 0 1 0-6.857Z",opacity:".5"}),(0,o.Y)("path",{fill:"url(#paint1_radial_7329_267)",d:"M7.714 8.571a3.429 3.429 0 1 1 0 6.858 3.429 3.429 0 0 1 0-6.858Z",opacity:".5"})]}),(0,o.FD)("defs",{children:[(0,o.FD)("radialGradient",{id:"paint0_radial_7329_267",cx:"0",cy:"0",r:"1",gradientTransform:"rotate(44.479 -2.762 5.679)scale(29.1694)",gradientUnits:"userSpaceOnUse",children:[(0,o.Y)("stop",{stopColor:"#fff",stopOpacity:".79"}),(0,o.Y)("stop",{offset:"1"})]}),(0,o.FD)("radialGradient",{id:"paint1_radial_7329_267",cx:"0",cy:"0",r:"1",gradientTransform:"rotate(44.479 -2.763 5.679)scale(29.1694)",gradientUnits:"userSpaceOnUse",children:[(0,o.Y)("stop",{stopColor:"#fff",stopOpacity:".79"}),(0,o.Y)("stop",{offset:"1"})]}),(0,o.Y)("clipPath",{id:"clip0_7329_267",children:(0,o.Y)("path",{fill:"#fff",d:"M0 .274C0 .123.123 0 .274 0h23.452c.151 0 .274.123.274.274v23.452a.274.274 0 0 1-.274.274H.274A.274.274 0 0 1 0 23.726V.274Z"})})]})]}))}},48314:(e,n,t)=>{"use strict";t.d(n,{i:()=>u});var r=t(17844),i=t(12584),o=t(41114),a=t(86997);function l(){var e=(0,i._)(["\n  query CurrentUserEnv {\n    currentUser {\n      id\n      username\n    }\n  }\n"]);return l=function(){return e},e}var s={},c=(0,o.J1)(l());function u(){var e,n=(e=(0,r._)({},s,void 0),a.I(c,e)).data;return(null==n?void 0:n.currentUser)||void 0}},48385:(e,n,t)=>{"use strict";t.d(n,{Sc:()=>p,pV:()=>u});var r=t(17844),i=t(12584),o=t(41114),a=t(50175);function l(){var e=(0,i._)(["\n  fragment EditReplFormRepl on Repl {\n    id\n    title\n    description\n    imageUrl\n    iconUrl\n    templateInfo {\n      iconUrl\n      imageUrl\n    }\n    authorizations {\n      editMetadata {\n        isAuthorized\n      }\n    }\n  }\n"]);return l=function(){return e},e}function s(){var e=(0,i._)(["\n  mutation EditReplFormEdit($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        ...EditReplFormRepl\n      }\n    }\n  }\n  ","\n"]);return s=function(){return e},e}var c={},u=(0,o.J1)(l()),d=(0,o.J1)(s(),u);function p(e){var n=(0,r._)({},c,e);return a.n(d,n)}},48547:(e,n,t)=>{"use strict";t.d(n,{A:()=>m});var r=t(21462),i=t(17844),o=t(12584),a=t(41114),l=t(68197);function s(){var e=(0,o._)(["\n  subscription WorkspaceUserCanWrite($replId: String!) {\n    currentUserCanWrite(replId: $replId)\n  }\n"]);return s=function(){return e},e}var c={},u=(0,a.J1)(s()),d=t(7512),p=t(69526),f=t(31062),h=t(34834);function m(){var e,n,t=(0,h.A)().fs,o=(e={variables:{replId:(0,f.A)()}},n=(0,i._)({},c,e),l.R(u,n)).data,a=(null==o?void 0:o.currentUserCanWrite)===!1;(0,r.useEffect)(function(){a&&window.location.reload()},[a]);var s=(0,r.useCallback)(function(){return a||t.getStatus()===d.sn.Clean?p.Nn.NavigateAnyway:p.Nn.PromptUser},[t,a]);(0,p.Ay)({shouldPreventNavCb:s})}},48578:(e,n,t)=>{"use strict";t.d(n,{g:()=>w,k:()=>v});var r=t(17844),i=t(93629),o=t(17459),a=t(86105),l=t(88263),s=t(45263),c=t(64583),u=t(973),d=t(48521),p=t(91163),f=t(10429),h=t(71117),m=[d.wp.reset.button,d.wp.p(2),d.wp.height(22),d.wp.rowWithGap(4),d.wp.align.center,u.b.nofill,{transitionProperty:"background-color, box-shadow, opacity",opacity:.8,":focus":{zIndex:1,opacity:1}}],g=(0,c.x)({button:m,disabledButton:(0,a._)(m).concat([{color:s.LU.foregroundDimmest,cursor:"default"}]),text:[{fontSize:s.LU.fontSizeSmall}],switchWrapper:[d.wp.height(22),d.wp.pr(4),u.b.nofill,{opacity:.8,userSelect:"none","& > label":{gap:0,cursor:"pointer"},"& > label > svg":{scale:"0.6"}}]});function v(e){var n=e.altText,t=e.buttonText,a=e.icon,s=(0,o._)(e,["altText","buttonText","icon"]);return(0,l.FD)(f.S,(0,i._)((0,r._)({},s),{alt:n,tag:"button",css:s.disabled?g.disabledButton:g.button,children:[(0,l.Y)(h.Vx.Provider,{value:{size:12},children:a}),(0,l.Y)(f.S,{css:g.text,children:t})]}))}function w(e){var n=e.text,t=e.isSelected,r=e.onChange;return(0,l.Y)(f.S,{css:g.switchWrapper,row:!0,align:"center",children:(0,l.Y)(p.d,{colorway:"primary","aria-label":n,isSelected:t,onChange:r,children:(0,l.Y)(f.S,{css:g.text,children:n})})})}},48875:(e,n,t)=>{"use strict";t.d(n,{KY:()=>a});var r=t(86105),i=t(92520),o=[{id:"true",editorPreferencesValue:!0,title:"true"},{id:"false",editorPreferencesValue:!1,title:"false"}],a={layout:{id:"layout",name:"Default Layout",description:"Change the layout of the editor.",type:"select",editorPreferencesKey:"isLayoutStacked",options:[{id:"side-by-side",editorPreferencesValue:!1,title:"side-by-side"},{id:"stacked",editorPreferencesValue:!0,title:"stacked"}]},fontSize:{id:"fontSize",name:"Font Size",description:"Change the font size of the editor.",type:"select",editorPreferencesKey:"fontSize",options:[{id:"10",editorPreferencesValue:10,title:"tiny"},{id:"12",editorPreferencesValue:12,title:"small"},{id:"14",editorPreferencesValue:14,title:"normal"},{id:"18",editorPreferencesValue:18,title:"large"},{id:"24",editorPreferencesValue:24,title:"huge"}]},wrapping:{id:"wrapping",name:"Wrapping",description:"Change whether the editor wraps lines or not.",type:"select",editorPreferencesKey:"wrapping",options:[{id:"none",editorPreferencesValue:!1,title:"none"},{id:"soft",editorPreferencesValue:!0,title:"soft wrap"}]},minimap:{id:"minimap",name:"Minimap",description:"Change the minimap display.",type:"select",editorPreferencesKey:"minimapDisplay",options:[{id:"none",editorPreferencesValue:"none",title:"none"},{id:"blocks",editorPreferencesValue:"blocks",title:"blocks"},{id:"characters",editorPreferencesValue:"characters",title:"characters"}]},indentationDetection:{id:"indentDetection",name:"Indentation Detection",description:"Automatically detect indentation settings when opening a file.",type:"boolean",editorPreferencesKey:"indentDetection",options:o},indentFormatPastes:{id:"indentFormatPastes",name:"Format Pasted Text Indentation",description:"Automatically format the indentation of pasted text.",type:"boolean",editorPreferencesKey:"indentFormatPastes",options:o},indentIsSpaces:{id:"indentationCharacter",name:"Indentation Character",description:"The character used for indenting lines.",type:"select",editorPreferencesKey:"indentIsSpaces",options:[{id:"spaces",editorPreferencesValue:!0,title:"spaces"},{id:"tabs",editorPreferencesValue:!1,title:"tabs"}]},keyboardHandler:{id:"keyboardHandler",name:"Keybinds",description:"Use another keyboard mapping",type:"select",editorPreferencesKey:"keyboardHandler",options:[{id:"default",editorPreferencesValue:null,title:"default"},{id:"emacs",editorPreferencesValue:"emacs",title:"emacs"},{id:"vim",editorPreferencesValue:"vim",title:"vim"}]},showFileTreeGitStatus:{id:"showFileTreeGitStatus",name:"Filetree Git Status",description:"Show the Git status of files in the file tree.",type:"boolean",editorPreferencesKey:"showFileTreeGitStatus",options:o},codeIntelligence:{id:"codeIntelligence",name:"Code Intelligence",description:"Code intelligence gives you autocomplete, as well as hints as you type.",type:"boolean",editorPreferencesKey:"codeIntelligence",options:o},semanticTokens:{id:"semanticTokens",name:"Semantic Tokens",description:"Enables enhanced syntax highlighting from language servers.",type:"boolean",editorPreferencesKey:"semanticTokens",options:o},shellBellAudio:{id:"shellBellAudio",name:"Shell Bell Audible Indicator",description:"Play sound in the Shell on issues like a failed tab completion.",type:"boolean",editorPreferencesKey:"shellBellAudio",options:o},accessibleTerminal:{id:"accessibleTerminal",name:"Accessible Terminal Output",description:"Enable this setting to use a screen reader. Warning: this can negatively affect performance.",type:"boolean",editorPreferencesKey:"accessibleTerminal",options:o},webviewAutoOpenOnPortOpened:{id:"webviewAutoOpenOnPortOpened",name:"Automatic Webview",description:"Open a webview automatically when a port is open.",type:"boolean",editorPreferencesKey:"webviewAutoOpenOnPortOpened",options:o},forwardPortsAutomatically:{id:"forwardPortsAutomatically",name:"Forward Opened Ports Automatically",description:"Automatically configure detected newly opened ports.",type:"select",editorPreferencesKey:"forwardPortsAutomatically",options:[{id:"none",editorPreferencesValue:"none",title:"never"},{id:"only-global",editorPreferencesValue:"only-global",title:"all ports except localhost"},{id:"all",editorPreferencesValue:"all",title:"all ports"}]},chatAudioNotification:{id:"chatAudioNotification",name:"Chat Audio Notification",description:"Play a sound when you receive a new chat message.",type:"boolean",editorPreferencesKey:"chatAudioNotification",options:o},agentAudioNotification:{id:"agentAudioNotification",name:"Agent Audio Notification",description:"Play a sound when the Agent needs your response.",type:"boolean",editorPreferencesKey:"agentAudioNotification",options:o},agentPushNotification:{id:"agentPushNotification",name:"Agent Push Notification",description:"Send a push notification when the Agent needs your response.",type:"boolean",editorPreferencesKey:"agentPushNotification",options:o},assistantPushNotification:{id:"assistantPushNotification",name:"Assistant Push Notification",description:"Send a push notification when the Assistant needs your response.",type:"boolean",editorPreferencesKey:"assistantPushNotification",options:o},multiselectModifierKey:{id:"multiselectModifierKey",name:"Multiselect Modifier Key",description:"Modifier key for selecting multiple items in the filetree.",type:"select",editorPreferencesKey:"multiselectModifierKey",options:[{id:"cmdOrCtrlKey",editorPreferencesValue:"cmdOrCtrlKey",title:"cmdOrCtrlKey"},{id:"altKey",editorPreferencesValue:"altKey",title:"altKey"}]},codeSuggestion:{id:"codeSuggestion",name:"AI Code Completion",description:'Code completion provides inline "ghost text" suggestions while you code.',type:"boolean",editorPreferencesKey:"codeSuggestion",options:o},assistantAutoApplyChanges:{id:"assistantAutoApplyChanges",name:"Auto Apply Changes",description:"Automatically apply changes made by the AI assistant to your code.",type:"boolean",editorPreferencesKey:"assistantAutoApplyChanges",options:o},assistantAutoRestartRepl:{id:"assistantAutoRestartRepl",name:"Auto Restart Workflows",description:"Automatically restart workflows after applying code changes.",type:"boolean",editorPreferencesKey:"assistantAutoRestartRepl",options:o},assistantAdvancedModelOverride:{id:"assistantAdvancedModelOverride",name:"Advanced Model Override",description:"Override the default advanced model.",type:"select",editorPreferencesKey:"assistantAdvancedModelOverride",options:[{id:"default",editorPreferencesValue:null,title:"default"}].concat((0,r._)(Array.from(i._W).map(function(e){return{id:e.qualified,editorPreferencesValue:e.qualified,title:e.readable}})))}}},49153:(e,n,t)=>{"use strict";t.d(n,{JH:()=>eR,xs:()=>B,Vc:()=>W,fg:()=>H,kK:()=>G,$s:()=>z,GQ:()=>e_,UM:()=>eB,Tp:()=>eU,_k:()=>eu,cF:()=>em,mj:()=>es,Jz:()=>ey,i$:()=>en,tq:()=>ev,uS:()=>X,kM:()=>ef,gq:()=>J,bu:()=>ei,Ol:()=>Z,om:()=>V,O6:()=>ea,ik:()=>ep,kW:()=>ek,Rh:()=>q,Ki:()=>eI,g$:()=>j,e_:()=>eO});var r=t(29935),i=t(17844),o=t(93629),a=t(12694),l=t(22531),s=t(82643),c=t(21462),u=t(90629),d=t(68682),p=t(35992),f=t(44370),h=t(71672),m=t(51812),g=t(52101),v=t(35084),w=t(16564),y=t(82300),b=t(82377),S=t(81666),Y=t(40493);function A(){return(A=(0,r._)(function(e){var n,t,r,i,o,a,l,c,u,d,p;return(0,s.YH)(this,function(s){switch(s.label){case 0:if(n=e.command,t=e.replId,r=e.buildId,i=e.machineConfigurationId,o=e.maxMachineInstances,!Y.V)throw Error("expected apolloClient to be initialized");return[4,Y.V.mutate({mutation:m.LQ,variables:{input:{command:n,replId:t,buildId:r,machineConfigurationId:i,maxMachineInstances:o}}})];case 1:if(null==(a=(u=s.sent()).errors)?void 0:a.length)throw Error(u.errors.map(function(e){return e.message}).join(", "));if((null==(c=u.data)||null==(l=c.sendDeploymentLifecycleCommand)?void 0:l.__typename)!=="SendDeploymentLifecycleCommandResult")throw Error((null==(p=u.data)||null==(d=p.sendDeploymentLifecycleCommand)?void 0:d.message)||"An unexpected error occurred while sending command. Please try again or contact support.");return[2]}})})).apply(this,arguments)}function x(){return(x=(0,r._)(function(e){var n,t,r,i,o,a,l,c;return(0,s.YH)(this,function(s){switch(s.label){case 0:if(n=e.buildId,t=e.targetDeploymentId,!Y.V)throw Error("expected apolloClient to be initialized");return[4,Y.V.mutate({mutation:m.NG,variables:{input:{buildId:n,targetDeploymentId:t}}})];case 1:if(null==(r=(a=s.sent()).errors)?void 0:r.length)throw Error(a.errors.map(function(e){return e.message}).join(", "));if((null==(o=a.data)||null==(i=o.failHostingBuild)?void 0:i.__typename)!=="FailHostingBuildResult")throw Error((null==(c=a.data)||null==(l=c.failHostingBuild)?void 0:l.message)||"An unexpected error occurred while trying to cancel. Please try again or contact support.");return[2]}})})).apply(this,arguments)}function C(){return(C=(0,r._)(function(e){var n,t,r,i;return(0,s.YH)(this,function(o){switch(o.label){case 0:return n=e.apolloClient,t=e.replId,[4,n.query({query:m.zg,variables:{replId:t}})];case 1:return[2,"Repl"===(i=o.sent().data).getRepl.__typename&&(null==(r=i.getRepl.hostingDeployment)?void 0:r.__typename)==="HostingDeployment"?i.getRepl.hostingDeployment.ignoredSecrets:[]]}})})).apply(this,arguments)}function _(){return(_=(0,r._)(function(e){var n,t,r,i;return(0,s.YH)(this,function(o){switch(o.label){case 0:return n=e.apolloClient,t=e.replId,[4,n.query({query:m.Hh,variables:{replId:t}})];case 1:return[2,"Repl"===(i=o.sent().data).getRepl.__typename&&(null==(r=i.getRepl.hostingDeployment)?void 0:r.__typename)==="HostingDeployment"?i.getRepl.hostingDeployment.currentBuild.envVars.map(function(e){return{name:e.name}}):[]]}})})).apply(this,arguments)}var k=t(75802),D=t(88734),E=t(80714),R=t(56687),I=t(38167),F=t(93369),T=t(23288),P=t(5793),L=t(31062),U=t(53231),N=t(6598),O=t(79509);function M(){return(M=(0,r._)(function(e){var n,t,r,i,o;return(0,s.YH)(this,function(a){return(n=e.deploymentTimeCreated,t=e.buildTimeCreated,r=e.ignoreSecretsUntil,i=e.replId,o=e.apolloClient,n&&t&&r>new Date(n)&&r>new Date(t))?[2,(function(e){return _.apply(this,arguments)})({replId:i,apolloClient:o}).then(function(e){return e.map(function(e){return e.name})})]:[2,function(e){return C.apply(this,arguments)}({replId:i,apolloClient:o})]})})).apply(this,arguments)}var B=(0,f.eU)({}),H=(0,f.eU)({}),z=(0,f.eU)({}),W=(0,f.eU)({}),G=(0,f.eU)({});function V(){return(0,k.h)(H)}function j(){return(0,k.h)(z)}function Z(){return(0,k.h)(W)}function q(){return(0,k.h)(G)}var K=(0,f.eU)(void 0),$=(0,f.eU)(void 0);function J(){return(0,k.h)($)}var Q=(0,f.eU)(D.d.Loading);function X(){return(0,k.h)(Q)}var ee=(0,f.eU)(void 0);function en(){return(0,k.h)(ee)}var et=(0,f.eU)(void 0),er=(0,f.eU)(void 0);function ei(){return(0,k.h)(er)}var eo=(0,f.eU)(void 0);function ea(){return(0,k.h)(eo)}var el=(0,f.eU)(void 0);function es(){var e,n,t=(0,k.h)(K),r=(0,k.h)(el),i=(0,k.h)(eh),o=(0,k.ob)(eS),l=(0,k.ob)(eF),s=(0,a._)((0,m.rf)({fetchPolicy:"no-cache",onCompleted:o,onError:function(e){l(e.message)}}),1)[0],c=function(e,n){if(!e||!r)return{deploy:{__typename:"ReplAuthorization",isAuthorized:!1,code:v.S4.InsufficientPermissions,message:"Loading"},redeploy:{__typename:"ReplAuthorization",isAuthorized:!1,code:v.S4.InsufficientPermissions,message:"Loading"},isIncludedInSubscription:!1};var i=r.createAutoscaleDeployment,o=r.createAutoscaleDeploymentPrivate,a=r.createRvmDeployment,l=r.createRvmDeploymentPrivate,s=r.createScheduledDeployment,c=r.createStaticDeployment,u=r.createStaticDeploymentPrivate,d=r.redeployAutoscaleDeployment,p=r.redeployAutoscaleDeploymentPrivate,f=r.redeployRvmDeployment,h=r.redeployRvmDeploymentPrivate,m=r.redeployScheduledDeployment,g=r.redeployStaticDeployment,y=r.redeployStaticDeploymentPrivate;switch(e){case v.Q0.Static:return{deploy:n?u:c,redeploy:n?y:g,isIncludedInSubscription:!1};case v.Q0.Cron:return{deploy:s,redeploy:m,isIncludedInSubscription:!1};case v.Q0.CloudRun:return{deploy:n?o:i,redeploy:n?p:d,isIncludedInSubscription:!1};case v.Q0.Gce:var b,S=a.isAuthorized,Y=(null==t?void 0:t.__typename)==="Repl"&&(null==(b=t.owner)?void 0:b.__typename)==="Team";return{deploy:n?l:a,redeploy:n?h:f,isIncludedInSubscription:S&&Y};case v.Q0.Extension:throw Error("Found unexpected provider");default:(0,w.A)(e)}};return{deployability:c(null==i?void 0:i.provider),getDeployabilityByProvider:c,refetch:function(){if(t)return s({variables:{replId:t.id}})},hasDebugSummariesAuthorization:null!=(n=null==r||null==(e=r.useDeploymentDebugSummaries)?void 0:e.isAuthorized)&&n}}var ec=(0,f.eU)(I.Sv);function eu(){var e=(0,k.h)(ec),n=(0,c.useCallback)(function(n){return(0,I._3)(n,e)},[e]);return(0,o._)((0,i._)({},e),{getRvmDeploymentCostDetailsByConfigurationSlug:n})}function ed(e){var n,t,r,i,o=(0,m.Nt)({variables:{replId:e}}),a=o.data,l=o.refetch,s=(null==a?void 0:a.getRepl.__typename)==="Repl"?a.getRepl:null;return{isTeamRepl:(null==s||null==(t=s.owner)?void 0:t.__typename)==="Team",isReplitOwnedTeamRepl:!!((null==s||null==(r=s.owner)?void 0:r.id)&&(777914===(n=null==(i=s.owner)?void 0:i.id)||0xe69de0===n||3944703===n||0x1c62260===n)),refetch:l}}function ep(e){return!!ed(e).isTeamRepl}function ef(e){var n=e.replId,t=e.onError,i=e.dotReplitService,o=(0,a._)((0,c.useState)(void 0),2),l=o[0],u=o[1],d=(0,a._)((0,c.useState)(void 0),2),p=d[0],f=d[1],h=ed(n),m=h.isTeamRepl,g=h.isReplitOwnedTeamRepl;return(0,c.useEffect)(function(){if(m&&!g){u(v.Q0.Gce),f(v.Q0.Gce);return}function e(){return(e=(0,r._)(function(){var e,n;return(0,s.YH)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,(0,R.XE)(i)];case 1:if(null===(e=r.sent()).appType)return u(v.Q0.CloudRun),f(v.Q0.CloudRun),[2];if((n=(0,E.b3)(e.appType))===v.Q0.Extension)return t("Did not recognize template deployment provider"),[2];return u(n),f(n),[3,3];case 2:return r.sent(),t("Something went wrong"),[3,3];case 3:return[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[t,i,m,g]),{activeProvider:l,setActiveProvider:u,recommendedProvider:p}}var eh=(0,f.eU)(void 0);function em(){return(0,k.h)(eh)}var eg=(0,f.eU)(void 0);function ev(){return(0,k.h)(eg)}var ew=(0,f.eU)(void 0);function ey(){return(0,k.h)(ew)}var eb=(0,f.eU)(null,function(e,n){n(ee,void 0),n(et,void 0),n(er,void 0),n(eh,void 0),n(eg,void 0),n(Q,D.d.Ready)}),eS=(0,f.eU)(null,function(e,n,t){var r,i="Repl"===t.getRepl.__typename?t.getRepl:null,o=(null==(r=t.currentUser)?void 0:r.__typename)==="CurrentUser"?t.currentUser:null;i&&o&&n(el,i.authorizations)}),eY=(0,f.eU)(null,function(e,n,t){var r,i,o,a="Repl"===t.getRepl.__typename?t.getRepl:null,l=(null==(r=t.currentUser)?void 0:r.__typename)==="CurrentUser"?t.currentUser:null;if(a&&l){n(K,a),n($,l),n(eS,t),n(ec,(0,I.xC)({hasDeploymentRepricing:l.hasDeploymentRepricing})),n(eo,!!a.config.isVnc);var s=a.hostingDeployment;if(s){if("HostingDeployment"!==s.__typename)return n(ew,"Unexpected hosting deployment typename: ".concat(s.__typename));if(n(ee,s.id),n(et,s.timeCreated),n(eh,s.currentBuild),n(er,s.replitAppSubdomain||(0,b.ER)({replSlug:a.slug,username:null==(o=a.owner)?void 0:o.username})),s.inProgressBuild){n(eg,s.inProgressBuild),n(Q,D.d.Deploying);return}return void n(Q,(0,E.$0)(s.currentBuild.status))}n(er,(0,b.ER)({replSlug:a.slug,username:null==(i=a.owner)?void 0:i.username})),n(Q,D.d.Ready)}});function eA(){var e=(0,k.ob)(eY),n=(0,k.ob)(eF);return(0,a._)((0,m.rf)({fetchPolicy:"no-cache",onCompleted:e,onError:function(e){n(e.message)}}),1)[0]}var ex=(0,f.eU)(null,function(e,n,t){if("HostingBuildDeployStatusAction"===t.__typename){var r=e(Q),i=e(eg),o=e(eh),a=t.status;if(r===D.d.Deploying){if(!i)return void n(eF,"No deployment in progress found");n(eg,(0,p.jM)(i,function(e){e.status=a})),(a===v.nH.Success||a===v.nH.Failed)&&(n(eg,void 0),a!==v.nH.Success&&o||n(eh,(0,p.jM)(i,function(e){e.status=a,e.hasImageTag=i.provider!==v.Q0.Static&&a===v.nH.Success})))}else if(r===D.d.ProcessingLifecycleCommand){if(!o)return void n(eF,"No current build found");n(eh,(0,p.jM)(o,function(e){e.status=a}))}n(Q,(0,E.$0)(a)),t.message&&a===v.nH.Failed&&n(eF,t.message)}}),eC=(0,f.eU)(null);function e_(){return(0,k.h)(eC)}function ek(e){var n=(0,k.AI)(eC),t=(0,F.A)(e);(0,c.useEffect)(function(){return n.subscribe(function(e){e&&t.current(e)})},[n,t])}var eD=(0,f.eU)(function(e){var n,t;switch(e(Q)){case D.d.Deploying:return null==(n=e(eg))?void 0:n.id;case D.d.ProcessingLifecycleCommand:return null==(t=e(eh))?void 0:t.id;default:return}}),eE=(0,f.eU)(null,function(){var e=(0,r._)(function(e,n,t){var r;return(0,s.YH)(this,function(e){return(r=t.data.data)&&(n(ex,r.hostingBuildDeployActionUpdates),n(eC,r.hostingBuildDeployActionUpdates)),[2]})});return function(n,t,r){return e.apply(this,arguments)}}());function eR(e){var n,t,r,i,o=e.replId,a=e.orgId;return n=eA(),t=(0,k.ob)(eE),r=(0,k.ob)(eF),(0,c.useEffect)(function(){n({variables:{replId:o,orgId:a}})},[n,o,a]),i=(0,k.h)(eD),(0,m.Xt)({variables:{input:{buildId:null!=i?i:""}},skip:!i,onData:t,onError:function(e){r(e.message)}}),null}function eI(){var e=(0,L.A)(),n=(0,P.R)(e).orgId,t=eA(),r=(0,k.ob)(Q);return(0,c.useCallback)(function(){return r(D.d.Loading),t({variables:{replId:e,orgId:n}})},[t,r,e,n])}var eF=(0,f.eU)(null,function(e,n,t){n(ew,t)}),eT=(0,f.eU)(null,function(e,n,t){var r,i=t.deployHostingBuild2;if(i){if("DeployHostingBuild2Result"!==i.__typename)return void n(eF,i.message);n(eg,i.build),n(ee,i.targetDeployment.id),n(et,i.targetDeployment.timeCreated),n(er,null!=(r=i.targetDeployment.replitAppSubdomain)?r:void 0),n(Q,D.d.Deploying)}}),eP=(0,f.eU)(null,function(e,n,t){var r,i=t.rollbackHostingBuild;if(i){if("RollbackHostingBuildResult"!==i.__typename)return void n(eF,i.message);n(eg,i.build),n(ee,i.targetDeployment.id),n(et,i.targetDeployment.timeCreated),n(er,null!=(r=i.targetDeployment.replitAppSubdomain)?r:void 0),n(Q,D.d.Deploying)}});function eL(e){var n=e.provider,t=e.ignorePorts;switch(n){case v.Q0.Static:return v.JX.Static;case v.Q0.CloudRun:return v.JX.CloudRun;case v.Q0.Cron:return v.JX.Cron;default:return t?v.JX.Worker:v.JX.Server}}function eU(){var e,n,t,i=(0,L.A)(),o=(0,P.R)(i).orgId,p=(0,h.m)(),f=en(),Y=(0,k.h)(et),A=Z(),x=(0,k.h)(B),C=V(),_=j(),I=(0,a._)((0,m.B2)(),1)[0],F=(0,k.ob)(eT),H=(0,k.ob)(eF),z=(0,k.ob)(eP),W=(0,k.ob)(Q),G=(0,k.Ou)(eg),q=em(),K=(0,a._)((0,g.Bg)(),1)[0],$=(0,T.A)(o).requirePrivateDeployments,J=(0,O.w)({replId:i}).ignoreSecretsUntil,X=(0,N.I)(function(e){return function(){return e.securityScan.dependencyAudit.rpc({})}},[]),ee=(0,c.useCallback)((0,r._)(function(){var e,n,t;return(0,s.YH)(this,function(r){switch(r.label){case 0:if(r.trys.push([0,3,,4]),!X)return[3,2];return[4,X()];case 1:if(!(e=r.sent()).ok){if("CANCEL"===e.payload.code||"UNEXPECTED_DISCONNECT"===e.payload.code||"UNSUPPORTED_LANGUAGE"===e.payload.code)return[2];return(0,U.u4)(U.AZ.DEPENDENCY_AUDIT_FAILED,{code:e.payload.code,message:e.payload.message}),[2]}n={info:[],low:[],moderate:[],high:[],critical:[],majorBumpLibs:[]},e.payload.vulnerabilities.forEach(function(e){n[e.severity].push(e.name),"object"===(0,l._)(e.fixAvailable)&&null!==e.fixAvailable&&e.fixAvailable.isSemVerMajor&&n.majorBumpLibs.push(e.name)}),(0,U.u4)(U.AZ.DEPENDENCY_AUDIT_COMPLETED,n),r.label=2;case 2:return[3,4];case 3:return t=r.sent(),u.Cp(t,{tags:{"dependency-audit":!0}}),[3,4];case 4:return[2]}})}),[X]),er=(0,c.useCallback)((e=(0,r._)(function(e){var n,t,r,o,a,l,c,u,p,h,m,g,Y,_,k,T,P;return(0,s.YH)(this,function(s){switch(s.label){case 0:if(n=e.envVars,t=e.subdomain,r=e.machineConfigurationId,o=e.maxMachineInstances,a=e.config,l=e.machineJob,c=e.isPrivate,u=e.hasAgentSession,p=e.ignoredSecrets,G())return H("Deployment already in progress"),[2];s.label=1;case 1:if(s.trys.push([1,5,,6]),h=a.buildCommand,m=a.runCommand,g=a.publicDir,Y=a.ignorePorts,!(_=q?eL({provider:null==q?void 0:q.provider,ignorePorts:!!Y}):a.appType))throw new S.Kb;if(!t)throw new S.kZ;switch(_){case v.JX.Static:if(!(0,b.mU)(g))throw new S.uF;break;case v.JX.Worker:case v.JX.Server:case v.JX.CloudRun:case v.JX.Cron:if(!(0,b.mU)(m))throw new S.kS;if(_===v.JX.Cron){if(!(null==l?void 0:l.crontab)||""===l.crontab)throw new S.f_("Schedule cannot be empty.");if(!(0,d.isValidCron)(l.crontab))throw new S.f_("Invalid schedule. Must be a valid cron expression.");if(!(null==l?void 0:l.timezone)||""===l.timezone)throw new S.xF("Timezone cannot be empty.");if(!(0,y._j)(l.timezone))throw new S.xF("Invalid timezone. Must be valid a timezone abbreviation.")}break;default:(0,w.A)(_)}return W(D.d.Preparing),[4,(0,R.XE)(A)];case 2:return k=s.sent(),[4,(0,R.FR)({buildCommand:h,runCommand:m,appType:_,publicDir:g,ignorePorts:Y},k,{dotReplit:A,fs:C,container:x})];case 3:return s.sent(),T=(0,E.b3)(_),[4,I({variables:{input:{replId:i,targetDeploymentId:f,targetMachineConfigurationId:r,maxMachineInstances:o,commands:{build:h,run:m||""},envVars:n,subdomain:t,provider:T,appType:_,context:"workspace",machineJob:l,isPrivate:c||$,hasAgentSession:u,ignoredSecretKeys:p}},onCompleted:F})];case 4:return s.sent(),ee(),[3,6];case 5:throw P=s.sent(),W(D.d.Ready),P;case 6:return[2]}})}),function(n){return e.apply(this,arguments)}),[I,F,H,W,G,f,i,x,C,A,q,$,ee]),ei=(0,R.Gx)({secrets:_,replId:i});return{deployBuild:er,redeployWithNoNewOptions:(0,c.useCallback)((n=(0,r._)(function(e){var n,t,r,o,l,c,u,d,h,m,g;return(0,s.YH)(this,function(s){switch(s.label){case 0:if(n=e.hasAgentSession,G())return H("Deployment already in progress"),[2];s.label=1;case 1:return s.trys.push([1,6,,7]),W(D.d.Preparing),[4,ei()];case 2:return t=s.sent(),[4,function(e){return M.apply(this,arguments)}({deploymentTimeCreated:Y,buildTimeCreated:null==q?void 0:q.timeCreated,ignoreSecretsUntil:J,replId:i,apolloClient:p})];case 3:var y,x,C,_,k;return r=s.sent(),x=(y={currentBuildVars:null==q?void 0:q.envVars,workspaceSecrets:t,ignoredSecretKeys:r}).currentBuildVars,C=y.workspaceSecrets,_=y.ignoredSecretKeys,k=new Map((null==x?void 0:x.map(function(e){return[e.name,e.value]}))||[]),C&&C.forEach(function(e){var n=e.name,t=e.value;_.includes(n)||k.set(n,t)}),o=Array.from(k.entries()).map(function(e){var n=(0,a._)(e,2);return{name:n[0],value:n[1]}}),[4,(0,R.XE)(A)];case 4:if(c=(l=s.sent()).buildCommand,u=l.runCommand,d=l.publicDir,h=l.ignorePorts,!f)throw new S.z7;if(!q)throw new S.bf;if(!(m=eL({provider:q.provider,ignorePorts:!!h})))throw new S.Kb;switch(m){case v.JX.Static:if(!(0,b.mU)(d))throw new S.uF;break;case v.JX.Worker:case v.JX.Server:case v.JX.CloudRun:case v.JX.Cron:if(!(0,b.mU)(u))throw new S.kS;break;default:(0,w.A)(m)}return[4,I({variables:{input:{replId:i,targetDeploymentId:f,commands:{build:c,run:u||""},provider:(0,E.b3)(m),appType:m,envVars:o,context:"workspace",isPrivate:q.isPrivate,hasAgentSession:n,ignoredSecretKeys:r}},onCompleted:F})];case 5:return s.sent(),ee(),[3,7];case 6:throw g=s.sent(),W(D.d.Ready),g;case 7:return[2]}})}),function(e){return n.apply(this,arguments)}),[Y,J,p,I,F,H,W,G,f,i,A,q,ei,ee]),rollbackToPreviousBuild:(0,c.useCallback)((t=(0,r._)(function(e){var n,t,r;return(0,s.YH)(this,function(o){switch(o.label){case 0:if(n=e.rollbackCandidateBuildId,t=e.envVars,G())return H("Deployment already in progress"),[2];o.label=1;case 1:if(o.trys.push([1,3,,4]),!n)throw new S.hX;if(!f)throw new S.z7;return W(D.d.Preparing),[4,K({variables:{input:{targetDeploymentId:f,rollbackCandidateBuildId:n,replId:i,envVars:t}},onCompleted:z})];case 2:return o.sent(),[3,4];case 3:throw r=o.sent(),W(D.d.Ready),r;case 4:return[2]}})}),function(e){return t.apply(this,arguments)}),[K,z,H,W,f,i,G])}}var eN=(0,f.eU)(null,function(){var e=(0,r._)(function(e,n,t){var r,a,l,c,u,d,f,h;return(0,s.YH)(this,function(s){switch(s.label){case 0:if(r=t.args,a=t.replId,l=void 0,(c=r.command)===v.jP.UpdateMachineConfiguration){if(!(u=e(eh)))return n(eF,"No current build found"),[2];if(!r.machineConfigurationId)return n(eF,"No machine configuration found"),[2];(d=(0,E.oG)(c))&&(n(eh,(0,p.jM)(u,function(e){e.status=d})),n(Q,(0,E.$0)(d)))}if(c===v.jP.Resume||c===v.jP.Suspend){if(!(f=e(eh)))return n(eF,"No current build found"),[2];l=f.id,(h=(0,E.oG)(c))&&(n(eh,(0,p.jM)(f,function(e){e.status=h})),n(Q,(0,E.$0)(h)))}s.label=1;case 1:return s.trys.push([1,3,,4]),[4,function(e){return A.apply(this,arguments)}((0,o._)((0,i._)({},r),{buildId:l,replId:a}))];case 2:return s.sent(),c===v.jP.Destroy&&n(eb),[3,4];case 3:return n(eF,s.sent().message),[3,4];case 4:return[2]}})});return function(n,t,r){return e.apply(this,arguments)}}());function eO(){var e,n=(0,L.A)(),t=(0,k.ob)(eN);return(0,c.useCallback)((e=(0,r._)(function(e){return(0,s.YH)(this,function(r){switch(r.label){case 0:return[4,t({replId:n,args:e})];case 1:return r.sent(),[2]}})}),function(n){return e.apply(this,arguments)}),[t,n])}var eM=(0,f.eU)(null,function(){var e=(0,r._)(function(e,n){var t,r,i;return(0,s.YH)(this,function(o){switch(o.label){case 0:if(!(t=e(ee)))return n(eF,"No deployment found"),[2];if(!(r=e(eg)))return n(eF,"No deployment in progress found"),[2];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,function(e){return x.apply(this,arguments)}({buildId:r.id,targetDeploymentId:t})];case 2:return o.sent(),[3,4];case 3:return n(eF,o.sent().message),[2];case 4:if(n(eg,void 0),n(Q,D.d.Ready),(i=e(eh))&&(i.status===v.nH.Success||i.status===v.nH.Failed))return[2];return n(eh,(0,p.jM)(r,function(e){e.status=v.nH.Failed})),[2]}})});return function(n,t){return e.apply(this,arguments)}}());function eB(){return(0,k.ob)(eM)}},49381:(e,n,t)=>{"use strict";t.d(n,{mj:()=>p,xo:()=>f,Qq:()=>v,l8:()=>m,Nn:()=>g});var r=t(17844),i=t(93629),o=t(86105),a=t(87443),l=t(34626);function s(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return n.map(function(e){return e.match(/["\s]/)&&!e.match(/'/)?"'".concat(e.replace(/(['\\])/g,"\\$1"),"'"):e.match(/["'\s]/)?'"'.concat(e.replace(/(["\\$`!])/g,"\\$1"),'"'):e.replace(/[#!"$&'()*,:;<=>?@[\\\]^`{|}]/g,"\\$&")}).join(" ")}var c=t(94707),u=t(40822),d=t(64254).hp,p=524288;function f(){var e="",n=new Map;return function(t){var o=new Set,a=!1;if(t.trim().startsWith("error"))return{error:u.F.INVALID_COMMAND,filesMap:n,filesMapChanges:o};var s=t.indexOf("\n"),c=0,d=e+t;if(s>=0)s+=e.length;else{e=d;return}for(;s>=0;){var p=d.substring(c,s).trim();if(0!==p.length){var f=function(e){try{return JSON.parse(e)}catch(e){return null}}(p);f&&!function(e,n,t){switch(e.type){case"begin":var o=h(e.data.path);if(!o)return!1;n.set(o,{path:o,lines:[],dedentBy:0}),t.add(o);break;case"end":break;case"match":case"context":var a=h(e.data.path);if(!a)return!1;t.add(a);var s=n.get(a);if(!s)return!1;var c=function(e,n){var t,o,a=h(e.data.lines);if(!a)return null;var l=a.trimEnd().split(/\r?\n/),s=[];(null==(t=l[0])?void 0:t.trim())===""&&l.shift(),(null==(o=l[l.length-1])?void 0:o.trim())===""&&l.pop();var c=0,u=0,d=e.data.submatches;return l.forEach(function(n,t){var r=e.data.line_number+t,i=u;u+=n.length+1;for(var o=[];c<d.length;){var a=d[c];if(a.start>=u)break;var l=a.start-i,p=void 0;if(p=a.end<u?a.end-a.start:a.end===u?a.end-a.start-1:n.length-l,l<n.length&&o.push({start:l,length:p}),a.end>u){a.start=u;break}c++}s.push({lineNumber:r,content:n,matches:o})}),(0,i._)((0,r._)({},n),{lines:n.lines.concat(s)})}(e,s);c&&n.set(a,c);break;case"error":return l.vF.error("Invalid Search Line",{line:JSON.stringify(e)}),!1}return!0}(f,n,o)&&(a=!0)}c=s+1,s=d.indexOf("\n",c)}return e=d.substring(c),{error:a?u.F.INVALID_LINE:null,filesMap:n,filesMapChanges:o}}}function h(e){return e?"bytes"in e?d.from(e.bytes,"base64").toString():e.text:null}function m(e){var n,t=e.lines.length>0?(n=Math).min.apply(n,(0,o._)(e.lines.map(function(e){return e.content.match(/^[\t ]+/)}).flat().map(function(e){return(null==e?void 0:e.length)||0}))):0;return(0,i._)((0,r._)({},e),{dedentBy:t})}function g(e,n,t){for(var r=(0,o._)(e),i=new Set,a=0;a<r.length;a++){var l=r[a].path,s=n.get(l);t.has(l)&&s&&(r[a]=s,i.add(l))}var c=!0,u=!1,d=void 0;try{for(var p,f=t[Symbol.iterator]();!(c=(p=f.next()).done);c=!0){var h=p.value,m=n.get(h);!i.has(h)&&m&&r.push(m)}}catch(e){u=!0,d=e}finally{try{c||null==f.return||f.return()}finally{if(u)throw d}}return r}function v(e){var n=e.mode,t=e.query,r=e.context,i=e.isRegex,l=e.isCaseSensitive,u=e.isMatchingWholeWords,d=e.includeGlobs,f=e.excludeGlobs,h=void 0===f?(0,o._)(a.TJ):f,m=["rg"];switch(n){case"json":m.push("--json");break;case"files":m.push("--files-with-matches")}return null!==r&&m.push("--context","".concat(r)),t.includes("\n")&&m.push("--multiline"),i||m.push("--fixed-strings"),m.push("--max-count","100"),m.push("--max-filesize","4M"),m.push("--max-depth","24"),m.push("--max-columns","512"),m.push("--max-columns-preview"),m.push(l?"--case-sensitive":"--ignore-case"),m.push("--hidden"),u&&m.push("--word-regexp"),m.push.apply(m,(0,o._)((0,c.F4)(d,h))),m.push("--",t),function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p;return["sh","-c","".concat(s.apply(void 0,(0,o._)(e))," | head -c ").concat(n)]}(m)}},49430:(e,n,t)=>{"use strict";t.d(n,{s:()=>i});var r=t(16564),i=function(e){switch(e.__typename){case"UsageOverviewUnitPriceSku":return a(e);case"UsageOverviewMatrixPriceSku":return l(e);case"UsageOverviewStaticDeployments":return o(e);default:(0,r.A)(e)}},o=function(e){var n=e.replUsageOverview;return{total:e.usage,limit:e.allotment,lineItems:n.map(s)}},a=function(e){var n=e.replUsageOverview;return{total:e.usage,limit:e.allotment,lineItems:n.map(u)}},l=function(e){var n=e.replUsageOverview,t=e.usage,r=e.tierType;return{total:t,limit:0,lineItems:n.map(function(e){return c(e,r)})}},s=function(e){var n,t,r;return{usage:e.usage,percentage:e.percentage,repl:e.usageRepl,lastDeployedAt:(null==(n=e.usageRepl)?void 0:n.__typename)==="Repl"&&(null==(t=e.usageRepl.hostingDeployment)?void 0:t.__typename)==="HostingDeployment"?null==(r=e.usageRepl)?void 0:r.hostingDeployment.currentBuild.timeCreated:void 0}},c=function(e,n){return{usage:e.usage,percentage:e.percentage,repl:e.usageRepl,matrixTier:{label:e.configName,type:n}}},u=function(e){return{usage:e.usage,percentage:e.percentage,repl:e.usageRepl}}},49455:(e,n,t)=>{"use strict";t.d(n,{o:()=>c});var r=t(29935),i=t(82643),o=t(21462),a=t(39391),l=t(34834),s=t(3299);function c(){var e,n=(0,l.A)().fs;return(0,o.useCallback)((e=(0,r._)(function(e){var t,r;return(0,i.YH)(this,function(i){switch(i.label){case 0:return t=e.files,r=e.onError,[4,(0,a.Zn)({parentPath:s.Ls,files:t,fs:n,overwrite:!0,onError:function(e){return r(e.error)}})];case 1:return i.sent(),[2]}})}),function(n){return e.apply(this,arguments)}),[n])}},49888:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(88263),a=t(71117);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M12 .25a.75.75 0 0 1 .53.22l5 5a.75.75 0 0 1-1.06 1.06l-3.72-3.72V10a.75.75 0 0 1-1.5 0V2.81L7.53 6.53a.75.75 0 0 1-1.06-1.06l5-5A.75.75 0 0 1 12 .25Zm0 13a.75.75 0 0 1 .75.75v7.19l3.72-3.72a.75.75 0 1 1 1.06 1.06l-5 5a.75.75 0 0 1-1.06 0l-5-5a.75.75 0 1 1 1.06-1.06l3.72 3.72V14a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"})}))}},49897:(e,n,t)=>{"use strict";t.d(n,{R:()=>i,U:()=>o});var r=t(79730),i=r.ZU.Object({title:r.ZU.String(),screen:r.ZU.Object({height:r.ZU.Number(),width:r.ZU.Number()})}),o=[{title:"iPhone SE",screen:{height:667,width:375}},{title:"iPhone XR",screen:{height:896,width:414}},{title:"iPhone 12 Pro",screen:{height:844,width:390}},{title:"iPhone 14 Pro Max",screen:{height:932,width:430}},{title:"Pixel 7",screen:{height:915,width:412}},{title:"Samsung Galaxy S8+",screen:{height:740,width:360}},{title:"Samsung Galaxy S20 Ultra",screen:{height:915,width:412}},{title:"Surface Duo",screen:{height:720,width:540}},{title:"Galaxy Z Fold 5",screen:{height:882,width:344}},{title:"Samsung Galaxy A51/71",screen:{height:914,width:412}}]},50025:(e,n,t)=>{"use strict";t.d(n,{Od:()=>p,QU:()=>v,Ws:()=>h,n8:()=>g});var r=t(88263),i=t(21462),o=t(54988),a=t(20828),l=t(95139),s=t(21938),c=t(60632),u=t(24365),d=t(64583),p=function(e){return e.Prompt="Prompt",e.CommandStart="CommandStart",e.CommandExecuted="CommandExecuted",e.CommandFinished="CommandFinished",e}({}),f={A:"Prompt",B:"CommandStart",C:"CommandExecuted",D:"CommandFinished"},h={id:"shell.generateWithAI",name:"Generate with AI in the shell",default:(0,u.FM)({cmdOrCtrl:!0,key:"i"})},m=(0,d.x)({root:{marginLeft:"auto"}}),g=133;function v(e){var n=e.onFTCSState,t=e.onOpenGeneratePrompt,u=e.onUpdateCurrentPromptLineNumber,d=(0,a.g)("fontSize").preferences.fontSize,p=(0,i.useRef)(null),g=(0,i.useRef)(null),v=(0,l.m5)(),w=(0,c.Jn)(h.id),y=(0,i.useRef)(null);return(0,i.useCallback)(function(e,i){var a=f[i.split(";")[0]];if(a&&n&&n({state:a,data:i.split(";")[1]}),"B"===i){var l,c,h=e.buffer.active,b=h.cursorX,S=h.cursorY;u(S),p.current&&p.current.dispose(),g.current&&g.current.dispose(),y.current&&(y.current.unmount(),y.current=null);var Y=Math.round(12.6);p.current=e.registerMarker(0),g.current=null!=(c=e.registerDecoration({marker:p.current,x:Math.max(0,e.cols-Y),width:Y,layer:"top"}))?c:null,null==(l=g.current)||l.onRender(function(n){for(var i=!1,a=e.buffer.active._buffer.lines._array[S],l=b;l<e.cols;l++)if((null==a?void 0:a.hasContent(l))!==0){i=!0;break}var c=!i;y.current||(y.current=(0,o.createRoot)(n)),y.current.render(c?(0,r.Y)(s.u,{css:m.root,onClick:function(e){e.stopPropagation(),t()},keyCombo:v?void 0:w,text:"Generate",fontSize:Math.round(.9*d)}):null)})}},[t,u,v,w,d,n])}},50069:(e,n,t)=>{"use strict";t.d(n,{Wx:()=>y,cN:()=>v,fw:()=>b});var r=t(17844),i=t(93629),o=t(17459),a=t(88263),l=t(54790),s=t(64583),c=t(48521),u=t(38292),d=t(54087),p=t(10429),f=t(6034),h=t(80762),m=t(69258),g=[c.wp.p(8),c.wp.center],v=function(){return(0,a.Y)(p.S,{css:g,children:(0,a.Y)(h.A,{size:24})})},w=(0,s.x)({error:[c.wp.flex.grow(0),c.wp.mt(0)]}),y=function(e){var n=e.text,t=(0,o._)(e,["text"]);return(0,a.Y)(l.A,(0,i._)((0,r._)({css:w.error},t),{children:(0,a.Y)(d.N,{colorway:"warning",icon:(0,a.Y)(m.A,{}),text:n})}))},b=function(e){var n=e.onBack;return(0,a.Y)(p.S,{row:!0,align:"center",children:(0,a.Y)(u.K0,{alt:"Back",tooltipBehavior:"hidden",onClick:n,children:(0,a.Y)(f.A,{})})})}},50132:(e,n,t)=>{"use strict";t.d(n,{N0:()=>M,Pt:()=>B,No:()=>L,Tb:()=>O});var r=t(12694),i=t(86105),o=t(71115),a=t(21462),l=t(23099),s=t.n(l),c=t(44370),u=t(68820),d=t(17844),p=t(12584),f=t(41114),h=t(86997);function m(){var e=(0,p._)(["\n  fragment WorkspaceToolPanesRepl on Repl {\n    workspaceCta\n    authorizations {\n      editFileContents {\n        isAuthorized\n      }\n      editPermissions {\n        isAuthorized\n      }\n    }\n    authorizations {\n      viewDeploymentConfig {\n        isAuthorized\n      }\n    }\n    config {\n      isServer\n      isVnc\n    }\n  }\n"]);return m=function(){return e},e}function g(){var e=(0,p._)(["\n  query WorkspaceToolPanes($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        ...WorkspaceToolPanesRepl\n      }\n    }\n    currentUser {\n      id\n      isAdmin: hasRole(role: ADMIN)\n    }\n  }\n  ","\n"]);return g=function(){return e},e}var v={},w=(0,f.J1)(m()),y=(0,f.J1)(g(),w),b=t(5504),S=t(31062),Y=t(45485),A=t(95139),x=t(62153),C=t(8375),_=t(23721),k=t(6973),D=t(61005),E=t(18583),R=t(58370),I=t(3752),F=t(81738),T=(0,c.eU)([]),P=(0,u.mg)(T,function(e){return new Set(e.map(function(e){return e.type}))},s());function L(){return(0,F.h)(P)}var U=["shell","git","diff","envEditor","deployments","database","neon","ghostwriterChat","preferences","docs","multiplayer","objectStorage","adminPanel","ssh","webview","problems","dependencies","project","workflows","integrations","runnerOutput","networking","replitAuth"],N=["agentChat","ghostwriterChat","deployments"];function O(){return(0,F.h)(T)}function M(){return(0,F.Ou)(T)}function B(){var e,n,t,i,l,s,c,u=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).supportsAgent,p=(0,F.ob)(T),f=(l=(null==(i=(n={variables:{replId:(0,S.A)()}},t=(0,d._)({},v,n),h.I(y,t)).data)||null==(e=i.repl)?void 0:e.__typename)==="Repl"?null==i?void 0:i.repl:null)?{repl:l,currentUser:(null==i?void 0:i.currentUser)||null}:{repl:null,currentUser:null},m=f.repl,g=f.currentUser,w=(0,o.useRouter)(),I=(0,A.m5)(),P=(0,b._P)({controlName:"flag-neon-databases",logFlagToAnalytics:!1}),L=!!(null==m||null==(c=m.authorizations)||null==(s=c.viewDeploymentConfig)?void 0:s.isAuthorized),O=(0,b._P)({controlName:"flag-ws-guided-tour"}),M=(0,C.Q)().hasProject,B=(0,D.oR)(),H=(0,E.A)().isTutorial,z=(0,x.J)().configs.some(function(e){return"nix"!==e.id}),W=(0,k.uE)(),G=(null==g?void 0:g.isAdmin)||!!w.query.debug,V=(0,R.Vv)(),j=(0,Y.g)(),Z=(0,_.x)(),q=Z.isDotReplitAuthButtonEnabled,K=Z.isDotReplitAuthPageEnabled,$=Z.isDotReplitAuthLoading,J=Z.hasDotReplit&&!$&&(q||K);(0,a.useEffect)(function(){var e=I&&(null==m?void 0:m.authorizations.editPermissions.isAuthorized)?[{type:"multiplayer"}]:[];if(m&&g){var n=!j,t=!j,i=!j&&P,o=[[{type:"shell"},!0],[{type:"threadInbox"},!0],[{type:"chat"},!0],[{type:"docs",data:{url:null}},!0],[{type:"webview"},!0],[{type:"vnc"},n],[{type:"runnerOutput"},!j],[{type:"git"},!0],[{type:"dependencies"},!0],[{type:"envEditor"},!0],[{type:"debugger"},!1],[{type:"tutorial"},H],[{type:"database"},t],[{type:"neon"},i],[{type:"replAuth"},z&&J],[{type:"replitAuth"},!0],[{type:"preferences"},!0],[{type:"adminPanel"},G],[{type:"deployments"},L],[{type:"ssh"},!0],[{type:"ghostwriterChat"},!0],[{type:"searchReplace"},!0],[{type:"extensionStore",data:{page:"store"}},!0],[{type:"extensionDevtools"},B],[{type:"problems"},!0],[{type:"networking"},!0],[{type:"objectStorage"},!0],[{type:"workflows"},!j],[{type:"project"},M],[{type:"integrations"},!0],[{type:"workspaceTourGuide"},O&&G],[{type:"agentChat"},!!(u&&!I)]],a=!0,l=!1,s=void 0;try{for(var c,d=W[Symbol.iterator]();!(a=(c=d.next()).done);a=!0){var f=c.value;o.push([{type:"extension",data:{extensionId:f.extension.extensionId,installationId:f.extension.installationId,name:f.name||f.extension.manifest.name,icon:f.icon||f.extension.manifest.icon,baseUrl:f.extension.baseUrl,path:f.handler}},!0])}}catch(e){l=!0,s=e}finally{try{a||null==d.return||d.return()}finally{if(l)throw s}}var h=!0,v=!1,w=void 0;try{for(var y,b=o[Symbol.iterator]();!(h=(y=b.next()).done);h=!0){var S=(0,r._)(y.value,2),Y=S[0];S[1]&&(!I||U.includes(Y.type))&&e.push(Y)}}catch(e){v=!0,w=e}finally{try{h||null==b.return||b.return()}finally{if(v)throw w}}p(e.map(function(e){return{title:V.getTitle(e),pane:e}}).sort(function(e,n){return N.includes(e.pane.type)?-1:N.includes(n.pane.type)?1:e.title.localeCompare(n.title)}).map(function(e){return e.pane}))}},[p,I,m,g,z,P,H,G,L,B,W,V,j,M,O,u,J])}(0,c.eU)(function(e){var n=Array.from(e(I.Jp).values()).flat(),t=e(I.tx),r=(0,i._)(n).concat((0,i._)(t)).sort(function(e,n){return n.lastActiveAt-e.lastActiveAt}),o=[],a=!0,l=!1,s=void 0;try{for(var c,u=r[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var d=function(){var e=c.value;return 8===o.length?"break":(0,R.Dx)(e.pane.type)||"commands"===e.pane.type?"continue":void(-1===o.findIndex(function(n){return n.type===e.pane.type})&&o.push(e.pane))}();if("break"===d)break}}catch(e){l=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw s}}return o})},50185:(e,n,t)=>{"use strict";t.d(n,{F:()=>u});var r=t(17844),i=t(12584),o=t(41114),a=t(50175);function l(){var e=(0,i._)(["\n  mutation MarkMessagesAsSeen(\n    $replId: String!\n    $threadId: String\n    $messageIds: [String!]\n  ) {\n    markMessagesAsSeen(\n      replId: $replId\n      threadId: $threadId\n      messageIds: $messageIds\n    ) {\n      ... on AnnotationMessageList {\n        messages {\n          id\n          seen\n        }\n      }\n    }\n  }\n"]);return l=function(){return e},e}var s={},c=(0,o.J1)(l());function u(e){var n=(0,r._)({},s,e);return a.n(c,n)}},50386:e=>{e.exports={root:"AskUserForAction_root__HwBEl"}},50423:(e,n,t)=>{"use strict";t.d(n,{A:()=>i});var r=t(86846);let i=[r.SymbolKind.Array,r.SymbolKind.Boolean,r.SymbolKind.Class,r.SymbolKind.Constant,r.SymbolKind.Constructor,r.SymbolKind.Enum,r.SymbolKind.EnumMember,r.SymbolKind.Event,r.SymbolKind.Field,r.SymbolKind.File,r.SymbolKind.Function,r.SymbolKind.Interface,r.SymbolKind.Key,r.SymbolKind.Method,r.SymbolKind.Module,r.SymbolKind.Namespace,r.SymbolKind.Object,r.SymbolKind.Operator,r.SymbolKind.Package,r.SymbolKind.Property,r.SymbolKind.String,r.SymbolKind.Struct,r.SymbolKind.TypeParameter,r.SymbolKind.Variable]},50939:e=>{e.exports={root:"RollbackStatus_root__Cf_GE",revertIcon:"RollbackStatus_revertIcon__XSNIH",flexShrink:"RollbackStatus_flexShrink__bs9jZ",subtext:"RollbackStatus_subtext___5aWR",dividerContainer:"RollbackStatus_dividerContainer__oXvqd",dividerLine:"RollbackStatus_dividerLine__gMm3D",dividerText:"RollbackStatus_dividerText__qbHCG"}},51030:(e,n,t)=>{"use strict";function r(e){var n=[],t=[],r=!1,i=!0,o=!1,a=void 0;try{for(var l,s=e.selection.ranges[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=l.value;c.empty||(n.push(e.sliceDoc(c.from,c.to)),t.push(c))}}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}if(!n.length){var u=-1,d=!0,p=!1,f=void 0;try{for(var h,m=e.selection.ranges[Symbol.iterator]();!(d=(h=m.next()).done);d=!0){var g=h.value.from,v=e.doc.lineAt(g);v.number>u&&(n.push(v.text),t.push({from:v.from,to:Math.min(e.doc.length,v.to+1)})),u=v.number}}catch(e){p=!0,f=e}finally{try{d||null==m.return||m.return()}finally{if(p)throw f}}r=!0}return{text:n.join(e.lineBreak),ranges:t,linewise:r}}t.d(n,{i:()=>r})},51094:(e,n,t)=>{"use strict";t.d(n,{A:()=>m,v:()=>h});var r=t(29935),i=t(86105),o=t(82643),a=t(76607),l=t(72826),s=t(57021),c=t(58590),u=t(96610),d=t(23046),p=t(52340),f=t(7512),h=".replit";function m(e){var n,t,m,g,v=e.container,w=e.fs,y=e.ctx,b=(0,l.Ay)();b.setMaxListeners(50);var S=null,Y=null,A=null;function x(){return C.apply(this,arguments)}function C(){return(C=(0,r._)(function(){return(0,o.YH)(this,function(e){return S&&"open"===S.status?[2,S]:[2,new Promise(function(e){b.once(d.sV.CHANNEL_OPENED,function(n){e(n)})})]})})).apply(this,arguments)}(function(){k.apply(this,arguments)})(),v.openChannel({service:"dotreplit"},function(e){var n=e.channel;return S=n,b.emit(d.sV.CHANNEL_OPENED,n),function(){S=null}});var _=!1;function k(){return(k=(0,r._)(function(){return(0,o.YH)(this,function(e){return w.watchDir(p.Dl,{onChange:function(e){if(!e.some(function(e){return e.filename===h&&e.type===f.pt.File})){(null==Y?void 0:Y.error)!==d.DO.NotFound&&(Y={error:d.DO.NotFound,errorMessage:"",config:null},b.emit(d.sV.CHANGE,Y));return}_||(_=!0,w.watchFile(h,{onChange:function(){Y=null,I.getConfig({bypassCache:!0}).then(function(e){b.emit(d.sV.CHANGE,e)})},onMoveOrDelete:function(){_=!1},onError:function(e,n){Y=null,_=!1,e.code||v.unrecoverableError(e,n)}}))},onError:function(e,n){v.unrecoverableError(e,n)}}),[2]})})).apply(this,arguments)}function D(){return(D=(0,r._)(function(){return(0,o.YH)(this,function(e){switch(e.label){case 0:return Y=null,A||(A=function(){return E.apply(this,arguments)}()),[4,A];case 1:return Y=e.sent(),A=null,[2,Y]}})})).apply(this,arguments)}function E(){return(E=(0,r._)(function(){return(0,o.YH)(this,function(e){var n;return[2,(0,s.eT)(y,"dotreplit.getConfigFromServer",(n=(0,r._)(function(e,n){var t,r,i,a;return(0,o.YH)(this,function(o){switch(o.label){case 0:var l,p;return null==n||n.setAttributes((l={},(null==(p=v.getConnectionMetadata())?void 0:p.token)&&(l.tokenCluster=(0,u.pI)(p.token).cluster),l.ssr=!!window.performance.getEntriesByName(c.pY.pageNavStart,"mark").length,l)),[4,x()];case 1:if("closed"===(r=o.sent()).status)return[2,{error:d.DO.Disconnected,errorMessage:"channel closed",config:null}];return[4,r.request({dotReplitGetRequest:{},traceInfo:e?(0,s.mY)(e):void 0})];case 2:if((i=o.sent()).channelClosed)return[2,{error:d.DO.Disconnected,errorMessage:"channel closed",config:null}];if(i.error){if(i.error.includes("unable to decode"))return[2,{error:d.DO.ParseError,errorMessage:i.error,config:null}];if(i.error.includes("no such file"))return[2,{error:d.DO.NotFound,errorMessage:i.error,config:null}];return[2,{error:d.DO.Unknown,errorMessage:i.error,config:null}]}if(!(a=null==(t=i.dotReplitGetResponse)?void 0:t.dotReplit))return v.unrecoverableError(Error("Dotreplit responded with no error and no config")),[2,{error:d.DO.Unknown,errorMessage:"Expected dotReplitGetResponse to include dotReplit",config:null}];return[2,{error:null,errorMessage:null,config:a}]}})}),function(e,t){return n.apply(this,arguments)}))]})})).apply(this,arguments)}var R=(n=(0,r._)(function(e){var n;return(0,o.YH)(this,function(t){switch(t.label){case 0:return[4,w.stat(h)];case 1:if(t.sent().exists)return[3,3];return[4,w.writeFile(h,"")];case 2:t.sent(),t.label=3;case 3:return[4,x()];case 4:return[4,t.sent().request({dotReplitUpdateRequest:{ops:e}})];case 5:if((n=t.sent()).channelClosed)return[2,{errorMessage:"Channel closed.",error:d.uZ.ChannelClosed,response:null}];if(n.error){if(n.error.includes("could not parse json")||n.error.includes("is not json")||n.error.includes("parsing value field")||n.error.includes("missing field"))return[2,{errorMessage:n.error,error:d.uZ.JSONParseError,response:null}];if(n.error.includes("could not read file"))return[2,{errorMessage:n.error,error:d.uZ.NotFound,response:null}];if(n.error.includes("could not parse toml"))return[2,{errorMessage:n.error,error:d.uZ.TOMLParseError,response:null}];if(n.error.includes("unknown variant"))return[2,{errorMessage:n.error,error:d.uZ.OpType,response:null}];if(n.error.includes("could not write to file"))return[2,{errorMessage:n.error,error:d.uZ.CouldNotWrite,response:null}];if(n.error.includes("could not read line"))return[2,{errorMessage:n.error,error:d.uZ.ReadLine,response:null}];return[2,{errorMessage:n.error,error:d.uZ.Unknown,response:null}]}if(!n.dotReplitUpdateResponse)throw Error("Expected .replit to be updated");return[2,{response:n.dotReplitUpdateResponse,error:null,errorMessage:null}]}})}),function(e){return n.apply(this,arguments)}),I={watch:function(e){var n=!1,t=!1,r=function(){for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];t=!0,e.apply(void 0,(0,i._)(r))};return b.on(d.sV.CHANGE,r),I.getConfig().then(function(e){n||t||r(e)}),function(){n=!0,b.removeListener(d.sV.CHANGE,r)}},getConfig:function(e){return(0,r._)(function(){return(0,o.YH)(this,function(n){return(null==e?void 0:e.bypassCache)||!Y?[2,function(){return D.apply(this,arguments)}()]:[2,Y]})})()},getRunConfig:function(){var e=this;return(0,r._)(function(){var n,t;return(0,o.YH)(this,function(r){switch(r.label){case 0:return[4,x()];case 1:return[4,r.sent().request({runConfigGetRequest:{}})];case 2:if((n=r.sent()).channelClosed)return[2,e.getRunConfig()];if(!n.runConfigGetResponse)throw null!=(t=n.error)?t:Error("expected run config");return[2,n.runConfigGetResponse]}})})()},updateDotReplit:(t=[],m=400,g=(0,a.A)((0,r._)(function(){var e;return(0,o.YH)(this,function(n){switch(n.label){case 0:return[4,R(t)];case 1:return e=n.sent(),t=[],[2,e]}})}),{wait:m}),function(e,n){n&&(m=n);var r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done);r=!0)!function(){var e=a.value,n=t.findIndex(function(n){return n.path===e.path});-1!==n?t[n]=e:t.push(e)}()}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return g()})};return I}},51151:(e,n,t)=>{"use strict";t.d(n,{n:()=>v});var r=t(12694),i=t(88263),o=t(21462),a=t(79784),l=t(13771),s=t(33131),c=t(64583),u=t(48521),d=t(46603),p=t(36112),f=t(76126),h=t(10429),m=t(2115),g=(0,c.x)({root:[u.wp.borderRadius()],buttonContainer:[u.wp.width("100%"),u.wp.justify.center],upgradeButton:[u.wp.width("60%")]});function v(e){var n=e.aiName,t=(0,r._)((0,o.useState)(!1),2),c=t[0],u=t[1],v=(0,s.A)();return(0,i.FD)(p.ui,{elevated:!0,css:g.root,py:8,px:12,gap:8,align:"center",children:[(0,i.FD)(f.EY,{children:[n," is currently experiencing high demand and is temporarily unavailable for ",a.Lm," plan users."]}),(0,i.FD)(f.EY,{children:["Please try again later, or upgrade to ",a.en," for immediate access."]}),(0,i.Y)(h.S,{css:g.buttonContainer,row:!0,gap:6,children:(0,i.Y)(d.$n,{text:"Upgrade to ".concat(a.en),iconLeft:(0,i.Y)(m.A,{}),onClick:function(){return u(!0)},colorway:"brand",css:g.upgradeButton})}),(0,i.Y)(l.A,{isOpen:c,onClose:function(){return u(!1)},type:"purchase",analyticsContext:{upgrade:{context:"agent_freemium_quota"}},onPurchaseComplete:function(){return v()},reloadPageAfterPurchaseComplete:!0})]})}},51179:(e,n,t)=>{"use strict";t.d(n,{Fm:()=>m,aM:()=>g,vL:()=>h});var r=t(29935),i=t(82643),o=t(88263),a=t(21462),l=t(10449),s=t(74093),c=t(34834),u=t(77681),d=t(64583),p=t(48521),f=(0,d.x)({webview:[p.wp.height("auto"),p.wp.flex.grow(1),p.wp.position.relative]}),h=(0,a.forwardRef)(function(e,n){var t=e.showDeployBanner,r=e.openPane,i=e.previewScreenSize,l=e.setPreviewScreenSize,s=e.initialPort,d=e.initialPath,p=e.isMobilePIP,h=(0,c.A)(),m=h.container,g=h.ports,v=(0,a.useRef)(null);(0,a.useImperativeHandle)(n,function(){return{refresh:function(){var e;null==(e=v.current)||e.refresh()},navigateTo:function(e,n){var t;null==(t=v.current)||t.navigateTo(e,n)}}},[]);var w=(0,a.useCallback)(function(){return r({type:"networking"})},[r]);return(0,o.Y)(u.QJ,{ref:v,css:f.webview,container:m,ports:g,openPane:r,initialPath:d,initialPort:null!=s?s:80,openNetworkingTool:w,shouldShowAgentDeployBanner:t,previewScreenSize:i,setPreviewScreenSize:l,isMobilePIP:p})}),m=(0,a.forwardRef)(function(e,n){var t=e.isMobilePIP,r=e.path,i=e.readonlyBannerVariant,s=(0,a.useRef)(null);(0,a.useImperativeHandle)(n,function(){return{refresh:function(){var e;null==(e=s.current)||e.refresh()},navigateTo:function(e,n){var t;null==(t=s.current)||t.navigateTo(e,n)}}},[]);var d=(0,c.A)(),p=d.container,h=d.ports;return(0,o.Y)(u.QJ,{ref:s,css:f.webview,container:p,ports:h,initialPath:void 0===r?"/":r,initialPort:l.no,shouldShowAgentDeployBanner:!1,isMobilePIP:t,readonlyBannerVariant:void 0===i?"default":i})}),g=(0,a.forwardRef)(function(e,n){var t,a=e.filePath,l=e.readonlyBannerVariant,c=a.split("/").pop(),u="plan-preview/".concat(c);return(0,s.b)((t=(0,r._)(function(e,n){var t;return(0,i.YH)(this,function(r){return t=n.signal,e.fileServer.serveHtmlFile.subscribe({pathOnDisk:a,serverPath:u},{signal:t}),[2]})}),function(e,n){return t.apply(this,arguments)}),[a,u]),(0,o.Y)(m,{ref:n,path:u,readonlyBannerVariant:void 0===l?"saved-plan":l})})},51193:(e,n,t)=>{"use strict";t.d(n,{E:()=>s,w:()=>l});var r=t(21462),i=t(1230),o=t(54319),a=t(47630);function l(){var e=(0,o.NC)(),n=(0,a.J2)(e.sessions.agent.current);return(0,r.useMemo)(function(){return null==n?void 0:n.reduce(c,1).result},[n])}function s(e){var n=l(),t=(0,r.useMemo)(function(){return null==n?void 0:n.scan(function(e,n){var t,r=n.toPresent;return{prev:null!=(t=e.current)?t:e.prev,current:r}},{prev:void 0,current:void 0})},[n]);(0,a.q3)(t,{next:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=n.prev,r=n.current;if(r){if("deployData"===r.toolData.$kind&&(null==t?void 0:t.toolData.$kind)==="presentResultsToolData")return void e({$kind:"presentDeployData"},r.eventId);e(r.toolData,r.eventId)}}})}var c={direction:"reverse",state:{toPresent:void 0},reducer:function(e,n){if(e.sender.type!==i.utd.AI)return!1;var t=e.contents.contents;if((null==t?void 0:t.$kind)==="agentTimelineEventContents"){var r=t.agentTimelineEventContents.toolData;switch(null==r?void 0:r.$kind){case"presentResultsToolData":return n.toPresent={toolData:{$kind:"presentResultsToolData",data:r.presentResultsToolData},eventId:e.id},!1;case"deployData":return n.toPresent={toolData:{$kind:"deployData",data:r.deployData},eventId:e.id},!1}}}}},51383:(e,n,t)=>{"use strict";t.d(n,{Q9:()=>m,_:()=>f,wp:()=>h});var r=t(88263),i=t(71115),o=t(86105),a=t(98367),l=(0,o._)(a.L).concat(["100-days-of-python","100-days-of-python-promo","add-guest-new-user","agent-banner","agent-disclaimer","apps-announcement","appsOnboardingForkRepl","appsOnboardingRunRepl","appsOnboardingSelectRepl","april_2019_hiring","archive-cta","assignment_markdown","boosts-modal","bounties-home-module","bounties-services-tab","changelog-banner","classroom-repl-talk-ask-on-error","cleanup-popover-dismissed","codemirror-explorers-banner","create-model-solution","createWebsite","curriculum-launch-modal","custom-themes-banner","cycles-release","cycles-survey","dashboard_new_folder","dashboard_search","dashboard_templates","debugger_start","dec172020maintenance","deployment-analytics-dot","deployments-banner","deployments-mobile-download","deployments-synced-secrets","desktop-app-banner","desktop-app-nav-menu","devtools-intro","discount_hacker_18","discount_holiday_19","discount_newyear_19","downtime-073118","draw-new-user-cta","edfest-announcement","enveditorintro","file_tree","flexible-spend-announcement","follow-cursor-avatar-click","ghostwriter-banner","ghostwriter-chat-banner","ghostwriter-repl-resources-cta","ghostwriter-trial-repl-resources-cta","ghostwriter-trial-3-day-left-modal","ghostwriter-trial-banner","ghostwriter-trial-expired-modal","ghostwriter-post-purchase-tour","ghostwriter-existing-user-chat-beta-tour","grid_click","hacker_upgrade","hacker-gift","header-layout-tooltip","home","home-feed","home-onboarding-checklist","home-onboarding-checklist-apps","home-onboarding-checklist-learn","home-onboarding-checklist-repl","home-page-modules-tooltip","home-page-demo-repl-tour-suggestion","hosting_url","introduceYourself","js-4-day-challenge-day-1","js-4-day-challenge-day-2","js-4-day-challenge-day-3","js-4-day-challenge-day-4","js-4-day-challenge-day-end","july_2019_music_jam","july18_irl","landing","languagesInterestedIn","launch-modal","learn-onboarding","legacy-cycles-grant-notice","make_website","march_2019_game_jam","migrate-to-deployments-banner","migrated_unnamed_repls","mobile-app-banner","mobile-app-banner-web-update","mobile-announcement","mobile-new-workspace-banner","mobile-survey-banner-11042021","move_unnamed_repls","repricing-announcement","multiplayer","multiplayer_invite","multiplayer_welcome","new_in_repls","new_share","nft-world-2022","onboarding_connection_toast","onboarding_run","onboarding-simplify-experiment","packager-shell-hint","packman","prettier-formatter","product_hunt","profile-refresh-beta","profile2","projects-overview-cta","projects-overview-tests-disclaimer","publish-guidelines","repl_stars","repl-con-2022","repl-talk-update-2021","repl-talk-update-2022","replit-teams-onboarding-tour","resources-upgrade-modal","revisions_history","run_on_replit","saw_unnamed_folders","search","self-grouping-projects-cta","series-b-announcement","share_classroom","share_repl_to_talk","show_packager_about_tooltip","show_packager_import_tooltip","show_test_update_tooltip","stack-create-cta","stack-migration-cta","summer_hacker","summer-2021-pd-survey","teams_pro_module","teams-grading-survey","teams-pro-2022","template-jam-announcement","threads-2-announcement","upgrade_module","usage-migration-reserved-vms","usage-migration-power-ups-free-user","usage-migration-power-ups-core-user","workspace-always-on-user-reserved-deployments-announcement","workspace-assistant-auto-apply-changes","workspace-assistant-auto-restart-repl","workspace-assistant-intro-video","workspace-deployments-webview-banner","workspace-desktop-tour","workspace-desktop-tour19","workspace-experience-task-completion-survey-06022022","workspace-experience-task-completion-survey-nudge-06022022","workspace-guided-tour-data-app","workspace-guided-tour-portfolio-website","workspace-history-announcement","workspace-ssh-connect-to-vscode-config-tour","workspace-tools-databases-postgres-tour","workspace-repo-projects-tour","youtube-in-the-ws","themes-announcement","extensions-onboarding-checklist","extensions-onboarding-checklist-create","extensions-onboarding-checklist-concepts","extensions-onboarding-checklist-api","extensions-onboarding-checklist-publish","extensions-store-info","external-claim-privacy-warning","gcp-docs-landing-screen","trending-home-module","following-home-module","storage-announcement","pro-onboarding-tour","pro-trial-expired","pro-trial-hcaptcha-fail","pro-trial-enrollment","ai-code-completion","replit-ai-chat-onbording-10-2023","workspace-desktop-new-user-tour","workspace-desktop-tour-2024","workspace-bonsai-tour-2025","workspace-desktop-sidebar-tour","replit-core-banner","hosting-deployments-announcement-7-2023","teams-for-education-deprecation-12-2023","teams-for-education-verification-prompt","usage-based-billing-announcement-1-2024","port-nudges","mobileApp-themes-announcement","mobileApp-server-change-CTA","mobileApp-purchase-subscription-announcement","mobileApp-onboarding-education-announcement","mobileApp-teams-coming-soon-announcement","incident-20240219-action-required-banner","scheduled-deployments-banner","quick-start-guides","teams-projects-onboarding-card","onboarding-purchase-seen","replit-teams-banner","integrations-toast","starter-changes-announcement-aug-2024","private-deployments-banner","editors-have-secret-access-warning","workspace-right-sidebar-cta","assistant-now-defaulting-to-claude-3-5","org-roles-and-permissions-info-banner","onboarding-seen","teams-sponsorships-onboarding-card","agent-billing-notification-usage-page","agent-billing-notification-creation-entrypoint","agent-billing-creation-disclaimer","agent-billing-workspace-disclaimer","agent-billing-threshold-reached-warning","agent-billing-workspace-flex-credits-almost-reached","agent-billing-announcement","agent-billing-announcement-banner","drizzle-studio-announcement","freemium-agent-access-announcement","referral-program-banner","referral-pending-banner","post-verification-educational-upsell","invoice-threshold-change-announcement","agent-v2-welcome-modal","agent-v2-homepage-modal","agent-mobile-notification-nudge","visual-editor-callout","bonsai-ws-agent-onboarding"]),s=t(77958),c=t(53231),u=t(45641),d=t(46603),p=t(18870),f=function(e,n){return"".concat(e,"-tutorialChallenge-").concat(n)},h=function(e,n){var t,r=JSON.parse(s.A.get(f(e,n),"string")||"{}");if("string"==typeof r.tourName&&"string"==typeof r.url&&(t=r.tourName,l.includes(t)))return r},m=function(e){var n=e.challenge,t=l.find(function(e){return e.toString()===n.tourName})||"js-4-day-challenge-day-1",o=(0,u.g)(t),a=o.isDone,s=o.isLoading,f=o.setAsDone,h=(0,i.useRouter)();return s?null:(0,r.Y)(d.$n,{colorway:a?"primary":"positive",onClick:function(){f(),(0,c.u4)(c.AZ.TUTORIAL_DONE_BUTTON_COMPLETED),h.push("/~")},disabled:a,iconLeft:(0,r.Y)(p.A,{}),size:"big",text:a?"Challenge completed!":"Complete Challenge"})}},51542:(e,n,t)=>{"use strict";t.d(n,{A:()=>h});var r=t(88263),i=t(21462),o=t(71380),a=t(34834),l=t(77681),s=t(53613),c=t(64583),u=t(48521),d=t(10429),p=t(80762),f=(0,c.x)({webview:[u.wp.height("auto"),u.wp.flex.grow(1)],starting:[u.wp.height("100%"),u.wp.width("100%"),u.wp.center]});function h(e){var n=e.openPane,t=e.starting,c=e.previewScreenSize,u=e.setPreviewScreenSize,d=e.initialPort,p=e.initialPath,h=e.isMobilePIP,g=(0,a.A)(),v=g.container,w=g.ports,y=(0,i.useRef)(null),b=(0,o.w)(w),S=(0,i.useMemo)(function(){return null!=d?d:(0,l.Eo)(void 0,b)},[b,d]),Y=(0,i.useCallback)(function(){return n({type:"networking"})},[n]),A=(0,i.useCallback)(function(){return n({type:"agentChat"})},[n]);return t?(0,r.Y)(m,{}):void 0===S?(0,r.Y)(s.A,{openNetworkingTool:Y,openAgentPane:A}):(0,r.Y)(l.QJ,{ref:y,css:f.webview,initialPath:p,initialPort:S,openPane:n,openNetworkingTool:Y,ports:w,container:v,previewScreenSize:c,setPreviewScreenSize:u,isMobilePIP:h})}function m(){return(0,r.Y)(d.S,{css:f.starting,children:(0,r.Y)(p.A,{size:32})})}},51812:(e,n,t)=>{"use strict";t.d(n,{$c:()=>M,B2:()=>L,Hh:()=>B,LQ:()=>U,NG:()=>N,Nt:()=>R,Xt:()=>T,rf:()=>I,zg:()=>O});var r=t(17844),i=t(12584),o=t(41114),a=t(86997),l=t(51026),s=t(68197),c=t(50175),u=t(97782);function d(){var e=(0,i._)(["\n  fragment DeploymentSessionCurrentUser on CurrentUser {\n    id\n    hasDeploymentRepricing(orgId: $orgId)\n  }\n"]);return d=function(){return e},e}function p(){var e=(0,i._)(["\n  fragment DeploymentSessionHostingDeployment on HostingDeployment {\n    ...TargetHostingDeployment\n    currentBuild {\n      ...CurrentBuild2\n    }\n    inProgressBuild {\n      ...CurrentBuild2\n    }\n  }\n  ","\n  ","\n"]);return p=function(){return e},e}function f(){var e=(0,i._)(["\n  fragment DeploymentAuthorization on ReplAuthorization {\n    isAuthorized\n    code\n    message\n  }\n"]);return f=function(){return e},e}function h(){var e=(0,i._)(["\n  fragment DeploymentAuthorizations on Repl {\n    id\n    authorizations {\n      createAutoscaleDeployment: createDeployment(\n        provider: cloud_run\n        isPrivate: false\n      ) {\n        ...DeploymentAuthorization\n      }\n      createAutoscaleDeploymentPrivate: createDeployment(\n        provider: cloud_run\n        isPrivate: true\n      ) {\n        ...DeploymentAuthorization\n      }\n      createRvmDeployment: createDeployment(provider: gce, isPrivate: false) {\n        ...DeploymentAuthorization\n      }\n      createRvmDeploymentPrivate: createDeployment(\n        provider: gce\n        isPrivate: true\n      ) {\n        ...DeploymentAuthorization\n      }\n      createScheduledDeployment: createDeployment(\n        provider: cron\n        isPrivate: false\n      ) {\n        ...DeploymentAuthorization\n      }\n      createStaticDeployment: createDeployment(\n        provider: static\n        isPrivate: false\n      ) {\n        ...DeploymentAuthorization\n      }\n      createStaticDeploymentPrivate: createDeployment(\n        provider: static\n        isPrivate: true\n      ) {\n        ...DeploymentAuthorization\n      }\n      redeployAutoscaleDeployment: redeployDeployment(\n        provider: cloud_run\n        isPrivate: false\n      ) {\n        ...DeploymentAuthorization\n      }\n      redeployAutoscaleDeploymentPrivate: redeployDeployment(\n        provider: cloud_run\n        isPrivate: true\n      ) {\n        ...DeploymentAuthorization\n      }\n      redeployRvmDeployment: redeployDeployment(\n        provider: gce\n        isPrivate: false\n      ) {\n        ...DeploymentAuthorization\n      }\n      redeployRvmDeploymentPrivate: redeployDeployment(\n        provider: gce\n        isPrivate: true\n      ) {\n        ...DeploymentAuthorization\n      }\n      redeployScheduledDeployment: redeployDeployment(\n        provider: cron\n        isPrivate: false\n      ) {\n        ...DeploymentAuthorization\n      }\n      redeployStaticDeployment: redeployDeployment(\n        provider: static\n        isPrivate: false\n      ) {\n        ...DeploymentAuthorization\n      }\n      redeployStaticDeploymentPrivate: redeployDeployment(\n        provider: static\n        isPrivate: true\n      ) {\n        ...DeploymentAuthorization\n      }\n      useDeploymentDebugSummaries {\n        ...DeploymentAuthorization\n      }\n    }\n  }\n  ","\n"]);return h=function(){return e},e}function m(){var e=(0,i._)(["\n  fragment DeploymentSessionRepl on Repl {\n    id\n    __typename\n    slug\n    config {\n      isVnc\n    }\n    source {\n      release {\n        repl {\n          title\n        }\n      }\n    }\n    owner {\n      __typename\n      ... on User {\n        id\n        username\n      }\n      ... on Team {\n        id\n        username\n      }\n    }\n    hostingDeployment {\n      ... on HostingDeployment {\n        ...DeploymentSessionHostingDeployment\n      }\n      ... on Error {\n        message\n      }\n    }\n    ...DeploymentAuthorizations\n  }\n  ","\n  ","\n"]);return m=function(){return e},e}function g(){var e=(0,i._)(["\n  query DeploymentSession($replId: String!, $orgId: String) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        ...DeploymentSessionRepl\n      }\n      ... on Error {\n        message\n      }\n    }\n    currentUser {\n      ...DeploymentSessionCurrentUser\n    }\n  }\n  ","\n  ","\n"]);return g=function(){return e},e}function v(){var e=(0,i._)(["\n  subscription DeploymentSessionBuildDeployActionUpdates(\n    $input: HostingBuildDeployActionUpdatesInput!\n  ) {\n    hostingBuildDeployActionUpdates(input: $input) {\n      ... on HostingBuildDeployLogAction {\n        log\n      }\n      ... on HostingBuildDeployStatusAction {\n        status\n        message\n        debugSummary {\n          ...BuildDebugSummary\n        }\n      }\n    }\n  }\n  ","\n"]);return v=function(){return e},e}function w(){var e=(0,i._)(["\n  mutation DeploymentSessionDeployBuild($input: DeployHostingBuild2Input!) {\n    deployHostingBuild2(input: $input) {\n      ... on DeployHostingBuild2Result {\n        build {\n          ...CurrentBuild2\n        }\n        targetDeployment {\n          ...TargetHostingDeployment\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n  ","\n"]);return w=function(){return e},e}function y(){var e=(0,i._)(["\n  mutation DeploymentSessionSendDeploymentLifecycleCommand(\n    $input: SendDeploymentLifecycleCommandInput!\n  ) {\n    sendDeploymentLifecycleCommand(input: $input) {\n      ... on SendDeploymentLifecycleCommandResult {\n        repl {\n          id\n          hostingDeployment {\n            ... on HostingDeployment {\n              ...DeploymentSessionHostingDeployment\n            }\n          }\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return y=function(){return e},e}function b(){var e=(0,i._)(["\n  mutation DeploymentSessionCancelInProgressDeploymentsBuild(\n    $input: FailHostingBuildInput!\n  ) {\n    failHostingBuild(input: $input) {\n      ... on FailHostingBuildResult {\n        build {\n          ...CurrentBuild2\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return b=function(){return e},e}function S(){var e=(0,i._)(["\n  query DeploymentGetIgnoredSecretsHostingDeployment($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        hostingDeployment {\n          ... on HostingDeployment {\n            id\n            ignoredSecrets\n          }\n          ... on Error {\n            message\n          }\n        }\n      }\n    }\n  }\n"]);return S=function(){return e},e}function Y(){var e=(0,i._)(["\n  query DeploymentGetEnvVarsHostingDeployment($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        hostingDeployment {\n          ... on HostingDeployment {\n            id\n            currentBuild {\n              id\n              envVars {\n                name\n              }\n            }\n          }\n          ... on Error {\n            message\n          }\n        }\n      }\n    }\n  }\n"]);return Y=function(){return e},e}var A={},x=(0,o.J1)(d()),C=(0,o.J1)(p(),u.Zc,u.UQ),_=(0,o.J1)(f()),k=(0,o.J1)(h(),_),D=(0,o.J1)(m(),C,k),E=(0,o.J1)(g(),D,x);function R(e){var n=(0,r._)({},A,e);return a.I(E,n)}function I(e){var n=(0,r._)({},A,e);return l._(E,n)}var F=(0,o.J1)(v(),u.mY);function T(e){var n=(0,r._)({},A,e);return s.R(F,n)}var P=(0,o.J1)(w(),u.UQ,u.Zc);function L(e){var n=(0,r._)({},A,e);return c.n(P,n)}var U=(0,o.J1)(y(),C),N=(0,o.J1)(b(),u.UQ),O=(0,o.J1)(S());function M(e){var n=(0,r._)({},A,e);return l._(O,n)}var B=(0,o.J1)(Y())},51895:(e,n,t)=>{"use strict";t.d(n,{FZ:()=>c,Rf:()=>u});var r=t(17844),i=t(12584),o=t(41114),a=t(86997);function l(){var e=(0,i._)(["\n  query ThreadsByFileHook($replId: String!, $path: String!) {\n    threadsByFile(replId: $replId, path: $path) {\n      ... on ThreadsByFileResult {\n        threads {\n          id\n          path\n          otVersion\n          indexStart\n          indexEnd\n          messageCount\n          unreadCount\n          user {\n            id\n            image\n            username\n          }\n          participants {\n            id\n            image\n            username\n          }\n          isGeneral\n          isResolved\n        }\n      }\n    }\n  }\n"]);return l=function(){return e},e}var s={},c=(0,o.J1)(l());function u(e){var n=(0,r._)({},s,e);return a.I(c,n)}},51940:(e,n,t)=>{"use strict";t.d(n,{C:()=>l});var r=t(88263),i=t(50051),o=t(63756),a=t(72395);function l(e){var n=e.org,t=e.disabled,l=e.onClick,s=n?(0,i.EG)({slug:n.slug}):void 0,c=s?s.home.href:"/home",u=s?s.home.as:"/~";return(0,r.Y)(o.A,{"aria-label":"Home",alt:"Home",dataCy:"home-button",href:c,size:32,as:u,disabled:t,onClick:l,children:(0,r.Y)(a.A,{})})}},52017:(e,n,t)=>{"use strict";t.d(n,{Ov:()=>a,QS:()=>u,Sb:()=>c,ZM:()=>s,pC:()=>d,y$:()=>l});var r=t(17844),i=t(86105),o=t(22531),a="Run App",l=function(e){return e.startsWith("Run ")?e.slice(4):e};function s(e){return e.replace(/\/nix\/store\/[^/]+\/bin\/([^\s]+)/,"$1")}function c(e){return["PARSE_ERROR","NOT_FOUND","READ_FILE"].includes(e)}function u(e){return(void 0===e?"undefined":(0,o._)(e))==="object"&&null!==e&&"code"in e&&"string"==typeof e.code&&c(e.code)&&(void 0===e.message||"string"==typeof e.message)&&(void 0===e.extras||"string"==typeof e.extras)}function d(e,n){for(var t=[],o=0;o<e.length;o++){var a=e[o];if("shell.exec"===a.task){if(n.length){var l=n.shift();l&&t.push((0,r._)({},a,l))}}else t.push(a)}return t.push.apply(t,(0,i._)(n)),t}},52101:(e,n,t)=>{"use strict";t.d(n,{Bg:()=>Y,XH:()=>b,aW:()=>g,jN:()=>w});var r=t(17844),i=t(12584),o=t(41114),a=t(86997),l=t(50175),s=t(97782);function c(){var e=(0,i._)(["\n  fragment HostingActivityLogBuild on HostingBuild {\n    id\n    status\n    hasDeployLogs\n    provider\n    timeCreated\n    user {\n      id\n      displayName\n      username\n      fullName\n      image\n    }\n    debugSummary {\n      ...BuildDebugSummary\n    }\n    rollbackSourceBuildId\n    envVars {\n      name\n      value\n    }\n  }\n  ","\n"]);return c=function(){return e},e}function u(){var e=(0,i._)(["\n  fragment HostingActivityLogLine2 on HostingActivityLog {\n    id\n    build {\n      ...HostingActivityLogBuild\n    }\n    type\n    user {\n      id\n      displayName\n    }\n    timeCreated\n    isRollbackCandidate\n  }\n  ","\n"]);return u=function(){return e},e}function d(){var e=(0,i._)(["\n  query HostingDeploymentActivityLogs2(\n    $replId: String!\n    $after: String\n    $count: Int\n  ) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        hostingDeployment {\n          ... on HostingDeployment {\n            id\n            currentBuild {\n              id\n              rollbackSourceBuildId\n              envVars {\n                name\n                value\n              }\n            }\n            activityLogs(after: $after, count: $count) {\n              items {\n                ...HostingActivityLogLine2\n              }\n              pageInfo {\n                hasNextPage\n                nextCursor\n              }\n            }\n          }\n          ... on Error {\n            message\n          }\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return d=function(){return e},e}function p(){var e=(0,i._)(["\n  query HostingActivityLogBuildHistory(\n    $input: HostingBuildDeployActionHistoryInput!\n  ) {\n    hostingBuildDeployActionHistory(input: $input) {\n      ... on HostingBuildDeployActionHistoryResults {\n        results {\n          ... on HostingBuildDeployStatusAction {\n            status\n            message\n          }\n          ... on HostingBuildDeployLogAction {\n            log\n          }\n        }\n      }\n    }\n  }\n"]);return p=function(){return e},e}function f(){var e=(0,i._)(["\n  mutation RollbackHostingBuild($input: RollbackHostingBuildInput!) {\n    rollbackHostingBuild(input: $input) {\n      ... on RollbackHostingBuildResult {\n        build {\n          ...CurrentBuild2\n        }\n        targetDeployment {\n          ...TargetHostingDeployment\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n  ","\n"]);return f=function(){return e},e}var h={},m=(0,o.J1)(c(),s.mY),g=(0,o.J1)(u(),m),v=(0,o.J1)(d(),g);function w(e){var n=(0,r._)({},h,e);return a.I(v,n)}var y=(0,o.J1)(p());function b(e){var n=(0,r._)({},h,e);return a.I(y,n)}var S=(0,o.J1)(f(),s.UQ,s.Zc);function Y(e){var n=(0,r._)({},h,e);return l.n(S,n)}},52174:(e,n,t)=>{"use strict";t.d(n,{SS:()=>v});var r=t(17844),i=t(93629),o=t(88263),a=t(21462),l=t(39695),s=t(5504),c=t(45263),u=t(973),d=t(48521),p=t(36112),f=t(76126),h=t(10429),m=t(93490),g=t(23499),v={AddFile:{type:"AddFile",text:"Add file"},AddFolder:{type:"AddFolder",text:"Add folder"},UploadFile:{type:"UploadFile",text:"Upload files"},UploadFolder:{type:"UploadFolder",text:"Upload folder"},DownloadZip:{type:"DownloadZip",text:"Download as zip"},Duplicate:{type:"Duplicate",text:"Duplicate file"},ShowHiddenFiles:{type:"ShowHiddenFiles",text:"Show hidden files"},HideHiddenFiles:{type:"HideHiddenFiles",text:"Hide hidden files"},OpenTab:{type:"OpenTab",text:"Open tab"},OpenPane:{type:"OpenPane",text:"Open pane"},CopyFilePath:{type:"CopyFilePath",text:"Copy file path"},CopyFolderPath:{type:"CopyFolderPath",text:"Copy folder path"},CopyLink:{type:"CopyLink",text:"Copy link"},OpenShellHere:{type:"OpenShellHere",text:"Open shell here"},Rename:{type:"Rename",text:"Rename"},Download:{type:"Download",text:"Download"},Delete:{type:"Delete",text:"Delete"}},w={self:[d.wp.position.relative,d.wp.width(20),d.wp.height("100%"),d.wp.justify.center,{"& span":{height:"100%"}}],self2:[d.wp.position.relative,d.wp.width(16),d.wp.height("100%"),d.wp.justify.center,d.wp.pr(1)],button:[d.wp.display.flex,d.wp.align.center,d.wp.justify.center,d.wp.py(2),d.wp.top(0),d.wp.width("100%"),d.wp.border({width:0,color:"none"}),d.wp.cursor.pointer,d.wp.color.foregroundDimmest,d.wp.borderRadius(4),u.b.filled,d.wp.position.relative,{top:-1,right:-1,height:"calc(100% + 2px)",backgroundColor:"transparent",borderTopLeftRadius:0,borderBottomLeftRadius:0}],button2:[d.wp.display.flex,d.wp.align.center,d.wp.py(2),d.wp.width("100%"),d.wp.height("100%"),d.wp.cursor.pointer,d.wp.color.foregroundDimmest,d.wp.focusRing,d.wp.borderRadius(4),{backgroundColor:"transparent",":hover":{color:c.LU.foregroundDefault}}],list:[d.wp.flex.column,d.wp.justify.center,d.wp.borderRadius(8),d.wp.zIndex(1),d.wp.backgroundColor.backgroundDefault,{listStyle:"none"},{":focus":{outline:"none"}}],option:function(e,n){return[d.wp.color.foregroundDefault,d.wp.p(8),d.wp.fontWeight.normal,d.wp.cursor.pointer,{whiteSpace:"nowrap"},n&&[d.wp.backgroundColor.backgroundHigher],e&&[{":hover":{backgroundColor:c.LU.accentNegativeDefault},":hover .option-label":{color:c.LU.white}}]]},optionLabel:function(e){return e?[d.wp.color.accentNegativeStronger]:[]}};function y(e){var n=e.isNegative,t=e.isHighlighted,r=e.children;return(0,o.Y)(h.S,{css:w.option(n,t),children:(0,o.Y)(f.EY,{className:"option-label",css:w.optionLabel(n),multiline:!1,children:r})})}var b=h.D.ul,S=h.D.li,Y=h.D.button,A=h.D.div;(0,a.forwardRef)(function(e,n){var t=e.isActive,u=e.actions,x=e.onAction,C=e.onOpenChange,_=(0,a.useRef)(!1),k=(0,l.WM)({items:u,onSelectedItemChange:function(e){var n=e.selectedItem;n&&(_.current||x(n),P())}}),D=k.isOpen,E=k.getToggleButtonProps,R=k.getMenuProps,I=k.highlightedIndex,F=k.getItemProps,T=k.openMenu,P=k.reset;(0,a.useImperativeHandle)(n,function(){return{open:T}}),(0,a.useEffect)(function(){C&&C(D)},[D,C]);var L=E(),U=(0,s._P)({controlName:"flag-ws-density-filetree",logFlagToAnalytics:!1});return(0,o.Y)(h.S,{css:U?w.self2:w.self,children:(0,o.FD)(m.A,{elevated:!0,showArrow:!0,isOpen:D,placement:"right-start",padding:0,onClickOutside:P,children:[(0,o.Y)(p.ui,{background:t?"default":"root",css:[d.wp.height("100%"),{background:t?c.LU.backgroundHigher:"transparent",borderTopRightRadius:8,borderBottomRightRadius:8}],children:(0,o.Y)(Y,(0,i._)((0,r._)({},L),{css:U?w.button2:w.button,size:20,onClick:function(e){e.stopPropagation(),L.onClick(e)},children:(0,o.Y)(g.A,{})}))}),(0,o.Y)(A,(0,i._)((0,r._)({},R({},{suppressRefError:!0})),{children:D?(0,o.Y)(b,{css:w.list,children:u.map(function(e,n){return(0,o.Y)(S,(0,i._)((0,r._)({"data-cy":"filetree-node-action-".concat(e.type)},F({item:e,index:n,onClick:function(n){_.current=!0,setTimeout(function(){_.current=!1}),x(e),n.stopPropagation()}})),{children:(0,o.Y)(y,{isHighlighted:I===n,isNegative:e.type===v.Delete.type,children:(0,o.FD)(h.S,{row:!0,gap:8,align:"center",children:[(0,o.Y)(f.EY,{multiline:!1,children:e.text}),"icon"in e?e.icon:null]})})}),e.text)})}):null}))]})})}).displayName="NodeActionsMenu"},52216:e=>{e.exports={container:"SuggestDeploy_container__mhqVk",assistant:"SuggestDeploy_assistant__3QtV_",message:"SuggestDeploy_message__iTjaA",cannotDeploy:"SuggestDeploy_cannotDeploy__k4COd",status:"SuggestDeploy_status__pC0MY",isConfiguredManually:"SuggestDeploy_isConfiguredManually__AoTAt",isStale:"SuggestDeploy_isStale__2mrmU",properties:"SuggestDeploy_properties__fshqC",propertiesTitle:"SuggestDeploy_propertiesTitle__04Wis",urlContainer:"SuggestDeploy_urlContainer__rAPHp",urlField:"SuggestDeploy_urlField__YRPX2"}},52597:(e,n,t)=>{"use strict";t.d(n,{v:()=>s});var r=t(17844),i=t(21462),o=t(31062),a=t(52682),l=t(69095);function s(){var e=(0,o.A)(),n=(0,a.A)("fileTree").trackTimeToLoadFileStart;return(0,i.useCallback)(function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(t);var o={action:"select",source:"filetree"};i.newTab?o={action:"newTab",source:"filetree"}:i.newPane&&(o={action:"newPane",source:"filetree"}),(0,l.A)((0,r._)({replId:e},o))},[e,n])}},52682:(e,n,t)=>{"use strict";t.d(n,{A:()=>c});var r=t(83150),i=t(34626),o=t(83973),a=new Map,l=function(e,n){if((0,r.m6)(e)){var t=window.performance.now();a.set(e,{start:t,source:n})}},s=function(e){var n=a.get(e);if(void 0!==n){var t=n.start,r=n.source,l=window.performance.now(),s=(0,o.v)(e);i.vF.time("time to load file",l-t,{from:r,fileViewerType:s}),a.delete(e)}};function c(e){return{trackTimeToLoadFileStart:function(n){return l(n,e)},trackTimeToLoadFileEnd:s}}},52756:(e,n,t)=>{"use strict";t.d(n,{M:()=>l,r:()=>s});var r=t(86105),i=t(21462),o=t(98450),a=t(53231),l=function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];(0,o.S)(function(){a.u4.apply(void 0,(0,r._)(n))})},s=function(e,n,t,r){var o=(0,i.useRef)(!1);(0,i.useEffect)(function(){!o.current&&t()&&((0,a.u4)(e,n),o.current=!0)},r)}},52917:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(88263),a=t(71117);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M12 .25a.75.75 0 0 1 .75.75v7.19l3.72-3.72a.75.75 0 1 1 1.06 1.06l-5 5a.75.75 0 0 1-1.06 0l-5-5a.75.75 0 0 1 1.06-1.06l3.72 3.72V1A.75.75 0 0 1 12 .25Zm0 13a.75.75 0 0 1 .53.22l5 5a.75.75 0 1 1-1.06 1.06l-3.72-3.72V23a.75.75 0 0 1-1.5 0v-7.19l-3.72 3.72a.75.75 0 0 1-1.06-1.06l5-5a.75.75 0 0 1 .53-.22Z",clipRule:"evenodd"})}))}},53317:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(88263),a=t(71117);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M13.163 3.834a8.25 8.25 0 1 0 6.62 10.916.75.75 0 1 1 1.414.5 9.75 9.75 0 1 1-2.305-10.148l3.358 3.162V4a.75.75 0 0 1 1.5 0v6a.75.75 0 0 1-.75.75h-6a.75.75 0 0 1 0-1.5h4.11l-3.254-3.064a8.25 8.25 0 0 0-4.693-2.352Z",clipRule:"evenodd"})}))}},53613:(e,n,t)=>{"use strict";t.d(n,{A:()=>T});var r=t(88263),i=t(21462),o=t(1230),a=t(54319),l=t(57756),s=t(34834),c=t(63441),u=t(14893),d=t(83846),p=t(10293),f=t(53231),h=t(45263),m=t(64583),g=t(49045),v=t(48521),w=t(76126),y=t(10429),b=t(80762),S=t(77964),Y=(0,g.v)(["backgroundColor","color","hoverColor","hoverBackgroundColor"]),A=Y.cssVars,x=Y.styleTokens,C=(0,m.x)({wrapper:[v.wp.display.inlineFlex,{backgroundColor:x.backgroundColor,color:x.color,"&:hover":{color:x.hoverColor,backgroundColor:x.hoverBackgroundColor}},v.wp.align.center,v.wp.borderRadius(),v.wp.py(2),v.wp.px(6),v.wp.cursor.pointer]});function _(e){var n,t=e.trackSource,i=void 0===t?"unknown":t,o=(0,u.lO)(),a=o.isOffline,l=o.isDisabled,s=(0,u.sT)();return(0,r.FD)(y.S,{tag:"button",onClick:function(){(0,f.u4)(p.AZ.WORKFLOW_RAN,{source:i,runner:"workflows"}),s()},css:C.wrapper,row:!0,gap:6,disabled:a||l,style:(n={},(0,d._)(n,A.backgroundColor,a?h.LU.greyDimmest:h.LU.accentPositiveDimmest),(0,d._)(n,A.color,a?h.LU.foregroundDefault:h.LU.accentPositiveStrongest),(0,d._)(n,A.hoverColor,a?h.LU.foregroundDefault:h.LU.white),(0,d._)(n,A.hoverBackgroundColor,a?h.LU.greyDimmest:h.LU.accentPositiveDefault),n),children:[a?(0,r.Y)(b.A,{size:12}):(0,r.Y)(S.A,{size:12}),(0,r.Y)(w.EY,{children:"Run"})]})}var k=t(46603),D=t(44859),E=t(46404),R=t(98952);function I(e){var n=e.children,t=e.action;return(0,r.FD)(y.S,{align:"center",children:[(0,r.Y)(w.EY,{children:n}),t?(0,r.Y)(y.S,{row:!0,align:"center",gap:4,children:t}):null]})}function F(e){var n=e.openNetworkingTool,t=e.openAgentPane,c=(0,u.lO)().isRunning,d=(0,s.A)().ports,p=(0,l.A)(d.portsState),f=(0,i.useMemo)(function(){return null==p?void 0:p.some(function(e){return e.isOpen})},[p]),h=(0,a.hT)();if((0,i.useMemo)(function(){return void 0!==h&&h!==o.g32.AGENT_STATE_UNKNOWN},[h])){var m=h===o.g32.AGENT_STATE_PAUSING||h===o.g32.AGENT_STATE_PAUSED?"is waiting for your response.":"is working on it.";return(0,r.Y)(I,{action:(0,r.FD)(r.FK,{children:[(0,r.Y)(k.$n,{onClick:t,size:"small",text:"Agent",iconLeft:(0,r.Y)(D.A,{size:12})})," ",m]}),children:"The App is currently not running."})}return c?f?(0,r.Y)(I,{action:(0,r.FD)(r.FK,{children:["Use"," ",(0,r.Y)(k.$n,{onClick:n,size:"small",text:"Networking",iconLeft:(0,r.Y)(R.A,{size:12})})," ","tool to configure them."]}),children:"The App is running, but has no external ports configured."}):(0,r.Y)(I,{children:"The App is running, but there's no webpage to preview right now."}):(0,r.Y)(I,{action:(0,r.FD)(r.FK,{children:[(0,r.Y)(_,{})," to see the results of your app."]}),children:"The App is currently not running."})}function T(e){var n=e.openNetworkingTool,t=e.openAgentPane;return(0,r.Y)(c.A,{pane:{type:"webview"},icon:(0,r.Y)(E.A,{size:48}),headerText:"Preview your App here",bodyText:(0,r.Y)(F,{openNetworkingTool:n,openAgentPane:t})})}},53628:(e,n,t)=>{"use strict";t.d(n,{A:()=>d});var r=t(12694),i=t(90629),o=t(95131),a=t(35084),l=t(10293),s=t(61018),c=t(36640),u=t(53231);let d=function(e){var n=e.isMobileApp,t=e.isTeam,d=e.handleUpgradeTriggered,p=e.replId,f=(0,c.A)(),h=f.showConfirm,m=f.showError,g=(0,s.X)(),v=function(e,n){i.ZQ({message:n}),i.Cp(Error(e.message)),m("Something unexpected happened, please try again.")},w=(0,r._)((0,o.t)({onError:function(e){return v(e,"useAddOrInviteReplMultiplayerMutation")},onCompleted:function(e){var r,i,o,s=e.addOrInviteReplMultiplayer;switch(s.__typename){case"NotFoundError":case"UnauthorizedError":m(s.message);return;case"UserError":if(s.message.includes("reached the limit")){if(n&&!t)return void m("You have reached the invite limit for a free account. Please upgrade to add more collaborators.");else if(!n&&d)return void d(!0)}m(s.message);return;case"AddOrInviteReplMultiplayerOuput":"MultiplayerInvite"===s.result.__typename?(r=a.LI.Email,i=s.result.email):(r=a.LI.Username,i=(null==(o=s.result.user)?void 0:o.username)?"@".concat(s.result.user.username):"user")}"data"===g.type&&g.refetch(),(0,u.u4)(l.AZ.MULTIPLAYER_INVITED,{replId:p,inviteMethod:r}),h("Added ".concat(i))}}),2);return{addOrInviteReplMultiplayer:w[0],loadingAddMutation:w[1].loading}}},53876:(e,n,t)=>{"use strict";t.d(n,{p:()=>u});var r=t(88263),i=t(21462),o=t(79209),a=t(45263),l=t(48521),s=t(46603),c=(0,o.AH)(l.wp.display.flex,l.wp.align.center,l.wp.height(30),{"input, button":[l.wp.my(0),l.wp.mx(4)],input:[l.wp.py(4),l.wp.px(8),l.wp.backgroundColor.backgroundDefault,l.wp.color.foregroundDefault,l.wp.height(24),l.wp.width(85),l.wp.borderRadius(4),l.wp.focusRing,{border:"none",boxShadow:"none","&::placeholder":[l.wp.color.foregroundDefault],"&:focus":[{outline:"none",borderColor:a.LU.accentPrimaryDefault}]}]});function u(e){var n=e.searchValue,t=e.setSearchValue,o=e.findNext,a=e.findPrevious,l=e.exit,u=(0,i.useRef)(null);(0,i.useEffect)(function(){u.current&&u.current.focus()},[]);var d=function(e){if("Escape"===e.key)return void l();"Enter"===e.key&&(e.shiftKey?a(n):o(n))};return(0,r.FD)("div",{css:c,children:[(0,r.Y)("input",{ref:u,placeholder:"Find",value:n,onChange:function(e){return t(e.target.value)},onKeyDown:function(e){return d(e)}}),(0,r.Y)(s.$n,{size:"small",onClick:function(){return o(n)},text:"Next"}),(0,r.Y)(s.$n,{size:"small",onClick:function(){return a(n)},text:"Previous"}),(0,r.Y)(s.$n,{size:"small",onClick:l,text:"Exit"})]})}},53961:(e,n,t)=>{"use strict";t.d(n,{A:()=>a});var r=t(21462),i=t(70079),o=t(55903);function a(e){var n=e.repl,t=e.currentUser,a=e.container,l=(0,o.L)(),s=(0,i.$)(n&&t?{repl:n,currentUser:t}:null);(0,r.useEffect)(function(){if(a&&s)return a.connect({context:s,getMinimumRetryDelayMs:l}),function(){a.close()}},[s,a,l])}},54249:(e,n,t)=>{"use strict";t.d(n,{q:()=>u});var r=t(17844),i=t(93629),o=t(17459),a=t(95081),l=t(36640),s=t(31062),c=t(84353),u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.skipQuery,t=e.onDatabasesDetected,u=(0,o._)(e,["skipQuery","onDatabasesDetected"]),d=(0,s.A)(),p=(0,l.A)().showError,f=(0,a._j)((0,i._)((0,r._)({},u),{skip:n,variables:{input:{replId:d}},fetchPolicy:"cache-and-network",ssr:!1,notifyOnNetworkStatusChange:!0,onCompleted:function(e){"GetNeonDatabasesResult"!==e.getNeonDatabases.__typename&&p("Error: ".concat(e.getNeonDatabases.message)),"GetNeonDatabasesResult"===e.getNeonDatabases.__typename&&e.getNeonDatabases.databases.filter(c.I).length>0&&(null==t||t())}})),h=f.data;return{loading:f.loading,neonDatabases:(null==h?void 0:h.getNeonDatabases.__typename)==="GetNeonDatabasesResult"?h.getNeonDatabases.databases.filter(c.I):[],currentUser:null==h?void 0:h.currentUser}}},54534:(e,n,t)=>{"use strict";t.d(n,{$f:()=>a,Pi:()=>o,cl:()=>i});var r=t(24365),i="git",o={gitCommit:{id:"git.commit",name:"Git: Commit",scope:i,default:(0,r.FM)({cmdOrCtrl:!0,key:"Enter"})}},a=Object.values(o)},54609:e=>{e.exports={timelineItemIconComplete:"TimelineStepsV2_timelineItemIconComplete__eVjS7",timelineItemIconActive:"TimelineStepsV2_timelineItemIconActive__Aa5_g"}},54620:(e,n,t)=>{"use strict";t.d(n,{D:()=>o});var r=t(7512),i=function(e){if(1===e.length)return e[0].type===r.pt.File?"file":"folder";if(e.length>1){var n=e.filter(function(e){return e.type===r.pt.File}).length,t=e.filter(function(e){return e.type===r.pt.Directory}).length,i=n>1?"files":"file",o=t>1?"folders":"folder",a="file";return n>0&&t>0?a="".concat(i," and ").concat(o):n>0?a="".concat(i):t>0&&(a="".concat(o)),"".concat(a)}return""};function o(e){var n=i(e),t=1===e.length?n:"".concat(e.length," ").concat(n),r=e.slice(0,5).map(function(e){return e.path}).join(", ");return{name:t,description:e.length>5?"".concat(r," and ").concat(e.length-5," more ").concat(i(e.slice(5))):r,confirmDescription:t}}},54771:(e,n,t)=>{"use strict";t.d(n,{A:()=>m,_:()=>g});var r=t(88263),i=t(21462),o=t(1040),a=t(31628),l=t(53231),s=t(45263),c=t(64583),u=t(973),d=t(48521),p=t(76126),f=t(10429),h=(0,c.x)({qr:[d.wp.height(128),d.wp.width(128),d.wp.borderRadius(2),u.b.nofill]});function m(e){var n=e.source,t=e.color,l=e.installText,c=e.onClick,u=(0,a.T)(),d=new URL("/mobile",window.location.origin);return d.searchParams.append("qr_src",n),u&&d.searchParams.append("id",String(u)),(0,i.useEffect)(function(){u&&g({userId:u,source:n,action:"view"})},[n,u]),(0,r.FD)(f.S,{align:"center",gap:4,onClick:function(){if(u&&g({userId:u,source:n,action:"click"}),c)return void c(d.toString());window.open(d)},children:[(0,r.Y)(f.S,{align:"center",justify:"center",children:(0,r.Y)(o.Ay,{bgColor:s.LU.backgroundDefault,fgColor:null!=t?t:s.LU.foregroundDefault,css:h.qr,value:d.toString()})}),(0,r.Y)(p.EY,{variant:"small",color:"dimmer",children:null!=l?l:"Scan to install"})]})}function g(e){var n=e.userId,t=e.source,r=e.action;(0,l.u4)(l.AZ.MOBILE_QR_CODE_USED,{action:r,source:t,src_user:n,qr_path:"/mobile"})}},54790:(e,n,t)=>{"use strict";t.d(n,{A:()=>p});var r=t(17844),i=t(93629),o=t(17459),a=t(88263),l=t(41704),s=t(48521),c=t(10429),u=[s.wp.width("100%"),s.wp.p(8)],d=[s.wp.py(32),s.wp.minHeight("100%"),s.wp.center],p=function(e){var n=e.children,t=e.centered,s=e.maxWidth,p=(0,o._)(e,["children","centered","maxWidth"]),f=[u,t&&d,s&&l.R1.maxWidth].filter(Boolean);return(0,a.Y)(c.S,(0,i._)((0,r._)({},p),{css:f,children:n}))}},55074:(e,n,t)=>{"use strict";t.d(n,{Z:()=>l,k:()=>a});var r=t(12694),i=t(86105),o=t(62132);function a(e){var n=new Map;e.forEach(function(e){var t=e.path.slice(0,-1),r="section:"+(0,o.p)(t),i=n.get(r);if(i)i.items.push(e);else{var a=t[t.length-1],l=(null==a?void 0:a.data.type)==="group"||1===t.length;n.set(r,{type:"section",path:t,score:e.match.score,items:[e],unlabeled:l,key:r,tooltip:"context"===a.data.type?null==a?void 0:a.data.tooltip:void 0})}});var t=(0,i._)(n.entries()).sort(function(e,n){var t=(0,r._)(e,2),i=(t[0],t[1]),o=(0,r._)(n,2);return(o[0],o[1]).score-i.score}),a={items:[],rows:[]},l=0;t.forEach(function(e){var n=(0,r._)(e,2),t=n[0],i=n[1];a.rows.push({type:i.type,key:t,path:i.path,unlabeled:i.unlabeled,tooltip:i.tooltip}),i.items.forEach(function(e){a.items.push(e),a.rows.push({type:"item",item:e,index:l++})})});var s=a.rows[0];return(null==s?void 0:s.type)==="section"&&s.unlabeled&&a.rows.shift(),a}function l(e,n){var t=[],r=!0,o=!1,a=void 0;try{for(var l,s=e.slice(n)[Symbol.iterator]();!(r=(l=s.next()).done);r=!0){var c=l.value;"group"!==c.data.type&&t.push(c.data.label)}}catch(e){o=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return(0,i._)(new Set(t))}},55123:(e,n,t)=>{"use strict";t.d(n,{z:()=>o});var r=t(88263),i=t(79209);function o(){return(0,r.Y)(i.mL,{styles:[{body:{overflow:"hidden"}}]})}},55275:(e,n,t)=>{"use strict";t.d(n,{AI:()=>p,Ou:()=>u,Pd:()=>l,h:()=>c,ob:()=>d});var r=t(21462),i=t(69338),o=t(50140),a=t(83170),l=(0,r.createContext)(void 0);function s(){var e=(0,r.useContext)(l);if(!e)throw Error("Expected store in context");return e}function c(e){var n=s();return(0,i.md)(e,{store:n})}function u(e){return(0,o.yF)((0,r.useCallback)(function(n){return n(e)},[e]),{store:s()})}var d=function(e){var n=s();return(0,i.Xr)(e,{store:n})};function p(e){return(0,a.k)(e,s())}},55442:(e,n,t)=>{"use strict";t.d(n,{A:()=>p});var r=t(21462),i=t(53811),o=t(58590),a=t(23046),l=t(31062),s=t(34626),c=t(13256),u=t(34834),d=new Set;function p(e){var n=e.workspaceType,t=(0,l.A)(),p=(0,u.A)(),f=p.dotReplit,h=p.container;(0,r.useEffect)(function(){if(!d.has(t)){d.add(t);var e=f.watch(function(t){if(!t.error||t.error!==a.DO.Disconnected){try{var r=h.getConnectionMetadata();if(!r||!r.token)throw Error("Expected token in measure call.");!function(e){var n=e.workspaceType,t=e.parsedToken,r=!!window.performance.getEntriesByName(o.pY.pageNavStart,"mark").length,a={ssr:!r,workspaceType:n,tokenCluster:t.cluster},l="time to code";window.performance.measure(l,r?o.pY.pageNavStart:void 0);var c=window.performance.getEntriesByName(l,"measure")[0];if(!c)return s.vF.info("Could not obtain measure for time to code",a);var u="page invisible fetch connection metadata",d=c.duration;window.performance.getEntriesByName(o.pY.fetchConnectionMetadataPageInvisibleStart,"mark").length&&(window.performance.measure(u,o.pY.fetchConnectionMetadataPageInvisibleStart,o.pY.fetchConnectionMetadataPageInvisibleEnd),d-=window.performance.getEntriesByName(u,"measure")[0].duration,window.performance.clearMeasures(u),window.performance.clearMarks(o.pY.fetchConnectionMetadataPageInvisibleStart),window.performance.clearMarks(o.pY.fetchConnectionMetadataPageInvisibleEnd)),s.vF.time("time to code minus page invisible",d,a),s.vF.time("time to code with page invisible",c.duration,a),window.performance.clearMeasures(l),i.L.addTiming("time_to_code_minus_page_invisible",d),i.L.addTiming("time_to_code_with_page_invisible",c.duration)}({workspaceType:n,parsedToken:(0,c.pI)(r.token)})}catch(e){s.vF.info("Could not measure time to code",{workspaceType:n,e:e,dotReplitResult:t.error?t.error:"success"})}e()}});return e}},[t,n,f,h])}},55544:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(88263),a=t(71117);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M9 .25a.75.75 0 0 1 .75.75v2.25h4.5V1a.75.75 0 0 1 1.5 0v2.25H18A2.75 2.75 0 0 1 20.75 6v2.25H23a.75.75 0 0 1 0 1.5h-2.25v3.5H23a.75.75 0 0 1 0 1.5h-2.25V18A2.75 2.75 0 0 1 18 20.75h-2.25V23a.75.75 0 0 1-1.5 0v-2.25h-4.5V23a.75.75 0 0 1-1.5 0v-2.25H6A2.75 2.75 0 0 1 3.25 18v-3.25H1a.75.75 0 0 1 0-1.5h2.25v-3.5H1a.75.75 0 0 1 0-1.5h2.25V6A2.75 2.75 0 0 1 6 3.25h2.25V1A.75.75 0 0 1 9 .25Zm-3 4.5c-.69 0-1.25.56-1.25 1.25v12c0 .69.56 1.25 1.25 1.25h12c.69 0 1.25-.56 1.25-1.25V6c0-.69-.56-1.25-1.25-1.25H6ZM8.25 9A.75.75 0 0 1 9 8.25h6a.75.75 0 0 1 .75.75v6a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75V9Zm1.5.75v4.5h4.5v-4.5h-4.5Z",clipRule:"evenodd"})}))}},55568:(e,n,t)=>{"use strict";t.d(n,{Bt:()=>y,To:()=>w,ex:()=>v});var r=t(88263),i=t(63380),o=t(79784),a=t(34384),l=t(75176);t(54249);var s=t(64583),c=t(48521),u=t(54087),d=t(76126),p=t(10429),f=t(45149),h=t(29064),m=(0,s.x)({emphasis:[c.wp.fontWeight.medium,c.wp.flex.shrink(1)],row:[c.wp.rowWithGap(8),c.wp.align.center],rowText:[c.wp.flex.shrink(1)]});function g(e){var n=e.title,t=e.isFrozen,o=e.scheduledFreezeTime,a=e.scheduledDeletionTime,l=new Date,s=o?(0,i.A)(new Date(o),l):-1,c=a?(0,i.A)(new Date(a),l):-1;return(0,r.FD)(p.S,{gap:4,children:[(0,r.Y)(p.S,{pr:2,row:!0,gap:4,align:"center",justify:"space-between",children:(0,r.Y)(d.EY,{css:m.emphasis,children:void 0===n?"Upgrade for a permanent database":n})}),(0,r.Y)(d.EY,{variant:"small",children:"Databases created on your free Starter plan are temporary."}),(0,r.FD)(p.S,{pt:2,gap:8,children:[t?(0,r.FD)(p.S,{css:m.row,children:[(0,r.Y)(f.A,{size:16}),(0,r.Y)(d.EY,{css:m.rowText,variant:"small",children:"Your database has been paused, preventing further edits."})]}):null,!t&&s>-1?(0,r.FD)(p.S,{css:m.row,children:[(0,r.Y)(f.A,{size:16}),(0,r.FD)(d.EY,{css:m.rowText,variant:"small",children:[(0,r.FD)("span",{css:m.emphasis,children:["In ",s," days:"]})," ","Your database will be paused, preventing further edits."]})]}):null,c>-1?(0,r.FD)(p.S,{css:m.row,children:[(0,r.Y)(h.A,{size:16}),(0,r.FD)(d.EY,{css:m.rowText,variant:"small",children:[(0,r.FD)("span",{css:m.emphasis,children:["In ",c," days:"]})," ","Your database will be permanently deleted."]})]}):null]})]})}function v(e){var n=e.currentUser,t=(0,a.ET)().orgId;return!(null==n?void 0:n.isMemberOfAnyOrg)&&!(null==n?void 0:n.userSubscriptionType)&&void 0===t}function w(e){var n=e.isFrozen,t=e.scheduledFreezeTime,i=e.scheduledDeletionTime;return v({currentUser:e.currentUser})?(0,r.Y)(p.S,{children:(0,r.Y)(u.N,{text:(0,r.FD)(p.S,{children:[(0,r.Y)(g,{isFrozen:n,scheduledFreezeTime:t,scheduledDeletionTime:i}),(0,r.Y)(p.S,{pt:12,pb:4,children:(0,r.Y)(l.A,{context:"workspace_ephemeral_postgres_database_banner",text:"Upgrade to Replit ".concat(o.en),colorway:"brand",variant:"outlined"})})]})})}):null}function y(e){var n=e.isFrozen,t=e.scheduledFreezeTime,i=e.scheduledDeletionTime;return(0,r.Y)(p.S,{style:{maxWidth:240},children:(0,r.Y)(g,{title:"We created a temporary database for you, manage it here",isFrozen:n,scheduledFreezeTime:t,scheduledDeletionTime:i})})}},55821:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(88263),a=t(71117);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{d:"M13.806 21.074a.75.75 0 0 1 .292 1.47 10.805 10.805 0 0 1-4.196 0 .75.75 0 1 1 .292-1.47 9.298 9.298 0 0 0 3.612 0ZM4.308 17.14a9.308 9.308 0 0 0 2.553 2.553.75.75 0 1 1-.835 1.247 10.805 10.805 0 0 1-2.964-2.965l.623-.417.623-.418Zm13.666 3.8a.75.75 0 0 1-.835-1.247l.835 1.247Zm1.718-3.8a.75.75 0 0 1 1.247.835 10.805 10.805 0 0 1-2.965 2.965l-.417-.624-.418-.623a9.31 9.31 0 0 0 2.553-2.553Zm-16.424-.206a.75.75 0 0 1 1.04.206l-1.246.835a.75.75 0 0 1 .206-1.041ZM1.25 12c0-.717.07-1.419.205-2.098l.019-.074a.75.75 0 0 1 1.452.366l-.076.442a9.333 9.333 0 0 0 .076 3.17l.011.076a.75.75 0 0 1-1.482.216l-.089-.514A10.831 10.831 0 0 1 1.25 12Zm21.295 2.098a.75.75 0 1 1-1.47-.292l1.47.292ZM21.25 12c0-.619-.06-1.222-.176-1.806l.736-.145.735-.147a10.804 10.804 0 0 1 0 4.196l-.735-.147-.736-.145A9.298 9.298 0 0 0 21.25 12Zm.414-2.687a.75.75 0 0 1 .88.59l-1.47.291a.75.75 0 0 1 .59-.882ZM4.308 6.86a.75.75 0 0 1-1.246-.835l1.246.835Zm12.625-3.593a.75.75 0 0 1 1.04-.206 10.805 10.805 0 0 1 2.966 2.964.75.75 0 0 1-1.247.835 9.308 9.308 0 0 0-2.553-2.553.75.75 0 0 1-.206-1.04ZM6.026 3.062a.75.75 0 0 1 .835 1.246A9.306 9.306 0 0 0 4.308 6.86l-.623-.418-.623-.417a10.804 10.804 0 0 1 2.964-2.964Zm4.168-.136a.75.75 0 0 1-.292-1.47l.292 1.47ZM12 1.25c.717 0 1.419.07 2.098.205l.074.019a.75.75 0 0 1-.366 1.452l-.442-.076a9.333 9.333 0 0 0-3.17.076l-.145-.736-.147-.735c.68-.134 1.381-.205 2.098-.205ZM15.555 8.896a.75.75 0 0 1 1.004 1.105l-.054.054-5.5 5a.75.75 0 0 1-1.01 0l-2.5-2.273a.75.75 0 0 1 1.01-1.11l1.995 1.813 4.995-4.54.06-.049Z"})}))}},55825:(e,n,t)=>{"use strict";t.d(n,{L:()=>f,i:()=>h});var r=t(83846),i=t(88263),o=t(45263),a=t(64583),l=t(49045),s=t(48521),c=(0,l.v)(["connectorHeight","connectorLeft","markerTop","markerBottom","markerLeft"]),u=c.cssVars,d=c.styleTokens,p=(0,a.x)({connectorSegmentBorder:[s.wp.position.absolute,s.wp.left(d.connectorLeft),s.wp.width(18),s.wp.height(d.connectorHeight),s.wp.top("100%"),{borderRight:"2px solid ".concat(o.LU.outlineDimmer)}],parallelSegmentBorder:[s.wp.position.absolute,s.wp.top(0),s.wp.left(d.connectorLeft),s.wp.bottom(0),s.wp.height(d.connectorHeight),s.wp.width(18),{borderLeft:"2px solid ".concat(o.LU.outlineDimmer),borderBottom:"2px solid ".concat(o.LU.outlineDimmer),borderRadius:"0 0 0 50px"}],parallelSegmentConnectorBorder:[s.wp.position.absolute,s.wp.top(0),s.wp.bottom(0),s.wp.left(d.connectorLeft),s.wp.height("115%"),{borderLeft:"2px solid ".concat(o.LU.outlineDimmer)}],marker:[s.wp.position.absolute,s.wp.top(-2),s.wp.left(-3),s.wp.height(4),s.wp.width(4),s.wp.backgroundColor.foregroundDimmest,s.wp.borderRadius("full")],sequentialMarkerBorder:[s.wp.position.relative,s.wp.top(4),s.wp.left(d.markerLeft),s.wp.height(12),s.wp.width(30),{borderTop:"2px solid ".concat(o.LU.outlineDimmer),borderRight:"2px solid ".concat(o.LU.outlineDimmer),borderRadius:"0 10px 0 0"}],parallelMarkerBorder:[s.wp.position.relative,s.wp.top(4),s.wp.left(d.markerLeft),s.wp.height(12),s.wp.width(30),{borderLeft:"2px solid ".concat(o.LU.outlineDimmer)}]});function f(e){var n,t,o=e.mode,a=e.dragAble,l=e.hideBottom,s=void 0!==l&&l,c=e.connectorHeight,d=e.connectorLeft;return"sequential"===(void 0===o?"sequential":o)?(0,i.Y)(i.FK,{children:s?null:(0,i.Y)("div",{css:p.connectorSegmentBorder,style:(n={},(0,r._)(n,u.connectorHeight,"".concat(null!=c?c:8,"px")),(0,r._)(n,u.connectorLeft,"".concat(null!=d?d:0,"px")),n)})}):(0,i.FD)(i.FK,{children:[(0,i.Y)("div",{css:p.parallelSegmentBorder,style:(t={width:void 0===a||a?12:18},(0,r._)(t,u.connectorHeight,"".concat(null!=c?c:25,"px")),(0,r._)(t,u.connectorLeft,"".concat(null!=d?d:-12,"px")),t)}),s?null:(0,i.Y)("div",{css:p.parallelSegmentConnectorBorder,style:(0,r._)({},u.connectorLeft,"".concat(null!=d?d:-12,"px"))})]})}function h(e){var n,t,o=e.top,a=void 0===o?-2:o,l=e.bottom,s=void 0===l?0:l,c=e.left;return"sequential"===e.mode?(0,i.Y)("div",{css:p.sequentialMarkerBorder,style:(n={},(0,r._)(n,u.markerTop,"".concat(a,"px")),(0,r._)(n,u.markerBottom,"".concat(s,"px")),(0,r._)(n,u.markerLeft,"".concat(c,"px")),n),children:(0,i.Y)("div",{css:p.marker})}):(0,i.Y)("div",{css:p.parallelMarkerBorder,style:(t={},(0,r._)(t,u.markerTop,"".concat(a,"px")),(0,r._)(t,u.markerBottom,"".concat(s,"px")),(0,r._)(t,u.markerLeft,"".concat(c,"px")),t),children:(0,i.Y)("div",{css:p.marker})})}},56687:(e,n,t)=>{"use strict";t.d(n,{FR:()=>A,Gx:()=>w,XE:()=>b});var r=t(29935),i=t(12694),o=t(82643),a=t(21462),l=t(35084),s=t(82977),c=t(51812),u=t(74096),d=t(47946),p=t(82377),f=t(96291),h=t(46531),m=t(23046),g=t(7512),v=t(81666);function w(e){var n=e.secrets,t=e.replId,l=(0,i._)((0,s.fY)(),1)[0],u=(0,i._)((0,c.$c)(),1)[0];return(0,a.useCallback)((0,r._)(function(){var e,r,a,s,c,d,p,f,h,m,g,v,w,y,b,S,Y,A,x,C,_,k;return(0,o.YH)(this,function(o){switch(o.label){case 0:return[4,l({variables:{replId:t}})];case 1:return a=o.sent().data,[4,u({variables:{replId:t}})];case 2:if(s=o.sent().data,c=new Map,d=(null==s?void 0:s.getRepl.__typename)==="Repl"&&(null==s||null==(e=s.getRepl.hostingDeployment)?void 0:e.__typename)==="HostingDeployment"?s.getRepl.hostingDeployment.ignoredSecrets:[],(null==a?void 0:a.getRepl.__typename)==="Repl"&&a.getRepl.sharedSecretLinks&&(null==(r=a.currentUser)?void 0:r.secrets.__typename)==="SharedSecretConnection"){p=a.currentUser.secrets.items,f=!0,h=!1,m=void 0;try{for(g=function(){var e,n=w.value,t=p.find(function(e){return e.id===n.secret.id});c.set(n.alias,null!=(e=null==t?void 0:t.value)?e:"")},v=a.getRepl.sharedSecretLinks[Symbol.iterator]();!(f=(w=v.next()).done);f=!0)g()}catch(e){h=!0,m=e}finally{try{f||null==v.return||v.return()}finally{if(h)throw m}}}return[4,n.read()];case 3:y=o.sent(),b=!0,S=!1,Y=void 0;try{for(A=y.entries()[Symbol.iterator]();!(b=(x=A.next()).done);b=!0)_=(C=(0,i._)(x.value,2))[0],k=C[1],d.includes(_)||c.set(_,k)}catch(e){S=!0,Y=e}finally{try{b||null==A.return||A.return()}finally{if(S)throw Y}}return[2,Array.from(c,function(e){var n=(0,i._)(e,2);return{name:n[0],value:n[1]}})]}})}),[n,u,l,t])}function y(){return(y=(0,r._)(function(e){var n,t,r;return(0,o.YH)(this,function(i){switch(i.label){case 0:return[4,e.getConfig()];case 1:if(t=(n=i.sent()).config,(r=n.error)===m.DO.NotFound)return[2];if(r)throw Error("Failed to get .replit config with Error: "+r);return[2,t]}})})).apply(this,arguments)}function b(e){return S.apply(this,arguments)}function S(){return(S=(0,r._)(function(e){var n,t,r,i,a,s,c,u,p,h,m,g,v;return(0,o.YH)(this,function(o){switch(o.label){case 0:return n=null,t=null,r=null,i=null,a=null,[4,function(e){return y.apply(this,arguments)}(e)];case 1:if(!(s=o.sent()))return[2,{buildCommand:n,runCommand:t,ignorePorts:r,appType:i,publicDir:a}];if(!s.deployment)return[3,2];switch(u=(c=s.deployment).build,p=c.run,h=c.ignorePorts,m=c.target,g=c.publicDir,u&&(n=(0,f.a8)(u)),p&&(t=(0,f.a8)(p)),null!=h&&(r=h),m){case d.api.DeploymentConfig.Target.VM:case d.api.DeploymentConfig.Target.GCE:i=r?l.JX.Worker:l.JX.Server;break;case d.api.DeploymentConfig.Target.AUTOSCALE:case d.api.DeploymentConfig.Target.CLOUDRUN:i=l.JX.CloudRun;break;case d.api.DeploymentConfig.Target.STATIC:i=l.JX.Static;break;case d.api.DeploymentConfig.Target.SCHEDULED:i=l.JX.Cron}return g&&(a=g),[3,4];case 2:return[4,e.getRunConfig()];case 3:v=o.sent(),s.compile&&(n=(0,f.a8)(s.compile)),v.run?t=(0,f.a8)(v.run.run):s.run&&(t=(0,f.a8)(v.run)),o.label=4;case 4:return[2,{buildCommand:n,runCommand:t,ignorePorts:r,appType:i,publicDir:a}]}})})).apply(this,arguments)}var Y={buildCommand:{delete:function(){return(0,h.m_)("deployment/build")},create:function(e){return(0,h.dA)(e.toString())}},runCommand:{delete:function(){return(0,h.m_)("deployment/run")},create:function(e){return(0,h.eH)(e.toString())}},ignorePorts:{delete:function(){return(0,h.m_)("deployment/ignorePorts")},create:function(e){return(0,h.KY)(!!e)}},appType:{delete:function(){return(0,h.m_)("deployment/deploymentTarget")},create:function(e){var n=null;switch(e){case l.JX.Server:case l.JX.Worker:n="gce";break;case l.JX.CloudRun:n="cloudrun";break;case l.JX.Static:n="static";break;case l.JX.Cron:n="scheduled"}return n?(0,h.GS)(n):null}},publicDir:{delete:function(){return(0,h.m_)("deployment/publicDir")},create:function(e){return(0,h.Df)(e.toString())}}};function A(e,n,t){return x.apply(this,arguments)}function x(){return(x=(0,r._)(function(e,n,t){var r,i,a,l,s,c,d,f,h,m,w,y,b,S,A,x;return(0,o.YH)(this,function(o){switch(o.label){case 0:r=t.fs,i=t.container,a=t.dotReplit,l=[],s=!0,c=!1,d=void 0;try{for(f=Object.keys(e)[Symbol.iterator]();!(s=(h=f.next()).done);s=!0)w=e[m=h.value],y=n[m],b=Y[m],w!==y&&("string"==typeof w&&(0,p.mU)(w)||"boolean"==typeof w&&w?(S=b.create(w))&&l.push(S):l.push(b.delete()))}catch(e){c=!0,d=e}finally{try{s||null==f.return||f.return()}finally{if(c)throw d}}if(i.getConnectionState()!==u.KN.CONNECTED)throw new v.m$;if(!l.length)return[3,2];return[4,a.updateDotReplit(l)];case 1:if(A=o.sent().error)throw Error(A);o.label=2;case 2:return x=null,[4,new Promise(function(e){r.getStatus()!==g.sn.Syncing&&e(!0),x=setInterval(function(){r.getStatus()!==g.sn.Syncing&&e(!0)},1e3)})];case 3:return o.sent(),x&&clearInterval(x),[2]}})})).apply(this,arguments)}},56757:(e,n,t)=>{"use strict";t.d(n,{e:()=>d,q:()=>p});var r=t(12694),i=t(21462),o=t(1230),a=t(54319),l=t(82110),s=t(47630),c=new Set(["planProgressData","agentPlanStepBegin","acknowledgeUserMessage","workflowsGetOutputToolData","presentResultsToolData","deployConfigData"]),u=new Set(["generate_plan","modify_step","verification","scroll_file","open_file"]);function d(){var e=(0,a.NC)(),n=(0,s.J2)(e.sessions.agent.current),t=null==n?void 0:n.agent.state,c=(0,i.useMemo)(function(){var e;return null!=(e=null==n?void 0:n.reduce(p,100))?e:null},[n]);return(0,i.useMemo)(function(){return t&&c?l.cP.combine(t,c).map(function(e){var n=(0,r._)(e,2),t=n[0],i=n[1];return((null==t?void 0:t.state)===o.g32.AGENT_STATE_PAUSED||(null==t?void 0:t.state)===o.g32.AGENT_STATE_UNKNOWN)&&i}):null},[t,c])}var p={direction:"reverse",state:{value:!1},map:function(e){return e.value},reducer:function(e,n){if(e.sender.type===o.utd.USER||e.sender.type!==o.utd.AI)return n.value=!1,!1;var t=e.contents.contents;switch(null==t?void 0:t.$kind){case"rapidBuildConcluded":return;case"agentPlanEventContents":n.value=t.agentPlanEventContents.requiresApproval;break;case"agentAskUserForActionRequest":n.value=!0;break;case"agentTimelineEventContents":var r=t.agentTimelineEventContents.toolData;if(r&&c.has(r.$kind))return;var i=t.agentTimelineEventContents.toolName;if(u.has(i))return;if((null==r?void 0:r.$kind)!=="messageData")break;(r.messageData.agentAction.optionType||["user_response","propose_new_plan"].includes(i))&&(n.value=!0);break;default:n.value=!1}return!1}}},56799:(e,n,t)=>{"use strict";t.d(n,{aK:()=>i,mW:()=>a,md:()=>o,sc:()=>l});var r=t(86846),i=[r.SemanticTokenTypes.namespace,r.SemanticTokenTypes.type,r.SemanticTokenTypes.class,r.SemanticTokenTypes.enum,r.SemanticTokenTypes.interface,r.SemanticTokenTypes.struct,r.SemanticTokenTypes.typeParameter,r.SemanticTokenTypes.parameter,r.SemanticTokenTypes.variable,r.SemanticTokenTypes.property,r.SemanticTokenTypes.enumMember,r.SemanticTokenTypes.event,r.SemanticTokenTypes.function,r.SemanticTokenTypes.method,r.SemanticTokenTypes.macro,r.SemanticTokenTypes.keyword,r.SemanticTokenTypes.modifier,r.SemanticTokenTypes.comment,r.SemanticTokenTypes.string,r.SemanticTokenTypes.number,r.SemanticTokenTypes.regexp,r.SemanticTokenTypes.operator,r.SemanticTokenTypes.decorator,"angle","arithmetic","attribute","attributeBracket","bitwise","boolean","brace","bracket","builtinAttribute","builtinType","character","colon","comma","comparison","constParameter","derive","deriveHelper","dot","escapeSequence","invalidEscapeSequence","formatSpecifier","generic","label","lifetime","logical","macroBang","parenthesis","punctuation","selfKeyword","selfTypeKeyword","semicolon","typeAlias","toolModule","union","unresolvedReference","tomlArrayKey","tomlTableKey"],o=[r.SemanticTokenModifiers.declaration,r.SemanticTokenModifiers.definition,r.SemanticTokenModifiers.readonly,r.SemanticTokenModifiers.static,r.SemanticTokenModifiers.deprecated,r.SemanticTokenModifiers.abstract,r.SemanticTokenModifiers.async,r.SemanticTokenModifiers.modification,r.SemanticTokenModifiers.documentation,r.SemanticTokenModifiers.defaultLibrary,"attribute","callable","constant","consuming","controlFlow","crateRoot","injected","intraDocLink","library","macro","mutable","public","reference","trait","unsafe"];function a(e,n){var t=e.tokenTypes[n];return t&&i.includes(t)?t:null}function l(e,n){for(var t=[],r=0;r<e.tokenModifiers.length;r++)if(n&1<<r){var i=e.tokenModifiers[r];i&&o.includes(i)&&t.push(i)}return t}},56848:(e,n,t)=>{"use strict";t.d(n,{J:()=>u,f:()=>c});var r=t(17844),i=t(88263),o=t(47993),a=t(47526),l=t(79209),s=t(45263),c=t(48521).U3-1;function u(e){var n=e.targetElement,t=e.transparent,u=e.disableAnimation,p=(0,a.my)(n);if(null==p||null==n)return null;var f=(0,l.AH)({backgroundColor:t?"transparent":s.LU.backgroundOverlay,zIndex:c,position:"fixed",transition:u?"all":"all 0.5s ease-out"});return(0,o.createPortal)((0,i.FD)(i.FK,{children:[(0,i.Y)("div",{id:"wat",css:[d((0,r._)({side:"left-top"},p)),f]}),(0,i.Y)("div",{css:[d((0,r._)({side:"top-right"},p)),f]}),(0,i.Y)("div",{css:[d((0,r._)({side:"right-bottom"},p)),f]}),(0,i.Y)("div",{css:[d((0,r._)({side:"bottom-left"},p)),f]})]}),document.body)}function d(e){var n=e.side,t=e.rect,r=e.docWidth,i=e.docHeight;switch(n){case"left-top":return(0,l.AH)({top:0,left:0,width:Math.max(0,t.left),height:Math.max(0,t.bottom)});case"top-right":return(0,l.AH)({top:0,right:0,width:"calc(".concat(r,"px - ").concat(Math.max(0,t.left),"px)"),height:Math.max(0,t.top)});case"right-bottom":return(0,l.AH)({bottom:0,right:0,width:"calc(".concat(r,"px - ").concat(Math.max(0,t.right),"px)"),height:"calc(".concat(i,"px - ").concat(Math.max(0,t.top),"px)")});case"bottom-left":return(0,l.AH)({bottom:0,left:0,width:Math.max(0,t.right),height:"calc(".concat(i,"px - ").concat(Math.max(0,t.bottom),"px)")})}}},57078:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(88263),a=t(71117);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M10.64 2.354A9.75 9.75 0 1 1 2.803 15.25a.75.75 0 0 1 1.414-.498 8.25 8.25 0 1 0 1.937-8.564L2.894 9.25H7a.75.75 0 0 1 0 1.5H1A.75.75 0 0 1 .25 10V4a.75.75 0 0 1 1.5 0v4.266l3.368-3.165a9.75 9.75 0 0 1 5.522-2.747ZM12 6.25a.75.75 0 0 1 .75.75v4.932l3.666 2.444a.75.75 0 1 1-.832 1.248l-4-2.667a.75.75 0 0 1-.334-.624V7a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"})}))}},57179:(e,n,t)=>{"use strict";t.d(n,{X:()=>s});var r=t(12694),i=t(21462),o=t(47993),a=t(76761),l=t(19523);function s(){var e=(0,l.yB)(),n=(0,r._)((0,i.useState)(null),2),t=n[0],s=n[1];return(0,i.useEffect)(function(){var n=function(){(0,o.flushSync)(function(){s(null)})},t=function(e){"created"===e.status?s({id:e.session.id,from:e.session.from,to:e.session.to}):"closed"===e.status&&n()};if(e){var r=e.transport.sessions.get(a.wG);return r&&t({status:"created",session:r}),e.transport.addEventListener("sessionStatus",t),function(){n(),e.transport.removeEventListener("sessionStatus",t)}}},[e]),t}},57727:(e,n,t)=>{"use strict";t.d(n,{Um:()=>f,y3:()=>m,zT:()=>p});var r=t(17844),i=t(12584),o=t(41114),a=t(86997),l=t(60236);function s(){var e=(0,i._)(["\n  fragment OrgGroupsOrg on Org {\n    ...OrgMetadata\n    authorizations {\n      createOrgGroup {\n        isAuthorized\n        message\n      }\n    }\n  }\n  ","\n"]);return s=function(){return e},e}function c(){var e=(0,i._)(["\n  fragment OrgGroupsOrgGroup on OrgGroup {\n    id\n    slug\n    type\n    name\n    color\n    isMember\n    memberCount\n    permissions {\n      editPermissions\n      viewPermissions\n    }\n  }\n"]);return c=function(){return e},e}function u(){var e=(0,i._)(["\n  query OrgGroups($orgId: String, $input: OrgGroupsInput) {\n    currentUser {\n      __typename\n      id\n      org(orgId: $orgId) {\n        __typename\n        ... on Org {\n          id\n          groups(input: $input) {\n            __typename\n            ... on OrgGroupConnection {\n              pageInfo {\n                hasNextPage\n                nextCursor\n              }\n              items {\n                ...OrgGroupsOrgGroup\n              }\n            }\n            ... on UserError {\n              message\n            }\n          }\n        }\n        ... on NotFoundError {\n          message\n        }\n      }\n    }\n  }\n  ","\n"]);return u=function(){return e},e}var d={},p=(0,o.J1)(s(),l.wW),f=(0,o.J1)(c()),h=(0,o.J1)(u(),f);function m(e){var n=(0,r._)({},d,e);return a.I(h,n)}},57949:(e,n,t)=>{"use strict";t.d(n,{N:()=>o,h:()=>i});var r=t(21462),i=50;function o(e){var n=e.usage,t=e.limit,i=e.percentThreshold,o=e.onHitThreshold,a=(0,r.useRef)(void 0);(0,r.useEffect)(function(){if(void 0!==n&&void 0!==t){var e=n/t*100;void 0!==a.current&&a.current/t*100<i&&e>=i&&o(),a.current=n}},[n,t,i,o])}},58018:e=>{e.exports={dialog:"AgentPlanningDialogs_dialog__EgeW2",option:"AgentPlanningDialogs_option__zRpv_",statusText:"AgentPlanningDialogs_statusText__mbRU_",statusTextThinking:"AgentPlanningDialogs_statusTextThinking__Bdq_g"}},58162:(e,n,t)=>{"use strict";t.d(n,{A:()=>v});var r=t(12694),i=t(21462),o=t(5025),a=t(31062),l=t(17844),s=t(93629),c=t(64678),u=t.n(c),d=t(34626),p=t(83744);function f(e){return Math.floor(performance.now()-e.startTime)}var h=new WeakSet,m=t(34834),g=t(45708);function v(e){var n=(0,a.A)(),t=(0,m.A)().lspnix,c=(0,r._)((0,i.useState)([]),2),v=c[0],w=c[1],y=(0,g.i)();return(0,i.useEffect)(function(){if(e){var n=t.onClient(e,w);return function(){n(),w([])}}},[t,e]),(0,i.useEffect)(function(){return(0,o.xW)(v.map(function(t){return function(e){var n=e.client,t=e.replId,r=e.language,i=e.debug;if(!h.has(n)){h.add(n);var a=new Map,c=function(e){var i,o=n.getServerState(),a=null!=(i=n.getServerInfo())?i:{name:"unknown",version:"none"},l=o===p.b.INITIALIZED?"".concat(null==a?void 0:a.name,"@").concat(null==a?void 0:a.version):"not_ready: server is ".concat(o);return{method:e.method,replid:t,language:r,startTime:Math.floor(e.startTime),languageServerInfo:l,lspId:n.clientId}},m=u()(function(e,n){var t=f(n);t>1e4&&d.vF.time("LSP unresponsive request",t,c(n))}),g=setInterval(function(){a.forEach(function(e){m(e.id,e)})},2e3);return(0,o.xW)([n.onRequest(function(e){var n=e.id,t=e.data;(i||.01>Math.random())&&a.set(n,{id:n,method:t.method,startTime:performance.now()})}),n.onResponse(function(e){var n=e.id,t=e.error,r=a.get(n);null!=r&&(a.delete(n),d.vF.time("LSP request",f(r),(0,s._)((0,l._)({},c(r)),{result:null==t?"ok":"error"})))}),n.onCancelRequest(function(e){var n=a.get(e);null!=n&&(a.delete(e),d.vF.time("LSP request",f(n),(0,s._)((0,l._)({},c(n)),{result:"cancelled"})))}),function(){return clearInterval(g)},function(){return h.delete(n)}])}}({client:t,replId:n,language:t.getLanguageId(e),debug:y})}))},[v,n,e,y]),v}},58746:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(88263),a=t(71117);function l(e){return(0,o.FD)(a.Ay,(0,i._)((0,r._)({},e),{children:[(0,o.Y)("path",{d:"M21.25 12a9.25 9.25 0 1 0-18.5 0 9.25 9.25 0 0 0 18.5 0Zm1.5 0c0 5.937-4.813 10.75-10.75 10.75S1.25 17.937 1.25 12 6.063 1.25 12 1.25 22.75 6.063 22.75 12Z"}),(0,o.Y)("path",{d:"M15.495 8.945a.75.75 0 0 1 1.01 1.11l-5.5 5a.751.751 0 0 1-1.01 0l-2.5-2.273a.75.75 0 0 1 1.01-1.11l1.995 1.813 4.995-4.54Z"})]}))}},58809:(e,n,t)=>{"use strict";t.d(n,{V:()=>a});var r=t(21462),i=t(33781),o=t(10076);function a(){var e=(0,i.D)().values;return(0,r.useMemo)(function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.T5.values;return{foreground:e.global.foregroundDefault,background:e.global.backgroundDefault,cursor:e.global.foregroundDefault,cursorAccent:e.global.backgroundHigher,selectionBackground:e.global.foregroundDefault,black:e.global.backgroundRoot,red:e.global.redStronger,green:e.global.accentPositiveDefault,yellow:e.global.yellowDefault,blue:e.global.blueStronger,magenta:e.global.magentaDefault,cyan:e.global.tealDefault,white:e.global.foregroundDefault,brightBlack:e.global.outlineDimmest,brightRed:e.global.redStrongest,brightGreen:e.global.accentPositiveStronger,brightYellow:e.global.yellowStronger,brightBlue:e.global.blueStrongest,brightMagenta:e.global.magentaStronger,brightCyan:e.global.tealStronger,brightWhite:e.global.foregroundDefault}}(e)},[e])}},58912:(e,n,t)=>{"use strict";t.d(n,{DB:()=>m,Ay:()=>v,mS:()=>g});var r=t(17844),i=t(12584),o=t(41114),a=t(86997);function l(){var e=(0,i._)(["\n  fragment CompleteCodeAuthorization on OrgAuthorizations {\n    useAdvancedModel: useAiModel(model: advanced) {\n      isAuthorized\n    }\n  }\n"]);return l=function(){return e},e}function s(){var e=(0,i._)(['\n  query CompleteCode($orgId: String) {\n    currentUser {\n      id\n      hasKillswitch: gate(feature: "flag-killswitch-ghostwriter")\n      personalOrgAuthorizations {\n        ... on OrgAuthorizations {\n          ...CompleteCodeAuthorization\n        }\n      }\n      org(orgId: $orgId) {\n        ... on Org {\n          id\n          authorizations {\n            ...CompleteCodeAuthorization\n          }\n        }\n        ... on Error {\n          message\n        }\n      }\n    }\n  }\n  ',"\n"]);return s=function(){return e},e}var c={},u=(0,o.J1)(l()),d=(0,o.J1)(s(),u),p=t(68912),f=t(5793),h=t(31062),m=function(e){return e.None="None",e.Basic="Basic",e.Pro="Pro",e.BackendOnly="BackendOnly",e}({});function g(e){return"None"!==e&&"BackendOnly"!==e}function v(){var e,n,t,i,o,l,s=(0,h.A)(),u=(0,f.R)(s),m=u.orgId,g=u.loading,v=(e={variables:{orgId:m},skip:g},n=(0,r._)({},c,e),a.I(d,n)),w=v.data,y=v.loading,b=(0,p.f)().isTeamWithAiDisabled,S=null==w?void 0:w.currentUser;return!S||S.hasKillswitch||b||y||g?"None":m?(null==(t=w.currentUser)?void 0:t.org.__typename)==="Org"&&(null==(i=w.currentUser)?void 0:i.org.authorizations.useAdvancedModel.isAuthorized)?"Pro":"Basic":(null==(o=w.currentUser)?void 0:o.personalOrgAuthorizations.__typename)==="OrgAuthorizations"&&(null==(l=w.currentUser)?void 0:l.personalOrgAuthorizations.useAdvancedModel.isAuthorized)?"Pro":"Basic"}},58937:(e,n,t)=>{"use strict";t.d(n,{A:()=>_});var r=t(12694),i=t(86105),o=t(88263),a=t(21462),l=t(44114),s=t(53231),c=t(9758),u=t(64583),d=t(48521),p=t(14886),f=t(69938),h=t(38292),m=t(36112),g=t(76126),v=t(59172),w=t(10429),y=t(3694),b=t(62362),S=t(80762),Y=t(29064),A=(0,u.x)({module:[d.wp.borderRadius(4),d.wp.width("100%"),d.wp.overflow("hidden")],submoduleName:[d.wp.truncate,d.wp.mx(8),d.wp.flex.growAndShrink(1)],moduleHeader:[d.wp.flex.growAndShrink(1)],moduleActions:[d.wp.center],divider:[d.wp.backgroundColor.outlineDimmer]});function x(e){var n=e.isModifying,t=e.isInstalled,r=e.onInstallClick,i=e.onRemoveClick,a=e.module;if(n)return(0,o.Y)(h.K0,{alt:"Updating module",tooltipBehavior:"hidden",children:(0,o.Y)(S.A,{})});if(t){var l="replit"===a.id;return(0,o.Y)(h.K0,{alt:l?"The base module can't be removed":"Remove module",disabled:l,onClick:i,children:(0,o.Y)(Y.A,{})})}return(0,o.Y)(h.K0,{alt:"Add module",onClick:r,children:(0,o.Y)(y.A,{})})}function C(e){var n=e.module,t=e.isInstalled,i=(0,l.G)(),c=i.addModule,u=i.removeModule,d=(0,r._)((0,a.useState)(!1),2),p=d[0],f=d[1];return(0,a.useEffect)(function(){f(!1)},[t]),(0,o.FD)(w.S,{css:A.moduleHeader,row:!0,justify:"space-between",children:[(0,o.FD)(w.S,{row:!0,gap:12,children:[(0,o.Y)(g.EY,{children:n.name}),n.displayVersion?(0,o.Y)(g.EY,{color:"dimmer",children:n.displayVersion}):null]}),(0,o.FD)(w.S,{css:A.moduleActions,row:!0,gap:4,children:[n.description?(0,o.Y)(v.m_,{tooltip:n.description,children:(0,o.Y)(b.A,{})}):null,(0,o.Y)(x,{module:n,isInstalled:t,isModifying:p,onInstallClick:function(){f(!0),c(n.id),(0,s.u4)(s.AZ.NIX_MODULE_ADDED,{moduleId:n.id})},onRemoveClick:function(){f(!0),u(n.id),(0,s.u4)(s.AZ.NIX_MODULE_REMOVED,{moduleId:n.id})}})]})]})}function _(e){var n=e.module,t=e.defaultExpanded,r=e.isInstalled,a=(0,i._)(n.runners).concat((0,i._)(n.packagers),(0,i._)(n.formatters),(0,i._)(n.languageServers));return(0,o.Y)(m.ui,{elevated:!0,css:A.module,children:(0,o.FD)(p.A,{round:!1,defaultExpanded:t,headerContent:(0,o.Y)(C,{module:n,isInstalled:r}),children:[a.length>0?(0,o.Y)(f.a,{css:A.divider}):null,a.map(function(e){return(0,o.FD)(w.S,{p:4,row:!0,align:"center",children:[(0,o.Y)(c.A,{module:e}),(0,o.Y)(g.EY,{css:A.submoduleName,children:e.name}),e.displayVersion?(0,o.Y)(g.EY,{color:"dimmer",children:e.displayVersion}):null]},e.id)})]})})}},59851:(e,n,t)=>{"use strict";t.d(n,{Q:()=>i});var r=t(90629);function i(e){var n=e.error,t=e.context,i=e.extras,o=e.isDeploymentsPane,a=void 0===o||o;return r.v4(function(e){e.setTag("deployments-pane",a),e.setTag("context",t),i&&e.setExtras(i),r.Cp(n)}),n}},59912:e=>{e.exports={collapseButton:"Session_collapseButton__5V5dq",growShrink:"Session_growShrink__qOVLb",sessionGroup:"Session_sessionGroup__xIdEJ",futureCheckpoint:"Session_futureCheckpoint__xkvj3"}},60152:(e,n,t)=>{"use strict";t.d(n,{Tu:()=>I,tL:()=>O,Ai:()=>E,RY:()=>U,KO:()=>N,nW:()=>L,Uz:()=>S,b7:()=>M,wm:()=>y,Hi:()=>F,yr:()=>B,$6:()=>P,Uo:()=>b,PI:()=>Y,if:()=>eY,MO:()=>eU,gM:()=>eh,_f:()=>$,Je:()=>et,PY:()=>eN,Ge:()=>eF,J4:()=>eg,oh:()=>ep,d9:()=>k,b:()=>eI,f6:()=>q,IT:()=>ew,mg:()=>z});var r=t(29935),i=t(17844),o=t(12694),a=t(82643),l=t(21462),s=t(35992),c=t(44370),u=t(68820),d=t(93369),p=t(29383),f=t(96556),h=t(86105);function m(e,n){for(var t=e.indexPath,r=n.indexPath,i=Math.min(t.length,r.length),o=0;o<i;o++){if(t[o]>r[o])return 1;if(t[o]<r[o])return -1}return t.length-r.length}var g=t(55074),v=t(55275),w=function(e){return"item-"+e},y=(0,c.eU)(0),b=(0,c.eU)(0),S=(0,c.eU)(0),Y=(0,c.eU)(function(e){return e(y)+e(b)+e(S)}),A=(0,c.eU)({path:[],rows:[],items:[],placeholder:"",isLoading:!1}),x=(0,c.eU)(!0);function C(){return(0,v.h)(x)}var _=(0,c.eU)(!1);function k(){return(0,v.h)(_)}var D=(0,c.eU)(null),E=(0,c.eU)({}),R=(0,u.mg)(E,function(e){return!!e.openOnInput}),I=(0,u.mg)(E,function(e){return!!e.autoFocus}),F=(0,u.mg)(E,function(e){return e.keyboardShortcut}),T=(0,u.mg)(E,function(e){return e.command}),P=(0,u.mg)(E,function(e){return e.overscan}),L=(0,u.mg)(E,function(e){return e.footer}),U=(0,u.mg)(E,function(e){return e.focusRef}),N=(0,u.mg)(E,function(e){return e.compact?12:14}),O=(0,u.mg)(E,function(e){return!!e.compact}),M=(0,u.mg)(E,function(e){return!!e.fullWidth}),B=(0,u.mg)(E,function(e){return void 0!==e.minItemHeight?e.minItemHeight:e.compact?28:32}),H=(0,u.mg)(E,function(e){var n;return null!=(n=e.showToolDescriptions)&&n});function z(){return(0,v.h)(H)}var W=(0,c.eU)(function(e){return!e(R)}),G=(0,u.mg)(E,function(e){return!!e.compact}),V=(0,c.eU)(null),j=(0,c.eU)(function(e){return e(ee)>-1}),Z=(0,c.eU)(function(e){var n=e(A);return!n.isLoading&&0===n.rows.length});function q(){return(0,v.AI)(Z)}var K=(0,c.eU)({label:"",input:"",menu:""});function $(){return(0,v.h)(K)}var J=(0,c.eU)(""),Q=(0,c.eU)(""),X=(0,c.eU)(""),ee=(0,c.eU)(-1),en=(0,c.eU)(function(e){var n=e(ee);return e(er).findIndex(function(e){return"item"===e.type&&e.index===n})});function et(){return(0,v.h)(en)}var er=(0,c.eU)(function(e){return e(A).rows}),ei=(0,c.eU)(function(e){return e(A).items}),eo=(0,c.eU)(function(e){return e(ei).length}),ea=(0,c.eU)(function(e){return e(ey).filter(function(e){return"context"===e.data.type&&!!e.match})}),el=(0,c.eU)(function(e){return e(ea).length>0}),es=(0,c.eU)(!1),ec=(0,c.eU)(null,function(e,n){var t,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n(es,!0);var i=e(E).command,o=Array.isArray(i)?[i[0]]:[i];n(A,function(e){return(0,s.jM)(e,function(e){e.path=o})}),e(eP).setPath(e(ey)),n(ee,-1),n(J,""),n(Q,""),n(X,""),e(R)&&n(x,!1),r.focus&&(null==(t=e(eD))||t.focus())}),eu=(0,c.eU)(function(e){return e(A).placeholder}),ed=(0,c.eU)(function(e){return e(A).isLoading});function ep(){return(0,v.h)(ed)}var ef=(0,c.eU)(function(e){return e(A).path.length});function eh(){return(0,v.h)(ef)}var em=(0,c.eU)(function(e){return e(el)||!!e(J)});function eg(){return(0,v.h)(em)}var ev=(0,c.eU)(null,function(){var e=(0,r._)(function(e,n,t,r){var i,o,l,s,c,u;function d(t){var r;n(eC,null!=t?t:"Something went wrong"),null==(r=e(eD))||r.focus()}return(0,a.YH)(this,function(a){switch(a.label){case 0:if("group"===t.data.type)return[2];if(n(V,t),o=e(E),"context"===t.data.type)return n(ek,s=t.path),n(ee,-1),e(eP).setPath(s),null==(l=e(eD))||l.focus(),[2];switch(t.data.type){case"output":case"error":return n(ec),null==(c=o.onSelect)||c.call(o,t),[2]}n(_,!0),u=null,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,Promise.resolve(t.data.run(r.nativeEvent))];case 2:return u=a.sent(),[3,4];case 3:return a.sent(),n(_,!1),d(),[2];case 4:if(n(_,!1),(null==u?void 0:u.type)==="error")return d(u.message),[2];return n(ec),null==(i=o.onAction)||i.call(o),[2]}})});return function(n,t,r,i){return e.apply(this,arguments)}}());function ew(e){var n=(0,v.ob)(ev),t=(0,l.useMemo)(function(){return(0,u.mg)(er,function(n){return n[e]})},[e]),r=(0,v.h)(t),i="item"===r.type?r.index:null,o=(0,l.useMemo)(function(){return(0,c.eU)(function(e){return null!==i&&e(ee)===i})},[i]),a=(0,v.h)(o),s=(null==r?void 0:r.type)==="item"?function(e){return n(r.item,e)}:void 0,d="item"===r.type?{id:w(e),role:"option","aria-selected":a}:void 0;return{row:r,active:a,onClick:s,ariaAttrs:d}}var ey=(0,c.eU)(function(e){return e(A).path}),eb=(0,c.eU)(function(e){return 1===e(ey).length}),eS=(0,c.eU)(null,function(e,n,t){var r=e(ey),i=r.indexOf(t);-1!==i&&(r=r.slice(0,i+1),n(ee,0),e(eP).setPath(r),n(J,""))});function eY(){return{iconOnly:(0,v.h)(G),breadcrumbs:(0,v.h)(ea),onClick:(0,v.ob)(eS)}}function eA(e,n){return n.match.score-e.match.score}var ex=(0,c.eU)(null,function(e,n,t){var r;if(e(X)===e(X)){var i=t.items.sort(eA),o=t.path.length?t.path[t.path.length-1]:null,a=(0,g.k)(i),l=a.items,s=a.rows,c=null!=(r=null==o?void 0:o.data)?r:null,u=null==c?void 0:c.description;e(G)&&(null==c?void 0:c.type)!=="group"&&(u=null==c?void 0:c.label),n(A,function(e){return{items:l,rows:s,isLoading:!!t.partial,path:t.path,placeholder:u||e.placeholder}}),s.length&&-1===e(ee)&&n(ee,0)}}),eC=(0,c.eU)(null,function(e,n,t){n(D,t),n(A,function(e){return{items:[],rows:[],isLoading:!1,path:e.path,placeholder:e.placeholder}})}),e_=(0,c.eU)(null,function(e,n,t){n(J,t),n(ee,t?0:-1),n(D,null),n(A,function(e){return(0,s.jM)(e,function(e){e.isLoading=!!t})}),e(R)&&n(x,!!t)}),ek=(0,c.eU)(null,function(e,n,t){n(A,function(e){return(0,s.jM)(e,function(e){e.items=[],e.rows=[],e.path=t})}),n(e_,""),n(Q,""),n(X,"")}),eD=(0,c.eU)(null),eE=(0,c.eU)(null,function(e,n,t){var r=e(ee);if(!(r<0)){var i=e(ei)[r];i&&n(ev,i,t)}}),eR=(0,c.eU)(null,function(e,n,t){var r=e(x),i=e(eo),o=e(ee);switch(t.key){case"ArrowDown":t.preventDefault();var a=o+1;n(ee,a<i?a:0),n(x,!0);return;case"ArrowUp":t.preventDefault(),n(ee,Math.max(-1,o-1));return;case"Home":t.preventDefault(),t.shiftKey?t.currentTarget.selectionStart=0:t.currentTarget.setSelectionRange(0,0);return;case"End":t.preventDefault();var l=t.currentTarget.value.length;t.shiftKey?t.currentTarget.selectionEnd=l:t.currentTarget.setSelectionRange(l,l);return;case"Escape":if(!e(J)||(t.preventDefault(),n(e_,""),n(Q,""),e(W)))return;n(x,!1);return;case"Enter":if(!r)return;t.preventDefault(),n(eE,t);return;case"PageUp":case"PageDown":if(!r)return;t.preventDefault();var s="PageUp"===t.key?-10:10;n(ee,function(e){return Math.max(Math.min(e+s,i-1),0)});return}});function eI(){var e=(0,v.h)(er),n=C(),t=(0,l.useRef)(null),r=eh(),i=(0,v.h)(K);return{rows:e,isOpen:n,scrollRef:t,currentPathIndex:r,ariaAttrs:{id:i.menu,"aria-labelledby":i.label,role:"listbox"}}}function eF(){var e,n,t,r,i=(0,v.ob)(eD),a=(0,v.h)(eu),s=(0,o._)((e=(0,v.h)(J),n=(0,v.ob)(e_),t=(0,v.ob)(Q),r=(0,o._)((0,l.useTransition)(),2)[1],[e,(0,l.useCallback)(function(e){var i="string"==typeof e?e:e.currentTarget.value;n(i),r(function(){return t(i)})},[n,r,t])]),2),c=s[0],u=s[1],d=(0,v.ob)(ee),p=(0,v.h)(ee),f=(0,v.h)(K),h=C();return{onBlur:function(){return d(-1)},onChange:u,placeholder:a,value:c,ref:i,disabled:k(),ariaAttrs:{id:f.input,role:"combobox",autoComplete:"off","aria-autocomplete":"list","aria-activedescendant":p>-1?w(p):"","aria-controls":f.menu,"aria-expanded":h,"aria-labelledby":f.label}}}var eT=(0,c.eU)(null,function(e,n,t){var r=Array.isArray(t)?t:[t];e(es)&&(r=[r[0]]);var i=e(Q);n(X,i),e(eP).setPath(r,i)}),eP=(0,c.eU)({}),eL=(0,c.eU)(null,function(e,n){var t=e(ey),r=e(ea);if(r.pop()){var i=r.pop();if(!i)return void n(ec);var o=t.indexOf(i);t=t.slice(0,o+1),n(ee,0),n(ek,t),e(eP).setPath(t)}});function eU(){var e,n,t,r,i,o,a,s=C(),c=(0,v.h)(em),u=(0,v.h)(J),f=(0,v.h)(Z),h=k(),m=(0,v.h)(D),g=(0,v.ob)(eR),w=(0,v.h)(j),y=(0,v.ob)(ec),b=(0,v.Ou)(eD);e=(0,v.h)(eP),n=(0,v.h)(T),t=(0,v.AI)(eb),r=(0,v.AI)(Q),i=(0,v.ob)(X),o=(0,v.ob)(eT),a=(0,d.A)(n),(0,l.useEffect)(function(){t.current&&o(n)},[e,t,n,r,o]),(0,l.useEffect)(function(){return t.subscribe(function(e){e&&o(a.current)})},[e,r,t,o,a]),(0,l.useEffect)(function(){var n=function(n){i(n),e.search(n)};return n(r.current),r.subscribe(n)},[e,r,t,i,a]);var S=(0,p.A)(function(){return function(){var e;return null==(e=b())?void 0:e.focus()}},[b]),Y=(0,v.ob)(eL);return{focus:S,onKeyDown:(0,p.A)(function(){return function(e){return"Backspace"!==e.key||e.currentTarget.value?g(e):void Y()}},[g,Y]),inputValue:u,isOpen:s,isClearable:c,noResults:f,hasHighlightedItem:w,isRunning:h,actionError:m,clearCommands:y}}function eN(e){var n=(0,f.c)(),t={label:n("label"),input:n("input"),menu:n("menu")},r=(0,o._)((0,l.useState)(function(){var n,r,o=(0,c.y$)();o.set(K,t),o.set(E,e),o.set(x,!e.openOnInput),o.set(eP,function(e){var n=e.initialPath,t=e.partialUpdateTimeout,r=e.onUpdate,i=n,o=null,a=0;function l(e){o&&clearTimeout(o);var n=++a,l=0,s=[],c=i[i.length-1];if(!c.commands)return void r({items:s,path:i});void 0!==t&&(o=setTimeout(function(){s.length&&r({items:(0,h._)(s).sort(m),partial:!0,path:i})},t)),!function t(c,u,d){if(l++,!c.commands)throw Error("Expected commands");var p=(0,h._)(u).concat([c]),f=p.length===i.length;Promise.resolve(c.commands({active:f,searchQuery:e,path:p})).then(function(c){if(n!==a){o&&clearTimeout(o);return}l--,c.forEach(function(n,r){var i=(0,h._)(p).concat([n]),o=(0,h._)(d).concat([r]),a=n.match?n.match({searchQuery:e,data:n.data,path:i,active:f}):null;a&&s.push({path:i,data:n.data,match:a,indexPath:o}),n.commands&&t(n,p,o)}),l>0||(o&&clearTimeout(o),r({items:(0,h._)(s).sort(m),path:i}))})}(c,i.slice(0,i.length-1),[])}return{search:l,setPath:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";i=e,l(n)},getPath:function(){return i}}}({initialPath:Array.isArray(e.command)?e.command:[e.command],partialUpdateTimeout:100,onUpdate:function(e){return o.set(ex,(0,i._)({},e))}}));var a=Array.isArray(e.command)?e.command[0]:e.command,l=null!=(r=null==a||null==(n=a.data)?void 0:n.description)?r:null;return l&&o.set(A,function(e){return(0,s.jM)(e,function(e){e.placeholder=l})}),o}),1)[0];return(0,l.useEffect)(function(){r.set(E,e)},[r,e]),r}},60186:(e,n,t)=>{"use strict";t.d(n,{A:()=>a});var r=t(88263),i=t(21462),o=t(27903);function a(e){var n=e.json,t=(0,i.useMemo)(function(){return JSON.stringify(n,null,2)},[n]);return(0,r.Y)(o.A,{language:"json",code:t})}},60236:(e,n,t)=>{"use strict";t.d(n,{rh:()=>s,wW:()=>c});var r=t(12584),i=t(41114);function o(){var e=(0,r._)(["\n  fragment OrgCurrentUser on CurrentUser {\n    id\n    displayName\n    username\n  }\n"]);return o=function(){return e},e}function a(){var e=(0,r._)(["\n  fragment OrgMetadata on Org {\n    id\n    slug\n    type\n    name\n    image\n  }\n"]);return a=function(){return e},e}function l(){var e=(0,r._)(["\n  query OrgMetadata($orgId: String!) {\n    currentUser {\n      __typename\n      ...OrgCurrentUser\n      org(orgId: $orgId) {\n        __typename\n        ... on Org {\n          ...OrgMetadata\n        }\n        ... on NotFoundError {\n          message\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return l=function(){return e},e}var s=(0,i.J1)(o()),c=(0,i.J1)(a());l()},60423:(e,n,t)=>{"use strict";t.d(n,{A:()=>w});var r=t(46434),i=t(29935),o=t(12694),a=t(82643),l=t(88263),s=t(21462),c=t(31628),u=t(74093),d=t(16679),p=t(58809),f=t(64583),h=t(48521),m=t(10429),g=t(64254).hp,v=(0,f.x)({terminalWrapper:[h.wp.overflow("hidden"),{"& .xterm":[h.wp.borderRadius(0,0,4,4)]}]});function w(e){var n,t=e.processId,f=e.openPane,h=e.maxHeight,w=e.interactive,y=void 0!==w&&w,b=(0,c.T)(),S=(0,s.useId)(),Y=(0,p.V)(),A=(0,d.Ui)({maxHeight:h,openPane:f}),x=A.visibleHeight,C=A.bufferHeight,_=A.wrapperResizeRef,k=A.xterm,D=A.xtermRef,E=(0,o._)((0,s.useState)(null),2),R=E[0],I=E[1],F=(0,s.useCallback)(function(e){return I(function(){return e}),function(){}},[]);return(0,u.b)((n=(0,i._)(function(e,n){var o,l,s,c,u,d,p,f,h,m,v,w,Y,A;return(0,a.YH)(this,function(x){switch(x.label){case 0:var C;if(o=n.signal,!b||!R||!k)return[2];s=(l=e.shellExec.connect.stream({id:t,userId:b,processViewId:S},{signal:o})).resReadable,c=l.reqWritable,u=function(e){y&&c.write({$kind:"stdin",stdin:new Uint8Array(g.from(e))})},d=k.onResize((C=(0,i._)(function(n){return(0,a.YH)(this,function(r){switch(r.label){case 0:return[4,e.shellExec.resize.rpc({id:t,userId:b,processViewId:S,size:n})];case 1:return r.sent(),[2]}})}),function(e){return C.apply(this,arguments)})),p=k.onData(u),f=!1,h=!1,x.label=1;case 1:x.trys.push([1,6,7,12]),v=(0,r._)(s),x.label=2;case 2:return[4,v.next()];case 3:if(!(f=!(w=x.sent()).done))return[3,5];if(!(Y=w.value).ok){if("UNEXPECTED_DISCONNECT"===Y.payload.code||"CANCEL"===Y.payload.code||"NO_PROCESS_MATCHING_ID"===Y.payload.code||"PROCESS_IS_NOT_RUNNING"===Y.payload.code)return[3,5];throw Error("[".concat(Y.payload.code,"]: ").concat(Y.payload.message))}"output"===Y.payload.$kind&&R(Y.payload.output),x.label=4;case 4:return f=!1,[3,2];case 5:return[3,12];case 6:return A=x.sent(),h=!0,m=A,[3,12];case 7:if(x.trys.push([7,,10,11]),!(f&&null!=v.return))return[3,9];return[4,v.return()];case 8:x.sent(),x.label=9;case 9:return[3,11];case 10:if(h)throw m;return[7];case 11:return[7];case 12:return[2,function(){d.dispose(),p.dispose()}]}})}),function(e,t){return n.apply(this,arguments)}),[b,y,R,t,S,k]),(0,l.Y)(m.S,{css:v.terminalWrapper,style:{height:x,background:null==Y?void 0:Y.background},children:(0,l.Y)(d._x,{xterm:k,wrapperResizeRef:_,bufferHeight:C,setOnMessage:F,children:(0,l.Y)(d.DJ,{xtermRef:D,visibleHeight:x,maxHeight:h})})})}},60555:(e,n,t)=>{"use strict";t.d(n,{AN:()=>g,Ed:()=>v,u0:()=>w});var r=t(88263),i=t(21462),o=t(54319),a=t(47630),l=t(45263),s=t(64583),c=t(973),u=t(48521),d=t(36112),p=t(76126),f=t(9969),h=t(10429),m=(0,s.x)({sessions:[u.wp.overflowY("auto"),u.wp.flex.growAndShrink(1)],item:[u.wp.reset.button,c.b.nofill,u.wp.py(4),u.wp.px(6),u.wp.colWithGap(2),{textAlign:"left"}]});function g(e){var n=(0,o.NC)(),t=(0,a.J2)(n.sessions.agent.all.list);return(0,r.FD)(h.S,{css:m.sessions,gap:2,children:[e.sessionId?null:(0,r.Y)(w,{onClick:function(){return e.onNewSession()}}),null==t?void 0:t.map(function(n){return(0,r.Y)(v,{onClick:function(){return e.onSessionClick(n)},session:n,selected:n.id===e.sessionId},n.id)})]})}function v(e){var n=e.session,t=(0,a.Rj)(function(){return n.data.select(function(e){return{title:e.title,updated:e.updated}})},[n]);return t?(0,r.FD)(d.ui,{tag:"button",elevated:e.selected,css:m.item,onClick:e.onClick,style:e.selected?{backgroundColor:l.LU.surfaceBackground}:void 0,children:[(0,r.Y)(p.EY,{multiline:!1,children:t.title||"Thinking"}),(0,r.Y)(f.Dc,{textColor:"dimmest",textVariant:"small",date:t.updated,live:!0})]}):null}function w(e){var n=e.onClick,t=(0,i.useRef)(Date.now());return(0,r.FD)(d.ui,{elevated:!0,tag:"button",css:m.item,onClick:n,children:[(0,r.Y)(p.EY,{color:"dimmer",children:"New chat"}),(0,r.Y)(f.Dc,{textColor:"dimmest",textVariant:"small",date:t.current,live:!0})]})}},60632:(e,n,t)=>{"use strict";t.d(n,{Jn:()=>a.Jn,LH:()=>l.LH,SJ:()=>a.SJ,_y:()=>l._y,jM:()=>s});var r=t(88263),i=t(21462),o=t(24365),a=t(29531),l=t(26987);function s(e){var n=(0,a.PY)(e);return(0,r.FD)(a.J_.Provider,{value:n,children:[e.children,(0,r.Y)(c,{})]})}function c(){var e=(0,a.bU)(),n=(0,i.useRef)(null);return(0,i.useEffect)(function(){var t=function(t){var r=(0,o.te)(t);if(r){var i=r;n.current&&(i=(0,o.Y)(n.current,r));var l=e(i);switch(l.kind){case a.VO.NoMatch:n.current=null;break;case a.VO.WaitingForChord:n.current=l.key,t.preventDefault();break;case a.VO.MatchFound:n.current=null;var s=!0,c=!1,u=void 0;try{for(var d,p=l.matches[Symbol.iterator]();!(s=(d=p.next()).done);s=!0){var f=d.value,h=f.run,m=f.bubble,g=void 0===m||m;if(!1!==h()&&(t.preventDefault(),!g))break}}catch(e){c=!0,u=e}finally{try{s||null==p.return||p.return()}finally{if(c)throw u}}}}};return document.addEventListener("keydown",t),function(){document.removeEventListener("keydown",t)}},[e]),null}},60652:(e,n,t)=>{"use strict";t.d(n,{A:()=>c});var r=t(29935),i=t(82643),o=t(83150),a=t(52340),l=/\(copy\)( \d+)?$/,s=/\d+$/;function c(e,n){return u.apply(this,arguments)}function u(){return(u=(0,r._)(function(e,n){var t,r,c,u,d,p;return(0,i.YH)(this,function(i){switch(i.label){case 0:return t=(0,o._6)(e),[4,n.readDir(0===t.length?a.Dl:t)];case 1:if((r=i.sent()).error)throw r.error;return c=new Set(r.children.map(function(e){return e.filename})),u=function(e,n){var t=(0,o.an)(e),r=(0,o.J)(e);if(!r&&e.startsWith(".")){var i=e.lastIndexOf(".");r=i>0?e.slice(0,i):e}for(var a=l.test(r)?e:"".concat(r," (copy)").concat(t.length>0?".".concat(t):""),c=1;c<=n.size&&n.has(a);c++){var u=(0,o.J)(a),d=u.split(" ");s.test(u)&&d.pop(),a="".concat(d.join(" ")," ").concat(c),t.length>0&&(a+=".".concat(t))}return a}((0,o.WP)(e),c),d=t?"".concat(t,"/").concat(u):u,[4,n.copyFile(e,d)];case 2:if((p=i.sent()).error)throw p.error;return[2,d]}})})).apply(this,arguments)}},60930:(e,n,t)=>{"use strict";t.d(n,{q:()=>r});var r=t(49069).sj.define({combine:function(e){var n=e.filter(Boolean);return{onDismiss:function(e){return n.forEach(function(n){var t;return null==(t=n.onDismiss)?void 0:t.call(n,e)})},onRequestIgnoredBackendOnly:function(e){return n.forEach(function(n){var t;return null==(t=n.onRequestIgnoredBackendOnly)?void 0:t.call(n,e)})},onRequestFirstEmit:function(e){return n.forEach(function(n){var t;return null==(t=n.onRequestFirstEmit)?void 0:t.call(n,e)})},onRequestEndedWithNoSuggestion:function(e){return n.forEach(function(n){var t;return null==(t=n.onRequestEndedWithNoSuggestion)?void 0:t.call(n,e)})},onRequestCompletelyPresented:function(e){return n.forEach(function(n){var t;return null==(t=n.onRequestCompletelyPresented)?void 0:t.call(n,e)})},onSuggestionExplicitlyDismissed:function(e,t){return n.forEach(function(n){var r;return null==(r=n.onSuggestionExplicitlyDismissed)?void 0:r.call(n,e,t)})},onSuggestionAccepted:function(e,t){return n.forEach(function(n){var r;return null==(r=n.onSuggestionAccepted)?void 0:r.call(n,e,t)})}}}})},61005:(e,n,t)=>{"use strict";t.d(n,{oR:()=>y,HG:()=>b,s_:()=>S,Ju:()=>Y});var r=t(12694),i=t(21462),o=t(17844),a=t(12584),l=t(41114),s=t(86997),c=t(50175);function u(){var e=(0,a._)(["\n  query ReplConfigIsExtension($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        config {\n          isExtension\n        }\n      }\n    }\n  }\n"]);return u=function(){return e},e}function d(){var e=(0,a._)(["\n  mutation UpdateReplConfigIsExtension(\n    $replId: String!\n    $isExtension: Boolean!\n  ) {\n    updateRepl(input: { id: $replId, isExtension: $isExtension }) {\n      repl {\n        id\n        config {\n          isExtension\n        }\n      }\n    }\n  }\n"]);return d=function(){return e},e}var p={},f=(0,l.J1)(u()),h=(0,l.J1)(d()),m=t(93772),g=t(31062),v=t(34834),w=t(51472);function y(){var e,n=(0,i.useContext)(w.A),t=(0,r._)((0,i.useState)(null!=(e=null==n?void 0:n.replConfigIsExtension)&&e),2),o=t[0],a=t[1],l=(0,v.A)().dotReplit;return(0,i.useEffect)(function(){return l.watch(function(e){var n,t,r;a(null!=(r=null==(t=e.config)||null==(n=t.extension)?void 0:n.isExtension)&&r)})},[l]),o}function b(){var e=(0,r._)((0,i.useState)(null),2),n=e[0],t=e[1],o=(0,v.A)().dotReplit;return(0,i.useEffect)(function(){return o.watch(function(e){var n,r,i=null==(r=e.config)||null==(n=r.extension)?void 0:n.extensionID;i?t((0,m.PM)(i)):t(null)})},[o]),n}var S=function(){var e=(0,v.A)().dotReplit,n=(0,r._)((0,i.useState)(null),2),t=n[0],o=n[1];return(0,i.useEffect)(function(){return e.watch(function(e){var n,t,r=null==(t=e.config)||null==(n=t.extension)?void 0:n.staticDirectory;r?o({path:r,relativePath:r.replace(/^\.\//,"")}):o(null)})},[e]),t};function Y(){var e,n,t,a,l,u=(0,g.A)(),d=(e={variables:{replId:u}},n=(0,o._)({},p,e),s.I(f,n)),m=d.data,w=d.loading,y=d.error,b=(0,r._)((t=(0,o._)({},p,void 0),c.n(h,t)),1)[0],S=!w&&!y&&!!(null==m?void 0:m.repl)&&"Repl"===m.repl.__typename&&null!=(l=null==(a=m.repl.config)?void 0:a.isExtension)&&l,Y=(0,r._)((0,i.useState)(!1),2),A=Y[0],x=Y[1],C=(0,v.A)().dotReplit;(0,i.useEffect)(function(){return C.watch(function(e){var n,t,r;x(null!=(r=null==(t=e.config)||null==(n=t.extension)?void 0:n.isExtension)&&r)})},[C]),(0,i.useEffect)(function(){w||y||A!==S&&b({variables:{replId:u,isExtension:A},optimisticResponse:{__typename:"RootMutationType",updateRepl:{__typename:"UpdateReplPayload",repl:{id:u,__typename:"Repl",config:{__typename:"ReplConfig",isExtension:A}}}}})},[w,y,u,S,A,b])}},61018:(e,n,t)=>{"use strict";t.d(n,{X:()=>p});var r=t(17844),i=t(93629),o=t(86105),a=t(12584),l=t(41114),s=t(86997);function c(){var e=(0,a._)(['\n  query PersonalCollaboratorGate {\n    currentUser {\n      id\n      isSubscribed\n      username\n      shouldEnforceMultiplayerLimit: gate(feature: "flag-empty-hangar")\n      personalCollaborators {\n        ... on PersonalCollaboratorsInfo {\n          count\n          limit\n          collaborators {\n            repl {\n              id\n              slug\n              url\n              title\n              nextPagePathname\n              iconUrl\n            }\n            user {\n              id\n              username\n            }\n          }\n        }\n      }\n    }\n  }\n']);return c=function(){return e},e}var u={},d=(0,l.J1)(c()),p=function(){var e,n,t,a=(e={ssr:!1,fetchPolicy:"network-only"},n=(0,r._)({},u,e),s.I(d,n)),l=a.data,c=a.loading,p=a.refetch;if(c)return{type:"loading"};if(l&&(null==l||null==(t=l.currentUser)?void 0:t.personalCollaborators.__typename)==="PersonalCollaboratorsInfo"){var f=l.currentUser,h=f.personalCollaborators,m=h.count,g=h.limit,v=h.collaborators,w=f.isSubscribed,y=f.shouldEnforceMultiplayerLimit,b=f.username;return{type:"data",refetch:p,collaboratorCount:m,collaboratorLimit:g,collaboratorsByRepl:v.reduce(function(e,n){var t,a=n.repl,l=n.user,s=null!=(t=e.get(a.id))?t:{id:a.id,slug:a.slug,url:a.url,title:a.title,nextPagePathname:a.nextPagePathname,iconUrl:a.iconUrl,__typename:a.__typename,users:[]};return e.set(a.id,(0,i._)((0,r._)({},s),{users:(0,o._)(s.users).concat([{id:l.id,username:l.username}])})),e},new Map),isStarterUser:!w,username:b,shouldEnforceMultiplayerLimit:y}}return{type:"error"}}},61559:(e,n,t)=>{"use strict";t.d(n,{CI:()=>k,RC:()=>D,Ww:()=>R,jn:()=>I,n1:()=>d,s:()=>_,tH:()=>E});var r,i=t(62019),o=t(37743),a=t(83846),l=t(1833),s=t(86005),c=t(45263),u=c.LU.space2,d="cm-diff-gutter",p="".concat(d,"-element"),f="".concat(p,"-insertion"),h="".concat(p,"-modified"),m="".concat(p,"-deleted"),g="".concat(p,"-file-added"),v="".concat(p,"-empty"),w=c.LU.greenDefault,y=c.LU.greenStronger,b=c.LU.blueDefault,S=c.LU.blueStronger,Y=c.LU.redDefault,A=c.LU.redStronger,x=c.LU.greenDimmer,C=c.LU.greenDefault,_=s.Lz.theme((r={},(0,a._)(r,".".concat(d,":first-of-type, .").concat(p),{width:u}),(0,a._)(r,".".concat(f),{backgroundColor:w,"&.cm-activeLineGutter":{backgroundColor:y}}),(0,a._)(r,".".concat(h),{backgroundColor:b,"&.cm-activeLineGutter":{backgroundColor:S}}),(0,a._)(r,".".concat(m),{backgroundColor:Y,"&.cm-activeLineGutter":{backgroundColor:A}}),(0,a._)(r,".".concat(g),{backgroundColor:x,"&.cm-activeLineGutter":{backgroundColor:C}}),(0,a._)(r,".".concat(v),{opacity:0}),r)),k=new(function(e){function n(){var e;return(0,o._)(this,n),e=(0,i._)(this,n,arguments),e.elementClass="".concat(p," ").concat(f),e}return(0,l._)(n,e),n}(s.wJ)),D=new(function(e){function n(){var e;return(0,o._)(this,n),e=(0,i._)(this,n,arguments),e.elementClass="".concat(p," ").concat(m),e}return(0,l._)(n,e),n}(s.wJ)),E=new(function(e){function n(){var e;return(0,o._)(this,n),e=(0,i._)(this,n,arguments),e.elementClass="".concat(p," ").concat(h),e}return(0,l._)(n,e),n}(s.wJ)),R=new(function(e){function n(){var e;return(0,o._)(this,n),e=(0,i._)(this,n,arguments),e.elementClass="".concat(p," ").concat(g),e}return(0,l._)(n,e),n}(s.wJ)),I=new(function(e){function n(){var e;return(0,o._)(this,n),e=(0,i._)(this,n,arguments),e.elementClass="".concat(p," ").concat(v),e}return(0,l._)(n,e),n}(s.wJ))},61666:(e,n,t)=>{"use strict";t.d(n,{S:()=>o,V:()=>a});var r=t(12694),i=[{"Anthropic API Key":/(sk-ant-api03-[\w-]{93}AA)/g,"AWS API Key":/AKIA[0-9A-Z]{16}/g,"AWS AppSync GraphQL Key":/da2-[a-z0-9]{26}/g,"AWS MWS ID":/mzn\.mws\.[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}/g,"AWS client ID":/(A3T[A-Z0-9]|AKIA|AGPA|AIDA|AROA|AIPA|ANPA|ANVA|ASIA)[A-Z0-9]{16}/g,"Discord Bot Token":/(?:N|M|O)[a-zA-Z0-9]{23}\\.[a-zA-Z0-9-_]{6}\\.[a-zA-Z0-9-_]{27}/g,"Discord Webhook Url":/https?:\/\/(?:ptb\.|canary\.)?discord\.com\/api(?:\/v\d{1,2})?\/webhooks\/(\d{17,19})\/([\w-]{68})/gi,"Dynatrace Token":/dt0[a-zA-Z]{1}[0-9]{2}\\.[A-Z0-9]{24}\\.[A-Z0-9]{64}/gi,"Facebook Access Token":/EAACEdEose0cBA[0-9A-Za-z]+/g,"Facebook OAuth":/[fF][aA][cC][eE][bB][oO][oO][kK].*['|"][0-9a-f]{32}['|"]/g,"Github Personal Access Token":/ghp_[0-9a-zA-Z]{36}/g,"Github OAuth Access Token":/gho_[0-9a-zA-Z]{36}/g,"Github App Installation Access Token":/(ghu|ghs)_[0-9a-zA-Z]{36}/g,"Github App Refresh Token":/ghr_[0-9a-zA-Z]{76}/g,"Generic API Key":/[aA][pP][iI]_?[kK][eE][yY].*['|"][0-9a-zA-Z]{32,45}['|"]/g,"Generic Secret":/[sS][eE][cC][rR][eE][tT].*['|"][0-9a-zA-Z]{32,45}['|"]/g,"Google API Key":/AIza[0-9A-Za-z\\-_]{35}/g,"Google Gmail API Key":/AIza[0-9A-Za-z\\-_]{35}/g,"Google OAuth Access Token":/ya29\\.[0-9A-Za-z\\-_]+/g,"Google YouTube API Key":/AIza[0-9A-Za-z\\-_]{35}/g,"Heroku API Key":/[hH][eE][rR][oO][kK][uU].*[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}/g,"MailChimp API Key":/[0-9a-f]{32}-us[0-9]{1,2}/g,"Mailgun API Key":/key-[0-9a-zA-Z]{32}/g,"Mapbox, Public Key":/([s,p]k.eyJ1Ijoi[\w.-]+)/g,"Mapbox, Secret Key":/([s,p]k.eyJ1Ijoi[\w.-]+)/g,"npm Access Token":/npm_[0-9a-zA-Z]{36}/g,"NuGet API Key":/oy2[a-z0-9]{43}/g,"OpenAI API Key":/sk-[a-zA-Z0-9]{48}/g,"PGP private key block":/-----BEGIN PGP PRIVATE KEY BLOCK-----/g,"Picatic API Key":/sk_live_[0-9a-z]{32}/g,"PyPI API Token":/pypi-AgEIcHlwaS5vcmc[A-Za-z0-9-_]{50,1000}/g,"SSH (DSA) private key":/-----BEGIN DSA PRIVATE KEY-----/g,"SSH (EC) private key":/-----BEGIN EC PRIVATE KEY-----/g,"SSH (RSA) private key":/-----BEGIN RSA PRIVATE KEY-----/g,"SendGrid API Key":/SG\\.[0-9A-Za-z\\-_]{22}\\.[0-9A-Za-z-_]{43}/g,"Shopify Access Token":/shpat_[a-fA-F0-9]{32}/g,"Shopify App Shared Secret":/shpss_[a-fA-F0-9]{32}/g,"Shopify Custom App Access Token":/shpca_[a-fA-F0-9]{32}/g,"Shopify Private App Password":/shppa_[a-fA-F0-9]{32}/g,"Slack Token":/(xox[pborsa]-[0-9]{12}-[0-9]{12}-[0-9]{12}-[a-z0-9]{32})/g,"Slack API Token":/xox[baprs]-([0-9a-zA-Z]{10,48})?/g,"Slack Live API Key":/(?:r|s)k_live_[0-9a-zA-Z]{24}/g,"Slack Test API Key":/(?:r|s)k_test_[0-9a-zA-Z]{24}/g,"Slack, OAuth v2 Bot Access Token":/xoxb-[0-9]{11}-[0-9]{11}-[0-9a-zA-Z]{24}/g,"Slack, OAuth v2 Configuration Token":/xoxe.xoxp-1-[0-9a-zA-Z]{166}/g,"Slack, OAuth v2 Refresh Token":/xoxe-1-[0-9a-zA-Z]{147}/g,"Slack, OAuth v2 User Access Token":/xoxp-[0-9]{11}-[0-9]{11}-[0-9a-zA-Z]{24}/g,"Slack Webhook":/https:\/\/hooks.slack.com\/services\/T[a-zA-Z0-9_]{10}\/B[a-zA-Z0-9_]{10}\/[a-zA-Z0-9_]{24}/g,"Square Access Token":/sq0atp-[0-9A-Za-z\\-_]{22}/g,"Square OAuth Secret":/sq0csp-[0-9A-Za-z\\-_]{43}/g,"Stripe API Key":/sk_live_[0-9a-zA-Z]{24}/g,"Stripe Restricted API Key":/rk_live_[0-9a-zA-Z]{24}/g,"Twilio API Key":/SK[0-9a-fA-F]{32}/g,"Twitter Access Token":/[tT][wW][iI][tT][tT][eE][rR].*[1-9][0-9]+-[0-9a-zA-Z]{40}/g,"Twitter OAuth":/[tT][wW][iI][tT][tT][eE][rR].*['|"][0-9a-zA-Z]{35,44}['|"]/g},{"Instagram oauth":/[0-9a-fA-F]{7}\.[0-9a-fA-F]{32}/g}];function o(e){if(e.length>2e3)return!1;var n=!0,t=!1,o=void 0;try{for(var a,l=i[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var s=a.value,c=!0,u=!1,d=void 0;try{for(var p,f=Object.entries(s)[Symbol.iterator]();!(c=(p=f.next()).done);c=!0){var h=(0,r._)(p.value,2),m=h[0],g=h[1],v=e.search(g);if(!(v<0)){var w=e.match(g);if(w){var y=v+w[0].length;return{start:v,end:y,secret:e.slice(v,y),provider:m}}}}}catch(e){u=!0,d=e}finally{try{c||null==f.return||f.return()}finally{if(u)throw d}}}}catch(e){t=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(t)throw o}}return!1}function a(e){for(var n=null,t="",o=0,a=0;a<e.length;a++){var l=e[a],s=" "===l||"\n"===l||"	"===l||"\r"===l;if(s||(o=t?o:a,t+=l),t&&(s||a===e.length-1)){if(t.length<16){t="",o=0;continue}e:for(;t;){var c=!0,u=!1,d=void 0;try{for(var p,f=i[Symbol.iterator]();!(c=(p=f.next()).done);c=!0){var h=p.value,m=!0,g=!1,v=void 0;try{for(var w,y=Object.entries(h)[Symbol.iterator]();!(m=(w=y.next()).done);m=!0){var b=(0,r._)(w.value,2),S=b[0],Y=b[1];Y.lastIndex=0;var A=Y.exec(t);if(A){var x=A[0].length,C=A.index,_=C+x;null!=n||(n=[]),n.push({start:o+C,end:o+_,secret:A[0],provider:S}),t=t.slice(x),o+=x;continue e}}}catch(e){g=!0,v=e}finally{try{m||null==y.return||y.return()}finally{if(g)throw v}}}}catch(e){u=!0,d=e}finally{try{c||null==f.return||f.return()}finally{if(u)throw d}}t="",o=0}}}return n}},61908:(e,n,t)=>{"use strict";t.d(n,{u:()=>eQ});var r=t(88263),i=t(21462),o=t(79730),a=t(22761),l=t(12694),s=t(17844),c=t(12584),u=t(41114),d=t(86997);function p(){var e=(0,c._)(["\n  query IntegrationsPaneAuthorizations($replId: String!) {\n    getRepl(id: $replId) {\n      __typename\n      ... on Repl {\n        id\n        authorizations {\n          editSecrets {\n            isAuthorized\n            message\n          }\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n"]);return p=function(){return e},e}var f={},h=(0,u.J1)(p()),m=t(31062),g=t(52756),v=t(53231),w=t(41106),y=t(86105),b=t(29542),S=t.n(b),Y=t(82315),A=t(64513),x=t(34834),C=t(54249),_=t(25095),k=t(23721),D=(0,i.createContext)(void 0);function E(e){var n,t,i=e.children,o=(0,C.q)(),a=o.neonDatabases,l=o.loading,s=(0,_.G)(),c=s.buckets,u=s.loading,d=(0,k.x)(),p=d.isDotReplitAuthLoading,f=d.isDotReplitAuthEnabled;return n=a.length>0?"connected":l?"loading":"disconnected",t=c&&c.length>0?"connected":u?"loading":"disconnected",(0,r.Y)(D.Provider,{value:{neon:n,objectStorage:t,replAuth:f?"connected":p?"loading":"disconnected"},children:i})}function R(){var e=(0,i.useContext)(D);if(!e)throw Error("useConnectionStatus must be used within a ConnectionStatusProvider");return e}var I=t(29935),F=t(83846),T=t(93629),P=t(82643),L=t(47993),U=t(54319),N=t(27903),O=t(36640),M=t(74837),B=t(62153),H=t(9414),z=t(45263),W=t(94056),G=t(64583),V=t(48521),j=t(46603),Z=t(33220),q=t(69938),K=t(38292),$=t(17070),J=t(16251),Q=t(36112),X=t(76126),ee=t(59172),en=t(10429),et=t(64631),er=t(48052),ei=t(93333),eo=t(87523),ea=t(70900),el=t(42306),es=t(66257),ec=t(38107),eu=t(58275),ed=t(89916),ep=t(19465),ef=V.kL.max(300),eh=(0,G.x)({root:[V.wp.flex.column,V.wp.borderRadius(),V.wp.backgroundColor.backgroundHigher,V.wp.border({color:z.LU.outlineDimmer,width:1}),V.wp.overflow("hidden")],summary:[V.wp.flex.column],summaryHeader:[V.wp.flex.shrink(1),V.wp.gap(8),V.wp.p(8),V.wp.align.center,V.wp.justify.spaceBetween,(0,F._)({},ef,[V.wp.flex.wrap])],summaryTitle:[V.wp.flex.shrink(1),V.wp.p(6)],summaryControls:[V.wp.flex.shrink(1),{'&[data-open="true"]':{display:"flex"},'&[data-open="false"]':{display:"none"}}],connectedIcon:[V.wp.backgroundColor.accentPositiveDimmer,V.wp.border({color:z.LU.accentPositiveDimmest,width:2}),V.wp.borderRadius(8)],summaryDetails:[V.wp.flex.column,V.wp.gap(4),{'&[data-open="true"]':{visibility:"visible",maxHeight:"100%"},'&[data-open="false"]':{visibility:"hidden",maxHeight:"0"},overflow:"hidden"}],summaryBody:[V.wp.color.foregroundDimmer,{fontSize:z.LU.fontSizeSmall,lineHeight:z.LU.lineHeightSmall}],summaryFooter:[V.wp.gap(4),{'&[data-open="true"]':{visibility:"visible",maxHeight:"100%"},'&[data-open="false"]':{visibility:"hidden",maxHeight:"0"}}],sectionContainer:[V.wp.backgroundColor.backgroundRoot,V.wp.flex.growAndShrink(1)],sectionTitle:[(0,F._)({},"@media (max-width: ".concat(W.LO.mobileMax,"px)"),{display:"none"})],sectionButton:[(0,F._)({},"@media (max-width: ".concat(W.LO.mobileMax,"px)"),{"& > div":{gap:0}})],divider:[V.wp.height(2),V.wp.backgroundColor.backgroundHighest]}),em=function(){return(0,r.Y)(el.A,{color:z.LU.accentPositiveDefault,css:eh.connectedIcon})},eg={Configuration:{icon:(0,r.Y)(ep.A,{}),colorway:"primary",variant:"default",displayName:"Configure"},"Code samples":{icon:(0,r.Y)(es.A,{}),variant:"outlined",displayName:"Code samples"},Docs:{icon:(0,r.Y)(ei.A,{}),variant:"outlined",displayName:"Docs"}},ev=function(e){var n=e.sectionTitles,t=e.selectedSection,i=e.setSelectedSection;return(0,r.Y)(en.S,{row:!0,gap:8,children:n.map(function(e){return(0,r.Y)(j.$n,{variant:eg[e].variant,colorway:eg[e].colorway,css:eh.sectionButton,style:{outlineColor:t===e?z.LU.outlineStronger:z.LU.outlineDefault},iconLeft:eg[e].icon,text:(0,r.Y)(X.EY,{css:eh.sectionTitle,children:eg[e].displayName}),onClick:function(){t===e?i(null):i(e)}},e)})})},ew=function(e){var n=e.sections,t=e.selectedSection;return(0,r.Y)(Q.ui,{elevated:!0,css:eh.sectionContainer,children:n.map(function(e){return(0,r.FD)(en.S,{style:{display:t===e.title?"flex":"none"},children:[(0,r.Y)(q.a,{css:eh.divider}),e.content]},e.key)})})},ey=function(e){var n,t=e.icon,o=e.title,a=e.description,s=e.onClick,c=e.isConnected,u=e.sections,d=e.configIcon,p=void 0===d?(0,r.Y)(ep.A,{}):d,f=e.editSecretsAuthzErrorMessage,h=(0,l._)((0,i.useState)(!1),2),m=h[0],g=h[1],v=(0,l._)((0,i.useState)(null),2),w=v[0],y=v[1];return(0,r.Y)(en.S,{tag:"li",css:eh.root,children:(0,r.FD)(en.S,{css:eh.summary,children:[(0,r.FD)(en.S,{onClick:function(){return g(!m)},css:eh.summaryHeader,row:!0,children:[(0,r.FD)(en.S,{row:!0,gap:8,align:"center",css:eh.summaryTitle,children:[c?(0,r.Y)(em,{}):null,t,(0,r.Y)(X.EY,{style:{overflow:"hidden",flexShrink:1},variant:"subheadDefault",children:o})]}),(0,r.FD)(en.S,{row:!0,gap:8,align:"center",children:[(0,r.Y)(en.S,{row:!0,gap:8,align:"center",css:eh.summaryControls,"data-open":m,children:u?(0,r.Y)(ev,{sectionTitles:null!=(n=null==u?void 0:u.map(function(e){return e.title}))?n:[],selectedSection:w,setSelectedSection:y}):(0,r.Y)(ee.m_,{isDisabled:!f,tooltip:f,children:(0,r.Y)(j.$n,{colorway:"primary",onClick:s,iconLeft:p,text:"Configure"})})}),(0,r.Y)(K.K0,{onClick:function(){y(null),g(!m)},alt:m?"Hide":"Configure",children:m?(0,r.Y)(ea.A,{}):(0,r.Y)(eo.A,{})})]})]}),(0,r.Y)(en.S,{css:eh.summaryDetails,"data-open":m,children:(0,r.Y)(en.S,{css:eh.summaryBody,p:8,children:a})}),(0,r.Y)(en.S,{css:eh.summaryFooter,"data-open":m,row:!0,align:"center",justify:"end",children:u?(0,r.Y)(ew,{sections:u,selectedSection:w}):null})]})})},eb=(0,G.x)({accordionItemBody:[V.wp.flex.column,V.wp.gap(8),V.wp.p(8)],configurationItem:[V.wp.flex.column,V.wp.gap(8)],configurationItemTitle:[V.wp.fontWeight.bold,V.wp.flex.row,V.wp.align.end,V.wp.gap(4)],configurationActions:[V.wp.gap(8)],secretRow:[V.wp.gap(4),{input:{height:22}}],markdownReset:[{"& > div":{"*":{fontSize:"".concat(z.LU.fontSizeSmall," !important"),lineHeight:"".concat(z.LU.lineHeightSmall," !important")},"p, ol":{color:z.LU.foregroundDimmer},a:{color:"".concat(z.LU.foregroundDefault," !important"),textDecoration:"underline"},ol:{marginLeft:z.LU.space16},h4:{marginBottom:0,marginTop:z.LU.space16,color:z.LU.foregroundDefault}}}]}),eS=function(e){var n=e.serviceName,t=e.items,o=e.isConnected,a=e.secrets,s=e.editSecretsAuthzErrorMessage,c=(0,O.A)(),u=(0,l._)((0,i.useState)(new Map(t.map(function(e){return[e.key,""]}))),2),d=u[0],p=u[1];(0,i.useEffect)(function(){p(a)},[a]);var f=(0,x.A)().secrets,h=(0,l._)((0,i.useState)(!1),2),m=h[0],g=h[1],w=(0,i.useCallback)((0,I._)(function(){var e;return(0,P.YH)(this,function(t){switch(t.label){case 0:g(!0),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,f.addEntries(d)];case 2:return t.sent(),(0,v.u4)(v.AZ.INTEGRATIONS_PANE_USED,{action:"configurationSaved",service:n}),[3,4];case 3:return e=t.sent(),c.showError(e.message),[3,4];case 4:return g(!1),[2]}})}),[d,c,f,n]),b=(0,l._)((0,i.useState)(!1),2),S=b[0],Y=b[1],A=(0,i.useCallback)((0,I._)(function(){var e,r;return(0,P.YH)(this,function(i){switch(i.label){case 0:g(!0),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,(e=f).removeEntries.apply(e,(0,y._)(t.map(function(e){return e.key})))];case 2:return i.sent(),(0,v.u4)(v.AZ.INTEGRATIONS_PANE_USED,{action:"configurationReset",service:n}),[3,4];case 3:return r=i.sent(),c.showError(r.message),[3,4];case 4:return Y(!1),g(!1),[2]}})}),[t,c,f,n]);return(0,r.FD)(en.S,{css:eb.accordionItemBody,children:[t.map(function(e){var n;return(0,r.FD)(en.S,{css:eb.configurationItem,children:[(0,r.FD)(en.S,{css:eb.configurationItemTitle,children:[e.title,e.required?null:(0,r.Y)(X.EY,{variant:"small",color:"dimmest",multiline:!1,children:"(optional)"})]}),(0,r.Y)(et.Ay,{css:eb.markdownReset,children:e.description}),(0,r.FD)(en.S,{css:eb.secretRow,row:!0,align:"center",children:[(0,r.Y)(M.Ge,{value:e.key}),(0,r.Y)(M.iJ,{placeholder:e.placeholder,value:null!=(n=d.get(e.key))?n:"",canEditDisabledMessage:s,onChange:function(n){p(function(t){var r=new Map(t);return r.set(e.key,n),r})}})]})]},e.key)}),(0,r.FD)(en.S,{css:eb.configurationActions,row:!0,justify:"end",children:[o?(0,r.Y)(j.$n,{text:"Delete",colorway:"red",variant:"outlined",size:"small",onClick:function(){return Y(!0)},loading:m,disabled:void 0!==s}):null,(0,r.Y)(j.$n,{text:"Save",colorway:"primary",size:"small",onClick:w,loading:m,disabled:void 0!==s})]}),(0,r.Y)(M.g1,{keys:t.map(function(e){return e.key}),isOpen:S,onClose:function(){return Y(!1)},onConfirm:function(){return A()},loading:m})]})},eY=(0,G.x)({root:[V.wp.flex.column,V.wp.gap(8)],header:[V.wp.mb(8),V.wp.p(8),V.wp.pb(0)],items:[V.wp.flex.column,V.wp.gap(8),V.wp.overflowY("auto"),V.wp.maxHeight(250),{marginLeft:"-var(".concat(z.LU.space8,")"),marginRight:"-var(".concat(z.LU.space8,")")}],item:[V.wp.width("100%"),V.wp.flex.column,V.wp.gap(8),{"&:not(:last-of-type)":[V.wp.pb(8),{borderBottom:"1px solid ".concat(z.LU.outlineDimmest)}]}],itemHeader:[V.wp.gap(4),V.wp.fontWeight.bold],itemCodeRoot:[V.wp.position.relative,V.wp.minHeight(52)],itemCode:[V.wp.font.code,V.wp.overflowX("auto"),V.wp.fontSize(12),V.wp.width("100%"),V.wp.pr(8),V.wp.color.foregroundDimmer,{whiteSpace:"pre"}],itemCodeActions:[V.wp.position.absolute,V.wp.right(0),V.wp.top(0),V.wp.backgroundColor.backgroundDefault,V.wp.flex.column,V.wp.align.center,V.wp.gap(4),V.wp.pr(4)]}),eA={JavaScript:{icon:(0,r.Y)(eu.A,{})},Python:{icon:(0,r.Y)(ed.A,{})}},ex=function(e){var n=e.items,t=e.serviceName,o=e.openPane,a=(0,l._)((0,i.useState)("JavaScript"),2),c=a[0],u=a[1],d=(0,B.J)().configs,p=(0,i.useCallback)(function(){return d.some(function(e){return["python2","python3"].includes(e.language)})?"Python":"JavaScript"},[d]);(0,i.useEffect)(function(){u(p())},[p]);var f=(0,H.Hw)(),h=(0,i.useCallback)(function(e){(0,L.flushSync)(function(){o({type:"ghostwriterChat"})});var n=f(function(e){var n=(0,l._)(e,2);return"ghostwriterChat"===(n[0],n[1]).type});(null==n?void 0:n.bindings.type)==="ghostwriterChat"&&n.bindings.setInputText(e)},[o,f]);return(0,r.FD)(en.S,{css:eY.root,children:[(0,r.Y)(en.S,{css:eY.header,row:!0,align:"center",justify:"space-between",children:(0,r.Y)(J.l,{items:Object.entries(eA).map(function(e){var n=(0,l._)(e,2),t=n[0],r=n[1];return(0,T._)((0,s._)({},r),{value:t})}),selectedKey:c,onSelectionChange:function(e){(0,v.u4)(v.AZ.INTEGRATIONS_PANE_USED,{action:"codeSampleLanguageChanged",service:t,language:e}),u(e)},"aria-label":"Select a language",children:function(e){return(0,r.Y)($.nh,{id:e.value,label:e.value,icon:e.icon},e.value)}})}),(0,r.Y)(en.S,{css:eY.items,children:n.map(function(e){return(0,r.FD)(en.S,{css:eY.item,pl:8,children:[(0,r.FD)(en.S,{css:eY.itemHeader,row:!0,align:"center",children:[e.title,(0,r.Y)(K.K0,{tooltipPlacement:"right",colorway:void 0,alt:"Explain this code",onClick:function(){var n=e.code[c];(0,v.u4)(v.AZ.INTEGRATIONS_PANE_USED,{action:"codeSampleExplained",sample:n,service:t,title:e.title,language:c}),h(["Can you explain this code sample for me?","","```",n,"```"].join("\n"))},children:(0,r.Y)(ec.A,{color:z.LU.tealStronger})})]}),(0,r.FD)(en.S,{css:eY.itemCodeRoot,children:[(0,r.Y)(N.A,{fontSize:12,language:c,code:e.code[c],css:eY.itemCode}),(0,r.Y)(en.S,{css:eY.itemCodeActions,children:(0,r.Y)(Z.r,{tooltipPlacement:"left",textToCopy:e.code[c],onCopy:function(){(0,v.u4)(v.AZ.INTEGRATIONS_PANE_USED,{action:"codeSampleCopied",service:t,sample:e.title,language:c})}})})]})]},e.title)})},c),(0,r.Y)(en.S,{p:8,children:(0,r.Y)(j.$n,{size:"small",text:"Get started with "+U.BP,iconLeft:(0,r.Y)(er.A,{}),colorway:void 0,onClick:function(){(0,v.u4)(v.AZ.INTEGRATIONS_PANE_USED,{action:"codeSampleStartWithAi",service:t,language:c}),h("How do I use ".concat(t," in ").concat(c,"?"))}})})]})},eC=function(e){var n=e.configurationItems,t=e.codeSampleItems,o=e.title,a=e.description,c=e.openPane,u=e.editSecretsAuthzErrorMessage,d=e.icon,p=e.isConnected,f=(0,l._)((0,i.useState)({configuration:!1,codeSamples:!1}),2),h=f[0],m=f[1],g=(0,x.A)().secrets,w=(0,l._)((0,i.useState)(new Map),2),y=w[0],b=w[1];return(0,i.useEffect)(function(){return g.watch(function(e){b(e)})},[g]),(0,r.Y)(r.FK,{children:(0,r.Y)(ey,{title:o,description:a,icon:d,isConnected:p,editSecretsAuthzErrorMessage:u,onClick:function(){m(function(e){return(0,T._)((0,s._)({},e),{configuration:!0})}),(0,v.u4)(v.AZ.INTEGRATIONS_PANE_USED,{action:"configurationOpened",service:o,source:"configureButton"})},onSectionToggle:function(e){m(function(n){var t=!n[e];return t&&(0,v.u4)(v.AZ.INTEGRATIONS_PANE_USED,{action:"configuration"===e?"configurationOpened":"codeSampleOpened",service:o,source:"accordion"}),(0,T._)((0,s._)({},n),(0,F._)({},e,t))})},sections:[{key:"codeSamples",title:"Code samples",content:(0,r.Y)(ex,{serviceName:o,items:t,openPane:c}),isOpen:h.codeSamples},{key:"configuration",title:"Configuration",content:(0,r.Y)(eS,{serviceName:o,items:n,isConnected:p,secrets:y,editSecretsAuthzErrorMessage:u}),isOpen:h.configuration}]})})},e_=t(71117),ek=t(73918),eD=t(667),eE=[{tags:["database","storage"],pane:{type:"database"},serviceName:"neon"},{tags:["database","storage","sql"],pane:{type:"neon"},serviceName:"neon"},{tags:["storage","files"],pane:{type:"objectStorage"},serviceName:"objectStorage"},{tags:["authentication"],pane:{type:"replAuth"},serviceName:"replAuth"}],eR=[{title:"OpenAI",description:"OpenAI offers cutting-edge AI models for various applications, including natural language processing and generation. Enhance your projects with state-of-the-art AI capabilities.",tags:["AI","LLM","chat"],icon:(0,r.Y)(function(e){return(0,r.Y)(e_.Ay,(0,T._)((0,s._)({},e),{children:(0,r.Y)("path",{d:"M22.28 9.823a5.979 5.979 0 0 0-.514-4.911 6.047 6.047 0 0 0-6.513-2.901A5.981 5.981 0 0 0 10.743 0a6.048 6.048 0 0 0-5.768 4.186 5.981 5.981 0 0 0-3.998 2.9 6.049 6.049 0 0 0 .744 7.09 5.978 5.978 0 0 0 .513 4.911 6.047 6.047 0 0 0 6.513 2.901 5.976 5.976 0 0 0 4.51 2.01 6.048 6.048 0 0 0 5.77-4.19 5.982 5.982 0 0 0 3.999-2.9 6.05 6.05 0 0 0-.746-7.088v.002ZM13.257 22.43a4.483 4.483 0 0 1-2.879-1.041c.037-.02.1-.055.142-.08l4.779-2.76a.777.777 0 0 0 .393-.68v-6.738l2.02 1.167a.07.07 0 0 1 .039.055v5.58a4.503 4.503 0 0 1-4.493 4.497Zm-9.662-4.127a4.478 4.478 0 0 1-.537-3.014c.036.021.098.06.142.085l4.779 2.76a.778.778 0 0 0 .785 0l5.835-3.369v2.333a.075.075 0 0 1-.029.062l-4.83 2.789a4.504 4.504 0 0 1-6.145-1.646ZM2.338 7.872A4.483 4.483 0 0 1 4.678 5.9l-.002.165v5.521c-.001.28.149.54.393.68l5.834 3.368-2.02 1.166a.071.071 0 0 1-.068.006l-4.832-2.792a4.503 4.503 0 0 1-1.646-6.141Zm16.594 3.862-5.834-3.37 2.02-1.165a.071.071 0 0 1 .068-.006l4.831 2.79a4.499 4.499 0 0 1-.694 8.116v-5.686a.777.777 0 0 0-.39-.68Zm2.01-3.026a6.493 6.493 0 0 0-.142-.084l-4.779-2.76a.778.778 0 0 0-.785 0L9.402 9.233V6.9a.075.075 0 0 1 .029-.062l4.83-2.787a4.497 4.497 0 0 1 6.68 4.657h.001ZM8.304 12.866l-2.02-1.167a.07.07 0 0 1-.04-.055v-5.58a4.498 4.498 0 0 1 7.377-3.454c-.037.02-.1.055-.142.08L8.7 5.45a.776.776 0 0 0-.393.68l-.003 6.736ZM9.401 10.5 12 9l2.599 1.5v3L12 15l-2.599-1.5v-3Z"})}))},{}),configurationItems:[{key:"OPENAI_API_KEY",title:"API Key",description:"To get started, you'll need an API key from OpenAI. Visit the [API keys page](https://platform.openai.com/account/api-keys) in your OpenAI account, generate a new key, and paste it below.",placeholder:"sk-",required:!0},{key:"OPENAI_ORG_ID",title:"Organization ID",description:"For accounts associated with multiple organizations, you can specify the [Organization ID](https://platform.openai.com/account/org-settings) to use. This is optional; if not provided, your default organization will be used."}],codeSampleItems:[{title:"Secret usage",code:{Python:"import os\nfrom openai import OpenAI\n\napi_key = os.environ['OPENAI_API_KEY']\norganization_id = os.environ.get('OPENAI_ORG_ID')  # Optional\n\nclient = OpenAI(api_key=api_key, organization=organization_id)",JavaScript:"import { OpenAI } from 'openai';\n\nconst apiKey = process.env.OPENAI_API_KEY;\nconst organizationId = process.env.OPENAI_ORG_ID;  // Optional\n\nconst openai = new OpenAI({\n  apiKey,\n  organization: organizationId,\n});"}},{title:"Chat creation",code:{Python:'response = client.chat.completions.create(\n    model="gpt-3.5-turbo",\n    messages=[\n        {"role": "system", "content": "You are a helpful assistant."},\n        {"role": "user", "content": "Hello!"}\n    ]\n)\n\nprint(response.choices[0].message.content)',JavaScript:'const response = await openai.chat.completions.create({\n  model: "gpt-3.5-turbo",\n  messages: [\n    {role: "system", content: "You are a helpful assistant."},\n    {role: "user", content: "Hello!"}\n  ],\n});\n\nconsole.log(response.choices[0].message.content);'}},{title:"Image generation",code:{Python:'response = client.images.generate(\n    model="dall-e-3",\n    prompt="A futuristic cityscape with flying cars",\n    size="1024x1024",\n    quality="standard",\n    n=1,\n)\n\nimage_url = response.data[0].url\nprint(f"Generated image URL: {image_url}")',JavaScript:'const response = await openai.images.generate({\n  model: "dall-e-3",\n  prompt: "A futuristic cityscape with flying cars",\n  size: "1024x1024",\n  quality: "standard",\n  n: 1,\n});\n\nconst imageUrl = response.data[0].url;\nconsole.log(`Generated image URL: ${imageUrl}`);'}},{title:"Embedding generation",code:{Python:'response = client.embeddings.create(\n    model="text-embedding-ada-002",\n    input="The quick brown fox jumps over the lazy dog"\n)\nembedding = response.data[0].embedding\nprint(f"Embedding vector (first 5 elements): {embedding[:5]}")',JavaScript:'const response = await openai.embeddings.create({\n  model: "text-embedding-ada-002",\n  input: "The quick brown fox jumps over the lazy dog",\n});\nconst embedding = response.data[0].embedding;\nconsole.log(`Embedding vector (first 5 elements): ${embedding.slice(0, 5)}`);'}}]},{title:"Google AI (Gemini)",description:"Google AI's Gemini model represents the latest in machine learning technology. Integrate this powerful tool into your applications for advanced natural language processing and generation.",tags:["AI","LLM","chat"],icon:(0,r.Y)(function(e){return(0,r.FD)(eD.A,(0,T._)((0,s._)({},e),{children:[(0,r.Y)("g",{clipPath:"url(#clip0_7378_480)",children:(0,r.Y)("path",{fill:"url(#paint0_radial_7378_480)",d:"M24 12.024A12.783 12.783 0 0 0 12.024 24h-.048A12.782 12.782 0 0 0 0 12.024v-.048A12.782 12.782 0 0 0 11.976 0h.048A12.783 12.783 0 0 0 24 11.976v.048Z"})}),(0,r.FD)("defs",{children:[(0,r.FD)("radialGradient",{id:"paint0_radial_7378_480",cx:"0",cy:"0",r:"1",gradientTransform:"matrix(24.19889 8.18296 -65.55084 193.84876 2.382 9.755)",gradientUnits:"userSpaceOnUse",children:[(0,r.Y)("stop",{offset:".067",stopColor:"#9168C0"}),(0,r.Y)("stop",{offset:".343",stopColor:"#5684D1"}),(0,r.Y)("stop",{offset:".672",stopColor:"#1BA1E3"})]}),(0,r.Y)("clipPath",{id:"clip0_7378_480",children:(0,r.Y)("path",{fill:"#fff",d:"M0 0h24v24H0z"})})]})]}))},{}),configurationItems:[{key:"GOOGLE_AI_API_KEY",title:"API Key",description:"To use Gemini, you'll need to set up an API key. Go to the [Google AI Studio](https://makersuite.google.com/app/apikey) to create one. Once you have your key, enter it below to start using Gemini in your projects.",required:!0}],codeSampleItems:[{title:"Secret usage",code:{Python:"import os\nimport google.generativeai as genai\n\ngenai.configure(api_key=os.environ['GOOGLE_AI_API_KEY'])",JavaScript:'const {\n  GoogleGenerativeAI,\n  HarmCategory,\n  HarmBlockThreshold,\n} = require("@google/generative-ai");\n\nconst genAI = new GoogleGenerativeAI(process.env.GOOGLE_AI_API_KEY);'}},{title:"Chat creation",code:{Python:"model = genai.GenerativeModel('gemini-pro')\nchat = model.start_chat()\n\nresponse = chat.send_message(\"Hello, how are you?\")\nprint(response.text)",JavaScript:'const model = genAI.getGenerativeModel({ model: "gemini-pro" });\n\nconst chat = model.startChat({\n  generationConfig: {\n    maxOutputTokens: 100,\n  },\n});\n\nconst result = await chat.sendMessage("Hello, how are you?");\nconst response = result.response;\nconsole.log(response.text());'}},{title:"Text generation",code:{Python:"model = genai.GenerativeModel('gemini-pro')\nresponse = model.generate_content(\"Write a short poem about artificial intelligence.\")\nprint(response.text)",JavaScript:'const model = genAI.getGenerativeModel({ model: "gemini-pro" });\nconst result = await model.generateContent("Write a short poem about artificial intelligence.");\nconsole.log(result.response.text());'}},{title:"Image analysis",code:{Python:"from PIL import Image\n\nmodel = genai.GenerativeModel('gemini-pro-vision')\nimg = Image.open('image.jpg')\nresponse = model.generate_content([\"Describe this image:\", img])\nprint(response.text)",JavaScript:'const fs = require(\'fs\');\n\nconst model = genAI.getGenerativeModel({ model: "gemini-pro-vision" });\n\nconst imageParts = [\n  {\n    inlineData: {\n      data: fs.readFileSync("image.jpg", {encoding: \'base64\'}),\n      mimeType: "image/jpeg"\n    }\n  },\n];\n\nconst result = await model.generateContent(["Describe this image:", ...imageParts]);\nconsole.log(result.response.text());'}}]},{title:"Anthropic (Claude)",description:"Anthropic offers safe AI models like Claude, enhancing applications with capabilities for analysis, writing, coding, and problem-solving.",tags:["AI","LLM","chat"],icon:(0,r.Y)(function(e){return(0,r.Y)(e_.Ay,(0,T._)((0,s._)({},e),{children:(0,r.Y)("path",{d:"M16.868 4.705h-3.365l6.133 15.51H23l-6.132-15.51Zm-9.736 0L1 20.215h3.436l1.265-3.245h6.418l1.241 3.245h3.436l-6.132-15.51H7.132Zm-.334 9.377 2.1-5.44 2.1 5.44h-4.2Z"})}))},{}),configurationItems:[{key:"ANTHROPIC_API_KEY",title:"API Key",description:"[Create an API key](https://console.anthropic.com/account/keys) and paste the key below. If you get an error, you may have reached your Anthropic usage limits. To view your usage, check your [Anthropic usage dashboard](https://console.anthropic.com/usage).",required:!0}],codeSampleItems:[{title:"Secret usage",code:{Python:'import os\nimport anthropic\n\nclient = anthropic.Anthropic(api_key=os.environ["ANTHROPIC_API_KEY"])',JavaScript:"const Anthropic = require('@anthropic-ai/sdk');\n\nconst anthropic = new Anthropic({\n  apiKey: process.env.ANTHROPIC_API_KEY,\n});"}},{title:"Chat creation",code:{Python:'message = client.messages.create(\n    model="claude-3-opus-20240229",\n    max_tokens=1000,\n    messages=[\n        {"role": "user", "content": "Hello, Claude!"}\n    ]\n)\nprint(message.content[0].text)',JavaScript:"const message = await anthropic.messages.create({\n  model: 'claude-3-opus-20240229',\n  max_tokens: 1000,\n  messages: [\n    {role: 'user', content: 'Hello, Claude!'}\n  ],\n});\nconsole.log(message.content[0].text);"}},{title:"Streaming response",code:{Python:'with client.messages.stream(\n    model="claude-3-opus-20240229",\n    max_tokens=1000,\n    messages=[\n        {"role": "user", "content": "Write a short story about time travel."}\n    ]\n) as stream:\n    for text in stream.text_stream:\n        print(text, end="", flush=True)',JavaScript:"const stream = await anthropic.messages.stream({\n  model: 'claude-3-opus-20240229',\n  max_tokens: 1000,\n  messages: [\n    {role: 'user', content: 'Write a short story about time travel.'}\n  ],\n});\n\nfor await (const chunk of stream) {\n  if (chunk.type === 'content_block_delta') {\n    process.stdout.write(chunk.delta.text);\n  }\n}"}},{title:"Content classification",code:{Python:'message = client.messages.create(\n    model="claude-3-opus-20240229",\n    max_tokens=100,\n    messages=[\n        {"role": "user", "content": "Classify the sentiment of this text: \'I absolutely love this product!\'"}\n    ]\n)\nprint(message.content[0].text)',JavaScript:"const message = await anthropic.messages.create({\n  model: 'claude-3-opus-20240229',\n  max_tokens: 100,\n  messages: [\n    {role: 'user', content: \"Classify the sentiment of this text: 'I absolutely love this product!'\"}\n  ],\n});\nconsole.log(message.content[0].text);"}}]},{title:"Perplexity",description:"Perplexity AI provides powerful language models and APIs for various natural language processing tasks. Integrate advanced AI capabilities into your applications with ease.",tags:["AI","LLM","NLP"],icon:(0,r.Y)(function(e){return(0,r.Y)(e_.Ay,(0,T._)((0,s._)({},e),{children:(0,r.Y)("path",{fillRule:"evenodd",d:"m5.29.765 6.398 5.895V.779h1.246v5.907L19.36.765v6.721H22v9.696h-2.63v5.985l-6.436-5.654v5.719h-1.246v-5.626l-6.39 5.63V17.18h-2.64V7.486H5.29V.765Zm5.46 7.952H3.903v7.234h1.392V13.67l5.453-4.952Zm-4.207 5.498v6.275l5.145-4.532V9.54l-5.145 4.674Zm6.427 1.683V9.535l5.147 4.674v2.973h.007v3.244l-5.154-4.528Zm6.4.053h1.384V8.717H13.96l5.41 4.9v2.334Zm-1.254-8.465V3.595l-4.224 3.891h4.224Zm-7.357 0H6.535V3.595l4.224 3.891Z",clipRule:"evenodd"})}))},{}),configurationItems:[{key:"PERPLEXITY_API_KEY",title:"API Key",description:"To use Perplexity's API, you'll need an API key. Sign up for an account on the [Perplexity website](https://www.perplexity.ai/), navigate to your account settings, and generate a new API key. Paste it below.",placeholder:"pplx-",required:!0}],codeSampleItems:[{title:"API Client Initialization",code:{Python:'import os\nimport requests\n\napi_key = os.environ[\'PERPLEXITY_API_KEY\']\nheaders = {\n    "Authorization": f"Bearer {api_key}",\n    "Content-Type": "application/json"\n}',JavaScript:"const apiKey = process.env.PERPLEXITY_API_KEY;\nconst headers = {\n  'Authorization': `Bearer ${apiKey}`,\n  'Content-Type': 'application/json'\n};"}},{title:"Text Generation",code:{Python:'url = "https://api.perplexity.ai/chat/completions"\ndata = {\n    "model": "sonar-medium-online",\n    "messages": [\n        {"role": "system", "content": "You are a helpful assistant."},\n        {"role": "user", "content": "What is the capital of France?"}\n    ]\n}\n\nresponse = requests.post(url, json=data, headers=headers)\nprint(response.json()[\'choices\'][0][\'message\'][\'content\'])',JavaScript:"const url = 'https://api.perplexity.ai/chat/completions';\nconst data = {\n  model: 'sonar-medium-online',\n  messages: [\n    {role: 'system', content: 'You are a helpful assistant.'},\n    {role: 'user', content: 'What is the capital of France?'}\n  ]\n};\n\nconst response = await fetch(url, {\n  method: 'POST',\n  headers: headers,\n  body: JSON.stringify(data)\n});\n\nconst result = await response.json();\nconsole.log(result.choices[0].message.content);"}}]},{title:"Mistral AI",description:"Mistral AI offers state-of-the-art language models and APIs for a wide range of AI applications. Leverage their powerful models to enhance your projects with advanced natural language processing capabilities.",tags:["AI","LLM","NLP"],icon:(0,r.Y)(function(e){return(0,r.FD)(eD.A,(0,T._)((0,s._)({},e),{children:[(0,r.Y)("path",{d:"M15 6v4h-2V6h2Zm4-4v4h-2V2h2ZM1 2h2v20H1V2Zm8 12h2v4H9v-4Zm8 0h2v8h-2v-8Z"}),(0,r.Y)("path",{fill:"#F7D046",d:"M19 2h4v4h-4V2ZM3 2h4v4H3V2Z"}),(0,r.Y)("path",{fill:"#F2A73B",d:"M15 10V6h8v4h-8ZM3 10V6h8v4H3Z"}),(0,r.Y)("path",{fill:"#EE792F",d:"M3 14v-4h20v4H3Z"}),(0,r.Y)("path",{fill:"#EB5829",d:"M11 14h4v4h-4v-4Zm8 0h4v4h-4v-4ZM3 14h4v4H3v-4Z"}),(0,r.Y)("path",{fill:"#EA3326",d:"M19 18h4v4h-4v-4ZM3 18h4v4H3v-4Z"})]}))},{}),configurationItems:[{key:"MISTRAL_API_KEY",title:"API Key",description:"To access Mistral AI's services, you need an API key. Visit the [Mistral AI platform](https://console.mistral.ai/), create an account, and generate a new API key. Enter it below.",placeholder:"mis-",required:!0}],codeSampleItems:[{title:"Client Setup",code:{Python:"import os\nfrom mistralai.client import MistralClient\n\napi_key = os.environ['MISTRAL_API_KEY']\nclient = MistralClient(api_key=api_key)",JavaScript:"const apiKey = process.env.MISTRAL_API_KEY;\nconst headers = {\n  'Authorization': `Bearer ${apiKey}`,\n  'Content-Type': 'application/json'\n};"}},{title:"Chat Completion",code:{Python:'chat_response = client.chat(\n    model="mistral-tiny",\n    messages=[\n        {"role": "user", "content": "What are the main features of Python?"}\n    ]\n)\n\nprint(chat_response.choices[0].message.content)',JavaScript:'const url = \'https://api.mistral.ai/v1/chat/completions\';\nconst data = {\n  model: "mistral-tiny",\n  messages: [\n    {role: "user", content: "What are the main features of Python?"}\n  ]\n};\n\nconst response = await fetch(url, {\n  method: \'POST\',\n  headers: headers,\n  body: JSON.stringify(data)\n});\n\nconst result = await response.json();\nconsole.log(result.choices[0].message.content);'}},{title:"Embedding Generation",code:{Python:'embed_response = client.embeddings(\n    model="mistral-embed",\n    input=["Hello world", "The quick brown fox jumps over the lazy dog"]\n)\n\nfor embedding in embed_response.data:\n    print(f"Embedding (first 5 dimensions): {embedding.embedding[:5]}")',JavaScript:'const url = \'https://api.mistral.ai/v1/embeddings\';\nconst data = {\n  model: "mistral-embed",\n  input: ["Hello world", "The quick brown fox jumps over the lazy dog"]\n};\n\nconst response = await fetch(url, {\n  method: \'POST\',\n  headers: headers,\n  body: JSON.stringify(data)\n});\n\nconst result = await response.json();\nresult.data.forEach((embedding, index) => {\n  console.log(`Embedding ${index + 1} (first 5 dimensions): ${embedding.embedding.slice(0, 5)}`);\n});'}}]},{title:"Google Sheets",description:"Google Sheets API allows you to read, write, and modify Google Sheets. This integration uses a service account for authentication, suitable for server-side applications.",tags:["Google","Spreadsheets","Data"],icon:(0,r.Y)(function(e){return(0,r.FD)(eD.A,(0,T._)((0,s._)({},e),{children:[(0,r.FD)("g",{clipPath:"url(#clip0_7379_618)",children:[(0,r.Y)("path",{fill:"#188038",d:"m14.455 0 6 6-3 .545-3-.545-.546-3 .546-3Z"}),(0,r.Y)("path",{fill:"#34A853",d:"M14.455 6V0H4.635C3.732 0 3 .732 3 1.636v20.728C3 23.268 3.732 24 4.636 24h14.182c.904 0 1.636-.732 1.636-1.636V6h-6Z"}),(0,r.Y)("path",{fill:"#fff",d:"M6.273 9.273v7.909h10.909v-7.91H6.272Zm4.772 6.545H7.636V13.91h3.41v1.91Zm0-3.273H7.636v-1.909h3.41v1.91Zm4.773 3.273H12.41V13.91h3.41v1.91Zm0-3.273H12.41v-1.909h3.41v1.91Z"})]}),(0,r.Y)("defs",{children:(0,r.Y)("clipPath",{id:"clip0_7379_618",children:(0,r.Y)("path",{fill:"#fff",d:"M3 0h17.454v24H3z"})})})]}))},{}),configurationItems:[{key:"GOOGLE_SERVICE_ACCOUNT_JSON",title:"Service Account JSON",description:'The entire contents of your Google Cloud service account JSON key file. This includes all the necessary information for authentication.\n\n#### Creating a Service Account\n1. Go to [Google Cloud Console](https://console.cloud.google.com/) and sign in with your Google account.\n2. Select an existing project or create a new one (Click project dropdown > "New Project").\n3. Navigate to ["IAM & Admin" > "Service Accounts"](https://console.cloud.google.com/iam-admin/serviceaccounts) in the left sidebar.\n4. Click "+ CREATE SERVICE ACCOUNT".\n5. Enter a name and optional description, then click "CREATE AND CONTINUE".\n6. Grant appropriate permissions (e.g., "Editor" for Sheets access), then click "CONTINUE".\n7. (Optional) Grant users access, or click "DONE".\n8. In the service accounts list, click the three dots next to your new account > "Manage keys".\n9. Click "ADD KEY" > "Create new key", choose "JSON" format, and click "CREATE" to download the key file.\n10. Go to ["APIs & Services" > "Dashboard"](https://console.cloud.google.com/apis/dashboard), click ["+ ENABLE APIS AND SERVICES"](https://console.cloud.google.com/apis/library) up top.\n11. Search for and enable "Google Sheets API". Add "Google Docs API" if you\'re also using Google Docs.\n12. Open the JSON key file you downloaded, copy its entire contents, and paste it into this field.\n\nRemember to keep your key secure and never share it or commit it to Git. Follow the principle of least privilege when assigning roles.\n\n#### Getting a Spreadsheet ID\n1. Open the Google Sheet you want to access.\n2. Look at the URL in your browser. It will be in this format: `https://docs.google.com/spreadsheets/d/SPREADSHEET_ID/edit#gid=0`\n3. The SPREADSHEET_ID is the long string of letters, numbers, and hyphens between \'/d/\' and \'/edit\'.\n\n#### IMPORTANT: Granting Spreadsheet Access to Your Service Account\n1. Find your service account\'s email address in the JSON key file (look for "client_email").\n2. Open your Google Sheet.\n3. Click the "Share" button in the top right corner.\n4. In the "Share with people and groups" field, paste your service account\'s email address.\n5. Set the permission to "Editor" if you need write access, or "Viewer" for read-only access.\n6. Uncheck the "Notify people" box (optional).\n7. Click "Send" or "Share" (depending on your Google Workspace settings).',placeholder:'{ "type": "service_account", "project_id": "your-project-id", "private_key_id": "..." }',required:!0}],codeSampleItems:[{title:"Authentication Setup",code:{Python:"import os\nimport json\nfrom google.oauth2 import service_account\nfrom googleapiclient.discovery import build\n\nSERVICE_ACCOUNT_JSON = os.environ['GOOGLE_SERVICE_ACCOUNT_JSON']\nservice_account_info = json.loads(SERVICE_ACCOUNT_JSON)\n\ncredentials = service_account.Credentials.from_service_account_info(\n    service_account_info,\n    scopes=['https://www.googleapis.com/auth/spreadsheets']\n)\n\nsheets_service = build('sheets', 'v4', credentials=credentials)",JavaScript:"const { google } = require('googleapis');\n\nconst SERVICE_ACCOUNT_JSON = JSON.parse(process.env.GOOGLE_SERVICE_ACCOUNT_JSON);\n\nconst auth = new google.auth.GoogleAuth({\n  credentials: SERVICE_ACCOUNT_JSON,\n  scopes: ['https://www.googleapis.com/auth/spreadsheets'],\n});\n\nconst sheets = google.sheets({ version: 'v4', auth });"}},{title:"Read from Google Sheets",code:{Python:"SPREADSHEET_ID = 'your-spreadsheet-id'\nRANGE = 'Sheet1!A1:B5'\n\nresult = sheets_service.spreadsheets().values().get(\n    spreadsheetId=SPREADSHEET_ID,\n    range=RANGE\n).execute()\n\nvalues = result.get('values', [])\nfor row in values:\n    print(row)",JavaScript:"const SPREADSHEET_ID = 'your-spreadsheet-id';\nconst RANGE = 'Sheet1!A1:B5';\n\nconst response = await sheets.spreadsheets.values.get({\n  spreadsheetId: SPREADSHEET_ID,\n  range: RANGE,\n});\n\nconst rows = response.data.values;\nif (rows.length) {\n  rows.forEach(row => {\n    console.log(row);\n  });\n} else {\n  console.log('No data found.');\n}"}},{title:"Write to Google Sheets",code:{Python:"SPREADSHEET_ID = 'your-spreadsheet-id'\nRANGE = 'Sheet1!A1:B2'\nVALUES = [\n    ['Name', 'Score'],\n    ['Alice', 95],\n]\n\nresult = sheets_service.spreadsheets().values().update(\n    spreadsheetId=SPREADSHEET_ID,\n    range=RANGE,\n    valueInputOption='USER_ENTERED',\n    body={'values': VALUES}\n).execute()\n\nprint(f\"{result.get('updatedCells')} cells updated.\")",JavaScript:"const SPREADSHEET_ID = 'your-spreadsheet-id';\nconst RANGE = 'Sheet1!A1:B2';\nconst VALUES = [\n  ['Name', 'Score'],\n  ['Alice', 95],\n];\n\nconst response = await sheets.spreadsheets.values.update({\n  spreadsheetId: SPREADSHEET_ID,\n  range: RANGE,\n  valueInputOption: 'USER_ENTERED',\n  resource: { values: VALUES },\n});\n\nconsole.log(`${response.data.updatedCells} cells updated.`);"}}]},{title:"Google Docs",description:"Google Docs API allows you to create, read, and modify Google Docs. This integration uses a service account for authentication, suitable for server-side applications.",tags:["Google","Documents","Text Processing"],icon:(0,r.Y)(function(e){return(0,r.FD)(eD.A,(0,T._)((0,s._)({},e),{children:[(0,r.Y)("path",{fill:"#3086F6",d:"M18.818 24H4.636C3.736 24 3 23.264 3 22.364V1.636C3 .736 3.736 0 4.636 0h9.819l6 6v16.364c0 .9-.737 1.636-1.637 1.636Z"}),(0,r.Y)("path",{fill:"#0C67D6",d:"m14.455 0 6 6h-6V0Z"}),(0,r.Y)("path",{fill:"#FDFFFF",d:"M16.636 10.636H6.818V9.273h9.818v1.363Zm0 1.91H6.818v1.363h9.818v-1.364Zm-2.727 3.272H6.82v1.364h7.09v-1.364Z"})]}))},{}),configurationItems:[{key:"GOOGLE_SERVICE_ACCOUNT_JSON",title:"Service Account JSON",description:'The entire contents of your Google Cloud service account JSON key file. This includes all the necessary information for authentication.\n\n#### Creating a Service Account\n1. Go to [Google Cloud Console](https://console.cloud.google.com/) and sign in with your Google account.\n2. Select an existing project or create a new one (Click project dropdown > "New Project").\n3. Navigate to ["IAM & Admin" > "Service Accounts"](https://console.cloud.google.com/iam-admin/serviceaccounts) in the left sidebar.\n4. Click "+ CREATE SERVICE ACCOUNT".\n5. Enter a name and optional description, then click "CREATE AND CONTINUE".\n6. Grant appropriate permissions (e.g., "Editor" for Docs access), then click "CONTINUE".\n7. (Optional) Grant users access, or click "DONE".\n8. In the service accounts list, click the three dots next to your new account > "Manage keys".\n9. Click "ADD KEY" > "Create new key", choose "JSON" format, and click "CREATE" to download the key file.\n10. Go to ["APIs & Services" > "Dashboard"](https://console.cloud.google.com/apis/dashboard), click ["+ ENABLE APIS AND SERVICES"](https://console.cloud.google.com/apis/library) up top.\n11. Search for and enable "Google Docs API". Add "Google Sheets API" if you\'re also using Google Sheets.\n12. Open the JSON key file you downloaded, copy its entire contents, and paste it into this field.\n\nRemember to keep your key secure and never share it or commit it to Git. Follow the principle of least privilege when assigning roles.\n\n#### Getting a Document ID\n1. Open the Google Doc you want to access.\n2. Look at the URL in your browser. It will be in this format: `https://docs.google.com/document/d/DOCUMENT_ID/edit`\n3. The DOCUMENT_ID is the long string of letters, numbers, and hyphens between \'/d/\' and \'/edit\'.\n\n#### IMPORTANT: Granting Document Access to Your Service Account\n1. Find your service account\'s email address in the JSON key file (look for "client_email").\n2. Open your Google Doc.\n3. Click the "Share" button in the top right corner.\n4. In the "Share with people and groups" field, paste your service account\'s email address.\n5. Set the permission to "Editor" if you need write access, or "Viewer" for read-only access.\n6. Uncheck the "Notify people" box (optional).\n7. Click "Send" or "Share" (depending on your Google Workspace settings).',placeholder:'{ "type": "service_account", "project_id": "your-project-id", "private_key_id": "..." }',required:!0}],codeSampleItems:[{title:"Authentication Setup",code:{Python:"import os\nimport json\nfrom google.oauth2 import service_account\nfrom googleapiclient.discovery import build\n\nSERVICE_ACCOUNT_JSON = os.environ['GOOGLE_SERVICE_ACCOUNT_JSON']\nservice_account_info = json.loads(SERVICE_ACCOUNT_JSON)\n\ncredentials = service_account.Credentials.from_service_account_info(\n    service_account_info,\n    scopes=['https://www.googleapis.com/auth/documents']\n)\n\ndocs_service = build('docs', 'v1', credentials=credentials)",JavaScript:"const { google } = require('googleapis');\n\nconst SERVICE_ACCOUNT_JSON = JSON.parse(process.env.GOOGLE_SERVICE_ACCOUNT_JSON);\n\nconst auth = new google.auth.GoogleAuth({\n  credentials: SERVICE_ACCOUNT_JSON,\n  scopes: ['https://www.googleapis.com/auth/documents'],\n});\n\nconst docs = google.docs({ version: 'v1', auth });"}},{title:"Read from Google Docs",code:{Python:"DOCUMENT_ID = 'your-document-id'\n\nresult = docs_service.documents().get(documentId=DOCUMENT_ID).execute()\nprint(f\"The title of the document is: {result.get('title')}\")\n\ncontent = result.get('body').get('content')\nfor element in content:\n    if 'paragraph' in element:\n        for run in element['paragraph']['elements']:\n            if 'textRun' in run:\n                print(run['textRun']['content'])",JavaScript:"const DOCUMENT_ID = 'your-document-id';\n\nconst response = await docs.documents.get({\n  documentId: DOCUMENT_ID,\n});\n\nconsole.log(`The title of the document is: ${response.data.title}`);\n\nconst content = response.data.body.content;\ncontent.forEach(element => {\n  if (element.paragraph) {\n    element.paragraph.elements.forEach(run => {\n      if (run.textRun) {\n        console.log(run.textRun.content);\n      }\n    });\n  }\n});"}},{title:"Write to Google Docs",code:{Python:"DOCUMENT_ID = 'your-document-id'\n\nrequests = [\n    {\n        'insertText': {\n            'location': {\n                'index': 1,\n            },\n            'text': 'Hello from the Google Docs API!'\n        }\n    }\n]\n\nresult = docs_service.documents().batchUpdate(\n    documentId=DOCUMENT_ID,\n    body={'requests': requests}\n).execute()\n\nprint(f\"Document updated: {result.get('documentId')}\")",JavaScript:"const DOCUMENT_ID = 'your-document-id';\n\nconst requests = [\n  {\n    insertText: {\n      location: {\n        index: 1,\n      },\n      text: 'Hello from the Google Docs API!',\n    },\n  },\n];\n\nconst response = await docs.documents.batchUpdate({\n  documentId: DOCUMENT_ID,\n  requestBody: {\n    requests: requests,\n  },\n});\n\nconsole.log(`Document updated: ${response.data.documentId}`);"}}]},{title:"Slack",description:"Slack is a communication platform for teams to collaborate in real-time. Integrate with Slack to send messages, manage channels, and automate workflows.",tags:["communication","chat"],icon:(0,r.Y)(function(e){return(0,r.FD)(eD.A,(0,T._)((0,s._)({},e),{children:[(0,r.FD)("g",{clipPath:"url(#clip0_7378_478)",children:[(0,r.Y)("path",{fill:"#E01E5A",d:"M5.14 15.118a2.492 2.492 0 0 1-2.494 2.495A2.492 2.492 0 0 1 .15 15.118a2.492 2.492 0 0 1 2.495-2.494H5.14v2.494Zm1.247 0a2.492 2.492 0 0 1 2.495-2.494 2.492 2.492 0 0 1 2.494 2.494v6.236a2.492 2.492 0 0 1-2.494 2.495 2.492 2.492 0 0 1-2.495-2.495v-6.236Z"}),(0,r.Y)("path",{fill:"#36C5F0",d:"M8.882 5.102a2.492 2.492 0 0 1-2.495-2.494A2.492 2.492 0 0 1 8.882.113a2.492 2.492 0 0 1 2.494 2.495v2.494H8.882Zm0 1.267a2.492 2.492 0 0 1 2.494 2.494 2.492 2.492 0 0 1-2.494 2.495H2.627A2.492 2.492 0 0 1 .132 8.863a2.492 2.492 0 0 1 2.495-2.494h6.255Z"}),(0,r.Y)("path",{fill:"#2EB67D",d:"M18.879 8.863a2.492 2.492 0 0 1 2.494-2.494 2.492 2.492 0 0 1 2.495 2.494 2.492 2.492 0 0 1-2.495 2.495H18.88V8.863Zm-1.248 0a2.492 2.492 0 0 1-2.494 2.495 2.492 2.492 0 0 1-2.495-2.495V2.608A2.492 2.492 0 0 1 15.138.113a2.492 2.492 0 0 1 2.494 2.495v6.255Z"}),(0,r.Y)("path",{fill:"#ECB22E",d:"M15.137 18.86a2.492 2.492 0 0 1 2.494 2.494 2.492 2.492 0 0 1-2.494 2.495 2.492 2.492 0 0 1-2.495-2.495V18.86h2.495Zm0-1.247a2.492 2.492 0 0 1-2.495-2.495 2.492 2.492 0 0 1 2.495-2.494h6.255a2.492 2.492 0 0 1 2.495 2.494 2.492 2.492 0 0 1-2.495 2.495h-6.255Z"})]}),(0,r.Y)("defs",{children:(0,r.Y)("clipPath",{id:"clip0_7378_478",children:(0,r.Y)("path",{fill:"#fff",d:"M0 0h24v24H0z"})})})]}))},{}),configurationItems:[{key:"SLACK_BOT_TOKEN",title:"Bot Token",description:"[Create a Slack app](https://api.slack.com/apps) and obtain a Bot Token. This token allows your bot to interact with your Slack workspace.",required:!0}],codeSampleItems:[{title:"Secret usage",code:{Python:"import os\nfrom slack_sdk import WebClient\n\nclient = WebClient(token=os.environ['SLACK_BOT_TOKEN'])",JavaScript:"const { WebClient } = require('@slack/web-api');\n\nconst client = new WebClient(process.env.SLACK_BOT_TOKEN);"}},{title:"Message sending",code:{Python:'try:\n    response = client.chat_postMessage(\n        channel="#general",\n        text="Hello from your bot!"\n    )\n    print(f"Message sent: {response[\'ts\']}")\nexcept Exception as e:\n    print(f"Error sending message: {e}")',JavaScript:"try {\n  const result = await client.chat.postMessage({\n    channel: '#general',\n    text: 'Hello from your bot!',\n  });\n  console.log(`Message sent: ${result.ts}`);\n} catch (error) {\n  console.error(`Error sending message: ${error}`);\n}"}},{title:"File upload",code:{Python:'try:\n    response = client.files_upload_v2(\n        channels="#general",\n        file="path/to/file.txt",\n        title="Sample File",\n        initial_comment="Here\'s a file for your review."\n    )\n    print(f"File uploaded: {response[\'file\'][\'id\']}")\nexcept Exception as e:\n    print(f"Error uploading file: {e}")',JavaScript:"try {\n  const result = await client.files.uploadV2({\n    channels: '#general',\n    file: fs.createReadStream('path/to/file.txt'),\n    title: 'Sample File',\n    initial_comment: \"Here's a file for your review.\",\n  });\n  console.log(`File uploaded: ${result.file.id}`);\n} catch (error) {\n  console.error(`Error uploading file: ${error}`);\n}"}},{title:"Retrieving channel information",code:{Python:"try:\n    response = client.conversations_info(channel=\"C1234567890\")\n    print(f\"Channel name: {response['channel']['name']}\")\n    print(f\"Channel purpose: {response['channel']['purpose']['value']}\")\nexcept Exception as e:\n    print(f\"Error retrieving channel info: {e}\")",JavaScript:"try {\n  const result = await client.conversations.info({\n    channel: 'C1234567890'\n  });\n  console.log(`Channel name: ${result.channel.name}`);\n  console.log(`Channel purpose: ${result.channel.purpose.value}`);\n} catch (error) {\n  console.error(`Error retrieving channel info: ${error}`);\n}"}}]},{title:"Discord",description:"Discord is a communication platform designed for creating communities. Integrate with Discord to send messages, manage servers, and enhance user engagement.",tags:["communication","chat"],icon:(0,r.Y)(ek.A,{}),configurationItems:[{key:"DISCORD_BOT_TOKEN",title:"Bot Token",description:"[Create a Discord application](https://discord.com/developers/applications), add a bot to it, and paste the bot token below. This token allows your bot to interact with Discord servers.",required:!0}],codeSampleItems:[{title:"Secret usage",code:{Python:"import os\nimport discord\nfrom discord.ext import commands\n\nintents = discord.Intents.default()\nintents.message_content = True\nbot = commands.Bot(command_prefix='!', intents=intents)",JavaScript:"const { Client, GatewayIntentBits } = require('discord.js');\n\nconst client = new Client({\n  intents: [\n    GatewayIntentBits.Guilds,\n    GatewayIntentBits.GuildMessages,\n    GatewayIntentBits.MessageContent,\n  ],\n});"}},{title:"Bot setup and message handling",code:{Python:"@bot.event\nasync def on_ready():\n    print(f'We have logged in as {bot.user}')\n\n@bot.command()\nasync def hello(ctx):\n    await ctx.send('Hello!')\n\nbot.run(os.environ['DISCORD_BOT_TOKEN'])",JavaScript:"client.once('ready', () => {\n  console.log(`Logged in as ${client.user.tag}!`);\n});\n\nclient.on('messageCreate', async message => {\n  if (message.content === '!hello') {\n    await message.reply('Hello!');\n  }\n});\n\nclient.login(process.env.DISCORD_BOT_TOKEN);"}},{title:"Slash command",code:{Python:'@bot.tree.command(name="greet", description="Greet a user")\nasync def greet(interaction: discord.Interaction, user: discord.Member):\n    await interaction.response.send_message(f"Hello, {user.mention}!")\n\n@bot.event\nasync def on_ready():\n    await bot.tree.sync()\n    print(f\'We have logged in as {bot.user}\')\n\nbot.run(os.environ[\'DISCORD_BOT_TOKEN\'])',JavaScript:"const { Client, GatewayIntentBits, REST, Routes, SlashCommandBuilder } = require('discord.js');\n\nconst client = new Client({ intents: [GatewayIntentBits.Guilds] });\n\nconst commands = [\n  new SlashCommandBuilder()\n    .setName('greet')\n    .setDescription('Greet a user')\n    .addUserOption(option => option.setName('user').setDescription('The user to greet').setRequired(true)),\n];\n\nclient.once('ready', async () => {\n  console.log(`Logged in as ${client.user.tag}!`);\n\n  const rest = new REST({ version: '10' }).setToken(process.env.DISCORD_BOT_TOKEN);\n  try {\n    await rest.put(Routes.applicationCommands(client.user.id), { body: commands });\n    console.log('Slash commands registered');\n  } catch (error) {\n    console.error(error);\n  }\n});\n\nclient.on('interactionCreate', async interaction => {\n  if (!interaction.isCommand()) return;\n\n  if (interaction.commandName === 'greet') {\n    const user = interaction.options.getUser('user');\n    await interaction.reply(`Hello, ${user}!`);\n  }\n});\n\nclient.login(process.env.DISCORD_BOT_TOKEN);"}},{title:"Sending embeds",code:{Python:'@bot.command()\nasync def embed(ctx):\n    embed = discord.Embed(title="Example Embed", description="This is an example embed.", color=0x00ff00)\n    embed.add_field(name="Field 1", value="Value 1", inline=False)\n    embed.add_field(name="Field 2", value="Value 2", inline=False)\n    await ctx.send(embed=embed)',JavaScript:"client.on('messageCreate', async message => {\n  if (message.content === '!embed') {\n    const embed = new EmbedBuilder()\n      .setTitle('Example Embed')\n      .setDescription('This is an example embed.')\n      .setColor(0x00ff00)\n      .addFields(\n        { name: 'Field 1', value: 'Value 1' },\n        { name: 'Field 2', value: 'Value 2' }\n      );\n    await message.channel.send({ embeds: [embed] });\n  }\n});"}}]},{title:"Stripe",description:"Stripe is a payment processing platform that allows businesses to accept online payments. Integrate with Stripe to manage transactions, subscriptions, and billing.",tags:["payments"],icon:(0,r.Y)(function(e){return(0,r.FD)(eD.A,(0,T._)((0,s._)({},e),{children:[(0,r.FD)("g",{fillRule:"evenodd",clipPath:"url(#clip0_7378_479)",clipRule:"evenodd",children:[(0,r.Y)("path",{fill:"#635BFF",d:"M0 2a2 2 0 0 1 2-2h20a2 2 0 0 1 2 2v20a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2Z"}),(0,r.Y)("path",{fill:"#fff",d:"M11.064 9.33c0-.564.462-.786 1.23-.786 1.104 0 2.496.336 3.6.93V6.066C14.688 5.586 13.5 5.4 12.3 5.4c-2.946 0-4.902 1.536-4.902 4.104 0 4.002 5.514 3.366 5.514 5.094 0 .666-.582.882-1.392.882-1.206 0-2.742-.492-3.96-1.158v3.45c1.35.582 2.712.828 3.96.828 3.018 0 5.094-1.494 5.094-4.092-.024-4.32-5.55-3.552-5.55-5.178Z"})]}),(0,r.Y)("defs",{children:(0,r.Y)("clipPath",{id:"clip0_7378_479",children:(0,r.Y)("path",{fill:"#fff",d:"M0 0h24v24H0z"})})})]}))},{}),configurationItems:[{key:"STRIPE_SECRET_KEY",title:"Secret Key",description:"[Create a Stripe account](https://dashboard.stripe.com/register) and obtain your Secret Key from the [API keys page](https://dashboard.stripe.com/apikeys). This key allows access to your Stripe account for processing payments.",required:!0}],codeSampleItems:[{title:"Secret usage",code:{Python:"import os\nimport stripe\n\nstripe.api_key = os.environ['STRIPE_SECRET_KEY']",JavaScript:"const stripe = require('stripe')(process.env.STRIPE_SECRET_KEY);"}},{title:"Create a payment intent",code:{Python:"try:\n    intent = stripe.PaymentIntent.create(\n        amount=2000,  # Amount in cents\n        currency='usd',\n        payment_method_types=['card'],\n    )\n    print(f\"PaymentIntent created: {intent.id}\")\nexcept stripe.error.StripeError as e:\n    print(f\"Error creating PaymentIntent: {e}\")",JavaScript:"try {\n  const paymentIntent = await stripe.paymentIntents.create({\n    amount: 2000, // Amount in cents\n    currency: 'usd',\n    payment_method_types: ['card'],\n  });\n  console.log(`PaymentIntent created: ${paymentIntent.id}`);\n} catch (error) {\n  console.error(`Error creating PaymentIntent: ${error.message}`);\n}"}},{title:"Create a customer",code:{Python:"try:\n    customer = stripe.Customer.create(\n        email='customer@example.com',\n        name='John Doe',\n        description='Test customer'\n    )\n    print(f\"Customer created: {customer.id}\")\nexcept stripe.error.StripeError as e:\n    print(f\"Error creating customer: {e}\")",JavaScript:"try {\n  const customer = await stripe.customers.create({\n    email: 'customer@example.com',\n    name: 'John Doe',\n    description: 'Test customer'\n  });\n  console.log(`Customer created: ${customer.id}`);\n} catch (error) {\n  console.error(`Error creating customer: ${error.message}`);\n}"}},{title:"Create a subscription",code:{Python:"try:\n    subscription = stripe.Subscription.create(\n        customer='cus_1234567890',\n        items=[{'price': 'price_1234567890'}]\n    )\n    print(f\"Subscription created: {subscription.id}\")\nexcept stripe.error.StripeError as e:\n    print(f\"Error creating subscription: {e}\")",JavaScript:"try {\n  const subscription = await stripe.subscriptions.create({\n    customer: 'cus_1234567890',\n    items: [{ price: 'price_1234567890' }]\n  });\n  console.log(`Subscription created: ${subscription.id}`);\n} catch (error) {\n  console.error(`Error creating subscription: ${error.message}`);\n}"}}]},{title:"HubSpot",description:"HubSpot provides a comprehensive CRM platform with powerful API capabilities. Integrate HubSpot's features into your applications to manage contacts, deals, marketing campaigns, and more using secure private apps.",tags:["CRM","Marketing","API"],icon:(0,r.Y)(function(e){return(0,r.Y)(eD.A,(0,T._)((0,s._)({},e),{children:(0,r.Y)("path",{fill:"#FF7A59",d:"M12.478 10.13a5.463 5.463 0 0 0-1.718 3.984 5.45 5.45 0 0 0 1.095 3.285L9.77 19.496a1.72 1.72 0 0 0-.59-.105 1.694 1.694 0 0 0-1.697 1.702A1.685 1.685 0 0 0 9.18 22.78c.455 0 .88-.164 1.205-.488a1.692 1.692 0 0 0 .417-1.71l2.106-2.114a5.477 5.477 0 0 0 8.814-4.35 5.475 5.475 0 0 0-4.641-5.42V6.103a1.924 1.924 0 0 0 1.188-1.807c0-1.099-.88-2.017-1.98-2.017-1.099 0-1.967.918-1.967 2.017 0 .805.451 1.495 1.188 1.807v2.577a5.45 5.45 0 0 0-1.798.573c-1.162-.88-4.948-3.61-7.113-5.256.05-.185.084-.379.084-.58 0-1.214-.99-2.2-2.207-2.2a2.2 2.2 0 0 0 0 4.402 2.2 2.2 0 0 0 1.129-.32l6.873 4.83Zm3.77 6.89a2.906 2.906 0 1 1 0-5.813 2.906 2.906 0 0 1 0 5.813Z"})}))},{}),configurationItems:[{key:"HUBSPOT_ACCESS_TOKEN",title:"Access Token",description:"To get started, you'll need to create a private app in HubSpot. Go to Settings > Account Setup > Integrations > Private Apps. Create a new private app, select the necessary scopes, and generate your access token. Paste the token below.",placeholder:"pat-na1-----",required:!0}],codeSampleItems:[{title:"Authentication setup",code:{Python:"import os\nfrom hubspot import HubSpot\n\naccess_token = os.environ['HUBSPOT_ACCESS_TOKEN']\nclient = HubSpot(access_token=access_token)",JavaScript:"const hubspot = require('@hubspot/api-client');\n\nconst accessToken = process.env.HUBSPOT_ACCESS_TOKEN;\nconst hubspotClient = new hubspot.Client({ accessToken });"}},{title:"Fetch contacts",code:{Python:'from hubspot import HubSpot\n\naccess_token = os.environ[\'HUBSPOT_ACCESS_TOKEN\']\nclient = HubSpot(access_token=access_token)\n\ndef get_all_contacts():\n    all_contacts = []\n    after = None\n    while True:\n        contacts_page = client.crm.contacts.basic_api.get_page(\n            limit=100,\n            after=after,\n            properties=["firstname", "lastname", "email"]\n        )\n        all_contacts.extend(contacts_page.results)\n        if not contacts_page.paging:\n            break\n        after = contacts_page.paging.next.after\n    return all_contacts\n\ncontacts = get_all_contacts()\nfor contact in contacts:\n    print(f"Name: {contact.properties[\'firstname\']} {contact.properties[\'lastname\']}")\n    print(f"Email: {contact.properties[\'email\']}")\n    print("---")',JavaScript:"const hubspot = require('@hubspot/api-client');\n\nconst accessToken = process.env.HUBSPOT_ACCESS_TOKEN;\nconst hubspotClient = new hubspot.Client({ accessToken });\n\nasync function getAllContacts() {\n  const allContacts = [];\n  let after = undefined;\n  let hasMore = true;\n\n  while (hasMore) {\n    const apiResponse = await hubspotClient.crm.contacts.basicApi.getPage(\n      100,\n      after,\n      ['firstname', 'lastname', 'email']\n    );\n\n    allContacts.push(...apiResponse.results);\n\n    hasMore = !!apiResponse.paging;\n    after = hasMore ? apiResponse.paging.next.after : undefined;\n  }\n\n  return allContacts;\n}\n\ngetAllContacts()\n  .then(contacts => {\n    contacts.forEach(contact => {\n      console.log(`Name: ${contact.properties.firstname} ${contact.properties.lastname}`);\n      console.log(`Email: ${contact.properties.email}`);\n      console.log('---');\n    });\n  })\n  .catch(err => console.error('Error: ', err));"}}]}],eI=t(58370),eF=t(47388),eT=(0,G.x)({root:[V.wp.flex.column,V.wp.gap(12)],description:[V.wp.flex.column,V.wp.gap(4)],serviceList:[V.wp.flex.column,V.wp.gap(16),V.wp.pb(8)],linkButton:[V.wp.reset.button,V.wp.linkStyle]});function eP(e){var n=e.openPane,t=e.query,o=e.editSecretsAuthzErrorMessage,a=(0,eI.Vv)(),s=a.getDescription,c=a.Icon,u=a.getTitle,d=R(),p=(0,x.A)().secrets,f=(0,l._)((0,i.useState)(new Map),2),h=f[0],m=f[1];(0,i.useEffect)(function(){return p.watch(function(e){m(e)})},[p]);var g=(0,i.useCallback)(function(e){return e.filter(function(e){return e.required}).every(function(e){return!!h.get(e.key)})},[h]),w=(0,i.useMemo)(function(){return eR.filter(function(e){return g(e.configurationItems)})},[g]),b=(0,i.useMemo)(function(){return eE.filter(function(e){return"connected"===d[e.serviceName]})},[d]),C=(0,i.useMemo)(function(){return(0,y._)(w).concat((0,y._)(b))},[w,b]),_=(0,i.useMemo)(function(){return new Y.Rk(C,{fuzzy:!1,selector:function(e){return"pane"in e?"".concat(u(e.pane)," ").concat(s(e.pane)," ").concat(e.tags.join(" ")):"".concat(e.title," ").concat(e.description," ").concat(e.tags.join(" "))}})},[C,s,u]),k=(0,i.useMemo)(function(){return t?_.find(t).map(function(e){return e.item}):C},[C,_,t]);return(0,r.FD)(en.S,{css:eT.root,px:8,children:[(0,r.Y)(X.EY,{variant:"subheadBig",children:"Connected Services"}),(0,r.Y)(en.S,{css:eT.description,children:(0,r.FD)(X.EY,{variant:"text",color:"dimmer",children:[(0,r.FD)("div",{children:["Connect your Repl to a variety of Replit's services and third-party services using"," ",(0,r.Y)("button",{css:eT.linkButton,onClick:function(){(0,v.u4)(v.AZ.INTEGRATIONS_PANE_USED,{action:"secretsOpened",source:"description"}),n({type:"envEditor"})},children:"Secrets"}),"."]}),(0,r.FD)("div",{children:["Never share or expose tokens in code."," ",(0,r.Y)(S(),{href:A.ik.SECRETS_SAFETY,target:"_blank",rel:"noopener",css:eT.linkButton,children:"Learn how Replit keeps your Secrets safe"}),"."]})]})}),k.length>0?(0,r.Y)(r.FK,{children:(0,r.Y)(en.S,{tag:"ul",css:eT.serviceList,children:k.map(function(e){if("pane"in e){var t,i=u(e.pane);return(0,r.Y)(ey,{title:i,description:null!=(t=s(e.pane))?t:"",icon:(0,r.Y)(c,{pane:e.pane}),onClick:function(){(0,v.u4)(v.AZ.INTEGRATIONS_PANE_USED,{action:"replitServiceOpened",service:i}),n(e.pane)},isConnected:!0,configIcon:(0,r.Y)(eF.A,{}),configIconPosition:"right"},i)}if("title"in e)return(0,r.Y)(eC,{title:e.title,icon:e.icon,isConnected:!0,description:e.description,configurationItems:e.configurationItems,codeSampleItems:e.codeSampleItems,openPane:n,editSecretsAuthzErrorMessage:o},e.title)})})}):(0,r.Y)(X.EY,{variant:"subheadDefault",children:"No matching services."})]})}var eL=(0,G.x)({root:[V.wp.flex.column,V.wp.gap(12)],description:[V.wp.flex.column,V.wp.gap(4)],serviceList:[V.wp.flex.column,V.wp.gap(16),V.wp.pb(8)],linkButton:[V.wp.reset.button,V.wp.linkStyle]});function eU(e){var n=e.openPane,t=e.query,o=e.editSecretsAuthzErrorMessage,a=(0,x.A)().secrets,s=(0,l._)((0,i.useState)(new Map),2),c=s[0],u=s[1];(0,i.useEffect)(function(){return a.watch(function(e){u(e)})},[a]);var d=(0,i.useCallback)(function(e){return e.filter(function(e){return e.required}).every(function(e){return!!c.get(e.key)})},[c]),p=(0,i.useMemo)(function(){return new Y.Rk(eR,{fuzzy:!1,selector:function(e){return"".concat(e.title," ").concat(e.description," ").concat(e.tags.join(" "))}})},[]),f=(0,i.useMemo)(function(){return t?p.find(t).map(function(e){return e.item}):eR},[p,t]);return(0,r.FD)(en.S,{css:eL.root,px:8,children:[(0,r.Y)(X.EY,{variant:"subheadBig",children:"External Services"}),(0,r.Y)(en.S,{css:eL.description,children:(0,r.FD)(X.EY,{variant:"text",color:"dimmer",children:[(0,r.FD)("div",{children:["Connect your App to a variety of third-party services using"," ",(0,r.Y)("button",{css:eL.linkButton,onClick:function(){(0,v.u4)(v.AZ.INTEGRATIONS_PANE_USED,{action:"secretsOpened",source:"description"}),n({type:"envEditor"})},children:"Secrets"}),"."]}),(0,r.FD)("div",{children:["Never share or expose tokens in code."," ",(0,r.Y)(S(),{href:A.ik.SECRETS_SAFETY,target:"_blank",rel:"noopener",css:eL.linkButton,children:"Learn how Replit keeps your Secrets safe"}),"."]})]})}),f.length>0?(0,r.Y)(r.FK,{children:(0,r.Y)(en.S,{css:eL.serviceList,children:f.map(function(e){return(0,r.Y)(eC,{title:e.title,icon:e.icon,description:e.description,configurationItems:e.configurationItems,codeSampleItems:e.codeSampleItems,openPane:n,isConnected:d(e.configurationItems),editSecretsAuthzErrorMessage:o},e.title)})})}):(0,r.Y)(X.EY,{variant:"subheadDefault",children:"No matching services."})]})}var eN=t(77775),eO=(0,G.x)({root:[V.wp.flex.column,V.wp.gap(12)]});function eM(e){var n=e.openPane,t=e.query,o=(0,eI.Vv)(),a=o.getDescription,l=o.Icon,s=o.getTitle,c=R(),u=(0,i.useMemo)(function(){return new Y.Rk(eE,{fuzzy:!1,selector:function(e){return"".concat(s(e.pane)," ").concat(a(e.pane)," ").concat(e.tags.join(" "))}})},[a,s]),d=(0,i.useMemo)(function(){return t?u.find(t).map(function(e){return e.item}):eE},[u,t]);return(0,r.FD)(en.S,{css:eO.root,px:8,pb:8,children:[(0,r.Y)(X.EY,{variant:"subheadBig",children:"Replit Services"}),(0,r.Y)(X.EY,{variant:"text",color:"dimmer",children:"Connect to Replit's storage and auth services."}),d.length>0?null:(0,r.Y)(X.EY,{variant:"subheadDefault",children:"No matching services."}),eE.map(function(e){var t,i=s(e.pane);return d.includes(e)&&i!==eN.v?(0,r.Y)(ey,{title:i,description:null!=(t=a(e.pane))?t:"",icon:(0,r.Y)(l,{pane:e.pane}),onClick:function(){(0,v.u4)(v.AZ.INTEGRATIONS_PANE_USED,{action:"replitServiceOpened",service:i}),n(e.pane)},isConnected:"connected"===c[e.serviceName],configIcon:(0,r.Y)(eF.A,{}),configIconPosition:"right"},i):null})]})}var eB=t(79209),eH=t(42764),ez=t(81526),eW=t(51705),eG=t(22318),eV=t(90694),ej=t(4990),eZ=(0,eB.AH)([V.wp.maxWidth(600),V.wp.width("100%"),{alignSelf:"center"}]),eq=(0,G.x)({root:[V.wp.width("100%"),V.wp.overflowY("auto"),V.wp.flex.column,V.wp.flex.grow(1),V.wp.height("100%"),V.wp.width("100%"),{margin:"0 auto"}],header:[eZ,V.wp.backgroundColor.backgroundDefault,V.wp.flex.growAndShrink(0),V.wp.p(8),V.wp.flex.row,V.wp.gap(12),V.wp.position.sticky,V.wp.top(0),V.wp.zIndex(1),{alignSelf:"center","& > div:first-child":{flexGrow:1}}],content:[V.wp.flex.growAndShrink(1),V.wp.width("100%"),V.wp.gap(24),V.wp.pb(8),eZ]});function eK(e){var n,t,o,a=e.openPane,c=(0,l._)((0,i.useState)(null),2),u=c[0],p=c[1],y=(0,l._)((0,i.useState)(""),2),b=y[0],S=y[1],Y=(0,m.A)(),A=(0,w.A)("integrations-pane","integrations-toast").dismiss,x=(n={variables:{replId:Y}},t=(0,s._)({},f,n),d.I(h,t)).data,C=(null==x?void 0:x.getRepl.__typename)==="Repl"?x.getRepl.authorizations.editSecrets:void 0,_=(null==C?void 0:C.isAuthorized)===!0?void 0:null!=(o=null==C?void 0:C.message)?o:"Checking Authorizations";return(0,i.useEffect)(function(){A()},[A]),(0,g.M)(v.AZ.INTEGRATIONS_PANE_USED,{action:"viewed"}),(0,r.Y)(E,{children:(0,r.FD)(en.S,{css:eq.root,children:[(0,r.FD)(en.S,{css:eq.header,children:[(0,r.Y)(ez.I,{placeholder:"Search for a service...",value:b,onChange:function(e){return S(e.target.value)},onBlur:function(){b&&(0,v.u4)(v.AZ.INTEGRATIONS_PANE_USED,{action:"searchUsed",query:b})},onClear:function(){return S("")}}),(0,r.FD)(eH.e2,{name:"integrations-category",value:u,onChange:p,row:!0,children:[(0,r.Y)(eH.$O,{id:"all",value:null,text:"All",icon:(0,r.Y)(eV.A,{})}),(0,r.Y)(eH.$O,{id:"connected",value:"connected",text:"Connected",icon:(0,r.Y)(eG.A,{})}),(0,r.Y)(eH.$O,{id:"replit",value:"replit",text:"Replit",icon:(0,r.Y)(ej.A,{})}),(0,r.Y)(eH.$O,{id:"external",value:"external",text:"External",icon:(0,r.Y)(eW.A,{})})]})]}),(0,r.FD)(en.S,{css:eq.content,children:[u&&"connected"!==u?null:(0,r.Y)(eP,{query:b,openPane:a,editSecretsAuthzErrorMessage:_}),u&&"replit"!==u?null:(0,r.Y)(eM,{query:b,openPane:a}),u&&"external"!==u?null:(0,r.Y)(eU,{query:b,openPane:a,editSecretsAuthzErrorMessage:_})]})]})})}var e$=t(23072),eJ=o.ZU.Object({type:o.ZU.Literal("integrations")}),eQ={Content:function(e){var n=e.options.performPaneOperation,t=(0,i.useCallback)(function(e){return n({operation:"open",secondary:!0,pane:e})},[n]);return(0,r.Y)(eK,{openPane:t})},Icon:function(e){var n=e.size;return(0,r.Y)(e$.A,{size:n})},getTitle:function(){return"Integrations"},description:"Connect to Replit-native and external services",category:eI.bY.CloudServices,decode:function(e){return a.T(eJ,e)}}},62132:(e,n,t)=>{"use strict";function r(e){return e.map(function(e){return"group"===e.data.type?e.data.key:e.data.key||e.data.label}).join(":")}t.d(n,{p:()=>r})},62153:(e,n,t)=>{"use strict";t.d(n,{J:()=>c});var r=t(17844),i=t(93629),o=t(21462),a=t(45485),l=t(80256),s={nodejs:["package.json","package-lock.json","yarn.lock","node_modules/"],python2:["poetry.lock","pyproject.toml","requirements.txt",".venv/",".local"],python3:["poetry.lock","pyproject.toml","requirements.txt",".venv/",".local"],ruby:["Gemfile","Gemfile.lock"],java:["pom.xml","target"]};function c(){var e=(0,l.I)(),n=(0,a.g)();return{configs:(0,o.useMemo)(function(){var t=(null==e?void 0:e.packagers)||[],o=(null==t?void 0:t.map(function(e){var n,t;return(0,i._)((0,r._)({},e),{title:e.language,packagerFiles:(null==(n=e.packagerFiles)?void 0:n.length)?e.packagerFiles:null!=(t=s[e.language])?t:[]})}))||[];return n&&o.push({id:"html",title:"html",name:"HTML Packager",language:"html",packageSearch:!0,guessImports:!1,packagerFiles:[]}),o.push({id:"nix",title:"system",name:"System Dependencies",language:"nix",packageSearch:!0,guessImports:!1,packagerFiles:["replit.nix"]}),o},[e,n]),loading:!e}}},62356:(e,n,t)=>{"use strict";t.d(n,{A:()=>L});var r=t(29935),i=t(12694),o=t(86105),a=t(82643),l=t(96907),s=t.n(l),c=t(20207),u=t(72826),d=t(69549),p=t(12584),f=t(41114);function h(){var e=(0,p._)(["\n  fragment GitServiceGitHubUser on CurrentUser {\n    image\n    username\n    email\n    firstName\n    lastName\n    gitHubInfo {\n      isAppCurrentlyInstalled\n      accessToken\n      userInfo {\n        name\n        username\n        email\n        avatarUrl\n      }\n    }\n  }\n"]);return h=function(){return e},e}function m(){var e=(0,p._)(["\n  query GitServiceCurrentUser {\n    currentUser {\n      id\n      ...GitServiceGitHubUser\n    }\n  }\n  ","\n"]);return m=function(){return e},e}var g=(0,f.J1)(h()),v=(0,f.J1)(m(),g),w=t(40493),y=t(41739);function b(e){return S.apply(this,arguments)}function S(){return(S=(0,r._)(function(e){var n,t,r,i,o,l,s,u,d,p,f,h,m,g,b,S,Y,A,x,C,_,k;return(0,a.YH)(this,function(a){switch(a.label){case 0:return n=e.defaultUsername,t=e.defaultUserId,r=e.onProfiles,l=new Map,[4,null===w.V||void 0===w.V?void 0:w.V.query({query:v,fetchPolicy:"network-only",context:{noBatch:!0}})];case 1:var D,E;return f=(p=null!=(d=null==(u=(null!=(s=a.sent())?s:{data:null}).data)?void 0:u.currentUser)?d:{username:n,id:t,firstName:null,lastName:null}).id,h=p.firstName,m=p.lastName,g=p.username,f&&g&&(S=g,h&&(S=h),m&&(S=m),h&&m&&(S=h+" "+m),A={provider:c.HJ.REPLIT_DEFAULT,email:"".concat(f,"-").concat(g,"@").concat(y.O),name:S,username:g,avatar:null!=(Y=null==u||null==(b=u.currentUser)?void 0:b.image)?Y:null},l.set(A.provider,A)),(x=null==u||null==(o=u.currentUser)||null==(i=o.gitHubInfo)?void 0:i.userInfo)&&x.email&&x.username&&(null==u||null==(E=u.currentUser)||null==(D=E.gitHubInfo)?void 0:D.isAppCurrentlyInstalled)&&(k={provider:c.HJ.GITHUB,email:x.email,name:null!=(C=x.name)?C:x.username,username:x.username,avatar:null!=(_=x.avatarUrl)?_:null},l.set(k.provider,k)),r(l),[2]}})})).apply(this,arguments)}var Y=t(37743),A=t(17844),x=t(90629),C=t(42795),_=t(39282),k=t(34626),D=function(){function e(n,t){(0,Y._)(this,e),this.cache=new Map,this.lastInvalidation=0,this.ttl=n,this.debounceTime=t}var n=e.prototype;return n.has=function(e){return this.cache.has(e)},n.get=function(e){var n=this.cache.get(e);if(!n)throw Error("No value found for key: ".concat(e));return n.result},n.set=function(e,n){var t=this,r=this.cache.get(e);r&&(clearTimeout(r.timeout),this.cache.delete(e));var i={result:n,timeout:setTimeout(function(){return t.cache.delete(e)},this.ttl),pending:!0};n.finally(function(){return i.pending=!1}),this.cache.set(e,i)},n.invalidate=function(){if(!(Date.now()-this.lastInvalidation<this.debounceTime)){var e=new Map,n=!0,t=!1,r=void 0;try{for(var o,a=this.cache[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=(0,i._)(o.value,2),s=l[0],c=l[1];c.pending?e.set(s,c):clearTimeout(c.timeout)}}catch(e){t=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(t)throw r}}this.cache=e,this.lastInvalidation=Date.now()}},n.clear=function(){var e=!0,n=!1,t=void 0;try{for(var r,i=this.cache.values()[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value;clearTimeout(o.timeout)}}catch(e){n=!0,t=e}finally{try{e||null==i.return||i.return()}finally{if(n)throw t}}this.cache.clear(),this.lastInvalidation=0},e}(),E=t(22425);function R(){return(R=(0,r._)(function(e,n,t,r){var i,o,l,s,u,d,p;return(0,a.YH)(this,function(a){switch(a.label){case 0:if("open"!==e.status)return[2,{output:"JS Error\nchannel closed before command was run",error:c.uA.CHANNEL_CLOSED}];a.label=1;case 1:return a.trys.push([1,3,,4]),i="",o=e.onCommand(function(e){null!==e.output&&void 0!==e.output&&(i+=e.output)}),l=void 0,(s=Promise.race([new Promise(function(e){return l=setTimeout(e,9e4)}),e.request({exec:{env:t,args:n,noUserEnv:!0}})])).finally(function(){o(),clearTimeout(l)}),[4,s];case 2:if(void 0===(u=a.sent()))return k.vF.error("Git request timed out.",(0,A._)({appService:"git",command:n,gitEnv:JSON.stringify(t),TIMEOUT:9e4},r)),[2,{output:i,error:c.uA.TIMEOUT}];if(!u.ok&&u.channelClosed)return[2,{output:"JS Error\nchannel closed during command execution",error:c.uA.CHANNEL_CLOSED}];if(u.error||!u.ok)return[2,{output:d="".concat(u.error,"\n").concat(i),error:(0,c.sg)(d)}];return[2,{output:i,error:null}];case 3:return p=a.sent(),x.v4(function(e){e.setTag("service","git"),e.setExtra("command",n),e.setExtra("env",t),r&&e.setExtra("options",r),x.Cp(p)}),[2,{output:"JS Error\n".concat(String(p)),error:c.uA.UNKNOWN_NOT_GIT}];case 4:return[2]}})})).apply(this,arguments)}var I=function(){function e(n){var t=this,i=n.container,o=n.getEnv,l=n.awaitPromise;(0,Y._)(this,e),this.cache=new D(3e4,2e3),this.running=(0,_.F)(!1),this.queue=[],i.openChannel({service:"exec"},function(e){var n,i,s=e.channel,c=(n=(0,r._)(function(e,n){var t,r;return(0,a.YH)(this,function(i){switch(i.label){case 0:if(0===e.length)throw Error("Expected at least one command");if(!l)return[3,2];return[4,l];case 1:i.sent(),i.label=2;case 2:return t=Date.now(),[4,function(e,n,t,r){return R.apply(this,arguments)}(s,["bash","-c",Array.isArray(e)?e.join(" && "):e],o(),n)];case 3:if(r=i.sent(),(0,E.L)(e,r,!1,t),r.error)return[2,{error:r.error}];return[2,{output:(null==n?void 0:n.verbatim)?r.output:r.output.trim(),error:null}]}})}),function(e,t){return n.apply(this,arguments)}),u=function(e,n){if(0===e.length)throw Error("Expected at least one command");var r=Array.isArray(e)?e.join(" && "):e;if(t.cache.has(r)){var i=t.cache.get(r);return i.then(function(n){(0,E.L)(e,n,!0)}),i}var o=c(r,n);return t.cache.set(r,o),o},d=function(e,n){return t.cache.clear(),c(e,n)},p=(i=(0,r._)(function(){var e;return(0,a.YH)(this,function(n){switch(n.label){case 0:if(!(t.queue.length>0)||"open"!==s.status)return[3,7];if(!(e=t.queue.shift()))return[3,6];if("read"!==e.type)return[3,2];return[4,e.fn(u)];case 1:case 3:return n.sent(),[3,6];case 2:if("write"!==e.type)return[3,4];return[4,e.fn(d)];case 4:return[4,e.fn(c)];case 5:n.sent(),n.label=6;case 6:return[3,0];case 7:return 0===t.queue.length&&t.running.set(!1),[2]}})}),function(){return i.apply(this,arguments)});return t.running.current&&p(),t.running.subscribe(function(e){e&&p()})})}var n=e.prototype;return n.add=function(e,n){var t,i=(0,C.A)();return this.queue.push({type:n,fn:(t=(0,r._)(function(n){var t;return(0,a.YH)(this,function(r){switch(r.label){case 0:return[4,e(n)];case 1:return t=r.sent(),i.resolve(t),[2]}})}),function(e){return t.apply(this,arguments)})}),this.running.current||this.running.set(!0),i.promise},n.wrap=function(e,n){var t=this;if("function"!=typeof e)throw Error("Expected a function");return function(){for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.add(function(n){return e.apply(void 0,[n].concat((0,o._)(i)))},n)}},e}(),F=t(52340),T=t(7512),P=".git";function L(e){var n,t=e.container,l=e.fs,p=e.provideProfiles,f=void 0===p?b:p,h=(0,u.Ay)();h.setMaxListeners(1/0);var m=(0,c.iM)(),g=!1,v=new Map,w=null,y=t.getContext(),S=(n=(0,r._)(function(e){var n,t;return(0,a.YH)(this,function(r){switch(r.label){case 0:return[4,f({defaultUsername:null==y||null==(n=y.currentUser)?void 0:n.username,defaultUserId:null==y||null==(t=y.currentUser)?void 0:t.id,onProfiles:function(n){var t=!0,r=!1,o=void 0;try{for(var a,l=n[Symbol.iterator]();!(t=(a=l.next()).done);t=!0){var s=(0,i._)(a.value,2),u=s[0],d=s[1];v.set(u,d),h.emit(c.JC.NEW_PROFILE)}}catch(e){r=!0,o=e}finally{try{t||null==l.return||l.return()}finally{if(r)throw o}}n.has(c.HJ.GITHUB)||v.delete(c.HJ.GITHUB);var p=v.get(c.HJ.REPLIT_DEFAULT),f=v.get(c.HJ.GITHUB);if(w&&!e&&(e=w.provider),e===c.HJ.GITHUB&&f)w=f;else{if(!p)return;w=p}h.emit(c.JC.CHANGED_PROFILE)}})];case 1:return[2,r.sent()]}})}),function(e){return n.apply(this,arguments)}),Y=new I({container:t,getEnv:function(){return m},awaitPromise:S(c.HJ.GITHUB)});h.on(c.JC.FS_CHANGE,function(){return Y.cache.invalidate()}),h.on(c.JC.FORCED_REFRESH,function(){return Y.cache.invalidate()}),h.on(c.JC.NEW_PROFILE,function(){return Y.cache.invalidate()}),h.on(c.JC.CHANGED_PROFILE,function(){return Y.cache.invalidate()});var A=function(){var e,n=t.getContext(),r=null==n||null==(e=n.currentUser)?void 0:e.id;if(null!=r){var i="[init]\ndefaultBranch = main\n[user]\n";""!==m.GIT_AUTHOR_EMAIL&&(i+="email = ".concat(m.GIT_AUTHOR_EMAIL.replace(/'/g,"'\"'\"'"),"\n")),""!==m.GIT_AUTHOR_NAME&&(i+="name = ".concat(m.GIT_AUTHOR_NAME.replace(/'/g,"'\"'\"'"),"\n"));var o="/run/replit/user/".concat(r,"/.config/git");null!=r&&t.exec("bash","-c","tmpf=$(mktemp); mkdir -p ".concat(o," && echo '").concat(i,'\' > "$tmpf" && mv "$tmpf" ').concat("".concat(o,"/config")))}};return t.onConnectionStateChanged(function(e){e===d.KN.CONNECTED&&A()}),h.on(c.JC.CHANGED_PROFILE,function(){null!=w&&(m=(0,c.iM)({author:{username:w.name,email:w.email}}),A())}),{getEnv:function(){return m},getProfiles:function(){return Array.from(v.values())},hasProfile:function(e){return v.has(e)},getProfile:function(e){var n=v.get(e);if(!n)throw Error("Fetched a profile that has not been setup!");return n},addProfile:function(e){v.set(e.provider,e),h.emit(c.JC.NEW_PROFILE)},getCurrentProfile:function(){return w},setCurrentProfile:function(e){var n=v.get(e);if(!n)throw Error("Can't set a non-existent profile!");w=n,m=(0,c.iM)({author:{username:n.name,email:n.email}}),h.emit(c.JC.CHANGED_PROFILE)},onProfileAdded:function(e){var n=function(){e(Array.from(v.values()))};return h.on(c.JC.NEW_PROFILE,n),function(){h.off(c.JC.NEW_PROFILE,n)}},onCurrentProfileChanged:function(e){var n=function(){e(w)};return h.on(c.JC.CHANGED_PROFILE,n),function(){h.off(c.JC.CHANGED_PROFILE,n)}},refreshProfiles:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).preferredProvider;return S(e)},onRefresh:function(e){g||(!function(e,n,t){var i,l,u,d,p,f,h,m,g,v,w=!1,y=!1,b=(i=function(){return t.emit(c.JC.FS_CHANGE)},d=(l={wait:1e3,cooldown:5e3,maxWait:5e3}).wait,p=l.cooldown,f=l.maxWait,h=null,m=!1,g=s()(function(e){return h=setTimeout(function(){return h=null},p),m=!1,u=i.apply(void 0,(0,o._)(e))},d,{maxWait:f}),(v=function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return null!==h?u:(m||(m=!0),g(n))}).cancel=function(){null!==h?(clearTimeout(h),h=null):(g.cancel(),m=!1)},v.flush=function(){return null!==h?(clearTimeout(h),h=null,u):g.flush()},v.isPending=function(){return m},v.isInCooldown=function(){return null!==h},v);function S(){return(S=(0,r._)(function(){var t;return(0,a.YH)(this,function(r){return t=!0,n.watchDir(F.Dl,{onChange:function(r){!w&&r.find(function(e){return e.filename===P&&e.type===T.pt.Directory})&&(function(){if(!w){w=!0;var t=!0;n.watchDir(P,{onChange:function(){t?t=!1:b()},onMoveOrDelete:function(){w=!1,b()},onError:function(n,t){w=!1,RegExp(".+permission denied","im").test(n.message)||e.unrecoverableError(n,t)}})}}(),t||b()),t&&(t=!1)},onError:function(n,t){return e.unrecoverableError(n,t)}}),[2]})})).apply(this,arguments)}!function(){S.apply(this,arguments)}(),n.onStatusChange(function(e){w&&(e===T.sn.Syncing&&b.isInCooldown()?y=!0:e===T.sn.Clean&&(y||b(),y=!1))})}(t,l,h),g=!0);var n=function(){return e(c.JC.FS_CHANGE)},i=function(){return e(c.JC.FORCED_REFRESH)},u=function(){return e(c.JC.NEW_PROFILE)},d=function(){return e(c.JC.CHANGED_PROFILE)};return h.on(c.JC.FS_CHANGE,n),h.on(c.JC.FORCED_REFRESH,i),h.on(c.JC.NEW_PROFILE,u),h.on(c.JC.CHANGED_PROFILE,d),function(){h.off(c.JC.FS_CHANGE,n),h.off(c.JC.FORCED_REFRESH,i),h.off(c.JC.NEW_PROFILE,u),h.off(c.JC.CHANGED_PROFILE,d)}},forceRefresh:function(){h.emit(c.JC.FORCED_REFRESH)},isBusy:function(){return Y.running.current},onBusyChange:function(e){var n=!1,t=s()(e,200);return Y.running.subscribe(function(e){n&&!e?(t(!1),n=!1):!n&&e&&(t(!0),n=!0)})},init:Y.wrap(c.rv,"write"),isInitialized:Y.wrap(c.$g,"read"),lsFiles:Y.wrap(c.TR,"read"),status:Y.wrap(c.Dx,"read"),log:Y.wrap(c.FR,"read"),findDefaultBranches:Y.wrap(c.du,"read"),listBranches:Y.wrap(c.z0,"read"),setBranchUpstream:Y.wrap(c.qE,"write"),stageFiles:Y.wrap(c.Q,"write"),commit:Y.wrap(c.om,"write"),switchBranch:Y.wrap(c.He,"write"),branchExists:Y.wrap(c.xd,"read"),createBranch:Y.wrap(c.nI,"write"),getRemotes:Y.wrap(c.g$,"read"),fetch:Y.wrap(c.FW,"write"),canMergeBranches:Y.wrap(c.TL,"read"),pull:Y.wrap(c.C4,"write"),push:Y.wrap(c.Z3,"write"),getRepositoryState:Y.wrap(c.Ew,"read"),getFileContents:Y.wrap(c.Pb,"read"),addRemote:Y.wrap(c.is,"write"),removeRemote:Y.wrap(c.jz,"write"),setRemoteURL:Y.wrap(c.CY,"write"),getBranch:Y.wrap(c.j5,"read"),restoreFiles:Y.wrap(c.QA,"write"),lastFetched:Y.wrap(c.G_,"read"),merge:Y.wrap(c.pk,"write"),mergeContinue:Y.wrap(c.WC,"write"),mergeAbort:Y.wrap(c.DZ,"write"),getConflictingFiles:Y.wrap(c.gP,"read"),getMergingRefs:Y.wrap(c.U4,"read"),getFilesForCommit:Y.wrap(c.uD,"read"),getCommit:Y.wrap(c.WE,"read"),restoreCommit:Y.wrap(c.Iw,"write"),escapeHatchGitExecRead:Y.wrap(function(e){for(var n=arguments.length,t=Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];return e.apply(void 0,(0,o._)(t))},"read"),escapeHatchGitExecWrite:Y.wrap(function(e){for(var n=arguments.length,t=Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];return e.apply(void 0,(0,o._)(t))},"write"),getChangesBetweenCommits:Y.wrap(c.wP,"read")}}},62537:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(88263),a=t(71117);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M6.25 5a1.75 1.75 0 1 1 3.5 0 1.75 1.75 0 0 1-3.5 0Zm8 0a1.75 1.75 0 1 1 3.5 0 1.75 1.75 0 0 1-3.5 0Zm-8 7a1.75 1.75 0 1 1 3.5 0 1.75 1.75 0 0 1-3.5 0Zm8 0a1.75 1.75 0 1 1 3.5 0 1.75 1.75 0 0 1-3.5 0Zm-8 7a1.75 1.75 0 1 1 3.5 0 1.75 1.75 0 0 1-3.5 0Zm8 0a1.75 1.75 0 1 1 3.5 0 1.75 1.75 0 0 1-3.5 0Z",clipRule:"evenodd"})}))}},62826:(e,n,t)=>{"use strict";t.d(n,{A:()=>Y,v:()=>x});var r=t(17844),i=t(93629),o=t(86105),a=t(88263),l=t(29542),s=t.n(l),c=t(35076),u=t(45015),d=t(79209),p=t(45263),f=t(48521),h=t(13340),m=t(36112),g=t(76126),v=t(10429),w=t(74108),y=t(34938),b=v.D.a,S=(0,d.AH)({"::after":{content:'""',position:"absolute",top:0,right:0,bottom:0,left:0,display:"block",zIndex:1}});function Y(e){var n=e.post,t=n.repl,o=n.user,l=t.isTemplate?"Template":"Repl";return(0,a.FD)(v.S,{gap:8,children:[(0,a.FD)(v.S,{row:!0,align:"center",justify:"space-between",children:[(0,a.Y)(v.S,{row:!0,align:"center",children:(0,a.FD)(v.S,{row:!0,gap:8,align:"center",children:[(0,a.Y)(h.e,{size:24,username:o.username,src:o.image}),(0,a.FD)(v.S,{row:!0,gap:4,children:[(0,a.Y)(g.EY,{multiline:!1,children:o.username}),(0,a.FD)(g.EY,{color:"dimmest",multiline:!1,children:[" ","published a ",l]})]})]})}),(0,a.Y)(y.A,{size:12})]}),(0,a.FD)(m.ui,{css:[f.wp.borderRadius(8),f.wp.colWithGap(8),f.wp.p(8),f.wp.position.relative,{border:"1px solid "+p.LU.outlineDimmest}],children:[(0,a.Y)(v.S,{gap:16,children:(0,a.Y)(v.S,{row:!0,gap:16,justify:"space-between",children:(0,a.FD)(v.S,{css:[f.wp.flex.growAndShrink(1)],row:!0,gap:8,align:"start",children:[(0,a.Y)(u.Ay,{iconUrl:t.iconUrl,alt:t.title,size:84,css:[f.wp.backgroundColor.backgroundHigher]}),(0,a.FD)(v.S,{css:[f.wp.flex.growAndShrink(1),f.wp.colWithGap(4)],children:[(0,a.FD)(v.S,{row:!0,children:[(0,a.Y)(s(),(0,i._)((0,r._)({legacyBehavior:!0,passHref:!0},(0,w.z9)(t)),{children:(0,a.Y)(b,{css:[{color:"inherit"},S,f.wp.flex.growAndShrink(1),f.wp.minWidth(0)],onClick:function(e){return e.preventDefault()},children:(0,a.Y)(g.EY,{variant:"subheadBig",multiline:!1,children:t.title})})})),t.isTemplate?(0,a.Y)(A,{}):null]}),t.description?(0,a.Y)(g.EY,{color:"dimmer",maxLines:2,multiline:!1,children:t.description}):null]})]})})}),(0,a.Y)(v.S,{css:[f.wp.minHeight(24)],row:!0,gap:8,justify:"space-between",children:(0,a.Y)(c.A,{repl:{id:t.id,publicForkCount:0,likeCount:0}})})]})]})}var A=function(){return(0,a.Y)("span",{css:[f.wp.display.inlineFlex,f.wp.align.center,f.wp.height(24),f.wp.px(8),f.wp.borderRadius(16),f.wp.backgroundColor.yellowDimmest,f.wp.color.yellowStrongest,f.wp.justify.center,f.wp.ml(8),{fontSize:p.LU.fontSizeSmall,lineHeight:p.LU.fontSizeSmall}],children:"Template"})},x=function(){return(0,a.FD)(v.S,{gap:8,css:[{opacity:.5}],children:[(0,a.FD)(v.S,{css:[f.wp.flex.grow(1),f.wp.justify.spaceBetween],row:!0,align:"center",children:[(0,a.FD)(v.S,{row:!0,gap:8,align:"center",children:[(0,a.Y)("span",{css:[f.wp.backgroundColor.backgroundHigher,f.wp.width(24),f.wp.height(24),f.wp.borderRadius(16)]}),(0,a.Y)("span",{css:[f.wp.backgroundColor.backgroundHigher,f.wp.width(126),f.wp.height(12),f.wp.borderRadius(4)]})]}),(0,a.Y)("span",{css:[f.wp.backgroundColor.backgroundHigher,f.wp.width(12),f.wp.height(12),f.wp.borderRadius(8)]})]}),(0,a.FD)(v.S,{css:[f.wp.backgroundColor.backgroundDefault,f.wp.width("100%"),f.wp.height(132),f.wp.borderRadius(8),f.wp.colWithGap(8),f.wp.p(8)],children:[(0,a.FD)(v.S,{row:!0,gap:8,children:[(0,a.Y)("span",{css:[f.wp.backgroundColor.backgroundHigher,f.wp.height(84),f.wp.width(84),f.wp.borderRadius(4)]}),(0,a.FD)(v.S,{gap:12,css:[f.wp.flex.grow(1)],pt:4,children:[(0,a.Y)("span",{css:[f.wp.backgroundColor.backgroundHigher,f.wp.width(80),f.wp.height(16),f.wp.borderRadius(4)]}),(0,a.FD)(v.S,{gap:8,children:[(0,a.Y)("span",{css:[f.wp.backgroundColor.backgroundHigher,f.wp.width("100%"),f.wp.height(12),f.wp.borderRadius(4)]}),(0,a.Y)("span",{css:[f.wp.backgroundColor.backgroundHigher,f.wp.width("80%"),f.wp.height(12),f.wp.borderRadius(4)]})]})]})]}),(0,a.FD)(v.S,{css:[f.wp.flex.grow(1),f.wp.align.center,f.wp.justify.spaceBetween],row:!0,children:[(0,a.Y)(v.S,{row:!0,gap:16,children:(0,o._)([,,,]).map(function(e,n){return(0,a.FD)(v.S,{row:!0,gap:4,align:"center",children:[(0,a.Y)("span",{css:[f.wp.backgroundColor.backgroundHigher,f.wp.width(12),f.wp.height(12),f.wp.borderRadius(8)]}),(0,a.Y)("span",{css:[f.wp.backgroundColor.backgroundHigher,f.wp.width(16),f.wp.height(8),f.wp.borderRadius(2)]})]},n)})}),(0,a.Y)(v.S,{row:!0,gap:4,children:(0,o._)([,,]).map(function(e,n){return(0,a.Y)("span",{css:[f.wp.backgroundColor.backgroundHigher,f.wp.width(48),f.wp.height(24),f.wp.borderRadius(16)]},n)})})]})]})]})}},62847:(e,n,t)=>{"use strict";t.d(n,{o:()=>s,t:()=>l});var r=t(12694),i=t(21462),o=t(46014),a=t(34384);function l(){var e,n,t=(0,a.ET)().orgId,r=(0,o.lD)({skip:void 0===t,variables:{orgId:t}}),l=(null==(n=r.data)||null==(e=n.currentUser)?void 0:e.org.__typename)==="Org"&&r.data.currentUser.org.flags;return[(0,i.useMemo)(function(){return(l||[]).reduce(function(e,n){return"boolean"===n.type&&(e[n.id]=n.value),e},{})},[l]),r.loading]}var s=function(e){var n,t=e.controlName,i=e.default;return null!=(n=(0,r._)(l(),1)[0][t])?n:i}},63051:(e,n,t)=>{"use strict";t.d(n,{OI:()=>f,_O:()=>d});var r=t(17844),i=t(12584),o=t(41114),a=t(86997),l=t(72611);function s(){var e=(0,i._)(["\n  fragment PublishReleaseFormRepl on Repl {\n    id\n    title\n    description\n    slug\n    user {\n      username\n    }\n    ...PublishedReplShareInfoReplData\n    deployment {\n      id\n      activeRelease {\n        id\n      }\n    }\n    releases {\n      items {\n        id\n        timeCreated\n        description\n        initialLayoutState\n      }\n    }\n  }\n  ","\n"]);return s=function(){return e},e}function c(){var e=(0,i._)(["\n  query PublishReleaseFormCurrentUser {\n    currentUser {\n      id\n      username\n    }\n  }\n"]);return c=function(){return e},e}var u={},d=(0,o.J1)(s(),l.E),p=(0,o.J1)(c());function f(e){var n=(0,r._)({},u,e);return a.I(p,n)}},63244:(e,n,t)=>{"use strict";t.d(n,{R:()=>u});var r=t(88263),i=t(16564),o=t(64513),a=t(45641),l=t(54087),s=t(76126),c=t(62362);function u(e){var n=e.type,t=(0,a.Z)("org-roles-and-permissions-info-banner"),u=t.isLoading,d=t.isDone,p=t.setAsDone;return u||d?null:(0,r.Y)(l.N,{text:(0,r.FD)(s.EY,{children:["View detailed role permissions"," ",(0,r.Y)("a",{href:function(e){switch(e){case"org":return o.ik.ORG_PERMISSIONS;case"repl":return o.ik.REPL_PERMISSIONS;case"group":return o.ik.GROUP_PERMISSIONS;default:(0,i.A)(e)}}(n),target:"_blank",children:"here"}),"."]}),icon:(0,r.Y)(c.A,{}),colorway:"primary",closable:!0,closeAction:p})}},63268:(e,n,t)=>{"use strict";t.d(n,{c:()=>h,l:()=>function e(n,t){if(!["context","action"].includes(n.data.type))throw Error("Command type not supported: "+n.data.type);if("action"===n.data.type)return{match:u.G2,data:{label:n.data.label,description:n.data.description,icon:n.data.iconPath?(0,a.Y)(p.A,{src:(0,c.sU)(n.extension.baseUrl,n.data.iconPath),layout:"fill",alt:""}):(0,a.Y)(a.FK,{children:" "}),type:"action",run:(0,r._)(function(){var e;return(0,o.YH)(this,function(t){switch(t.label){case 0:if(!(e=n.run))throw Error("Action command must have run");return[4,e()];case 1:return[2,t.sent()]}})})}};var l,s=n.commands;if(!s)throw Error("Context command must have commands");return{match:u.G2,data:{label:n.data.label,description:n.data.description,icon:n.data.iconPath?(0,a.Y)(p.A,{src:(0,c.sU)(n.extension.baseUrl,n.data.iconPath),layout:"fill",alt:""}):(0,a.Y)(a.FK,{}),type:n.data.type},commands:(l=(0,r._)(function(r){var a;return(0,o.YH)(this,function(o){switch(o.label){case 0:return[4,s({active:r.active,searchQuery:r.searchQuery,path:a=(0,i._)(t.path).concat([{data:n.data}])})];case 1:return[2,o.sent().map(function(n){return e(n,{path:a})})]}})}),function(e){return l.apply(this,arguments)})}}});var r=t(29935),i=t(86105),o=t(82643),a=t(88263),l=t(79730),s=t(22677),c=t(45041),u=t(92985),d=t(32752),p=t(1998),f=l.ZU.Object({id:l.ZU.Optional(l.ZU.String()),icon:l.ZU.Optional(l.ZU.String()),type:l.ZU.Union([l.ZU.Literal("action"),l.ZU.Literal("context")]),label:l.ZU.String(),description:l.ZU.String(),contributions:l.ZU.Optional(l.ZU.Array(l.ZU.Enum(d.P)))});function h(e,n){return m.apply(this,arguments)}function m(){return(m=(0,r._)(function(e,n){var t,i,a;return(0,o.YH)(this,function(l){switch(l.label){case 0:return[4,e.data];case 1:if(t=l.sent(),!s.J(f,t))throw Error("Invalid command");if(i=null,"string"==typeof t.icon){if(""===t.icon)throw Error("Command icon cannot be empty. Omit it if you do not want an icon.");i=t.icon}if(a={data:{label:t.label,description:t.description,type:t.type,iconPath:i,id:t.id?t.id:void 0},extension:n.extension},t.contributions&&(a.data.contributions=t.contributions,n.logger.warn("Command ".concat(t.label," uses deprecated contributions field"))),"context"===t.type){var c;c=(0,r._)(function(t){var r,i,a,l,s,c,u,d,p;return(0,o.YH)(this,function(o){switch(o.label){case 0:r=t.active,i=t.searchQuery,a=t.path,l=null,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,e.commands({active:r,searchQuery:i,path:a})];case 2:return l=o.sent(),[3,4];case 3:return s=o.sent(),n.logger.error(s.message,{commandError:s,api:"command"}),[2,[]];case 4:return[4,l.length];case 5:c=o.sent(),u=[],d=0,o.label=6;case 6:if(!(d<c))return[3,9];return p=u.push,[4,h(l[d],n)];case 7:p.apply(u,[o.sent()]),o.label=8;case 8:return d++,[3,6];case 9:return[2,u]}})}),a.commands=function(e){return c.apply(this,arguments)}}else a.run=(0,r._)(function(){var t;return(0,o.YH)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,e.run()];case 1:return r.sent(),[2,void 0];case 2:return t=r.sent(),n.logger.error(t.message,{runError:t,api:"command"}),[2,{type:"error",message:t.message}];case 3:return[2]}})});return[2,a]}})})).apply(this,arguments)}},63441:(e,n,t)=>{"use strict";t.d(n,{A:()=>v});var r=t(83846),i=t(88263),o=t(58370),a=t(64583),l=t(49045),s=t(48521),c=t(76126),u=t(10429),d=t(63235),p=t(80762),f=(0,l.v)(["maxWidth"]),h=f.cssVars,m=f.styleTokens,g=(0,a.x)({container:[s.wp.width("100%"),s.wp.minHeight("100%"),s.wp.center],centeredContent:[s.wp.width("100%"),s.wp.maxWidth(m.maxWidth),s.wp.colWithGap(16),s.wp.p(16),s.wp.center],imageWithHeader:[s.wp.center,s.wp.flex.shrink(1),s.wp.textAlign.center],bodyText:[s.wp.textAlign.center,s.wp.color.foregroundDimmest]});function v(e){var n=e.pane,t=e.asciiArt,a=e.headerText,l=e.bodyText,s=e.body,f=e.action,m=e.icon,v=e.loading,w=e.maxWidth,y=e.innerRef,b=(0,o.Vv)(),S=b.getDescription(n),Y=(0,i.Y)(b.Icon,{pane:n,size:48}),A=null!=s?s:S;void 0!==v&&v?A=(0,i.FD)(u.S,{gap:4,align:"center",row:!0,children:[(0,i.Y)(p.A,{size:16}),(0,i.Y)(c.EY,{css:g.bodyText,children:"Loading"})]}):void 0!==l&&(A=(0,i.Y)(u.S,{children:(0,i.Y)(c.EY,{css:g.bodyText,multiline:!0,children:l})}));var x=Y;return void 0!==m?x=m:void 0!==t&&(x=(0,i.Y)(d.A,{art:t})),(0,i.Y)(u.S,{css:g.container,style:(0,r._)({},h.maxWidth,"".concat(void 0===w?600:w,"px")),innerRef:y,children:(0,i.FD)(u.S,{css:g.centeredContent,children:[(0,i.FD)(u.S,{css:g.imageWithHeader,gap:16,children:[x,(0,i.Y)(c.Y9,{level:1,variant:"subheadBig",multiline:!0,children:null!=a?a:S})]}),A,f]})})}},63459:(e,n,t)=>{"use strict";t.d(n,{sx:()=>p});var r=t(17844),i=t(12584),o=t(41114),a=t(86997);function l(){var e=(0,i._)(["\n  fragment AiChatMessageUser on User {\n    id\n    username\n    fullName\n    image\n    url\n  }\n"]);return l=function(){return e},e}function s(){var e=(0,i._)(["\n  query AiChatMessageUserData($id: Int!) {\n    user(id: $id) {\n      ...AiChatMessageUser\n    }\n  }\n  ","\n"]);return s=function(){return e},e}var c={},u=(0,o.J1)(l()),d=(0,o.J1)(s(),u);function p(e){var n=(0,r._)({},c,e);return a.I(d,n)}},63482:e=>{e.exports={highlightBackground:"AgentMessage_highlightBackground__6FeIF",content:"AgentMessage_content__hfjDC",inner:"AgentMessage_inner__22LFJ",root:"AgentMessage_root__CTNdV","border-rotate":"AgentMessage_border-rotate__vCCb1","fallback-animation":"AgentMessage_fallback-animation__N3ZTS"}},63708:(e,n,t)=>{"use strict";t.d(n,{A:()=>o});var r=t(12694);function i(e,n){return e.split(n).length-1}var o={parse:function(e){var n=new Map,t=e.split(/\n|\r|\r\n/),r=!0,o=!1,a=void 0;try{for(var l,s=t[Symbol.iterator]();!(r=(l=s.next()).done);r=!0){var c=l.value;if(!function(e){var n=e.trim();return 0===n.length||n.startsWith("#")}(c)){var u=(c=function(e){if(!e.includes("#"))return e;var n=e.split("#"),t=!1,r=[],o=!0,a=!1,l=void 0;try{for(var s,c=n[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var u=s.value;(1===i(u,'"')||i(u,"'"))&&(t?(t=!1,r.push(u)):t=!0),(0===r.length||t)&&r.push(u)}}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}return r.join("#")}(c)).indexOf("="),d=c.indexOf(":");if(-1!==d||-1!==u){var p=u;-1!==d&&(d<u||-1===u)&&(p=d);var f=c.slice(0,p).replace(/^\s*(?:export\s+)?(.*?)\s*$/,"$1"),h=function(e,n){var t=e.trim();if(0===t.length)return t;var r=t.length-1,i='"'===t[0]&&'"'===t[r],o="'"===t[0]&&"'"===t[r];return(o||i)&&(t=t.slice(1,-1)),i&&(t=(t=t.replace(/\\./g,function(e){return"\\n"===e?"\n":"\\r"===e?"\r":e})).replace(/\\([^$])/g,"$1")),o||(t=t.replace(/(\\)?(\$)(\()?\{?([A-Z0-9_]+)?\}?/g,function(e){var t=e.match(/(\\)?(\$)(\()?\{?([A-Z0-9_]+)?\}?/);if(null===t)return e;if("\\"===t[1]||"("===t[2])return t[0].slice(1);var r=t[4];return""!==r?n.get(r)||"":e})),t}(c.slice(p+1),n);n.set(f,h)}}}}catch(e){o=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return n},serialize:function(e){return(e instanceof Map?Array.from(e):Object.entries(e)).reduce(function(e,n){var t=(0,r._)(n,2),i=t[0],o=t[1].replace(/\\([^$])/g,"\\\\$1").replace(/\$/g,"\\\\$$").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r");return e+"".concat(i,'="').concat(o,'"\n')},"")}}},63726:(e,n,t)=>{"use strict";t.d(n,{A:()=>p});var r=t(88263),i=t(93158),o=t(64583),a=t(48521),l=t(12605),s=t(13641),c=t(76126),u=t(10429),d=(0,o.x)({overlay:[a.wp.position.fixed,a.wp.flex.row,a.wp.align.center,a.wp.justify.center,a.wp.backgroundColor.backgroundOverlay,{top:0,bottom:0,left:0,right:0,zIndex:a.U3+1,cursor:"not-allowed"}],animationWrapper:[a.wp.center,a.wp.minWidth(225),a.wp.height(225),a.wp.p(16),a.wp.color.foregroundDefault,a.wp.borderRadius(8),a.wp.backgroundColor.backgroundOverlay,a.wp.zIndex(a.U3+1),{cursor:"not-allowed"}],lockText:a.wp.mt(32)});function p(e){var n=e.reason;return(0,r.Y)(s.Z,{children:(0,r.Y)(u.S,{css:d.overlay,children:(0,r.Y)(i.Ay,{children:(0,r.FD)(u.S,{css:d.animationWrapper,tabIndex:-1,children:[(0,r.Y)(l.A,{height:80}),(0,r.Y)(c.EY,{multiline:!1,variant:"subheadBig",css:d.lockText,dataCy:"lock-screen",children:n})]})})})})}},63809:(e,n,t)=>{"use strict";t.d(n,{f:()=>g});var r=t(88263),i=t(21462),o=t(86005),a=t(18918),l=t(55315),s=t(92148),c=t(94626),u=t(79209),d=t(48521),p=(0,u.AH)({scrollbarWidth:"thin",outline:"none",overflow:"auto",".cm-content":{paddingBottom:0},"::-webkit-scrollbar":{width:4},".cm-gutters":{minWidth:"unset"}}),f=(0,u.AH)({overflow:"hidden",".cm-scroller":{overflow:"hidden"}}),h={root:d.wp.backgroundColor.backgroundRoot,higher:d.wp.backgroundColor.backgroundHigher,highest:d.wp.backgroundColor.backgroundHighest,default:d.wp.backgroundColor.backgroundDefault},m=new c.k(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return(0,o.$K)({formatNumber:function(n,t){for(var r=String(t.doc.lines).length,i=String(n+e-1);r>i.length;)i="\xa0"+i;return i}})});function g(e){var n=e.path,t=e.initialDoc,o=e.maxHeight,c=e.minHeight,d=e.extensions,g=e.allowScroll,v=e.fontSize,w=e.hideGutter,y=e.startLineNumber,b=e.style,S=e.elevation,Y=e.onNavigateToCode,A=(0,l.A)(),x=A.ref,C=A.view,_=(0,i.useMemo)(function(){var e;return e=h[null!=S?S:"default"],(0,u.AH)({".cm-editor":e,".cm-gutters":e})},[S]),k=m.use(y);return(0,r.Y)("div",{style:b,children:(0,r.Y)(a.Ay,{ref:x,initialDoc:t,css:[p,_,void 0===g||g?null:f],extensions:[k,void 0===d?[]:d],style:{minHeight:c,maxHeight:null!=o?o:"10em"},hideGutter:w,filePath:n,fontSize:v,readOnly:!0,onClick:function(e){if(Y&&C){var n=e.clientX,t=e.clientY,r=C.posAtCoords({x:n,y:t});Y(null!==r?(0,s.Z3)(C.state.doc,r):null)}}})})}},63831:(e,n,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/replEnvironmentDesktop",function(){return t(85569)}])},64829:(e,n,t)=>{"use strict";t.d(n,{JX:()=>L,vY:()=>P});var r=t(17844),i=t(93629),o=t(88263),a=t(45263),l=t(64583),s=t(48521),c=t(91796),u=function(e){var n=e.fragment,t=e.onClick;return(0,o.Y)(c.A,{size:"small",onClick:t,children:n.content})},d=function(e){var n=e.fragment,t=e.onClick;return(0,o.Y)(c.A,{size:"small",fontWeight:"medium",onClick:t,children:n.content})},p=function(e){var n=e.fragment,t=e.onClick;return(0,o.Y)("a",{href:n.url,onClick:t,rel:"noreferrer noopener nofollow",target:"_blank",children:n.content})},f=function(e){var n=e.fragment,t=e.onClick;return(0,o.Y)("a",{href:n.url,onClick:t,target:"_blank",children:n.content})},h=function(e){var n=e.fragment,t=e.onClick;return(0,o.Y)("a",{href:n.url,onClick:t,children:n.content})},m=function(e){var n=e.fragment,t=e.onClick,r=e.style;return(0,o.Y)("code",{onClick:t,style:r,children:n.content})},g=function(e){var n=e.fragment,t=e.onClick;return(0,o.Y)("b",{onClick:t,children:n.content})},v=function(e){var n=e.fragment,t=e.onClick;return(0,o.Y)("i",{onClick:t,children:n.content})},w=(0,l.x)({strikethrough:[{textDecoration:"line-through"}],blockquote:[s.wp.color.foregroundDimmest,s.wp.border({width:2,color:a.LU.foregroundDimmest,direction:"left"}),{paddingLeft:6}]}),y=function(e){var n=e.fragment,t=e.onClick;return(0,o.Y)("span",{onClick:t,css:w.strikethrough,children:n.content})},b=function(e){var n=e.fragment,t=e.onClick;return(0,o.Y)("blockquote",{onClick:t,css:w.blockquote,children:n.content})},S=/(@[0-9a-zA-Z_]+)/,Y=/(#[-a-zA-Z0-9@:%._+~#=/]+)/,A=/(https?:\/\/[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{2,6}\b(?:[-a-zA-Z0-9()@:%_+.~#?&//=]*))/,x=/(`.+?`)/,C=/(\*\*.+?\*\*)/,_=/(_.+?_)/,k=/(\*.+?\*)/,D=/(~~.+?~~)/,E=/(^>.+?$\n?)/m,R=/\/@([0-9a-zA-Z_]+)\/(.+)/;function I(e){var n=e.url;return{type:"LINK",url:n,content:n}}function F(e){var n=e.hash;return{type:"DEEP_LINK",url:n,content:n}}var T=RegExp([x.source,C.source,_.source,k.source,D.source,A.source,S.source,Y.source,E.source].join("|"),"m");function P(e,n){var t=e.split(T),r=[],i=[],o=!0,a=!1,l=void 0;try{for(var s,c=t[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var u=s.value;if(u){var d=function(e,n){if(A.test(e)){var t={};try{t=new window.URL(e)}catch(n){return{content:e,type:"TEXT"}}if(!["repl.it","replit.com",document.location.host].includes(t.host))return I({url:e});if(t.pathname===n.replUrl)return F({hash:t.hash});if(R.test(t.pathname)){var r={url:t}.url,i=R.exec(r.pathname);if(!i)throw Error("Not a Repl URL");return{type:"REPL_LINK",url:r.href,content:"@".concat(i[1],"/").concat(i[2]).concat(r.hash)}}return I({url:e})}if(Y.test(e))return F({hash:e});if(E.test(e))return{type:"QUOTE",content:({text:e.slice(1).trim()}).text};if(x.test(e))return{type:"CODE",content:({code:e.slice(1,-1)}).code};if(C.test(e))return{type:"BOLD",content:({text:e.slice(2,-2)}).text};if(_.test(e)||k.test(e))return{type:"ITALICS",content:({text:e.slice(1,-1)}).text};if(D.test(e))return{type:"STRIKETHROUGH",content:({text:e.slice(2,-2)}).text};if(S.test(e)){var o=e.slice(1);if(!n.users||n.users.includes(o))return{type:"MENTION",username:o,content:"@".concat(o)}}return{content:e,type:"TEXT"}}(u,n);if(d){if("MENTION"===d.type){if(!d.username)continue;r.push(d.username)}i.push(d)}}}}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}return{tokens:i,mentions:r}}function L(e){var n=e.message,t=e.onMentionClick,a=void 0===t?function(){}:t,l=e.codeStyles,s=void 0===l?{}:l;return(0,o.Y)(o.FK,{children:n.tokens.map(function(e,n){var t={fragment:e,key:n};return"MENTION"===e.type?(0,o.Y)(d,(0,i._)((0,r._)({},t),{onClick:function(){return a(e)}})):"LINK"===e.type?(0,o.Y)(p,(0,r._)({},t)):"REPL_LINK"===e.type?(0,o.Y)(f,(0,r._)({},t)):"DEEP_LINK"===e.type?(0,o.Y)(h,(0,r._)({},t)):"CODE"===e.type?(0,o.Y)(m,(0,i._)((0,r._)({},t),{style:s})):"BOLD"===e.type?(0,o.Y)(g,(0,r._)({},t)):"ITALICS"===e.type?(0,o.Y)(v,(0,r._)({},t)):"STRIKETHROUGH"===e.type?(0,o.Y)(y,(0,r._)({},t)):"QUOTE"===e.type?(0,o.Y)(b,(0,r._)({},t)):(0,o.Y)(u,(0,r._)({},t))})})}},64870:(e,n,t)=>{"use strict";t.d(n,{ZA:()=>v,Zd:()=>b,gH:()=>y,kg:()=>k,s$:()=>S,th:()=>A});var r=t(29935),i=t(17844),o=t(93629),a=t(86105),l=t(82643),s=t(90629),c=t(23099),u=t.n(c),d=t(35992),p=t(96907),f=t.n(p),h=t(16564),m=t(39282),g=t(10449),v=new Set([3e3,3001,3002,3003,4200,5e3,5173,6e3,6800,80,8e3,8008,8080,8081,8099,9e3]);function w(e,n){return new Set(Array.from(e).filter(function(e){return!n.has(e)}))}var y=function(e){return e.FORWARDED="FORWARDED",e.INTERNAL_ONLY="INTERNAL_ONLY",e.NO_MORE_EXTERNAL_PORTS_AVAILABLE="NO_MORE_EXTERNAL_PORTS_AVAILABLE",e.MISCONFIGURED="MISCONFIGURED",e.CONFIG_MISSING="CONFIG_MISSING",e}({});function b(e){var n=e.type;switch(n){case"FORWARDED":case"MISCONFIGURED":return e.externalPort;case"INTERNAL_ONLY":case"NO_MORE_EXTERNAL_PORTS_AVAILABLE":case"CONFIG_MISSING":return;default:(0,h.A)(n)}}function S(e){var n;return null!=(n=e.isLocalhost)&&n}function Y(e){return e===g.wF}function A(e){return e===g.no}function x(e){return Y(e.localPort)}function C(e){return e?w(v,new Set(e.map(function(e){return b(e.configuration)}))):v}function _(e){var n,t=e.localPort,r=C(e.portsState.current);if(0!==r.size){var i=r.has(80),o=r.has(t);return i?80:o?t:Array.from(r).sort()[0]}}function k(e){var n=e.container,t=e.dotReplit,c=(0,m.F)(null),p=(0,m.F)(!1),g=(0,m.F)("only-global"),v=f()((0,r._)(function(){var e;return(0,l.YH)(this,function(n){switch(n.label){case 0:if(!c.current)return[2];return e=c.current.filter(function(e){return!e.isTemporary}).map(function(e){var n=e.configuration.type;switch(n){case"FORWARDED":case"MISCONFIGURED":return(0,i._)({localPort:e.configuration.localPort,externalPort:e.configuration.externalPort},S(e.configuration)?{exposeLocalhost:!0}:void 0);case"INTERNAL_ONLY":return{localPort:e.configuration.localPort};case"NO_MORE_EXTERNAL_PORTS_AVAILABLE":case"CONFIG_MISSING":return!1;default:(0,h.A)(n)}}).filter(Boolean).sort(function(e,n){return e.localPort-n.localPort}),[4,t.updateDotReplit([{op:"add",path:"ports",value:JSON.stringify(e)}])];case 1:return n.sent(),[2]}})}),1e3,{leading:!1,trailing:!0});function y(){p.set(!0),v()}return!function(e){var n=e.container,t=e.dotReplit,r=e.portsState,l=e.writeDotReplitPortsConfig,c=e.isThisServiceUpdatingDotReplit,p=e.forwardPortsAutomatically;function f(e){return e.sort(function(e,n){var t,r;return(null!=(t=e.configuration.localPort)?t:0)-(null!=(r=n.configuration.localPort)?r:0)})}var h=[];function m(e){try{var n=function(e){var n=e.portsState,t=e.portInfo,r=e.forwardPortsAutomatically;if(null===n.current)throw Error("processOpenedPort can only assign ports if dotReplit config was read");var a={pid:t.pid,cgroup:t.cgroup,address:t.address,cmdline:t.cmdline},l="127.0.0.1"===a.address,s=Y(t.port),c=A(t.port),u=n.current.find(function(e){return e.configuration.localPort===t.port});if(void 0!==u)return{isOpen:!0,isTemporary:!!s||u.isTemporary,processInfo:a,configuration:(0,o._)((0,i._)({},u.configuration),{isLocalhost:l})};if(c)return{isOpen:!0,isTemporary:!0,processInfo:a,configuration:{type:"FORWARDED",localPort:t.port,externalPort:t.port,isLocalhost:l,isVnc:s}};if("none"===r.current||"only-global"===r.current&&l||s)return{isOpen:!0,isTemporary:!0,processInfo:a,configuration:{type:"INTERNAL_ONLY",localPort:t.port,isLocalhost:l,isVnc:s}};var d=_({localPort:t.port,portsState:n});return void 0===d?{isOpen:!0,isTemporary:!1,processInfo:a,configuration:{type:"NO_MORE_EXTERNAL_PORTS_AVAILABLE",localPort:t.port,isLocalhost:l,isVnc:s}}:{isOpen:!0,isTemporary:!1,processInfo:a,configuration:{type:"FORWARDED",localPort:t.port,externalPort:d,isLocalhost:l,isVnc:s}}}({portsState:r,portInfo:e,forwardPortsAutomatically:p}),t=!1;r.update(function(r){if(!r)throw Error("processOpenedPort can only execute if we red .replit first");return(0,d.jM)(r,function(i){var o=i.findIndex(function(n){return n.configuration.localPort===e.port});return -1===o?(o=r.length,t=!0):u()(r[o].configuration,n.configuration)||(t=!0),i[o]=n,f(i)})}),t&&l()}catch(e){throw s.v4(function(n){n.setTag("service","ports"),s.Cp(e)}),e}}function g(e){try{var n=!1;r.update(function(t){if(!t)throw Error("onPortClosed can only execute if we red .replit first");return(0,d.jM)(t,function(t){var r=t.findIndex(function(n){return n.configuration.localPort===e.port});if(-1!==r){var i,o=t[r];o.isTemporary||(i=o.configuration.localPort,32768<=i&&i<=60999)?(t.splice(r,1),n=!0):o.isOpen=!1}})}),n&&l()}catch(e){throw s.v4(function(n){n.setTag("service","ports"),s.Cp(e)}),e}}n.onPortOpened(function(e){null===r.current?h.push({type:"portOpen",portInfo:e}):m(e)}),n.onPortClosed(function(e){null===r.current?h.push({type:"portClose",portInfo:e}):g(e)}),t.watch(function(e){var n,t=e.config,l=null!=(n=null==t?void 0:t.ports)?n:[];if(!0===c.current){var s=r.current;if(!s||l.length!==s.length)return;l.every(function(e,n){var t,r=s[n];return e.localPort===r.configuration.localPort&&e.externalPort===(null!=(t=b(r.configuration))?t:0)})&&c.set(!1);return}r.update(function(e){e||(e=[]);var n=new Set(l.map(function(e){return e.localPort}).filter(function(e){return null!=e})),t=new Set(e.map(function(e){return e.configuration.localPort})),r=new Set(e.filter(function(e){return e.isOpen}).map(function(e){return e.configuration.localPort})),s=w(n,t),c=(m=new Set((0,a._)(Array.from(n)).concat((0,a._)(Array.from(r)))),new Set(Array.from(t).filter(function(e){return m.has(e)}))),u=[],d=!0,p=!1,h=void 0;try{for(var m,g,v=c[Symbol.iterator]();!(d=(g=v.next()).done);d=!0)!function(){var n=g.value,t=e.find(function(e){return e.configuration.localPort===n}),r=l.find(function(e){return e.localPort===n});if(!t)throw Error("couldn't find match for local port: ".concat(n));if(!r)return u.push((0,o._)((0,i._)({},t),{configuration:{type:"CONFIG_MISSING",localPort:t.configuration.localPort,isLocalhost:S(t.configuration),isVnc:x(t.configuration)}}));var a=t.configuration;a=null!=r.externalPort&&0!==r.externalPort?{type:C(u).has(r.externalPort)?"FORWARDED":"MISCONFIGURED",localPort:t.configuration.localPort,externalPort:r.externalPort,isLocalhost:S(t.configuration),isVnc:x(t.configuration)}:{type:"INTERNAL_ONLY",localPort:t.configuration.localPort,isLocalhost:S(t.configuration),isVnc:x(t.configuration)},u.push((0,o._)((0,i._)({},t),{configuration:a}))}()}catch(e){p=!0,h=e}finally{try{d||null==v.return||v.return()}finally{if(p)throw h}}var y=!0,b=!1,A=void 0;try{for(var _,k=s[Symbol.iterator]();!(y=(_=k.next()).done);y=!0)!function(){var e,n=_.value,t=l.find(function(e){return e.localPort===n});if(!t)throw Error("couldn't find match for local port: ".concat(n));var r=null!=t.externalPort&&0!==t.externalPort?t.externalPort:void 0;if(void 0!==r){var i,o=C(u).has(r);u.push({isOpen:!1,isTemporary:!1,configuration:{type:o?"FORWARDED":"MISCONFIGURED",localPort:n,externalPort:r,isLocalhost:null!=(i=t.exposeLocalhost)&&i,isVnc:Y(n)}})}else u.push({isOpen:!1,isTemporary:!1,configuration:{type:"INTERNAL_ONLY",localPort:n,isLocalhost:null!=(e=t.exposeLocalhost)&&e,isVnc:Y(n)}})}()}catch(e){b=!0,A=e}finally{try{y||null==k.return||k.return()}finally{if(b)throw A}}return f(u)}),h.length>0&&(h.forEach(function(e){var n=e.type,t=e.portInfo;"portOpen"===n?m(t):"portClose"===n&&g(t)}),h=[])})}({container:n,dotReplit:t,portsState:c,writeDotReplitPortsConfig:y,isThisServiceUpdatingDotReplit:p,forwardPortsAutomatically:g}),{tryExposingPortAutomatically:function(e){var n=_({localPort:e,portsState:c});void 0!==n&&(c.update((0,d.jM)(function(t){if(t){var r=t.find(function(n){return n.configuration.localPort===e});r&&(r.isTemporary=!1,r.configuration={type:"FORWARDED",localPort:e,externalPort:n,isLocalhost:r.configuration.isLocalhost,isVnc:Y(e)})}})),y())},updateDotReplitPortsMapping:function(e,n,t){c.update((0,d.jM)(function(r){var i,o=null==r?void 0:r.find(function(n){return n.configuration.localPort===e}),a=t;void 0===a&&(a=null!=(i=null==o?void 0:o.configuration.isLocalhost)&&i);var l=void 0!==n?{type:"FORWARDED",localPort:e,externalPort:n,isLocalhost:a,isVnc:Y(e)}:{type:"INTERNAL_ONLY",localPort:e,isLocalhost:a,isVnc:Y(e)};o?(o.isTemporary=!1,o.configuration=l):(r||(r=[]),r.push({isOpen:!1,isTemporary:!1,configuration:l}))})),y()},removeDotReplitPortsMapping:function(e,n){c.update((0,d.jM)(function(t){var r;void 0!==(r=void 0!==n?null==t?void 0:t.findIndex(function(t){return t.configuration.localPort===e&&("FORWARDED"===t.configuration.type||"MISCONFIGURED"===t.configuration.type)&&t.configuration.externalPort===n}):null==t?void 0:t.findIndex(function(n){return n.configuration.localPort===e}))&&(null==t||t.splice(r,1))})),y()},portsState:c,setForwardPortsAutomatically:function(e){g.set(e)}}}},64878:(e,n,t)=>{"use strict";t.d(n,{u:()=>g});var r=t(29935),i=t(12694),o=t(82643),a=t(21462),l=t(17844),s=t(12584),c=t(41114),u=t(51026);function d(){var e=(0,s._)(["\n  query CheckForAgentSession($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        supportsAgent\n      }\n    }\n  }\n"]);return d=function(){return e},e}var p={},f=(0,c.J1)(d()),h=t(54319),m=t(31062);function g(){var e,n,t=(0,h.NC)(),s=(0,h.jt)(),c=(0,h.Wq)(),d=(0,i._)((e={variables:{replId:(0,m.A)()}},n=(0,l._)({},p,e),u._(f,n)),1)[0];(0,a.useEffect)(function(){if(!s){var e=!1;return!function(){n.apply(this,arguments)}(),function(){e=!0}}function n(){return(n=(0,r._)(function(){var n,r,i;return(0,o.YH)(this,function(o){switch(o.label){case 0:return[4,t.sessions.agent.all.map.once()];case 1:if(n=o.sent(),e)return[2];if(0!==n.size)return[3,3];return[4,d()];case 2:if(!((null==(r=(i=o.sent()).data)?void 0:r.getRepl.__typename)==="Repl"&&i.data.getRepl.supportsAgent))return[2];o.label=3;case 3:return c(),[2]}})})).apply(this,arguments)}},[t,s,c,d])}},64890:(e,n,t)=>{"use strict";t.d(n,{T:()=>_,O:()=>x});var r=t(17844),i=t(93629),o=t(88263),a=t(21462),l=t(29383),s=t(83735),c=t(35992),u=t(44370),d=t(12694),p=t(69338);function f(){return(0,d._)((0,a.useState)(function(){return(0,u.y$)()}),1)[0]}var h=(0,a.createContext)(null),m=function(e){return(0,p.Xr)(e,{store:function(){var e=(0,a.useContext)(h);if(!e)throw Error("Expected store in context");return e}()})},g=(0,u.eU)(-1),v=(0,u.eU)([]),w=(0,u.eU)(void 0),y=(0,u.eU)(null,function(e,n,t){var r=e(w);switch(r&&(clearTimeout(r.id),r.cb()),t){case"forward":n(g,function(n){return Math.min(e(v).length,n+1)});break;case"backward":n(g,function(e){return Math.max(0,e-1)})}var i=e(v),o=e(g);return o>=i.length?"":i[o]}),b=(0,u.eU)(null,function(e,n,t){clearTimeout(null==(r=e(w))?void 0:r.id);var r,i=function(){if(t.length>0){var r=!1;n(v,function(n){return(0,c.jM)(n,function(n){if(t!==n[e(g)])for(r=!0,n.push(t);n.length>20;)n.shift()})}),r&&n(g,e(v).length-1)}n(w,void 0)};n(w,{id:setTimeout(i,2e3),cb:i})}),S=t(77089);function Y(e){var n,t=m(b),o=(n=m(y),{forward:(0,l.A)(function(){return function(){return n("forward")}},[n]),backward:(0,l.A)(function(){return function(){return n("backward")}},[n])}),c=o.forward,u=o.backward,d=(0,a.useRef)(e.value);return(0,a.useEffect)(function(){e.value!==(null==d?void 0:d.current)&&(e.value&&t(e.value),d.current=e.value)},[t,e.value]),(0,i._)((0,r._)({},e),{onKeyDown:(0,l.A)(function(){return function(n){if(n.shiftKey||(0,s.T$)(n)){null==(r=e.onKeyDown)||r.call(e,n);return}var t,r,i=n.currentTarget,o=!!i.value.match(/\n/);if("ArrowUp"===n.key){if(o&&i.selectionStart&&i.selectionStart>0)return;e.onChange(u()),n.preventDefault(),n.stopPropagation();return}if("ArrowDown"===n.key){if(o&&i.selectionEnd&&i.selectionEnd<i.value.length)return;e.onChange(c()),n.preventDefault(),n.stopPropagation();return}null==(t=e.onKeyDown)||t.call(e,n)}},[u,c,e]),onChange:(0,l.A)(function(){return function(n){e.onChange(n.target.value)}},[e])})}var A=(0,a.forwardRef)(function(e,n){var t=Y(e);return(0,o.Y)(S.ov,(0,r._)({ref:n},t))}),x=(0,a.forwardRef)(function(e,n){var t=f();return(0,o.Y)(h.Provider,{value:t,children:(0,o.Y)(A,(0,r._)({ref:n},e))})}),C=(0,a.forwardRef)(function(e,n){var t=Y(e);return(0,o.Y)(S.pd,(0,r._)({ref:n},e,t))}),_=(0,a.forwardRef)(function(e,n){var t=f();return(0,o.Y)(h.Provider,{value:t,children:(0,o.Y)(C,(0,r._)({ref:n},e))})})},64967:(e,n,t)=>{"use strict";t.d(n,{PF:()=>m,nw:()=>h});var r=t(37743),i=t(12694),o=t(82643),a=t(46723),l=t.n(a),s=l().DIFF_DELETE,c=l().DIFF_INSERT,u=l().DIFF_EQUAL;function d(e,n){var t=new(l()),r=t.diff_linesToChars_(e,n),i=r.chars1,o=r.chars2,a=r.lineArray,s=t.diff_main(i,o,!1);return t.diff_charsToLines_(s,a),s}function p(e){return e.split("\n").length-1}function f(e,n,t){if(e>0){var r=function e(n,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(0===t)return 0;var i=n.indexOf("\n",r);return -1===i?null:1===t?i+1:e(n,t-1,i+1)}(t,n);if(null!==r)return{lineNumber:n,character:r,padding:e}}return null}function h(e,n){var t=!1,r=!1;t="\n"===e[e.length-1],r="\n"===n[n.length-1];for(var o=d(e+(t?"":"\n"),n+(r?"":"\n")),a=0,l=0,h=[],m=[],g=[],v=[],w=0,y=0,b=0;b<o.length;b++){var S=(0,i._)(o[b],2),Y=S[0],A=p(S[1]);switch(Y){case s:var x,C=(0,i._)(null!=(x=o[b+1])?x:[],2),_=C[0],k=C[1];a+=A;for(var D=0;D<A;D++)h.push(a-D);var E=A;_===c&&(E-=p(k));var R=f(E,l,n);R&&v.push(R);break;case c:var I,F=(0,i._)(null!=(I=o[b-1])?I:[],2),T=F[0],P=F[1];l+=A;for(var L=0;L<A;L++)m.push(l-L);var U=A;T===s&&(U-=p(P));var N=f(U,a,e);N&&g.push(N);break;case u:l>y&&(y=l),a>w&&(w=a),a+=A,l+=A}}return{leftPadded:g.filter(function(e){return e.lineNumber<y}),rightPadded:v.filter(function(e){return e.lineNumber<w}),leftColored:h,rightColored:m,changedTrailingNewline:t!==r,leftTrailingNewline:t,rightTrailingNewline:r}}var m=function(){function e(n,t){(0,r._)(this,e),this.deleted=new Set,this.inserted=new Map,this.linePositions=new Map,this.lineLengths=new Map,this.currentTrailingNewline="\n"===n[n.length-1],this.otherTrailingNewline="\n"===t[t.length-1],this.changedTrailingNewline=this.currentTrailingNewline!==this.otherTrailingNewline;var o=d(n,t),a=[],l=!0,p=!1,f=void 0;try{for(var h,m=o[Symbol.iterator]();!(l=(h=m.next()).done);l=!0){var g=(0,i._)(h.value,2),v=g[0],w=g[1].split("\n");""===w[w.length-1]&&w.pop();var y=!0,b=!1,S=void 0;try{for(var Y,A=w[Symbol.iterator]();!(y=(Y=A.next()).done);y=!0){var x=Y.value;a.push([v,x])}}catch(e){b=!0,S=e}finally{try{y||null==A.return||A.return()}finally{if(b)throw S}}}}catch(e){p=!0,f=e}finally{try{l||null==m.return||m.return()}finally{if(p)throw f}}this.currentTrailingNewline&&!this.otherTrailingNewline?a.push([s,""]):!this.currentTrailingNewline&&this.otherTrailingNewline?a.push([c,""]):this.currentTrailingNewline&&this.otherTrailingNewline&&a.push([u,""]);var C=1,_=0,k=1,D=!0,E=!1,R=void 0;try{for(var I,F=a[Symbol.iterator]();!(D=(I=F.next()).done);D=!0){var T=(0,i._)(I.value,2),P=T[0],L=T[1];switch(P){case s:this.linePositions.set(C,_),this.lineLengths.set(C,L.length),this.deleted.add(C),_+=L.length+1,C++;break;case c:var U=C-1,N=this.inserted.get(U);N||(N=[],this.inserted.set(U,N)),N.push({number:k,content:L}),k++;break;case u:this.linePositions.set(C,_),this.lineLengths.set(C,L.length),_+=L.length+1,C++,k++}}}catch(e){E=!0,R=e}finally{try{D||null==F.return||F.return()}finally{if(E)throw R}}}var n=e.prototype;return n.startInsertions=function(){var e=this.inserted.get(0);return e&&0!==e.length?e:null},n.lineIsDeleted=function(e){return this.deleted.has(e)},n.lineInsertions=function(e){var n=this.inserted.get(e);return n&&0!==n.length?n:null},n.lineInsertedContent=function(e){var n=this.lineInsertions(e);return n?n.map(function(e){return e.content}).join("\n"):null},n.offsetFor=function(e){var n,t,r;r=0+(null!=(t=null==(n=this.inserted.get(0))?void 0:n.length)?t:0);for(var i=1;i<e;i++){this.lineIsDeleted(i)&&r--;var o=this.lineInsertions(i);o&&(r+=o.length)}return r},n.linePosition=function(e){var n;return null!=(n=this.linePositions.get(e))?n:null},n.lineLength=function(e){var n;return null!=(n=this.lineLengths.get(e))?n:null},n.line=function(e){var n=this.linePosition(e),t=this.lineLength(e);if(null===n||null===t)return null;var r=this.offsetFor(e),i=this.lineIsDeleted(e),o=this.lineInsertions(e);return{number:e,from:n,to:n+t,length:t,offset:r,isDeleted:i,insertions:o}},n.lines=function(){var e,n,t,r,a,l,s,c;return(0,o.YH)(this,function(o){switch(o.label){case 0:e=!0,n=!1,t=void 0,o.label=1;case 1:o.trys.push([1,6,7,8]),r=this.linePositions[Symbol.iterator](),o.label=2;case 2:if(e=(a=r.next()).done)return[3,5];if(l=(0,i._)(a.value,1)[0],!(s=this.line(l)))throw Error("line should not be null");return[4,s];case 3:o.sent(),o.label=4;case 4:return e=!0,[3,2];case 5:return[3,8];case 6:return c=o.sent(),n=!0,t=c,[3,8];case 7:try{e||null==r.return||r.return()}finally{if(n)throw t}return[7];case 8:return[2]}})},e}()},65146:(e,n,t)=>{"use strict";t.d(n,{Q:()=>f,z:()=>p});var r=t(17844),i=t(93629),o=t(49069),a=t(86005),l=t(34434),s=t(53889),c=t(26550),u=t(53231);function d(e){var n=e.state.field(p);if(n){var t=n.type;return"explainCode"===t?(0,u.u4)(u.AZ.AI_INLINE_EVENT,{action:"inline_textbox_closed",intent_type:"explain",source:n.source}):"generateCode"===t?(0,u.u4)(u.AZ.AI_INLINE_EVENT,{action:"inline_textbox_closed",intent_type:"generate",source:n.source}):"transformCode"===t&&(0,u.u4)(u.AZ.AI_INLINE_EVENT,{action:"inline_textbox_closed",intent_type:"modify",source:n.source}),e.dispatch({effects:l.L.of(null)}),!0}return!1}var p=o.sU.define({create:function(){return null},update:function(e,n){if((0,c.C)(n,l.L,function(n){e=n.value?{id:n.value.id,codeReference:n.value.codeReference,type:n.value.type,source:n.value.source,loading:n.value.loading,data:n.value.data}:null}),!e||n.changes.empty)return e;var t=e.codeReference.range.indexFrom>n.newDoc.length?n.newDoc.length:n.changes.mapPos(e.codeReference.range.indexFrom),o=e.codeReference.range.indexTo>n.newDoc.length?n.newDoc.length:n.changes.mapPos(e.codeReference.range.indexTo);return t>=o?null:e=(0,i._)((0,r._)({},e),{codeReference:(0,i._)((0,r._)({},e.codeReference),{range:{indexFrom:t,indexTo:o,lineFrom:n.newDoc.lineAt(t).number,lineTo:n.newDoc.lineAt(o).number}})})},provide:function(e){return[o.Nb.highest(a.w4.of([{key:"Escape",run:d}])),s.Rh.from(e,function(e){var n;return null!=(n=(null==e?void 0:e.loading)&&e.codeReference.range.indexFrom===e.codeReference.range.indexTo)?n:null})]}}),f=o.sU.define({create:function(){return null},update:function(e,n){if(!n.state.field(p))return null;var t=!0,r=!1,i=void 0;try{for(var o,a=n.effects[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var s=o.value;s.is(l.L)&&(e=null),s.is(l.M)&&(e=s.value)}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return e}})},65190:(e,n,t)=>{"use strict";t.d(n,{K:()=>c});var r=t(17844),i=t(93629),o=t(17459),a=t(88263),l=t(11882),s=t(10429).D.button;function c(e){var n=e.iconLeft,t=e.iconRight,c=e.text,u=e.innerRef,d=e.colorway,p=(0,o._)(e,["iconLeft","iconRight","text","innerRef","colorway"]);return(0,a.FD)(s,(0,i._)((0,r._)({ref:u},p),{css:[(0,l.w)({colorway:d,clickable:!0,variant:"filled",iconLeft:!!n,iconRight:!!t}),{color:"inherit"}],children:[n,(0,a.Y)("span",{children:c}),t]}))}},65465:(e,n,t)=>{"use strict";t.d(n,{F:()=>A});var r=t(46434),i=t(29935),o=t(12694),a=t(82643),l=t(88263),s=t(21462),c=t(79730),u=t(22677),d=t(76389),p=t(31062),f=t(30206),h=t(53231),m=t(74093),g=t(48314),v=t(46603),w=t(49150),y=t(76126),b=t(10429),S=t(18870),Y=c.ZU.Object({targetReplId:c.ZU.String(),sourceReplId:c.ZU.String(),bucketId:c.ZU.String()});function A(){var e,n=(0,o._)((0,s.useState)(null),2),t=n[0],c=n[1],A=(0,p.A)(),x=(0,g.i)();return(0,m.b)((e=(0,i._)(function(e,n){var t,i,o,l,s,p,m,g,v,w,y,b;return(0,a.YH)(this,function(a){switch(a.label){case 0:if(t=n.session,i=n.signal,!A||!x)return[2];l=(o=e.replspaceApi.init.stream({session:t.from},{signal:i})).resReadable,s=o.reqWritable,p=!1,m=!1,a.label=1;case 1:a.trys.push([1,6,7,12]),v=function(){var e=y.value;if(!e.ok||"requestDefaultBucketAccess"!==e.payload.$kind)return"continue";var n=e.payload.nonce;(0,h.u4)(h.AZ.MODAL_VIEWED,{modalName:"default_bucket_access_modal"}),c(function(){return function(e){if(!e){c(null),s.write({$kind:"allowDefaultBucketAccess",nonce:n,result:{status:"error",message:"user canceled"}});return}(0,f.B2)("/object-storage/replit/allowDefaultBucketAccess/targetRepl/".concat(encodeURIComponent(A),"/sourceRepl/Dotfiles.").concat(encodeURIComponent(x.username)),{}).then(function(e){u.J(Y,e)?s.write({$kind:"allowDefaultBucketAccess",nonce:n,result:{status:"ok",targetReplId:e.targetReplId,sourceReplId:e.sourceReplId,bucketId:e.bucketId}}):s.write({$kind:"allowDefaultBucketAccess",nonce:n,result:{status:"error",message:JSON.stringify(d.I(Y,e))}})}).catch(function(e){s.write({$kind:"allowDefaultBucketAccess",nonce:n,result:{status:"error",message:"".concat(e)}})}).finally(function(){c(null)})}})},w=(0,r._)(l),a.label=2;case 2:return[4,w.next()];case 3:if(!(p=!(y=a.sent()).done))return[3,5];v(),a.label=4;case 4:return p=!1,[3,2];case 5:return[3,12];case 6:return b=a.sent(),m=!0,g=b,[3,12];case 7:if(a.trys.push([7,,10,11]),!(p&&null!=w.return))return[3,9];return[4,w.return()];case 8:a.sent(),a.label=9;case 9:return[3,11];case 10:if(m)throw g;return[7];case 11:return[7];case 12:return s.close(),[2]}})}),function(n,t){return e.apply(this,arguments)}),[A,x]),(0,l.Y)(w.a,{isOpen:"function"==typeof t,onRequestClose:function(){null==t||t(!1),(0,h.u4)(h.AZ.DEFAULT_BUCKET_ACCESS_MODAL_ACCEPTED,{response:"close"}),c(null)},children:(0,l.FD)(b.S,{gap:16,children:[(0,l.Y)(y.Y9,{variant:"headerDefault",level:3,children:"Allow Dotfiles Object Storage Bucket access"}),(0,l.Y)(y.EY,{children:"Do you want the Object Storage bucket associated with your Dotfiles Repl to be accessible in this Repl? If your Dotfiles Repl has any secrets, they will be accessible to this Repl too."}),(0,l.Y)(y.EY,{children:"If you did not install the Replit dotfiles support, you should deny this."}),(0,l.FD)(b.S,{justify:"end",row:!0,gap:16,children:[(0,l.Y)(v.$n,{onClick:function(){null==t||t(!1),(0,h.u4)(h.AZ.DEFAULT_BUCKET_ACCESS_MODAL_ACCEPTED,{response:"deny"}),c(null)},text:"Deny"}),(0,l.Y)(v.$n,{onClick:function(){null==t||t(!0),(0,h.u4)(h.AZ.DEFAULT_BUCKET_ACCESS_MODAL_ACCEPTED,{response:"confirm"}),c(null)},iconLeft:(0,l.Y)(S.A,{}),text:"Allow for this Repl",colorway:"primary"})]})]})})}},65483:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(88263),a=t(71117);function l(e){return(0,o.FD)(a.Ay,(0,i._)((0,r._)({},e),{children:[(0,o.Y)("path",{fillRule:"evenodd",d:"M12.949 2.93a5.75 5.75 0 0 1 8.13 8.131l-.009.01-3 3a5.749 5.749 0 0 1-8.67-.622.75.75 0 1 1 1.2-.898 4.251 4.251 0 0 0 6.41.459l2.995-2.995a4.25 4.25 0 0 0-6.01-6.01l-1.716 1.707a.75.75 0 1 1-1.058-1.064l1.728-1.717ZM7.986 8.609a5.75 5.75 0 0 1 6.615 1.943.75.75 0 1 1-1.202.898 4.251 4.251 0 0 0-6.409-.459l-2.995 2.996a4.25 4.25 0 0 0 6.01 6.009l1.705-1.705a.75.75 0 0 1 1.06 1.06l-1.719 1.72a5.75 5.75 0 0 1-8.13-8.131l.009-.01 3-3a5.75 5.75 0 0 1 2.056-1.321Z",clipRule:"evenodd"}),(0,o.Y)("path",{fillRule:"evenodd",d:"M3.776 5.908a.75.75 0 0 1 .918-.53l2.173.582A.75.75 0 0 1 6.48 7.41l-2.173-.582a.75.75 0 0 1-.53-.919ZM9.194 5.417a.75.75 0 0 1-.918-.53l-.583-2.173a.75.75 0 0 1 1.45-.388l.581 2.173a.75.75 0 0 1-.53.918ZM20.225 18.194a.75.75 0 0 1-.92.53l-2.172-.582a.75.75 0 1 1 .388-1.449l2.173.582a.75.75 0 0 1 .53.92ZM14.806 18.684a.75.75 0 0 1 .919.53l.582 2.174a.75.75 0 1 1-1.45.388l-.581-2.173a.75.75 0 0 1 .53-.919Z",clipRule:"evenodd"})]}))}},65518:(e,n,t)=>{"use strict";t.d(n,{P:()=>O,A:()=>B});var r,i=t(29935),o=t(12694),a=t(86105),l=t(82643),s=t(21462),c=t(90629),u=t(37663),d=t(20828),p=t(18402),f=t(36018),h=t(51244),m=t(93369),g=t(19882),v=t(31569),w=t(3218),y=t(24365),b=t(29531),S=t(69945),Y=t.n(S)()(function(){if("undefined"!=typeof AudioContext){var e=(r||(r=new AudioContext),r),n=e.createBufferSource();e.decodeAudioData(function(e){for(var n=window.atob(e),t=n.length,r=new Uint8Array(t),i=0;i<t;i++)r[i]=n.charCodeAt(i);return r.buffer}("SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjMyLjEwNAAAAAAAAAAAAAAA//tQxAADB8AhSmxhIIEVCSiJrDCQBTcu3UrAIwUdkRgQbFAZC1CQEwTJ9mjRvBA4UOLD8nKVOWfh+UlK3z/177OXrfOdKl7pyn3Xf//WreyTRUoAWgBgkOAGbZHBgG1OF6zM82DWbZaUmMBptgQhGjsyYqc9ae9XFz280948NMBWInljyzsNRFLPWdnZGWrddDsjK1unuSrVN9jJsK8KuQtQCtMBjCEtImISdNKJOopIpBFpNSMbIHCSRpRR5iakjTiyzLhchUUBwCgyKiweBv/7UsQbg8isVNoMPMjAAAA0gAAABEVFGmgqK////9bP/6XCykxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq"),function(t){n.buffer=t,n.connect(e.destination),n.start(0)})}},500,{leading:!0,trailing:!0}),A="replit-icons-font",x=t(34626),C="BESbswy";function _(e){return k.apply(this,arguments)}function k(){return(k=(0,i._)(function(e){return(0,l.YH)(this,function(n){switch(n.label){case 0:if(!document.fonts)return[3,2];return[4,function(e,n){return E.apply(this,arguments)}(document.fonts,e)];case 1:case 3:return n.sent(),[2];case 2:return[4,Promise.all([R("serif",e),R("sans-serif",e),R("monospace",e)])]}})})).apply(this,arguments)}function D(e){var n=e.family,t=e.style,r=e.weight;return"".concat(void 0===t?"normal":t," ").concat(void 0===r?"normal":r," 100px ").concat(n)}function E(){return(E=(0,i._)(function(e,n){var t,r,i,o,a,s;return(0,l.YH)(this,function(l){return t=n.fontInfo,i=void 0===(r=n.characters)?C:r,a=void 0===(o=n.timeout)?3e3:o,s=D(t),[2,new Promise(function(n,r){var o=!1,l=x.vF.timeStart({family:t.family,style:t.style,weight:t.weight}),c=setTimeout(function(){o=!0,l("xterm font loading timed out"),n()},a);e.load(s,i).then(function(){o||(clearTimeout(c),n())}).catch(function(e){o||(clearTimeout(c),r(e))})})]})})).apply(this,arguments)}function R(e,n){return I.apply(this,arguments)}function I(){return(I=(0,i._)(function(e,n){var t,r,i,o,a,s,c,u,d;return(0,l.YH)(this,function(l){return(t=n.fontInfo,i=void 0===(r=n.characters)?C:r,a=void 0===(o=n.timeout)?3e3:o,s=D(t),(c=document.createElement("span")).innerText=i,c.style.font="normal normal 100px ".concat(e),c.style.position="absolute",c.style.left="-9999px",c.style.top="-9999px",document.body.appendChild(c),u=c.offsetWidth,c.style.font=s,(d=function(){return u!==c.offsetWidth})())?[2]:[2,new Promise(function(e,n){var r=setInterval(function(){d()&&(clearInterval(r),clearTimeout(i),document.body.removeChild(c),e())},50),i=setTimeout(function(){if(clearInterval(r),document.body.removeChild(c),d())return void e();n(Error("Font loading timed out "+t.family))},a)})]})})).apply(this,arguments)}function F(e){c.Cp(e)}var T='"ReplitHack"',P=String.fromCharCode(61095);function L(){return(L=(0,i._)(function(){return(0,l.YH)(this,function(e){switch(e.label){case 0:if(!document.getElementById(A)){var n=document.createElement("style");n.id=A,n.type="text/css",n.appendChild(document.createTextNode("\n@font-face {\n  font-family: 'replit-icons';\n  font-style: normal;\n  font-weight: normal;\n  font-stretch: normal;\n  src: url(".concat("/public/fonts/replit-icons.woff",") format('woff'),\n    url(").concat("/public/fonts/replit-icons.ttf",") format('truetype');\n}"))),document.head.appendChild(n)}return[4,Promise.all([_({fontInfo:{family:"replit-icons"},characters:P}).catch(F),_({fontInfo:{family:T,weight:"400"}}).catch(F),_({fontInfo:{family:T,weight:"400",style:"italic"}}).catch(F),_({fontInfo:{family:T,weight:"700"}}).catch(F),_({fontInfo:{family:T,weight:"700",style:"italic"}}).catch(F)])];case 1:return e.sent(),[2]}})})).apply(this,arguments)}var U=t(58809),N=t(95570),O=1e4;function M(){return/^((?!chrome|android).)*safari/i.test(window.navigator.userAgent)}function B(e){var n,r,S,A,x,C,_,k,D,E,R,I=(0,o._)((0,s.useState)(null),2),F=I[0],P=I[1],B=(0,o._)((0,s.useState)(null),2),H=B[0],z=B[1],W=(0,U.V)(),G=(0,d.g)("fontSize","accessibleTerminal","shellBellAudio").preferences,V=G.fontSize,j=G.accessibleTerminal,Z=G.shellBellAudio,q=(0,w.iO)(),K=(0,f.A)(),$=(0,h.a)(),J=null==e?void 0:e.openFile,Q=(0,m.A)(null==e?void 0:e.openWebview),X=null==e?void 0:e.listFiles,ee=(0,s.useMemo)(function(){return J&&X?{openFile:J,listFiles:X}:null},[J,X]),en=(0,m.A)(null==e?void 0:e.onInBandOSCMessages),et={screenReaderMode:j,fileLinking:ee,terminalTheme:W,fontSize:V,scrollback:null==e?void 0:e.scrollback,openPane:null!=(E=null==e?void 0:e.openPane)?E:null,emitPaneMetrics:null==e?void 0:e.emitPaneMetrics,convertEol:null!=(R=null==e?void 0:e.convertEol)&&R},er=(0,m.A)(et),ei=(0,g.A)(function(){(null==e?void 0:e.autoFit)!==!1&&(null==H||H.fit())},{type:"debounce",wait:200}),eo=(0,s.useRef)(null),ea=(0,s.useRef)(null),el=(0,m.A)(null==e?void 0:e.size),es=(0,b.bU)();return(0,s.useLayoutEffect)(function(){if(F){var n=!1,r=[];return(function(){return s.apply(this,arguments)})().catch(function(e){if(e.message&&e.message.toLowerCase().includes("loading chunk"))return void c.v4(function(n){n.setExtra("message",e.message),n.setExtra("stack",e.stack),c.Cp(Error("Loading chunk failed"))});q({error:e,origin:"Xterm: init"})}),function(){r.forEach(function(e){return e()})}}function s(){return(s=(0,i._)(function(){var i,s,d,f,h,m,g,w,S,Y,A,x,C,_,k,D,E,R,I,P,U,B,H,W,G,V;return(0,l.YH)(this,function(l){switch(l.label){case 0:return[4,Promise.all([Promise.all([(0,u.jc)(function(){return t.e(1296).then(t.t.bind(t,39989,23))}),(0,u.jc)(function(){return t.e(1669).then(t.t.bind(t,61669,23))}),(0,u.jc)(function(){return t.e(3618).then(t.t.bind(t,63618,23))}),(0,u.jc)(function(){return t.e(7088).then(t.t.bind(t,47088,23))}),(0,u.jc)(function(){return t.e(1497).then(t.t.bind(t,51497,23))}),(0,u.jc)(function(){return t.e(7708).then(t.bind(t,97708))}),(0,u.jc)(function(){return t.e(4159).then(t.bind(t,14159))}),(0,u.jc)(function(){return t.e(4695).then(t.t.bind(t,94695,23))}),(0,u.jc)(function(){return t.e(1836).then(t.t.bind(t,21836,23))})]),function(){return L.apply(this,arguments)}()])];case 1:var j;if(g=o._.apply(void 0,[l.sent(),1]),S=(w=(0,o._)(g[0],9))[0].Terminal,Y=w[1].FitAddon,A=w[2].SearchAddon,x=w[3].WebLinksAddon,C=w[4].Unicode11Addon,_=w[5].FileLinkAddon,k=w[6].PaneLinkAddon,D=w[7].CanvasAddon,E=w[8].WebglAddon,n||!F)return[2];return I={allowProposedApi:!0,cursorBlink:!1,scrollback:null!=(R=er.current.scrollback)?R:O,tabStopWidth:4,fontFamily:"".concat(T,', replit-icons, Monaco, "Ubuntu Mono", Consolas, monospace'),fontSize:er.current.fontSize,lineHeight:1,fontWeight:400,fontWeightBold:700,convertEol:er.current.convertEol,drawBoldTextInBrightColors:!1,minimumContrastRatio:4.5,theme:er.current.terminalTheme,screenReaderMode:er.current.screenReaderMode,logger:{trace:function(e,n){return(i=N).trace.apply(i,["xterm: "+e].concat((0,a._)(n)))},debug:function(e,n){return(s=N).debug.apply(s,["xterm: "+e].concat((0,a._)(n)))},info:function(e,n){return(d=N).info.apply(d,["xterm: "+e].concat((0,a._)(n)))},warn:function(e,n){return(f=N).warn.apply(f,["xterm: "+e].concat((0,a._)(n)))},error:function(e,n){"string"==typeof e&&e.includes("Parsing error")||N.error("xterm: "+e,n)}}},(null==(h=el.current)?void 0:h.cols)!==void 0&&(I.cols=el.current.cols),(null==(m=el.current)?void 0:m.rows)!==void 0&&(I.rows=el.current.rows),P=new S(I),er.current.fileLinking?(eo.current=new _(er.current.fileLinking.openFile,er.current.fileLinking.listFiles),P.loadAddon(eo.current)):eo.current=null,!ea.current&&(null==e?void 0:e.openPane)&&(ea.current=new k(e.openPane,e.emitPaneMetrics)),ea.current&&P.loadAddon(ea.current),U=new Y,P.loadAddon(U),B=new x((j=function(e){K?p.M.openExternalUrl(e):window.open(e,"_blank")},function(e,n){var t;try{t=new URL(n)}catch(e){return}if(("0.0.0.0"===t.hostname||"localhost"===t.hostname)&&void 0!==Q.current)return void Q.current(t.pathname,parseInt(t.port,10));j(n)})),P.loadAddon(B),H=new A,P.loadAddon(H),W=new C,P.loadAddon(W),P.unicode.activeVersion="11",P.open(F),r.push(function(){try{P.dispose()}catch(e){}}),function(){try{if(!(!function(){if(!M())return!1;var e=window.navigator.userAgent.match(/Version\/(\d+)/);return null===e||e.length<2||16>parseInt(e[1],10)}()&&(M()||!$||!(window.devicePixelRatio>1))&&document.createElement("canvas").getContext("webgl2"))){var e=new D;P.loadAddon(e);return}var n=new E;P.loadAddon(n),n.onContextLoss(function(){n.dispose(),P.loadAddon(new D)})}catch(e){var t=new D;P.loadAddon(t)}}(),G=!1,V=null,P.attachCustomKeyEventHandler(function(e){var n,t,r=(0,y.te)(e);if(r){var i=r;V&&(i=(0,y.Y)(V,r));var o=es(i);switch(o.kind){case b.VO.NoMatch:V=null;break;case b.VO.WaitingForChord:return V=o.key,!1;case b.VO.MatchFound:return V=null,!1}}return n=P,t=e,(!window.navigator.clipboard||"c"!==t.key.toLowerCase()||!t.ctrlKey||!t.shiftKey||("keyup"===t.type&&n.hasSelection()&&(0,v.default)(n.getSelection()).catch(function(e){c.v4(function(n){n.setTag("xterm-clipboard",!0),n.setExtra("type","copy"),c.Cp(e)})}),t.preventDefault(),t.stopPropagation(),!1))&&("shift"===e.key.toLowerCase()||"ctrl"===e.key.toLowerCase()||"alt"===e.key.toLowerCase()||"meta"===e.key.toLowerCase()||("tab"!==e.key.toLowerCase()||!G)&&(G="escape"===e.key.toLowerCase(),!0))}),en.current&&Object.entries(en.current).forEach(function(e){var n=(0,o._)(e,2),t=n[0],r=n[1];P.parser.registerOscHandler(Number(t),function(e){return r(P,e),!0})}),z({onKey:P.onKey.bind(P),onData:P.onData.bind(P),onResize:P.onResize.bind(P),write:P.write.bind(P),fit:function(){var e=F.getBoundingClientRect(),n=e.width,t=e.height;n>0&&t>0&&U.fit()},focus:function(){return P.focus()},clear:function(){return P.clear()},findPrevious:function(e,n){return H.findPrevious(e,n)},findNext:function(e,n){return H.findNext(e,n)},getSize:function(){return{cols:P.cols,rows:P.rows}},paste:function(e){return P.paste(e)},_term:P}),ei(F),[2]}})})).apply(this,arguments)}},[F,ei,er,q,el,es,K,$,Q,en,null==e?void 0:e.openPane,null==e?void 0:e.emitPaneMetrics]),n=null==H?void 0:H._term,r=eo,S=ea,x=(A=et).screenReaderMode,C=A.fileLinking,_=A.terminalTheme,k=A.openPane,D=A.emitPaneMetrics,(0,s.useEffect)(function(){n&&_&&(n.options.theme=_)},[n,_]),(0,s.useEffect)(function(){n&&(n.options.screenReaderMode=x)},[n,x]),(0,s.useEffect)(function(){if(n){if(C){if(!r.current){var e=!1;return t.e(7708).then(t.bind(t,97708)).then(function(t){var i=t.FileLinkAddon;e||(r.current=new i(C.openFile,C.listFiles),n.loadAddon(r.current))}),function(){e=!0}}r.current.update(C.openFile,C.listFiles),r.current.reactivate()}else r.current&&r.current.deactivate();if(k){if(!S.current){var i=!1;return t.e(4159).then(t.bind(t,14159)).then(function(e){var t=e.PaneLinkAddon;i||(S.current=new t(k,D),n.loadAddon(S.current))}),function(){i=!0}}S.current.update(k,null!=D?D:null)}else S.current&&S.current.deactivate()}},[n,C,r,S,k,D]),(0,s.useEffect)(function(){var e=null==H?void 0:H._term;e&&V&&e.options.fontSize!==V&&(e.options.fontSize=V,e.refresh(0,e.rows-1),H.fit())},[V,H]),(0,s.useEffect)(function(){if(Z){var e=null==H?void 0:H._term;if(e)return e.onBell(Y).dispose}},[Z,H]),[H,P]}},65600:(e,n,t)=>{"use strict";function r(e,n,t,r){var i=t-n;return{start:{x:(n+1)%r.cols,y:e+Math.floor((n+1)/r.cols)},end:{x:(n+i)%r.cols,y:e+Math.floor((n+i)/r.cols)}}}function i(e,n,t){var r,i,o="";do{var a=t.buffer.active.getLine(e);if(!a)break;a.isWrapped&&e--,i=a.isWrapped}while(i);var l=e;do{var s=t.buffer.active.getLine(e+1);r=!!s&&s.isWrapped;var c=t.buffer.active.getLine(e);if(!c)break;o+=c.translateToString(!r&&n).substring(0,t.cols),e++}while(r);return[o,l]}t.d(n,{W:()=>r,z:()=>i})},66300:(e,n,t)=>{"use strict";t.d(n,{n:()=>d});var r=t(17844),i=t(93629),o=t(17459),a=t(88263),l=t(84550),s=t(64583),c=t(48521),u=(0,s.x)({cell:[c.wp.px(8),c.wp.py(6),c.wp.width("fit-content"),{transform:"translateZ(0)"},{"&[data-focused]":[c.wp.focusRing]}],floatRight:{"> *":{float:"right"}},flush:c.wp.p(0)});function d(e){var n=e.children,t=e.layout,s=(0,o._)(e,["children","layout"]),c=[u.cell];switch(t){case"floatRight":c.push(u.floatRight);break;case"flush":c.push(u.flush)}return(0,a.Y)(l.fh,(0,i._)((0,r._)({css:c},s),{children:n}))}},66525:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(88263),a=t(71117);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M6.495 4.729a8.287 8.287 0 0 1 4.387-.32c1.465.29 2.819.97 3.907 1.967A7.725 7.725 0 0 1 16.863 9.5h.593c1.395 0 2.738.533 3.733 1.491a5.044 5.044 0 0 1 1.561 3.634 5.044 5.044 0 0 1-1.56 3.634 5.385 5.385 0 0 1-3.734 1.491h-8.18a8.23 8.23 0 0 1-4.233-1.164 7.852 7.852 0 0 1-2.967-3.16 7.524 7.524 0 0 1-.785-4.211 7.607 7.607 0 0 1 1.646-3.97A8.01 8.01 0 0 1 6.495 4.73Zm4.096 1.15a6.787 6.787 0 0 0-3.593.263 6.51 6.51 0 0 0-2.892 2.043 6.106 6.106 0 0 0-1.323 3.187 6.024 6.024 0 0 0 .63 3.373 6.352 6.352 0 0 0 2.4 2.554 6.73 6.73 0 0 0 3.463.951h8.18a3.885 3.885 0 0 0 2.693-1.072 3.544 3.544 0 0 0 1.101-2.553c0-.952-.393-1.871-1.101-2.553A3.885 3.885 0 0 0 17.456 11H16.31a.75.75 0 0 1-.725-.556 6.2 6.2 0 0 0-1.81-2.962 6.62 6.62 0 0 0-3.185-1.603Z",clipRule:"evenodd"})}))}},67018:e=>{e.exports={root:"PlanningBadge_root__xmkd4"}},67251:(e,n,t)=>{"use strict";t.d(n,{A:()=>a});var r=t(21462),i=t(83150),o=t(34834);function a(e){var n=(0,o.A)().fs,t=(0,r.useCallback)(function(t,r){var o=t.code,a=t.insertAt,l=t.newLine,s=void 0===l||l;if(!e||(0,i.FN)(e)||(0,i.P1)(e)||(0,i.rb)(e)||(0,i.Go)(e))throw Error("Invalid file, this should never happen");if(0!==o.length)var c=n.watchTextFile(e,{onReady:function(t){var i=t.initialContent,l=t.writeChange,u=i.toString(),d="end"===a?u.length:a,p=o;s&&(0!==d&&d!==u.length&&-1===(d=u.indexOf("\n",d))&&(d=u.length),0!==d&&"\n"!==u[d-1]&&(p="\n"+p),"\n"!==u[d]&&(p+="\n")),l({from:d,insert:p},r),n.flush(new Set([e])).finally(function(){c()})}})},[e,n]);return!e||(0,i.FN)(e)||(0,i.P1)(e)||(0,i.rb)(e)||(0,i.Go)(e)?null:t}},67620:(e,n,t)=>{"use strict";t.d(n,{Y:()=>y,O:()=>w});var r=t(29935),i=t(12694),o=t(22531),a=t(82643),l=t(17844),s=t(12584),c=t(41114),u=t(50175);function d(){var e=(0,s._)(["\n  mutation SetUserKeybindings($input: SetUserKeybindingsInput!) {\n    setUserKeybindings(input: $input) {\n      ... on Keybindings {\n        keybindings\n      }\n    }\n  }\n"]);return d=function(){return e},e}var p={},f=(0,c.J1)(d()),h=t(29383),m=t(84067),g=t(24365),v=t(92609);function w(){var e,n=(0,m.v)(),t=(0,i._)((e=(0,l._)({},p,void 0),u.n(f,e)),1)[0],o=(0,v.V)();return(0,h.A)(function(){var e;return e=(0,r._)(function(e){var r,l,s,c,u,d,p,f,h;return(0,a.YH)(this,function(a){switch(a.label){case 0:r=[],l=!0,s=!1,c=void 0;try{for(u=e[Symbol.iterator]();!(l=(d=u.next()).done);l=!0)f=(p=(0,i._)(d.value,2))[0],h=p[1],r.push({commandId:f,keyCombo:h})}catch(e){s=!0,c=e}finally{try{l||null==u.return||u.return()}finally{if(s)throw c}}return[4,t({variables:{input:{environment:n,platform:o,keybindings:r}}})];case 1:return a.sent(),[2]}})}),function(n){return e.apply(this,arguments)}},[n,t,o])}function y(e){var n=new Map;if(!Array.isArray(e))return n;var t=!0,r=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(t=(a=l.next()).done);t=!0){var s=a.value,c=function(e){if(e&&(void 0===e?"undefined":(0,o._)(e))==="object"&&"commandId"in e&&"string"==typeof e.commandId&&"keyCombo"in e){if(Array.isArray(e.keyCombo)){var n=(0,g.by)(e.keyCombo);return{commandId:e.commandId,keyCombo:n}}if("string"==typeof e.keyCombo){var t=(0,g.A2)(e.keyCombo);return{commandId:e.commandId,keyCombo:t}}return{commandId:e.commandId,keyCombo:null}}}(s);c&&n.set(c.commandId,c.keyCombo)}}catch(e){r=!0,i=e}finally{try{t||null==l.return||l.return()}finally{if(r)throw i}}return n}},68350:(e,n,t)=>{"use strict";t.d(n,{h:()=>O});var r=t(17844),i=t(93629),o=t(17459),a=t(88263),l=t(21462),s=t(84550),c=t(61471),u=t(85259),d=t(45263),p=t(64583),f=t(29e3),h=t(48521),m=t(46603),g=t(70548),v=t(78465),w=t(36112),y=t(76126),b=t(10429),S=(0,p.x)({container:[h.wp.width("100%"),h.wp.display.flex,h.wp.flex.row,h.wp.justify.spaceBetween,h.wp.px(8),h.wp.py(4),h.wp.position.absolute,h.wp.top(0),h.wp.zIndex(1),h.wp.minHeight(34)],checkboxContainer:[h.wp.display.flex,h.wp.flex.row,h.wp.align.center,{gap:20}]}),Y=function(e){var n=e.bulkActions,t=(0,l.useContext)(v.m),r=t.items,i=t.selectedItems,o=t.handleDeselectAll,s="all"===i;return 0===r.length||i instanceof Set&&0===i.size?null:(0,a.FD)(w.ui,{elevated:!0,css:S.container,children:[(0,a.FD)(b.S,{css:S.checkboxContainer,children:[(0,a.Y)(g.S,{checked:!!s,isIndeterminate:!s,onChange:o}),(0,a.FD)(y.EY,{variant:"small",children:[s?r.length:i.size," selected"]})]}),(0,a.Y)(b.S,{row:!0,gap:6,children:null==n?void 0:n.map(function(e){var n=e.text,t=e.onClick;return(0,a.Y)(m.$n,{size:"small",text:n,onClick:function(){return t(i)}},n)})})]})},A=t(27188),x=t(54087),C=t(40740),_=t(33512),k=t(66300),D=t(16842),E=t(22443),R=t(13800),I=t(59655),F=t(80762),T=t(69258),P=(0,p.x)({wrapper:[h.wp.flex.growAndShrink(1),h.wp.overflowY("auto"),h.wp.scrollbar.thin,h.wp.position.relative,h.wp.borderRadius()],table:[h.wp.maxWidth("100%"),h.wp.minWidth("100%"),{outline:"none",borderSpacing:"0 1px",alignSelf:"start"},{"&[data-focused]":[h.wp.focusRing]},{'&[data-last-column-sticky="true"]':[{"tr th:last-child, tr td:last-child":[h.wp.position.sticky,h.wp.right(0),h.wp.zIndex(0),{"&:before":[h.wp.position.absolute,h.wp.top(0),h.wp.left(0),h.wp.height("100%"),h.wp.width(1),h.wp.backgroundColor.outlineDimmest,{content:'""',boxShadow:"-2px 0px 8px 2px rgba(0, 0, 0, 0.25)"}]}],"tr th:last-child":[h.wp.backgroundColor.backgroundDefault,{boxShadow:"inset 1px 0 0 ".concat(d.LU.outlineDefault)}],"tr td:last-child":[h.wp.backgroundColor.backgroundDefault,{boxShadow:"inset 1px 0 0 ".concat(d.LU.outlineDimmer)}]}]}],tableHeader:[h.wp.position.sticky,h.wp.top(0),h.wp.zIndex(1),h.wp.colorMixBg(d.LU.surfaceBackground,d.LU.backgroundRoot),{"tr th":[h.wp.height(34),h.wp.fontSize(12),h.wp.fontWeight.normal]}],tableBody:[h.wp.maxHeight("100%")],errorStatusBanner:[h.wp.width("100%"),h.wp.borderRadius(),h.wp.px(8),h.wp.py(8),h.wp.mb(8)],loadMoreContainer:[h.wp.center,h.wp.borderRadius(),h.wp.cursor.default,h.wp.color.foregroundDefault,h.wp.position.relative,h.wp.p(6)],loadingPlaceholderRow:[f.S.foregroundPulse(d.LU.backgroundDefault,d.LU.backgroundHighest),h.wp.height(31)]}),L=function(){};function U(e){var n=e.numRows,t=e.height,r=e.columns;return(0,a.Y)(a.FK,{children:(0,u.rX)(n).map(function(e,n){return(0,a.Y)(R.H,{"aria-hidden":!0,css:P.loadingPlaceholderRow,style:t?{height:t}:void 0,children:r.map(function(e){return(0,a.Y)(k.n,{"aria-hidden":!0,children:" "},e.key)})},"loadingPlaceholderRow-".concat(n))})})}var N=function(e){var n,t=e.isLoadingMore,u=e.canLoadMore,d=e.onLoadMore,p=(0,o._)(e,["isLoadingMore","canLoadMore","onLoadMore"]),f=(0,l.useContext)(v.m),h=f.selectedItems,g=f.setSelectedItems,y=f.sortDescriptor,b=f.setSortDescriptor,S=f.titleId,x=null!=(n=p.loadingPlaceholder)?n:{numRows:3,height:49,className:"loadingRow"},k=p.loading&&!t,R=(0,c.A)({onLoadMore:null!=d?d:L,rootMargin:"0px 0px 100px 0px"}).targetRef,T=function(e){switch(e){case"start":return{textAlign:"left"};case"end":return{textAlign:"right"};default:return{}}},N=p.autoLayout?l.Fragment:s.tk;return p.autoLayout,(0,a.FD)(w.ui,{css:P.wrapper,className:p.className,children:[p.bulkActions?(0,a.Y)(Y,{bulkActions:p.bulkActions}):null,(0,a.FD)(N,{children:[(0,a.FD)(C.A,(0,i._)((0,r._)({},p.tableProps),{css:P.table,"aria-labelledby":S,"aria-label":"string"==typeof p.title?p.title:void 0,onSelectionChange:g,selectedKeys:h,"data-last-column-sticky":p.stickyLastColumn,onSortChange:function(e){b(e),p.onSortChange&&p.onSortChange(e)},sortDescriptor:y,selectionBehavior:p.selectionBehavior,selectionMode:p.selectionMode,children:[(0,a.Y)(w.ui,{elevated:!0,children:function(e){return(0,a.Y)(E.A,{clsx:e,css:P.tableHeader,columns:p.columns,style:{visibility:p.bulkActions&&(h instanceof Set&&h.size>0||"all"===h)?"hidden":"visible"},children:p.columns.map(function(e){var n=e.key,t=e.isRowHeader,l=e.allowSorting,s=e.alignment,c=e.label,u=(0,o._)(e,["key","isRowHeader","allowSorting","alignment","label"]);return(0,a.Y)(D.V,(0,i._)((0,r._)({isRowHeader:t,allowsSorting:l,style:(0,r._)({},T(s))},u),{children:c}),n)})})}}),(0,a.Y)(w.ui,{elevated:!0,children:function(e){return(0,a.Y)(_.A,{clsx:e,css:P.tableBody,items:p.items,renderEmptyState:function(){var e;return null!=(e=p.emptyState)?e:(0,a.Y)(A.A,{})},dependencies:p.dependencies,children:k&&p.loadingPlaceholder?(0,a.Y)(U,(0,r._)({columns:p.columns},x)):p.children})}})]})),u?(0,a.Y)(w.ui,{css:P.loadMoreContainer,children:(0,a.Y)(m.$n,{size:"small",variant:"nofill",loading:t,iconLeft:t?(0,a.Y)(F.A,{}):(0,a.Y)(I.A,{}),text:"Show more",onClick:d,ref:R})}):null]})]})};function O(e){var n=e.title,t=e.errorMessage,i=e.items,o=e.loading,l=e.topContent,s=e.bottomContent;return(0,a.FD)(v.y,{items:i,title:n,loading:void 0!==o&&o,children:[l,t?(0,a.Y)(x.N,{colorway:"negative",icon:(0,a.Y)(T.A,{}),text:t,css:P.errorStatusBanner}):null,(0,a.Y)(N,(0,r._)({},e)),s]})}},68800:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(88263),a=t(71117);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{d:"M20.34 8.5c-.128.1-2.38 1.37-2.38 4.192 0 3.265 2.866 4.42 2.952 4.449-.013.07-.456 1.582-1.512 3.122-.941 1.355-1.925 2.708-3.42 2.708-1.497 0-1.882-.869-3.61-.869-1.682 0-2.28.898-3.65.898-1.368 0-2.323-1.254-3.42-2.794C4.027 18.397 3 15.588 3 12.92c0-4.277 2.781-6.546 5.518-6.546 1.454 0 2.667.955 3.58.955.869 0 2.224-1.012 3.879-1.012.627 0 2.88.057 4.363 2.183ZM15.19 4.508c.685-.812 1.169-1.938 1.169-3.065 0-.156-.014-.314-.042-.442-1.113.042-2.438.741-3.237 1.668-.627.713-1.212 1.84-1.212 2.981 0 .172.029.343.042.398.07.014.185.029.3.029.998 0 2.254-.669 2.98-1.569Z"})}))}},68868:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(88263),a=t(71117);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M5 3.75A1.25 1.25 0 0 0 3.75 5v14.19l2.72-2.72a.75.75 0 0 1 .53-.22h12A1.25 1.25 0 0 0 20.25 15V5A1.25 1.25 0 0 0 19 3.75H5Zm-1.945-.695A2.75 2.75 0 0 1 5 2.25h14A2.75 2.75 0 0 1 21.75 5v10A2.75 2.75 0 0 1 19 17.75H7.31l-3.78 3.78A.75.75 0 0 1 2.25 21V5c0-.73.29-1.429.805-1.945Z",clipRule:"evenodd"})}))}},68912:(e,n,t)=>{"use strict";t.d(n,{f:()=>d});var r=t(17844),i=t(12584),o=t(41114),a=t(86997);function l(){var e=(0,i._)(["\n  query ReplTeamOrgSettings($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        owner {\n          __typename\n          ... on Team {\n            id\n            organization {\n              id\n              isAiEnabled\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return l=function(){return e},e}var s={},c=(0,o.J1)(l()),u=t(31062);function d(){var e,n,t,i,o=(t={variables:{replId:(0,u.A)()}},i=(0,r._)({},s,t),a.I(c,i)).data;return{isTeamWithAiDisabled:(null==o?void 0:o.repl.__typename)==="Repl"&&(null==(e=o.repl.owner)?void 0:e.__typename)==="Team"&&(null==(n=o.repl.owner.organization)?void 0:n.isAiEnabled)===!1}}},69095:(e,n,t)=>{"use strict";t.d(n,{A:()=>i});var r=t(53231);function i(e){(0,r.u4)(r.AZ.FILETREE_USED,e)}},69155:e=>{e.exports={root:"WebSearch_root__AabUU",divider:"WebSearch_divider__qsQIt",resultsList:"WebSearch_resultsList__i0sQe",fullText:"WebSearch_fullText__FeY_P",fullTextContent:"WebSearch_fullTextContent__CIOCE"}},69157:(e,n,t)=>{"use strict";t.d(n,{Cv:()=>I,xQ:()=>R});var r=t(29935),i=t(12694),o=t(86105),a=t(82643),l=t(88263),s=t(21462),c=t(35084),u=t(54319),d=t(191),p=t(49153),f=t(88734),h=t(84825),m=t(65721),g=t(36640),v=t(31569),w=t(68213),y=t(34834),b=t(45263),S=t(46603),Y=t(10429),A=t(66257),x=t(92855),C=t(51705),_=[c.nH.Building,c.nH.Promoting,c.nH.Running,c.nH.Pending,c.nH.Resuming,c.nH.Suspending,c.nH.UpdatingTier],k=function(e){var n=d.v[e];if(n)return"".concat(n.title,"...");switch(e){case c.nH.Building:return"Building...";case c.nH.Promoting:return"Promoting...";case c.nH.Running:return"Bundling...";case c.nH.Pending:return"Provisioning...";case c.nH.Resuming:return"Resuming...";case c.nH.Suspending:return"Pausing...";case c.nH.UpdatingTier:return"Updating tier...";default:return"Deploying..."}},D=function(){var e=(0,i._)((0,s.useState)(!1),2),n=e[0],t=e[1];return(0,s.useEffect)(function(){t("undefined"!=typeof navigator&&navigator.share&&"function"==typeof navigator.share)},[]),n},E=function(){var e=(0,r._)(function(e,n,t){return(0,a.YH)(this,function(r){switch(r.label){case 0:if(!(navigator.share&&"function"==typeof navigator.share))return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,navigator.share({title:n,text:t,url:e})];case 2:return r.sent(),[2,!0];case 3:return r.sent(),[3,4];case 4:return(0,v.default)(e),[2,!1]}})});return function(n,t,r){return e.apply(this,arguments)}}(),R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.openDeploymentsPane,t=e.includeSharing,i=void 0!==t&&t,d=!n,v=D(),S=(0,p.i$)(),R=(0,p.Tp)().redeployWithNoNewOptions,I=(0,p.cF)(),F=(0,p.tq)(),T=(0,p.uS)(),P=(0,p.bu)(),L=(0,g.A)().showConfirm,U=(0,u.jt)(),N=(0,y.A)().container,O=(0,w.A)(N,{fallbackToReplCo:!0}).url,M=(0,m.f)({__typename:"HostingDeployment",id:S||"",replitAppSubdomain:P||"",domains:[]}).href,B=!I||!S||T!==f.d.Ready&&T!==f.d.Suspended&&T!==f.d.ProcessingLifecycleCommand,H=(0,s.useCallback)((0,r._)(function(){return(0,a.YH)(this,function(e){switch(e.label){case 0:if(!S)return n&&n(),[2];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,R({hasAgentSession:U})];case 2:case 3:return e.sent(),[3,4];case 4:return[2]}})}),[S,n,R,U]),z=(0,s.useCallback)(function(){if(d&&(!S||!I))return null;if(!S)return d?null:{data:{type:"action",icon:(0,l.Y)(x.A,{color:b.LU.greenStrongest}),label:"Deploy",run:n}};if(!I&&F)return{data:{type:"action",icon:(0,l.FD)(Y.S,{row:!0,gap:4,align:"center",children:[(0,l.Y)(h.$,{status:c.nH.Building}),(0,l.Y)(x.A,{color:b.LU.foregroundDefault})]}),label:k(F.status),run:function(){}}};if(!I)return null;var e=!!F,t=_.includes(I.status),r=e&&F?{isDeploying:!0,buttonText:k(F.status)}:t?{isDeploying:!0,buttonText:k(I.status)}:B?{isDeploying:!0,buttonText:"Starting..."}:{isDeploying:!1,buttonText:"Redeploy"},i=r.isDeploying,o=r.buttonText;return{data:{type:"action",icon:d?(0,l.FD)(Y.S,{row:!0,gap:4,align:"center",children:[I.status!==c.nH.Success||i?(0,l.Y)(h.$,{status:i?c.nH.Building:I.status}):null,(0,l.Y)(x.A,{size:24,color:I.status!==c.nH.Success||i?b.LU.foregroundDefault:b.LU.greenStrongest})]}):(0,l.FD)(Y.S,{row:!0,gap:4,align:"center",children:[I.status!==c.nH.Success||i?(0,l.Y)(h.$,{status:i?c.nH.Building:I.status}):null,(0,l.Y)(x.A,{color:i?b.LU.foregroundDefault:b.LU.greenStrongest})]}),label:o,run:i?function(){}:H}}},[d,S,I,F,n,H,B]),W=(0,s.useCallback)(function(){if(!i)return[];var e=[];return O&&(!d||S&&P)&&e.push({data:{type:"action",icon:(0,l.Y)(A.A,{color:b.LU.foregroundDefault}),label:v?"Share development link":"Copy development link",run:(0,r._)(function(){return(0,a.YH)(this,function(e){switch(e.label){case 0:return[4,E(O,"Check out my Replit development app!","I'm working on this app on Replit!")];case 1:return e.sent()||L("Development URL copied to clipboard"),[2]}})})}}),S&&P&&e.push({data:{type:"action",icon:(0,l.Y)(C.A,{color:b.LU.foregroundDefault}),label:v?"Share published link":"Copy published link",run:(0,r._)(function(){return(0,a.YH)(this,function(e){switch(e.label){case 0:return[4,E(M,"Check out my Replit app!")];case 1:return e.sent()||L("Published URL copied to clipboard"),[2]}})})}}),e},[S,P,L,d,O,M,i,v]),G=(0,s.useCallback)(function(){var e=W(),n=z();if(d){var t=[];return e.length>0&&t.push({name:"Sharing",commands:e}),n&&t.push({name:"Deployment",commands:[n]}),t}if(!S||!P){var r=(0,o._)(e);return(n&&r.push(n),r.length>0)?[{name:"Development",commands:r}]:[]}var i=[];return e.length>0&&i.push({name:"Sharing",commands:e}),n&&i.push({name:"Deployment",commands:[n]}),i},[W,z,d,S,P]);return{deploymentId:S,currentBuild:I,inProgressBuild:F,handleDeployCommand:H,getDeploymentCommand:z,getShareCommands:W,getCommandGroups:G,hideRedeploy:B,mode:T}},I=function(e){var n=e.openDeploymentsPane,t=R({openDeploymentsPane:n}),r=t.deploymentId,i=t.currentBuild,o=t.inProgressBuild,a=t.handleDeployCommand,s=t.hideRedeploy;if(!r)return(0,l.Y)(S.$n,{onClick:n,iconLeft:(0,l.Y)(x.A,{color:b.LU.greenStrongest}),text:"Deploy",size:"small"});if(!i&&o)return(0,l.Y)(S.$n,{onClick:function(){},iconLeft:(0,l.Y)(x.A,{color:b.LU.foregroundDefault}),text:k(o.status),size:"small",disabled:!0});if(!i)return null;var c=!!o,u=_.includes(i.status),d=c&&o?{isDeploying:!0,buttonText:k(o.status)}:u?{isDeploying:!0,buttonText:k(i.status)}:s?{isDeploying:!0,buttonText:"Starting..."}:{isDeploying:!1,buttonText:"Redeploy"},p=d.isDeploying,f=d.buttonText;return(0,l.Y)(S.$n,{onClick:a,iconLeft:(0,l.Y)(x.A,{color:b.LU.greenStrongest}),text:f,size:"small",disabled:p})}},69507:(e,n,t)=>{"use strict";t.d(n,{A:()=>g});var r=t(88263),i=t(36775),o=t(74601),a=t(64583),l=t(48521),s=t(46603),c=t(54087),u=t(36112),d=t(76126),p=t(10429),f=t(18870),h=t(62362),m=(0,a.x)({connectButtonRow:[l.wp.flex.rowReverse]});function g(e){var n=e.onConfirm,t=(0,o.A)(),a="Host *.replit.dev\n  Port 22\n  IdentityFile ".concat(t,"/.ssh/replit");return(0,r.FD)(u.ui,{gap:12,children:[(0,r.FD)(p.S,{gap:4,children:[(0,r.Y)(d.Y9,{level:1,variant:"subheadBig",children:"Update your SSH configuration"}),(0,r.FD)(d.EY,{color:"dimmer",children:["Before connecting over SSH, you need to update your local SSH configuration file, which is usually located at ",t,"/.ssh/config"]})]}),(0,r.Y)(i.A,{code:a,header:".ssh/config",multiline:!0}),(0,r.Y)(c.N,{text:"You can find this information later in the SSH docs",icon:(0,r.Y)(h.A,{})}),(0,r.Y)(p.S,{css:m.connectButtonRow,children:(0,r.Y)(s.$n,{text:"I updated my config",iconLeft:(0,r.Y)(f.A,{}),onClick:n,colorway:"primary",stretch:!1})})]})}},69665:(e,n,t)=>{"use strict";t.d(n,{Jc:()=>R,Dr:()=>c,zY:()=>s});var r=t(17844),i=t(93629),o=t(79730),a=o.ZU.Integer({minimum:0,maximum:65535}),l=o.ZU.Object({forwarded:o.ZU.Boolean(),port:a,address:o.ZU.String(),externalPort:a,comm:o.ZU.String({description:"Comm is the name chosen by the thread / process. Sometimes it has nice information to disambiguate between multiple instances of that process."}),cmdline:o.ZU.Array(o.ZU.String(),{description:"Cmdline is the commandline arguments provided when the process started."}),cgroup:o.ZU.String({description:"Cgroup is the cgroup of the process, as reported by `/proc/${pid}/cgroup`"}),pid:o.ZU.Integer(),pidChain:o.ZU.Array(o.ZU.Integer(),{description:"PidChain is the list of process ids in the hierarchy of the process, starting with the current process id and ending with 1 (pid1)."})});o.ZU.Array(l);var s=function(e){return e.NOT_STARTED="NOT_STARTED",e.RUNNING="RUNNING",e.FINISHED="FINISHED",e.FAILED="FAILED",e}({}),c=function(e){return e.NOT_STARTED="NOT_STARTED",e.RUNNING="RUNNING",e.FINISHED="FINISHED",e.FAILED="FAILED",e.ERROR="ERROR",e}({}),u=o.ZU.Object({task:o.ZU.Literal("dummy.echo"),args:o.ZU.Optional(o.ZU.String())}),d=o.ZU.Object({task:o.ZU.Literal("dummy.echo")}),p=o.ZU.Object({task:o.ZU.Literal("dummy.print"),args:o.ZU.String()}),f=o.ZU.Object({task:o.ZU.Literal("dummy.print")}),h=o.ZU.Object({task:o.ZU.Literal("dummy.sleep"),args:o.ZU.Optional(o.ZU.Number({minimum:0}))}),m=o.ZU.Object({task:o.ZU.Literal("dummy.sleep")}),g=o.ZU.Object({task:o.ZU.Literal("dummy.pass")}),v=o.ZU.Object({task:o.ZU.Literal("dummy.pass")}),w=o.ZU.Object({task:o.ZU.Literal("dummy.fail")}),y=o.ZU.Object({task:o.ZU.Literal("dummy.fail")}),b=o.ZU.Object({task:o.ZU.Literal("shell.exec"),args:o.ZU.String(),env:o.ZU.Optional(o.ZU.Record(o.ZU.String(),o.ZU.String())),waitForPort:o.ZU.Optional(o.ZU.Number())}),S=o.ZU.Object({task:o.ZU.Literal("shell.exec"),cgroupPath:o.ZU.Optional(o.ZU.String()),pid:o.ZU.Optional(o.ZU.Integer()),isInRecoveryMode:o.ZU.Optional(o.ZU.Boolean()),openPorts:o.ZU.Optional(o.ZU.Array(l))}),Y=o.ZU.Object({task:o.ZU.Literal("workspace.openWebview"),args:o.ZU.Number({minimum:0})}),A=o.ZU.Object({task:o.ZU.Literal("workspace.openWebview")}),x=o.ZU.Object({task:o.ZU.Literal("packager.installForLanguage"),args:o.ZU.String(),enablePackageGuessing:o.ZU.Optional(o.ZU.Boolean()),continueOnFail:o.ZU.Optional(o.ZU.Boolean())}),C=o.ZU.Object({task:o.ZU.Literal("packager.installForLanguage"),hasUserFacingOutput:o.ZU.Boolean()}),_=o.ZU.Object({task:o.ZU.Literal("packager.installForAll"),enablePackageGuessing:o.ZU.Optional(o.ZU.Boolean()),continueOnFail:o.ZU.Optional(o.ZU.Boolean())}),k=o.ZU.Object({task:o.ZU.Literal("packager.installForAll"),hasUserFacingOutput:o.ZU.Boolean()}),D=o.ZU.Object({task:o.ZU.Literal("workflow.run"),args:o.ZU.String()}),E=o.ZU.Object({task:o.ZU.Literal("workflow.run"),runId:o.ZU.String()}),R=o.ZU.Union([u,w,g,p,h,_,x,b,D,Y]),I=o.ZU.Union([d,y,v,f,m,k,C,S,E,A]),F=o.ZU.Union([o.ZU.Literal("parallel"),o.ZU.Literal("sequential")]),T=o.ZU.Object({agentRequireRestartOnSave:o.ZU.Optional(o.ZU.Boolean({description:"Meant for agent use only. Some frameworks have Hot Module Replacement or other mechanisms to automatically serve updated contents when files change. This metadata option is intended to be set to true when the frameworks do not have support for HMR, and the caller is expected to manually restart the workflow after saving files."})),agentRestartPatterns:o.ZU.Optional(o.ZU.Array(o.ZU.String(),{description:"Meant for agent use only. Specify a list of glob patterns used for matching file change events that would require a restart."})),generated:o.ZU.Optional(o.ZU.Boolean({description:"Used for auto-generated workflows, generated workflows should be kept read-only, and do not persist in .replit, examples being run button workflow, or package.json generated workflows."})),dotReplitRun:o.ZU.Optional(o.ZU.Boolean({description:"Only used by the workflow generated from .replit run configuration, only to be set internally in workflow service state and should not be persisted in dotreplit (unless potentially duplicated by the user)"}))}),P=o.ZU.Union([o.ZU.Literal("agent"),o.ZU.Literal("system"),o.ZU.Number()]),L=o.ZU.Object({name:o.ZU.String(),mode:o.ZU.Optional(F),metadata:o.ZU.Optional(T),tasks:o.ZU.Array(R),author:o.ZU.Optional(P)});o.ZU.Object({workflows:o.ZU.Object({runButton:o.ZU.Optional(o.ZU.String()),workflow:o.ZU.Optional(o.ZU.Array(L))})}),o.ZU.Object({runButton:o.ZU.Optional(o.ZU.String()),workflow:o.ZU.Optional(o.ZU.Array(L))});var U={userIds:o.ZU.Array(o.ZU.Number()),metadata:o.ZU.Optional(I)},N=o.ZU.Union([o.ZU.Object((0,i._)((0,r._)({},U),{state:o.ZU.Literal("NOT_STARTED")})),o.ZU.Object((0,i._)((0,r._)({},U),{state:o.ZU.Literal("RUNNING"),isReady:o.ZU.Optional(o.ZU.Boolean()),startTime:o.ZU.Number()})),o.ZU.Object((0,i._)((0,r._)({},U),{state:o.ZU.Literal("FAILED"),startTime:o.ZU.Number(),endTime:o.ZU.Number(),result:o.ZU.Optional(o.ZU.Object({message:o.ZU.Optional(o.ZU.String()),exitCode:o.ZU.Optional(o.ZU.Number())}))})),o.ZU.Object((0,i._)((0,r._)({},U),{state:o.ZU.Literal("FINISHED"),startTime:o.ZU.Number(),endTime:o.ZU.Number(),result:o.ZU.Optional(o.ZU.Object({message:o.ZU.Optional(o.ZU.String()),exitCode:o.ZU.Optional(o.ZU.Number())}))})),o.ZU.Object((0,i._)((0,r._)({},U),{state:o.ZU.Literal("ERROR"),startTime:o.ZU.Number(),endTime:o.ZU.Number(),result:o.ZU.Optional(o.ZU.Object({message:o.ZU.Optional(o.ZU.String())}))}))]);o.ZU.Record(o.ZU.String(),o.ZU.Object({runId:o.ZU.String(),startTime:o.ZU.Number(),endTime:o.ZU.Optional(o.ZU.Number()),step:o.ZU.Enum(s),tasks:o.ZU.Array(N),workflow:L,userId:o.ZU.Optional(o.ZU.Union([o.ZU.Literal("agent"),o.ZU.Number()]))}))},70390:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(12694),i=t(21462),o=t(50185),a=t(31062);function l(e){var n=(0,a.A)(),t=(0,r._)((0,o.F)(),1)[0];(0,i.useEffect)(function(){if(e){var r=e.messages.filter(function(e){return!e.seen}).map(function(e){return e.id});0!==r.length&&t({variables:{replId:n,threadId:e.id,messageIds:r},optimisticResponse:{__typename:"RootMutationType",markMessagesAsSeen:{messages:r.map(function(e){return{id:e,seen:!0,__typename:"AnnotationMessage"}}),__typename:"AnnotationMessageList"}}})}},[n,e,t])}},70430:(e,n,t)=>{"use strict";t.d(n,{A:()=>h});var r=t(88263),i=t(29542),o=t.n(i),a=t(1040),l=t(45263),s=t(64583),c=t(48521),u=t(33220),d=t(76126),p=t(10429),f=(0,s.x)({url:[c.wp.color.accentPositiveStronger,c.wp.fontSize("small"),c.wp.focusRing,{"&:hover":[c.wp.cursor.pointer,c.wp.color.accentPositiveStrongest]}],qrCodeWrapper:[c.wp.borderRadius(4),c.wp.display.inlineBlock,c.wp.border({width:1,color:l.LU.outlineDefault}),{backgroundColor:"white"}]});function h(e){var n=e.url;return(0,r.FD)(p.S,{gap:4,children:[(0,r.Y)(d.EY,{children:"Dev URL:"}),(0,r.Y)(p.S,{row:!0,gap:4,children:(0,r.FD)(p.S,{row:!0,gap:4,align:"center",children:[(0,r.Y)(o(),{legacyBehavior:!0,href:n,passHref:!0,children:(0,r.Y)("a",{css:f.url,target:"_blank",children:n})}),(0,r.Y)(u.r,{textToCopy:n,tooltipText:"Copy link",tooltipDelay:"none"})]})}),(0,r.Y)(p.S,{align:"start",children:(0,r.Y)(p.S,{css:f.qrCodeWrapper,p:8,children:(0,r.Y)(a.Ay,{size:128,value:n})})}),(0,r.Y)(d.EY,{color:"dimmer",variant:"small",children:"Dev URLs are temporary and will sleep after you leave the workspace."})]})}},70431:(e,n,t)=>{"use strict";t.d(n,{Y:()=>p});var r=t(88263),i=t(35084),o=t(64583),a=t(48521),l=t(54087),s=t(37039),c=t(69258),u=t(83023),d=(0,o.x)({bannerButton:{span:[a.wp.textAlign.left]}});function p(e){var n=e.deployability,t=e.isRedeploy,o=n.deploy,a=n.redeploy,p=t?a:o;return p.isAuthorized?null:p.code===i.S4.RequiresActiveTeamsSubscription?(0,r.Y)(s.d,{href:"/teams/new",target:"_blank",text:"".concat(p.message," Click here to get started by creating a new organization."),colorway:"warning",iconLeft:(0,r.Y)(c.A,{}),iconRight:(0,r.Y)(u.A,{}),css:d.bannerButton}):(0,r.Y)(l.N,{text:p.message,colorway:"warning",icon:(0,r.Y)(c.A,{})})}},70484:(e,n,t)=>{"use strict";t.d(n,{A:()=>s,L:()=>u});var r=t(12694),i=t(21462),o=t(95139),a=t(16007),l=t(93369);function s(){var e=(0,i.useRef)(0),n=(0,r._)((0,i.useState)(!1),2),t=n[0],l=n[1],s=(0,o.m5)(),u=(0,o.m6)(),d=(0,a.b)();return(0,i.useEffect)(function(){var n,t=window.visualViewport;if(t){if(u)return void l(null!=(n=null==d?void 0:d.isShown)&&n);if(s){var r=function(){l(c({current:t.height,initial:e.current}))};return e.current=t.height,t.addEventListener("resize",r),function(){t.removeEventListener("resize",r)}}}},[s,u,null==d?void 0:d.isShown]),t}function c(e){return e.current<.8*e.initial}function u(e){var n=(0,l.A)(e),t=(0,i.useRef)(0),r=(0,o.m6)();(0,i.useEffect)(function(){if(!r){var e=window.visualViewport;if(e){var i=function(){n.current(c({current:e.height,initial:t.current}))};return t.current=e.height,e.addEventListener("resize",i),function(){e.removeEventListener("resize",i)}}}},[n,r])}},70699:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(21462),i=t(96907),o=t.n(i),a=t(41852);function l(e){!function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:500;(0,r.useEffect)(function(){if(null!=n)return n.portsState.subscribe(o()(function(n){if(null!=n){var t=!0,r=!1,i=void 0;try{for(var o,a=n[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;if(l.isOpen&&!l.configuration.isVnc)return void e.set(!0)}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}e.set(!1)}},t))},[n,e,t])}((0,a.Av)(),e)}},70973:(e,n,t)=>{"use strict";t.d(n,{K4:()=>$,aD:()=>J});var r=t(29935),i=t(83846),o=t(12694),a=t(82643),l=t(88263),s=t(21462),c=t(69338),u=t(86529),d=t(35084),p=t(82300),f=t(82377),h=t(49153),m=t(88734),g=t(31538),v=t(22305),w=t(77449),y=t(73361),b=t(1205),S=t(59851),Y=t(5504),A=t(31062),x=t(53231),C=t(33221),_=t(45263),k=t(64583),D=t(48521),E=t(46603),R=t(77089),I=t(54087),F=t(36112),T=t(76126),P=t(59172),L=t(10429),U=t(18870),N=t(17893),O=t(66525),M=t(47177),B=t(92855),H=t(71117),z=t(22318),W=t(80762),G=t(46404),V=t(47388),j=t(69258),Z=t(52216),q=t.n(Z),K=(0,k.x)({titleShort:(0,i._)({display:"inline"},D.kL.min(411),{display:"none"}),titleLong:(0,i._)({display:"none"},D.kL.min(411),{display:"inline"})}),$=(0,s.memo)(function(e){var n=e.created,t=e.onConfigure,r=e.paneType,i=(0,h.cF)();return(0,l.Y)(J,{created:n,onConfigure:t,currentBuild:i,hasDeployment:!!i,paneType:r})});function J(e){var n,t,i=e.created,u=e.currentBuild,C=e.onConfigure,_=e.hasDeployment,k=e.paneType,D=(0,o._)((0,s.useState)(void 0),2),E=D[0],R=D[1],I=(0,o._)((0,s.useState)(!1),2),F=I[0],T=I[1],P=(0,o._)((0,s.useState)(null),2),L=P[0],U=P[1],N=(0,o._)((0,s.useState)(!0),2),B=N[0],H=N[1],z=(0,s.useCallback)(function(e){(0,S.Q)({error:Error(e),context:"SuggestDeployCard",isDeploymentsPane:!1}),T(!0)},[]),W=(0,A.A)(),V=(0,h.ik)(W),j=(0,h.Ol)(),Z=(0,h.om)(),q=(0,h.g$)(),$=(0,h.kM)({replId:W,onError:z,dotReplitService:j}).recommendedProvider,J=(0,(0,h.mj)().getDeployabilityByProvider)($).deploy,X=J.isAuthorized,ee="Loading"===J.message;(0,s.useEffect)(function(){!ee&&(X||R("NOT_AVAILABLE"))},[ee,X]);var en=(0,o._)((0,s.useState)(null),2),et=en[0],er=en[1],ei=(0,b.wQ)({replId:W,onError:z}).machineConfigurations,eo=(0,w.g)({onError:z}).machineConfigurations,ea=(0,o._)((0,c.fp)(v.h0),1)[0],el=(0,c.md)(g.NF),es=(0,c.md)(g.No);(0,s.useEffect)(function(){if($)switch($){case d.Q0.Gce:if(!ei)return;var e=(0,b.pR)({machineConfigurations:ei,isTeamRepl:V});if(!e)return void z("An error occurred trying to validate default machine configuration");var n=e.id,t=e.slug;er({configurationId:n,configurationLabel:e.label,configurationSlug:t});break;case d.Q0.CloudRun:if(!eo)return;var r=eo.find(function(e){var n=e.vcpu,t=e.memory;return el.toString()===n&&es.toString()===t});if(!r)return void z("An error occurred trying to validate selected machine configuration");var i=r.id,o=r.slug;er({configurationId:i,configurationLabel:r.label,configurationSlug:o,maxInstances:ea})}},[eo,el,es,V,ea,$,ei,z]);var ec=(0,o._)((0,s.useState)(d.JX.Server),2),eu=ec[0],ed=ec[1],ep=(0,o._)((0,s.useState)(null),2),ef=ep[0],eh=ep[1],em=(0,o._)((0,s.useState)(null),2),eg=em[0],ev=em[1],ew=(0,o._)((0,s.useState)(null!=(t=null==u?void 0:u.envVars.map(function(e){return{name:e.name,value:e.value}}))?t:[]),2),ey=ew[0],eb=ew[1],eS=(0,o._)((0,s.useState)(!1),2),eY=eS[0],eA=eS[1],ex=(0,o._)((0,s.useState)(null),2),eC=ex[0],e_=ex[1],ek=(0,Y._P)({type:"string",controlName:"flag-fallback-deployments-domain",default:p.co}),eD=(0,y.D)({replId:W,provider:$,fs:Z,secrets:q,dotReplit:j,isNewDeployment:!_,onError:z,onOptions:function(e){e.appType&&ed(e.appType),e.envVars&&eb(e.envVars),e.ignorePorts&&eA(e.ignorePorts),e.buildCommand&&eh(e.buildCommand),e.runCommand&&ev(e.runCommand),e.publicDir&&e_(e.publicDir)}}).loading,eE=(0,o._)((0,s.useState)(void 0),2),eR=eE[0],eI=eE[1],eF=(0,o._)((0,s.useState)(void 0),2),eT=eF[0],eP=eF[1],eL=(0,o._)((0,s.useState)(void 0),2),eU=eL[0],eN=eL[1],eO=(0,o._)((0,s.useState)(void 0),2),eM=eO[0],eB=eO[1],eH=(0,h.bu)(),ez=(0,h._k)().getRvmDeploymentCostDetailsByConfigurationSlug;(0,s.useEffect)(function(){if(!eD){if(!$){eI(void 0),eP(void 0),eN(void 0),eB(void 0),R(void 0);return}var e,n,t="".concat(eH).concat((null==(n=window)||null==(e=n.location)?void 0:e.hostname)!=="replit.com"?".staging":"",".").concat(ek);switch($){case d.Q0.Gce:if(!et)return;var r=ez(et.configurationSlug).costPerMonth;eI((0,l.Y)(M.A,{})),eP("Reserved VM Deployment"),eN("$".concat(r,"/month"));var i={};i["Default URL"]=t,ef&&(i["Build Command"]=ef),i["Run Command"]=eg,eB(i);break;case d.Q0.CloudRun:if(!et)return;eI((0,l.Y)(O.A,{})),eP((0,l.FD)(l.FK,{children:[(0,l.Y)("span",{css:K.titleShort,children:"Autoscale"}),(0,l.Y)("span",{css:K.titleLong,children:"Autoscale Deployment"})]}));var o={};o["Default URL"]=t,ef&&(o["Build Command"]=ef),o["Run Command"]=eg,eB(o);break;case d.Q0.Static:eI((0,l.Y)(G.A,{})),eP("Static Deployment"),eN("Free");var a={"Public Directory":eC,"Default URL":t};ef&&(a["Build Command"]=ef),eB(a);break;default:eI(void 0),eP(void 0),eN(void 0),eB(void 0),R(void 0)}}},[ef,el,eH,ek,eD,es,$,ei,eg,ea,V,et,eC,ez]);var eW=(0,h.Tp)(),eG=eW.deployBuild,eV=eW.redeployWithNoNewOptions,ej=(n=(0,r._)(function(){var e,n,t;return(0,a.YH)(this,function(r){switch(r.label){case 0:if(!X)return[2];if(R("DEPLOYING"),(0,x.u4)(x.AZ.DEPLOY_PROJECT_SELECTED,{source:"one_click_deploy",redeploy:_,has_agent_session:!0}),!_)return[3,5];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,eV({hasAgentSession:!0})];case 2:return r.sent(),[3,4];case 3:return z(r.sent().message),[3,4];case 4:return[2];case 5:if(e=L&&B,n=(null==eH?void 0:eH.length)?eH:void 0,!(t=e?L:n))return[2];r.label=6;case 6:return r.trys.push([6,8,,9]),[4,eG({ignoredSecrets:[],envVars:ey.filter(function(e){return(0,f.zV)(e)}),subdomain:t,machineConfigurationId:(null==et?void 0:et.configurationId)||void 0,maxMachineInstances:(null==et?void 0:et.maxInstances)||void 0,config:{buildCommand:ef,runCommand:eg,appType:eu,ignorePorts:eY,publicDir:eC},isPrivate:!1,hasAgentSession:!0})];case 7:return r.sent(),C&&C(),[3,9];case 8:return z(r.sent().message),[3,9];case 9:return[2]}})}),function(){return n.apply(this,arguments)}),eZ=(0,h.uS)();(0,s.useEffect)(function(){if(!F)switch(eZ){case m.d.Ready:if("FAILED"===E||"FINISHED"===E)break;R("READY");break;case m.d.Suspended:R("NOT_AVAILABLE");break;case m.d.Preparing:case m.d.Deploying:R("DEPLOYING")}},[F,eZ,E]),(0,h.kW)(function(e){if(!F&&"HostingBuildDeployStatusAction"===e.__typename)switch(e.status){case d.nH.Failed:R("FAILED");break;case d.nH.Success:R("FINISHED")}}),(0,s.useEffect)(function(){(0,x.u4)(x.AZ.DEPLOY_PROJECT_SELECTED,{source:"one_click_deploy_shown",has_agent_session:!0})},[]);var eq=ee||eD;return(0,l.Y)(Q,{created:i,icon:eR,title:eT,cost:eU,properties:eM,status:F?"NOT_AVAILABLE":E,onDeploy:X&&$&&$!==d.Q0.Cron?ej:void 0,defaultSubdomain:eH,onSubdomainEdit:U,onSubdomainValidityChange:H,onConfigure:C,hasDeployment:_,loading:eq,paneType:k})}function Q(e){var n=e.icon,t=e.title,r=e.cost,i=e.properties,o=e.status,a=void 0===o?"READY":o,s=e.defaultSubdomain,c=e.onDeploy,u=e.onConfigure,d=e.onSubdomainEdit,p=e.onSubdomainValidityChange,f=e.hasDeployment,h=e.loading,m=e.paneType,g=i&&Object.keys(i).length>0,v=h?(0,l.Y)(C.G,{}):(0,l.FD)(L.S,{clsx:q().container,gap:8,"data-event-type":"deploy",children:[(0,l.Y)(T.EY,{clsx:q().message,color:"STALE"===a?"dimmer":"default",children:f?"Want users to get these changes? Redeploy this App.":"Ready to share? Deploy this App in ".concat(c?"one click":"a few clicks",".")}),(null==i?void 0:i["Default URL"])&&!f?(0,l.Y)(ee,{icon:void 0===n?null:n,title:void 0===t?"Deployment":t,cost:void 0===r?"":r,properties:i,paneType:m,initialSubdomain:s,onSubdomainEdit:d,onSubdomainValidityChange:p}):null,c||u?(0,l.Y)(L.S,{row:!0,gap:8,align:"center",justify:g?"start":"end",children:(0,l.Y)(er,{status:a,hasDeployment:f,onDeploy:c,onConfigure:u?function(){u()}:void 0})}):null]});return"agentChat"===m?v:(0,l.Y)(F.ui,{elevated:!0,clsx:q().assistant,children:v})}var X=function(e){var n,t,r,i=e.id,a=e.initialSubdomain,c=e.deploymentId,d=e.onSubdomainEdit,f=e.onSubdomainValidityChange,h=(0,o._)((0,s.useState)(a||""),2),m=h[0],g=h[1],v=(0,Y._P)({type:"string",controlName:"flag-fallback-deployments-domain",default:p.co}),w=v!==p.co,y=(0,u.qA)({variables:{subdomain:m,deploymentId:c},skip:0===m.length}),b=y.data,S=y.loading,A=y.error,x=(null==b?void 0:b.replitAppSubdomainAvailability.__typename)==="ReplitAppSubdomainAvailabilityResult"&&b.replitAppSubdomainAvailability.available,C=(null==b?void 0:b.replitAppSubdomainAvailability.__typename)==="ReplitAppSubdomainAvailabilityResult"?b.replitAppSubdomainAvailability.message:null==b||null==(n=b.replitAppSubdomainAvailability)?void 0:n.errorMessage;return((0,s.useEffect)(function(){f(x)},[x,f]),A)?(0,l.Y)(I.N,{colorway:"negative",text:"Something went wrong, please try refreshing the page."}):(0,l.FD)(L.S,{clsx:q().urlField,children:[(0,l.FD)(L.S,{row:!0,gap:8,align:"center",justify:"space-between",children:[(0,l.Y)(R.pd,{id:i,value:m,onChange:function(e){g(e.target.value),d(e.target.value)}}),(0,l.FD)(T.EY,{multiline:!1,children:[(null==(r=window)||null==(t=r.location)?void 0:t.hostname)!=="replit.com"?".staging":"",".",v]}),(0,l.FD)(L.S,{row:!0,gap:4,pt:4,align:"center",children:[S?(0,l.Y)(W.A,{}):null,x?(0,l.Y)(U.A,{color:"green"}):null,x||S?null:(0,l.Y)(P.m_,{tooltip:C,children:(0,l.Y)(j.A,{color:"red"})})]})]}),w?(0,l.Y)(I.N,{colorway:"warning",text:"The ".concat(p.co," domain is currently unavailable, please use the ").concat(v," URL above.")}):null]})};function ee(e){var n=e.icon,t=e.title,r=e.cost,i=e.paneType,o=e.initialSubdomain,a=e.onSubdomainEdit,s=e.onSubdomainValidityChange;return(0,l.FD)(L.S,{clsx:q().properties,style:"agentChat"===i?{backgroundColor:_.LU.interactiveBackground}:void 0,children:[(0,l.FD)(L.S,{clsx:q().propertiesHeader,row:!0,gap:8,align:"center",justify:"space-between",children:[(0,l.FD)(L.S,{clsx:q().propertiesTitle,row:!0,gap:8,align:"center",children:[(0,l.Y)(H.Z_,{size:20,children:n}),(0,l.Y)(T.EY,{children:t})]}),r?(0,l.Y)(T.EY,{children:r}):null]}),(0,l.FD)(L.S,{clsx:q().urlContainer,gap:8,children:[(0,l.FD)(L.S,{row:!0,gap:8,align:"center",children:[(0,l.Y)(z.A,{}),(0,l.Y)(T.EY,{children:"Primary URL"})]}),(0,l.Y)(L.S,{row:!0,gap:8,align:"center",children:(0,l.Y)(X,{id:"primaryDomain",initialSubdomain:o,onSubdomainEdit:a,onSubdomainValidityChange:s})})]})]})}function en(e){var n,t,r,o,a=e.status,s=e.onDeploy,c=e.onConfigure;if("NOT_AVAILABLE"===a)return(0,l.FD)(L.S,{clsx:q().cannotDeploy,gap:8,children:[(0,l.Y)(I.N,{colorway:"warning",icon:(0,l.Y)(j.A,{}),title:"Deployments not available",text:"There is an issue preventing you from deploying. You may be able to resolve this using the Deployments pane."}),c?(0,l.Y)(E.$n,{onClick:c,iconLeft:(0,l.Y)(V.A,{}),text:"Open Deployments",alignment:"start",colorway:"primary"}):null]});var u=null;switch(a){case"DEPLOYING":u=(0,l.Y)(W.A,{}),n="Deploying",t="primary";break;case"FINISHED":u=(0,l.Y)(U.A,{}),n="Deployed",t="green",r="Click to redeploy";break;case"FAILED":u=(0,l.Y)(j.A,{}),n="Failed",t="red",r="Click to redeploy";break;case"CONFIGURED_MANUALLY":u=(0,l.Y)(N.A,{}),n="Deployment configured manually";break;case"STALE":u=(0,l.Y)(N.A,{}),n="This configuration is for an older version of the app";break;default:return null}var d=(0,l.Y)(E.$n,{onClick:s,text:n,iconLeft:u,colorway:t,loading:"DEPLOYING"===a});return"DEPLOYING"===a||"FINISHED"===a||"FAILED"===a?(0,l.FD)(l.FK,{children:[r?(0,l.Y)(P.m_,{tooltip:r,children:d}):d,c&&"FAILED"===a?(0,l.Y)(E.$n,{onClick:c,iconLeft:(0,l.Y)(V.A,{}),text:"Advanced configuration"}):null]}):(0,l.FD)(L.S,{clsx:(o={},(0,i._)(o,q().status,!0),(0,i._)(o,q().isConfiguredManually,"CONFIGURED_MANUALLY"===a),(0,i._)(o,q().isStale,"STALE"===a),o),row:!0,gap:8,align:"center",children:[u,(0,l.Y)(T.EY,{children:n})]})}var et=(0,k.x)({group:[D.wp.width("100%"),{"> div":{width:"100%"}}]});function er(e){var n=e.status,t=void 0===n?"READY":n,r=e.onDeploy,i=e.onConfigure,o=e.hasDeployment;if(!r&&!i)return null;if("READY"===t){if(r)return(0,l.Y)(l.FK,{children:(0,l.Y)(L.S,{css:et.group,gap:6,justify:"start",align:"end",children:(0,l.FD)(L.S,{row:!0,gap:8,align:"center",justify:"end",children:[i?(0,l.Y)(E.$n,{onClick:i,iconLeft:(0,l.Y)(V.A,{}),text:"Configure myself"}):null,(0,l.Y)(E.$n,{onClick:r,text:o?"Redeploy":"Deploy now",iconLeft:(0,l.Y)(B.A,{}),colorway:"primary"})]})})});if(i)return(0,l.Y)(E.$n,{onClick:i,text:"Open Deployments",iconLeft:(0,l.Y)(B.A,{}),colorway:"primary"})}return(0,l.Y)(en,{status:t,onDeploy:r,onConfigure:i})}},70998:(e,n,t)=>{"use strict";t.d(n,{VP:()=>p,XI:()=>f,fI:()=>d});var r=t(17844),i=t(93629),o=t(17459),a=t(88263),l=t(64583),s=t(48521),c=t(10429),u=(0,l.x)({table:{},tableRow:[s.wp.rowWithGap(12),s.wp.align.center,s.wp.border({direction:"bottom"}),{boxSizing:"border-box"}],column:[s.wp.display.flex,s.wp.colWithGap(0),s.wp.justify.center,s.wp.border({direction:"right"}),{":last-child":{borderRight:0}}],cell:[s.wp.rowWithGap(4),s.wp.align.center,s.wp.color.foregroundDimmest,s.wp.justify.spaceBetween,s.wp.fontSize("small"),s.wp.mx(4),s.wp.py(2),{overflow:"hidden",whiteSpace:"nowrap"}]}),d=function(e){var n=e.children,t=(0,o._)(e,["children"]);return(0,a.Y)("tr",(0,i._)((0,r._)({css:u.tableRow},t),{children:(0,a.Y)(c.S,{row:!0,gap:0,children:n})}))},p=function(e){var n=e.header,t=e.width,r=e.last,i=e.children,o={};return(t&&(o.width=t),r&&(o.marginLeft="auto"),void 0!==n&&n)?(0,a.Y)("th",{style:o,children:(0,a.Y)(c.S,{css:u.cell,children:i})}):(0,a.Y)("td",{css:u.column,style:o,children:(0,a.Y)(c.S,{css:u.cell,children:i})})},f=function(e){var n=e.children;return(0,a.Y)("table",{css:u.table,children:n})}},71380:(e,n,t)=>{"use strict";t.d(n,{LO:()=>u,ff:()=>s,kP:()=>c,w:()=>l});var r=t(21462),i=t(57756),o=t(64870),a=t(34834);function l(e){var n=(0,i.A)(e.portsState);return(0,r.useMemo)(function(){return n?n.filter(function(e){return e.isOpen&&e.configuration.type===o.gH.FORWARDED}):[]},[n])}function s(e){var n=(0,a.A)().ports,t=(0,i.A)(n.portsState);return(0,r.useMemo)(function(){if(t)return t.find(function(n){return n.configuration.type===o.gH.FORWARDED&&n.configuration.externalPort===e})},[t,e])}function c(e){return u((0,a.A)().ports,e)}function u(e,n){var t=(0,i.A)(e.portsState);return(0,r.useMemo)(function(){return n&&t?t.filter(function(e){var t;return null!=(t=e.isOpen&&(null==n?void 0:n.endsWith(e.processInfo.cgroup)))&&t}):[]},[t,n])}},71432:(e,n,t)=>{"use strict";t.d(n,{A:()=>d});var r=t(17844),i=t(12584),o=t(41114),a=t(86997);function l(){var e=(0,i._)(["\n  query ThreadReplCollaborators($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        owner {\n          ... on User {\n            id\n            username\n            image\n            fullName\n          }\n          ... on Team {\n            id\n            username\n            image\n          }\n        }\n        permissions {\n          id\n          user {\n            id\n            username\n            image\n            fullName\n          }\n        }\n      }\n    }\n  }\n"]);return l=function(){return e},e}var s={},c=(0,o.J1)(l()),u=t(31062);function d(){var e=(l={variables:{replId:(0,u.A)()}},d=(0,r._)({},s,l),a.I(c,d)).data;if((null==e?void 0:e.repl.__typename)!=="Repl")return[];var n=[];(null==(p=e.repl.owner)?void 0:p.username)&&"User"===e.repl.owner.__typename&&n.push(e.repl.owner);var t=!0,i=!1,o=void 0;try{for(var l,d,p,f,h=e.repl.permissions[Symbol.iterator]();!(t=(f=h.next()).done);t=!0){var m,g=f.value;(null==(m=g.user)?void 0:m.username)&&n.push(g.user)}}catch(e){i=!0,o=e}finally{try{t||null==h.return||h.return()}finally{if(i)throw o}}return n}},71492:(e,n,t)=>{"use strict";t.d(n,{k:()=>a});var r=t(90629),i=t(1230),o=t(54319);function a(){(0,o.zv)("agent-state-changed",function(e){var n,t,o,a;r.ZQ({category:"chatter",message:"Agent state changed to ".concat((o=function(e){switch(e){case i.g32.AGENT_STATE_NOT_STARTED:return"Not started";case i.g32.AGENT_STATE_PAUSED:return"Paused";case i.g32.AGENT_STATE_PAUSING:return"Pausing";case i.g32.AGENT_STATE_RUNNING:return"Running";case i.g32.AGENT_STATE_UNKNOWN:default:return"Unknown"}}((n=e.state).state),a=null==(t=n.reason)?void 0:t.$kind,"".concat(o," (reason: ").concat(a,")"))),level:"info"})}),(0,o.zv)("client-created-session",function(e){r.ZQ({category:"chatter",message:"Client created ".concat(function(e){switch(e){case i.dF3.CHAT:return"Assistant";case i.dF3.INLINE_CHAT:return"Assistant (inline)";case i.dF3.AGENT_SESSION:return"Agent";default:return"Unknown"}}(e.request.sessionType)," session ").concat(e.session.id),data:e.request,level:"info"})}),(0,o.zv)("client-updated-session",function(e){r.ZQ({category:"chatter",message:"Client updated session ".concat(e.session.id),data:e.request,level:"info"})}),(0,o.zv)("session-graph-fetched",function(e){r.ZQ({category:"chatter",message:"Session graph fetched for session ".concat(e.session.id," (size: ").concat(e.size,")"),level:"info"})}),(0,o.zv)("unexpected-disconnect",function(e){r.ZQ({category:"chatter",message:"Unexpected disconnect: ".concat(e.error.message),level:"error"})}),(0,o.zv)("unhandled-exception",function(e){r.ZQ({category:"chatter",message:"Unhandled exception: ".concat(e.error.message),data:e.error,level:"error"})})}},71618:(e,n,t)=>{"use strict";t.d(n,{G2:()=>v,R7:()=>m,hr:()=>d,jQ:()=>a,jg:()=>c,lY:()=>y,nZ:()=>b,ou:()=>f,x6:()=>S});var r=t(21462),i=t(44370),o=t(69338),a=function(e,n){var t=e.dir,r=e.channel,i=e.stringifiedCmd,o=e.cmd;return(!n.direction||t===n.direction)&&(!n.channels.length||!!n.channels.includes(o.channel))&&(!!(!n.regexp||!n.regexp.test||r.name&&n.regexp.test(r.name)||r.service&&n.regexp.test(r.service))||n.regexp.test(i))},l=(0,i.eU)([]),s=(0,i.eU)([]);function c(){return(0,r.useDeferredValue)((0,o.md)(s))}var u=(0,i.eU)(null,function(e,n,t){a(t,e(h))&&n(s,function(e){return e.concat(t)}),n(l,function(e){return e.concat(t)})});function d(){return(0,o.Xr)(u)}var p=(0,i.eU)(null,function(e,n){n(l,[]),n(s,[])});function f(){return(0,o.Xr)(p)}var h=(0,i.eU)({regexp:null,direction:"",highlightOnly:!1,channels:[]});function m(){return(0,o.md)(h)}var g=(0,i.eU)(null,function(e,n,t){var r;n(h,t),n(s,(r=e(l),(t.regexp||t.direction||t.channels.length)&&!t.highlightOnly?r.filter(function(e){return a(e,t)}):r))});function v(){return(0,o.Xr)(g)}var w=(0,i.eU)(!1);function y(){return(0,o.md)(w)}function b(){return(0,o.Xr)((0,r.useMemo)(function(){return(0,i.eU)(null,function(e,n,t){return n(w,t)})},[]))}function S(){return(0,o.Xr)((0,r.useMemo)(function(){return(0,i.eU)(null,function(e,n){return n(w,function(e){return!e})})},[]))}},71868:(e,n,t)=>{"use strict";t.d(n,{A:()=>a});var r=t(29935),i=t(82643),o=t(83150);function a(e,n){return l.apply(this,arguments)}function l(){return(l=(0,r._)(function(e,n){var t,r,a,l,s;return(0,i.YH)(this,function(i){return t=(0,o.P7)(e),r=(0,o.WP)(e),a=new Blob([n.toBuffer()],{type:t}),(l=document.createElement("a")).download=r,l.href=s=window.URL.createObjectURL(a),l.style.display="none",document.body.appendChild(l),l.click(),setTimeout(function(){document.body.removeChild(l),URL.revokeObjectURL(s)},1e4),[2]})})).apply(this,arguments)}},72087:(e,n,t)=>{"use strict";t.d(n,{D:()=>s});var r=t(79730),i=t(22761),o=t(64513),a=r.ZU.Union(Object.values(o.ik).map(function(e){return r.ZU.Literal(e)})),l=r.ZU.Object({type:r.ZU.Literal("docs"),data:r.ZU.Optional(r.ZU.Object({url:r.ZU.Optional(r.ZU.Union([a,r.ZU.Null()]))}))}),s=function(e){return i.T(l,e)}},72479:(e,n,t)=>{"use strict";t.d(n,{n:()=>p,c:()=>f});var r=t(12584),i=t(41114),o=t(13424);function a(){var e=(0,r._)(["\n  fragment WorkspaceHeaderComputeAlertCurrentUser on CurrentUser {\n    id\n    userSubscriptionType\n  }\n"]);return a=function(){return e},e}function l(){var e=(0,r._)(["\n  fragment WorkspaceHeaderComputeAlertRepl on Repl {\n    id\n    owner {\n      __typename\n      ... on Team {\n        id\n      }\n      ... on User {\n        id\n      }\n    }\n  }\n"]);return l=function(){return e},e}var s=(0,i.J1)(a()),c=(0,i.J1)(l());function u(){var e=(0,r._)(["\n  fragment ReplEnvironmentHeaderLeftCurrentUser on CurrentUser {\n    id\n    ...WorkspaceHeaderComputeAlertCurrentUser\n  }\n  ","\n"]);return u=function(){return e},e}function d(){var e=(0,r._)(["\n  fragment ReplEnvironmentHeaderLeftRepl on Repl {\n    id\n    slug\n    url\n    ...WorkspaceHeaderReplMetadataRepl\n    ...WorkspaceHeaderComputeAlertRepl\n  }\n  ","\n  ","\n"]);return d=function(){return e},e}var p=(0,i.J1)(u(),s),f=(0,i.J1)(d(),o.a,c)},72498:(e,n,t)=>{"use strict";t.d(n,{A:()=>o});var r=t(12694),i=t(21462);function o(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=(0,r._)((0,i.useState)(e),2),t=n[0],o=n[1];return[t,(0,i.useCallback)(function(){return o(function(e){return!e})},[])]}},72530:(e,n,t)=>{"use strict";t.d(n,{A:()=>f,Z:()=>d});var r=t(29935),i=t(82643),o=t(21462),a=t(1230),l=t(54319),s=t(47630),c=t(5504),u=t(15036);function d(e){return p.apply(this,arguments)}function p(){return(p=(0,r._)(function(e){var n,t,r,o,l,s,c,u,d,p;return(0,i.YH)(this,function(i){switch(i.label){case 0:return n=e.chatter,t=e.commitId,r=e.title,o=e.onSessionChange,l=e.openPane,s=e.currentSession,c=e.rollbackDatabase,[4,n.sessions.rollback({targetCommitId:t,newSessionTitle:"Revert to: '".concat(r,"'"),originalSessionId:s.id})];case 1:if(!(u=i.sent()).ok)throw Error("failed to revert");return d=u.payload,o(d),c&&(p=n.hook("received-completed-event",function(e){var n,r=e.event;if(r.sessionId===d.id&&(null==(n=r.contents.contents)?void 0:n.$kind)==="agentTimelineEventContents"){var i=r.contents.contents.agentTimelineEventContents.toolData;(null==i?void 0:i.$kind)==="revertData"&&i.revertData.status===a.TB3.REVERT_DATA_STAGE_COMPLETE&&(l({type:"neon",data:{openAtTab:{type:"settings",data:{restoreToCommitId:t}}}}),p())}})),[2]}})})).apply(this,arguments)}function f(e){var n,t=e.checkpoint,a=e.onSessionChange,p=e.openPane,f=(0,c._P)({controlName:"flag-back-to-the-future",logFlagToAnalytics:!0}),h=(0,l.NC)(),m=(0,s.J2)(h.sessions.agent.current),g=(0,o.useMemo)(function(){return!!f||(null==m?void 0:m.id)===t.sessionId},[f,m,t.sessionId]);return{onRevert:(0,o.useCallback)((n=(0,r._)(function(e){return(0,i.YH)(this,function(n){switch(n.label){case 0:if(!g)throw Error("invalid rollback target");if(!m)return[2];if((0,u.pI)({action:"revert_started",messageText:"Reverting to checkpoint: '".concat(t.title,"'"),sessionId:t.sessionId}),!f)return[3,2];return[4,d({chatter:h,commitId:t.commitId,title:t.title,onSessionChange:a,openPane:p,rollbackDatabase:null==e?void 0:e.rollbackDatabase,currentSession:m})];case 1:return n.sent(),[3,4];case 2:return[4,m.appendEvent({kind:"revert",commitHash:t.commitId,commitMessage:"Revert to checkpoint: '".concat(t.title,"'"),eventIdBeforeRevert:t.eventId})];case 3:if(!n.sent().ok)throw Error("failed to append revert event");n.label=4;case 4:return[2]}})}),function(e){return n.apply(this,arguments)}),[f,h,m,t,a,g,p]),isValidTarget:g}}},72659:(e,n,t)=>{"use strict";t.d(n,{DY:()=>f,LM:()=>d});var r=t(17844),i=t(12584),o=t(41114),a=t(86997),l=t(16752);function s(){var e=(0,i._)(["\n  fragment ConvertedToProjectModalRepl on Repl {\n    id\n    org {\n      id\n    }\n    project {\n      id\n    }\n  }\n"]);return s=function(){return e},e}function c(){var e=(0,i._)(["\n  query ConvertedToProjectModal($id: String!) {\n    getRepl(id: $id) {\n      ... on Repl {\n        id\n        org {\n          id\n          slug\n        }\n        project {\n          id\n          title\n          mainRepl {\n            id\n          }\n        }\n        ...CreateProjectForkRepl\n      }\n    }\n  }\n  ","\n"]);return c=function(){return e},e}var u={},d=(0,o.J1)(s()),p=(0,o.J1)(c(),l.T);function f(e){var n=(0,r._)({},u,e);return a.I(p,n)}},72667:(e,n,t)=>{"use strict";t.d(n,{P4:()=>h,Qs:()=>f,_L:()=>d});var r=t(17844),i=t(12584),o=t(41114),a=t(86997);function l(){var e=(0,i._)(["\n  fragment OrgReplCreator on User {\n    id\n    displayName\n    username\n    image\n  }\n"]);return l=function(){return e},e}function s(){var e=(0,i._)(["\n  query UserSelectorSearch($orgId: String!, $searchInput: OrgMembersInput!) {\n    currentUser {\n      __typename\n      id\n      org(orgId: $orgId) {\n        __typename\n        ... on Org {\n          id\n          members(input: $searchInput) {\n            __typename\n            ... on Error {\n              message\n            }\n            ... on OrgMemberConnection {\n              __typename\n              items {\n                member {\n                  id\n                  user {\n                    id\n                    ...OrgReplCreator\n                  }\n                }\n                type\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return s=function(){return e},e}function c(){var e=(0,i._)(["\n  query UserSelectorGetUser($id: Int!) {\n    user(id: $id) {\n      id\n      ...OrgReplCreator\n    }\n  }\n  ","\n"]);return c=function(){return e},e}var u={},d=(0,o.J1)(l()),p=(0,o.J1)(s(),d);function f(e){var n=(0,r._)({},u,e);return a.I(p,n)}var h=(0,o.J1)(c(),d)},73040:(e,n,t)=>{"use strict";t.d(n,{J:()=>V});var r=t(88263),i=t(79730),o=t(22761),a=t(83150),l=t(29935),s=t(12694),c=t(82643),u=t(21462),d=t(90629),p=t(7512),f=t(34834),h=t(92985),m=t(86105),g=t(4880),v=t(93707),w=t(82315),y=t(51244),b=t(79209),S=t(45263),Y=t(64583),A=t(48521),x=t(38292),C=t(81526),_=t(10429),k=t(56002),D=(0,b.i7)({"0%":{backgroundColor:S.LU.accentPrimaryDimmer},"100%":{backgroundColor:"transparent"}}),E=(0,Y.x)({filter:[A.wp.border({color:S.LU.outlineDimmest,direction:"bottom"})],tableRoot:[A.wp.flex.growAndShrink(1),A.wp.width("100%"),A.wp.overflow("auto"),{'&[data-resizing="true"]':{overflow:"hidden",pointerEvents:"none"}}],virtualTable:[A.wp.width("fit-content"),A.wp.position.relative],tableHeader:[A.wp.display.flex,A.wp.flex.row,A.wp.backgroundColor.backgroundDefault,A.wp.position.sticky,A.wp.zIndex(1),A.wp.top(0),A.wp.noSelect],headerCell:[A.wp.color.foregroundDefault,A.wp.fontWeight.medium,A.wp.fontSize(12),A.wp.px(6),A.wp.display.flex,A.wp.align.center,A.wp.border({color:S.LU.outlineDimmest,direction:"bottom"}),A.wp.border({color:S.LU.outlineDimmest,direction:"right"}),{height:25,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis","&:first-child":{background:S.LU.backgroundDefault,position:"sticky",left:0,zIndex:1}}],tableRow:[A.wp.flex.row,{'&[data-highlighted="true"]':{animation:"".concat(D," ").concat(2e3,"ms ease-out forwards")}}],tableCell:[A.wp.display.flex,A.wp.align.center,A.wp.color.foregroundDimmer,A.wp.fontSize(12),A.wp.px(6),A.wp.border({color:S.LU.outlineDimmest,direction:"bottom"}),A.wp.border({color:S.LU.outlineDimmest,direction:"right"}),{height:25,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis","&:first-child":{justifyContent:"center",position:"sticky",left:0,background:S.LU.backgroundDefault}}],resizeHandle:[A.wp.position.absolute,A.wp.top(0),A.wp.right(0),A.wp.height("100%"),A.wp.width(4),{cursor:"col-resize","&:hover":{backgroundColor:S.LU.accentPrimaryDefault}}]}),R=function(e,n){var t=(0,s._)((0,u.useState)(e),2),r=t[0],i=t[1],o=(0,u.useMemo)(function(){return new w.$S(e,{selector:function(e){return Object.values(e).join(" ")},casing:"case-insensitive"})},[e]);return(0,u.useEffect)(function(){if(!n)return void i(e);o.find(n).then(function(e){i(e.map(function(e){return e.item}))}).catch(function(){})},[e,o,n]),r},I=function(e){var n=(0,s._)((0,u.useState)(e),2),t=n[0],r=n[1],i=(0,s._)((0,u.useState)(null),2),o=i[0],a=i[1],l=(0,s._)((0,u.useState)(0),2),c=l[0],d=l[1],p=(0,s._)((0,u.useState)(0),2),f=p[0],h=p[1],g=(0,u.useCallback)(function(e,n){a(e),d(n.clientX),h(t[e])},[t]),v=(0,u.useCallback)(function(e){if(null!==o){var n=Math.max(50,Math.min(300,f+(e.clientX-c)));r(function(e){var t=(0,m._)(e);return t[o]=n,t})}},[o,f,c]),w=(0,u.useCallback)(function(){a(null)},[]);return(0,u.useEffect)(function(){if(null!==o){var e=function(e){return v(e)},n=function(){return w()};return document.addEventListener("mousemove",e),document.addEventListener("mouseup",n),function(){document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",n)}}},[w,v,o]),{columnWidths:t,setColumnWidths:r,resizingColumn:o,handleResizeStart:g}};function F(e){var n=e.data,t=e.initialLine,i=e.openInEditor,o=(0,y.a)(),a=(0,s._)((0,u.useState)(""),2),l=a[0],c=a[1],d=(0,u.useMemo)(function(){if(0===n.length)return{headers:[],data:[],calculatedColumnWidths:[]};var e=[""].concat((0,m._)(n[0])),t=e.map(function(e,n){return{key:n.toString(),label:e,isRowHeader:0===n}}),r=[],i=Array(e.length).fill(0);n.slice(1).forEach(function(e,n){var o={0:(n+1).toString(),key:n.toString()};t.slice(1).forEach(function(n,t){var r=e[t]||"";o[(t+1).toString()]=r,i[t+1]=Math.max(i[t+1],r.length)}),r.push(o)});var o=i.map(function(e,n){return 0===n?25:Math.min(Math.max(8*Math.max(e,t[n].label.length),50),300)});return{headers:t,data:r,calculatedColumnWidths:o}},[n]),p=d.headers,f=d.data,h=d.calculatedColumnWidths,w=R(f,l),b=I(h),S=b.columnWidths,Y=b.setColumnWidths,A=b.resizingColumn,D=b.handleResizeStart,F=(0,s._)((0,u.useState)(null),2),T=F[0],P=F[1];(0,u.useEffect)(function(){Y(h)},[h,Y]);var L=(0,u.useRef)(null),U=(0,g.Te)({count:w.length,getScrollElement:function(){return L.current},estimateSize:function(){return 25},overscan:10,rangeExtractor:function(e){var n=new Set([0].concat((0,m._)((0,v.vp)(e))));return(0,m._)(n)}});return(0,u.useEffect)(function(){if(t&&w.length>t){var e=t-2;U.scrollToIndex(e,{align:"center"}),P(e);var n=setTimeout(function(){return P(null)},2e3);return function(){return clearTimeout(n)}}},[w.length,t,U]),(0,r.FD)(r.FK,{children:[(0,r.Y)(_.S,{css:E.filter,p:4,children:(0,r.Y)(C.I,{value:l,onChange:function(e){return c(e.target.value)},onClear:function(){return c("")}})}),(0,r.Y)("div",{css:E.tableRoot,ref:L,"data-resizing":null!==A,children:(0,r.FD)("div",{css:E.virtualTable,style:{height:"".concat(U.getTotalSize(),"px"),width:"".concat(S.reduce(function(e,n){return e+n},0),"px")},children:[(0,r.Y)("div",{css:E.tableHeader,children:p.map(function(e,n){return(0,r.FD)("div",{css:E.headerCell,style:{width:"".concat(S[n],"px")},children:[e.label,o||0===n?null:(0,r.Y)("div",{css:E.resizeHandle,onMouseDown:function(e){return D(n,e)},role:"separator"})]},e.key)})}),U.getVirtualItems().map(function(e){var n=w[e.index];return n?(0,r.Y)("div",{css:E.tableRow,"data-index":e.index,"data-highlighted":e.index===T,style:{position:"absolute",top:0,left:0,width:"100%",height:"".concat(e.size,"px"),transform:"translateY(".concat(25+e.start,"px)")},children:p.map(function(e,t){var o=n[e.key];return(0,r.Y)("div",{css:E.tableCell,style:{width:"".concat(S[t],"px")},children:0===t?(0,r.Y)(x.K0,{colorway:"primary",alt:"Edit at this line",onClick:function(){return i(parseInt(o,10)+1)},size:18,children:(0,r.Y)(k.A,{})}):o},e.key)})},e.key.toString()):null})]})})]})}var T=t(38633),P=t(48578),L=t(9414),U=t(54087),N=t(66257),O=t(80762),M=t(69258),B=(0,Y.x)({root:[A.wp.flex.column,A.wp.height("100%"),A.wp.width("100%"),A.wp.overflow("hidden")],loadingContainer:[A.wp.flex.growAndShrink(1),A.wp.center]});function H(e){var n=e.filePath,i=e.initialLine,o=e.performPaneOperation,a=(0,f.A)().fs,m=(0,s._)((0,u.useState)([]),2),g=m[0],v=m[1],w=(0,u.useCallback)(function(e){o({operation:"replace",pane:{type:"codeEditor",data:{path:n,line:e}}}),o({operation:"commit"})},[o,n]);(0,L.Qt)(function(){return{commands:[{commands:[{match:h.G2,data:{label:"Open in Editor",icon:(0,r.Y)(N.A,{}),type:"action",run:function(){return w()}}}]}]}},[w]);var y=(0,s._)((0,u.useState)(!1),2),b=y[0],S=y[1],Y=(0,s._)((0,u.useState)(!0),2),A=Y[0],x=Y[1];return(0,u.useEffect)(function(){var e,r=(e=(0,l._)(function(e){var n;return(0,c.YH)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,t.e(5800).then(t.t.bind(t,75800,23))];case 1:return r.sent().default.parse(e,{complete:function(e){v(e.data),x(!1),S(!1)}}),[3,3];case 2:return n=r.sent(),d.Cp(n),S(!0),[3,3];case 3:return[2]}})}),function(n){return e.apply(this,arguments)});return a.watchTextFile(n,{onReady:function(e){return r(e.initialContent)},onChange:function(e){return r(e.latestContent)},onMoveOrDelete:function(e){e.eventType===p.dV.Delete&&o({operation:"replace",pane:{type:"commands",data:{autoFocus:!0}}})}})},[n,a,o]),(0,r.FD)(_.S,{css:B.root,children:[(0,r.Y)(T.ou,{path:n,performPaneOperation:o,children:(0,r.Y)(P.k,{altText:"Open file in editor",buttonText:"Open in Editor",onClick:function(){return w()},icon:(0,r.Y)(N.A,{})})}),b?(0,r.Y)(_.S,{p:8,children:(0,r.Y)(U.N,{icon:(0,r.Y)(M.A,{}),colorway:"red",text:"This CSV could not be displayed."})}):(0,r.Y)(r.FK,{children:A?(0,r.Y)(_.S,{css:B.loadingContainer,children:(0,r.Y)(O.A,{})}):(0,r.Y)(F,{data:g,openInEditor:w,initialLine:i})})]})}var z=t(58370),W=t(45666),G=i.ZU.Object({type:i.ZU.Literal("csvPreview"),data:i.ZU.Object({path:i.ZU.String(),line:i.ZU.Optional(i.ZU.Integer())})}),V={Content:function(e){var n=e.options.performPaneOperation,t=e.pane.data,i=t.path,o=t.line;return(0,r.Y)(H,{filePath:i,performPaneOperation:n,initialLine:o})},Icon:function(e){var n=e.size;return(0,r.Y)(W.A,{size:n})},getTitle:function(e){return e.data.path?(0,a.WP)(e.data.path):"CSV Preview"},description:"Preview CSV files in a tabular format",category:z.bY.Other,decode:function(e){return o.T(G,e)}}},73102:e=>{e.exports={timeline:"InitialVersionTimeline_timeline__IeRy8",timelineItemComplete:"InitialVersionTimeline_timelineItemComplete__ns3Ss",timelineItemText:"InitialVersionTimeline_timelineItemText__WNezU",divider:"InitialVersionTimeline_divider__91eww"}},73279:(e,n,t)=>{"use strict";t.d(n,{A:()=>v});var r=t(62019),i=t(37743),o=t(1833),a=t(17844),l=t(93629),s=t(88263),c=t(21462),u=t(90629),d=t(3218),p=t(10429),f=t(28708),h=t.n(f),m=t(95570),g=function(e){function n(){var e;return(0,i._)(this,n),e=(0,r._)(this,n,arguments),e.state={hasErrored:!1,error:null,errorInfo:null},e}(0,o._)(n,e);var t=n.prototype;return t.componentDidCatch=function(e,n){this.setState({hasErrored:!0,error:e,errorInfo:n}),this.props.handleError(e,n),m.error(e)},t.render=function(){if(this.state.hasErrored){var e,n;return(0,s.Y)(p.S,{clsx:h().errorMessage,children:null!=(n=null==(e=this.state.error)?void 0:e.stack)?n:"An unknown error occurred."})}return this.props.children},n}(c.Component);function v(e){var n=e.bsod,t=void 0!==n&&n,r=e.reportToSentry,i=void 0===r||r,o=e.handleError,c=e.children,p=e.origin,f=void 0===p?"ErrorBoundary: (no origin provided)":p,h=e.tags,m=void 0===h?{}:h,v=e.extras,w=void 0===v?{}:v,y=(0,d.iO)();return(0,s.Y)(g,{handleError:function(e,n){t?y({error:e,extras:(0,l._)((0,a._)({},w),{errorInfo:n}),componentStack:n.componentStack,tags:(0,l._)((0,a._)({},m),{errorBoundary:!0}),origin:f}):i&&u.v4(function(t){t.setTag("errorBoundary",!0),t.setTags(m),t.setExtra("errorInfo",n),t.setExtras(w),t.setContext("react",{componentStack:n.componentStack}),u.Cp(e)}),o&&o(e,n)},children:c})}},73361:(e,n,t)=>{"use strict";t.d(n,{S:()=>nA,D:()=>nS});var r=t(29935),i=t(12694),o=t(86105),a=t(82643),l=t(88263),s=t(292),c=t.n(s),u=t(21462),d=t(35992),p=t(77140),f=t(35084),h=t(82377),m=t(7512),g=t(81666),v=t(49153),w=t(88734),y=t(28944),b=t(86529),S=t(82300),Y=t(32957),A=t(5504),x=t(93369),C=t(74837),_=t(64583),k=t(973),D=t(48521),E=t(59172),R=t(10429),I=t(51705),F=t(22318),T=t(65483);function P(e){var n=e.existsInDev;return e.isAutoSynced?(0,l.Y)(E.m_,{tooltip:"This secret is automatically synced to your deployment",children:(0,l.Y)(R.S,{css:U.deploymentOnly,children:(0,l.Y)(F.A,{})})}):n?(0,l.Y)(E.m_,{tooltip:"Syncing has been disabled for this secret",children:(0,l.Y)(R.S,{css:U.unsynced,children:(0,l.Y)(T.A,{})})}):(0,l.Y)(E.m_,{tooltip:"This secret only exists as a deployment secret",children:(0,l.Y)(R.S,{css:U.deploymentOnly,children:(0,l.Y)(I.A,{})})})}var L=[D.wp.borderRadius(8),D.wp.width(32),D.wp.height(32),k.b.filled,D.wp.justify.center,D.wp.align.center],U=(0,_.x)({unsynced:(0,o._)(L).concat([D.wp.color.orangeStrongest]),deploymentOnly:(0,o._)(L).concat([D.wp.color.accentPrimaryStrongest])}),N=t(45263),O=t(29e3),M=t(96556),B=t(42764),H=t(38292),z=t(77089),W=t(54087),G=t(36112),V=t(76126),j=t(18870),Z=t(83650),q=t(80762),K=t(69258),$=(0,_.x)({self:[D.wp.flex.growAndShrink(1)],input:[D.wp.color.greyStrongest],loading:[O.S.backgroundPulse(N.LU.backgroundHighest,N.LU.backgroundHigher)],error:[D.wp.color.accentNegativeStronger]}),J=function(e){var n=e.id,t=e.value,r=e.loading,i=e.disabled,o=e.onChange,a=e.error,s=e.placeholder,c=e.type,d=void 0===c?"text":c,p=e.onFocus,f=(0,h.mU)(t),m=(0,u.useId)();return d||(d="text"),(0,l.FD)(R.S,{css:$.self,gap:4,children:[(0,l.Y)(z.pd,{id:n,value:!r&&f?t:"",onChange:function(e){return o(e.target.value)},css:r?$.loading:$.input,disabled:r||i,"aria-describedby":m,placeholder:r?"":s,type:d,onFocus:p}),a?(0,l.Y)(R.S,{css:$.error,"aria-live":"polite","aria-atomic":"true",id:m,children:(0,l.Y)("span",{children:a})}):null]})},Q=(0,_.x)({root:[D.wp.rowWithGap(8),D.wp.align.center],iconButton:[D.wp.height("100%"),D.wp.borderRadius(8),{"& button":D.wp.height(32)}],keyInput:[D.wp.width("40%")],valueInput:[D.wp.flex.growAndShrink(1)],error:[D.wp.color.accentNegativeDefault]}),X=function(e){var n=e.index,t=e.name,r=e.value,o=e.disabled,a=e.updateEnvVarName,s=e.updateEnvVarValue,c=e.removeEnvVar,d=e.otherKeys,p=e.devSecrets,f=e.canEditDevSecretsDisabledMessage,h=e.canEditDeploySecretsDisabledMessage,m=e.ignoredSecrets,g=e.optOutSyncing,v=e.optInSyncing,w=e.syncToWorkspace,y=(0,M.c)(),b=(0,i._)((0,u.useState)(""===t||""===r),2),S=b[0],A=b[1],_=!!(t&&r),k=(0,x.A)(_),D=(0,Y.A)(function(){D.current&&k.current&&A(!1)},[k]),E=!!(p&&p.has(t)),I=void 0===h,F=E?m.includes(t)?{type:"unsynced",sync:function(){return w(t)}}:{type:"synced",optOut:function(){return g(t)}}:{type:"deploymentOnly"};if(S)return(0,l.FD)(l.FK,{children:[(0,l.FD)(R.S,{css:Q.root,innerRef:D,children:[(0,l.Y)(R.S,{css:Q.keyInput,children:(0,l.Y)(z.pd,{placeholder:"Name",id:"".concat(y,"-name-").concat(n),value:t,onChange:function(e){return a(e.currentTarget.value)},onKeyDown:function(e){"Enter"===e.key&&_&&(g(t),A(!1))},disabled:o})}),(0,l.Y)(R.S,{css:Q.valueInput,children:(0,l.Y)(z.pd,{placeholder:"Value",name:"".concat(y,"-value-").concat(n),value:r,onChange:function(e){return s(e.currentTarget.value)},onKeyDown:function(e){"Enter"===e.key&&_&&(g(t),A(!1))},disabled:o})}),o?null:(0,l.Y)(G.ui,{elevated:!0,css:Q.iconButton,children:(0,l.Y)(H.K0,{alt:"Add",tooltipBehavior:"hidden",onClick:function(){_?(g(t),A(!1)):(c(),v(t))},children:_?(0,l.Y)(j.A,{}):(0,l.Y)(Z.A,{})})})]}),d.includes(t)?(0,l.FD)(V.EY,{variant:"small",css:Q.error,children:['Secret "',t,'" already exists']}):null]});var T=(0,l.Y)(P,{existsInDev:E,isAutoSynced:!m.includes(t)&&E});return(0,l.FD)(R.S,{css:Q.root,children:[void 0===f?T:null,(0,l.Y)(C.Ge,{value:t}),(0,l.Y)(C.iJ,{value:r,canEditDisabledMessage:h}),I?(0,l.Y)(C.R6,{onEdit:function(){return A(!0)},onDelete:function(){c(),v(t)},autoSyncState:F}):null]})},ee=function(e){var n,t,r,i=e.id,o=e.subdomain,a=e.deploymentId,s=e.onChange,c=e.updateValidity,d=(0,A._P)({type:"string",controlName:"flag-fallback-deployments-domain",default:S.co}),p=d!==S.co,f=(0,b.qA)({variables:{subdomain:o,deploymentId:a},skip:0===o.length}),h=f.data,m=f.loading,g=f.error,v=(null==h?void 0:h.replitAppSubdomainAvailability.__typename)==="ReplitAppSubdomainAvailabilityResult"&&h.replitAppSubdomainAvailability.available,w=(null==h?void 0:h.replitAppSubdomainAvailability.__typename)==="ReplitAppSubdomainAvailabilityResult"?h.replitAppSubdomainAvailability.message:null==h||null==(n=h.replitAppSubdomainAvailability)?void 0:n.errorMessage;return((0,u.useEffect)(function(){c(v)},[v]),g)?(0,l.Y)(W.N,{colorway:"negative",text:"Something went wrong, please try refreshing the page."}):(0,l.FD)(R.S,{children:[(0,l.FD)(R.S,{row:!0,gap:4,align:"center",children:[(0,l.Y)(z.pd,{id:i,placeholder:"subdomain",value:o,onChange:function(e){return s(e.target.value)}}),(0,l.FD)(V.EY,{multiline:!1,children:[(null==(r=window)||null==(t=r.location)?void 0:t.hostname)!=="replit.com"?".staging":"",".",d]})]}),(0,l.FD)(R.S,{row:!0,gap:4,pt:4,align:"center",children:[m?(0,l.FD)(l.FK,{children:[(0,l.Y)(q.A,{}),(0,l.Y)(V.EY,{multiline:!1,children:"Checking availability"})]}):null,v?(0,l.FD)(l.FK,{children:[(0,l.Y)(j.A,{color:"green"}),(0,l.Y)(V.EY,{css:[D.wp.color.greenDefault],multiline:!1,children:"Available"})]}):null,v||m?null:(0,l.FD)(l.FK,{children:[(0,l.Y)(K.A,{color:"red"}),(0,l.Y)(V.EY,{css:[D.wp.color.redDefault],multiline:!1,children:w})]}),p?(0,l.Y)(W.N,{colorway:"warning",text:"The ".concat(S.co," domain is currently unavailable, please use the ").concat(d," URL above.")}):null]})]})},en=function(e){var n=e.appType,t=e.onChange,r=(0,M.c)();return(0,l.Y)(B.e2,{name:"deploymentTargetSelector",value:n,onChange:t,row:!0,css:[D.wp.width("100%"),D.wp.flex.row],children:[{value:f.JX.Server,name:"Web Server",description:"ex. an API or website"},{value:f.JX.Worker,name:"Background Worker",description:"ex. a Discord or Slack bot"}].map(function(e,n){return(0,l.Y)(R.S,{css:[D.wp.flex.grow(1)],children:(0,l.Y)(E.m_,{tooltip:e.description,children:(0,l.Y)(B.$O,{id:r(e.value),value:e.value,text:e.name})})},n)})})},et=t(94009),er=t(56687),ei=t(87882),eo=t(70431),ea=t(83846),el=t(6724),es=t.n(el),ec=t(41704),eu=t(57756),ed=t(64870),ep=t(70998),ef=t(14886),eh=t(51965),em=(0,_.x)({self:[D.wp.mt(8)],accordion:[D.wp.mb(0)],textButton:[D.wp.cursor.pointer,D.wp.reset.button,D.wp.color.accentPrimaryStronger,D.wp.focusRing,D.wp.hover(D.wp.color.accentPrimaryStrongest),{lineHeight:1.2,":not([disabled])":{cursor:"pointer"}}],tableHeader:[D.wp.color.foregroundDimmer,D.wp.m(4),D.wp.textAlign.left],tableWrapper:[D.wp.mb(8),D.wp.colWithGap(8),(0,ea._)({},ec.sX,D.wp.rowWithGap(0))],table:[D.wp.flex.column,D.wp.width("100%"),(0,ea._)({},ec.sX,[D.wp.width("50%"),D.wp.colWithGap(6),{"&:first-child":{table:{borderRight:"1px solid "+N.LU.outlineDimmer}}}])],ghostRow:[D.wp.display.none,(0,ea._)({},ec.sX,D.wp.display.flex)]}),eg=function(e){var n=e.text,t=e.onClick;return(0,l.Y)("button",{css:em.textButton,onClick:t,children:n})};function ev(e){var n=e.hasPortsConfigured,t=e.hasPort80Configured,r=e.hasConflictingPorts,i=e.hasLocalhostPort80,o=e.openNetworkingPane;return n?t?r?(0,l.Y)(W.N,{text:(0,l.FD)(l.FK,{children:["Potential port conflict. Make sure no External Ports have conflicts in your configuration and that you only have one External Port configured on port :80. Open the"," ",(0,l.Y)(eg,{text:"Networking pane to resolve.",onClick:o})]}),colorway:"warning"}):i?(0,l.Y)(W.N,{text:(0,l.FD)(l.FK,{children:["Hosting your deployment on localhost can cause security or performance issues in some cases. Open the"," ",(0,l.Y)(eg,{text:"Networking pane to configure.",onClick:o})]}),colorway:"primary"}):(0,l.Y)(W.N,{text:(0,l.FD)(l.FK,{children:["Deployment forwarding to External Port :80. Open the"," ",(0,l.Y)(eg,{text:"Networking pane to configure.",onClick:o})]}),colorway:"primary"}):(0,l.Y)(W.N,{text:(0,l.FD)(l.FK,{children:["Potential port issue. Deployments require an External Port configured on port :80. Open the"," ",(0,l.Y)(eg,{text:"Networking pane to configure.",onClick:o})]}),colorway:"warning"}):(0,l.Y)(W.N,{text:(0,l.FD)(l.FK,{children:["No ports configured. Deployments will automatically forward the first Internal Port that opens. Open the"," ",(0,l.Y)(eg,{text:"Networking pane to configure.",onClick:o})]})})}var ew=function(e){return 80===(0,ed.Zd)(e.configuration)};function ey(e){var n=e.portState,t=(0,ed.s$)(n.configuration),r=(0,ed.Zd)(n.configuration),i=ew(n);return(0,l.FD)(l.FK,{children:[(0,l.FD)(ep.VP,{width:"50%",children:[(0,l.Y)(V.EY,{children:t?"localhost":"0.0.0.0"}),i&&t?(0,l.Y)(eh.A,{size:16,color:N.ky.primary.default}):null]}),(0,l.FD)(ep.VP,{width:"50%",children:[(0,l.FD)(V.EY,{children:[":",r]}),i?(0,l.Y)(j.A,{size:16,color:N.ky.positive.default}):(0,l.Y)(Z.A,{size:16,color:N.ky.negative.default})]})]})}function eb(e){var n=e.ports,t=e.openNetworkingPane,r=(0,eu.A)(n.portsState),o=(null==r?void 0:r.filter(function(e){return(0,ed.Zd)(e.configuration)}).sort(function(e,n){var t,r;return(null!=(t=(0,ed.Zd)(e.configuration))?t:0)-(null!=(r=(0,ed.Zd)(n.configuration))?r:0)}))||null,a=null==o?void 0:o.find(ew),s=!!a,c=!!(o&&o.length>0),d=!!o&&!!a&&!!(o.filter(ew).length>1||o.some(function(e){return(0,ed.Zd)(e.configuration)===a.configuration.localPort})),p=!!(a&&(0,ed.s$)(a.configuration)),f=c&&!s||d,h=(0,i._)((0,u.useState)(!1),2),m=h[0],g=h[1];return(0,l.Y)(ef.A,{headerContent:(0,l.FD)(R.S,{row:!0,gap:4,align:"center",children:[(0,l.Y)(et.K,{id:"deploymentPortConfiguration",title:"Port configuration",information:"Configure which port your deployment should use for incoming requests."}),f?(0,l.Y)(K.A,{size:16,color:N.ky.warning.strongest}):null]}),expanded:m,onClick:function(){return g(!m)},css:em.accordion,children:(0,l.FD)(R.S,{css:em.self,gap:8,children:[(0,l.Y)(ev,{hasPortsConfigured:c,hasPort80Configured:s,hasConflictingPorts:d,hasLocalhostPort80:p,openNetworkingPane:t}),(0,l.Y)(R.S,{children:(0,l.FD)(R.S,{css:em.tableWrapper,children:[(0,l.FD)(R.S,{css:em.table,children:[(0,l.Y)(V.EY,{css:em.tableHeader,children:"Deployment expects:"}),(0,l.FD)(ep.XI,{children:[(0,l.FD)(ep.fI,{children:[(0,l.Y)(ep.VP,{header:!0,width:"50%",children:"Host"}),(0,l.Y)(ep.VP,{header:!0,width:"50%",children:"External Port"})]}),(0,l.FD)(ep.fI,{children:[(0,l.Y)(ep.VP,{width:"50%",children:(0,l.Y)(V.EY,{children:"0.0.0.0"})}),(0,l.FD)(ep.VP,{width:"50%",children:[(0,l.Y)(V.EY,{children:":80"}),(0,l.Y)(j.A,{size:16,color:N.ky.positive.default})]})]}),c&&o?es()((null==o?void 0:o.length)-1).map(function(e){return(0,l.Y)(ep.fI,{css:em.ghostRow,children:(0,l.Y)(ep.VP,{children:(0,l.Y)(V.EY,{children:"\xa0"})})},e)}):null]})]}),(0,l.FD)(R.S,{css:em.table,children:[(0,l.Y)(V.EY,{css:em.tableHeader,children:"Your External Port configuration(s):"}),(0,l.FD)(ep.XI,{children:[(0,l.FD)(ep.fI,{children:[(0,l.Y)(ep.VP,{header:!0,width:"50%",children:"Host"}),(0,l.Y)(ep.VP,{header:!0,width:"50%",children:"External Port"})]}),c?null==o?void 0:o.map(function(e){return(0,l.Y)(ep.fI,{children:(0,l.Y)(ey,{portState:e})},e.configuration.localPort)}):(0,l.FD)(ep.fI,{children:[(0,l.Y)(ep.VP,{width:"50%",children:(0,l.Y)(V.EY,{children:"-"})}),(0,l.Y)(ep.VP,{width:"50%",children:(0,l.Y)(V.EY,{children:"-"})})]})]})]})]})})]})})}var eS=t(29542),eY=t.n(eS),eA=t(79784),ex=t(34384),eC=t(23288),e_=t(11165),ek=t(91163),eD=t(49131),eE=(0,_.x)({titleRow:[D.wp.gap(8),D.wp.align.center]});function eR(e){var n=e.isPrivate,t=e.setIsPrivate,r=e.isRedeploy,i=(0,ex.ET)(),o=i.loading,a=i.orgId,s=(0,eC.A)(a).requirePrivateDeployments,c=!o&&!a;return(0,l.Y)(l.FK,{children:(0,l.Y)(e_.w,{id:"privateDeployments",title:(0,l.FD)(l.FK,{children:[(0,l.FD)(R.S,{css:eE.titleRow,row:!0,children:[(0,l.Y)(V.EY,{color:"dimmer",children:"Private Deployment"}),c?(0,l.Y)(eD.A,{plan:"Teams",size:"small",tooltipProps:{description:"Private Deployments are only available on Replit ".concat(eA.$B,".")}}):null]}),(0,l.FD)(V.EY,{variant:"small",color:"dimmest",children:[c?(0,l.Y)(l.FK,{children:"Limit deployment access to team members."}):(0,l.FD)(l.FK,{children:["Limit deployment access to team members who have edit access.",r?" Visibility changes apply after next deployment.":""]})," ",(0,l.Y)(eY(),{legacyBehavior:!0,target:"_blank",href:"https://docs.replit.com/cloud-services/deployments/private-deployments",children:"Learn more"})]})]}),children:s?(0,l.Y)(E.m_,{tooltip:"Private deployments are required for this organization.",children:(0,l.Y)(ek.d,{"aria-label":"Private Deployments",isSelected:n||s,isReadOnly:s,onChange:function(e){t(e)}})}):(0,l.Y)(ek.d,{"aria-label":"Private Deployments",isSelected:n,onChange:function(e){t(e)}})})})}var eI=t(68264),eF=t(57679),eT=t(59318),eP=t(17844),eL=t(93629),eU=t(23972),eN=t(96907),eO=t.n(eN),eM=t(16439),eB=t(75414),eH=t(87523),ez=t(62362),eW=(0,_.x)({self:{ul:{maxHeight:"300px"}},select:[D.wp.border()],error:[D.wp.color.accentNegativeStronger],button:[D.wp.reset.button,D.wp.viewStyle,k.b.nofill,D.wp.align.center,D.wp.display.inlineFlex,{borderColor:k.b.outlined.borderColor}],popover:[D.wp.width("max-content"),D.wp.overflow("auto"),D.wp.p(1),D.wp.minWidth(240)],listbox:[D.wp.maxHeight(300),D.wp.minWidth(300),D.wp.overflow("auto")],dropdownItemAndContainer:[D.wp.flex.row,D.wp.align.center,k.b.listItem,D.wp.px(8),D.wp.py(4)],selectedTimezoneCode:[D.wp.textAlign.left,D.wp.rowWithGap(8)],timezoneCode:[D.wp.textAlign.left,D.wp.rowWithGap(8)],header:[D.wp.pt(8),D.wp.px(8),D.wp.pb(4),D.wp.flex.growAndShrink(1),{borderBottom:"1px solid ".concat(N.LU.outlineDimmest)}],search:[{borderBottom:"1px solid ".concat(N.LU.outlineDimmest)}],searchInput:[D.wp.width("100%")],dropdownHeader:[D.wp.fontWeight.medium],loading:[D.wp.maxWidth(70),O.S.backgroundPulse(N.LU.backgroundHighest,N.LU.backgroundHigher)]});function eG(e){var n=e.initialTimezone,t=e.onChange,r=e.loading,o=e.error,a=(0,i._)((0,u.useState)(),2),s=a[0],c=a[1],d=(0,u.useId)();return(0,u.useEffect)(function(){if(!r){if(n&&!s)return void c(n);if(!s&&!n){var e=Intl.DateTimeFormat().resolvedOptions().timeZone;if((0,S._j)(e)){t(e),c(e);return}var i="America/Los_Angeles";i&&(t(i),c(i))}}},[t,s,n,r]),(0,l.FD)(R.S,{css:eW.self,children:[r||!s?(0,l.Y)(z.pd,{css:eW.loading,disabled:!0}):(0,l.Y)(eJ,{selectedTzCode:s,onSelectionChange:function(e){"string"==typeof e&&(t(e),c(e))},css:eW.select}),o?(0,l.Y)(R.S,{css:eW.error,"aria-live":"polite","aria-atomic":"true",id:d,children:(0,l.Y)("span",{children:o})}):null]})}var eV=(0,_.x)({self:[eW.dropdownItemAndContainer,D.wp.justify.spaceBetween,{backgroundColor:N.LU.interactiveBackground}]});function ej(e){var n=e.title;return(0,l.FD)(R.S,{px:8,py:4,justify:"space-between",align:"center",row:!0,gap:8,children:[(0,l.Y)(R.S,{css:eW.selectedTimezoneCode,align:"center",children:(0,l.Y)(V.EY,{variant:"text",color:"dimmer",children:n})}),(0,l.Y)(eH.A,{})]})}function eZ(e){var n=e.tzCode,t=e.selected;return(0,l.FD)(R.S,{css:t?eV.self:eW.dropdownItemAndContainer,children:[(0,l.Y)(R.S,{css:eW.timezoneCode,align:"center",children:(0,l.Y)(V.EY,{variant:"text",color:t?"default":"dimmer",children:n.replace(/_/g," ").replace(/\//g,", ")})}),(0,l.Y)(R.S,{align:"center",row:!0,children:t?(0,l.Y)(j.A,{size:16}):null})]})}var eq=(0,_.x)({self:[eW.button,D.wp.align.center,D.wp.px(8),D.wp.py(4),(0,ea._)({},D.$_.min("mobileMax"),[D.wp.rowWithGap(4)])]});function eK(e){return e.toLowerCase().replaceAll("_"," ")}var e$=eM.m.map(function(e){var n=e.value,t=e.abbr,r=e.utc,i=eK(n),a=eK(t),l=r.map(function(e){return{tzCode:e,normalizedUtcValue:eK(e)}});return(0,eL._)((0,eP._)({},e),{normalizedValue:i,normalizedAbbr:a,normalizedUtc:l,searchableText:eK([e.value,e.abbr].concat((0,o._)(e.utc)).join(" "))})});function eJ(e){var n=e.selectedTzCode,t=e.onSelectionChange,r=(0,i._)((0,u.useState)(""),2),o=r[0],a=r[1],s=(0,i._)((0,u.useState)(eM.m),2),c=s[0],d=s[1],p=(0,i._)((0,u.useState)(eM.m.find(function(e){return e.utc.includes(n)})),2),f=p[0],h=p[1];(0,u.useEffect)(function(){h(eM.m.find(function(e){return e.utc.includes(n)}))},[n]);var m=eO()(function(e){d(function(e){if(!e)return eM.m;var n=eK(e);return e$.map(function(t){var r=0,i=t.searchableText,o=t.normalizedValue,a=t.normalizedAbbr,l=t.normalizedUtc,s=t.utc;if(i.includes(n)){o.includes(n)&&(r+=10/(o.indexOf(n)+1)),a.includes(n)&&(r+=8/(a.indexOf(n)+1));var c=s;return l.some(function(e){return e.normalizedUtcValue.includes(n)})&&(r+=5,e.length>=3&&(c=l.map(function(e){var t=e.tzCode,r=e.normalizedUtcValue;return r.includes(n)?{tzCode:t,utcScore:5/(r.indexOf(n)+1)}:{tzCode:t,utcScore:0}}).sort(function(e,n){return n.utcScore-e.utcScore}).map(function(e){return e.tzCode}))),(0,eL._)((0,eP._)({},t),{utc:c,score:r})}return(0,eL._)((0,eP._)({},t),{score:0})}).filter(function(e){return e.score>0}).sort(function(e,n){return n.score-e.score})}(e))},100),g=function(e){a(e),m(e)};return(0,l.FD)(eI.l6,{onSelectionChange:t,"aria-label":"Timezone Select",children:[f?(0,l.Y)(eF.$,{css:eW.button,children:(0,l.Y)(ej,{title:f.abbr})}):(0,l.Y)(E.m_,{tooltip:"Could not detect valid timezone. Please try again, or contact support.",children:(0,l.FD)(eF.$,{css:eq.self,children:[(0,l.Y)(V.EY,{color:"dimmer",children:"Select"}),(0,l.Y)(ez.A,{})]})}),(0,l.FD)(eB.g_,{noArrow:!0,css:eW.popover,background:"default",placement:"bottom right",children:[(0,l.Y)(R.S,{css:eW.search,p:8,children:(0,l.Y)(z.pd,{css:eW.searchInput,value:o,onChange:function(e){return g(e.target.value)},placeholder:"Search"})}),(0,l.Y)(eT.qF,{css:eW.listbox,children:c.map(function(e){var t=e.value,r=e.abbr,i=e.utc;return(0,l.FD)(eT.rd,{children:[(0,l.Y)(eU.Y,{css:eW.header,children:(0,l.FD)(V.EY,{variant:"small",color:"dimmest",css:eW.dropdownHeader,children:[t," (",r,")"]})}),i.map(function(e){return(0,l.Y)(eT.nh,{id:e,textValue:e,children:(0,l.Y)(eZ,{tzCode:e,selected:e===n})},e)})]},t)})})]})]})}var eQ=t(68682),eX=t(1230),e0=t(54319),e1=t(47630),e2=t(59851),e4=t(53231),e5={scheduleToCronExpression:{inputTarget:eX.Hnw.ENGLISH,outputTarget:eX.Hnw.CRON},cronExpressionToSchedule:{inputTarget:eX.Hnw.CRON,outputTarget:eX.Hnw.ENGLISH}},e3=function(e){var n,t,o,l,s,c,d,p,f,h,m,g,v,w,y,b=e.type,S=e.onTranslation,Y=e.onError,A=(0,u.useRef)(null),x=(0,i._)((0,u.useState)(!1),2),C=x[0],_=x[1],k=function(e,n){(0,e2.Q)({error:Error(e),context:"useScheduledMachineConfigurationTranslator"}),Y(n||e)},D=(o=(n={onTranslation:function(e,n,t){if(!C&&(A.current&&clearTimeout(A.current),n)){if(!e)return void S("Unable to derive valid translation from description");var r,i=(r=e.match(/`([^`]+)`(?=[^`]*$)/))?r[1]:null;if(!i||"scheduleToCronExpression"===b&&!(0,eQ.isValidCron)(i))return void S("Unable to derive valid Cron expression from description");S(i),(0,e4.u4)(e4.AZ.DEPLOYMENT_SCHEDULE_TRANSLATION_GENERATED,{type:b,translation:e,prompt:t})}},onError:function(e){return k(e,"Error translating description")}}).onTranslation,l=n.onError,s=(0,e0.NC)(),d=(c=(0,i._)((0,u.useState)(!1),2))[0],p=c[1],h=(f=(0,i._)((0,u.useState)(null),2))[0],m=f[1],g=(0,u.useRef)(""),v=(0,u.useCallback)((t=(0,r._)(function(e){var n;return(0,a.YH)(this,function(t){switch(t.label){case 0:return p(!0),g.current=e.content,[4,s.sessions.create({sessionType:eX.dF3.SINGLE_USE_SESSION})];case 1:if(!(n=t.sent()).ok)return p(!1),l("Failed to create session"),[2];return m(n.payload),[4,n.payload.appendEvent({kind:"translate",content:e.content,inputTarget:e.inputTarget,outputTarget:e.outputTarget,modelType:eX.e3q.BASIC})];case 2:return t.sent().ok||(p(!1),l("Failed to send translation request")),[2]}})}),function(e){return t.apply(this,arguments)}),[s.sessions,l]),w=(0,u.useMemo)(function(){return null==h?void 0:h.reduce(e6,"global").result},[h]),(0,e1.q3)(w,{next:function(e){(null==e?void 0:e.completed)&&d&&p(!1),(null==e?void 0:e.code)&&o(e.code,e.completed,g.current)}}),{sendMessage:v,loading:d}),E=D.sendMessage,R=D.loading,I=(y=(0,r._)(function(e){var n;return(0,a.YH)(this,function(t){return(A.current&&clearTimeout(A.current),e)?"cronExpressionToSchedule"!==b||(0,eQ.isValidCron)(e)?(n=e5[b],E((0,eL._)((0,eP._)({},n),{content:e})),A.current=setTimeout(function(){_(!0),k("Translation timed out")},8e3)):S("Invalid cron expression"):S(""),[2]})}),function(e){return y.apply(this,arguments)});return(0,u.useEffect)(function(){return function(){A.current&&clearTimeout(A.current)}},[A]),{translate:I,loading:R}},e6={direction:"reverse",state:{code:null,completed:!1},reducer:function(e,n){(0,eX.VFn)(e.contents.contents,"messageEventContents")&&e.sender.type===eX.utd.AI&&(n.code=(0,eX.QNh)(e.contents.contents).content,n.completed=e.state===eX.qOk.COMPLETE&&!!n.code)}};function e8(){return(0,l.FD)("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,l.Y)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.97978 15.6465C2.78451 15.8417 2.78451 16.1583 2.97978 16.3536L7.64644 21.0202C7.8417 21.2155 8.15829 21.2155 8.35355 21.0202C8.54881 20.825 8.54881 20.5084 8.35355 20.3131L4.54044 16.5L9.66666 16.5C9.9428 16.5 10.1667 16.2762 10.1667 16C10.1667 15.7239 9.9428 15.5 9.66666 15.5L4.54044 15.5L8.35355 11.6869C8.54881 11.4916 8.54881 11.1751 8.35355 10.9798C8.15829 10.7845 7.8417 10.7845 7.64644 10.9798L2.97978 15.6465Z",fill:N.LU.blurpleStronger}),(0,l.Y)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M16.3889 12.2661C16.259 11.9113 15.741 11.9113 15.6111 12.2661L14.7182 14.7055C14.675 14.8237 14.577 14.9153 14.4536 14.9531L12.2883 15.6156C11.9044 15.7331 11.9037 16.2592 12.2873 16.3776L14.4544 17.0466C14.5773 17.0846 14.6749 17.1761 14.718 17.2939L15.6111 19.7339C15.741 20.0887 16.259 20.0887 16.3889 19.7339L17.2819 17.2942C17.3251 17.1762 17.4228 17.0846 17.546 17.0468L19.7122 16.381C20.0959 16.263 20.0959 15.737 19.7122 15.619L17.546 14.9532C17.4228 14.9154 17.3251 14.8238 17.2819 14.7058L16.3889 12.2661Z",fill:N.LU.blurpleStronger}),(0,l.Y)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M29.0202 15.6465C29.2155 15.8417 29.2155 16.1583 29.0202 16.3536L24.3536 21.0202C24.1583 21.2155 23.8417 21.2155 23.6465 21.0202C23.4512 20.825 23.4512 20.5084 23.6465 20.3131L27.4596 16.5L22.3333 16.5C22.0572 16.5 21.8333 16.2762 21.8333 16C21.8333 15.7239 22.0572 15.5 22.3333 15.5L27.4596 15.5L23.6465 11.6869C23.4512 11.4916 23.4512 11.1751 23.6465 10.9798C23.8417 10.7845 24.1583 10.7845 24.3536 10.9798L29.0202 15.6465Z",fill:N.LU.blurpleStronger})]})}var e7=D.kL.min(480),e9=(0,_.x)({cronConfig:[D.wp.flex.growAndShrink(1),(0,ea._)({},e7,[D.wp.colWithGap(0),D.wp.rowWithGap(8),D.wp.align.start])],scheduledLabeledInput:[D.wp.flex.growAndShrink(1)],crontabLabeledInput:[D.wp.flex.growAndShrink(1),D.wp.maxWidth(128)],translationSwitch:[D.wp.flex.shrink(1),D.wp.mb(4),(0,ea._)({transform:"rotate(90deg)",alignSelf:"flex-start"},e7,{transform:"rotate(0deg)",marginBottom:0,paddingTop:30})],translationSwitchIcon:[D.wp.height(32),D.wp.width(32),D.wp.center],timezoneSelect:[D.wp.flex.shrink(1),(0,ea._)({minWidth:75},e7,{paddingTop:30})],timeoutConfig:[D.wp.flex.growAndShrink(1),D.wp.width("100%"),D.wp.align.start,D.wp.pb(8)],selectedTimeoutUnits:[D.wp.textAlign.left,D.wp.rowWithGap(8)],button:[D.wp.reset.button,D.wp.viewStyle,k.b.nofill,D.wp.align.center,D.wp.display.inlineFlex,{borderColor:k.b.outlined.borderColor},D.wp.minWidth(100)],timeoutUnitsDropdown:[D.wp.ml(4)],dropdownItemAndContainer:[D.wp.flex.row,D.wp.align.center,k.b.listItem,D.wp.px(8),D.wp.py(4)],dropdownItem:[D.wp.textAlign.left,D.wp.rowWithGap(8)],popover:[D.wp.width("max-content"),D.wp.overflow("auto"),D.wp.p(1),D.wp.minWidth(120)]}),ne=(0,_.x)({self:[e9.dropdownItemAndContainer,D.wp.justify.spaceBetween,{backgroundColor:N.LU.interactiveBackground}]}),nn=["minutes","hours"];function nt(e,n){var t=parseInt(e,10);if(!isNaN(t))if("hours"===n.toLowerCase())return 3600*t;else return 60*t;return 0}function nr(e){return/^\d+$/.test(e.trim())&&!isNaN(parseInt(e,10))}function ni(e,n){return nr(e)&&nt(e,n)>86400}function no(e){var n=e.title;return(0,l.FD)(R.S,{px:8,py:4,justify:"space-between",align:"center",row:!0,gap:8,children:[(0,l.Y)(R.S,{css:e9.selectedTimeoutUnits,align:"center",children:(0,l.Y)(V.EY,{variant:"text",color:"dimmer",children:n})}),(0,l.Y)(eH.A,{})]})}function na(e){var n=e.item,t=e.selected;return(0,l.FD)(R.S,{css:t?ne.self:e9.dropdownItemAndContainer,children:[(0,l.Y)(R.S,{css:e9.dropdownItem,align:"center",children:(0,l.Y)(V.EY,{variant:"text",color:t?"default":"dimmer",children:n})}),(0,l.Y)(R.S,{align:"center",row:!0,children:t?(0,l.Y)(j.A,{size:16}):null})]})}function nl(e){var n=e.callback,t=e.delay,r=(0,u.useRef)();return(0,u.useEffect)(function(){return function(){r.current&&clearTimeout(r.current)}},[]),{callerFunction:function(e){r.current&&clearTimeout(r.current),r.current=setTimeout(function(){return n(e)},t)}}}function ns(e){var n=e.crontab,t=e.setCrontab,r=e.crontabError,o=e.timezone,a=e.setTimezone,s=e.timezoneError,c=e.loading,d=void 0!==c&&c,p=e.timeoutValue,f=e.setTimeoutValue,h=e.timeoutUnits,m=e.setTimeoutUnits,g=e.setTimeoutValueError,v=(0,i._)((0,u.useState)(!1),2),w=v[0],y=v[1],b=(0,i._)((0,u.useState)(null),2),S=b[0],Y=b[1],A=(0,i._)((0,u.useState)(null),2),x=A[0],C=A[1],_=(0,i._)((0,u.useState)("scheduleToCronExpression"),2),k=_[0],D=_[1],I="scheduleToCronExpression"===k,F="cronExpressionToSchedule"===k,T=e3({type:k,onTranslation:function(e){y(!1),I?t(e):F&&C(e)},onError:function(e){y(!1),Y(e)}}),P=T.translate,L=T.loading,U=nl({callback:function(e){return P(e)},delay:3e3}).callerFunction,O=nl({callback:y,delay:500}).callerFunction,M=function(e,n){switch(n){case"scheduleToCronExpression":C(e);break;case"cronExpressionToSchedule":t(e)}B&&y(!1),""!==e&&null!==e&&(O(!0),U(e))},B=L||w;if((0,u.useEffect)(function(){g(!nr(p)||ni(p,h))},[p,h,g]),S)return(0,l.FD)(R.S,{children:[(0,l.Y)(R.S,{css:e9.crontabLabeledInput,children:(0,l.Y)(et.K,{id:"cronExpression",title:"Cron expression",information:"A cron expression is a string of characters used to define a schedule for running tasks at specific times or intervals in software applications.",warning:"".concat(S,". Enter valid Cron expression."),grow:!0,children:(0,l.Y)(J,{id:"cronExpression",value:n,placeholder:"* * * * *",loading:d,disabled:!1,onChange:t,error:r})})}),(0,l.Y)(R.S,{css:e9.timezoneSelect,children:(0,l.Y)(eG,{initialTimezone:o,onChange:a,error:s,loading:d})})]});var H="";return nr(p)?ni(p,h)&&(H="Please enter a value less than the maximum of 24 hours"):H="Please enter a positive whole number",(0,l.FD)(R.S,{children:[(0,l.FD)(R.S,{css:e9.cronConfig,pb:16,gap:8,children:[(0,l.Y)(R.S,{css:e9.scheduledLabeledInput,children:(0,l.Y)(et.K,{id:"schedule",title:"Schedule description",information:"Describe when you want your scheduled deployment to run",grow:!0,children:(0,l.Y)(J,{id:"describeSchedule",value:x,placeholder:n?"":"Every day at 3:00 AM",loading:d,disabled:B&&!I,onChange:function(e){return M(e,"scheduleToCronExpression")},onFocus:function(){return D("scheduleToCronExpression")}})})}),(0,l.Y)(R.S,{css:e9.translationSwitch,children:(0,l.Y)(E.m_,{tooltip:"When you type, Replit AI will translate between these properties",children:(0,l.Y)(R.S,{css:e9.translationSwitchIcon,children:B?(0,l.Y)(q.A,{color:N.LU.blurpleStronger}):(0,l.Y)(e8,{})})})}),(0,l.Y)(R.S,{css:e9.crontabLabeledInput,children:(0,l.Y)(et.K,{id:"cronExpression",title:"Cron expression",information:"A cron expression is a string of characters used to define a schedule for running tasks at specific times or intervals in software applications.",grow:!0,children:(0,l.Y)(J,{id:"cronExpression",value:n,placeholder:"* * * * *",loading:d,disabled:B&&!F,onChange:function(e){return M(e,"cronExpressionToSchedule")},onFocus:function(){return D("cronExpressionToSchedule")},error:r})})}),(0,l.Y)(R.S,{css:e9.timezoneSelect,children:(0,l.Y)(eG,{initialTimezone:o,onChange:a,error:s,loading:d})})]}),(0,l.Y)(R.S,{css:e9.timeoutConfig,row:!0,children:(0,l.Y)(et.K,{id:"timeout",title:"Job timeout",information:"The maximum amount of time each execution of your scheduled job will run before being stopped",grow:!0,children:(0,l.FD)(R.S,{row:!0,children:[(0,l.Y)(J,{id:"timeoutValue",value:p,placeholder:"",loading:d,disabled:!1,onChange:function(e){return f(null!=e?e:"")},error:H,type:"number"}),(0,l.FD)(eI.l6,{css:e9.timeoutUnitsDropdown,defaultSelectedKey:nn[0],selectedKey:h,onSelectionChange:function(e){return m(e.toString())},children:[(0,l.Y)(eF.$,{css:e9.button,children:(0,l.Y)(no,{title:h})}),(0,l.Y)(eB.g_,{css:e9.popover,background:"default",placement:"bottom right",children:(0,l.Y)(eT.qF,{children:nn.map(function(e){return(0,l.Y)(eT.nh,{id:e,textValue:e,children:(0,l.Y)(na,{item:e,selected:e===h})},e)})})})]})]})})})]})}var nc=t(5793),nu=t(20993),nd=t(79509),np=t(41106),nf=t(20156),nh=t(46603),nm=t(49150),ng=t(97681),nv=t(1998),nw=t(92855),ny=t(86814);function nb(){return(nb=(0,r._)(function(e){var n,t,r,i,o,l,s,c,u,d,p,f,h,g,v,w,y;return(0,a.YH)(this,function(a){switch(a.label){case 0:n=["webpack.config.js","vite.config.js","webpack.config.ts","vite.config.ts"],t=!0,r=!1,i=void 0,a.label=1;case 1:a.trys.push([1,6,7,8]),o=n[Symbol.iterator](),a.label=2;case 2:if(t=(l=o.next()).done)return[3,5];return s=l.value,[4,e.stat(s)];case 3:if(!((c=a.sent()).exists&&c.type===m.pt.File))return[3,4];return[2,"dist"];case 4:return t=!0,[3,2];case 5:return[3,8];case 6:return u=a.sent(),r=!0,i=u,[3,8];case 7:try{t||null==o.return||o.return()}finally{if(r)throw i}return[7];case 8:d=["dist","build","public"],p=!0,f=!1,h=void 0,a.label=9;case 9:a.trys.push([9,14,15,16]),g=d[Symbol.iterator](),a.label=10;case 10:if(p=(v=g.next()).done)return[3,13];return w=v.value,[4,e.stat(w)];case 11:if(!((y=a.sent()).exists&&y.type===m.pt.Directory))return[3,12];return[2,w];case 12:return p=!0,[3,10];case 13:return[3,16];case 14:return u=a.sent(),f=!0,h=u,[3,16];case 15:try{p||null==g.return||g.return()}finally{if(f)throw h}return[7];case 16:return[2]}})})).apply(this,arguments)}function nS(e){var n=e.replId,t=e.isNewDeployment,o=e.provider,l=e.fs,s=e.secrets,c=e.onOptions,d=e.onError,p=e.dotReplit,h=e.currentBuild,m=(0,i._)((0,u.useState)(!0),2),g=m[0],v=m[1],w=(0,x.A)(d),y=(0,x.A)(c),b=(0,er.Gx)({secrets:s,replId:n});return(0,u.useEffect)(function(){var e=!1;function n(){return(n=(0,r._)(function(){var n,r,s,c,u,d,m,g,w,S;return(0,a.YH)(this,function(a){switch(a.label){case 0:return n=f.JX.Server,r=null,s=null,c=null,u=null,[4,Promise.all([t?b():Promise.resolve(null!=(d=null==h?void 0:h.envVars)?d:[]),(0,er.XE)(p)])];case 1:if(g=(m=i._.apply(void 0,[a.sent(),2]))[0],w=m[1],e)return[2];if(t)switch(o){case f.Q0.Gce:n=w.ignorePorts?f.JX.Worker:f.JX.Server;break;case f.Q0.CloudRun:n=f.JX.CloudRun;break;case f.Q0.Static:n=f.JX.Static;break;case f.Q0.Cron:n=f.JX.Cron}else w.appType&&(n=w.appType);if(s=w.buildCommand,n===f.JX.Static)return[3,2];return r=w.runCommand,[3,5];case 2:if(!w.publicDir)return[3,3];return c=w.publicDir,[3,5];case 3:return[4,function(e){return nb.apply(this,arguments)}(l)];case 4:(S=a.sent())&&(c=S),a.label=5;case 5:return o===f.Q0.Gce&&(u=w.ignorePorts),y.current({appType:n,envVars:g,buildCommand:s,runCommand:r,publicDir:c,ignorePorts:u}),v(!1),[2]}})})).apply(this,arguments)}try{!function(){n.apply(this,arguments)}()}catch(e){w.current(e.message),v(!1)}return function(){e=!0}},[o,l,p,w,y,t,b,h]),{loading:g}}var nY=(0,_.x)({self:D.wp.colWithGap(16),footer:D.wp.colWithGap(0),deployButton:D.wp.flex.grow(1),tourImage:[D.wp.borderRadius(8)],statusBanner:[D.wp.textBalance,D.wp.flex.shrink(1)]}),nA=function(e){var n,t,s,m,b,S,Y=e.deploymentId,A=e.replId,x=e.initialSubdomain,C=e.provider,_=e.machine,k=e.secrets,D=e.fs,I=e.ports,T=e.dotReplit,P=e.onDeploy,L=e.onCancel,U=e.onError,N=e.initialSecretsSyncExpanded,O=e.openNetworkingPane,M=e.hasAgentSession,B=(0,v.uS)(),H=(0,v.Tp)().deployBuild,z=(0,nc.R)(A).orgId,G=(0,nd.w)({replId:A}).ignoreSecretsUntil,j=(0,p.HT)({skip:!Y,variables:{id:null!=Y?Y:""},fetchPolicy:"cache-and-network",ssr:!1,onCompleted:function(e){var n,t=(null==(r=e.hostingDeployment)?void 0:r.__typename)==="HostingDeployment"?e.hostingDeployment:null;if(t){if(t.replitAppSubdomain&&(ey(t.replitAppSubdomain),eA(!0)),t.currentBuild.machineJob&&(eU(t.currentBuild.machineJob.timezone),ez(t.currentBuild.machineJob.crontab),t.currentBuild.machineJob.timeoutSeconds)){var r,i,a,l=t.currentBuild.machineJob.timeoutSeconds;l%3600==0?(i=l/3600,a="Hours"):(i=Math.floor(l/60),a="Minutes"),e6(i.toString()),e9(a)}var s=t.currentBuild.envVars.map(function(e){return{name:e.name,value:e.value}}),c=new Set(s.map(function(e){return e.name})),u=G>new Date(t.currentBuild.timeCreated)&&G>new Date(t.timeCreated)?(0,o._)(c):null!=(n=t.ignoredSecrets)?n:[];eq(s),el(u),null!=t.currentBuild.isPrivate&&nl(t.currentBuild.isPrivate)}}}),Z=j.data,K=j.loading,$=(0,p.TO)({variables:{replId:A}}).data,Q=(null==Z||null==(m=Z.hostingDeployment)?void 0:m.__typename)==="HostingDeployment"?Z.hostingDeployment:null,er=(0,i._)((0,u.useState)(null!=(b=null==Q?void 0:Q.ignoredSecrets)?b:[]),2),ea=er[0],el=er[1],es=nS({replId:A,provider:C,fs:D,secrets:k,dotReplit:T,isNewDeployment:!Y,onError:U,currentBuild:null==Q?void 0:Q.currentBuild,onOptions:function(e){e.appType&&eg(e.appType),eq(e.envVars),e.ignorePorts&&eJ(e.ignorePorts),e.buildCommand&&e_(e.buildCommand),e.runCommand&&eE(e.runCommand),e.publicDir&&e0(e.publicDir)}}).loading,ec=null==Q?void 0:Q.currentBuild,eu=void 0!==ec,ed=(null==$?void 0:$.getRepl.__typename)==="Repl"?$.getRepl.authorizations:void 0,ep=null==ed?void 0:ed.editDeploymentSecrets,ef=null==ed?void 0:ed.editSecrets,eh=(0,i._)((0,u.useState)(f.JX.Server),2),em=eh[0],eg=eh[1],ev=(0,i._)((0,u.useState)(x),2),ew=ev[0],ey=ev[1],eS=(0,i._)((0,u.useState)(!1),2),eY=eS[0],eA=eS[1],ex=(0,i._)((0,u.useState)(null),2),eC=ex[0],e_=ex[1],ek=(0,i._)((0,u.useState)(null),2),eD=ek[0],eE=ek[1],eI=(0,i._)((0,u.useState)(void 0),2),eF=eI[0],eT=eI[1],eP=(0,i._)((0,u.useState)(null),2),eL=eP[0],eU=eP[1],eN=(0,i._)((0,u.useState)(void 0),2),eO=eN[0],eM=eN[1],eB=(0,i._)((0,u.useState)(null),2),eH=eB[0],ez=eB[1],eW=(0,i._)((0,u.useState)(void 0),2),eG=eW[0],eV=eW[1],ej=(0,i._)((0,u.useState)(null!=(S=null==ec?void 0:ec.envVars.map(function(e){return{name:e.name,value:e.value}}))?S:[]),2),eZ=ej[0],eq=ej[1],eK=(0,i._)((0,u.useState)(!1),2),e$=eK[0],eJ=eK[1],eQ=(0,i._)((0,u.useState)(null),2),eX=eQ[0],e0=eQ[1],e1=(0,i._)((0,u.useState)(void 0),2),e2=e1[0],e4=e1[1],e5=(0,i._)((0,u.useState)("10"),2),e3=e5[0],e6=e5[1],e8=(0,i._)((0,u.useState)(nn[0]),2),e7=e8[0],e9=e8[1],ne=(0,i._)((0,u.useState)(!1),2),nr=ne[0],ni=ne[1],no=(0,i._)((0,u.useState)(!1),2),na=no[0],nl=no[1],nb=(0,ei.g)({secrets:k,replId:A}).devSecrets;(0,u.useEffect)(function(){(0,y.Ae)({context:"deploy_options"})},[]);var nA=(0,u.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.name,t=e.value;eq(function(e){return(0,d.jM)(e,function(e){e.push({name:null!=n?n:"",value:null!=t?t:""})})})},[eq]),nx=function(e,n){eq(function(t){return(0,d.jM)(t,function(t){t[e].name=n})})},nC=function(e,n){eq(function(t){return(0,d.jM)(t,function(t){t[e].value=n})})},n_=function(e){eq(function(n){return(0,d.jM)(n,function(n){n.splice(e,1)})})},nk=(0,np.A)("deployments-pane","deployments-synced-secrets"),nD=nk.dismiss,nE=nk.shouldDisplay,nR=em!==f.JX.Static,nI=C===f.Q0.Gce,nF=em===f.JX.Static,nT=C!==f.Q0.Cron&&!(null==Q?void 0:Q.replitAppSubdomain),nP=C===f.Q0.Cron,nL=em===f.JX.Server||em===f.JX.CloudRun,nU=C!==f.Q0.Cron,nN=(n=(0,r._)(function(){var e,n,t,r,i,o;return(0,a.YH)(this,function(a){switch(a.label){case 0:if(t=(!nT||eY)&&ew.length?ew:void 0,i=null!=(r=null==Q||null==(n=Q.currentBuild)||null==(e=n.machineJob)?void 0:e.failureNotifications)&&r,!t)return[2];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,H({ignoredSecrets:ea,envVars:eZ.filter(function(e){return(0,h.zV)(e)}),subdomain:t,machineConfigurationId:(null==_?void 0:_.configurationId)||void 0,maxMachineInstances:(null==_?void 0:_.maxInstances)||void 0,machineJob:eL&&eH?{timezone:eL,crontab:eH,timeoutSeconds:nt(e3,e7),failureNotifications:i}:void 0,config:{buildCommand:eC,runCommand:eD,appType:em,ignorePorts:e$,publicDir:eX},isPrivate:na,hasAgentSession:M})];case 2:return a.sent(),P(),[3,4];case 3:if((o=a.sent())instanceof g.kS)return eT("Run command cannot be empty."),[2];if(o instanceof g.uF)return e4("Public directory cannot be empty."),[2];if(o instanceof g.xF)return eM(o.message||"Invalid timezone."),[2];if(o instanceof g.f_)return eV(o.message||"Invalid crontab."),[2];return U(o.message),[3,4];case 4:return[2]}})}),function(){return n.apply(this,arguments)}),nO=(0,i._)((0,u.useState)(!1),2),nM=nO[0],nB=nO[1],nH=(0,i._)((0,u.useState)(!1),2),nz=nH[0],nW=nH[1],nG=function(e){el(function(n){return(0,o._)(n).concat([e])})},nV=function(e){nb&&nb.has(e)||el(function(n){return n.filter(function(n){return n!==e})})},nj=(t=(0,r._)(function(e){var n,t;return(0,a.YH)(this,function(r){return!((n=eZ.findIndex(function(n){return n.name===e}))<0)&&nb&&nb.has(e)&&(t=nb.get(e),c()(t),el(function(n){return n.filter(function(n){return n!==e})}),eq(function(r){return(0,o._)(r.slice(0,n)).concat([{name:e,value:t}],(0,o._)(r.slice(n+1)))})),[2]})}),function(e){return t.apply(this,arguments)}),nZ=(0,(0,v.mj)().getDeployabilityByProvider)(C,na),nq=eu?nZ.redeploy.isAuthorized:nZ.deploy.isAuthorized,nK=K||es||B===w.d.Preparing||nr,n$=nK||!nq,nJ=eZ.map(function(e){return e.name}),nQ=(s=(0,r._)(function(){return(0,a.YH)(this,function(e){switch(e.label){case 0:return nB(!0),[4,k.addEntries(eZ.map(function(e){return{key:e.name,value:e.value}}))];case 1:return e.sent(),nB(!1),nW(!1),[2]}})}),function(){return s.apply(this,arguments)}),nX=es?(0,l.FD)(l.FK,{children:[(0,l.Y)(et.r,{}),(0,l.Y)(et.r,{}),(0,l.Y)(et.r,{})]}):(0,l.FD)(l.FK,{children:[nP?(0,l.Y)(ns,{crontab:eH,setCrontab:ez,crontabError:eG,timezone:eL,setTimezone:eU,timezoneError:eO,loading:K,timeoutValue:e3,setTimeoutValue:e6,timeoutUnits:e7,setTimeoutUnits:e9,setTimeoutValueError:ni}):null,nT?(0,l.Y)(et.K,{id:"primaryDomain",title:"Primary domain",information:"You can add more custom domains after deploying",children:(0,l.Y)(ee,{id:"primaryDomain",subdomain:ew,deploymentId:Y||void 0,onChange:ey,updateValidity:eA})}):null,nU?(0,l.Y)(eR,{isPrivate:na,setIsPrivate:nl,isRedeploy:eu}):null,nF?(0,l.Y)(et.K,{id:"publicDir",title:"Public directory",information:"The public directory is the folder where the browser should start when serving your static site",children:(0,l.Y)(J,{id:"publicDir",value:eX,onChange:e0,loading:es,disabled:nK,error:e2})}):null,(0,l.Y)(et.K,{id:"buildCommand",title:"Build command",information:"The build command is the command-line statement that compiles your app at build time.",optional:!0,children:(0,l.Y)(J,{id:"buildCommand",value:eC,onChange:e_,loading:es,disabled:nK})}),nR?(0,l.Y)(et.K,{id:"runCommand",title:"Run command",information:"The run command is the command-line statement that launches your app after it has been built.",children:(0,l.Y)(J,{id:"runCommand",value:eD,onChange:eE,loading:es,disabled:nK,error:eF})}):null,(0,l.FD)(et.K,{id:"envVars",title:"Deployment secrets",information:"Secrets, or environment variables, are private keys you can use to access APIs and services",children:[z?(0,l.Y)(W.N,{icon:(0,l.Y)(F.A,{}),css:nY.statusBanner,colorway:"primary",text:"Secrets now sync automatically with your team's deployments. "+"Deployment secrets added before ".concat((0,nu.r)(G.toISOString())," ")+"remain unchanged to avoid disrupting existing workflows. Manage syncing below."}):null,(0,l.FD)(R.S,{gap:12,children:[eZ.length>0?eZ.map(function(e,n){var t=e.name,r=e.value;return(0,l.Y)(X,{index:n,name:t,value:r,updateEnvVarName:function(e){return nx(n,e)},updateEnvVarValue:function(e){return nC(n,e)},removeEnvVar:function(){return n_(n)},disabled:nK,otherKeys:nJ.filter(function(e,t){return t!==n}),devSecrets:nb,ignoredSecrets:ea,canEditDevSecretsDisabledMessage:(null==ef?void 0:ef.isAuthorized)===!1?ef.message:void 0,canEditDeploySecretsDisabledMessage:(null==ep?void 0:ep.isAuthorized)===!1?ep.message:void 0,optOutSyncing:nG,optInSyncing:nV,syncToWorkspace:nj},n)}):null,nb&&(null==ef?void 0:ef.isAuthorized)&&(null==ep?void 0:ep.isAuthorized)?(0,l.Y)(nf.H,{secrets:new Map(eZ.map(function(e){return[e.name,e.value]})),otherSecrets:nb,otherEnvName:"workspace",onAddSecret:function(e){return nA({name:e.key,value:e.value})},initialExpanded:N}):null,(0,l.Y)(E.m_,{tooltip:null==ep?void 0:ep.message,isDisabled:null==ep?void 0:ep.isAuthorized,children:(0,l.Y)(nh.$n,{onClick:function(){(0,y.Rl)({replId:A}),nA()},text:"Add deployment secret",iconLeft:(0,l.Y)(ny.A,{}),disabled:K||!(null==ep?void 0:ep.isAuthorized)})})]})]}),nI?(0,l.Y)(et.K,{id:"deploymentAppType",title:"App type",information:"Configure your app based on whether it needs to serve traffic from the web.",children:(0,l.Y)(en,{appType:em,onChange:function(e){eg(e),eJ((e===f.JX.Server||e===f.JX.Worker)&&e===f.JX.Worker)}})}):null,nL?(0,l.Y)(eb,{ports:I,openNetworkingPane:O}):null]});return(0,l.FD)(l.FK,{children:[(0,l.FD)(R.S,{css:nY.self,children:[nX,(0,l.FD)(R.S,{css:nY.footer,children:[(0,l.Y)(eo.Y,{deployability:nZ,isRedeploy:eu}),(0,l.FD)(R.S,{pt:12,row:!0,gap:8,children:[ec?(0,l.Y)(nh.$n,{text:"Cancel",onClick:L}):null,(0,l.Y)(R.S,{css:nY.deployButton,children:(0,l.Y)(nh.$n,{colorway:"primary",onClick:nN,text:B===w.d.Preparing&&"Preparing..."||es&&"Fetching options..."||"Deploy",iconLeft:es||B===w.d.Preparing?(0,l.Y)(q.A,{}):(0,l.Y)(nw.A,{}),disabled:n$||nT&&!eY})})]})]})]}),(0,l.Y)(nm.a,{isOpen:nz,onRequestClose:function(){nM||nW(!1)},children:(0,l.FD)(R.S,{gap:8,children:[(0,l.Y)(V.EY,{variant:"subheadBig",children:"Copy secrets from Deployment to Development?"}),(0,l.Y)(V.EY,{children:"Are you sure you want to copy all of your secrets from Deployment to Development? Secrets already present in Development will be overwritten and lost permanently."}),(0,l.FD)(R.S,{pt:8,row:!0,gap:8,justify:"end",children:[(0,l.Y)(nh.$n,{text:"Cancel",disabled:nM,onClick:function(){nW(!1)}}),(0,l.Y)(nh.$n,{text:"Yes, copy secrets",colorway:"negative",disabled:nM,loading:nM,onClick:nQ})]})]})}),(0,l.Y)(nm.a,{isOpen:nE,preventOutsideModalClickClose:!0,hideCloseButton:!0,noPadding:!0,centered:!0,onRequestClose:function(){nD()},children:(0,l.Y)(ng.p,{title:"App secrets now sync automatically",content:function(){return(0,l.FD)(R.S,{gap:8,children:[(0,l.Y)(nv.A,{css:nY.tourImage,src:"/public/images/synced-secrets/deployments-secrets.png",width:720,height:390,alt:""}),(0,l.Y)(V.EY,{children:"Secrets added to your app will automatically sync to your deployments when you deploy. Existing deployment secrets have been opted out to prevent disruption. You can manage syncing preferences in the deployment options below."})]})},onDismiss:nD})})]})}},73414:(e,n,t)=>{"use strict";t.d(n,{G:()=>o,n:()=>a});var r=t(75725),i=t(64732),o=function(e){var n=new Date(e),t=new Date;return 60>(0,r.A)(t,n)?"just now":(0,i.K)(n,!0)+" ago"},a=function(e){return new Date(e).toLocaleString()}},73547:(e,n,t)=>{"use strict";t.d(n,{Z:()=>o});var r=t(12694),i=t(21462);function o(e){var n=(0,r._)((0,i.useState)(e),2),t=n[0],o=n[1],a=(0,r._)((0,i.useState)(null),2),l=a[0],s=a[1];return e!==t&&(s(t),o(e)),l}},73707:(e,n,t)=>{"use strict";t.d(n,{A:()=>s});var r=t(12694),i=t(21462),o=t(69549),a=t(79275),l=t(34834);function s(){var e=(0,l.A)().container,n=(0,a.A)(e),t=(0,r._)((0,i.useState)(!1),2),s=t[0],c=t[1];return((0,i.useEffect)(function(){n===o.KN.CONNECTED&&c(!0)},[n]),s)?{didConnectOnce:s,didDisconnect:n!==o.KN.CONNECTED}:{didConnectOnce:!1,didDisconnect:!1}}},73779:(e,n,t)=>{"use strict";t.d(n,{A:()=>p});var r=t(12694),i=t(86105),o=t(21462),a=t(23099),l=t.n(a),s=t(20207),c=t(93369),u=t(29383),d=t(34834);function p(e){var n,t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],p=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},f=(0,r._)((0,o.useState)(null),2),h=f[0],m=f[1],g=(0,c.A)(h),v=null==(t=null!=(n=p.keepStaleResult)?n:p.refresh)||t,w=(0,o.useCallback)(function(e){l()(e,g.current)||m(e)},[g]),y=(0,u.A)(function(){return e},(0,i._)(a)),b=(0,d.A)().git,S=(0,o.useRef)(null),Y=(0,o.useCallback)(function(){S.current?S.current():v||w(null);var e=!1;y(b).then(function(n){e||(w(n),S.current=null)}).catch(function(){e||(w({error:s.uA.UNKNOWN}),S.current=null)}),S.current=function(){e=!0,S.current=null,v||w(null)}},[w,y,b,v]);return(0,o.useEffect)(function(){return Y()},[Y]),(0,o.useEffect)(function(){var e;if(null==(e=p.refresh)||e)return b.onRefresh(Y)},[b,Y,p.refresh]),h}},73815:(e,n,t)=>{"use strict";t.d(n,{A:()=>T});var r=t(88263),i=t(29542),o=t.n(i),a=t(12694),l=t(90629),s=t(17844),c=t(12584),u=t(41114),d=t(50175),p=t(95131);function f(){var e=(0,c._)(["\n  mutation RemoveMultiplayerUser($replId: String!, $username: String!) {\n    removeMultiplayerUser(replId: $replId, username: $username) {\n      id\n      user {\n        id\n        ...MultiplayerUser\n      }\n      repl {\n        id\n        collaborators {\n          user {\n            ...MultiplayerUser\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return f=function(){return e},e}function h(){var e=(0,c._)(["\n  mutation DeleteMultiplayerInvite($replId: String!, $email: String!) {\n    deleteMultiplayerInvite(replId: $replId, email: $email) {\n      ... on MultiplayerInvite {\n        email\n        type\n        repl {\n          id\n          collaborators {\n            user {\n              ...MultiplayerUser\n            }\n          }\n          multiplayerInvites {\n            email\n            type\n          }\n        }\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return h=function(){return e},e}var m={},g=(0,u.J1)(f(),p._9),v=(0,u.J1)(h(),p._9),w=t(61018),y=t(36640);let b=function(){var e,n,t,r,i=(0,y.A)(),o=i.showConfirm,c=i.showError,u=(0,w.X)(),p=function(e,n){l.ZQ({message:n}),l.Cp(Error(e.message)),c("Something unexpected happened, please try again.")},f=(0,a._)((e={onError:function(e){return p(e,"useRemoveMultiplayerUser")},onCompleted:function(e){var n,t=null==(n=e.removeMultiplayerUser.user)?void 0:n.username;t?o("@".concat(t," removed")):o("User removed"),"data"===u.type&&u.refetch()}},n=(0,s._)({},m,e),d.n(g,n)),2),h=f[0],b=f[1].loading,S=(0,a._)((t={onError:function(e){return p(e,"useDeleteMultiplayerInviteMutation")},onCompleted:function(e){if("UserError"===e.deleteMultiplayerInvite.__typename)return void c(e.deleteMultiplayerInvite.message);if("MultiplayerInvite"===e.deleteMultiplayerInvite.__typename){var n=e.deleteMultiplayerInvite.email;o("Invite canceled for ".concat(n))}}},r=(0,s._)({},m,t),d.n(v,r)),2);return{removeMultiplayerUser:h,loadingRemoveUser:b,deleteMultiplayerInvite:S[0],loadingDeleteInvite:S[1].loading}};var S=t(91221),Y=t(45263),A=t(64583),x=t(48521),C=t(38292),_=t(76126),k=t(49330),D=t(10429),E=t(1841),R=t(17893),I=t(83650),F=(0,A.x)({root:[x.wp.cursor.default,x.wp.justify.spaceBetween],userContainer:x.wp.color.foregroundDefault,userContainer_pending:[x.wp.flex.grow(1),x.wp.flex.row,x.wp.rowWithGap(8),x.wp.align.center,{fontStyle:"italic"}]});let T=function(e){var n,t=e.isPendingInvitation,i=e.canEditMultiplayers,a=e.replId,l=b(),s=l.removeMultiplayerUser,c=l.loadingRemoveUser,u=l.deleteMultiplayerInvite,d=l.loadingDeleteInvite,p=!t,f=p?(0,r.Y)(E.A,{size:"m",url:e.user.image,username:e.user.username,fullName:e.user.fullName}):(0,r.Y)(R.A,{color:Y.LU.outlineDefault,size:32}),h=p?e.user.username:e.email;return(0,r.FD)(D.S,{css:F.root,px:16,py:4,row:!0,gap:8,align:"center",children:[p?(0,r.Y)(S.A,{username:e.user.username,children:(0,r.Y)(o(),{legacyBehavior:!0,href:"/@".concat(e.user.username),passHref:!0,children:(0,r.Y)(D.D.a,{css:F.userContainer,children:(0,r.Y)(k.K,{username:e.user.username,src:null!=(n=e.user.image)?n:null})})})}):(0,r.FD)(D.S,{css:[F.userContainer_pending],children:[f,(0,r.Y)(_.EY,{color:p?"default":"dimmest",multiline:!1,children:h})]}),(0,r.FD)(D.S,{row:!0,gap:8,align:"center",children:[(0,r.Y)(_.EY,{color:"dimmest",variant:"small",multiline:!1,children:e.isPendingInvitation?"Invited":"Can edit"}),i?(0,r.Y)(C.K0,{alt:p?"Remove member":"Cancel invitation",onClick:function(){i&&(c||d||(p?s({variables:{replId:a,username:e.user.username}}):u({variables:{replId:a,email:e.email}})))},children:(0,r.Y)(I.A,{size:12})}):null]})]})}},73912:(e,n,t)=>{"use strict";t.d(n,{a:()=>l});var r=t(88263),i=t(64583),o=t(48521),a=t(11882),l=function(e){var n=e.className,t=e.text,i=e.iconLeft,o=e.onClick;return(0,r.Y)(a.a,{onClick:o,className:n,colorway:"yellow",css:s.self,text:t,iconLeft:i})},s=(0,i.x)({self:[o.wp.borderRadius(4),{padding:"4px 3px"}]})},73967:(e,n,t)=>{"use strict";t.d(n,{SS:()=>A,UI:()=>b,dt:()=>Y});var r=t(29935),i=t(82643),o=t(88263),a=t(82315),l=t(83150),s=t(62341),c=t(45263),u=t(64583),d=t(48521),p=t(33999),f=t(76126),h=t(10429),m=t(4291),g=t(28216),v=(0,u.x)({root:[d.wp.flex.growAndShrink(1),d.wp.px(8),{userSelect:"none"}],header:[{fontSize:c.LU.fontSizeSmall,opacity:.6},d.wp.color.foregroundDimmest,d.wp.truncate],fileName:[d.wp.truncate,d.wp.flex.row]});function w(e){var n=e.height,t=e.active,r=e.match,i=r.directory,a=r.filename,l=e.description;return(0,o.FD)(h.S,{css:v.root,row:!0,gap:8,align:"center",style:{height:n},children:[(0,o.Y)(p.A,{path:a.text,size:16}),(0,o.FD)(h.S,{gap:0,children:[i?(0,o.Y)(h.S,{css:v.header,children:(0,o.Y)(g.e,{text:i.text+"/",highlight:i.ranges,dimmed:!t})}):null,(0,o.FD)(h.S,{row:!0,gap:8,align:"center",children:[(0,o.Y)(h.S,{css:v.fileName,children:(0,o.Y)(g.e,{text:a.text,highlight:a.ranges,dimmed:!t})}),(0,o.Y)(f.EY,{variant:"small",color:"dimmest",children:l})]})]})]})}var y={match:a.fq,forward:!1,tiebreakers:[function(e,n,t){var r=t(e.item),i=t(n.item),o=r.lastIndexOf("/"),a=i.lastIndexOf("/"),l=Array.from(e.positions).filter(function(e){return e>o}).length;return Array.from(n.positions).filter(function(e){return e>a}).length-l},function(e,n,t){return t(e.item).trim().length-t(n.item).trim().length}]};function b(e,n){return S.apply(this,arguments)}function S(){return(S=(0,r._)(function(e,n){var t,r;return(0,i.YH)(this,function(i){switch(i.label){case 0:return[4,new a.$S(n,y).find(e)];case 1:return t=i.sent().map(function(e){return{path:e.item,score:Math.floor(e.score*m.B.files),ranges:(0,s.WJ)(e.positions)}}),[2,(r=(0,s.hS)({queryLength:e.length}))?t.filter(function(e){return e.score>=r}):t]}})})).apply(this,arguments)}function Y(e){var n=e.ranges,t=e.path,r=(0,l.WP)(t),i=(0,l._6)(t);if(!i)return{filename:{text:r,ranges:n.length?n:void 0}};var o=i.length,a=o+1,s=[],c=[],u=!0,d=!1,p=void 0;try{for(var f,h=n[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var m=f.value;if(m.from<o){s.push({from:m.from,to:Math.min(m.to,o)});var g=m.to-a;if(g<=0)continue;c.push({from:0,to:g});continue}m.from<a||c.push({from:m.from-a,to:m.to-a})}}catch(e){d=!0,p=e}finally{try{u||null==h.return||h.return()}finally{if(d)throw p}}return{filename:{text:r,ranges:c.length?c:void 0},directory:{text:i,ranges:s.length?s:void 0}}}function A(e){var n=e.path,t=e.ranges,r=e.description,i=Y({path:n,ranges:null!=t?t:[]}),a=i.directory?44:32;return{height:a,content:(0,o.Y)(w,{match:i,height:a,description:r})}}},73984:(e,n,t)=>{"use strict";function r(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=void 0===t.moveThreshold;e.preventDefault();var i={x:e.pageX,y:e.pageY},o={x:0,y:0};n.start&&n.start({mouse:i,shiftKey:e.shiftKey});var a=function(e){var a={x:e.pageX,y:e.pageY};if(o={x:a.x-i.x,y:a.y-i.y},void 0!==t.moveThreshold&&!r){if(Math.abs(o.x)<t.moveThreshold&&Math.abs(o.y)<t.moveThreshold)return;r=!0}n.move({delta:o,shiftKey:e.shiftKey,mouse:a})},l=null,s=function(e){e.preventDefault(),l&&cancelAnimationFrame(l),l=requestAnimationFrame(function(){a(e)})},c=function(){l&&cancelAnimationFrame(l),document.removeEventListener("pointermove",s),document.removeEventListener("pointerup",c),document.removeEventListener("touchcancel",c),(void 0===t.moveThreshold||r)&&n.end&&n.end({delta:o,shiftKey:e.shiftKey})};document.addEventListener("pointermove",s),document.addEventListener("pointerup",c),document.addEventListener("touchcancel",c)}t.d(n,{j:()=>r})},74033:(e,n,t)=>{"use strict";t.d(n,{A:()=>a});var r=t(12694),i=t(21462),o={isConnecting:!0,channel:null,context:null};function a(e){var n=e.container,t=e.service,a=e.name,l=e.skip,s=void 0!==l&&l,c=(0,r._)((0,i.useState)(o),2),u=c[0],d=c[1];return(0,i.useEffect)(function(){d(o);var e=!1,r=n.openChannel({service:t,name:a,skip:function(){return s}},function(n){if(!e)return d({context:n.context,channel:n.channel,isConnecting:!1}),function(n){e||d({isConnecting:n.willReconnect,channel:null,context:null})}});return function(){e=!0,r()}},[n,t,a,s]),u}},74093:(e,n,t)=>{"use strict";t.d(n,{b:()=>s});var r=t(12694),i=t(86105),o=t(21462),a=t(19523),l=t(57179);function s(e,n){var t,s,c=(0,a.yB)(),u=(0,l.X)(),d=null!=(s=null==c?void 0:c.client)?s:null,p=(0,o.useRef)(null),f=(t=(0,r._)((0,o.useState)(),2)[1],(0,o.useCallback)(function(e){try{t(function(){throw e})}catch(e){}},[]));(0,o.useEffect)(function(){if(p.current&&(p.current.abort(),p.current=null),d&&u){var n=new AbortController;p.current=n;var t=n.signal,r=[];t.addEventListener("abort",function(){var e=[],n=!0,t=!1,i=void 0;try{for(var o,a=r[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;try{l()}catch(n){e.push(n)}}}catch(e){t=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(t)throw i}}e.length&&(1===e.length?f(e[0]):"undefined"!=typeof AggregateError?f(AggregateError(e,"Multiple errors occurred during cleanup")):f(Error("Multiple errors occurred during cleanup")))});var i=function(e){if(t.aborted)try{e()}catch(e){f(e)}else r.push(e)};try{Promise.resolve(e(d,{session:u,signal:t,addCleanup:i})).then(function(e){e&&i(e)}).catch(function(e){n.abort(),f(e)})}catch(e){throw n.abort(),e}return function(){n.abort()}}},[d,u,f].concat((0,i._)(n)))}},74094:(e,n,t)=>{"use strict";t.d(n,{uG:()=>A,gv:()=>Y});var r=t(37743),i=t(17844),o=t(93629),a=t(12694),l=t(88263),s=t(21462),c=t(39282),u=t(57756),d=t(43056),p=t(72498),f=t(13754),h=t(45263),m=t(48521),g=t(76126),v=t(10429),w=t(18870),y=t(71117);function b(e){return(0,l.FD)(y.Ay,(0,o._)((0,i._)({},e),{children:[(0,l.Y)("path",{fillRule:"evenodd",d:"M12 2.6a9.4 9.4 0 1 0 0 18.8 9.4 9.4 0 0 0 0-18.8ZM1.4 12C1.4 6.146 6.146 1.4 12 1.4c5.854 0 10.6 4.746 10.6 10.6 0 5.854-4.746 10.6-10.6 10.6-5.854 0-10.6-4.746-10.6-10.6Zm7-3a.6.6 0 0 1 .6-.6h.01a.6.6 0 0 1 0 1.2H9a.6.6 0 0 1-.6-.6Zm6 0a.6.6 0 0 1 .6-.6h.01a.6.6 0 1 1 0 1.2H15a.6.6 0 0 1-.6-.6Z",clipRule:"evenodd"}),(0,l.Y)("path",{d:"M8.71 14.515c.753-.548 1.875-1.115 3.29-1.115s2.537.567 3.29 1.115a6.538 6.538 0 0 1 1.1 1.013 3.76 3.76 0 0 1 .081.1l.009.012a.6.6 0 0 1-.959.722l-.05-.062a5.353 5.353 0 0 0-.886-.815c-.622-.452-1.5-.885-2.585-.885s-1.963.433-2.585.885a5.351 5.351 0 0 0-.886.815 2.31 2.31 0 0 0-.041.05l-.009.011a.6.6 0 0 1-.839.119.613.613 0 0 1-.093-.875l.063-.077c.053-.064.13-.152.23-.256.2-.207.492-.482.87-.757Z"})]}))}var S=t(80762),Y=new(function(){function e(){var n=this;(0,r._)(this,e),this.counter=0,this.enabled=!1,this.maxEntries=10,this.logs=(0,c.F)([]),this.clear=function(){n.logs.current=[]}}var n=e.prototype;return n.toggle=function(e){this.enabled=e},n.add=function(e){var n=this,t=this.counter++;if(!this.enabled)return{id:t};var r={id:t,request:e,requestTime:Date.now()};return this.logs.update(function(e){return[r].concat(e).slice(0,n.maxEntries)}),{id:t}},n.update=function(e,n){this.enabled&&this.logs.update(function(t){var r=t.findIndex(function(n){return n.id===e.id});if(-1===r)return t;var i=t.slice();return i[r]=n(i[r]),i})},n.complete=function(e,n){this.update(e,function(e){return(0,o._)((0,i._)({},e),{response:n,responseTime:Date.now()})})},n.abort=function(e){this.logs.update(function(n){return n.filter(function(n){return n.id!==e.id||null!=n.responseTime})})},e}()),A=function(e){var n=e.isHidden,t=(0,u.A)(Y.logs);return n?null:(0,l.FD)(v.S,{css:[m.wp.flex.column],children:[(0,l.FD)(v.S,{css:[m.wp.m(4),m.wp.position.sticky,m.wp.top(0),m.wp.backgroundColor.backgroundDefault,m.wp.zIndex(1)],row:!0,align:"center",children:[(0,l.Y)(g.EY,{css:m.wp.flex.grow(1),multiline:!1,children:"Requests"}),(0,l.Y)(f.D,{onClick:Y.clear})]}),(0,l.FD)(v.S,{css:[m.wp.flex.grow(1),m.wp.flex.column,m.wp.overflow("auto")],children:[t.map(function(e){var n;return(0,l.Y)(x,{log:e},null!=(n=e.id)?n:e.requestTime.valueOf())}),!t.length&&(0,l.Y)(v.S,{css:m.wp.m(4),children:"\uD83D\uDE14 No logs yet..."})]})]})},x=(0,s.memo)(function(e){var n,t=e.log,r=t.requestTime,i=t.responseTime,o=t.request,s=t.response,c=(0,a._)((0,p.A)(!0),2),u=c[0],f=c[1],y=o.prefix.length>20?"...".concat(o.prefix.slice(-20)):o.prefix;return(0,l.FD)(v.S,{css:[m.wp.my(4),m.wp.mx(4)],children:[(0,l.FD)(v.S,{role:"button",onClick:f,onKeyDown:f,tabIndex:0,css:[{"&:hover":{cursor:"pointer",".lspLog-requestMethod":{textDecoration:"underline"}}}],row:!0,gap:4,children:[(0,l.FD)(v.S,{css:[m.wp.flex.grow(1),m.wp.rowWithGap(2)],children:[(0,l.Y)(g.EY,{multiline:!1,children:(n=t.response)?"CompleteCodeResult"===n.__typename?(0,l.Y)(w.A,{}):(0,l.Y)(b,{}):(0,l.Y)(S.A,{})}),(0,l.Y)(g.EY,{multiline:!1,children:(0,l.Y)("code",{children:y})})]}),(0,l.Y)(v.S,{css:{opacity:.5},children:null!=i&&(0,l.FD)(g.EY,{css:m.wp.fontSize(13),multiline:!1,children:[i.valueOf()-r.valueOf(),"ms"]})})]}),!u&&(0,l.FD)(l.FK,{children:[void 0!==o&&(0,l.Y)(d.U,{name:"request",src:o}),void 0!==s&&("CompleteCodeResult"===s.__typename?(0,l.FD)("details",{children:[(0,l.Y)("summary",{children:"Response"}),(0,l.Y)("pre",{css:[m.wp.overflow("scroll"),m.wp.borderRadius(4),m.wp.p(4),{border:"1px solid ".concat(h.LU.outlineDimmest)}],children:s.code})]}):(0,l.Y)(d.U,{name:"response",src:s}))]})]})})},74291:(e,n,t)=>{"use strict";t.d(n,{G:()=>D});var r=t(88263),i=t(21462),o=t(51244),a=t(57756),l=t(33429),s=t(41852),c=t(12694),u=t(1230),d=t(54319),p=t(82110),f=t(47630),h=t(5504),m=t(45641),g={direction:"reverse",state:{count:0},map:function(e){return e.count>=5},reducer:function(e,n){var t;if(e.sender.type===u.utd.USER&&(null==(t=e.contents.contents)?void 0:t.$kind)==="messageEventContents"&&(n.count+=1),n.count>=5)return!1}},v=t(15521),w=t(79209),y=t(45263),b=t(64583),S=t(48521),Y=t(46603),A=t(75584),x=t(59172),C=t(97714),_=(0,b.x)({button:[S.wp.height(24),S.wp.p(4),S.wp.color.foregroundDimmer,{"&:hover:not([disabled], [aria-disabled])":S.wp.color.foregroundDefault}],badgeText:{color:"white"},buttonGlow:{position:"relative","&::before":{content:'""',position:"absolute",top:-2,left:-2,right:-2,bottom:-2,border:"1px solid ".concat(y.LU.blueDimmest),borderRadius:y.LU.borderRadius6,animation:"".concat((0,w.i7)({"0%":{borderColor:y.LU.blueDimmest,boxShadow:"0 0 4px ".concat(y.LU.blueDimmest)},"50%":{borderColor:y.LU.blueDefault,boxShadow:"0 0 8px 2px ".concat(y.LU.blueDefault)},"100%":{borderColor:y.LU.blueDimmest,boxShadow:"0 0 4px ".concat(y.LU.blueDimmest)}})," 3s ease-in-out infinite"),pointerEvents:"none",zIndex:0}}}),k={icon:function(){return(0,r.Y)(A.Hf,{name:"New",color:"primary",css:_.badgeText})},id:"visual-editor-callout",title:"Element Selector",content:"Visually select an element and guide the agent to make targeted changes.",hideCloseButton:!1,hideNavigation:!1};function D(){var e,n,t,u,w,y,b,S,A,D=(0,v.Z)(),E=D.isActive,R=D.toggleVisualEditor,I=D.isSelectorScriptLoaded,F=D.element,T=(0,s.Av)(),P=null!=(S=(0,a.A)(T))&&S,L=(0,o.a)({tablet:!0}),U=!I||!P,N=(0,i.useRef)(null),O=(e=(0,d.NC)(),n=(0,h._P)({controlName:"flag-visual-editor-feature-callout"}),u=(t=(0,m.Z)("visual-editor-callout")).isDone,w=t.setAsDone,y=(0,f.Rj)(function(){return p.cP.combine(e.sessions.agent.current,e.sessions.chat.open.latest).select(function(e){var n=(0,c._)(e,2),t=n[0],r=n[1];return t||r||null})},[e]),b=(0,f.Rj)(function(){return null==y?void 0:y.reduce(g,100)},[y],{default:!1}),{shouldShowCallout:n&&!u&&b,setAsDone:w}),M=O.shouldShowCallout,B=O.setAsDone;if(L||U)return null;var H=[_.button,M&&_.buttonGlow];return(0,r.FD)(r.FK,{children:[(0,r.Y)(x.m_,{isDisabled:M,tooltip:"Element selector",placement:"top-start",maxWidth:300,children:(0,r.Y)(Y.$n,{ref:N,css:H,disabled:U,variant:E?"default":"nofill",colorway:E?"primary":void 0,size:"small",text:null!=(A=null==F?void 0:F.componentName)?A:"",onClick:function(){R(),M&&B()},iconLeft:(0,r.Y)(C.A,{size:16})})}),M&&N.current&&(0,r.Y)(l.w,{targetElement:N.current,activeStep:k,currentStepIndex:0,totalSteps:1,done:B,goto:function(){},disableAnimation:!0,placement:"top-start",colorway:!1})]})}},74367:(e,n,t)=>{"use strict";t.d(n,{b:()=>h});var r=t(12694),i=t(21462),o=t(17844),a=t(12584),l=t(41114),s=t(86997);function c(){var e=(0,a._)(["\n  query GetReplIcon($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        iconUrl\n      }\n    }\n  }\n"]);return c=function(){return e},e}var u={},d=(0,l.J1)(c()),p=t(1350),f=t(34834);function h(e){var n,t,a=e.replId,l=e.replIconUrl,c=(0,r._)((0,i.useState)(null),2),h=c[0],m=c[1],g=(0,f.A)().container,v=l===p.QY&&null===h,w=(n={variables:{replId:a},pollInterval:2e3*!!v,onCompleted:function(e){var n,t=(null==e||null==(n=e.getRepl)?void 0:n.__typename)==="Repl"?e.getRepl.iconUrl:null;t&&t!==p.QY&&(g.exec("sh","-c","curl -o generated-icon.png ".concat(t)),m(t))}},t=(0,o._)({},u,n),s.I(d,t)).error;return{loading:v,error:w,generatedIconUrl:h}}},74470:(e,n,t)=>{"use strict";t.d(n,{A:()=>p});var r=t(88263),i=t(35084),o=t(16564),a=t(64583),l=t(48521),s=t(10429),c=t(74021),u=[l.wp.backgroundColor.outlineDimmest,l.wp.color.foregroundDefault,l.wp.borderRadius(4),l.wp.align.center,l.wp.justify.center,{height:"var(--group-icon-size)",width:"var(--group-icon-size)"}],d=(0,a.x)({grey:[u,l.wp.backgroundColor.greyDimmest],red:[u,l.wp.backgroundColor.redDimmest],orange:[u,l.wp.backgroundColor.orangeDimmest],yellow:[u,l.wp.backgroundColor.yellowDimmest],lime:[u,l.wp.backgroundColor.limeDimmest],blue:[u,l.wp.backgroundColor.blueDimmest],purple:[u,l.wp.backgroundColor.purpleDimmest],pink:[u,l.wp.backgroundColor.pinkDimmest]});let p=function(e){var n,t,a=e.group,l=e.variant,u=void 0===l?"normal":l;switch(a.color){case i.RV.Grey:n=d.grey;break;case i.RV.Red:n=d.red;break;case i.RV.Orange:n=d.orange;break;case i.RV.Yellow:n=d.yellow;break;case i.RV.Lime:n=d.lime;break;case i.RV.Blue:n=d.blue;break;case i.RV.Purple:n=d.purple;break;case i.RV.Pink:n=d.pink;break;default:n=d.grey}switch(u){case"normal":t=32;break;case"compact":t=24;break;default:(0,o.A)(u)}return(0,r.Y)(s.S,{css:n,style:{"--group-icon-size":"".concat(t,"px")},children:(0,r.Y)(c.A,{})})}},74643:(e,n,t)=>{"use strict";t.d(n,{A:()=>I});var r=t(17844),i=t(93629),o=t(12694),a=t(86105),l=t(88263),s=t(21462),c=t(39695),u=t(12584),d=t(41114),p=t(86997),f=t(57727);function h(){var e=(0,u._)(["\n  query OrgGroupSearch($orgId: String, $input: OrgGroupsInput) {\n    currentUser {\n      __typename\n      id\n      org(orgId: $orgId) {\n        __typename\n        ... on Org {\n          id\n          groups(input: $input) {\n            __typename\n            ... on OrgGroupConnection {\n              pageInfo {\n                hasNextPage\n                nextCursor\n              }\n              items {\n                ...OrgGroupsOrgGroup\n              }\n            }\n            ... on UserError {\n              message\n            }\n          }\n        }\n        ... on NotFoundError {\n          message\n        }\n      }\n    }\n  }\n  ","\n"]);return h=function(){return e},e}var m={},g=(0,d.J1)(h(),f.Um),v=t(39101),w=t(45263),y=t(64583),b=t(48521),S=t(38292),Y=t(77089),A=t(54087),x=t(76126),C=t(10429),_=t(83650),k=t(80762),D=t(82842),E=[b.wp.p(8),b.wp.cursor.pointer],R=(0,y.x)({container:[b.wp.position.relative],rightIcon:[b.wp.position.absolute,b.wp.right(8),b.wp.top("50%"),{transform:"translateY(-50%)"}],dropdownMenu:[b.wp.width("100%"),b.wp.position.absolute,b.wp.zIndex(1),b.wp.top("100%"),b.wp.left(0),b.wp.backgroundColor.backgroundDefault,b.wp.maxHeight(300),b.wp.overflow("auto"),b.wp.borderRadius(4),b.wp.border({color:w.LU.foregroundDimmest}),{borderTop:"0 none"}],result:(0,a._)(E),activeResult:(0,a._)(E).concat([b.wp.backgroundColor.accentPrimaryDimmer]),closeIconButton:[{"&:hover":{backgroundColor:"".concat(w.LU.backgroundHighest," !important")}}]});let I=function(e){var n,t,a,u=e.inputId,d=e.orgId,f=e.types,h=e.selectedGroups,w=e.value,y=e.setValue,b=e.onSelect,E=e.onClear,I=e.placeholder,F=void 0===I?"Find an existing group...":I,T=(0,o._)((0,s.useState)([]),2),P=T[0],L=T[1],U=(0,v.A)(w.trim(),250),N=(n={variables:{orgId:d,input:{count:10,types:f,filters:{name:{search:U}}}},ssr:!1,skip:!U,fetchPolicy:"cache-and-network",onCompleted:function(e){if((null==e||null==(t=e.currentUser)||null==(n=t.org)?void 0:n.__typename)==="Org"&&(null==e||null==(o=e.currentUser)||null==(i=o.org)||null==(r=i.groups)?void 0:r.__typename)==="OrgGroupConnection"){var n,t,r,i,o;L(e.currentUser.org.groups.items.filter(function(e){return!h.some(function(n){return e.id===n.id})}))}}},t=(0,r._)({},m,n),p.I(g,t)),O=N.data,M=N.loading,B=N.error,H=O&&O.currentUser&&"Org"!==O.currentUser.org.__typename?O.currentUser.org.message:void 0,z=O&&O.currentUser&&"Org"===O.currentUser.org.__typename&&"OrgGroupConnection"!==O.currentUser.org.groups.__typename?O.currentUser.org.groups.message:void 0,W=null==B?void 0:B.message,G=null!=(a=null!=H?H:z)?a:W;return(0,s.useEffect)(function(){0===w.length&&0!==P.length&&L([])},[w.length,P.length]),(0,l.Y)(C.S,{css:R.container,children:(0,l.Y)(c.Ay,{onSelect:function(e){e&&b(e)},itemToString:function(e){return(null==e?void 0:e.name)||""},initialHighlightedIndex:0,defaultHighlightedIndex:0,children:function(e){var n=e.getInputProps,t=e.getItemProps,o=e.getMenuProps,a=e.isOpen,s=e.highlightedIndex,c=e.getRootProps;return(0,l.FD)(C.S,(0,i._)((0,r._)({},c({refKey:"innerRef"})),{children:[(0,l.Y)(Y.pd,(0,r._)({},n({id:u,ref:null,value:w,onChange:function(e){y(e.currentTarget.value)},placeholder:F,autoComplete:"off"}))),M||0!==w.length?null:(0,l.Y)(D.A,{css:R.rightIcon}),M?(0,l.Y)(C.S,{css:R.rightIcon,children:(0,l.Y)(k.A,{})}):null,!M&&w.length>0?(0,l.Y)(C.S,{css:R.rightIcon,children:(0,l.Y)(S.K0,{css:R.closeIconButton,alt:"Clear",tooltipBehavior:"hidden",onClick:function(){y(""),E&&E()},children:(0,l.Y)(_.A,{})})}):null,(0,l.FD)(C.S,(0,i._)((0,r._)({tag:"ul"},o({refKey:"innerRef"})),{children:[G?(0,l.Y)(C.S,{tag:"ul",css:R.dropdownMenu,children:(0,l.Y)(C.S,{tag:"li",css:R.result,children:(0,l.Y)(A.N,{colorway:"negative",text:G})})}):null,a&&P&&P.length?(0,l.Y)(C.S,{css:R.dropdownMenu,children:P.map(function(e,n){return(0,l.Y)(C.S,(0,i._)((0,r._)({tag:"li"},t({item:e,index:n})),{css:n===s?R.activeResult:R.result,children:(0,l.Y)(x.EY,{height:"singleLine",multiline:!1,children:e.name})}),e.id)})}):null,a&&!M&&U.length>0&&0===P.length?(0,l.Y)(C.S,{tag:"ul",css:R.dropdownMenu,children:(0,l.Y)(C.S,{tag:"li",css:R.result,children:(0,l.FD)(x.EY,{height:"singleLine",color:"dimmer",multiline:!1,children:['No results found for "',w,'"']})})}):null]}))]}))}})})}},74837:(e,n,t)=>{"use strict";t.d(n,{g1:()=>ef.g1,R6:()=>eM,Ge:()=>ef.Ge,iJ:()=>ef.iJ,Ay:()=>eq,WM:()=>eZ,Nz:()=>ej});var r=t(29935),i=t(83846),o=t(17844),a=t(93629),l=t(12694),s=t(86105),c=t(82643),u=t(88263),d=t(21462),p=t(35084),f=t(82977),h=t(16564),m=t(64513),g=t(36640),v=t(31062),w=t(45485),y=t(53231),b=t(37427),S=t(34834),Y=t(45641),A=t(29542),x=t.n(A),C=t(63441),_=t(64583),k=t(48521),D=t(54087),E=t(10429),R=t(62362),I=(0,_.x)({buttonLink:[k.wp.reset.button,k.wp.linkStyle]});function F(){return(0,u.Y)(C.A,{pane:{type:"envEditor"},bodyText:(0,u.FD)(E.S,{gap:4,children:[(0,u.FD)("div",{children:[(0,u.Y)("code",{children:"HTML/CSS/JS"})," Apps don't support secrets since they are statically hosted."]}),(0,u.Y)("div",{children:(0,u.Y)(x(),{href:m.ik.SECRETS,target:"_blank",rel:"noopener",children:"Visit the secrets documentation to learn more."})})]})})}function T(e){var n=e.performPaneOperation,t=e.editSecretsAuthz;return(0,u.Y)(C.A,{pane:{type:"envEditor"},bodyText:(0,u.FD)(E.S,{gap:4,children:[t.isAuthorized?null:(0,u.Y)(D.N,{icon:(0,u.Y)(R.A,{}),text:t.message}),(0,u.Y)("div",{children:(0,u.Y)(x(),{href:m.ik.SECRETS_SAFETY,target:"_blank",rel:"noopener",children:"Learn how Replit keeps your Secrets safe."})}),(0,u.FD)("div",{children:["Not sure where to start?"," ",(0,u.Y)("button",{onClick:function(){n({operation:"open",pane:{type:"integrations"}}),(0,y.u4)(y.AZ.TOOL_OPENED,{source:"secretsPaneNudge",tool:"integrations"})},css:I.buttonLink,children:"Explore Integrations."})]})]})})}function P(e){var n=e.message;return(0,u.Y)(C.A,{pane:{type:"envEditor"},bodyText:(0,u.FD)(E.S,{gap:4,children:[(0,u.Y)("div",{children:n}),(0,u.Y)("div",{children:(0,u.Y)(x(),{href:m.ik.SECRETS,target:"_blank",rel:"noopener",children:"Visit the secrets documentation to learn more."})})]})})}var L=t(76418),U=t(67251),N=t(41852),O=t(45263),M=t(46603),B=t(70548),H=t(38292),z=t(36112),W=t(76126),G=t(59172),V=t(29425),j=t(75576),Z=t(22318),q=(0,_.x)({root:[k.wp.flex.column,k.wp.p(8),k.wp.colWithGap(8)],header:[k.wp.gap(4),k.wp.align.start,{"& > *:first-child":[k.wp.flex.growAndShrink(1),{alignSelf:"end"}]}],list:[k.wp.flex.column,k.wp.borderRadius(),k.wp.overflow("hidden")],item:[k.wp.display.grid,k.wp.align.center,k.wp.justify.spaceBetween,k.wp.px(8),k.wp.py(12),k.wp.border({direction:"bottom",color:O.LU.outlineDimmer,width:1}),{gridTemplateColumns:"1fr 1fr","&:last-child":{borderBottom:"none"},"> *:last-child":{justifyContent:"end"}}],itemName:[k.wp.flex.row,k.wp.gap(8),k.wp.align.center,k.wp.overflow("hidden"),{"*":{overflow:"hidden",textOverflow:"ellipsis"}}],itemValue:[k.wp.overflow("hidden"),k.wp.flex.row,k.wp.gap(4),k.wp.align.center,{'&[data-sensitive="true"]':{fontFamily:"text-security-disc"},span:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}}]}),K=function(e){var n=e.name,t=e.value,r=e.checked,i=e.onCheck,o=e.disabled,a=e.disabledReason,s=e.linked,c=(0,l._)((0,d.useState)(!0),2),p=c[0],f=c[1];return(0,u.FD)(E.S,{css:q.item,children:[(0,u.FD)("div",{css:q.itemName,children:[s?(0,u.Y)(G.m_,{tooltip:"Linked to Account Secrets",children:(0,u.Y)(Z.A,{color:O.LU.accentPrimaryStronger})}):(0,u.Y)(B.S,{checked:r,onChange:i,id:"secret-".concat(n),name:"Select secret",disabled:o}),(0,u.Y)("label",{htmlFor:"secret-".concat(n),children:n}),o&&!s&&a?(0,u.Y)(G.m_,{tooltip:a,children:(0,u.Y)(R.A,{color:O.LU.foregroundDimmer})}):null]}),(0,u.FD)(E.S,{css:q.itemValue,"data-sensitive":p,children:[(0,u.Y)("span",{children:p?"****************":t}),(0,u.Y)(H.K0,{alt:p?"Hide secret":"Show secret",onClick:function(){return f(!p)},children:p?(0,u.Y)(j.A,{}):(0,u.Y)(V.A,{})})]})]})};function $(e){var n=e.secrets,t=e.onSelectSecrets,r=e.actionText,i=e.helpText,o=e.existingKeys,a=e.linkedSecrets,s=void 0===a?[]:a,c=(0,l._)((0,d.useState)(new Set),2),p=c[0],f=c[1],h=s.length>=10,m=s.length+p.size>=10,g=(0,d.useCallback)(function(){return n.filter(function(e){return p.has(e.name)})},[n,p]),v=new Set(s.map(function(e){return e.secret.id}));return(0,u.FD)(E.S,{css:q.root,children:[h?(0,u.Y)(D.N,{colorway:"warning",icon:(0,u.Y)(R.A,{}),text:"You've reached the limit of ".concat(10," linked secrets. Please unlink some secrets before adding more.")}):m?(0,u.Y)(D.N,{colorway:"warning",icon:(0,u.Y)(R.A,{}),text:"Selecting another secret would exceed the limit of ".concat(10," linked secrets.")}):null,(0,u.FD)(E.S,{css:q.header,row:!0,justify:"space-between",children:[(0,u.Y)(W.EY,{variant:"subheadDefault",children:"Account secrets are only visible to you."}),(0,u.Y)(M.$n,{colorway:"primary",text:r,disabled:0===p.size,onClick:function(){return t(g())},size:"small"})]}),(0,u.Y)(W.EY,{color:"dimmer",children:i}),(0,u.Y)(z.ui,{elevated:!0,css:q.list,children:n.map(function(e){return(0,u.Y)(K,{checked:p.has(e.name),onCheck:function(n){n&&s.length+p.size>=10||f(function(t){var r=new Set(t);return n?r.add(e.name):r.delete(e.name),r})},value:e.value||"",name:e.name,linked:v.has(e.id),disabled:o.has(e.name)||h||!p.has(e.name)&&m,disabledReason:o.has(e.name)?"A secret with this name already exists in this Repl":h?"Secret limit reached. Please unlink some secrets before adding more.":m&&!p.has(e.name)?"Cannot select more secrets. This would exceed the limit of ".concat(10):void 0},e.name)})})]})}var J=t(90629),Q=t(3443),X=t(86005),ee=t(18918),en=t(55315),et=t(63708),er=t(24365),ei=t(49150),eo=t(18870),ea=t(85305),el=t(51965),es=t(49444),ec=y.AZ.ENV_EDITOR_USED;function eu(e){var n,t=e.secrets,i=e.update,o=e.disabledMessage,a=(0,l._)((0,d.useState)(!1),2),s=a[0],p=a[1],f=(0,l._)((0,d.useState)(!1),2),h=f[0],m=f[1],g=(0,l._)((0,d.useState)(!1),2),v=g[0],w=g[1],b=(0,l._)((0,d.useState)(0),2),S=b[0],Y=b[1],A=(0,l._)((0,d.useState)(0),2),x=A[0],C=A[1],_=0===S,R=(0,Q.bu)(function(e){var n=e.state.doc.toString(),t=0===x?ed(n):ep(n);return Y(t),(0,y.u4)(ec,{action:0===t?"rawEditorUpdatedSuccess":"rawEditorUpdatedError"}),[]}),I=(0,en.A)(),F=I.ref,T=I.view,P=function(){h||p(!1)},L=function(){w(!1),p(!0),(0,y.u4)(ec,{action:"rawEditorOpened"})},U=function(){if(!T)return!1;var e=T.state.doc.toString(),n=0===x?ed(e):ep(e);return Y(n),0===n},N=(n=(0,r._)(function(){var e,n;return(0,c.YH)(this,function(t){switch(t.label){case 0:if(!T||!U())return[2];m(!0),t.label=1;case 1:return t.trys.push([1,3,,4]),e=T.state.doc.toString(),[4,i(0===x?new Map(Object.entries(JSON.parse(e)).map(function(e){var n=(0,l._)(e,2);return[n[0],n[1]]})):et.A.parse(e))];case 2:return t.sent(),m(!1),w(!0),setTimeout(function(){P(),setTimeout(function(){w(!1)},500)},500),[3,4];case 3:return n=t.sent(),J.Cp(n),(0,y.u4)(ec,{action:"rawEditorUpdatedError"}),Y(4),m(!1),[3,4];case 4:return[2]}})}),function(){return n.apply(this,arguments)});return(0,d.useEffect)(function(){if(T){var e=0===x?JSON.stringify(Object.fromEntries(t.entries()),null,2):et.A.serialize(t);0===x&&"{}"===e&&(e="{\n  \n}"),T.dispatch({changes:{from:0,to:T.state.doc.length,insert:e}}),T.dispatch({selection:{anchor:T.state.doc.length-2*(0===x)}}),T.focus()}},[T,t,x]),(0,u.FD)(G.m_,{isDisabled:void 0===o,tooltip:o,children:[(0,u.FD)(E.S,{row:!0,gap:8,children:[(0,u.Y)(M.$n,{onClick:function(){C(0),L()},text:"Edit as JSON",iconLeft:(0,u.Y)(ea.A,{}),size:"small",disabled:void 0!==o||h}),(0,u.Y)(M.$n,{onClick:function(){C(1),L()},text:"Edit as .env",iconLeft:(0,u.Y)(es.A,{}),size:"small",disabled:void 0!==o||h})]}),(0,u.Y)(ei.a,{isOpen:s,onRequestClose:function(){return P()},children:(0,u.FD)(E.S,{gap:24,children:[(0,u.Y)(W.Y9,{level:1,variant:"headerDefault",children:"Raw Secrets Editor"}),(0,u.Y)(W.EY,{children:0===x?"Secrets are specified in JSON. Values must be strings.":'Secrets are specified in .env format (KEY="value").'}),(0,u.Y)(z.ui,{css:[k.wp.borderRadius(8),k.wp.transition.snappy,k.wp.p(4),{border:"1px solid ".concat(O.LU.outlineDimmer),":hover":{borderColor:O.LU.outlineStronger}}],elevated:!0,children:(0,u.Y)(ee.Ay,{ref:F,readOnly:h||v,extensions:[R,X.w4.of([{key:(0,er.FM)({cmdOrCtrl:!0,key:"Enter"}),run:function(){return N(),!0},preventDefault:!0,stopPropagation:!0}])],language:0===x?"json":"properties",hideGutter:!0})}),(0,u.FD)(E.S,{row:!0,gap:4,justify:"end",children:[!_&&(0,u.Y)(D.N,{icon:(0,u.Y)(el.A,{}),colorway:"negative",text:function(e){switch(e){case 1:return"Make sure the data is valid JSON.";case 2:return'Make sure the data is in valid .env format (KEY="value").';case 3:return"Make sure that all values are strings.";case 5:return"Make sure that all keys are non-empty strings.";case 4:return"There was an error saving the secrets.";default:return""}}(S)}),(0,u.FD)(E.S,{row:!0,gap:12,children:[(0,u.Y)(M.$n,{onClick:P,text:"Cancel"}),(0,u.Y)(M.$n,{iconLeft:(0,u.Y)(eo.A,{}),stretch:!0,colorway:v?"positive":"primary",text:v?"Saved!":"Save",disabled:!_||h||v,onClick:function(){return N()}})]})]})]})})]})}function ed(e){try{var n=JSON.parse(e);for(var t in n){if("string"!=typeof t||"string"!=typeof n[t])return 3;if(!t.trim())return 5}return 0}catch(e){return 1}}function ep(e){try{var n=e.replace(/#.*$/gm,"").split("\n"),t="",r=!0,i=!1,o=void 0;try{for(var a,s=n[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var c=a.value;if((t+=(t?"\n":"")+c).trim()){var u=(t.match(/'/g)||[]).length,d=(t.match(/"/g)||[]).length;if(u%2!=0||d%2!=0){if(c===n[n.length-1])return 2;continue}t=""}}}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}var p=et.A.parse(e),f=!0,h=!1,m=void 0;try{for(var g,v=p[Symbol.iterator]();!(f=(g=v.next()).done);f=!0)if(!(0,l._)(g.value,1)[0].trim())return 5}catch(e){h=!0,m=e}finally{try{f||null==v.return||v.return()}finally{if(h)throw m}}return 0}catch(e){return 2}}var ef=t(77446),eh=t(79209),em=t(39999),eg=t(69938),ev=t(5721),ew=t(77089),ey=t(33747),eb=t(90395),eS=t(81642),eY=t(55625),eA=t(85233),ex=t(93333),eC=t(56002),e_=t(80762),ek=t(86814),eD=t(19465),eE=t(29064),eR=t(65483),eI=(0,eh.AH)([k.wp.center,k.wp.coverContainer]),eF=k.kL.max(420),eT=(0,_.x)({root:[k.wp.flex.column,k.wp.flex.growAndShrink(1),k.wp.height("100%")],body:[k.wp.flex.growAndShrink(1),k.wp.overflowY("auto")],header:[k.wp.border({color:O.LU.outlineDimmest,width:1,direction:"bottom"}),k.wp.overflowX("auto"),k.wp.overflowY("hidden")],tabs:[k.wp.flex.growAndShrink(1),{height:"100%",'[role="tablist"]':{height:"100%","& > *":{borderRadius:0}}}],tabExtraText:(0,i._)({},eF,{display:"none"}),headerButtons:[k.wp.gap(8),k.wp.p(8)],addSecretTitleContainer:[k.wp.width("40%")],addSecretValueSection:[k.wp.flex.growAndShrink(1)],secretSelect:[k.wp.minWidth(48)],addSecretContainer:[k.wp.flex.column,k.wp.colWithGap(8),k.wp.py(8),k.wp.flex.column,k.wp.colWithGap(8)],addSecretValue:[],addSecretValueLabel:[{label:[k.wp.display.flex,k.wp.flex.row,k.wp.gap(4),k.wp.align.center]}]}),eP=(0,_.x)({body:[k.wp.flex.growAndShrink(1),k.wp.overflowY("auto")],footer:[k.wp.border({color:O.LU.outlineDimmer,width:1,direction:"top"}),{"& > *":{width:"fit-content"}}],link:[k.wp.linkStyle,k.wp.color.foregroundDefault]}),eL=["SLACK_API_KEY","GOOGLE_API_KEY","MONGO_API_KEY","FIREBASE_API_KEY"];function eU(e){var n=e.onClose,t=e.onAdd,r=e.otherKeys,i=(0,l._)((0,d.useState)(!0),2),s=i[0],c=i[1],p=(0,l._)((0,d.useState)({key:"",value:""}),2),f=p[0],h=p[1],m=(0,l._)((0,d.useState)(function(){var e=Math.floor(Math.random()*eL.length);return eL[e]}),1)[0],g=(0,d.useMemo)(function(){return null!==f.key.match(ef.Hs)},[f.key]),v=(0,d.useMemo)(function(){return r.includes(f.key)?"Secret already exists":!g&&f.key?ef.ll:void 0},[r,f.key,g]),w=f.key.length>0&&!v,y=function(){w&&(t({key:f.key.trim(),value:f.value}),h({key:"",value:""}))};return(0,u.FD)(E.S,{css:eT.addSecretContainer,onKeyDown:function(e){"Enter"===e.key&&y()},children:[(0,u.FD)(E.S,{row:!0,gap:8,children:[(0,u.Y)(E.S,{css:eT.addSecretTitleContainer,children:(0,u.FD)(eS.A_,{validate:function(){return v},validationBehavior:"aria",isRequired:!0,minLength:1,maxLength:128,name:"secretKey",value:f.key,onChange:function(e){return h(function(n){return(0,a._)((0,o._)({},n),{key:e})})},isInvalid:!!v,children:[(0,u.Y)(ey.J,{color:"dimmer",multiline:!1,children:"Key"}),(0,u.Y)(ew.pd,{placeholder:m,autoComplete:"off",autoFocus:!0}),(0,u.Y)(ev.bg,{children:v})]})}),(0,u.Y)(E.S,{css:eT.addSecretValueSection,gap:4,children:(0,u.FD)(eS.A_,{isRequired:!0,minLength:1,name:"secretValue",value:f.value,onChange:function(e){return h(function(n){return(0,a._)((0,o._)({},n),{value:e})})},css:eT.addSecretValue,children:[(0,u.FD)(ey.J,{color:"dimmer",multiline:!1,css:eT.addSecretValueLabel,children:["Value",(0,u.Y)(H.K0,{alt:"Toggle Visibility",tooltipBehavior:"hidden",onClick:function(){return c(!s)},size:12,children:s?(0,u.Y)(V.A,{}):(0,u.Y)(j.A,{})})]}),(0,u.Y)(ew.pd,{"data-sensitive":s,autoComplete:"off"})]})})]}),(0,u.FD)(E.S,{row:!0,gap:8,justify:"end",children:[(0,u.Y)(M.$n,{size:"small",text:"Cancel",onClick:function(){return n()}}),(0,u.Y)(M.$n,{size:"small",text:"Add Secret",colorway:"primary",disabled:!w,onClick:y})]})]})}var eN=[k.wp.flex.row,k.wp.rowWithGap(8),k.wp.align.center],eO=(0,_.x)({root:[k.wp.height("100%"),k.wp.borderRadius(8),{'& [aria-haspopup="listbox"]':[k.wp.height(32)]}],item:eN,itemDanger:[eN,{color:O.LU.accentNegativeStronger}]});function eM(e){var n=e.onEdit,t=e.onDelete,r=e.autoSyncState;return(0,u.Y)(z.ui,{elevated:!0,css:eO.root,children:(0,u.Y)(eY.A,{label:"Options",items:[{label:(0,u.FD)(E.S,{css:eO.item,children:[(0,u.Y)(eC.A,{}),(0,u.Y)(W.EY,{multiline:!1,children:"Edit"})]}),onClick:n},function(e){switch(e.type){case"disabled":case"deploymentOnly":return null;case"synced":return{label:(0,u.FD)(E.S,{css:eO.item,children:[(0,u.Y)(eR.A,{}),(0,u.Y)(W.EY,{multiline:!1,children:"Unsync from workspace value"})]}),onClick:e.optOut};case"unsynced":return{label:(0,u.FD)(E.S,{css:eO.item,children:[(0,u.Y)(Z.A,{}),(0,u.Y)(W.EY,{multiline:!1,children:"Sync to workspace value"})]}),onClick:e.sync};default:(0,h.A)(e)}}(r),{label:(0,u.FD)(E.S,{css:eO.itemDanger,children:[(0,u.Y)(eE.A,{}),(0,u.Y)(W.EY,{multiline:!1,children:"Delete"})]}),isDestructive:!0,onClick:t}].filter(Boolean),onItemClick:function(e){var n;return null==(n=e.onClick)?void 0:n.call(e)}})})}var eB=(0,_.x)({secretItem:[k.wp.borderRadius(8),k.wp.backgroundColor.backgroundRoot]});function eH(e){var n=e.secrets,t=e.onUpdateSecret,r=e.onDeleteSecret,i=e.onAddSecret,o=e.showAddSecret,a=e.onSearch,c=e.onClose,p=e.editAuthorizationErrorMessage,f=e.linkedSecrets,h=e.userSecrets,m=e.onUpdateLink,g=e.onUnlink,v=(0,d.useMemo)(function(){return new Set((0,s._)(n.keys()).concat((0,s._)((null==f?void 0:f.map(function(e){return e.alias}))||[])))},[n,f]),w=(0,d.useMemo)(function(){return(0,s._)(n.entries()).filter(function(e){var n=(0,l._)(e,2);return""===(n[0],n[1])})},[n]),y=(0,d.useMemo)(function(){return(0,s._)(n.entries()).filter(function(e){var n=(0,l._)(e,2);return""!==(n[0],n[1])})},[n]);return o||0!==w.length||0!==y.length||(null==f?void 0:f.length)?(0,u.FD)(E.S,{py:8,gap:8,children:[0!==w.length&&(0,u.FD)(u.FK,{children:[(0,u.FD)(E.S,{px:8,gap:8,children:[(0,u.Y)(W.EY,{variant:"subheadDefault",multiline:!1,children:"Configure missing Secret values"}),(0,u.Y)(W.EY,{variant:"small",children:"This App contains Secrets that might be required. Add values to ensure the code runs as expected."}),(0,u.Y)(E.S,{gap:8,children:w.map(function(e){var n=(0,l._)(e,2),i=n[0],o=n[1];return(0,u.Y)(z.ui,{elevated:!0,css:eB.secretItem,p:8,children:(0,u.Y)(ef.aL,{secret:{key:i,value:o},onUpdateSecret:t,onDeleteSecret:r,onSearchSecret:function(){},editAuthorizationErrorMessage:p})},i)})})]}),(0,u.Y)(eg.a,{})]}),(0,u.FD)(E.S,{px:8,gap:8,children:[o?(0,u.Y)(eU,{onClose:c,onAdd:i,otherKeys:Object.keys(n)}):null,y.map(function(e){var n=(0,l._)(e,2),i=n[0],o=n[1];return(0,u.Y)(ef.aL,{secret:{key:i,value:o},onUpdateSecret:t,onDeleteSecret:r,onSearchSecret:a,editAuthorizationErrorMessage:p},i)}),f&&f.length>0?(0,u.FD)(u.FK,{children:[y.length>0?(0,u.Y)(eg.a,{}):null,f.map(function(e){return(0,u.Y)(ef.x7,{link:e,onUpdateLink:m,onUnlink:g,userSecrets:h,existingKeys:v},e.id)})]}):null]})]}):null}function ez(e){var n=e.secrets,t=e.activeFile,r=(0,l._)((0,d.useState)(n.keys().next().value),2),i=r[0],o=r[1];return(0,U.A)(t)&&(0,L.M)(t,i)&&n.size>0?(0,u.FD)(E.S,{px:8,py:16,gap:8,children:[(0,u.FD)(E.S,{row:!0,gap:8,align:"center",children:[(0,u.Y)(W.EY,{multiline:!1,children:"Access secret"}),(0,u.Y)(eA.l,{css:eT.secretSelect,items:(0,s._)(n.keys()).map(function(e){return{title:e}}),selectedItem:{title:i},onChange:function(e){return o(e.title)}})]}),(0,u.Y)(L.A,{elevated:!0,keyName:i,filePath:t})]}):null}var eW=(0,_.x)({text:[k.wp.flex.growAndShrink(1)]}),eG=function(e){var n,t,i,o,a,l=e.performPaneOperation,s=e.getRunState,d=e.showAddSecret,p=e.setShowAddSecret,f=e.secrets,h=e.editAuthorization,v=e.error,Y=e.dismissibleElement,A=Y.isDone,x=Y.setAsDone,C=e.linkedSecrets,_=e.userSecrets,k=e.onUpdateLink,I=e.onUnlink,L=(0,g.A)().showConfirm,U=(0,S.A)().secrets,O=(0,N.rM)(),M=(0,w.g)(),B=function(){p(!1)},H=(n=(0,r._)(function(e){return(0,c.YH)(this,function(n){return(0,y.u4)(y.AZ.ENV_EDITOR_USED,{action:"created",multiline:e.value.includes("\n")}),U.addEntries([{key:e.key,value:e.value}]),s()===b.ll.RUNNING&&L("Re-run your App to use this secret"),B(),[2]})}),function(e){return n.apply(this,arguments)}),z=(t=(0,r._)(function(e,n){var t;return(0,c.YH)(this,function(r){return(0,y.u4)(y.AZ.ENV_EDITOR_USED,{action:"updated",multiline:n.value.includes("\n")}),(t=new Map(f)).delete(e),t.set(n.key,n.value),U.replaceAll(t),[2]})}),function(e,n){return t.apply(this,arguments)}),G=(i=(0,r._)(function(e){return(0,c.YH)(this,function(n){return(0,y.u4)(y.AZ.ENV_EDITOR_USED,{action:"deleted"}),U.removeEntries(e),[2]})}),function(e){return i.apply(this,arguments)}),V=f.size>0||C&&C.length>0;return M?(0,u.Y)(F,{}):!h||v?(0,u.Y)(P,{message:null!=(a=null==v?void 0:v.message)?a:"Unable to determine secret eligibility, please refresh your browser."}):(0,u.FD)(u.FK,{children:[(0,u.FD)(E.S,{css:eP.body,children:[h.isAuthorized&&!A?(0,u.Y)(E.S,{p:8,children:(0,u.Y)(D.N,{icon:(0,u.Y)(R.A,{}),closable:!0,closeAction:function(){return x()},colorway:"primary",text:(0,u.FD)(W.EY,{css:eW.text,children:["Secrets are accessible to anyone who has access to this App. To restrict secret access, you must update App invite permissions. For more information, visit"," ",(0,u.Y)("a",{href:m.ik.SECRETS,target:"_blank",css:eP.link,children:"our documentation"}),"."]})})}):null,V||!1!==d?null:(0,u.Y)(T,{performPaneOperation:l,editSecretsAuthz:h}),(0,u.Y)(eH,{secrets:f,onUpdateSecret:z,onDeleteSecret:G,onAddSecret:H,showAddSecret:d,onSearch:function(e){return l({operation:"open",pane:{type:"searchReplace",data:{initialQuery:e}}})},editAuthorizationErrorMessage:h.isAuthorized?void 0:h.message,onClose:B,linkedSecrets:C,userSecrets:_,onUpdateLink:k,onUnlink:I}),O&&V?(0,u.Y)(ez,{secrets:f,activeFile:O}):null]}),(0,u.Y)(E.S,{css:eP.footer,p:4,children:(0,u.Y)(eu,{secrets:f,update:(o=(0,r._)(function(e){return(0,c.YH)(this,function(n){switch(n.label){case 0:return[4,U.replaceAll(e)];case 1:return n.sent(),[2]}})}),function(e){return o.apply(this,arguments)}),disabledMessage:h.isAuthorized?void 0:h.message})})]})},eV={SECRETS:0,ACCOUNT_SECRETS:1};function ej(e,n){return(0,f.AH)({update:function(t,r,i){var l=r.data,s=i.variables;(null==l?void 0:l.unlinkSharedSecrets.__typename)==="UnlinkSharedSecretsResult"&&t.updateQuery({query:f.tD,variables:{replId:e}},function(e){if(!(null==e?void 0:e.getRepl)||"Repl"!==e.getRepl.__typename||!s)return e;var t,r,i=null!=(r=null==(t=e.getRepl.sharedSecretLinks)?void 0:t.filter(function(e){return!s.input.ids.includes(e.id)}))?r:[];return n(i.map(function(e){return{key:e.alias,url:e.secret.signedUrl}})),(0,a._)((0,o._)({},e),{getRepl:(0,a._)((0,o._)({},e.getRepl),{sharedSecretLinks:i})})})}})}function eZ(e,n){return(0,f.DX)({update:function(t,i){var l=i.data;return(0,r._)(function(){var r,i,u,d,p,h;return(0,c.YH)(this,function(c){switch(c.label){case 0:if((null==l?void 0:l.linkSharedSecrets.__typename)!=="LinkSharedSecretsResult")return[3,2];return i=l.linkSharedSecrets.links,p=(null==(u=t.readQuery({query:f.tD,variables:{replId:e}}))||null==(r=u.getRepl)?void 0:r.__typename)==="Repl"&&null!=(d=u.getRepl.sharedSecretLinks)?d:[],[4,n((h=(0,s._)(p).concat((0,s._)(i))).map(function(e){return{key:e.alias,url:e.secret.signedUrl}}))];case 1:c.sent(),t.updateQuery({query:f.tD,variables:{replId:e}},function(e){return(null==e?void 0:e.getRepl)&&"Repl"===e.getRepl.__typename?(0,a._)((0,o._)({},e),{getRepl:(0,a._)((0,o._)({},e.getRepl),{sharedSecretLinks:h})}):e}),c.label=2;case 2:return[2]}})})()}})}function eq(e){var n,t,i,h,w=e.getRunState,b=e.performPaneOperation,A=(0,v.A)(),x=(0,S.A)().secrets,C=(0,l._)(ej(A,x.replaceAllExternalSecrets),1)[0],_=(0,l._)(eZ(A,x.replaceAllExternalSecrets),1)[0],k=(0,l._)((n=(0,S.A)().secrets,(0,f.vC)({update:function(e,t){var r=t.data;if((null==r?void 0:r.updateSharedSecretLink.__typename)==="SharedSecretLink"){var i=r.updateSharedSecretLink;e.updateQuery({query:f.tD,variables:{replId:A}},function(e){if((null==e||null==(t=e.getRepl)?void 0:t.__typename)!=="Repl")return e;var t,r,l,s=null!=(l=null==(r=e.getRepl.sharedSecretLinks)?void 0:r.map(function(e){return e.id===i.id?i:e}))?l:[];return n.replaceAllExternalSecrets(s.map(function(e){return{key:e.alias,url:e.secret.signedUrl}})),(0,a._)((0,o._)({},e),{getRepl:(0,a._)((0,o._)({},e.getRepl),{sharedSecretLinks:s})})})}}})),1)[0],D=(0,l._)((0,d.useState)(eV.SECRETS),2),R=D[0],I=D[1],F=(0,l._)((0,d.useState)(new Map),2),T=F[0],P=F[1],L=(0,l._)((0,d.useState)(!1),2),U=L[0],N=L[1],O=(0,g.A)(),B=(0,Y.Z)("editors-have-secret-access-warning"),H=(0,f.d3)({variables:{replId:A}}),z=H.data,W=H.loading,V=H.error,j=(null==z?void 0:z.getRepl.__typename)==="Repl"?z.getRepl:void 0,Z=null==j?void 0:j.authorizations.editSecrets,q=(0,f.bM)({variables:{replId:A}}),K=q.data,J=q.loading,Q=(0,f.m1)({fetchPolicy:"cache-and-network",ssr:!1}).data,X=(0,d.useMemo)(function(){if((null==K?void 0:K.getRepl.__typename)==="Repl"&&K.getRepl.sharedSecretLinks)return K.getRepl.sharedSecretLinks},[K]),ee=(0,d.useMemo)(function(){var e;return(null==Q||null==(e=Q.currentUser)?void 0:e.secrets.__typename)==="SharedSecretConnection"?Q.currentUser.secrets.items:[]},[Q]),en=(0,d.useMemo)(function(){return new Set((0,s._)(T.keys()).concat((0,s._)((null==X?void 0:X.map(function(e){return e.alias}))||[])))},[T,X]),et=(0,d.useMemo)(function(){return ee.map(function(e){return{id:e.id,value:e.value||""}})},[ee]);(0,d.useEffect)(function(){(0,y.xm)(y.AZ.ENV_EDITOR_USED,{action:"opened",tab:R===eV.ACCOUNT_SECRETS?"account":"repl"})},[R]),(0,d.useEffect)(function(){var e=x.watch(function(e){P(e)});return function(){e()}},[x,P]);var er=(t=(0,r._)(function(e){return(0,c.YH)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,_({variables:{input:{resourceId:A,resourceType:p.U9.Repl,secrets:e.map(function(e){return{secretId:e.id,alias:e.name}})}}})];case 1:return n.sent(),O.showConfirm("Secrets linked to this App"),I(eV.SECRETS),(0,y.u4)(y.AZ.SHARED_SECRETS_USED,{ownerType:"account",action:"link",source:"secrets-pane",count:e.length,keys:e.map(function(e){return e.name})}),[3,3];case 2:return n.sent(),O.showError("Failed to link secrets"),[3,3];case 3:return[2]}})}),function(e){return t.apply(this,arguments)});return!T||W||J||B.isLoading?(0,u.Y)(E.S,{css:eI,children:(0,u.Y)(e_.A,{size:24})}):(0,u.FD)(E.S,{css:eT.root,children:[(0,u.FD)(E.S,{css:eT.header,row:!0,gap:8,align:"center",children:[(0,u.Y)(eb.tU,{selectedIndex:R,onSelectionChange:function(e){return I(e)},css:eT.tabs,children:(0,u.FD)(eb.wb,{withDividers:!1,withUnderline:!1,children:[(0,u.FD)(eb.oz,{children:["App ",(0,u.Y)("span",{css:eT.tabExtraText,children:"Secrets"})]},eV.SECRETS),(null==j?void 0:j.isOwner)?(0,u.FD)(eb.oz,{children:["Account ",(0,u.Y)("span",{css:eT.tabExtraText,children:"Secrets"})]},eV.ACCOUNT_SECRETS):null]})}),(0,u.FD)(E.S,{css:eT.headerButtons,row:!0,children:[(0,u.Y)(em.v,{iconLeft:(0,u.Y)(ex.A,{}),href:m.ik.SECRETS,size:"small",text:"Docs",target:"_blank"}),R===eV.SECRETS?(0,u.Y)(G.m_,{isDisabled:null==Z?void 0:Z.isAuthorized,tooltip:null==Z?void 0:Z.message,children:(0,u.Y)(M.$n,{iconLeft:(0,u.Y)(ek.A,{}),text:(0,u.FD)(u.FK,{children:["New ",(0,u.Y)("span",{css:eT.tabExtraText,children:"Secret"})]}),colorway:"primary",size:"small",disabled:!(null==Z?void 0:Z.isAuthorized),onClick:function(){return N(!0)}})}):null,R===eV.ACCOUNT_SECRETS?(0,u.Y)(G.m_,{isDisabled:null==Z?void 0:Z.isAuthorized,tooltip:null==Z?void 0:Z.message,children:(0,u.Y)(em.v,{iconLeft:(0,u.Y)(eD.A,{}),text:(0,u.FD)(u.FK,{children:["Manage ",(0,u.Y)("span",{css:eT.tabExtraText,children:"Account"})]}),colorway:"primary",size:"small",href:"/account#account-secrets",target:"_blank"})}):null]})]}),(0,u.FD)(E.S,{css:eT.body,children:[R===eV.SECRETS?(0,u.Y)(eG,{getRunState:w,performPaneOperation:b,showAddSecret:U,setShowAddSecret:N,secrets:T,dismissibleElement:B,editAuthorization:Z,error:V,linkedSecrets:X,userSecrets:et,onUpdateLink:(i=(0,r._)(function(e,n){return(0,c.YH)(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,k({variables:{input:{id:e,resourceId:A,resourceType:p.U9.Repl,alias:n}}})];case 1:return t.sent(),O.showConfirm("Secret link updated"),[3,3];case 2:return t.sent(),O.showError("Failed to update secret link"),[3,3];case 3:return[2]}})}),function(e,n){return i.apply(this,arguments)}),onUnlink:(h=(0,r._)(function(e){return(0,c.YH)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,C({variables:{input:{resourceId:A,resourceType:p.U9.Repl,ids:[e]}}})];case 1:return n.sent(),O.showConfirm("Secret unlinked"),[3,3];case 2:return n.sent(),O.showError("Failed to unlink secret"),[3,3];case 3:return[2]}})}),function(e){return h.apply(this,arguments)})}):null,R===eV.ACCOUNT_SECRETS?(0,u.Y)($,{secrets:ee,actionText:"Link to this App",helpText:"Linked secrets will stay in sync with your Account Secrets.",existingKeys:en,onSelectSecrets:er,linkedSecrets:X}):null]})]})}},75501:(e,n,t)=>{"use strict";t.d(n,{C:()=>p,j:()=>c});var r=t(88263),i=t(14962),o=t(64583),a=t(48521),l=t(76126),s=t(10429),c=function(e){return e.Welcome="Welcome",e.Editor="Editor",e.Examples="Examples",e.Run="Run",e.Output="Output",e.Sidepane="Sidepane",e.Share="Share",e}({}),u=function(e){return"/public/videos/workspace-onboarding/".concat(e,".mp4")},d=(0,o.x)({welcome:[a.wp.maxWidth(400)],tooltipContainer:[a.wp.width("100%"),a.wp.center,a.wp.position.relative],textContainer:[a.wp.colWithGap(8),a.wp.width("100%"),a.wp.py(8)]}),p={id:"workspace-desktop-new-user-tour",steps:[{id:"Welcome",isModal:!0,title:"Welcome to the Workspace",content:function(){return(0,r.Y)(s.S,{"data-cy":"workspace-tour-welcome",css:d.welcome,children:(0,r.FD)(l.EY,{children:["The Workspace is where you create projects on Replit. These are called"," ",(0,r.Y)("strong",{children:"Apps."}),(0,r.Y)("br",{}),"Let's explore around!"]})})}},{id:"Editor",title:"Code Editor",content:function(){return(0,r.FD)(s.S,{css:d.tooltipContainer,children:[(0,r.Y)(i.A,{src:u("editor"),autoPlay:!0,loop:!0}),(0,r.Y)(s.S,{css:d.textContainer,children:(0,r.Y)(l.EY,{children:"This is where you write code. The editor helps you by giving you suggestions and coloring your code."})})]})}},{id:"Examples",title:"Examples",content:"Click on one of these examples to insert into your editor",autoSkipIfNoTarget:!0},{id:"Run",title:"Run Button",content:function(){return(0,r.FD)(s.S,{css:d.tooltipContainer,children:[(0,r.Y)(i.A,{src:u("run-button"),autoPlay:!0,loop:!0}),(0,r.Y)(s.S,{css:d.textContainer,children:(0,r.Y)(l.EY,{children:"Tap the Run button to run your code and see its output."})})]})},advanceOnTargetClick:!0},{id:"Output",title:"Output",content:function(){return(0,r.FD)(s.S,{css:d.tooltipContainer,children:[(0,r.Y)(i.A,{src:u("output"),autoPlay:!0,loop:!0}),(0,r.Y)(s.S,{css:d.textContainer,children:(0,r.Y)(l.EY,{children:"This is where your run output appears. This can be text, websites, games, and more depending on the template youre using."})})]})}},{id:"Sidepane",title:"Sidebar",content:function(){return(0,r.FD)(s.S,{css:d.tooltipContainer,children:[(0,r.Y)(i.A,{src:u("sidebar"),autoPlay:!0,loop:!0}),(0,r.FD)(s.S,{css:d.textContainer,children:[(0,r.FD)(l.EY,{children:[(0,r.Y)("strong",{children:"Files"})," is where all of your Apps code is."]}),(0,r.FD)(l.EY,{children:[(0,r.Y)("strong",{children:"Tools"})," is where Packages, Debugger, Chat, Git, and more can be found."]}),(0,r.Y)(l.EY,{children:"You can drag and drop any file or tool. All tools open as tabs instead of opening in the sidebar."})]})]})}},{id:"Share",title:"Invite & Collaborate",content:function(){return(0,r.FD)(s.S,{css:d.tooltipContainer,children:[(0,r.Y)(i.A,{src:u("invite-multiplayer"),autoPlay:!0,loop:!0}),(0,r.Y)(s.S,{css:d.textContainer,children:(0,r.Y)(l.EY,{children:"Invite others to your App to collaborate and work together at the same time."})})]})}}]}},75549:(e,n,t)=>{"use strict";t.d(n,{A:()=>d,C:()=>m});var r=t(29935),i=t(17844),o=t(12694),a=t(82643);function l(){return(l=(0,r._)(function(e){return(0,a.YH)(this,function(n){switch(n.label){case 0:return[4,new Promise(function(n){return setTimeout(function(){return n()},e)})];case 1:return n.sent(),[2]}})})).apply(this,arguments)}var s=t(83735),c=t(65600),u=new RegExp(/(file:\/\/)?\/home\/runner\/[^/]+\/(.*)/);function d(e,n,t,r){return p.apply(this,arguments)}function p(){return(p=(0,r._)(function(e,n,t,i){var l,u,d;return(0,a.YH)(this,function(p){switch(p.label){case 0:return u=(l=(0,o._)((0,c.z)(e-1,!1,n),2))[0],d=l[1]+1,[4,m(u,(0,r._)(function(){var e;return(0,a.YH)(this,function(n){switch(n.label){case 0:return[4,i()];case 1:return[2,null==(e=n.sent())?void 0:e.files]}})}))];case 1:return[2,p.sent().map(function(e){var r=e.from,i=e.to,o=e.file,a=e.line,l=e.col;return{range:(0,c.W)(d,r,i,n),text:o,activate:function(e,n){(0,s.T$)(e)&&t({path:n,line:a,col:l})}}})]}})})).apply(this,arguments)}var f=/[a-zA-Z0-9_\-.[\]$@()]+/,h='", line ';function m(e,n){return g.apply(this,arguments)}function g(){return(g=(0,r._)(function(e,n){var t,r,o,s,c,d,p,m,g;return(0,a.YH)(this,function(a){switch(a.label){case 0:return[4,Promise.race([n(),(function(e){return l.apply(this,arguments)})(5e3).then(function(){return[]})])];case 1:if(!(t=a.sent())||0===t.length)return[2,[]];for(r=[],o=0,s=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e[o+n]},c=function(){var n=e[o];return o++,n},d=function(){var n=o;c();for(var t="";/\d/.test(s());)t+=c();if(0===t.length)return o=n,null;if(":"!==s())return{line:parseInt(t,10),col:0};c();for(var r="";o<e.length&&/\d/.test(s());)r+=c();return 0===r.length?(o--,{line:parseInt(t,10),col:0}):{line:parseInt(t,10),col:parseInt(r,10)}},p=function(){for(var n=o,t=0;t<h.length;t++)c();for(var r="";o<e.length&&/\d/.test(s());)r+=c();return 0===r.length?(o=n,null):{line:parseInt(r,10),col:0}},m=function(){var n=o,r="";for("."===s()&&"/"===s(1)&&(r+=c(),r+=c()),("("===s()||"["===s())&&c();o<e.length;){var a=s();if(f.test(a))r+=c();else if("/"===a){if("/"===r[r.length-1])break;r+=c()}else break}var l={line:1,col:0};if(":"===s()){var m=d();m&&(l=m)}else if(e.substring(o,o+h.length)===h){var g=p();g&&(l=g,n--)}(r.startsWith("a/")||r.startsWith("b/"))&&(e.indexOf("diff --git ")>=0||e.indexOf("--- a/")>=0||e.indexOf("+++ b/")>=0)&&t.indexOf(r.substring(2))>=0&&(r=r.substring(2),n+=2);var v=r.replace(u,"$2").replace(/^\.?\//,"").trim();return v&&t.find(function(e){return e===v||e.substring(e.lastIndexOf("/")+1)===v})?(0,i._)({file:v,from:n,to:o},l):null};o<e.length;)(g=m())?r.push(g):c();return[2,r]}})})).apply(this,arguments)}},75802:(e,n,t)=>{"use strict";t.d(n,{AI:()=>u,Ou:()=>p,h:()=>c,ob:()=>d,rF:()=>l});var r=t(21462),i=t(69338),o=t(50140),a=t(83170),l=(0,r.createContext)(null);function s(){var e=(0,r.useContext)(l);if(!e)throw Error("Expected store in context");return e}function c(e){return(0,i.md)(e,{store:s()})}function u(e){return(0,a.k)(e,s())}var d=function(e){return(0,i.Xr)(e,{store:s()})};function p(e){return(0,o.yF)((0,r.useCallback)(function(n){return n(e)},[e]),{store:s()})}},75862:(e,n,t)=>{"use strict";t.d(n,{L:()=>h});var r=t(17844),i=t(12584),o=t(41114),a=t(86997);function l(){var e=(0,i._)(["\n  fragment AssistantAuthorizations on OrgAuthorizations {\n    basicAssistant: useAiAssistant(mode: basic) {\n      __typename\n      isAuthorized\n      message\n      code\n    }\n    advancedAssistant: useAiAssistant(mode: advanced) {\n      __typename\n      isAuthorized\n      message\n      code\n    }\n  }\n"]);return l=function(){return e},e}function s(){var e=(0,i._)(["\n  query GetAssistantReplAuthorizations($orgId: String) {\n    currentUser {\n      id\n      personalOrgAuthorizations {\n        ... on OrgAuthorizations {\n          ...AssistantAuthorizations\n        }\n        ... on Error {\n          message\n        }\n      }\n      org(orgId: $orgId) {\n        ... on Org {\n          id\n          authorizations {\n            ... on OrgAuthorizations {\n              ...AssistantAuthorizations\n            }\n          }\n        }\n        ... on Error {\n          message\n        }\n      }\n    }\n  }\n  ","\n"]);return s=function(){return e},e}var c={},u=(0,o.J1)(l()),d=(0,o.J1)(s(),u),p=t(5793),f=t(31062);function h(){var e,n,t,i,o=(0,f.A)(),l=(0,p.R)(o),s=l.orgId,u=l.loading,h=l.hasError,m=(e={variables:{orgId:s}},n=(0,r._)({},c,e),a.I(d,n)),g=m.data,v=m.loading,w=m.error,y=m.refetch;return u||h||v||w?{refetch:y,loading:u||v}:void 0===s?{authorizations:(null==g||null==(i=g.currentUser)?void 0:i.personalOrgAuthorizations.__typename)==="OrgAuthorizations"?g.currentUser.personalOrgAuthorizations:void 0,refetch:y,loading:!1}:{authorizations:(null==g||null==(t=g.currentUser)?void 0:t.org.__typename)==="Org"?g.currentUser.org.authorizations:void 0,refetch:y,loading:!1}}},76136:(e,n,t)=>{"use strict";t.d(n,{$:()=>x});var r=t(46434),i=t(29935),o=t(12694),a=t(82643),l=t(88263),s=t(21462),c=t(17844),u=t(12584),d=t(41114),p=t(86997);function f(){var e=(0,u._)(["\n  query CurrentUserGithubToken {\n    currentUser {\n      id\n      gitHubInfo {\n        accessToken\n      }\n    }\n  }\n"]);return f=function(){return e},e}var h={},m=(0,d.J1)(f()),g=t(53231),v=t(74093),w=t(34834),y=t(46603),b=t(49150),S=t(76126),Y=t(10429),A=t(18870);function x(){var e,n,t=(0,w.A)().replspaceApi,u=(0,o._)((0,s.useState)(null),2),d=u[0],f=u[1],x=(0,o._)((0,s.useState)(!1),2),C=x[0],_=x[1],k=(e=(0,c._)({},h,void 0),p.I(m,e)).data,D=(null==k?void 0:k.currentUser)||void 0;return(0,s.useEffect)(function(){return t.onConfirmSendToken(function(e){e&&(0,g.u4)(g.AZ.MODAL_VIEWED,{modalName:"git_token_modal"}),f(function(){return e})})},[t]),(0,v.b)((n=(0,i._)(function(e,n){var t,i,o,l,s,c,u,d,p,h,m,v;return(0,a.YH)(this,function(a){switch(a.label){case 0:t=n.session,i=n.signal,l=(o=e.replspaceApi.init.stream({session:t.from},{signal:i})).reqWritable,s=o.resReadable,c=!1,u=!1,a.label=1;case 1:a.trys.push([1,6,7,12]),p=function(){var e=m.value;if(e.ok&&"getGithubToken"===e.payload.$kind){var n,t,r=e.payload.nonce,i=null!=(t=null==D||null==(n=D.gitHubInfo)?void 0:n.accessToken)?t:void 0;if(!i)return l.write({$kind:"githubToken",nonce:r}),"continue";if(C)return l.write({$kind:"githubToken",token:i,nonce:r}),"continue";(0,g.u4)(g.AZ.MODAL_VIEWED,{modalName:"git_token_modal"}),f(function(){return function(e){if(!e){f(null),l.write({$kind:"githubToken",nonce:r});return}l.write({$kind:"githubToken",token:i,nonce:r}),f(null),_(!0)}})}},h=(0,r._)(s),a.label=2;case 2:return[4,h.next()];case 3:if(!(c=!(m=a.sent()).done))return[3,5];p(),a.label=4;case 4:return c=!1,[3,2];case 5:return[3,12];case 6:return v=a.sent(),u=!0,d=v,[3,12];case 7:if(a.trys.push([7,,10,11]),!(c&&null!=h.return))return[3,9];return[4,h.return()];case 8:a.sent(),a.label=9;case 9:return[3,11];case 10:if(u)throw d;return[7];case 11:return[7];case 12:return[2]}})}),function(e,t){return n.apply(this,arguments)}),[D,C]),(0,l.Y)(b.a,{isOpen:"function"==typeof d,onRequestClose:function(){null==d||d(!1),(0,g.u4)(g.AZ.GIT_TOKEN_MODAL_ACCEPTED,{response:"close"}),f(null)},children:(0,l.FD)(Y.S,{gap:16,children:[(0,l.Y)(S.Y9,{variant:"headerDefault",level:3,children:"Pass GitHub Credentials"}),(0,l.Y)(S.EY,{children:"It looks like you're trying to connect to your GitHub repository through the shell. Pass your token to the shell?"}),(0,l.Y)(S.EY,{children:"If you did not initiate a git command, you should deny this."}),(0,l.FD)(Y.S,{justify:"end",row:!0,gap:16,children:[(0,l.Y)(y.$n,{onClick:function(){null==d||d(!1),(0,g.u4)(g.AZ.GIT_TOKEN_MODAL_ACCEPTED,{response:"deny"}),f(null)},text:"Deny"}),(0,l.Y)(y.$n,{onClick:function(){null==d||d(!0),(0,g.u4)(g.AZ.GIT_TOKEN_MODAL_ACCEPTED,{response:"confirm"}),f(null)},iconLeft:(0,l.Y)(A.A,{}),text:"Confirm for this session",colorway:"primary"})]})]})})}},76418:(e,n,t)=>{"use strict";t.d(n,{A:()=>g,M:()=>w});var r=t(17844),i=t(17459),o=t(88263),a=t(83150),l=t(64583),s=t(48521),c=t(46603),u=t(33220),d=t(36112),p=t(76126),f=t(10429),h=t(84331),m=(0,l.x)({code:[s.wp.font.code,s.wp.flex.grow(1)],surface:[s.wp.borderRadius(8),s.wp.p(8),s.wp.flex.row,s.wp.rowWithGap(8),s.wp.align.center,s.wp.width("100%"),s.wp.overflowX("auto")]});function g(e){var n=w(e.filePath,e.keyName);if(!n)return null;var t=n.import,i=n.access;return(0,o.FD)(f.S,{gap:8,children:[t?(0,o.Y)(v,(0,r._)({code:t},e)):null,(0,o.Y)(v,(0,r._)({code:i},e))]})}function v(e){var n=e.code,t=e.onInsert,r=(0,i._)(e,["code","onInsert"]);return(0,o.FD)(d.ui,{elevated:r.elevated,css:m.surface,children:[(0,o.Y)(u.r,{textToCopy:n}),(0,o.Y)(p.EY,{variant:"small",css:m.code,multiline:!1,children:n}),t?(0,o.Y)(c.$n,{variant:"outlined",size:"small",onClick:function(){return t(n)},text:"Insert",iconRight:(0,o.Y)(h.A,{})}):null]})}function w(e,n){if(!e)return null;switch((0,a.an)(e)){case"js":case"ts":case"jsx":case"tsx":return{import:null,access:"const mySecret = process.env['".concat(n,"']")};case"py":return{import:"import os",access:"my_secret = os.environ['".concat(n,"']")};case"go":return{import:'import "os"',access:'mySecret := os.Getenv("'.concat(n,'")')};case"java":case"scala":return{import:null,access:'System.getenv("'.concat(n,'")')};case"rb":return{import:null,access:'ENV["'.concat(n,'"]')};case"c":case"cpp":return{import:"#include <stdlib.h>",access:'char* mySecret = getenv("'.concat(n,'")')};case"cs":return{import:"using System;",access:'string mySecret = System.Environment.GetEnvironmentVariable("'.concat(n,'");')};case"sh":return{import:null,access:'"$'.concat(n,'"')};default:return null}}},76686:(e,n,t)=>{"use strict";t.d(n,{A:()=>s});var r=t(12694),i=t(21462),o=t(34834),a=t(30736),l=t(41106);function s(e){var n=(0,r._)((0,i.useState)(!1),2),t=n[0],s=n[1],c=function(e){var n,t,l,s,c=(0,a.A)(),u=(n=(0,o.A)().container,l=(t=(0,r._)((0,i.useState)("/home/runner"),2))[0],s=t[1],(0,i.useEffect)(function(){n.exec("pwd").then(function(e){var n;e.output&&s((null==(n=e.output)?void 0:n.replace("\n",""))||"")})},[n]),l);if(!c)return"".concat(e,"://vscode-remote/ssh-remote");var d=c.sshUser,p=c.sshHostname,f=c.sshPort,h="".concat(e,"://vscode-remote/ssh-remote+").concat(d,"@").concat(p,":").concat(f).concat(u);try{return window.encodeURI(h)}catch(e){return h}}(e),u=(0,l.A)("ssh","workspace-ssh-connect-to-vscode-config-tour"),d=u.register;return(0,i.useEffect)(function(){d()},[d]),{openEditor:(0,i.useCallback)(function(){if(u.shouldDisplay)return void s(!0);window.location.href=c},[u.shouldDisplay,c]),onConfirmConfig:(0,i.useCallback)(function(){s(!1),u.dismiss(),window.location.href=c},[u,c]),isConfigModalOpen:t,closeConfigModal:(0,i.useCallback)(function(){s(!1)},[])}}},76688:e=>{e.exports={root:"SecretsRequested_root__3jXbJ",requestedSecretsList:"SecretsRequested_requestedSecretsList__NvRqA",requestedSecretsListItem:"SecretsRequested_requestedSecretsListItem__bL0vb",seeAllButton:"SecretsRequested_seeAllButton__cqzLa"}},77140:(e,n,t)=>{"use strict";t.d(n,{HT:()=>g,TO:()=>w,px:()=>h,vz:()=>f});var r=t(17844),i=t(12584),o=t(41114),a=t(86997);function l(){var e=(0,i._)(["\n  fragment DeploymentsDeployOptionsDeployment on HostingDeployment {\n    id\n    replitAppSubdomain\n    ignoredSecrets\n    timeCreated\n    currentBuild {\n      timeCreated\n      id\n      provider\n      envVars {\n        name\n        value\n      }\n      machineJob {\n        timezone\n        crontab\n        timeoutSeconds\n        failureNotifications\n      }\n      isPrivate\n    }\n  }\n"]);return l=function(){return e},e}function s(){var e=(0,i._)(["\n  fragment DeploymentsDeployOptionsAuthzRepl on Repl {\n    id\n    authorizations {\n      editDeploymentSecrets {\n        isAuthorized\n        message\n      }\n      editSecrets {\n        isAuthorized\n        message\n      }\n    }\n  }\n"]);return s=function(){return e},e}function c(){var e=(0,i._)(["\n  mutation DeployOptionsToggleSecretSyncing($input: ToggleSyncingSecretInput!) {\n    toggleSyncingSecret(input: $input) {\n      __typename\n      ... on HostingDeployment {\n        id\n        ignoredSecrets\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n"]);return c=function(){return e},e}function u(){var e=(0,i._)(["\n  query DeploymentsDeployOptions($id: String!) {\n    hostingDeployment(id: $id) {\n      ... on HostingDeployment {\n        id\n        ...DeploymentsDeployOptionsDeployment\n      }\n    }\n  }\n  ","\n"]);return u=function(){return e},e}function d(){var e=(0,i._)(["\n  query DeploymentsDeployOptionsAuthz($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        ...DeploymentsDeployOptionsAuthzRepl\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return d=function(){return e},e}var p={},f=(0,o.J1)(l()),h=(0,o.J1)(s()),m=(c(),(0,o.J1)(u(),f));function g(e){var n=(0,r._)({},p,e);return a.I(m,n)}var v=(0,o.J1)(d(),h);function w(e){var n=(0,r._)({},p,e);return a.I(v,n)}},77141:(e,n,t)=>{"use strict";t.d(n,{mb:()=>g,dL:()=>m,cL:()=>v});var r=t(12584),i=t(41114),o=t(56367),a=t(66112);function l(){var e=(0,r._)(["\n  fragment PageTitleRepl on Repl {\n    id\n    title\n    project {\n      id\n      title\n    }\n  }\n"]);return l=function(){return e},e}var s=(0,i.J1)(l()),c=t(72659),u=t(72479),d=t(7102);function p(){var e=(0,r._)(['\n  fragment ReplEnvironmentDesktopCurrentUser on CurrentUser {\n    id\n    image\n    email\n    isAdmin: hasRole(role: ADMIN)\n    ...CrosisContextCurrentUser\n    workspacePreferences\n    ...ReplEnvironmentHeaderLeftCurrentUser\n    ...ReplEnvironmentTourCurrentUser\n    ...LayoutHeaderAvatarDropdownCurrentUser\n    canMigrateRepls: gate(feature: "migrate2nix-killswitch")\n  }\n  ',"\n  ","\n  ","\n  ","\n"]);return p=function(){return e},e}function f(){var e=(0,r._)(["\n  fragment ReplAiAuthorizations on ReplAuthorizations {\n    useBasicChat: useAiChat(model: basic) {\n      isAuthorized\n      code\n      message\n    }\n    useAdvancedChat: useAiChat(model: advanced) {\n      isAuthorized\n      code\n      message\n    }\n  }\n"]);return f=function(){return e},e}function h(){var e=(0,r._)(["\n  fragment ReplEnvironmentDesktopRepl on Repl {\n    id\n    title\n    layoutState\n    description\n    multiplayers {\n      id\n    }\n    origin {\n      id\n    }\n    config {\n      isVnc\n      isServer\n      isExtension\n      isAgentRepl\n      isInPlanningPhase\n    }\n    lesson {\n      id\n    }\n    rootOriginReplUrl\n    source {\n      release {\n        id\n        repl {\n          id\n        }\n      }\n    }\n    ...CrosisContextRepl\n    ...ReplEnvironmentHeaderLeftRepl\n    ...PageTitleRepl\n    authorizations {\n      ...ReplAiAuthorizations\n    }\n    ...ConvertedToProjectModalRepl\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return h=function(){return e},e}var m=(0,i.J1)(p(),a.N,u.n,d.f,o.yL),g=(0,i.J1)(f()),v=(0,i.J1)(h(),a.c,u.c,s,g,c.LM)},77163:(e,n,t)=>{"use strict";t.d(n,{G:()=>k,Y:()=>D});var r=t(29935),i=t(12694),o=t(82643),a=t(88263),l=t(90629),s=t(62341),c=t(92985),u=t(24365),d=t(18895),p=t(45263),f=t(64583),h=t(48521),m=t(33999),g=t(76126),v=t(10429),w=t(4291),y=t(65283),b=t(82842),S=t(69258),Y=(0,f.x)({root:[h.wp.flex.growAndShrink(1),h.wp.p(8)],singleLine:[{whiteSpace:"nowrap",fontFamily:p.LU.fontFamilyCode},h.wp.truncate,h.wp.color.foregroundDimmest]});function A(e){var n=e.path,t=e.line;return(0,a.FD)(v.S,{css:Y.root,gap:4,align:"start",children:[(0,a.FD)(v.S,{row:!0,gap:4,align:"center",children:[(0,a.Y)(m.A,{path:n,size:12}),(0,a.FD)(g.EY,{variant:"small",color:"dimmest",multiline:!1,children:[n.replace(/^\.\//,""),":",t.lineNumber]})]}),(0,a.Y)(v.S,{css:Y.singleLine,children:(0,a.Y)(y.eK,{source:t.content,matches:t.matches})})]})}function x(){return(0,a.FD)(v.S,{px:8,row:!0,gap:8,align:"center",children:[(0,a.Y)(S.A,{}),(0,a.Y)(g.EY,{color:"dimmest",multiline:!1,children:"Something went wrong searching your App's contents. Please try again."})]})}function C(){return(0,a.FD)(v.S,{row:!0,gap:8,p:8,align:"center",children:[(0,a.Y)(S.A,{}),(0,a.Y)(g.EY,{color:"dimmest",multiline:!1,children:"Displaying only part of the results, try being more specific with your search."})]})}function _(){return(0,a.Y)(v.S,{row:!0,gap:8,p:8,align:"center",children:(0,a.Y)(g.EY,{color:"dimmest",multiline:!1,children:"Nothing came up searching your App's content."})})}var k=(0,u.FM)({cmdOrCtrl:!0,shift:!0,key:"f"});function D(e){var n,t,u=(0,d.v)({container:e.container});return(0,c.gu)({type:"context",description:"Search through your files",label:"Search",icon:(0,a.Y)(b.A,{}),keyboardShortcut:e.keyboardShortcut?k:void 0},{match:(0,c.u4)({defaultScore:w.q.searchFileContents}),commands:(n=(0,r._)(function(n){var r,c,d,p,f,h,g,y,b,Y,k,D;return(0,o.YH)(this,function(o){switch(o.label){case 0:if(!n.searchQuery||!n.active&&e.activeOnly)return[2,[]];return t=r=Math.random(),[4,u({query:n.searchQuery})];case 1:if(d=(c=o.sent()).results,p=c.error,f=c.isPartialResult,r!==t)return[2,[]];if(null!==p){if(!n.active)return[2,[]];return l.Cp(Error("Search file contents returned an error"),{extra:{message:p}}),[2,[{data:{type:"error",label:"error",icon:(0,a.Y)(S.A,{})},match:function(){return{score:1,render:{content:(0,a.Y)(x,{})}}}}]]}h=[],g=!0,y=!1,b=void 0;try{for(Y=function(){var t=(0,i._)(D.value,2),r=t[0];t[1].forEach(function(t){var i=t.matches[0].column;h.push({match:function(){var e=(0,s.w2)(n.searchQuery,t.content,{filterLowMatchScores:!0});return{score:Math.floor(((null==e?void 0:e.score)||1)*w.B.fileContentsSearch),render:{height:60,content:(0,a.Y)(A,{path:r,line:t})}}},data:{type:"action",label:r,icon:(0,a.Y)(m.A,{path:r}),key:[r,t.lineNumber,i].join(":"),run:function(){e.openFile({path:r,line:t.lineNumber,col:i})}}})})},k=Object.entries(d)[Symbol.iterator]();!(g=(D=k.next()).done);g=!0)Y()}catch(e){y=!0,b=e}finally{try{g||null==k.return||k.return()}finally{if(y)throw b}}if(0===h.length&&n.active)return[2,[{data:{type:"output",label:"",icon:(0,a.Y)(v.S,{})},match:function(){return{score:1,render:{content:(0,a.Y)(_,{})}}}}]];if(n.active)if(0===h.length)return[2,[{data:{type:"output",label:"",icon:(0,a.Y)(v.S,{})},match:function(){return{score:1,render:{content:(0,a.Y)(_,{})}}}}]];else f&&h.push({data:{type:"error",label:"error",icon:(0,a.Y)(S.A,{})},match:function(){return{score:1/0,render:{content:(0,a.Y)(C,{})}}}});return[2,h]}})}),function(e){return n.apply(this,arguments)})})}},77247:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(88263),a=t(71117);function l(e){return(0,o.FD)(a.Ay,(0,i._)((0,r._)({},e),{children:[(0,o.Y)("path",{d:"M12.56 10.72a.75.75 0 0 0-1.06 0L8 14.22a.75.75 0 1 0 1.06 1.06l2.22-2.22v5.19a.75.75 0 0 0 1.5 0v-5.19L15 15.28a.75.75 0 0 0 1.06-1.06l-3.5-3.5Z"}),(0,o.Y)("path",{fillRule:"evenodd",d:"M6 1.25A2.75 2.75 0 0 0 3.25 4v16A2.75 2.75 0 0 0 6 22.75h12A2.75 2.75 0 0 0 20.75 20V8a.75.75 0 0 0-.22-.53l-6-6a.75.75 0 0 0-.53-.22H6Zm-.884 1.866A1.25 1.25 0 0 1 6 2.75h7.25V8c0 .414.336.75.75.75h5.25V20A1.25 1.25 0 0 1 18 21.25H6A1.25 1.25 0 0 1 4.75 20V4c0-.332.132-.65.366-.884ZM18.19 7.25 14.75 3.81v3.44h3.44Z",clipRule:"evenodd"})]}))}},77306:(e,n,t)=>{"use strict";t.d(n,{P:()=>r,k:()=>i});var r=function(e){return e.Intro="intro",e.Deployment="deployment",e.DeploymentInProgress="deployment_in_progress",e.Analytics="analytics",e.Logs="logs",e.Settings="settings",e.Schedule="schedule",e.ResourceMonitoring="resource_monitoring",e.ReservedVMTierSelection="reserved_vm_tier_selection",e.AutoscaleMachineConfiguration="autoscale_machine_configuration",e}({}),i=function(e){return e.SendDeploymentLifecycleCommand="send_deployment_lifecycle_command",e.ChangeView="change_view",e.OpenPane="open_pane",e}({})},77449:(e,n,t)=>{"use strict";t.d(n,{J:()=>ek,g:()=>e_});var r=t(29935),i=t(82643),o=t(88263),a=t(21462),l=t(69338),s=t(17844),c=t(12584),u=t(41114),d=t(86997),p=t(97782);function f(){var e=(0,c._)(["\n  query AutoscaleMachineConfigurations {\n    hostingMachineConfigurations(input: { provider: cloud_run }) {\n      __typename\n      ... on HostingMachineConfigurationsResults {\n        results {\n          ...MachineConfiguration\n        }\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return f=function(){return e},e}var h={},m=(0,u.J1)(f(),p.yH),g=t(64513),v=t(49153),w=t(88734),y=t(28944),b=t(77306),S=t(83846),Y=t(12694),A=t(31538);let x=(0,a.forwardRef)(function(e,n){var t=(0,Y._)((0,l.fp)(A.NF),1)[0],r=(0,l.Xr)(A.b8),i=(0,a.useRef)(null),s=(0,a.useRef)(null);return(0,a.useImperativeHandle)(n,function(){return i.current}),t&&i.current&&(i.current.setAttribute("aria-valuemin",String(A.xP[0])),i.current.setAttribute("aria-valuemax",String(A.xP[A.xP.length-1])),i.current.setAttribute("aria-valuenow",String(t))),(0,a.useEffect)(function(){var e=function(){i.current&&(r(parseFloat(getComputedStyle(i.current).getPropertyValue("left"))),s.current=requestAnimationFrame(e))};return e(),function(){s.current&&cancelAnimationFrame(s.current)}},[r]),(0,a.useMemo)(function(){return(0,o.Y)("div",{ref:i,role:"slider",tabIndex:0,css:[A.sC,{left:"calc((100% - 16px) * var(--cpu-progress, 0))",transition:"left var(--cpu-transition-time, 100ms) cubic-bezier(0, 0, 0.2, 1)"}]})},[])});var C=t(41392),_=t(45263),k="min(var(--point), var(--position))",D="max(var(--point), var(--position))";let E=(0,a.forwardRef)(function(e,n){var t=(0,l.md)(A.C5),r=t.overage,i=t.point,s=(0,l.md)(A.Yb),c=(0,a.useRef)(null);return(0,a.useEffect)(function(){(0,C.U)(c,"--opacity",String(r))},[r]),(0,a.useEffect)(function(){(0,C.U)(c,"--point",String(100*i)+"%")},[i]),(0,a.useEffect)(function(){(0,C.U)(c,"--position",String(100*s)+"%")},[s]),(0,a.useMemo)(function(){return(0,o.FD)(o.FK,{children:[(0,o.Y)("div",{ref:n,"aria-hidden":!0,css:{position:"relative",top:"0",width:"100%",height:"16px",margin:"0",cursor:"pointer"}}),(0,o.Y)("div",{"aria-hidden":!0,css:{position:"absolute",top:"5px",left:"0",width:"100%",height:"6px",margin:"0",overflow:"hidden",pointerEvents:"none",backgroundColor:_.LU.interactiveBorder,borderRadius:"2px"},children:(0,o.Y)("div",{ref:c,"aria-hidden":!0,css:{"--opacity":0,"--point":0,"--position":0,backgroundImage:"\n                linear-gradient(\n                  to right, transparent ".concat(k,", \n                  ").concat(_.LU.interactiveBorderHover," ").concat(k,", \n                  ").concat(_.LU.interactiveBorderHover," ").concat(D,", \n                  transparent ").concat(D," \n                )"),opacity:"var(--opacity)",width:"100%",height:"100%"}})})]})},[n])});var R=t(64583),I=t(10429),F=(0,R.x)({container:{flexDirection:"row",justifyContent:"space-between",height:6,paddingLeft:8,paddingRight:8},mark:{width:1,backgroundColor:_.LU.outlineStronger}});function T(e){var n=e.list;return(0,o.Y)(I.S,{css:F.container,children:n.map(function(e){return(0,o.Y)(I.S,{css:F.mark},e)})})}var P=t(48521),L=P.kL.min(320),U=(0,R.x)({container:P.wp.colWithGap(4),label:[P.wp.flex.column,P.wp.pb(4),(0,S._)({},L,[P.wp.flex.row,P.wp.justify.spaceBetween,P.wp.pb(0)])],resource:P.wp.fontWeight.medium,cost:[P.wp.rowWithGap(1),P.wp.align.baseline]}),N=t(31258),O=t(76126),M=A.Rp;function B(e){var n=e.setAttrs,t=(0,Y._)((0,l.fp)(A.yh),2),r=t[0],i=t[1],s=(0,Y._)((0,a.useState)(!1),2),c=s[0],u=s[1],d=(0,a.useRef)(null),p=(0,a.useRef)(null),f=(0,a.useRef)(null),h=(0,a.useCallback)(function(e){n.setTransitionTime(e)},[n]),m=(0,a.useCallback)(function(e){n.setProgress(e)},[n]);return void 0===r||c||(m(r/M),h(A.tH.Normal)),(0,a.useEffect)(function(){if(void 0!==r&&p.current&&f.current&&!c){var e=p.current,n=f.current,t=function(t){if(0===t.button){u(!0),n.focus();var r=e.getBoundingClientRect(),o=n.getBoundingClientRect(),a=r.width,l=o.width,s=t.target===e?l/2:t.clientX-o.left,c=null,d=function(e){var n=Math.max(0,Math.min(1,(e-r.left-s)/(a-l)));n!==c&&(c=n,m(n),i(Math.round(n*M)))};d(t.clientX);var p=function(e){h(A.tH.None),d(e.clientX),e.preventDefault(),e.stopPropagation()},f=function(){window.removeEventListener("pointermove",p),window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",f),h(A.tH.Normal),u(!1)};window.addEventListener("pointermove",p),window.addEventListener("pointerup",f),window.addEventListener("pointercancel",f),t.preventDefault(),t.stopPropagation()}};return e.addEventListener("pointerdown",t),n.addEventListener("pointerdown",t),function(){e.removeEventListener("pointerdown",t),n.removeEventListener("pointerdown",t)}}},[r,c,i,m,h]),(0,a.useEffect)(function(){if(void 0!==r&&f.current&&!c){var e=f.current,n=function(e){if(void 0!==r&&A.DO.includes(e.key)){var n=Math.max(0,r-1),t=Math.min(M,r+1),o=null;switch(e.key){case"ArrowLeft":o=n;break;case"ArrowRight":o=t;break;case"Home":o=0;break;case"End":o=M}null!==o&&(i(o),e.preventDefault(),e.stopPropagation())}};return e.addEventListener("keydown",n),function(){e.removeEventListener("keydown",n)}}},[c,r,i]),(0,a.useMemo)(function(){return(0,o.FD)(I.S,{gap:8,children:[(0,o.FD)(I.S,{innerRef:d,css:A.uu,children:[(0,o.Y)(E,{ref:p}),(0,o.Y)(x,{ref:f})]}),(0,o.Y)(T,{list:A.xP})]})},[])}function H(e){var n=e.setAttrs,t=(0,Y._)((0,l.fp)(A.NF),1)[0],r=(0,Y._)((0,l.fp)(A.WM),1)[0],i=(0,l.Xr)(A.kR);return(0,a.useEffect)(function(){i()},[i,t]),(0,o.FD)(I.S,{css:U.container,children:[(0,o.FD)(I.S,{css:U.label,children:[(0,o.FD)(O.EY,{css:U.resource,multiline:!1,children:[t," vCPU",t>1?"s":""]}),(0,o.FD)(I.S,{css:U.cost,children:[(0,o.FD)(O.EY,{color:"dimmer",multiline:!1,children:[r," ",(0,N.A)("compute unit",r)]}),(0,o.Y)(O.EY,{color:"dimmest",variant:"small",multiline:!1,children:"/sec"})]})]}),(0,o.Y)(B,{setAttrs:n})]})}let z=(0,a.forwardRef)(function(e,n){var t=(0,Y._)((0,l.fp)(A.No),1)[0],r=(0,l.Xr)(A.TJ),i=(0,a.useRef)(null),s=(0,a.useRef)(null);return(0,a.useImperativeHandle)(n,function(){return i.current}),t&&i.current&&(i.current.setAttribute("aria-valuemin",String(A.T1[0])),i.current.setAttribute("aria-valuemax",String(A.T1[A.T1.length-1])),i.current.setAttribute("aria-valuenow",String(t))),(0,a.useEffect)(function(){var e=function(){i.current&&(r(parseFloat(getComputedStyle(i.current).getPropertyValue("left"))),s.current=requestAnimationFrame(e))};return e(),function(){s.current&&cancelAnimationFrame(s.current)}},[r]),(0,a.useMemo)(function(){return(0,o.Y)("div",{ref:i,role:"slider",tabIndex:0,"data-ram-thumb":!0,css:[A.sC,{left:"calc((100% - 16px) * var(--ram-progress, 0))",transition:"left var(--ram-transition-time, 100ms) cubic-bezier(0, 0, 0.2, 1)"}]})},[])});var W="min(var(--point), var(--position))",G="max(var(--point), var(--position))";let V=(0,a.forwardRef)(function(e,n){var t=(0,l.md)(A.G),r=t.overage,i=t.point,s=(0,l.md)(A.Sh),c=(0,a.useRef)(null);return(0,a.useEffect)(function(){(0,C.U)(c,"--opacity",String(r))},[r]),(0,a.useEffect)(function(){(0,C.U)(c,"--point",String(100*i)+"%")},[i]),(0,a.useEffect)(function(){(0,C.U)(c,"--position",String(100*s)+"%")},[s]),(0,a.useMemo)(function(){return(0,o.FD)(o.FK,{children:[(0,o.Y)("div",{ref:n,"aria-hidden":!0,css:{position:"relative",top:"0",width:"100%",height:"16px",margin:"0",cursor:"pointer"}}),(0,o.Y)("div",{"aria-hidden":!0,css:{position:"absolute",top:"5px",left:"0",width:"100%",height:"6px",margin:"0",overflow:"hidden",pointerEvents:"none",backgroundColor:_.LU.interactiveBorder,borderRadius:"2px"},children:(0,o.Y)("div",{ref:c,"aria-hidden":!0,css:{"--opacity":0,"--point":0,"--position":0,backgroundImage:"\n                linear-gradient(\n                  to right, transparent ".concat(W,", \n                  ").concat(_.LU.interactiveBorderHover," ").concat(W,", \n                  ").concat(_.LU.interactiveBorderHover," ").concat(G,", \n                  transparent ").concat(G," \n                )"),opacity:"var(--opacity)",width:"100%",height:"100%"}})})]})},[n])});var j=A.VW;function Z(e){var n=e.setAttrs,t=(0,Y._)((0,l.fp)(A.gb),2),r=t[0],i=t[1],s=(0,Y._)((0,a.useState)(!1),2),c=s[0],u=s[1],d=(0,a.useRef)(null),p=(0,a.useRef)(null),f=(0,a.useRef)(null),h=(0,a.useCallback)(function(e){n.setTransitionTime(e)},[n]),m=(0,a.useCallback)(function(e){n.setProgress(e)},[n]);return void 0===r||c||(m(r/j),h(A.tH.Normal)),(0,a.useEffect)(function(){if(void 0!==r&&p.current&&f.current&&!c){var e=p.current,n=f.current,t=function(t){if(0===t.button){u(!0),n.focus();var r=e.getBoundingClientRect(),o=n.getBoundingClientRect(),a=r.width,l=o.width,s=t.target===e?l/2:t.clientX-o.left,c=null,d=function(e){var n=Math.max(0,Math.min(1,(e-r.left-s)/(a-l)));n!==c&&(c=n,m(n),i(Math.round(n*j)))};d(t.clientX);var p=function(e){h(A.tH.None),d(e.clientX),e.preventDefault(),e.stopPropagation()},f=function(){window.removeEventListener("pointermove",p),window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",f),h(A.tH.Normal),u(!1)};window.addEventListener("pointermove",p),window.addEventListener("pointerup",f),window.addEventListener("pointercancel",f),t.preventDefault(),t.stopPropagation()}};return e.addEventListener("pointerdown",t),n.addEventListener("pointerdown",t),function(){e.removeEventListener("pointerdown",t),n.removeEventListener("pointerdown",t)}}},[r,c,i,m,h]),(0,a.useEffect)(function(){if(void 0!==r&&f.current&&!c){var e=f.current,n=function(e){if(void 0!==r&&A.DO.includes(e.key)){var n=Math.max(0,r-1),t=Math.min(j,r+1),o=null;switch(e.key){case"ArrowLeft":o=n;break;case"ArrowRight":o=t;break;case"Home":o=0;break;case"End":o=j}null!==o&&(i(o),e.preventDefault(),e.stopPropagation())}};return e.addEventListener("keydown",n),function(){e.removeEventListener("keydown",n)}}},[c,r,i]),(0,a.useMemo)(function(){return(0,o.FD)(I.S,{gap:8,children:[(0,o.FD)(I.S,{innerRef:d,css:A.uu,children:[(0,o.Y)(V,{ref:p}),(0,o.Y)(z,{ref:f})]}),(0,o.Y)(T,{list:A.T1})]})},[])}function q(e){var n=e.setAttrs,t=(0,Y._)((0,l.fp)(A.No),1)[0],r=(0,Y._)((0,l.fp)(A.mN),1)[0],i=(0,l.Xr)(A.k4);return(0,a.useEffect)(function(){i()},[i,t]),(0,o.FD)(I.S,{css:U.container,children:[(0,o.FD)(I.S,{css:U.label,children:[(0,o.FD)(O.EY,{css:U.resource,multiline:!1,children:[t," GiB RAM"]}),(0,o.FD)(I.S,{css:U.cost,children:[(0,o.FD)(O.EY,{color:"dimmer",multiline:!1,children:[r," ",(0,N.A)("compute unit",r)]}),(0,o.Y)(O.EY,{color:"dimmest",variant:"small",multiline:!1,children:"/sec"})]})]}),(0,o.Y)(Z,{setAttrs:n})]})}var K=t(93629),$=(0,R.x)({container:[P.wp.width("100%"),P.wp.position.absolute,P.wp.top(60),P.wp.bottom(21),P.wp.transition.snappy,P.wp.zIndex(1),(0,S._)({},P.kL.min(320),P.wp.top(34))],svg:[P.wp.width("100%"),P.wp.height("100%"),P.wp.overflow("visible")],overage:{"--opacity":0,opacity:"var(--opacity)",transition:"opacity 80ms ease-out"}});function J(){var e,n=(0,l.md)(A.NT),t=(0,a.useRef)(null),r=(0,a.useRef)(null),i=(0,a.useRef)((null==(e=r.current)?void 0:e.offsetWidth)||0),c=(0,l.md)(A.b8),u=(0,l.md)(A.TJ);(0,a.useEffect)(function(){r.current&&(i.current=r.current.offsetWidth)});var d={x1:c/(i.current-16)*100,x2:u/(i.current-16)*100,y1:0,y2:100,strokeWidth:3,vectorEffect:"non-scaling-stroke",shapeRendering:"crisp-edges"};return(0,a.useEffect)(function(){(0,C.U)(t,"--opacity",String(Math.pow(n,1/3)))},[n]),(0,o.Y)(I.S,{css:$.container,px:8,id:"rope",innerRef:r,children:(0,o.FD)("svg",{height:100,viewBox:"0 0 100 100",fill:"none",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",css:$.svg,children:[(0,o.Y)("line",(0,K._)((0,s._)({},d),{stroke:_.LU.outlineDimmer})),(0,o.Y)("line",(0,K._)((0,s._)({},d),{stroke:_.LU.outlineDefault,strokeDasharray:8})),(0,o.FD)("g",{ref:t,css:$.overage,children:[(0,o.Y)("line",(0,K._)((0,s._)({},d),{stroke:_.LU.accentPrimaryDefault})),(0,o.Y)("line",(0,K._)((0,s._)({},d),{stroke:_.LU.accentPrimaryStrongest,strokeDasharray:8}))]})]})})}var Q=t(38167),X=t(973),ee=t(46603),en=t(36112),et=t(59172),er=t(4983),ei=t(62362),eo=[P.wp.borderRadius(8)],ea=(0,R.x)({container:[eo],disabled:[eo,{opacity:.5,pointerEvents:"none"}],bottom:[P.wp.border({direction:"top",color:_.LU.outlineDimmer})],text:[P.wp.flex.growAndShrink(1)],edit:X.b.outlined,overviewLine:[P.wp.flex.column,(0,S._)({},P.kL.min(320),[P.wp.flex.row,P.wp.justify.spaceBetween])],overviewValue:[P.wp.fontWeight.medium],total:[P.wp.flex.shrink(1),P.wp.align.center],cost:[P.wp.flex.row,P.wp.align.baseline,{gap:1}],builder:[P.wp.position.relative,{"--cpu-transition-time":A.tH.Normal,"--cpu-progress":1,"--ram-transition-time":A.tH.Normal,"--ram-progress":1,"#rope":{opacity:0}," *":{transitionTimingFunction:"ease"},":hover, :focus-within":{" #rope":{opacity:1}}}]});function el(e){var n=e.machineConfiguration,t=e.disabled,r=e.toggleEditable,i=void 0===r||r,s=e.hasDeploymentRepricing,c=(0,a.useRef)(null),u=(0,Y._)((0,a.useState)(!i),2),d=u[0],p=u[1],f=(0,l.md)(A.NF),h=(0,l.md)(A.No),m=(0,l.md)(A.WM),g=(0,l.md)(A.mN),v=(0,l.md)(A.Je),w=(0,l.md)(A.GS),y=(0,l.Xr)(A.ZH),b=(0,l.Xr)(A.Yb),S=(0,l.Xr)(A.Sh),x=(0,l.Xr)(A.yh),k=(0,l.Xr)(A.gb);return(0,a.useEffect)(function(){y((0,Q.xC)({hasDeploymentRepricing:null!=s&&s}).autoscaleDeploymentCostDetails)},[y,s]),(0,a.useEffect)(function(){if(n){var e=A.xP.findIndex(function(e){return e.toString()===n.vcpu}),t=A.T1.findIndex(function(e){return e.toString()===n.memory});x(e),k(t)}},[n,x,k]),(0,o.FD)(en.ui,{elevated:!0,css:t?ea.disabled:ea.container,children:[(0,o.FD)(I.S,{p:16,gap:12,children:[(0,o.FD)(I.S,{row:!0,gap:8,children:[(0,o.FD)(I.S,{css:ea.text,gap:4,children:[(0,o.FD)(I.S,{row:!0,gap:4,align:"center",children:[(0,o.Y)(er.A,{}),(0,o.Y)(O.EY,{variant:"subheadDefault",multiline:!1,children:"Machine power"})]}),(0,o.Y)(O.EY,{multiline:!0,color:"dimmer",children:"The power level for each machine that spins up upon any request"})]}),i?(0,o.Y)(ee.$n,{text:d?"Done":"Edit",css:ea.edit,onClick:function(){return p(!d)}}):null]}),d?(0,o.FD)(o.FK,{children:[(0,o.FD)(I.S,{css:ea.builder,gap:12,innerRef:c,children:[(0,o.Y)(J,{}),(0,o.Y)(H,{setAttrs:{setTransitionTime:function(e){(0,C.U)(c,"--cpu-transition-time",e)},setProgress:function(e){(0,C.U)(c,"--cpu-progress",e.toString()),b(e)}}}),(0,o.Y)(q,{setAttrs:{setTransitionTime:function(e){(0,C.U)(c,"--ram-transition-time",e)},setProgress:function(e){(0,C.U)(c,"--ram-progress",e.toString()),S(e)}}})]}),(0,o.Y)(O.EY,{color:"dimmer",children:"Only some configurations are valid. When you change one slider, the other one will automatically adjust to remain valid."})]}):(0,o.FD)(I.S,{gap:8,children:[(0,o.FD)(I.S,{css:ea.overviewLine,children:[(0,o.FD)(O.EY,{css:ea.overviewValue,multiline:!1,children:[f," vCPU",f>1?"s":""]}),(0,o.FD)(I.S,{css:ea.cost,children:[(0,o.FD)(O.EY,{multiline:!1,color:"dimmer",children:[m," ",(0,N.A)("compute unit",m)]}),(0,o.Y)(O.EY,{variant:"small",color:"dimmest",multiline:!1,children:"/sec"})]})]}),(0,o.FD)(I.S,{css:ea.overviewLine,children:[(0,o.FD)(O.EY,{css:ea.overviewValue,multiline:!1,children:[h," GiB RAM"]}),(0,o.FD)(I.S,{css:ea.cost,children:[(0,o.FD)(O.EY,{multiline:!1,color:"dimmer",children:[g," ",(0,N.A)("compute unit",g)]}),(0,o.Y)(O.EY,{variant:"small",color:"dimmest",multiline:!1,children:"/sec"})]})]})]})]}),(0,o.Y)(I.S,{css:ea.bottom,p:16,children:(0,o.FD)(I.S,{css:ea.overviewLine,children:[(0,o.Y)(O.EY,{css:ea.overviewValue,multiline:!1,children:"Total per machine"}),(0,o.FD)(I.S,{css:ea.total,row:!0,gap:4,children:[(0,o.FD)(I.S,{css:ea.cost,children:[(0,o.FD)(O.EY,{multiline:!1,children:[w," ",(0,N.A)("compute unit",w)]}),(0,o.Y)(O.EY,{variant:"small",color:"dimmer",multiline:!1,children:"/sec"})]}),(0,o.Y)(et.m_,{tooltip:(0,o.FD)(I.S,{css:ea.cost,children:[(0,o.FD)(O.EY,{multiline:!1,children:["$",v.toFixed(6)]}),(0,o.Y)(O.EY,{variant:"small",color:"dimmest",multiline:!1,children:"/sec"})]}),children:(0,o.Y)(ei.A,{color:_.LU.foregroundDimmest})})]})]})})]})}var es=t(22305);let ec=(0,a.forwardRef)(function(e,n){var t=(0,Y._)((0,l.fp)(es.h0),1)[0],r=(0,a.useRef)(null);return(0,a.useImperativeHandle)(n,function(){return r.current}),t&&r.current&&(r.current.setAttribute("aria-valuemin",String(es.hK[0])),r.current.setAttribute("aria-valuemax",String(es.hK[es.hK.length-1])),r.current.setAttribute("aria-valuenow",String(t))),(0,a.useMemo)(function(){return(0,o.Y)("div",{ref:r,role:"slider",tabIndex:0,css:[es.sC,{left:"calc((100% - 16px) * var(--max-instances-progress, 0))",transition:"left var(--max-instances-transition-time, 100ms) ease-out"}]})},[])});var eu="min(var(--point), var(--position))",ed="max(var(--point), var(--position))";let ep=(0,a.forwardRef)(function(e,n){var t=(0,l.md)(es.sh),r=t.overage,i=t.point,s=(0,l.md)(es.o2),c=(0,a.useRef)(null);return(0,a.useEffect)(function(){(0,C.U)(c,"--opacity",String(r))},[r]),(0,a.useEffect)(function(){(0,C.U)(c,"--point",String(100*i)+"%")},[i]),(0,a.useEffect)(function(){(0,C.U)(c,"--position",String(100*s)+"%")},[s]),(0,a.useMemo)(function(){return(0,o.FD)(o.FK,{children:[(0,o.Y)("div",{ref:n,"aria-hidden":!0,css:{position:"relative",top:"0",width:"100%",height:"16px",margin:"0",cursor:"pointer"}}),(0,o.Y)("div",{"aria-hidden":!0,css:{position:"absolute",top:"5px",left:"0",width:"100%",height:"6px",margin:"0",overflow:"hidden",pointerEvents:"none",backgroundColor:_.LU.interactiveBorder,borderRadius:"2px"},children:(0,o.Y)("div",{ref:c,"aria-hidden":!0,css:{"--opacity":0,"--point":0,"--position":0,backgroundImage:"\n                linear-gradient(\n                  to right, transparent ".concat(eu,", \n                  ").concat(_.LU.interactiveBorderHover," ").concat(eu,", \n                  ").concat(_.LU.interactiveBorderHover," ").concat(ed,", \n                  transparent ").concat(ed," \n                )"),opacity:"var(--opacity)",width:"100%",height:"100%"}})})]})},[n])});var ef=es.i_;function eh(e){var n=e.setAttrs,t=(0,Y._)((0,l.fp)(es.Md),2),r=t[0],i=t[1],s=(0,Y._)((0,a.useState)(!1),2),c=s[0],u=s[1],d=(0,a.useRef)(null),p=(0,a.useRef)(null),f=(0,a.useRef)(null),h=(0,a.useCallback)(function(e){n.setTransitionTime(e)},[n]),m=(0,a.useCallback)(function(e){n.setProgress(e)},[n]);return void 0===r||c||(m(r/ef),h(es.tH.Normal)),(0,a.useEffect)(function(){if(void 0!==r&&p.current&&f.current&&!c){var e=p.current,n=f.current,t=function(t){if(0===t.button){u(!0),n.focus();var r=e.getBoundingClientRect(),o=n.getBoundingClientRect(),a=r.width,l=o.width,s=t.target===e?l/2:t.clientX-o.left,c=null,d=function(e){var n=Math.max(0,Math.min(1,(e-r.left-s)/(a-l)));n!==c&&(c=n,m(n),i(Math.round(n*ef)))};d(t.clientX);var p=function(e){h(es.tH.None),d(e.clientX),e.preventDefault(),e.stopPropagation()},f=function(){window.removeEventListener("pointermove",p),window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",f),h(es.tH.Normal),u(!1)};window.addEventListener("pointermove",p),window.addEventListener("pointerup",f),window.addEventListener("pointercancel",f),t.preventDefault(),t.stopPropagation()}};return e.addEventListener("pointerdown",t),n.addEventListener("pointerdown",t),function(){e.removeEventListener("pointerdown",t),n.removeEventListener("pointerdown",t)}}},[r,c,i,m,h]),(0,a.useEffect)(function(){if(void 0!==r&&f.current&&!c){var e=f.current,n=function(e){if(void 0!==r&&es.DO.includes(e.key)){var n=Math.max(0,r-1),t=Math.min(ef,r+1),o=null;switch(e.key){case"ArrowLeft":o=n;break;case"ArrowRight":o=t;break;case"Home":o=0;break;case"End":o=ef}null!==o&&(i(o),e.preventDefault(),e.stopPropagation())}};return e.addEventListener("keydown",n),function(){e.removeEventListener("keydown",n)}}},[c,r,i]),(0,a.useMemo)(function(){return(0,o.Y)(I.S,{gap:8,children:(0,o.FD)(I.S,{innerRef:d,css:es.uu,children:[(0,o.Y)(ep,{ref:p}),(0,o.Y)(ec,{ref:f})]})})},[])}var em=(0,R.x)({costInfo:[P.wp.flex.shrink(1),P.wp.align.center]});function eg(e){var n=e.setAttrs,t=(0,Y._)((0,l.fp)(es.h0),1)[0],r=(0,Y._)((0,l.fp)(es.D_),1)[0],i=(0,Y._)((0,l.fp)(es.Wt),1)[0];return(0,o.FD)(I.S,{css:U.container,children:[(0,o.FD)(I.S,{css:U.label,children:[(0,o.FD)(O.EY,{css:U.resource,multiline:!1,children:[t," ",(0,N.A)("machine",t)]}),(0,o.FD)(I.S,{css:em.costInfo,row:!0,gap:4,children:[(0,o.FD)(I.S,{css:U.cost,children:[(0,o.FD)(O.EY,{multiline:!1,children:[i," compute units"]}),(0,o.Y)(O.EY,{color:"dimmer",variant:"small",multiline:!1,children:"/s at max traffic"})]}),(0,o.Y)(et.m_,{tooltip:(0,o.FD)(I.S,{css:U.cost,children:[(0,o.FD)(O.EY,{multiline:!1,children:["$",r]}),(0,o.Y)(O.EY,{variant:"small",color:"dimmest",multiline:!1,children:"/s"})]}),children:(0,o.Y)(ei.A,{color:_.LU.foregroundDimmest})})]})]}),(0,o.Y)(eh,{setAttrs:n})]})}var ev=t(47177),ew=[P.wp.colWithGap(12),P.wp.borderRadius("container"),P.wp.p(16)],ey=(0,R.x)({container:[ew],disabled:[ew,{opacity:.5,pointerEvents:"none"}],builder:[P.wp.position.relative,{"--max-instances-transition-time":es.tH.Normal,"--max-instances":1," *":{transitionTimingFunction:"ease"}}]});function eb(e){var n=e.maxMachineInstances,t=e.disabled,r=e.onError,i=(0,a.useRef)(null),s=(0,l.Xr)(es.o2),c=(0,l.Xr)(es.Md);return(0,a.useEffect)(function(){if(n){var e=es.hK.indexOf(n);if(-1===e)return void r("An error occurred while setting selected max machine instances.");c(e)}},[n,c,r]),(0,o.FD)(en.ui,{elevated:!0,css:t?ey.disabled:ey.container,children:[(0,o.FD)(I.S,{gap:4,children:[(0,o.FD)(I.S,{row:!0,gap:4,align:"center",children:[(0,o.Y)(ev.A,{}),(0,o.Y)(O.EY,{variant:"subheadDefault",multiline:!1,children:"Max number of machines"})]}),(0,o.Y)(O.EY,{multiline:!0,variant:"small",color:"dimmer",children:"The most machines that should ever spin up to handle your highest traffic. More machines means a faster experience for your users."})]}),(0,o.Y)(I.S,{css:ey.builder,gap:8,innerRef:i,children:(0,o.Y)(eg,{setAttrs:{setTransitionTime:function(e){(0,C.U)(i,"--max-instances-transition-time",e)},setProgress:function(e){(0,C.U)(i,"--max-instances-progress",e.toString()),s(e)}}})})]})}var eS=t(54790),eY=t(50069),eA=t(43593),ex=t(84788),eC=t(37037);function e_(e){var n,t,r=e.onError,i=(n={onCompleted:function(e){"HostingMachineConfigurationsResults"!==e.hostingMachineConfigurations.__typename&&r("Something went wrong")},onError:function(e){return r(e.message)}},t=(0,s._)({},h,n),d.I(m,t)),o=i.data,a=i.loading;return{machineConfigurations:(null==o?void 0:o.hostingMachineConfigurations.__typename)==="HostingMachineConfigurationsResults"?o.hostingMachineConfigurations.results:null,loading:a}}var ek=function(e){var n,t=(0,v.uS)(),s=(0,v.i$)(),c=(0,v.cF)(),u=(0,v.tq)(),d=(0,v.gq)(),p=void 0!==u,f=!p&&"string"!=typeof s,h=(0,l.md)(A.NF),m=(0,l.md)(A.No),S=(0,l.md)(es.h0),Y=e_({onError:e.onError}),x=Y.machineConfigurations,C=Y.loading;(0,a.useEffect)(function(){(0,y.Ae)({context:b.P.AutoscaleMachineConfiguration})},[]);var _=(0,ex.Os)(eA.IW.id,eA.Gp.ApproveDeployment),k=(0,ex.Os)(eA._t.id,eA.ij.ApproveDeployment),D=(n=(0,r._)(function(){var n,t,r,o;return(0,i.YH)(this,function(i){return(n=null==x?void 0:x.find(function(e){var n=e.vcpu,t=e.memory;return h.toString()===n&&m.toString()===t}))?(t=n.id,r=n.label,o=n.slug,e.onConfirm({configurationId:t,configurationLabel:r,configurationSlug:o,maxInstances:S}),_.goto(eA.Gp.ConfirmDeployment),k.goto(eA.ij.ConfirmDeployment)):e.onError("An error occurred trying to validate selected machine configuration"),[2]})}),function(){return n.apply(this,arguments)}),E=C||e.fetching||p||t!==w.d.Ready;return(0,o.FD)(o.FK,{children:[(0,o.Y)(eS.A,{maxWidth:!0,children:(0,o.Y)(eY.fw,{onBack:function(){e.onBack(),_.goto(eA.Gp.SetupDeployment),k.goto(eA.ij.SetupDeployment)}})}),(0,o.Y)(eS.A,{maxWidth:!0,children:(0,o.FD)(I.S,{gap:16,children:[(0,o.FD)(I.S,{gap:4,children:[(0,o.Y)(O.EY,{variant:"subheadBig",children:"Autoscale machine configuration"}),(0,o.Y)(O.EY,{variant:"small",color:"dimmer",children:"Autoscale apps spin up enough machines to meet demand at any point in time. You are billed for the total number of compute units across all machines."})]}),(0,o.FD)(I.S,{gap:16,children:[(0,o.Y)(el,{machineConfiguration:null==c?void 0:c.machineConfiguration,disabled:E,hasDeploymentRepricing:null==d?void 0:d.hasDeploymentRepricing}),(0,o.Y)(eb,{maxMachineInstances:null==c?void 0:c.maxMachineInstances,disabled:E,onError:e.onError})]}),(0,o.FD)(I.S,{gap:8,pt:8,children:[(0,o.Y)(ee.$n,{colorway:"primary",text:f?"Approve and configure build settings":"Approve and update",iconRight:(0,o.Y)(eC.A,{}),onClick:D,loading:C}),(0,o.FD)(O.EY,{color:"dimmest",children:["Your deployed app will utilize any available monthly free allotment before charging for additional resource usage."," ",(0,o.Y)("a",{href:g.ik.ABOUT_USAGE_BASED_BILLING,target:"_blank",rel:"noopener",children:"Learn more"})]})]})]})})]})}},77485:(e,n,t)=>{"use strict";t.d(n,{A:()=>v});var r=t(46434),i=t(29935),o=t(12694),a=t(82643),l=t(88263),s=t(21462),c=t(74093),u=t(16679),d=t(58809),p=t(64583),f=t(48521),h=t(10429);function m(){}var g=(0,p.x)({terminalWrapper:[{"> div":[f.wp.borderRadius(4)],"& .xterm":[f.wp.borderRadius(4)]}]});function v(e){var n,t=e.processId,p=e.openPane,f=e.maxHeight,v=(0,d.V)(),w=(0,u.Ui)({maxHeight:f,openPane:p}),y=w.visibleHeight,b=w.bufferHeight,S=w.wrapperResizeRef,Y=w.xterm,A=w.xtermRef,x=(0,o._)((0,s.useState)(null),2),C=x[0],_=x[1],k=(0,s.useCallback)(function(e){return _(function(){return e}),function(){}},[]);return(0,c.b)((n=(0,i._)(function(e,n){var i,o,l,s,c,u,d,p,f;return(0,a.YH)(this,function(a){switch(a.label){case 0:if(i=n.signal,!C)return[2];o=e.agentToolPackager.connectToInstallPackages.subscribe({processId:t},{signal:i}).resReadable,l=!1,s=!1,a.label=1;case 1:a.trys.push([1,6,7,12]),u=(0,r._)(o),a.label=2;case 2:return[4,u.next()];case 3:if(!(l=!(d=a.sent()).done))return[3,5];if(!(p=d.value).ok){if("UNEXPECTED_DISCONNECT"===p.payload.code||"CANCEL"===p.payload.code||"NO_PROCESS_MATCHING_ID"===p.payload.code)return[3,5];throw Error("[".concat(p.payload.code,"]: ").concat(p.payload.message))}"output"===p.payload.$kind&&C(p.payload.output),a.label=4;case 4:return l=!1,[3,2];case 5:return[3,12];case 6:return f=a.sent(),s=!0,c=f,[3,12];case 7:if(a.trys.push([7,,10,11]),!(l&&null!=u.return))return[3,9];return[4,u.return()];case 8:a.sent(),a.label=9;case 9:return[3,11];case 10:if(s)throw c;return[7];case 11:return[7];case 12:return[2]}})}),function(e,t){return n.apply(this,arguments)}),[C,t]),(0,l.Y)(h.S,{css:g.terminalWrapper,style:{height:y,background:null==v?void 0:v.background},children:(0,l.Y)(u._x,{onInput:m,xterm:Y,wrapperResizeRef:S,bufferHeight:b,setOnMessage:k,onResizeTerminal:m,children:(0,l.Y)(u.DJ,{xtermRef:A,visibleHeight:y,maxHeight:f})})})}},77510:(e,n,t)=>{"use strict";t.d(n,{b:()=>c});var r=t(21462),i=t(1230),o=t(54319),a=t(47630),l=t(41852),s=t(79129);function c(e){var n=(0,o.MG)(),t=(0,o.Ik)(),c=(0,l.xe)(),d=(0,a.Rj)(function(){return null==e?void 0:e.reduce(u(c),100)},[e,c],{default:{targetPlan:void 0,userMessageAcknowledgedAt:void 0}}),p=d.targetPlan,f=d.userMessageAcknowledgedAt;(0,r.useEffect)(function(){(null==p?void 0:p.requiresApproval)===!0?n(p.eventState===i.qOk.IN_PROGRESS?"generating":"awaiting-approval"):(null==p?void 0:p.requiresApproval)===!1&&n("approved")},[null==p?void 0:p.requiresApproval,null==p?void 0:p.eventState,n]);var h=(0,s.o)(null!=e?e:void 0),m=(0,r.useCallback)(function(){if(!p)throw Error("No plan to approve");if("awaiting-approval"!==t)throw Error("Attempted to approve an already-approved plan");h(p)},[h,p,t]),g=(0,r.useCallback)(function(){if("awaiting-approval"!==t)throw Error("Attempted to revise a plan that is not awaiting approval");n("revising")},[t,n]),v=(0,r.useCallback)(function(){if("revising"!==t)throw Error("Attempted to back to awaiting approval from non-revising state");n("awaiting-approval")},[t,n]);return{userMessageAcknowledgedAt:f,planApprovalState:t,planDesignReferences:null==p?void 0:p.designReferenceFilePaths,approveTargetPlan:m,reviseLatestPlan:g,backToAwaitingApproval:v}}var u=function(e){return{direction:"forward",state:{targetPlan:void 0,userMessageAcknowledgedAt:void 0},reducer:function(n,t){if((0,i.TW7)(n,"agentPlanEventContents")){var r=(0,i.QNh)(n.contents.contents),o=r.requiresApproval,a=r.planId,l=r.objective,s=r.stackBlueprint,c=r.step,u=r.designReferenceFilePaths,d=u[0];e||(t.targetPlan={eventState:n.state,planId:a,objective:l.description,stackBlueprint:s,step:c,requiresApproval:o,designReferenceFilePaths:u,approvedDesignReferenceFilePath:d},t.userMessageAcknowledgedAt=void 0),a===e&&(t.targetPlan={eventState:n.state,planId:a,objective:l.description,stackBlueprint:s,step:c,requiresApproval:o,designReferenceFilePaths:u,approvedDesignReferenceFilePath:d},t.userMessageAcknowledgedAt=void 0),(0,i.cLF)(n,"acknowledgeUserMessage")&&(t.userMessageAcknowledgedAt=n.created)}}}}},77681:(e,n,t)=>{"use strict";t.d(n,{YY:()=>e9,QJ:()=>nt,Eo:()=>ne});var r=t(29935),i=t(83846),o=t(17844),a=t(12694),l=t(82643),s=t(88263),c=t(21462),u=t(82110),d=t(76607),p=t(36018),f=t(93369),h=t(31062),m=t(45485),g=t(19882),v=t(83719),w=t(6598),y=t(82272),b=t(64870),S=t(71380),Y=t(7252),A=t(45263),x=t(64583),C=t(48521),_=t(76126),k=t(10429),D=t(62362),E=(0,x.x)({root:[C.wp.zIndex(1),{color:A.LU.accentPrimaryStrongest,backgroundColor:A.LU.accentPrimaryDimmest,containerType:"inline-size"}],content:[C.wp.width("100%"),C.wp.flex.row,C.wp.align.center],textWrapper:[C.wp.width("100%"),{flexShrink:1,textWrap:"wrap"}]});function R(e){var n=e.isLivePreview;return(0,s.Y)(k.S,{css:E.root,p:6,row:!0,align:"center",justify:"center",children:(0,s.FD)(k.S,{css:E.content,gap:8,children:[(0,s.Y)(D.A,{size:16}),(0,s.Y)(_.EY,{variant:"small",css:E.textWrapper,children:n?"This is a visual preview of your app. The agent is currently creating a fully interactive version.":"This is a visual plan preview."})]})})}var I=t(6156),F=t(17459),T=t(53231);function P(e){var n=e.actionType,t=(0,F._)(e,["actionType"]);(0,T.u4)(T.AZ.WS_WEBVIEW_USED,(0,o._)({type:n},t))}function L(){P({actionType:"open_new_window"})}var U=t(60632),N=t(79209),O=t(39999),M=t(38292),B=t(77089),H=t(36112),z=t(59172),W=t(6034),G=t(37037),V=t(83023),j=t(80762),Z=t(53317),q=(0,N.AH)([C.wp.borderRadius(6),C.wp.color.foregroundDimmer,C.wp.height(24),{borderColor:A.LU.outlineDimmer}]),K=(0,x.x)({root:[C.wp.border({color:A.LU.outlineDimmest,direction:"bottom"}),C.wp.p(2),C.wp.container("root"),C.wp.zIndex(1),C.wp.p(4),C.wp.gap(4),C.wp.height(40)],devControls:[C.wp.gap(4)],navControls:[C.wp.flex.growAndShrink(1)],navButton:[C.wp.p(6),C.wp.borderRadius(4),C.wp.flex.shrink(0),{border:"none"}],urlWrapper:[C.wp.position.relative,C.wp.flex.row,C.wp.flex.growAndShrink(1)],urlPath2:[C.wp.py(0),C.wp.fontSize(12),C.wp.flex.grow(1),C.wp.borderRadius(8)],goButton:[C.wp.position.absolute,C.wp.right(4),C.wp.top("50%"),{transform:"translateY(-50%)"}],buttons:[(0,i._)({},C.kL.max(500,"root"),{"svg + span":{display:"none"},svg:{marginRight:0}})],fakeUrl:[C.wp.fontSize(12),C.wp.border(),{boxSizing:"content-box"},C.wp.borderRadius(6),C.wp.px(8),C.wp.py(2),C.wp.flex.grow(1),C.wp.rowWithGap(4),C.wp.align.center]});function $(e){var n=e.webviewPageState,t=e.navigationState;return(0,s.FD)(H.ui,{css:K.root,row:!0,align:"center",justify:"space-between",children:["active"===n.state?(0,s.Y)(J,{navigationState:t}):(0,s.Y)(Q,{}),(0,s.Y)(k.S,{row:!0,children:(0,s.Y)(k.S,{css:K.buttons,row:!0,align:"center",children:(0,s.Y)(k.S,{css:K.devControls,row:!0,children:(0,s.Y)(O.v,{size:"small",variant:"outlined",css:q,href:t.getExternalUrl(),target:"_blank",iconLeft:(0,s.Y)(V.A,{}),text:"New tab",onClick:function(){L()},noNextLink:!0})})})})]})}function J(e){var n=e.navigationState,t=n.canNavigateBack,r=n.navigateBack,i=n.canNavigateForward,o=n.navigateForward,a=n.canNavigateToInputRelativeUrl,l=n.navigateToInputRelativeUrl,c=n.inputRelativeUrl,u=n.setInputRelativeUrl,d=n.refresh,p=(0,I.vm)(),f=(0,U.Jn)("webviewpane.reload");return(0,s.FD)(k.S,{css:K.navControls,row:!0,gap:4,children:[(0,s.Y)(M.K0,{alt:"Back",tooltipDelay:"long",onClick:r,disabled:!t,css:K.navButton,children:(0,s.Y)(W.A,{})}),(0,s.Y)(M.K0,{alt:"Forward",tooltipDelay:"long",onClick:o,disabled:!i,css:K.navButton,children:(0,s.Y)(G.A,{})}),(0,s.Y)(M.K0,{alt:"Refresh".concat(f?" (".concat((0,U.LH)(f,p),")"):""),tooltipDelay:"long",onClick:d,css:K.navButton,children:n.isRefreshing?(0,s.Y)(j.A,{}):(0,s.Y)(Z.A,{})}),(0,s.FD)(k.S,{css:K.urlWrapper,row:!0,children:[(0,s.Y)(B.pd,{css:K.urlPath2,value:c,onKeyDown:function(e){"Enter"===e.key&&a&&l()},onChange:function(e){if(""===e.currentTarget.value)return void u("/");u(e.target.value)}}),(0,s.Y)(H.ui,{elevated:!0,css:K.goButton,children:(0,s.Y)(M.K0,{alt:"Go to URL",disabled:!a,onClick:l,size:18,tooltipContents:(0,s.Y)(U._y,{keyCombo:"Enter"}),children:(0,s.Y)(G.A,{})})})]})]})}function Q(){return(0,s.Y)(k.S,{css:K.navControls,align:"center",row:!0,gap:4,children:(0,s.FD)(H.ui,{elevated:!0,css:K.fakeUrl,children:[(0,s.Y)(z.m_,{tooltip:"Page is loading, please wait.",delay:"none",placement:"auto",children:(0,s.Y)(j.A,{})}),(0,s.Y)(_.EY,{variant:"small",color:"dimmer",children:"Loading your page"})]})})}var X=t(49150),ee=(0,x.x)({modalContent:[C.wp.flex.column,C.wp.gap(16)],modalTitle:[C.wp.fontWeight.bold],modalSection:[C.wp.flex.column,C.wp.gap(8)],modalSectionTitle:[C.wp.fontWeight.medium,{fontSize:A.LU.fontSizeSubheadDefault}],modalText:[{fontSize:A.LU.fontSizeDefault,lineHeight:1.5}],bulletList:[C.wp.flex.column,C.wp.gap(8),{paddingLeft:A.LU.space16}],bulletItem:[{position:"relative",paddingLeft:A.LU.space8,"&::before":{content:'""',position:"absolute",left:"-12px",color:A.LU.yellowStrongest}}]});function en(e){var n=e.isOpen,t=e.onRequestClose;return(0,s.Y)(X.a,{isOpen:n,onRequestClose:t,centered:!0,maxWidth:500,children:(0,s.FD)(k.S,{css:ee.modalContent,p:16,children:[(0,s.Y)(_.EY,{variant:"headerDefault",css:ee.modalTitle,children:"Cookie Restrictions in Preview"}),(0,s.FD)(k.S,{css:ee.modalSection,children:[(0,s.Y)(_.EY,{css:ee.modalSectionTitle,children:"Why are cookies restricted?"}),(0,s.Y)(_.EY,{css:ee.modalText,multiline:!0,children:"Browser security policies limit cookie access in iframes like Preview to protect user privacy and prevent cross-site tracking."})]}),(0,s.FD)(k.S,{css:ee.modalSection,children:[(0,s.Y)(_.EY,{css:ee.modalSectionTitle,children:"How does this affect my app?"}),(0,s.Y)(_.EY,{css:ee.modalText,multiline:!0,children:"In Preview, your app may not be able to set or read cookies, affecting authentication, sessions, and user preferences. Your app works normally in a regular browser tab."})]}),(0,s.FD)(k.S,{css:ee.modalSection,children:[(0,s.Y)(_.EY,{css:ee.modalSectionTitle,children:"What can I do?"}),(0,s.FD)(k.S,{css:ee.bulletList,children:[(0,s.Y)(k.S,{css:ee.bulletItem,children:(0,s.Y)(_.EY,{css:ee.modalText,children:'Use "New tab" to test cookie functionality in a regular browser environment.'})}),(0,s.Y)(k.S,{css:ee.bulletItem,children:(0,s.Y)(_.EY,{css:ee.modalText,children:"Try Chrome browser."})}),(0,s.Y)(k.S,{css:ee.bulletItem,children:(0,s.FD)(_.EY,{css:ee.modalText,children:["Try"," ",(0,s.Y)("a",{href:"https://replit.com/desktop",target:"_blank",rel:"noopener noreferrer",style:{color:A.LU.accentPrimaryStronger,textDecoration:"none"},children:"Replit Desktop App"}),"."]})}),(0,s.Y)(k.S,{css:ee.bulletItem,children:(0,s.Y)(_.EY,{css:ee.modalText,children:"Adjust your browser settings to allow cross-site tracking cookies (could be risky)."})})]})]})]})})}var et=t(83650),er=t(69258),ei=(0,x.x)({root:[C.wp.flex.growAndShrink(0),C.wp.border({width:0}),{color:A.LU.orangeStrongest,backgroundColor:A.LU.orangeDimmest,containerType:"inline-size"}],content:[C.wp.width("100%")],closeButton:[{color:A.LU.orangeStrongest},C.wp.hover({backgroundColor:A.LU.orangeDimmer})],tooltipText:[C.wp.flex.shrink(1)],textAndActions:[C.wp.flex.growAndShrink(1)],newTabButton:[{color:A.LU.orangeStrongest,backgroundColor:A.LU.orangeDimmest,borderColor:A.LU.orangeStrongest,borderWidth:1,marginLeft:"8px"},C.wp.borderRadius(6),C.wp.height(24),C.wp.hover({backgroundColor:A.LU.orangeDimmer})],learnMoreButton:[{color:A.LU.orangeStrongest,backgroundColor:"transparent",marginLeft:"8px",padding:0,border:"none",textDecoration:"underline"},C.wp.hover({fontWeight:"bolder",backgroundColor:"transparent"})]});function eo(e){var n=e.navigationState,t=e.onDismiss,r=(0,a._)((0,c.useState)(!1),2),i=r[0],o=r[1],l=function(){o(!0)};return(0,s.FD)(s.FK,{children:[(0,s.Y)(k.S,{css:ei.root,p:4,pl:8,gap:4,align:"start",children:(0,s.FD)(k.S,{css:ei.content,row:!0,gap:6,align:"center",justify:"space-between",children:[(0,s.Y)(er.A,{}),(0,s.FD)(k.S,{row:!0,gap:4,align:"center",css:ei.textAndActions,children:[(0,s.Y)(_.EY,{css:ei.tooltipText,variant:"small",children:"Open a new tab to test authentication and file uploads."}),(0,s.Y)(O.v,{size:"small",variant:"outlined",css:ei.newTabButton,href:n.getExternalUrl(),target:"_blank",iconLeft:(0,s.Y)(V.A,{}),text:"New tab",onClick:function(){L()},noNextLink:!0}),(0,s.Y)(O.v,{size:"small",variant:"outlined",css:ei.learnMoreButton,href:"#",onClick:function(e){e.preventDefault(),l()},text:"Learn more"})]}),(0,s.Y)(M.K0,{onClick:t,alt:"Dismiss",css:ei.closeButton,children:(0,s.Y)(et.A,{})})]})}),(0,s.Y)(en,{isOpen:i,onRequestClose:function(){return o(!1)}})]})}var ea=t(12584),el=t(41114),es=t(86997);function ec(){var e=(0,ea._)(["\n  query WebviewDeployBanner($id: String!) {\n    getRepl(id: $id) {\n      ... on Repl {\n        id\n        hostingDeployment {\n          ... on HostingDeployment {\n            id\n            currentBuild {\n              id\n            }\n          }\n          ... on Error {\n            message\n          }\n        }\n        authorizations {\n          viewDeploymentConfig {\n            isAuthorized\n          }\n        }\n      }\n    }\n  }\n"]);return ec=function(){return e},e}var eu={},ed=(0,el.J1)(ec()),ep=t(46603),ef=t(18870),eh=t(92855),em=(0,x.x)({root:[C.wp.flex.growAndShrink(1),{color:A.LU.accentPrimaryStrongest,backgroundColor:A.LU.accentPrimaryDimmest,containerType:"inline-size"}],content:[C.wp.width("100%")],tooltipText:[C.wp.flex.growAndShrink(1)],closeButton:[{marginLeft:"auto"}]}),eg=function(e){var n=e.onClick,t=e.onDismiss,r="function"==typeof t;return(0,s.Y)(k.S,{css:em.root,px:6,py:4,gap:4,align:"start",children:(0,s.FD)(k.S,{css:em.content,row:!0,gap:6,align:"center",justify:"space-between",children:[(0,s.FD)(k.S,{row:!0,gap:8,align:"center",children:[(0,s.Y)(z.m_,{tooltip:(0,s.Y)(k.S,{gap:4,justify:"start",align:"start",children:["Deploy to any URL","Configurable machine","Always on"].map(function(e,n){return(0,s.FD)(k.S,{row:!0,gap:8,align:"center",justify:"center",children:[(0,s.Y)(ef.A,{size:12}),(0,s.Y)(_.EY,{variant:"small",multiline:!1,children:e})]},n)})}),delay:"none",children:(0,s.Y)(D.A,{})}),(0,s.Y)(_.EY,{css:em.tooltipText,variant:"small",children:"Ready to share with the world?"})]}),(0,s.Y)(ep.$n,{size:"small",colorway:"primary",iconLeft:(0,s.Y)(eh.A,{}),text:"Deploy",onClick:n}),r?(0,s.Y)(k.S,{css:em.closeButton,children:(0,s.Y)(M.K0,{alt:"Dismiss",onClick:t,children:(0,s.Y)(et.A,{})})}):null]})})},ev=t(41106),ew=t(9685),ey=t(15036),eb=t(41852),eS=t(3752);function eY(e){var n,t,r,i=e.replId,l=e.shouldShowAgentDeployBanner,u=e.onClick,d=(0,a._)((0,c.useState)(!l),2),p=d[0],f=d[1],h=(n={variables:{id:i}},t=(0,o._)({},eu,n),es.I(ed,t)).data,m=(0,eS.AU)("workspaceTourGuide"),g=(0,eb.eg)(),v=(0,ew.Q)(),w=(0,ev.A)("workspace","workspace-deployments-webview-banner"),y=w.shouldDisplay,b=w.register,S=w.dismiss;(0,c.useEffect)(function(){b()},[b]);var Y=function(){f(!0),S()};if(m||g)return null;var A=(null==h?void 0:h.getRepl.__typename)==="Repl"?h.getRepl:null;if(!A)return null;var x=A.authorizations.viewDeploymentConfig.isAuthorized,C=(null==(r=A.hostingDeployment)?void 0:r.__typename)==="HostingDeployment"&&A.hostingDeployment.currentBuild;return x&&!C&&y||l&&!p?(0,s.Y)(k.S,{children:(0,s.Y)(eg,{onClick:function(){(0,T.u4)(T.AZ.DEPLOY_PROJECT_SELECTED,{source:"workspace_webview_deploy_banner",has_agent_session:!0,is_agent_suggesting_deployment:!0}),l&&(0,ey.pI)({action:"open_deployments_from_banner",sessionId:v}),Y(),u()},onDismiss:Y})}):null}var eA=t(64513),ex=t(19652),eC=(0,x.x)({modalText:[C.wp.pl(8),C.wp.display.block],subHeadingText:[C.wp.display.block,C.wp.mb(8)],bulletList:[C.wp.flex.column,C.wp.gap(8),C.wp.pl(24)],statusItem:[C.wp.flex.row,C.wp.gap(8),C.wp.p(8),C.wp.borderRadius(8),C.wp.align.center,C.wp.backgroundColor.backgroundRoot],statusCircle:[{width:"10px",height:"10px",borderRadius:"50%",flexShrink:0,'&[data-reachable="true"]':{backgroundColor:A.LU.accentPrimaryDefault},'&[data-reachable="false"]':{backgroundColor:A.LU.accentNegativeDefault}}]});function e_(e){var n=e.isOpen,t=e.onRequestClose,r=e.reachability;return(0,s.Y)(X.a,{isOpen:n,onRequestClose:t,centered:!0,maxWidth:500,children:(0,s.FD)(k.S,{gap:16,children:[(0,s.Y)(_.EY,{variant:"headerDefault",children:"App Reachability Status"}),(0,s.FD)("ul",{css:eC.bulletList,children:[(0,s.FD)("li",{css:eC.statusItem,children:[(0,s.Y)(k.S,{css:eC.statusCircle,"data-reachable":r.dotdev}),(0,s.FD)(_.EY,{css:eC.modalText,children:["replit.dev domain:"," ",r.dotdev?"Reachable":"Unreachable"]})]}),(0,s.FD)("li",{css:eC.statusItem,children:[(0,s.Y)(k.S,{css:eC.statusCircle,"data-reachable":r.replCo}),(0,s.FD)(_.EY,{css:eC.modalText,children:["repl.co domain:"," ",r.replCo?"Reachable":"Unreachable"]})]})]}),(0,s.FD)(ex.s,{children:[(0,s.Y)(_.EY,{css:eC.subHeadingText,variant:"subheadDefault",children:"Why might my app be unreachable?"}),(0,s.Y)(_.EY,{css:eC.modalText,multiline:!0,children:"Your browser may be unable to access your app's development domains (replit.dev and repl.co). This can happen due to:"}),(0,s.FD)("ul",{css:eC.bulletList,children:[(0,s.Y)("li",{children:(0,s.Y)(_.EY,{css:eC.modalText,children:"Internet service provider blocking requests"})}),(0,s.Y)("li",{children:(0,s.Y)(_.EY,{css:eC.modalText,children:"Router firewall rules"})}),(0,s.Y)("li",{children:(0,s.Y)(_.EY,{css:eC.modalText,children:"Browser or extension blocking requests"})})]})]}),(0,s.FD)(ex.s,{children:[(0,s.Y)(_.EY,{css:eC.subHeadingText,variant:"subheadDefault",children:"What can I do?"}),(0,s.FD)("ul",{css:eC.bulletList,children:[(0,s.Y)("li",{children:(0,s.Y)(_.EY,{css:eC.modalText,children:"Connect to a different network if possible (e.g. mobile data)"})}),(0,s.Y)("li",{children:(0,s.Y)(_.EY,{css:eC.modalText,children:"Check with your network administrator if you're on a restricted network (e.g. corporate or school WIFI)"})}),(0,s.Y)("li",{children:(0,s.FD)(_.EY,{css:eC.modalText,children:["See our"," ",(0,s.Y)("a",{href:eA.ik.TROUBLESHOOTING_REACHABILITY,target:"_blank",rel:"noopener noreferrer",style:{color:A.LU.accentPrimaryStronger,textDecoration:"none"},children:"FAQ"})," ","for more troubleshooting steps"]})})]})]})]})})}var ek=(0,x.x)({root:[C.wp.flex.growAndShrink(0),C.wp.border({width:0}),{color:A.LU.orangeStrongest,backgroundColor:A.LU.orangeDimmest,containerType:"inline-size"}],content:[C.wp.width("100%")],closeButton:[{color:A.LU.orangeStrongest},C.wp.hover({backgroundColor:A.LU.orangeDimmer})],tooltipText:[C.wp.flex.shrink(1)],textAndActions:[C.wp.flex.growAndShrink(1)],learnMoreButton:[{color:A.LU.orangeStrongest,backgroundColor:"transparent",marginLeft:"8px",padding:0,border:"none",textDecoration:"underline"},C.wp.hover({fontWeight:"bolder",backgroundColor:"transparent"})]});function eD(e){var n=e.onDismiss,t=e.reachability,r=(0,a._)((0,c.useState)(!1),2),i=r[0],o=r[1];return(0,s.FD)(s.FK,{children:[(0,s.Y)(k.S,{css:ek.root,p:4,pl:8,align:"start",children:(0,s.FD)(k.S,{css:ek.content,row:!0,gap:6,align:"center",justify:"space-between",children:[(0,s.Y)(er.A,{}),(0,s.FD)(k.S,{row:!0,gap:4,align:"center",css:ek.textAndActions,children:[(0,s.Y)(_.EY,{css:ek.tooltipText,variant:"small",children:t.dotdev&&t.replCo?"There may be connectivity issues with your app.":"Your app might not be reachable from this network."}),(0,s.Y)(ep.$n,{size:"small",variant:"outlined",css:ek.learnMoreButton,onClick:function(){return o(!0)},text:"Learn more"})]}),(0,s.Y)(M.K0,{onClick:n,alt:"Dismiss",css:ek.closeButton,children:(0,s.Y)(et.A,{})})]})}),(0,s.Y)(e_,{isOpen:i,onRequestClose:function(){return o(!1)},reachability:t})]})}var eE=t(51244),eR=t(31258),eI=t(70430),eF=t(49897),eT=t(96556),eP=t(49580),eL=t(75414),eU=t(39328),eN=t(46404),eO=t(19465),eM=t(57912),eB=(0,N.AH)([C.wp.borderRadius(6),C.wp.color.foregroundDimmer,C.wp.height(24),{borderColor:A.LU.outlineDimmer}]),eH=[C.wp.reset.button,B.cO,C.wp.rowWithGap(0),C.wp.flex.grow(0),C.wp.color.accentPositiveStronger,C.wp.fontSize("small"),C.wp.focusRing,{"&:hover":[C.wp.cursor.pointer,C.wp.color.accentPositiveStrongest]},{borderTopRightRadius:0,borderBottomRightRadius:0,borderRight:0},C.wp.align.center,C.wp.py(0),C.wp.px(4)],ez=(0,x.x)({root:[C.wp.border({color:A.LU.outlineDimmest,direction:"bottom"}),C.wp.p(2),C.wp.container("root"),C.wp.zIndex(1),C.wp.p(4),C.wp.gap(4)],devControls:[C.wp.gap(4)],navControls:[C.wp.align.center,C.wp.rowWithGap(4),C.wp.flex.growAndShrink(1)],urlWrapper:[C.wp.position.relative,C.wp.flex.row,C.wp.flex.growAndShrink(1)],urlOptionsRoot:[C.wp.flex.growAndShrink(1),C.wp.overflow("hidden")],urlOptions:[C.wp.borderRadius(4)],urlOptionsSection:[C.wp.border({direction:"bottom"}),{":last-child":{paddingBottom:0,borderBottom:0}}],urlOptionsTitle:[C.wp.flex.grow(1)],portRadioGroup:[C.wp.colWithGap(8)],portOption:[C.wp.rowWithGap(8),C.wp.color.foregroundDimmer],portOptionSelected:[C.wp.rowWithGap(8),C.wp.color.foregroundDefault],portOptionLabel:[{"&:hover":[C.wp.cursor.pointer,C.wp.color.foregroundDefault]}],url:eH,urlSelected:[eH,C.wp.backgroundColor.backgroundHighest,{borderBottomLeftRadius:0}],urlPath2:[C.wp.py(0),C.wp.fontSize(12),C.wp.flex.grow(1),{borderTopLeftRadius:0,borderBottomLeftRadius:0}],urlDots:[C.wp.backgroundColor.greenDimmer,C.wp.borderRadius(4),C.wp.p(2),{lineHeight:1,"&:hover":[C.wp.cursor.pointer,C.wp.backgroundColor.greenDefault]}],goButton:[C.wp.position.absolute,C.wp.right(4),C.wp.top("50%"),{transform:"translateY(-50%)"}],buttons:[(0,i._)({},C.kL.max(500,"root"),{"svg + span":{display:"none"},svg:{marginRight:0}})],navButton:[C.wp.p(6),C.wp.borderRadius(4),C.wp.flex.shrink(0),{border:"none"}],fakeUrl:[C.wp.fontSize(12),C.wp.border(),{boxSizing:"content-box"},C.wp.borderRadius(6),C.wp.px(8),C.wp.py(2),C.wp.flex.grow(1),C.wp.rowWithGap(4),C.wp.align.center],devtoolsErrorsBadge:[C.wp.position.absolute,C.wp.center,C.wp.textAlign.center,C.wp.backgroundColor.accentNegativeStronger,C.wp.color.accentNegativeDimmest,C.wp.right(0),C.wp.top(-2),C.wp.p(2),C.wp.minWidth(14),C.wp.height(14),C.wp.borderRadius(16),C.wp.fontSize(10)],screenSizeMenuWrapper:[C.wp.p(4)]});function eW(e){var n=e.children;return(0,s.Y)(z.m_,{tooltip:"Dev URLs are only active when someone is in the workspace. The dev URL is also subject to change. For production hosting, use Deployments.",children:n})}function eG(e){var n=e.url,t=e.webviewPageState,r=e.navigationState,i=e.forwardedPorts,o=e.devtoolsErrorCount,l=e.onToggleDevtools,u=e.onOpenPortSettings,d=e.screenSize,f=e.setScreenSize,h=(0,p.A)(),m=(0,a._)((0,c.useState)(!1),2),g=m[0],v=m[1],w=(0,s.Y)(eq,{});"external-page"===t.state?w=(0,s.Y)(eZ,{backToLocal:function(){return r.refresh()}}):"active"===t.state&&(w=(0,s.Y)(ej,{url:n,navigationState:r,forwardedPorts:i,onOpenPortSettings:u}));var y=(0,eE.a)();return(0,s.FD)(H.ui,{css:ez.root,row:!0,align:"center",justify:"space-between",children:[w,(0,s.Y)(k.S,{row:!0,children:(0,s.Y)(k.S,{css:ez.buttons,row:!0,align:"center",children:(0,s.FD)(k.S,{css:ez.devControls,row:!0,children:["active"===t.state?(0,s.FD)(s.FK,{children:[y?null:(0,s.FD)(eL.Wv,{isOpen:g,onOpenChange:function(e){v(e)},label:"Screen size",background:"higher",children:[(0,s.Y)(M.K0,{alt:"Screen size",css:eB,children:(0,s.Y)(eN.A,{size:12})}),(0,s.Y)(eK,{screenSize:d,setScreenSize:f})]}),(0,s.FD)(k.S,{css:C.wp.position.relative,children:[(0,s.Y)(ep.$n,{size:"small",variant:"outlined",onClick:l,css:eB,text:"Devtools",iconLeft:(0,s.Y)(eM.A,{})}),o>0?(0,s.Y)(k.S,{css:ez.devtoolsErrorsBadge,children:(0,s.Y)(_.EY,{variant:"small",multiline:!1,children:o>99?"99+":o.toString()})}):null]})]}):null,(0,s.Y)(eW,{children:(0,s.Y)(O.v,{size:"small",variant:"outlined",css:eB,href:r.getExternalUrl(),target:"_blank",iconLeft:(0,s.Y)(V.A,{}),text:h?"Open in the browser":"New tab",onClick:function(){L()},noNextLink:!0})})]})})})]})}function eV(e){var n=e.url,t=e.navigationState,r=e.forwardedPorts,i=e.onOpenPortSettings,o=t.canNavigateToInputRelativeUrl,l=t.navigateToInputRelativeUrl,u=t.inputRelativeUrl,d=t.setInputRelativeUrl,p=t.selectedPort,f=t.setPort,h=(0,a._)((0,c.useState)(!1),2),m=h[0],g=h[1],v=(0,eT.c)(),w=v("radioGroup");return(0,s.FD)(k.S,{css:ez.urlOptionsRoot,row:!0,gap:0,children:[(0,s.FD)(eL.Wv,{isOpen:m,onOpenChange:g,label:"Show URL Options",background:"higher",children:[(0,s.FD)("button",{css:m?ez.urlSelected:ez.url,children:[(0,s.Y)(eW,{children:(0,s.Y)(k.S,{css:ez.urlDots,children:"{...}"})}),".".concat(n.includes("replit.dev")?"replit.dev":"repl.co").concat((0,y.r$)(p)?"":":"+p)]}),(0,s.FD)(H.ui,{css:ez.urlOptions,p:8,gap:6,children:[(0,s.FD)(k.S,{css:ez.urlOptionsSection,pb:8,gap:4,children:[(0,s.FD)(k.S,{css:ez.urlOptionsTitle,row:!0,gap:0,justify:"space-between",children:[(0,s.FD)(_.EY,{children:["Listening on ",(0,eR.A)("port",r.length),":"]}),i?(0,s.Y)(M.K0,{alt:"Networking tool",onClick:i,children:(0,s.Y)(eO.A,{})}):null]}),(0,s.Y)(eU.z,{tag:"fieldset",css:ez.portRadioGroup,name:w,value:p.toString(),onChange:function(e){f(parseInt(e.target.value,10)),g(!1)},children:r.map(function(e,n){return(0,s.FD)(k.S,{css:p===e.configuration.externalPort?ez.portOptionSelected:ez.portOption,children:[(0,s.Y)(eU.s,{id:v(e.configuration.externalPort),value:e.configuration.externalPort.toString()}),(0,s.Y)("label",{htmlFor:v(e.configuration.externalPort),css:ez.portOptionLabel,children:":".concat(e.configuration.localPort,"  :").concat(e.configuration.externalPort)})]},"".concat(n,"-").concat(e.configuration.externalPort,":").concat(e.configuration.localPort))})})]}),(0,s.Y)(eI.A,{url:n})]})]}),(0,s.Y)(B.pd,{css:ez.urlPath2,style:m?{borderBottomRightRadius:0}:{},value:u,onKeyDown:function(e){"Enter"===e.key&&o&&l()},onChange:function(e){if(""===e.currentTarget.value)return void d("/");d(e.target.value)}})]})}function ej(e){var n=e.url,t=e.navigationState,r=e.forwardedPorts,i=e.onOpenPortSettings,o=t.canNavigateBack,a=t.navigateBack,l=t.canNavigateForward,c=t.navigateForward,u=t.canNavigateToInputRelativeUrl,d=t.navigateToInputRelativeUrl,p=t.refresh,f=(0,I.vm)(),h=(0,U.Jn)("webviewpane.reload");return(0,s.FD)(k.S,{css:ez.navControls,children:[(0,s.Y)(M.K0,{alt:"Back",tooltipDelay:"long",onClick:a,disabled:!o,css:ez.navButton,children:(0,s.Y)(W.A,{})}),(0,s.Y)(M.K0,{alt:"Forward",tooltipDelay:"long",onClick:c,disabled:!l,css:ez.navButton,children:(0,s.Y)(G.A,{})}),(0,s.Y)(M.K0,{alt:"Refresh".concat(h?" (".concat((0,U.LH)(h,f),")"):""),tooltipDelay:"long",onClick:p,css:ez.navButton,children:t.isRefreshing?(0,s.Y)(j.A,{}):(0,s.Y)(Z.A,{})}),(0,s.FD)(k.S,{css:ez.urlWrapper,children:[(0,s.Y)(eV,{url:n,navigationState:t,forwardedPorts:r,onOpenPortSettings:i}),(0,s.Y)(H.ui,{elevated:!0,css:ez.goButton,children:(0,s.Y)(M.K0,{alt:"Go to URL",disabled:!u,onClick:d,size:18,tooltipContents:(0,s.Y)(U._y,{keyCombo:"Enter"}),children:(0,s.Y)(G.A,{})})})]})]})}function eZ(e){var n=e.backToLocal,t=(0,a._)((0,c.useState)(!1),2),r=t[0],i=t[1];return(0,s.FD)(k.S,{css:ez.navControls,children:[(0,s.Y)(ep.$n,{size:"small",variant:"outlined",onClick:function(){n(),i(!0)},loading:r,css:eB,text:"Back to my page",iconLeft:r?(0,s.Y)(j.A,{}):(0,s.Y)(W.A,{})}),(0,s.FD)(H.ui,{elevated:!0,css:ez.fakeUrl,children:[(0,s.Y)(z.m_,{tooltip:"The URL bar is not supported when navigating to external pages. You can open in a new tab to use your browser instead.",delay:"none",placement:"auto",children:(0,s.Y)(er.A,{})}),(0,s.Y)(_.EY,{variant:"small",color:"dimmer",children:"External page"})]})]})}function eq(){return(0,s.Y)(k.S,{css:ez.navControls,children:(0,s.FD)(H.ui,{elevated:!0,css:ez.fakeUrl,children:[(0,s.Y)(z.m_,{tooltip:"Page is loading, please wait.",delay:"none",placement:"auto",children:(0,s.Y)(j.A,{})}),(0,s.Y)(_.EY,{variant:"small",color:"dimmer",children:"Loading your page"})]})})}function eK(e){var n=e.screenSize,t=e.setScreenSize;return(0,s.FD)(eP.W1,{"aria-label":"Screen size menu",onAction:function(e){if("Full size"===e)null==t||t(void 0);else{var n=eF.U.find(function(n){return n.title===e});if(!n)return;null==t||t(n)}},css:ez.screenSizeMenuWrapper,children:[(0,s.Y)(e$,{isSelected:void 0===n,title:"Full size"}),(0,s.Y)(eP.wv,{}),eF.U.map(function(e){return(0,s.Y)(e$,{isSelected:(null==n?void 0:n.title)===e.title,title:e.title},e.title)})]})}function e$(e){var n=e.isSelected,t=e.title;return(0,s.FD)(eP.iy,{id:t,textValue:t,children:[(0,s.Y)(_.EY,{children:t}),n?(0,s.Y)(ef.A,{}):null]})}var eJ=t(93629),eQ=t(22531),eX=t(90629),e0=t(37743),e1=t(29383),e2=function e(n){var t=this,r=n.initialRelativeUrl,i=n.initialPort,o=n.onChange,a=n.navigateTo;(0,e0._)(this,e),this.history=[],this.historyIndex=-1,this.init=function(e,n){t.history.push({relativeUrl:e,port:n}),t.historyIndex=t.history.length-1,t.notifyChanges()},this.notifyChanges=function(){t.onChange(t.canGoBack(),t.canGoForward(),t.getCurrentRelativeUrl(),t.getCurrentPort(),t.isRefreshing)},this.canGoBack=function(){return t.historyIndex>0},this.canGoForward=function(){return t.historyIndex<t.history.length-1},this.getCurrentRelativeUrl=function(){return t.history[t.historyIndex].relativeUrl},this.getCurrentPort=function(){return t.history[t.historyIndex].port},this.push=function(e,n){(e!==t.getCurrentRelativeUrl()||n!==t.getCurrentPort())&&(t.history=t.history.slice(0,t.historyIndex+1),t.history.push({relativeUrl:e,port:n}),t.historyIndex=t.history.length-1),t.notifyChanges()},this.relativeUrlUpdate=function(e){t.push(e,t.getCurrentPort())},this.back=function(){P({actionType:"history_back"}),t.canGoBack()&&(t.historyIndex-=1,t.navigate(t.getCurrentRelativeUrl(),t.getCurrentPort()))},this.forward=function(){P({actionType:"history_forward"}),t.canGoForward()&&(t.historyIndex+=1,t.navigate(t.getCurrentRelativeUrl(),t.getCurrentPort()))},this.navigate=function(e,n){var r=null!=n?n:t.getCurrentPort();t.navigateTo.current(e,r),t.push(e,r)},this.refresh=function(){var e,n;P({actionType:"refresh"}),t.isRefreshing=!0,t.notifyChanges(),t.navigateTo.current(null!=(e=t.getCurrentRelativeUrl())?e:"/",null!=(n=t.getCurrentPort())?n:80).finally(function(){t.isRefreshing=!1,t.notifyChanges()})},this.setPort=function(e){var n=t.getCurrentRelativeUrl();t.navigate(n,e)},this.onChange=o,this.isRefreshing=!1,this.navigateTo=a,this.init(r,i)};function e4(e){var n,t=e.iframeSrc,r=e.port,i=e.path,o=e.navigateThroughWorkspaceDevtools,a=(0,F._)(e,["iframeSrc","port","path","navigateThroughWorkspaceDevtools"]);if(o&&"id"in a){var l=(0,y.jq)(t,r);l.searchParams.set("initialPath",i),l.searchParams.set("id",a.id),n=l.href}else{var s=new URL(i,t);r&&(s=(0,y.jq)(s.toString(),r)),n=s.toString()}return n}var e5=t(83415),e3=t(33781),e6=(0,t(49045).v)(["width","height","transform","borderRadius","border","colorScheme"]),e8=e6.cssVars,e7=e6.styleTokens,e9=80;function ne(e,n){var t=function(e,n){var t,r,i,o=void 0;if((null==e||null==(t=e.ports)?void 0:t.type)==="external")o=null==e||null==(i=e.ports)?void 0:i.port;else if((null==e||null==(r=e.ports)?void 0:r.type)==="local"){var a=n.find(function(n){var t;return n.configuration.localPort===(null==(t=e.ports)?void 0:t.port)});o=null==a?void 0:a.configuration.externalPort}return o}(e,n);return t?t:n.length>0?n.find(function(e){return 80===e.configuration.externalPort})?80:n[0].configuration.externalPort:void 0}var nn=(0,x.x)({screenshotWrapper:{width:"100%",height:"100%",backgroundSize:"cover"},iframeWrapper:[C.wp.flex.growAndShrink(1),C.wp.overflow("hidden"),{'&[data-is-readonly-preview="true"]':[{cursor:"not-allowed"}]}],iframeMiddle:[C.wp.position.relative,{borderRadius:e7.borderRadius,border:e7.border,width:e7.width,height:e7.height}],iframeInner:[C.wp.position.absolute,{top:0,left:0,overflow:"hidden",width:e7.width,height:e7.height,transform:e7.transform,transformOrigin:"top left"}],scalingFactor:[C.wp.color.foregroundDimmest,C.wp.fontSize(A.LU.fontSizeSmall),{position:"absolute",top:46,left:0,right:0,textAlign:"center"}],desktopAppWebview:[C.wp.flex.growAndShrink(1),{border:"none",backgroundColor:A.LU.white}],iframe:[C.wp.flex.growAndShrink(1),{border:"none",display:"block",backgroundColor:A.LU.white,colorScheme:e7.colorScheme}],self:[C.wp.backgroundColor.backgroundHigher,C.wp.height("100%"),{overflow:"hidden"}]}),nt=(0,c.forwardRef)(function(e,n){var t,x,C,_,D,E,I,F,L,U,N,O,M,B,H,z,W,G,V,j,Z,q,K,J,Q,X,ee,en,et,er,ei,ea,el,es,ec,eu,ed,ep,ef,eh,em,eg,ev,ew,ey,eb,eS,eA,ex,eC,e_,ek,eE,eR,eI,eF,eT,eP,eL,eU,eN,eO,eM,eB,eH,ez,eW=e.initialPort,eV=e.initialPath,ej=void 0===eV?"/":eV,eZ=e.shouldShowAgentDeployBanner,eq=e.openPane,eK=e.containerRef,e$=e.openNetworkingTool,e0=e.ports,e6=e.container,e7=e.className,e9=e.previewScreenSize,ne=e.setPreviewScreenSize,nt=e.onCurrentRelativeUrlChanged,nr=e.isMobilePIP,ni=e.readonlyBannerVariant,no=void 0===ni?"default":ni,na=(0,a._)((0,c.useState)(!0),2),nl=na[0],ns=na[1],nc=(0,a._)((0,c.useState)(!1),2),nu=nc[0],nd=nc[1],np=(0,e5.rN)(),nf=(0,e5.nb)(),nh=(0,c.useId)(),nm=(0,h.A)(),ng=(0,p.A)(),nv=(0,Y.qX)(),nw=(0,b.th)(eW),ny=(0,c.useRef)(null),nb=(0,c.useRef)(!1),nS=(0,a._)((0,c.useState)(0),2),nY=nS[0],nA=nS[1],nx=(t=({desiredScreenSize:e9}).desiredScreenSize,C=(x=(0,a._)((0,c.useState)(void 0),2))[0],_=x[1],{resizeRef:(0,g.A)(function(e){_(e)}),screenSize:(0,c.useMemo)(function(){if(t&&C){var e=C.width-80,n=C.height-80,r=t.screen,i=r.width,o=r.height,a=i/o,l=n*a,s=e,c=e/a;l<=e&&(s=l,c=n);var u=Math.min(s/i,c/o);return{width:i,height:o,scaledWidth:s,scaledHeight:c,scale:u}}},[t,C])}),nC=nx.resizeRef,n_=nx.screenSize,nk=(0,c.useMemo)(function(){return!ng&&!nv&&!nw},[ng,nv,nw]),nD=(0,y.Ik)({ports:e0,container:e6,addDevToolsSuffix:nk}),nE=(0,c.useMemo)(function(){return!(null==nD?void 0:nD.reachability.dotdev)&&!(null==nD?void 0:nD.reachability.replCo)&&!nu},[nD,nu]),nR=null!=nD,nI=(0,S.w)(e0),nF=(0,m.g)(),nT=(D=ny,E=(0,a._)((0,c.useState)({visible:new u.N(!1)}),1)[0],I=(0,c.useRef)(null),F=(0,c.useCallback)(function(e){if("screenshot"===e.type){var n;null==(n=I.current)||n.call(I,e.result.ok?e.result.data:null)}},[]),L=(0,c.useCallback)((0,r._)(function(){return(0,l.YH)(this,function(e){return[2,Promise.race([new Promise(function(e){var n,t;I.current=e,null==(t=D.current)||null==(n=t.contentWindow)||n.postMessage({type:"takeScreenshot",source:"manual"},"*")}),new Promise(function(e){setTimeout(function(){return e(null)},3e3)})]).finally(function(){I.current=null})]})}),[D]),(0,c.useEffect)(function(){return E.visible.subscribe(function(e){var n,t;null==(t=D.current)||null==(n=t.contentWindow)||n.postMessage({type:"drawToolsVisibility",source:"manual",visibility:e},"*")})},[D,E]),(0,c.useMemo)(function(){return{state:E,onReceiveDrawEvent:F,onTakeScreenshot:L}},[F,E,L])),nP=(U=(0,c.useRef)([]),N=(0,w.I)(function(e){return(0,r._)(function(){var n;return(0,l.YH)(this,function(t){return(n=U.current,U.current=[],n&&n.length)?[2,e.agentToolWebviewLogs.store.rpc(n)]:[2]})})},[]),O=(0,c.useMemo)(function(){return(0,d.A)((0,r._)(function(){return(0,l.YH)(this,function(e){return[2,null==N?void 0:N()]})}),{wait:500})},[N]),(0,c.useCallback)(function(e,n){U.current.push({method:e,message:n}),O()},[O]));(0,c.useEffect)(function(){ng&&nR&&ny.current.addEventListener("dom-ready",function(){nb.current=!0})},[ng,nR]);var nL=(0,c.useCallback)((M=(0,r._)(function(e,n){var t,r;return(0,l.YH)(this,function(i){return ny.current&&(null==(t=ny.current)?void 0:t.contentWindow)&&(null==nD?void 0:nD.iframeSrc)?(r=e4({id:nh,iframeSrc:nD.iframeSrc,port:n,path:e,navigateThroughWorkspaceDevtools:nk}),ny.current.src=r,[2,new Promise(function(e){var n,t,r=function(){var e,n;clearTimeout(a),null==(e=ny.current)||e.removeEventListener("load",i),null==(n=ny.current)||n.removeEventListener("error",o)},i=function(){r(),e()},o=function(){r(),e()},a=setTimeout(function(){r(),e()},1e4);null==(n=ny.current)||n.addEventListener("load",i),null==(t=ny.current)||t.addEventListener("error",o)})]):[2]})}),function(e,n){return M.apply(this,arguments)}),[nh,nk,nD]),nU=(0,f.A)(nL),nN=(0,a._)((0,c.useState)(null),2),nO=nN[0],nM=nN[1],nB=(0,c.useCallback)(function(e){return nM(e)},[nM]),nH=(0,Y.GK)({isSupported:nv,navigateIframeRef:nU,onReceiveWebviewLog:nP,onReceiveWebviewScreenshot:nB,initialPort:eW,initialPath:ej,baseUrl:null==nD?void 0:nD.baseUrl}),nz=(H=(B={replId:nm,webviewId:nh,isHTML:nF,iframeOrWebviewRef:ny,iframeSrc:null==nD?void 0:nD.iframeSrc,onDevtoolsErrorCountChange:nA,onReceiveWebviewLog:nP,onReceiveDrawEvent:nT.onReceiveDrawEvent,bonsaiWebviewBridge:nH,onThirdPartyCookieCheck:function(e){e||ns(!1)}}).replId,z=B.webviewId,W=B.isHTML,G=B.iframeOrWebviewRef,V=B.iframeSrc,j=B.onDevtoolsErrorCountChange,Z=B.onReceiveDrawEvent,q=B.onReceiveWebviewLog,K=B.bonsaiWebviewBridge,J=B.onThirdPartyCookieCheck,X=(Q=(0,a._)((0,c.useState)({state:"loading",relativeUrl:null}),2))[0],ee=Q[1],en=(0,p.A)(),(0,c.useEffect)(function(){if(en&&V){if(!G.current)throw Error("Expected iframe to be defined when iframerc exists");var e=G.current,n=new URL(V);return e.addEventListener("did-navigate",t),e.addEventListener("did-navigate-in-page",t),function(){e.removeEventListener("did-navigate",t),e.removeEventListener("did-navigate-in-page",t)}}function t(e){var t=new URL(e.url),r=t.pathname+t.search+t.hash;if(t.hostname!==n.hostname)return void ee(function(e){return"external-page"===e.state?e:{state:"external-page",relativeUrl:null}});ee(function(e){return"active"===e.state&&e.relativeUrl===r?e:{state:"active",relativeUrl:r}})}},[en,V,G]),(0,c.useEffect)(function(){if(K)return K.path.subscribe(function(e){ee(function(n){return"active"===n.state&&"path"===n.relativeUrl?n:{state:"active",relativeUrl:e}})})},[K]),(0,c.useEffect)(function(){if(!en&&!K&&V){var e=new URL(V);return window.addEventListener("message",n),function(){window.removeEventListener("message",n)}}function n(n){if(n.origin&&"null"!==n.origin){if(new URL(n.origin).hostname===e.hostname&&"object"===(0,eQ._)(n.data)&&(null==(t=n.data)?void 0:t.type)){var t,r=n.data;if(null==r||!r.id||r.id===z)switch(r.type){case"event":var i=n.data,a=i.event,l=i.payload;"error"===a?eX.Cp(l):(0,T.u4)(a,(0,eJ._)((0,o._)({},l),{replId:H,isHTML:W}));break;case"show-badge":j(n.data.count);break;case"forward-log":q(r.method,r.message);break;case"screenshot":Z(r);break;case"third-party-cookie-check":J(r.payload.enabled);break;case"page-navigation":if(r.payload.isExternal)return void ee(function(e){return"external-page"===e.state?e:{state:"external-page",relativeUrl:null}});var s=r.payload.relativeUrl;ee(function(e){return"active"===e.state&&e.relativeUrl===s?e:{state:"active",relativeUrl:s}})}}}}},[H,z,en,W,V,G,j,q,Z,K,J]),{webviewPageState:X}).webviewPageState;(0,c.useEffect)(function(){nt&&nz.relativeUrl&&nt(nz.relativeUrl)},[nt,nz]);var nW=(0,c.useCallback)((et=(0,r._)(function(e,n){var t;return(0,l.YH)(this,function(r){return(nA(0),nT.state.visible.set(!1),nD)?ng?nb.current?(t=e4({id:nh,iframeSrc:nD.iframeSrc,port:n,path:e,navigateThroughWorkspaceDevtools:nk}),[2,ny.current.loadURL(t)]):[2]:(nH&&nH.handleNavigateTo({port:null!=n?n:80,path:e,base:nD.baseUrl}),[2,nL(e,n)]):[2]})}),function(e,n){return et.apply(this,arguments)}),[nT.state.visible,nD,ng,nH,nL,nh,nk]),nG=(ei=(er={initialPort:eW,initialPath:ej,presentationalUrl:null==nD?void 0:nD.presentationUrl,webviewPageState:nz,navigateTo:function(e,n){return nW(e,n)}}).initialPort,ea=er.initialPath,el=er.presentationalUrl,es=er.webviewPageState,ec=er.navigateTo,ed=(eu=(0,a._)((0,c.useState)(!1),2))[0],ep=eu[1],eh=(ef=(0,a._)((0,c.useState)(!1),2))[0],em=ef[1],ev=(eg=(0,a._)((0,c.useState)("Loading..."),2))[0],ew=eg[1],eb=(ey=(0,a._)((0,c.useState)(80),2))[0],eS=ey[1],ex=(eA=(0,a._)((0,c.useState)(!1),2))[0],eC=eA[1],e_=(0,c.useCallback)(function(e,n,t,r,i){ep(e),em(n),ew(t),eS(r),eC(i)},[]),ek=(0,f.A)(ec),eE=(0,f.A)(ei),eR=(0,f.A)(ea),eI=(0,e1.A)(function(){return new e2({initialRelativeUrl:eR.current,initialPort:eE.current,onChange:e_,navigateTo:ek})},[eR,eE,e_,ek]),(0,c.useEffect)(function(){"loading"===es.state&&eE.current!==eb&&eI.setPort(eE.current)},[ei,eE,eI,eb,es]),(0,c.useEffect)(function(){"active"===es.state&&eI.relativeUrlUpdate(es.relativeUrl)},[es.state,es.relativeUrl,eI]),(0,c.useEffect)(function(){eI.navigate(eR.current,ei)},[ei,eR,eI]),eF=(0,c.useCallback)(function(){P({actionType:"navigated_to",path:ev}),eI.navigate(ev)},[ev,eI]),eT=(0,c.useCallback)(function(){return(0,y.jq)(el||"",eb)+ev},[ev,el,eb]),eP=(0,c.useCallback)(function(){return eI.back()},[eI]),eL=(0,c.useCallback)(function(){return eI.forward()},[eI]),eU=(0,c.useCallback)(function(){return eI.refresh()},[eI]),eN=(0,c.useCallback)(function(e){return eI.setPort(e)},[eI]),{canNavigateBack:ed,canNavigateForward:eh,navigateBack:eP,navigateForward:eL,canNavigateToInputRelativeUrl:(0,c.useMemo)(function(){return ev!==es.relativeUrl},[ev,es.relativeUrl]),navigateToInputRelativeUrl:eF,inputRelativeUrl:ev,setInputRelativeUrl:ew,refresh:eU,setPort:eN,selectedPort:eb,getExternalUrl:eT,isRefreshing:ex}),nV=(0,S.ff)(nG.selectedPort);(0,c.useEffect)(function(){nV&&nV.configuration.isLocalhost&&"loading"===nz.state&&nG.refresh()},[nG,nV,nz.state]),(0,c.useImperativeHandle)(n,function(){return{refresh:function(){nG.refresh()},navigateTo:nW}},[nW,nG]);var nj=(0,e3.D)().isDarkColorScheme,nZ=!nr,nq=!nH&&nZ;return((0,c.useEffect)(function(){nH&&nH.setInsets({top:nw?48:40})},[nH,nw]),nD)?(eO=nr||nw||!nO?(0,s.Y)(k.S,{css:nn.iframeWrapper,"data-is-readonly-preview":nw,innerRef:nC,align:"center",justify:"center",children:(0,s.Y)(k.S,{style:(eB={overflow:"hidden"},(0,i._)(eB,e8.width,n_?"".concat(n_.scaledWidth,"px"):"100%"),(0,i._)(eB,e8.height,n_?"".concat(n_.scaledHeight,"px"):"100%"),(0,i._)(eB,e8.borderRadius,n_?A.LU.space4:"0"),(0,i._)(eB,e8.border,n_?"1px solid ".concat(A.LU.outlineDefault):"none"),eB),css:nn.iframeMiddle,children:(0,s.Y)(k.S,{style:(eH={},(0,i._)(eH,e8.width,n_?"".concat(n_.width,"px"):"100%"),(0,i._)(eH,e8.height,n_?"".concat(n_.height,"px"):"100%"),(0,i._)(eH,e8.transform,"scale(".concat(null!=(eM=null==n_?void 0:n_.scale)?eM:1,")")),eH),css:nn.iframeInner,children:ng?(0,s.Y)("webview",(0,o._)({"data-cy":"ws-webview",ref:ny,src:e4({iframeSrc:nD.iframeSrc,port:eW,path:ej,id:nh,navigateThroughWorkspaceDevtools:nk}),style:(0,i._)({},e8.colorScheme,nj?"dark":"light"),css:nn.desktopAppWebview},v.A)):(0,s.Y)("iframe",(0,o._)({title:"webview","data-cy":"ws-webview",ref:ny,src:e4({iframeSrc:nD.iframeSrc,port:eW,path:ej,id:nh,navigateThroughWorkspaceDevtools:nk}),style:(0,i._)({},e8.colorScheme,nj?"dark":"light"),css:nn.iframe},v.A))})})}):(0,s.Y)("div",{css:nn.screenshotWrapper,style:{backgroundImage:"url(".concat(nO,")")}}),nw)?(0,s.FD)(k.S,{className:e7,css:nn.self,innerRef:eK,children:[nZ&&"none"!==no?(0,s.Y)(R,{isLivePreview:"default"===no}):null,eO]}):(ez=nr?null:nv?(0,s.Y)($,{webviewPageState:nz,navigationState:nG,bonsaiWebviewBridge:nH}):(0,s.Y)(eG,{replId:nm,url:nD.presentationUrl,webviewPageState:nz,navigationState:nG,forwardedPorts:nI,devtoolsErrorCount:nY,onToggleDevtools:function(){if(P({actionType:"devtools_opened"}),nA(0),!ng){var e,n;null==(n=ny.current)||null==(e=n.contentWindow)||e.postMessage({type:"toggleDevtools",source:"manual"},"*");return}var t=ny.current;t&&nb&&(t.isDevToolsOpened()?t.closeDevTools():t.openDevTools())},onOpenPortSettings:e$,screenSize:e9,setScreenSize:ne}),(0,s.FD)(k.S,{className:e7,css:nn.self,innerRef:eK,children:[ez,nq&&eq?(0,s.Y)(eY,{replId:nm,shouldShowAgentDeployBanner:eZ,onClick:function(){return eq({type:"deployments",flow:{skipIntro:eZ,isAgentDeployment:eZ}})}}):null,nE?(0,s.Y)(eD,{reachability:nD.reachability,navigationState:nG,onDismiss:function(){return nd(!0)}}):null,nE||nl||np?null:(0,s.Y)(eo,{navigationState:nG,onDismiss:function(){return nf(!0)}}),n_?(0,s.FD)(k.S,{css:nn.scalingFactor,children:[Math.round(100*n_.scale),"%"]}):null,eO]})):null})},77775:(e,n,t)=>{"use strict";t.d(n,{M:()=>c,v:()=>s});var r=t(88263),i=t(58370),o=t(76126),a=t(10429),l=t(69258),s="Unsupported",c={Content:function(){return(0,r.Y)(a.S,{style:{padding:32},children:(0,r.Y)(o.EY,{variant:"text",multiline:!1,children:"Sorry, this feature is not supported."})})},Icon:function(){return(0,r.Y)(l.A,{})},getTitle:function(){return s},category:i.bY.Other,decode:function(){return{type:"commands",data:{autoFocus:!1}}}}},77967:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(88263),a=t(71117);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M7.436 3.506A.75.75 0 0 1 8 3.25h13A2.75 2.75 0 0 1 23.75 6v12A2.75 2.75 0 0 1 21 20.75H8a.75.75 0 0 1-.564-.256l-7-8a.75.75 0 0 1 0-.988l7-8ZM8.34 4.75 1.997 12l6.343 7.25H21A1.25 1.25 0 0 0 22.25 18V6A1.25 1.25 0 0 0 21 4.75H8.34Zm3.13 3.72a.75.75 0 0 1 1.06 0L15 10.94l2.47-2.47a.75.75 0 1 1 1.06 1.06L16.06 12l2.47 2.47a.75.75 0 1 1-1.06 1.06L15 13.06l-2.47 2.47a.75.75 0 1 1-1.06-1.06L13.94 12l-2.47-2.47a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"})}))}},78432:(e,n,t)=>{"use strict";t.d(n,{T:()=>D});var r=t(17844),i=t(93629),o=t(88263),a=t(1230),l=t(54319),s=t(47630),c=t(53231),u=t(83846),d=t(70605),p=t(21462);t(70415);var f=t(45263),h=t(64583),m=t(48521),g=t(46603),v=t(10429),w=m.kL.min(400),y=(0,h.x)({root:[m.wp.width("100%")],narrowContainer:[m.wp.flex.column,m.wp.gap(8),m.wp.width("100%"),m.wp.overflowX("auto"),m.wp.scrollbar.hidden,(0,u._)({margin:"0 auto"},w,{display:"none"})],narrowRow:[m.wp.flex.row,m.wp.gap(8),m.wp.width("100%"),{display:"flex",flexWrap:"nowrap",paddingLeft:16,"&::after":{content:'""',width:8,flexShrink:0}}],wideContainer:[m.wp.gap(8),m.wp.width("100%"),(0,u._)({display:"none"},w,{display:"flex",maxWidth:500,flexWrap:"wrap",alignSelf:"center",justifyContent:"center",width:"fit-content"})],button:[m.wp.maxWidth(350),(0,u._)({justifyContent:"flex-start",fontSize:f.LU.fontSizeDefault,color:f.LU.foregroundDimmer,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},w,{width:"auto",justifyContent:"center"})]});function b(e){var n=e.prompts,t=e.onClick,a=(0,p.useMemo)(function(){var e=Math.ceil(n.length/2);return{halfLength:e,firstRow:n.slice(0,e),secondRow:n.slice(e)}},[n]),l=a.halfLength,s=a.firstRow,c=a.secondRow,u=(0,p.useMemo)(function(){return n.slice(0,6)},[n]);return(0,o.FD)(v.S,{css:y.root,children:[(0,o.FD)(v.S,{css:y.narrowContainer,children:[(0,o.Y)(v.S,{css:y.narrowRow,children:s.map(function(e,n){return(0,d.n)(S,(0,i._)((0,r._)({},e),{index:n,key:e.description,onClick:function(){return t(e)}}))})}),(0,o.Y)(v.S,{css:y.narrowRow,children:c.map(function(e,n){return(0,d.n)(S,(0,i._)((0,r._)({},e),{index:n+l,key:e.description,onClick:function(){return t(e)}}))})})]}),(0,o.Y)(v.S,{css:y.wideContainer,row:!0,children:u.map(function(e,n){return(0,d.n)(S,(0,i._)((0,r._)({},e),{index:n,key:e.description,onClick:function(){return t(e)}}))})})]})}function S(e){(0,l.qK)();var n=void 0,t=null!=n?n:e.description;return(0,o.Y)(g.$n,{css:y.button,text:t,onClick:function(n){e.onClick()},"aria-label":t})}var Y=t(17295),A=t(39782),x=t(76126),C=t(87713),_=t(69258),k=(0,h.x)({root:[m.wp.overflowY("auto"),m.wp.flex.growAndShrink(1),m.wp.flex.column,m.wp.align.center,m.wp.width("100%"),{margin:"0 auto",containerType:"inline-size"}],content:[m.wp.flex.column,m.wp.gap(24),m.wp.py(32),m.wp.align.center,m.wp.justify.center,m.wp.width("100%"),m.wp.minHeight("100%"),m.wp.overflowX("auto")],headerSection:[m.wp.maxWidth(320),m.wp.px(8),{textAlign:"center"}],promptSuggestionsContainer:[m.wp.width("100%"),m.wp.overflowX("auto"),m.wp.scrollbar.hidden,m.wp.pb(8)],promptSuggestionsContent:[m.wp.flex.column,m.wp.align.center,m.wp.width("100%"),{maxWidth:"100%"}],headerIcon:[{color:f.LU.outlineStronger}],footerContainer:[m.wp.maxWidth("100%"),m.wp.px(8),{textAlign:"center"}],warning:[m.wp.m(8),m.wp.maxWidth(400),{textAlign:"center"}],warningBox:[m.wp.border({color:f.LU.orangeDimmer}),m.wp.borderRadius(),{backgroundColor:f.LU.orangeDimmest}],warningIconText:[{color:f.LU.orangeStrongest}]});function D(e){var n,t,c,u,d,f=(d=({sessionType:e.sessionType}).sessionType,(0,p.useMemo)(function(){return d===a.dF3.CHAT?[{icon:(0,o.Y)(Y.A,{}),description:"Inspect for errors"},{icon:(0,o.Y)(Y.A,{}),description:"Improve the visual design"},{icon:(0,o.Y)(Y.A,{}),description:"Brainstorm new features"},{icon:(0,o.Y)(Y.A,{}),description:"Add dark mode toggle"},{icon:(0,o.Y)(Y.A,{}),description:"Optimize for mobile"},{icon:(0,o.Y)(Y.A,{}),description:"Explain this code"}]:[{icon:(0,o.Y)(Y.A,{}),description:"Check my app for bugs"},{icon:(0,o.Y)(Y.A,{}),description:"Add payment processing"},{icon:(0,o.Y)(Y.A,{}),description:"Connect with an AI Assistant"},{icon:(0,o.Y)(Y.A,{}),description:"Add SMS message sending"},{icon:(0,o.Y)(Y.A,{}),description:"Add a database"},{icon:(0,o.Y)(Y.A,{}),description:"Add authenticated user login"}]},[d])),h=(n=e.sessionType,t=(0,l.jt)(),c=(0,l.NC)(),u=(0,s.Rj)(function(){return c.sessions.query({types:[a.dF3.CHAT]}).map.select(function(e){return e.size>0})},[c],{default:!0}),n===a.dF3.CHAT&&!!t&&!u);return(0,o.Y)(R,(0,i._)((0,r._)({},e),{showAssistantWarning:h,promptSuggestions:f}))}function E(e){return(0,o.FD)(v.S,{align:"center",gap:8,css:k.warning,children:[(0,o.FD)(v.S,{css:k.warningBox,p:8,children:[(0,o.FD)(v.S,{css:k.warningIconText,row:!0,gap:6,justify:"center",align:"center",children:[(0,o.Y)(_.A,{}),(0,o.Y)(x.EY,{children:"Warning"})]}),(0,o.Y)(x.EY,{children:"Assistant works best for users comfortable with file management and basic troubleshooting."})]}),(0,o.Y)(x.EY,{color:"dimmer",children:"Use Agent for the safest app building experience."}),(0,o.Y)(g.$n,{onClick:e.onSwitchToAgent,iconLeft:(0,o.Y)(A.l,{size:16}),text:"Switch to Agent"})]})}function R(e){var n=e.titleContent,t=e.showPromptSuggestions,r=e.sessionType,i=e.onPromptSuggestionClick,s=e.promptSuggestions,u=e.footerContent,d=e.onSwitchToAgent,p=e.showAssistantWarning,f=r===a.dF3.CHAT,h=f?l.BP:l.g$;return(0,o.Y)(v.S,{css:k.root,children:(0,o.FD)(v.S,{css:k.content,children:[(0,o.FD)(v.S,{css:k.headerSection,gap:16,children:[(0,o.Y)(v.S,{gap:8,align:"center",children:(0,o.FD)(o.FK,{children:[(0,o.Y)(C.A,{size:48,css:k.headerIcon,style:{transform:"scale(1.33)"}}),null!=n?n:(0,o.Y)(v.S,{row:!0,gap:4,align:"center",children:(0,o.Y)(x.Y9,{level:1,variant:"subheadBig",children:"New chat with ".concat(h)})})]})}),p?null:(0,o.Y)(x.EY,{color:"dimmest",children:f?l.C3:l.RB})]}),p&&d?(0,o.Y)(E,{onSwitchToAgent:d}):null,(void 0===t||t)&&!p?(0,o.Y)(v.S,{css:k.promptSuggestionsContainer,pb:8,children:(0,o.Y)(v.S,{css:k.promptSuggestionsContent,children:(0,o.Y)(b,{onClick:function(e){var n,t=null!=(n=e.promptToFill)?n:e.description;(0,c.u4)(c.AZ.ASSISTANT_USED,{action:"prompt_suggestion_clicked",title:e.title}),null==i||i({intent:e.intent,text:t})},prompts:s})})}):null,u?(0,o.Y)(v.S,{css:k.footerContainer,children:u}):null]})})}},78465:(e,n,t)=>{"use strict";t.d(n,{m:()=>l,y:()=>s});var r=t(12694),i=t(88263),o=t(21462),a=t(96556),l=(0,o.createContext)({items:[],selectedItems:new Set,handleDeselectAll:function(){},setSelectedItems:function(){},sortDescriptor:void 0,setSortDescriptor:function(){},title:"",titleId:"",loading:!1});function s(e){var n=e.children,t=e.items,s=e.title,c=e.loading,u=(0,r._)((0,o.useState)(new Set),2),d=u[0],p=u[1],f=(0,r._)((0,o.useState)(),2),h={items:t,selectedItems:d,setSelectedItems:p,handleDeselectAll:function(){p(new Set)},sortDescriptor:f[0],setSortDescriptor:f[1],title:s,titleId:(0,a.c)()("title"),loading:c};return(0,i.Y)(l.Provider,{value:h,children:n})}},78506:e=>{e.exports={root:"StatusBar_root__gmUta",inner:"StatusBar_inner__0Llrv",surface:"StatusBar_surface__uvty0",text:"StatusBar_text__uExyc"}},78535:(e,n,t)=>{"use strict";t.d(n,{A:()=>C});var r=t(17844),i=t(93629),o=t(12694),a=t(88263),l=t(21462),s=t(7191),c=t(46726),u=t(41554),d=t(8829),p=t(57679),f=t(68741),h=t(45263),m=t(64583),g=t(973),v=t(48521),w=t(38292),y=t(77089),b=t(75414),S=t(6034),Y=t(37037),A=t(23076),x=(0,m.x)({group:[v.wp.display.flex,{gap:h.LU.space4},v.wp.position.relative],dateInput:[y.cO,v.wp.flex.row,{gap:h.LU.space4,'&[data-invalid="true"]':{"&, &:hover":{borderColor:h.LU.accentNegativeStronger}}}],dateSegment:[v.wp.borderRadius(2),{outline:"none","&[data-focused=true]":{outline:"2px solid ".concat(h.LU.accentPrimaryDefault),outlineOffset:1}}],iconButton:[v.wp.position.absolute,v.wp.top("50%"),v.wp.right(0),{transform:"translateY(-50%)"}],calendar:[v.wp.p(8)],calendarHeader:[v.wp.flex.row,v.wp.align.center,v.wp.justify.spaceBetween],calendarHeaderText:[v.wp.fontSize(h.LU.fontSizeDefault),v.wp.color.foregroundDefault,v.wp.fontWeight.normal],arrowButton:[g.b.listItem,v.wp.borderRadius("default"),v.wp.p(4),{appearance:"none",background:"transparent",border:"none"}],calendarGrid:[v.wp.mt(8),{th:[v.wp.height(14),v.wp.color.foregroundDimmer,v.wp.fontWeight.normal,v.wp.pb(4)]}],calendarCell:[g.b.listItem,v.wp.flex.column,v.wp.fontSize(h.LU.fontSizeDefault),v.wp.width(32),v.wp.height(28),v.wp.borderRadius("default"),{textAlign:"center",justifyContent:"center",'&[data-outside-visible-range="true"]':[v.wp.display.none],'&[data-selected="true"]':{"&, &:hover":[v.wp.backgroundColor.accentPrimaryDimmer]},'&[data-disabled="true"]':{opacity:.5},'&[data-unavailable="true"]':{opacity:.5}}]});function C(e){var n=(0,o._)((0,l.useState)(!1),2),t=n[0],h=n[1];return(0,a.Y)(s.lr,(0,i._)((0,r._)({},e),{children:(0,a.FD)(c.Y,{css:x.group,children:[(0,a.Y)(u.J3,{css:x.dateInput,children:function(e){return(0,a.Y)(u.Eu,{segment:e,css:x.dateSegment})}}),(0,a.FD)(b.Wv,{label:"Calendar",isOpen:t,onOpenChange:h,children:[(0,a.Y)(w.K0,{alt:"Open calendar",tooltipBehavior:"hidden",css:x.iconButton,children:(0,a.Y)(A.A,{})}),(0,a.FD)(d.Vv,{css:x.calendar,children:[(0,a.FD)("header",{css:x.calendarHeader,children:[(0,a.Y)(p.$,{slot:"previous",css:x.arrowButton,children:(0,a.Y)(S.A,{})}),(0,a.Y)(f.D,{css:x.calendarHeaderText}),(0,a.Y)(p.$,{slot:"next",css:x.arrowButton,children:(0,a.Y)(Y.A,{})})]}),(0,a.Y)(d.r8,{css:x.calendarGrid,children:function(e){return(0,a.Y)(d.Zr,{date:e,css:x.calendarCell})}})]})]})]})}))}},78628:(e,n,t)=>{"use strict";t.d(n,{X:()=>u});var r=t(12584),i=t(41114),o=t(8026),a=t(48385);function l(){var e=(0,r._)(["\n  fragment ComponentsReplActionsFeaturedRepl on Repl {\n    id\n    isPrivate\n    isFeaturedRepl\n    publicForkCount\n    timeUpdated\n    org {\n      id\n    }\n  }\n"]);return l=function(){return e},e}function s(){var e=(0,r._)(["\n  fragment ComponentsReplActions on Repl {\n    id\n    url\n    user {\n      id\n      username\n    }\n    ...DeleteReplDialogRepl\n    ...EditReplFormRepl\n    ...ComponentsReplActionsFeaturedRepl\n    owner {\n      __typename\n      ... on Team {\n        id\n      }\n      ... on User {\n        id\n      }\n    }\n    authorizations {\n      deleteRepl {\n        isAuthorized\n      }\n      fork {\n        isAuthorized\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return s=function(){return e},e}var c=(0,i.J1)(l()),u=(0,i.J1)(s(),o.kh,a.pV,c)},78991:(e,n,t)=>{"use strict";t.d(n,{v:()=>d});var r=t(88263),i=t(34384),o=t(5504),a=t(53231),l=t(50051),s=t(80295),c=t(63756),u=t(58481);function d(e){var n,t=(0,i.ET)(),d=t.orgId,p=t.orgSlug,f=(0,s.e)(null!=(n=e.sessionId)?n:null),h=(0,o._P)({controlName:"flag-no-header-usage"}),m=d&&p?"".concat((0,l.EG)({slug:p}).usage.href,"#agent"):"/usage#agent";return(0,r.Y)(c.A,{alt:f&&h?"Your usage for this chat: $".concat((f/100).toFixed(2)):"Usage Page",href:m,target:"_blank",onClick:function(){(0,a.u4)(a.AZ.AGENT_USED,{action:"opened_usage_link",intent_type:null,model:null,user_model_selection:null,message_content:null,message_source:"chat_pane",message_surface:"workspace_ai_pane"})},children:(0,r.Y)(u.A,{})})}},79129:(e,n,t)=>{"use strict";t.d(n,{o:()=>i});var r=t(21462);function i(e){return(0,r.useCallback)(function(n){return null==e?void 0:e.appendEvent({kind:"agentPlan",planId:n.planId,objective:{description:n.objective},approved:!0,requiresApproval:!1,step:n.step,stackBlueprint:n.stackBlueprint,approvedDesignReferenceFilePath:n.approvedDesignReferenceFilePath})},[e])}},79208:(e,n,t)=>{"use strict";t.d(n,{j:()=>eA});var r=t(83846),i=t(17844),o=t(12694),a=t(88263),l=t(21462),s=t(50534),c=t(50941),u=t(54319),d=t(47630),p=t(36640),f=t(95139),h=t(15811),m=t(49455),g=t(483),v=t(6796),w=t(3272),y=t(58767),b=t(34849),S=t(80112),Y=t(29935),A=t(82643),x=t(72530),C=t(33221),_=t(1230),k=t(31258),D=t(13544),E=t(45263),R=t(46603),I=t(76126),F=t(9969),T=t(10429),P=t(55821),L=t(87523),U=t(84331),N=t(59912),O=t.n(N);function M(e){var n=(0,u.NC)(),t=(0,d.J2)(n.sessions.agent.current),o=(0,d.J2)(e.sessionGroup.session),s=(null==o?void 0:o.id)===(null==t?void 0:t.id),c=(0,l.useMemo)(function(){var n,t=e.sessionGroup.commitRanges[e.sessionGroup.commitRanges.length-1],r=null==t?void 0:t.commitRange[t.commitRange.length-1];return null!=(n=null==r?void 0:r.customSubject)?n:null==r?void 0:r.subject},[e.sessionGroup]);return(0,a.FD)(T.S,{gap:8,clsx:[O().sessionGroup,(0,r._)({},O().sessionGroupActive,s)],children:[(0,a.Y)(z,{title:c,session:o,openSession:e.openSession}),e.sessionGroup.commitRanges.map(function(n){return n.collapsed?(0,a.Y)(B,(0,i._)({range:n.commitRange,isCurrent:s},e),n.commitRange[0].hash):(0,a.Y)(H,(0,i._)({range:n.commitRange,isCurrent:s},e),n.commitRange[0].hash)}),s&&e.agentState?(0,a.Y)(W,{openSession:function(){return o?e.openSession(o):void 0},agentState:e.agentState}):null]})}function B(e){var n=(0,o._)((0,l.useState)(!0),2),t=n[0],r=n[1],i=e.range.length;return(0,a.FD)(T.S,{clsx:O().collapsedSession,children:[(0,a.FD)(T.S,{clsx:O().collapseButton,onClick:function(){return r(!t)},tag:"button",align:"center",justify:"space-between",row:!0,px:16,py:4,children:[(0,a.FD)(I.EY,{color:"dimmest",children:[i," ",(0,k.A)("checkpoints",i)," that"," ",1===i?"was":"were"," rolled back"]}),(0,a.Y)(L.A,{rotate:180*!t})]}),!t&&(0,a.Y)(T.S,{gap:12,px:16,children:e.range.map(function(n){var t;return(0,a.Y)(D.PZ,{variant:e.isCurrent?D.Wf.InActiveSessionList:D.Wf.InSessionList,title:null!=(t=n.customSubject)?t:n.subject,date:new Date(n.committer.date),commitId:n.hash,onRevert:function(){var t,r;return null==(t=e.revertToCommit)?void 0:t.call(e,n.hash,null!=(r=n.customSubject)?r:n.subject,{rollbackDatabase:!1})},onRenameTitle:function(t){var r;return null==(r=e.renameCommit)?void 0:r.call(e,n.hash,t||n.subject)},screenshot:n.screenshotUrl,onOpenCommit:function(){return e.openCommit(n.hash)},isValidTarget:!0,isReverted:!0},n.hash)})})]})}function H(e){return(0,a.Y)(T.S,{gap:12,px:16,children:e.range.map(function(n){var t;return(0,a.Y)(D.PZ,{variant:e.isCurrent?D.Wf.InActiveSessionList:D.Wf.InSessionList,title:null!=(t=n.customSubject)?t:n.subject,date:new Date(n.committer.date),commitId:n.hash,onRevert:function(){var t,r;return null==(t=e.revertToCommit)?void 0:t.call(e,n.hash,null!=(r=n.customSubject)?r:n.subject,{rollbackDatabase:!1})},onRenameTitle:function(t){var r;return null==(r=e.renameCommit)?void 0:r.call(e,n.hash,t||n.subject)},screenshot:n.screenshotUrl,onOpenCommit:function(){return e.openCommit(n.hash)},isValidTarget:!0,isReverted:!1},n.hash)})})}function z(e){var n=e.title,t=e.session,r=e.openSession,i=(0,d.Rj)(function(){return null==t?void 0:t.data.select(function(e){return{title:e.title,created:e.created}})},[t]),o=n||(null==i?void 0:i.title);return(0,a.FD)(T.S,{row:!0,justify:"space-between",px:16,gap:12,clsx:O().sessionTitle,children:[(0,a.FD)(T.S,{clsx:O().growShrink,children:[(0,a.Y)(I.EY,{color:o?void 0:"dimmest",children:o||"Thinking"}),(0,a.Y)(T.S,{children:(0,a.Y)(T.S,{row:!0,py:4,gap:4,align:"center",children:i?(0,a.Y)(F.Dc,{date:i.created,textColor:"dimmest",textVariant:"small",live:!0}):null})})]}),(0,a.Y)(R.$n,{text:"Go to chat",size:"small",variant:"default",iconRight:(0,a.Y)(U.A,{}),onClick:function(){return t?r(t):void 0}})]})}function W(e){var n=(0,d.J2)(e.agentState),t="",r=E.LU.foregroundDimmer;switch(null==n?void 0:n.state){case _.g32.AGENT_STATE_RUNNING:r=E.LU.blurpleStronger,t="Agent is running";break;case _.g32.AGENT_STATE_PAUSING:t="Agent is pausing";break;default:t="Agent is waiting for your response"}return t?(0,a.FD)(T.S,{px:16,row:!0,align:"center",gap:8,justify:"space-between",clsx:O().futureCheckpoint,children:[(0,a.FD)(T.S,{row:!0,align:"center",gap:8,children:[(0,a.Y)(P.A,{color:r}),(0,a.Y)(T.S,{children:(0,a.Y)(I.EY,{children:t})})]}),(0,a.Y)(R.$n,{text:"Continue chat",size:"small",colorway:"blurple",onClick:e.openSession,iconRight:(0,a.Y)(U.A,{})})]}):null}var G=t(21881),V=t(93080),j=t(2703),Z=t.n(j);function q(e){var n,t=e.openPane,r=(0,w.X8)(),i=r.checkpoints,o=r.loading,s=r.renameCommit,c=(0,u.C9)().agentState,p=(0,l.useCallback)(function(e){return t({type:"git",data:{mode:{type:G.C.COMMIT,hash:e}}})},[t]),f=(0,u.NC)(),h=(0,d.J2)(f.sessions.agent.current),m=(0,l.useCallback)((n=(0,Y._)(function(n,t,r){return(0,A.YH)(this,function(i){switch(i.label){case 0:if(!h)return[2];return[4,(0,x.Z)({chatter:f,commitId:n,title:t,onSessionChange:e.openSession,openPane:e.openPane,rollbackDatabase:r.rollbackDatabase,currentSession:h})];case 1:return i.sent(),[2]}})}),function(e,t,r){return n.apply(this,arguments)}),[f,e.openPane,e.openSession,h]),g=(0,l.useRef)("instant");(0,l.useEffect)(function(){g.current="smooth"},[]);var v=(0,l.useRef)(!0),y=(0,l.useRef)(new Map),b=(null==i?void 0:i.ok)?i.value:null,S=!i,_=(null==i?void 0:i.ok)&&0===i.value.length;return o&&(S||_)?(0,a.Y)(C.G,{}):(0,a.Y)(V.y,{padding:"20px 0",scrollCacheKey:"checkpoints",scrollCache:y.current,shouldAutoScrollRef:v,autoScrollBehavior:g.current,children:(0,a.Y)(T.S,{gap:16,children:null==b?void 0:b.map(function(n,r){return(0,a.FD)(l.Fragment,{children:[r>0&&(0,a.Y)(T.S,{clsx:Z().divider}),(0,a.Y)(M,{agentState:c,sessionGroup:n,openSession:e.openSession,openCommit:p,openPane:t,renameCommit:s,revertToCommit:m})]},n.sessionId)})})})}var K=t(51830),$=t(8054),J=t(78991),Q=t(5021),X=t(36112),ee=t(6034),en=t(58746),et=t(57078),er=t(86814),ei=t(13601),eo=t.n(ei),ea=(0,E.CK)("Header.module.css",["--border-color"]);function el(e){var n=e.sessionTitle,t=e.usageButton;return n?(0,a.FD)(T.S,{row:!0,gap:4,align:"center",justify:"center",grow:!0,shrink:!0,children:[t,(0,a.Y)($.n,{variant:"small",multiline:!1,text:n})]}):(0,a.Y)(I.EY,{variant:"small",color:"dimmest",children:"Thinking..."})}function es(){return(0,a.FD)(T.S,{row:!0,gap:6,align:"center",children:[(0,a.Y)(et.A,{size:12}),(0,a.Y)(I.EY,{variant:"small",multiline:!1,children:"History"})]})}function ec(e){return(0,a.Y)(X.ui,{row:!0,align:"end",clsx:eo().root,pt:8,px:8,style:(0,r._)({},ea.borderColor,e.hideButtons?"transparent":E.LU.outlineDimmer),children:(0,a.FD)(X.ui,{row:!0,gap:12,elevated:!e.hideButtons,clsx:eo().surface,align:"center",justify:"space-between",children:["checkpoints"===e.screen?(0,a.FD)(a.FK,{children:[e.hideButtons?null:(0,a.Y)(R.$n,{clsx:eo().buttonLeft,variant:"nofill",size:"small",iconLeft:(0,a.Y)(ee.A,{}),text:"Back",onClick:function(){return e.onAction("goBack")}}),(0,a.Y)(T.S,{grow:!0,shrink:!0,align:"center",justify:"center",children:(0,a.Y)(es,{})}),e.hideButtons?null:(0,a.Y)(R.$n,{disabled:e.disableNewSessionButton,clsx:eo().buttonRight,variant:"nofill",size:"small",iconLeft:(0,a.Y)(er.A,{}),text:"New chat",onClick:function(){return e.onAction("newChat")}})]}):(0,a.FD)(a.FK,{children:[e.hideButtons?null:(0,a.Y)(R.$n,{clsx:eo().buttonLeft,variant:"nofill",size:"small",iconLeft:(0,a.Y)(et.A,{}),text:"History",onClick:function(){return e.onAction("showCheckpoints")}}),(0,a.Y)(T.S,{row:!0,grow:!0,shrink:!0,justify:"center",align:"center",children:e.sessionTitle?(0,a.Y)(el,{sessionTitle:e.sessionTitle,usageButton:e.usageButton}):(0,a.Y)(I.EY,{variant:"small",color:"dimmest",children:"New chat"})}),e.hideButtons?null:(0,a.Y)(R.$n,{disabled:e.disableNewSessionButton,clsx:eo().buttonRight,variant:"nofill",size:"small",iconLeft:(0,a.Y)(er.A,{}),text:"New chat",onClick:function(){return e.onAction("newChat")}})]}),(0,a.Y)(eu,{checkpointMade:e.checkpointMade})]})})}function eu(e){var n=e.checkpointMade,t=(0,o._)((0,l.useState)(!1),2),r=t[0],i=t[1],s=(0,l.useRef)(null),c=(0,l.useCallback)(function(){s.current&&clearTimeout(s.current),i(!0),s.current=setTimeout(function(){i(!1)},4e3)},[]);return(0,d.q3)(n,{next:c}),r?(0,a.FD)(T.S,{row:!0,align:"center",clsx:eo().checkpointMade,gap:4,children:[(0,a.Y)(X.ui,{clsx:eo().checkpointMadeIcon,children:(0,a.Y)(en.A,{size:12})}),(0,a.Y)(X.ui,{clsx:eo().checkpointMadeText,grow:!0,shrink:!0,children:(0,a.Y)(I.EY,{variant:"small",children:"Checkpoint made"})})]}):null}function ed(e){var n=e.session;return(0,K.F)()?(0,a.Y)(Q.L,{}):(0,a.Y)(J.v,{sessionId:null==n?void 0:n.id})}var ep=t(2050),ef=t(38292),eh=t(87713);function em(e){var n=e.screen,t=e.onAction,r=(0,ep.ES)();return(0,l.useEffect)(function(){if("checkpoints"===n)return r(function(){return t("goBack")}),function(){r(null)}},[r,n,t]),(0,a.FD)(a.FK,{children:[(0,a.Y)(ep.cR,{side:"left",children:"checkpoints"===e.screen?null:(0,a.Y)(ef.K0,{size:36,alt:"Chats",onClick:function(){e.onAction("showCheckpoints")},children:(0,a.Y)(et.A,{})})}),(0,a.Y)(ep.cR,{side:"right",children:(0,a.Y)(ef.K0,{size:36,alt:"New chat",onClick:function(){e.onAction("newChat")},children:(0,a.Y)(eh.A,{})})})]})}var eg=t(40836),ev=t(92966);function ew(e){var n,t=(0,f.m5)();return e.isCreatingNewSession||void 0!==e.session?(0,a.Y)(eg.$Y,{children:(0,a.Y)(ev.O,{onNewSession:e.onNewSession,onSessionCreated:e.openSession,onSessionChange:e.openSession,openPane:e.openPane,readFile:e.readFile,session:e.isCreatingNewSession?null:null!=(n=e.session)?n:null,secrets:e.secrets,inputRef:e.inputRef,onPromptSuggestionClick:e.onPromptSuggestionClick,showUserFeedbackButton:t,isAgentPresentationCentered:t})}):(0,a.Y)(C.G,{})}var ey=t(89436),eb=t.n(ey),eS=(0,E.CK)("index.module.css",["--transition-duration"]),eY=function(){};function eA(e){var n,t=(0,p.A)().showError,r=(0,m.o)();return(0,a.Y)(g.S,{sessionId:null==(n=e.session)?void 0:n.id,uploadFiles:r,onError:t,children:(0,a.Y)(w.M_,{children:(0,a.Y)(ex,(0,i._)({},e))})})}function ex(e){var n,t,i=(0,o._)((0,l.useState)("session"),2),p=i[0],m=i[1],Y=(0,o._)((0,l.useState)(!1),2),A=Y[0],x=Y[1],C=(0,l.useRef)(null);(0,S.n)(null!=(n=e.onPlanApproval)?n:eY);var _=(0,g.s)().addAttachments,k=(0,h.A)({addAttachments:_}),D=k.isDraggedOver,E=k.drop,R=(0,o._)((0,l.useState)(null),2),I=R[0],F=R[1],P=e.inputRef;(0,l.useEffect)(function(){null==P||P(I)},[I,P]),(0,l.useEffect)(function(){null==I||I.focus()},[I]);var L=(0,l.useCallback)(function(){setTimeout(function(){null==I||I.animatePlaceholder()})},[I]),U=(0,l.useCallback)(function(){m("session"),x(!0),L()},[L]),N=e.setSession,O=e.session,M=(0,l.useCallback)(function(e){N(e),m("session"),x(!1),L()},[N,L]),B=(0,l.useCallback)(function(e){var n;null==I||null==(n=I.setValue)||n.call(I,e.text),null==I||I.focus()},[I]),H=!!(0,d.J2)((0,b.S)()),z=(0,f.m5)(),W=(0,w.X8)(),G=W.checkpointMade,V=W.checkpoints,j=(0,l.useMemo)(function(){if(!O||!V||!V.ok)return null;var e=V.value.find(function(e){return e.sessionId===O.id});if(!e)return null;var n=e.commitRanges[e.commitRanges.length-1];return null==n?void 0:n.commitRange[n.commitRange.length-1]},[O,V]),Z=function(e){switch(e){case"goBack":m("session"),x(!1),L();break;case"showCheckpoints":m("checkpoints");break;case"newChat":m("session"),x(!0),L()}},K=(0,u.OI)(),$=!!e.hideHeaderButtons||z,J=!O||z||$?null:(0,a.Y)(ed,{session:O});return(0,a.FD)(a.FK,{children:[(0,a.FD)(T.S,{innerRef:"session"===p?E:void 0,clsx:eb().root,grow:!0,shrink:!0,style:(0,r._)({},eS.transitionDuration,"".concat(180,"ms")),children:[(0,a.Y)(ec,{hideButtons:$,sessionTitle:null!=(t=null==j?void 0:j.customSubject)?t:null==j?void 0:j.subject,screen:p,disableNewSessionButton:H,onAction:Z,usageButton:J,checkpointMade:G}),(0,a.Y)(em,{screen:p,onAction:Z}),(0,a.Y)(eC,{}),(0,a.Y)(s.A,{children:(0,a.Y)(c.A,{timeout:180,nodeRef:C,classNames:{enter:eb().enter,enterActive:eb().enterActive,exit:eb().exit,exitActive:eb().exitActive},children:(0,a.Y)(T.S,{innerRef:C,clsx:eb().content,grow:!0,shrink:!0,children:"checkpoints"===p?(0,a.Y)(q,{openSession:M,openPane:e.openPane}):(0,a.Y)(ew,{onNewSession:U,isCreatingNewSession:A,inputRef:F,openPane:e.openPane,session:O,openSession:M,secrets:e.secrets,readFile:e.readFile,onPromptSuggestionClick:B})})},p)}),D?(0,a.Y)(v.A,{}):null]}),(0,a.Y)(y.A,{isOpen:K,text:"We've encountered an issue and can't reconnect to the AI service. Please refresh the page to continue."})]})}function eC(){return(0,a.Y)(T.S,{clsx:eb().fade,children:(0,a.Y)(T.S,{})})}},79509:(e,n,t)=>{"use strict";t.d(n,{w:()=>y});var r=t(21462),i=t(79730),o=t(22761),a=t(46014),l=t(17844),s=t(12584),c=t(41114),u=t(86997);function d(){var e=(0,s._)(['\n  query SyncingSecretsCurrentUser {\n    toursSeen(name: "deployments-synced-secrets") {\n      seen\n      timeFinished\n    }\n  }\n']);return d=function(){return e},e}var p={},f=(0,c.J1)(d()),h=t(82300),m=t(45005),g=t(5793),v=t(41106),w=new Date(2025,3,17);function y(e){var n,t,i,s,c,d,y,S,Y,A,x,C=e.replId,_=(0,g.R)(C).orgId,k=(t=({orgId:_}).orgId,i=(0,v.A)("deployments-pane","deployments-synced-secrets").register,c=(null==(s=(n=(0,l._)({},p,void 0),u.I(f,n)).data)?void 0:s.toursSeen.timeFinished)?new Date(s.toursSeen.timeFinished):w,(0,r.useEffect)(function(){t||i()},[t,i]),{ignoreSecretsUntil:c}),D=(S=({orgId:_}).orgId,A=null==(y=((null==(Y=(0,a.lD)({skip:void 0===S,variables:{orgId:S}}).data)||null==(d=Y.currentUser)?void 0:d.org.__typename)==="Org"&&Y.currentUser.org.flags?Y.currentUser.org.flags:[]).find(function(e){return e.id===h.RO}))?void 0:y.value,{ignoreSecretsUntil:(x=(0,m.TX)(function(){return o.T(b,A)})).ok?x.value:w});return{ignoreSecretsUntil:_?D.ignoreSecretsUntil:k.ignoreSecretsUntil}}var b=i.ZU.Transform(i.ZU.String()).Decode(function(e){return new Date(e)}).Encode(function(e){return e.toISOString()})},79513:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(88263),a=t(71117);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M2.25 6A3.75 3.75 0 0 1 6 2.25h12A3.75 3.75 0 0 1 21.75 6v12A3.75 3.75 0 0 1 18 21.75H6A3.75 3.75 0 0 1 2.25 18V6ZM6 3.75A2.25 2.25 0 0 0 3.75 6v12A2.25 2.25 0 0 0 6 20.25h12A2.25 2.25 0 0 0 20.25 18V6A2.25 2.25 0 0 0 18 3.75H6ZM6.25 8A.75.75 0 0 1 7 7.25h10a.75.75 0 0 1 0 1.5H7A.75.75 0 0 1 6.25 8Zm0 4a.75.75 0 0 1 .75-.75h4a.75.75 0 0 1 0 1.5H7a.75.75 0 0 1-.75-.75Zm0 4a.75.75 0 0 1 .75-.75h10a.75.75 0 0 1 0 1.5H7a.75.75 0 0 1-.75-.75Z",clipRule:"evenodd"})}))}},80112:(e,n,t)=>{"use strict";t.d(n,{n:()=>a});var r=t(21462),i=t(1230),o=t(54319);function a(e){var n=(0,r.useRef)(!1);(0,o.zv)("received-completed-event",function(t){if(!n.current){var r,o=t.event.contents.contents;(0,i.VFn)(o,"agentPlanEventContents")&&(null==(r=o.agentPlanEventContents.Approver)?void 0:r.approver.id)&&(n.current=!0,e())}})}},80161:(e,n,t)=>{"use strict";t.d(n,{Hn:()=>d,dz:()=>a,fZ:()=>u});var r=t(21462),i=t(44370),o=t(69338),a=(0,r.createContext)(null),l=(0,i.eU)(null),s=(0,i.eU)(null,function(e,n,t){n(l,t)});function c(){var e=(0,r.useContext)(a);if(!e)throw Error("Expected store in context");return e}function u(){return(0,o.md)(l,{store:c()})}function d(e){var n=(0,o.md)(l,{store:c()}),t=(0,o.Xr)(s,{store:c()});(0,r.useEffect)(function(){n!==e&&t(e)},[e,n,t])}},80256:(e,n,t)=>{"use strict";t.d(n,{I:()=>o});var r=t(57756),i=t(34834);function o(){var e=(0,i.A)().toolchain;return(0,r.A)(e.configs)}},80295:(e,n,t)=>{"use strict";t.d(n,{e:()=>l});var r=t(1230),i=t(54319),o=t(47630),a=t(42415);function l(e){var n=(0,i.NC)(),t=(0,o.Rj)(function(){return e?n.sessions.get(e):null},[n,e]);return(0,o.Rj)(function(){return null==t?void 0:t.reduce(s,"global").result.map(function(e){return e.cents})},[t],{default:null})}var s={direction:"forward",state:{cents:0},reducer:function(e,n){var t=(0,r.HM2)(e,"commitData");(null==t?void 0:t.billingRate)===r.pSr.NORMAL&&(n.cents+=a.ri)}}},80346:(e,n,t)=>{"use strict";t.d(n,{A:()=>Y});var r=t(17844),i=t(93629),o=t(12694),a=t(86105),l=t(21462),s=t(69945),c=t.n(s),u=t(31592),d=t(84965),p=t(51895),f=t(71432),h=t(36640),m=t(31062),g=t(29383),v=t(34834),w=t(15601),y=t(64829);function b(e,n){if(!e)return null;var t,r=e.state.field(w.K1),i=e.state.field(w.TW),o=null!=(t=r[n])?t:(null==i?void 0:i.id)===n?i:null;return o||null}function S(e,n){if(!e)return null;var t=b(e,n);if(!t)return null;var r=Math.min(t.indexStart,t.indexEnd),i=Math.max(t.indexStart,t.indexEnd),o=e.state.doc.lineAt(r),a=e.state.doc.lineAt(i),l=e.state.doc.sliceString(e.state.doc.line(Math.max(o.number-2,1)).from,r),s=e.state.doc.sliceString(i,e.state.doc.line(Math.min(a.number+2,e.state.doc.lines)).to);return{precode:l,code:e.state.doc.sliceString(r,i),postcode:s}}function Y(e,n,t){var s=(0,h.A)().showError,Y=(0,m.A)(),A=(0,f.A)().map(function(e){return e.username}),x=(0,v.A)().fs,C=(0,d.Mk)({variables:{id:e}}),_=C.data,k=C.error,D=C.loading,E=C.client,R=function(){if(D||!_){var t;return!!n&&(null==(t=n.state.field(w.TW))?void 0:t.id)===e}return"AnnotationAnchor"!==_.thread.__typename}(),I=(0,l.useMemo)(function(){return D||!_?null:"UserError"===_.thread.__typename?{id:e,__typename:"AnnotationAnchor",messages:[],isGeneral:!1,isResolved:!1}:"AnnotationAnchor"===_.thread.__typename?_.thread:null},[_,e,D]),F=(0,o._)((0,d.v4)({onError:function(e){return s(e.message)},update:function(e,n){var t,r;return n.errors?void n.errors.forEach(function(e){return s(e.message)}):(null==(r=n.data)||null==(t=r.createThread)?void 0:t.__typename)==="UserError"?void s(n.data.createThread.message):void 0}}),1)[0],T=(0,o._)((0,d.ET)({onError:function(e){return s(e.message)},update:function(e,n){if(n.errors)return void n.errors.forEach(function(e){return s(e.message)});var t,r=null==(t=n.data)?void 0:t.createThreadMessage;r&&"UserError"===r.__typename&&s(r.message)}}),1)[0],P=(0,o._)((0,d.eP)({onError:function(e){return s(e.message)},update:function(e,n){if(n.errors)return void n.errors.forEach(function(e){return s(e.message)});var t,r=null==(t=n.data)?void 0:t.updateThread;r&&"UserError"===r.__typename&&s(r.message)}}),1)[0],L=(0,o._)((0,u.CY)(),1)[0],U=(0,g.A)(function(){return c()(L,1e3,{trailing:!1})},[L]),N=function(){var e=null==_?void 0:_.currentUser;return e?{user:{__typename:"User",id:e.id,username:e.username,fullName:e.fullName,image:e.image}}:{}};return{thread:I,isPlaceholder:R,error:k,loading:D,getHighlight:S,getLatestAnchor:function(){return b(n,e)},updateThread:function(e){var n,t=e.changes,o=(null==_||null==(n=_.thread)?void 0:n.__typename)==="AnnotationAnchor"?_.thread:null;if(!o)throw Error("expected thread");P({variables:{id:o.id,changes:t},optimisticResponse:{__typename:"RootMutationType",updateThread:(0,i._)((0,r._)({},o,t),{isResolved:"boolean"==typeof t.isResolved?t.isResolved:o.isResolved})}})},finalizeThreadMessage:function(o){var l=o.message,s=o.messageId,c=(0,y.vY)(l,{users:(0,a._)(A).concat(["everyone"])}),u={id:s,text:l,mentions:c.mentions};if(R&&n&&t){var f=n.state.field(w.TW),h={id:e,replId:Y,indexStart:null==f?void 0:f.indexStart,indexEnd:null==f?void 0:f.indexEnd,otVersion:x.getOTVersion(t),path:t};F({variables:{thread:h,message:u,highlight:S(n,e)},optimisticResponse:{__typename:"RootMutationType",createThread:(0,i._)((0,r._)({__typename:"AnnotationAnchor"},h,N()),{messages:[(0,i._)((0,r._)({id:s,timeCreated:new Date().toISOString(),currentUserIsAuthor:!0},N()),{content:{text:l,__typename:"TextMessageContentType"},anchor:{id:h.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",seen:!0})],isResolved:!1,isGeneral:!1})}}),E.writeQuery({query:d.c_,variables:{id:e},data:{__typename:"RootQueryType",thread:(0,i._)((0,r._)((0,i._)((0,r._)({},h),{isResolved:!1,isGeneral:!1}),N()),{messages:[(0,i._)((0,r._)({id:s,timeCreated:new Date().toISOString(),currentUserIsAuthor:!0},N()),{content:{text:l,__typename:"TextMessageContentType"},anchor:{id:h.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",seen:!0})],__typename:"AnnotationAnchor"}),currentUser:null==_?void 0:_.currentUser}});var m=E.readQuery({query:p.FZ,variables:{replId:Y,path:t}});if(m){var g,v,b=(null==(v=m.threadsByFile)?void 0:v.__typename)==="ThreadsByFileResult"?m.threadsByFile.threads:[],C=N().user;E.writeQuery({query:p.FZ,variables:{replId:Y,path:t},data:{__typename:"RootQueryType",threadsByFile:{__typename:"ThreadsByFileResult",threads:(0,a._)(b).concat([(0,r._)({messageCount:1,unreadCount:0,__typename:"AnnotationAnchor",isGeneral:!1,user:C,isResolved:!1,participants:[C]},h)])}}})}return}var k=(null==_||null==(g=_.thread)?void 0:g.__typename)==="AnnotationAnchor"?_.thread:null;if(!k)throw Error("expected thread");T({variables:{replId:Y,threadId:k.id,threadMessage:u,highlight:S(n,k.id)},optimisticResponse:{__typename:"RootMutationType",createThreadMessage:(0,i._)((0,r._)({},k),{messages:(0,a._)(k.messages.filter(function(e){return!e.id.startsWith("chat-")})).concat([(0,i._)((0,r._)({},N(),u),{content:{text:u.text,__typename:"TextMessageContentType"},anchor:{id:k.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",timeCreated:new Date().toISOString(),currentUserIsAuthor:!0,seen:!0})])})}})},changeThreadMessage:function(n){U({variables:{threadId:e,messageId:n.messageId,message:null}})}}}},80456:(e,n,t)=>{"use strict";t.d(n,{Js:()=>c,iw:()=>u,QX:()=>h,Qm:()=>f,XD:()=>m,ly:()=>d,Y9:()=>p});var r=t(88263),i=t(79209),o=t(48521),a=t(10429),l=t(5982),s=(0,i.AH)({filter:"drop-shadow(0px 2px 6px rgba(0, 0, 0, 0.15))"});function c(e){var n=e.height,t=void 0===n?44:n;return(0,r.FD)("svg",{width:56*t/44,height:t,viewBox:"0 0 56 44",fill:"none",xmlns:"http://www.w3.org/2000/svg",css:s,children:[(0,r.Y)("path",{d:"M7 42.2858L8 32.6684H14L15 42.2858H24L26 27.1837H32L34 42.2858H43L45 21.699H52L55 3.71436H56V43.0001H1V42.2858H7Z",fill:"url(#paint0_linear_3629_241)"}),(0,r.Y)("path",{d:"M55 3.71436L52 21.699H45L43 42.2858H34L32 27.1837H26L24 42.2858H15L14 32.6684H8L7 42.2858H1",stroke:"#57ABFF",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.Y)("defs",{children:(0,r.FD)("linearGradient",{id:"paint0_linear_3629_241",x1:"28.5",y1:"3.71436",x2:"28.5",y2:"43.0001",gradientUnits:"userSpaceOnUse",children:[(0,r.Y)("stop",{stopColor:"#0079F2"}),(0,r.Y)("stop",{offset:"0.395833",stopColor:"#0079F2"}),(0,r.Y)("stop",{offset:"0.958333",stopColor:"#0079F2",stopOpacity:"0"})]})})]})}function u(){return(0,r.FD)("svg",{width:"56",height:"44",viewBox:"0 0 56 44",fill:"none",xmlns:"http://www.w3.org/2000/svg",css:s,children:[(0,r.FD)("g",{clipPath:"url(#clip0_3629_246)",children:[(0,r.Y)("rect",{x:"0.5",y:"9.5",width:"55",height:"19",rx:"5.5",fill:"#2B3245"}),(0,r.Y)("g",{filter:"url(#filter0_dii_3629_246)",children:(0,r.Y)("path",{d:"M3 15C3 13.3431 4.34315 12 6 12H20C20.5523 12 21 12.4477 21 13V25C21 25.5523 20.5523 26 20 26H6C4.34315 26 3 24.6569 3 23V15Z",fill:"#0079F2"})}),(0,r.Y)("g",{filter:"url(#filter1_dii_3629_246)",children:(0,r.Y)("rect",{x:"23",y:"12",width:"12",height:"14",rx:"1",fill:"#0079F2"})}),(0,r.Y)("g",{filter:"url(#filter2_dii_3629_246)",children:(0,r.Y)("rect",{x:"37",y:"12",width:"8",height:"14",rx:"1",fill:"#0079F2"})}),(0,r.Y)("rect",{x:"0.5",y:"9.5",width:"55",height:"19",rx:"5.5",stroke:"#3C445C"})]}),(0,r.FD)("defs",{children:[(0,r.FD)("filter",{id:"filter0_dii_3629_246",x:"-3",y:"6",width:"30",height:"26",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,r.Y)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,r.Y)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.Y)("feOffset",{}),(0,r.Y)("feGaussianBlur",{stdDeviation:"3"}),(0,r.Y)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,r.Y)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.341176 0 0 0 0 0.670588 0 0 0 0 1 0 0 0 0.5 0"}),(0,r.Y)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3629_246"}),(0,r.Y)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_3629_246",result:"shape"}),(0,r.Y)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.Y)("feMorphology",{radius:"2",operator:"dilate",in:"SourceAlpha",result:"effect2_innerShadow_3629_246"}),(0,r.Y)("feOffset",{dy:"-2"}),(0,r.Y)("feGaussianBlur",{stdDeviation:"1"}),(0,r.Y)("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),(0,r.Y)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"}),(0,r.Y)("feBlend",{mode:"normal",in2:"shape",result:"effect2_innerShadow_3629_246"}),(0,r.Y)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.Y)("feMorphology",{radius:"2",operator:"dilate",in:"SourceAlpha",result:"effect3_innerShadow_3629_246"}),(0,r.Y)("feOffset",{dy:"2"}),(0,r.Y)("feGaussianBlur",{stdDeviation:"1"}),(0,r.Y)("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),(0,r.Y)("feColorMatrix",{type:"matrix",values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.1 0"}),(0,r.Y)("feBlend",{mode:"normal",in2:"effect2_innerShadow_3629_246",result:"effect3_innerShadow_3629_246"})]}),(0,r.FD)("filter",{id:"filter1_dii_3629_246",x:"17",y:"6",width:"24",height:"26",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,r.Y)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,r.Y)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.Y)("feOffset",{}),(0,r.Y)("feGaussianBlur",{stdDeviation:"3"}),(0,r.Y)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,r.Y)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.341176 0 0 0 0 0.670588 0 0 0 0 1 0 0 0 0.5 0"}),(0,r.Y)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3629_246"}),(0,r.Y)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_3629_246",result:"shape"}),(0,r.Y)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.Y)("feMorphology",{radius:"2",operator:"dilate",in:"SourceAlpha",result:"effect2_innerShadow_3629_246"}),(0,r.Y)("feOffset",{dy:"-2"}),(0,r.Y)("feGaussianBlur",{stdDeviation:"1"}),(0,r.Y)("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),(0,r.Y)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"}),(0,r.Y)("feBlend",{mode:"normal",in2:"shape",result:"effect2_innerShadow_3629_246"}),(0,r.Y)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.Y)("feMorphology",{radius:"2",operator:"dilate",in:"SourceAlpha",result:"effect3_innerShadow_3629_246"}),(0,r.Y)("feOffset",{dy:"2"}),(0,r.Y)("feGaussianBlur",{stdDeviation:"1"}),(0,r.Y)("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),(0,r.Y)("feColorMatrix",{type:"matrix",values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.1 0"}),(0,r.Y)("feBlend",{mode:"normal",in2:"effect2_innerShadow_3629_246",result:"effect3_innerShadow_3629_246"})]}),(0,r.FD)("filter",{id:"filter2_dii_3629_246",x:"31",y:"6",width:"20",height:"26",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,r.Y)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,r.Y)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.Y)("feOffset",{}),(0,r.Y)("feGaussianBlur",{stdDeviation:"3"}),(0,r.Y)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,r.Y)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.341176 0 0 0 0 0.670588 0 0 0 0 1 0 0 0 0.5 0"}),(0,r.Y)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3629_246"}),(0,r.Y)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_3629_246",result:"shape"}),(0,r.Y)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.Y)("feMorphology",{radius:"2",operator:"dilate",in:"SourceAlpha",result:"effect2_innerShadow_3629_246"}),(0,r.Y)("feOffset",{dy:"-2"}),(0,r.Y)("feGaussianBlur",{stdDeviation:"1"}),(0,r.Y)("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),(0,r.Y)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"}),(0,r.Y)("feBlend",{mode:"normal",in2:"shape",result:"effect2_innerShadow_3629_246"}),(0,r.Y)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.Y)("feMorphology",{radius:"2",operator:"dilate",in:"SourceAlpha",result:"effect3_innerShadow_3629_246"}),(0,r.Y)("feOffset",{dy:"2"}),(0,r.Y)("feGaussianBlur",{stdDeviation:"1"}),(0,r.Y)("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),(0,r.Y)("feColorMatrix",{type:"matrix",values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.1 0"}),(0,r.Y)("feBlend",{mode:"normal",in2:"effect2_innerShadow_3629_246",result:"effect3_innerShadow_3629_246"})]}),(0,r.Y)("clipPath",{id:"clip0_3629_246",children:(0,r.Y)("rect",{width:"56",height:"44",fill:"white"})})]})]})}function d(e){var n=e.height,t=void 0===n?44:n;return(0,r.FD)("svg",{width:56*t/44,height:t,viewBox:"0 0 56 44",fill:"none",xmlns:"http://www.w3.org/2000/svg",css:s,children:[(0,r.Y)("path",{d:"M1 42H55",stroke:"#57ABFF",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.Y)("g",{filter:"url(#filter0_d_3629_304)",children:(0,r.Y)("path",{d:"M21 11L35 25M38 18C38 23.5228 33.5228 28 28 28C22.4772 28 18 23.5228 18 18C18 12.4772 22.4772 8 28 8C33.5228 8 38 12.4772 38 18Z",stroke:"#0053A6",strokeWidth:"2"})}),(0,r.Y)("defs",{children:(0,r.FD)("filter",{id:"filter0_d_3629_304",x:"9",y:"3",width:"38",height:"38",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,r.Y)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,r.Y)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.Y)("feOffset",{dy:"4"}),(0,r.Y)("feGaussianBlur",{stdDeviation:"4"}),(0,r.Y)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0.32549 0 0 0 0 0.65098 0 0 0 0.5 0"}),(0,r.Y)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3629_304"}),(0,r.Y)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_3629_304",result:"shape"})]})})]})}function p(){return(0,r.FD)("svg",{width:"56",height:"44",viewBox:"0 0 56 44",fill:"none",xmlns:"http://www.w3.org/2000/svg",css:s,children:[(0,r.Y)("circle",{cx:"28",cy:"22",r:"13",fill:"#0053A6"}),(0,r.Y)("path",{d:"M28 9C30.2851 9 32.5297 9.6023 34.5079 10.7462L28 22L28 9Z",fill:"#0079F2"}),(0,r.Y)("circle",{cx:"28",cy:"22",r:"10.5",stroke:"#57ABFF",strokeDasharray:"1 4"}),(0,r.Y)("g",{filter:"url(#filter0_d_3629_309)",children:(0,r.Y)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M28 36.3334C35.9161 36.3334 42.3333 29.9162 42.3333 22.0001C42.3333 15.1129 37.4759 9.36028 31 7.98119V6C31 5 30 4 29 4H27C26 4 25 5 25 6V7.9812C18.5241 9.36029 13.6667 15.1129 13.6667 22.0001C13.6667 29.9162 20.0839 36.3334 28 36.3334ZM15.6667 22.0001C15.6667 15.1886 21.1885 9.66675 28 9.66675C34.8115 9.66675 40.3333 15.1886 40.3333 22.0001C40.3333 28.8116 34.8115 34.3334 28 34.3334C21.1885 34.3334 15.6667 28.8116 15.6667 22.0001Z",fill:"#0079F2"})}),(0,r.Y)("g",{filter:"url(#filter1_d_3629_309)",children:(0,r.Y)("path",{d:"M28 12V22L33 13.3",stroke:"#B2D9FF",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),(0,r.FD)("defs",{children:[(0,r.FD)("filter",{id:"filter0_d_3629_309",x:"11.6667",y:"3",width:"32.6667",height:"36.3335",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,r.Y)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,r.Y)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.Y)("feOffset",{dy:"1"}),(0,r.Y)("feGaussianBlur",{stdDeviation:"1"}),(0,r.Y)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,r.Y)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0"}),(0,r.Y)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3629_309"}),(0,r.Y)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_3629_309",result:"shape"})]}),(0,r.FD)("filter",{id:"filter1_d_3629_309",x:"25.25",y:"10.25",width:"10.5001",height:"15.5",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,r.Y)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,r.Y)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.Y)("feOffset",{dy:"1"}),(0,r.Y)("feGaussianBlur",{stdDeviation:"1"}),(0,r.Y)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,r.Y)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0"}),(0,r.Y)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3629_309"}),(0,r.Y)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_3629_309",result:"shape"})]})]})]})}function f(e){var n=e.height,t=void 0===n?44:n;return(0,r.FD)("svg",{width:56*t/44,height:t,viewBox:"0 0 56 44",fill:"none",xmlns:"http://www.w3.org/2000/svg",css:s,children:[(0,r.Y)("path",{d:"M0 37V6H14.5L16 9L17.5 6H37.5L39 8L40.5 6H56V37H0Z",fill:"url(#paint0_linear_3629_271)"}),(0,r.Y)("path",{d:"M1 6H14.5L16 9L17.5 6H37.5L39 8L40.5 6H55",stroke:"#57ABFF",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.Y)("defs",{children:(0,r.FD)("linearGradient",{id:"paint0_linear_3629_271",x1:"28",y1:"6",x2:"28",y2:"37",gradientUnits:"userSpaceOnUse",children:[(0,r.Y)("stop",{stopColor:"#0079F2",stopOpacity:"0.7"}),(0,r.Y)("stop",{offset:"0.958333",stopColor:"#0079F2",stopOpacity:"0"})]})})]})}function h(){return(0,r.FD)("svg",{width:"56",height:"44",viewBox:"0 0 56 44",fill:"none",xmlns:"http://www.w3.org/2000/svg",css:s,children:[(0,r.Y)("path",{d:"M16 8C16 6.89543 16.8954 6 18 6H37C38.1046 6 39 6.89543 39 8V13H16V8Z",fill:"#0053A6"}),(0,r.Y)("path",{d:"M16 14H39V27C39 28.1046 38.1046 29 37 29H18C16.8954 29 16 28.1046 16 27V14Z",fill:"#0053A6"}),(0,r.Y)("g",{filter:"url(#filter0_d_3629_276)",children:(0,r.Y)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22.1667 1.6665C22.719 1.6665 23.1667 2.11422 23.1667 2.6665V4.33317H31.8333V2.6665C31.8333 2.11422 32.281 1.6665 32.8333 1.6665C33.3856 1.6665 33.8333 2.11422 33.8333 2.6665V4.33317H36.8333C38.8584 4.33317 40.5 5.97479 40.5 7.99984V26.6665C40.5 28.6915 38.8584 30.3332 36.8333 30.3332H18.1667C16.1416 30.3332 14.5 28.6915 14.5 26.6665V7.99984C14.5 5.97479 16.1416 4.33317 18.1667 4.33317H21.1667V2.6665C21.1667 2.11422 21.6144 1.6665 22.1667 1.6665ZM21.1667 6.33317H18.1667C17.2462 6.33317 16.5 7.07936 16.5 7.99984V12.3332H38.5V7.99984C38.5 7.07936 37.7538 6.33317 36.8333 6.33317H33.8333V7.99984C33.8333 8.55212 33.3856 8.99984 32.8333 8.99984C32.281 8.99984 31.8333 8.55212 31.8333 7.99984V6.33317H23.1667V7.99984C23.1667 8.55212 22.719 8.99984 22.1667 8.99984C21.6144 8.99984 21.1667 8.55212 21.1667 7.99984V6.33317ZM38.5 14.3332H16.5V26.6665C16.5 27.587 17.2462 28.3332 18.1667 28.3332H36.8333C37.7538 28.3332 38.5 27.587 38.5 26.6665V14.3332Z",fill:"#57ABFF"})}),(0,r.FD)("g",{filter:"url(#filter1_d_3629_276)",children:[(0,r.Y)("path",{d:"M43.0779 26.019C42.2616 23.6789 40.0353 22 37.4169 22C35.7617 22 34.2632 22.6709 33.1785 23.7556L30.2721 26.662M30.2721 26.662V22.666M30.2721 26.662H34.2667",stroke:"#B2D9FF",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.Y)("path",{d:"M31.7706 29.9688C32.5869 32.3089 34.8132 33.9878 37.4316 33.9878C39.0868 33.9878 40.5853 33.3169 41.67 32.2322L44.5764 29.3258M44.5764 29.3258L44.5764 33.3218M44.5764 29.3258L40.5818 29.3258",stroke:"#B2D9FF",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),(0,r.FD)("defs",{children:[(0,r.FD)("filter",{id:"filter0_d_3629_276",x:"12.5",y:"0.666504",width:"30",height:"32.6665",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,r.Y)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,r.Y)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.Y)("feOffset",{dy:"1"}),(0,r.Y)("feGaussianBlur",{stdDeviation:"1"}),(0,r.Y)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,r.Y)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0"}),(0,r.Y)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3629_276"}),(0,r.Y)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_3629_276",result:"shape"})]}),(0,r.FD)("filter",{id:"filter1_d_3629_276",x:"27.5221",y:"20.25",width:"19.8043",height:"17.4878",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,r.Y)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,r.Y)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.Y)("feOffset",{dy:"1"}),(0,r.Y)("feGaussianBlur",{stdDeviation:"1"}),(0,r.Y)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,r.Y)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0"}),(0,r.Y)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3629_276"}),(0,r.Y)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_3629_276",result:"shape"})]})]})]})}function m(){return(0,r.Y)(a.S,{css:[o.wp.color.accentPrimaryStronger],py:6,px:12,children:(0,r.Y)(l.A,{size:32})})}},80621:(e,n,t)=>{"use strict";t.d(n,{T:()=>i});var r=t(21462);function i(e){var n,t,i=e.mode,o=e.authz,a=!0,l=void 0;return"advanced"===i?(a=null!=(n=null==o?void 0:o.advancedAssistant.isAuthorized)&&n,l=null==o?void 0:o.advancedAssistant.message):"basic"===i&&(a=null!=(t=null==o?void 0:o.basicAssistant.isAuthorized)&&t,l=null==o?void 0:o.basicAssistant.message),(0,r.useMemo)(function(){return{isAuthorized:a,message:l}},[a,l])}},80714:(e,n,t)=>{"use strict";t.d(n,{$0:()=>s,OS:()=>p,b3:()=>u,oG:()=>c});var r,i=t(83846),o=t(35084),a=t(16564),l=t(88734);function s(e){switch(e){case o.nH.Failed:case o.nH.Success:return l.d.Ready;case o.nH.Suspended:return l.d.Suspended;case o.nH.Suspending:case o.nH.Resuming:case o.nH.UpdatingTier:return l.d.ProcessingLifecycleCommand;case o.nH.Pending:case o.nH.Building:case o.nH.Running:case o.nH.Promoting:return l.d.Deploying;default:(0,a.A)(e)}}function c(e){switch(e){case o.jP.Destroy:return null;case o.jP.UpdateMachineConfiguration:return o.nH.UpdatingTier;case o.jP.Suspend:return o.nH.Suspending;case o.jP.Resume:return o.nH.Resuming;default:(0,a.A)(e)}}function u(e){switch(e){case o.JX.Cron:return o.Q0.Cron;case o.JX.CloudRun:return o.Q0.CloudRun;case o.JX.Worker:case o.JX.Server:return o.Q0.Gce;case o.JX.Static:return o.Q0.Static;default:(0,a.A)(e)}}var d=(r={},(0,i._)(r,l.d.Loading,"loading"),(0,i._)(r,l.d.Preparing,"preparing"),(0,i._)(r,l.d.Ready,"ready"),(0,i._)(r,l.d.Suspended,"suspended"),(0,i._)(r,l.d.Deploying,"deploying"),(0,i._)(r,l.d.ProcessingLifecycleCommand,"processing a request"),r);function p(e){var n=d[e];return void 0===n?"":n}},80797:e=>{e.exports={textGrid:"TextGrid_textGrid__XASL1",dotChar:"TextGrid_dotChar__IMDgf",textChar:"TextGrid_textChar__z0SfA",textAdded:"TextGrid_textAdded__FKtZ_",textRemoved:"TextGrid_textRemoved__LHxaI",gridLine:"TextGrid_gridLine__DUXek"}},81185:(e,n,t)=>{"use strict";t.d(n,{A:()=>f});var r=t(88263),i=t(29542),o=t.n(i),a=t(71115),l=t(64513),s=t(25804),c=t(48521),u=t(49150),d=t(76126),p=t(10429);function f(){var e=(0,a.useRouter)(),n=(0,s.pE)("didMigrateToNix","boolean");return(0,r.Y)(u.a,{isOpen:n,onRequestClose:function(){(0,s.HQ)({router:e,params:[{mode:"delete",key:"didMigrateToNix"}]})},centered:!0,children:(0,r.FD)(p.S,{gap:16,children:[(0,r.Y)(d.Y9,{level:1,variant:"headerDefault",children:"We've upgraded your App!"}),(0,r.FD)(d.EY,{children:["Your App is now using"," ",(0,r.Y)(o(),{legacyBehavior:!0,href:"https://blog.replit.com/nix",children:"the latest infrastructure"})," ","which unlocks powerful new features."]}),(0,r.FD)(p.D.ul,{css:c.wp.colWithGap(4),children:[(0,r.Y)(p.D.li,{children:(0,r.FD)(d.EY,{children:[""," ",(0,r.Y)(o(),{legacyBehavior:!0,href:l.ik.DEPENDENCY_MANAGEMENT,children:"Use 80,000+ system dependencies"})," ","(linux packages) out of the box."]})}),(0,r.Y)(p.D.li,{children:(0,r.FD)(d.EY,{children:[""," ",(0,r.Y)(o(),{legacyBehavior:!0,href:"https://docs.replit.com/replit-workspace/configuring-repl",children:"Configure your App"})," ","with more capabilities."]})}),(0,r.Y)(p.D.li,{children:(0,r.FD)(d.EY,{children:[""," ",(0,r.Y)(o(),{legacyBehavior:!0,href:l.ik.DEPENDENCY_MANAGEMENT,children:"Check out this doc"})," ","for a deep dive."]})})]}),(0,r.FD)(d.EY,{variant:"small",css:{fontStyle:"italic"},children:["Any overwritten files have been backed up to the same file name with a .backup suffix. If you have any questions, please visit"," ",(0,r.Y)(o(),{legacyBehavior:!0,href:"https://replit.com/community",children:"replit.com/community"})," ","to get help."]}),(0,r.Y)(d.EY,{multiline:!1,children:"Thank you for your patience"})]})})}},81395:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(88263),a=t(71117);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M8.53 5.47a.75.75 0 0 1 0 1.06L3.06 12l5.47 5.47a.75.75 0 1 1-1.06 1.06l-6-6a.75.75 0 0 1 0-1.06l6-6a.75.75 0 0 1 1.06 0ZM19.5 9.5a.75.75 0 0 1 1.06 0l1.97 1.97a.75.75 0 0 1 0 1.06l-6 6a.75.75 0 0 1-1.06-1.06L20.94 12l-1.44-1.44a.75.75 0 0 1 0-1.06ZM14.889 3.266c-.13-.355-.648-.355-.778 0l-.893 2.44a.407.407 0 0 1-.264.247l-2.166.663a.396.396 0 0 0 0 .762l2.166.669c.123.038.22.13.264.247l.893 2.44c.13.355.648.355.778 0l.893-2.44a.407.407 0 0 1 .264-.247l2.166-.666a.396.396 0 0 0 0-.762l-2.166-.666a.407.407 0 0 1-.264-.247l-.893-2.44Z",clipRule:"evenodd"})}))}},81666:(e,n,t)=>{"use strict";t.d(n,{Kb:()=>p,bf:()=>s,f_:()=>g,hX:()=>c,kS:()=>u,kZ:()=>d,m$:()=>h,uF:()=>f,xF:()=>m,z7:()=>l});var r=t(62019),i=t(37743),o=t(1833),a=t(89264),l=function(e){function n(){var e;return(0,i._)(this,n),e=(0,r._)(this,n,arguments),e.name="DeploymentNotFoundError",e.message="Could not find existing deployment",e}return(0,o._)(n,e),n}((0,a._)(Error)),s=function(e){function n(){var e;return(0,i._)(this,n),e=(0,r._)(this,n,arguments),e.name="CurrentBuildNotFoundError",e.message="Could not find existing current build",e}return(0,o._)(n,e),n}((0,a._)(Error)),c=function(e){function n(){var e;return(0,i._)(this,n),e=(0,r._)(this,n,arguments),e.name="RollbackBuildNotProvidedError",e.message="Rollback target build not provided",e}return(0,o._)(n,e),n}((0,a._)(Error)),u=function(e){function n(){var e;return(0,i._)(this,n),e=(0,r._)(this,n,arguments),e.name="RunCommandNotFoundError",e.message="Could not find run command",e}return(0,o._)(n,e),n}((0,a._)(Error)),d=function(e){function n(){var e;return(0,i._)(this,n),e=(0,r._)(this,n,arguments),e.name="SubdomainNotFoundError",e.message="Could not find subdomain",e}return(0,o._)(n,e),n}((0,a._)(Error)),p=function(e){function n(){var e;return(0,i._)(this,n),e=(0,r._)(this,n,arguments),e.name="AppTypeFoundError",e.message="Could not find app type",e}return(0,o._)(n,e),n}((0,a._)(Error)),f=function(e){function n(){var e;return(0,i._)(this,n),e=(0,r._)(this,n,arguments),e.name="PublicDirNotFoundError",e.message="Could not find public directory",e}return(0,o._)(n,e),n}((0,a._)(Error)),h=function(e){function n(){var e;return(0,i._)(this,n),e=(0,r._)(this,n,arguments),e.name="ReplConnectionError",e.message="An App connection error occurred. App is reconnecting or has been disconnected.",e}return(0,o._)(n,e),n}((0,a._)(Error)),m=function(e){function n(){var e;return(0,i._)(this,n),e=(0,r._)(this,n,arguments),e.name="InvalidTimezoneError",e}return(0,o._)(n,e),n}((0,a._)(Error)),g=function(e){function n(){var e;return(0,i._)(this,n),e=(0,r._)(this,n,arguments),e.name="CrontabNotFoundError",e}return(0,o._)(n,e),n}((0,a._)(Error))},82250:(e,n,t)=>{"use strict";t.d(n,{N:()=>pT});var r,i,o,a,l,s,c,u,d,p,f,h=t(17844),m=t(93629),g=t(12694),v=t(86105),w=t(88263),y=t(21462),b=t(79730),S=t(22761),Y=t(44370),A=t(44725),x=t(3443),C=t(95674),_=t(98785),k=t(90629),D=t(49069),E=t(18102),R=D.Pe.define(),I=D.Pe.define(),F=function(e){var n=e.view,t=e.insert,r=e.scrollIntoView,i=e.overwrite,o=e.insertAt;if(i)n.dispatch({changes:{from:0,to:n.state.doc.length,insert:t},effects:R.of(null),scrollIntoView:r,annotations:E.A.of(!0)});else{var a=null!=o?o:n.state.selection.main.head,l=null!=o?o:n.state.selection.main.from;n.dispatch({changes:{from:l,insert:t},selection:{anchor:a+t.length},effects:R.of(null),scrollIntoView:r,annotations:E.A.of(!0)})}},T=function(e){var n=e.state.field(P,!1);if(!n)return void k.Cp(Error("RevetGhostwriterCodeInsertState not found when trying to revert"));e.dispatch({changes:n,effects:I.of(null)})},P=D.sU.define({create:function(){return null},update:function(e,n){e&&(e=e.map(n.changes));var t=!0,r=!1,i=void 0;try{for(var o,a=n.effects[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;l.is(R)&&(e=n.changes.invert(n.startState.doc)),l.is(I)&&(e=null)}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return e}}),L=t(51490),U=t(61311),N=t(83150),O=t(20828),M=t(29383),B=t(95139),H=t(1230),z=t(54319),W=t(96907),G=t.n(W),V=t(6268),j=t(51244),Z=t(70484),q=t(6156),K=t(80161),$=t(64583),J=t(48521),Q=t(10429),X=t(71117);function ee(e){return(0,w.Y)(X.Ay,(0,m._)((0,h._)({},e),{children:(0,w.Y)("path",{fillRule:"evenodd",d:"M9.53 3.47a.75.75 0 0 0-1.06 0l-5 5a.75.75 0 0 0 0 1.06l5 5a.75.75 0 0 0 1.06-1.06L5.81 9.75H16A3.25 3.25 0 0 1 19.25 13v7a.75.75 0 0 0 1.5 0v-7A4.75 4.75 0 0 0 16 8.25H5.81l3.72-3.72a.75.75 0 0 0 0-1.06Z",clipRule:"evenodd"})}))}function en(e){return(0,w.Y)(X.Ay,(0,m._)((0,h._)({},e),{children:(0,w.Y)("path",{fillRule:"evenodd",d:"M14.47 3.47a.75.75 0 0 1 1.06 0l5 5a.75.75 0 0 1 0 1.06l-5 5a.75.75 0 1 1-1.06-1.06l3.72-3.72H8A3.25 3.25 0 0 0 4.75 13v7a.75.75 0 0 1-1.5 0v-7A4.75 4.75 0 0 1 8 8.25h10.19l-3.72-3.72a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"})}))}var et=(0,$.x)({root:[J.wp.height(48),J.wp.backgroundColor.backgroundRoot,J.wp.display.flex,J.wp.justify.spaceBetween,J.wp.align.stretch,{fontFamily:"Monaco, Menlo, 'Ubuntu Mono', Consolas, source-code-pro, monospace",button:[J.wp.color.foregroundDefault,J.wp.fontSize(16),J.wp.flex.growAndShrink(1),{padding:"10px",fontFamily:"inherit",backgroundColor:"transparent",border:"0 none",flexBasis:"auto"}]}],fixedContainer:[J.wp.position.fixed,J.wp.width("100%"),J.wp.zIndex(100),J.wp.left(0)]}),er=function(e){var n=e.buttons,t=e.onClick,r=e.onUndo,i=e.onRedo;return(0,w.FD)("nav",{css:et.root,children:[n.map(function(e){return(0,w.Y)("button",{onClick:function(n){n.stopPropagation(),n.preventDefault(),t(e)},children:void 0!==e.label?e.label:e.value},e.value)}),(0,w.Y)("button",{onClick:function(e){e.stopPropagation(),e.preventDefault(),r()},children:(0,w.Y)(ee,{})}),(0,w.Y)("button",{onClick:function(e){e.stopPropagation(),e.preventDefault(),i()},children:(0,w.Y)(en,{})})]})},ei=[{value:"{}",cursorOffset:1},{value:"()",cursorOffset:1},{value:'""',cursorOffset:1}],eo=function(e){var n=e.path,t=(0,v._)(ei).concat([{value:"= ",cursorOffset:2}]);return n.endsWith(".html")&&(t.unshift({value:"<>",cursorOffset:1}),t.unshift({label:"div",value:"<div></div>",cursorOffset:5})),t},ea="visualViewport"in window;function el(e){var n=e.filePath,t=e.isLoading,r=(0,K.fZ)(),i=(0,j.a)({tablet:!1}),o=(0,q.jl)(),a=(0,Z.A)();(0,y.useEffect)(function(){a&&r&&r.requestMeasure({read:function(){return{cursor:r.coordsAtPos(r.state.selection.main.head),scroller:r.scrollDOM.getBoundingClientRect()}},write:function(e){var n=e.cursor,t=e.scroller;if(n){var i=(n.top+n.bottom)/2,a=(t.top+t.bottom)/2;Math.abs(i-a)>5&&(r.scrollDOM.scrollTop+=i-a+50*!!o)}}})},[a,r,o]);var l=(0,g._)((0,y.useState)(0),2),s=l[0],c=l[1];if((0,y.useEffect)(function(){if(o){var e=window.visualViewport;if(ea&&e){var n=G()(function(){c(window.innerHeight-e.height-e.offsetTop)},100);return e.addEventListener("scroll",n),e.addEventListener("resize",n),function(){e.removeEventListener("scroll",n),e.removeEventListener("resize",n)}}}},[o]),!a||t||!i)return null;var u=(0,w.Y)(er,{onUndo:function(){r&&((0,V.tN)(r),r.focus())},onRedo:function(){r&&((0,V.ZS)(r),r.focus())},onClick:function(e){if(r){var n,t=null!=(n=r.state.selection.ranges[0].from)?n:0;r.dispatch({changes:{from:t,insert:e.value},selection:{anchor:t+e.cursorOffset}}),r.focus()}},buttons:eo({path:n})});return!o||ea?(0,w.Y)(Q.S,{css:et.fixedContainer,style:{bottom:s},children:u}):u}var es=t(54240),ec=t(75501),eu=t(43593),ed=t(84788),ep=t(17459),ef=t(29935),eh=t(37743),em=t(82643),eg=t(23099),ev=t.n(eg),ew=t(86005),ey=t(57547),eb=t(5553),eS=t(57867),eY=t(26550),eA=t(92148),ex=t(76607),eC=t(79437);function e_(e){var n,t;return null!=(t=null==(n=e.facet(eS.q))?void 0:n.isDocumentSymbolSupported)&&t}var ek=D.Pe.define(),eD=D.sU.define({create:function(){return null},update:function(e,n){var t=e;return(0,eY.C)(n,ek,function(e){t=e.value}),t}});function eE(){return(eE=(0,ef._)(function(e,n,t){var r,i,o,a,l,s,c,u,d;return(0,em.YH)(this,function(p){switch(p.label){case 0:return[4,e.request.documentSymbol(n,{signal:t})];case 1:if(!(r=p.sent())||r.cancelled||!(i="result"in r&&!r.cancelled?r.result:null))return[2,null];o=[],a=!0,l=!1,s=void 0;try{for(c=i[Symbol.iterator]();!(a=(u=c.next()).done);a=!0)(d=u.value)&&"range"in d&&o.push(d)}catch(e){l=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(l)throw s}}return[2,o.length?o:null]}})})).apply(this,arguments)}function eR(e){if("Debounced function cancelled"!==e.message)throw e}var eI=D.sU.define({create:function(){return[]},update:function(e,n){if(!(0,ey.$H)(n,eD,"selection"))return e;var t=n.state.field(eD);return t?function e(n,t,r){var i=r.find(function(e){var r=e.range;return(0,eA.TU)(n,r.end)>=t&&(0,eA.TU)(n,r.start)<=t});return null==i?[]:i.children?[i].concat(e(n,t,i.children)):[i]}(n.state.doc,n.state.selection.main.head,t):[]},compare:ev()}),eF=t(10527),eT=t(27047),eP=t(10480),eL=t(86846),eU=t(50423),eN=t(45263),eO=t(98533),eM=t(62390),eB=t(3314),eH=t(85305),ez=t(49444),eW=t(6054),eG=t(26976),eV=t(14778),ej=t(43061),eZ=t(90694),eq=t(84686),eK=t(57912),e$=t(79710),eJ=function(e){var n=new Set(eU.A),t=new Map,r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var s=(0,g._)(a.value,3),c=s[0],u=s[1],d=s[2];if(!n.has(c))throw Error("Symbol not supported by LSP client. Please add to the supported symbol icons array");t.set(c,[u,null!=d?d:eN.LU.foregroundDefault])}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return t}([[eL.SymbolKind.Array,eZ.A],[eL.SymbolKind.Boolean,eV.A],[eL.SymbolKind.Class,eM.A,eN.LU.yellowDefault],[eL.SymbolKind.Constant,eB.A,eN.LU.blueStronger],[eL.SymbolKind.Constructor,eW.A,eN.LU.blurpleDefault],[eL.SymbolKind.Enum,function(e){return(0,w.Y)(X.Ay,(0,m._)((0,h._)({},e),{children:(0,w.Y)("path",{fillRule:"evenodd",d:"M7.25 5A2.75 2.75 0 0 1 10 2.25h9A2.75 2.75 0 0 1 21.75 5v5A2.75 2.75 0 0 1 19 12.75h-.5a.75.75 0 0 1 0-1.5h.5c.69 0 1.25-.56 1.25-1.25V5c0-.69-.56-1.25-1.25-1.25h-9c-.69 0-1.25.56-1.25 1.25v4a.75.75 0 0 1-1.5 0V5Zm3 1a.75.75 0 0 1 .75-.75h7a.75.75 0 0 1 0 1.5h-7a.75.75 0 0 1-.75-.75Zm0 3a.75.75 0 0 1 .75-.75h7a.75.75 0 0 1 0 1.5h-7a.75.75 0 0 1-.75-.75Zm-8 5A2.75 2.75 0 0 1 5 11.25h9A2.75 2.75 0 0 1 16.75 14v5A2.75 2.75 0 0 1 14 21.75H5A2.75 2.75 0 0 1 2.25 19v-5ZM5 12.75c-.69 0-1.25.56-1.25 1.25v5c0 .69.56 1.25 1.25 1.25h9c.69 0 1.25-.56 1.25-1.25v-5c0-.69-.56-1.25-1.25-1.25H5ZM5.25 15a.75.75 0 0 1 .75-.75h7a.75.75 0 0 1 0 1.5H6a.75.75 0 0 1-.75-.75Zm0 3a.75.75 0 0 1 .75-.75h7a.75.75 0 0 1 0 1.5H6a.75.75 0 0 1-.75-.75Z",clipRule:"evenodd"})}))},eN.LU.orangeDefault],[eL.SymbolKind.EnumMember,e$.A,eN.LU.blueStronger],[eL.SymbolKind.Event,eO.A],[eL.SymbolKind.Field,eK.A],[eL.SymbolKind.File,ez.A],[eL.SymbolKind.Function,eW.A,eN.LU.blurpleStronger],[eL.SymbolKind.Interface,function(e){return(0,w.Y)(X.Ay,(0,m._)((0,h._)({},e),{children:(0,w.Y)("path",{fillRule:"evenodd",d:"M17 7.75a4.25 4.25 0 1 0 0 8.5 4.25 4.25 0 0 0 0-8.5Zm-5.701 3.5a5.751 5.751 0 1 1 0 1.5H6.646a2.751 2.751 0 1 1 0-1.5H11.3ZM4 10.75a1.25 1.25 0 1 0 0 2.5 1.25 1.25 0 0 0 0-2.5Z",clipRule:"evenodd"})}))},eN.LU.blueStronger],[eL.SymbolKind.Key,eG.A],[eL.SymbolKind.Method,eW.A,eN.LU.blurpleDefault],[eL.SymbolKind.Module,eq.A,eN.LU.purpleDefault],[eL.SymbolKind.Namespace,eH.A],[eL.SymbolKind.Object,eV.A,eN.LU.blueDimmer],[eL.SymbolKind.Operator,eV.A],[eL.SymbolKind.Package,eq.A,eN.LU.purpleDefault],[eL.SymbolKind.Property,eK.A],[eL.SymbolKind.String,ej.A],[eL.SymbolKind.Struct,eH.A],[eL.SymbolKind.TypeParameter,e$.A],[eL.SymbolKind.Variable,e$.A,eN.LU.blueStronger]]);function eQ(e){var n,t=e.kind,r=e.size,i=(0,g._)(null!=(n=eJ.get(t))?n:[eV.A,eN.LU.foregroundDefault],2),o=i[0],a=i[1];return(0,w.Y)(o,{color:a,size:void 0===r?16:r})}var eX=t(53231),e0=t(57028),e1=t(45649),e2=t(51846),e4=t(79209),e5=t(973),e3=(0,e4.AH)([e5.b.nofill,{transitionProperty:"background-color, box-shadow, opacity",opacity:.8,":focus":{zIndex:1,opacity:1}}]),e6={button:(0,e4.AH)([J.wp.reset.button,J.wp.p(2),J.wp.rowWithGap(4),J.wp.align.center,e3]),text:(0,e4.AH)({fontSize:eN.LU.fontSizeSmall})},e8={opacity:1};function e7(e){var n=e.icon,t=e.text,r=e.innerRef,i=e.ariaProps,o=e.active,a=(0,e0.s)(i,r).buttonProps,l=(0,e1.M)({}),s=l.hoverProps,c=l.isHovered;return(0,w.FD)(Q.S,(0,m._)((0,h._)({tag:"button",css:e6.button,style:c||o?e8:void 0,innerRef:r},(0,e2.v)(a,s)),{children:[n?(0,y.cloneElement)(n,{size:12}):null,(0,w.Y)(Q.S,{css:e6.text,children:t})]}))}var e9={root:(0,e4.AH)([J.wp.p(4),J.wp.rowWithGap(4),J.wp.align.center]),text:(0,e4.AH)([J.wp.truncate,J.wp.flex.growAndShrink(1),{fontSize:eN.LU.fontSizeDefault}])};function ne(e){return(0,w.FD)(Q.S,{css:[e9.root],children:[e.icon?(0,y.cloneElement)(e.icon,{size:16}):null,(0,w.Y)(Q.S,{css:e9.text,children:e.text})]})}var nn=t(62595),nt=t(34661),nr=t(27316),ni=(0,e4.AH)([J.wp.p(4)]);function no(e){var n=e.items,t=e.children,r=e.menuProps,i=e.selectedKeys,o=e.onAction,a=(0,nn.p)({items:n,children:t,selectedKeys:i,selectionMode:"single"}),l=(0,y.useRef)(null),s=(0,nt.b)((0,h._)({items:n,onAction:o},r),a,l);return(0,w.Y)(Q.S,(0,m._)((0,h._)({},s.menuProps),{innerRef:l,css:ni,children:(0,v._)(a.collection).map(function(e){return(0,w.Y)(ns,{item:e,state:a},e.key)})}))}var na={root:(0,e4.AH)([J.wp.flex.row,J.wp.align.center,J.wp.position.relative,e3]),selected:(0,e4.AH)([{opacity:1,backgroundColor:eN.LU.interactiveBackground}])},nl={opacity:1};function ns(e){var n=e.item,t=e.state,r=(0,y.useRef)(null),i=(0,nr.O)({key:n.key},t,r),o=i.menuItemProps,a=i.isSelected,l=(0,e1.M)({}),s=l.hoverProps,c=l.isHovered;return(0,w.Y)(Q.S,(0,m._)((0,h._)({innerRef:r,css:[na.root,a&&na.selected],style:c||a?nl:void 0},(0,e2.v)(o,s)),{children:n.rendered}))}var nc=t(57994),nu=t(4515),nd=t(56196),np=t(76320),nf=t(36112),nh={underlay:(0,e4.AH)([J.wp.coverContainer,J.wp.position.fixed]),surface:(0,e4.AH)([J.wp.borderRadius(8),{boxShadow:eN.LU.shadow2,border:"1px solid",borderColor:eN.LU.backgroundHighest}])};function nm(e){var n=e.state,t=e.triggerRef,r=e.placement,i=e.children,o=(0,g._)((0,np.A)("Popover"),2),a=o[0],l=o[1],s=(0,nc.f)({placement:r,triggerRef:t,popoverRef:a,offset:8},n),c=s.popoverProps,u=s.underlayProps;return(0,w.FD)(nu.hJ,{children:[(0,w.Y)(Q.S,(0,m._)((0,h._)({},u),{css:nh.underlay})),(0,w.FD)(nf.ui,(0,m._)((0,h._)({elevated:!0,css:nh.surface,innerRef:l},c),{children:[(0,w.Y)(nd.R,{onDismiss:n.close}),i,(0,w.Y)(nd.R,{onDismiss:n.close})]}))]})}var ng=t(84331);function nv(e){return CSS.escape(e.name)}function nw(e){var n=e.selectedSymbol,t=e.symbols,r=e.moveCursor,i=e.icon,o=e.text,a=(0,eT.I)({onOpenChange:function(e){e&&(0,eX.u4)(eX.AZ.CODE_NAVIGATION_USED,{action:"opened"})}}),l=(0,y.useRef)(null),s=(0,eP.V)({},a,l),c=s.menuTriggerProps,u=s.menuProps,d=n?new Set([n.name]):void 0;return(0,w.FD)(w.FK,{children:[(0,w.Y)(e7,{text:o,icon:i,innerRef:l,ariaProps:c,active:a.isOpen}),a.isOpen?(0,w.Y)(nm,{triggerRef:l,state:a,placement:"bottom left",children:(0,w.Y)(no,{menuProps:u,items:t,selectedKeys:d,onAction:function(e){var n=t.find(function(n){return nv(n)===e});n&&(r(n.selectionRange.start),(0,eX.u4)(eX.AZ.CODE_NAVIGATION_USED,{action:"jumped"}))},children:function(e){return(0,w.Y)(eF.q,{children:(0,w.Y)(ne,{icon:(0,w.Y)(eQ,{kind:e.kind}),text:e.name})},nv(e))}})}):null]})}var ny=(0,y.memo)(function(e){var n=e.symbols,t=e.symbolsPath,r=e.moveCursor,i=t.length?t[t.length-1]:null,o=i?i.children:n;return(0,w.FD)(w.FK,{children:[t.map(function(e,i){var o=0===i?n:t[i-1].children;return o?(0,w.FD)(y.Fragment,{children:[(0,w.Y)(ng.A,{size:12}),(0,w.Y)(nw,{symbols:o,icon:(0,w.Y)(eQ,{size:12,kind:e.kind}),text:e.name,selectedSymbol:e,moveCursor:r})]},nv(e)):null}),(null==o?void 0:o.length)?(0,w.FD)(w.FK,{children:[(0,w.Y)(ng.A,{size:12}),(0,w.Y)(nw,{symbols:o,text:"...",moveCursor:r})]}):null]})}),nb=(0,y.memo)(function(e){var n,t=e.view,r=(0,y.useCallback)(function(e){null==t||t.dispatch({scrollIntoView:!0,selection:D.OF.cursor((0,eA.TU)(t.state.doc,e))}),null==t||t.focus()},[t]),i=(0,y.useDeferredValue)({symbols:(0,U.Vn)(t,eD),symbolsPath:(0,U.Vn)(t,eI)});return(null==(n=i.symbols)?void 0:n.length)?(0,w.Y)(ny,{symbols:i.symbols,symbolsPath:i.symbolsPath||[],moveCursor:r}):null}),nS=t(95778),nY=t(38633),nA=t(48578),nx=t(41852),nC=t(29425),n_=t(79513),nk=t(80762),nD=(0,y.memo)(function(e){var n=e.path,t=e.performPaneOperation,r=e.isReadOnly,i=(0,K.fZ)(),o=(0,y.useCallback)(function(e){t({operation:"open",pane:(0,nY.af)(e)})},[t]);return(0,w.FD)(nY.Y9,{children:[(0,w.Y)(nY.Bm,{children:(0,w.Y)(nS.D,{path:n,onFileClick:o,children:(0,w.Y)(nb,{view:i})})}),(0,w.Y)(nY.Yw,{children:(0,w.Y)(nE,{path:n,performPaneOperation:t,isReadOnly:r})})]})});function nE(e){return(0,w.FD)(w.FK,{children:[(0,w.Y)(nR,(0,h._)({},e)),(0,w.Y)(nI,(0,h._)({},e)),(0,w.Y)(nF,(0,h._)({},e)),(0,w.Y)(nT,(0,h._)({},e))]})}function nR(e){var n=e.path,t=(0,ep._)(e,["path"]),r=(0,K.fZ)(),i=(0,U.Vn)(r,_.cS),o=(0,U.Vn)(r,_.hb),a=i||t.isReadOnly;return o&&r?(0,w.Y)(nA.k,{dataCy:"ws-format-btn",altText:"Format "+(0,N.WP)(n),buttonText:"Format",disabled:a,"aria-disabled":!!a||void 0,icon:i?(0,w.Y)(nk.A,{}):(0,w.Y)(n_.A,{}),onClick:function(){i||(0,_.BD)(r)}}):null}function nI(e){var n=e.path,t=e.performPaneOperation;return(0,N.e$)(n)?(0,w.Y)(nA.k,{altText:"Preview "+(0,N.WP)(n),buttonText:"Preview",icon:(0,w.Y)(nC.A,{}),onClick:function(){t({operation:"replace",pane:{type:"markdown",data:{path:n}}})}}):null}function nF(e){var n=e.path,t=e.performPaneOperation;return(0,N.Z7)(n)?(0,w.Y)(nA.k,{altText:"Preview "+(0,N.WP)(n),buttonText:"Preview",icon:(0,w.Y)(nC.A,{}),onClick:function(){t({operation:"replace",pane:{type:"media",data:{path:n}}})}}):null}function nT(e){var n=e.path,t=e.performPaneOperation,r=(0,nx.vO)();return(0,N.Zy)(n)?(0,w.Y)(nA.k,{altText:"Toggle Preview",buttonText:"Preview",icon:(0,w.Y)(nC.A,{}),onClick:function(){var e=r();t({operation:"replace",pane:{type:"csvPreview",data:{path:n,line:null==e?void 0:e.position.line}}})}}):null}var nP=t(71115),nL=t.n(nP),nU=t(21504),nN=t(94626),nO=new nN.k(function(e){return e?ew.Lz.domEventObservers({keydown:function(e,n){(0,nU.A)(n,{message:"Editing is disabled while the agent is working",offset:n.state.selection.main.from,ignoreKeydown:!0})}}):null}),nM=t(93759),nB=t(64678),nH=t.n(nB),nz="".concat('url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"><circle cx="10" cy="10" r="10" fill="black" /></svg>\')',", linear-gradient(transparent, transparent)"),nW="".concat('url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"><path stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" fill="none" d="M2.5 10H15.5M15.5 10L9.5 5M15.5 10L9.5 15M18 4V16"/></svg>\')',", linear-gradient(transparent, transparent)"),nG=ew.Lz.theme({".cm-vws-space":{backgroundColor:eN.LU.foregroundDimmest,maskImage:nz,maskSize:"0.375ch",maskPosition:"center",maskRepeat:"no-repeat","-webkit-mask-image":nz,"-webkit-mask-size":"0.375ch","-webkit-mask-position":"center","-webkit-mask-repeat":"no-repeat","&.cm-vws-leading":{opacity:.325},"&.cm-vws-enclosed":{opacity:.5},"&.cm-vws-trailing":{opacity:.5},"&.cm-vws-selected":{opacity:.75}},".cm-vws-tab":{backgroundColor:eN.LU.foregroundDimmest,maskImage:nW,maskSize:"1.75ch 1.75ch",maskPosition:"center",maskRepeat:"no-repeat","-webkit-mask-image":nW,"-webkit-mask-size":"1.75ch 1.75ch","-webkit-mask-position":"center","-webkit-mask-repeat":"no-repeat","&.cm-vws-leading":{opacity:.325,maskPosition:"left min(95%, 0.25ch) top 50%","-webkit-mask-position":"left min(95%, 0.25ch) top 50%"},"&.cm-vws-enclosed, &.cm-vws-trailing":{opacity:.5,maskPosition:"calc(50% - 0.25ch) 50%","-webkit-mask-position":"calc(50% - 0.25ch) 50%"},"&.cm-vws-selected":{opacity:.75}}}),nV=nH()(function(e,n,t){var r="cm-vws-".concat(" "===e?"space":"tab"," cm-vws-").concat(n).concat(t?" cm-vws-selected":"");return ew.NZ.mark({class:r})},function(e,n,t){return"".concat(e,"-").concat(n,"-").concat(t)});function nj(e,n,t){var r=e.facet(nK);if(!r.leading&&!r.enclosed&&!r.trailing&&!r.selected)return[];for(var i=[],o=e.doc.lineAt(n),a=e.doc.lineAt(t),l=o.number;l<=a.number;l++)!function(o){var a=e.doc.line(o),l=a.text.length;if(0===l)return;var s=0===a.text.trim().length,c=!!r.selected&&e.selection.ranges.some(function(e){return!e.empty&&e.from<a.to&&e.to>=a.from});if(r.leading||r.enclosed||r.trailing||c){if(s){if(r.leading||r.trailing||c)for(var u=0;u<l;u++)!function(o){var l=a.text[o],s=a.from+o;if(!(s<n)&&!(s>=t)&&(" "===l||"	"===l)){var u=c&&e.selection.ranges.some(function(e){return e.from<=s&&e.to>s});(r.leading||r.trailing||u)&&i.push(nV(l,"trailing",u).range(s,s+1))}}(u);return}for(var d=l-a.text.trimStart().length,p=a.text.trim().length,f=0;f<l;f++)!function(o){var l=a.text[o],s=a.from+o;if(!(s<n)&&!(s>=t)&&(" "===l||"	"===l)){var u=void 0;u=o>=d+p?"trailing":o>d?"enclosed":"leading";var f=c&&e.selection.ranges.some(function(e){return e.from<=s&&e.to>s});(r[u]||f)&&i.push(nV(l,u,f).range(s,s+1))}}(f)}}(l);return i}var nZ=function(){function e(n){(0,eh._)(this,e),this.decorations=ew.NZ.set(nj(n.state,0,n.state.doc.length))}return e.prototype.update=function(e){if((0,ey.$H)(e,nK)){this.decorations=ew.NZ.set(nj(e.state,0,e.state.doc.length));return}var n=e.state.facet(nK);if(e.docChanged||e.selectionSet&&n.selected){var t=this.decorations,r=null,i=null;if(e.selectionSet&&n.selected){var o=e.startState.selection.ranges.filter(function(e){return!e.empty}),a=(0,v._)(e.state.selection.ranges).concat((0,v._)(e.startState.selection.map(e.changes).ranges)).filter(function(e){return!e.empty});o.length&&(r=D.OF.create(o)),a.length&&(i=D.OF.create(a))}if(e.docChanged&&e.changes.iterChangedRanges(function(n,t,o,a){var l=D.OF.range(e.startState.doc.lineAt(n).from,e.startState.doc.lineAt(t).to);r=r?r.addRange(l):D.OF.create([l]);var s=D.OF.range(e.state.doc.lineAt(o).from,e.state.doc.lineAt(a).to);i=i?i.addRange(s):D.OF.create([s])}),r){var l=r.ranges;t=t.update({filter:function(e,n){return!l.some(function(t){return t.from<=e&&t.to>=n})},filterFrom:l[0].from,filterTo:l[l.length-1].to})}e.docChanged&&(t=t.map(e.changes)),i&&(t=t.update({add:i.ranges.map(function(n){return nj(e.state,n.from,n.to)}).flat()})),this.decorations=t}},e}(),nq=ew.Z9.fromClass(nZ,{decorations:function(e){return e.decorations}}),nK=D.sj.define({combine:function(e){var n;return null!=(n=e[0])?n:{}},enables:[nG,D.Nb.highest(nq)]}),n$=new nN.k(function(e,n,t,r){return e||n||t||r?nK.of({leading:e,enclosed:n,trailing:t,selected:r}):null}),nJ=t(26687),nQ=t(45912),nX=t(47946),n0=t(35079),n1=t(80256),n2=t(29800),n4=t(58162),n5=t(5025);function n3(e){var n=(0,g._)((0,y.useState)(null),2),t=n[0],r=n[1];return(0,y.useEffect)(function(){var n=function(){r((0,eC.z)(e.map(function(e){return(0,eC.A)(e)})))};return n(),(0,n5.xW)(e.map(function(e){return e.onServerCapabilitiesChange(function(){return n()})}))},[e]),t}var n6=t(34834),n8=new nN.k(function(e,n,t,r,i,o){return e?e.formatters.map(function(e){if(2===(a=e.id.split("/")).length&&a[1].includes("languageServer")){var a,l,s,c,u,d,p,f=t.find(function(n){return n.clientId===e.id});return f?(l=o,s=f,c=r,u=i,s&&s.isSupportedFile(l)&&c&&c.isFormatSupported&&(0,eC.A)(s).isFormatSupported&&u?nJ.fC.of({format:(d=(0,ef._)(function(e,n,t){var r;return(0,em.YH)(this,function(r){return[2,(n?s.request.formatRange(l,(0,eA.fj)(e,n),t):s.request.format(l,t)).then(function(n){return"error"in n||n.cancelled?{error:!0}:n.result?{result:(0,n2.A)(n.result,e.toString())}:{result:D.VR.empty(e.length)}})]})}),function(e,n,t){return d.apply(this,arguments)}),supportsRangeFormatting:(0,eC.A)(s).isFormatRangeSupported,identifier:s.clientId,name:s.clientName}):[]):[]}return(0,nQ.fu)(o,e)?nJ.fC.of({format:(p=(0,ef._)(function(t,r,i){var a,l,s,c,u;return(0,em.YH)(this,function(d){switch(d.label){case 0:if(!e.startCommand)throw Error("Expected formatter command");return a=(0,n0.A)({container:n}),(l=(0,v._)(e.startCommand.args)).push("-f",o),r&&(l.push("--range-start",String(r.main.from)),l.push("--range-end",String(r.main.to))),l.push("--tab-size",String(i.tabSize)),i.insertSpaces&&l.push("--insert-spaces"),i.trimFinalNewlines&&l.push("--trim-final-newlines"),i.trimTrailingWhitespace&&l.push("--trim-trailing-whitespace"),i.insertFinalNewline&&l.push("--insert-final-newline"),e.startCommand.lifecycle===nX.api.Exec.Lifecycle.STDIN&&l.push("--stdin"),s="",c="",u=[a.onOutput(function(e){return s+=e}),a.onStderr(function(e){return c+=e}),a.dispose],[4,a.request((0,m._)((0,h._)({},e.startCommand),{args:l,lifecycle:nX.api.Exec.Lifecycle.STDIN,stdin:t.toString()})).then(function(e){var n=e.error;return u.forEach(function(e){return e()}),n?{error:!0,message:c}:{result:s}})];case 1:return[2,d.sent()]}})}),function(e,n,t){return p.apply(this,arguments)}),supportsRangeFormatting:e.supportsRangeFormatting,identifier:e.id,name:e.name}):null}).filter(Boolean):null}),n7=t(83942),n9=t(88726),te=t(62019),tn=t(48122),tt=t(1833),tr=t(18254),ti=t(24634),to=t(93113),ta=D.sj.define({combine:function(e){var n;return null!=(n=e.filter(Boolean)[0])?n:null}}),tl=D.sU.define({create:function(){return{diff:null,tree:tr.PH.empty}},update:function(e,n){var t,r,i=n.state.facet(ta),o=null==(t=n.state.facet(A.BH))?void 0:t.parser;if(!i)return null===e.diff&&e.tree===tr.PH.empty?e:{diff:null,tree:tr.PH.empty};var a=e.diff,l=e.tree;return(a&&a.b.eq(i)?n.docChanged&&(a=a.updateA(n.newDoc,n.changes)):(a=ti.o.create(n.newDoc,i),l=tr.PH.empty),(null==(r=n.startState.facet(A.BH))?void 0:r.parser)!==o&&(l=tr.PH.empty),o&&l.length!==a.b.length)?(l=(0,to.B)({parser:o,text:a.b,maxTime:16,base:l}),{diff:a,tree:l}):e.diff===a&&e.tree===l?e:{diff:a,tree:l}}}),ts=t(83846),tc="cm-transform-diff-line-deletion-base",tu="cm-transform-diff-line-deletion",td="cm-transform-diff-text-deletion",tp="cm-transform-diff-line-insertion-base",tf="cm-transform-diff-line-insertion",th="cm-transform-diff-text-insertion",tm="cm-transform-diff-number-marker",tg="rgba(180, 0, 0, 0.1)",tv="rgba(180, 0, 0, 0.125)",tw="rgba(0, 180, 0, 0.1)",ty="rgba(0, 180, 0, 0.125)";function tb(e,n){var t="linear-gradient(to right, ".concat(e,", ").concat(e,")");return n&&(t+=", linear-gradient(to right, ".concat(n,", ").concat(n,")")),t}var tS=ew.Lz.theme((i={},(0,ts._)(i,".".concat(tp,", .").concat(tf),{cursor:"text","&.cm-line ::selection":{backgroundColor:"".concat(eN.LU.accentPrimaryDimmest," !important")}}),(0,ts._)(i,".".concat(tc),{background:tb(tg),backgroundClip:"content-box"}),(0,ts._)(i,".".concat(tu),{background:tb(tg,tv),backgroundClip:"content-box"}),(0,ts._)(i,".".concat(tp),{background:tb(tw),backgroundClip:"content-box"}),(0,ts._)(i,".".concat(tf),{background:tb(tw,ty),backgroundClip:"content-box"}),(0,ts._)(i,".".concat(th),{display:"inline-block",background:ty}),(0,ts._)(i,".".concat(td),{display:"inline-block",background:tv}),(0,ts._)(i,".".concat(tm),{opacity:.5}),i)),tY=t(14208),tA=t(41451),tx=function(e){function n(e,t,r){var i;return(0,eh._)(this,n),(i=(0,te._)(this,n)).line=e,i.index=t,i.changed=r,i}(0,tt._)(n,e);var t=n.prototype;return t.toDOM=function(){var e=this,n=document.createElement("div");if(n.className=this.changed?"cm-line ".concat(tp):"cm-line ".concat(tf),!this.changed||!this.changed.length){var t=!0,r=!1,i=void 0;try{for(var o,a=this.line[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value,s=l.text,c=l.tags,u=document.createElement("span");u.textContent=s||"\xa0",u.className=null!=c?c:"",n.appendChild(u)}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n}for(var d=0,p=0,f=null,h=null,m=function(n,t){if(!f)throw Error("range is null");var r=e.line[p],i=r.text,o=r.tags,a=i.slice(d-f.from,t-f.from),l=document.createElement("span");l.textContent=a||"\xa0",l.className=null!=o?o:"",n.appendChild(l),d+=a.length};p<this.line.length;){if(!f){var g=this.line[p].text;f={from:d,to:d+g.length}}if(!h){var v=!0,w=!1,y=void 0;try{for(var b,S=this.changed[Symbol.iterator]();!(v=(b=S.next()).done);v=!0){var Y=b.value;if(!(Y.from>=f.to)&&!(Y.to<=d)){var A=document.createElement("span");A.className=th,h={from:Y.from,to:Y.to,dom:A},d<h.from&&m(n,h.from),n.appendChild(A);break}}}catch(e){w=!0,y=e}finally{try{v||null==S.return||S.return()}finally{if(w)throw y}}}h?(d<h.to&&m(h.dom,h.to),d>=h.to&&(h=null)):m(n,f.to),d>=f.to&&(f=null,p++)}return n},t.eq=function(e){var t,r;return e instanceof n&&this.index===e.index&&this.line.length===e.line.length&&(null==(t=this.changed)?void 0:t.length)===(null==(r=e.changed)?void 0:r.length)&&ev()(this.line,e.line)&&ev()(this.changed,e.changed)},t.ignoreEvent=function(e){return e.stopImmediatePropagation(),!0},(0,tn._)(n,[{key:"estimatedHeight",get:function(){return 21}}]),n}(ew.xO),tC=ew.NZ.line({class:tc}),t_=ew.NZ.line({class:tu}),tk=ew.NZ.mark({class:td}),tD=ew.Lz.decorations.compute([tl],function(e){var n=function(e,n){if(r.getLineChangeType(e.number,tY.mn.A)===tY.DE.COVERED)o.push(t_.range(e.from));else{o.push(tC.range(e.from));var t=!0,i=!1,a=void 0;try{for(var l,s=(0,tY.QG)(e,n,tY.mn.A,!1)[Symbol.iterator]();!(t=(l=s.next()).done);t=!0){var c=l.value;o.push(tk.range(c.from,c.to))}}catch(e){i=!0,a=e}finally{try{t||null==s.return||s.return()}finally{if(i)throw a}}}},t=e.field(tl,!1);if(!t||!t.diff)return ew.NZ.none;var r=t.diff,i=t.tree,o=[],a=!0,l=!1,s=void 0;try{for(var c,u=r.chunks[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var d=c.value;if(d.fromA!==d.endA)for(var p=r.a.lineAt(d.fromA),f=r.a.lineAt(d.endA),h=p.number;h<=f.number;h++)n(r.a.line(h),d);else d.fromB===d.endB&&n(r.a.lineAt(d.fromA),d);if(d.fromB!==d.toB)for(var m=r.b.lineAt(d.fromB),g=(0,tA.A7)(i,r.b,e,d.fromB,d.endB),v=0;v<g.length;v++){var w=g[v],y=r.b.line(m.number+v),b=r.getLineChangeType(y.number,tY.mn.B)===tY.DE.COVERED?null:(0,tY.QG)(y,d,tY.mn.B,!0),S=ew.NZ.widget({widget:new tx(w,y.number,b),block:!0,side:v+1}),Y=Math.min(d.endA,r.a.length);o.push(S.range(Y))}}}catch(e){l=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw s}}return ew.NZ.set(o,!0)}),tE=t(66607),tR=function(e){function n(e){var t;return(0,eh._)(this,n),(t=(0,te._)(this,n)).index=e,t}(0,tt._)(n,e);var t=n.prototype;return t.toDOM=function(){var e=document.createElement("span");return e.className=tm,e.textContent=String(this.index),e},t.eq=function(e){return this.index===e.index},n}(ew.wJ),tI=tE.DY.of(function(e,n){if(n instanceof tx)return new tR(n.index)}),tF=D.sj.define({enables:function(e){return[ta.computeN([e],function(n){return n.facet(e)}),tl,tS,tD,tI]}}),tT=t(82326),tP=t(34434);function tL(e,n){e.dispatch({effects:tP.L.of(null),selection:{anchor:n.range.indexTo,head:n.range.indexTo}}),e.hasFocus||e.focus()}function tU(e,n,t){F({view:e,insert:n,scrollIntoView:!0,insertAt:t}),e.dispatch({effects:tP.L.of(null)}),e.hasFocus||e.focus()}function tN(e,n){e.dispatch({effects:tP.M.of(n)})}function tO(e,n,t){e.dispatch({changes:{from:t.range.indexFrom,to:t.range.indexTo,insert:n},scrollIntoView:!0,effects:tP.L.of(null),annotations:[E.A.of(!0),V._B.of("full")]}),e.hasFocus||e.focus()}function tM(e,n){return e.range.indexFrom===n.range.indexFrom&&e.range.indexTo===n.range.indexTo&&e.filePath===n.filePath&&e.fileVersion===n.fileVersion&&e.referenceType===n.referenceType}var tB=t(14047),tH=t(38292),tz=t(76126),tW=t(83650),tG=(0,$.x)({root:[J.wp.border({color:eN.LU.outlineDimmest}),J.wp.p(8),J.wp.borderRadius(4)],text:[J.wp.flex.growAndShrink(1)]}),tV=new tB.E(function(e){var n=e.onClose,t=e.requestMeasure;return(0,w.Y)(tT.N2,{requestMeasure:t,type:"ghostwriterKillswitch",children:(0,w.FD)(Q.S,{css:tG.root,row:!0,gap:8,children:[(0,w.Y)(Q.S,{css:tG.text,children:(0,w.Y)(tz.EY,{children:"Code length exceeded. Please select a smaller code block."})}),(0,w.Y)(tH.K0,{alt:"Close",onClick:n,type:"button",children:(0,w.Y)(tW.A,{})})]})})}),tj=function(e){function n(e){var t,r=e.codeReference;return(0,eh._)(this,n),(t=(0,te._)(this,n)).codeReference=r,t}return(0,tt._)(n,e),n.prototype.toDOM=function(e){var n=this;return tV.create({onClose:function(){return tL(e,n.codeReference)},requestMeasure:function(){return e.requestMeasure()}})},n}(ew.xO),tZ=t(65146),tq=function(e){return e[e.Compare=0]="Compare",e[e.Original=1]="Original",e[e.Suggestion=2]="Suggestion",e}({}),tK=D.Pe.define(),t$=D.sU.define({create:function(){return tq.Suggestion},update:function(e,n){var t=!0,r=!1,i=void 0;try{for(var o,a=n.effects[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;if(l.is(tK))e=l.value;else if(l.is(tP.L))e=null;else if(l.is(tP.M)){var s=n.state.field(tZ.z);if((null==s?void 0:s.type)==="transformCode"&&l.value){var c=n.startState.field(tZ.Q),u=l.value;!c&&u&&(e=tq.Suggestion)}}}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return e}}),tJ=D.sU.define({create:function(){return null},update:function(e,n){if(!(0,ey.$H)(n,"doc",tZ.z,eb.Md,t$,tZ.Q))return e;var t,r=n.state.field(tZ.z),i=n.state.facet(eb.Md),o=n.state.field(t$);if(!r||!i||r.codeReference.filePath!==i||o!==tq.Suggestion)return null;var a=r.codeReference.range.indexFrom,l=r.codeReference.range.indexTo,s=n.state.doc.slice(a,l),c=null!=(t=n.state.field(tZ.Q))?t:"",u=s.lines,d=c.split(n.state.lineBreak).length-u;return e&&e.after===a&&e.offset===d?e:{after:a,offset:d}}}),tQ=tE.RG.of(function(e,n){var t=e.state.doc.lineAt(n.from),r=e.state.field(tJ);if(r&&!(t.from<=r.after))return new tE.ib(t.number+r.offset)}),tX=tE.DY.of(function(e,n){if(n instanceof t0)return new tE.ib(n.index)}),t0=function(e){function n(e,t,r){var i;return(0,eh._)(this,n),(i=(0,te._)(this,n)).line=e,i.block=t,i.index=r,i}(0,tt._)(n,e);var t=n.prototype;return t.toDOM=function(){var e=document.createElement(this.block?"div":"span");e.className=this.block?"cm-line":"";var n=!0,t=!1,r=void 0;try{for(var i,o=this.line[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value,l=a.text,s=a.tags,c=document.createElement("span");c.textContent=l||"\xa0",s&&(c.className=s),e.appendChild(c)}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}return e},t.eq=function(e){return this.index===e.index&&(0,tA.ne)(this.line,e.line)},t.ignoreEvent=function(){return!1},(0,tn._)(n,[{key:"estimatedHeight",get:function(){return 21}}]),n}(ew.xO),t1=[tJ,tQ,tX,ew.Lz.decorations.compute([A.BH,tZ.z,tZ.Q,t$,tl,eb.Md,D.$t.lineSeparator],function(e){var n=e.field(tZ.z),t=e.facet(eb.Md),r=e.field(t$);if(!n||"transformCode"!==n.type||!t||n.codeReference.filePath!==t||r!==tq.Suggestion)return ew.NZ.none;var i=n.codeReference.range.indexFrom,o=n.codeReference.range.indexTo,a=e.doc.lineAt(i),l=e.doc.lineAt(o),s=e.toText(null!=(w=e.field(tZ.Q))?w:""),c=e.changes({from:i,to:o,insert:s}),u=c.apply(e.doc),d=i+s.length,p=null==(v=e.facet(A.BH))?void 0:v.parser,f=null;if(p)f=(0,to.B)({parser:p,text:u,changes:c,base:e,upTo:d}),y=(0,tA.A7)(f,u,e,i,d);else{y=[];var h=!0,m=!1,g=void 0;try{for(var v,w,y,b,S=s.iterLines()[Symbol.iterator]();!(h=(b=S.next()).done);h=!0){var Y=b.value;y.push([{text:Y}])}}catch(e){m=!0,g=e}finally{try{h||null==S.return||S.return()}finally{if(m)throw g}}}var x=[];y.length>1&&i!==o&&0!==l.length&&o===l.to&&o<e.doc.length?x.push(ew.NZ.replace({inclusive:!1,block:!0}).range(i,o)):x.push(ew.NZ.replace({inclusiveStart:!1,block:!0}).range(i,o));for(var C=0;C<y.length;C++){var _=y[C],k=a.number+C,D=ew.NZ.widget({widget:new t0(_,C>0,k),inlineOrder:!0,side:C+1,block:C>0});x.push(D.range(i))}return ew.NZ.set(x,!0)})],t2=t(35992),t4=t(47630),t5=t(93369),t3=t(37003),t6=t(45773),t8=t(50480),t7=t(86015),t9=t(46603),re=t(48052),rn=t(68868),rt=t(24726),rr=D.sj.define({combine:function(e){var n;return null!=(n=e[0])?n:function(){}}});new nN.k(function(e){return rr.of(e)});var ri=(0,$.x)({root:[J.wp.border({color:eN.LU.outlineDimmest}),J.wp.p(8),J.wp.borderRadius(4)],header:[J.wp.minHeight(28)],headerLeft:[J.wp.flex.growAndShrink(1),J.wp.rowWithGap(8),J.wp.align.center]}),ro={direction:"reverse",state:{message:"",completed:!1},reducer:function(e,n){var t;(null==(t=e.contents.contents)?void 0:t.$kind)==="inlineActionEventContents"&&e.contents.contents.inlineActionEventContents.content&&(n.message=e.contents.contents.inlineActionEventContents.content,n.completed=e.state===H.qOk.COMPLETE)}},ra=new tB.E(function(e){var n,t,r,i,o,a,l,s,c,u,d,p,f,h,m,v=e.requestMeasure,b=e.codeReference,S=e.onClose,Y=e.openAiChatPane,A=e.source,x=(n=({getFileContext:(0,t7.H)()}).getFileContext,t=(0,z.NC)(),i=(r=(0,g._)((0,y.useState)(null),2))[0],o=r[1],l=(a=(0,g._)((0,y.useState)(!1),2))[0],s=a[1],c=(0,z.k)().assistantInlineMode,d=(0,y.useCallback)((u=(0,ef._)(function(e){var r,i,a,l,u,d;return(0,em.YH)(this,function(p){switch(p.label){case 0:return r=e.codeReference,s(!0),[4,t.sessions.create({sessionType:H.dF3.CHAT})];case 1:if(!(i=p.sent()).ok)return s(!1),[2];return o(a=i.payload),[4,n()];case 2:return u=(l=p.sent()).fileContext,d=l.mostRecentFile,[4,a.appendEvent({kind:"inlineAction",message:"",messageType:H.Z1T.EXPLAIN_CODE,modelType:"advanced"===c?H.e3q.ADVANCED:H.e3q.BASIC,codeReference:r,fileContext:u,mostRecentFile:d,useRag:!0})];case 3:return p.sent(),[2]}})}),function(e){return u.apply(this,arguments)}),[t.sessions,n,c]),p=(0,y.useCallback)((0,ef._)(function(){return(0,em.YH)(this,function(e){switch(e.label){case 0:if(!i)return[3,2];return[4,i.abortLastEvent()];case 1:e.sent(),s(!1),e.label=2;case 2:return[2]}})}),[i]),h=(f=(0,t4.Rj)(function(){return null==i?void 0:i.reduce(ro,1)},[i],{default:{message:"",completed:!1}})).message,m=f.completed,{sessionId:null==i?void 0:i.id,sendMessage:d,stopMessage:p,loading:l,message:h,completed:m}),C=x.sessionId,_=x.sendMessage,k=x.stopMessage,D=x.loading,E=x.completed,R=x.message,I=(0,y.useCallback)(function(){var e,n;(0,eX.u4)(eX.AZ.AI_INLINE_EVENT,{action:"message_sent",intent_type:"explain",source:A,message_content:b.code}),_({codeReference:{code:b.code,range:b.range,filePath:b.filePath,fileContent:null!=(e=b.fileContent)?e:"",fileVersion:b.fileVersion,language:null!=(n=b.language)?n:"",referenceType:H.fDX.INLINE}})},[_,b,A]),F=(0,t5.A)(I),T=(0,t5.A)(k);(0,y.useEffect)(function(){F.current();var e=T.current;return function(){e()}},[F,T]);var P=(0,z.Gk)();return(0,z.q4)()?(0,w.Y)(tT.Rc,{inlineActionType:"Explain",closeAction:S}):(0,w.Y)(tT.N2,{requestMeasure:v,type:"explainCode",children:(0,w.FD)(Q.S,{css:ri.root,gap:8,dataCy:"ghostwriter-inline-explain-content",children:[R||D?(0,w.FD)(Q.S,{css:ri.header,row:!0,gap:8,align:"center",justify:"space-between",children:[(0,w.FD)(Q.S,{css:ri.headerLeft,children:[(0,w.Y)(re.A,{}),(0,w.Y)(t3.m2,{intent:H.qRv.EXPLAIN,text:{color:"dimmest",variant:"small"},icon:{color:eN.LU.foregroundDimmest}})]}),E?(0,w.Y)(tH.K0,{alt:"Close",dataCy:"ghostwriter-inline-close",children:(0,w.Y)(tW.A,{onClick:function(){S(),(0,eX.u4)(eX.AZ.AI_INLINE_EVENT,{action:"inline_textbox_closed",intent_type:"explain",source:A})}})}):(0,w.Y)(t9.$n,{iconLeft:(0,w.Y)(rt.A,{}),size:"small",text:"Stop",onClick:function(){k(),(0,eX.u4)(eX.AZ.AI_INLINE_EVENT,{action:"generation_stopped",intent_type:"explain",source:A,message_content:b.code})}})]}):null,D&&!R?(0,w.Y)(nk.A,{}):null,R?(0,w.Y)(t6.d2,{text:R,codeComponent:t6.vz,messageState:E?H.qOk.COMPLETE:void 0}):null,E?(0,w.FD)(Q.S,{row:!0,gap:8,align:"center",justify:"end",children:[(0,w.Y)(tz.EY,{variant:"small",color:"dimmer",children:"Esc to close"}),C?(0,w.Y)(t9.$n,{dataCy:"ghostwriter-inline-reply-in-chat",iconLeft:P?(0,w.Y)(rn.A,{}):(0,w.Y)(nk.A,{}),disabled:!P,size:"small",text:"Reply in Chat",colorway:P?"blurple":void 0,onClick:function(){(0,eX.u4)(eX.AZ.AI_INLINE_EVENT,{action:"reply_in_chat",intent_type:"explain",source:A,message_content:b.code}),Y(C),S()}}):null]}):null]})})}),rl=function(e){function n(e){var t,r=e.codeReference,i=e.source;return(0,eh._)(this,n),(t=(0,te._)(this,n)).codeReference=r,t.source=i,t}(0,tt._)(n,e);var t=n.prototype;return t.toDOM=function(e){var n=this.codeReference,t=this.source;return ra.create({requestMeasure:function(){return e.requestMeasure()},codeReference:n,onClose:function(){return tL(e,n)},openAiChatPane:function(n){return(0,t8.zw)(e.state,{pane:{type:"ghostwriterChat",data:{sessionId:n}}})},source:t})},t.updateDOM=function(e,n){var t=this.codeReference;return ra.update(e,function(e){return(0,t2.jM)(e,function(e){e.requestMeasure=function(){return n.requestMeasure()},e.codeReference=t,e.onClose=function(){return tL(n,t)}})}),!0},t.eq=function(e){return tM(this.codeReference,e.codeReference)},n}(ew.xO),rs=t(69338),rc={direction:"reverse",state:{code:void 0,completed:!1,error:null},reducer:function(e,n){var t;if((null==(t=e.contents.contents)?void 0:t.$kind)==="inlineActionEventContents"&&e.contents.contents.inlineActionEventContents){var r=e.contents.contents.inlineActionEventContents;if(r.content&&r.content.includes("```")){var i=r.content.match(/```(?:\w+)?\n([\s\S]+?)\n```/);i&&i[1]&&(n.code=i[1])}n.completed=e.state===H.qOk.COMPLETE&&!!n.code,e.state!==H.qOk.COMPLETE&&e.state!==H.qOk.IN_PROGRESS&&(n.error="Failed to generate code")}}};function ru(e){var n,t,r=e.onCode,i=e.getFileContext,o=e.assistantMode,a=(0,z.NC)(),l=(0,g._)((0,y.useState)(null),2),s=l[0],c=l[1],u=(0,g._)((0,y.useState)(!1),2),d=u[0],p=u[1],f=(0,g._)((0,y.useState)(null),2),h=f[0],m=f[1],v=(0,y.useCallback)((n=(0,ef._)(function(e){var n,t,r,l;return(0,em.YH)(this,function(u){switch(u.label){case 0:if(p(!0),m(null),n=s)return[3,2];return[4,a.sessions.create({sessionType:H.dF3.INLINE_CHAT})];case 1:if(!(t=u.sent()).ok)return p(!1),m("Failed to create session"),[2];c(n=t.payload),u.label=2;case 2:if(!i)return[3,6];u.label=3;case 3:return u.trys.push([3,5,,6]),[4,i()];case 4:return r=u.sent(),[3,6];case 5:return u.sent(),p(!1),m("Failed to get file context"),[2];case 6:l="advanced"===o?H.e3q.ADVANCED:H.e3q.BASIC,u.label=7;case 7:return u.trys.push([7,9,,10]),[4,n.appendEvent({kind:"inlineAction",message:e.message,messageType:e.type,modelType:l,codeReference:e.codeReference,fileContext:null==r?void 0:r.fileContext,mostRecentFile:null==r?void 0:r.mostRecentFile,useRag:!0})];case 8:return u.sent(),[3,10];case 9:return u.sent(),p(!1),m("Failed to send message"),[3,10];case 10:return[2]}})}),function(e){return n.apply(this,arguments)}),[a.sessions,s,i,o]),w=(0,y.useCallback)((0,ef._)(function(){return(0,em.YH)(this,function(e){switch(e.label){case 0:if(!s)return[3,2];return[4,s.abortLastEvent()];case 1:e.sent(),p(!1),e.label=2;case 2:return[2]}})}),[s]),b=(0,y.useCallback)(function(){return m(null)},[]),S=(0,y.useMemo)(function(){return null==s?void 0:s.reduce(rc,1).result},[s]),Y=(0,t4.G9)(S);return(0,t4.q3)(S,{next:function(e){(null==e?void 0:e.completed)&&d&&p(!1),(null==e?void 0:e.error)&&!h&&m(e.error),(null==e?void 0:e.code)&&r(e.code)}}),{sendMessage:v,stopMessage:w,getCode:function(){return Y.current},loading:d,completed:null==(t=Y.current)?void 0:t.completed,error:h,clearError:b}}var rd=t(19882),rp=t(85746),rf=t(13771),rh=t(1369),rm=(0,Y.eU)(0),rg=(0,Y.eU)(function(e){return e(rm)<=tT.bX?"compact":"normal"}),rv=new tB.E(function(e){var n=e.id,t=e.requestMeasure,r=e.codeReference,i=e.updateCodeBlock,o=e.acceptSuggestion,a=e.onClose,l=e.autoFocus,s=e.source,c=function(){var e=x();(null==e?void 0:e.code)?(o(e.code),(0,eX.u4)(eX.AZ.AI_INLINE_EVENT,{action:"suggestion_accepted",intent_type:"generate",message_content:e.code,source:s})):E()},u=function(){var e,n;I.current=P,(0,eX.u4)(eX.AZ.AI_INLINE_EVENT,{action:"message_sent",intent_type:"generate",message_content:P,source:s}),S({message:P,type:H.Z1T.GENERATE_CODE,codeReference:{code:r.code,range:r.range,filePath:r.filePath,fileContent:null!=(e=r.fileContent)?e:"",fileVersion:r.fileVersion,language:null!=(n=r.language)?n:"",referenceType:H.fDX.INLINE}})},d=(0,z.k)().assistantInlineMode,p=(0,z.UK)().hasAccessToAdvancedModel,f=(0,g._)((0,y.useState)(!1),2),h=f[0],m=f[1],v=(0,z.lW)(),b=ru({onCode:i,getFileContext:(0,t7.H)(),assistantMode:d}),S=b.sendMessage,A=b.stopMessage,x=b.getCode,C=b.loading,_=b.completed,k=b.error,D=b.clearError,E=(0,y.useCallback)(function(){A(),a()},[A,a]),R=(0,y.useCallback)(function(){(0,eX.u4)(eX.AZ.AI_INLINE_EVENT,{action:"inline_textbox_closed",intent_type:"generate",source:s}),E()},[E,s]),I=(0,y.useRef)(null),F=(0,y.useRef)(null),T=(0,tT.D3)({id:n,inputRef:F,loading:C,onSubmit:function(){W?c():u()},onClose:R}),P=T.value,L=T.setValue,U=T.onKeyDown,N=T.escPressed,O=function(){(0,eX.u4)(eX.AZ.AI_INLINE_EVENT,{action:"generation_stopped",intent_type:"generate",message_content:P,source:s}),A()},M=(0,z.Gk)(),B=(0,z.q4)(),W=M&&_&&I.current===P,G=(0,g._)((0,y.useState)(function(){return(0,Y.y$)()}),1)[0],V=(0,rs.Xr)(rm,{store:G}),j=(0,rs.md)(rg,{store:G}),Z=(0,rd.A)(function(e){return V(e.width)}),q=(0,z.jt)(),K=(0,z.hT)(),$=q&&(K===H.g32.AGENT_STATE_RUNNING||K===H.g32.AGENT_STATE_PAUSING);return B?(0,w.Y)(tT.Rc,{inlineActionType:"Generate",closeAction:E}):$?(0,w.Y)(tT.ce,{inlineActionType:"Generate",closeAction:E}):(0,w.FD)(w.FK,{children:[(0,w.FD)(tT.y1,{requestMeasure:t,type:"generateCode",error:k,clearError:D,innerRef:Z,children:[(0,w.Y)(tT.pd,{value:P,inputRef:F,onChange:function(e){return L(e.currentTarget.value)},placeholder:"Enter a prompt to generate new code",onKeyDown:U,autoFocus:l}),(0,w.FD)(tT.wi,{children:[(0,w.FD)(w.FK,{children:[(0,w.Y)(tT.sb,{type:"generateCode",readableModelName:p?v.advancedModel.name.readable:v.basicModel.name.readable}),_?(0,w.Y)(tH.K0,{disabled:!M,alt:"Rerun the same prompt",onClick:function(){return u()},size:12,colorway:"grey",children:(0,w.Y)(rh.A,{})}):null]}),W?(0,w.FD)(w.FK,{children:[(0,w.Y)(t9.$n,{variant:"outlined",size:"small",text:"Reject",onClick:function(){var e=x();(0,eX.u4)(eX.AZ.AI_INLINE_EVENT,{action:"suggestion_rejected",intent_type:"generate",message_content:(null==e?void 0:e.code)?e.code:"",source:s}),R()}}),(0,w.Y)(t9.$n,{size:"small",text:"Accept",colorway:"blurple",onClick:c,dataCy:"ghostwriter-inline-accept-suggestion"})]}):(0,w.Y)(tT.XT,{escPressed:N,connecting:!M,loading:C,disabled:!P||!P.trim(),promptPresentation:"normal"===j,onClick:function(){C?O():u()}})]})]}),(0,w.Y)(rf.A,{isOpen:h,onClose:function(){return m(!1)},type:"purchase",analyticsContext:{upgrade:{context:"ai_model_selector",surface:"ghostwriter_power_up_dialog"}},reloadPageAfterPurchaseComplete:!0})]})}),rw=function(e){function n(e){var t,r=e.id,i=e.codeReference,o=e.source;return(0,eh._)(this,n),(t=(0,te._)(this,n)).id=r,t.codeReference=i,t.source=o,t}(0,tt._)(n,e);var t=n.prototype;return t.toDOM=function(e){var n=this.id,t=this.codeReference,r=this.source,i=rv.create({id:n,requestMeasure:function(){return e.requestMeasure()},codeReference:t,onClose:function(){return tL(e,t)},acceptSuggestion:function(n){return tU(e,n,t.range.indexFrom)},updateCodeBlock:function(n){return tN(e,n)},autoFocus:!0,source:r});return i.style.position="sticky",i.style.top="0px",i.style.zIndex=String(rp.W.floatingHeaderActive),i},t.updateDOM=function(e,n){var t=this.codeReference;return rv.update(e,function(e){return(0,t2.jM)(e,function(e){e.requestMeasure=function(){return n.requestMeasure()},e.codeReference=t,e.onClose=function(){return tL(n,t)},e.acceptSuggestion=function(e){return tU(n,e,t.range.indexFrom)},e.updateCodeBlock=function(e){return tN(n,e)},e.autoFocus=!1})}),!0},t.eq=function(e){return tM(this.codeReference,e.codeReference)},n}(ew.xO),ry=t(73561),rb=t(12826),rS=t(10293),rY=t(3499),rA=t(21938),rx=t(60632),rC=(0,$.x)({container:[{marginRight:16},J.wp.height("100%")],hintButton:[J.wp.height("100%")]}),r_=new tB.E(function(e){var n=e.onGenerateCode,t=e.height,r=(0,B.m5)(),i=(0,rx.Jn)(rY.G.id),o=Math.round(.6*t);return(0,w.Y)(Q.S,{css:rC.container,children:(0,w.Y)(rA.u,{keyCombo:r?void 0:i,text:"Generate",fontSize:o,css:rC.hintButton,onClick:function(){(0,eX.u4)(rS.AZ.GHOSTWRITER_CHAT_INLINE_HINT_CLICKED,{action:"generate"}),n()}})})}),rk=ew.Lz.theme({".cm-ghostwriter-hint-layer":{width:"100%"}}),rD=function(e){var n=e.selection.main.head;return e.doc.lineAt(n)},rE=new nN.k(function(e){return D.sU.define({create:function(e){return rD(e)},compare:ev(),update:function(e,n){return rD(n.state)},provide:function(n){return[rk,D.Nb.high((0,ew.qd)({above:!0,class:"cm-ghostwriter-hint-layer",update:function(e){return(0,ey.$H)(e,n,tZ.z,ry.RJ)},markers:function(t){var r=t.state.field(n,!1);if(!r||!t.state.selection.main.empty)return[];var i=t.state.field(tZ.z,!1),o=0===t.state.doc.length,a=(0,rb.R)(t.state);if(r.length>0||i||a||o)return[];var l=t.dom.querySelector(".cm-minimap-gutter"),s=(null==l?void 0:l.clientWidth)||0,c=r.to,u=t.lineBlockAt(c),d=u.top,p=u.height;return[new rR({top:d+t.documentPadding.top,height:p,right:s,pocketOpen:null!==i,activeEditor:t.hasFocus,onGenerateCode:e})]}}))]}})}),rR=function(){function e(n){(0,eh._)(this,e),this.options=n}var n=e.prototype;return n.position=function(e){e.style.top=this.options.top+"px",e.style.height=this.options.height+"px",e.style.right=this.options.right+"px",e.style.paddingRight=Math.round(.2*this.options.height)+"px"},n.draw=function(){var e=r_.create({onGenerateCode:this.options.onGenerateCode,height:this.options.height});return e.className="cm-ghostwriter-hint-marker",this.options.activeEditor||(e.style.visibility="hidden"),this.position(e),e},n.eq=function(e){return this.options.top===e.options.top&&this.options.pocketOpen===e.options.pocketOpen&&this.options.activeEditor===e.options.activeEditor},e}(),rI=t(98305),rF=(0,$.x)({root:[J.wp.border({color:eN.LU.outlineDimmest}),J.wp.p(8),J.wp.borderRadius(4)],text:[J.wp.flex.growAndShrink(1)]}),rT=new tB.E(function(e){var n=e.onClose,t=e.requestMeasure;return(0,w.Y)(tT.N2,{requestMeasure:t,type:"ghostwriterKillswitch",children:(0,w.FD)(Q.S,{css:rF.root,row:!0,gap:8,children:[(0,w.Y)(Q.S,{css:rF.text,children:(0,w.Y)(rI.E,{textVariant:"text"})}),(0,w.Y)(tH.K0,{alt:"Close",onClick:n,type:"button",children:(0,w.Y)(tW.A,{})})]})})}),rP=function(e){function n(e){var t,r=e.codeReference;return(0,eh._)(this,n),(t=(0,te._)(this,n)).codeReference=r,t}return(0,tt._)(n,e),n.prototype.toDOM=function(e){var n=this;return rT.create({onClose:function(){return tL(e,n.codeReference)},requestMeasure:function(){return e.requestMeasure()}})},n}(ew.xO),rL=t(13953),rU=(0,Y.eU)(0),rN=(0,Y.eU)(function(e){return e(rU)<=tT.bX?"compact":"normal"}),rO=new tB.E(function(e){var n=e.id,t=e.requestMeasure,r=e.codeReference,i=e.updateCodeBlock,o=e.acceptSuggestion,a=e.onClose,l=e.autoFocus,s=e.updateDiffSelection,c=e.source,u=function(){var e=_();(null==e?void 0:e.completed)===void 0&&(null==L?void 0:L.completed)&&(e=L),(null==e?void 0:e.code)?((0,eX.u4)(eX.AZ.AI_INLINE_EVENT,{action:"suggestion_accepted",intent_type:"modify",message_content:e.code,source:c}),o(e.code)):O()},d=function(){var e,n;B.current=j,(0,eX.u4)(eX.AZ.AI_INLINE_EVENT,{action:"message_sent",intent_type:"modify",message_content:j,source:c}),x({message:j,type:H.Z1T.TRANSFORM_CODE,codeReference:{code:r.code,range:r.range,filePath:r.filePath,fileContent:null!=(e=r.fileContent)?e:"",fileVersion:r.fileVersion,language:null!=(n=r.language)?n:"",referenceType:H.fDX.INLINE}})},p=(0,z.k)().assistantInlineMode,f=(0,z.UK)().hasAccessToAdvancedModel,h=(0,g._)((0,y.useState)(!1),2),m=h[0],v=h[1],b=(0,z.lW)(),S=(0,z.q4)(),A=ru({onCode:i,getFileContext:(0,t7.H)(),assistantMode:p}),x=A.sendMessage,C=A.stopMessage,_=A.getCode,k=A.loading,D=A.completed,E=A.error,R=A.clearError,I=(0,g._)((0,y.useState)(!1),2),F=I[0],T=I[1],P=(0,g._)((0,y.useState)(null),2),L=P[0],U=P[1],N=(0,t5.A)(s);(0,y.useEffect)(function(){if(k)return void N.current(tq.Suggestion);(D||F)&&N.current(E?tq.Original:tq.Compare)},[N,D,F,E,k]);var O=(0,y.useCallback)(function(){C(),a()},[C,a]),M=(0,y.useCallback)(function(){(0,eX.u4)(eX.AZ.AI_INLINE_EVENT,{action:"inline_textbox_closed",intent_type:"modify",source:c}),O()},[O,c]),B=(0,y.useRef)(null),W=function(){(0,eX.u4)(eX.AZ.AI_INLINE_EVENT,{action:"generation_stopped",intent_type:"modify",message_content:j,source:c}),C()},G=(0,y.useRef)(null),V=(0,tT.D3)({id:n,inputRef:G,loading:k,onSubmit:function(){J?u():d()},onClose:M}),j=V.value,Z=V.setValue,q=V.onKeyDown,K=V.escPressed,$=(0,z.Gk)(),J=$&&!E&&(D||F)&&B.current===j,Q=(0,g._)((0,y.useState)(function(){return(0,Y.y$)()}),1)[0],X=(0,rs.Xr)(rU,{store:Q}),ee=(0,rs.md)(rN,{store:Q}),en=(0,rd.A)(function(e){return X(e.width)});(0,y.useEffect)(function(){var e="inline-ai/last-sent-value/".concat(n),t="inline-ai/last-completed/".concat(n),r="inline-ai/last-code-res/".concat(n),i=rL.A.get(e,"string"),o=rL.A.get(t,"boolean"),a=rL.A.get(r,"object");return i&&(B.current=i),T(!!o&&o),a&&U({code:a.code,completed:a.completed,error:a.error}),function(){rL.A.set(t,D||o);var n=_();if((null==n?void 0:n.completed)!==void 0&&rL.A.set(r,n),B.current){var i=B.current;if(0===i.length)return void rL.A.remove(e);rL.A.set(e,i)}}},[D,_,n]);var et="basic"===p?z.a:z.K6,er=r.code.length>et,ei=(0,z.jt)(),eo=(0,z.hT)(),ea=ei&&(eo===H.g32.AGENT_STATE_RUNNING||eo===H.g32.AGENT_STATE_PAUSING);return S?(0,w.Y)(tT.Rc,{inlineActionType:"Modify",closeAction:O}):ea?(0,w.Y)(tT.ce,{inlineActionType:"Modify",closeAction:O}):(0,w.FD)(w.FK,{children:[(0,w.FD)(tT.y1,{requestMeasure:t,type:"generateCode",error:E,clearError:R,innerRef:en,children:[(0,w.Y)(tT.pd,{value:j,inputRef:G,onChange:function(e){return Z(e.currentTarget.value)},placeholder:"Enter a prompt to modify selected lines",onKeyDown:q,autoFocus:l}),(0,w.FD)(tT.wi,{children:[(0,w.FD)(w.FK,{children:[(0,w.Y)(tT.sb,{type:"transformCode",readableModelName:f?b.advancedModel.name.readable:b.basicModel.name.readable}),D||F?(0,w.Y)(tH.K0,{alt:"Rerun the same prompt",onClick:function(){return d()},size:12,colorway:"grey",disabled:!$,children:(0,w.Y)(rh.A,{})}):null]}),J?(0,w.FD)(w.FK,{children:[(0,w.Y)(t9.$n,{variant:"outlined",size:"small",text:"Reject",onClick:function(){var e=_();(null==e?void 0:e.completed)===void 0&&(null==L?void 0:L.completed)&&(e=L),(0,eX.u4)(eX.AZ.AI_INLINE_EVENT,{action:"suggestion_rejected",intent_type:"modify",message_content:(null==e?void 0:e.code)?e.code:"",source:c}),M()}}),(0,w.Y)(t9.$n,{size:"small",text:"Accept",colorway:"blurple",onClick:u,dataCy:"ghostwriter-inline-accept-suggestion"})]}):(0,w.Y)(tT.XT,{escPressed:K,connecting:!$,loading:k,disabled:!j||!j.trim()||er,promptPresentation:"normal"===ee,onClick:function(){k?W():d()},codeLengthExceeded:er})]})]}),(0,w.Y)(rf.A,{isOpen:m,onClose:function(){return v(!1)},type:"purchase",analyticsContext:{upgrade:{context:"ai_model_selector",surface:"ghostwriter_power_up_dialog"}},reloadPageAfterPurchaseComplete:!0})]})}),rM=function(e){function n(e){var t,r=e.id,i=e.codeReference,o=e.source;return(0,eh._)(this,n),(t=(0,te._)(this,n)).id=r,t.codeReference=i,t.source=o,t}(0,tt._)(n,e);var t=n.prototype;return t.toDOM=function(e){var n=this.id,t=this.codeReference,r=this.source,i=rO.create({id:n,requestMeasure:function(){return e.requestMeasure()},codeReference:t,onClose:function(){return tL(e,t)},acceptSuggestion:function(n){return tO(e,n,t)},updateCodeBlock:function(n){tN(e,n)},updateDiffSelection:function(n){e.dispatch({effects:tK.of(n)})},autoFocus:!0,source:r});return i.style.position="sticky",i.style.top="0px",i.style.zIndex="10",i},t.updateDOM=function(e,n){var t=this.codeReference;return rO.update(e,function(e){return(0,t2.jM)(e,function(e){e.requestMeasure=function(){return n.requestMeasure()},e.codeReference=t,e.onClose=function(){return tL(n,t)},e.acceptSuggestion=function(e){return tO(n,e,t)},e.updateCodeBlock=function(e){return tN(n,e)},e.updateDiffSelection=function(e){n.dispatch({effects:tK.of(e)})},e.autoFocus=!1})}),!0},t.eq=function(e){return tM(this.codeReference,e.codeReference)},n}(ew.xO),rB=t(68912),rH=eN.LU.blurpleDimmest,rz=eN.LU.accentPrimaryDimmest,rW=ew.Lz.theme({".cm-pocket-highlight":{backgroundColor:eN.LU.blurpleDimmest,opacity:.2},"@keyframes moveGradient":{"0%":{backgroundPositionX:"100%"},"100%":{backgroundPositionX:"0%"}},".cm-pocket-highlight-loading":{background:"linear-gradient(90deg, ".concat(eN.LU.blurpleDimmest,", ").concat(rz,", ").concat(rH,", ").concat(rz,")"),backgroundSize:"300% 100%",backgroundPositionX:"0%",animation:"moveGradient 2s linear infinite"}}),rG=ew.Lz.decorations.compute([tZ.z,t$,eb.Md],function(e){var n=e.field(tZ.z),t=e.facet(eb.Md);if(!n||!t||n.codeReference.filePath!==t)return ew.NZ.none;var r=e.doc.lineAt(n.codeReference.range.indexFrom).from,i={generateCode:rw,transformCode:rM,explainCode:rl,ghostwriterKillswitch:rP,codeLengthExceeded:tj}[n.type],o=ew.NZ.widget({widget:new i({id:n.id,codeReference:n.codeReference,source:n.source}),block:!0,side:0}).range(r);return ew.NZ.set(o)}),rV=(0,ew.qd)({above:!1,update:function(e){return(0,ey.$H)(e,tZ.z)},markers:function(e){var n=e.state.field(tZ.z),t=e.state.facet(eb.Md);if(!n||!t||n.codeReference.filePath!==t)return[];var r=n.codeReference.range.indexFrom,i=n.codeReference.range.indexTo,o=e.state.doc.lineAt(i);o.from>=r&&o.to===i&&i<e.state.doc.length&&(i+=1);var a=D.OF.range(r,i),l=n.loading&&n.codeReference.range.indexFrom<n.codeReference.range.indexTo?"cm-pocket-highlight-loading":"cm-pocket-highlight";return ew.Ip.forRange(e,l,a)}}),rj=tF.compute([tZ.z,tZ.Q,eb.Md,t$],function(e){var n=e.field(tZ.z),t=e.field(tZ.Q),r=e.facet(eb.Md),i=e.field(t$);return n&&t&&r&&n.codeReference.filePath===r&&"transformCode"===n.type&&i===tq.Compare?D.VR.of({from:n.codeReference.range.indexFrom,to:n.codeReference.range.indexTo,insert:t},e.doc.length).apply(e.doc):null}),rZ=n9.x.compute([tZ.z,tZ.Q,eb.Md],function(e){var n=e.field(tZ.z),t=e.field(tZ.Q),r=e.facet(eb.Md);return n&&t&&r&&n.codeReference.filePath===r&&"generateCode"===n.type?D.VR.of({from:n.codeReference.range.indexTo,to:n.codeReference.range.indexTo,insert:t},e.doc.length):null}),rq=function(e){function n(e){var t;return(0,eh._)(this,n),(t=(0,te._)(this,n)).type=e,t}return(0,tt._)(n,e),n.from=function(e){switch(e){case"yours":return this.yours;case"base":return this.base;case"middle":return this.middle;case"theirs":return this.theirs}},n.range=function(e,n,t){return this.from(e).range(n,t)},n}(D.FB);function rK(e){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:7,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length,i=[],o=t;o<=r;){var a=e.lineAt(o),l=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:7;if(e.text.length<n)return null;var t=e.text[0],r=function(e){switch(e){case"<":return"yours";case"|":return"base";case"=":return"middle";case">":return"theirs";default:return null}}(t);if(!r)return null;var i=t.repeat(n);return e.text.slice(0,n)!==i||e.text.length>n&&" "!==e.text[n]?null:r}(a,n);l&&i.push(rq.range(l,a.from,a.to)),o=a.to+1}return i}rq.yours=new rq("yours"),rq.base=new rq("base"),rq.middle=new rq("middle"),rq.theirs=new rq("theirs");var r$=["yours","base","middle","theirs"];function rJ(e){Array.isArray(e)&&(e=D.om.of(e));var n=[],t=[];if(0===e.size)return{hunks:n,hanging:t};for(var r=e.iter();null!==r.value;){var i,o,a,l={},s={},c=[],u=!0,d=!1,p=void 0;try{for(var f,h=r$[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var m=f.value,g=r.value,w=r.from,y=r.to;if("base"!==m||g.type===m){if(g.type===m)l[m]={from:w,to:y},c.push({from:w,to:y,type:g.type});else if("yours"!==g.type)c.push({from:w,to:y,type:g.type});else break;if(r.next(),null===r.value)break}}}catch(e){d=!0,p=e}finally{try{u||null==h.return||h.return()}finally{if(d)throw p}}if(!l.yours||!l.middle||!l.theirs){t.push.apply(t,(0,v._)(c));continue}null!=l.base||(l.base=null),null!=s.base||(s.base=null);var b=null!=(a=l.base)?a:l.middle,S=l.yours.to+1,Y=b.from-1;if(s.yours=S<Y?{from:S,to:Y}:null,l.base){var A=l.base.to+1,x=l.middle.from-1;s.base=A<x?{from:A,to:x}:null}var C=l.middle.to+1,_=l.theirs.from-1;s.theirs=C<_?{from:C,to:_}:null;var k={from:l.yours.from,to:l.theirs.to,markers:l,content:s};n.push(k)}return{hunks:n,hanging:t}}var rQ=D.sj.define({combine:function(e){return e.length?e[0]:7}}),rX=D.sU.define({create:function(e){var n=e.doc,t=e.facet(rQ),r=D.om.of(rK(n,t)),i=rJ(r);return{markers:r,hunks:i.hunks,hanging:i.hanging}},update:function(e,n){var t=n.newDoc,r=n.startState.facet(rQ),i=n.state.facet(rQ);if(r!==i){var o=D.om.of(rK(t,i)),a=rJ(o);return{markers:o,hunks:a.hunks,hanging:a.hanging}}if(!n.docChanged)return e;var l=null,s=null,c=null,u=null;n.changes.iterChangedRanges(function(e,n,t,r){l=null===l?e:Math.min(l,e),s=null===s?n:Math.max(s,n),c=null===c?t:Math.min(c,t),u=null===u?r:Math.max(u,r)});var d=e.markers;if(null!==l&&null!==s){var p=n.startState.doc.lineAt(l).from,f=n.startState.doc.lineAt(s).to;d=d.update({filter:function(){return!1},filterFrom:p,filterTo:f})}d=d.map(n.changes),null!==c&&null!==u&&(d=d.update({add:rK(t,i,c,u)}));var h=rJ(d);return{markers:d,hunks:h.hunks,hanging:h.hanging}}}),r0=ew.Lz.atomicRanges.from(rX,function(e){return function(){return e.markers}}),r1=D.$t.changeFilter.of(function(e){var n=e.startState.field(rX);if(!e.docChanged||0===n.markers.size)return!0;var t=e.startState.doc,r=[];return e.changes.iterChanges(function(e,i,o,a,l){var s=l.length,c=Math.max(t.lineAt(e).from-1,0),u=Math.min(t.lineAt(i).to+1,t.length);n.markers.between(c,u,function(n,c){if((!(e<=n)||!(i>=c))&&(0===s||(e!==c||"\n"!==l.sliceString(0,1))&&(i!==n||"\n"!==l.sliceString(s-1,s)))){if(o!==a||(i!==c+1||0!==t.lineAt(i).length)&&(e!==n-1||0!==t.lineAt(e).length))r.push(n-1,c+1)}})}),!(r.length>0)||r}),r2=D.$t.transactionFilter.of(function(e){var n=e.docChanged?e.state.field(rX):e.startState.field(rX);if(0===n.markers.size)return e;var t=e.newSelection,r=!1,i=!1;do{i=!1;for(var o=0;o<t.ranges.length&&"break"!==function(e){var o=t.ranges[e],a=o.from,l=o.to,s=a,c=l;if(n.markers.between(a,l,function(e,n){var t=(e+n)/2;a>e&&a<n&&(s=a<t?e:n),l>e&&l<n&&(c=l<t?e:n)}),s!==a||c!==l){var u,d=o.anchor<o.head?s:c,p=o.anchor<o.head?c:s,f=o.goalColumn,h=null!=(u=o.bidiLevel)?u:void 0,m=D.OF.range(d,p,f,h);return t=t.replaceRange(m,e),i=!0,r=!0,"break"}}(o);o++);}while(i);return r?[e,{selection:t,sequential:!0}]:e}),r4="cm-git-conflict-marker-yours",r5="cm-git-conflict-marker-base",r3="cm-git-conflict-marker-middle",r6="cm-git-conflict-marker-theirs",r8="cm-git-conflict-marker-hanging",r7="cm-git-conflict-content-yours",r9="cm-git-conflict-content-base",ie="cm-git-conflict-content-theirs";function it(e){var n=e.background,t=e.color,r=e.noBorder,i={color:t,backgroundColor:n,backgroundClip:"padding-box",paddingTop:eN.LU.space4,paddingBottom:eN.LU.space4,fontWeight:eN.LU.fontWeightBold};return void 0!==r&&r||(i.borderLeft="4px solid rgba(0, 150, 255, 0.1)",i.paddingLeft="2px"),i}function ir(e){return{backgroundColor:e.background,backgroundClip:"padding-box",borderLeft:"4px solid rgba(0, 150, 255, 0.1)",paddingLeft:"2px"}}var ii=ew.Lz.theme((o={},(0,ts._)(o,".".concat(r4),it({background:"rgba(0, 150, 255, 0.1)",color:eN.LU.blueStrongest,noBorder:!0})),(0,ts._)(o,".".concat(r3),it({background:"rgba(255, 0, 0, 0.1)",color:eN.LU.redStrongest})),(0,ts._)(o,".".concat(r5),it({background:"rgba(255, 165, 0, 0.1)",color:eN.LU.orangeStrongest})),(0,ts._)(o,".".concat(r6),it({background:"rgba(0, 150, 255, 0.1)",color:eN.LU.blueStrongest,noBorder:!0})),(0,ts._)(o,".".concat(r8),it({background:"rgba(100, 150, 255, 0.1)",color:eN.LU.blueStrongest,noBorder:!0})),(0,ts._)(o,".".concat(r7),ir({background:"rgba(0, 255, 0, 0.1)"})),(0,ts._)(o,".".concat(ie),ir({background:"rgba(255, 0, 0, 0.1)"})),(0,ts._)(o,".".concat(r9),ir({background:"rgba(255, 165, 0, 0.1)"})),o)),io={yours:{marker:ew.NZ.line({class:r4}),content:ew.NZ.line({class:r7})},base:{marker:ew.NZ.line({class:r5}),content:ew.NZ.line({class:r9})},middle:{marker:ew.NZ.line({class:r3})},theirs:{marker:ew.NZ.line({class:r6}),content:ew.NZ.line({class:ie})},hanging:{marker:ew.NZ.line({class:r8})}},ia=function(){function e(n){(0,eh._)(this,e),this.builder=new D.vB,this.doc=n}var n=e.prototype;return n.add=function(e,n){var t=this.doc.lineAt(e.from);if(t.to>=e.to)return void this.builder.add(t.from,t.from,n);for(var r=t.from;r<=e.to;)this.builder.add(r,r,n),r=this.doc.lineAt(r).to+1},n.finish=function(){return this.builder.finish()},e}(),il=ew.Lz.decorations.from(rX,function(e){return function(n){var t=new ia(n.state.doc),r=!0,i=!1,o=void 0;try{for(var a,l=e.hunks[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var s=a.value;n.viewport.from>s.to||n.viewport.to<s.from||(t.add(s.markers.yours,io.yours.marker),s.content.yours&&t.add(s.content.yours,io.yours.content),s.markers.base&&t.add(s.markers.base,io.base.marker),s.content.base&&t.add(s.content.base,io.base.content),t.add(s.markers.middle,io.middle.marker),s.content.theirs&&t.add(s.content.theirs,io.theirs.content),t.add(s.markers.theirs,io.theirs.marker))}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return t.finish()}}),is=ew.Lz.decorations.from(rX,function(e){return function(){var n=new D.vB,t=!0,r=!1,i=void 0;try{for(var o,a=e.hanging[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;n.add(l.from,l.from,io.hanging.marker)}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n.finish()}}),ic=[rX,[r0,r1,r2],[D.Nb.lowest(ii),il,is]],iu=function(){function e(n,t,r,i,o,a){(0,eh._)(this,e),this.original=n,this.current=t,this.chunks=r,this.desc=i,this.pending=o,this.ranges=a}var n=e.prototype;return n.hasChanges=function(){return this.ranges.length>0},n.update=function(n,t){var r,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3?arguments[3]:void 0,a=this.original,l=this.chunks,s=this.desc,c=this.pending,u=this.ranges;if(Math.abs((this.pending?this.pending.length:this.current.length)-n.length)>=250||i){var d=(0,tY._c)(s,c,t).pending;l=(0,tY.Pt)(a,n,{chunks:l,changesB:d},o),s=(0,tY.fc)(l,a.length),c=null,u=(0,tY.Zl)(s)}else c=(r=(0,tY._c)(s,c,t)).pending,s=r.desc,u=(0,tY.Zl)(s);return c&&n.eq(a)&&(l=[],s=D.VR.empty(a.length),c=null,u=[]),new e(a,n,l,s,c,u)},n.isAccurate=function(){return null===this.pending},n.getLineChangeType=function(e){var n=this.current.line(e);return 0===this.original.length&&this.current.length>0?tY.DE.COVERED:(0,tY.$F)(this.original,this.current,n,tY.mn.B,this.ranges)},n.iterRanges=function(){return(0,em.YH)(this,function(e){switch(e.label){case 0:return[5,(0,em.Ju)(this.ranges)];case 1:return e.sent(),[2]}})},e.create=function(n,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:tY.r6,i=(0,tY.Pt)(n,t,void 0,r),o=(0,tY.fc)(i,n.length),a=(0,tY.Zl)(o);return new e(n,t,i,o,null,a)},e}(),id=t(34626),ip=D.sj.define({combine:function(e){var n;return null!=(n=e.filter(Boolean)[0])?n:null}}),ih=D.sU.define({create:function(){return null},update:function(e,n){var t=n.state.facet(ip);if(!t||Math.max(t.lines,n.newDoc.lines)>5e3||Math.max(t.length,n.newDoc.length)>4e5)return null;var r=performance.now(),i=tY.r6,o="unknown";e&&e.original.eq(t)?n.docChanged&&(e=e.update(n.newDoc,n.changes,!(n.isUserEvent("input.type")||n.isUserEvent("delete.forward")||n.isUserEvent("delete.backward")),i),o="update"):(e=iu.create(t,n.newDoc,i),o="create");var a=performance.now()-r;return a>1e3&&id.vF.time("slow SloppyDiff.create recorded",a,{start:t.toString(),end:n.newDoc.toString(),scanLimit:i.scanLimit,type:o}),e}}),im=t(61559),ig=(0,ew.cU)({class:im.n1,renderEmptyElements:!0,lineMarker:function(e,n){var t=e.state.field(ih,!1);if(!t||!t.hasChanges())return im.jn;if(0===t.original.length)return im.Ww;var r=e.state.doc.lineAt(n.from);switch(t.getLineChangeType(r.number)){case tY.DE.COVERED:return im.CI;case tY.DE.MODIFIED:return im.tH;default:return im.jn}},initialSpacer:function(e){return e.state.field(ih,!1)?im.Ww:im.jn},updateSpacer:function(e,n){var t=n.state.field(ih,!1)?im.Ww:im.jn;return e===t?e:t}}),iv=D.sj.define({enables:function(e){return[ip.computeN([e],function(n){return n.facet(e)}),im.s,ih,D.Nb.highest(ig)]}}),iw=t(98468),iy=function(e){return e.GUTTER_DIFF="GUTTER_DIFF",e.INLINE_DIFF="INLINE_DIFF",e}({}),ib=D.Pe.define(),iS=D.Pe.define(),iY=D.sU.define({create:function(){return{head:null,mode:"GUTTER_DIFF"}},update:function(e,n){var t=e.head,r=e.mode,i=!0,o=!1,a=void 0;try{for(var l,s=n.effects[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=l.value;c.is(ib)?t=c.value:c.is(iS)&&(r=c.value)}}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}return t!==e.head||r!==e.mode?{head:t,mode:r}:e},provide:function(e){return[iv.from(e,function(e){return"GUTTER_DIFF"===e.mode?e.head:null}),iw.X.from(e,function(e){return"INLINE_DIFF"===e.mode?e.head:null})]}}),iA=function(){function e(n,t,r){var i=this;(0,eh._)(this,e),this.view=n,this.git=t,this.path=r,this.disposed=!1,this.dispose=t.onRefresh(function(){return i.fetchThenUpdateState()}),this.fetchThenUpdateState()}var n=e.prototype;return n.fetchThenUpdateState=function(){var e=this;return(0,ef._)(function(){var n,t,r,i,o;return(0,em.YH)(this,function(a){switch(a.label){case 0:return[4,e.git.getFileContents({path:e.path,revision:"HEAD",convertToBase64:(0,N.FN)(e.path)})];case 1:if(n=a.sent(),e.disposed||!(t=e.view.state.field(iY,!1)))return[2];return(!(o=null===(i=n.error?null:null!=(r=n.content)?r:"")?null:e.view.state.toText(i))!=!t.head||o&&t.head&&!o.eq(t.head))&&e.view.dispatch({effects:ib.of(o)}),[2]}})})()},n.destroy=function(){this.dispose(),this.disposed=!0},e}(),ix=t(5504),iC=new nN.k(function(e,n,t){var r=[n?[iY,ew.Z9.define(function(t){return new iA(t,e,n)})]:[]];return t||r.push(ic),r}),i_=t(40733),ik=t(81250),iD=t(52422),iE=t(38310),iR=t(84344),iI=t(15530),iF=D.sj.define({combine:function(e){return e.some(Boolean)}}),iT=t(28844),iP=t(51175),iL=t(86466),iU=function(){function e(){(0,eh._)(this,e),this.value="",this.pos=0}var n=e.prototype;return n.text=function(e){this.value=e,this.pos=0},n.tokenText=function(e){return this.value.substr(e.pos,e.len)},n.next=function(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};var n,t=this.pos,r=0,i=this.value.charCodeAt(t);if("number"==typeof(n=e._table[i]))return this.pos+=1,{type:n,pos:t,len:1};if(e.isDigitCharacter(i)){n=8;do r+=1,i=this.value.charCodeAt(t+r);while(e.isDigitCharacter(i));return this.pos+=r,{type:n,pos:t,len:r}}if(e.isVariableCharacter(i)){n=9;do i=this.value.charCodeAt(t+ ++r);while(e.isVariableCharacter(i)||e.isDigitCharacter(i));return this.pos+=r,{type:n,pos:t,len:r}}n=10;do r+=1,i=this.value.charCodeAt(t+r);while(!isNaN(i)&&void 0===e._table[i]&&!e.isDigitCharacter(i)&&!e.isVariableCharacter(i));return this.pos+=r,{type:n,pos:t,len:r}},e.isDigitCharacter=function(e){return e>=48&&e<=57},e.isVariableCharacter=function(e){return 95===e||e>=97&&e<=122||e>=65&&e<=90},e}();a={},(0,ts._)(a,36,0),(0,ts._)(a,58,1),(0,ts._)(a,44,2),(0,ts._)(a,123,3),(0,ts._)(a,125,4),(0,ts._)(a,92,5),(0,ts._)(a,47,6),(0,ts._)(a,124,7),(0,ts._)(a,43,11),(0,ts._)(a,45,12),(0,ts._)(a,63,13),iU._table=a;var iN=function(){function e(){var n;(0,eh._)(this,e),this._children=[],n=this,["parent"].forEach(function(e){Object.defineProperty(n,e,{enumerable:!1,writable:!0})})}var n=e.prototype;return n.appendChild=function(e){return e instanceof iO&&this._children[this._children.length-1]instanceof iO?this._children[this._children.length-1].value+=e.value:(e.parent=this,this._children.push(e)),this},n.replace=function(e,n){var t=e.parent,r=t.children.indexOf(e),i=t.children.slice(0);i.splice.apply(i,[r,1].concat((0,v._)(n))),t._children=i,function e(n,t){var r=!0,i=!1,o=void 0;try{for(var a,l=n[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var s=a.value;s.parent=t,e(s.children,s)}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}}(n,t)},n.toString=function(){return this.children.reduce(function(e,n){return e+n.toString()},"")},n.len=function(){return 0},n.match=function(e){var n=!0,t=!1,r=void 0;try{for(var i,o=Object.entries(iq)[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=(0,g._)(i.value,2),l=a[0],s=a[1];if(this instanceof s&&l in e)return e[l](this)}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}},(0,tn._)(e,[{key:"children",get:function(){return this._children}},{key:"rightMostDescendant",get:function(){return this._children.length>0?this._children[this._children.length-1].rightMostDescendant:this}},{key:"snippet",get:function(){for(var e=this;;){if(!e)return;if(e instanceof ij)return e;e=e.parent}}}]),e}(),iO=function(e){function n(e){var t;return(0,eh._)(this,n),(t=(0,te._)(this,n)).value=e,t}(0,tt._)(n,e);var t=n.prototype;return t.toString=function(){return this.value},t.toTextmateString=function(){return n.escape(this.value)},t.len=function(){return this.value.length},t.clone=function(){return new n(this.value)},n.escape=function(e){return e.replace(/\$|}|\\/g,"\\$&")},n}(iN),iM=function(e){function n(){return(0,eh._)(this,n),(0,te._)(this,n,arguments)}return(0,tt._)(n,e),n}(iN),iB=function(e){function n(e){var t;return(0,eh._)(this,n),(t=(0,te._)(this,n)).index=e,t}(0,tt._)(n,e);var t=n.prototype;return t.toTextmateString=function(){var e="";return(this.transform&&(e=this.transform.toTextmateString()),0!==this.children.length||this.transform)?0===this.children.length?"${".concat(this.index).concat(e,"}"):this.choice?"${".concat(this.index,"|").concat(this.choice.toTextmateString(),"|").concat(e,"}"):"${".concat(this.index,":").concat(this.children.map(function(e){return e.toTextmateString()}).join("")).concat(e,"}"):"$".concat(this.index)},t.clone=function(){var e=new n(this.index);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map(function(e){return e.clone()}),e},n.compareByIndex=function(e,n){if(e.index===n.index)return 0;if(e.isFinalTabstop)return 1;if(n.isFinalTabstop)return -1;if(e.index<n.index)return -1;if(e.index>n.index)return 1;else return 0},(0,tn._)(n,[{key:"isFinalTabstop",get:function(){return 0===this.index}},{key:"choice",get:function(){return 1===this._children.length&&this._children[0]instanceof iH?this._children[0]:void 0}}]),n}(iM),iH=function(e){function n(){var e;return(0,eh._)(this,n),e=(0,te._)(this,n,arguments),e.options=[],e}(0,tt._)(n,e);var t=n.prototype;return t.appendChild=function(e){return e instanceof iO&&(e.parent=this,this.options.push(e)),this},t.toString=function(){return this.options[0].value},t.toTextmateString=function(){return this.options.map(function(e){return e.value.replace(/\||,|\\/g,"\\$&")}).join(",")},t.len=function(){return this.options[0].len()},t.clone=function(){var e=new n;return this.options.forEach(e.appendChild,e),e},n}(iN),iz=function(e){function n(){var e;return(0,eh._)(this,n),e=(0,te._)(this,n,arguments),e.regexp=RegExp(""),e}(0,tt._)(n,e);var t=n.prototype;return t.resolve=function(e){var n=this,t=!1,r=e.replace(this.regexp,function(){for(var e=arguments.length,r=Array(e),i=0;i<e;i++)r[i]=arguments[i];return t=!0,n._replace(r.slice(0,-2))});return!t&&this._children.some(function(e){return e instanceof iW&&!!e.elseValue})&&(r=this._replace([])),r},t._replace=function(e){var n="",t=!0,r=!1,i=void 0;try{for(var o,a=this._children[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;if(l instanceof iW){var s=e[l.index]||"";s=l.resolve(s),n+=s}else n+=l.toString()}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n},t.toString=function(){return""},t.toTextmateString=function(){return"/".concat(this.regexp.source,"/").concat(this.children.map(function(e){return e.toTextmateString()}),"/").concat((this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":""))},t.clone=function(){var e=new n;return e.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),e._children=this.children.map(function(e){return e.clone()}),e},n}(iN),iW=function(e){function n(e,t,r,i){var o;return(0,eh._)(this,n),(o=(0,te._)(this,n)).index=e,o.shorthandName=t,o.ifValue=r,o.elseValue=i,o}(0,tt._)(n,e);var t=n.prototype;return t.resolve=function(e){if("upcase"===this.shorthandName)return e?e.toLocaleUpperCase():"";if("downcase"===this.shorthandName)return e?e.toLocaleLowerCase():"";if("capitalize"===this.shorthandName)return e?e[0].toLocaleUpperCase()+e.substr(1):"";if("pascalcase"===this.shorthandName)return e?this._toPascalCase(e):"";if("camelcase"===this.shorthandName)return e?this._toCamelCase(e):"";else if(e&&"string"==typeof this.ifValue)return this.ifValue;else if(!e&&"string"==typeof this.elseValue)return this.elseValue;else return e||""},t._toPascalCase=function(e){var n=e.match(/[a-z0-9]+/gi);return n?n.map(function(e){return e.charAt(0).toUpperCase()+e.substr(1)}).join(""):e},t._toCamelCase=function(e){var n=e.match(/[a-z0-9]+/gi);return n?n.map(function(e,n){return 0===n?e.charAt(0).toLowerCase()+e.substr(1):e.charAt(0).toUpperCase()+e.substr(1)}).join(""):e},t.toTextmateString=function(){var e="${";return e+=this.index,this.shorthandName?e+=":/".concat(this.shorthandName):this.ifValue&&this.elseValue?e+=":?".concat(this.ifValue,":").concat(this.elseValue):this.ifValue?e+=":+".concat(this.ifValue):this.elseValue&&(e+=":-".concat(this.elseValue)),e+="}"},t.clone=function(){return new n(this.index,this.shorthandName,this.ifValue,this.elseValue)},n}(iN),iG=function(e){function n(e){var t;return(0,eh._)(this,n),(t=(0,te._)(this,n)).name=e,t}(0,tt._)(n,e);var t=n.prototype;return t.resolve=function(e){var n=e.resolve(this);return this.transform&&(n=this.transform.resolve(n||"")),void 0!==n&&(this._children=[new iO(n)],!0)},t.toTextmateString=function(){var e="";return(this.transform&&(e=this.transform.toTextmateString()),0===this.children.length)?"${".concat(this.name).concat(e,"}"):"${".concat(this.name,":").concat(this.children.map(function(e){return e.toTextmateString()}).join("")).concat(e,"}")},t.clone=function(){var e=new n(this.name);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map(function(e){return e.clone()}),e},n}(iM);function iV(e,n){for(var t=(0,v._)(e);t.length>0;){var r=t.shift();if(!n(r))break;t.unshift.apply(t,(0,v._)(r.children))}}var ij=function(e){function n(){return(0,eh._)(this,n),(0,te._)(this,n,arguments)}(0,tt._)(n,e);var t=n.prototype;return t.offset=function(e){var n=0,t=!1;return(this.walk(function(r){return r===e?(t=!0,!1):(n+=r.len(),!0)}),t)?n:-1},t.fullLen=function(e){var n=0;return iV([e],function(e){return n+=e.len(),!0}),n},t.enclosingPlaceholders=function(e){for(var n=[],t=e.parent;t;)t instanceof iB&&n.push(t),t=t.parent;return n},t.resolveVariables=function(e){var n=this;return this.walk(function(t){return t instanceof iG&&t.resolve(e)&&delete n._placeholders,!0}),this},t.appendChild=function(e){return delete this._placeholders,(0,iP._)((0,iL._)(n.prototype),"appendChild",this).call(this,e)},t.replace=function(e,t){return delete this._placeholders,(0,iP._)((0,iL._)(n.prototype),"replace",this).call(this,e,t)},t.toTextmateString=function(){return this.children.reduce(function(e,n){return e+n.toTextmateString()},"")},t.clone=function(){var e=new n;return this._children=this.children.map(function(e){return e.clone()}),e},t.walk=function(e){iV(this.children,e)},(0,tn._)(n,[{key:"placeholderInfo",get:function(){if(!this._placeholders){var e,n=[];this.walk(function(t){return t instanceof iB&&(n.push(t),e=!e||e.index<t.index?t:e),!0}),this._placeholders={all:n,last:e}}return this._placeholders}},{key:"placeholders",get:function(){return this.placeholderInfo.all}}]),n}(iN),iZ=function(){function e(){(0,eh._)(this,e),this._scanner=new iU,this._token={type:14,pos:0,len:0}}var n=e.prototype;return n.text=function(e){return this.parse(e).toString()},n.parse=function(e,n,t){var r=new ij;return this.parseFragment(e,r),this.ensureFinalTabstop(r,null!=t&&t,null!=n&&n),r},n.parseFragment=function(e,n){var t=n.children.length;for(this._scanner.text(e),this._token=this._scanner.next();this._parse(n););var r=new Map,i=[];n.walk(function(e){return e instanceof iB&&(e.isFinalTabstop?r.set(0,void 0):!r.has(e.index)&&e.children.length>0?r.set(e.index,e.children):i.push(e)),!0});var o=function(e,t){var i=r.get(e.index);if(i){var a=new iB(e.index);a.transform=e.transform;var l=!0,s=!1,c=void 0;try{for(var u,d=i[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var p=u.value.clone();a.appendChild(p),p instanceof iB&&r.has(p.index)&&!t.has(p.index)&&(t.add(p.index),o(p,t),t.delete(p.index))}}catch(e){s=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(s)throw c}}n.replace(e,[a])}},a=new Set,l=!0,s=!1,c=void 0;try{for(var u,d=i[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var p=u.value;o(p,a)}}catch(e){s=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(s)throw c}}return n.children.slice(t)},n.ensureFinalTabstop=function(e,n,t){(n||t&&e.placeholders.length>0)&&(e.placeholders.find(function(e){return 0===e.index})||e.appendChild(new iB(0)))},n._accept=function(e,n){if(void 0===e||this._token.type===e){var t=!n||this._scanner.tokenText(this._token);return this._token=this._scanner.next(),t}return!1},n._backTo=function(e){return this._scanner.pos=e.pos+e.len,this._token=e,!1},n._until=function(e){for(var n=this._token;this._token.type!==e;){if(14===this._token.type)return!1;if(5===this._token.type){var t=this._scanner.next();if(0!==t.type&&4!==t.type&&5!==t.type)return!1}this._token=this._scanner.next()}var r=this._scanner.value.substring(n.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),r},n._parse=function(e){return this._parseEscaped(e)||this._parseTabstopOrVariableName(e)||this._parseComplexPlaceholder(e)||this._parseComplexVariable(e)||this._parseAnything(e)},n._parseEscaped=function(e){var n;return!!(n=this._accept(5,!0))&&(n=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||n,e.appendChild(new iO(n)),!0)},n._parseTabstopOrVariableName=function(e){var n,t=this._token;return this._accept(0)&&(n=this._accept(9,!0)||this._accept(8,!0))?(e.appendChild(/^\d+$/.test(n)?new iB(Number(n)):new iG(n)),!0):this._backTo(t)},n._parseComplexPlaceholder=function(e){var n,t=this._token;if(!(this._accept(0)&&this._accept(3)&&(n=this._accept(8,!0))))return this._backTo(t);var r=new iB(Number(n));if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(r),!0;if(!this._parse(r))return e.appendChild(new iO("${"+n+":")),r.children.forEach(e.appendChild,e),!0}else if(r.index>0&&this._accept(7))for(var i=new iH;;){if(this._parseChoiceElement(i)){if(this._accept(2))continue;if(this._accept(7)&&(r.appendChild(i),this._accept(4)))return e.appendChild(r),!0}return this._backTo(t),!1}else if(this._accept(6))return this._parseTransform(r)?(e.appendChild(r),!0):(this._backTo(t),!1);else if(this._accept(4))return e.appendChild(r),!0;else return this._backTo(t)},n._parseChoiceElement=function(e){for(var n=this._token,t=[];2!==this._token.type&&7!==this._token.type;){var r=void 0;if(!(r=(r=this._accept(5,!0))?this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||r:this._accept(void 0,!0)))return this._backTo(n),!1;t.push(r)}return 0===t.length?(this._backTo(n),!1):(e.appendChild(new iO(t.join(""))),!0)},n._parseComplexVariable=function(e){var n,t=this._token;if(!(this._accept(0)&&this._accept(3)&&(n=this._accept(9,!0))))return this._backTo(t);var r=new iG(n);if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(r),!0;if(!this._parse(r))return e.appendChild(new iO("${"+n+":")),r.children.forEach(e.appendChild,e),!0}else if(this._accept(6))return this._parseTransform(r)?(e.appendChild(r),!0):(this._backTo(t),!1);else if(this._accept(4))return e.appendChild(r),!0;else return this._backTo(t)},n._parseTransform=function(e){for(var n=new iz,t="",r="";!this._accept(6);){var i=void 0;if(i=this._accept(5,!0)){t+=i=this._accept(6,!0)||i;continue}if(14!==this._token.type){t+=this._accept(void 0,!0);continue}return!1}for(;!this._accept(6);){var o=void 0;if(o=this._accept(5,!0)){o=this._accept(5,!0)||this._accept(6,!0)||o,n.appendChild(new iO(o));continue}if(!(this._parseFormatString(n)||this._parseAnything(n)))return!1}for(;!this._accept(4);){if(14!==this._token.type){r+=this._accept(void 0,!0);continue}return!1}try{n.regexp=new RegExp(t,r)}catch(e){return!1}return e.transform=n,!0},n._parseFormatString=function(e){var n=this._token;if(!this._accept(0))return!1;var t=!1;this._accept(3)&&(t=!0);var r=this._accept(8,!0);if(!r)return this._backTo(n),!1;if(!t)return e.appendChild(new iW(Number(r))),!0;if(this._accept(4))return e.appendChild(new iW(Number(r))),!0;if(!this._accept(1))return this._backTo(n),!1;if(this._accept(6)){var i=this._accept(9,!0);return i&&this._accept(4)?(e.appendChild(new iW(Number(r),i)),!0):(this._backTo(n),!1)}if(this._accept(11)){var o=this._until(4);if(o)return e.appendChild(new iW(Number(r),void 0,o,void 0)),!0}else if(this._accept(12)){var a=this._until(4);if(a)return e.appendChild(new iW(Number(r),void 0,void 0,a)),!0}else if(this._accept(13)){var l=this._until(1);if(l){var s=this._until(4);if(s)return e.appendChild(new iW(Number(r),void 0,l,s)),!0}}else{var c=this._until(4);if(c)return e.appendChild(new iW(Number(r),void 0,void 0,c)),!0}return this._backTo(n),!1},n._parseAnything=function(e){return 14!==this._token.type&&(e.appendChild(new iO(this._scanner.tokenText(this._token))),this._accept(void 0),!0)},e.escape=function(e){return e.replace(/\$|}|\\/g,"\\$&")},e.asInsertText=function(n){return new e().parse(n).toString()},e.guessNeedsClipboard=function(e){return/\${?CLIPBOARD/.test(e)},e}(),iq={Text:iO,Placeholder:iB,Variable:iG,FormatString:iW,Choice:iH},iK=function(){function e(n){(0,eh._)(this,e),this.lines=n.split(/\r\n?|\n/).map(function(e){return new iZ().parse(e).children})}return e.prototype.apply=function(n){var t=n.view,r=n.from,i=n.to,o=e.instantiate(this.lines,n),a=o.text,l=o.ranges,s={from:r,to:i,insert:D.EY.of(a)},c={changes:s,scrollIntoView:!0,annotations:iR.rK.of(n.completion)};if(l.length&&(c.selection=i2(l,0)),l.length>1){var u=new iQ(l,0),d=c.effects=[iX.of(u)];void 0===t.state.field(i1,!1)&&d.push(D.Pe.appendConfig.of([i1,i5,i3]))}if(r===i&&!l.length){var p=D.VR.of(s,t.state.doc.length),f=t.state.selection.ranges.map(function(e){return e.map(p,0)});c.selection=D.OF.create(f,t.state.selection.mainIndex)}return c},e.resolveVariable=function(e,n){var t=n.view,r=n.from,i=n.path;switch(e){case"TM_FILENAME":return(0,iT.basename)(i);case"TM_FILENAME_BASE":return(0,iT.basename)(i,(0,iT.extname)(i));case"TM_DIRECTORY":return(0,iT.dirname)(i);case"TM_FILEPATH":return i;case"TM_LINE_INDEX":return(t.state.doc.lineAt(r).number-1).toString();case"TM_LINE_NUMBER":return t.state.doc.lineAt(r).number.toString();default:return e}},e.instantiate=function(n,t){var r=t.view,i=t.from,o=r.state,a=[],l=[],s=o.doc.lineAt(i),c=/^\s*/.exec(s.text)[0],u=o.facet(A.Xt),d=!0,p=!1,f=void 0;try{for(var g,w,y=n[Symbol.iterator]();!(d=(w=y.next()).done);d=!0)!function(){var n=w.value,r=0,o="",s=function(e){var n=0,t=r;if(0===r&&(n=/^\t*/.exec(e)[0].length)){var i=c+u.repeat(n);e=i+e.slice(n),t+=i.length}return o+=e,r+=e.length,{line:a.length,from:t,to:r}},d=function(n){var o=!0,c=!1,u=void 0;try{for(var p,f=n[Symbol.iterator]();!(o=(p=f.next()).done);o=!0)p.value.match({Text:function(e){s(e.value)},Variable:function(n){var r=n.name,i=n.transform,o=e.resolveVariable(r,t);i&&(o=o.replace(i.regexp,function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return i.children.map(function(e){return e.match({Text:function(e){return e.value},FormatString:function(e){return e.resolve(n[e.index])}})}).filter(Boolean).join("")})),s(o)},Choice:function(e){s(e.options[0].value)},Placeholder:function(e){var n,t=a.length?i+a.map(function(e){return e.length}).reduce(function(e,n){return e+n}):i;if(null==(n=e.children)?void 0:n.length){var o={field:e.index,from:t+r,to:null};l.push(o),d(e.children),o.to=t+r}else{s("");var c=t+r;l.push({field:e.index,from:c,to:c})}}})}catch(e){c=!0,u=e}finally{try{o||null==f.return||f.return()}finally{if(c)throw u}}};d(n),a.push(o)}()}catch(e){p=!0,f=e}finally{try{d||null==y.return||y.return()}finally{if(p)throw f}}var b=(g=Math).max.apply(g,(0,v._)(l.map(function(e){return e.field})));return{text:a,ranges:l.map(function(e){var n=e.field,t=(0,ep._)(e,["field"]);return(0,m._)((0,h._)({},t),{field:0===n?b:n-1})})}},e}(),i$=ew.NZ.widget({widget:new(function(e){function n(){return(0,eh._)(this,n),(0,te._)(this,n,arguments)}(0,tt._)(n,e);var t=n.prototype;return t.toDOM=function(){var e=document.createElement("span");return e.className="cm-snippetFieldPosition",e},t.ignoreEvent=function(){return!1},n}(ew.xO))}),iJ=ew.NZ.mark({class:"cm-snippetField"}),iQ=function(){function e(n,t){(0,eh._)(this,e),this.ranges=n,this.active=t,this.deco=ew.NZ.set(n.map(function(e){return(e.from===e.to?i$:iJ).range(e.from,e.to)}))}var n=e.prototype;return n.map=function(n){var t=[],r=!0,i=!1,o=void 0;try{for(var a,l=this.ranges[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var s=a.value,c=function(e,n){var t=n.mapPos(e.from,-1,D.iR.TrackDel),r=n.mapPos(e.to,1,D.iR.TrackDel);return null==t||null==r?null:{field:e.field,from:t,to:r}}(s,n);if(!c)return null;t.push(c)}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return new e(t,this.active)},n.isSelectionInsideField=function(e){var n=this;return e.ranges.every(function(e){return n.ranges.some(function(t){return t.field===n.active&&t.from<=e.from&&t.to>=e.to})})},e}(),iX=D.Pe.define({map:function(e,n){return null==e?void 0:e.map(n)}}),i0=D.Pe.define(),i1=D.sU.define({create:function(){return null},update:function(e,n){var t=!0,r=!1,i=void 0;try{for(var o,a=n.effects[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;if(l.is(iX))return l.value;if(l.is(i0)&&e)return new iQ(e.ranges,l.value)}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return e&&n.docChanged&&(e=e.map(n.changes)),e&&n.selection&&!e.isSelectionInsideField(n.selection)&&(e=null),e},provide:function(e){return ew.Lz.decorations.from(e,function(e){return e?e.deco:ew.NZ.none})}});function i2(e,n){var t=e.filter(function(e){return e.field===n}).map(function(e){return D.OF.range(e.from,e.to)});if(0!==t.length)return D.OF.create(t)}function i4(e){return function(n){var t,r=n.state,i=n.dispatch,o=r.field(i1,!1);if(!o||e<0&&0===o.active)return!1;var a=o.active+e,l=(t=Math).max.apply(t,(0,v._)(o.ranges.map(function(e){return e.field}))),s=e>0&&o.active>=l;return i(r.update({selection:i2(o.ranges,a),effects:iX.of(s?null:new iQ(o.ranges,a))})),!0}}var i5=D.Nb.highest(ew.w4.of([{key:"Tab",run:i4(1),shift:i4(-1)},{key:"Escape",run:function(e){var n=e.state,t=e.dispatch;return!!n.field(i1,!1)&&(t(n.update({effects:iX.of(null)})),!0)}}])),i3=ew.Lz.domEventHandlers({mousedown:function(e,n){var t,r=n.state.field(i1,!1);if(!r||null==(t=n.posAtCoords({x:e.clientX,y:e.clientY})))return!1;var i=r.ranges.find(function(e){return e.from<=t&&e.to>=t});return!!i&&i.field!==r.active&&(n.dispatch({selection:i2(r.ranges,i.field),effects:iX.of(r.ranges.some(function(e){return e.field>i.field})?new iQ(r.ranges,i.field):null)}),!0)}}),i6=t(78452),i8=t(64631),i7=(0,$.x)({styles0:[{p:{whiteSpace:"pre-wrap"}}]}),i9={p:{padding:"".concat(eN.LU.space2," ").concat(eN.LU.space8),lineHeight:1.4,marginBottom:"".concat(eN.LU.space8," !important")},"p:first-of-type":{marginTop:"".concat(eN.LU.space4," !important")},"p:last-of-type":{marginBottom:"".concat(eN.LU.space4," !important")},pre:{margin:"".concat(eN.LU.space2," ").concat(eN.LU.space8)},"pre + p":{borderTop:"1px solid ".concat(eN.LU.outlineDimmest),paddingTop:eN.LU.space4},"h1, h2, h3":{margin:"".concat(eN.LU.space8," !important"),marginTop:"".concat(eN.LU.space12," !important"),padding:"0 !important",paddingBottom:"".concat(eN.LU.space4," !important"),fontSize:"100% !important",borderBottom:"1px solid ".concat(eN.LU.backgroundHighest," !important"),lineHeight:1},"h1:first-of-type, h2:first-of-type, h3:first-of-type":{marginTop:"".concat(eN.LU.space4," !important")},hr:{margin:"".concat(eN.LU.space8," !important"),borderTop:"2px solid ".concat(eN.LU.backgroundHighest," !important")},li:{margin:"".concat(eN.LU.space2," ").concat(eN.LU.space8)},".lsp-completion-detail":{borderBottom:"1px solid ".concat(eN.LU.backgroundHighest),marginBottom:eN.LU.space4},".cm-line":{paddingLeft:eN.LU.space4,paddingRight:eN.LU.space4},".cm-content":{paddingLeft:eN.LU.space4,paddingRight:eN.LU.space4}},oe=(0,y.memo)(function(e){var n=e.content,t=e.className;return(0,w.Y)(Q.S,{css:i9,children:(0,w.Y)(i8.Ay,{className:t,components:{code:function(e){return(0,w.Y)(i6.A,(0,h._)({minimal:!0,disableCopy:!0},e))}},children:n})})});function on(e){var n=e.content,t=e.className;return"string"==typeof n?(0,w.Y)(oe,{css:i7.styles0,className:t,content:n}):n.kind===eL.MarkupKind.PlainText?(0,w.Y)(Q.S,{children:(0,w.Y)(tz.EY,{className:t,children:n.value})}):(0,w.Y)(oe,{className:t,content:n.value})}var ot=new WeakMap,or=t(3884),oi=t(63564),oo=t(37822),oa="cm-ghostwriter-hint-tooltip",ol=ew.Lz.theme((0,ts._)({".cm-ghostwriter-hint":{display:"none",width:"100%",backgroundColor:eN.LU.backgroundHigher,borderTop:"solid 1px ".concat(eN.LU.outlineDefault)}},".cm-tooltip-autocomplete.".concat(oa," .cm-ghostwriter-hint"),{display:"block"})),os=(0,$.x)({hint:[J.wp.font.default,{opacity:.6}]});function oc(){return(0,w.FD)(Q.S,{css:os.hint,p:4,row:!0,gap:8,align:"center",children:[(0,w.Y)(oo.A,{width:8,height:8}),(0,w.FD)(Q.S,{row:!0,gap:4,align:"center",children:[(0,w.Y)(oi.A,{size:"small",dimmed:!1,shortcut:{key:"tab"}}),(0,w.Y)(tz.EY,{variant:"small",multiline:!1,children:"to use AI suggestion."})]})]})}var ou=ew.Z9.define(function(e){var n=function(){var n,t,r;return(0,v._)(e.dom.children).concat((0,v._)(null!=(r=null==(t=or.vR.get(e))||null==(n=t.children[0])?void 0:n.children)?r:[])).filter(function(e){return e.classList.contains("cm-tooltip-autocomplete")})},t=function(e){return Array.from(e.children).filter(function(e){return e.classList.contains("cm-ghostwriter-hint")})},r=!1;return{update:function(){null!==(0,iR.DH)(e.state)&&Promise.resolve().then(function(){if(!r){var e=!0,i=!1,o=void 0;try{for(var a,l=n()[Symbol.iterator]();!(e=(a=l.next()).done);e=!0){var s=a.value,c=t(s);if(0===c.length){var u=(0,tB.J)((0,w.Y)(oc,{}));u.className="cm-ghostwriter-hint",s.appendChild(u)}}}catch(e){i=!0,o=e}finally{try{e||null==l.return||l.return()}finally{if(i)throw o}}}})},destroy:function(){var e=!0,i=!1,o=void 0;try{for(var a,l=n()[Symbol.iterator]();!(e=(a=l.next()).done);e=!0){var s=a.value,c=!0,u=!1,d=void 0;try{for(var p,f=t(s)[Symbol.iterator]();!(c=(p=f.next()).done);c=!0){var h=p.value;s.removeChild(h)}}catch(e){u=!0,d=e}finally{try{c||null==f.return||f.return()}finally{if(u)throw d}}}}catch(e){i=!0,o=e}finally{try{e||null==l.return||l.return()}finally{if(i)throw o}}r=!0}}});function od(e){var n=Object.keys(e).join(""),t=/\w/.test(n);return t&&(n=n.replace(/\w/g,"")),"[".concat(t?"\\w":"").concat(n.replace(".","").replace(/[^\w\s]/g,"\\$&"),"]")}var op="lsp-completion-keyboard-shortcuts",of=ew.Lz.theme((l={"& .cm-tooltip-autocomplete":{"& > *":{marginRight:4},"& > *:last-child":{marginRight:0},"& .cm-completionLabel":{flexGrow:1,flexShrink:1,overflowX:"auto",textOverflow:"ellipsis"},"& .cm-completionDetail":{color:eN.LU.foregroundDimmer,fontSize:"85%",marginLeft:"unset"}}},(0,ts._)(l,"& .".concat(op),{display:"none"}),(0,ts._)(l,'& [aria-selected="true"] .'.concat(op),{float:"right",display:"inline-block"}),l)),oh=t(54976),om=t(53889),og=t(84083),ov=t(31258),ow=new(function(e){function n(){var e;return(0,eh._)(this,n),(e=(0,te._)(this,n)).elementClass="cm-gutterElement-hidden",e}return(0,tt._)(n,e),n.prototype.toDOM=function(){var e=document.createElement("span");e.classList.add("cm-hidden-lines-gutter");var n=document.createElement("span");return n.classList.add("cm-dot"),e.appendChild(n),e},n}(ew.wJ)),oy=function(e){function n(e){var t;return(0,eh._)(this,n),(t=(0,te._)(this,n)).numLines=e,t}(0,tt._)(n,e);var t=n.prototype;return t.eq=function(e){return e.numLines===this.numLines},t.toDOM=function(){var e=document.createElement("span");return e.textContent="".concat(this.numLines," hidden ").concat((0,ov.A)("line",this.numLines)),e.className="cm-hidden-lines",e},n}(ew.xO),ob=ew.NZ.mark({class:"cm-searchResultMatch"}),oS=ew.Lz.baseTheme({".cm-hidden-lines":{color:eN.LU.foregroundDimmer,backgroundColor:eN.LU.backgroundHighest,display:"inline-block",width:"100%"},".cm-gutterElement-hidden":{backgroundColor:eN.LU.backgroundHighest},".cm-hidden-lines-gutter":{backgroundColor:eN.LU.backgroundHighest,display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%"},".cm-dot":{height:"5px",width:"5px",backgroundColor:eN.LU.foregroundDimmest,borderRadius:"50%",display:"inline-block"},".cm-tooltip .cm-scroller":{border:"2px solid ".concat(eN.LU.backgroundHighest),borderRadius:eN.LU.borderRadius4},".cm-tooltip .cm-scroller:hover":{border:"2px solid ".concat(eN.LU.accentPrimaryDimmest),boxShadow:eN.LU.shadow1,cursor:"pointer"},".cm-searchResultMatch":{color:eN.LU.foregroundDefault,backgroundColor:eN.LU.accentPrimaryDimmest,outline:eN.LU.accentPrimaryDimmer+" solid 1px"},".cm-searchResultMatch span":{color:eN.LU.foregroundDefault},".cm-tooltip .cm-searchResultMatch:hover":{opacity:.8},".cm-tooltip .cm-gutterElement":{display:"flex",marginTop:0,textAlign:"center",alignItems:"center",justifyContent:"center",lineHeight:"21px"},".cm-tooltip .cm-line":{padding:0},".cm-tooltip .cm-gutters":{padding:0},".cm-tooltip .cm-content":{paddingTop:0},".cm-tooltip .cm-lineWrapping":{whiteSpace:"pre"},".cm-tooltip .cm-cursor":{display:"none"},".cm-tooltip .cm-selectionBackground":{display:"none"}}),oY=t(63809),oA=t(32957),ox=t(33999),oC=t(87523),o_=(0,$.x)({snippetGroupText:[J.wp.pl(8),J.wp.py(8)],loadingContainer:[J.wp.width(128),J.wp.height(128),J.wp.display.flex,J.wp.align.center,J.wp.justify.center],container:[J.wp.minWidth("375px"),J.wp.maxWidth("500px"),J.wp.pt(4),J.wp.overflowY("scroll")],firstReferenceDivider:[J.wp.border({direction:"bottom",color:eN.LU.backgroundHighest})],header:[J.wp.p(4),J.wp.pl(8)],referencesHeader:[J.wp.p(4),J.wp.pl(8)]}),ok=function(e){return e.DEFINITION="DEFINITION",e.REFERENCES="REFERENCES",e}(ok||{});function oD(e){var n=e.matchesMap,t=e.fileToContents,r=e.type,i=e.onClose,o=e.jumpToPosition,a=Object.keys(n);return 0===a.length?(0,w.Y)(tz.EY,{color:"dimmer",css:o_.snippetGroupText,multiline:!1,children:"REFERENCES"===r?"No references found":"No definitions found"}):(0,w.Y)(Q.S,{children:a.map(function(e){var r,l,s,c,u,d,p,f,h,m,v,y=n[e],b=t[e],S=(v=(m=y.sort(function(e,n){return e.from-n.from})).map(function(e){var n=e.from,t=e.to;return ob.range(n,t)}),[ew.Z9.define(function(){return{}},{decorations:function(){return ew.NZ.set(v)}}),(r=m,l=b,s=[],c=1,r.forEach(function(e,n){var t=l.lineAt(e.from),i=l.lineAt(e.to);c<t.number-2&&s.push({startLine:c,endLine:t.number-2}),c=i.number+2,n===r.length-1&&c<l.lines&&s.push({startLine:c,endLine:l.lines})}),u=s.map(function(e){var n=l.line(e.startLine),t=l.line(e.endLine);return ew.NZ.replace({widget:new oy(e.endLine-e.startLine+1)}).range(n.from,t.to)}),d=s.map(function(e){var n=l.line(e.startLine);return ew.NZ.line({class:"cm-line-hidden"}).range(n.from)}),p=D.sU.define({create:function(){return ew.NZ.set(u)},update:function(e){return e},provide:function(e){return ew.Lz.decorations.from(e)}}),f=D.sU.define({create:function(){return ew.NZ.set(d)},update:function(e){return e},provide:function(e){return ew.Lz.decorations.from(e)}}),h=s.map(function(e){var n=l.line(e.startLine);return ow.range(n.from)}),[p,f,oS,ew.pK.of(D.om.of(h))])]);return(0,w.Y)(Q.S,{p:4,children:(0,w.Y)(oI,{path:e,extensions:[S],doc:b,numMatches:y.length,initiallyExpanded:1===a.length,onNavigateToCode:function(n){if(null!==n)o({path:e,line:n.line+1,col:n.character});else{var t=(0,g._)(y,1)[0],r=b.lineAt(t.from),a=t.from-r.from;o({path:e,line:r.number,col:a})}i()}})},e)})})}function oE(e){var n=e.onClose,t=e.references,r=e.definitions,i=e.jumpToPosition,o=(0,n6.A)().fs,a=(0,oA.A)(n,[]),l=(0,g._)((0,y.useState)({}),2),s=l[0],c=l[1],u=(0,g._)((0,y.useState)(!0),2),d=u[0],p=u[1];if((0,y.useEffect)(function(){var e=new Set((0,v._)(t).concat((0,v._)(r)).map(function(e){return e.path}));if(!e.size)return void p(!1);var n=!1;function i(){return(i=(0,ef._)(function(){var t;return(0,em.YH)(this,function(r){switch(r.label){case 0:var i;return p(!0),t={},[4,Promise.all(Array.from(e).map((i=(0,ef._)(function(e){var n;return(0,em.YH)(this,function(r){switch(r.label){case 0:return[4,o.readFile(e)];case 1:if((n=r.sent()).error)throw Error("Something went wrong reading file with path ".concat(e,". Received error: ").concat(n.error));return t[e]=D.EY.of(n.content.toString().split("\n")),[2]}})}),function(e){return i.apply(this,arguments)})))];case 1:if(r.sent(),p(!1),n)return[2];return c(function(e){return(0,h._)({},e,t)}),[2]}})})).apply(this,arguments)}return!function(){i.apply(this,arguments)}(),function(){n=!0}},[o,t,r]),d)return(0,w.Y)(Q.S,{css:o_.loadingContainer,children:(0,w.Y)(nk.A,{size:32})});var f={},m={};function b(e,n){var t=e.range,r=t.start,i=t.end;e.path in n||(n[e.path]=[]);var o=s[e.path],a=o.line(r.line+1),l=o.line(i.line+1);n[e.path].push({from:a.from+r.character,to:l.from+i.character})}return t.forEach(function(e){b(e,f)}),r.forEach(function(e){b(e,m)}),(0,w.FD)(Q.S,{innerRef:a,css:o_.container,children:[(0,w.Y)(Q.S,{css:o_.firstReferenceDivider,children:(0,w.FD)(Q.S,{p:4,children:[(0,w.FD)(Q.S,{pr:4,row:!0,justify:"space-between",align:"center",children:[(0,w.Y)(tz.Y9,{level:2,variant:"subheadDefault",css:o_.header,children:"Definitions"}),(0,w.Y)(tH.K0,{alt:"Close",onClick:n,children:(0,w.Y)(tW.A,{})})]}),(0,w.Y)(oD,{matchesMap:m,fileToContents:s,type:"DEFINITION",onClose:n,jumpToPosition:i})]})}),(0,w.Y)(Q.S,{children:(0,w.FD)(Q.S,{p:4,children:[(0,w.Y)(tz.Y9,{level:2,variant:"subheadDefault",css:o_.referencesHeader,children:"References"}),(0,w.Y)(oD,{matchesMap:f,fileToContents:s,type:"REFERENCES",onClose:n,jumpToPosition:i})]})})]})}var oR=(0,$.x)({container:[J.wp.width("100%"),J.wp.p(4),J.wp.rowWithGap(4),J.wp.justify.spaceBetween,J.wp.align.center],left:[J.wp.flex.grow(1),J.wp.rowWithGap(8),J.wp.align.center],text:[J.wp.flex.shrink(1),{textOverflow:"ellipsis"}]});function oI(e){var n=e.path,t=e.doc,r=e.extensions,i=e.numMatches,o=e.onNavigateToCode,a=e.initiallyExpanded,l=(0,g._)((0,y.useState)(a),2),s=l[0],c=l[1];return(0,w.FD)(Q.S,{children:[(0,w.FD)(Q.S,{css:oR.container,children:[(0,w.FD)(Q.S,{css:oR.left,children:[(0,w.Y)(ox.A,{path:n}),(0,w.Y)(tz.EY,{multiline:!1,title:n,css:oR.text,children:n}),(0,w.Y)(tz.EY,{color:"dimmest",multiline:!1,children:(0,ov.A)("match",i,!0)})]}),(0,w.Y)(tH.K0,{alt:s?"Collapse snippet":"Expand snippet",tooltipBehavior:"hidden",onClick:function(){return c(function(e){return!e})},children:(0,w.Y)(oC.A,{rotate:180*!!s,style:{transition:"200ms ease"}})})]}),(0,w.Y)(Q.S,{p:4,style:{display:s?"block":"none"},children:(0,w.Y)(oY.f,{path:n,initialDoc:t,extensions:void 0===r?[]:r,maxHeight:"max-content",allowScroll:!0,hideGutter:!0,onNavigateToCode:o})})]})}var oF=t(92002),oT=t(57756),oP=t(22902);function oL(e){var n=e.content,t=e.className,r=e.showHoveredVariable,i=(0,O.g)("fontSize").preferences;if("string"!=typeof n&&"kind"in n)return(0,w.Y)(on,{content:n});var o=(Array.isArray(n)?n:[n]).map(function(e){return"string"==typeof e?e:"```"+e.language+"\n"+e.value+"\n```"}).join("\n");return(0,w.Y)(i8.Ay,{css:[{p:{fontSize:i.fontSize},hr:{display:"none"}},r?[J.wp.maxHeight(oU),J.wp.overflowY("auto")]:void 0],className:t,components:{code:function(e){return(0,w.Y)(i6.A,(0,h._)({minimal:!0,disableCopy:!0},e))}},children:o})}var oU=100;function oN(e){var n=e.className,t=e.content,r=e.textHovered,i=(0,n6.A)().debuggest,o=(0,oT.A)(i.mainClient),a=o&&("running"===o.state.current||"paused"===o.state.current),l=(0,g._)((0,y.useState)(!1),2),s=l[0],c=l[1],u=(0,g._)((0,y.useState)(void 0),2),d=u[0],p=u[1],f=a&&d;return(0,y.useEffect)(function(){function e(){return(e=(0,ef._)(function(){var e,n;return(0,em.YH)(this,function(t){switch(t.label){case 0:if(!a)return[3,4];c(!0),t.label=1;case 1:return t.trys.push([1,,3,4]),[4,o.evaluate({expression:r,context:"hover"})];case 2:return(null==(e=(n=t.sent()).body)?void 0:e.result)&&p((0,h._)({name:r,value:n.body.result},n.body)),[3,4];case 3:return c(!1),[7];case 4:return[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[o,a,r]),(0,w.FD)(Q.S,{css:[i9,f?J.wp.maxHeight(oU+190):J.wp.maxHeight(190),J.wp.minHeight(30),J.wp.overflowY("auto"),J.wp.borderRadius(4),J.wp.backgroundColor.backgroundHigher],children:[s?void 0:(0,w.Y)(oL,{content:t,className:n,showHoveredVariable:!!f}),f?(0,w.Y)(Q.S,{css:[J.wp.maxHeight(190),J.wp.overflowY("auto")],children:(0,w.Y)(oP.r,{depth:0,client:o,variable:d})}):void 0]})}var oO=t(89561),oM=t(69047),oB=t(30608),oH=(0,t(87859).D)(),oz=D.Pe.define(),oW=D.sU.define({create:function(){return null},update:function(e,n){if(n.isUserEvent("select")||n.isUserEvent("undo")||n.isUserEvent("redo"))return null;if(!n.isUserEvent("input.type")||n.changes.empty)return e;var t="";return n.changes.iterChanges(function(e,n,r,i,o){t=o.sliceString(0,1)}),t||null}}),oG=new tB.E(function(e){var n,t,r=e.help,i=e.index,o="1px solid ".concat(eN.LU.outlineDimmer),a="min(425px, 80vw)",l=r.signatures[i],s=r.signatures.length>1;if(!l)return null;var c=l.documentation,u=null!=r.activeParameter&&(null==(t=l.parameters)||null==(n=t[r.activeParameter])?void 0:n.documentation);return(0,w.FD)(Q.S,{css:[J.wp.backgroundColor.backgroundHigher,{width:"max-content"}],row:!0,children:[s?(0,w.Y)(Q.S,{css:[{borderRight:o,paddingBottom:5}],pl:4,row:!0,children:(0,w.FD)("span",{css:[{alignSelf:"flex-end"},J.wp.p(4)],children:[i+1,"/",r.signatures.length]})}):null,(0,w.FD)(Q.S,{children:[(0,w.Y)(Q.S,{css:[J.wp.pl(s?4:8),J.wp.pr(8),J.wp.maxHeight(100),J.wp.overflowY("scroll"),J.wp.font.code,{lineHeight:eN.LU.lineHeightSmall,maxWidth:a}],py:4,children:(0,w.Y)(oV,{signature:l,activeParameter:r.activeParameter})}),!!(c||u)&&(0,w.FD)(Q.S,{css:[J.wp.px(s?4:8),J.wp.py(2),J.wp.maxHeight(200),J.wp.overflow("scroll"),{borderTop:o,maxWidth:a}],children:[u?(0,w.Y)(on,{content:u}):null,c?(0,w.Y)(on,{content:c}):null]})]})]})});function oV(e){var n,t=e.signature,r=t.label,i=t.parameters,o=e.activeParameter;if(null==o||!i)return(0,w.Y)("span",{children:r});var a=null==(n=i[o])?void 0:n.label;if(!a)return(0,w.Y)("span",{children:r});var l=(0,g._)("string"==typeof a?[r.indexOf(a),r.indexOf(a)+a.length]:a,2),s=l[0],c=l[1];return(0,w.FD)("div",{children:[(0,w.Y)("span",{children:r.slice(0,s)}),(0,w.Y)("strong",{children:a}),(0,w.Y)("span",{children:r.slice(c)})]})}function oj(){return(oj=(0,ef._)(function(e,n,t,r,i){return(0,em.YH)(this,function(o){switch(o.label){case 0:var a;return[4,Promise.all(t.map((a=(0,ef._)(function(t){var o,a;return(0,em.YH)(this,function(l){return(o=i.current.get(t.clientId))&&t.notify.cancelRequest(o),a=t.generateId(),i.current.set(t.clientId,a),[2,t.request.signatureHelp(r,(0,eA.Z3)(e.doc,n),{id:a}).then(function(e){return(i.current.get(t.clientId)===a&&i.current.set(t.clientId,null),"error"in e)?null:e.result})]})}),function(e){return a.apply(this,arguments)})))];case 1:return[2,o.sent().find(function(e){return null!==e&&e.signatures.length})]}})})).apply(this,arguments)}var oZ=t(67201),oq=t(83744),oK=new Map,o$=t(26926),oJ=t(95866),oQ=t(56799),oX={namespace:oJ._A.namespace,type:oJ._A.typeName,class:oJ._A.className,enum:oJ._A.typeName,interface:oJ._A.typeName,struct:oJ._A.typeName,typeParameter:oJ._A.typeName,parameter:oJ._A.variableName,variable:oJ._A.variableName,property:oJ._A.propertyName,enumMember:oJ._A.propertyName,event:oJ._A.typeName,function:oJ._A.function(oJ._A.variableName),method:oJ._A.function(oJ._A.propertyName),macro:oJ._A.macroName,keyword:oJ._A.keyword,modifier:oJ._A.modifier,comment:oJ._A.comment,string:oJ._A.string,number:oJ._A.number,regexp:oJ._A.regexp,operator:oJ._A.operator,decorator:oJ._A.function(oJ._A.annotation),angle:null,arithmetic:oJ._A.arithmeticOperator,attribute:oJ._A.attributeName,attributeBracket:oJ._A.bracket,bitwise:oJ._A.bitwiseOperator,boolean:oJ._A.bool,brace:oJ._A.brace,bracket:oJ._A.bracket,builtinAttribute:oJ._A.standard(oJ._A.attributeName),builtinType:oJ._A.standard(oJ._A.typeName),character:oJ._A.character,colon:oJ._A.punctuation,comma:oJ._A.separator,comparison:oJ._A.compareOperator,constParameter:oJ._A.constant(oJ._A.variableName),derive:oJ._A.function(oJ._A.annotation),deriveHelper:oJ._A.function(oJ._A.annotation),dot:oJ._A.derefOperator,escapeSequence:oJ._A.escape,invalidEscapeSequence:oJ._A.invalid,formatSpecifier:oJ._A.processingInstruction,generic:oJ._A.typeName,label:oJ._A.labelName,lifetime:oJ._A.special(oJ._A.variableName),logical:oJ._A.logicOperator,macroBang:oJ._A.macroName,parenthesis:oJ._A.paren,punctuation:oJ._A.punctuation,selfKeyword:oJ._A.self,selfTypeKeyword:oJ._A.self,semicolon:oJ._A.separator,typeAlias:oJ._A.typeName,toolModule:oJ._A.namespace,union:null,unresolvedReference:null,tomlArrayKey:oJ._A.propertyName,tomlTableKey:oJ._A.className},o0={declaration:oJ._A.definition,definition:oJ._A.definition,readonly:oJ._A.constant,static:oJ._A.constant,deprecated:null,abstract:null,async:oJ._A.special,modification:function(e){return e===oJ._A.keyword?oJ._A.modifier:null},documentation:function(e){return e===oJ._A.comment?oJ._A.docComment:e===oJ._A.string?oJ._A.docString:null},defaultLibrary:oJ._A.standard,attribute:null,callable:oJ._A.function,constant:oJ._A.constant,consuming:null,controlFlow:function(e){return e===oJ._A.keyword?oJ._A.controlKeyword:e===oJ._A.operator?oJ._A.controlOperator:null},crateRoot:null,injected:null,intraDocLink:function(){return oJ._A.url},library:null,macro:null,mutable:null,public:null,reference:null,trait:null,unsafe:null},o1=new Set([oJ._A.comment,oJ._A.string,oJ._A.number,oJ._A.keyword,oJ._A.operator]),o2=new Map;function o4(){return(o4=(0,ef._)(function(e){var n,t,r,i,o,a,l,s,c,u,d;return(0,em.YH)(this,function(p){switch(p.label){case 0:if(n=e.client,t=e.path,r=e.previous,i=e.doc,o=e.signal,a=(0,eC.A)(n),r&&a.isSemanticTokensDeltaSupported)l=n.semanticTokensDelta(t,r,{signal:o});else if(a.isSemanticTokensFullSupported)l=n.semanticTokensFull(t,{signal:o});else{if(!i||!a.isSemanticTokensRangeSupported)return[2,null];s=(0,eA.Z3)(i,0),c=(0,eA.Z3)(i,i.length),l=n.semanticTokensRange(t,{start:s,end:c},{signal:o})}return[4,l];case 1:if((u=p.sent())&&"error"in u&&-32802===u.error.code)return[2,!1];if(!u||u.cancelled||!(d="result"in u&&!u.cancelled?u.result:null))return[2,null];return[2,d]}})})).apply(this,arguments)}var o5=function(){function e(n,t){(0,eh._)(this,e),this.data=n,this.id=t}var n=e.prototype;return n.reset=function(){this.data=[],this.id=null},n.update=function(e){if(!e)return void this.reset();if("edits"in e&&this.id){var n,t,r=e.edits.slice().sort(function(e,n){return n.start-e.start}),i=!0,o=!1,a=void 0;try{for(var l,s=r[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c,u,d=l.value;(null==(c=d.data)?void 0:c.length)?(u=this.data).splice.apply(u,[d.start,d.deleteCount].concat((0,v._)(d.data))):this.data.splice(d.start,d.deleteCount)}}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}this.id=null!=(t=e.resultId)?t:null}else if("data"in e)this.data=e.data,this.id=null!=(n=e.resultId)?n:null;else throw Error("Invalid semantic tokens response")},n.decorations=function(e,n){for(var t=n.doc,r=new D.vB,i=0,o=0,a=0;a<this.data.length;a+=5){var l=this.data[a],s=this.data[a+1],c=this.data[a+2],u=this.data[a+3],d=this.data[a+4];i+=l,o=l>0?s:o+s;var p=function(e,n,t){var r=(0,oQ.mW)(e,n);if(null===r)return null;var i=oX[r];if(!i)return null;var o=(0,oQ.sc)(e,t),a="".concat(r,":").concat(o.join(",")),l=o2.get(a);if(void 0!==l)return l;var s=o.map(function(e){if(void 0===o0[e])return null;var n=o0[e];return null===n?null:n}).filter(Boolean),c=!0,u=!1,d=void 0;try{for(var p,f=s[Symbol.iterator]();!(c=(p=f.next()).done);c=!0){var h=(0,p.value)(i);h&&(i=h)}}catch(e){u=!0,d=e}finally{try{c||null==f.return||f.return()}finally{if(u)throw d}}return i&&o1.has(i)&&(i=null),o2.set(a,i),i}(e,u,d);if(p){var f=(0,A.GY)(n,[p]);if(f){var h=(0,eA.TU)(t,{line:i,character:o}),m=(0,eA.TU)(t,{line:i,character:o+c}),g=ew.NZ.mark({class:f});r.add(h,m,g)}}}return r.finish()},e}(),o3=["typescript"],o6=function(){function e(n,t){var r=this;(0,eh._)(this,e),this.view=n,this.client=t,this.data=new o5([],null),this.controller=null,this.disposables=[],this.pending=!1,this.running=!1,this.changes=null,this.decorations=ew.NZ.none,this.proneToDesync=o3.some(function(e){return t.clientId.includes(e)}),this.disposables.push(t.onSemanticTokensRefresh(function(){return r.refresh()}),t.onServerCapabilitiesChange(function(){return r.refresh()}));var i=n.state.facet(eb.Md);if(i)if(t.isOpen(i))this.run();else{var o=setTimeout(function(){t.isOpen(i)&&r.run()},500);this.disposables.push(function(){return clearTimeout(o)})}}var n=e.prototype;return n.abort=function(){var e;this.pending=!1,null==(e=this.controller)||e.abort()},n.refresh=function(){this.abort(),this.data.reset(),this.run()},n.run=function(){if(this.pending=!0,!this.running){this.running=!0;var e=this;(0,ef._)(function(){var n;return(0,em.YH)(this,function(t){switch(t.label){case 0:n=function(){var n,t,r,i,o,a,l,s,c,u,d;return(0,em.YH)(this,function(p){switch(p.label){case 0:n=Date.now(),p.label=1;case 1:if(p.trys.push([1,3,,4]),e.pending=!1,e.changes=null,o=(i=e.view.state).facet(eb.Md),a=null==(r=e.client.getServerCapabilities())||null==(t=r.semanticTokensProvider)?void 0:t.legend,s=(l=(0,eC.A)(e.client)).isSemanticTokensFullSupported||l.isSemanticTokensRangeSupported,!o||!a||!s||!e.client.isOpen(o))return e.data.reset(),e.decorations.size>0&&(e.decorations=ew.NZ.none,e.view.dispatch()),[2,"continue"];return e.controller=new AbortController,[4,function(e){return o4.apply(this,arguments)}({client:e.client,path:o,previous:e.data.id,doc:i.doc,signal:e.controller.signal})];case 2:return!1===(c=p.sent())?e.pending=!0:e.controller.signal.aborted||(e.data.update(c),e.decorations=e.changes?e.data.decorations(a,i).map(e.changes):e.data.decorations(a,i),e.view.dispatch()),[3,4];case 3:return u=p.sent(),(0,ew.c_)(e.view.state,u),e.data.reset(),e.decorations=ew.NZ.none,e.changes=null,[3,4];case 4:if(e.controller=null,d=Date.now()-n,!(e.pending&&d<150))return[3,6];return[4,new Promise(function(e){return setTimeout(e,150-d)})];case 5:p.sent(),p.label=6;case 6:return[2]}})},t.label=1;case 1:if(!e.pending)return[3,3];return[5,(0,em.Ju)(n())];case 2:return t.sent(),[3,1];case 3:return e.running=!1,e.changes=null,[2]}})})()}},n.update=function(e){e.docChanged&&this.decorations.size&&(this.decorations=this.decorations.map(e.changes))},n.postUpdate=function(e){(0,ey.$H)(e,eb.Md)?this.refresh():e.docChanged&&(this.running&&(this.changes=this.changes?this.changes.composeDesc(e.changes):e.changes),this.proneToDesync&&this.abort(),this.run())},n.destroy=function(){this.abort(),this.data.reset();var e=!0,n=!1,t=void 0;try{for(var r,i=this.disposables[Symbol.iterator]();!(e=(r=i.next()).done);e=!0)(0,r.value)()}catch(e){n=!0,t=e}finally{try{e||null==i.return||i.return()}finally{if(n)throw t}}this.disposables=[]},e}(),o8=new nN.k(function(e){if(!e||!e.length)return null;var n=e.map(function(e){return ew.Z9.define(function(n){return new o6(n,e)},{decorations:function(e){return e.decorations},provide:function(e){return ew.Lz.updateListener.of(function(n){var t;return null==(t=n.view.plugin(e))?void 0:t.postUpdate(n)})}})});return D.Nb.highest(n)}),o7=new nN.k(function(e){return iF.of(e)}),o9=new nN.k(function(e){return oh.aM.of(e)}),ae=new nN.k(function(e){return o$.G.of(e)}),an=t(92677),at=ew.Lz.theme({"& .cm-gutters.cm-minimap-gutter":{backgroundColor:eN.LU.backgroundDefault,borderLeft:"1px solid ".concat(eN.LU.backgroundHigher)},"& .cm-minimap-box-shadow":{boxShadow:"unset"}}),ar=D.sU.define({create:function(e){return 0===e.doc.length||e.doc.lines>1e3},update:function(e,n){return n.docChanged?0===n.state.doc.length||n.state.doc.lines>1e3:e}}),ai=new nN.k(function(e,n,t){var r=function(){return{dom:document.createElement("div")}};return e?null:[at,ar,an.F.compute([ih,ar],function(e){if(e.field(ar,!1)||"blocks"!==n&&"characters"!==n)return null;var i=e.field(ih,!1),o={};if(i)for(var a=1;a<=e.doc.lines;a++)switch(i.getLineChangeType(a)){case tY.DE.COVERED:o[a]=t.values.global.greenDefault;break;case tY.DE.MODIFIED:o[a]=t.values.global.blueDefault}return{create:r,displayText:n,gutters:[o]}})]}),ao=t(9072),aa=D.sj.define({combine:function(e){var n;return null!=(n=e.find(function(e){return null!==e}))?n:null}}),al=D.sj.define({combine:function(e){return ac(e)}}),as=D.sj.define({combine:function(e){return ac(e)}});function ac(e){var n=[];return e.forEach(function(e){return e?n.push(e):void 0}),n}var au=function(e){function n(e){var t;return(0,eh._)(this,n),(t=(0,te._)(this,n)).diagnostic=e,t}return(0,tt._)(n,e),n.prototype.eq=function(e){return e instanceof n&&this.severityValue===e.severityValue},(0,tn._)(n,[{key:"severityValue",get:function(){switch(this.diagnostic.severity){case"error":return 3;case"warning":return 2;case"info":return 1;default:return 0}}},{key:"severityColor",get:function(){switch(this.diagnostic.severity){case"error":return"#d11";case"warning":return"orange";case"info":return"#999";default:return"#66d"}}}]),n}(D.FB);function ad(e){var n=new D.vB;return(0,x.i5)(e,function(e,t,r){n.add(t,r,new au(e))}),n.finish()}var ap=D.sU.define({create:function(e){return ad(e)},update:function(e,n){return(0,ey.$H)(n,x._k)?ad(n.state):e.map(n.changes)},provide:function(e){return al.compute([e],function(n){for(var t=new Map,r=n.field(e).iter();r.value;){for(var i=n.doc.lineAt(r.from),o=n.doc.lineAt(r.to),a=i.number;a<=o.number;){var l,s=null==(l=t.get(a))?void 0:l.severityValue;(!s||s<r.value.severityValue)&&t.set(a,r.value),a++}r.next()}return Array.from(t.entries()).map(function(e){var n=(0,g._)(e,2),t=n[0],r=n[1];return{color:r.severityColor,number:t,zIndex:r.severityValue}})})}}),af="cm-with-scrollbar",ah="cm-scrollbar-gutter",am="cm-scrollbar-inner",ag="cm-scrollbar-overlay-container",av="cm-scrollbar-overlay",aw="cm-scrollbar-overlay-invisible",ay="cm-scrollbar-overlay-active",ab="--cm-scrollbar-overlay-height",aS=ew.Lz.theme((u={"&":{height:"100%",overflowY:"auto"}},(0,ts._)(u,"& .".concat(ah),{borderRight:0,boxSizing:"border-box",display:"flex",flexShrink:0,height:"100%",insetInlineStart:0,left:"unset",position:"sticky",right:0,top:0,width:"".concat(15,"px"),zIndex:200}),(0,ts._)(u,"& .".concat(am),{height:"100%",position:"absolute",right:0,top:0,overflowY:"hidden",borderLeft:"1px solid",borderLeftColor:"inherit"}),(0,ts._)(u,"& .".concat(am," > canvas"),{display:"block",height:"100%",width:"".concat(14,"px"),opacity:.6}),(0,ts._)(u,".".concat(ag),(c={position:"absolute",top:0,height:"100%",width:"100%"},(0,ts._)(c,"& .".concat(av),(s={background:"rgb(121, 121, 121)",opacity:"0.2",position:"absolute",right:0,top:0,height:"max(".concat(20,"px, var(").concat(ab,"))"),width:"100%",transition:"top 0s ease-in 0ms"},(0,ts._)(s,"&:hover",{opacity:"0.3"}),(0,ts._)(s,"&.".concat(aw),{pointerEvents:"none",opacity:0}),s)),(0,ts._)(c,"& .".concat(ay),(0,ts._)({opacity:1,visibility:"visible",transition:"visibility 0s linear 0ms, opacity 300ms"},"& .".concat(av),{opacity:"0.4"})),c)),(0,ts._)(u,"&.".concat(af," .cm-scroller::-webkit-scrollbar"),{width:0}),(0,ts._)(u,"&.".concat(af," .cm-scroller"),{scrollbarWidth:"none"}),u)),aY=function(){function e(n){(0,eh._)(this,e),this.dragInfo=null,this.view=n,this.container=document.createElement("div"),this.container.classList.add(ag),this.container.role="presentation",this.container.ariaHidden="true",this.handle=document.createElement("div"),this.handle.classList.add(av),this.container.appendChild(this.handle);var t=n.dom.querySelector(".".concat(am));t&&t.appendChild(this.container),this.observer=new ResizeObserver(this.resizeHandle.bind(this)),this.observer.observe(n.dom),this.container.addEventListener("mousedown",this.onMouseDown.bind(this)),window.addEventListener("mouseup",this.onMouseUp.bind(this)),window.addEventListener("mousemove",this.onMouseMove.bind(this))}var n=e.prototype;return n.resizeHandle=function(){var e=this;this.view.requestMeasure({key:"".concat(this,".resizeHandle"),read:function(){return{ratio:Math.min(1,e.view.scrollDOM.clientHeight/e.view.contentHeight)}},write:function(n){var t=n.ratio;e.handle.style.setProperty(ab,"".concat(100*t,"%")),1===t?e.handle.classList.add(aw):e.handle.classList.remove(aw)}})},n.updateHandlePosition=function(){var e=this;this.view.requestMeasure({key:"".concat(this,".onScroll"),read:function(){var n=e.view.contentHeight,t=e.view.scrollDOM.clientHeight,r=e.handle.getBoundingClientRect().height;return{scrollTop:Math.round(e.view.scrollDOM.scrollTop*((t-r)/(n-t)))}},write:function(n){var t=n.scrollTop;e.handle.style.top="".concat(t,"px")}})},n.onMouseDown=function(e){var n=this;if(2!==e.button){if(e.preventDefault(),e.target===this.handle){this.dragInfo={dragStartY:e.clientY},this.container.classList.add(ay);return}this.view.requestMeasure({key:"".concat(this,".onMouseDown"),read:function(){var t=n.view.scrollDOM.clientHeight,r=n.view.contentHeight;return{scrollTop:Math.max(0,e.clientY-e.target.getBoundingClientRect().top-t/r*t/2)/t*r}},write:function(e){var t=e.scrollTop;n.view.scrollDOM.scrollTop=t}})}},n.onMouseUp=function(){this.dragInfo&&(this.dragInfo=null,this.container.classList.remove(ay))},n.onMouseMove=function(e){if(this.dragInfo){e.preventDefault();var n=e.clientY-this.dragInfo.dragStartY;this.view.scrollDOM.scrollTop=this.view.scrollDOM.scrollTop+n/this.view.dom.clientHeight*this.view.contentHeight,this.view.scrollDOM.scrollTop>0&&Math.round(this.view.scrollDOM.scrollTop)<Math.round(this.view.contentHeight-this.view.dom.clientHeight)&&(this.dragInfo={dragStartY:e.clientY}),this.updateHandlePosition()}},n.update=function(e){(e.docChanged||e.geometryChanged)&&(this.resizeHandle(),this.updateHandlePosition())},n.destroy=function(){this.container.removeEventListener("mousedown",this.onMouseDown),window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),this.container.remove(),this.observer.disconnect()},e}(),aA=function(){function e(n){(0,eh._)(this,e),this.view=n;var t=n.state.facet(aa);if(!t)throw Error("expected config");this.dom=t.create(n).dom,this.dom.classList.add(ah);var r=document.createElement("div");r.classList.add(am);var i=document.createElement("canvas");i.ariaHidden="true",this.context=i.getContext("2d"),r.appendChild(i),this.dom.appendChild(r),n.scrollDOM.insertBefore(this.dom,n.contentDOM.nextSibling),this.update()}var n=e.prototype;return n.shouldRedraw=function(e,n){return!!(!e||!n||(0,ey.$H)(e,"doc","selection","focus",as,al,A.R3,A.c1))||this.view.contentHeight!==this.previousContentHeight||2*n.scrollClientHeight!==this.previousCanvasHeight},n.update=function(e){var n=this;this.view.requestMeasure({key:this,read:function(){return{scrollClientHeight:n.view.scrollDOM.clientHeight}},write:function(t){var r=t.scrollClientHeight;if(n.context&&n.shouldRedraw(e,{scrollClientHeight:r})){n.previousContentHeight=n.view.contentHeight,n.context.canvas.width=28,n.context.canvas.height=2*r,n.previousCanvasHeight=n.context.canvas.height,n.context&&n.context.clearRect(0,0,n.context.canvas.width,n.context.canvas.height);var i=n.view.state.facet(as),o=n.view.state.facet(al),a=new Map,l=!0,s=!1,c=void 0;try{for(var u,d=o.entries()[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var p,f=(0,g._)(u.value,2),h=f[0],m=f[1],v=h%3,w=void 0,y=void 0,b=!0,S=!1,Y=void 0;try{for(var x,C=m[Symbol.iterator]();!(b=(x=C.next()).done);b=!0){var _,k=x.value;if(void 0===w||void 0===y){w=k,y=k;continue}if(y.number+1===k.number&&y.color===k.color&&y.zIndex===k.zIndex){y=k;continue}a.set(v,(null!=(_=a.get(v))?_:[]).concat([[w,y]])),w=k,y=k}}catch(e){S=!0,Y=e}finally{try{b||null==C.return||C.return()}finally{if(S)throw Y}}w&&y&&a.set(v,(null!=(p=a.get(v))?p:[]).concat([[w,y]]))}}catch(e){s=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(s)throw c}}var D=!0,E=!1,R=void 0;try{for(var I,F=a.entries()[Symbol.iterator]();!(D=(I=F.next()).done);D=!0){var T=(0,g._)(I.value,2),P=T[0],L=T[1].sort(function(e,n){var t,r,i=(0,g._)(e,1)[0],o=(0,g._)(n,1)[0];return(null!=(t=i.zIndex)?t:0)-(null!=(r=o.zIndex)?r:0)}),U=!0,N=!1,O=void 0;try{for(var M,B=L[Symbol.iterator]();!(U=(M=B.next()).done);U=!0)!function(){var e=(0,g._)(M.value,2),t=e[0],i=t.color,o=t.number,a=e[1].number,l=n.view.state.doc.line(o),s=n.view.state.doc.line(a),c=1/0,u=-1/0;if((0,A.hw)(n.view.state).between(l.from,s.to,function(e,n){c>e&&(c=e),u<n&&(u=n)}),c<u){var d=n.view.state.doc.lineAt(c);d.number<=l.number&&(l=d),n.view.state.doc.lineAt(u).number>=s.number&&(s=d)}var p=l.number,f=s.number,h=!0,m=!1,v=void 0;try{for(var w,y=n.view.state.field(a_)[Symbol.iterator]();!(h=(w=y.next()).done);h=!0){var b=(0,g._)(w.value,2),S=b[0],Y=b[1];S[0].number<l.number&&(p-=Y),S[1].number<s.number&&(f-=Y)}}catch(e){m=!0,v=e}finally{try{h||null==y.return||y.return()}finally{if(m)throw v}}n.drawRange({scrollClientHeight:r,color:i,from:p,to:f,lane:P})}()}catch(e){N=!0,O=e}finally{try{U||null==B.return||B.return()}finally{if(N)throw O}}}}catch(e){E=!0,R=e}finally{try{D||null==F.return||F.return()}finally{if(E)throw R}}var H=!0,z=!1,W=void 0;try{for(var G,V=i[Symbol.iterator]();!(H=(G=V.next()).done);H=!0){var j=G.value,Z=!0,q=!1,K=void 0;try{for(var $,J=j[Symbol.iterator]();!(Z=($=J.next()).done);Z=!0){var Q=$.value,X=Q.color,ee=Q.number,en=ee,et=!0,er=!1,ei=void 0;try{for(var eo,ea=n.view.state.field(a_)[Symbol.iterator]();!(et=(eo=ea.next()).done);et=!0){var el=(0,g._)(eo.value,2),es=(0,g._)(el[0],1)[0],ec=el[1];es.number<ee&&(en-=ec)}}catch(e){er=!0,ei=e}finally{try{et||null==ea.return||ea.return()}finally{if(er)throw ei}}n.drawRange({scrollClientHeight:r,color:X,from:en})}}catch(e){q=!0,K=e}finally{try{Z||null==J.return||J.return()}finally{if(q)throw K}}}}catch(e){z=!0,W=e}finally{try{H||null==V.return||V.return()}finally{if(z)throw W}}}}})},n.destroy=function(){this.dom.remove()},n.drawRange=function(e){if(this.context){var n,t=(this.view.documentPadding.top+this.view.defaultLineHeight*(e.from-1))/this.view.contentHeight*e.scrollClientHeight,r=2;e.to&&(r=(this.view.documentPadding.top+this.view.defaultLineHeight*e.to)/this.view.contentHeight*e.scrollClientHeight-t)<4&&(t-=(4-r)/2,r=4),this.context.fillStyle=e.color,this.context.beginPath(),this.context.fillRect(9.333333333333334*(null!=(n=e.lane)?n:0),2*t,28/(void 0===e.lane?1:3),2*r)}},e}();function ax(e){for(var n=[],t=(0,A.hw)(e).iter();t.value;){var r=n[n.length-1];if(!r||r[0][1].to<t.to){var i=e.doc.lineAt(t.from),o=e.doc.lineAt(t.to);n.push([[i,o],o.number-i.number])}t.next()}return n}function aC(e){return null!==e.facet(aa)}var a_=D.sU.define({create:function(e){return aC(e)?ax(e):[]},update:function(e,n){return aC(n.state)&&(0,ey.$H)(n,"doc",A.rI,aC)?ax(n.state):e}}),ak=D.sj.define({combine:function(e){var n;return null!=(n=e.find(function(e){return null!==e}))?n:null},enables:function(e){return[aa.compute([e],function(n){return n.facet(e)}),aS,[a_,(0,ey.P$)(function(e){return new aA(e)},{isEnabled:function(e){return null!==e.facet(aa)},provide:function(){return ew.Lz.editorAttributes.of(function(e){return null!==e.state.facet(aa)?{class:af}:null})}})],(0,ey.P$)(function(e){return new aY(e)},{isEnabled:function(e){return null!==e.facet(aa)},eventObservers:{scroll:function(){var e;null==(e=this.plugin())||e.updateHandlePosition()}}})]}}),aD=t(83355),aE="cm-multiplayer-selection-green",aR="cm-multiplayer-selection-red",aI="cm-multiplayer-selection-blue",aF="cm-multiplayer-selection-gold",aT="cm-multiplayer-selection-purple",aP="cm-multiplayer-selection-teal",aL="cm-multiplayer-selection-pink",aU=ew.Lz.theme((d={},(0,ts._)(d,".".concat(aE),{background:"rgba(27, 196, 125, 0.2)"}),(0,ts._)(d,".".concat(aR),{background:"rgba(239, 85, 51, 0.2)"}),(0,ts._)(d,".".concat(aI),{background:"rgba(24, 160, 251, 0.2)"}),(0,ts._)(d,".".concat(aF),{background:"rgba(255, 199, 0, 1)"}),(0,ts._)(d,".".concat(aT),{background:"rgba(144, 124, 255, 0.2)"}),(0,ts._)(d,".".concat(aP),{background:"rgba(0, 181, 206, 0.2)"}),(0,ts._)(d,".".concat(aL),{background:"rgba(238, 70, 211, 0.2)"}),d)),aN={"#1BC47D":aE,"#EF5533":aR,"#18A0FB":aI,"#FFC700":aF,"#907CFF":aT,"#00B5CE":aP,"#EE46D3":aL},aO=D.Pe.define(),aM=D.Pe.define(),aB=D.Pe.define(),aH=D.sU.define({create:function(){return{}},update:function(e,n){if(!n.changes.empty){var t=function(e){return n.changes.mapPos(Math.min(n.changes.length,e))},r={},i=!0,o=!1,a=void 0;try{for(var l,s=Object.values(e)[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=l.value;r[c.id]=(0,m._)((0,h._)({},c),{position:t(c.position),selectionStart:t(c.selectionStart),selectionEnd:t(c.selectionEnd)})}}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}e=r}var u=!0,d=!1,p=void 0;try{for(var f,v=n.effects[Symbol.iterator]();!(u=(f=v.next()).done);u=!0){var w=f.value;if(w.is(aD.k)&&(e=(0,h._)({},e)),w.is(aO)&&w.value.position<=n.newDoc.length&&((e=(0,h._)({},e))[w.value.id]=(0,h._)({},w.value)),w.is(aM)&&(e=(0,h._)({},e),w.is(aM)&&delete e[w.value]),w.is(aB)){e=(0,h._)({},e);var y=!0,b=!1,S=void 0;try{for(var Y,A=Object.entries(e)[Symbol.iterator]();!(y=(Y=A.next()).done);y=!0){var x=(0,g._)(Y.value,2),C=x[0];x[1].username===w.value&&delete e[C]}}catch(e){b=!0,S=e}finally{try{y||null==A.return||A.return()}finally{if(b)throw S}}}}}catch(e){d=!0,p=e}finally{try{u||null==v.return||v.return()}finally{if(d)throw p}}return e},provide:function(e){return[aU,D.Nb.high((0,ew.qd)({above:!1,class:"cm-multiplayer-cursor-layer",update:function(n){return(0,ey.$H)(n,e)},markers:function(n){var t=n.state.field(e,!1);if(!t)return[];var r=[],i=!0,o=!1,a=void 0;try{for(var l,s=Object.values(t)[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=l.value,u=c.selectionStart,d=c.selectionEnd,p=c.color.selection;if(u!==d){var f=D.OF.range(u,d);r.push.apply(r,(0,v._)(ew.Ip.forRange(n,p,f)))}}}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}return r}})),as.compute([e],function(n){var t=n.field(e,!1);return t?Object.entries(t).map(function(e){var t=(0,g._)(e,2),r=(t[0],t[1]);return{color:r.color.cursor,number:n.doc.lineAt(r.selectionStart).number}}):[]})]}}),az=function(){function e(n,t){var r=this;(0,eh._)(this,e),this.view=n,this.presence=t,this.destroyed=!1,this.followed=null,this.dispose=t.onFollowedUserChanged(function(e){return r.onFollowedUserChanged(e)}),Promise.resolve().then(function(){r.onFollowedUserChanged(t.getFollowedUser())})}var n=e.prototype;return n.onFollowedUserChanged=function(e){var n=this;if(!this.destroyed&&(this.followed=e,this.followed)){var t=this.view.state.field(aH,!1);if(t){var r=Object.values(t).find(function(e){var t;return e.username===(null==(t=n.followed)?void 0:t.username)});r&&this.jumpToPosition(r.position)}}},n.jumpToPosition=function(e){this.view.dispatch({effects:[ew.Lz.scrollIntoView(D.OF.cursor(e),{x:"center",y:"center"})]})},n.unfollow=function(){this.presence.getFollowedUser()&&this.presence.unfollowUser()},n.postUpdate=function(e){if(this.followed){var n=void 0,t=!0,r=!1,i=void 0;try{for(var o,a=e.transactions[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value,s=!0,c=!1,u=void 0;try{for(var d,p=l.effects[Symbol.iterator]();!(s=(d=p.next()).done);s=!0){var f=d.value;f.is(aO)&&f.value.username===this.followed.username&&(n=f)}}catch(e){c=!0,u=e}finally{try{s||null==p.return||p.return()}finally{if(c)throw u}}}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}n&&this.jumpToPosition(n.value.position)}},n.destroy=function(){this.destroyed=!0,this.dispose()},e}(),aW=new nN.k(function(e){return ew.Z9.define(function(n){return new az(n,e)},{provide:function(e){return ew.Lz.updateListener.of(function(n){var t;return null==(t=n.view.plugin(e))?void 0:t.postUpdate(n)})},eventHandlers:{click:function(){this.unfollow()},wheel:function(){this.unfollow()},keydown:function(e){"Control"!==e.key&&"Meta"!==e.key&&this.unfollow()}}})}),aG=t(7512),aV=t(36640),aj=t(77958),aZ=ew.Z9.define(function(e){var n=e.state.facet(aq),t=[];return{update:function(e){n=e.state.facet(aq);var t=!0,r=!1,i=void 0;try{for(var o,a=e.transactions[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;l.changes.empty||this.pushTransaction(l)}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}},flush:function(){t=[]},logs:function(){return t},pushEvent:function(n){var t={anchor:e.state.selection.main.anchor,head:e.state.selection.main.head,docLength:e.state.doc.length,time:Date.now(),type:n.type};n instanceof KeyboardEvent&&(t.key=n.key,t.metaKey=n.metaKey,t.shiftKey=n.shiftKey,t.altKey=n.altKey,t.ctrlKey=n.ctrlKey),n instanceof InputEvent&&(t.data=n.data,t.inputType=n.inputType,t.isComposing=n.isComposing),n instanceof CompositionEvent&&(t.data=n.data),this.pushLog(t)},pushTransaction:function(e){this.pushLog({userEvent:e.annotation(D.ZX.userEvent),changes:JSON.stringify(e.changes),time:Date.now(),type:"transaction"})},pushLog:function(e){n&&(t.push(e),t=t.slice(Math.max(0,t.length-100)))}}},{provide:function(e){var n=function(n,t){var r;return null==(r=t.plugin(e))?void 0:r.pushEvent(n)};return D.Nb.highest(ew.Lz.domEventHandlers({keypress:n,keydown:n,keyup:n,beforeinput:n,input:n,compositionstart:n,compositionupdate:n,compositionend:n}))}}),aq=D.sj.define({combine:function(e){return!!e.length&&e[0]}}),aK=new nN.k(function(e){return aq.of(e)}),a$=t(3218),aJ=t(52682),aQ=D.YH.define(),aX=D.Pe.define(),a0=D.sU.define({create:function(){return!0},update:function(e,n){return!(0,ey.$H)(n,aX)&&e},provide:function(e){return ao.u.from(e)}}),a1=(0,$.x)({buttonLink:[J.wp.reset.button,J.wp.linkStyle]}),a2="hide-editor-file-size-warning",a4=aj.A.get(a2,"boolean"),a5=function(){function e(n,t,r,i){var o=this;(0,eh._)(this,e),this.view=n,this.path=t,this.fs=r,this.writeChange=null,this.destroyed=!1,this.debug=(0,m._)((0,h._)({},i),{latestReceivedVersion:0,openVersion:0,initiatedChanges:0,previousInitiatedChanges:null}),this.dispose=r.watchTextFile(t,{onReady:function(e){var t=e.initialContent,r=e.writeChange,a=e.version;!o.destroyed&&(o.debug.latestReceivedVersion=a,o.debug.openVersion=a,o.debug.setBsodFilePathVersion({filePath:o.path,version:a}),o.debug.trackTimeToLoadFileEnd(o.path),o.writeChange=r,n.dispatch({changes:{from:0,to:n.state.doc.length,insert:t},effects:aX.of(null),annotations:[D.ZX.addToHistory.of(!1),D.ZX.remote.of(!0),aQ.of(!0)]}),t.length>=0xa00000&&!0!==a4&&(a4=!0,aj.A.set(a2,!0),i.showWarning((0,w.FD)(w.FK,{children:["Large files may be slow to edit. Consider using",(0,w.Y)("br",{}),"Cloud Services like"," ",(0,w.Y)("button",{onClick:function(){i.performPaneOperation({operation:"open",secondary:!0,pane:{type:"objectStorage"}})},css:a1.buttonLink,children:"Object Storage"})," ","and"," ",(0,w.Y)("button",{onClick:function(){i.performPaneOperation({operation:"open",secondary:!0,pane:{type:"neon"}})},css:a1.buttonLink,children:"PostgreSQL"}),"."]}),5e3)))},onChange:function(e){var t=e.changes,r=e.changeSource,i=e.version,a=e.userId;if(!o.destroyed){o.debug.latestReceivedVersion=i,o.debug.setBsodFilePathVersion({filePath:o.path,version:i});try{n.dispatch({changes:t,annotations:[D.ZX.remote.of(r===aG.iC.Container),D.ZX.addToHistory.of(r===aG.iC.Local||0===a),aQ.of(!0)]})}catch(e){o.debugThrowSyncRemoteOpError(t,r,e)}}},onError:function(){o.destroyed||(o.dispose=null,o.writeChange=null)},onMoveOrDelete:function(){o.destroyed||(o.dispose=null,o.writeChange=null)}})}var n=e.prototype;return n.postUpdate=function(e){if(e.docChanged&&this.writeChange){var n=!0,t=!1,r=void 0;try{for(var i,o=e.transactions[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value;if(!(a.annotation(D.ZX.remote)||a.annotation(aQ))){this.debug.initiatedChanges++;var l=a.annotation(E.A)?{author:"ghostwriter"}:{};try{this.writeChange(a.changes,l),this.debug.previousInitiatedChanges=a.changes}catch(n){this.debugThrowWriteChangeError(e,a,n);break}}}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}}},n.destroy=function(){var e;this.destroyed=!0,null==(e=this.dispose)||e.call(this),this.dispose=null,this.writeChange=null,this.debug.deleteBsodFilePathVersion({filePath:this.path})},n.debugThrowSyncRemoteOpError=function(e,n,t){var r=this;this.fs.readFile(this.path,{fromDisk:!1}).then(function(i){var o="replitReadError: "+i.error;i.error||(o=i.content.toString());var a=r.view.contentDOM.innerText;r.debug.throwBsod({origin:"Codemirror: ot/syncRemoteOp",error:t,tags:{ot:!0},extras:{filePath:r.path,previousChanges:JSON.stringify(r.debug.previousInitiatedChanges),changes:JSON.stringify(e),changeSource:n,otClientDoc:o,domText:a,cmDoc:r.view.state.doc.sliceString(0),openVersion:r.debug.openVersion,version:r.debug.latestReceivedVersion,initiatedChanges:r.debug.initiatedChanges}}),(0,ew.c_)(r.view.state,t)})},n.debugThrowWriteChangeError=function(e,n,t){var r=this;this.fs.readFile(this.path,{fromDisk:!1}).then(function(i){var o="replitReadError: "+i.error;i.error||(o=i.content.toString());var a=e.view.contentDOM.innerText,l=e.view.plugin(aZ),s=null==l?void 0:l.logs();null==l||l.flush(),r.debug.throwBsod({origin:"Codemirror: ot/writeChange",error:t,tags:{ot:!0},extras:{filePath:r.path,previousChanges:JSON.stringify(r.debug.previousInitiatedChanges),transactionChanges:JSON.stringify(n.changes),otherTransactionChanges:JSON.stringify(e.transactions.filter(function(e){return e!==n}).map(function(e){return e.changes})),transactionDoc:n.newDoc.sliceString(0),updateDoc:e.state.doc.sliceString(0),otClientDoc:o,domText:a,openVersion:r.debug.openVersion,latestReceivedVersion:r.debug.latestReceivedVersion,keystrokes:JSON.stringify(s)}})}),(0,ew.c_)(e.state,t)},e}(),a3=new nN.k(function(e,n,t){return ew.Z9.define(function(r){return new a5(r,e,n,t)},{provide:function(e){return[a0,ew.Lz.updateListener.of(function(n){var t;return null==(t=n.view.plugin(e))?void 0:t.postUpdate(n)})]}})}),a6=ew.Lz.theme({".multiplayer-cursor":{width:"2px",left:"0",top:"0"},".multiplayer-cursor .multiplayer-label":{boxShadow:eN.LU.shadow1,borderRadius:eN.LU.borderRadius4,padding:"1px",position:"absolute",left:"0px",animation:"fadeOut 2s ease-in forwards",color:"white",display:"inline-block",whiteSpace:"nowrap"},".multiplayer-cursor:hover .multiplayer-label":{animation:"auto"}});function a8(e){e.style.transform="translate(-10000px, -10000px)"}var a7=/iPhone|iPad|iPod/i;function a9(){return!!window.navigator.userAgent.match(a7)||"ontouchstart"in window&&window.navigator.userAgent.includes("Macintosh")}function le(e){var n=document.createElement("div");n.textContent=e.username,n.style.backgroundColor=e.color.cursor,n.classList.add("multiplayer-label");var t=document.createElement("div");return t.classList.add("multiplayer-cursor"),t.style.backgroundColor=e.color.cursor,t.style.position=a9()?"absolute":"fixed",t.appendChild(n),{dom:t,label:n}}var ln=new Map,lt=[a6,ew.Z9.define(function(e){var n=e.state.field(aH,!1),t=new Map((n?Object.values(n):[]).map(function(e){return[e.id,{view:le(e),cursor:e}]})),r=!0,i=0,o="function"==typeof IntersectionObserver?new IntersectionObserver(function(e){Date.now()>i-50&&e.length>0&&e[e.length-1].intersectionRatio<1&&c()},{threshold:[1]}):null;function a(){o&&(o.disconnect(),t.forEach(function(e){o.observe(e.view.dom)}))}function l(){!(!n||0===Object.values(n).length)&&(e.inView&&e.requestMeasure(u),r!==e.inView)&&((r=e.inView)||t.forEach(function(e){a8(e.view.dom)}))}a();var s=null;function c(){null===s&&(s=setTimeout(function(){s=null,l()},50))}window.addEventListener("resize",c);var u={read:function(){return{editorRect:e.scrollDOM.getBoundingClientRect(),dimensions:new Map((n?Object.values(n):[]).map(function(n){var r=t.get(n.id),i=r?function(e,n){var t=ln.get(e);if(t)return t;var r=n.getBoundingClientRect().width;return ln.set(e,r),r}(n.username,r.view.label):null;return[n.id,{position:e.coordsAtPos(n.position),labelWidth:i}]}))}},write:function(e){t.forEach(function(n,t){var r=e.dimensions.get(t);!function(e){var n=e.cursorView,t=e.position,r=e.labelWidth,i=e.editorRect,o=n.dom,a=n.label;if(!t||!r)return a8(o);var l=t.bottom-t.top;if(t.bottom<=i.top+l||t.top+l>=i.bottom||t.right<i.left-.1||t.left>i.right+.1)return a8(o);var s=t.left+r-i.right,c="0px";s>0?(c="-".concat(s,"px"),a.style.borderBottomLeftRadius="4px"):a.style.borderBottomLeftRadius="0px",a.style.pointerEvents="none",a.style.transform="translate(".concat(c,", -100%)");var u=a9()?{x:t.left-i.left+"px",y:t.top-i.top+"px"}:{x:"calc(".concat(t.left,"px + var(--fixed-position-offset-x))"),y:"calc(".concat(t.top,"px + var(--fixed-position-offset-y))")},d=u.x,p=u.y;o.style.transform="translate(".concat(d,", ").concat(p,")"),o.style.height=l+"px"}({cursorView:n.view,position:(null==r?void 0:r.position)||null,labelWidth:(null==r?void 0:r.labelWidth)||null,editorRect:e.editorRect})})},key:"multiplayer-cursors-plugin-".concat((0,oZ.A)())};return{update:function(r){r.transactions.length&&(i=Date.now());var o=r.state.field(aH,!1);if(o===r.startState.field(aH,!1)){r.geometryChanged&&l();return}var s=new Map,c=new Set;if(o){var u=new Map((0,v._)(t.values()).map(function(e){return[e.cursor.id,e.view]}));Object.values(o).forEach(function(n){var t=u.get(n.id);if(t)c.add(t),s.set(n.id,{view:t,cursor:n});else{var r=le(n);s.set(n.id,{view:r,cursor:n}),e.dom.appendChild(r.dom)}})}t.forEach(function(e){c.has(e.view)||e.view.dom.remove()}),t=s,n=o,a(),l()},destroy:function(){window.removeEventListener("resize",c),t.forEach(function(e){e.view.dom.remove()}),n=void 0,t=new Map,null==o||o.disconnect(),s&&clearTimeout(s)},maybeMeasure:l}},{eventHandlers:{scroll:function(){this.maybeMeasure()}}})],lr=function(){function e(n,t,r,i){var o=this;(0,eh._)(this,e),this.view=n,this.destroyed=!1,this.colors=this.getColorMapFromUsers(i.getActiveUsers()),this.disposes=[],this.updateSelections=null,this.disposes.push(i.onUserLeave(function(e){o.destroyed||o.view.dispatch({effects:aB.of(e.username)})}),i.onActiveUsersChange(function(e){o.destroyed||(o.colors=o.getColorMapFromUsers(e))}),r.watchTextFile(t,{onReady:function(e){var n=e.updateSelections;o.destroyed||(o.updateSelections=n)},onCursor:function(e){if(!o.destroyed){var n=function(e){var n,t=e.cursor,r=e.usernameColorsMap,i=null==(n=t.user)?void 0:n.name;if(i){var o=t.id,a=t.position,l=t.selectionStart,s=t.selectionEnd,c=r[i];if(c&&o&&"number"==typeof a&&"number"==typeof l&&"number"==typeof s)return aO.of({id:o,username:i,position:a,color:{cursor:c,selection:aN[c]||""},selectionStart:l,selectionEnd:s})}}({cursor:e,usernameColorsMap:o.colors});n&&o.view.dispatch({effects:n})}},onRemoveCursor:function(e){o.destroyed||o.view.dispatch({effects:aM.of(e)})},onError:function(){o.updateSelections=null},onMoveOrDelete:function(){o.updateSelections=null}}))}var n=e.prototype;return n.getColorMapFromUsers=function(e){return e.reduce(function(e,n){return n.username&&n.color?(0,m._)((0,h._)({},e),(0,ts._)({},n.username,n.color)):e},{})},n.postUpdate=function(e){if(!(!e.selectionSet||e.transactions.every(function(e){return e.annotation(D.ZX.remote)}))&&this.updateSelections){var n=e.state.selection.ranges.map(function(e){return{position:e.head,selectionStart:e.from,selectionEnd:e.to}});this.updateSelections(n)}},n.destroy=function(){this.destroyed=!0,this.disposes.forEach(function(e){return e()})},e}(),li=new nN.k(function(e,n,t){return[lt,aH,ew.Z9.define(function(r){return new lr(r,e,n,t)},{provide:function(e){return ew.Lz.updateListener.of(function(n){var t;return null==(t=n.view.plugin(e))?void 0:t.postUpdate(n)})}})]}),lo=t(27213),la=t.n(lo),ll=t(6888),ls=t(34388),lc=t(52340),lu=RegExp("_(?<num>\\d+)$");function ld(){return(ld=(0,ef._)(function(e,n){var t,r,i,o;return(0,em.YH)(this,function(a){switch(a.label){case 0:return t=(0,N._6)(n),[4,e.readDir(t||lc.Dl)];case 1:if((r=a.sent()).error)return[2,n];return o=(i=function(e){if(r.children.find(function(n){return"FILE"===n.type&&n.filename===e})){var n,t=(0,N.J)(e),o=(0,N.an)(e),a=t.match(lu);if(null==a||null==(n=a.groups)?void 0:n.num){var l=Number(a.groups.num);return i("".concat(t.replace(lu,""),"_").concat(l+1,".").concat(o))}return i("".concat(t,"_2.").concat(o))}return e})((0,N.WP)(n)),[2,t?t+"/"+o:o]}})})).apply(this,arguments)}var lp=function(){var e=(0,ef._)(function(e,n,t){var r,i,o,a,l,s;return(0,em.YH)(this,function(c){switch(c.label){case 0:return r=encodeURI(e.name),[4,function(e,n){return ld.apply(this,arguments)}(n,(i=(0,N._6)(t))?i+"/"+r:r)];case 1:return o=c.sent(),[4,(0,ls.g6)(e)];case 2:return a=c.sent(),[4,n.writeFile(o,ll.A.from(a))];case 3:return c.sent(),l=(0,N.J)(e.name),s=(0,N.WP)(o),[2,"![".concat(l,"](").concat(s,")")]}})});return function(n,t,r){return e.apply(this,arguments)}}();function lf(e){var n=e.view,t=e.event,r=e.clipboardText,i=e.filePath,o=n.state.selection;if(!i||!(0,N.e$)(i)||o.ranges.length>1||o.main.from===o.main.to||!r||!la()(r))return void function(){if(!t){var e=r||"";if(o.main.empty){var i=o.main.from+e.length;n.dispatch({changes:[{from:o.main.from,insert:e}],selection:D.OF.range(i,i)})}else n.dispatch(n.state.replaceSelection(e))}}();t&&t.preventDefault();var a=n.state.sliceDoc(o.main.from,o.main.to),l="[".concat(a,"](").concat(r,")"),s=o.main.from+l.length;n.dispatch({changes:{from:o.main.from,to:o.main.to,insert:l},selection:D.OF.range(s,s)})}var lh=ew.Lz.domEventHandlers({paste:function(e,n){var t;lf({filePath:n.state.facet(eb.Md),view:n,event:e,clipboardText:null==(t=e.clipboardData)?void 0:t.getData("Text")})}}),lm=new nN.k(function(e){return ew.Lz.domEventHandlers({paste:function(n,t){var r=t.state.facet(eb.Md),i=null==n||null==(c=n.clipboardData)?void 0:c.files,o=function(e){var n=t.state.selection.main.head;t.dispatch({changes:{from:n,insert:e},selection:{anchor:n,head:n+e.length}})};if(i){var a=!0,l=!1,s=void 0;try{for(var c,u,d=i[Symbol.iterator]();!(a=(u=d.next()).done);a=!0){var p=u.value;r&&(0,N.e$)(r)&&lp(p,e,r).then(o)}}catch(e){l=!0,s=e}finally{try{a||null==d.return||d.return()}finally{if(l)throw s}}}}})}),lg=t(79835),lv=t(61666),lw=function(e){function n(e,t){var r;return(0,eh._)(this,n),(r=(0,te._)(this,n)).id=e,r.result=t,r}return(0,tt._)(n,e),n.range=function(e,n,t){return new this(e,t).range(n.from,n.to)},n.generateId=function(){return this.secretId++},n}(D.FB);lw.secretId=0;var ly=function(e){function n(e){var t;return(0,eh._)(this,n),(t=(0,te._)(this,n)).key=e,t}return(0,tt._)(n,e),n.from=function(e){return new this(e)},n}(D.FB),lb=D.Pe.define({map:function(e,n){var t=D.om.of(e).map(n).iter(),r=t.from,i=t.to;return lw.range(e.value.id,D.OF.cursor(r,i),e.value.result)}}),lS=D.Pe.define(),lY=D.Pe.define(),lA=D.Pe.define(),lx=D.Pe.define(),lC=D.Pe.define(),l_=function(e){var n=e.state.field(lT);if(!n.size)return!1;for(var t=n.iter(),r=[];t.value;){var i=t.from,o=t.to,a=t.value;r.push({from:i,to:o,value:a}),t.next()}var l=e.state.doc.length,s=D.VR.empty(l),c=[],u=[],d=!0,p=!1,f=void 0;try{for(var h,m=r[Symbol.iterator]();!(d=(h=m.next()).done);d=!0)!function(){var e=h.value,n=e.from,t=e.to,r=e.value,i=r.result.secret,o=D.VR.of({from:n,to:t,insert:i},l).map(s,!0);c=c.map(function(e){return e.map(o)});var a=(s=s.compose(o)).mapPos(n)+i.length;c.push(D.OF.cursor(a)),u.push(lS.of(r.id)),(0,eX.u4)(eX.AZ.PASTE_SCANNER_USED,{action:"original_accepted",provider:r.result.provider})}()}catch(e){p=!0,f=e}finally{try{d||null==m.return||m.return()}finally{if(p)throw f}}return e.dispatch({changes:s,effects:u,selection:D.OF.create(c)}),!0},lk=function(e){return!!e.state.facet(lP)&&!!e.state.field(lT).size&&(e.dispatch({effects:e.state.selection.ranges.map(function(e){return lY.of(e)})}),!0)},lD=function(e){return!e.state.facet(lP)&&lE(e)},lE=function(e){return!!e.state.field(lT).size&&(e.dispatch({effects:e.state.selection.ranges.map(function(e){return lS.of(e)})}),!0)};function lR(e,n){var t,r=null==(t=e.clipboardData)?void 0:t.getData("text/plain");if(!r)return!1;var i=(0,lv.S)(r);if(!i)return!1;e.preventDefault(),e.stopPropagation();var o=r.slice(0,i.start)+r.slice(i.end),a=lw.generateId();return n.dispatch((0,m._)((0,h._)({},n.state.changeByRange(function(e){var n=e.from,t=e.to,r=D.OF.cursor(n+i.start);return{range:r,changes:{from:n,to:t,insert:o},effects:lb.of(lw.range(a,r,i))}})),{scrollIntoView:!0})),(0,eX.u4)(eX.AZ.PASTE_SCANNER_USED,{action:"secret_detected",provider:i.provider}),!0}var lI=D.sU.define({create:function(){return D.om.empty},update:function(e,n){e=e.map(n.changes);var t=!0,r=!1,i=void 0;try{for(var o,a=n.effects[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;if(l.is(lx)){var s=l.value,c=s.from,u=s.to,d=s.secret;e=e.update({add:[ly.from(d).range(c,u)],filter:function(){return!1}})}l.is(lC)&&(e=D.om.empty)}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return e}}),lF=D.sU.define({create:function(){return null},update:function(e,n){var t=n.state.field(lT,!1),r=!0,i=!1,o=void 0;try{for(var a,l=n.effects[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var s=a.value;t&&s.is(lY)&&(s.value instanceof D.yn?t.between(s.value.from,s.value.to,function(n,t,r){e=r}):e=s.value),s.is(lA)&&(e=null)}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return e}}),lT=D.sU.define({create:function(){return D.om.empty},update:function(e,n){e=e.map(n.changes);var t=!0,r=!1,i=void 0;try{for(var o,a=n.effects[Symbol.iterator]();!(t=(o=a.next()).done);t=!0)!function(){var n=o.value;n.is(lb)&&(e=e.update({add:[n.value],sort:!0})),n.is(lS)&&(e=n.value instanceof D.yn?e.update({filter:function(){return!1},filterFrom:n.value.from,filterTo:n.value.to}):e.update({filter:function(e,t,r){return r.id!==n.value}}))}()}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return e},provide:function(){return[ew.Lz.domEventHandlers({paste:lR}),D.Nb.highest(ew.w4.of([{key:"Mod-z",run:lE},{key:"Enter",run:l_},{key:"Tab",run:lk,stopPropagation:!0},{key:"Escape",run:lD}]))]}}),lP=D.sj.define({combine:function(e){return e.some(Boolean)}}),lL=lg.Ly.of(function(e){var n=e.state.field(lT,!1);if(!n||!n.size)return!1;var t=!1;return n.between(e.newSelection.main.from,e.newSelection.main.to,function(){return t=!0,!1}),t}),lU=t(22531),lN=t(77040),lO=t(5204),lM=t(77089),lB=t(49150),lH=t(75576),lz=(0,$.x)({buttons:[J.wp.display.flex,J.wp.rowWithGap(4),J.wp.justify.end],input:[J.wp.colWithGap(4),J.wp.flex.grow(1)],label:[J.wp.color.foregroundDimmer,J.wp.fontSize(12),J.wp.height(24),J.wp.justify.center],flexRow:[J.wp.display.flex,J.wp.rowWithGap(8),J.wp.align.center]}),lW={fontFamily:"text-security-disc"},lG=Q.D.label;function lV(e){var n=(0,n6.A)().secrets,t=(0,y.useId)(),r=(0,y.useId)(),i=(0,g._)((0,y.useState)(""),2),o=i[0],a=i[1],l=(0,g._)((0,y.useState)(e.initialValue),2),s=l[0],c=l[1],u=(0,g._)((0,y.useState)(!1),2),d=u[0],p=u[1],f=(0,y.useRef)(null);return(0,y.useEffect)(function(){if(e.isOpen){var n;null==(n=f.current)||n.focus(),(0,eX.u4)(eX.AZ.PASTE_SCANNER_USED,{action:"modal_opened",provider:null==e?void 0:e.provider})}},[e.isOpen,null==e?void 0:e.provider]),(0,w.Y)(lO.n1,{contain:!0,children:(0,w.Y)(lB.a,{isOpen:e.isOpen,onRequestClose:e.onCancel,children:(0,w.FD)(Q.S,{gap:16,children:[(0,w.Y)(tz.EY,{variant:"subheadBig",multiline:!1,children:"Add a key name for your secret value"}),(0,w.FD)(Q.S,{css:lz.flexRow,children:[(0,w.FD)(Q.S,{css:lz.input,children:[(0,w.Y)(lG,{css:lz.label,htmlFor:t,children:"Key"}),(0,w.Y)(lM.pd,{id:t,ref:f,value:o,onChange:function(e){return a(e.target.value)}})]}),(0,w.FD)(Q.S,{css:lz.input,children:[(0,w.FD)(Q.S,{css:lz.flexRow,children:[(0,w.Y)(lG,{css:lz.label,htmlFor:r,children:"Value"}),(0,w.Y)(tH.K0,{alt:"Toggle Secret",onClick:function(){return p(function(e){return!e})},tooltipPlacement:"top",children:d?(0,w.Y)(lH.A,{}):(0,w.Y)(nC.A,{})})]}),(0,w.Y)(lM.pd,{id:r,value:s,onChange:function(e){return c(e.target.value)},style:d?void 0:lW})]})]}),(0,w.FD)(Q.S,{css:lz.buttons,children:[(0,w.Y)(t9.$n,{text:"Cancel",onClick:e.onCancel}),(0,w.Y)(t9.$n,{colorway:"primary",text:"Save Secret",disabled:0===o.length||0===s.length,onClick:(0,ef._)(function(){return(0,em.YH)(this,function(t){switch(t.label){case 0:return[4,n.addEntries([{key:o,value:s}])];case 1:return t.sent(),e.onSaveSecret(o,s),(0,eX.u4)(eX.AZ.PASTE_SCANNER_USED,{action:"secret_created",provider:null==e?void 0:e.provider}),[2]}})})})]})]})})})}var lj=t(45149),lZ=t(69258),lq=(0,$.x)({hint:[J.wp.align.center,J.wp.border({color:eN.LU.outlineDimmer,direction:"top"}),J.wp.color.foregroundDimmest,J.wp.display.flex,J.wp.flex.row,J.wp.px(8),J.wp.py(4),J.wp.rowWithGap(8)],key:[J.wp.px(4)],wrapper:[J.wp.backgroundColor.backgroundHigher,J.wp.borderRadius(4),J.wp.cursor.default,J.wp.font.default],mobileButtons:[J.wp.flex.grow(1)],mobileHint:[J.wp.justify.center]}),lK={borderTop:"1px solid ".concat(eN.LU.outlineDimmer),borderBottom:"1px solid ".concat(eN.LU.outlineDimmer),borderRadius:0};function l$(e){return(0,w.FD)(Q.S,{css:lq.wrapper,style:e.onMobile?lK:void 0,children:[(0,w.FD)(Q.S,{p:8,style:{textAlign:e.onMobile?"center":"inherit"},children:[(0,w.Y)(Q.S,{children:"The value you pasted looks like a secret."}),(0,w.Y)(Q.S,{children:e.supportsSecrets?"Store it securely using our Secrets feature.":"Anyone will be able to see this."})]}),e.onMobile?(0,w.Y)(lQ,(0,h._)({},e)):(0,w.Y)(lJ,(0,h._)({},e))]})}function lJ(e){return(0,w.FD)(w.FK,{children:[e.supportsSecrets?(0,w.FD)(Q.S,{css:lq.hint,onClick:e.onClickUseSecrets,children:[(0,w.Y)(lj.A,{}),"Press",(0,w.Y)(Q.S,{css:lq.key,children:(0,w.Y)(rx._y,{keyCombo:"Tab",small:!0})}),"to use Secrets"]}):null,(0,w.FD)(Q.S,{css:lq.hint,onClick:e.onClickPasteAnyway,children:[(0,w.Y)(lZ.A,{}),"Press",(0,w.Y)(Q.S,{css:lq.key,children:(0,w.Y)(rx._y,{keyCombo:"Enter",small:!0})}),"to paste anyway"]}),e.supportsSecrets?null:(0,w.FD)(Q.S,{css:lq.hint,onClick:e.onClickUndo,children:[(0,w.Y)(lZ.A,{}),"Press",(0,w.Y)(Q.S,{css:lq.key,children:(0,w.Y)(rx._y,{keyCombo:"Escape",small:!0})}),"to undo"]})]})}function lQ(e){return(0,w.FD)(Q.S,{css:[lq.hint,lq.mobileHint],children:[e.supportsSecrets?(0,w.Y)(t9.$n,{css:lq.mobileButtons,iconLeft:(0,w.Y)(lj.A,{}),text:"Use Secrets",onClick:e.onClickUseSecrets,colorway:"primary"}):null,(0,w.Y)(t9.$n,{css:lq.mobileButtons,iconLeft:(0,w.Y)(lZ.A,{}),text:"Paste Anyway",onClick:e.onClickPasteAnyway}),e.supportsSecrets?null:(0,w.Y)(t9.$n,{css:lq.mobileButtons,iconLeft:(0,w.Y)(lj.A,{}),text:"Undo",onClick:e.onClickUndo})]})}var lX=t(76418),l0=(0,$.x)({border:[J.wp.border({color:eN.LU.accentPrimaryDefault,direction:"y",width:1})],title:[J.wp.display.flex,J.wp.rowWithGap(8),J.wp.align.center,J.wp.justify.spaceBetween,J.wp.px(8),J.wp.pt(4),J.wp.font.default],wrapper:[J.wp.backgroundColor.backgroundRoot,J.wp.py(0),J.wp.position.relative,J.wp.zIndex(200)]});function l1(e){var n;return n=e.onClose,(0,y.useEffect)(function(){var e=function(e){"Escape"===e.key&&n(e)};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}},[n]),(0,w.Y)(lO.n1,{autoFocus:!0,children:(0,w.Y)(Q.S,{css:l0.wrapper,children:(0,w.FD)(Q.S,{css:l0.border,children:[(0,w.FD)(Q.S,{css:l0.title,children:[(0,w.FD)(tz.EY,{multiline:!1,children:["Access the secret ",(0,w.Y)("strong",{children:e.keyName}),":"]}),(0,w.Y)(tH.K0,{alt:"Close",onClick:e.onClose,children:(0,w.Y)(tW.A,{})})]}),(0,w.Y)(nf.ui,{background:"root",children:(0,w.Y)(lX.A,{keyName:e.keyName,filePath:e.filePath,onInsert:e.onInsert})})]})})})}var l2=t(70598),l4=n9.x.compute([lT],function(e){var n=e.field(lT).iter();if(null===n.value)return null;for(var t=[];null!==n.value;){var r=n.from,i=n.to,o=n.value;t.push({from:r,to:i,insert:o.result.secret}),n.next()}return t}),l5=function(e){function n(e,t){var r;return(0,eh._)(this,n),(r=(0,te._)(this,n)).secret=e,r.as=t,r}(0,tt._)(n,e);var t=n.prototype;return t.toDOM=function(e){var n=this,t=(0,tB.J)((0,w.Y)(l$,{supportsSecrets:e.state.facet(lP),onMobile:"pocket"===this.as,onClickUseSecrets:function(){e.dispatch({effects:lY.of(n.secret)})},onClickPasteAnyway:function(){l_(e),e.focus()},onClickUndo:function(){e.dispatch({effects:lS.of(n.secret.id)}),e.focus()}}));return"pocket"===this.as&&(t.style.zIndex="200",t.style.position="relative",this.adjustForGutter(t,e)),t},t.updateDOM=function(e,n){return this.adjustForGutter(e,n),!0},t.adjustForGutter=function(e,n){var t=n.dom.querySelector(".cm-gutters");e.style.marginLeft=t?"-".concat(t.clientWidth,"px"):"inherit"},n}(ew.xO),l3=l2.X.compute([lF],function(e){var n=e.facet(eb.Md),t=e.field(lF);return t&&n?{key:"pasteScannerModal",node:function(e){var n;return(0,w.Y)(lV,{isOpen:!0,initialValue:t.result.secret,provider:t.result.provider,onSaveSecret:(n=(0,ef._)(function(n){var r,i,o,a,l;return(0,em.YH)(this,function(s){for(r=e.state.field(lT).iter(),i=[];r.value;)o=r.from,a=r.to,(l=r.value).id===t.id&&(i.push(lS.of(l.id)),i.push(lx.of({secret:n,from:o,to:a}))),r.next();return e.dispatch({effects:(0,v._)(i).concat([lA.of(null)])}),[2]})}),function(e){return n.apply(this,arguments)}),onCancel:function(){return e.dispatch({effects:lA.of(null)})}})}}:null}),l6=ew.Lz.decorations.compute([lI],function(e){var n=e.field(lI).iter(),t=n.from,r=n.to,i=n.value,o=e.facet(eb.Md);return i&&o?ew.NZ.set(ew.NZ.widget({widget:new l8(i.key,o),side:1,block:!0}).range(t,r)):ew.NZ.none}),l8=function(e){function n(e,t){var r;return(0,eh._)(this,n),(r=(0,te._)(this,n)).key=e,r.filePath=t,r}(0,tt._)(n,e);var t=n.prototype;return t.toDOM=function(e){var n=(0,tB.J)((0,w.Y)(l1,{keyName:this.key,filePath:this.filePath,onClose:function(){return e.dispatch({effects:lC.of(null)})},onInsert:function(n){e.dispatch(e.state.changeByRange(function(e){return{range:D.OF.cursor(e.from+n.length),changes:{from:e.from,to:e.to,insert:n}}})),e.focus(),(0,eX.u4)(eX.AZ.PASTE_SCANNER_USED,{action:"secret_key_inserted"})}}));return this.adjustForGutter(n,e),n},t.updateDOM=function(e,n){return this.adjustForGutter(e,n),!0},t.adjustForGutter=function(e,n){var t=n.dom.querySelector(".cm-gutters");e.style.marginLeft=t?"-".concat(t.clientWidth,"px"):"inherit"},n}(ew.xO),l7=[l4,function(){var e=[lF,lT],n=function(e){if(null!=e.field(lF,!1))return null;var n=e.field(lT,!1);return n||null};return[ew.DK.compute(e,function(e){var t=n(e);if(!t||e.facet(lN.n))return null;for(var r=t.iter();r.value;){var i=function(){var e=new l5(r.value,"tooltip");return{v:{arrow:!0,pos:r.to,create:function(n){return{dom:e.toDOM(n)}}}}}();if("object"===(0,lU._)(i))return i.v}return null}),ew.Lz.decorations.compute(e,function(e){var t=n(e);if(!t||!e.facet(lN.n))return ew.NZ.none;var r=t.iter();if(!r.value)return ew.NZ.none;for(;r.value;){var i=new l5(r.value,"pocket");return ew.NZ.set(ew.NZ.widget({widget:i,side:1,block:!0}).range(r.to,r.to))}return ew.NZ.none})]}(),l3,l6],l9=t(45485),se=new nN.k(function(e){return[lP.of(!e),lI,lT,lF,l7,lL]});function sn(e,n){var t=performance.now();id.vF.time(e,t-n)}var st=new nN.k(function(e){var n=e?.01:.001;return D.Nb.highest(ew.Lz.domEventHandlers({keydown:function(e){if(Math.random()<n){var t=e.timeStamp;requestAnimationFrame(function(){sn("editor input latency",t),"undefined"!=typeof requestIdleCallback?requestIdleCallback(function(){sn("editor input latency after layout",t)}):setTimeout(function(){sn("editor input latency after layout",t)})})}}}))}),sr=t(18918),si=t(48200),so=[{regexp:/https?:\/\/[^\s)"']+/g,cursor:"pointer",onClick:function(e){la()(e)&&window.open(e,"_blank")}}],sa=new nN.k(function(e){return e?null:(0,si.Ay)({key:"mod",rules:so})}),sl=t(69945),ss=t.n(sl),sc=new Set,su=ss()(function(){var e=!0,n=!1,t=void 0;try{for(var r,i=sc[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value;(0,eX.u4)(eX.AZ.WS_TYPED,{fileExt:o})}}catch(e){n=!0,t=e}finally{try{e||null==i.return||i.return()}finally{if(n)throw t}}sc.clear()},18e4),sd=ew.Lz.updateListener.of(function(e){if(e.docChanged){var n=e.state.facet(eb.Md);if(n){var t=(0,N.an)(n)||(0,N.WP)(n);!e.transactions.some(function(e){return e.annotation(D.ZX.remote)})&&(sc.has(t)||(sc.add(t),su()))}}}),sp=t(55315),sf=ew.Lz.theme({".cm-ruler-element":{backgroundColor:eN.LU.backgroundHigher}}),sh=D.sU.define({create:function(e){return 0===e.doc.length},update:function(e,n){return n.docChanged?0===n.state.doc.length:e}}),sm=(0,ew.qd)({above:!1,class:"cm-ruler-layer",update:function(e){return(0,ey.$H)(e,sg,sh,aD.k)},markers:function(e){if(e.state.field(sh,!1))return[];var n=e.state.facet(sg);if(0===n.length)return[];var t=[],r=e.dom.getBoundingClientRect(),i=e.contentDOM.getBoundingClientRect().left-r.left+6,o=r.width-2,a=Math.max(r.height,e.contentHeight),l=!0,s=!1,c=void 0;try{for(var u,d=n[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var p=u.value,f=i+e.defaultCharacterWidth*p;f<o&&t.push(new ew.Ip("cm-ruler-element",f,0,2,a))}}catch(e){s=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(s)throw c}}return t}}),sg=D.sj.define({enables:[sh,sm,sf]}),sv=new nN.k(function(e){return e.map(function(e){return sg.of(e)})}),sw=ew.Lz.theme({"& .cm-scrollbar-gutter":{backgroundColor:eN.LU.backgroundDefault},"& .cm-scrollbar-inner":{borderColor:eN.LU.backgroundHigher}}),sy=new nN.k(function(e,n){var t;return e?null:[sw,ak.of({create:function(){return{dom:document.createElement("div")}}}),al.compute(["doc",ih],function(e){var t=e.field(ih,!1);if(!t)return null;for(var r=[],i=1;i<=e.doc.lines;i++)switch(t.getLineChangeType(i)){case tY.DE.COVERED:r.push({number:i,color:n.values.global.greenDefault,zIndex:1});break;case tY.DE.MODIFIED:r.push({number:i,color:n.values.global.blueDefault,zIndex:0})}return r}),ap,(t=({color:n.values.global.foregroundDefault}).color,as.compute(["doc","selection"],function(e){return e.selection.ranges.map(function(n){var r=n.head;return{color:t,number:e.doc.lineAt(r).number,zIndex:1/0}})}))]}),sb=t(83265);function sS(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;if(!e.valid)return[];for(var r=[],i=e.getCursor(n),o=i.next();!o.done&&r.length<t;)r.push(o.value),o=i.next();return r}var sY=t(83735),sA=t(64890),sx=t(12125),sC=t(32941),s_=t(851),sk=t(99034);function sD(e){return e>420?"large":"small"}var sE=Q.D.div,sR=(0,$.x)({root:[{borderBottom:"1px solid",borderColor:eN.LU.outlineDimmest}],panelButtonWrapper:[J.wp.center,J.wp.height(32)],content:[J.wp.display.grid,J.wp.flex.growAndShrink(1),{gridTemplateAreas:'"search search-controls"',gridTemplateRows:"1fr",gridTemplateColumns:"1fr max-content",gap:eN.LU.space8}],contentExpanded:[{gridTemplateAreas:'"search search-controls" "replace replace-controls"',gridTemplateRows:"1fr 1fr",gridTemplateColumns:"1fr max-content"}],contentExpandedSmall:[{gridTemplateAreas:'"search" "search-controls" "replace" "replace-controls"',gridTemplateRows:"1fr max-content 1fr max-content",gridTemplateColumns:"1fr"}],contentSmall:[{gridTemplateAreas:'"search" "search-controls"',gridTemplateRows:"1fr max-content",gridTemplateColumns:"1fr"}],matchLabel:[J.wp.position.absolute,J.wp.top(0),J.wp.right(0),J.wp.height("100%"),J.wp.center,J.wp.pr(4)],searchInputWrapper:[J.wp.position.relative,{gridArea:"search"}],searchControls:[J.wp.display.flex,J.wp.align.center,J.wp.rowWithGap(8),J.wp.flex.wrap,{gridArea:"search-controls"}],replaceInputWrapper:[{gridArea:"replace"}],replaceControls:[J.wp.display.flex,J.wp.align.center,J.wp.rowWithGap(8),J.wp.flex.wrap,{gridArea:"replace-controls"}],searchSettings:J.wp.flex.row});function sI(e){var n=(0,y.useRef)(null);return(0,y.useEffect)(function(){if(n.current){var t;e!==(null==(t=n.current)?void 0:t.value)&&(n.current.value=e)}},[e]),n}var sF=new tB.E((0,y.forwardRef)(function(e,n){var t=e.view,r=e.query,i=e.updateQuery,o=(0,g._)((0,y.useState)(!1),2),a=o[0],l=o[1],s=(0,g._)((0,y.useState)([]),2),c=s[0],u=s[1],d=(0,g._)((0,y.useState)(null),2),p=d[0],f=d[1],h=c.length,m=(0,t5.A)(r),v=(0,t5.A)(c),b=sI(r.search),S=sI(r.replace);function Y(){(0,sb.Hg)(t);var e=t.state.selection.main;t.dispatch({effects:ew.Lz.scrollIntoView(e.from,{y:"center",x:"center"})}),h<=1||f(function(n){if(null===n){var t=c.findIndex(function(n){return n.from===e.from&&n.to===e.to});return -1===t?1:t+1}return n>=h?1:n+1})}function A(){(0,sb.ve)(t);var e=t.state.selection.main;t.dispatch({effects:ew.Lz.scrollIntoView(e.from,{y:"center",x:"center"})}),h<=1||f(function(n){if(null===n){var t=c.findIndex(function(n){return n.from===e.from&&n.to===e.to});return -1===t?1:t+1}return n<=1?h||1:n-1})}(0,y.useImperativeHandle)(n,function(){return{onSelectionSet:function(){var e=t.state.selection.main,n=v.current.findIndex(function(n){return n.from<=e.anchor&&n.to>=e.anchor});f(-1!==n?n+1:null)},onDocChanged:function(){u(sS(m.current,t.state.doc)),f(null)},onExpandRequested:function(){l(!0)}}},[t,m,v]),(0,y.useEffect)(function(){var e=sS(r,t.state.doc);u(e);var n=t.state.selection.main,i=e.findIndex(function(e){return e.from<=n.anchor&&e.to>=n.anchor});f(-1!==i?i+1:null)},[t,r]);var x=(0,g._)((0,y.useState)(function(){return sD(t.dom.clientWidth)}),2),C=x[0],_=x[1],k=(0,rd.A)(function(e){e.width&&_(sD(e.width))});function D(e){return(0,ew.TS)(t,e,"search-panel")}var E=h>0,R=r.search.length>0?"0 / 0":null,I=E?"".concat(p||1," / ").concat(h):R,F=I?8*I.length:null,T=(0,w.FD)(Q.S,{css:sR.searchSettings,children:[(0,w.Y)(sx.A,{alt:"case sensitive",icon:(0,w.Y)(sC.A,{}),checked:r.caseSensitive,onClick:function(){i({caseSensitive:!r.caseSensitive})}}),(0,w.Y)(sx.A,{alt:"regular expressions",icon:(0,w.Y)(s_.A,{}),checked:r.regexp,onClick:function(){i({regexp:!r.regexp})}}),(0,w.Y)(sx.A,{alt:"whole words",icon:(0,w.Y)(sk.A,{}),checked:r.wholeWord,onClick:function(){i({wholeWord:!r.wholeWord})}})]}),P=[sR.content];return"small"!==C&&a?P.push(sR.contentExpanded):"small"===C&&a?P.push(sR.contentExpandedSmall):"small"!==C||a||P.push(sR.contentSmall),(0,w.Y)(sE,{ref:k,onKeyDown:function(e){D(e)&&e.preventDefault()},children:(0,w.FD)(nf.ui,{elevated:!0,css:sR.root,px:4,py:6,row:!0,gap:4,children:[(0,w.Y)(Q.S,{css:sR.panelButtonWrapper,children:(0,w.Y)(tH.K0,{alt:a?"Close replace panel":"Show replace panel",size:32,onClick:function(){l(function(e){return!e})},children:(0,w.Y)(ng.A,{rotate:90*!!a,style:{transition:"200ms ease"}})})}),(0,w.FD)(Q.S,{css:P,children:[(0,w.FD)(Q.S,{css:sR.searchInputWrapper,children:[(0,w.Y)(sA.T,{ref:b,style:{padding:4,paddingRight:null!=F?F:void 0},placeholder:"Search",defaultValue:r.search,name:"search","main-field":"true",onKeyDown:function(e){if((0,sY.T$)(e)&&"f"===e.key)return void e.currentTarget.select();if("enter"===e.key.toLowerCase()&&!D(e)){if(e.preventDefault(),e.shiftKey)return void A();Y()}},onChange:function(e){i({search:e})}}),I?(0,w.Y)(Q.S,{css:sR.matchLabel,children:(0,w.Y)(tz.EY,{variant:"small",color:"dimmest",multiline:!1,children:I})}):null]}),(0,w.FD)(Q.S,{css:sR.searchControls,children:[(0,w.FD)(Q.S,{row:!0,children:[(0,w.Y)(tH.K0,{size:32,alt:"Previous",onClick:function(){A()},children:(0,w.Y)(ng.A,{rotate:-90})}),(0,w.Y)(tH.K0,{size:32,alt:"Next",onClick:function(){Y()},children:(0,w.Y)(ng.A,{rotate:90})})]}),(0,w.Y)(t9.$n,{text:"Select all",onClick:function(){(0,sb.Cj)(t),t.focus()}}),T]}),a?(0,w.FD)(w.FK,{children:[(0,w.Y)(Q.S,{css:sR.replaceInputWrapper,children:(0,w.Y)(lM.pd,{ref:S,style:{padding:4},placeholder:"Replacement",name:"replace",defaultValue:r.replace,onKeyDown:function(e){"enter"===e.key.toLowerCase()&&(D(e)||(e.preventDefault(),(0,sb.Aw)(t)))},onChange:function(e){i({replace:e.target.value})}})}),(0,w.FD)(Q.S,{css:sR.replaceControls,children:[(0,w.Y)(t9.$n,{text:"Replace",onClick:function(){(0,sb.Aw)(t)}}),(0,w.Y)(t9.$n,{text:"Replace all",onClick:function(){(0,sb.yh)(t)}})]})]}):null]}),(0,w.Y)(Q.S,{css:sR.panelButtonWrapper,children:(0,w.Y)(tH.K0,{alt:"Close Search Panel",tooltipBehavior:"hidden",onClick:function(){(0,sb.jO)(t)},children:(0,w.Y)(tW.A,{})})})]})})})),sT=D.Pe.define(),sP=[(0,sb.$P)({createPanel:function(e){var n=!1,t=!1,r=!1,i=!1,o=!1,a=G()(function(n){var t,r,i,o,a,l,s=(0,sb.V8)(e.state),c=new sb.L0({search:null!=(t=n.search)?t:s.search,caseSensitive:null!=(r=n.caseSensitive)?r:s.caseSensitive,literal:null!=(i=n.literal)?i:s.literal,regexp:null!=(o=n.regexp)?o:s.regexp,replace:null!=(a=n.replace)?a:s.replace,wholeWord:null!=(l=n.wholeWord)?l:s.wholeWord});c.eq(s)||e.dispatch({effects:sb.Ri.of(c)})},300),l=sF.create({view:e,query:(0,sb.V8)(e.state),updateQuery:a});return{dom:l,top:!0,update:function(n){(0,ey.$H)(n,sb.Ri)&&sF.set(l,{view:e,query:(0,sb.V8)(n.state),updateQuery:a}),n.selectionSet&&!i&&(i=!0,requestAnimationFrame(function(){if(!t){var e;i=!1,null==(e=sF.ref(l))||e.onSelectionSet()}})),n.docChanged&&!r&&(r=!0,requestAnimationFrame(function(){if(!t){var e;r=!1,null==(e=sF.ref(l))||e.onDocChanged()}})),(0,ey.$H)(n,sT)&&!o&&(o=!0,requestAnimationFrame(function(){if(!t){var e;o=!1,null==(e=sF.ref(l))||e.onExpandRequested()}}))},mount:function(){n||(n=!0,requestAnimationFrame(function(){if(!t){n=!1;var e=l.querySelector("[main-field]");e&&(e.focus(),e.select())}}))},destroy:function(){return t=!0}}}}),ew.w4.of([{win:"Ctrl-h",linux:"Ctrl-h",preventDefault:!0,run:function(e){return!!((0,sb.NK)(e.state)||(0,sb.pi)(e))&&(e.dispatch({effects:sT.of(null)}),!0)}}])],sL=t(90671),sU=t(31062),sN=null!=(p=globalThis.requestIdleCallback)?p:globalThis.requestAnimationFrame;function sO(e,n,t){var r=e.field(n,!1);if(void 0===r){if(void 0===t)throw Error("Field is not mounted on state");return t}return n.spec.toJSON(r,e)}function sM(e){for(var n=e.sliceString(0,200)+e.length,t=0,r=0;r<n.length;r++)t=(t<<5)-t+n.charCodeAt(r)|0;return(t>>>0).toString(36)}var sB=function(){function e(n,t,r,i){var o=this;(0,eh._)(this,e),this.view=n,this.replId=t,this.cache=r,this.compartment=i,this.historyIsMounted=!1,this.destroyed=!1,this.pending=!1,this.scheduleCacheUpdate=this.scheduleCacheUpdate.bind(this),this.view.scrollDOM.addEventListener("scroll",this.scheduleCacheUpdate),this.view.state.field(a0,!1)||Promise.resolve().then(function(){o.destroyed||o.apply()})}var n=e.prototype;return n.apply=function(){if(!this.historyIsMounted&&this.view.state.field(V.jN,!1))return void(0,ew.c_)(this.view.state,Error("History was preconfigured on this view, if you want to use state cache, please make sure history is not already configured for this view"));if(!this.key||this.view.state.field(a0,!1)){if(this.historyIsMounted){var e,n,t=this.key?ao.u.of(!0):[];this.view.dispatch({effects:this.compartment.reconfigure(t)}),this.historyIsMounted=!1}return}var r=this.cache.get(this.key);if(!r||r.hash!==sM(this.view.state.doc)){this.view.dispatch({effects:this.compartment.reconfigure((0,V.b6)())}),this.historyIsMounted=!0;return}var i=D.OF.fromJSON(r.selection),o=[(e=r.scroll,(n=ew.Lz.scrollIntoView(e.pos,{y:"start",x:"start",yMargin:e.yDiff,xMargin:e.scrollLeft})).value.isSnapshot=!0,n),this.compartment.reconfigure([V.jN.init(function(e){var n,t;return n=V.jN,t=r.history,n.spec.fromJSON(t,e)}),(0,V.b6)()])];if(this.view.state.field(A.rI,!1))for(var a=0;a<r.folds.length;a+=2){var l=r.folds[a],s=r.folds[a+1];o.push(A.R3.of({from:l,to:s}))}this.view.dispatch({selection:i,effects:o}),this.historyIsMounted=!0},n.scheduleCacheUpdate=function(){var e=this;this.pending||(this.pending=!0,sN(function(){e.pending&&!e.destroyed&&(e.pending=!1,e.historyIsMounted&&e.key&&e.cache.set(e.key,{hash:sM(e.view.state.doc),scroll:function(e){var n=e.scrollDOM.scrollTop,t=e.scrollDOM.scrollLeft;if(0===n&&0===t)return{pos:0,yDiff:0,scrollLeft:0};var r=e.lineBlockAtHeight(n+8),i=r.from>=e.viewport.from||e.viewportLineBlocks[0].top-n>200?r:e.viewportLineBlocks[0];return{pos:i.from,yDiff:i.top-n,scrollLeft:t}}(e.view),selection:e.view.state.selection.toJSON(),history:sO(e.view.state,V.jN),folds:sO(e.view.state,A.rI,[])}))}))},n.postUpdate=function(e){if((0,ey.$H)(e,eb.Md,a0))return void this.apply();!this.pending&&this.historyIsMounted&&(0,ey.$H)(e,"doc","selection",V.jN,A.rI)&&this.scheduleCacheUpdate()},n.destroy=function(){this.destroyed=!0,this.view.scrollDOM.removeEventListener("scroll",this.scheduleCacheUpdate)},(0,tn._)(e,[{key:"key",get:function(){var e=this.view.state.facet(eb.Md);return e?"".concat(this.replId,":").concat(e):null}}]),e}(),sH=new nN.k(function(e,n){var t=new D.xx,r=ew.Z9.define(function(r){return new sB(r,e,n,t)},{provide:function(e){return ew.Lz.updateListener.of(function(n){var t;null==(t=n.view.plugin(e))||t.postUpdate(n)})}});return[t.of(ao.u.of(!0)),r]}),sz=ew.Lz.theme({"&":{contain:"size"},"& > .cm-scroller":{contain:"strict"}}),sW=t(20207),sG=t(73779),sV=t(16564),sj=t(99615),sZ=t(17513),sq=t(40651);function sK(e){return{filePath:e,text:"",selections:[],hasFocus:!1}}function s$(e,n){var t;return null==n?sK(e):{filePath:e,text:null!=(t=n.state.doc.toString())?t:"",selections:n.state.selection.ranges.map(function(e){var n=e.from;return{location:n,length:e.to-n}}),hasFocus:n.hasFocus}}function sJ(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,oZ.A)(),t={messageType:sj.tF.TEXT_EDITOR_STATE,filePath:e.textEditorState.filePath,text:e.textEditorState.text,selections:e.textEditorState.selections,hasFocus:e.textEditorState.hasFocus,hasGhostwriterSuggestion:e.hasGhostwriterSuggestion,revisionId:e.revisionId};(0,sZ._z)(t,n)}function sQ(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,oZ.A)(),t={messageType:sj.tF.TEXT_EDITOR_CLOSED,filePath:e};(0,sZ._z)(t,n)}function sX(e,n,t,r,i){return r===e&&r===t.textEditorState.filePath&&n===t.textEditorState.filePath&&i===t.revisionId}function s0(e){var n=e.map(function(e){return D.OF.range(e.location,e.location+e.length)});return D.OF.create(n)}function s1(e,n,t,r,i){var o,a,l,s,c,u,d,p,f,h,m=i.payload;if((0,sj.$H)(m)){if(!sX(e,n,r,m.filePath,m.revisionId))return!1;var g=s0(m.selections);return t.dispatch({selection:g,scrollIntoView:!0}),!0}if((0,sj.m3)(m)){if(!sX(e,n,r,m.filePath,m.revisionId))return!1;var v=s0(m.selections);return t.dispatch({changes:{from:0,to:t.state.doc.length,insert:m.text},selection:v,scrollIntoView:!0}),!0}if((0,sj.XN)(m)){if(!sX(e,n,r,m.filePath,m.revisionId))return!1;var w=m.insertionRange,y=s0(m.selections);return t.dispatch({changes:{from:w.location,to:w.location+w.length,insert:m.text},selection:y,scrollIntoView:!0}),!0}if((0,sj.bb)(m))return!!sX(e,n,r,m.filePath,m.revisionId)&&(t.dispatch(t.state.replaceSelection(m.text)),!0);if((0,sj.bj)(m))sX(e,n,r,m.filePath,m.revisionId)&&lf({filePath:e,view:t,clipboardText:m.text});else if((0,sj.Ho)(m))switch(m.action){case sj.wZ.REQUEST_BLUR:if(!sX(e,n,r,m.filePath,m.revisionId))return!1;t.contentDOM.blur();return;case sj.wZ.REQUEST_UNDO:return o=e,a=n,l=t,s=r,c=m.filePath,!!sX(o,a,s,c,m.revisionId)&&((0,V.tN)(l),!0);case sj.wZ.REQUEST_REDO:return u=e,d=n,p=t,f=r,h=m.filePath,!!sX(u,d,f,h,m.revisionId)&&((0,V.ZS)(p),!0);case sj.wZ.REQUEST_INDENT_SELECTION:return!!sX(e,n,r,m.filePath,m.revisionId)&&(V.UY(t),!0);case sj.wZ.REQUEST_DEDENT_SELECTION:return!!sX(e,n,r,m.filePath,m.revisionId)&&(V.Mg(t),!0);case sj.wZ.REQUEST_TOGGLE_COMMENT:return!!sX(e,n,r,m.filePath,m.revisionId)&&(V.qh(t),!0);case sj.wZ.REQUEST_ACCEPT_GHOSTWRITER_SUGGESTION:return!!sX(e,n,r,m.filePath,m.revisionId)&&(0,sq.R)(t);case sj.wZ.REQUEST_FOCUS:return t.focus(),!0;default:throw Error("Unknown BridgeTextEditorAction.")}else throw Error("Invalid payload.")}var s2=t(1486),s4=t(74839),s5=t(51030);function s3(e){var n=e.selection,t=e.doc,r=n.ranges.map(function(e){return e.extend(t.lineAt(e.from).from,t.lineAt(e.to).to)});return D.OF.create(r)}var s6=t(31569),s8=t(36593);function s7(e,n,t){var r=e.selection.main,i=e.sliceDoc(r.from,r.to),o=(0,N.an)(n);return{code:i,filePath:n,fileVersion:t,fileContent:e.doc.toString(),range:{indexFrom:r.from,indexTo:r.to,lineFrom:e.doc.lineAt(r.from).number,lineTo:e.doc.lineAt(r.to).number},language:o,referenceType:H.fDX.INLINE}}var s9=t(92985),ce=t(63268),cn=t(73220),ct=t(32752),cr=t(24365),ci=t(1342),co=t(96592);function ca(e){return(0,w.Y)(X.Ay,(0,m._)((0,h._)({},e),{children:(0,w.Y)("path",{fillRule:"evenodd",d:"M7 3.75A1.25 1.25 0 0 0 5.75 5v14.543l5.814-4.153a.75.75 0 0 1 .872 0l5.814 4.153V5A1.25 1.25 0 0 0 17 3.75H7Zm-1.945-.695A2.75 2.75 0 0 1 7 2.25h10A2.75 2.75 0 0 1 19.75 5v16a.75.75 0 0 1-1.186.61L12 16.922 5.436 21.61A.75.75 0 0 1 4.25 21V5c0-.73.29-1.429.805-1.945Z",clipRule:"evenodd"})}))}var cl=t(93333),cs=t(75308);function cc(e){return(0,w.Y)(X.Ay,(0,m._)((0,h._)({},e),{children:(0,w.Y)("path",{fillRule:"evenodd",d:"M2.25 5A2.75 2.75 0 0 1 5 2.25h8A2.75 2.75 0 0 1 15.75 5v.293A.749.749 0 0 1 16 5.25c.822 0 1.56.361 2.062.93.428.485.688 1.123.688 1.82v.293A.749.749 0 0 1 19 8.25c.822 0 1.56.361 2.062.93.428.485.688 1.123.688 1.82v8A2.75 2.75 0 0 1 19 21.75h-8A2.75 2.75 0 0 1 8.25 19c0-.088.015-.172.043-.25H8A2.75 2.75 0 0 1 5.25 16c0-.088.015-.172.043-.25H5A2.75 2.75 0 0 1 2.25 13V5Zm4.457 10.75a.749.749 0 0 1 .043.25c0 .69.56 1.25 1.25 1.25h8c.69 0 1.25-.56 1.25-1.25V8A1.245 1.245 0 0 0 16 6.75a.749.749 0 0 1-.25-.043V13A2.75 2.75 0 0 1 13 15.75H6.707Zm3 3a.749.749 0 0 1 .043.25c0 .69.56 1.25 1.25 1.25h8c.69 0 1.25-.56 1.25-1.25v-8A1.245 1.245 0 0 0 19 9.75a.749.749 0 0 1-.25-.043V16A2.75 2.75 0 0 1 16 18.75H9.707ZM5 3.75c-.69 0-1.25.56-1.25 1.25v8c0 .69.56 1.25 1.25 1.25h8c.69 0 1.25-.56 1.25-1.25V5c0-.69-.56-1.25-1.25-1.25H5Z",clipRule:"evenodd"})}))}var cu=t(55545);function cd(e){return(0,w.Y)(X.Ay,(0,m._)((0,h._)({},e),{children:(0,w.Y)("path",{fillRule:"evenodd",d:"M5.614 1.357a.75.75 0 0 1 1.03.257l8.872 14.788a3.25 3.25 0 1 1-1.286.772L5.357 2.386a.75.75 0 0 1 .257-1.03Zm12.772 0a.75.75 0 0 1 .257 1.029l-4.2 7a.75.75 0 1 1-1.286-.772l4.2-7a.75.75 0 0 1 1.029-.257Zm-7.5 12.5a.75.75 0 0 1 .257 1.029L9.77 17.174a3.25 3.25 0 1 1-1.286-.772l1.373-2.288a.75.75 0 0 1 1.029-.257ZM7.5 17.75a1.75 1.75 0 1 0 0 3.5 1.75 1.75 0 0 0 0-3.5Zm9 0a1.75 1.75 0 1 0 0 3.5 1.75 1.75 0 0 0 0-3.5Z",clipRule:"evenodd"})}))}var cp=t(56002),cf=t(83023);function ch(e){return(0,w.FD)(X.Ay,(0,m._)((0,h._)({},e),{children:[(0,w.Y)("path",{d:"M7 4.25c-.69 0-1.25.56-1.25 1.25v13.333c0 .69.56 1.25 1.25 1.25h10c.69 0 1.25-.56 1.25-1.25v-7.292a.625.625 0 1 1 1.25 0v7.292a2.5 2.5 0 0 1-2.5 2.5H7a2.5 2.5 0 0 1-2.5-2.5V5.5A2.5 2.5 0 0 1 7 3h4.375a.625.625 0 1 1 0 1.25H7Z"}),(0,w.Y)("path",{fillRule:"evenodd",d:"M15.333 16.541c0 .345-.263.625-.588.625h-5.49c-.325 0-.588-.28-.588-.625s.263-.625.588-.625h5.49c.325 0 .588.28.588.625ZM15.333 10.083c0 .345-.263.625-.588.625h-5.49c-.325 0-.588-.28-.588-.625s.263-.625.588-.625h5.49c.325 0 .588.28.588.625Z",clipRule:"evenodd"}),(0,w.Y)("path",{fillRule:"evenodd",d:"M12 13.416c-.345 0-.625-.263-.625-.588v-5.49c0-.325.28-.588.625-.588s.625.263.625.588v5.49c0 .325-.28.588-.625.588ZM17.889 1.266c-.13-.355-.648-.355-.778 0l-.893 2.44a.407.407 0 0 1-.264.247l-2.166.663a.396.396 0 0 0 0 .762l2.166.669c.123.038.22.13.264.247l.893 2.44c.13.355.648.355.778 0l.893-2.44a.407.407 0 0 1 .264-.247l2.166-.666a.396.396 0 0 0 0-.762l-2.166-.666a.407.407 0 0 1-.264-.247l-.893-2.44Z",clipRule:"evenodd"})]}))}var cm=t(38107),cg=t(81395),cv=t(17295),cw=t(22318),cy=t(23266),cb=t(82842),cS=t(85800);function cY(e){var n=e.label,t=e.icon,r=e.run,i=e.keyboardShortcut,o=e.dataCy;return{match:s9.G2,data:{type:"action",label:n,icon:t,run:r,keyboardShortcut:i,dataCy:o}}}function cA(e){var n=e.view,t=e.mainSelection,r=e.codeReference;n.dispatch({selection:{anchor:t.to},effects:[tP.L.of({id:(0,oZ.A)(),codeReference:r,type:"ghostwriterKillswitch"}),ew.Lz.scrollIntoView(t.to,{y:"center"})]})}function cx(e){var n=e.path,t=(0,n6.A)().fs,r=(0,ix._P)({controlName:"flag-killswitch-ghostwriter-chat",logFlagToAnalytics:!1});return(0,y.useCallback)(function(e,i){var o=e.state,a=o.doc,l=o.selection,s=o.lineBreak,c=a.lineAt(l.main.head);c.length&&e.dispatch({changes:{from:c.to,insert:s},selection:D.OF.cursor(c.to+1)});var u=t.getOTVersion(n),d=s7(e.state,n,u);if((0,eX.u4)(eX.AZ.AI_INLINE_EVENT,{action:"inline_textbox_opened",intent_type:"generate",source:i}),r)return void cA({view:e,mainSelection:e.state.selection.main,codeReference:d});var p=e.state.selection.main.to;e.dispatch({selection:{anchor:p},effects:[tP.L.of({id:(0,oZ.A)(),codeReference:d,type:"generateCode",source:i}),ew.Lz.scrollIntoView(p,{y:"center"})]})},[n,t,r])}function cC(e){var n=e.path,t=(0,n6.A)().fs,r=(0,ix._P)({controlName:"flag-killswitch-ghostwriter-chat",logFlagToAnalytics:!1});return(0,y.useCallback)(function(e,i){e.dispatch({selection:s3(e.state)});var o=t.getOTVersion(n),a=s7(e.state,n,o);if(r)return void cA({view:e,mainSelection:e.state.selection.main,codeReference:a});(0,eX.u4)(eX.AZ.AI_INLINE_EVENT,{action:"inline_textbox_opened",intent_type:"modify",source:i});var l=e.state.selection.main.to;e.dispatch({selection:{anchor:l},effects:[tP.L.of({id:(0,oZ.A)(),type:"transformCode",codeReference:a,source:i}),ew.Lz.scrollIntoView(l,{y:"center"})]})},[n,t,r])}function c_(e){var n=e.path,t=(0,n6.A)().fs,r=(0,ix._P)({controlName:"flag-killswitch-ghostwriter-chat",logFlagToAnalytics:!1});return(0,y.useCallback)(function(e,i){e.dispatch({selection:s3(e.state)});var o,a,l,s,c=t.getOTVersion(n),u=s7(e.state,n,c);(0,eX.u4)(eX.AZ.AI_INLINE_EVENT,{action:"inline_textbox_opened",intent_type:"explain",source:i});var d=e.state.selection.main.to-e.state.selection.main.from>z.a;if(d)return void(a=(o={view:e,mainSelection:e.state.selection.main,codeReference:u}).view,l=o.mainSelection,s=o.codeReference,a.dispatch({selection:{anchor:l.to},effects:[tP.L.of({id:(0,oZ.A)(),codeReference:s,type:"codeLengthExceeded"}),ew.Lz.scrollIntoView(l.to,{y:"center"})]}));if(r||d)return void cA({view:e,mainSelection:e.state.selection.main,codeReference:u});var p=e.state.selection.main.to;e.dispatch({selection:{anchor:p},effects:[tP.L.of({id:(0,oZ.A)(),codeReference:u,type:"explainCode",source:i}),ew.Lz.scrollIntoView(p,{y:"center"})]})},[t,n,r])}var ck=new nN.k(function(e,n,t){return e?null:[(0,oO.M)(n),ew.Lz.domEventHandlers({contextmenu:function(e,n){var r=e.clientX,i=e.clientY,o=n.state.selection.main,a=n.posAtCoords({x:r,y:i}),l=n.state.doc.length,s=null===a?l:a;if(s<o.from||s>o.to){var c=D.OF.cursor(s);n.dispatch({selection:c})}return t(e),!0}})]}),cD=t(76780),cE=t(12584),cR=t(41114),cI=t(86997);function cF(){var e=(0,cE._)(["\n  query ReplCodeExamples($language: String!) {\n    languageExamples(language: $language) {\n      ... on LanguageExamples {\n        examples {\n          ... on LanguageExample {\n            mainFile\n            name\n            code\n          }\n        }\n      }\n    }\n  }\n"]);return cF=function(){return e},e}var cT={},cP=(0,cR.J1)(cF());function cL(e){var n=(0,h._)({},cT,e);return cI.I(cP,n)}var cU=t(27903),cN=t(94056),cO=Q.D.button;function cM(e){var n=e.name,t=e.children,r=e.onClick;return(0,w.FD)(cO,{onClick:function(){return r()},css:[e5.b.nofill,J.wp.p(8),J.wp.focusRing,J.wp.textAlign.left],children:[(0,w.Y)(tz.EY,{variant:"subheadDefault",css:J.wp.pb(16),multiline:!1,children:n}),(0,w.Y)(Q.S,{css:[J.wp.backgroundColor.backgroundDefault,J.wp.p(8),J.wp.borderRadius(8)],children:t})]})}var cB="@media (min-width: ".concat(cN.LO.tabletMax,"px)"),cH=(0,e4.AH)([J.wp.colWithGap(16),(0,ts._)({},cB,{width:"calc(50%  - 8px)",flex:"0 0 auto",gap:"16px"})]);function cz(e){var n=e.children;return(0,w.Y)(Q.S,{css:[(0,ts._)({},cB,[J.wp.rowWithGap(16)])],children:n})}function cW(e){var n=e.mainFile,t=e.examples,r=e.onSelect;return(0,w.FD)(Q.S,{gap:24,children:[(0,w.Y)(tz.Y9,{level:1,variant:"headerDefault",children:"Code examples"}),(0,w.Y)(tz.EY,{children:"Get started with some program examples."}),(0,w.FD)(cz,{css:[J.wp.colWithGap(16)],children:[(0,w.Y)(Q.S,{css:cH,children:t.slice(0,(t.length+1)/2).map(function(e){return(0,w.Y)(cM,{name:e.name,onClick:function(){return r(e)},children:(0,w.Y)(cU.A,{code:e.code,filePath:n,fontSize:12,disableCursorStyling:!0})},e.name)})}),(0,w.Y)(Q.S,{css:cH,children:t.slice((t.length+1)/2).map(function(e){return(0,w.Y)(cM,{name:e.name,onClick:function(){return r(e)},children:(0,w.Y)(cU.A,{code:e.code,filePath:n,fontSize:12,disableCursorStyling:!0})},e.name)})})]})]})}function cG(e){var n=e.filePath,t=e.language,r=e.onSelect,i=cL({variables:{language:t}}),o=i.data,a=i.loading,l=i.error;if(a)return(0,w.Y)(Q.S,{pt:32,pb:32,gap:0,justify:"center",align:"center",children:(0,w.Y)(nk.A,{})});if(l)return(0,w.Y)(Q.S,{pt:32,pb:32,gap:0,justify:"center",align:"center",children:l.message});var s=(null==o?void 0:o.languageExamples.__typename)==="LanguageExamples"?o.languageExamples.examples:null;return(null==s?void 0:s.length)?(null==s?void 0:s.length)?(0,w.Y)(cW,{mainFile:n,examples:s,onSelect:r}):(0,w.Y)(Q.S,{pt:32,pb:32,gap:0,justify:"center",align:"center",children:(0,w.FD)(tz.EY,{children:["Sorry, this language doesnt have any examples. Want to add some? Contact us at ",(0,w.Y)("a",{href:"mailto:support@replit.com",children:"support@replit.com"}),"!"]})}):null}var cV=t(15601),cj=(0,$.x)({root:[{marginTop:"10%",pointerEvents:"none","*":{pointerEvents:"all"}}],button:[J.wp.reset.button,J.wp.rowWithGap(6),J.wp.align.center,J.wp.color.foregroundDimmest,J.wp.cursor.pointer,{fontFamily:eN.LU.fontFamilyDefault,"*":{borderColor:eN.LU.foregroundDimmest,color:eN.LU.foregroundDimmest},":hover *":{borderColor:eN.LU.foregroundDefault,color:eN.LU.foregroundDefault}}]}),cZ={layer:"cm-empty-state-layer",dom:"cm-empty-state-dom"},cq=ew.Lz.theme((f={},(0,ts._)(f,".".concat(cZ.layer),{width:"100%",height:"100%",pointerEvents:"none",zIndex:"201 !important"}),(0,ts._)(f,".".concat(cZ.dom),{position:"absolute",width:"100%",pointerEvents:"none",display:"flex",justifyContent:"center"}),f)),cK=function(){function e(n){(0,eh._)(this,e),this.options=n}var n=e.prototype;return n.draw=function(){var e=this.options,n=e.ctas,t=e.view,r=e.width,i=(0,tB.J)((0,w.Y)(Q.S,{css:cj.root,p:16,align:"center",gap:8,children:n.map(function(e){return(0,w.FD)(Q.S,{css:cj.button,onClick:function(){return e.onClick(t)},children:[(0,w.FD)(Q.S,{row:!0,gap:4,children:[e.icon,(0,w.Y)(tz.EY,{variant:"small",children:e.text})]}),e.shortcut?(0,w.Y)(rx._y,{keyCombo:e.shortcut,fontSize:12}):null]},e.text)})}));return i.className=cZ.dom,i.style.width=r+"px",i.style.visibility=r>240?"visibile":"hidden",i.style.left="0px",i},n.eq=function(e){return ev()(e.options,this.options)},e}(),c$=new nN.k(function(e){var n=function(e){var n;return!(e.doc.length>0||e.field(tZ.z)||(null==(n=e.field(lT,!1))?void 0:n.size)||e.field(cV.dg,!1))},t=D.sU.define({create:n,update:function(e,t){return n(t.state)}}),r=(0,ew.qd)({above:!0,class:cZ.layer,update:function(e){return(0,ey.$H)(e,t)},markers:function(n){if(!n.state.field(t,!1))return[];var r=n.dom.getBoundingClientRect();return[new cK({ctas:e,width:Math.round(n.contentDOM.getBoundingClientRect().right-r.left),view:n})]}});return[cq,t,r]}),cJ=t(67251),cQ=t(23072);function cX(e){var n=e.cta,t=e.version;(0,eX.u4)(eX.AZ.EDITOR_EMPTY_STATE_CLICKED,{cta:n,version:t})}var c0=D.Pe.define(),c1=D.sU.define({create:function(){return null},update:function(e,n){var t=e;return(0,eY.C)(n,c0,function(e){t=e.value}),t}}),c2=l2.X.from(c1,function(e){if(!e)return null;var n=e.language,t=e.filePath;return{key:"examplesModal",node:function(e){var r=function(){e.dispatch({effects:c0.of(null)})};return(0,w.Y)(lB.a,{maxWidth:872,isOpen:!0,onRequestClose:r,children:(0,w.Y)(c5,{onRequestClose:r,language:n,filePath:t})})}}}),c4=[c1,c2];function c5(e){var n=e.onRequestClose,t=e.language,r=e.filePath,i=(0,ed.Os)(ec.C.id,ec.j.Examples),o=(0,ed.Os)(ec.C.id,ec.j.Editor),a=(0,g._)((0,y.useState)(!1),2),l=a[0],s=a[1],c=(0,cJ.A)(r),u=(0,y.useRef)(null==i?void 0:i.isActive),d=(0,y.useRef)();d.current=null==i?void 0:i.isActive;var p=(0,y.useRef)(null==i?void 0:i.goto);return(p.current=null==i?void 0:i.goto,(0,y.useEffect)(function(){return function(){var e;d.current&&(null==(e=p.current)||e.call(p,ec.j.Editor))}},[]),(0,y.useEffect)(function(){if((null==o?void 0:o.isActive)&&!u.current){if(!l)return void s(!0);o.goto(ec.j.Examples)}},[o,n,l]),(0,y.useEffect)(function(){if(null==i?void 0:i.isActive){u.current=!0;return}u.current&&n(null)},[n,null==i?void 0:i.isActive]),c)?(0,w.Y)("div",{ref:null==i?void 0:i.tourRef,children:(0,w.Y)(cG,{filePath:r,language:t,onSelect:function(e){c({code:e.code,insertAt:0}),n({exampleName:e.name})}})}):(0,w.Y)("div",{children:"Please make sure you have a file open"})}var c3=t(43177),c6=t(98444),c8=t(21203),c7=t(26019),c9=t(36899),ue=t(15744),un=function(e){var n=parseInt(e.substring(1),16);return[n>>16&255,n>>8&255,255&n]};function ut(e,n,t){var r=n.clientWidth,i=t.clientWidth;e.style.maxWidth="".concat(r,"px"),e.style.position="sticky",e.style.zIndex="201",e.style.marginLeft="-".concat(i,"px")}var ur=t(51895);function ui(e,n,t,r){var i=(0,aV.A)().showError,o=(0,sU.A)(),a=(0,ur.Rf)({variables:{replId:o,path:e},onError:function(e){i(e.message)},skip:!r||n});return(0,y.useMemo)(function(){var r;return n||a.loading||a.error||!a.data||(null==(r=a.data.threadsByFile)?void 0:r.__typename)!=="ThreadsByFileResult"?{}:a.data.threadsByFile.threads.filter(function(n){return n.path===e&&(!t||!n.isResolved)}).reduce(function(e,n){return(0,m._)((0,h._)({},e),(0,ts._)({},n.id,n))},{})},[a.loading,a.data,a.error,e,n,t])}var uo=function(e){function n(){return(0,eh._)(this,n),(0,te._)(this,n,arguments)}(0,tt._)(n,e);var t=n.prototype;return t.compare=function(e){return this==e||this.constructor==e.constructor&&this.eq(e)},t.eq=function(e){return!1},t.destroy=function(e){},n}(D.FB);uo.prototype.elementClass="",uo.prototype.toDOM=void 0,uo.prototype.mapMode=D.iR.TrackBefore,uo.prototype.startSide=uo.prototype.endSide=-1,uo.prototype.point=!0;var ua=D.sj.define(),ul=D.sj.define(),us=D.sj.define({combine:function(e){return e.some(function(e){return e})}}),uc=ew.Z9.fromClass(function(){function e(n){(0,eh._)(this,e),this.view=n,this.prevViewport=n.viewport,this.dom=document.createElement("div"),this.dom.className="cm-right-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.width="0px",this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=n.state.facet(ul).map(function(e){return new uf(n,e)});var t=!0,r=!1,i=void 0;try{for(var o,a=this.gutters[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;this.dom.appendChild(l.dom)}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}this.fixed=!n.state.facet(us),this.fixed&&(this.dom.style.position="sticky",this.dom.style.right="0"),this.syncGutters(!1),n.scrollDOM.insertBefore(this.dom,n.contentDOM.nextSibling)}var n=e.prototype;return n.update=function(e){if(e.viewportChanged){var n=this.view.contentDOM.nextElementSibling;n&&n!==this.dom&&n.classList.contains("cm-minimap-gutter")&&e.view.scrollDOM.insertBefore(this.dom,e.view.contentDOM.nextSibling)}if(this.updateGutters(e)){var t=this.prevViewport,r=e.view.viewport,i=Math.min(t.to,r.to)-Math.max(t.from,r.from);this.syncGutters(i<(r.to-r.from)*.8)}e.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(us)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=e.view.viewport},n.syncGutters=function(e){var n=this,t=this.dom.nextSibling;e&&this.dom.remove();var r=D.om.iter(this.view.state.facet(ua),this.view.viewport.from),i=[],o=this.gutters.map(function(e){return new up(e,n.view.viewport,-n.view.documentPadding.top)}),a=!0,l=!1,s=void 0;try{for(var c,u=this.view.viewportLineBlocks[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var d=c.value,p=void 0;if(Array.isArray(d.type)){var f=!0,h=!1,m=void 0;try{for(var g,v=d.type[Symbol.iterator]();!(f=(g=v.next()).done);f=!0){var w=g.value;if(w.type==ew._B.Text){p=w;break}}}catch(e){h=!0,m=e}finally{try{f||null==v.return||v.return()}finally{if(h)throw m}}}else p=d.type==ew._B.Text?d:void 0;if(p){i.length&&(i=[]),ud(r,i,d.from);var y=!0,b=!1,S=void 0;try{for(var Y,A=o[Symbol.iterator]();!(y=(Y=A.next()).done);y=!0)Y.value.line(this.view,p,i)}catch(e){b=!0,S=e}finally{try{y||null==A.return||A.return()}finally{if(b)throw S}}}}}catch(e){l=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw s}}var x=!0,C=!1,_=void 0;try{for(var k,E=o[Symbol.iterator]();!(x=(k=E.next()).done);x=!0)k.value.finish()}catch(e){C=!0,_=e}finally{try{x||null==E.return||E.return()}finally{if(C)throw _}}e&&this.view.scrollDOM.insertBefore(this.dom,t)},n.updateGutters=function(e){var n=e.startState.facet(ul),t=e.state.facet(ul),r=e.docChanged||e.heightChanged||e.viewportChanged||!D.om.eq(e.startState.facet(ua),e.state.facet(ua),e.view.viewport.from,e.view.viewport.to);if(n==t){var i=!0,o=!1,a=void 0;try{for(var l,s=this.gutters[Symbol.iterator]();!(i=(l=s.next()).done);i=!0)l.value.update(e)&&(r=!0)}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}}else{r=!0;var c=[],u=!0,d=!1,p=void 0;try{for(var f,h=t[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var m=f.value,g=n.indexOf(m);g<0?c.push(new uf(this.view,m)):(this.gutters[g].update(e),c.push(this.gutters[g]))}}catch(e){d=!0,p=e}finally{try{u||null==h.return||h.return()}finally{if(d)throw p}}var v=!0,w=!1,y=void 0;try{for(var b,S=this.gutters[Symbol.iterator]();!(v=(b=S.next()).done);v=!0){var Y=b.value;Y.dom.remove(),0>c.indexOf(Y)&&Y.destroy()}}catch(e){w=!0,y=e}finally{try{v||null==S.return||S.return()}finally{if(w)throw y}}var A=!0,x=!1,C=void 0;try{for(var _,k=c[Symbol.iterator]();!(A=(_=k.next()).done);A=!0){var E=_.value;this.dom.appendChild(E.dom)}}catch(e){x=!0,C=e}finally{try{A||null==k.return||k.return()}finally{if(x)throw C}}this.gutters=c}return r},n.destroy=function(){var e=!0,n=!1,t=void 0;try{for(var r,i=this.gutters[Symbol.iterator]();!(e=(r=i.next()).done);e=!0)r.value.destroy()}catch(e){n=!0,t=e}finally{try{e||null==i.return||i.return()}finally{if(n)throw t}}this.dom.remove()},e}(),{provide:function(e){return ew.Lz.scrollMargins.of(function(n){var t=n.plugin(e);return t&&0!=t.gutters.length&&t.fixed?n.textDirection==ew.OP.LTR?{left:t.dom.offsetWidth}:{right:t.dom.offsetWidth}:null})}});function uu(e){return Array.isArray(e)?e:[e]}function ud(e,n,t){for(;e.value&&e.from<=t;)e.from==t&&n.push(e.value),e.next()}var up=function(){function e(n,t,r){(0,eh._)(this,e),this.gutter=n,this.height=r,this.localMarkers=[],this.i=0,this.cursor=D.om.iter(n.markers,t.from)}var n=e.prototype;return n.line=function(e,n,t){this.localMarkers.length&&(this.localMarkers=[]),ud(this.cursor,this.localMarkers,n.from);var r=t.length?this.localMarkers.concat(t):this.localMarkers,i=this.gutter.config.lineMarker(e,n,r);i&&r.unshift(i);var o=this.gutter;if(0!=r.length||o.config.renderEmptyElements){var a=n.top-this.height;if(this.i==o.elements.length){var l=new uh(e,n.height,a,r);o.elements.push(l),o.dom.appendChild(l.dom)}else o.elements[this.i].update(e,n.height,a,r);this.height=n.bottom,this.i++}},n.finish=function(){for(var e=this.gutter;e.elements.length>this.i;){var n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}},e}(),uf=function(){function e(n,t){var r,i=function(e){r.dom.addEventListener(e,function(r){var i=n.lineBlockAtHeight(r.clientY-n.documentTop);t.domEventHandlers[e](n,i,r)&&r.preventDefault()})};for(var o in(0,eh._)(this,e),this.view=n,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:""),t.domEventHandlers)r=this,i(o);this.markers=uu(t.markers(n)),t.initialSpacer&&(this.spacer=new uh(n,0,0,[t.initialSpacer(n)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}var n=e.prototype;return n.update=function(e){var n=this.markers;if(this.markers=uu(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){var t=this.config.updateSpacer(this.spacer.markers[0],e);t!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[t])}var r=e.view.viewport;return!D.om.eq(this.markers,n,r.from,r.to)||!!this.config.lineMarkerChange&&this.config.lineMarkerChange(e)},n.destroy=function(){var e=!0,n=!1,t=void 0;try{for(var r,i=this.elements[Symbol.iterator]();!(e=(r=i.next()).done);e=!0)r.value.destroy()}catch(e){n=!0,t=e}finally{try{e||null==i.return||i.return()}finally{if(n)throw t}}},e}(),uh=function(){function e(n,t,r,i){(0,eh._)(this,e),this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(n,t,r,i)}var n=e.prototype;return n.update=function(e,n,t,r){this.height!=n&&(this.dom.style.height=(this.height=n)+"px"),this.above!=t&&(this.dom.style.marginTop=(this.above=t)?t+"px":""),!function(e,n){if(e.length!=n.length)return!1;for(var t=0;t<e.length;t++)if(!e[t].compare(n[t]))return!1;return!0}(this.markers,r)&&this.setMarkers(e,r)},n.setMarkers=function(e,n){for(var t="cm-gutterElement",r=this.dom.firstChild,i=0,o=0;;){var a=o,l=i<n.length?n[i++]:null,s=!1;if(l){var c=l.elementClass;c&&(t+=" "+c);for(var u=o;u<this.markers.length;u++)if(this.markers[u].compare(l)){a=u,s=!0;break}}else a=this.markers.length;for(;o<a;){var d=this.markers[o++];if(d.toDOM){d.destroy(r);var p=r.nextSibling;r.remove(),r=p}}if(!l)break;l.toDOM&&(s?r=r.nextSibling:this.dom.insertBefore(l.toDOM(e),r)),s&&o++}this.dom.className=t,this.markers=n},n.destroy=function(){this.setMarkers(null,[])},e}(),um=D.sj.define(),ug=D.sj.define({combine:function(e){return(0,D.QR)(e,{formatNumber:String,domEventHandlers:{}},{domEventHandlers:function(e,n){var t=Object.assign({},e);for(var r in n)!function(e){var r=t[e],i=n[e];t[e]=r?function(e,n,t){return r(e,n,t)||i(e,n,t)}:i}(r);return t}})}}),uv=function(e){function n(e){var t;return(0,eh._)(this,n),(t=(0,te._)(this,n)).number=e,t}(0,tt._)(n,e);var t=n.prototype;return t.eq=function(e){return this.number==e.number},t.toDOM=function(){return document.createTextNode(this.number)},n}(uo);function uw(e,n){return e.state.facet(ug).formatNumber(n,e.state)}function uy(e){for(var n=9;n<e;)n=10*n+9;return n}ul.compute([ug],function(e){return{class:"cm-lineNumbers",renderEmptyElements:!1,markers:function(e){return e.state.facet(um)},lineMarker:function(e,n,t){return t.some(function(e){return e.toDOM})?null:new uv(uw(e,e.state.doc.lineAt(n.from).number))},lineMarkerChange:function(e){return e.startState.facet(ug)!=e.state.facet(ug)},initialSpacer:function(e){return new uv(uw(e,uy(e.state.doc.lines)))},updateSpacer:function(e,n){var t=uw(n.view,uy(n.view.state.doc.lines));return t==e.number?e:new uv(t)},domEventHandlers:e.facet(ug).domEventHandlers}});var ub=new(function(e){function n(){var e;return(0,eh._)(this,n),e=(0,te._)(this,n,arguments),e.elementClass="cm-activeLineGutter",e}return(0,tt._)(n,e),n}(uo)),uS=(ua.compute(["selection"],function(e){var n=[],t=-1,r=!0,i=!1,o=void 0;try{for(var a,l=e.selection.ranges[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var s=a.value;if(s.empty){var c=e.doc.lineAt(s.head).from;c>t&&(t=c,n.push(ub.range(c)))}}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return D.om.of(n)}),t(84965)),uY=t(24712);let uA=function(e){var n=e.isOpen,t=e.threadId,r=(0,g._)((0,y.useState)(!1),2),i=r[0],o=r[1],a=(0,uS.Mk)({variables:{id:t},skip:"initial-spacer"===t});(0,y.useEffect)(function(){if(a&&!a.error){var e,n=null==(e=a.data)?void 0:e.thread;n&&o((null==n?void 0:n.__typename)==="AnnotationAnchor"&&(null==n?void 0:n.messages.some(function(e){return!e.seen})))}},[a]);var l={button:{alt:{default:"View threads",close:"Dismiss thread"}}};return(0,w.Y)(tH.K0,{alt:n?l.button.alt.close:l.button.alt.default,size:24,className:"thread-indicator",css:[J.wp.width(20),J.wp.height(20),J.wp.transition.snappy,J.wp.cursor.pointer,J.wp.display.flex,J.wp.borderRadius(8),J.wp.position.relative,J.wp.overflow("visible"),n?J.wp.color.accentPrimaryStrongest:J.wp.color.foregroundDimmest,{borderWidth:eN.LU.borderWidthDefault,borderStyle:"solid",borderColor:n?eN.LU.accentPrimaryDefault:"transparent",backgroundColor:n?eN.LU.accentPrimaryDimmer:eN.LU.backgroundHigher,outline:0},{":hover":{borderColor:n?eN.LU.accentPrimaryStronger:eN.LU.outlineDimmer,color:n?eN.LU.accentPrimaryStrongest:eN.LU.foregroundDimmer,background:n?eN.LU.accentPrimaryDefault+" !important":eN.LU.backgroundHighest},svg:{width:12,height:12}}],children:(0,w.FD)(w.FK,{children:[i?(0,w.Y)("div",{css:[J.wp.width(8),J.wp.height(8),J.wp.backgroundColor.redStronger,J.wp.position.absolute,J.wp.top(-1),J.wp.left(-1),J.wp.borderRadius("full")]}):null,(0,w.Y)(uY.A,{})]})})};var ux=t(70605),uC=t(39695),u_=t(70390),uk=t(71432),uD=t(5126),uE=t(31628),uR=t(41561);let uI=function(e){var n=e.caretSize,t=void 0===n?[8,12]:n,r=(0,ep._)(e,["caretSize"]);return(0,w.FD)("svg",(0,m._)((0,h._)({width:t[0],height:t[1],viewBox:"0 0 12 8",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r),{children:[(0,w.Y)("mask",{id:"outline",fill:"white",children:(0,w.Y)("path",{d:"M0 8L5.2 1.06667C5.6 0.533333 6.40033 0.533776 6.80033 1.06711C8.67223 3.56297 9.93719 5.24959 12 8H0Z"})}),(0,w.Y)("path",{d:"M0 8L5.2 1.06667C5.6 0.533333 6.40033 0.533776 6.80033 1.06711C8.67223 3.56297 9.93719 5.24959 12 8H0Z",fill:"url(#gradient-fill)"}),(0,w.Y)("path",{d:"M0 8L-0.8 7.4L-2 9H0V8ZM12 8V9H14L12.8 7.4L12 8ZM5.2 1.06667L4.4 0.466667L5.2 1.06667ZM6.80033 1.06711L6.00033 1.66711L6.80033 1.06711ZM12 7H0V9H12V7ZM0.8 8.6L6 1.66667L4.4 0.466667L-0.8 7.4L0.8 8.6ZM6.00033 1.66711C7.87223 4.16297 9.13719 5.84959 11.2 8.6L12.8 7.4C10.7372 4.64959 9.47223 2.96297 7.60033 0.467109L6.00033 1.66711ZM6 1.66667L6.00033 1.66711L7.60033 0.467109C6.80082 -0.598902 5.20049 -0.600655 4.4 0.466667L6 1.66667Z",fill:"#0079F2",mask:"url(#outline)"}),(0,w.Y)("defs",{children:(0,w.FD)("linearGradient",{id:"gradient-fill",x1:"5.07692",y1:"0",x2:"5.07692",y2:"21.3333",gradientUnits:"userSpaceOnUse",children:[(0,w.Y)("stop",{stopColor:"#57ABFF"}),(0,w.Y)("stop",{offset:"1",stopColor:"#0079F2"})]})})]}))};var uF=t(34172),uT=t(80346),uP=t(16610),uL=t(11882),uU=t(75771),uN=t(92395),uO=t(1841),uM=t(12053),uB=t(98106),uH=t(18870),uz=t(52917),uW=t(22334),uG=t(48028),uV=(0,$.x)({inlineThreadHeader:[J.wp.position.relative,J.wp.px(12),J.wp.py(8),{borderBottomWidth:eN.LU.borderWidthDefault,borderBottomStyle:"solid",borderBottomColor:eN.LU.outlineDimmest}],inlineThreadHeaderCaret:[J.wp.position.absolute,J.wp.height("fit-content"),J.wp.display.flex,J.wp.flex.row,J.wp.align.center],inlineThreadInputContainer:[J.wp.border({color:eN.LU.outlineDimmest,direction:"top"}),{".popover-control-container":[J.wp.flex.grow(1)]}],inlineThreadInput:[J.wp.flex.row,J.wp.align.start,J.wp.rowWithGap(8),J.wp.width("full")],commentContainer:[J.wp.px(12),J.wp.py(12),J.wp.maxHeight(300),J.wp.overflowY("auto"),J.wp.colWithGap(16)]}),uj=function(e){var n,t,r=e.isCreating,i=e.threadId,o=e.filePath,a=e.isResolved,l=e.isLoading,s=e.isPlaceholder,c=e.caretPosition,u=e.onRequestClose,d=e.onResolveThread,p=e.openThreadsInbox,f={viewAll:"Inbox",next:"Next thread",previous:"Previous thread",dismiss:"Collapse"},h=ui(null===o?"":o,l,!0,!0),m=(0,O.g)("fontSize").preferences.fontSize,g=[12,8];switch(m){case 10:g=[8,6];break;case 14:g=[10,6];break;case 18:g=[12,8];break;case 24:g=[14,10]}var v=(0,y.useMemo)(function(){return Object.values(h).sort(function(e,n){return e.indexStart-n.indexStart})},[h]),b=(0,y.useMemo)(function(){return v.findIndex(function(e){return e.id===i})},[v,i]),S=(0,uP.li)(),Y=(n=(0,ef._)(function(){var e;return(0,em.YH)(this,function(e){return S(b===v.length-1?v[0].id:v[b+1].id),[2]})}),function(){return n.apply(this,arguments)}),A=(t=(0,ef._)(function(){var e;return(0,em.YH)(this,function(e){return S(0===b?v[v.length-1].id:v[b-1].id),[2]})}),function(){return t.apply(this,arguments)});return(0,w.FD)(nf.ui,{background:"root",css:uV.inlineThreadHeader,row:!0,align:"center",justify:"space-between",children:[null!==c&&(0,w.Y)("span",{css:uV.inlineThreadHeaderCaret,style:{top:-g[1],left:c},children:(0,w.Y)(uI,{caretSize:g})}),(0,w.Y)(t9.$n,{iconLeft:(0,w.Y)(uW.A,{}),onClick:function(){p()},text:f.viewAll,size:"small"}),v.length>1?(0,w.FD)(Q.S,{row:!0,align:"center",gap:4,children:[(0,w.Y)(tH.K0,{alt:f.previous,onClick:A,children:(0,w.Y)(uB.A,{})}),(0,w.FD)(tz.EY,{color:"dimmest",variant:"small",multiline:!1,children:[b+1,"/",v.length]}),(0,w.Y)(tH.K0,{alt:f.next,onClick:Y,children:(0,w.Y)(uM.A,{})})]}):null,(0,w.FD)(Q.S,{row:!0,align:"center",gap:4,children:[r||a||s?null:(0,w.Y)(t9.$n,{onClick:void 0===d?function(){}:d,text:"Resolve",size:"small",iconLeft:(0,w.Y)(uH.A,{})}),!r&&a?(0,w.Y)(uL.a,{text:"Resolved",colorway:"positive"}):null,(0,w.Y)(t9.$n,{onClick:void 0===u?function(){}:u,text:f.dismiss,size:"small",iconLeft:(0,w.Y)(uz.A,{})})]})]})},uZ=function(e){var n,t,r=e.threadId,i=e.isResolved,o=e.onMessageChange,a=e.onMessageSubmit,l=e.isPlaceholder,s=e.onRequestClose,c=void 0===s?function(){}:s,u=(0,g._)((0,y.useState)(""),2),d=u[0],p=u[1],f=(0,g._)((0,y.useState)((0,oZ.A)()),2),v=f[0],b=f[1],S=(0,uD.A)().ref,Y=(0,y.useRef)(null),A={input:{placeholder:function(){return l?"Start a new thread (Markdown is supported)":i?"Reply to re-open thread":"Reply (Markdown is supported)"}},submit:"Post reply",cancel:"Cancel"},x=function(){var e=d.trim();0!==e.length&&(a({message:e,messageId:v}),p(""),b((0,oZ.A)()))},C=(0,uE.T)(),_=(0,uk.A)(),k=(0,g._)((0,uR.A)({"@":(n=(0,ef._)(function(e){var n,t;return(0,em.YH)(this,function(r){return n=_.filter(function(e){return e.id!==C}),e&&(t=e.toLowerCase(),n=n.filter(function(e){return e.username.toLowerCase().startsWith(t)})),[2,n.slice(0,5).map(function(e){return{icon:(0,w.Y)(uO.A,{username:e.username,fullName:e.fullName,url:e.image,style:{height:"24px",width:"24px",minWidth:"24px",minHeight:"24px"}}),value:e.username}})]})}),function(e){return n.apply(this,arguments)})}),2),D=k[0].suggestions,E=k[1],R=(0,uC.Bp)({items:(null==D?void 0:D.results)||[],defaultHighlightedIndex:0,isOpen:(null!=(t=null==D?void 0:D.results.length)?t:0)>0,onSelectedItemChange:function(e){var n=e.selectedItem;if(D&&n){var t=D.applySuggestion({targetValue:d,suggestionValue:n.value}),r=t.fullValue,i=t.cursorIndex;p(r),setTimeout(function(){Y.current&&(Y.current.setSelectionRange(i,i),Y.current.focus())})}}}),I=R.isOpen,F=R.getInputProps,T=R.getMenuProps,P=R.getItemProps,L=R.highlightedIndex,U=R.getComboboxProps;return(0,y.useEffect)(function(){var e="threads/drafts/".concat(r),n=aj.A.get(e,"string");n&&p(n);var t=Y.current;return function(){if(t){var n=t.value;if(0===n.length)return void aj.A.remove(e);aj.A.set(e,n)}}},[r]),(0,w.Y)(nf.ui,{background:"root",css:uV.inlineThreadInputContainer,px:12,pb:8,pt:8,children:(0,w.FD)("div",(0,m._)((0,h._)({css:uV.inlineThreadInput},U()),{children:[l?(0,w.Y)(t9.$n,{text:A.cancel,onClick:c}):null,(0,w.FD)("div",{css:[{width:"100%"}],children:[(0,w.Y)(lM.ov,(0,h._)({},F({ref:function(e){Y.current=e,S(e),E(e)},value:d,onChange:function(e){var n=e.target.value;p(n),o({message:n,messageId:v})},onKeyDown:function(e){!I&&(e.preventDownshiftDefault=!0,"Enter"!==e.key||e.shiftKey||(e.stopPropagation(),e.preventDefault(),x()))},onKeyUp:function(e){"Escape"===e.key&&(e.stopPropagation(),e.preventDefault(),c())},placeholder:A.input.placeholder(),css:[J.wp.height(32),J.wp.align.start,{resize:"vertical",width:"100%",flexGrow:1,caretColor:"auto"}],autoFocus:!0}))),(0,w.Y)("div",{css:{position:"relative"},children:(0,w.Y)("div",(0,m._)((0,h._)({},T({css:[{position:"absolute",top:eN.LU.space2,overflow:"hidden"},J.wp.borderRadius(16),J.wp.shadow(1),J.wp.backgroundColor.backgroundDefault]})),{children:null==D?void 0:D.results.map(function(e,n){return(0,ux.n)("div",(0,m._)((0,h._)({},P({item:e,index:n})),{key:e.value}),(0,w.FD)(uN.z,{spacing:2,css:[L===n?J.wp.backgroundColor.backgroundHighest:null,J.wp.p(8)],children:[e.icon,(0,w.Y)("div",{children:e.value})]}))})}))})]}),(0,w.Y)(Q.S,{pt:4,children:(0,w.Y)(tH.K0,{alt:A.submit,tooltipDelay:"long",onClick:x,children:(0,w.Y)(uG.A,{})})})]}))})},uq=function(e){var n,t,r=e.threadId,i=e.isCreating,o=e.isResolved,a=void 0!==o&&o,l=e.view,s=e.filePath,c=e.openThreadsInbox,u=(0,uT.A)(r,l,s),d=u.thread,p=u.loading,f=u.isPlaceholder,h=u.getLatestAnchor,m=u.updateThread,g=u.changeThreadMessage,b=u.finalizeThreadMessage,S=function(){null==l||l.dispatch({effects:[cV.Ky.of(null)]})},Y=(0,O.g)("fontSize").preferences.fontSize,A=(0,y.useRef)(null);(0,u_.A)(d);var x=h(),C=l&&!p&&"number"==typeof(null==x?void 0:x.indexEnd)&&x.indexEnd<=l.state.doc.length?null==(t=l.coordsAtPos(x.indexEnd))?void 0:t.left:null,_=(null==l?void 0:l.dom.getBoundingClientRect().left)||null,k=Y;switch(Y){case 10:k=13;break;case 14:k=19;break;case 18:k=25;break;case 24:k=34}var D=(0,aV.A)().showConfirm,E=(0,sU.A)(),R=(0,y.useRef)(null),I=function(){R.current&&(R.current.scrollTop=R.current.scrollHeight)};(0,y.useEffect)(function(){setTimeout(function(){I()},0)},[null==d?void 0:d.messages]);var F=(0,y.useMemo)(function(){return(null==d?void 0:d.messages)?(0,v._)(d.messages).sort(function(e,n){return Date.parse(e.timeCreated)-Date.parse(n.timeCreated)}):[]},[null==d?void 0:d.messages]),T=(n=(0,y.useRef)(0),(0,rd.A)(function(e){var t=e.height;t!==n.current&&(null==l||l.requestMeasure()),n.current=t})),P=(0,es.S)([A,T],{breadcrumb:"client/workspace/components/Threads/Inline.tsx:655"});return(0,w.Y)("div",{css:[J.wp.width("100%"),J.wp.backgroundColor.backgroundRoot],children:(0,w.FD)(Q.S,{innerRef:P,css:[J.wp.font.default,{borderTopWidth:eN.LU.borderWidthDefault,borderBottomWidth:eN.LU.borderWidthDefault,borderStyle:"solid",borderColor:eN.LU.accentPrimaryDefault}],children:[f||p?null:(0,w.Y)(uj,{isCreating:i,isResolved:a,isLoading:p,threadId:r,filePath:s,caretPosition:C&&_?C-_-6:null,isPlaceholder:f,onRequestClose:S,onResolveThread:function(){m({changes:{isResolved:!0}}),D("Thread resolved. You can reopen it from the inbox.")},openThreadsInbox:c}),p&&!f?(0,w.Y)(Q.S,{style:{height:k},children:(0,w.Y)(uU.A,{viewBox:"0 0 400 21",backgroundColor:eN.LU.accentPrimaryDimmest,backgroundOpacity:0,foregroundColor:eN.LU.accentPrimaryDimmest,foregroundOpacity:.2,speed:1,children:(0,w.Y)("rect",{x:"0",y:"0",width:"100%",height:"100%"})})}):(0,w.FD)(w.FK,{children:[!i&&F.length>0?(0,w.Y)("div",{css:uV.commentContainer,style:{fontSize:Y},ref:R,children:F.map(function(e){return(0,w.Y)(uF.A,{thread:d,message:e},e.id)})}):null,(0,w.Y)(uZ,{threadId:r,isPlaceholder:f,isResolved:a,onRequestClose:S,onMessageChange:g,onMessageSubmit:function(e){b(e),(0,eX.u4)(rS.AZ.MESSAGE_SENT,{replId:E,source:"threads",newThread:f})}})]})]})})},uK=function(e){function n(e,t){var r;return(0,eh._)(this,n),(r=(0,te._)(this,n)).id=e,r.filePath=t,r}(0,tt._)(n,e);var t=n.prototype;return t.eq=function(e){return e.id===this.id},t.toDOM=function(e){var n=(0,tB.J)((0,w.Y)(uq,{threadId:this.id,view:e,filePath:this.filePath,openThreadsInbox:function(){return(0,t8.zw)(e.state,{pane:{type:"threadInbox"}})}}));n.className="cm-thread-portal-widget";var t=e.dom.querySelector(".cm-scroller"),r=e.dom.querySelector(".cm-gutters");return t&&r&&ut(n,t,r),n},t.ignoreEvent=function(){return!0},n}(ew.xO),u$=function(e){function n(e,t){var r;return(0,eh._)(this,n),(r=(0,te._)(this,n)).id=e,r.active=t,r}(0,tt._)(n,e);var t=n.prototype;return t.toDOM=function(e){var n=this,t=(0,tB.J)((0,w.Y)(uA,{isOpen:this.active,threadId:this.id}));return t.className="cm-thread-indicator",t.style.display="inline",t.style.cursor="pointer",t.setAttribute("aria-hidden","true"),t.onclick=function(t){t.stopPropagation(),t.preventDefault(),e.dispatch({effects:[cV.Ky.of(e.state.field(cV.dg)===n.id?null:n.id)]})},t},t.eq=function(e){return e.id===this.id&&e.active===this.active},n}(uo),uJ=(r={class:"cm-thread-indicator-gutter",markers:function(e){var n=e.state.field(cV.K1),t=e.state.field(cV.dg);return D.om.of(Object.values(n).filter(function(e){return e.indexEnd!==e.indexStart}).map(function(n){var r=e.state.doc.lineAt(Math.min(n.indexStart,n.indexEnd)).from;return new u$(n.id,n.id===t).range(r)}),!0)},initialSpacer:function(){return new u$("initial-spacer",!1)}},[function(e){var n=[uc];return n}(),ul.of((0,h._)({},{class:"",renderEmptyElements:!1,elementStyle:"",markers:function(){return D.om.empty},lineMarker:function(){return null},lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},r))]),uQ=t(33781),uX=function(e,n,t,r,i){if(n===t)return null;var o=(0,g._)(r,2),a=o[0],l=o[1];return ew.NZ.mark({class:"replit-thread-highlight cm-thread-".concat(e),attributes:{style:"background-color: ".concat(i?l:a)},id:e}).range(n,t)},u0=new nN.k(function(e,n){return e?[D.Nb.highest(uJ),cV.Am,cV.K1,cV.TW,cV.dg,ew.Lz.decorations.compute([cV.K1,cV.TW,cV.dg],function(e){var t=e.field(cV.K1),r=e.field(cV.TW),i=e.field(cV.dg),o=r||Object.values(t).find(function(e){return e.id===i});return ew.NZ.set((0,v._)(Object.values(t)).map(function(e){var t=o&&e.id===o.id;return uX(e.id,e.indexStart,e.indexEnd,n,t)}).filter(function(n){return null!==n&&n.from!==n.to&&n.from<=e.doc.length&&n.to<=e.doc.length}),!0)}),ew.Lz.decorations.compute([cV.K1,cV.TW,cV.dg,eb.Md],function(e){var n=e.field(cV.K1),t=e.field(cV.TW),r=e.field(cV.dg),i=e.facet(eb.Md);if(void 0===i)return ew.NZ.none;var o=(0,v._)(Object.values(n)).concat((0,v._)(t?[t]:[])).filter(Boolean).find(function(e){return e.id===r});return o?ew.NZ.set([ew.NZ.widget({widget:new uK(o.id,i),block:!0,side:1}).range(o.indexEnd)],!0):ew.NZ.none}),ew.Lz.updateListener.of(function(e){(0,eY.C)(e,aD.k,function(){var n=(0,v._)(e.view.dom.querySelectorAll(".cm-thread-portal-widget")),t=e.view.dom.querySelector(".cm-scroller"),r=e.view.dom.querySelector(".cm-gutters");if(n.length&&t&&r){var i=!0,o=!1,a=void 0;try{for(var l,s=n[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=l.value;ut(c,t,r)}}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}}})}),ew.Lz.updateListener.of(function(e){(0,eY.C)(e,cV.Mt,function(n){var t=n.value,r=e.state.field(cV.K1)[t];r&&e.view.dispatch({selection:{anchor:r.indexStart,head:r.indexStart},effects:[ew.Lz.scrollIntoView(r.indexStart,{x:"center",y:"center"})]})})})]:null}),u1=t(639);function u2(e){var n=e.selection.main.head,t=e.doc.lineAt(n);return{offset:n,line:t.number,column:n-t.from+1}}var u4=new nN.k(function(e){return ew.Lz.focusChangeEffect.of(function(n,t){var r=n.facet(eb.Md);return r&&e(r,t?{type:"focus",position:u2(n)}:{type:"blur"}),null})}),u5=new nN.k(function(e){return ew.Lz.updateListener.of(function(n){if(n.selectionSet){var t=n.state.facet(eb.Md);t&&e(t,{type:"update",hasFocus:n.view.hasFocus,position:u2(n.state)})}})}),u3=t(81738),u6=new nN.k(function(){return(0,ew.BE)()}),u8=function(e){var n,t=(0,sG.A)((n=(0,ef._)(function(n){var t;return(0,em.YH)(this,function(r){switch(r.label){case 0:return[4,n.status()];case 1:if((t=r.sent()).error)return[2,{error:t.error,isUnmerged:null}];if(t.changes.find(function(n){return n.path===e&&(n.type.index===sW.PX.UNMERGED||n.type.worktree===sW.PX.UNMERGED)}))return[2,{error:null,isUnmerged:!0}];return[2,{error:null,isUnmerged:!1}]}})}),function(e){return n.apply(this,arguments)}),[e]);return t||{error:null,isUnmerged:null}};function u7(e){var n,t,r,i,o,a,l,s,c,u,d,p,f,b,S,Y,A,x,C,k,E,R,I,F,T,M,H,W,V,j,Z,$,J,Q,X,ee,en,et,er,ei,eo,ea,el,es,ec,eu,ed,ep,eg,ev,eF,eT,eP,eU,eO,eM,eB,eH,eW,eG,eV,ej,eZ,eq,eK,e$,eJ,eQ,e0,e1,e2,e4,e5,e3,e6,e8,e7,e9,ne,nn,nt,nr,ni,no,na,nl,ns,nc,nu,nd,np,nf,nh,nm,ng,nv,nw,ny,nb=e.filePath,nS=e.isHidden,nY=e.isReadOnly,nA=e.isReadOnlyWhileAgentWorking,nC=e.deeplink,nk=e.onDeeplinkUpdated,nD=e.performPaneOperation,nE=(0,n6.A)(),nR=nE.fs,nI=nE.presence,nF=nE.runner,nT=(0,O.g)("formatOnSave","rulers","minimapDisplay","showLeadingWhitespace","showEnclosedWhitespace","showTrailingWhitespace","showSelectedWhitespace").preferences,nN=(0,sp.A)(),nB=nN.ref,nH=nN.view,nz=(0,y.useCallback)(function(e){return nD({operation:"open",pane:e,secondary:!0})},[nD]);(0,K.Hn)(nH);var nW=(0,q.eG)(),nG=aK.use(!!(null==nW?void 0:nW.match(/Chrome/i))&&!!(null==nW?void 0:nW.match(/Android/i))),nV="/replEnvironmentDesktop"===nL().pathname,nj=(0,y.useContext)(u3.IC),nZ=(0,a$.gR)(),nq=(t=(n={path:nb,isHidden:nS}).path,r=n.isHidden,i=(0,u1.EZ)(),o=u4.use(i),a=u5.use(i),(0,y.useEffect)(function(){i(t,{type:r?"hidden":"unhidden"})},[r,i,t]),(0,y.useEffect)(function(){return function(){i(t,{type:"unmount"})}},[i,t]),(0,y.useMemo)(function(){return[o,a]},[o,a])),nK=(c=(l={view:nH,presence:nI,fs:nR,filePath:nb,performPaneOperation:nD}).view,u=l.presence,d=l.fs,p=l.filePath,f=l.performPaneOperation,b=li.use(p,d,u),S=aW.use(u),A=(Y={filePath:p,fs:d,performPaneOperation:f}).filePath,x=Y.fs,C=Y.performPaneOperation,k=(0,aJ.A)().trackTimeToLoadFileEnd,E=(0,a$.iO)(),R=(0,a$.jk)(),I=(0,a$.Qq)(),F=(0,aV.A)().showWarning,T=(0,y.useMemo)(function(){return{trackTimeToLoadFileEnd:k,throwBsod:E,setBsodFilePathVersion:R,deleteBsodFilePathVersion:I,showWarning:F,performPaneOperation:C}},[I,R,E,k,F,C]),M=a3.use(A,x,T),H=null==(s=(0,U.Vn)(c,ao.u))||s,W=(0,y.useMemo)(function(){return[M,b,S]},[M,b,S]),(0,y.useMemo)(function(){return{isLoading:H,extensions:W}},[H,W])),nJ=nK.isLoading,nX=nK.extensions,n0=function(){var e=(0,sU.A)(),n=(0,y.useContext)(sL.H);if(!n)throw Error("Expected codemirror state to be in codemirror state context");return sH.use(e,n)}(),n2=(j=(V={filePath:nb,isLoading:nJ}).filePath,Z=V.isLoading,$=(0,n6.A)().fs,J=(0,n4.A)(j),Q=(0,O.g)("acceptSuggestionOnCommitCharacter","codeIntelligence","codeActionsOnSave","semanticTokens").preferences,X=(0,ix._P)({controlName:"flag-lsp-semantic-tokens",logFlagToAnalytics:!1}),ee=!(0,ix._P)({controlName:"flag-clui-ctx-menu-rename-all",logFlagToAnalytics:!1}),en=Z||!Q.codeIntelligence||!J.find(function(e){return e.isSupportedFile(j)}),et=(0,y.useMemo)(function(){return new ey.L(en?[]:function(e,n,t,r){if(!n.length)return[];var i,o,a,l,s,c,u,d=[(o=(i={lspClients:n,path:t}).lspClients,a=i.path,ew.Z9.define(function(e){var n,t,r,i,l,s;return t=(n={lspClients:o,path:a,view:e}).lspClients,r=n.path,i=n.view,l=(0,oZ.A)(),s=function(e){var n,t=oK.get(e.clientId);return(null!=(n=null==t?void 0:t.get(r))?n:[])[0]===l},!function(){var e=!0,n=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(e=(a=s.next()).done);e=!0){var c,u=a.value,d=oK.get(u.clientId),p=null!=(c=null==d?void 0:d.get(r))?c:[];d?d.set(r,(0,v._)(p).concat([l])):oK.set(u.clientId,new Map([[r,[l]]])),u.notify.didOpen(r,i.state.doc.toString())}}catch(e){n=!0,o=e}finally{try{e||null==s.return||s.return()}finally{if(n)throw o}}}(),{id:l,destroy:function(){var e=!0,n=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(e=(o=a.next()).done);e=!0){var s,c=o.value,u=oK.get(c.clientId),d=(null!=(s=null==u?void 0:u.get(r))?s:[]).filter(function(e){return e!==l});c.getServerState()===oq.b.INITIALIZED&&c.isOpen(r)&&c.notify.didClose(r),0===d.length?null==u||u.delete(r):null==u||u.set(r,d)}}catch(e){n=!0,i=e}finally{try{e||null==a.return||a.return()}finally{if(n)throw i}}},update:function(e){if(e.docChanged){var n=!0,i=!1,o=void 0;try{for(var a,l,c=t[Symbol.iterator]();!(n=(l=c.next()).done);n=!0){var u,d=l.value;if(s(d)){var p=null==(u=d.getServerCapabilities())?void 0:u.textDocumentSync;if(p!==iE.TextDocumentSyncKind.None&&d.isOpen(r)){if(p===iE.TextDocumentSyncKind.Full){d.notify.didChange(r,[{text:e.view.state.doc.toString()}]);continue}a||(a=function(e,n){var t=[],r=n;return e.iterChanges(function(e,n,i,o,a){var l=a.sliceString(0),s=n-e,c=s+i;t.push({range:{start:(0,eA.Z3)(r,i),end:(0,eA.Z3)(r,c)},rangeLength:s,text:l}),r=r.replace(i,c,a)}),t}(e.changes,e.startState.doc)),d.notify.didChange(r,a)}}}}catch(e){i=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(i)throw o}}}}}})),(0,L.E9)({lspClients:n,path:t}),function(e,n){function t(e){return(0,eC.A)(e).isTextDocumentSyncSupported}return ew.Z9.fromClass(function(){function r(e){(0,eh._)(this,r),this.dispose=this.listen(e.state.facet(eb.Md))}var i=r.prototype;return i.update=function(e){(0,ey.$H)(e,eb.Md)&&(this.dispose=this.listen(e.state.facet(eb.Md)))},i.destroy=function(){this.dispose&&this.dispose()},i.listen=function(r){if((this.dispose&&this.dispose(),r)&&n.find(function(e){return t(e)}))return e.watchTextFile(r,{onFlush:function(){var e=!0,i=!1,o=void 0;try{for(var a,l=n[Symbol.iterator]();!(e=(a=l.next()).done);e=!0){var s=a.value;if(t(s))(0,eC.A)(s).isTextDocumentSyncSaveSupported&&s.isOpen(r)&&s.notify.didSave(r)}}catch(e){i=!0,o=e}finally{try{e||null==l.return||l.return()}finally{if(i)throw o}}}})},r}())}(e,n),[eD,eI,ew.Z9.fromClass(function(){function e(t){(0,eh._)(this,e);var r=this;this.abortControllers=[],this.getSymbolMap=(0,ex.A)((0,ef._)(function(){var e,i,o;return(0,em.YH)(this,function(a){switch(a.label){case 0:if(!(e=t.state.facet(eb.Md)))return[2];return r.abortControllers=[],[4,Promise.all(n.map(function(n){if(!(0,eC.A)(n).isDocumentSymbolSupported)return null;var t=new AbortController;return r.abortControllers.push(t),function(e,n,t){return eE.apply(this,arguments)}(n,e,t.signal)}))];case 1:return i=a.sent(),t.dispatch({effects:ek.of(null!=(o=i.find(Boolean))?o:null)}),[2]}})}),{wait:200}),e_(t.state)&&this.getSymbolMap().catch(eR)}var t=e.prototype;return t.update=function(e){(0,ey.$H)(e,"doc",eS.q)&&e_(e.state)&&(this.abortControllers.forEach(function(e){return e.abort()}),this.getSymbolMap().catch(eR))},t.destroy=function(){this.abortControllers.forEach(function(e){return e.abort()}),this.getSymbolMap.isScheduled()&&this.getSymbolMap.cancel()},e}())]];return(0,iD.isMobile)()?d:(d.push([of,ol,ou,(0,iR.yU)({defaultKeymap:!1,closeOnBlur:!1,tooltipClass:function(e){return(0,rb.R)(e)?oa:""},addToOptions:[{render:function(e,n){if(!(0,rb.R)(n))return null;var t=(0,tB.J)((0,w.Y)("div",{className:op,children:(0,w.Y)(oi.A,{size:"inherit",shortcut:{key:""}})}));return t.style.display="inline-flex",t},position:200}],override:n.map(function(e){return(0,iR.Ar)(["LineComment","BlockComment"],function(e){var n=.01>Math.random(),t=0,r=function(t,r,i){if(n&&r){var o=e.getLanguageId(r);return id.vF.info("lsp:autocomplete:".concat(t),(0,h._)({languageId:o},i)),(0,eX.u4)(eX.AZ.LSP_COMPLETION_USED,(0,h._)({type:t,sampleRate:.01},i))}};function i(){return(i=(0,ef._)(function(n){var i,o,a,l,s,c,u,d,p,f;return(0,em.YH)(this,function(y){switch(y.label){case 0:if(!(o=e.getServerCapabilities())||!(null==o?void 0:o.completionProvider)||!(a=function(e,n){var t=e.state,r=e.pos;if(e.explicit)return{triggerKind:iE.CompletionTriggerKind.Invoked};var i=t.doc.lineAt(r),o=i.text[r-i.from-1],a=i.text.substring(0,r-i.from);return(null==n?void 0:n.includes(o))?{triggerKind:iE.CompletionTriggerKind.TriggerCharacter,triggerCharacter:o}:a.match(/\w$/)?{triggerKind:iE.CompletionTriggerKind.Invoked}:null}(n,(null==o||null==(i=o.completionProvider)?void 0:i.triggerCharacters)||[])))return[2,null];if(t&&e.notify.cancelRequest(t),!(l=n.state.facet(eb.Md)))throw Error("path not found");return t=e.generateId(),s=n.state.doc,[4,e.request.completion(l,(0,eA.Z3)(s,n.pos),a,{id:t})];case 1:if("error"in(c=y.sent())||(u=c.result,n.aborted||!u))return[2,null];return d=Array.isArray(u)?u:u.items,f=Array.isArray(u)?{}:null!=(p=u.itemDefaults)?p:{},[2,function(e){for(var n,t=e.context,r=e.items,i=e.itemDefaults,o=e.client,a=e.trackCompletion,l=e.startingDoc,s=null,c=function(){return s},u=(I=r.filter(function(e){return!!e.label}),F=["label","kind"],T=new Set,I.filter(function(e){var n=F.map(function(n){return e[n]}).join("");return!T.has(n)&&(T.add(n),!0)})).map(function(e){return{item:e,label:e.label,filterText:(e.filterText||e.label).toLowerCase(),sortText:(e.sortText||e.label).toLowerCase()}}),d=((u=u.sort(function(e,n){return e.sortText<n.sortText?-1:+(e.sortText>n.sortText)})).length%2?u.length-1:u.length)/2,p=0;p<=d;p++){if(0===p&&u[d]){u[d].boost=0;continue}var f=u[d-p];if(f){var y=u[d-p+1],b=y.sortText,S=y.boost,Y=void 0===S?0:S;f.boost=f.sortText===b?Y:Y+1}var A=u[d+p];if(A){var x=u[d+p-1],C=x.sortText,_=x.boost,k=void 0===_?0:_;A.boost=A.sortText===C?k:k-1}}var E=null!=(U=null==(P=u[0])?void 0:P.boost)?U:0,R=null!=(N=null==(L=u[u.length-1])?void 0:L.boost)?N:0;if(E>99||R<-99)for(var I,F,T,P,L,U,N,O,M=99/Math.max(Math.abs(E),Math.abs(R)),B=0;B<u.length;B++)u[B].boost=(null!=(O=u[B].boost)?O:0)*M;var H=(0,g._)(function(e){var n=Object.create(null),t=Object.create(null),r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var s=a.value.filterText;n[s[0]]=!0;for(var c=1;c<s.length;c++)t[s[c]]=!0}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}var u=od(n)+od(t)+"*$";return[RegExp("^"+u),new RegExp(u)]}(u),2),z=H[0],W=H[1],G=t.matchBefore(W),V=t.pos;function j(e,n){var t,r,s,u,d,p,f,y,b,S,Y,A,x,C;return b=n.state.facet(eb.Md),S=null!=(d=(0,iI.A)(n.state))?d:"unknown",Y=(0,eC.A)(o),A=e.item,x=e.boost,C={label:A.label,detail:Y.isCompletionLabelDetailsSupported?null==(t=A.labelDetails)?void 0:t.description:A.detail,type:null==(r=Object.entries(eL.CompletionItemKind).find(function(e){var n=(0,g._)(e,2),t=(n[0],n[1]);return A.kind===t}))?void 0:r[0].toLowerCase(),commitCharacters:n.state.facet(iF)?null!=(y=null!=(f=null!=(p=A.commitCharacters)?p:i.commitCharacters)?f:null==(u=o.getServerCapabilities())||null==(s=u.completionProvider)?void 0:s.allCommitCharacters)?y:[]:void 0,boost:x},ot.set(C,e),C.apply=function(n,t,r,i){var s=function(e){var t=u?l:n.state.doc,r={from:(0,eA.TU)(t,e.start),to:(0,eA.TU)(t,e.end)};return u&&(r.from=u.mapPos(r.from),r.to=u.mapPos(r.to)),r};if(b){var u=c(),d=null!=(f=null==(p=e.resolved)?void 0:p.additionalTextEdits)?f:A.additionalTextEdits;if(A.insertTextFormat===eL.InsertTextFormat.Snippet){var p,f,w,y,Y,x=null;d&&(x={changes:d.map(function(e){return(0,m._)((0,h._)({},s(e.range)),{insert:e.newText})})});var C=new iK(null!=(Y=null!=(y=null==(w=A.textEdit)?void 0:w.newText)?y:A.insertText)?Y:A.label);if(A.textEdit&&"range"in A.textEdit){var _=i,k=s(A.textEdit.range);r=k.from,i=Math.max(i=k.to,_)}var E=x?[x,C.apply({view:n,from:r,to:i,path:b,completion:t})]:[C.apply({view:n,from:r,to:i,path:b,completion:t})];n.dispatch.apply(n,(0,v._)(E)),a("completion-accepted",b,{language:S,completionKind:A.kind,insertTextFormat:A.insertTextFormat});return}var R=[];if(A.textEdit){if(!("range"in A.textEdit))return;var I=s(A.textEdit.range);R.push((0,m._)((0,h._)({},I),{to:Math.max(I.to,n.state.selection.main.to),insert:A.textEdit.newText}))}else{var F=A.insertText||A.label,T=n.state.wordAt(i);T&&T.to>i&&F.includes(n.state.doc.sliceString(i,T.to))&&(i=T.to),R.push({from:r,to:i,insert:F})}var P=(0,g._)(R,1)[0],L="";null==d||d.forEach(function(e){var n=s(e.range);"from"in P&&n.from===P.from&&(L=e.newText),R.push((0,m._)((0,h._)({},n),{insert:e.newText}))});var U=i-r;n.state.selection.ranges.forEach(function(e){if(e!==n.state.selection.main){if(!("insert"in P)||!P.insert)throw Error("Expected insert in mainChange");var t=e.from-U,r=L+P.insert;R.push({from:t,to:e.to,insert:r})}});var N=D.VR.of(R.map(function(e){return"from"in e&&void 0!==e.to?(0,m._)((0,h._)({},e),{from:Math.min(e.from,e.to),to:Math.max(e.from,e.to)}):e}),n.state.doc.length);a("completion-accepted",b,{language:S,completionKind:A.kind,insertTextFormat:A.insertTextFormat}),n.dispatch({annotations:iR.rK.of(t),changes:N,selection:D.OF.create(n.state.selection.ranges.map(function(e){return e.map(N,0)}),n.state.selection.mainIndex)}),A.command&&o.request.executeCommand(A.command.command,A.command.arguments)}},Y.isCompletionItemResolveSupported&&(C.info=(0,ef._)(function(){var n,t,r,i,l,s,c;return(0,em.YH)(this,function(u){switch(u.label){case 0:if(t=null!=(n=e.resolved)?n:null)return[3,2];return[4,o.request.resolveCompletionItem(A)];case 1:if(t="result"in(r=u.sent())?r.result:null,r.cancelled||null===t)return[2,null];e.resolved=t,u.label=2;case 2:if(i=Math.floor(0x7fffffff*Math.random()),l=[],b&&t.detail&&t.detail!==A.detail&&t.detail!==A.label&&(c=["```"+((s=b.lastIndexOf("."))>=0?b.slice(s+1):"md"),t.detail,"```"].join("\n"),l.push((0,w.Y)(on,{className:t.documentation?"lsp-completion-detail":void 0,content:{value:c,kind:"markdown"}},"".concat(i,"-detail")))),t.documentation&&l.push((0,w.Y)(on,{content:t.documentation},"".concat(i,"-documentation"))),0===l.length)return[2,null];return a("resolution-presented",b,{language:S,resolutionSource:"request",completionKind:A.kind}),[2,{dom:(0,tB.J)((0,w.Y)("div",{children:l}))}]}})})),C}return G&&(V=G.from),u.length&&a("completion-options-presented",t.state.facet(eb.Md),{language:null!=(n=(0,iI.A)(t.state))?n:"unknown"}),{from:V,options:u.map(function(e){return j(e,t)}),validFor:z,update:function(e,n,t,r){return(0,m._)((0,h._)({},e),{options:e.options.map(function(e){var n,t=null!=(n=ot.get(e))?n:null;return t?j(t,r):e})})},map:function(e,n){return s=s?s.composeDesc(n):n,e}}}({context:n,startingDoc:s,items:d,itemDefaults:f,client:e,trackCompletion:r})]}})})).apply(this,arguments)}return function(e){return i.apply(this,arguments)}}(e))})})],function(e){var n={current:new Map};function t(){return(t=(0,ef._)(function(t,i){var o,a,l,s,c,u;return(0,em.YH)(this,function(d){switch(d.label){case 0:if(!(a=t.facet(eb.Md))||(l=t.field(r,!1),s=t.field(oW,!1),!(c=e.filter(function(e){var n,t,r,i=null!=(r=null==(t=e.getServerCapabilities())||null==(n=t.signatureHelpProvider)?void 0:n.triggerCharacters)?r:[];return!!i.length&&(!!l||!!s&&!!i.includes(s))&&!0})).length))return[2,null];return[4,function(e,n,t,r,i){return oj.apply(this,arguments)}(t,i,c,a,n)];case 1:if(!(null==(u=d.sent())||null==(o=u.signatures)?void 0:o.length))return[2,null];return[2,u]}})})).apply(this,arguments)}var r=D.sU.define({create:function(){return null},update:function(e,n){return n.isUserEvent("select.pointer")?null:(e&&n.newSelection.main.from!==e.pos&&(e=(0,m._)((0,h._)({},e),{pos:n.newSelection.main.from})),(0,eY.C)(n,oH.effect,function(t){var r=t.value;e=r?{pos:n.newSelection.main.from,help:r,index:0}:null}),(0,eY.C)(n,oz,function(n){var t=n.value;if(e){var r=e.help.signatures.length,i=(r+e.index+t)%r;e=i>=e.help.signatures.length||i<0?null:(0,m._)((0,h._)({},e),{index:i})}}),e)},provide:function(e){var n=function(n){var t=n.state.field(e);if(!t)throw Error("expected nonnull field");var r=oG.create({help:t.help,index:t.index});return{dom:r,update:function(n){oG.update(r,function(r){var i=n.state.field(e);return i&&i!==t?{help:i.help,index:i.index}:r})}}};return ew.DK.compute([e],function(t){var r=t.field(e);return r?{pos:r.pos,create:n,above:!0}:null})}}),i=ew.Z9.define(function(){var n,r=G()((n=(0,ef._)(function(e){var n,r,i;return(0,em.YH)(this,function(o){switch(o.label){case 0:if(!(n=e.state.selection.main).empty)return[3,2];return r=e.state.field(oH.state,!1),[4,function(e,n){return t.apply(this,arguments)}(e.state,n.from)];case 1:(i=o.sent())&&!r&&(0,iR.N)(e),e.dispatch({effects:oH.effect.of(i)}),o.label=2;case 2:return[2]}})}),function(e){return n.apply(this,arguments)}),0);return{update:function(n){e.some(function(e){return(0,eC.A)(e).isSignatureHelpSupported})&&n.selectionSet&&n.state.selection.main.empty&&r(n.view)}}});function o(e,n){var t=e.state.field(oH.state,!1);return"active"!==(0,iR.DH)(e.state)&&null!=t&&("navigate"!==n||t.signatures.length>1)}var a=function(e){return function(n){return!!o(n,"navigate")&&(n.dispatch({effects:oz.of(e)}),!0)}},l=[{key:"ArrowDown",run:a(1)},{key:"ArrowUp",run:a(-1)},{key:"Escape",run:function(e){return!!o(e,"dismiss")&&(e.dispatch({effects:oH.effect.of(null)}),!0)}}];return[r,oH.state,oW,i,D.Nb.high(ew.w4.of(l))]}(n),(l=function(e){var n,t=null;return(0,ew.Ux)((n=(0,ef._)(function(n,r){var i,o,a,l,s,c;return(0,em.YH)(this,function(u){switch(u.label){case 0:if(n.state.facet(oO.f)||!(0,eC.A)(e).isHoverSupported||!(i=n.state.facet(eb.Md)))return[2,null];o=(0,eA.Z3)(n.state.doc,r);try{a=n.state.wordAt(r)}catch(e){return[2,null]}if(t){if(t.from===(null==a?void 0:a.from)&&t.to===(null==a?void 0:a.to))return[2,null];e.notify.cancelRequest(t.id)}return t={id:l=e.generateId(),from:null==a?void 0:a.from,to:null==a?void 0:a.to},[4,e.request.hover(i,o,{id:l})];case 1:if(s=u.sent(),t=null,"error"in s||null===(c=s.result))return[2,null];return[2,function(e){var n,t,r=e.hover,i=e.state,o=e.offset;if((Array.isArray(r.contents)||"string"==typeof r.contents)&&0===r.contents.length)return null;var a="",l=i.doc;if(r.range)n=(0,eA.TU)(l,r.range.start),t=(0,eA.TU)(l,r.range.end),a=l.sliceString(n,t);else if(t=void 0,(n=o)<=i.doc.length){var s=i.wordAt(n);s?(a=l.sliceString(s.from,s.to),n=Math.min(n,s.from),t=s.to):a=l.sliceString(n,n+1)}return{pos:n,end:t,create:function(e){var n=(0,tB.J)((0,w.Y)(oN,{content:r.contents,textHovered:a}));return n.classList.add("hover-tooltip"),n.style.padding="0",{dom:n,mount:function(){var n;n=function(){(0,ew.Pq)(e)},[0,50,200,1e3].forEach(function(e){return setTimeout(n,e)})}}},above:!0}}({hover:c,offset:r,state:n.state})]}})}),function(e,t){return n.apply(this,arguments)}),{hideOn:function(e){return!e.annotation(D.ZX.remote)&&!!(e.isUserEvent("input")||e.isUserEvent("delete")||e.isUserEvent("select")||e.state.facet(oO.f))},hoverTime:0})},[D.Nb.highest(n.map(function(e){return l(e)})),ew.Lz.domEventObservers({mousedown:function(e,n){!(e.target instanceof HTMLElement&&e.target.matches(".cm-tooltip *"))&&(0,ew.n6)(n.state)&&n.dispatch({effects:ew.vo})},keydown:function(e,n){"Escape"===e.key&&(0,ew.n6)(n.state)&&n.dispatch({effects:ew.vo})},scroll:function(e,n){(0,ew.n6)(n.state)&&n.dispatch({effects:ew.vo})}})]),(0,oh.Qb)(n,e),(0,oM.Of)({lspClients:n}),(s=D.Pe.define(),c=D.Pe.define(),[ew.Lz.updateListener.of((u=(0,ef._)(function(e){var t,r,i,o,a,l,u,d,p,f,g,w,y,b,S,Y,A,x,C,_,k,D,E,R,I,F,T,P,L,U,N,O,M;return(0,em.YH)(this,function(B){switch(B.label){case 0:if(!n.some(function(e){var n=(0,eC.A)(e);return n.isFindReferencesSupported||n.isFindDefinitionSupported}))return[2];t=null,r=!0,i=!1,o=void 0;try{for(a=e.transactions[Symbol.iterator]();!(r=(l=a.next()).done);r=!0){u=l.value,d=!0,p=!1,f=void 0;try{for(g=u.effects[Symbol.iterator]();!(d=(w=g.next()).done);d=!0)(y=w.value).is(og.x)&&(t=y.value)}catch(e){p=!0,f=e}finally{try{d||null==g.return||g.return()}finally{if(p)throw f}}}}catch(e){i=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}if(!t||!(b=e.view.state.facet(eb.Md)))return[2];S=e.state.doc,Y=(0,eA.Z3)(S,t),A=[],x=!0,C=!1,_=void 0;try{for(k=function(){var e=E.value,n=(0,eC.A)(e);n.isFindDefinitionSupported&&A.push(e.request.findDefinitions(b,Y).then(function(n){return{client:e,response:n,type:"definition"}})),n.isFindReferencesSupported&&A.push(e.request.findReferences(b,Y,{includeDeclaration:!1}).then(function(n){return{client:e,response:n,type:"references"}}))},D=n[Symbol.iterator]();!(x=(E=D.next()).done);x=!0)k()}catch(e){C=!0,_=e}finally{try{x||null==D.return||D.return()}finally{if(C)throw _}}return R=Promise.all(A),(0,om.o8)(e.view,R),[4,R];case 1:I=B.sent(),F=[],T=[],P=!0,L=!1,U=void 0;try{for(N=function(){var e=M.value,n=e.client,t=e.response,r=e.type;if("error"in t)throw Error("Something went wrong fetching references: ".concat(t.error.message));var i=(0,oF.U)(t.result);if(!i)return"continue";"definition"===r&&F.push.apply(F,(0,v._)(i.map(function(e){return(0,m._)((0,h._)({},e),{path:n.documentUriToPath(e.uri)})}))),"references"===r&&T.push.apply(T,(0,v._)(i.map(function(e){return(0,m._)((0,h._)({},e),{path:n.documentUriToPath(e.uri)})})))},O=I[Symbol.iterator]();!(P=(M=O.next()).done);P=!0)N()}catch(e){L=!0,U=e}finally{try{P||null==O.return||O.return()}finally{if(L)throw U}}if(!F.length&&!T.length)return(0,nU.A)(e.view,{message:"No references found",offset:t}),e.view.dispatch({effects:c.of(null)}),[2];return e.view.dispatch({effects:s.of({references:T,definitions:F})}),[2]}})}),function(e){return u.apply(this,arguments)})),D.sU.define({create:function(){return null},update:function(e,n){var t=e,r=!0,i=!1,o=void 0;try{for(var a,l=n.effects[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var u=a.value;u.is(s)&&(t=u.value),u.is(c)&&(t=null)}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return t},provide:function(e){return[ew.w4.of([{key:"Escape",run:function(n){return!!n.state.field(e)&&(n.dispatch({effects:c.of(null)}),!0)}}]),ew.DK.compute([e],function(n){var t=n.field(e),r=n.facet(eb.Md);if(!t)return null;var i=n.selection.asSingle().main;return{pos:i.from,end:i.to,create:function(e){var n=(0,tB.J)((0,w.Y)("div",{children:(0,w.Y)(oE,(0,m._)((0,h._)({},t),{onClose:function(){e.dispatch({effects:c.of(null)})},jumpToPosition:function(n){if(n.path!==r)return void(0,t8.Tq)(e.state,{path:n,secondary:!1});var t=n.line,i=n.col;(0,i_.$)({view:e,line:t,col:i}),e.focus()}}))}));return n.classList.add("replit-tooltip"),n.style.padding="0",n.style.overflow="scroll",{dom:n}}}})]}})]),(0,oB.q)(e,n,r)),d)}($,J,j,ee))},[J,j,$,en,ee]),er=(0,y.useMemo)(function(){return new ey.L(function(){return eS.X.of(J.map(function(e){return(0,eC.A)(e)}))})},[J]),(0,y.useEffect)(function(){return!J.length||en?et.set(null):(0,n5.xW)(J.map(function(e){return e.onServerCapabilitiesChange(function(){er.set(eS.X.of(J.map(function(e){return(0,eC.A)(e)})))})}))},[er,J,et,en]),[er.extension,et.extension,o7.use(Q.acceptSuggestionOnCommitCharacter),o9.use(Q.codeActionsOnSave),ae.use(Q.codeIntelligence),o8.use(Q.semanticTokens&&X?J:null)]);(0,i_.A)({filePath:nb,view:nH,isLoading:nJ,deeplink:nC,onDeeplinkUpdated:nk});var n9=(eo=(ei={view:nH,filePath:nb}).view,ea=ei.filePath,el=(0,n6.A)().fs,(0,g._)((0,c3.H)({accept:[c8.N.Code,c6.FILE],drop:function(e,n){if(eo){var t=n.getClientOffset(),r=t?eo.posAtCoords(t):null;if(null!==r){var i=function(e){eo.focus(),eo.dispatch({changes:{from:r,insert:e},selection:{anchor:r,head:r+e.length}})};if(e.type===c8.N.Code)i(e.code);else{var o=!0,a=!1,l=void 0;try{for(var s,c=e.files[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var u=s.value;ea&&(0,N.e$)(ea)&&lp(u,el,ea).then(i)}}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}}}}}}),2)[1]),te=(0,n7.A)({filePath:nb}),tn=(ec=(es={view:nH,filePath:nb,isLoading:nJ,enable:nV}).view,eu=es.filePath,ed=es.isLoading,ep=es.enable,eg=(0,uP.Ln)(),(0,y.useEffect)(function(){ec&&eg&&ec.dispatch({effects:[cV.Ky.of(eg),cV.Mt.of(eg)]})},[ec,eg]),ev=(0,uQ.D)().theme,eT=(eF=(0,g._)((0,y.useState)([eN.LU.accentPrimaryDimmest,eN.LU.accentPrimaryDimmer]),2))[0],eP=eF[1],(0,y.useEffect)(function(){var e=un(ev.values.global.accentPrimaryDimmest);eP(["rgba(".concat(e.join(","),", 0.5)"),eN.LU.accentPrimaryDimmer])},[ev]),eU=ui(eu,ed,!0,ep),eO=(0,n6.A)().fs,eB=(eM=(0,ue.ah)(eu)).contentRef,eH=eM.loadedFile,eW=eM.transformSelectionRef,(0,y.useEffect)(function(){var e=!1,n=eW.current,t=eB.current;if(eH&&n&&t&&!ed&&ec){var r=Object.values(eU);if(0===r.length)return void ec.dispatch({effects:cV.IF.of({})});Promise.all(r.map(function(e){return(0,ue.gu)({anchor:e,version:eO.getOTVersion(eu),transformSelection:n,content:t})})).then(function(n){if(!e){var t=n.filter(function(e){return!!e}).map(function(e){if(!e)throw Error("expected resolved anchor");return(0,h._)({},e.anchor,null==e?void 0:e.newSelection)});return ec.dispatch({effects:cV.IF.of(t.reduce(function(e,n){return e[n.id]=n,e},{}))}),function(){e=!0,ec&&ec.dispatch({effects:cV.IF.of({})})}}})}},[eU,ec,eH,eO,eW,eB,eu,ed]),u0.use(ep,eT));ej=(eG={view:nH,filePath:nb}).view,eZ=eG.filePath,eq=(0,nP.useRouter)(),eK=(0,B.Po)(eq),e$=(0,y.useRef)({revisionId:(0,oZ.A)(),textEditorState:sK(eZ),hasGhostwriterSuggestion:!1}),eJ=(0,y.useRef)(eZ),eQ=null!=(eV=null==ej?void 0:ej.plugin(U.Pb))?eV:null,(0,y.useEffect)(function(){if(eK&&ej&&eQ&&!eQ.destroyed){var e=function(e){sJ(e$.current,e.messageId)},n=function(n){s1(eZ,eJ.current,ej,e$.current,n)?e(n):(0,sZ.Cf)(n.messageId)},t=function(n){s1(eZ,eJ.current,ej,e$.current,n)?e(n):(0,sZ.Cf)(n.messageId)},r=function(r){try{var i=r.data;if(!(0,sj.F5)(i)||i.protocolVersion!==sj.V2)return;var o=i.payload;i.messageDirection===sj.SU.TO_NATIVE&&(0,sj.Yf)(o)&&(eJ.current=o.activePaneFilePath),(0,sZ.Vd)(r,function(r){var o=r.type;switch(o){case sj.tF.TEXT_EDITOR_STATE_REQUEST:e(i);break;case sj.tF.REQUEST_SET_SELECTION:case sj.tF.REQUEST_REPLACE_SELECTION:case sj.tF.REQUEST_SET_TEXT:case sj.tF.REQUEST_INSERT_TEXT:case sj.tF.REQUEST_PASTE_TEXT:n(i);break;case sj.tF.TEXT_EDITOR_REQUEST_ACTION:t(i);break;default:(0,sV.A)(o)}})}catch(e){throw Error("Invalid message: ".concat(e))}};window.addEventListener("message",r),e$.current={revisionId:(0,oZ.A)(),textEditorState:s$(eZ,ej),hasGhostwriterSuggestion:(0,rb.R)(ej.state)},sJ(e$.current);var i=!1,o=!1,a=eQ.bind({changed:function(e){var n;return e.docChanged?(i=!0,!0):!!e.selectionSet||!!e.focusChanged||(null==(n=e$.current)?void 0:n.hasGhostwriterSuggestion)!==(0,rb.R)(e.state)},callback:function(){var e=i?(0,oZ.A)():e$.current.revisionId;i=!1,e$.current={revisionId:e,textEditorState:s$(eZ,ej),hasGhostwriterSuggestion:(0,rb.R)(ej.state)},sJ(e$.current)},destroy:function(){window.removeEventListener("message",r),o||(sQ(eZ),o=!0)}});return function(){window.removeEventListener("message",r),a(),o||(sQ(eZ),o=!0)}}},[ej,eZ,eK,eQ]);var tt=u8(nb).isUnmerged,tr=(e1=(e0={filePath:nb,enableConflicts:!0===tt}).filePath,e2=e0.enableConflicts,e4=(0,ix._P)({controlName:"flag-editor-git-conflict-markers",logFlagToAnalytics:!1}),e5=(0,n6.A)().git,iC.use(e5,void 0===e1?null:e1,!(void 0!==e2&&e2)||!e4)),ti=(0,B.m5)(),to=sa.use(ti),ta=lm.use(nR),tl=st.use(ti),ts=sv.use(nT.rulers),tc=(0,uQ.D)(),tu=ai.use(ti,nT.minimapDisplay,tc),td=sy.use(ti,tc),tp=_.EI.use(nF),tf=(e3={filePath:nb},e6=(0,n6.A)().container,e8=(0,n1.I)(),e7=(0,O.g)("codeIntelligence").preferences,ne=n3(e9=(0,n4.A)(e3.filePath)),n8.use(e8,e6,e9,ne,e7.codeIntelligence,e3.filePath)),th=n$.use(nT.showLeadingWhitespace,nT.showEnclosedWhitespace,nT.showTrailingWhitespace,nT.showSelectedWhitespace),tm=(0,nM.T)({analyticsSurface:"workspace_editor"}),tg=cx({path:nb}),tv=c_({path:nb}),tw=cC({path:nb}),ty=(0,y.useCallback)(function(){nH&&tg(nH,"shortcut")},[nH,tg]),tb=(nl=(nn={isMobile:ti,generateCode:tg,filePath:nb}).isMobile,ns=nn.filePath,nc=nn.generateCode,nu=(0,rx.Jn)(rY.G.id),nd=null!=(no=null==(nt=nQ.Jh.from(ns))?void 0:nt.id)?no:null,np=(0,rB.f)().isTeamWithAiDisabled,nh=(null!=(na=null==(nf=cL({variables:{language:nd},skip:!nd}).data)||null==(ni=nf.languageExamples)||null==(nr=ni.examples)?void 0:nr.length)?na:0)>=1,nm=(0,y.useMemo)(function(){var e=[];return(0,N.e$)(ns)||np||e.push({icon:(0,w.Y)(cg.A,{}),text:"Generate Code with AI",shortcut:nl?void 0:nu,onClick:function(e){cX({cta:"generate",version:"new"}),nc(e,"shortcut")}}),nd&&nh&&e.push({icon:(0,w.Y)(cS.A,{}),text:"Start with a code example",onClick:function(e){cX({cta:"examples",version:"new"}),e.dispatch({effects:c0.of({language:nd,filePath:ns})})}}),e.push({icon:(0,w.Y)(cQ.A,{}),text:"Add powerful Integrations",onClick:function(e){(0,t8.zw)(e.state,{pane:{type:"integrations"},secondary:!0}),cX({cta:"integrations",version:"new"}),(0,eX.u4)(eX.AZ.TOOL_OPENED,{source:"fileEditorEmptyState",tool:"integrations"})}}),e},[ns,np,nd,nh,nl,nu,nc]),[c$.use(nm),c4]),tS=(ng=({onGenerateCode:ty,onReplyInChat:(0,y.useCallback)(function(){nz({type:"ghostwriterChat"})},[nz])}).onGenerateCode,nv=(0,rB.f)().isTeamWithAiDisabled,nw=rE.use(ng),(0,y.useMemo)(function(){var e=[rW,tZ.z,tZ.Q,rG,rV,t$,rj,t1,rZ,nw];return nv||e.push(nw),e},[nw,nv])),tY=(0,c9.EF)(),tA=tY.onContextMenu,tx=tY.closeContextMenu,tC=tY.openContextMenu,t_=tY.isVisible,tk=(0,y.useCallback)(function(e){nH&&(0,ew.TS)(nH,e,"context-menu")&&(tx(),e.stopPropagation(),e.preventDefault())},[tx,nH]),tD=function(e){var n,t,r,i,o,a,l,s,c,u,d,p,f,h,m,g,v,b=e.path,S=e.view,Y=(n=cx({path:b}),t=cC({path:b}),r=c_({path:b}),i=(0,rx.Jn)(rY.G.id),(0,y.useCallback)(function(e){var o=[],a=!e.state.selection.main.empty;return n&&!a&&o.push(cY({label:"Generate with "+z.BP,icon:(0,w.Y)(cg.A,{color:eN.LU.tealStronger}),keyboardShortcut:i,run:function(){n(e,"action_menu")},dataCy:"context-menu-GenerateCode"})),a&&(o.push(cY({label:"Explain with "+z.BP,icon:(0,w.Y)(cm.A,{color:eN.LU.tealStronger}),dataCy:"context-menu-ExplainCode",run:function(){r(e,"action_menu")}})),o.push(cY({label:"Modify with "+z.BP,icon:(0,w.Y)(ch,{color:eN.LU.tealStronger}),keyboardShortcut:i,dataCy:"context-menu-TransformCode",run:function(){t(e,"action_menu")}}))),o},[n,t,r,i])),A=(o=(0,rx.Jn)("editor.action.startThread"),(0,y.useCallback)(function(e){var n=[];return n.push(cY({label:"Start thread",icon:(0,w.Y)(rn.A,{}),keyboardShortcut:o,run:function(){(0,s8.B)(e)}})),n},[o])),x=(0,y.useCallback)(function(e){var n=[cY({label:"Copy link to position",icon:(0,w.Y)(cw.A,{}),run:function(){var n=(0,eA.Z3)(e.state.doc,e.state.selection.main.head),t=n.line,r=n.character,i=(0,ci.Ax)({path:b,line:t+1,col:r});(0,s6.default)(i)}}),cY({label:"Copy",icon:(0,w.Y)(cu.A,{}),keyboardShortcut:(0,cr.FM)({cmdOrCtrl:!0,key:"c"}),run:function(){var n=(0,s5.i)(e.state).text;(0,s6.default)(n)}}),cY({label:"Cut",icon:(0,w.Y)(cd,{}),keyboardShortcut:(0,cr.FM)({cmdOrCtrl:!0,key:"x"}),run:function(){var n=(0,s5.i)(e.state),t=n.text,r=n.ranges;(0,s6.default)(t),e.state.readOnly||e.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"})}})];return window.navigator.clipboard&&"readText"in window.navigator.clipboard&&n.push(cY({label:"Paste",icon:(0,w.Y)(cs.A,{}),keyboardShortcut:(0,cr.FM)({cmdOrCtrl:!0,key:"v"}),run:function(){return(0,ef._)(function(){var n,t;return(0,em.YH)(this,function(r){switch(r.label){case 0:n="",r.label=1;case 1:return r.trys.push([1,3,,4]),[4,window.navigator.clipboard.readText()];case 2:return n=r.sent(),[3,4];case 3:return t=r.sent(),id.vF.error("CodeMirror context menu paste failed",{message:t.message}),[2];case 4:return lf({filePath:b,view:e,clipboardText:n}),[2]}})})()}})),n},[b]),C=(l=n3(a=(0,n4.A)(b)),s=(0,rx.Jn)("editor.action.goToDefinition"),c=(0,rx.Jn)("editor.action.goToTypeDefinition"),u=(0,rx.Jn)("editor.action.goToImplementation"),d=(0,rx.Jn)("editor.action.goToReferences"),p=(0,rx.Jn)("editor.selection.allOccurrences"),f=(0,rx.Jn)("editor.action.sourceActions"),h=(0,rx.Jn)("editor.action.formatDocument"),m=(0,rx.Jn)("editor.action.codeActions"),g=(0,rx.Jn)("editor.action.renameSymbol"),(0,y.useCallback)(function(e){var n=[],t=l&&a.length;return t&&l.isFindDefinitionSupported&&n.push(cY({label:"Go to definition",icon:(0,w.Y)(cf.A,{}),dataCy:"context-menu-JumpToDefinition",run:function(n){(0,oM.Fn)(e,n)},keyboardShortcut:s})),t&&l.isFindTypeDefinitionSupported&&n.push(cY({label:"Go to type definition",icon:(0,w.Y)(cl.A,{}),run:function(){(0,oM.fS)(e)},keyboardShortcut:c})),t&&l.isFindImplementationSupported&&n.push(cY({label:"Go to implementation",icon:(0,w.Y)(cS.A,{}),run:function(){(0,oM.M9)(e)},keyboardShortcut:u})),t&&(l.isFindDefinitionSupported||l.isFindReferencesSupported)&&n.push(cY({label:"Show references",icon:(0,w.Y)(ca,{}),keyboardShortcut:d,run:function(){(0,og.y)(e)}})),n.push(cY({label:"Find in Repl",icon:(0,w.Y)(cb.A,{}),run:function(){var n=(0,s5.i)(e.state).text;(0,t8.zw)(e.state,{pane:{type:"searchReplace",data:{initialQuery:n}}})}})),t&&l.isRenameSupported&&n.push(cY({label:"Rename all occurrences",icon:(0,w.Y)(cp.A,{}),keyboardShortcut:g,run:function(){(0,oB.C)(e)}})),e.state.facet(_.hb)&&n.push(cY({label:"Format document",icon:(0,w.Y)(n_.A,{}),keyboardShortcut:h,run:function(){(0,_.BD)(e)}})),!e.state.selection.main.empty&&e.state.facet(s4.Aq)&&n.push(cY({label:"Format selection",icon:(0,w.Y)(n_.A,{}),run:function(){(0,_.vl)(e)}})),n.push(cY({label:"Select all occurrences",icon:(0,w.Y)(cc,{}),keyboardShortcut:p,run:function(){(0,s8.G)(e)}})),t&&l.isCodeActionsSupported&&(l.isSourceActionsSupported&&n.push(cY({label:"Source actions",icon:(0,w.Y)(ez.A,{}),keyboardShortcut:f,run:function(){(0,oh._H)(e)}})),n.push(cY({label:"More actions",icon:(0,w.Y)(cv.A,{}),keyboardShortcut:m,run:function(){(0,oh.w1)(e,{force:!0})}}))),n},[l,a,p,f,s,c,u,d,g,h,m])),k=(v=(0,cn.Zp)(ct.P.EditorContextMenu),(0,y.useCallback)(function(e){var n=[];return n.push({data:{type:"group",key:"extensions"},commands:(0,ef._)(function(){var n;return(0,em.YH)(this,function(t){switch(t.label){case 0:var r;return n=[{data:{filePath:e.filePath,selection:e.view.state.selection.toJSON()}}],[4,Promise.all(v.map((r=(0,ef._)(function(e){var t;return(0,em.YH)(this,function(r){switch(r.label){case 0:return[4,e.create({path:n})];case 1:if(!(t=r.sent()))return[2,null];return[2,(0,ce.l)(t,{path:n})]}})}),function(e){return r.apply(this,arguments)})))];case 1:return[2,t.sent().filter(Boolean)]}})})}),n},[v]));return(0,y.useCallback)(function(){var e=S?[{data:{type:"context",label:z.BP,icon:(0,w.Y)(co.A,{})},commands:function(){return Y(S)}},{data:{type:"context",label:"Code actions",icon:(0,w.Y)(cv.A,{})},commands:function(){return C(S)}},{data:{type:"context",label:"Social",icon:(0,w.Y)(rn.A,{})},commands:function(){return A(S)}},{data:{type:"context",label:"Clipboard",icon:(0,w.Y)(cs.A,{})},commands:function(){return x(S)}},{data:{type:"context",label:"Extensions",icon:(0,w.Y)(cy.A,{})},commands:function(){return k({view:S,filePath:b})}}]:[];return{data:{type:"context",label:"Search actions",icon:(0,w.Y)(cb.A,{})},commands:function(){return e}}},[S,Y,C,A,x,b,k])}({path:nb,view:nH}),tE=(0,y.useCallback)(function(e){tA(e,{command:tD(),width:275,onKeyDownHandler:tk})},[tD,tA,tk]),tR=(0,y.useCallback)(function(e,n){tC({target:e,command:[tD(),n],width:275,onKeyDownHandler:tk})},[tD,tk,tC]),tI=ck.use(ti,t_,tE),tF=cD.a.use(tR),tT=(0,y.useCallback)(function(e){tC({target:{x:e.right-275,y:e.top},width:275,command:tD(),onKeyDownHandler:tk})},[tD,tk,tC]),tP=(0,rY.C)({editCode:tw,explainCode:tv,generateCode:tg,onMoreClick:tT}),tL=(ny=(0,l9.g)(),se.use(ny)),tU=u6.use(),tN=(0,t8.tT)(nD),tO=nO.use(nA);return(0,w.Y)("div",{css:c7.mV,"data-cy":nJ?"loading-workspace-cm-editor":"workspace-cm-editor-".concat(nb),children:(0,w.Y)(sr.Ay,{ref:nB,elementRef:n9,css:c7.$1,filePath:nb,hideTooltips:nS,readOnly:nY,extensions:[tI,tF,nX,n0,n2,tb,tU,to,nG,tl,tr,td,tu,lh,ta,aZ,tS,tL,sz,ts,th,tp,tf,P,te,tn,sP,sd,ti?[]:tP,nq,ik.f,tN,tm,tO],onException:function(e){var n,t={filePath:nb,cursorPosition:JSON.stringify(null==nj||null==(n=nj.get(nx.J0))?void 0:n.position),fileVersion:nZ({filePath:nb})};if(nH){var r=nH.plugin(aZ),i=null==r?void 0:r.logs();null==r||r.flush(),t.domText=nH.contentDOM.innerText,t.keystrokes=JSON.stringify(i),t.selection=JSON.stringify(nH.state.selection.main.toJSON()),t.updateDoc=nH.state.doc.sliceString(0)}(0,s2.Q)(e,{tags:{origin:"CodemirrorEditor: useEditor/onException",codemirror:!0},extras:t})},noHistory:!0})})}var u9=t(58912),de=t(56962),dn=t(61135),dt=t(57679),dr=t(66403),di=t(75414),da=t(23499),dl=(0,Y.eU)(0),ds=(0,Y.eU)(new Map([["normal",[]],["compact",[]]])),dc=(0,Y.eU)(null,function(e,n,t){var r=e(df);n(ds,function(e){return(0,t2.jM)(e,function(e){var n=e.get(r);if(!n)throw Error("Expect width for: "+r);n[t.index]=t.width})})}),du=(0,Y.eU)(null,function(e,n,t){n(ds,function(e){return(0,t2.jM)(e,function(e){var n=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0)(0,g._)(o.value,2)[1].slice(0,t)}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}})})}),dd=(0,Y.eU)(function(e){var n=new Map([["normal",0],["compact",0]]),t=!0,r=!1,i=void 0;try{for(var o,a=e(ds)[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=(0,g._)(o.value,2),s=l[0],c=l[1],u=0,d=!0,p=!1,f=void 0;try{for(var h,m=c[Symbol.iterator]();!(d=(h=m.next()).done);d=!0){var v=h.value;void 0!==v&&(u+=v)}}catch(e){p=!0,f=e}finally{try{d||null==m.return||m.return()}finally{if(p)throw f}}n.set(s,u)}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n}),dp=(0,Y.eU)(function(e){if("normal"===e(df))return null;var n=e(ds).get("compact");if(!n)return null;var t=e(dl)-24,r=0,i=!0,o=!1,a=void 0;try{for(var l,s=n[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=l.value;if(void 0!==c){if((t-=c)>0){r++;continue}return r}}}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}return null}),df=(0,Y.eU)(function(e){var n,t=e(dl);return(null!=(n=e(dd).get("normal"))?n:0)>t?"compact":"normal"}),dh=(0,$.x)({item:[J.wp.viewStyle,e5.b.listItem,J.wp.p(6),J.wp.rowWithGap(4),J.wp.align.center,{fontSize:eN.LU.fontSizeSmall}]});function dm(e){var n=(0,g._)((0,y.useState)(null),2),t=n[0],r=n[1],i=null!==t&&(null==(c=e.items[t])?void 0:c.popover);if(i)return(0,w.Y)(w.FK,{children:i});var o=[],a=!0,l=!1,s=void 0;try{for(var c,u,d=e.items[Symbol.iterator]();!(a=(u=d.next()).done);a=!0){var p=u.value;p.onClick||p.popover||o.push(p.key)}}catch(e){l=!0,s=e}finally{try{a||null==d.return||d.return()}finally{if(l)throw s}}return(0,w.Y)(de.W1,{disabledKeys:o,onAction:function(n){var t=!0,i=!1,o=void 0;try{for(var a,l=e.items[Symbol.iterator]();!(t=(a=l.next()).done);t=!0){var s=a.value;if(s.key===n){if(s.onClick){s.onClick();break}s.popover&&r(e.items.indexOf(s));break}}}catch(e){i=!0,o=e}finally{try{t||null==l.return||l.return()}finally{if(i)throw o}}},children:e.items.map(function(e){return(0,w.Y)(de.Dr,{id:e.key,css:dh.item,children:(0,w.Y)(dg.Provider,{value:function(){},children:(0,y.cloneElement)(e.item,{presentation:"overflowMenu"})})},e.key)})})}var dg=(0,y.createContext)(function(e){});function dv(){return(0,y.useContext)(dg)}var dw=(0,$.x)({button:[J.wp.viewStyle,J.wp.reset.button,J.wp.rowWithGap(4),J.wp.center,J.wp.color.foregroundDimmest,J.wp.hover([J.wp.color.foregroundDefault]),J.wp.height("100%"),{fontSize:12,"&:has(*)":[J.wp.px(4),e5.b.nofill,J.wp.borderRadius(0)]}],tooltip:[J.wp.backgroundColor.backgroundHighest,J.wp.borderRadius(4),J.wp.color.foregroundDimmer,J.wp.p(4),J.wp.border({color:eN.LU.outlineDefault}),{fontSize:12}]});function dy(e){var n=(0,rd.A)(function(n){return e.onWidth(n.width)}),t=(0,g._)((0,y.useState)(null),2),r=t[0],i=t[1];return(0,w.Y)(Q.S,{innerRef:n,children:(0,w.FD)(dn.k$,{isDisabled:null==r||e.hidden,children:[(0,w.Y)(dt.$,{isDisabled:e.isDisabled||e.hidden,css:dw.button,style:e.hidden?{opacity:0,pointerEvents:"none"}:void 0,onPress:function(){var n;return null==(n=e.onClick)?void 0:n.call(e)},children:(0,w.Y)(dg.Provider,{value:i,children:e.children})}),(0,w.Y)(dn.m_,{placement:"top",offset:8,css:dw.tooltip,children:r})]})})}var db=(0,$.x)({root:[J.wp.flex.growAndShrink(1),J.wp.position.relative,{"& > div:first-of-type > button":{borderBottomLeftRadius:4},"& > div:button:last-of-type > button":{borderBottomRightRadius:4}}],middle:[J.wp.flex.growAndShrink(1)],moreButton:[{width:24},J.wp.reset.button,J.wp.center,e5.b.nofill,J.wp.height("100%"),J.wp.position.absolute,J.wp.right(0),J.wp.top(0)]});function dS(e){var n=e.left.filter(Boolean),t=e.right.filter(Boolean),r=(0,g._)((0,y.useState)(function(){return(0,Y.y$)()}),1)[0],i=(0,rs.md)(df,{store:r}),o=(0,rs.md)(dp,{store:r}),a=(0,rs.Xr)(dc,{store:r}),l=(0,rs.Xr)(dl,{store:r}),s=(0,rd.A)(function(e){return l(e.width)}),c=n.length-1,u=(0,v._)(n).concat((0,v._)(t)),d=(0,rs.Xr)(du,{store:r}),p=u.length;return(0,y.useEffect)(function(){d(p)},[d,p]),(0,w.Y)(w.FK,{children:(0,w.FD)(Q.S,{className:e.className,css:db.root,row:!0,innerRef:s,children:[u.map(function(e,n){return e.popover?(0,w.FD)(y.Fragment,{children:[(0,w.FD)(dr.zM,{children:[(0,w.Y)(dy,{onWidth:function(e){return a({index:n,width:e})},hidden:null!==o&&n>=o,isDisabled:!e.popover&&!e.onClick,children:(0,y.cloneElement)(e.item,{presentation:i})}),(0,w.Y)(di.g_,{placement:n<=c?"top left":"top right",children:e.popover})]}),n===c?(0,w.Y)(Q.S,{css:db.middle}):null]},e.key):(0,w.FD)(y.Fragment,{children:[(0,w.Y)(dy,{onWidth:function(e){return a({index:n,width:e})},onClick:e.onClick,hidden:null!==o&&n>=o,isDisabled:!e.popover&&!e.onClick,children:(0,y.cloneElement)(e.item,{presentation:i})}),n===c?(0,w.Y)(Q.S,{css:db.middle}):null]},e.key+n)}),null===o?null:(0,w.FD)(dr.zM,{children:[(0,w.Y)(dt.$,{css:db.moreButton,children:(0,w.Y)(da.A,{size:12})}),(0,w.Y)(di.g_,{placement:"top right",children:(0,w.Y)(dm,{items:u.slice(o)})})]})]})})}var dY=t(70548);function dA(e){var n=e.presentation,t=(0,O.g)("codeSuggestion").preferences.codeSuggestion,r=dv();return(0,y.useEffect)(function(){r("compact"===n?"AI":null)},[r,n]),(0,w.FD)(w.FK,{children:[(0,w.Y)(oo.A,{size:12,color:t?eN.LU.blurpleDefault:void 0}),"compact"===n?null:(0,w.Y)(Q.S,{children:"AI"})]})}var dx=(0,$.x)({root:[J.wp.maxWidth(260)],featureTitle:[J.wp.flex.growAndShrink(1),J.wp.fontWeight.medium]});function dC(){var e=(0,y.useId)(),n=(0,O.g)("codeSuggestion"),t=n.preferences.codeSuggestion,r=n.update;return(0,w.FD)(Q.S,{css:dx.root,p:8,children:[(0,w.FD)(Q.S,{row:!0,gap:8,align:"center",children:[(0,w.FD)(Q.S,{css:dx.featureTitle,row:!0,gap:4,align:"center",children:[(0,w.Y)(ch,{color:eN.LU.blurpleDefault}),(0,w.Y)(tz.EY,{children:"AI Autocomplete"})]}),(0,w.FD)(Q.S,{row:!0,gap:4,align:"center",children:[(0,w.Y)(Q.S,{tag:"label",htmlFor:e,children:(0,w.Y)(tz.EY,{color:"dimmer",variant:"small",children:"Enable"})}),(0,w.Y)(dY.S,{id:e,checked:t,name:"Code Complete",onChange:function(){return r({codeSuggestion:!t})}})]})]}),(0,w.FD)(Q.S,{gap:8,children:[(0,w.Y)(tz.EY,{color:"dimmer",variant:"small",children:"Suggest lines of code as you type based on existing context."}),(0,w.FD)(Q.S,{row:!0,gap:4,align:"center",children:[(0,w.Y)(tz.EY,{color:"dimmer",variant:"small",children:"Press"}),(0,w.Y)(rx._y,{small:!0,keyCombo:"Tab"}),(0,w.Y)(tz.EY,{color:"dimmer",variant:"small",children:"to accept result"})]})]})]})}var d_=t(13064),dk=function(e){return e[e.Loading=0]="Loading",e[e.Ready=1]="Ready",e[e.Exited=2]="Exited",e[e.Stalled=3]="Stalled",e[e.Partial=4]="Partial",e[e.Missing=5]="Missing",e[e.Disabled=6]="Disabled",e}(dk||{}),dD=(0,Y.eU)(new Map),dE=(0,Y.eU)(null,function(e,n,t,r){n(dD,function(e){return(0,t2.jM)(e,function(e){var n=e.get(t);n&&e.set(t,(0,m._)((0,h._)({},n),{state:r}))})})}),dR=(0,Y.eU)(null,function(e,n,t,r){n(dD,function(e){return(0,t2.jM)(e,function(e){var n=e.get(t);n&&e.set(t,(0,m._)((0,h._)({},n),{health:r}))})})}),dI=(0,Y.eU)(null,function(e,n,t,r){n(dD,function(e){return(0,t2.jM)(e,function(e){var i=new Set,o=!0,a=!1,l=void 0;try{for(var s,c=t[Symbol.iterator]();!(o=(s=c.next()).done);o=!0)!function(){var t,o=s.value;i.add(o.clientId),null==(t=e.get(o.clientId))||t.dispose(),e.set(o.clientId,{client:o,health:o.getServerHealth(),state:o.getServerState(),restart:function(){return r.restart(o.clientId)},dispose:(0,n5.xW)([o.onServerStateChange(function(e){return n(dE,o.clientId,e)}),o.onServerHealthChange(function(e){return n(dR,o.clientId,e)})])})}()}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}var u=!0,d=!1,p=void 0;try{for(var f,h=e.entries()[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var m=(0,g._)(f.value,2),v=m[0],w=m[1].dispose;i.has(v)||(w(),e.delete(v))}}catch(e){d=!0,p=e}finally{try{u||null==h.return||h.return()}finally{if(d)throw p}}})})});function dF(e){switch(e){case 3:return 4;case 0:return 3;case 1:return 2;case 2:return 1;default:return 0}}function dT(e){return e.health===oq.A.STALLED?3:e.state===oq.b.INITIALIZING||e.state===oq.b.INITIALIZED&&e.health!==oq.A.READY?0:e.health===oq.A.READY?1:e.state===oq.b.EXITED?2:5}function dP(e){return(0,rs.md)(e,{store:function(){var e=(0,y.useContext)(dL);if(!e)throw Error("Expected store in context");return e}()})}var dL=(0,y.createContext)(null);function dU(e){var n,t,r,i=(n=e.filePath,t=e.lspnix,r=(0,g._)((0,y.useState)(function(){return(0,Y.y$)()}),1)[0],(0,y.useEffect)(function(){return t.onClient(n,function(e){return r.set(dI,e,t)})},[n,t,r]),r);return(0,w.Y)(dL.Provider,{value:i,children:e.children})}var dN=t(69938),dO=t(85233);function dM(e){return(0,w.Y)(X.Ay,(0,m._)((0,h._)({},e),{children:(0,w.Y)("path",{fill:eN.LU.foregroundDefault,d:"M8.25 4c-.764 0-1.407.125-1.932.394-.538.276-.905.68-1.143 1.15-.426.842-.425 1.904-.425 2.74v.09c0 .963-.017 1.666-.263 2.153a1.069 1.069 0 0 1-.49.492c-.248.127-.637.229-1.247.229a.75.75 0 0 0 0 1.5c.61 0 .999.101 1.248.229.235.12.383.283.49.492.245.486.262 1.19.262 2.153v.09c0 .835-.001 1.898.425 2.74.238.47.605.874 1.143 1.15.525.268 1.168.393 1.932.393a.75.75 0 0 0 0-1.5c-.61 0-.999-.1-1.248-.228a1.07 1.07 0 0 1-.489-.493c-.246-.486-.263-1.19-.263-2.152v-.09c0-.836.001-1.899-.424-2.74a2.587 2.587 0 0 0-.614-.794c.263-.228.464-.498.614-.794.425-.842.425-1.904.424-2.74v-.09c0-.963.017-1.666.263-2.153.106-.209.254-.371.49-.492C7.25 5.6 7.64 5.5 8.25 5.5a.75.75 0 0 0 0-1.5ZM15.75 4a.75.75 0 0 0 0 1.5c.61 0 1 .101 1.248.229.236.12.384.283.49.492.246.487.263 1.19.263 2.153v.09c-.001.836-.002 1.898.424 2.74.15.296.351.566.614.794a2.586 2.586 0 0 0-.614.794c-.426.841-.425 1.904-.424 2.74v.09c0 .963-.017 1.666-.263 2.152a1.07 1.07 0 0 1-.49.493c-.249.127-.637.229-1.248.229a.75.75 0 1 0 0 1.5c.765 0 1.408-.126 1.932-.394.539-.276.906-.68 1.144-1.15.426-.842.425-1.905.425-2.74v-.09c0-.964.016-1.667.263-2.153a1.07 1.07 0 0 1 .489-.492c.249-.128.637-.23 1.248-.23a.75.75 0 0 0 0-1.5c-.61 0-1-.1-1.248-.228a1.069 1.069 0 0 1-.49-.492c-.246-.487-.262-1.19-.262-2.153v-.09c0-.836.001-1.898-.425-2.74a2.567 2.567 0 0 0-1.144-1.15C17.158 4.125 16.515 4 15.751 4Z"})}))}function dB(e){return(0,w.FD)(X.Ay,(0,m._)((0,h._)({},e),{children:[(0,w.Y)("path",{fill:eN.LU.foregroundDimmer,fillRule:"evenodd",d:"M6.25 4.5c-.764 0-1.407.117-1.932.37a2.49 2.49 0 0 0-1.143 1.078c-.426.79-.425 1.785-.425 2.57v.084c0 .903-.017 1.562-.263 2.018a1.037 1.037 0 0 1-.49.462c-.248.12-.637.215-1.247.215-.414 0-.75.315-.75.703 0 .388.336.703.75.703.61 0 .999.095 1.248.215.235.113.383.266.49.462.245.456.262 1.115.262 2.018v.085c0 .784-.001 1.78.425 2.57.238.44.605.819 1.143 1.078.525.252 1.168.369 1.932.369.414 0 .75-.315.75-.703 0-.389-.336-.704-.75-.704-.61 0-.999-.095-1.248-.214a1.037 1.037 0 0 1-.489-.462c-.246-.456-.263-1.115-.263-2.019v-.084c0-.784.001-1.78-.424-2.57A2.452 2.452 0 0 0 3.212 12c.263-.214.464-.467.614-.745.425-.789.425-1.785.424-2.569v-.084c0-.904.017-1.563.263-2.02.106-.195.254-.348.49-.46.248-.12.637-.215 1.247-.215.414 0 .75-.315.75-.704 0-.388-.336-.703-.75-.703Zm11.5 0c-.415 0-.75.315-.75.703 0 .389.335.704.75.704.61 0 .999.095 1.248.214.235.113.383.266.489.462.246.456.263 1.115.263 2.019v.084c0 .784-.002 1.78.424 2.57.15.277.351.53.614.744a2.452 2.452 0 0 0-.614.745c-.425.789-.425 1.785-.424 2.569v.084c0 .904-.017 1.563-.263 2.02a1.037 1.037 0 0 1-.49.46c-.248.12-.637.215-1.247.215-.415 0-.75.315-.75.704 0 .388.335.703.75.703.764 0 1.407-.117 1.932-.37a2.49 2.49 0 0 0 1.143-1.078c.426-.79.425-1.785.425-2.57v-.084c0-.903.017-1.562.263-2.018.105-.196.254-.349.49-.462.248-.12.637-.215 1.247-.215.414 0 .75-.315.75-.703 0-.388-.336-.703-.75-.703-.61 0-.999-.095-1.248-.215a1.036 1.036 0 0 1-.49-.462c-.245-.456-.262-1.115-.262-2.018v-.085c0-.784.001-1.78-.425-2.57a2.49 2.49 0 0 0-1.143-1.078c-.525-.252-1.168-.369-1.932-.369Z",clipRule:"evenodd"}),(0,w.Y)("path",{fill:eN.LU.accentPositiveStronger,d:"M16.09 9.227a.692.692 0 0 1-.047.978l-5.077 4.615a.692.692 0 0 1-.932 0l-2.307-2.098a.692.692 0 0 1 .931-1.024l1.842 1.674 4.611-4.192a.692.692 0 0 1 .978.047Z"})]}))}function dH(e){return(0,w.FD)(X.Ay,(0,m._)((0,h._)({},e),{children:[(0,w.Y)("path",{fill:"#F66",fillRule:"evenodd",d:"M8.47 8.47a.75.75 0 0 1 1.06 0L12 10.94l2.47-2.47a.75.75 0 1 1 1.06 1.06L13.06 12l2.47 2.47a.75.75 0 1 1-1.06 1.06L12 13.06l-2.47 2.47a.75.75 0 0 1-1.06-1.06L10.94 12 8.47 9.53a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"}),(0,w.Y)("path",{fill:eN.LU.foregroundDimmer,fillRule:"evenodd",d:"M6.25 4.5c-.764 0-1.407.117-1.932.37a2.49 2.49 0 0 0-1.143 1.078c-.426.79-.425 1.785-.425 2.57v.084c0 .903-.017 1.562-.263 2.018a1.037 1.037 0 0 1-.49.462c-.248.12-.637.215-1.247.215-.414 0-.75.315-.75.703 0 .388.336.703.75.703.61 0 .999.095 1.248.215.235.113.383.266.49.462.245.456.262 1.115.262 2.018v.085c0 .784-.001 1.78.425 2.57.238.44.605.819 1.143 1.078.525.252 1.168.369 1.932.369.414 0 .75-.315.75-.703 0-.389-.336-.704-.75-.704-.61 0-.999-.095-1.248-.214a1.037 1.037 0 0 1-.489-.462c-.246-.456-.263-1.115-.263-2.019v-.084c0-.784.001-1.78-.424-2.57A2.452 2.452 0 0 0 3.212 12c.263-.214.464-.467.614-.745.425-.789.425-1.785.424-2.569v-.084c0-.904.017-1.563.263-2.02.106-.195.254-.348.49-.46.248-.12.637-.215 1.247-.215.414 0 .75-.315.75-.704 0-.388-.336-.703-.75-.703Zm11.5 0c-.415 0-.75.315-.75.703 0 .389.335.704.75.704.61 0 .999.095 1.248.214.235.113.383.266.489.462.246.456.263 1.115.263 2.019v.084c0 .784-.002 1.78.424 2.57.15.277.351.53.614.744a2.452 2.452 0 0 0-.614.745c-.425.789-.425 1.785-.424 2.569v.084c0 .904-.017 1.563-.263 2.02a1.037 1.037 0 0 1-.49.46c-.248.12-.637.215-1.247.215-.415 0-.75.315-.75.704 0 .388.335.703.75.703.764 0 1.407-.117 1.932-.37a2.49 2.49 0 0 0 1.143-1.078c.426-.79.425-1.785.425-2.57v-.084c0-.903.017-1.562.263-2.018.105-.196.254-.349.49-.462.248-.12.637-.215 1.247-.215.414 0 .75-.315.75-.703 0-.388-.336-.703-.75-.703-.61 0-.999-.095-1.248-.215a1.036 1.036 0 0 1-.49-.462c-.245-.456-.262-1.115-.262-2.018v-.085c0-.784.001-1.78-.425-2.57a2.49 2.49 0 0 0-1.143-1.078c-.525-.252-1.168-.369-1.932-.369Z",clipRule:"evenodd"})]}))}function dz(e){return(0,w.FD)(X.Ay,(0,m._)((0,h._)({},e),{children:[(0,w.Y)("path",{fill:eN.LU.yellowStronger,fillRule:"evenodd",d:"M12 7.33c.368 0 .667.298.667.667v2.822l2.323-1.394a.667.667 0 1 1 .686 1.143l-2.38 1.429 2.38 1.428a.667.667 0 1 1-.686 1.143l-2.323-1.394v2.823a.667.667 0 0 1-1.334 0v-2.823L9.01 14.568a.667.667 0 0 1-.686-1.143l2.38-1.428-2.38-1.429a.667.667 0 0 1 .686-1.143l2.323 1.394V7.997c0-.369.299-.667.667-.667Z",clipRule:"evenodd"}),(0,w.Y)("path",{fill:eN.LU.foregroundDimmer,fillRule:"evenodd",d:"M6.25 4.5c-.764 0-1.407.117-1.932.37a2.49 2.49 0 0 0-1.143 1.078c-.426.79-.425 1.785-.425 2.57v.084c0 .903-.017 1.562-.263 2.018a1.037 1.037 0 0 1-.49.462c-.248.12-.637.215-1.247.215-.414 0-.75.315-.75.703 0 .388.336.703.75.703.61 0 .999.095 1.248.215.235.113.383.266.49.462.245.456.262 1.115.262 2.018v.085c0 .784-.001 1.78.425 2.57.238.44.605.819 1.143 1.078.525.252 1.168.369 1.932.369.414 0 .75-.315.75-.703 0-.389-.336-.704-.75-.704-.61 0-.999-.095-1.248-.214a1.037 1.037 0 0 1-.489-.462c-.246-.456-.263-1.115-.263-2.019v-.084c0-.784.001-1.78-.424-2.57A2.452 2.452 0 0 0 3.212 12c.263-.214.464-.467.614-.745.425-.789.425-1.785.424-2.569v-.084c0-.904.017-1.563.263-2.02.106-.195.254-.348.49-.46.248-.12.637-.215 1.247-.215.414 0 .75-.315.75-.704 0-.388-.336-.703-.75-.703Zm11.5 0c-.415 0-.75.315-.75.703 0 .389.335.704.75.704.61 0 .999.095 1.248.214.235.113.383.266.489.462.246.456.263 1.115.263 2.019v.084c0 .784-.002 1.78.424 2.57.15.277.351.53.614.744a2.452 2.452 0 0 0-.614.745c-.425.789-.425 1.785-.424 2.569v.084c0 .904-.017 1.563-.263 2.02a1.037 1.037 0 0 1-.49.46c-.248.12-.637.215-1.247.215-.415 0-.75.315-.75.704 0 .388.335.703.75.703.764 0 1.407-.117 1.932-.37a2.49 2.49 0 0 0 1.143-1.078c.426-.79.425-1.785.425-2.57v-.084c0-.903.017-1.562.263-2.018.105-.196.254-.349.49-.462.248-.12.637-.215 1.247-.215.414 0 .75-.315.75-.703 0-.388-.336-.703-.75-.703-.61 0-.999-.095-1.248-.215a1.036 1.036 0 0 1-.49-.462c-.245-.456-.262-1.115-.262-2.018v-.085c0-.784.001-1.78-.425-2.57a2.49 2.49 0 0 0-1.143-1.078c-.525-.252-1.168-.369-1.932-.369Z",clipRule:"evenodd"})]}))}function dW(e){var n=e.filePath,t=e.presentation,r=(0,K.fZ)(),i=(0,U.Vn)(r,eb.ql),o=(0,y.useMemo)(function(){var e,t,r,o;return(r=null==(e=nQ.Jh.from(n))?void 0:e.name)?r:(r=null==i||null==(t=i.language)?void 0:t.name)&&r.length>0?(o=r).slice(0,1).toUpperCase()+o.slice(1).toLowerCase():(r=(0,N.an)(n),i)?r:"Plain Text"},[n,i]),a=(0,U.Vn)(r,nJ.lu),l=(0,g._)((0,y.useState)(a?{title:a.name,value:a.id}:void 0),2),s=l[0],c=l[1],u=(0,y.useRef)(!1);(0,y.useEffect)(function(){u.current||(null==s?void 0:s.value)!==(null==a?void 0:a.id)&&c(a?{title:a.name,value:a.id}:void 0)},[s,a]);var d=dv();(0,y.useEffect)(function(){d("Language support"+("compact"===t?" (".concat(o,")"):""))},[d,t,o]);var p=dP((0,y.useMemo)(function(){return(0,Y.eU)(function(e){var n;return null!=(n=Array.from(e(dD).values()).map(function(e){return dT(e)}).sort(function(e,n){return dF(n)-dF(e)})[0])?n:5})},[]));return(0,w.FD)(w.FK,{children:[(0,w.Y)(dJ,{state:p}),"compact"===t?null:(0,w.Y)(Q.S,{children:o})]})}var dG=(0,$.x)({menu:[J.wp.maxWidth(390),J.wp.minWidth(390)],file:[J.wp.pl(4),J.wp.display.inlineFlex,J.wp.rowWithGap(4),J.wp.align.center,{verticalAlign:"top"}],section:[J.wp.rowWithGap(8),J.wp.align.center,J.wp.justify.spaceBetween],header:[J.wp.colWithGap(2),J.wp.flex.shrink(1)],staticWidth:[J.wp.flex.grow(0),J.wp.flex.shrink(1)],variableWidth:[J.wp.flex.grow(1),J.wp.flex.shrink(0),{flexBasis:0}],flexEnd:[J.wp.align.end],red:[J.wp.color.redDefault],row:[J.wp.rowWithGap(8),J.wp.align.center]});function dV(e){var n=e.filePath,t=e.openSettings,r=(0,K.fZ)(),i=(0,n6.A)().dotReplit,o=(0,U.Vn)(r,nJ.lu),a=(0,U.Vn)(r,nJ.et),l=(0,g._)((0,y.useState)(o?{title:o.name,value:o.id}:void 0),2),s=l[0],c=l[1],u=(0,y.useRef)(!1),d=(0,y.useMemo)(function(){var e;return null!=(e=null==a?void 0:a.map(function(e){return{title:e.name,value:e.id,icon:void 0}}))?e:[]},[a]);return(0,w.FD)(Q.S,{css:dG.menu,p:8,gap:8,children:[(0,w.FD)(tz.Y9,{level:1,children:["Language support for ",(0,w.FD)("span",{css:dG.file,children:[(0,w.Y)(ox.A,{path:n,size:16})," ",(0,w.Y)("span",{children:(0,N.WP)(n)})]})]}),(0,w.Y)(dN.a,{}),(0,w.Y)(dj,{openSettings:t}),a&&s?(0,w.FD)(w.FK,{children:[(0,w.Y)(dN.a,{}),(0,w.FD)(Q.S,{css:dG.section,children:[(0,w.Y)(Q.S,{css:[dG.header,dG.staticWidth],children:(0,w.Y)(tz.EY,{multiline:!1,children:"Code Formatter"})}),1===a.length?(0,w.Y)(Q.S,{css:[dG.header,dG.variableWidth,dG.flexEnd],children:(0,w.Y)(tz.EY,{multiline:!1,children:s.title})}):(0,w.Y)(Q.S,{row:!0,gap:4,children:(0,w.Y)(dO.l,{placement:"top",items:d,selectedItem:(0,m._)((0,h._)({},s),{icon:u.current?(0,w.Y)(nk.A,{size:12}):void 0}),disabled:u.current,onChange:function(e){e.value!==s.value&&(u.current=!0,c(e),(function(e,n){return dQ.apply(this,arguments)})(i,{path:n,formatterId:e.value}).finally(function(){return u.current=!1}))}})})]})]}):null]})}function dj(e){var n=e.openSettings,t=dP((0,y.useMemo)(function(){return(0,Y.eU)(function(e){return Array.from(e(dD).values()).map(function(e){return{clientId:e.client.clientId,clientName:e.client.clientName,restart:function(){return e.restart()}}})})},[]));return(0,w.FD)(w.FK,{children:[t.map(function(e){return(0,w.Y)(Q.S,{css:dG.section,children:(0,w.Y)(dq,{languageServerId:e.clientId,name:e.clientName,restart:function(){return e.restart()},openSettings:n})},e.clientId)}),0===t.length?(0,w.Y)(Q.S,{css:dG.section,children:(0,w.Y)(dK,{openSettings:n})}):null]})}function dZ(e){var n=(0,w.Y)("a",{tabIndex:0,role:"button",onClick:e.restart,onKeyDown:function(n){"Enter"===n.key&&e.restart()},children:"Restart"});switch(e.state){case 0:return(0,w.Y)(tz.EY,{multiline:!1,color:"dimmer",children:"Loading"});case 1:return(0,w.Y)(tz.EY,{multiline:!1,color:"dimmer",children:"Active"});case 3:return(0,w.FD)(Q.S,{css:dG.row,children:[(0,w.Y)(tz.EY,{css:dG.red,multiline:!1,children:"Stalled"})," ",n]});case 2:return(0,w.FD)(Q.S,{css:dG.row,children:[(0,w.Y)(tz.EY,{css:dG.red,multiline:!1,children:"Stopped"})," ",n]});default:return null}}function dq(e){var n,t=dP((n=e.languageServerId,(0,y.useMemo)(function(){return(0,Y.eU)(function(e){var t=e(dD).get(n);return t?dT(t):5})},[n])));switch(t){case 0:case 1:case 2:case 3:return(0,w.FD)(w.FK,{children:[(0,w.Y)(Q.S,{css:[dG.header,dG.variableWidth],children:(0,w.Y)(tz.EY,{multiline:!1,children:e.name})}),(0,w.Y)(Q.S,{css:[dG.header,dG.staticWidth],children:(0,w.Y)(dZ,{restart:e.restart,state:t})})]});default:return null}}function dK(e){return(0,O.g)("codeIntelligence").preferences.codeIntelligence?(0,w.Y)(Q.S,{css:dG.header,children:(0,w.Y)(tz.EY,{color:"dimmer",children:"Limited language support because the language server is not available."})}):(0,w.Y)(Q.S,{css:dG.header,children:(0,w.FD)(tz.EY,{multiline:!0,color:"dimmer",children:["Code intelligence is disabled. Enable it in settings.",(0,w.Y)("br",{}),(0,w.Y)("a",{tabIndex:0,role:"button",onClick:e.openSettings,onKeyDown:function(n){"Enter"===n.key&&e.openSettings()},children:"Open settings"})]})})}var d$=function(e){return e[e.Loading=0]="Loading",e[e.Ready=1]="Ready",e[e.Exited=2]="Exited",e[e.Stalled=3]="Stalled",e[e.Partial=4]="Partial",e[e.Missing=5]="Missing",e[e.Disabled=6]="Disabled",e}(d$||{});function dJ(e){switch(e.state){case 3:case 6:case 4:return(0,w.Y)(dz,{size:16});case 0:return(0,w.Y)(nk.A,{size:16,color:eN.LU.blueStronger});case 1:return(0,w.Y)(Q.S,{dataCy:"ws-code-intelligence-active",children:(0,w.Y)(dB,{size:16})});case 2:return(0,w.Y)(dH,{size:16});case 5:return(0,w.Y)(dM,{size:16})}}function dQ(){return(dQ=(0,ef._)(function(e,n){var t,r;return(0,em.YH)(this,function(i){return(t=".".concat((0,d_.QC)(n.path)),r="rules/formatter/fileExtensions/".concat(t,"/id"),n.formatterId)?[2,e.updateDotReplit([{path:"rules/formatter/fileExtensions",op:"add",value:JSON.stringify((0,ts._)({},"".concat(t),{id:n.formatterId}))}])]:[2,e.updateDotReplit([{path:r,op:"remove"}])]})})).apply(this,arguments)}var dX=t(47566);function d0(e){var n,t=e.presentation,r=(0,sG.A)((n=(0,ef._)(function(e){var n,t,r,i;return(0,em.YH)(this,function(o){switch(o.label){case 0:return[4,e.getRepositoryState()];case 1:if((n=o.sent()).error)return[2,n];if(t=n.type,r=null,t===sW.UN.INITIALIZING)return[3,3];return[4,e.status()];case 2:if((i=o.sent()).error)return[2,i];r=i,o.label=3;case 3:return[2,{branchName:null==r?void 0:r.branch,error:null}]}})}),function(e){return n.apply(this,arguments)})),i=!r||r.error?null:r.branchName,o=dv();return(0,y.useEffect)(function(){o("compact"===t&&i?i:null)},[o,t,i]),i?(0,w.FD)(w.FK,{children:[(0,w.Y)(dX.A,{color:eN.LU.foregroundDimmer,size:12}),"compact"===t?null:(0,w.Y)(Q.S,{children:i})]}):null}function d1(e){if(e.facet(ao.u))return"";var n=e.selection,t="",r=0;if(n.ranges.length>1){r=n.ranges.reduce(function(e,n){return e+(n.to-n.from)},0);var i=n.ranges.length;t="".concat(i," selections")}else{var o=n.ranges[0],a=e.doc.lineAt(o.head),l=o.head-a.from;r=o.to-o.from,t="Ln ".concat(a.number,", Col ").concat(l+1)}return r>0&&(t+=" (".concat(r," chars)")),t}function d2(e){var n=e.view,t=(0,y.useRef)(null);return(0,y.useEffect)(function(){var e,r=t.current,i=null!=(e=n.plugin(U.Pb))?e:null;if(r&&i&&!i.destroyed){var o=null,a=n.state;r.textContent=d1(a);var l=i.bind({changed:function(e){return(0,ey.$H)(e,"selection",ao.u)},callback:function(e){a=e.state,null===o&&(o=requestAnimationFrame(function(){o=null,r.textContent=a?d1(a):""}))}});return function(){l(),null!==o&&cancelAnimationFrame(o),r.textContent=""}}},[n]),(0,w.Y)("span",{ref:t,"data-cy":"current-position"})}var d4=t(57078);function d5(e){var n=e.presentation,t=dv();return(0,y.useEffect)(function(){t("compact"===n?"History":null)},[t,n]),(0,w.FD)(w.FK,{children:["compact"===n?null:(0,w.Y)(Q.S,{children:"History"}),(0,w.Y)(d4.A,{size:12})]})}var d3=t(25466),d6=t(42862);function d8(e,n,t){var r=[],i=0,o=!0,a=!1,l=void 0;try{for(var s,c=e.iterLines()[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var u=s.value,d=i;if(i=i+u.length+1,0!==u.length){var p=(0,d6.t)(u,n),f=u.trimStart(),h=d+(u.length-f.length);if(0!==p&&d!==h){var m="";if(t===d3.c.TABS){var g=Math.floor(p/n),v=p%n;m="	".repeat(g)+" ".repeat(v)}else t===d3.c.SPACES&&(m=" ".repeat(p));m+f!==u&&r.push({from:d,to:h,insert:m})}}}}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}return D.VR.of(r,e.length)}var d7=t(26665),d9=t(19638),pe=t(54087),pn=t(19465),pt=t(51936),pr=(0,$.x)({menu:[J.wp.maxWidth(410)],file:[J.wp.pl(4),J.wp.display.inlineFlex,J.wp.rowWithGap(4),J.wp.align.center,{verticalAlign:"top"}],section:[J.wp.rowWithGap(8),J.wp.align.center,J.wp.justify.spaceBetween],header:[J.wp.colWithGap(2),J.wp.flex.shrink(1)],sizeInput:{border:"none"}});function pi(e){var n,t=e.filePath,r=e.openSettings,i=(0,O.g)("indentDetection","indentSize").preferences,o=(0,K.fZ)(),a=(0,U.Vn)(o,ao.u),l=null!==a&&!!i.indentDetection&&a,s=(0,U.Vn)(o,d7._t),c=(0,U.Vn)(o,d7.WD),u=(0,U.Vn)(o,d7.xu),d=null!=(n=(0,U.Vn)(o,D.$t.tabSize))?n:i.indentSize,p="	"===(0,U.Vn)(o,A.Xt)?d3.c.TABS:d3.c.SPACES,f=(0,g._)((0,y.useState)(!1),2),h=f[0],m=f[1],b=(0,g._)((0,y.useState)(p),2),S=b[0],Y=b[1],x=(0,g._)((0,y.useState)(d),2),C=x[0],_=x[1],k=(0,g._)((0,y.useState)(!1),2),E=k[0],R=k[1],I=(0,g._)((0,y.useState)(!1),2),F=I[0],T=I[1],P=(0,g._)((0,y.useState)(!1),2),L=P[0],M=P[1],B=(0,g._)((0,y.useState)(!1),2),H=B[0],z=B[1];(0,y.useEffect)(function(){E||(Y(p),_(d))},[p,d,E]),(0,y.useEffect)(function(){h||(Y(p),_(d),R(!1))},[h,p,d]),(0,y.useEffect)(function(){S===p&&C===d&&R(!1)},[S,C,p,d]),(0,y.useEffect)(function(){if(F||L||H){var e=setTimeout(function(){T(!1),M(!1),z(!1)},1e3);return function(){return clearTimeout(e)}}},[F,L,H]),l&&h&&m(!1);var W=(0,y.useCallback)(function(){if(o){var e=d8(o.state.doc,d,p);o.dispatch({changes:e,effects:d7.mh.of(!0)}),M(!0)}},[o,p,d]),G=(0,y.useCallback)(function(){o&&(o.dispatch({effects:d7.mh.of(!0)}),o.state.field(d7.WD)&&o.dispatch({effects:d7.SF.of({type:void 0,size:void 0})}),z(!0))},[o]),V=(0,y.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(o){var n=void 0,t=[d7.SF.of({type:S,size:C})];if(e){if(S!==p&&(n=d8(o.state.doc,d,S)),S===d3.c.SPACES&&C!==d){var r=function(e,n,t,r){if(n===d3.c.TABS)return D.VR.empty(e.length);var i=" ".repeat(r),o=[],a=0,l=!0,s=!1,c=void 0;try{for(var u,d=e.iterLines()[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var p=u.value,f=a;if(a=a+p.length+1,0!==p.length){var h=(0,d6.t)(p,t),m=p.trimStart(),g=f+(p.length-m.length);if(0!==h&&f!==g){var v=Math.floor(h/t),w=h%t,y=i.repeat(v)+" ".repeat(w);y+m!==p&&o.push({from:f,to:g,insert:y})}}}}catch(e){s=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(s)throw c}}return D.VR.of(o,e.length)}(n?n.apply(o.state.doc):o.state.doc,S,d,C);n=n?n.compose(r):r}n&&t.push(d7.mh.of(!0))}o.dispatch({changes:n,effects:t}),R(!1),T(!0)}},[o,p,d,S,C]),j=(0,y.useCallback)(function(){m(!1),r()},[r]),Z=(0,y.useMemo)(function(){if(c){var e=c.size,n=c.type===d3.c.SPACES?"spaces":"tabs";return"This file appears to use a unit of ".concat(e," ").concat(n,".")}return u?"Indentation detection hasn't been run on this file yet.":"This file is too small for indentation detection."},[c,u]);return(0,w.FD)(Q.S,{css:pr.menu,p:8,gap:8,children:[(0,w.FD)(tz.Y9,{level:1,children:["Indentation for",(0,w.FD)("span",{css:pr.file,children:[(0,w.Y)(ox.A,{path:t,size:16})," ",(0,w.Y)("span",{children:(0,N.WP)(t)})]})]}),s?(0,w.Y)(pe.N,{colorway:"warning",icon:(0,w.Y)(lZ.A,{}),text:"This file type requires that ".concat(s===d3.c.SPACES?"spaces":"tabs"," be used for indentation.")}):null,(0,w.Y)(dN.a,{}),(0,w.FD)(Q.S,{css:pr.section,children:[(0,w.FD)(Q.S,{css:pr.header,children:[(0,w.Y)(tz.EY,{multiline:!1,children:"Indentation unit"}),(0,w.Y)(tz.EY,{variant:"small",color:"dimmer",children:"The size and character to use when indenting lines."})]}),(0,w.FD)(Q.S,{row:!0,gap:4,children:[(0,w.Y)(d9.fq,{css:pr.sizeInput,size:C,onChange:function(e){e!==C&&(_(e),R(!0))}}),(0,w.Y)(dO.l,{items:(0,v._)(d9.pi),selectedItem:d9.pi.find(function(e){return e.value===(S===d3.c.SPACES?"spaces":"tabs")}),onChange:function(e){var n=(null==e?void 0:e.value)==="spaces"?d3.c.SPACES:d3.c.TABS;n!==S&&(Y(n),R(!0))}})]})]}),(0,w.Y)(dN.a,{}),i.indentDetection?(0,w.FD)(w.FK,{children:[(0,w.FD)(Q.S,{css:pr.section,children:[(0,w.FD)(Q.S,{css:pr.header,children:[(0,w.Y)(tz.EY,{multiline:!1,children:"Detected indentation unit"}),(0,w.Y)(tz.EY,{variant:"small",color:"dimmer",children:Z})]}),H?(0,w.Y)(t9.$n,{colorway:"positive",text:"Detected!",iconLeft:(0,w.Y)(uH.A,{}),onClick:G}):(0,w.Y)(t9.$n,{text:c?"Re-detect":"Detect",iconLeft:(0,w.Y)(rh.A,{}),disabled:!u&&!c,onClick:G})]}),(0,w.Y)(dN.a,{})]}):null,(0,w.FD)(Q.S,{row:!0,gap:8,align:"center",justify:"space-between",children:[(0,w.Y)(t9.$n,{text:"Global settings",iconLeft:(0,w.Y)(pn.A,{}),onClick:j}),(0,w.Y)(Q.S,{row:!0,gap:4,children:F||L?(0,w.Y)(w.FK,{children:F?(0,w.Y)(t9.$n,{text:"Saved!",colorway:"positive",iconLeft:(0,w.Y)(uH.A,{}),onClick:function(){return V(!1)}}):(0,w.Y)(t9.$n,{text:"Re-indented!",colorway:"positive",iconLeft:(0,w.Y)(uH.A,{}),onClick:W})}):(0,w.Y)(w.FK,{children:E?(0,w.FD)(w.FK,{children:[(0,w.Y)(t9.$n,{text:"Save and re-indent",colorway:"primary",iconLeft:(0,w.Y)(pt.A,{}),onClick:function(){return V(!0)}}),(0,w.Y)(t9.$n,{text:"Save",iconLeft:(0,w.Y)(uH.A,{}),onClick:function(){return V(!1)}})]}):(0,w.Y)(t9.$n,{text:"Re-indent file",iconLeft:(0,w.Y)(pt.A,{}),onClick:W})})})]})]})}function po(e){var n,t=e.presentation,r=(0,O.g)("indentDetection","indentSize").preferences,i=(0,K.fZ)(),o=(0,U.Vn)(i,ao.u),a=null!==o&&!!r.indentDetection&&o,l=null!=(n=(0,U.Vn)(i,D.$t.tabSize))?n:r.indentSize,s="	"===(0,U.Vn)(i,A.Xt)?d3.c.TABS:d3.c.SPACES,c=dv();return(0,y.useEffect)(function(){c("File Indentation")},[c]),(0,w.FD)(w.FK,{children:[(0,w.Y)(pl,{type:s,loading:a}),"compact"===t?null:(0,w.Y)(ps,{type:s,size:l,loading:a})]})}function pa(e){var n=e.size,t=void 0===n?16:n,r=(0,ep._)(e,["size"]);return(0,w.Y)(X.Ay,(0,m._)((0,h._)({size:t},r),{children:(0,w.Y)("circle",{cx:t,cy:t,r:t/2,fillRule:"evenodd"})}))}function pl(e){var n=e.type;return e.loading?(0,w.Y)(nk.A,{size:12}):n===d3.c.SPACES?(0,w.Y)(pa,{color:eN.LU.foregroundDimmer,size:12}):(0,w.Y)(pt.A,{color:eN.LU.foregroundDimmer,size:12})}function ps(e){var n=e.type,t=e.size;if(e.loading)return(0,w.Y)(tz.EY,{variant:"small",color:"dimmest",children:"Detecting..."});var r=n===d3.c.SPACES?"Spaces":"Tabs";return(0,w.FD)(tz.EY,{variant:"small",color:"dimmer",children:[r,": ",t]})}var pc=t(42767),pu=t(9414),pd=t(3752),pp=(0,$.x)({group:[J.wp.align.center,J.wp.rowWithGap(4)]});function pf(e){var n,t,r,i,o,a,l,s,c,u=e.filePath,d=e.presentation,p=(n=u,r=(t=(0,g._)((0,y.useState)(null),2))[0],i=t[1],o=(0,n4.A)(n),a=(0,pd.t3)(),l=(0,pu.gB)(),(0,y.useEffect)(function(){var e=function(e){var t,r=a().find(function(e){var n=(0,g._)(e,2);return"problems"===(n[0],n[1]).type});if(r){var i=l(r[0]);i&&"problems"===i.type&&(null==(t=i.updateProblems)||t.call(i,n,e))}},t=function(t){if(t.path===n){var r=[],a=!0,l=!1,s=void 0;try{for(var c,u=o[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var d=c.value;d.isOpen(n)&&r.push.apply(r,(0,v._)(d.getDiagnostics(t.path)))}}catch(e){l=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw s}}i(r),e(r)}},r=[],s=!0,c=!1,u=void 0;try{for(var d,p=o[Symbol.iterator]();!(s=(d=p.next()).done);s=!0){var f=d.value;f.isOpen(n)&&r.push.apply(r,(0,v._)(f.getDiagnostics(n)))}}catch(e){c=!0,u=e}finally{try{s||null==p.return||p.return()}finally{if(c)throw u}}i(r),e(r);var h=[],m=!0,w=!1,y=void 0;try{for(var b,S=o[Symbol.iterator]();!(m=(b=S.next()).done);m=!0){var Y=b.value;h.push(Y.onDiagnostics(function(e){return t(e)}))}}catch(e){w=!0,y=e}finally{try{m||null==S.return||S.return()}finally{if(w)throw y}}return function(){h.forEach(function(e){return e()}),a().some(function(e){var t=(0,g._)(e,2),r=(t[0],t[1]);return"codeEditor"===r.type&&r.data.path===n})||e([])}},[o,n,a,l]),r),f=(0,y.useMemo)(function(){var e,n;return p?(n=(e=p).reduce(function(e,n){return void 0===n.severity||(e[n.severity]=(e[n.severity]||0)+1),e},{}),e.length>0&&0===Object.keys(n).length&&(n[eL.DiagnosticSeverity.Error]=e.length),n):null},[p]),h=f&&null!=(s=f[eL.DiagnosticSeverity.Error])?s:0,m=f&&null!=(c=f[eL.DiagnosticSeverity.Warning])?c:0,b=null===f,S=dv();return((0,y.useEffect)(function(){if(b)return void S(null);var e="";0===h&&0===m&&(e="No problems"),h>0&&(e+="".concat((0,ov.A)("Error",h),": ").concat(h)),m>0&&(e.length>0&&(e+=", "),e+="".concat((0,ov.A)("Warning",m),": ").concat(m)),S(e)},[S,d,b,m,h]),f)?(0,w.FD)(Q.S,{align:"center",row:!0,gap:8,children:[(0,w.FD)(Q.S,{css:pp.group,children:[(0,w.Y)(pc.A,{severity:eL.DiagnosticSeverity.Error,size:12}),"compact"===d?null:(0,w.Y)(tz.EY,{color:"dimmer",variant:"small",multiline:!1,children:String(h)})]}),(0,w.FD)(Q.S,{css:pp.group,children:[(0,w.Y)(pc.A,{severity:eL.DiagnosticSeverity.Warning,size:12}),"compact"===d?null:(0,w.Y)(tz.EY,{color:"dimmer",variant:"small",multiline:!1,children:String(m)})]})]}):null}var ph=t(98363);function pm(e){var n=e.presentation,t=e.toggled?"Diffing":"Diff",r=dv();return(0,y.useEffect)(function(){r("compact"===n?t:null)},[r,n,t]),(0,w.FD)(w.FK,{children:[(0,w.Y)(ph.A,{color:eN.LU.foregroundDimmer,size:12}),"compact"===n?null:(0,w.Y)(Q.S,{children:t})]})}var pg=t(667);function pv(e){return(0,w.Y)(pg.A,(0,m._)((0,h._)({},e),{children:(0,w.Y)("path",{fill:"#009118",fillRule:"evenodd",d:"m15.09 2-.29.29v1.066l.254.255h1.342v1.03L7.52 13.65V3.624h1.475l.303-.304V2.242l-.28-.217H1.255L1 2.28v1.102l.258.258h1.35v18.465l.255.254h1.534l6.467-6.682a.512.512 0 0 1 .006-.016l.335-.939a.49.49 0 0 1 .142-.207l.32-.275a.49.49 0 0 1 .32-.118h.383L23 3.138V2.29L22.71 2h-7.62Zm-3.273 12.693-.183.157-.01.008-.004.012-.014.041-.331.928.25.25h1.083l.274-.276.301-1.035-.215-.215h-1l-.15.13Zm-1.871 2.714-.12.48h.774l-1.66 4.745h2.288l.133-.43h-.65l1.642-4.795H9.946Zm7.498.017-.514.583h-.885l-.546-.566h-1.826l-.149.445h.617l-1.592 4.695h1.914l.129-.38h-.46l1.065-3.355h2.039l-1.164 3.735h1.847l.143-.344h-.457l1.082-3.408h1.953l-1.181 3.752h2.034l.145-.38h-.528l1.31-4.257-.373-.503h-1.473l-.497.547h-.936l-.514-.564h-1.183Z",clipRule:"evenodd"})}))}var pw=(0,$.x)({text:[{textTransform:"capitalize"}]});function py(e){var n=e.presentation,r=(0,g._)((0,y.useState)(null),2),i=r[0],o=r[1],a=(0,y.useRef)(null),l=(0,y.useRef)(null),s=dv(),c=(0,K.fZ)(),u=(0,O.g)("keyboardHandler").preferences,d=(null==u?void 0:u.keyboardHandler)==="vim",p=(0,y.useCallback)(function(e){var t=null!=e?e:"";if(c&&i&&void 0===e){var r,o,u=i.getCM(c);t=null!=(o=null==u||null==(r=u.state.vim)?void 0:r.mode)?o:"normal"}s("compact"===n?t:null),l.current=t,a.current&&a.current.innerText!==t&&(a.current.innerText=t||"")},[c,i,s,n]);return(0,y.useEffect)(function(){d&&!i&&t.e(3748).then(t.bind(t,77476)).then(function(e){o(e),p()})},[d,i,p]),(0,y.useEffect)(function(){if(c&&d&&i){var e,n=a.current,t=null!=(e=c.plugin(U.Pb))?e:null;if(n&&t&&!t.destroyed)return t.bind({changed:function(){var e,n,t=i.getCM(c),r=null!=(n=null==t||null==(e=t.state.vim)?void 0:e.mode)?n:"";return l.current!==r},callback:function(){p()}})}},[c,d,i,p]),d?(0,w.FD)(w.FK,{children:[(0,w.Y)(pv,{size:12}),"compact"===n?null:(0,w.Y)("span",{css:pw.text,ref:a})]}):null}var pb=(0,$.x)({root:[{borderTop:"1px solid ".concat(eN.LU.backgroundHigher)},{height:"29px",contain:"strict"}]}),pS=(0,y.memo)(function(e){var n,t,r,i,o,a,l,s,c,u,d,p,f,h,m,g,v,b,S,Y,A,x,C,_,k=e.filePath,D=e.performPaneOperation,E=(0,y.useCallback)(function(e){return D({operation:"open",pane:e,secondary:!0})},[D]),R=(0,y.useCallback)(function(){return E({type:"preferences"})},[E]),I=(n=(0,u9.Ay)(),(0,u9.mS)(n)?{item:(0,w.Y)(dA,{}),popover:(0,w.Y)(dC,{}),key:"ai"}:null),F=(r=(t={filePath:k,openSettings:R}).filePath,i=t.openSettings,{item:(0,w.Y)(dW,{filePath:r,openSettings:i}),popover:(0,w.Y)(dV,{openSettings:i,filePath:r}),key:"codeIntelligence"}),T=(o=(0,ix._P)({controlName:"flag-lsp-diagnostics-in-footer",logFlagToAnalytics:!1}),a=(0,K.fZ)(),o?{item:(0,w.Y)(pf,{filePath:k}),onClick:a?function(){return(0,ik.Q)(a)}:void 0,key:"lspDiagnostics"}:null),P=(l=function(){return E({type:"git"})},(0,ix._P)({controlName:"flag-status-bar-branch",logFlagToAnalytics:!1})?{item:(0,w.Y)(d0,{}),onClick:l,key:"currentBranch"}:null),L=(s=(0,ix._P)({controlName:"flag-editor-git-inline-diff",logFlagToAnalytics:!1}),h=(c=(0,K.fZ)(),u=(0,U.Vn)(c,iY),d=!c||!u||null===u.head,p=(null==u?void 0:u.mode)===iy.INLINE_DIFF,f={toggle:(0,y.useCallback)(function(){if(!c)return null;c.dispatch({effects:iS.of(p?iy.GUTTER_DIFF:iy.INLINE_DIFF)})},[c,p]),toggled:p,disabled:d}).toggle,m=f.toggled,g=f.disabled,s&&!g?{item:(0,w.Y)(pm,{toggled:m}),onClick:h,key:"toggleDiff"}:null),N={item:(0,w.Y)(py,{}),key:"vimMode"},O=(v=(0,K.fZ)())?{item:(0,w.Y)(d2,{view:v}),onClick:function(){return(0,sb.cB)(v)},key:"currentPosition"}:null,M=(S=(b={filePath:k,performPaneOperation:D}).filePath,Y=b.performPaneOperation,A=(0,y.useCallback)(function(){Y({operation:"replace",pane:{type:"history",data:{path:S}}})},[Y,S]),{item:(0,w.Y)(d5,{}),key:"history",onClick:A}),B=(C=(x={filePath:k,openSettings:R}).filePath,_=x.openSettings,{item:(0,w.Y)(po,{}),popover:(0,w.Y)(pi,{filePath:C,openSettings:_}),key:"indentation"});return(0,w.Y)(dS,{css:pb.root,left:[I,F,T,P,L,N],right:[O,B,M]})});function pY(e){var n=(0,n6.A)().lspnix;return(0,w.Y)(dU,{filePath:e.filePath,lspnix:n,children:(0,w.Y)(pS,(0,h._)({},e))})}var pA=t(89690),px=(0,$.x)({root:[J.wp.position.relative,J.wp.flex.column,J.wp.overflowY("hidden"),J.wp.width("100%"),J.wp.height("100%")]});function pC(e){var n,t,r,i,o=(0,y.useRef)(null),a=(n=(0,ed.Jw)(ec.C.id,ec.j.Editor),t=(0,ed.Jw)(eu.IW.id,eu.Gp.ViewFile),r=(0,ed.Jw)(eu._t.id,eu.ij.ViewCSSFile),i=(0,ed.Jw)(eu._t.id,eu.ij.ViewTSFile),(0,es.S)([n,t,r,i],{breadcrumb:"client/workspace/components/CodeEditorWrapper.tsx:118"})),l=(0,Z.A)(),s=(0,z.jt)(),c=(0,pA.hT)(),u=s&&(c===H.g32.AGENT_STATE_RUNNING||c===H.g32.AGENT_STATE_PAUSING),d=(0,es.S)([a,o],{breadcrumb:"client/workspace/components/CodeEditorWrapper.tsx:62"});return(0,w.FD)(Q.S,{innerRef:d,css:px.root,children:[(0,w.Y)(nD,{performPaneOperation:e.performPaneOperation,path:e.filePath,isReadOnly:e.isReadOnly}),(0,w.Y)("div",{css:c7.jy,children:(0,w.Y)(u7,{filePath:e.filePath,hideMobileKeyboardToolbar:e.hideMobileKeyboardToolbar,isHidden:e.isHidden,isReadOnly:u,isReadOnlyWhileAgentWorking:u,deeplink:e.deeplink,onDeeplinkUpdated:e.onDeeplinkUpdated,performPaneOperation:e.performPaneOperation})}),(0,w.Y)("div",{style:{display:l?"none":"block"},children:(0,w.Y)(pY,{filePath:e.filePath,performPaneOperation:e.performPaneOperation})}),e.hideMobileKeyboardToolbar?null:(0,w.Y)(el,{filePath:e.filePath,isLoading:!1})]})}var p_=(0,$.x)({root:[J.wp.coverContainer,J.wp.center,J.wp.p(16)]});function pk(e){var n=e.message;return(0,w.Y)(Q.S,{css:p_.root,children:(0,w.Y)(Q.S,{children:(0,w.Y)(pe.N,{icon:(0,w.Y)(lZ.A,{}),colorway:"orange",text:n})})})}var pD=t(8721),pE=t(58370);function pR(e){return(0,w.Y)(X.Ay,(0,m._)((0,h._)({},e),{children:(0,w.Y)("path",{fillRule:"evenodd",d:"M20.75 12a.75.75 0 0 0-.75-.75H4a.75.75 0 0 0 0 1.5h16a.75.75 0 0 0 .75-.75Zm-6-6a.75.75 0 0 0-.75-.75H4a.75.75 0 0 0 0 1.5h10a.75.75 0 0 0 .75-.75Zm-4 12a.75.75 0 0 0-.75-.75H4a.75.75 0 0 0 0 1.5h6a.75.75 0 0 0 .75-.75Z",clipRule:"evenodd"})}))}var pI=t(11721),pF=b.ZU.Object({type:b.ZU.Literal("codeEditor"),data:b.ZU.Object({path:b.ZU.Union([b.ZU.String({minLength:1}),b.ZU.Null()]),line:b.ZU.Optional(b.ZU.Number()),col:b.ZU.Optional(b.ZU.Number())})}),pT={Content:function(e){var n=e.pane,t=e.options;return(0,w.Y)(pL,(0,m._)((0,h._)({},n.data),{isActive:t.isActive,isHidden:t.isHidden,performPaneOperation:t.performPaneOperation}))},Icon:function(e){var n=e.pane,t=e.size;return(0,w.Y)(ox.A,{path:n.data.path||"",size:t})},getTitle:function(e){return e.data.path?(0,N.WP)(e.data.path):"No file open"},category:pE.bY.WorkspaceFeatures,decode:function(e){return S.T(pF,e)}};function pP(e){var n,t,r,i,o,a,l,s,c,u=e.path,d=e.performPaneOperation,p=(0,K.fZ)(),f=(0,M.A)(function(){return p?{match:s9.G2,data:{type:"action",label:"Toggle all folds",icon:(0,w.Y)(ng.A,{}),run:function(){0===(0,A.hw)(p.state).size?(0,A.hY)(p):(0,A._I)(p)}}}:null},[p]),h=(0,U.Vn)(p,C.T);(0,y.useEffect)(function(){h&&d({operation:"commit"})},[h,d]);var m=(0,nY.KA)({path:u,performPaneOperation:d}),g=(n=(0,K.fZ)(),t=(0,U.Vn)(n,_.hb),(0,M.A)(function(){if(n&&t)return{match:s9.G2,data:{label:"Format "+(0,N.WP)(u),icon:(0,w.Y)(n_.A,{}),type:"action",run:function(){(0,_.BD)(n)}}}},[t,u,n])),b=(r=(0,B.m5)(),o=(i=(0,O.g)("minimapDisplay")).preferences.minimapDisplay,a=i.update,(0,M.A)(function(){return r?null:{match:s9.G2,data:{label:"Minimap",icon:(0,w.Y)(pR,{}),type:"context"},commands:function(e){var n=e.active,t=e.searchQuery;return n||t?[{value:"none",label:"Hide",icon:(0,w.Y)(lH.A,{})},{value:"characters",label:"Characters",icon:(0,w.Y)(ej.A,{})},{value:"blocks",label:"Blocks",icon:(0,w.Y)(eV.A,{})}].filter(function(e){return e.value!==o}).map(function(e){return{match:s9.G2,data:{type:"action",label:e.label,icon:e.icon,run:function(){a({minimapDisplay:e.value})}}}}):[]}}},[a,o,r])),S=(l=function(){return d({operation:"replace",pane:{type:"history",data:{path:u}}})},(0,M.A)(function(){return{match:s9.G2,data:{label:"History",icon:(0,w.Y)(d4.A,{}),type:"action",run:function(){l()}}}},[l])),Y=(s=(0,nx.vO)(),(0,M.A)(function(){var e=void 0;if((0,N.e$)(u)&&(e={type:"markdown",data:{path:u}}),(0,N.Z7)(u)&&(e={type:"media",data:{path:u}}),(0,N.Zy)(u)&&(e={type:"csvPreview",data:{path:u}}),e)return{match:s9.G2,data:{label:"Preview",icon:(0,w.Y)(nC.A,{}),type:"action",run:function(){if(e){if("csvPreview"===e.type){var n;e.data.line=null==(n=s())?void 0:n.position.line}d({operation:"replace",pane:e})}}}}},[s,u,d])),k=(c=(0,pd.JZ)(),{match:s9.G2,data:{label:"Reveal in file tree",icon:(0,w.Y)(pI.A,{}),type:"action",run:function(){c(u)}}});return(0,pu.Qt)(function(){if(p){var e=[],n=[],t=[];return g&&e.push(g),Y&&n.push(Y),b&&n.push(b),f&&n.push(f),t.push(k),t.push(S),m&&e.push.apply(e,(0,v._)(m)),{type:"codeEditor",commands:[{name:"File Operations",commands:e},{name:"View",commands:n},{name:"Navigation",commands:t}].filter(function(e){return e.commands.length>0}),getEditorView:function(){return p},getCurrentSelectionText:function(){if(!p.state.selection.main.empty)return p.state.sliceDoc(p.state.selection.main.from,p.state.selection.main.to)},insertGhostwriterChatCode:function(e,n){F({view:p,insert:e,overwrite:n})},revertGhostwriterChatCode:function(){T(p)},fetchProblems:function(){return(0,x.H_)(p),(0,L.VS)(p.state)}}}},[p,g,Y,S,b,f,k,m]),(0,pu.HP)(function(){return p},[p]),null}function pL(e){var n,t,r,i,o,a,l,s,c=e.path,u=e.line,d=e.col,p=e.isActive,f=e.isHidden,h=e.performPaneOperation,m=(0,g._)((0,y.useState)(!f),2),v=m[0],b=m[1];v||f||b(!0);var S=(0,g._)((0,y.useState)(function(){return(0,Y.y$)()}),1)[0],A=(0,g._)((0,y.useState)(function(){return(0,Y.y$)()}),1)[0],x=(t=(n={path:c,replaceEditorPath:(0,y.useCallback)(function(e){h({operation:"replace",pane:{type:"codeEditor",data:{path:e}}})},[h]),getFileRenameInProgress:(0,nx.u6)()}).path,r=n.replaceEditorPath,i=n.getFileRenameInProgress,o=(0,n6.A)().fs,l=(a=(0,g._)((0,y.useState)(null),2))[0],s=a[1],(0,y.useEffect)(function(){if(t){if(t.startsWith("/"))return s('Cannot open "'.concat(t,'"')),function(){s(null)};var e=o.watchPathStat(t,{onNewStat:function(e){var n=i();return e.exists?e.type===aG.pt.Directory?void s('"'.concat(t,'" is a directory')):void s(null):(null==n?void 0:n.from)===t?void r(n.to):void s('No file found at "'.concat(t,'", it may have been deleted'))},onError:function(){s('Unknown error occured while read "'.concat(t,'", try re-opening the editor'))}});return function(){e(),s(null)}}},[i,o,t,r]),l),C=(0,M.A)(function(){return{line:u,col:d}},[u,d]),_=(0,M.A)(function(){return function(){h({operation:"replace",pane:{type:"codeEditor",data:{path:c}}})}},[h,c]);return c?x?(0,w.Y)(pk,{message:x}):f&&!v?null:(0,w.Y)(K.dz.Provider,{value:S,children:(0,w.FD)(pD.GK.Provider,{value:A,children:[(0,w.Y)(pC,{filePath:c,isHidden:null!=f&&f,deeplink:C,onDeeplinkUpdated:_,hideMobileKeyboardToolbar:!0,performPaneOperation:h},c),(0,w.Y)(pP,{path:c,isActive:p,performPaneOperation:h})]})}):null}},82272:(e,n,t)=>{"use strict";t.d(n,{Ik:()=>s,jq:()=>l,r$:()=>a});var r=t(45485),i=t(68213),o=t(71380);function a(e){return 80===e||443===e}function l(e,n){var t=new URL(e);return!n||a(n)?(t.hostname.endsWith(".localhost")?t.port="8081":t.port&&(t.port=""),t):(t.port=n.toString(),t)}function s(e){var n,t,a,s=e.container,c=e.ports,u=e.addDevToolsSuffix,d=!(t=(0,o.w)(c)).length||t.some(function(e){return 80===e.configuration.externalPort})?80:null!=(n=t[0].configuration.externalPort)?n:80,p=(0,i.A)(s),f=p.url,h=p.reachability,m=(0,r.g)();if(!d&&!m||!f)return null;var g=l(f,d).toString(),v=l(f+"/__replco/workspace_iframe.html",d).toString();return{iframeSrc:void 0===u||u?v:(a=new URL(g)).hostname.endsWith(".localhost")?g:(a.protocol="https:",a.toString()),presentationUrl:g,baseUrl:f,reachability:h}}},82326:(e,n,t)=>{"use strict";t.d(n,{D3:()=>U,N2:()=>I,Rc:()=>M,XT:()=>L,bX:()=>_,ce:()=>B,pd:()=>T,sb:()=>P,wi:()=>N,y1:()=>F});var r=t(12694),i=t(86105),o=t(88263),a=t(21462),l=t(54319),s=t(13953),c=t(5126),u=t(19882),d=t(73279),p=t(45263),f=t(42425),h=t(64583),m=t(973),g=t(48521),v=t(54087),w=t(76126),y=t(59172),b=t(10429),S=t(48052),Y=t(80762),A=t(48028),x=t(18942),C=t(69258),_=400,k=[g.wp.p(4),g.wp.center,g.wp.borderRadius(4)],D=(0,h.x)({root:(0,i._)(k).concat([g.wp.cursor.pointer,(0,f.Li)("blurple")]),disabled:(0,i._)(k).concat([(0,f.Li)("grey")])});function E(e){return e.disabled||e.connecting?(0,o.Y)(b.S,{css:D.disabled,tag:"button","data-cy":"ghostwriter-inline-submit",children:e.connecting?(0,o.Y)(Y.A,{size:12}):(0,o.Y)(A.A,{size:12})}):(0,o.Y)(b.S,{"data-cy":"ghostwriter-inline-submit",css:D.root,tag:"button",onClick:e.onClick,children:e.loading?(0,o.Y)(x.A,{size:12}):(0,o.Y)(A.A,{size:12})})}var R=(0,h.x)({root:[g.wp.minWidth(300),g.wp.maxWidth(800),g.wp.position.relative,{fontFamily:p.LU.fontFamilyDefault}],container:[g.wp.position.relative,g.wp.backgroundColor.backgroundDefault],input:[m.b.outlined,g.wp.borderRadius(4),{paddingBottom:36,"@media (hover: hover)":{":not([disabled]):hover":{backgroundColor:"transparent"}}}],textarea:[g.wp.p(8),g.wp.pb(0),{caretColor:"initial",fontFamily:p.LU.fontFamilyDefault,border:"0 none",resize:"none",height:"1em",backgroundColor:"transparent","@media (hover: hover)":{":not([disabled]):focus":{outline:"0 none"}},"::placeholder":{color:p.LU.foregroundDimmest}}],footer:[g.wp.position.absolute,g.wp.bottom(0),g.wp.left(0),g.wp.width("100%"),{height:36}],footerLeft:[g.wp.flex.growAndShrink(1),g.wp.align.center],footerRight:[{"& button":[g.wp.height(22),g.wp.py(6),g.wp.py(4),g.wp.borderRadius(4)]}],error:[g.wp.color.accentNegativeStronger]}),I=function(e){var n=e.requestMeasure,t=e.type,r=e.children,i=e.isCodeMirrorPocket,a=(0,u.A)(n);return(0,o.Y)(d.A,{bsod:!0,tags:{ai:!0},extras:{type:t},origin:"ErrorBoundary: InlineAiWidget",children:(0,o.Y)(b.S,{css:R.root,py:8,pr:8,gap:4,innerRef:a,className:void 0===i||i?"cm-pocket-widget":void 0,children:r})})},F=function(e){var n=e.requestMeasure,t=e.type,r=e.children,i=e.isCodeMirrorPocket,a=e.error,l=e.clearError,s=e.innerRef;return(0,o.FD)(I,{type:t,requestMeasure:n,isCodeMirrorPocket:void 0===i||i,children:[(0,o.Y)(b.S,{css:R.container,innerRef:s,children:r}),a?(0,o.Y)(v.N,{icon:(0,o.Y)(C.A,{color:p.LU.accentNegativeDefault}),text:a,closable:!0,closeAction:l}):null]})};function T(e){var n=(0,c.A)();return(0,o.Y)(b.S,{css:R.input,children:(0,o.Y)("textarea",{value:e.value,onChange:e.onChange,placeholder:e.placeholder,css:R.textarea,ref:function(t){e.inputRef.current=t,n.ref(t)},onKeyDown:e.onKeyDown,autoFocus:e.autoFocus,"data-cy":"ghostwriter-inline-input",disabled:e.disabled})})}function P(e){var n=e.readableModelName,t=e.type;return(0,o.Y)(y.m_,{tooltip:"generateCode"===t?"Generate new code based on this file".concat(n?" using ".concat(n,"."):"."):"Modify selected code based on the context of this file".concat(n?" using ".concat(n,"."):"."),children:(0,o.FD)(b.S,{row:!0,gap:4,align:"center",children:[(0,o.Y)(S.A,{}),(0,o.Y)(w.EY,{variant:"small",color:"dimmest",children:"transformCode"===t?"Modify with ".concat(l.BP):"Generate with ".concat(l.BP)})]})})}function L(e){var n=e.loading,t=e.disabled,r=e.promptPresentation,i=e.onClick,a=e.connecting,l=e.escPressed,s=e.codeLengthExceeded;return(0,o.FD)(o.FK,{children:[n?(0,o.FD)(b.S,{row:!0,gap:4,align:"center",children:[(0,o.Y)(Y.A,{size:12,color:p.LU.blurpleDefault}),r?(0,o.Y)(w.EY,{variant:"small",color:"dimmest",children:"AI is writing"}):null]}):(0,o.Y)(o.FK,{children:r?(0,o.Y)(w.EY,{variant:"small",color:"dimmest",children:s?"Code length exceeded":l?"Press Esc again to dismiss":"Esc to close, Enter to submit"}):null}),(0,o.Y)(E,{connecting:a,loading:n,disabled:t,onClick:i})]})}function U(e){var n=e.id,t=e.inputRef,i=e.onClose,o=e.loading,l=e.onSubmit,c=(0,r._)((0,a.useState)(""),2),u=c[0],d=c[1],p=(0,r._)((0,a.useState)(!1),2),f=p[0],h=p[1];return(0,a.useEffect)(function(){var e="inline-ai/input-state/".concat(n),r=s.A.get(e,"string");r&&d(r);var i=t.current;return function(){if(i){var n=i.value;if(0===n.length)return void s.A.remove(e);s.A.set(e,n)}}},[n,t]),{value:u,setValue:d,onKeyDown:function(e){switch(e.key){case"Escape":e.preventDefault(),u.length?f?i():h(!0):i();break;case"Enter":if(e.preventDefault(),o)break;e.shiftKey?d(function(e){return e+"\n"}):!e.metaKey&&u.length&&u.trim()&&l();break;default:h(!1)}},escPressed:f}}var N=function(e){var n=(0,r._)(e.children,2),t=n[0],i=n[1];return(0,o.FD)(b.S,{css:R.footer,px:8,pr:6,row:!0,gap:8,align:"center",children:[(0,o.Y)(b.S,{css:R.footerLeft,row:!0,gap:8,children:t}),(0,o.Y)(b.S,{css:R.footerRight,row:!0,gap:4,align:"center",children:i})]})},O=(0,h.x)({default:[g.wp.width("90%")]}),M=function(e){var n=e.inlineActionType,t=e.closeAction;return(0,o.Y)(b.S,{css:O.default,children:(0,o.Y)(v.N,{icon:(0,o.Y)(C.A,{}),colorway:"red",text:"".concat(n," with AI is currently unavailable. Try again later."),closable:!0,closeAction:t})})},B=function(e){var n=e.inlineActionType,t=e.closeAction;return(0,o.Y)(b.S,{css:O.default,children:(0,o.Y)(v.N,{icon:(0,o.Y)(C.A,{}),colorway:"blurple",text:"".concat(n," with AI is unavailable while ").concat((0,l.Nn)({variant:"casual"})," is running."),closable:!0,closeAction:t})})}},82377:(e,n,t)=>{"use strict";t.d(n,{ER:()=>c,mU:()=>l,zV:()=>s});var r=t(22531),i=t(46231),o=t.n(i),a=t(64513),l=function(e){return"string"==typeof e&&""!==e.trim()},s=function(e){return(void 0===e?"undefined":(0,r._)(e))==="object"&&"string"==typeof e.name&&"string"==typeof e.value&&""!==e.name};function c(e){var n=e.replSlug,t=e.username,r=t?"-".concat(t):"",i=a.sA-(0+r.length);if(i>0){var l=o()(n).slice(0,i),s="".concat("").concat(l).concat(r);if(s.length<=a.sA)return s}return"".concat("").concat(o()(n)).concat(r)}},82455:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(88263),a=t(71117);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M7.387 2.47a.75.75 0 0 1 0 1.06L4.811 6.107h13.618a.75.75 0 0 1 0 1.5H4.81l2.576 2.577a.75.75 0 1 1-1.06 1.06L2.47 7.388a.75.75 0 0 1 0-1.06L6.327 2.47a.75.75 0 0 1 1.06 0Zm9.226 10.285a.75.75 0 0 1 1.06 0l3.857 3.858a.75.75 0 0 1 0 1.06l-3.857 3.857a.75.75 0 0 1-1.06-1.06l2.576-2.577H5.571a.75.75 0 0 1 0-1.5H19.19l-2.576-2.577a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"})}))}},82733:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(12694),i=t(21462),o=t(80478),a=t(34834);function l(){var e=(0,a.A)().toolchain,n=(0,r._)((0,i.useState)(null),2),t=n[0],l=n[1];return(0,i.useEffect)(function(){var n=!1;return e.getRegistry().then(function(e){n||l(e)}).catch(function(e){o.vF.error("Toolchain: failed to get module registry: ".concat(e.message))}),function(){n=!0}},[e]),t}},82977:(e,n,t)=>{"use strict";t.d(n,{AH:()=>T,DX:()=>I,R_:()=>D,bM:()=>_,d3:()=>Y,fY:()=>E,m1:()=>x,tD:()=>C,vC:()=>L});var r=t(17844),i=t(12584),o=t(41114),a=t(86997),l=t(51026),s=t(50175);function c(){var e=(0,i._)(["\n  fragment WorkspaceSharedSecret on SharedSecret {\n    id\n    name\n    description\n    version\n    timeCreated\n    timeUpdated\n    owner {\n      __typename\n      ... on User {\n        id\n      }\n    }\n    value\n    signedUrl\n  }\n"]);return c=function(){return e},e}function u(){var e=(0,i._)(["\n  fragment WorkspaceSharedSecretLink on SharedSecretLink {\n    id\n    alias\n    secret {\n      ...WorkspaceSharedSecret\n    }\n  }\n  ","\n"]);return u=function(){return e},e}function d(){var e=(0,i._)(["\n  query SecretsPaneAuthorizations($replId: String!) {\n    getRepl(id: $replId) {\n      __typename\n      ... on Repl {\n        id\n        isOwner\n        authorizations {\n          editSecrets {\n            isAuthorized\n            message\n          }\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n"]);return d=function(){return e},e}function p(){var e=(0,i._)(["\n  query WorkspaceSecrets($secretsInput: SecretsInput) {\n    currentUser {\n      id\n      secrets(input: $secretsInput) {\n        ... on SharedSecretConnection {\n          items {\n            ...WorkspaceSharedSecret\n          }\n          pageInfo {\n            hasNextPage\n            hasPreviousPage\n            nextCursor\n            previousCursor\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return p=function(){return e},e}function f(){var e=(0,i._)(["\n  query ReplLinkedSecrets($replId: String!) {\n    getRepl(id: $replId) {\n      __typename\n      ... on Repl {\n        id\n        sharedSecretLinks {\n          ...WorkspaceSharedSecretLink\n        }\n      }\n    }\n  }\n  ","\n"]);return f=function(){return e},e}function h(){var e=(0,i._)(["\n  query WorkspaceAndReplLinkedSecrets($replId: String!) {\n    currentUser {\n      id\n      secrets {\n        ... on SharedSecretConnection {\n          items {\n            ...WorkspaceSharedSecret\n          }\n        }\n      }\n    }\n    getRepl(id: $replId) {\n      __typename\n      ... on Repl {\n        id\n        sharedSecretLinks {\n          ...WorkspaceSharedSecretLink\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return h=function(){return e},e}function m(){var e=(0,i._)(["\n  mutation LinkSharedSecrets($input: LinkSharedSecretsInput!) {\n    linkSharedSecrets(input: $input) {\n      ... on LinkSharedSecretsResult {\n        links {\n          ...WorkspaceSharedSecretLink\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return m=function(){return e},e}function g(){var e=(0,i._)(["\n  mutation UnlinkSharedSecrets($input: UnlinkSharedSecretsInput!) {\n    unlinkSharedSecrets(input: $input) {\n      ... on UnlinkSharedSecretsResult {\n        success\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n"]);return g=function(){return e},e}function v(){var e=(0,i._)(["\n  mutation UpdateSharedSecretLink($input: UpdateSharedSecretLinkInput!) {\n    updateSharedSecretLink(input: $input) {\n      ... on UpdateSharedSecretLinkOutput {\n        ...WorkspaceSharedSecretLink\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return v=function(){return e},e}var w={},y=(0,o.J1)(c()),b=(0,o.J1)(u(),y),S=(0,o.J1)(d());function Y(e){var n=(0,r._)({},w,e);return a.I(S,n)}var A=(0,o.J1)(p(),y);function x(e){var n=(0,r._)({},w,e);return a.I(A,n)}var C=(0,o.J1)(f(),b);function _(e){var n=(0,r._)({},w,e);return a.I(C,n)}var k=(0,o.J1)(h(),y,b);function D(e){var n=(0,r._)({},w,e);return a.I(k,n)}function E(e){var n=(0,r._)({},w,e);return l._(k,n)}var R=(0,o.J1)(m(),b);function I(e){var n=(0,r._)({},w,e);return s.n(R,n)}var F=(0,o.J1)(g());function T(e){var n=(0,r._)({},w,e);return s.n(F,n)}var P=(0,o.J1)(v(),b);function L(e){var n=(0,r._)({},w,e);return s.n(P,n)}},83227:(e,n,t)=>{"use strict";t.d(n,{A:()=>s});var r=t(21462),i=t(12694),o=t(13256),a=t(34834),l=t(34626);function s(e,n){var t,s,c,u,d,p=(t=(0,a.A)().container,c=(s=(0,i._)((0,r.useState)(null),2))[0],u=s[1],(0,r.useEffect)(function(){if(t)return t.onConnectionStateChanged(function(){u(t.getConnectionMetadata())})},[t]),d=c,(0,r.useMemo)(function(){return d?(0,o.pI)(d.token):null},[d]));(0,r.useEffect)(function(){if(e&&n){var t,r,i,o=(null==(t=e.origin)?void 0:t.__typename)==="Repl"?e.origin.id:null,a={id:e.id,slug:e.slug,originId:o,roles:n.roles&&n.roles.map(function(e){return e.name}),rootOriginReplUrl:e.rootOriginReplUrl,rootOriginReplReleaseId:null==(i=e.source)||null==(r=i.release)?void 0:r.id,tokenCluster:null==p?void 0:p.cluster};return(0,l.aq)(a),function(){(0,l.ve)()}}},[e,n,p])}},83647:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(88263),a=t(71117);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M12 21.75a.75.75 0 0 0 .75-.75V10.81l3.72 3.72a.75.75 0 1 0 1.06-1.06l-5-5a.75.75 0 0 0-1.06 0l-5 5a.75.75 0 1 0 1.06 1.06l3.72-3.72V21c0 .414.336.75.75.75Zm-9-12A.75.75 0 0 0 3.75 9V5A1.25 1.25 0 0 1 5 3.75h14A1.25 1.25 0 0 1 20.25 5v4a.75.75 0 0 0 1.5 0V5A2.75 2.75 0 0 0 19 2.25H5A2.75 2.75 0 0 0 2.25 5v4c0 .414.336.75.75.75Z",clipRule:"evenodd"})}))}},83719:(e,n,t)=>{"use strict";t.d(n,{A:()=>r});let r={sandbox:"allow-same-origin allow-forms allow-popups allow-popups-to-escape-sandbox allow-modals allow-downloads allow-downloads-without-user-activation allow-presentation allow-orientation-lock allow-pointer-lock allow-scripts",allow:"accelerometer; ambient-light-sensor; autoplay; battery; camera; display-capture; encrypted-media; execution-while-not-rendered; execution-while-out-of-viewport; fullscreen; gamepad; geolocation; gyroscope; layout-animations; legacy-image-formats; magnetometer; microphone; midi; navigation-override; oversized-images; payment; picture-in-picture; publickey-credentials; speaker-selection; sync-xhr; unoptimized-images; unsized-media; usb; screen-wake-lock; web-share; xr-spatial-tracking; clipboard-read; clipboard-write; pointer-lock",allowFullScreen:!0,allowtransparency:"true",allowpaymentrequest:"true",allowpopups:"true"}},83744:(e,n,t)=>{"use strict";t.d(n,{A:()=>r,b:()=>i});var r=function(e){return e.NOT_READY="NOT_READY",e.READY="READY",e.STALLED="STALLED",e.BROKEN="BROKEN",e}({}),i=function(e){return e.OFFLINE="OFFLINE",e.INITIALIZING="INITIALIZING",e.INITIALIZED="INITIALIZED",e.EXITING="EXITING",e.EXITED="EXITED",e}({})},83847:e=>{e.exports={userMessage:"Events_userMessage__Ne1GX",agentAction:"Events_agentAction__Mzw2m",expandButton:"Events_expandButton__A_x7E",eventMaxWidthContainer:"Events_eventMaxWidthContainer__9_aiy",planProposalEventMaxWidthContainer:"Events_planProposalEventMaxWidthContainer__yH92y"}},83942:(e,n,t)=>{"use strict";t.d(n,{A:()=>eJ});var r=t(29935),i=t(82643),o=t(21462),a=t(90629),l=t(37743);function s(e){return JSON.stringify({text:e})+"\n"}var c=function(){function e(){(0,l._)(this,e),this.list=[]}var n=e.prototype;return n.add=function(e,n,t){this.list.push({prefix:e,suggestion:n,tokens:t}),this.list.length>25&&this.list.pop(),this.list.sort(function(e,n){return n.suggestion.length-e.suggestion.length})},n.retrieve=function(e,n){for(var t=0;t<this.list.length;t++){var r=this.list[t],i=r.prefix,o=r.suggestion,a=r.tokens;if(2*a<n)continue;if(e===i)return s(o);if(i.length>e.length||i.length+o.length<=e.length||2*Math.floor((i.length+o.length-e.length)/(o.length/a))<n)continue;var l=o.lastIndexOf("\n");if(-1===l||!(l<=e.length-i.length)){var c=i+o;if(c.startsWith(e)){var u=c.slice(e.length);if(u.trim().length)return s(u)}}}return null},e}(),u=t(88776),d=t(49069),p=t(86005),f=t(40651),h=d.sj.define({combine:function(e){var n;return null!=(n=e.filter(Boolean)[0])?n:null}}),m=t(96860),g=t(73561),v=t(79835),w=t(18102),y=d.sU.define({create:function(){return null},update:function(e,n){if(n.annotation(w.A)||!n.state.field(g.RJ).stopped)return null;if(!n.docChanged&&!n.selection)return e;var t=n.newDoc,r=n.newSelection.main.head;return n.annotation(d.ZX.remote)?null!==e&&(0,m.Ph)(t,r)&&(0,m.$s)(t,r)?e:null:n.selection&&n.isUserEvent("select")?(0,m.Ph)(t,r)&&(0,m.$s)(t,r)?Date.now():null:n.docChanged&&null!==e?(0,m.Ph)(t,r)&&(0,m.$s)(t,r)?e:null:e}}),b=function(){function e(n){(0,l._)(this,e),this.view=n,this.timeout=null}var n=e.prototype;return n.update=function(e){var n=this,t=e.startState.field(y),r=e.state.field(y);t!==r&&(null!==this.timeout&&(clearTimeout(this.timeout),this.timeout=null),null!==r&&(this.timeout=setTimeout(function(){n.timeout=null,n.view.dispatch({effects:[v.hB.of(v.l9.NOW)]})},2500)))},n.destroy=function(){null!==this.timeout&&(clearTimeout(this.timeout),this.timeout=null)},e}(),S=p.Z9.fromClass(b,{provide:function(){return y}}),Y=t(48122),A=t(17844),x=t(93629),C=t(44725),_=t(57547),k=t(60930),D=function(e){return e[e.SUFFIX=2]="SUFFIX",e[e.HIGH=1]="HIGH",e[e.NORMAL=0]="NORMAL",e[e.LOW=-1]="LOW",e}({}),E=d.sj.define({combine:function(e){var n=e.filter(Boolean);return function(e){return n.map(function(n){return"function"==typeof n?n(e):n}).filter(Boolean).flat()}}}),R=function(){function e(n){if((0,l._)(this,e),this.priority=null!=(t=n.priority)?t:D.NORMAL,this.header=null!=(r=n.header)?r:"",this.segments=n.segments,this.accepted=0,this.curLength=0,this.segments.length){var t,r,i=this.header?this.header.length+1:0;this.maxLength=i+this.segments.reduce(function(e,n){return e+n.length},0),this.minLength=this.isSuffix?i+this.segments[0].length:i+this.segments[this.segments.length-1].length}else this.maxLength=0,this.minLength=0}var n=e.prototype;return n.acceptSegment=function(e){if(this.accepted===this.segments.length)return 0;var n=this.isSuffix?this.segments[this.accepted]:this.segments[this.segments.length-this.accepted-1],t=0===this.accepted&&this.header?this.header.length+n.length+1:n.length;return t>e?0:(this.accepted++,this.curLength+=t,t)},n.acceptAll=function(){this.accepted=this.segments.length,this.curLength=this.maxLength},n.finalize=function(){return 0===this.accepted?null:(this.header?this.header+"\n":"")+(this.isSuffix?this.segments.slice(0,this.accepted).join("").trimEnd():this.segments.slice(this.segments.length-this.accepted).join("").trimEnd())},e.acceptSegments=function(e,n){for(var t=n;n>0;){var r=!1,i=!0,o=!1,a=void 0;try{for(var l,s=e[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=l.value.acceptSegment(n);c&&(n-=c,r=!0)}}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}if(!r)break}return t-n},(0,Y._)(e,[{key:"isSuffix",get:function(){return this.priority===D.SUFFIX}}]),e}(),I=function(){function e(n){(0,l._)(this,e),this.priority=n,this.chunks=[],this.size=0}var n=e.prototype;return n.add=function(e){this.chunks.push(e),this.size+=e.maxLength},n.resize=function(e){if(e<this.accepted)throw Error("Cannot resize below already accepted");this.size=e},n.accept=function(){R.acceptSegments(this.chunks,this.size-this.accepted)},e.fromChunkViews=function(n){var t=[],r=new Map,i=!0,o=!1,a=void 0;try{for(var l,s=n[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=l.value,u=r.get(c.priority);u||(u=new e(c.priority),t.push(u),r.set(c.priority,u)),u.add(c)}}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}return t},(0,Y._)(e,[{key:"accepted",get:function(){return this.chunks.reduce(function(e,n){return e+n.curLength},0)}},{key:"empty",get:function(){return 0===this.size}}]),e}(),F=function(){function e(n,t){(0,l._)(this,e),this.cooldown=n,this.ignored=t}var n=e.prototype;return n.delay=function(n){return new e(Date.now()+n,this.ignored)},n.ignore=function(n){return this.ignored!==n?new e(this.cooldown,n):this},n.vent=function(){return null!==this.cooldown?new e(null,this.ignored):this},n.clear=function(){return null!==this.cooldown||null!==this.ignored?new e(null,null):this},n.tick=function(){return null!==this.cooldown&&Date.now()>this.cooldown?this.vent():this},n.handle=function(e,n){switch(n.reason){case g.UW.FULLY_TYPED_INTO:case g.UW.ACCEPTED_BY_USER:return this.clear();case g.UW.DISMISSED_BY_USER:return this.delay(5e3).ignore(e.suggestion.content);case g.UW.INCOMPATIBLE_DOCUMENT_CHANGE:case g.UW.INCOMPATIBLE_CURSOR_CHANGE:return e.suggestion.ctx.onEmptyLine?this.delay(5e3):this.delay(1e3)}return this},n.isIgnored=function(e){return null!==this.ignored&&function(e,n){for(var t=Math.max(e.length,n.length),r=0,i=0;i<t;i++)e[i]!==n[i]&&r++;return 1-r/t}(this.ignored,e)>=.8},(0,Y._)(e,[{key:"cooling",get:function(){return null!==this.cooldown&&Date.now()<this.cooldown}},{key:"remaining",get:function(){return null!==this.cooldown?Math.max(0,this.cooldown-Date.now()):0}}]),e}(),T=d.sj.define({combine:function(e){return!e.length||e[0]}}),P=d.sU.define({create:function(){return new F(null,null)},update:function(e,n){if(!n.state.facet(T)||(e=e.tick()).cooling)return e;var t=n.startState.field(g.RJ,!1),r=n.state.field(g.RJ,!1);return t&&r&&t.presented&&r.stopped?e.handle(t,r):e}}),L=t(46434),U=t(35602),N=t.n(U),O=["o17pu","o1gpu","ovgpu","ovgpure","ovgpuref","ovgpurf","ovgpuva","ovgpuvat","o!gpu","pnzfyhg","pnzjuber","puvap","puvax","pbba","pbbaf","phaavr","phag","phagsnpr","phagubyr","phagyvpx","phagyvpx","phagyvpxre","phagyvpxre","phagyvpxvat","phagyvpxvat","phagent","phagf","qnexvr","qngr encr","qngrencr","snt","sntont","sntt","snttvat","snttvg","snttvgg","snttbg","snttf","sntbg","sntbgf","sntf","sntgneq","sngnff","shpxgneq","shpxgneqf","tnat onat","tnatonat","tnatonatrq","tnatonatrq","tnatonatf","tnlgneq","tnljnq","tbngpk","tbngfr","tevatb","ubne","ubner","ubre","ubbxre","wnvy onvg","wnvyonvg","wnc","wvtnobb","wvttnobb","wvttreobb","xhag","y3v+pu","y3vgpu","yrzba cnegl","ybyvgn","a1ttn","a1ttre","anzoyn","arteb","avtt3e","avtt4u","avttn","avttnu","avttnf","avttnm","avttre","avttref","avtyrg","avt abt","dhrreonvg","dhrreubyr","encr","encvat","encvfg","ergneq","ehfxv","furznyr","fubgn","fxnax","fyhg","fyhgont","fyhgf","jrgonpx","juvgr cbjre","juber"],M=O.reduce(function(e,n){return Math.max(e,n.length)},0),B=new RegExp("(?:\\w+[^\\S\\n]*)?\\w*[^]{".concat(M,"}$")),H=null,z=function(){function e(n){var t=this;(0,l._)(this,e),this.config=n,this.finished=!1,this.abortController=new AbortController,this.suggestion="",this.promise=this.start(),this.abortController.signal.addEventListener("abort",function(){if(!t.finished){var e,n;t.finished=!0,null==(e=(n=t.config).onFinished)||e.call(n,null)}})}var n=e.prototype;return n.start=function(){var e=this;return(0,r._)(function(){var n,t,r,o,a,l,s,c,u,d,p,f,h,m,g,v,w,y,b;return(0,i.YH)(this,function(i){switch(i.label){case 0:i.trys.push([0,13,,14]),r=e.config.prefix.toString(),l=e.config.request({prefix:r,suffix:null!=(o=e.config.suffix)?o:void 0,header:null!=(a=e.config.header)?a:void 0,language:e.config.language,maxTokens:e.config.maxTokens,signal:e.abortController.signal}),s=!0,c=!1,u=!1,i.label=1;case 1:i.trys.push([1,6,7,12]),p=(0,L._)(l),i.label=2;case 2:return[4,p.next()];case 3:if(!(c=!(f=i.sent()).done))return[3,5];if(function(e,n){if(n){var t,r;"string"!=typeof n&&(n=n.sliceString(Math.max(0,n.length-2*M))),e=(null!=(r=null==(t=n.match(B))?void 0:t[0])?r:n)+e}if(null===H){var i=O.map(function(e){return e.replace(/[a-zA-Z]/g,function(e){return String.fromCharCode(e.charCodeAt(0)+("n">e.toLowerCase()?13:-13))})}).map(function(e){return N()(e.toLowerCase().trim())}).sort(function(e,n){return n.length-e.length}).join("|"),o="\\b|\\d|_";H=RegExp("(?:".concat(o,")(?:").concat(i,")(?:").concat(o,")"),"i")}return H.test(e)}(h=f.value,s?r:e.suggestion))return e.abort(),null==(m=(g=e.config).onError)||m.call(g,Error("Slur detected in output")),[3,5];if(e.suggestion+=h,e.config.onTextReceived&&!1===e.config.onTextReceived(e.suggestion,s))return e.abort(),[3,5];s=!1,i.label=4;case 4:return c=!1,[3,2];case 5:return[3,12];case 6:return v=i.sent(),u=!0,d=v,[3,12];case 7:if(i.trys.push([7,,10,11]),!(c&&null!=p.return))return[3,9];return[4,p.return()];case 8:i.sent(),i.label=9;case 9:return[3,11];case 10:if(u)throw d;return[7];case 11:return[7];case 12:return[3,14];case 13:return w=i.sent(),e.aborted||e.abort(),w instanceof DOMException&&"AbortError"===w.name||null==(y=(b=e.config).onError)||y.call(b,w),[3,14];case 14:if(e.aborted)return[2,null];return e.finished=!0,null==(n=(t=e.config).onFinished)||n.call(t,e.suggestion),[2,e.suggestion]}})})()},n.abort=function(){this.aborted||this.abortController.abort()},n.then=function(e,n){return this.promise.then(e,n)},(0,Y._)(e,[{key:"aborted",get:function(){return this.abortController.signal.aborted}}]),e}(),W=t(23753),G=t(93113),V=t(17290),j=function(){function e(n,t,r,i,o){(0,l._)(this,e),this.text=n,this.pos=t,this.docA=r,this.treeA=i,this.parser=o}var n=e.prototype;return n.hasTree=function(){return null!==this.parser&&null!==this.treeA},n.update=function(n){var t=this,r=new e(n,this.pos,this.docA,this.treeA,this.parser);if(r._line=this._line,r._onEmptyLine=this._onEmptyLine,r._inEmptyBlock=this._inEmptyBlock,r._blockA=this._blockA,this.parser&&this.treeA&&(this.reuseData||this._treeB)){var i=(0,V.s)(this.text,n),o=[];i.iterChanges(function(e,n,r,i,a){o.push({from:t.pos+e,to:t.pos+n,insert:a})});var a=d.VR.of(o,this.docB.length);this.reuseData&&!this._treeB?r.reuseData={diff:this.reuseData.diff.compose(a),docB:this.reuseData.docB,treeB:this.reuseData.treeB}:this._treeB&&(r.reuseData={diff:a,docB:this.docB,treeB:this._treeB})}return r},(0,Y._)(e,[{key:"line",get:function(){return void 0===this._line&&(this._line=this.docA.lineAt(this.pos)),this._line}},{key:"onEmptyLine",get:function(){return void 0===this._onEmptyLine&&(this._onEmptyLine=(0,m.Im)(this.line)),this._onEmptyLine}},{key:"changesAtoB",get:function(){return void 0===this._changesAtoB&&(this._changesAtoB=d.VR.of({from:this.pos,to:this.docA.length,insert:this.text},this.docA.length)),this._changesAtoB}},{key:"docB",get:function(){return void 0===this._docB&&(this._docB=this.reuseData?this.reuseData.diff.apply(this.reuseData.docB):this.changesAtoB.apply(this.docA)),this._docB}},{key:"treeB",get:function(){return void 0===this._treeB&&(this.treeA&&this.parser?this.reuseData?this._treeB=(0,G.B)({parser:this.parser,changes:this.reuseData.diff,text:this.docB,base:this.reuseData.treeB}):this._treeB=(0,G.B)({parser:this.parser,changes:this.changesAtoB,text:this.docB,base:this.treeA}):this._treeB=null),this._treeB}},{key:"inEmptyBlock",get:function(){return void 0===this._inEmptyBlock&&(this._inEmptyBlock=!!this.treeA&&(0,W.G2)(this.docA,this.treeA,this.pos)),this._inEmptyBlock}},{key:"blockA",get:function(){return void 0===this._blockA&&(this._blockA=this.treeA?(0,W.gJ)(this.treeA,this.pos):null),this._blockA}},{key:"blockB",get:function(){return void 0===this._blockB&&(this._blockB=this.treeB?(0,W.gJ)(this.treeB,this.pos):null),this._blockB}}]),e}(),Z=t(86105),q=t(18254);function K(e,n,t){var r,i=null!=(r=e.prop(n<0?q.uY.openedBy:q.uY.closedBy))?r:null;if(null===i||t&&!i.includes(t.name))if(!t)return null;else i=i?(0,Z._)(i).concat([t.name]):[t.name];return i}function $(e,n,t){var r=K(e.type,n,t);if(null===r)return null;for(var i=e.cursor(),o=0;n<0?i.prevSibling():i.nextSibling();){if(0===o&&i.from!==i.to&&r.includes(i.name))return i.node;if(null!==K(i.type,n)){o++;continue}if(null!==K(i.type,-n)){if(0===o)return null;o--}}return null}var J=t(24335),Q=/[([{]+(?=\s*$)/,X=function(){function e(n,t,r,i,o){(0,l._)(this,e),this.source=n,this.pos=t,this.newlines=r,this.content=i,this.ctx=o,this.empty=(0,m.Im)(i),this.text=this.empty?"":r+i,this.lines=(0,m.uz)(i)}var n=e.prototype;return n.with=function(n){var t=this.source,r=this.content,i=this.newlines;if("source"in n&&void 0!==n.source){t=n.source;var o=(0,m.BA)(t);r=o.indentation+o.content,i=o.newlines}if("text"in n&&void 0!==n.text){var a=(0,m.BA)(n.text);r=a.indentation+a.content,i=a.newlines}"content"in n&&void 0!==n.content&&(r=n.content),"newlines"in n&&void 0!==n.newlines&&(i=n.newlines);var l=this;if(t!==this.source||r!==this.content||i!==this.newlines){var s=this.ctx.update((0,m.Im)(r)?"":i+r);l=new e(t,this.pos,i,r,s)}return!l.empty&&n.process&&(l="boolean"==typeof n.process?l.process():l.process(n.process)),l},n.slice=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return t?this.with({text:this.text.slice(e,n)}):this.with({content:this.content.slice(e,n)})},n.splice=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=r?this.text:this.content,o=i.slice(0,e),a=i.slice(e+n);return r?this.with({text:o+t+a}):this.with({content:o+t+a})},n.clip=function(e){var n=!0,t=!1,r=void 0;try{for(var i,o=this.segments[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value;if(a.pos>=e)return this.slice(0,a.index+a.offset,!0)}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}return this},n.stopAtLine=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=n?this.newlines.length:0;if(e<0||e>this.lines.length+t)throw Error("Index out of range: "+e);if(n&&e<t)return this.with({text:this.newlines.slice(0,e)});for(var r=e-t;r<this.lines.length&&(0,m.zb)(this.lines[r]);)r++;var i=this.lines.slice(0,r).join("\n");return this.with({content:i})},n.trimEnd=function(){return this.with({content:this.content.trimEnd()})},n.removeNewlinesIfOnEmptyLine=function(){return this.newlines&&this.ctx.onEmptyLine?this.with({newlines:""}):this},n.cutSuggestion=function(){if(this.empty)return this;if((0,m.zb)(this.lines[0])||!this.ctx.hasTree())return this.stopAtLine(1);var e=(0,W.gu)(this.ctx.treeB,this.pos);if(!e.length)return this.stopAtLine(1);var n=this.pos+this.lines[0].length,t=this.ctx.inEmptyBlock?e:e.filter(function(e){return e.from<=n}),r=t.length?t[t.length-1].to-this.pos:null;return(null!==r&&r<0&&(r=null),this.ctx.blockB&&this.ctx.blockB.node.from<this.pos&&(null===r||r>this.ctx.blockB.node.to-this.pos)&&(this.ctx.inEmptyBlock||!this.ctx.blockA||this.ctx.blockA.node.from<this.ctx.blockB.node.from)&&(r=this.ctx.blockB.node.to-this.pos),null===r)?this.ctx.inEmptyBlock?this.ctx.blockA?this.clip(this.ctx.blockA.node.to):this:this.ctx.blockA?this.stopAtLine(1).clip(this.ctx.blockA.node.to):this.stopAtLine(1):this.ctx.blockA&&(this.ctx.inEmptyBlock||!this.ctx.onEmptyLine)?this.slice(0,r,!0).clip(this.ctx.blockA.node.to):this.slice(0,r,!0)},n.clearIfContentIsIsolated=function(){if(!this.ctx.onEmptyLine)return this;if(this.newlines)return this.with({content:""});if(1===this.segments.length&&0===this.segments[0].offset)return this;var e=this.segments.find(function(e){return!(0,m.Im)(e.text.slice(e.offset))});return e&&this.ctx.docA.lineAt(e.pos).number!==this.ctx.line.number?this.with({content:""}):this},n.removeDuplicateLastLine=function(){if(!this.newlines&&1===this.lines.length&&!this.ctx.onEmptyLine)return this;var e=this.segments[this.segments.length-1];if(e.offset===e.text.length-1)return this;var n=this.ctx.docA.lineAt(e.pos);if(n.number===this.ctx.docA.lines)return this;var t=e.text.slice(e.offset),r=t.lastIndexOf("\n"),i=-1!==r,o=i?e.index+e.offset+r:e.index+e.offset,a=i?t.slice(r+1):t;return(0,m.Im)(a)?this:(!i&&(0,m.Im)(n)&&(a=n.text+a),a===this.ctx.docA.line(n.number+1).text)?this.slice(0,o,!0):this},n.removeTrailingOpenBrackets=function(){var e=Q.exec(this.content);return e?this.splice(e.index,e.length):this},n.process=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.skipComplexProcessing?this.trimEnd().removeNewlinesIfOnEmptyLine():this.removeNewlinesIfOnEmptyLine().cutSuggestion().trimEnd().removeDuplicateLastLine().removeTrailingOpenBrackets().trimEnd().clearIfContentIsIsolated()},e.create=function(n,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=(0,m.BA)(n),l=a.indentation+a.content,s=a.newlines,c=new j((0,m.Im)(l)?"":s+l,t,r,i,o);return new e(n,t,s,l,c)},(0,Y._)(e,[{key:"segments",get:function(){if(void 0===this._segments){if(this.ctx.hasTree()){var e,n=function(e){var n=function(e){var n,t,r,i,o=e.insertion,a=e.pos;if("doc"in e){var l=e.parser;n=e.doc,t=e.tree;var s=d.VR.of({from:a,to:n.length,insert:o},n.length);r=s.apply(n),i=(0,G.B)({parser:l,changes:s,text:r,base:t})}else n=e.docA,t=e.treeA,r=e.docB,i=e.treeB;return{insertion:o,pos:a,docA:n,treeA:t,docB:r,treeB:i}}(e),t=n.insertion,r=n.pos,i=n.docA,o=n.treeA,a=n.docB,l=n.treeB,s=[],c=[],u=l.cursor();do{if(null===K(u.type,-1))continue;var p=u.node,f=$(p,-1);if(f&&f.to<=r){var h=function(e,n){for(var t=n.resolveInner(e.from,1).node;t&&t.from===e.from;){if(t.type===e.type)return t;t=t.parent}return null}(f,o);if(h){s.push({openA:h,closeB:p});var m=$(h,1,p.type);m&&m.from>=r&&c.push(m)}}}while(u.prev()&&u.to>r);if(0===s.length||0===c.length)return null;var g=[],v=!0,w=!1,y=void 0;try{for(var b,S=s[Symbol.iterator]();!(v=(b=S.next()).done);v=!0){var Y=b.value,A=Y.openA,x=Y.closeB,C=a.sliceString(x.from,x.to),_=K(A.type,1,x.type);if(null===_)throw Error("Unexpected null matching types");for(var k=0;k<c.length;k++){var D=c[k];if(_.includes(D.name)&&i.sliceString(D.from,D.to)===C){c.splice(0,k+1),g.unshift({closeA:D,closeB:x});break}}}}catch(e){w=!0,y=e}finally{try{v||null==S.return||S.return()}finally{if(w)throw y}}if(0===g.length)return null;var E=[{text:t,pos:r,index:0,offset:0}],R=0,I=!0,F=!1,T=void 0;try{for(var P,L=g[Symbol.iterator]();!(I=(P=L.next()).done);I=!0){var U=P.value,N=U.closeA,O=U.closeB,M=E.pop();if(!M)throw Error("Unexpected empty split");var B=O.from-r,H=0;if(M.pos<N.from){for(var z=1;function(e,n,t,r){var i=e.sliceString(t,t+1);return i===n.sliceString(r,r+1)&&""===i.trim()}(i,a,N.from-z,O.from-z)&&N.from-z>=M.pos&&O.from-z>=r;)z++;H=z-1}B-=H;var W={text:t.slice(R,B),pos:M.pos,index:M.index,offset:M.offset},V={text:t.slice(B),pos:N.to,index:B,offset:N.to-N.from+H};R=B,E.push(W,V)}}catch(e){F=!0,T=e}finally{try{I||null==L.return||L.return()}finally{if(F)throw T}}return""===E[E.length-1].text&&E.pop(),E}({insertion:this.text,pos:this.pos,docA:this.ctx.docA,treeA:this.ctx.treeA,docB:this.ctx.docB,treeB:this.ctx.treeB});n&&(this._segments=n)}null!=this._segments||(this._segments=[{text:this.text,index:0,pos:this.pos,offset:0}])}return this._segments}},{key:"insertions",get:function(){if(void 0===this._insertions){var e=new d.vB,n=!0,t=!1,r=void 0;try{for(var i,o=this.segments[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value,l=d.EY.of((0,m.uz)(a.text)),s=new J.kp(l,a.offset);e.add(a.pos,a.pos,s)}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}this._insertions=e.finish()}return this._insertions}}]),e}(),ee=t(5553),en=function(){function e(n){(0,l._)(this,e),this.view=n,this.destroyed=!1,this.stream=null,this.debounceTimeout=null,this.queued=!1,this.lastPrefixLength=0}var n=e.prototype;return n.dispatchSuggestion=function(e){this.view.dispatch({effects:g.xq.of(e)})},n.dismiss=function(e){this.queued=!1,null!==this.debounceTimeout&&(clearTimeout(this.debounceTimeout),this.debounceTimeout=null),!this.stream||this.stream.finished||this.stream.aborted||this.stream.abort(),this.destroyed||this.suggestion.stopped||this.dispatchSuggestion(this.suggestion.dismiss(e)),this.listeners.onDismiss(this.view)},n.requestSuggestion=function(e){var n,t,r=this;if(null!==this.config&&null!==this.fileTypeConfig){if(null!==this.debounceTimeout&&(clearTimeout(this.debounceTimeout),this.debounceTimeout=null),!this.config.debounceAlways&&!this.regulator.cooling&&e===v.l9.NOW)return void this.requestSuggestionImmediately();var i=this.view.state.selection.main.head,o=this.view.state.wordAt(i),a=o&&o.from!==i?null!=(t=this.config.debounceTimeInsideWord)?t:0:null!=(n=this.config.debounceTimeOutsideWord)?n:0;this.regulator.cooling&&(a=Math.max(a,this.regulator.remaining)),0===a?this.requestSuggestionImmediately():this.debounceTimeout=setTimeout(function(){r.debounceTimeout=null,r.requestSuggestionImmediately()},a)}},n.requestSuggestionImmediately=function(){var e,n,t,r=this;if(this.dismiss(),!this.suggestion.stopped)throw Error("dismiss should have stopped the suggestion");if(null!==this.config&&null!==this.fileTypeConfig&&!this.destroyed&&this.view.hasFocus&&(0,m.Ph)(this.view.state.doc,this.view.state.selection.main.head)){var i=this.config,o=this.view.state,l=o.selection.main.head,s=o.doc,c=(0,C.mv)(o),d=null!=(n=null==(e=o.facet(C.BH))?void 0:e.parser)?n:null,p=this.fileTypeConfig,f={skipComplexProcessing:null!=(t=p.skipComplexProcessing)&&t},h=o.facet(E),w=function(e){var n=e.doc,t=e.pos,r=e.path,i=e.context,o=e.limit,a=void 0===o?u.HB:o,l=e.reserved,s=void 0===l?u.CB:l,c="-- ".concat(r,"\n");if(c.length>a)throw Error("Cannot fit required header parts in prompt");var d="";if(null==i?void 0:i.length){var p=function(e,n){if((n-=2*e.length)<=0)return null;var t=e.map(function(e){return new R(e)}).filter(function(e){return e.maxLength>0&&e.minLength<=n}).sort(function(e,n){return e.priority===n.priority?e.minLength-n.minLength:n.priority-e.priority});if(!t.length)return null;var r=I.fromChunkViews(t),i=r.reduce(function(e,n){return e+n.size},0);if(i>n){var o=!0,a=!1,l=void 0;try{for(var s,c=r[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var u=s.value;u.size>n&&(i-=u.size-n,u.resize(n))}}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}for(var d=r.find(function(e){return e.priority===D.SUFFIX}),p=d?n-d.size:0;i>n;){var f=1,h=!0,m=!1,g=void 0;try{for(var v,w=r[Symbol.iterator]();!(h=(v=w.next()).done);h=!0){var y=v.value;if(p&&y.priority===D.SUFFIX){p--;continue}if(!y.empty){var b=Math.max(0,y.size-f);i-=y.size-b,y.resize(b),f++}}}catch(e){m=!0,g=e}finally{try{h||null==w.return||w.return()}finally{if(m)throw g}}}var S=!0,Y=!1,A=void 0;try{for(var x,C=r[Symbol.iterator]();!(S=(x=C.next()).done);S=!0){var _=x.value;_.empty||_.accept()}}catch(e){Y=!0,A=e}finally{try{S||null==C.return||C.return()}finally{if(Y)throw A}}var k=r.reduce(function(e,n){return e+n.accepted},0);k<n&&R.acceptSegments(t,n-k)}else t.forEach(function(e){return e.acceptAll()});var E=t.filter(function(e){return e.priority===D.SUFFIX}).map(function(e){return e.finalize()}).filter(Boolean).join("")||null,F=t.filter(function(e){return e.priority!==D.SUFFIX}).map(function(e){return e.finalize()}).filter(Boolean).reverse().join("\n\n")||null;return F||E?{context:F,suffix:E}:null}(i,Math.max(s-c.length-2,a-t-c.length-2));(null==p?void 0:p.context)&&(c=(null==p?void 0:p.context)+"\n\n"+c),(null==p?void 0:p.suffix)&&(d=null==p?void 0:p.suffix)}var f=function(e,n,t){for(var r=e.slice(0,n);r.length>t;)r=r.lines>1?r.slice(r.line(1).to+1):r.slice(r.length-t);return r}(n,t,a-c.length-d.length);if(c.length+f.length+d.length>a)throw Error("Prompt is over the maximum length");return{prefix:f,suffix:d,header:c}}({doc:s,pos:l,path:p.path,context:h(this.view)}),y=w.prefix,b=w.suffix,S=w.header,Y=(0,W.G2)(s,c,l)?u.nm.EMPTY_BLOCK:u.nm.DEFAULT;this.lastPrefixLength=y.length,i.backendOnly||this.dispatchSuggestion(this.suggestion.start()),this.stream=new z({request:i.request,language:p.id,maxTokens:Y,prefix:y,suffix:b,header:S,onTextReceived:function(e,n){if(n&&r.listeners.onRequestFirstEmit(r.view),i.backendOnly)return void r.listeners.onRequestIgnoredBackendOnly(r.view);if(r.suggestion.stopped||!n&&r.suggestion.slotted)return!1;var t=r.suggestion.slotted?r.suggestion.upgrade(X.create(e,l,s,c,d).process(f)):r.suggestion.with({source:e,process:f});if(t.stopped||t.suggestion.empty)return!1;r.dispatchSuggestion(t)},onFinished:function(e){var n=r.queued;if(r.queued=!1,!i.backendOnly){if(e&&r.suggestion.active){var t=r.suggestion.suggestion.source!==e?r.suggestion.with({source:e,process:f}):r.suggestion;if(!t.stopped&&!t.suggestion.empty&&!r.regulator.isIgnored(t.suggestion.content)){r.dispatchSuggestion(t.presented?t:t.present()),r.listeners.onRequestCompletelyPresented(r.view);return}}r.dismiss(g.UW.INCOMPATIBLE_SUGGESTION),n&&r.requestSuggestion(v.l9.ENQUEUE),""===e&&r.listeners.onRequestEndedWithNoSuggestion(r.view)}},onError:function(e){a.v4(function(n){n.setExtra("prefix",y.toString()),n.setExtra("suffix",null==b?void 0:b.toString()),n.setExtra("header",S),n.setExtra("maxTokens",Y),n.setExtra("filePath",p.path),n.setExtra("language",p.id),n.setExtra("selection-head",l),n.setExtra("previous-character",s.sliceString(l-1,l)),n.setTag("ghostwriter",!0),a.Cp(e)})}})}},n.postUpdate=function(e){var n=e.startState.field(g.RJ,!1),t=e.state.field(g.RJ,!1);n&&t&&n.presented&&t.stopped&&t.reason===g.UW.FULLY_TYPED_INTO&&this.listeners.onSuggestionAccepted(this.view,n),(0,_.$H)(e,h,ee.Md,ee.O7)&&this.dismiss(),(0,_.$H)(e,g.RJ)&&this.suggestion.stopped&&this.streaming&&this.dismiss();var r=(0,v.SQ)(e.transactions);switch(r){case v.l9.STOP:this.active&&this.dismiss();break;case v.l9.ENQUEUE:case v.l9.NOW:this.active?this.queued=!0:this.requestSuggestion(r)}},n.destroy=function(){this.destroyed=!0,this.dismiss()},(0,Y._)(e,[{key:"config",get:function(){return this.view.state.facet(h)}},{key:"listeners",get:function(){return this.view.state.facet(k.q)}},{key:"suggestion",get:function(){return this.view.state.field(g.RJ)}},{key:"regulator",get:function(){return this.view.state.field(P)}},{key:"fileTypeConfig",get:function(){var e,n=this.view.state.facet(ee.Md),t=this.view.state.facet(ee.O7),r=null==t||null==(e=t.getFeature("ai"))?void 0:e.complete;return n&&t&&(null==r?void 0:r.enabled)?(0,x._)((0,A._)({},r),{id:t.id,path:n}):null}},{key:"streaming",get:function(){return null!==this.debounceTimeout||null!==this.stream&&!this.stream.finished}},{key:"active",get:function(){return this.streaming||!this.suggestion.stopped}}]),e}(),et=p.Z9.fromClass(en,{provide:function(e){return p.Lz.updateListener.of(function(n){var t;null==(t=n.view.plugin(e))||t.postUpdate(n)})}}),er=function(){function e(n){(0,l._)(this,e),this.view=n,this.gesture=null,this.touchstart=this.touchstart.bind(this),this.touchmove=this.touchmove.bind(this),this.touchend=this.touchend.bind(this),this.touchcancel=this.touchcancel.bind(this),n.dom.addEventListener("touchstart",this.touchstart)}var n=e.prototype;return n.shouldAllowSwiping=function(){if(!this.view.hasFocus)return!1;var e=this.view.state.selection.main.head,n=this.view.viewport;if(n.from>e||n.to<e)return!1;var t=this.view.state.field(g.RJ,!1);return!!(null==t?void 0:t.presented)},n.stop=function(){this.gesture&&(this.gesture=null,document.removeEventListener("touchmove",this.touchmove),document.removeEventListener("touchend",this.touchend),document.removeEventListener("touchcancel",this.touchcancel))},n.touchFor=function(e){if(!this.gesture)return null;var n=!0,t=!1,r=void 0;try{for(var i,o=e.changedTouches[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value;if(a.identifier===this.gesture.id)return a}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}return null},n.touchstart=function(e){if(this.gesture&&!this.gesture.time)return this.stop();if(!this.gesture&&this.shouldAllowSwiping()&&1===e.changedTouches.length){var n=e.changedTouches[0];this.gesture={id:n.identifier,start:{x:n.clientX,y:n.clientY},end:{x:n.clientX,y:n.clientY},time:null},document.addEventListener("touchmove",this.touchmove,{passive:!1}),document.addEventListener("touchend",this.touchend,{passive:!1}),document.addEventListener("touchcancel",this.touchcancel)}},n.touchmove=function(e){var n=this.touchFor(e);if(this.gesture&&n){if(this.gesture.end.x=n.clientX,this.gesture.end.y=n.clientY,this.gesture.time&&Date.now()-this.gesture.time>500)return this.stop();var t=Math.abs(this.gesture.start.y-this.gesture.end.y),r=Math.abs(this.gesture.start.x-this.gesture.end.x);if(t>20)return this.stop();if(r>10){if(this.gesture.start.x>this.gesture.end.x)return this.stop();this.gesture.time||(this.gesture.time=Date.now()),e.preventDefault()}}},n.touchend=function(e){var n=this.touchFor(e);if(this.gesture&&n){this.gesture.end.x=n.clientX,this.gesture.end.y=n.clientY;var t=Math.abs(this.gesture.start.y-this.gesture.end.y),r=Math.abs(this.gesture.start.x-this.gesture.end.x);t<=20&&r>75&&this.gesture.start.x<this.gesture.end.x&&(!this.gesture.time||Date.now()-this.gesture.time<500)&&((0,f.R)(this.view),e.preventDefault()),this.stop()}},n.touchcancel=function(e){this.touchFor(e)&&this.stop()},n.update=function(){this.gesture&&!this.shouldAllowSwiping()&&this.stop()},n.destroy=function(){this.view.dom.removeEventListener("touchstart",this.touchstart),document.removeEventListener("touchmove",this.touchmove),document.removeEventListener("touchend",this.touchend),document.removeEventListener("touchcancel",this.touchcancel)},e}(),ei=p.Z9.fromClass(er),eo=t(24365),ea=d.sj.define({combine:function(e){var n;return null!=(n=e.filter(Boolean)[0])?n:null},enables:function(e){return[h.compute([e],function(n){return n.facet(e)}),g.RJ,v.Lf,et,ei,S,P,d.Nb.high(p.w4.compute([e],function(n){var t=n.facet(e),r=[];return(null==t?void 0:t.keyAcceptSuggestion)&&r.push({key:(0,eo.bK)(t.keyAcceptSuggestion),run:f.R}),(null==t?void 0:t.keyDismissSuggestion)&&r.push({key:(0,eo.bK)(t.keyDismissSuggestion),run:f.b}),r}))]}}),el=t(56902),es=t(51030),ec=[];function eu(e){if(!(e.length>800)){var n=ec.indexOf(e);-1!==n&&ec.splice(n,1),ec.unshift(e),ec.length>10&&ec.pop()}}var ed=!1;function ep(e,n){var t=(0,es.i)(n.state),r=t.text,i=t.linewise;if(r&&r.trim())if(i){var o=r.split(n.state.lineBreak).filter(function(e){return e.trim()}),a=!0,l=!1,s=void 0;try{for(var c,u=o[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var d=c.value;eu(d)}}catch(e){l=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw s}}}else eu(r)}var ef=[p.Z9.define(function(){if(!ed){ed=!0;var e=function(e){var n,t=null==(n=document.getSelection())?void 0:n.toString();t&&t.trim()&&Promise.resolve().then(function(){e.defaultPrevented||eu(t)})};document.addEventListener("copy",e),document.addEventListener("cut",e)}return{}}),d.Nb.highest(p.Lz.domEventObservers({copy:function(e,n){return ep(e,n)},cut:function(e,n){return ep(e,n)}})),E.of(function(e){if(!ec.length||!e.state.facet(ee.O7))return null;var n=(0,el._)(ec),t=n[0],r=n.slice(1),i=[];if(t&&t.trim()){var o=t.trimEnd();i.push({header:"-- Current Clipboard",segments:[o],priority:D.HIGH})}var a=r.filter(function(e){return e&&e.trim()});if(a.length){var l=a.map(function(e){return e.trimEnd().split("\n").map(function(e,n){return 0===n?"- ".concat(e):"  ".concat(e)}).join("\n")}).reverse();i.push({header:"-- Clipboard History",segments:l})}return i.length?i:null})],eh=t(12694),em=t(42377),eg=t(94626),ev=t(45912),ew=t(83150),ey=/\n\n(?![^\S\n])/g,eb=new(function(){function e(){(0,l._)(this,e),this.map=new Map}var n=e.prototype;return n.removeExpired=function(){if(this.map.size){var e=Date.now(),n=!0,t=!1,r=void 0;try{for(var i,o=this.map.entries()[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=(0,eh._)(i.value,2),l=a[0],s=a[1];e-s.timestamp>6e4&&this.map.delete(l)}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}}},n.get=function(e){return this.removeExpired(),this.map.get(e)},n.add=function(e,n,t){if(this.removeExpired(),!this.map.has(e)&&10===this.map.size){var r=null,i=!0,o=!1,a=void 0;try{for(var l,s=this.map.values()[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=l.value;(!r||c.timestamp<r.timestamp)&&(r=c)}}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}if(!r)throw Error("Expected to find entry to remove from file cache");this.map.delete(r.path)}this.map.set(e,{path:e,type:n,content:t,timestamp:Date.now()})},n.clear=function(){this.map.clear()},e}()),eS=function(){function e(n,t,r){var i=this;(0,l._)(this,e),this.view=n,this.readFile=t,this.recentFiles=r,this.destroyed=!1,this.chunks=[],this.dispose=r.subscribe(function(){return i.updateChunks()}),r.current.length&&this.updateChunks()}var n=e.prototype;return n.updateChunks=function(){var e=this;return(0,r._)(function(){var n,t,r,o,a,l,s,c,u,d,p,f,h,g,v,w,y,b,S,Y,A,x,C,_,k,E,R,I;return(0,i.YH)(this,function(i){switch(i.label){case 0:if(e.chunks=r=[],o=e.view.state.facet(ee.Md),a=e.view.state.facet(ee.O7),!o||!a)return[2];"all"===(s=null!=(l=null==(t=a.features.ai)||null==(n=t.complete)?void 0:n.groups)?l:[])&&(s=[]),c=e.recentFiles.current.filter(function(e){return e!==o&&(0,ew.m6)(e)}),u=!0,d=!1,p=void 0,i.label=1;case 1:i.trys.push([1,7,8,9]),f=c[Symbol.iterator](),i.label=2;case 2:if(u=(h=f.next()).done)return[3,6];if(g=h.value,Y=null==(S=null!=(b=null==(y=eb.get(g))?void 0:y.type)?b:ev.Jh.from(g))||null==(v=S.features.ai)?void 0:v.complete,!S||!(null==Y?void 0:Y.enabled)||!(S.id===a.id||"all"===Y.groups||(null==(w=Y.groups)?void 0:w.some(function(e){return s.includes(e)}))))return[3,5];if(void 0!==(A=null==y?void 0:y.content))return[3,4];return[4,e.readFile(g)];case 3:if(x=i.sent(),e.destroyed||e.chunks!==r)return[2];if(null===x)return[3,5];A=x,eb.add(g,S,A),i.label=4;case 4:var F;if(!(C=!(F=(F=A).trim())?[]:F.split(ey).map(function(e){return e.trim()}).filter(Boolean)).length)return[3,5];if(_="-- ".concat((0,em.Aj)(g,o)),k=C.map(function(e){return(0,m.uz)(e).join("\n")+"\n\n"}),E=r.length,R=D.NORMAL,E<2?R=D.HIGH:E>=5&&(R=D.LOW),r.push({header:_,segments:k,priority:R}),r.length>=10)return[3,6];i.label=5;case 5:return u=!0,[3,2];case 6:return[3,9];case 7:return I=i.sent(),d=!0,p=I,[3,9];case 8:try{u||null==f.return||f.return()}finally{if(d)throw p}return[7];case 9:return[2]}})})()},n.update=function(e){(0,_.$H)(e,ee.Md,ee.O7)&&this.updateChunks()},n.destroy=function(){this.destroyed=!0,this.dispose()},e}(),eY=new eg.k(function(e,n){return e&&n?p.Z9.define(function(t){return new eS(t,e,n)},{provide:function(e){return E.of(function(n){var t,r;return null!=(r=null==(t=n.plugin(e))?void 0:t.chunks)?r:null})}}):null}),eA=E.of(function(e){var n=e.state.selection.main.head,t=e.state.doc.slice(n);if(0===t.length)return null;if(1===t.lines){var r=t.toString();return""===r.trim()?null:{segments:[r],priority:D.SUFFIX}}for(var i=[],o=1;o<=t.lines;o++)i.push(t.line(o).text+"\n");for(;i.length&&""===i[i.length-1].trim();)i.pop();return 0===i.length?null:{segments:i,priority:D.SUFFIX}}),ex=t(26608),eC=t(41989),e_=t(54319),ek={production:"https://production-ai-modelservice.replit.com",staging:"https://staging-ai-modelservice.replit.com"};function eD(){return(eD=(0,eC._)(function(e){var n,t,r,o;return(0,i.YH)(this,function(i){switch(i.label){case 0:n=e.getReader(),i.label=1;case 1:return[4,(0,ex._)(n.read())];case 2:if(r=(t=i.sent()).done,o=t.value,r)return[3,4];return[4,o];case 3:return i.sent(),[3,1];case 4:return n.releaseLock(),[2]}})})).apply(this,arguments)}function eE(){return(eE=(0,eC._)(function(e){var n,t,r,o,a,l,s,c,u,d,p,f,h,m;return(0,i.YH)(this,function(i){switch(i.label){case 0:n=new TextDecoder("utf-8"),t="",r=!1,o=!1,i.label=1;case 1:i.trys.push([1,11,12,17]),l=(0,L._)(function(e){return eD.apply(this,arguments)}(e)),i.label=2;case 2:return[4,(0,ex._)(l.next())];case 3:if(!(r=!(s=i.sent()).done))return[3,10];c=s.value,u=n.decode(c,{stream:!0}),t+=u,d=void 0,i.label=4;case 4:if(-1===(d=t.indexOf("\n\n")))return[3,9];if(!t.startsWith("data: ")||!("text"in(p=JSON.parse(t.slice(6,d)))))return[3,8];f=p.text.split("\n"),h=0,i.label=5;case 5:if(!(h<f.length))return[3,8];return[4,JSON.stringify({text:f[h]+"\n"})+"\n"];case 6:i.sent(),i.label=7;case 7:return h++,[3,5];case 8:return t=t.substring(d+1),[3,4];case 9:return r=!1,[3,2];case 10:return[3,17];case 11:return m=i.sent(),o=!0,a=m,[3,17];case 12:if(i.trys.push([12,,15,16]),!(r&&null!=l.return))return[3,14];return[4,(0,ex._)(l.return())];case 13:i.sent(),i.label=14;case 14:return[3,16];case 15:if(o)throw a;return[7];case 16:return[7];case 17:return[2]}})})).apply(this,arguments)}var eR=t(58912),eI=t(34626),eF=t(74094),eT=new Map,eP={beforeCompletion:function(e){a.ZQ({category:"ghostwriter",message:"Called completeCode",level:"debug"});var n=eF.gv.add(e),t=eI.vF.timeStart({replid:e.replId,codeLength:e.header?e.header.length+e.prefix.length:e.prefix.length});return eT.set(n,t),n},afterCompletion:function(e,n,t,r){switch(e){case"aborted":eF.gv.abort(r),eT.delete(r);break;case"success":a.ZQ({category:"ghostwriter",message:"Suggestion emitted: "+t.partialSuggestion,level:"debug"});var i,o=eT.get(r);if(!o)throw Error("No latency logger found for handle: "+JSON.stringify(r));o("code suggestion",{type:"success",fromCache:t.fromCache,length:null==(i=t.partialSuggestion)?void 0:i.length}),eT.delete(r);break;case"finished":eF.gv.complete(r,{__typename:"CompleteCodeResult",id:Date.now().toString(),code:t.completeSuggestion});break;default:throw Error("Unknown completion kind: "+e)}},erroredCompletion:function(e,n){n&&(eF.gv.abort(n),eT.delete(n)),eI.vF.error("CompleteCode: error in completion provider",{err:String(e)})}},eL=t(44370),eU=t(69338),eN=t(5504),eO=t(77958),eM="ai.codecomplete.lastTooltipHintTimestamp",eB=(0,eL.eU)({tooltipOpen:!1,consecutiveRejections:0}),eH=t(53231),ez=t(89318),eW=t(20828),eG=t(31062),eV=t(29383),ej=t(34834),eZ=t(29531),eq=t(3752),eK=new eg.k(function(e,n,t,r,i,o,a,l){var s,c;return e?(n===eR.DB.Pro?(s=u.M,c=u.M):(s=o,c=o),[ea.of({request:i,backendOnly:n===eR.DB.BackendOnly,debounceTimeOutsideWord:s,debounceTimeInsideWord:c,debounceAlways:n!==eR.DB.Pro,keyAcceptSuggestion:t,keyDismissSuggestion:r}),a?ef:[],l?[]:T.of(!1),eA]):null}),e$=new eg.k(function(e,n,t){if(!e)return null;var r,i,o,l=(r="suggestionPresented",i=null,o=function(){},{queue:function(e){if(!(Math.random()>.1)){i&&clearTimeout(i);var n=function(){(0,eH.u4)(eH.AZ.CODE_SUGGESTION_USED,(0,A._)({type:r},e))};i=setTimeout(n,500),o=n}},flush:function(){i&&clearTimeout(i),o()},cancel:function(){i&&clearTimeout(i)}});return k.q.of({onDismiss:function(){l.cancel()},onRequestIgnoredBackendOnly:function(){a.ZQ({category:"ghostwriter",message:"called completeCode for free user but did not show the ghost text.",level:"info"}),(0,eH.u4)(eH.AZ.CODE_SUGGESTION_USED,{type:"suggestionNotPresented",filePath:n,reason:"ghostTextNotEnabledForFreeUser"})},onRequestFirstEmit:function(e){var t=e.plugin(et);t&&(a.ZQ({category:"ghostwriter",message:"Suggestion presented",level:"debug"}),l.queue({filePath:n,prefixLength:t.lastPrefixLength}))},onRequestEndedWithNoSuggestion:function(){a.ZQ({category:"ghostwriter",message:"Exited completeCode iteration with no suggestion.",level:"info"}),(0,eH.u4)(eH.AZ.CODE_SUGGESTION_USED,{type:"suggestionNotPresented",filePath:n,reason:"noSuggestion"})},onSuggestionAccepted:function(e,r){var i=e.plugin(et);i&&(l.flush(),(0,eH.u4)(eH.AZ.CODE_SUGGESTION_USED,{type:"suggestionAccepted",filePath:n,prefixLength:i.lastPrefixLength,suggestionLength:r.suggestion.content.length}),a.ZQ({category:"ghostwriter",message:"Suggestion accepted",level:"info"}),null==t||t.recordAccept())},onSuggestionExplicitlyDismissed:function(e){var r=e.plugin(et);r&&(l.flush(),(0,eH.u4)(eH.AZ.CODE_SUGGESTION_USED,{type:"suggestionDismissed",filePath:n,prefixLength:r.lastPrefixLength}),a.ZQ({category:"ghostwriter",message:"Suggestion explicitly dismissed",level:"info"}),null==t||t.recordReject())}})});function eJ(e){var n,t,a,l,s,d,p,f,h,m,g,v=e.filePath,w=(0,ej.A)().fs,y=(0,eG.A)(),b=(0,eW.g)("codeSuggestion").preferences,S=(0,eR.Ay)(),Y=b.codeSuggestion&&S!==eR.DB.None;(0,o.useEffect)(function(){eF.gv.toggle(Y)},[Y]);var C=(0,eZ.Jn)(ez.Pi.acceptPrimaryCompletion.id),_=(0,eZ.Jn)(ez.Pi.cancelCompletion.id),k=(0,eV.A)(function(){return new c},[v,y]),D=(t=(n={replId:y,provider:(0,eV.A)(function(){var e;return e=(0,r._)(function(e,n){var t,r,o,a,l,s,c,u,d;return(0,i.YH)(this,function(i){switch(i.label){case 0:return t=(0,e_.lJ)()?ek.production:ek.staging,[4,(0,e_.j2)(e.replId,"completions-1")];case 1:return r=i.sent(),o={model:"codestral-2501",context:e.header?e.header+e.prefix:e.prefix,suffix:e.suffix,max_tokens:e.maxTokens,stop_words:e.stop},[4,fetch("".concat(t,"/completions"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},signal:n,body:JSON.stringify(o)})];case 2:if(l=(a=i.sent()).body,200===(s=a.status))return[3,4];return c=Error.bind,d=(u="Error (".concat(s,") response from /ai/complete: ")).concat,[4,a.text()];case 3:throw new(c.apply(Error,[void 0,d.apply(u,[i.sent()])]));case 4:if(!l)throw Error("No body in response");return[2,function(){return function(e){return eE.apply(this,arguments)}(l)}]}})}),function(n,t){return e.apply(this,arguments)}},[]),cache:k,hooks:eP}).replId,a=n.provider,l=n.cache,s=n.hooks,(0,o.useCallback)((d=(0,eC._)(function(e){var n,r,o,c,u,d,p,f,h,m,g,v,w,y,b,S,Y,A,x,C,_,k,D,E;return(0,i.YH)(this,function(R){switch(R.label){case 0:if(n=e.prefix,r=e.suffix,o=e.header,c=e.language,u=e.maxTokens,d=e.signal,!n)return[2];if(p={prefix:n,suffix:r,header:o,maxTokens:u,replId:t,stop:["\n\n","```"]},"markdown"===c&&(p.maxTokens=75,p.stop=[]),f=null==s?void 0:s.beforeCompletion(p),null===(m=l.retrieve(n,u)))return[3,1];return h=(0,eC._)(function(){return(0,i.YH)(this,function(e){switch(e.label){case 0:return[4,m];case 1:return e.sent(),[2]}})}),[3,4];case 1:return R.trys.push([1,3,,4]),[4,(0,ex._)(a(p,d))];case 2:return h=R.sent(),[3,4];case 3:if((null==(g=R.sent())?void 0:g.name)==="AbortError")return[2];return null==s||s.erroredCompletion(g instanceof Error?g:Error("Unknown error"),f),[2];case 4:v="",w="",y=!0,b=!1,d.addEventListener("abort",function(){f&&(null==s||s.afterCompletion("aborted",p,{},f)),b=!0}),S=!1,Y=!1,R.label=5;case 5:R.trys.push([5,13,14,19]),x=(0,L._)(h()),R.label=6;case 6:return[4,(0,ex._)(x.next())];case 7:if(!(S=!(C=R.sent()).done))return[3,12];_=C.value,w+=_,k=void 0,R.label=8;case 8:if(-1===(k=w.indexOf("\n")))return[3,11];if(D=JSON.parse(w.substring(0,k)).text,w=w.substring(k+1),v+=D,b)return[3,10];return[4,D];case 9:R.sent(),R.label=10;case 10:return!b&&y&&f&&(null==s||s.afterCompletion("success",p,{fromCache:!!m,partialSuggestion:D},f)),y=!1,[3,8];case 11:return S=!1,[3,6];case 12:return[3,19];case 13:return E=R.sent(),Y=!0,A=E,[3,19];case 14:if(R.trys.push([14,,17,18]),!(S&&null!=x.return))return[3,16];return[4,(0,ex._)(x.return())];case 15:R.sent(),R.label=16;case 16:return[3,18];case 17:if(Y)throw A;return[7];case 18:return[7];case 19:if(null===m&&v.trim().length&&l.add(n,v,u),!(!b&&w))return[3,21];return[4,w];case 20:R.sent(),R.label=21;case 21:return f&&(null==s||s.afterCompletion("finished",p,{completeSuggestion:v,fromCache:!!m},f)),[2]}})}),function(e){return d.apply(this,arguments)}),[t,l,s,a])),E=(f=(p=(0,eh._)((0,eU.fp)(eB),2))[0],h=p[1],m=(0,eN._P)({controlName:"flag-killswitch-pichu",logFlagToAnalytics:!1}),(0,o.useEffect)(function(){if(m&&f.tooltipOpen){var e=setTimeout(function(){return h(function(e){return(0,x._)((0,A._)({},e),{tooltipOpen:!1})})},2500);return function(){return clearTimeout(e)}}},[m,f.tooltipOpen,h]),(0,o.useMemo)(function(){return m?{recordAccept:function(){h(function(e){return(0,x._)((0,A._)({},e),{consecutiveRejections:0})})},recordReject:function(){h(function(e){var n=e.consecutiveRejections+1;if(n>=5){var t=eO.A.get(eM,"number");if(!t||Date.now()-t>=432e6)return eO.A.set(eM,Date.now()),(0,x._)((0,A._)({},e),{consecutiveRejections:n,tooltipOpen:!0})}return(0,x._)((0,A._)({},e),{consecutiveRejections:n})})}}:null},[m,h])),R=(0,o.useCallback)((g=(0,r._)(function(e){var n;return(0,i.YH)(this,function(t){switch(t.label){case 0:return[4,w.readFile(e)];case 1:if(null!==(n=t.sent()).error)return[2,null];return[2,n.content.toString()]}})}),function(e){return g.apply(this,arguments)}),[w]),I=(0,eq.rE)(),F=(0,eN._P)({controlName:"flag-gw-magikarp-bounce-time",logFlagToAnalytics:!1,default:u.Hl,type:"number"}),T=(0,eN._P)({controlName:"flag-completely-different-clipboard",logFlagToAnalytics:!0}),P=(0,eN._P)({controlName:"flag-completely-different-regulator"}),U=[eK.use(Y,S,C,_,D,F,T,P),e$.use(Y,v,E),eY.use(R,I)];return(0,o.useMemo)(function(){return U},U)}},83966:(e,n,t)=>{"use strict";t.d(n,{Y:()=>eh,m:()=>eg});var r=t(29935),i=t(17844),o=t(93629),a=t(17459),l=t(12694),s=t(82643),c=t(88263),u=t(21462),d=t(82315),p=t(7990),f=t.n(p),h=t(12101),m=t.n(h),g=t(10293),v=t(21846),w=t(44114),y=t(52756),b=t(82733),S=t(58937),Y=t(21394),A=t(10429),x=/(.+)(?:\S+)?<([^>,]+)[>,]/,C=A.D.span;function _(e){var n=e.author,t=x.exec(n);if(t){var r=t[1],i=t[2];return(0,c.FD)(c.FK,{children:["By ",r,(0,c.FD)("a",{href:"mailto:".concat(i),children:["<",i,">"]})]})}return(0,c.FD)(C,{children:["By ",n]})}var k=t(27108),D=t(3694),E=t(80762),R=t(29064);function I(e){var n=e.isInstalled,t=e.isInQueue;return e.isCurrentAction?(0,c.Y)(E.A,{}):t?(0,c.Y)(k.A,{}):n?(0,c.Y)(R.A,{}):(0,c.Y)(D.A,{})}var F=t(2130),T=t(6281),P=t(30746),L=t(45263),U=t(64583),N=t(29e3),O=t(48521),M=t(46603),B=t(38292),H=t(54087),z=t(36112),W=t(76126),G=t(84331),V=t(86278),j=t(69258),Z=A.D.span,q=(0,U.x)({metadataSkeletonVersion:[N.S.foregroundPulse(),O.wp.height(16),O.wp.maxWidth(64),O.wp.borderRadius(4)],metadataSkeletonDescription:[N.S.foregroundPulse(),O.wp.height(16),O.wp.borderRadius(4),O.wp.maxWidth(425)],root:[O.wp.borderRadius(8),O.wp.p(8)],headerTitle:[O.wp.display.flex,O.wp.rowWithGap(8),O.wp.flex.growAndShrink(1)],headerTitleText:[O.wp.display.inline,O.wp.flex.growAndShrink(1),O.wp.overflow("hidden"),O.wp.truncate],headerTitlePills:[O.wp.display.inlineFlex,O.wp.rowWithGap(4),O.wp.flex.shrink(0)],headerButton:[],error:[O.wp.mt(4)],actions:[O.wp.mt(8)],consoleButton:[O.wp.width("calc(50% - ".concat(L.LU.space8,")"))],cancelButton:[O.wp.width("calc(50% - ".concat(L.LU.space8,")"))],actionButton:[O.wp.flex.grow(1),O.wp.flex.shrink(0)]});function K(e){var n=e.title,t=e.content,r=e.isExpanded;return(0,c.FD)(A.S,{gap:2,children:[n?(0,c.Y)(W.EY,{color:"dimmer",children:n}):null,t?(0,c.Y)(W.EY,{maxLines:r?void 0:1,children:t}):null]})}function $(e){var n=e.title,t=e.content;return(0,c.FD)(A.S,{pt:4,gap:8,children:[void 0===n||n?(0,c.Y)(A.S,{css:q.metadataSkeletonVersion}):null,void 0===t||t?(0,c.Y)(A.S,{css:q.metadataSkeletonDescription}):null]})}function J(e){var n,t=e.name,r=e.pkg,i=e.isMetadataLoading,o=e.openConsole,a=e.pills,s=(0,P.UK)(),d=(0,T.H_)(null==s?void 0:s.id),p=(0,T.xB)(null==s?void 0:s.id),f=(0,T.BL)(),h=(0,T.n5)(),m=(0,T.D6)(),g=(0,F.A)(r.license),v=(0,u.useMemo)(function(){return!!(null!==f&&f.pkgs.find(function(e){return e.name===r.name}))},[f]),w=(0,u.useMemo)(function(){return h.find(function(e){return e.pkgs.find(function(e){return e.name===r.name})})},[h]),y=h.length>1&&!!w,b=(0,u.useMemo)(function(){return!!d.find(function(e){var n,t;return(null==(n=e.name)?void 0:n.toLowerCase())===(null==(t=r.name)?void 0:t.toLowerCase())})},[d]),S=!!(r.homepageURL||r.license||r.author),Y=(0,u.useMemo)(function(){return!!p.find(function(e){return e.name===r.name})},[p]),x=(0,l._)((0,u.useState)(!1),2),C=x[0],k=x[1],D=(0,T.rD)(),E=(0,T.q3)(),R=(0,T.Gg)();return(0,c.FD)(z.ui,{css:q.root,elevated:!0,children:[(0,c.FD)(A.S,{row:!0,justify:"space-between",children:[(0,c.FD)(W.Y9,{css:q.headerTitle,level:2,variant:"subheadDefault",multiline:!1,children:[(0,c.FD)(Z,{css:q.headerTitleText,children:[null!=t?t:r.name,r.version?(0,c.FD)(W.EY,{color:"dimmer",children:["@",r.version]}):null]}),a?(0,c.Y)(A.S,{css:q.headerTitlePills,children:a}):null]}),S?(0,c.Y)(B.K0,{css:q.headerButton,alt:"Show more info",tooltipBehavior:"hidden",onClick:function(){return k(function(e){return!e})},children:(0,c.Y)(G.A,{rotate:90*!!C})}):null]}),(0,c.Y)(A.S,{gap:4,children:void 0!==i&&i?(0,c.Y)($,{title:!1}):(0,c.FD)(c.FK,{children:[(0,c.Y)(K,{content:null!=(n=r.description)?n:"This package has no description.",isExpanded:!0}),r.homepageURL&&C?(0,c.Y)(K,{content:(0,c.Y)("a",{href:r.homepageURL,rel:"noreferrer noopener",target:"_blank",children:r.homepageURL}),isExpanded:C}):null,g&&C?(0,c.Y)(K,{content:g,isExpanded:C}):null,r.author&&C?(0,c.Y)(K,{content:(0,c.Y)(_,{author:r.author}),isExpanded:C}):null]})}),Y?(0,c.Y)(H.N,{css:q.error,colorway:"negative",icon:(0,c.Y)(j.A,{}),text:"Couldn't ".concat(b?"uninstall":"install"," package. See Console for details, or try again.")}):null,(0,c.Y)(A.S,{css:q.actions,row:!0,gap:8,children:Y?(0,c.FD)(c.FK,{children:[(0,c.Y)(M.$n,{css:q.consoleButton,text:"Console",onClick:function(){o()},disabled:v||y,colorway:"primary",iconLeft:(0,c.Y)(V.A,{})}),(0,c.Y)(M.$n,{css:q.actionButton,text:"Try Again",onClick:function(){(null==s?void 0:s.id)&&(m(s.id,[r]),b?E({id:s.id,pkg:r}):D({id:s.id,pkg:r}))},loading:v||y,colorway:b?"red":void 0,variant:b?"outlined":void 0,iconLeft:(0,c.Y)(I,{isInstalled:b,isInQueue:y,isCurrentAction:v})})]}):(0,c.FD)(c.FK,{children:[(0,c.Y)(M.$n,{css:q.actionButton,text:v?(null==f?void 0:f.kind)===T.Vr.Install?"Installing":"Removing":y?(null==w?void 0:w.kind)===T.Vr.Install?"Waiting to install":"Waiting to remove":b?"Remove":"Install",onClick:function(){(null==s?void 0:s.id)&&(b?E({id:s.id,pkg:r}):D({id:s.id,pkg:r}))},loading:v||y,colorway:b?"red":void 0,variant:b?"outlined":void 0,iconLeft:(0,c.Y)(I,{isInstalled:b,isInQueue:y,isCurrentAction:v})}),y?(0,c.Y)(M.$n,{css:q.cancelButton,text:"Cancel",onClick:function(){r.name&&R(r.name)},disabled:v,loading:v}):null]})})]})}var Q=t(62153),X=t(34834),ee=t(27685),en=t(93309),et=t(17070),er=t(11882),ei=t(81526),eo=t(16251),ea=t(59172),el=t(6034),es=t(91026),ec=(0,U.x)({root:[O.wp.flex.column,O.wp.flex.growAndShrink(1)],headerRoot:[O.wp.border({color:L.LU.outlineDimmest,width:1,direction:"bottom"})],header:[O.wp.width("100%"),O.wp.maxWidth(Y.Vq),O.wp.colWithGap(8),O.wp.p(8),{margin:"0 auto"},O.wp.rowWithGap(8),O.wp.p(8),O.wp.align.center],searchInput:[O.wp.flex.growAndShrink(1)],select:[O.wp.minWidth(160)],resultsRoot:[O.wp.flex.growAndShrink(1),O.wp.overflow("auto")],resultsScroller:[O.wp.width("100%"),O.wp.maxWidth(600),O.wp.flex.growAndShrink(1),O.wp.p(8),{margin:"0 auto"},O.wp.overflow("auto")]});function eu(e){var n,t,o=e.query,a=e.openConsole,d=e.computePills,p=(0,l._)((0,u.useState)([]),2),f=p[0],h=p[1],m=(0,u.useRef)(0),g=(0,l._)((0,u.useState)(!1),2),w=g[0],y=g[1],b=(n=(0,X.A)(),t=(0,P.Ot)(),(0,u.useCallback)(function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=t();return(null==o?void 0:o.id)?(0,ee.N)(o.id).search((0,i._)({id:o.id,query:e,services:n},r)):[]},[]));return((0,u.useEffect)(function(){if(""===o.trim())return void h([]);y(!0)},[o]),(0,v.A)(function(){var e,n=++m.current;(e=(0,r._)(function(){var e;return(0,s.YH)(this,function(t){switch(t.label){case 0:return[4,b(o)];case 1:return e=t.sent(),n===m.current&&(h(e),y(!1)),[2]}})}),function(){return e.apply(this,arguments)})()},[o],500),w)?(0,c.Y)(Y.Gu,{}):0===f.length?(0,c.Y)(Y.pp,{children:o?"No results were found.":"Start typing above to see results."}):(0,c.Y)(A.S,{gap:8,children:f.map(function(e){var n,t=null!=(n=null==d?void 0:d(e))?n:[];return(0,c.Y)(J,{pkg:e,openConsole:a,pills:t},e.name)})})}function ed(e){return e.length>0&&m()(e)}function ep(e){var n,t,r,i,o,a=e.query,l=(0,b.A)(),s=(0,w.G)().modules,p=(0,u.useMemo)(function(){return new Set(null==s?void 0:s.map(function(e){return e.id}))},[s]),h=(t=(n={modules:null!=(o=null==l?void 0:l.fullModules)?o:[],query:a}).modules,r=n.query,i=(0,u.useMemo)(function(){return new d.Rk(t,{selector:function(e){return e.name},tiebreakers:[function(e,n){var t=2===e.item.displayVersion.split(".").length?"".concat(e.item.displayVersion,".0"):e.item.displayVersion,r=2===n.item.displayVersion.split(".").length?"".concat(n.item.displayVersion,".0"):n.item.displayVersion;return ed(t)||ed(r)?!ed(r)&&ed(t)?1:!ed(t)&&ed(r)||f()(t,r)?-1:+!!f()(r,t):0}]})},[t]),(0,u.useMemo)(function(){return r?i.find(r).map(function(e){return e.item}):t},[i,t,r]));return 0===(h=(0,u.useMemo)(function(){return h.sort(function(e,n){var t=e.internal||e.demoted,r=n.internal||n.demoted;return t&&!r?1:!t&&r?-1:0})},[h])).length?(0,c.Y)(Y.pp,{children:a?"No results were found.":"Start typing above to see results."}):(0,c.Y)(A.S,{gap:8,children:h?h.map(function(e){var n="".concat(e.id,"-").concat(e.resolutionPath,"-").concat(e.version),t=p.has(e.id);return(0,c.Y)(A.S,{row:!0,align:"center",justify:"space-between",children:(0,c.Y)(S.A,{module:e,isInstalled:t,defaultExpanded:!1})},n)}):null})}function ef(e){var n=e.onBack,t=e.initialQuery,r=e.setQuery,i=e.categories,o=e.category,a=e.setCategory,s=e.children,d=e.disableCategorySelection,p=e.searchPlaceholder,f=(0,l._)((0,u.useState)(null!=t?t:""),2),h=f[0],m=f[1],g=(0,u.useDeferredValue)(h);return(0,u.useEffect)(function(){r(g)},[g,r]),(0,c.FD)(A.S,{css:ec.root,children:[(0,c.Y)(A.S,{css:ec.headerRoot,children:(0,c.FD)(A.S,{css:ec.header,children:[(0,c.Y)(B.K0,{alt:"Back",onClick:function(){return n()},children:(0,c.Y)(el.A,{})}),!d&&i&&i.length>0?(0,c.Y)(eo.l,{items:i,css:ec.select,"aria-label":"Change search context",selectedKey:o,onSelectionChange:function(e){var n=null==i?void 0:i.find(function(n){return n.value===e});if(!n)throw Error("Expected config");m(""),a(n.value)},children:function(e){return(0,c.Y)(et.nh,{id:e.value,label:e.label})}}):null,(0,c.Y)(A.S,{css:ec.searchInput,children:(0,c.Y)(ei.I,{value:h,onChange:function(e){m(e.target.value)},onClear:function(){return m("")},placeholder:void 0===p?"Search packages...":p,autoFocus:!0})})]})}),(0,c.Y)(A.S,{css:ec.resultsRoot,children:(0,c.Y)(A.S,{css:ec.resultsScroller,children:s})})]})}function eh(e){var n=e.onBack,t=e.initialCategory,r=e.openConsole,s=(0,a._)(e,["onBack","initialCategory","openConsole"]),d=(0,Q.J)().configs,p=(0,l._)((0,u.useState)(""),2),f=p[0],h=p[1],m=(0,u.useMemo)(function(){return d.filter(function(e){return"nix"!==e.id}).map(function(e){return{value:e.id,label:e.name.replace(/\s*packager\s*.*$/,"")}})},[d]),g=(0,l._)((0,u.useState)(null!=t?t:m[0].value),2),v=g[0],w=g[1],y=(0,u.useMemo)(function(){return d.find(function(e){return e.id===v})},[v,d]);return(0,c.Y)(ef,(0,o._)((0,i._)({categories:m,initialQuery:f,setQuery:h,onBack:n,setCategory:function(e){h(""),w(e)},category:v},s),{children:(0,c.Y)(en.A,{config:y,children:(0,c.Y)(eu,{query:f,openConsole:r})})}))}var em=[{value:"Modules",label:"Modules"},{value:"Packages",label:"Packages"}];function eg(e){var n=e.onBack,t=e.initialCategory,r=void 0===t?em[0].value:t,s=e.openConsole,d=(0,a._)(e,["onBack","initialCategory","openConsole"]),p=(0,Q.J)().configs,f=(0,u.useMemo)(function(){return p.find(function(e){return"nix"===e.id})},[p]),h=(0,l._)((0,u.useState)(""),2),m=h[0],v=h[1],w=(0,l._)((0,u.useState)(r),2),b=w[0],S=w[1];return((0,y.r)(g.AZ.NIX_MODULE_SEARCH_VIEWED,{},function(){return"Modules"===b},[]),(0,y.r)(g.AZ.NIX_MODULE_SEARCH_USED,{query:m},function(){return!!(m&&"Modules"===b)},[m]),f)?(0,c.Y)(ef,(0,o._)((0,i._)({categories:em,initialQuery:m,setQuery:v,onBack:n,setCategory:function(e){v(""),S(e)},category:b,searchPlaceholder:"Modules"===b?"Search modules...":void 0},d),{children:"Packages"===b?(0,c.Y)(en.A,{config:f,children:(0,c.Y)(eu,{query:m,openConsole:s,computePills:function(e){var n;return null!=(n=e.present)&&n?[(0,c.Y)(ea.m_,{tooltip:"Cached packages are faster to install in your App",children:(0,c.Y)(er.a,{text:"cached",iconLeft:(0,c.Y)(es.A,{}),colorway:"green"})},"cached-".concat(e.name,"-").concat(e.version))]:[]}})}):(0,c.Y)(ep,{query:m})})):null}},84282:e=>{var n=1/0,t=0/0,r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,a=/^0o[0-7]+$/i,l=/^(?:0|[1-9]\d*)$/,s=parseFloat,c=parseInt,u=Object.prototype.toString,d=Math.floor,p=Math.min,f=Math.random;function h(e){var n=typeof e;return!!e&&("object"==n||"function"==n)}function m(e){return e?(e=function(e){if("number"==typeof e)return e;if("symbol"==typeof(n=e)||n&&"object"==typeof n&&"[object Symbol]"==u.call(n))return t;if(h(e)){var n,l="function"==typeof e.valueOf?e.valueOf():e;e=h(l)?l+"":l}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(r,"");var s=o.test(e);return s||a.test(e)?c(e.slice(2),s?2:8):i.test(e)?t:+e}(e))===n||e===-n?(e<0?-1:1)*17976931348623157e292:e==e?e:0:0===e?e:0}e.exports=function(e,n,t){if(t&&"boolean"!=typeof t&&function(e,n,t){if(!h(t))return!1;var r,i,o,a,s,c,d,p=typeof n;return("number"==p?!!(null!=(r=t)&&"number"==typeof(i=r.length)&&i>-1&&i%1==0&&i<=0x1fffffffffffff&&"[object Function]"!=(a=h(o=r)?u.call(o):"")&&"[object GeneratorFunction]"!=a&&(d=null==(d=t.length)?0x1fffffffffffff:d)&&("number"==typeof n||l.test(n))&&n>-1&&n%1==0&&n<d):"string"==p&&n in t)&&(s=t[n],s===(c=e)||s!=s&&c!=c)}(e,n,t)&&(n=t=void 0),void 0===t&&("boolean"==typeof n?(t=n,n=void 0):"boolean"==typeof e&&(t=e,e=void 0)),void 0===e&&void 0===n?(e=0,n=1):(e=m(e),void 0===n?(n=e,e=0):n=m(n)),e>n){var r,i,o=e;e=n,n=o}if(t||e%1||n%1){var a=f();return p(e+a*(n-e+s("1e-"+((a+"").length-1))),n)}return r=e,i=n,r+d(f()*(i-r+1))}},84316:(e,n,t)=>{"use strict";t.d(n,{LT:()=>N,TR:()=>H,c6:()=>W,hh:()=>k,k6:()=>L,qO:()=>G,vJ:()=>M});var r=t(17844),i=t(12584),o=t(41114),a=t(50175),l=t(86997),s=t(51026),c=t(11725),u=t(8029),d=t(87345);function p(){var e=(0,i._)(["\n  fragment OrgGroupPermissionsOrgScopeOption on OrgScopeOption {\n    __typename\n    role\n    status\n  }\n"]);return p=function(){return e},e}function f(){var e=(0,i._)(["\n  fragment OrgGroupPermissionsGroup on OrgGroup {\n    ...OrgGroupMetadata\n    permissions {\n      editPermissions\n      viewPermissions\n    }\n    orgScopeOptions {\n      ...OrgGroupPermissionsOrgScopeOption\n    }\n  }\n  ","\n  ","\n"]);return f=function(){return e},e}function h(){var e=(0,i._)(["\n  fragment OrgGroupOption on OrgGroupScopeOption {\n    status\n    role\n  }\n"]);return h=function(){return e},e}function m(){var e=(0,i._)(["\n  fragment OrgGroupOptions on OrgGroupScopeOptions {\n    targetGroupId\n    options {\n      __typename\n      ...OrgGroupOption\n    }\n  }\n  ","\n"]);return m=function(){return e},e}function g(){var e=(0,i._)(["\n  fragment OrgGroupRepl on Repl {\n    id\n    title\n    iconUrl\n    ...ReplLinkRepl\n    authorizations {\n      editPermissions {\n        isAuthorized\n      }\n    }\n  }\n  ","\n"]);return g=function(){return e},e}function v(){var e=(0,i._)(["\n  fragment GroupReplsPage on ReplConnection {\n    pageInfo {\n      hasNextPage\n      nextCursor\n      previousCursor\n    }\n    items {\n      __typename\n      ...OrgGroupRepl\n    }\n  }\n  ","\n"]);return v=function(){return e},e}function w(){var e=(0,i._)(["\n  fragment ReplScopeOption on ReplScopeOption {\n    status\n    role\n  }\n"]);return w=function(){return e},e}function y(){var e=(0,i._)(["\n  fragment ReplScopeOptions on ReplScopeOptions {\n    replId\n    options {\n      __typename\n      ...ReplScopeOption\n    }\n  }\n  ","\n"]);return y=function(){return e},e}function b(){var e=(0,i._)(["\n  mutation UpdateOrgGroupScopes($input: UpdateOrgGroupScopesInput!) {\n    updateOrgGroupScopes(input: $input) {\n      __typename\n      ... on OrgGroup {\n        ...OrgGroupPermissionsGroup\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return b=function(){return e},e}function S(){var e=(0,i._)(["\n  query OrgGroupPermissionsGroups($orgId: String, $input: OrgGroupsInput) {\n    currentUser {\n      __typename\n      id\n      org(orgId: $orgId) {\n        __typename\n        ... on Org {\n          id\n          groups(input: $input) {\n            __typename\n            ... on OrgGroupConnection {\n              pageInfo {\n                hasNextPage\n                nextCursor\n              }\n              items {\n                ...OrgGroupMetadata\n              }\n            }\n            ... on UserError {\n              message\n            }\n          }\n        }\n        ... on NotFoundError {\n          message\n        }\n      }\n    }\n  }\n  ","\n"]);return S=function(){return e},e}function Y(){var e=(0,i._)(["\n  query OrgGroupScopeOptions(\n    $orgId: String!\n    $groupId: String!\n    $input: OrgGroupGroupScopeOptionsInput!\n  ) {\n    currentUser {\n      __typename\n      id\n      org(orgId: $orgId) {\n        __typename\n        ... on Org {\n          id\n          group(orgGroupId: $groupId) {\n            __typename\n            ... on OrgGroup {\n              __typename\n              id\n              groupScopeOptions(input: $input) {\n                __typename\n                ... on OrgGroupGroupScopeOptions {\n                  items {\n                    ...OrgGroupOptions\n                  }\n                }\n                ... on UnauthorizedError {\n                  message\n                }\n              }\n            }\n            ... on NotFoundError {\n              message\n            }\n          }\n        }\n        ... on NotFoundError {\n          message\n        }\n      }\n    }\n  }\n  ","\n"]);return Y=function(){return e},e}function A(){var e=(0,i._)(["\n  query OrgGroupPermissionsRepls($orgId: String, $input: OrgReplsInput!) {\n    currentUser {\n      __typename\n      id\n      org(orgId: $orgId) {\n        __typename\n        ... on Org {\n          id\n          ...OrgReplManagement\n          replsCount\n          repls(input: $input) {\n            __typename\n            ... on ReplConnection {\n              ...GroupReplsPage\n            }\n            ... on UserError {\n              message\n            }\n          }\n        }\n        ... on NotFoundError {\n          message\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return A=function(){return e},e}function x(){var e=(0,i._)(["\n  query OrgGroupReplScopeOptions(\n    $orgId: String!\n    $groupId: String!\n    $input: OrgGroupReplScopeOptionsInput!\n  ) {\n    currentUser {\n      __typename\n      id\n      org(orgId: $orgId) {\n        __typename\n        ... on Org {\n          id\n          group(orgGroupId: $groupId) {\n            __typename\n            ... on OrgGroup {\n              __typename\n              id\n              replScopeOptions(input: $input) {\n                __typename\n                ... on OrgGroupReplScopeOptions {\n                  items {\n                    ...ReplScopeOptions\n                  }\n                }\n                ... on UnauthorizedError {\n                  message\n                }\n              }\n            }\n            ... on NotFoundError {\n              message\n            }\n          }\n        }\n        ... on NotFoundError {\n          message\n        }\n      }\n    }\n  }\n  ","\n"]);return x=function(){return e},e}var C={},_=(0,o.J1)(p()),k=(0,o.J1)(f(),u.Fe,_),D=(0,o.J1)(h()),E=(0,o.J1)(m(),D),R=(0,o.J1)(g(),c.r),I=(0,o.J1)(v(),R),F=(0,o.J1)(w()),T=(0,o.J1)(y(),F),P=(0,o.J1)(b(),k);function L(e){var n=(0,r._)({},C,e);return a.n(P,n)}var U=(0,o.J1)(S(),u.Fe);function N(e){var n=(0,r._)({},C,e);return l.I(U,n)}var O=(0,o.J1)(Y(),E);function M(e){var n=(0,r._)({},C,e);return l.I(O,n)}var B=(0,o.J1)(A(),d.PQ,I);function H(e){var n=(0,r._)({},C,e);return l.I(B,n)}var z=(0,o.J1)(x(),T);function W(e){var n=(0,r._)({},C,e);return l.I(z,n)}function G(e){var n=(0,r._)({},C,e);return s._(z,n)}},84353:(e,n,t)=>{"use strict";t.d(n,{I:()=>r});var r=function(e){return null!=e.connectionString&&null!=e.databaseId&&null!=e.databaseName&&null!=e.projectId}},84631:(e,n,t)=>{"use strict";t.d(n,{Nf:()=>l,X$:()=>c,zg:()=>s});var r=t(21462),i=t(44370),o=t(81738),a=(0,i.eU)(!1);function l(){return(0,o.h)(a)}function s(){var e=(0,o.ob)(a);return(0,r.useCallback)(function(){return e(!0)},[e])}function c(e){var n=(0,o.ob)(a),t=(0,r.useRef)(!1);(0,r.useEffect)(function(){t.current||(t.current=!0,n(e))},[n,e])}},84825:(e,n,t)=>{"use strict";t.d(n,{$:()=>d});var r=t(88263),i=t(191),o=t(45263),a=t(64583),l=t(48521),s=t(59172),c=t(10429),u=(0,a.x)({dot:[l.wp.width("8px"),l.wp.height("8px"),l.wp.borderRadius("full"),l.wp.flex.shrink(0),l.wp.pr(4)]});function d(e){var n=e.status,t=n in i.v?i.v[n]:{color:o.LU.greyDefault,title:"Unknown status"},a=t.color,l=t.title;return(0,r.Y)(s.m_,{tooltip:l,delay:"long",children:(0,r.Y)(c.S,{tag:"span",css:u.dot,style:{backgroundColor:a,boxShadow:"0 0 12px ".concat(a)}})})}},84965:(e,n,t)=>{"use strict";t.d(n,{ET:()=>S,Mk:()=>m,c_:()=>h,eP:()=>y,v4:()=>v});var r=t(17844),i=t(12584),o=t(41114),a=t(86997),l=t(50175),s=t(31592);function c(){var e=(0,i._)(["\n  query CodemirrorThread($id: String!) {\n    thread: annotationAnchor(id: $id) {\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n    currentUser {\n      id\n      username\n      fullName\n      image\n    }\n  }\n  ","\n"]);return c=function(){return e},e}function u(){var e=(0,i._)(["\n  mutation CreateThread(\n    $thread: AnnotationAnchorInput!\n    $message: AnnotationMessageInput\n    $highlight: AnnotationHighlightInput\n  ) {\n    createThread: createAnnotationAnchor(\n      annotationAnchor: $thread\n      annotationMessage: $message\n      highlight: $highlight\n    ) {\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return u=function(){return e},e}function d(){var e=(0,i._)(["\n  mutation UpdateThread($id: String!, $changes: AnnotationAnchorChangesInput!) {\n    updateThread: updateAnnotationAnchor(id: $id, changes: $changes) {\n      ... on UserError {\n        message\n      }\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n  }\n  ","\n"]);return d=function(){return e},e}function p(){var e=(0,i._)(["\n  mutation CreateThreadMessage(\n    $replId: String!\n    $threadId: String!\n    $threadMessage: AnnotationMessageInput!\n    $highlight: AnnotationHighlightInput\n  ) {\n    createThreadMessage: createAnnotationMessage(\n      replId: $replId\n      anchorId: $threadId\n      annotationMessage: $threadMessage\n      highlight: $highlight\n    ) {\n      ... on UserError {\n        message\n      }\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n  }\n  ","\n"]);return p=function(){return e},e}var f={},h=(0,o.J1)(c(),s.A9);function m(e){var n=(0,r._)({},f,e);return a.I(h,n)}var g=(0,o.J1)(u(),s.A9);function v(e){var n=(0,r._)({},f,e);return l.n(g,n)}var w=(0,o.J1)(d(),s.A9);function y(e){var n=(0,r._)({},f,e);return l.n(w,n)}var b=(0,o.J1)(p(),s.A9);function S(e){var n=(0,r._)({},f,e);return l.n(b,n)}},85134:(e,n,t)=>{"use strict";t.d(n,{L:()=>P});var r=t(12694),i=t(88263),o=t(21462),a=t(17844),l=t(12584),s=t(41114),c=t(86997);function u(){var e=(0,l._)(["\n  fragment ReplDesktopAvatarMenuCurrentUser on CurrentUser {\n    id\n    url\n    username\n    fullName\n    image\n    userSubscriptionType\n  }\n"]);return u=function(){return e},e}function d(){var e=(0,l._)(["\n  query ReplDesktopAvatarMenu {\n    currentUser {\n      id\n      ...ReplDesktopAvatarMenuCurrentUser\n    }\n  }\n  ","\n"]);return d=function(){return e},e}var p={},f=(0,s.J1)(u()),h=(0,s.J1)(d(),f),m=t(35084),g=t(45124),v=t(18402),w=t(45263),y=t(64583),b=t(973),S=t(48521),Y=t(13340),A=t(72054),x=t(49150),C=t(75414),_=t(36112),k=t(76126),D=t(10429),E=t(87523),R=t(51118),I=t(72395),F=t(19465),T=(0,y.x)({wrapper:[S.wp.noDragRegion],button:[b.b.nofill,S.wp.p(4),S.wp.viewStyle,S.wp.reset.button,S.wp.rowWithGap(2),S.wp.align.center,S.wp.color.foregroundDefault,S.wp.cursor.pointer,S.wp.borderRadius(8),{transition:"box-shadow 120ms ease-out",":hover svg":{fill:w.LU.foregroundDefault}}],surface:[S.wp.borderRadius(8),S.wp.minWidth(80),{"& > ul > li:first-of-type":{borderRadius:"10px 10px 0 0"}}],username:[S.wp.ml(8)],menuItem:[],accountModal:[S.wp.overflow("auto"),S.wp.height("100%")],appVersionWrapper:[S.wp.center,S.wp.border({color:w.LU.outlineDimmer,width:1,style:"solid",direction:"top"})]});function P(e){var n,t=e.showName,l=(0,r._)((0,o.useState)(!1),2),s=l[0],u=l[1],d=(0,r._)((0,o.useState)(!1),2),f=d[0],y=d[1],b=(n=(0,a._)({},p,void 0),c.I(h,n)).data,S=null==b?void 0:b.currentUser;if(!S)return null;var P=[{label:"Home",icon:(0,i.Y)(I.A,{}),onAction:function(){v.M.openExternalUrl("/"),u(!1)}},{label:"Account",icon:(0,i.Y)(F.A,{}),onAction:function(){y(function(e){return!e}),u(!1)}},{label:"Log out",icon:(0,i.Y)(R.A,{}),onAction:function(){v.M.logout()}}];return(0,i.FD)(D.S,{css:T.wrapper,children:[(0,i.FD)(C.Wv,{isOpen:s,onOpenChange:u,placement:"bottom start",label:"Account options",noArrow:!0,children:[(0,i.FD)("button",{onClick:function(){u(function(e){return!e})},css:T.button,"data-cy":"desktop-app-avatar-menu",children:[(0,i.Y)(Y.e,{size:24,src:(null==S?void 0:S.image)||null,username:(null==S?void 0:S.username)||"",fullName:(null==S?void 0:S.fullName)||"",showCoreBadge:S.userSubscriptionType===m.Oh.HackerPro}),t?(0,i.FD)(D.S,{css:T.username,className:"username",children:["@",null==S?void 0:S.username]}):null,(0,i.Y)(E.A,{color:w.LU.foregroundDimmest,size:12})]}),(0,i.FD)(_.ui,{elevated:!0,css:T.surface,background:"higher",children:[(0,i.Y)(A.W1,{label:"Account options",onAction:function(e){var n=P[parseInt(e,10)];n&&n.onAction()},children:P.map(function(e,n){return(0,i.Y)(A.q7,{"aria-label":e.label,children:(0,i.FD)(D.S,{row:!0,gap:8,align:"center",children:[e.icon,(0,i.Y)(k.EY,{children:e.label})]})},n)})}),(0,i.Y)(D.S,{css:T.appVersionWrapper,py:4,px:8,children:(0,i.Y)(k.EY,{color:"dimmer",variant:"small",dataCy:"desktop-app-version",children:"Version ".concat(v.M.getVersion())})})]})]}),(0,i.Y)(x.a,{isOpen:f,onRequestClose:function(){return y(!1)},maxWidth:872,elevation:"root",skipTransition:!0,css:T.accountModal,children:(0,i.Y)(g.A,{})})]})}},85305:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(88263),a=t(71117);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M7.026 3.243c-.245.269-.388.756-.388 1.767v3.083c0 .922-.208 1.894-.948 2.72-.429.48-1.006.876-1.751 1.187.745.312 1.323.708 1.752 1.189.74.828.947 1.803.947 2.729V19c0 1.005.142 1.49.388 1.756.232.254.732.493 1.974.493a.75.75 0 0 1 0 1.5c-1.346 0-2.403-.241-3.08-.978-.663-.723-.782-1.738-.782-2.77v-3.084c0-.7-.153-1.268-.566-1.73-.426-.478-1.22-.946-2.717-1.24a.75.75 0 0 1-.605-.737v-.422a.75.75 0 0 1 .605-.736c1.497-.295 2.291-.764 2.717-1.24.413-.462.566-1.026.566-1.72V5.01c0-1.038.119-2.056.782-2.78.677-.739 1.734-.98 3.08-.98a.75.75 0 0 1 0 1.5c-1.242 0-1.741.24-1.974.493ZM14.25 2a.75.75 0 0 1 .75-.75c1.346 0 2.403.241 3.08.98.663.724.782 1.742.782 2.78v3.083c0 .694.153 1.258.566 1.72.426.476 1.22.945 2.717 1.24a.75.75 0 0 1 .605.736v.422a.75.75 0 0 1-.605.736c-1.497.295-2.291.763-2.717 1.24-.413.463-.566 1.03-.566 1.73v3.084c0 1.033-.12 2.048-.783 2.771-.677.737-1.733.978-3.079.978a.75.75 0 0 1 0-1.5c1.242 0 1.742-.24 1.974-.492.246-.268.388-.752.388-1.757v-3.083c0-.926.208-1.901.947-2.73.43-.48 1.007-.876 1.752-1.188-.745-.311-1.322-.707-1.751-1.187-.74-.826-.948-1.798-.948-2.72V5.01c0-1.011-.142-1.498-.388-1.767-.233-.254-.732-.493-1.974-.493a.75.75 0 0 1-.75-.75Z",clipRule:"evenodd"})}))}},85569:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>Yj});var r,i,o,a,l,s,c,u,d=t(12694),p=t(88263),f=t(71115),h=t(21462),m=t(17844),g=t(12584),v=t(41114),w=t(86997),y=t(7102),b=t(77141),S=t(28462);function Y(){var e=(0,g._)(["\n  query ReplEnvironmentDesktop(\n    $replId: String!\n    $environment: KeybindingsEnvironmentEnum!\n    $platform: KeybindingsPlatformEnum!\n  ) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        ...ReplEnvironmentDesktopRepl\n        ...ReplEnvironmentTourRepl\n        ...HandleReplRedirectionRepl\n      }\n      ... on ReplRedirect {\n        ...HandleReplRedirectionReplRedirect\n      }\n      ... on ReplSubscriptionExpired {\n        ...HandleReplRedirectionSubscriptionExpired\n      }\n      ... on Error {\n        message\n      }\n    }\n    currentUser {\n      id\n      isVerified\n      ...ReplEnvironmentDesktopCurrentUser\n      keybindings(environment: $environment, platform: $platform) {\n        keybindings\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return Y=function(){return e},e}var A={},x=(0,v.J1)(Y(),b.cL,y.I,S.VU,S.V4,S.aU,b.dL),C=t(65298),_=t(5504),k=t(23288),D=t(62847),E=t(28776),R=t(347),I=t(54319);function F(e){return!e.origin&&"/@replit/Blank-Repl"===e.rootOriginReplUrl}var T=t(12689),P=t(20828),L=t(29383),U=t(95139),N=t(25804),O=t(19523),M=t(33995),B=t(86105),H=t(29935),z=t(82643),W=t(44370),G=t(69338),V=t(53231),j=t(43041),Z=t(6888),q=t(1230),K=t(92985),$=t(4291),J=t(48052);function Q(e){var n,t=(0,I.dm)().setAssistantMode,r=(0,I.NC)(),i=(0,h.useCallback)((n=(0,H._)(function(n){var i,o;return(0,z.YH)(this,function(a){switch(a.label){case 0:return[4,r.sessions.create({sessionType:q.dF3.CHAT})];case 1:if(!(i=a.sent()).ok)return[2];return e({pane:{type:"ghostwriterChat",data:{sessionId:(o=i.payload).id}}}),t("basic"),[4,o.appendEvent({kind:"message",message:n,intent:q.qRv.NONE,modelType:q.e3q.BASIC})];case 2:return a.sent(),(0,V.u4)(V.AZ.ASSISTANT_USED,{action:"message_sent",intent_type:"explain",model:"basic",user_model_selection:"basic",message_content:n,message_source:"ask_ai_command_bar"}),[2]}})}),function(e){return n.apply(this,arguments)}),[r,e,t]);return(0,L.A)(function(){return{data:{type:"context",label:"Assistant",icon:(0,p.Y)(J.A,{size:16}),key:"assistant"},commands:function(e){var n=e.searchQuery;return n?[{match:(0,K.u4)({defaultScore:$.q.askAssistant,matchScoreMultiplier:$.B.askAssistant,filterLowMatchScores:!1}),data:{type:"action",label:"Ask Assistant: ".concat(n),icon:(0,p.Y)(J.A,{size:16}),run:function(){return i(n)}}}]:[]}}},[i])}var X=t(58370),ee=t(82842);function en(e){var n=(0,X.Vv)();return(0,L.A)(function(){return{data:{type:"context",label:"Open with Code Search",icon:(0,p.Y)(ee.A,{}),key:"codeSearch"},commands:function(t){var r=t.searchQuery;if(!r)return[];var i={type:"searchReplace",data:{initialQuery:r}};return[{match:(0,K.u4)({defaultScore:$.q.codeSearch,matchScoreMultiplier:$.B.codeSearch,filterLowMatchScores:!1}),data:{type:"action",label:n.getTitle(i),icon:n.Icon({pane:i}),run:function(){e({pane:i})}}}]}}},[n,e])}var et=t(80443),er=t(34834),ei=t(39899),eo=t(77163),ea=t(73967),el=t(13416),es=t(37290),ec=t(75915),eu=t(9414),ed=t(3752),ep=t(50132),ef=t(33999),eh=t(41679),em=t(86814),eg=t(57912);function ev(e){var n,t=e.currentPaneId,r=e.type,i=(0,X.Vv)(),o=(0,et.US)(),a=(0,et.LA)(),l=(0,ed.t3)(),s=(0,eu.gB)(),c=t?"Move existing tab here":"Jump to existing tab";return(0,h.useCallback)((n=(0,H._)(function(e){var n,u,f,h,m,g,v,w,y,b,S,Y,A,x,C,_,k,D,E,R,I,F,T,P,L,U;return(0,z.YH)(this,function(N){switch(N.label){case 0:if(n=e.searchQuery,u=l(),!(f=t?u.filter(function(e){return(0,d._)(e,1)[0]!==t}):u).length||!n&&"files"===r)return[2,[]];h=new Map,m=[],g=!0,v=!1,w=void 0;try{for(y=f[Symbol.iterator]();!(g=(b=y.next()).done);g=!0)(S=(0,d._)(b.value,2))[0],Y=S[1],(0,X.xS)(Y)&&Y.data.path&&m.push(Y.data.path)}catch(e){v=!0,w=e}finally{try{g||null==y.return||y.return()}finally{if(v)throw w}}return[4,(0,ea.UI)(n,m)];case 1:A=N.sent(),x=!0,C=!1,_=void 0;try{for(k=A[Symbol.iterator]();!(x=(D=k.next()).done);x=!0)E=D.value,h.set(E.path,{score:E.score,ranges:E.ranges})}catch(e){C=!0,_=e}finally{try{x||null==k.return||k.return()}finally{if(C)throw _}}R=[],I=!0,F=!1,T=void 0;try{for(P=function(){var e=(0,d._)(U.value,2),n=e[0],l=e[1],u=(0,X.NM)(l);if("tools"===r&&!u||"tools"===r&&"commands"===l.type||"files"===r&&u)return"continue";var f=(0,X.xS)(l)?l.data.path:null,m=f?h.get(f):null;if("deployments"===l.type){var g=s(n);if((null==g?void 0:g.type)==="deployments"){var v=g.getTabs();if(v)return R.push({match:K.KK,data:{type:"context",label:i.getTitle(l),icon:(0,p.Y)(i.Icon,{pane:l})},commands:function(){return v.map(function(e){return{match:K.KK,data:{key:n+e.id,type:"action",label:e.label,icon:(0,p.Y)(e.Icon,{size:16}),run:function(){a(n),g.setTab(e.id)}}}})}}),"continue"}}var w=f&&m?function(){return{score:m.score,render:(0,ea.SS)({path:f,ranges:m.ranges,description:c})}}:K.KK,y=i.getTitle(l),b=i.Icon({pane:l});R.push({match:w,data:{key:n,type:"action",label:y,icon:b,run:function(){return t?o({a:t,b:n}):a(n)},description:c}})},L=f[Symbol.iterator]();!(I=(U=L.next()).done);I=!0)P()}catch(e){F=!0,T=e}finally{try{I||null==L.return||L.return()}finally{if(F)throw T}}return[2,R]}})}),function(e){return n.apply(this,arguments)}),[t,l,i,a,o,s,c,r])}function ew(e){var n=(0,X.Vv)(),t=(0,ep.Tb)(),r=(0,ed.t3)();return(0,h.useCallback)(function(){var i=r().map(function(e){var n=(0,d._)(e,2);return(n[0],n[1]).type}),o=[],a=!0,l=!1,s=void 0;try{for(var c,u=t[Symbol.iterator]();!(a=(c=u.next()).done);a=!0)!function(){var t=c.value;if(!((0,X.gG)(t.type)&&i.includes(t.type))){var r=n.getTitle(t),a=n.Icon({pane:t});o.push({match:(0,el.T)({pane:t,aliases:es.f.get(t.type)}),data:{key:"extension"===t.type?"extension-".concat(t.data.installationId,"-").concat(t.data.path):void 0,type:"action",label:r,description:n.getDescription(t,{short:!0}),icon:a,run:function(){e({pane:t})}}})}}()}catch(e){l=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw s}}return o},[t,e,r,n])}function ey(e){var n=e.currentPaneId,t=e.openPane,r=(0,er.A)(),i=r.fs,o=r.container,a=ew(t),l=(0,I.jt)(),s=ev({currentPaneId:n,type:"tools"}),c=ev({currentPaneId:n,type:"files"}),u=(0,h.useCallback)(function(e){var n=e.path;t({pane:{type:(0,X.QY)({path:n}),data:{path:n}}})},[t]),d=(0,ed.Sx)(),f=(0,ec.J)(),m=en(t),g=Q(t);return(0,L.A)(function(){var e,n,t,r,h=(0,ei.g)({openFile:u,fs:i,shouldHideFile:f,getRecentFiles:d,getCurrentlyOpenFilePanesCommands:c}),v=(0,eo.Y)({container:o,openFile:u}),w={data:{type:"context",label:eh.Ve,icon:(0,p.Y)(eg.A,{})},commands:(e=(0,H._)(function(e){return(0,z.YH)(this,function(n){switch(n.label){case 0:return[4,s({searchQuery:e.searchQuery})];case 1:return[2,B._.apply(void 0,[n.sent()]).concat((0,B._)(a()))]}})}),function(n){return e.apply(this,arguments)})},y=(t=(n={fs:i,openFile:u}).openFile,r=n.fs,{match:K.KK,data:{type:"context",label:"New file",description:"Create a new file",icon:(0,p.Y)(em.A,{})},commands:function(e){var n=e.searchQuery,i=e.active;return n&&i?[{match:K.G2,data:{type:"action",description:"Create a new file",label:n,icon:(0,p.Y)(ef.A,{path:n}),run:function(){return(0,H._)(function(){return(0,z.YH)(this,function(e){switch(e.label){case 0:return[4,r.stat(n)];case 1:if(e.sent().exists)return[2,{type:"error",message:'"'.concat(n,'" already exists')}];return[4,r.writeFile(n,Z.A.from(""))];case 2:if(e.sent().error)return[2,{type:"error",message:'Could not create "'+n+'"'}];return t({path:n}),[2]}})})()}}}]:[]}});return{data:{type:"group",key:"root",description:"Ask AI, search for files & open tools"},commands:function(){return[y,h,w,m,v].concat((0,B._)(l?[]:[g]))}}},[o,i,d,a,s,c,f,u,m,g,l])}var eb=t(60632),eS=t(50820),eY="Ask AI & search";function eA(){var e=(0,G.Xr)(j.mV);return(0,h.useCallback)(function(n){e(n)},[e])}var ex=t(24365),eC=t(64583),e_=t(48521),ek=t(49150),eD=t(36112),eE=t(91668),eR={id:"toggleGlobalCommandBarCommand",name:"Toggle Commandbar",description:"Opens or closes the command bar",default:(0,ex.FM)({cmdOrCtrl:!0,key:"k"})};function eI(e){var n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{enabled:!0}).enabled,t=(0,G.Xr)(j.S3);(0,h.useEffect)(function(){if(n)return t(function(n){return(0,B._)(n).concat([e])}),function(){t(function(n){return n.filter(function(n){return n!==e})})}},[t,e,n])}var eF=(0,eC.x)({surface:[e_.wp.maxHeight("70vh"),e_.wp.borderRadius(8)]});let eT=(0,h.memo)(function(){var e,n,t,r,i,o,a,l=(0,G.md)(j.Ik),s=eA(),c=(e=(0,et.Us)(),n=ew((0,h.useCallback)(function(n){(0,V.u4)(V.AZ.TOOL_OPENED,{source:"Command Bar",tool:n.pane.type}),e(n)},[e])),t=ev({type:"tools"}),r=(0,eb.Jn)("toggleGlobalCommandBarCommand"),i=(0,L.A)(function(){return{type:"context",icon:(0,p.Y)(eS.A,{}),label:"",description:eY,keyboardShortcut:r}},[r]),o=(0,L.A)(function(){return(0,W.eU)(function(e){var r,o=e(j.S3),a={data:{type:"context",label:eh.Ve,icon:(0,p.Y)(eg.A,{})},commands:(r=(0,H._)(function(e){return(0,z.YH)(this,function(r){switch(r.label){case 0:return[4,t({searchQuery:e.searchQuery})];case 1:return[2,B._.apply(void 0,[r.sent()]).concat((0,B._)(n()))]}})}),function(e){return r.apply(this,arguments)})};return{data:i,commands:function(){return(0,B._)(o).concat([a])}}})},[n,i,t]),a=(0,L.A)(function(){return(0,W.eU)(function(e){var n=e(o),t=e(j.rT);return t?[n,t]:n})},[o]),(0,G.md)(a)),u=(0,eb.Jn)(eR.id);return(0,p.Y)(ek.a,{hideCloseButton:!0,isOpen:l,onRequestClose:s,noPadding:!0,skipTransition:!0,topPadding:8,children:(0,p.Y)(eD.ui,{css:eF.surface,children:(0,p.Y)(eE.r,{keyboardShortcut:u,onAction:function(){return s()},command:c,autoFocus:!0})})})});var eP=t(53635);function eL(){var e=(0,g._)(["\n  query ExtensionStore($replId: String!, $userId: Int) {\n    extensionList(includeNonBlessed: true, userId: $userId) {\n      ...TopLevelExtension\n      installation(replId: $replId) {\n        ...TopLevelExtensionInstallation\n      }\n    }\n  }\n  ","\n  ","\n"]);return eL=function(){return e},e}var eU=(0,v.J1)(eL(),eP.Fz,eP.Tu),eN=t(64513),eO=t(93772),eM=t(31628),eB=t(31062),eH=t(40493),ez=t(46603),eW=t(76126),eG=t(10429),eV=(0,eC.x)({container:e_.wp.colWithGap(24)});function ej(e){var n=e.fileExtension,t=e.onCancel,r=e.onConfirm;return(0,p.FD)(eG.S,{css:eV.container,children:[(0,p.Y)(eW.Y9,{level:1,variant:"headerDefault",children:"Make this extension default?"}),(0,p.FD)(eW.EY,{children:["Do you want to use this extension to open ",n," files by default? You can always use another file opener by right clicking on the file and opening it with something else"]}),(0,p.FD)(eG.S,{row:!0,gap:12,justify:"end",children:[(0,p.Y)(ez.$n,{onClick:function(){return t()},text:"Cancel"}),(0,p.Y)(ez.$n,{colorway:"positive",onClick:function(){return r()},text:"Yes, use this extension by default"})]})]})}var eZ=t(93369),eq=t(36640),eK=t(23099),e$=t.n(eK),eJ=t(60644);function eQ(){var e=(0,ed.RG)(),n=(0,et.SK)(),t=(0,et.je)(),r=(0,et.vs)(),i=(0,et.hT)(),o=(0,et.rQ)(),a=(0,et.TM)(),l=(0,et.aB)(),s=(0,et.k8)(),c=(0,et.yD)();return(0,h.useCallback)(function(u){var p=u.pane,f=u.activate,h=u.updateOnReveal,m=e(),g=(0,X.xS)(p)?l():s();g||(g=function(e){var n,t,r=e.panes,i=e.pane;if((0,X.xS)(i)){var o,a,l=i.data.path;return null!=(a=null==(o=r.find(function(e){var n=(0,d._)(e,2)[1];return(0,X.xS)(n)&&n.data.path===l}))?void 0:o[0])?a:null}if((0,X.En)(i))return null!=(c=null==(s=r.find(function(e){var n=(0,d._)(e,2)[1];return!!(0,X.En)(n)&&n.data.installationId===i.data.installationId&&n.data.path===i.data.path&&n.data.filePath===i.data.filePath}))?void 0:s[0])?c:null;if("diff"===i.type){var s,c,u,p=r.find(function(e){var n=(0,d._)(e,2),t=(n[0],n[1]);return"diff"===t.type&&e$()(t.data,i.data)});return null!=(u=null==p?void 0:p[0])?u:null}return(0,X.gG)(i.type)&&null!=(t=null==(n=r.find(function(e){return(0,d._)(e,2)[1].type===i.type}))?void 0:n[0])?t:null}({panes:(0,B._)(n()).concat((0,B._)(t())),pane:p}));var v=c();if(g&&m){var w,y,b=r().layout,S=null==(w=(0,eJ.gj)(b,m))?void 0:w.paneGroup,Y=null==(y=(0,eJ.gj)(b,g))?void 0:y.paneGroup;if(!v||(null==S?void 0:S.id)===(null==Y?void 0:Y.id))return(void 0===h||h)&&a({paneId:g,pane:p}),o({paneId:g,activate:f}),g}var A=u.placement;return v&&null!=m?A={type:"after",paneId:m}:(null==A?void 0:A.type)!=="secondary"||A.relativeTo||(A={type:"secondary",relativeTo:m}),i({pane:p,activate:f,placement:A})},[e,l,s,i,n,t,r,c,o,a])}var eX=t(30736);function e0(){var e,n=(0,et.q5)(),t=(0,ed.T_)(),r=(e=(0,ed.dm)(),(0,L.A)(function(){return function(n){return e.subscribe(n)}},[e])),i=(0,ed.w1)(),o=(0,eq.A)(),a=eQ(),l=(0,ed.RG)(),s=(0,et.vs)(),c=(0,et.HM)(),u=(0,eX.A)(),d=(0,eZ.A)(u),p=(0,h.useCallback)(function(e){a({pane:{type:"extension",data:{extensionId:e.extensionId,installationId:e.installationId,baseUrl:e.baseUrl,path:e.path,name:e.name}},activate:!0,placement:{type:"secondary",relativeTo:l()}})},[a,l]);return(0,L.A)(function(){return{openFile:n,watchActiveFile:r,getActiveFile:i,activatePane:t,toasts:o,revealOrInsertTool:p,getLayoutState:s,setLayoutState:c,getSshConfig:function(){return d.current}}},[n,r,i,t,o,p,s,c,d])}var e1=t(827),e2=t(68213),e4=t(6973),e5=t(63268),e3=t(45041),e6=t(93629),e8=t(74096),e7=t(83719),e9=t(54240),ne=t(79275),nn=t(1114),nt=t(83846),nr=t(22531),ni=function(e){return e.RAW="RAW",e.PROXY="PROXY",e.THROW="THROW",e.HANDLER="HANDLER",e}({}),no=function(e){return e.GET="GET",e.SET="SET",e.APPLY="APPLY",e.CONSTRUCT="CONSTRUCT",e.ENDPOINT="ENDPOINT",e.RELEASE="RELEASE",e}({}),na=Symbol("Comlink.proxy"),nl=Symbol("Comlink.endpoint"),ns=Symbol("Comlink.releaseProxy"),nc=Symbol("Comlink.thrown"),nu=function(e){return(void 0===e?"undefined":(0,nr._)(e))==="object"&&null!==e||"function"==typeof e},nd=new Map([["proxy",{canHandle:function(e){return nu(e)&&e[na]},serialize:function(e){var n=new MessageChannel,t=n.port1,r=n.port2;return np(e,t),[r,[r]]},deserialize:function(e){var n;return e.start(),function e(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},i=!1,o=new Proxy(r,{get:function(r,a){if(nh(i),a===ns)return function(){return nb(n,{type:no.RELEASE,path:t.map(function(e){return e.toString()})}).then(function(){nf(n),i=!0})};if("then"===a){if(0===t.length)return{then:function(){return o}};var l=nb(n,{type:no.GET,path:t.map(function(e){return e.toString()})}).then(ny);return l.then.bind(l)}return e(n,(0,B._)(t).concat([a]))},set:function(e,r,o){nh(i);var a=(0,d._)(nw(o),2),l=a[0],s=a[1];return nb(n,{type:no.SET,path:(0,B._)(t).concat([r]).map(function(e){return e.toString()}),value:l},s).then(ny)},apply:function(r,o,a){nh(i);var l=t[t.length-1];if(l===nl)return nb(n,{type:no.ENDPOINT}).then(ny);if("bind"===l)return e(n,t.slice(0,-1));var s=(0,d._)(nm(a),2),c=s[0],u=s[1];return nb(n,{type:no.APPLY,path:t.map(function(e){return e.toString()}),argumentList:c},u).then(ny)},construct:function(e,r){nh(i);var o=(0,d._)(nm(r),2),a=o[0],l=o[1];return nb(n,{type:no.CONSTRUCT,path:t.map(function(e){return e.toString()}),argumentList:a},l).then(ny)}});return o}(e,[],n)}}],["throw",{canHandle:function(e){return nu(e)&&nc in e},serialize:function(e){var n,t=e.value;return[t instanceof Error?{isError:!0,value:{message:t.message,name:t.name,stack:t.stack}}:{isError:!1,value:t},[]]},deserialize:function(e){if(e.isError)throw Object.assign(Error(e.value.message),e.value);throw e.value}}]]);function np(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:self,t=arguments.length>2?arguments[2]:void 0;function r(i){if(i&&i.data&&(!t||i.origin===t.origin&&i.source===t.source)){var o,a=(0,m._)({path:[]},i.data),l=a.id,s=a.type,c=a.path,u=(i.data.argumentList||[]).map(ny);try{var p=c.slice(0,-1).reduce(function(e,n){return e[n]},e),f=c.reduce(function(e,n){return e[n]},e);switch(s){case no.GET:o=f;break;case no.SET:p[c.slice(-1)[0]]=ny(i.data.value),o=!0;break;case no.APPLY:o=f.apply(p,u);break;case no.CONSTRUCT:var h=(0,nn._)(f,(0,B._)(u));o=nv(h);break;case no.ENDPOINT:var g,v,w=new MessageChannel,y=w.port1,b=w.port2;np(e,b),g=y,v=[y],ng.set(g,v),o=g;break;case no.RELEASE:o=void 0;break;default:return}}catch(e){o=(0,nt._)({value:e},nc,0)}Promise.resolve(o).catch(function(e){return(0,nt._)({value:e},nc,0)}).then(function(e){var t=(0,d._)(nw(e),2),i=t[0],o=t[1];n.postMessage((0,e6._)((0,m._)({},i),{id:l}),o),s===no.RELEASE&&(n.removeEventListener("message",r),nf(n))})}}return n.addEventListener("message",r),n.start&&n.start(),function(){n.removeEventListener("message",r),nf(n)}}function nf(e){"MessagePort"===e.constructor.name&&e.close()}function nh(e){if(e)throw Error("Proxy has been released and is not useable")}function nm(e){var n,t=e.map(nw);return[t.map(function(e){return e[0]}),(n=t.map(function(e){return e[1]}),Array.prototype.concat.apply([],n))]}var ng=new WeakMap;function nv(e){return Object.assign(e,(0,nt._)({},na,!0))}function nw(e){var n=!0,t=!1,r=void 0;try{for(var i,o=nd[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=(0,d._)(i.value,2),l=a[0],s=a[1];if(s.canHandle(e)){var c=(0,d._)(s.serialize(e),2),u=c[0],p=c[1];return[{type:ni.HANDLER,name:l,value:u},p]}}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}return[{type:ni.RAW,value:e},ng.get(e)||[]]}function ny(e){switch(e.type){case ni.HANDLER:return nd.get(e.name).deserialize(e.value);case ni.RAW:return e.value}}function nb(e,n,t){return new Promise(function(r){var i=[,,,,].fill(0).map(function(){return Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)}).join("-");e.addEventListener("message",function n(t){t.data&&t.data.id&&t.data.id===i&&(e.removeEventListener("message",n),r(t.data))}),e.start&&e.start(),e.postMessage((0,m._)({id:i},n),t)})}var nS=t(73220),nY=t(32752),nA=Symbol("timeout"),nx=t(51952);function nC(){var e=(0,g._)(["\n  fragment InitialCurrentUserData on CurrentUser {\n    id\n    username\n    image\n    bio\n  }\n"]);return nC=function(){return e},e}function n_(){var e=(0,g._)(["\n  fragment SocialCurrentUserData on CurrentUser {\n    url\n    socials {\n      id\n      url\n      type\n    }\n    firstName\n    lastName\n    displayName\n    fullName\n    followCount\n    followerCount\n  }\n"]);return n_=function(){return e},e}function nk(){var e=(0,g._)(["\n  fragment RolesCurrentUserData on CurrentUser {\n    roles {\n      id\n      name\n      key\n      tagline\n    }\n  }\n"]);return nk=function(){return e},e}function nD(){var e=(0,g._)(["\n  fragment PlanCurrentUserData on CurrentUser {\n    isUserHacker: subscriptionIsType(subscriptionType: HACKER)\n    ...CoreSubscriptionPlanStatus\n  }\n  ","\n"]);return nD=function(){return e},e}function nE(){var e=(0,g._)(["\n  fragment SocialUserData on User {\n    url\n    socials {\n      id\n      url\n      type\n    }\n    firstName\n    lastName\n    displayName\n    fullName\n    followCount\n    followerCount\n  }\n"]);return nE=function(){return e},e}function nR(){var e=(0,g._)(["\n  fragment RolesUserData on User {\n    roles {\n      id\n      name\n      key\n      tagline\n    }\n  }\n"]);return nR=function(){return e},e}function nI(){var e=(0,g._)(["\n  fragment PlanUserData on User {\n    isUserHacker: subscriptionIsType(subscriptionType: HACKER)\n    isUserPro: subscriptionIsType(subscriptionType: HACKER_PRO)\n  }\n"]);return nI=function(){return e},e}function nF(){var e=(0,g._)(["\n  fragment InitialReplData on Repl {\n    id\n    url\n    title\n    description\n    timeCreated\n    slug\n    isPrivate\n  }\n"]);return nF=function(){return e},e}function nT(){var e=(0,g._)(["\n  fragment SocialReplData on Repl {\n    likeCount\n    publicForkCount\n    iconUrl\n    imageUrl\n  }\n"]);return nT=function(){return e},e}function nP(){var e=(0,g._)(["\n  fragment InitialUserData on User {\n    id\n    username\n    image\n    bio\n  }\n"]);return nP=function(){return e},e}function nL(){var e=(0,g._)(["\n  fragment OwnerData on Repl {\n    owner {\n      __typename\n      ... on User {\n        ...InitialUserData\n      }\n      ... on Team {\n        id\n        username\n        image\n        description\n      }\n    }\n  }\n  ","\n"]);return nL=function(){return e},e}function nU(){var e=(0,g._)(["\n  fragment MultiplayersData on Repl {\n    multiplayers {\n      ...InitialUserData\n    }\n  }\n  ","\n"]);return nU=function(){return e},e}function nN(){var e=(0,g._)(["\n  query extensionPortCurrentUser(\n    $includeSocialData: Boolean! = false\n    $includeRoles: Boolean! = false\n    $includePlan: Boolean! = false\n  ) {\n    user: currentUser {\n      ...InitialCurrentUserData\n      ...SocialCurrentUserData @include(if: $includeSocialData)\n      ...RolesCurrentUserData @include(if: $includeRoles)\n      ...PlanCurrentUserData @include(if: $includePlan)\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return nN=function(){return e},e}function nO(){var e=(0,g._)(["\n  query extensionPortUserByUsername(\n    $username: String!\n    $includeSocialData: Boolean! = false\n    $includeRoles: Boolean! = false\n    $includePlan: Boolean! = false\n  ) {\n    userByUsername(username: $username) {\n      ...InitialUserData\n      ...SocialUserData @include(if: $includeSocialData)\n      ...RolesUserData @include(if: $includeRoles)\n      ...PlanUserData @include(if: $includePlan)\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return nO=function(){return e},e}function nM(){var e=(0,g._)(["\n  query extensionPortUserById(\n    $id: Int!\n    $includeSocialData: Boolean! = false\n    $includeRoles: Boolean! = false\n    $includePlan: Boolean! = false\n  ) {\n    user(id: $id) {\n      ...InitialUserData\n      ...SocialUserData @include(if: $includeSocialData)\n      ...RolesUserData @include(if: $includeRoles)\n      ...PlanUserData @include(if: $includePlan)\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return nM=function(){return e},e}function nB(){var e=(0,g._)(["\n  query currentUserEditorPreferences {\n    currentUser {\n      id\n      workspacePreferences\n    }\n  }\n"]);return nB=function(){return e},e}function nH(){var e=(0,g._)(["\n  query extensionPortReplById(\n    $id: String!\n    $includeSocialData: Boolean! = false\n    $includeOwner: Boolean! = false\n    $includeMultiplayers: Boolean! = false\n  ) {\n    repl(id: $id) {\n      __typename\n      ... on Repl {\n        ...InitialReplData\n        ...SocialReplData @include(if: $includeSocialData)\n        ...OwnerData @include(if: $includeOwner)\n        ...MultiplayersData @include(if: $includeMultiplayers)\n      }\n      ... on ReplRedirect {\n        replUrl\n      }\n      ... on SubscriptionExpiredError {\n        isOwner\n        replId\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return nH=function(){return e},e}function nz(){var e=(0,g._)(["\n  query extensionPortReplByUrl(\n    $url: String!\n    $includeSocialData: Boolean! = false\n    $includeOwner: Boolean! = false\n    $includeMultiplayers: Boolean! = false\n  ) {\n    repl(url: $url) {\n      __typename\n      ... on Repl {\n        ...InitialReplData\n        ...SocialReplData @include(if: $includeSocialData)\n        ...OwnerData @include(if: $includeOwner)\n        ...MultiplayersData @include(if: $includeMultiplayers)\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return nz=function(){return e},e}var nW=(0,v.J1)(nC()),nG=(0,v.J1)(n_()),nV=(0,v.J1)(nk()),nj=(0,v.J1)(nD(),nx.y),nZ=(0,v.J1)(nE()),nq=(0,v.J1)(nR()),nK=(0,v.J1)(nI()),n$=(0,v.J1)(nF()),nJ=(0,v.J1)(nT()),nQ=(0,v.J1)(nP()),nX=(0,v.J1)(nL(),nQ),n0=(0,v.J1)(nU(),nQ),n1=(0,v.J1)(nN(),nW,nG,nV,nj),n2=(0,v.J1)(nO(),nQ,nZ,nq,nK),n4=(0,v.J1)(nM(),nQ,nZ,nq,nK),n5=(0,v.J1)(nB()),n3=(0,v.J1)(nH(),n$,nJ,nX,n0),n6=(0,v.J1)(nz(),n$,nJ,nX,n0);function n8(e){var n;return n=(0,H._)(function(n){var t,r;return(0,z.YH)(this,function(i){switch(i.label){case 0:return[4,null===eH.V||void 0===eH.V?void 0:eH.V.query({query:e,variables:n||void 0})];case 1:if(null==(t=i.sent())?void 0:t.data)return[2,t.data];throw Error(null==t||null==(r=t.error)?void 0:r.message)}})}),function(e){return n.apply(this,arguments)}}var n7=t(79730),n9=t(22677);function te(e,n){var t={};for(var r in n)"function"==typeof n[r]&&(t[r]=function(e,n){return function(){for(var t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];var o=!0,a=!1,l=void 0;try{for(var s,c=e[Symbol.iterator]();!(o=(s=c.next()).done);o=!0)(0,s.value)()}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}return n.apply(void 0,(0,B._)(r))}}(e,n[r]));return t}function tn(e,n){return function(){var t=e.store.get(e.extensionStateAtom),r=!0,i=!1,o=void 0;try{for(var a,l=n[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var s=a.value;if(!t.scopes.has(s)){var c="Scope not declared in extension.json: ".concat(s);e.logger.warn("".concat(c,". In the future this will throw an error"))}}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}}}var tt=n7.ZU.Record(n7.ZU.String(),n7.ZU.String({minLength:1})),tr=t(30451);function ti(){var e=(0,g._)(["\n  query ExtensionApiAuthToken($installationId: String!) {\n    extensionInstallationById(id: $installationId) {\n      ... on ExtensionInstallation {\n        id\n        token\n      }\n    }\n  }\n"]);return ti=function(){return e},e}var to=(0,v.J1)(ti());function ta(e){var n,t;return{registerCommand:(n=(0,H._)(function(n,t){var r,i,o;return(0,z.YH)(this,function(a){switch(a.label){case 0:if(t)return[3,2];return e.logger.warn("registerCommand: calling registerCommand with a single argument is deprecated. Pass a {commandId, contributions} object as the first command."),r=n,[4,(0,e5.c)(r,e)];case 1:if(!(o=a.sent()).data.id)throw Error("Command: expected id to be defined");if(!("contributions"in o.data))throw Error("Command: In ".concat(o.data.id,", contributions should be an array"));return 0===o.data.contributions.length&&e.logger.warn("Command: ".concat(o.data.id," has no contributions")),(i={commandId:o.data.id,contributions:o.data.contributions}).contributions||(e.logger.warn("Command: '".concat(o.data.id,"' has no contributions")),i.contributions=[]),[3,4];case 2:return i=n,r=t,[4,(0,e5.c)(r,e)];case 3:o=a.sent(),a.label=4;case 4:return e.store.set(nS.Pw,{extensionStateAtom:e.extensionStateAtom,createCommand:{id:(0,eO.eb)(i.commandId),contributions:i.contributions,create:(0,H._)(function(){return(0,z.YH)(this,function(e){return[2,o]})})}}),[2]}})}),function(e,t){return n.apply(this,arguments)}),registerCreateCommand:(t=(0,H._)(function(n,t){var r,i;return(0,z.YH)(this,function(o){var a;if(!n.commandId||""===n.commandId)throw Error("Attempted to register command without id");if(!n.contributions||!Array.isArray(n.contributions))throw Error("Command: In ".concat(n.commandId,", contributions should be an array"));return 0===n.contributions.length&&e.logger.warn("Command: ".concat(n.commandId," has no contributions")),(r=n.contributions.filter(function(e){return!(e in nY.P)})).length>0&&e.logger.warn("Command: ".concat(n.commandId," has unrecognized contributions: ").concat(r.join(", "),". Valid contributions are ").concat(Object.values(nY.P))),i={id:(0,eO.eb)(n.commandId),contributions:n.contributions,create:(a=(0,H._)(function(n){var r;return(0,z.YH)(this,function(i){switch(i.label){case 0:return[4,Promise.race([t({path:n.path}),new Promise(function(e){return setTimeout(function(){return e(null)},50)})])];case 1:if(null===(r=i.sent()))return[2,null];return[2,(0,e5.c)(r,e)]}})}),function(e){return a.apply(this,arguments)})},e.store.set(nS.Pw,{extensionStateAtom:e.extensionStateAtom,createCommand:i}),[2]})}),function(e,n){return t.apply(this,arguments)})}}function tl(e){return function(){if(!e.store.get(e.extensionStateAtom).enableExperimentalApi)throw Error("Experimental APIs are not enabled. (If you are the developer, please add the `experimental-api` scope to your extension.json)")}}var ts=t(83150),tc=t(22085),tu=t(7512);function td(e){return e.error?{error:e.error,success:!1}:{success:!0,error:null}}var tp=t(45005),tf=t(76418),th=t(34626),tm=function(e,n){var t=e.extension,r=n.showMessage,i=n.hideMessage,o=n.hideAllMessages,a=function(e){return function(n){var i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4e3,a=arguments.length>2?arguments[2]:void 0,c=Date.now();c-s>=6e4&&(s=c,l=0);var u=null!=(i=t.manifest.name.trim())?i:"Unknown Extension";l<10?(r({content:(0,p.FD)(p.FK,{children:[n,(0,p.Y)("div",{children:(0,p.Y)(eW.EY,{variant:"small",children:u})})]}),type:e,time:o>1e4?1e4:o,style:a}),l++):th.vF.error("Extension reached showMessage throttle limit",{extensionId:t.extensionId,extensionName:t.manifest.name,content:n})}},l=0,s=Date.now();return{showConfirm:a("confirm"),showError:a("error"),showNotice:a("notice"),showWarning:a("warning"),hideMessage:i,hideAllMessages:o}},tg=t(13178),tv=t(33781);function tw(e){var n=e.extension,t=e.sandboxUrl,r=e.sandboxTitle,i=e.paneId,o=e.environmentAPIs,a=e.filePath,l=(0,h.useRef)(null),s=(0,eB.A)(),c=(0,eM.T)(),u=(0,er.A)(),p=(0,h.useRef)(),f=(0,tg.p9)(),g=(0,e4.X_)(null==n?void 0:n.installationId),v=(0,tv.D)(),w=(0,h.useRef)(v),y=(0,h.useRef)([]);w.current=v;var b=(0,L.A)(function(){return{}},[]),S=(0,ne.A)(u.container),Y=(0,d._)((0,h.useState)(!1),2),A=Y[0],x=Y[1];(0,h.useEffect)(function(){S===e8.KN.CONNECTED&&x(!0)},[S]),(0,h.useEffect)(function(){y.current.forEach(function(e){return e(v.theme)})},[v.theme]),(0,h.useEffect)(function(){return function(){p.current&&p.current()}},[]);var C=(0,h.useCallback)(function(){try{var e=new URL(t);if("https:"===e.protocol)return!0;return!1}catch(e){return!1}},[t]),_=(0,h.useCallback)(function(){l.current&&C()&&n&&g&&c&&(p.current&&p.current(),p.current=function(e){var n=e.extensionIframe,t=new URL(n.src).origin,r=function(e){var n,t,r,i,o,a,l,s,c,u=e.filePath,d=e.replId,p=e.environmentAPIs,f=e.logger.createLogger({api:"debug"});function h(){return(h=(0,H._)(function(n){var t,r,i,o;return(0,z.YH)(this,function(a){switch(a.label){case 0:return[4,null==n?void 0:n.clientName];case 1:return r=null!=(t=a.sent())?t:"(unset)",[4,null==n?void 0:n.clientVersion];case 2:return o=null!=(i=a.sent())?i:"(unset)",(0,V.u4)(V.AZ.EXTENSION_SANDBOX_INITIALIZED,{clientName:r,clientVersion:o,extensionId:e.extension.extensionId,extensionName:e.extension.manifest.name,installationId:e.extension.installationId}),(0,H._)(function(){var n,t,i;return(0,z.YH)(this,function(a){switch(a.label){case 0:if(!e.extension.isLocal||"@replit/extensions"!==r)return[2];return[4,e.services.container.exec("sh","-c","npm view @replit/extensions --json version 2>/dev/null")];case 1:if((t=a.sent()).error)throw t.error;if(!t.output)throw Error("No output from npm");if((i=JSON.parse(null==(n=t.output)?void 0:n.trim()))===o)return[2];return e.logger.warn("There is a new version of @replit/extensions available. You are using ".concat(o,", but the latest version is ").concat(i),{clientVersion:o,latestVersion:i}),[2]}})})(),[2,{success:!0}]}})})).apply(this,arguments)}return(0,e6._)((0,m._)({filePath:u},function(e){var n=e.services.fs,t=e.logger.createLogger({api:"fs"});function r(){return(r=(0,H._)(function(e,t){var r,i,o;return(0,z.YH)(this,function(a){switch(a.label){case 0:if(r=(0,tc.Fd)(e),"string"!=typeof t)return[3,1];return i=t,[3,4];case 1:if(!(t instanceof Blob))return[3,3];return o=Z.A.from,[4,t.arrayBuffer()];case 2:return i=o.apply(Z.A,[a.sent()]),[3,4];case 3:i=Z.A.from(t),a.label=4;case 4:return[4,n.writeFile(r,i)];case 5:return[2,td(a.sent())]}})})).apply(this,arguments)}function i(){return(i=(0,H._)(function(e){var t,r,i,o=arguments;return(0,z.YH)(this,function(a){switch(a.label){case 0:return t=o.length>1&&void 0!==o[1]?o[1]:"utf8",r=(0,tc.Fd)(e),[4,n.readFile(r)];case 1:var l,s;if((i=a.sent()).error)return[2,{error:i.error,content:null}];return[2,{error:null,content:(l=i.content,"utf8"===(s=t)?l.toString():"binary"===s?l.toBuffer():l)}]}})})).apply(this,arguments)}function o(){return(o=(0,H._)(function(e){var t,r;return(0,z.YH)(this,function(i){switch(i.label){case 0:return t=(0,tc.Fd)(e),[4,n.readDir(t)];case 1:if((r=i.sent()).error)return[2,{error:r.error,children:null}];return[2,{error:null,children:r.children}]}})})).apply(this,arguments)}function a(){return(a=(0,H._)(function(e){var t;return(0,z.YH)(this,function(r){switch(r.label){case 0:return t=(0,tc.Fd)(e),[4,n.createDir(t)];case 1:return[2,td(r.sent())]}})})).apply(this,arguments)}function l(){return(l=(0,H._)(function(e){var t;return(0,z.YH)(this,function(r){switch(r.label){case 0:return t=(0,tc.Fd)(e),[4,n.deleteDir(t)];case 1:return[2,td(r.sent())]}})})).apply(this,arguments)}function s(){return(s=(0,H._)(function(e){var t;return(0,z.YH)(this,function(r){switch(r.label){case 0:return t=(0,tc.Fd)(e),[4,n.deleteFile(t)];case 1:return[2,td(r.sent())]}})})).apply(this,arguments)}function c(){return(c=(0,H._)(function(e,t){var r,i,o;return(0,z.YH)(this,function(a){switch(a.label){case 0:return r=(0,tc.Fd)(e),[4,n.stat(r)];case 1:if(!(i=a.sent()).exists)return[2,{error:"File or directory does not exist",success:!1}];if(i.type!==tu.pt.File)return[3,3];return[4,n.moveFile(r,t)];case 2:return o=a.sent(),[3,5];case 3:return[4,n.moveDir(r,t)];case 4:o=a.sent(),a.label=5;case 5:return[2,td(o)]}})})).apply(this,arguments)}function u(){return(u=(0,H._)(function(e,t){var r;return(0,z.YH)(this,function(i){switch(i.label){case 0:return r=(0,tc.Fd)(e),[4,n.copyFile(r,t)];case 1:return[2,td(i.sent())]}})})).apply(this,arguments)}return te([tn(e,["read"])],(0,m._)({readFile:function(e){return i.apply(this,arguments)},readDir:function(e){return o.apply(this,arguments)},watchFile:function(e,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"binary",o=(0,tc.Fd)(e);(0,ts.m6)(o)&&t.warn("Extension used watchFile on a text file. This works, but watchTextFile is preferred.");var a=n.watchFile(o,{onChange:function(e){if("utf8"===i)return void r.onChange(e.toString("utf8"));r.onChange(e.asBuffer)},onError:function(e){r.onError(e.message)},onMoveOrDelete:function(e){r.onMoveOrDelete({eventType:e.eventType,node:e.node})}});return nv(function(){a()})},watchDir:function(e,t){var r=(0,tc.Fd)(e),i=n.watchDir(r,{onChange:function(n){t.onChange(n.map(function(n){return{path:(0,tc.me)(e)+n.filename,type:n.type}}))},onError:function(e){t.onError(e)},onMoveOrDelete:function(e){t.onMoveOrDelete(e)}});return nv(function(){i()})}},te([tn(e,["write-exec"])],{createDir:function(e){return a.apply(this,arguments)},deleteDir:function(e){return l.apply(this,arguments)},writeFile:function(e,n){return r.apply(this,arguments)},deleteFile:function(e){return s.apply(this,arguments)},copyFile:function(e,n){return u.apply(this,arguments)},move:function(e,n){return c.apply(this,arguments)},watchTextFile:function(e,r){(0,ts.m6)(e)||t.warn("It appears that you are trying to use watchTextFile on a non-OT file. Please use fs.watchFile instead");var i,o=n.watchTextFile(e,{onReady:function(e){var n=e.fetchChanges,t=e.initialContent,i=e.transformSelection,o=e.updateSelections,a=e.version,l=e.writeChange;r.onReady(nv({writeChange:l,fetchChanges:n,initialContent:t,version:a,transformSelection:i,updateSelections:o}))},onChange:(i=(0,H._)(function(e){var n,t,i,o;return(0,z.YH)(this,function(a){return n=e.latestContent,t=e.changeSource,i=e.changes,o=e.version,r.onChange({latestContent:n.toString(),version:o,changeSource:t,changes:i.toJSON()}),[2]})}),function(e){return i.apply(this,arguments)}),onError:function(e){r.onError(e.message)},onMoveOrDelete:function(e){r.onMoveOrDelete({eventType:e.eventType,node:e.node})}});return nv(function(){o()})}})))}(e),function(e){var n=e.services.container,t=null;function r(){return i.apply(this,arguments)}function i(){return(i=(0,H._)(function(){var e;return(0,z.YH)(this,function(r){switch(r.label){case 0:if(t)return[2];return[4,n.exec("bash","-c","echo $REPLIT_DB_URL")];case 1:if((e=r.sent()).error||!e.output)throw Error("unable to find REPLIT_DB_URL");return t=e.output.trim(),[2]}})})).apply(this,arguments)}function o(){return(o=(0,H._)(function(e,i){return(0,z.YH)(this,function(o){switch(o.label){case 0:return[4,r()];case 1:return o.sent(),[4,n.exec("curl",t,"-s","-d","".concat(e,"=").concat(i))];case 2:return o.sent(),[2]}})})).apply(this,arguments)}function a(){return(a=(0,H._)(function(e){return(0,z.YH)(this,function(i){switch(i.label){case 0:return[4,r()];case 1:return i.sent(),[4,n.exec("curl","-s","".concat(t,"/").concat(e))];case 2:return[2,i.sent().output]}})})).apply(this,arguments)}function l(){return(l=(0,H._)(function(e){var i;return(0,z.YH)(this,function(o){switch(o.label){case 0:return[4,r()];case 1:return o.sent(),[4,n.exec("curl","-s","".concat(t,"?prefix=").concat(e))];case 2:if((i=o.sent()).error||!i.output)return[2,{error:i.error}];return[2,{keys:i.output.split("\n")}]}})})).apply(this,arguments)}function s(){return(s=(0,H._)(function(e){var i;return(0,z.YH)(this,function(o){switch(o.label){case 0:return[4,r()];case 1:return o.sent(),[4,n.exec("curl","-s","-XDELETE","".concat(t,"/").concat(e))];case 2:if((i=o.sent()).error||!i.output)return[2,{error:i.error}];return[2,{keys:i.output.split("\n")}]}})})).apply(this,arguments)}return te([tn(e,["repldb:read"])],(0,m._)({getReplDbValue:function(e){return a.apply(this,arguments)},listReplDbKeys:function(e){return l.apply(this,arguments)}},te([tn(e,["repldb:write"])],{setReplDbValue:function(e,n){return o.apply(this,arguments)},deleteReplDbKey:function(e){return s.apply(this,arguments)}})))}(e),{watchActiveFile:function(e){return nv(n.environmentAPIs.watchActiveFile(e))},openFile:(n=e).environmentAPIs.openFile,getActiveFile:function(){return n.environmentAPIs.getActiveFile()}},(t=e.getThemeContext,r=e.onThemeChange,{getCurrentTheme:function(){return t().theme},getCurrentThemeValues:function(){return t().theme.values.global},onThemeChange:function(e){var n=r(e);return nv(function(){n()})},onThemeChangeValues:function(e){var n=r(function(n){return e(n.values.global)});return nv(function(){n()})}}),tm(e,p.toasts),{currentUser:n8(n1),userById:n8(n4),userByUsername:n8(n2),currentRepl:function(e){return n8(n3)((0,m._)({id:d},e))},replById:n8(n3),replByUrl:n8(n6)},function(e){var n=e.services.container.client(),t=e.logger.createLogger({api:"exec"});function r(){return(r=(0,H._)(function(e){var r,i,o,a;return(0,z.YH)(this,function(l){switch(l.label){case 0:return[4,e.args];case 1:return r=l.sent(),[4,e.env];case 2:if(i=l.sent(),t.info("exec: [".concat(r.join(", "),"]"),{environmentVariables:i}),!n9.J(tt,i))throw Error("Invalid environment variables");return[4,e.splitStderr];case 3:return o=l.sent(),a=function(){},[2,nv({dispose:function(){a()},promise:new Promise(function(l){a=n.openChannel({service:"exec"},function(n){var s=n.channel;s.onCommand(function(n){o?n.output?e.onOutput(n.output):n.stderr&&e.onStdErr(n.stderr):n.output&&e.onOutput(n.output)}),s.request({exec:{args:r,env:i,splitStderr:!!o}}).then(function(n){if(n.ok)return void l({exitCode:0,error:null});if(n.channelClosed){var t="Channel closed before command's execution finished";e.onError(t),l({exitCode:null,error:t});return}if("open"===s.status&&a(),n.error){var r,i,o=Number(null==(i=n.error)||null==(r=i.match(/-?[0-9]+/g))?void 0:r[0]);l({exitCode:"number"==typeof o?o:null,error:n.error});return}throw Error("Unknown error")}).catch(function(n){t.error("exec: threw crosis error:\n".concat(String(n||"")));var r="exec() failed due to internal error. See console for details.";e.onError(r),l({error:r,exitCode:null})})})})})]}})})).apply(this,arguments)}return(0,m._)({},te([tn(e,["write-exec"])],{exec:function(e){return r.apply(this,arguments)}}))}(e),(i=e.extension,o=e.paneId,a=e.environmentAPIs,l=!1,{activatePane:function(){o&&(a.activatePane(o),l||(l=!0,(0,V.u4)(V.AZ.EXTENSION_USED,{extensionId:i.extensionId,extensionName:i.manifest.name})))}})),{commands:{registerCommand:(s=(0,H._)(function(n,t){var r;return(0,z.YH)(this,function(i){switch(i.label){case 0:if(!n.commandId||""===n.commandId)throw Error("Attempted to register command without id");if(!n.contributions||!Array.isArray(n.contributions))throw Error("Command: In ".concat(n.commandId,", contributions should be an array"));return 0===n.contributions.length&&e.logger.warn("Command: ".concat(n.commandId," has no contributions")),[4,(0,e5.c)(t,e)];case 1:return r=i.sent(),e.store.set(nS.Pw,{extensionStateAtom:e.extensionStateAtom,createCommand:{id:n.commandId,contributions:n.contributions,create:(0,H._)(function(){return(0,z.YH)(this,function(e){return[2,r]})})}}),[2]}})}),function(e,n){return s.apply(this,arguments)}),registerCreateCommand:(c=(0,H._)(function(n,t){var r,i;return(0,z.YH)(this,function(o){var a;if(!n.commandId||""===n.commandId)throw Error("Attempted to register command without id");if(!n.contributions||!Array.isArray(n.contributions))throw Error("Command: In ".concat(n.commandId,", contributions should be an array"));return 0===n.contributions.length&&e.logger.warn("Command: ".concat(n.commandId," has no contributions")),(r=n.contributions.filter(function(e){return!(e in nY.P)})).length>0&&e.logger.warn("Command: ".concat(n.commandId," has unrecognized contributions: ").concat(r.join(", "),". Valid contributions are ").concat(Object.values(nY.P))),i={id:n.commandId,contributions:n.contributions,create:(a=(0,H._)(function(n){var r;return(0,z.YH)(this,function(i){switch(i.label){case 0:return[4,Promise.race([t({path:n.path}),new Promise(function(e){return setTimeout(function(){return e(nA)},50)})])];case 1:if(null===(r=i.sent()))return[2,null];if(r===nA)return e.logger.warn("Command took too long to create. When using registerCreateCommand, you must return a command within ".concat(50,"ms")),[2,null];return[2,(0,e5.c)(r,e)]}})}),function(e){return a.apply(this,arguments)})},e.store.set(nS.Pw,{extensionStateAtom:e.extensionStateAtom,createCommand:i}),[2]})}),function(e,n){return c.apply(this,arguments)})},experimental:(0,e6._)((0,m._)({},te([tl(e)],{hasExperimentalApi:function(){return!0}})),{editor:te([tl(e)],(0,m._)({},function(){function e(){return(e=(0,H._)(function(){var e,n,t,r;return(0,z.YH)(this,function(i){switch(i.label){case 0:return[4,null===eH.V||void 0===eH.V?void 0:eH.V.query({query:n5})];case 1:if(null==(t=i.sent())||null==(n=t.data)||null==(e=n.currentUser)?void 0:e.workspacePreferences)return[2,(0,tr.o)(t.data.currentUser.workspacePreferences)];throw Error(null==t||null==(r=t.error)?void 0:r.message)}})})).apply(this,arguments)}return{getPreferences:function(){return e.apply(this,arguments)}}}())),commands:te([tl(e)],(0,m._)({},ta(e))),auth:te([tl(e)],(0,m._)({},{getAuthToken:function(){return(0,H._)(function(){var n,t;return(0,z.YH)(this,function(r){switch(r.label){case 0:if(e.extension.isLocal)return[2,[btoa(JSON.stringify({alg:"none",typ:"JWT",local:!0,key:"there-is-no-key-for-local-extensions"})),btoa(JSON.stringify({installationId:e.extension.installationId,extensionId:e.extension.extensionId,userId:e.userId,origin:"https://staging.replit.com"})),"this-is-a-locally-generated-jwt-that-will-fail-verification-to-avoid-being-used-accidentally-in-prod-so-please-check-the-header-for-whether-this-is-a-local-extension"].join(".")];return[4,null===eH.V||void 0===eH.V?void 0:eH.V.query({query:to,variables:{installationId:e.extension.installationId}})];case 1:if(!(null==(n=r.sent())?void 0:n.data))throw Error("Failed to authenticate: something went wrong");if("NotFoundError"===(t=n.data.extensionInstallationById).__typename)throw Error("Failed to authenticate: invalid installation ID");if("ExtensionInstallation"!==t.__typename||!t.token)throw Error("Failed to authenticate: something went wrong");return[2,t.token]}})})()}})),internal:te([tl(e)],(0,m._)({},ta(e)))}),internal:function(e){var n,t,r,i;return e.store.get(e.extensionStateAtom).enableInternalApi?{hasInternalApi:function(){return!0},ghostwriter:{},runner:(n=e.services.runner,{getRunState:function(){return n.getRunState()},onStateChanged:function(e){var t=n.onStateChanged(e);return nv(function(){t()})}}),container:(t=e.services.container,{getConnectionState:function(){return t.getConnectionState()},onConnectionStateChanged:function(e){var n=t.onConnectionStateChanged(e);return nv(function(){n()})}}),layout:{revealOrInsertTool:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=e.logger.createLogger({api:"revealOrInsertTool"});if(!e.extension.manifest.tools)return void t.warn("No tools defined in extension manifest");if(e.extension.manifest.tools.length<n+1)return void t.warn("Tool index out of bounds");var r=e.extension.manifest.tools[n],i=r.name||e.extension.manifest.name,o=r.handler;e.environmentAPIs.revealOrInsertTool({extensionId:e.extension.extensionId,installationId:e.extension.installationId,baseUrl:e.extension.baseUrl,path:o,name:i})},getLayoutState:function(){return e.environmentAPIs.getLayoutState()},setLayoutState:function(n){return e.environmentAPIs.setLayoutState(n)}},secrets:(r=e.services.secrets,{setSecret:function(e){var n=e.key,t=e.value;return(0,H._)(function(){return(0,z.YH)(this,function(e){switch(e.label){case 0:return[4,r.addEntries([{key:n,value:t}])];case 1:return e.sent(),[2,(0,tp.Ok)(!0)]}})})()},getSecret:function(e){return(0,H._)(function(){var n;return(0,z.YH)(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,r.read()];case 1:return[2,tp.Ok.apply(void 0,[t.sent().get(e.key)])];case 2:return n=t.sent(),[2,(0,tp._)(n)];case 3:return[2]}})})()},getReferenceCode:function(e){return(0,H._)(function(){return(0,z.YH)(this,function(n){return[2,(0,tf.M)(e.filePath,e.key)]})})()}}),dotReplit:{getConfig:(i=e.services.dotReplit).getConfig,update:i.updateDotReplit},ssh:{getSshConfig:function(){return(0,H._)(function(){return(0,z.YH)(this,function(n){return[2,e.environmentAPIs.getSshConfig()]})})()}},commands:ta(e)}:null}(e),debug:{info:function(e,n){return f.info(e,n)},warn:function(e,n){return f.warn(e,n)},error:function(e,n){return f.error(e,n)}},handshake:function(e){return h.apply(this,arguments)}})}(e);if(!n.contentWindow)throw Error("No contentWindow");var i=np(r,function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:self,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"*";return{postMessage:function(n,r){e.postMessage(n,t,r)},addEventListener:n.addEventListener.bind(n),removeEventListener:n.removeEventListener.bind(n)}}(n.contentWindow,self,t),{origin:t,source:n.contentWindow}),o=function(r){if(r.origin===t&&n.contentWindow===r.source){var i=r.data;i.payload&&e.logger.warn("Extension sent deprecated postMessage",i)}};return window.addEventListener("message",o),function(){i(),window.removeEventListener("message",o)}}({extension:n,extensionIframe:l.current,services:u,paneId:i,replId:s,getThemeContext:function(){return w.current},onThemeChange:function(e){return y.current.push(e),function(){y.current.splice(y.current.indexOf(e),1)}},store:f,extensionStateAtom:g,environmentAPIs:o,filePath:a,logger:n.logger.createLogger({sandboxUrl:t,sandboxTitle:r}),userId:c,ghostwriter:b}))},[c,w,u,C,i,f,g,o,s,a,n,t,r,b]);return{isValidExtensionPaneUrl:C,didConnectOnce:A,getIframeProps:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,e6._)((0,m._)({title:r,src:t},e7.A,e),{ref:(0,e9.P)([l,e.ref],{breadcrumb:"client/workspace/extensions/sandbox/useExtensionSandbox.tsx:191"}),onLoad:function(n){_(),e.onLoad&&e.onLoad(n)}})},reloadSandbox:(0,h.useCallback)(function(){if(l.current){var e=l.current.src;l.current.src=e}},[])}}function ty(e){var n=e.extension,t=e.environmentAPIs;if(!n.manifest.background)throw Error("ExtensionBackground loaded without a background script defined in manifest");var r=(0,e4.X_)(n.installationId),i=tw({extension:n,sandboxUrl:(0,e3.sU)(n.baseUrl,n.manifest.background.page),sandboxTitle:"Extension Background: "+n.manifest.name,environmentAPIs:t,paneId:null,filePath:null}),o=i.didConnectOnce,a=i.isValidExtensionPaneUrl,l=i.getIframeProps;return a()&&o&&r?(0,p.Y)("iframe",(0,m._)({},l({css:{width:"0px",height:"0px",border:"none"}}))):null}var tb=t(61005),tS=t(70785),tY=t(91509),tA=t(54497),tx=t(23266);function tC(){var e=(0,eB.A)(),n=(0,eM.T)(),t=(0,er.A)().container,r=(0,e2.A)(t).url,i=(0,tb.oR)(),o=(0,e4.Sc)(),a=(0,et.Us)(),l=(0,tS.yb)(),s=(0,e4.hS)(),c=(0,tS.iD)();(0,tb.Ju)();var u=(0,e4.Ot)(),f=e0(),m=(0,d._)((0,h.useState)(!1),2),g=m[0],v=m[1];(0,h.useEffect)(function(){e&&n&&c({replId:e,userId:n})},[e,n,c]);var w=(0,nS.xx)(),y=(0,et.GB)();(0,h.useEffect)(function(){y(w)},[w,y]);var b=(0,et.OC)();(0,e1.Yz)();var S=(0,et.GP)(),Y=(0,et.up)(),A=function(t){var r,i=t.filterUser;return r=(0,H._)(function(t){var r,a;return(0,z.YH)(this,function(l){switch(l.label){case 0:if(!t.active)return[2,[]];return[4,null===eH.V||void 0===eH.V?void 0:eH.V.query({query:eU,variables:{replId:e,userId:i?n:void 0}})];case 1:if(!(r=l.sent())||r.error||!(a=r.data.extensionList))return[2,[]];return[2,a.map(function(n){var t;return{match:K.G2,data:{type:"action",label:n.name,icon:(0,p.Y)(tx.A,{}),description:null!=(t=n.description)?t:"",run:function(){n.url&&(n.installation?s({installationId:(0,eO.qq)(n.installation.id)}):o({replId:e,extensionId:(0,eO.PM)(n.id)}))}}}})]}})}),function(e){return r.apply(this,arguments)}},x=(0,nS.Zp)(nY.P.CommandBar);return eI({data:{type:"group",key:"Extensions",description:"Commands from Extensions"},commands:(0,H._)(function(){var e;return(0,z.YH)(this,function(n){switch(n.label){case 0:var t;return e=[{data:{}}],[4,Promise.all(x.map((t=(0,H._)(function(n){var t;return(0,z.YH)(this,function(r){switch(r.label){case 0:return[4,n.create({path:e})];case 1:if(!(t=r.sent()))return[2,null];return[2,(0,e5.l)(t,{path:e})]}})}),function(e){return t.apply(this,arguments)})))];case 1:return[2,n.sent().filter(Boolean)]}})})},{enabled:!0}),eI({match:K.G2,commands:function(e){return e.active||""!==e.searchQuery?[{match:K.G2,data:{type:"action",label:"Extension Devtools",icon:(0,p.Y)(em.A,{}),description:"Manage and deploy this Repl as an extension",run:function(){a({pane:{type:"extensionDevtools"}})}}},{match:K.G2,data:{type:"action",label:"URL",icon:(0,p.Y)(em.A,{}),description:"Add an extension by URL",run:function(){v(!0)}}},{match:K.G2,data:{type:"action",label:"From this Repl",icon:(0,p.Y)(em.A,{}),description:"Load this Repl as an extension",run:function(){r&&l(r)}}},{match:K.G2,data:{type:"context",label:"My Extensions",icon:(0,p.Y)(tx.A,{}),description:"Browse extensions you have created"},commands:A({filterUser:!0})},{match:K.G2,data:{type:"action",label:"Docs",icon:(0,p.Y)(tA.A,{}),description:"Read the Extensions docs",run:function(){a({pane:{type:"docs",data:{url:eN.ik.EXTENSIONS}}})}}}]:[]},data:{type:"context",label:"Extensions",icon:(0,p.Y)(tx.A,{}),description:"Manage extensions"}},{enabled:i}),(0,p.FD)(p.FK,{children:[(0,p.Y)(ek.a,{isOpen:g,onRequestClose:function(){return v(!1)},children:(0,p.Y)(tY.A,{prompt:"Add an extension by URL",desc:"Insert extension url",placeholder:"https://example-extension.replit.app",type:"text",onCancel:function(){return v(!1)},onConfirm:function(e){l(e)}})}),(0,p.Y)(ek.a,{isOpen:!!S,onRequestClose:function(){return Y(null)},children:S?(0,p.Y)(ej,{fileExtension:S.fileExtension,extensionId:S.extensionId,fileHandlerId:S.fileHandlerId,onCancel:function(){return Y(null)},onConfirm:(0,H._)(function(){var e;return(0,z.YH)(this,function(n){switch(n.label){case 0:return e=S.fileExtension,[4,b({fileExtension:e,newAssociation:{extensionId:S.extensionId,fileHandlerId:S.fileHandlerId}})];case 1:return n.sent(),Y(null),[2]}})})}):null}),u.map(function(e){return e.manifest.background?(0,p.Y)(ty,{environmentAPIs:f,extension:e},e.installationId):null})]})}var t_=t(35330),tk=t(28380),tD=t(85233),tE=t(76319);function tR(){var e=(0,et.t_)(),n=(0,tk.A)({moveOrDeleteFile:e}),t=n.isConverging,r=n.didContentsDiverge,i=n.showMoreDetail,o=n.failedFiles,a=n.failedFilesOptions,l=n.selectedFile,s=n.setSelectedFile,c=n.reviewingPrompt,u=n.onChoice,d=n.local,f=n.remote,h=[e_.wp.minHeight("7em"),e_.wp.maxHeight("50vh"),e_.wp.overflowY("auto"),{"> div":{display:"flex",alignItems:"stretch",width:"100%",height:"100%"},"> div > .cm-editor":{flex:"1 1 auto",width:"100%"}}];return(0,p.Y)(ek.a,{css:[{maxHeight:"90%"}],preventClose:!0,maxWidth:"90%",isOpen:r,onRequestClose:function(){},children:(0,p.FD)(eG.S,{gap:24,children:[(0,p.Y)(eW.Y9,{level:3,variant:"headerDefault",children:"Replit is out of sync!"}),(0,p.FD)(eW.EY,{children:["Sometimes Replit has trouble making sure everyone's code is the same. Let us know which version of"," ",o.length>1?"these files":"this file"," you'd like to keep."," ",o.length>1?(0,p.FD)("strong",{children:["There are ",o.length," files impacted by this."]}):""]}),t?(0,p.Y)(tE.A,{}):(0,p.FD)(p.FK,{children:[a.length?(0,p.Y)(tD.l,{initialSelectedItem:a[0],selectedItem:a.find(function(e){return e.path===l}),items:a,onChange:function(e){s(e.path)}}):null,i?(0,p.FD)(eG.S,{css:[e_.wp.backgroundColor.redDimmest,e_.wp.font.code],pt:16,p:8,row:!0,gap:16,justify:"start",align:"center",children:[(0,p.Y)(eW.EY,{variant:"subheadDefault",multiline:!1,children:"Debug View"}),(0,p.FD)(eW.EY,{multiline:!1,children:["Divergence type: ",null==c?void 0:c.case]})]}):null,(0,p.FD)(eG.S,{row:!0,gap:8,children:[(0,p.FD)(eG.S,{css:[e_.wp.flex.growAndShrink(1),{flexBasis:0}],children:[(0,p.Y)(eW.EY,{variant:"subheadDefault",multiline:!1,children:"My changes"}),(0,p.Y)(eD.ui,{elevated:!0,css:[e_.wp.flex.growAndShrink(1),e_.wp.py(8)],children:(0,p.Y)(eG.S,{css:h,children:(0,p.Y)(t_.N,{diffViewer:d})})}),(0,p.FD)(eG.S,{pt:16,children:[(0,p.Y)(eW.EY,{css:[e_.wp.textAlign.center],children:"This might disrupt other people's work or create unexpected bugs."}),(0,p.Y)(ez.$n,{onClick:function(){u("local")},text:"Reset to Mine"})]})]}),(0,p.FD)(eG.S,{css:[e_.wp.flex.growAndShrink(1),{flexBasis:0}],children:[(0,p.Y)(eW.EY,{variant:"subheadDefault",multiline:!1,children:"Shared changes"}),(0,p.Y)(eD.ui,{elevated:!0,css:[e_.wp.flex.growAndShrink(1),e_.wp.py(8)],children:(0,p.Y)(eG.S,{css:h,children:(0,p.Y)(t_.N,{diffViewer:f})})}),(0,p.FD)(eG.S,{pt:16,justify:"end",children:[(0,p.Y)(eW.EY,{css:[e_.wp.textAlign.center],children:"This is the safest option and won't disrupt other's work."}),(0,p.Y)(ez.$n,{onClick:function(){u("remote")},text:"Sync to Shared",colorway:"primary"})]})]})]})]})]})})}var tI=t(90671),tF=t(12507),tT=t(77958),tP=t(89318),tL=t(73984),tU=t(71452),tN=t(53463),tO=t(7581),tM=t(9105),tB=t(79209),tH=t(45263),tz=t(59172),tW=t(66525),tG=t(37703),tV=t(71117);function tj(e){return(0,p.Y)(tV.Ay,(0,e6._)((0,m._)({},e),{children:(0,p.Y)("path",{d:"M2.47 5.53a.75.75 0 0 1 1.06-1.06l16 16a.75.75 0 1 1-1.06 1.06l-16-16ZM1.291 11.215a7.593 7.593 0 0 1 1.42-3.675l1.077 1.077a6.024 6.024 0 0 0-.376 6.128 6.352 6.352 0 0 0 2.402 2.554 6.73 6.73 0 0 0 3.462.951h4.146l1.5 1.5H9.277a8.23 8.23 0 0 1-4.234-1.164 7.852 7.852 0 0 1-2.967-3.16 7.524 7.524 0 0 1-.785-4.211ZM5.828 5l1.15 1.15.02-.008a6.787 6.787 0 0 1 3.593-.263 6.62 6.62 0 0 1 3.185 1.603 6.2 6.2 0 0 1 1.81 2.962.75.75 0 0 0 .725.556h1.145c1.015 0 1.983.389 2.693 1.072a3.544 3.544 0 0 1 1.101 2.553c0 .952-.393 1.871-1.101 2.553a3.817 3.817 0 0 1-1.317.825l1.134 1.134a5.286 5.286 0 0 0 1.223-.878 5.044 5.044 0 0 0 1.561-3.634 5.044 5.044 0 0 0-1.56-3.634A5.385 5.385 0 0 0 17.455 9.5h-.593a7.725 7.725 0 0 0-2.074-3.124 8.118 8.118 0 0 0-3.907-1.968A8.287 8.287 0 0 0 5.828 5Z"})}))}var tZ=(0,tB.i7)("0%,100%{opacity:1;}50%{opacity:0.25;}"),tq=(0,eC.x)({root:[e_.wp.height(20),e_.wp.width(20),e_.wp.center]}),tK=(0,eC.x)({root:[tq.root],pulseRoot:[tq.root,{animation:"".concat(tZ," 2s infinite")}]});function t$(){var e=(0,tM.A)(),n=e.isSaving;return e.isOffline?(0,p.Y)(tz.m_,{tooltip:"Reconnecting, changes will be synced when youre online",placement:"right",children:(0,p.Y)(eG.S,{css:tK.root,children:(0,p.Y)(tj,{size:16,color:tH.LU.redDefault})})}):n?(0,p.Y)(tz.m_,{tooltip:"Saving",placement:"right",children:(0,p.Y)(eG.S,{css:tK.pulseRoot,children:(0,p.Y)(tW.A,{size:16,color:tH.LU.foregroundDimmest})})}):(0,p.Y)(tz.m_,{tooltip:"Saved",placement:"right",children:(0,p.Y)(eG.S,{css:tK.root,children:(0,p.Y)(tG.A,{size:16,color:tH.LU.foregroundDimmest})})})}var tJ=t(54620),tQ=t(45639),tX=t(5987),t0=t(15804),t1=t(5793),t2=t(36899),t4=t(52174),t5=t(51261),t3=t(88694),t6=t(69095),t8=t(41852),t7=t(38292),t9=t(52917),re=t(3694),rn=t(29425),rt=t(75576),rr=t(2753),ri=t(77247),ro=t(28051),ra=t(24961),rl=t(23499);function rs(e){var n=e.filetree,t=(0,eB.A)(),r=(0,t1.R)(t).orgId,i=(0,k.A)(r).banSourceCodeExport,o=(0,t8.xu)(),a=(0,t8.xi)(),l=(0,h.useRef)(null),s=(0,h.useRef)(null),c=(0,t0.k)(),u=(0,h.useCallback)(function(){var e=[{icon:(0,p.Y)(rr.A,{}),label:"New file",run:function(){n.create(tu.pt.File)}},{icon:(0,p.Y)(ro.A,{}),label:"New folder",run:function(){n.create(tu.pt.Directory)}},{icon:(0,p.Y)(ri.A,{}),label:t4.SS.UploadFile.text,run:function(){l.current&&(l.current.click(),(0,t6.A)({replId:t,action:"uploaded",fileType:tu.pt.File}))}}];return c&&e.push({icon:(0,p.Y)(ra.A,{}),label:t4.SS.UploadFolder.text,run:function(){s.current&&(s.current.click(),(0,t6.A)({replId:t,action:"uploaded",fileType:tu.pt.Directory}))}}),i||e.push({icon:(0,p.Y)(re.A,{}),label:t4.SS.DownloadZip.text,run:function(){return(0,t3._)(t)}},{icon:a?(0,p.Y)(rt.A,{}):(0,p.Y)(rn.A,{}),label:a?t4.SS.HideHiddenFiles.text:t4.SS.ShowHiddenFiles.text,run:function(){o(!a)}}),n.getExpandedDirs()&&e.push({icon:(0,p.Y)(t9.A,{}),label:"Collapse all",run:function(){var e=n.getExpandedDirs();e&&n.collapse((0,B._)(e))}}),{data:{type:"context",label:"Search actions",icon:(0,p.Y)(ee.A,{})},commands:function(){return e.map(function(e){return{match:K.G2,data:{type:"action",label:e.label,run:e.run,icon:e.icon}}})}}},[a,o,t,c,n,i]),d=(0,t2.EF)().openContextMenu,f=(0,h.useRef)(null);return(0,p.FD)(p.FK,{children:[(0,p.Y)(t7.K0,{alt:"menu",tooltipBehavior:"hidden",ref:f,onClick:function(){return f.current&&d({target:f.current,command:u()})},children:(0,p.Y)(rl.A,{color:tH.LU.foregroundDimmest})}),(0,p.Y)(t5.v,{fileUploadInputRef:l,dirUploadInputRef:s,uploadFiles:n.upload})]})}var rc={type:"context",icon:(0,p.Y)(ee.A,{}),label:"",description:"Search"},ru=(0,eC.x)({root:[e_.wp.height(32),e_.wp.px(4),{"& > div > div label + div":[{zIndex:4}],'& [role="listbox"]':[e_.wp.position.absolute,e_.wp.top(56),e_.wp.height("calc(100% - ".concat(32,"px)")),e_.wp.left(0),e_.wp.width("100%"),e_.wp.zIndex(3),e_.wp.pt(4),{backgroundColor:tQ.s}],'& [role="option"] > div':{backgroundColor:"transparent"},'& [aria-selected="true"] > div':[e_.wp.backgroundColor.backgroundHigher]}]});function rd(){var e=(0,er.A)().fs,n=(0,ed.Sx)(),t=(0,et.q5)(),r=(0,ec.J)(),i=(0,h.useMemo)(function(){var i=(0,ei.g)({openFile:t,fs:e,shouldHideFile:r,getRecentFiles:n});return i.data=rc,delete i.match,i},[t,e,r,n]);return(0,p.Y)(eG.S,{css:ru.root,children:(0,p.Y)(eE.r,{fullWidth:!0,command:i,openOnInput:!0,compact:!0})})}var rp=t(83735),rf=t(56902),rh=t(37663),rm=t(13064),rg=t(52340),rv=t(31569),rw=t(60652),ry=t(38633),rb=t(1342),rS=t(1998),rY=t(75308),rA=t(55545),rx=t(56002),rC=t(22318),r_=t(90777),rk=t(34640),rD=t(46422),rE=t(29064);function rR(e){return{match:K.G2,data:{type:"action",label:"Rename",icon:(0,p.Y)(rx.A,{}),run:e}}}function rI(e){return[{label:"Copy file path",icon:(0,p.Y)(rY.A,{}),run:function(){return(0,rv.default)(e)}},{label:"Copy link",icon:(0,p.Y)(rC.A,{}),run:function(){return(0,rv.default)((0,rb.Ax)({path:e}))}}].map(function(e){var n=e.label,t=e.icon,r=e.run;return{match:K.G2,data:{type:"action",label:n,icon:t,run:r}}})}function rF(e){return{match:K.G2,data:{type:"action",icon:(0,p.Y)(rE.A,{color:tH.LU.redDefault}),label:"Delete",run:e}}}function rT(e){var n=e.size,t=e.iconUrl,r=e.name;return(0,p.Y)(rS.A,{src:t,width:n,height:n,alt:"Icon for file opener: ".concat(r)})}var rP=/[*]{2}\/[*]\.([a-z0-9.]+)/,rL=t(26184),rU=t(52597),rN=t(29440),rO=t(49045),rM=t(87885),rB={id:"sidebar.toggle",name:"Toggle sidebar",description:"Opens or closes the sidebar",default:(0,ex.FM)({cmdOrCtrl:!0,shift:!0,key:"b"})},rH=(0,rO.v)(["width","height","transform","borderColor","backgroundColor","display","resizeHandleWidth","resizeHandleTransform","resizeGripOpacity","resizeGripColor"]),rz=rH.cssVars,rW=rH.styleTokens,rG=(0,eC.x)({root:[e_.wp.borderRadius(),{position:"absolute",top:0,left:0,bottom:0,width:rW.width,height:rW.height,transform:rW.transform,display:"var(".concat(rz.display,", none)"),border:"1px solid",borderColor:rW.borderColor,zIndex:et.WO.filetreeDragLayer,backgroundColor:rW.backgroundColor}],header:[e_.wp.height(32),e_.wp.align.center,e_.wp.pl(6),e_.wp.pr(4)],headerLeft:[e_.wp.flex.growAndShrink(1)],title:{fontSize:13},content:[e_.wp.flex.growAndShrink(1),{background:"transparent"}],files:[e_.wp.flex.growAndShrink(1)],footerButtons:[{"& button":[{width:"calc(50% - 2px)"}]}]});function rV(e){var n,t=(e.isOpen,tQ.s),r=e.isOpen?t:"transparent";return n={},(0,nt._)(n,rz.width,e.width+"px"),(0,nt._)(n,rz.height,e.height+"px"),(0,nt._)(n,rz.transform,"translate(".concat(e.x,"px, ").concat(e.y,"px)")),(0,nt._)(n,rz.display,e.isOpen?"flex":"none"),(0,nt._)(n,rz.borderColor,r),(0,nt._)(n,rz.backgroundColor,t),n}var rj=(0,h.memo)(function(){var e,n,t,r,i,o,a,l,s,c,u,f,g,v,w,y,b,S,Y,A,x,C,k,D,E,R,I,F,T,L,U,N,O,M,W,G,V,j,Z=(0,h.useRef)(null),q=(0,et.zL)().view;(0,tU.d)(Z,q,rV);var $=(e=(0,eB.A)(),t=(n=(0,d._)((0,h.useState)(null),2))[0],r=n[1],i=(0,et.q5)(),o=(0,rU.v)(),a=(0,ec.J)(!0),l=(0,h.useCallback)(function(e){return!a(e.filename)},[a]),s=(0,er.A)().fs,c=(0,P.g)("multiselectModifierKey").preferences,u=(0,et.HN)(),f="cmdOrCtrlKey"===c.multiselectModifierKey?"cmdOrCtrlKey":"altKey",g=(0,ed.Sx)(),v=(0,h.useCallback)(function(e){return(0,rN.J9)(e,g)},[g]),w=(0,_._P)({controlName:"flag-filetree-local-cache",logFlagToAnalytics:!1}),y=(0,t2.EF)().onContextMenu,b=(0,eB.A)(),S=(0,er.A)().fs,Y=(0,et.q5)(),A=(0,et.$6)(),x=(0,et.Wx)(),C=(0,nS.Zp)(nY.P.FiletreeContextMenu),k=(0,et.C3)(),D=(0,et.OC)(),E=(0,et.up)(),R=(0,h.useCallback)(function(e){var n=e.extensionId,t=e.fileExtension,r=e.fileHandlerId,i=k[t];i&&i.extensionId===n&&i.fileHandlerId===r||E(e)},[E,k]),I=(0,h.useCallback)(function(e,n){var t,r=e.path,i=[{data:{type:"group",key:"rename"},commands:function(){return[rR(function(){return n.rename(r)})]}}];(0,ts.m6)(r)&&i.push({data:{type:"group",key:"saveFile"},commands:function(){var e;return[(e=(0,H._)(function(){return(0,z.YH)(this,function(e){switch(e.label){case 0:return[4,S.flush(new Set([r]),tu.sT.MANUAL_SAVE)];case 1:return e.sent(),[2]}})}),{match:K.G2,data:{type:"action",label:"Save file",icon:(0,p.Y)(r_.A,{}),run:e}})]}}),i.push({data:{type:"group",key:"open"},commands:function(){return function(e){var n=e.path,t=e.getSelectedNodes,r=e.openFile,i=[{type:tu.pt.File,path:n}],o=!0,a=!1,l=void 0;try{for(var s,c=t()[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var u=(0,d._)(s.value,2),f=u[0],h=u[1];h!==tu.pt.Directory&&f!==n&&i.push({path:f,type:h})}}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}var m=i.length,g=1===m?"Open":"Open ".concat(m," files");return[{label:g,icon:(0,p.Y)(rn.A,{}),run:function(){var e=!0,n=!1,t=void 0;try{for(var o,a=i[Symbol.iterator]();!(e=(o=a.next()).done);e=!0){var l=o.value;r({path:l.path,newTab:!0})}}catch(e){n=!0,t=e}finally{try{e||null==a.return||a.return()}finally{if(n)throw t}}}},{label:g+" in split",icon:(0,p.Y)(rD.A,{}),run:function(){var e=(0,rf._)(i),n=e[0],t=e.slice(1);r({path:n.path,newPane:!0});var o=!0,a=!1,l=void 0;try{for(var s,c=t[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var u=s.value;r({path:u.path,newTab:!0})}}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}}}].map(function(e){var n=e.label,t=e.icon,r=e.run;return{match:K.G2,data:{type:"action",label:n,icon:t,run:r}}})}({path:r,getSelectedNodes:n.getSelectedNodes,openFile:Y})}});var o=function(e){var n=function(e){var n=r[e],i=(0,rh.tL)(n.glob);if(!i||!i.exec(t))return"continue";var l=rP.exec(n.glob),s=n.icon?n.icon:n.extension.manifest.icon,c=n.name?n.name:n.extension.manifest.name,d=s?(0,e3.sU)(n.extension.baseUrl,s):null;u.push({match:K.G2,data:{type:"action",icon:d?(0,p.Y)(rT,{size:16,name:c,iconUrl:d}):(0,p.Y)(rn.A,{}),label:"Open with "+c,run:function(){l&&a({extensionId:n.extension.extensionId,fileHandlerId:e,fileExtension:l[1]}),o({path:t,opener:{paneType:"extension",supports:function(){return!0},extensionFileHandler:n}})}}})},t=e.path,r=e.handlers,i=e.filetypeAssociations,o=e.openFile,a=e.requestAssociateFiletype,l=e.associateFiletype,s=(0,rm.QC)(t),c=s?i[s]:null,u=[];for(var d in r)n(d);return c&&s&&u.length&&u.push({match:K.G2,data:{icon:(0,p.Y)(rE.A,{}),type:"action",label:"Use default opener",run:function(){l({fileExtension:s,newAssociation:null})}}}),u}({path:r,handlers:x,filetypeAssociations:k,requestAssociateFiletype:R,associateFiletype:D,openFile:Y});return o.length&&i.push({data:{type:"group",key:"extensions"},commands:function(){return o}}),i.push({data:{type:"group",key:"copy"},commands:function(){return rI(r)}}),i.push((t=(0,H._)(function(){var e;return(0,z.YH)(this,function(t){switch(t.label){case 0:e=null,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,(0,rw.A)(r,S)];case 2:return e=t.sent(),[3,4];case 3:return t.sent(),[2,{type:"error",message:"Error duplicating file"}];case 4:return(0,t6.A)({replId:b,action:"duplicated",fileType:tu.pt.File}),n.rename(e),[2]}})}),{match:K.G2,data:{type:"action",label:"Duplicate file",icon:(0,p.Y)(rA.A,{}),run:t}})),i.push((0,ry.Gp)(r,S)),i.push({data:{type:"group",key:"deleteFile"},commands:function(){return[rF(function(){return n.deleteNodes(e)})]}}),i.push({data:{type:"group",key:"extensions"},commands:(0,H._)(function(){var e;return(0,z.YH)(this,function(n){switch(n.label){case 0:var t;return e=[{data:{filePath:r,fileType:tu.pt.File}}],[4,Promise.all(C.map((t=(0,H._)(function(n){var t;return(0,z.YH)(this,function(r){switch(r.label){case 0:return[4,n.create({path:e})];case 1:if(!(t=r.sent()))return[2,null];return[2,(0,e5.l)(t,{path:e})]}})}),function(e){return t.apply(this,arguments)})))];case 1:return[2,n.sent().filter(Boolean)]}})})}),i},[Y,R,D,b,C,x,k,S]),F=(0,t8.xu)(),T=(0,t8.xi)(),L=(0,h.useCallback)(function(e,n){var t,r=e.path,i=r===rg.Dl,o=i?[]:[{data:{type:"group",key:"rename"},commands:function(){return[rR(function(){return n.rename(e.path)})]}}];return o.push({data:{type:"group",key:"search"},commands:function(){var n;return[(n=e.path,{match:K.G2,data:{type:"action",icon:(0,p.Y)(ee.A,{}),label:"Search this directory",run:function(){A({pane:{type:"searchReplace",data:{initialIncludeGlob:"".concat(n,"/**")}},edge:"right"})}}})]}}),o.push.apply(o,(0,B._)((t=function(t){return n.create(t,e.path)},[{label:"Add file",icon:(0,p.Y)(rr.A,{}),run:function(){return t(tu.pt.File)}},{label:"Add folder",icon:(0,p.Y)(ro.A,{}),run:function(){return t(tu.pt.Directory)}}].map(function(e){var n=e.label,t=e.icon,r=e.run;return{match:K.G2,data:{type:"action",label:n,icon:t,run:r}}})))),o.push({data:{type:"group",key:"openShell"},commands:function(){return[{match:K.G2,data:{type:"action",label:"Open shell here",icon:(0,p.Y)(rk.A,{}),run:function(){A({pane:{type:"shell",data:{initialPwd:r}},edge:"left"})}}}]}}),i||o.push({data:{type:"group",key:"copy"},commands:function(){return rI(r)}}),n.getExpandedDirs()&&o.push({match:K.G2,data:{icon:(0,p.Y)(t9.A,{}),type:"action",label:"Collapse "+(i?"all":"child folders"),run:function(){var e=n.getExpandedDirs(r);e&&n.collapse((0,B._)(e))}}}),i||o.push({data:{type:"group",key:"deleteFile"},commands:function(){return[rF(function(){return n.deleteNodes(e)})]}}),i&&o.push({data:{type:"group",key:"hiddenFiles"},commands:function(){return[{match:K.G2,data:{type:"action",label:(T?"Hide":"Show")+" hidden files",icon:T?(0,p.Y)(rt.A,{}):(0,p.Y)(rn.A,{}),run:function(){F(!T)}}}]}}),o.push({data:{type:"group",key:"extensions"},commands:(0,H._)(function(){var e;return(0,z.YH)(this,function(n){switch(n.label){case 0:var t;return e=[{data:{dirPath:r,fileType:tu.pt.Directory}}],[4,Promise.all(C.map((t=(0,H._)(function(n){var t;return(0,z.YH)(this,function(r){switch(r.label){case 0:return[4,n.create({path:e})];case 1:if(!(t=r.sent()))return[2,null];return[2,(0,e5.l)(t,{path:e})]}})}),function(e){return t.apply(this,arguments)})))];case 1:return[2,n.sent().filter(Boolean)]}})})}),o},[T,F,C,A]),U=(0,h.useCallback)(function(e,n){return{data:{type:"context",label:"Search actions",icon:(0,p.Y)(ee.A,{})},commands:function(){return e.type===tu.pt.Directory?L(e,n):I(e,n)}}},[I,L]),N=(0,t8.Qd)(),O=(0,tN.u)({fs:s,filter:l,fontSize:13,onFileDoubleClick:function(e,n){u(n)},onFileSelect:function(e){var n=e.path,t=e.type,r=e.event,a="click"===t&&"altKey"===f?(0,rp.T$)(r):r.altKey;i({path:n,newTab:a}),o(n,{newTab:a})},onCreate:function(e){e.type===tu.pt.File&&i({opener:{paneType:(0,X.QY)({path:e.path})},path:e.path})},multiselectModifierKey:f,onConflicts:function(e){return r({type:"conflicts",data:e})},onDeleteNodes:function(e){return r({type:"deleteNode",data:e})},onContextMenu:function(e,n){return y(e,{command:U(n,O)})},autocomplete:v,localCacheKey:w?e+":sidebar":void 0,onFileRenameStart:N,onFileRenameEnd:function(){return N(null)}}),M=(0,rL._)(),(0,h.useEffect)(function(){return O.setFileStatus(M)},[O,M]),W=(0,ed.dm)(),(0,h.useEffect)(function(){var e=function(e){return n.apply(this,arguments)};function n(){return(n=(0,H._)(function(e){return(0,z.YH)(this,function(n){switch(n.label){case 0:if(null===e)return O.select(null),[2];return[4,O.select({path:e,type:tu.pt.File})];case 1:if(n.sent(),W.current!==e)return[2];return O.scrollToPath(e),[2]}})})).apply(this,arguments)}return e(W.current),W.subscribe(e)},[W,O]),G=(0,et.zL)(),V=(0,ed.Mg)(),j=(0,ed.JZ)(),(0,h.useEffect)(function(){var e=function(e){return n.apply(this,arguments)};function n(){return(n=(0,H._)(function(e){return(0,z.YH)(this,function(n){switch(n.label){case 0:if(null===e)return[2];return G.isOpen.current||G.toggle(),[4,O.select({path:e,type:tu.pt.File})];case 1:return n.sent(),O.scrollToPath(e),j(null),[2]}})})).apply(this,arguments)}return e(V.current),V.subscribe(e)},[V,j,O,G]),{filetree:O,activeModal:t,closeModal:function(){return r(null)}}),J=$.filetree,Q=$.activeModal,en=$.closeModal;return(0,p.FD)(p.FK,{children:[(0,p.FD)(eD.ui,{css:rG.root,innerRef:Z,children:[(0,p.Y)(rZ,{filetree:J}),(0,p.FD)(eG.S,{css:rG.content,children:[(0,p.Y)(rd,{}),(0,p.Y)(eG.S,{css:rG.files,dataCy:"sidebar-filetree-section",children:(0,p.Y)(tN.J,{store:J.store})}),(0,p.FD)(eG.S,{css:rG.footerButtons,p:4,row:!0,gap:4,justify:"end",align:"center",children:[(0,p.Y)(ez.$n,{dataCy:"filetree-add-file",size:"small",variant:"outlined",iconLeft:(0,p.Y)(rr.A,{}),text:"File",onClick:function(){J.create(tu.pt.File)}}),(0,p.Y)(ez.$n,{size:"small",variant:"outlined",iconLeft:(0,p.Y)(ro.A,{}),text:"Folder",onClick:function(){J.create(tu.pt.Directory)}})]})]}),(0,p.Y)(rK,{})]}),(0,p.FD)(ek.a,{isOpen:!!Q,onRequestClose:en,children:[(null==Q?void 0:Q.type)==="conflicts"?(0,p.Y)(tO.A,{paths:Q.data.conflicts.map(function(e){return e.path}),onCancel:en,onConfirm:function(){var e=Q.data;"move"===e.type?J.move({nodes:e.nodes,to:e.to,overwrite:!0}):J.upload({files:e.files,parentPath:e.to,overwrite:!0}),en()}}):null,(null==Q?void 0:Q.type)==="deleteNode"?(0,p.Y)(rM.A,(0,e6._)((0,m._)({},(0,tJ.D)(Q.data.nodes)),{delete:function(){return Q.data.confirm()},hideModal:en})):null]})]})});function rZ(e){var n=e.filetree;return(0,p.FD)(eG.S,{css:rG.header,row:!0,gap:4,children:[(0,p.FD)(eG.S,{css:rG.headerLeft,row:!0,gap:4,align:"center",children:[(0,p.Y)(eW.EY,{css:rG.title,children:"Files"}),(0,p.Y)(t$,{})]}),(0,p.Y)(eG.S,{row:!0,gap:0,align:"center",children:(0,p.Y)(rs,{filetree:n})})]})}var rq=(0,eC.x)({root:[e_.wp.position.absolute,e_.wp.top(0),e_.wp.right(0),e_.wp.height("100%"),e_.wp.center,{cursor:"ew-resize",transform:rW.resizeHandleTransform,width:rW.resizeHandleWidth}],grip:[e_.wp.center,e_.wp.height(tX.r5),e_.wp.width(2),e_.wp.borderRadius(4),{opacity:rW.resizeGripOpacity,backgroundColor:rW.resizeGripColor}]});function rK(){var e=(0,et.zL)(),n=(0,h.useRef)(null);(0,tU.d)(n,e.resizeHandleView,function(n){var t,r=e.isOpen?"translateX(calc(100% + 1px))":"translateX(100%)";return t={},(0,nt._)(t,rz.resizeGripOpacity,n.isOpen?"1":"0"),(0,nt._)(t,rz.resizeHandleTransform,r),(0,nt._)(t,rz.resizeGripColor,tH.LU.outlineDimmest),(0,nt._)(t,rz.resizeHandleWidth,n.width+"px"),t});var t=(0,h.useRef)(null);return(0,p.Y)(eG.S,{css:rq.root,innerRef:n,onPointerDown:function(n){(0,tL.j)(n,{start:function(){document.activeElement instanceof HTMLElement&&(t.current=document.activeElement),e.resize.start()},move:function(n){var t=n.delta;e.resize.update(t.x)},end:function(){var n,r;e.resize.end(),null==(r=t.current)||null==(n=r.focus)||n.call(r),t.current=null}})},children:(0,p.Y)(eG.S,{css:rq.grip})})}var r$=t(69945),rJ=t.n(r$),rQ=t(35084),rX=t(18402),r0=t(36018),r1=t(29542),r2=t.n(r1);function r4(){var e=(0,g._)(["\n  fragment ReplEnvironmentDesktopMyReplsSearchRepl on Repl {\n    id\n    title\n    timeUpdated\n    url\n    iconUrl\n    owner {\n      ... on User {\n        id\n        username\n        image\n      }\n      ... on Team {\n        id\n        username\n        image\n      }\n    }\n  }\n"]);return r4=function(){return e},e}function r5(){var e=(0,g._)(["\n  query ReplEnvironmentDesktopMyReplsSearch($query: String, $count: Int) {\n    currentUser {\n      id\n      search {\n        repls(query: $query, count: $count) {\n          id\n          ...ReplEnvironmentDesktopMyReplsSearchRepl\n        }\n      }\n    }\n  }\n  ","\n"]);return r5=function(){return e},e}var r3=(0,v.J1)(r4()),r6=(0,v.J1)(r5(),r3),r8=t(9340),r7=t(64732),r9=t(45015),ie=t(28216),it=t(74338),ir=(0,eC.x)({root:[e_.wp.rowWithGap(8),e_.wp.align.center,e_.wp.px(8),{textDecoration:"none"}],info:[e_.wp.flex.growAndShrink(1)],meta:{fontSize:10}});function ii(e){var n=e.repl,t=e.height,r=e.isActive,i=e.searchQuery,o=n.title,a=(0,h.useMemo)(function(){return i?r8.A.match(i,o):null},[i,o]);return(0,p.Y)(r2(),{legacyBehavior:!0,href:n.url,passHref:!0,children:(0,p.FD)(eG.D.a,{style:{height:t},css:ir.root,children:[(0,p.Y)(r9.Ay,{alt:n.title,size:32,iconUrl:n.iconUrl}),(0,p.FD)(eG.S,{css:ir.info,gap:2,children:[(0,p.Y)(ie.e,{text:n.title,highlight:null==a?void 0:a.ranges,dimmed:!r}),(0,p.FD)(eW.EY,{css:ir.meta,color:"dimmest",multiline:!1,children:[n.owner.username,"  edited ",(0,r7.K)(n.timeUpdated)]})]})]})})}function io(){return(io=(0,H._)(function(e){var n;return(0,z.YH)(this,function(t){switch(t.label){case 0:if(!eH.V)throw Error("Expected apolloClient");return[4,eH.V.query({query:r6,variables:e})];case 1:return[2,(null==(n=t.sent().data.currentUser)?void 0:n.search.repls.filter(function(e){return!!e.owner}))||[]]}})})).apply(this,arguments)}var ia=t(48875),il=t(34467),is=t(37037),ic=t(90899),iu=t(19465),id=["isLayoutStacked","fontSize","wrapping","minimapDisplay","indentDetection","indentFormatPastes","indentIsSpaces","keyboardHandler","showFileTreeGitStatus","codeIntelligence","shellBellAudio","accessibleTerminal","webviewAutoOpenOnPortOpened","forwardPortsAutomatically","chatAudioNotification","multiselectModifierKey","codeSuggestion","chatEngine","ghostwriterModelSelection"],ip=t(37427),ih=t(69507),im=t(74601),ig=t(76686),iv=t(14893),iw=t(26706),iy=t(83023),ib=t(46404),iS=t(21242),iY=t(75040),iA=t(1369),ix=t(26226),iC=t(95072),i_=t(24726);function ik(e){return(0,p.FD)(tV.Ay,(0,e6._)((0,m._)({},e),{children:[(0,p.Y)("path",{d:"M15.721.681A2.137 2.137 0 0 1 18.146.28l4.638 2.233a2.142 2.142 0 0 1 1.213 1.93v.299h-.735v-.303c0-.54-.31-1.033-.797-1.267L17.828.942a1.403 1.403 0 0 0-1.6.272c.485-.486 1.294-.195 1.396.445l-.115-.055a.667.667 0 0 0-.762.13l-.016.015-8.786 8.01-1.19-.902L15.72.68Z"}),(0,p.Y)("path",{d:"m17.634 5.968-7.343 5.571 1.215.922 6.128-4.649V5.968ZM6.798 14.189l1.104 1.006-3.975 3.016a1.673 1.673 0 0 1-2.136-.095l-1.24-1.128a1.673 1.673 0 0 1-.002-2.473l3.303-3.012 1.09.994-3.403 3.104a.203.203 0 0 0 0 .3l1.24 1.128c.073.066.182.07.26.011l3.759-2.851Z"}),(0,p.Y)("path",{d:"M16.228 22.786c.42.421 1.063.53 1.6.272l4.637-2.23c.487-.234.797-.727.797-1.267v-.302H24v.298c0 .824-.472 1.575-1.214 1.933l-4.639 2.233a2.14 2.14 0 0 1-2.428-.402L.547 9.488a1.676 1.676 0 0 1 .002-2.479l1.24-1.127a1.676 1.676 0 0 1 2.14-.095l13.705 10.397v1.852L3.037 6.964a.2.2 0 0 0-.255.01l-1.24 1.128a.2.2 0 0 0 0 .296l15.2 13.86.007.007c.2.2.504.252.758.13l.117-.057c-.1.643-.91.936-1.396.45Z"}),(0,p.Y)("path",{fillRule:"evenodd",d:"M16.576 1.562 15.88.865A1.896 1.896 0 0 1 18.04.497l4.637 2.23a1.9 1.9 0 0 1 1.077 1.712v15.122a1.9 1.9 0 0 1-1.076 1.712l-4.638 2.23a1.896 1.896 0 0 1-2.162-.368l.697-.698c.209.209.565.061.565-.234V1.797a.331.331 0 0 0-.565-.235Zm1.541 20.81 4.134-1.988a.914.914 0 0 0 .518-.823V4.439a.914.914 0 0 0-.518-.823l-4.134-1.988c.007.055.01.111.01.169v20.406c0 .058-.003.114-.01.169Z",clipRule:"evenodd"}),(0,p.Y)("path",{fillRule:"evenodd",d:"M15.706.692a2.141 2.141 0 0 1 2.441-.416l4.638 2.23A2.145 2.145 0 0 1 24 4.44v15.122c0 .824-.473 1.575-1.215 1.933l-4.637 2.229a2.14 2.14 0 0 1-2.442-.415l-.173-.173 1.043-1.044.173.173a.086.086 0 0 0 .147-.06V1.796a.086.086 0 0 0-.147-.061l-.173-.174-.173.174-.87-.87.173-.174Zm.908.562a.577.577 0 0 1 .772.543v20.406a.577.577 0 0 1-.773.544l-.375.375a1.65 1.65 0 0 0 1.697.16l4.637-2.23c.574-.276.938-.855.938-1.491V4.439c0-.636-.364-1.215-.938-1.491L17.935.718a1.651 1.651 0 0 0-1.697.16l.376.376Zm1.207-.04 4.316 2.075.107-.224.442.213-.12.247c.28.217.448.553.448.914v15.122c0 .445-.255.85-.657 1.044l-4.536 2.181.053-.444c.006-.044.009-.09.009-.139V1.797c0-.048-.003-.095-.009-.14l-.053-.443Zm.551.808v19.956l3.773-1.815a.669.669 0 0 0 .379-.602V4.439a.669.669 0 0 0-.379-.602l-3.773-1.815Z",clipRule:"evenodd"})]}))}var iD={nextTab:{id:"tabs.next",name:"Switch to next tab",default:(0,nt._)({},rQ._9.DesktopApp,(0,ex.FM)({cmdOrCtrl:!0,shift:!0,key:"]"}))},previousTab:{id:"tabs.previous",name:"Switch to previous tab",default:(0,nt._)({},rQ._9.DesktopApp,(0,ex.FM)({cmdOrCtrl:!0,shift:!0,key:"["}))},newTab:{id:"tabs.new",name:"New tab",description:"Opens a tab in the current active group",default:(0,nt._)({},rQ._9.DesktopApp,(0,ex.FM)({cmdOrCtrl:!0,key:"t"}))},closeTab:{id:"tabs.close",name:"Close tab",description:"Close the current active tab",default:(0,nt._)({},rQ._9.DesktopApp,(0,ex.FM)({cmdOrCtrl:!0,key:"w"}))},reopenClosedTab:{id:"tabs.reopenClosed",name:"Reopen closed tab",default:(0,nt._)({},rQ._9.DesktopApp,(0,ex.FM)({cmdOrCtrl:!0,shift:!0,key:"t"}))},findFile:{id:"files.find",name:"Find file",default:(0,ex.FM)({cmdOrCtrl:!0,key:"p"})},searchFileContents:{id:"files.searchContents",name:"Search file contents",default:eo.G},run:{id:"repl.run",name:"Run Repl",default:(0,ex.FM)({cmdOrCtrl:!0,key:"Enter"})},toggleInviteDialog:{id:"repl.multiplayers",name:"See multiplayers",default:(0,ex.FM)({cmdOrCtrl:!0,key:"m"})},showShell:{id:"repl.showShell",name:"Show shell",default:(0,ex.FM)({ctrl:!0,key:"`"}),description:"Opens or reveals a Shell in a tab"},showConsole:{id:"repl.showConsole",name:"Show console",description:"Opens or reveals the Console in a tab",default:void 0},showDocs:{id:"repl.showDocs",name:"Show docs",description:"Opens or reveals the Replit Docs in a tab",default:void 0},showReplitAi:{id:"repl.showGhostwriter",name:"Show Replit AI",description:"Opens or reveals Replit AI in a tab",default:void 0},showSettings:{id:"repl.showSettings",name:"Show settings",description:"Opens or reveals the Settings tab",default:(0,nt._)({},rQ._9.DesktopApp,(0,ex.FM)({cmdOrCtrl:!0,key:","}))},saveAllFiles:{id:"repl.saveAllFiles",name:"Save all files",description:"Forces all changes to be flushed to disk",default:void 0},showGit:{id:"repl.showGit",name:"Show git",description:"Opens or reveals the Git tool in a tab",default:void 0},toggleFloatPaneGroup:{id:"paneGroup.toggleFloat",name:"Toggle float group",description:"Floats or un-floats the current active group",default:void 0},toggleMaximizePaneGroup:{id:"paneGroup.toggleMaximize",name:"Toggle maximize group",description:"Maximizes or restores the current active group",default:void 0},removePaneGroup:{id:"paneGroup.close",name:"Close group",description:"Closes all tabs in the current active group",default:void 0},removeOthersInPaneGroup:{id:"paneGroup.closeOthers",name:"Close other tabs in group",description:"Closes all tabs except the visible one in the current active group",default:void 0},insertPaneGroupUp:{id:"paneGroup.insertUp",name:"Insert group above",description:"Adds a new group above the current active group",default:void 0},insertPaneGroupRight:{id:"paneGroup.insertRight",name:"Insert group right",description:"Adds a new group to the right of the current active group",default:void 0},insertPaneGroupLeft:{id:"paneGroup.insertLeft",name:"Insert group left",description:"Adds a new group to the left of the current active group",default:void 0},insertPaneGroupDown:{id:"paneGroup.insertDown",name:"Insert group below",description:"Adds a new group below the current active group",default:void 0},moveTabUpGroup:{id:"tabs.move.groupUp",name:"Move tab into group above",description:"Moves the current active tab into the group above",default:void 0},moveTabRightGroup:{id:"tabs.move.groupRight",name:"Move tab into group right",description:"Moves the current active tab into the group to the right",default:void 0},moveTabLeftGroup:{id:"tabs.move.groupLeft",name:"Move tab into group left",description:"Moves the current active tab into the group to the left",default:void 0},moveTabDownGroup:{id:"tabs.move.groupDown",name:"Move tab into group below",description:"Moves the current active tab into the group below",default:void 0},moveFocusUp:{id:"paneGroup.focusUp",name:"Move focus to group above",description:"Move focus to the group above the current active group",default:void 0},moveFocusRight:{id:"paneGroup.focusRight",name:"Move focus to group right",description:"Move focus to the group to the right of the current active group",default:void 0},moveFocusLeft:{id:"paneGroup.focusLeft",name:"Move focus to group left",description:"Move focus to the group to the left of the current active group",default:void 0},moveFocusDown:{id:"paneGroup.focusDown",name:"Move focus to group below",description:"Move focus to the group below the current active group",default:void 0},webviewRefresh:{id:"webviewpane.reload",name:"Refresh the webview",default:(0,ex.FM)({alt:!0,key:"r"})},keepTab:{id:"tab.keep",name:"Keep tab",description:"Converts a preview tab to a persisted tab",default:void 0}},iE=Object.values(iD);let iR=(0,h.memo)(function(e){var n,t,r,i,o,a,l,s,c,u,d,f=e.isAdmin,h=e.isSubscribed,m=eA(),g=(0,ed.Sx)(),v=(0,er.A)(),w=v.fs,y=v.container,b=(0,iw.Z)(),S=b.fork,Y=b.isForking,A=(0,iv.lO)(),x=A.isOffline,C=A.isRunning,_=(0,iv.qP)(),k=(0,ec.J)(),D=(0,et.q5)(),E=(0,et.x6)(),R=(0,et.LG)(),F=(0,et.wR)(),T=(0,et.Ou)(),U=(0,et.l7)(),O=(0,et.Ot)(),M=(0,et.Fr)(),W=(0,et.zn)(),G=(0,et.ah)(),j=(0,et.wI)(),Z=(0,et.IT)().toggleMaximizePane,q=(0,et.RI)(),J=(0,et.Rk)(),X=(0,et.V2)(),ee=(0,et.yT)(),ea=(0,eu.eq)(W),el=(0,N.pE)("replUrl","string"),es=(0,eB.A)(),ep=(0,r0.A)(),ef=(0,et.ir)(),eh=(0,et.Us)(),em=(0,eX.A)(),eg=(0,im.A)(),ew=(0,e2.A)(y).url,ey=(0,eq.A)().showNotice,eS=(0,ig.A)("vscode"),eY=eS.openEditor,ex=eS.onConfirmConfig,eC=eS.isConfigModalOpen,e_=eS.closeConfigModal,eD=(0,I.jt)(),eE=rJ()(function(e){return(0,V.u4)(V.AZ.PROJECT_RAN,{replId:es,placement:e})},500);(0,eb.SJ)(function(){return[iD.saveAllFiles.id,function(){w.flush(void 0,tu.sT.MANUAL_SAVE)}]},[w]),(0,eb.SJ)(function(){return[iD.newTab.id,function(){return E()}]},[E]),(0,eb.SJ)(function(){return[iD.nextTab.id,function(){return O("next")}]},[O]),(0,eb.SJ)(function(){return[iD.previousTab.id,function(){return O("previous")}]},[O]),(0,eb.SJ)(function(){return[iD.closeTab.id,function(){var e=R();return e||ef()>0}]},[R,ef]),(0,eb.SJ)(function(){return[iD.reopenClosedTab.id,function(){return T()}]},[T]),(0,eb.SJ)(function(){return[iD.moveTabUpGroup.id,function(){return F("above")}]},[F]),(0,eb.SJ)(function(){return[iD.moveTabRightGroup.id,function(){return F("rightOf")}]},[F]),(0,eb.SJ)(function(){return[iD.moveTabLeftGroup.id,function(){return F("leftOf")}]},[F]),(0,eb.SJ)(function(){return[iD.moveTabDownGroup.id,function(){return F("below")}]},[F]),(0,eb.SJ)(function(){return W?[iD.keepTab.id,function(){return M(W)}]:void 0},[W,M]),(0,eb.SJ)(function(){return W?[iD.insertPaneGroupUp.id,function(){return ee({paneId:W,placement:"above",autoFocus:!0})}]:void 0},[W]),(0,eb.SJ)(function(){return W?[iD.insertPaneGroupRight.id,function(){return ee({paneId:W,placement:"rightOf",autoFocus:!0})}]:void 0},[W]),(0,eb.SJ)(function(){return W?[iD.insertPaneGroupLeft.id,function(){return ee({paneId:W,placement:"leftOf",autoFocus:!0})}]:void 0},[W]),(0,eb.SJ)(function(){return W?[iD.insertPaneGroupDown.id,function(){return ee({paneId:W,placement:"below",autoFocus:!0})}]:void 0},[W]),(0,eb.SJ)(function(){return[eR.id,function(){return m()}]},[m]);var eF=(0,eb.Jn)(iD.findFile.id);(0,eb.SJ)(function(){return[iD.findFile.id,function(){return m(ei.g({openFile:D,fs:w,shouldHideFile:k,getRecentFiles:g,keyboardShortcut:eF}))}]},[m]);var eT=ev({type:"files"});eI(ei.g({openFile:D,fs:w,shouldHideFile:k,getRecentFiles:g,getCurrentlyOpenFilePanesCommands:eT,keyboardShortcut:eF}));var eP=(0,eb.Jn)(iD.searchFileContents.id),eL=(0,et.Us)();(0,eb.SJ)(function(){return[iD.searchFileContents.id,function(){(0,V.u4)(V.AZ.SEARCH_PANE_USED,{action:"opened_via_shortcut"});var e,n=void 0;(null==ea?void 0:ea.type)==="codeEditor"&&(n=null==(e=ea.getCurrentSelectionText)?void 0:e.call(ea)),eL({pane:{type:"searchReplace",data:{initialQuery:n}}})}]},[ea,eL]),(0,eb.SJ)(function(){return W?[iD.toggleFloatPaneGroup.id,function(){return j(W)}]:void 0},[W]),(0,eb.SJ)(function(){return W?[iD.toggleMaximizePaneGroup.id,function(){return Z(W)}]:void 0},[W]),(0,eb.SJ)(function(){return G?[iD.removePaneGroup.id,function(){q({paneGroupId:G}),X()}]:void 0},[G]),(0,eb.SJ)(function(){return W?[iD.removeOthersInPaneGroup.id,function(){J(W)}]:void 0},[W]),(0,eb.SJ)(function(){return[iD.moveFocusUp.id,function(){return U("above")}]},[]),(0,eb.SJ)(function(){return[iD.moveFocusDown.id,function(){return U("below")}]},[]),(0,eb.SJ)(function(){return[iD.moveFocusRight.id,function(){return U("rightOf")}]},[]),(0,eb.SJ)(function(){return[iD.moveFocusLeft.id,function(){return U("leftOf")}]},[]),eI(en(eh)),eI(Q(eh),{enabled:!eD}),eI(eo.Y({container:y,keyboardShortcut:eP,openFile:D})),(0,eb.SJ)(function(){if(!x)return[iD.run.id,function(){_(ip.QG.KEYBOARD_SHORTCUT),eE("shortcut_cmd_enter")}]},[_]);var eU=(0,eb.Jn)(iD.run.id);eI({match:K.KK,data:{type:"action",icon:(0,p.Y)(iS.A,{}),label:"New window",keyboardShortcut:"Cmd-Shift-n",description:"Open a new window",run:function(){rX.M.openNewWindow()}}},{enabled:ep}),eI({match:K.KK,data:{type:"action",icon:(0,p.Y)(iY.A,{}),label:"Run",description:"Run Repl",run:function(){_(ip.QG.KEYBOARD_SHORTCUT)},keyboardShortcut:eU}},{enabled:!C}),eI({match:K.KK,data:{type:"action",icon:(0,p.Y)(i_.A,{}),label:"Stop",description:"Stop Repl",run:function(){_(ip.QG.KEYBOARD_SHORTCUT)}}},{enabled:C}),eI({match:K.KK,data:{type:"action",icon:(0,p.Y)(iA.A,{}),label:"Kill 1",description:"Kill the Repl pid1 process if it's in a bad state (admin only)",run:function(){y.exec("kill","1")}}},{enabled:f}),eI({match:K.KK,data:{type:"action",icon:(0,p.Y)(iy.A,{}),label:"Open development URL",run:function(){if(!ew)throw Error("Expected dotdevUrl");window.open(ew,"_blank")}}},{enabled:!0}),eI({match:K.KK,data:{type:"action",icon:(0,p.Y)(ib.A,{}),label:"Open in desktop app",description:"Open this Repl in the desktop app",run:function(){if(!el)throw Error("Expected Repl URL query param");var e="".concat(window.location.origin,"/desktopApp/open?replUrl=").concat(el);window.open(e,"_blank")}}},{enabled:!ep}),eI({match:K.KK,data:{type:"action",icon:(0,p.Y)(ik,{}),label:"Open in VS Code",description:"Connect to this Repl in VS Code via SSH",run:function(){(0,V.u4)(V.AZ.OPEN_IN_VSCODE_CLICKED,{source:"command_bar",editor:"vscode"}),eY()}}},{enabled:!!em&&h}),eI({match:K.KK,data:{type:"action",icon:(0,p.Y)(rA.A,{}),label:"Copy SSH Command",description:"Copy a shell command to connect to this Repl via SSH",run:function(){if(!em)throw Error("Expected sshConfig");var e=em.sshPort,n=em.sshUser,t=em.sshHostname,r="ssh -i ".concat(eg,"/.ssh/replit -p ").concat(e," ").concat(n,"@").concat(t);(0,V.u4)(V.AZ.COPY_SSH_KEY_COMMAND_CLICKED,{source:"command_bar"}),(0,rv.default)(r),ey("Copied SSH command")}}},{enabled:!!em&&h}),eI((t=(n={description:"Jump to another Repl",onRun:function(e){window.location.href=e.url}}).description,r=n.onRun,i=(0,eZ.A)(r),(0,L.A)(function(){return{match:(0,K.u4)({defaultScore:$.q.myRepls}),data:{type:"context",label:"My Apps",icon:(0,p.Y)(it.A,{}),description:t},commands:function(e){var n=e.searchQuery,t=e.active;return(0,H._)(function(){return(0,z.YH)(this,function(e){switch(e.label){case 0:if(!t)return[2,[]];return[4,function(e){return io.apply(this,arguments)}({query:n,count:50})];case 1:return[2,e.sent().map(function(e){var t,r,o,a;return r=(t={repl:e,searchQuery:n,run:function(){return i.current(e)}}).repl,o=t.searchQuery,a=t.run,{match:function(){return{score:1,render:{height:44,content:(0,p.Y)(ii,{repl:r,height:44,searchQuery:o})}}},data:{type:"action",label:r.title,icon:(0,p.Y)(r9.Ay,{alt:r.title,size:16,iconUrl:r.iconUrl}),run:function(){return a(r)}}}})]}})})()}}},[t,i]))),eI({match:(0,K.u4)({defaultScore:$.q.fork}),data:{type:"action",label:"Remix",icon:(0,p.Y)(ix.A,{}),description:"Remix App",run:function(){Y||S()}}}),a=(o=P.g.apply(void 0,(0,B._)(id))).preferences,l=o.update,s=function(e){Object.keys(e).forEach(function(n){var t=e[n];(0,V.u4)(V.AZ.SETTINGS_TOGGLED,{settingChanged:n,updatedValue:t,isCommandBar:!0})}),l(e)},u=(c=(0,tv.D)()).setActiveTheme,d=c.theme,eI({match:(0,K.u4)({defaultScore:$.q.settings,matchScoreMultiplier:$.B.settings}),data:{type:"context",label:"Settings",description:"Change Replit Settings",icon:(0,p.Y)(iu.A,{})},commands:function(e){var n=e.active,t=e.searchQuery;if(!n&&!t)return[];var r={match:(0,K.u4)({defaultScore:$.q.settings,matchScoreMultiplier:$.B.settings}),data:{type:"context",label:"Theme",icon:(0,p.Y)(ic.A,{}),description:"Change Replit Theme"},commands:function(){return il.U.map(function(e){return{match:(0,K.u4)({defaultScore:$.q.settings,matchScoreMultiplier:$.B.settings}),data:{type:"action",label:e.title,icon:d.id===e.id?(0,p.Y)(is.A,{}):(0,p.Y)(iu.A,{opacity:0}),description:"Use "+e.title+" theme "+(d.id===e.id?" (current)":""),run:function(){u(e.id)}}}})}},i=Object.values(ia.KY).filter(function(e){return -1!==id.indexOf(e.editorPreferencesKey)}).map(function(e){return{match:(0,K.u4)({defaultScore:$.q.settings,matchScoreMultiplier:$.B.settings}),data:{type:"context",label:e.name,icon:(0,p.Y)(iu.A,{}),description:e.description},commands:function(){return e.options.map(function(n){var t=a[e.editorPreferencesKey],r=!!e.editorPreferencesKey&&n.editorPreferencesValue===t;return{match:(0,K.u4)({defaultScore:$.q.settings,matchScoreMultiplier:$.B.settings}),data:{type:"action",label:n.title,icon:r?(0,p.Y)(is.A,{}):(0,p.Y)(iu.A,{opacity:0}),description:n.description,run:function(){return(0,H._)(function(){return(0,z.YH)(this,function(t){switch(t.label){case 0:if(!e.editorPreferencesKey)throw Error("editorPreferencesKey is not defined");return[4,s((0,nt._)({},e.editorPreferencesKey,n.editorPreferencesValue))];case 1:return t.sent(),[2]}})})()}}}})}}});return(0,B._)(i).concat([r])}},{enabled:!0});var eN=(0,I.Wq)();return eI({match:K.KK,data:{type:"action",label:"[Admin] Enable ".concat(I.g$),icon:(0,p.Y)(iC.A,{}),run:function(){eN()}}},{enabled:f&&!eD}),(0,p.Y)(p.FK,{children:(0,p.Y)(ek.a,{isOpen:eC,onRequestClose:e_,centered:!0,children:(0,p.Y)(ih.A,{onConfirm:ex})})})});var iI=t(5204),iF=t(32957),iT=t(41392),iP=t(12053),iL=t(6034),iU=t(98106),iN=(0,tB.i7)({"0%":{transform:"translate(0, 0)"},"8.33%, 25%":{transform:"translate(-50%, 0)"},"33.33%, 50%":{transform:"translate(-50%, -50%)"},"58.33%, 75%":{transform:"translate(0, -50%)"},"83.33%, 100%":{transform:"translate(0, 0)"}}),iO=(0,eC.x)({root:[e_.wp.color.foregroundDimmest,e_.wp.position.relative,e_.wp.width("100%"),e_.wp.height("100%"),{overflow:"hidden"}],arrows:[e_.wp.position.absolute,e_.wp.top(0),e_.wp.left(0),e_.wp.flex.row,e_.wp.flex.wrap,e_.wp.width("200%"),e_.wp.height("200%"),{animationName:iN,animationDirection:"normal",animationTimingFunction:"ease-out",animationIterationCount:"infinite"}],arrow:[e_.wp.width("50%"),e_.wp.height("50%"),e_.wp.center]});function iM(e){var n=e.delay,t=e.duration;return(0,p.Y)(eG.S,{css:iO.root,children:(0,p.FD)(eG.S,{css:iO.arrows,style:{animationDelay:n?n+"ms":void 0,animationDuration:t?t+"ms":"8000ms"},children:[(0,p.Y)(eG.S,{css:iO.arrow,children:(0,p.Y)(iP.A,{size:12})}),(0,p.Y)(eG.S,{css:iO.arrow,children:(0,p.Y)(iL.A,{size:12})}),(0,p.Y)(eG.S,{css:iO.arrow,children:(0,p.Y)(is.A,{size:12})}),(0,p.Y)(eG.S,{css:iO.arrow,children:(0,p.Y)(iU.A,{size:12})})]})})}var iB=t(17459),iH=t(83650),iz=t(49444),iW=(0,eC.x)({root:[e_.wp.position.relative],circle:[e_.wp.top(-6),e_.wp.right(-6),e_.wp.minWidth(12),e_.wp.borderRadius(8),e_.wp.position.absolute,e_.wp.backgroundColor.backgroundHighest,e_.wp.shadow(3),{textAlign:"center",fontSize:10,border:"1px solid",borderColor:tH.LU.outlineDefault}],count:[{textAlign:"center",fontSize:10}]});function iG(e){var n=e.count,t=(0,iB._)(e,["count"]);return(0,p.FD)(eG.S,{css:iW.root,children:[(0,p.Y)(iH.A,(0,m._)({},t)),(0,p.Y)(eG.S,{css:[iW.circle,iW.count],children:n})]})}function iV(){return(0,p.FD)(eG.S,{css:iW.root,children:[(0,p.Y)(iH.A,{}),(0,p.Y)(eG.S,{css:iW.circle,children:(0,p.Y)(is.A,{size:6})})]})}function ij(e){var n=e.paneId,t=e.paneGroupId,r=(0,X.Vv)(),i=(0,et.KN)(n),o=(0,et.MC)(),a=(0,et._3)(),l=(0,et.Rk)(),s=(0,et.hR)({paneId:n}),c=(0,et.C0)({paneGroupId:t});return(0,L.A)(function(){var e=r.getTitle(i),t=[{match:K.G2,data:{type:"action",label:"Close "+e,icon:(0,p.Y)(iH.A,{}),run:function(){o(n)}}}];return c&&c>1&&(null!==s&&s<c-1&&t.push({match:K.G2,data:{type:"action",label:"Close to the right",icon:(0,p.Y)(iV,{}),run:function(){a(n)}}}),t.push({match:K.G2,data:{type:"action",label:"Close all other tabs",icon:(0,p.Y)(iG,{count:c-1}),run:function(){l(n)}}})),t},[r,i,c,s,o,n,a,l])}function iZ(){var e=(0,et.aJ)(),n=(0,et.Fr)();return(0,h.useCallback)(function(t){var r=e(t),i=r.isCommitted,o=r.pane;return!i&&(0,X.xS)(o)?{match:K.G2,data:{type:"action",label:"Keep open",icon:(0,p.Y)(iz.A,{}),run:function(){return n(t)}}}:null},[e,n])}var iq=t(67201),iK=t(57756);function i$(e){return(0,p.Y)(tV.Ay,(0,e6._)((0,m._)({},e),{children:(0,p.Y)("path",{fillRule:"evenodd",d:"M1.25 3c0-.966.784-1.75 1.75-1.75h6c.966 0 1.75.784 1.75 1.75v6A1.75 1.75 0 0 1 9 10.75H3A1.75 1.75 0 0 1 1.25 9V3ZM3 2.75a.25.25 0 0 0-.25.25v6c0 .138.112.25.25.25h6A.25.25 0 0 0 9.25 9V3A.25.25 0 0 0 9 2.75H3ZM13.25 3c0-.966.784-1.75 1.75-1.75h6c.966 0 1.75.784 1.75 1.75v6A1.75 1.75 0 0 1 21 10.75h-6A1.75 1.75 0 0 1 13.25 9V3ZM15 2.75a.25.25 0 0 0-.25.25v6c0 .138.112.25.25.25h6a.25.25 0 0 0 .25-.25V3a.25.25 0 0 0-.25-.25h-6ZM1.25 15c0-.966.784-1.75 1.75-1.75h6c.966 0 1.75.784 1.75 1.75v6A1.75 1.75 0 0 1 9 22.75H3A1.75 1.75 0 0 1 1.25 21v-6ZM3 14.75a.25.25 0 0 0-.25.25v6c0 .138.112.25.25.25h6a.25.25 0 0 0 .25-.25v-6a.25.25 0 0 0-.25-.25H3Zm10.25.25c0-.966.784-1.75 1.75-1.75h6c.966 0 1.75.784 1.75 1.75v6A1.75 1.75 0 0 1 21 22.75h-6A1.75 1.75 0 0 1 13.25 21v-6Zm1.75-.25a.25.25 0 0 0-.25.25v6c0 .138.112.25.25.25h6a.25.25 0 0 0 .25-.25v-6a.25.25 0 0 0-.25-.25h-6Z",clipRule:"evenodd"})}))}var iJ=new Map([["left",{label:"Move Left",icon:(0,p.Y)(iL.A,{})}],["right",{label:"Move Right",icon:(0,p.Y)(is.A,{})}],["up",{label:"Move Up",icon:(0,p.Y)(iU.A,{})}],["down",{label:"Move Down",icon:(0,p.Y)(iP.A,{})}]]);function iQ(e){return(0,p.Y)(tV.Ay,(0,e6._)((0,m._)({},e),{children:(0,p.Y)("path",{fillRule:"evenodd",d:"M5 3.75c-.69 0-1.25.56-1.25 1.25v3.25h16.5V5c0-.69-.56-1.25-1.25-1.25H5ZM21.75 5A2.75 2.75 0 0 0 19 2.25H5A2.75 2.75 0 0 0 2.25 5v14A2.75 2.75 0 0 0 5 21.75h14A2.75 2.75 0 0 0 21.75 19V5Zm-1.5 4.75H9.75v10.5H19c.69 0 1.25-.56 1.25-1.25V9.75Zm-12 10.5V9.75h-4.5V19c0 .69.56 1.25 1.25 1.25h3.25Z",clipRule:"evenodd"})}))}var iX=new Map([["leftOf",{label:"Move Left",icon:(0,p.Y)(iL.A,{})}],["rightOf",{label:"Move Right",icon:(0,p.Y)(is.A,{})}],["above",{label:"Move Up",icon:(0,p.Y)(iU.A,{})}],["below",{label:"Move Down",icon:(0,p.Y)(iP.A,{})}]]),i0=t(29531);function i1(e){return(0,p.Y)(tV.Ay,(0,e6._)((0,m._)({},e),{children:(0,p.Y)("path",{fillRule:"evenodd",d:"M2.25 7A4.75 4.75 0 0 1 7 2.25h10A4.75 4.75 0 0 1 21.75 7v10A4.75 4.75 0 0 1 17 21.75H7A4.75 4.75 0 0 1 2.25 17V7ZM7 3.75A3.25 3.25 0 0 0 3.75 7v10A3.25 3.25 0 0 0 7 20.25h4.25V3.75H7Zm5.75 0v16.5H17A3.25 3.25 0 0 0 20.25 17V7A3.25 3.25 0 0 0 17 3.75h-4.25Z",clipRule:"evenodd"})}))}var i2=t(47408),i4=t(56681),i5=t(34418),i3=new Map([["leftOf",{commandId:iD.insertPaneGroupUp.id,label:"Insert Left",icon:(0,p.Y)(rD.A,{})}],["rightOf",{commandId:iD.insertPaneGroupRight.id,label:"Insert Right",icon:(0,p.Y)(i4.A,{})}],["above",{commandId:iD.insertPaneGroupLeft.id,label:"Insert Up",icon:(0,p.Y)(i5.A,{})}],["below",{commandId:iD.insertPaneGroupDown.id,label:"Insert Down",icon:(0,p.Y)(i2.A,{})}]]);function i6(e){return(0,p.Y)(tV.Ay,(0,e6._)((0,m._)({},e),{children:(0,p.Y)("path",{fillRule:"evenodd",d:"M14.25 3a.75.75 0 0 1 .75-.75h6a.75.75 0 0 1 .75.75v6a.75.75 0 0 1-1.5 0V4.81l-5.72 5.72a.75.75 0 1 1-1.06-1.06l5.72-5.72H15a.75.75 0 0 1-.75-.75Zm-3.72 10.47a.75.75 0 0 1 0 1.06l-5.72 5.72H9a.75.75 0 0 1 0 1.5H3a.75.75 0 0 1-.75-.75v-6a.75.75 0 0 1 1.5 0v4.19l5.72-5.72a.75.75 0 0 1 1.06 0Z",clipRule:"evenodd"})}))}function i8(e){return(0,p.Y)(tV.Ay,(0,e6._)((0,m._)({},e),{children:(0,p.Y)("path",{fillRule:"evenodd",d:"M21.53 2.47a.75.75 0 0 1 0 1.06l-5.72 5.72H20a.75.75 0 0 1 0 1.5h-6a.75.75 0 0 1-.75-.75V4a.75.75 0 0 1 1.5 0v4.19l5.72-5.72a.75.75 0 0 1 1.06 0ZM4 14.75a.75.75 0 0 1 0-1.5h6a.75.75 0 0 1 .75.75v6a.75.75 0 0 1-1.5 0v-4.19l-5.72 5.72a.75.75 0 0 1-1.06-1.06l5.72-5.72H4Z",clipRule:"evenodd"})}))}function i7(e){return(0,p.Y)(tV.Ay,(0,e6._)((0,m._)({},e),{children:(0,p.Y)("path",{fillRule:"evenodd",d:"M20.483 14.37v2.871a4.259 4.259 0 0 1-4.259 4.259H7.26A4.259 4.259 0 0 1 3 17.241V8.276a4.259 4.259 0 0 1 4.259-4.259h2.87A3.059 3.059 0 0 1 13.007 2h6.436A3.057 3.057 0 0 1 22.5 5.057v6.437c0 1.324-.84 2.45-2.017 2.876ZM9.948 5.362h-2.69a2.914 2.914 0 0 0-2.913 2.914v8.965a2.914 2.914 0 0 0 2.914 2.914h8.965a2.914 2.914 0 0 0 2.914-2.914v-2.69h-6.132a3.057 3.057 0 0 1-3.058-3.057V5.362ZM17 4.75a.75.75 0 0 0-1.5 0V7.5h-2.75a.75.75 0 0 0 0 1.5h2.75v2.75a.75.75 0 0 0 1.5 0V9h2.75a.75.75 0 0 0 0-1.5H17V4.75Z",clipRule:"evenodd"})}))}var i9=t(87537),oe=t(31258),on=t(16564),ot=t(79398),or=t(27108);function oi(e){return(0,p.Y)(tV.Ay,(0,e6._)((0,m._)({},e),{children:(0,p.Y)("path",{fillRule:"evenodd",d:"M16.47.47a.75.75 0 0 1 1.06 0l4 4a.75.75 0 0 1 0 1.06l-4 4a.75.75 0 1 1-1.06-1.06l2.72-2.72H7A3.25 3.25 0 0 0 3.75 9v2a.75.75 0 0 1-1.5 0V9A4.75 4.75 0 0 1 7 4.25h12.19l-2.72-2.72a.75.75 0 0 1 0-1.06ZM20.25 15v-2a.75.75 0 0 1 1.5 0v2A4.75 4.75 0 0 1 17 19.75H4.81l2.72 2.72a.75.75 0 1 1-1.06 1.06l-4-4a.75.75 0 0 1 0-1.06l4-4a.75.75 0 0 1 1.06 1.06l-2.72 2.72H17A3.25 3.25 0 0 0 20.25 15Z",clipRule:"evenodd"})}))}function oo(e){var n,t,r,i,o,a,l,s,c=e.paneId,u=(n=(0,X.Vv)(),t=(0,ep.N0)(),r=(0,et.Mm)(),(0,h.useCallback)(function(){return{data:{type:"context",label:eh.Ve,icon:(0,p.Y)(eg.A,{})},commands:function(){return t().map(function(e){return{match:K.G2,data:{type:"action",label:n.getTitle(e),icon:n.Icon({pane:e}),run:function(){(0,V.u4)(V.AZ.TOOL_OPENED,{source:"Tab Menu",tool:e.type}),r({paneId:c,pane:e})}}}})}}},[t,n,r,c])),d=(i=(0,ed.Sx)(),o=(0,ed.L4)(),a=(0,et.Mm)(),(0,h.useCallback)(function(){var e=o(),n=i().filter(function(n){return!e.includes(n)});return{data:{type:"context",label:"Recent",icon:(0,p.Y)(or.A,{})},commands:function(e){var t=e.searchQuery;return(0,ei.h)({paths:n,searchQuery:t,run:function(e){a({paneId:c,pane:{type:(0,X.QY)({path:e}),data:{path:e}}})}})}}},[i,a,c,o])),f=(l=(0,er.A)().fs,s=(0,et.Mm)(),(0,L.A)(function(){return{match:K.G2,data:{type:"context",label:"Files",icon:(0,p.Y)(iz.A,{})},commands:function(e){var n=e.searchQuery,t=e.active;return(0,H._)(function(){var e;return(0,z.YH)(this,function(r){switch(r.label){case 0:if(!n&&!t)return[2,[]];return[4,l.listFiles()];case 1:if((e=r.sent()).error)return[2,[]];if(!e.files)throw Error("Expected files");return[2,(0,ei.h)({paths:e.files,searchQuery:n,run:function(e){s({paneId:c,pane:{type:(0,X.QY)({path:e}),data:{path:e}}})}})]}})})()}}},[l,s,c]));return(0,L.A)(function(){return{match:K.G2,data:{type:"context",label:"Change tab",icon:(0,p.Y)(oi,{})},commands:function(e){var n=e.searchQuery,t=e.active;return n||t?[d(),f,u()]:[]}}},[d,u,f])}var oa=(0,tB.AH)(e_.wp.center,{fontSize:tH.LU.fontSizeSmall,border:"1px solid",borderColor:tH.LU.outlineDefault,width:20,height:20,marginTop:-2,marginLeft:-2},e_.wp.borderRadius(8));function ol(e){return(0,p.Y)(eG.S,{css:oa,children:(0,p.Y)(eG.S,{css:{lineHeight:1},children:e.count})})}var os=t(26987),oc=(0,W.eU)([]);function ou(e,n){var t=n.run,r=n.enabled,i=void 0===r||r,o=(0,G.Xr)(oc);(0,h.useEffect)(function(){if(i){var n=(Array.isArray(e)?e:[e]).map(function(e){return{shortcut:e,run:t}});return o(function(e){return(0,B._)(e).concat((0,B._)(n))}),function(){o(function(e){return e.filter(function(e){return!n.includes(e)})})}}},[e,t,o,i])}function od(){var e=(0,G.md)(oc);return(0,h.useEffect)(function(){var n=function(n){var t=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l,s=o.value,c=s.shortcut,u=s.run;!!c.cmdOrCtrlKey==!!(0,rp.T$)(n)&&!!c.altKey==!!n.altKey&&!!c.shiftKey==!!n.shiftKey&&(null==(l=c.key)?void 0:l.toLowerCase())===n.key.toLowerCase()&&(n.preventDefault(),u(c))}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}};return document.addEventListener("keydown",n),function(){document.removeEventListener("keydown",n)}},[e]),null}var op=t(94056),of=(0,eC.x)({overlay:[e_.wp.position.absolute,e_.wp.overflow("hidden"),e_.wp.zIndex(et.WO.overlay)],surface:[e_.wp.position.relative,e_.wp.borderRadius(8),e_.wp.flex.shrink(1),{maxHeight:"100%",maxWidth:"100%",border:"1px solid",borderColor:tH.LU.outlineDefault,opacity:0},e_.wp.shadow(3)],innerSurface:[e_.wp.flex.growAndShrink(1),e_.wp.borderRadius(8)]}),oh=(0,eC.x)({root:[{borderTop:"1px solid",borderColor:tH.LU.outlineDimmer}],row:[e_.wp.rowWithGap(2),e_.wp.align.center,e_.wp.justify.spaceBetween]});function om(){var e=(0,ex.Kg)();return(0,p.FD)(eG.S,{css:oh.root,p:8,gap:8,children:[(0,p.FD)(eG.S,{css:oh.row,children:[(0,p.Y)(eW.EY,{color:"dimmest",variant:"small",multiline:!1,children:"Move focus"}),(0,p.FD)(eG.S,{row:!0,gap:4,children:[(0,p.Y)(eb._y,{keyCombo:"".concat(e),small:!0}),(0,p.Y)(os.Js,{text:(0,p.Y)(iM,{duration:6e3,delay:6e3})})]})]}),(0,p.FD)(eG.S,{css:oh.row,children:[(0,p.Y)(eW.EY,{color:"dimmest",variant:"small",multiline:!1,children:"Move pane"}),(0,p.FD)(eG.S,{row:!0,gap:4,children:[(0,p.Y)(eb._y,{keyCombo:"".concat(e,"Shift-"),small:!0}),(0,p.Y)(os.Js,{text:(0,p.Y)(iM,{duration:6e3,delay:1500})})]})]})]})}var og=(0,h.memo)(function(){var e=function(){var e=(0,et.qN)(),n=(0,et.zS)();if(n){var t={width:n.width,height:n.height,transform:"translate(".concat(n.x,"px, ").concat(n.y,"px)")},r=t.width,i=t.height,o=t.transform,a={border:"1px solid",borderColor:tH.LU.accentPrimaryStronger,borderRadius:tH.LU.borderRadius6,boxShadow:tH.LU.shadow3,transitionProperty:"transform, height, width",transitionDuration:op.Ds.duration,transitionTimingFunction:op.Ds.timingFunction};return(0,m._)({width:r,height:i,transform:o},e?void 0:a)}}(),n=(0,et.V2)(),t=(0,iF.A)(n,[]);return(0,h.useEffect)(function(){var e=setTimeout(function(){(0,iT.U)(t,"opacity","1")});return function(){clearTimeout(e)}},[t]),(0,p.Y)(iI.n1,{restoreFocus:!0,autoFocus:!0,contain:!0,children:(0,p.Y)(eG.S,{style:e,css:of.overlay,p:16,align:"end",children:(0,p.Y)(eD.ui,{innerRef:t,elevated:!0,css:of.surface,children:(0,p.Y)(eD.ui,{css:of.innerSurface,elevated:!0,children:(0,p.Y)(ob,{})})})})})}),ov={ArrowUp:"above",ArrowDown:"below",ArrowRight:"rightOf",ArrowLeft:"leftOf"},ow={ArrowUp:"up",ArrowDown:"down",ArrowRight:"right",ArrowLeft:"left"},oy=Object.keys(ov),ob=(0,h.memo)(function(){var e=(0,et.l7)(),n=(0,et.cK)(),t=(0,et.ul)(),r=(0,et.qN)();ou({key:"Escape"},{run:function(){t()}}),ou(oy.map(function(e){return{key:e,cmdOrCtrlKey:!0}}),{run:function(n){e(ov[n.key])},enabled:!r}),ou(oy.map(function(e){return{key:e,cmdOrCtrlKey:!0,shiftKey:!0}}),{run:function(e){n({direction:ow[e.key]})},enabled:!r});var i=(0,et.LR)();return i&&"sidebar"!==i.target?(0,p.Y)(oS,{paneGroupId:i.paneGroupId,paneId:i.paneId}):null});function oS(e){var n,t,r,i,o,a,l,s,c,u,f,h,g,v,w,y,b,S,Y,A,x,C=(0,et.qN)(),_=(0,et.V2)(),k=(0,et.ul)(),D=(n=e.paneGroupId,i=(r={paneId:t=e.paneId,paneGroupId:n}).paneId,o=r.paneGroupId,a=(0,X.Vv)(),l=(0,et.KN)(i),s=(0,eu.eq)(i),c=iZ(),u=ij({paneId:i,paneGroupId:o}),f=(0,L.A)(function(){var e=a.getTitle(l),n=function(e){return!!e&&(void 0===e?"undefined":(0,nr._)(e))==="object"&&"data"in e},t=[{data:{type:"group",key:"pane-actions"},commands:function(){var e,t;return(null!=(t=null==s||null==(e=s.commands)?void 0:e.flatMap(function(e){return e.commands}))?t:[]).filter(n)}},{data:{type:"group",key:"pane-close"},commands:function(){return[c(i)].concat((0,B._)(u)).filter(n)}}];return{match:K.G2,data:{type:"context",label:e,icon:(0,p.Y)(a.Icon,{pane:l})},commands:function(e){var n=e.active,r=e.searchQuery;return n||r?t:[]}}},[l,s,a,i,u,c]),g=(h={paneId:t,paneGroupId:n}).paneGroupId,v=h.paneId,w=(0,et.kU)(),y=(0,X.Vv)(),b=(0,et.rQ)(),S=(0,et.wl)(),Y=oo({paneId:v}),A=(0,L.A)(function(){var e=w.tiling,n=w.floating,t=e.reduce(function(e,n){return e+n.panes.length},0)+n.reduce(function(e,n){return e+n.panes.length},0),r={match:K.G2,data:{type:"action",label:"New tab",icon:(0,p.Y)(em.A,{}),run:function(){S({paneGroupId:g,activate:!0,panes:[{type:"commands",data:{autoFocus:!0}}]})}}};return t?[Y,{match:K.G2,data:{type:"context",label:(0,oe.A)("Tab",t),icon:(0,p.Y)(ol,{count:t})},commands:function(t){var i=t.active,o=t.searchQuery;if(!(i||o))return[];var a=(0,B._)(e).concat((0,B._)(n)).map(function(e,n){return{data:{type:"group",key:"paneGroups"+n},commands:function(){return e.panes.map(function(e){var n=(0,d._)(e,2),t=n[0],r=n[1];return{match:K.G2,data:{type:"action",label:y.getTitle(r),icon:(0,p.Y)(y.Icon,{pane:r}),run:function(){b({paneId:t,activate:!0})}}}})}}});return a.unshift(r),a}}]:[Y,r]},[w,y,b,S,g,Y]),x=function(e){var n,t,r,i,o,a,l,s,c,u,f,h,g,v,w,y,b,S,Y,A,x,C,_,k,D,E,R,I,F,T,P,U,N,O,M,H,z=e.paneGroupId,W=e.paneId,G=function(e){var n,t,r=e.paneId,i=e.paneGroupId,o=(0,et.uG)(i),a=(0,iK.A)(o.isMaximized),l=(0,iK.A)(o.isFloating),s=!a&&!l,c=(n=(0,i0.RI)(),t=(0,et.yT)(),(0,L.A)(function(){return(0,B._)(i3.entries()).map(function(e){var i,o,a=(0,d._)(e,2),l=a[0],s=a[1],c=s.commandId,u=s.label,p=s.icon;return{match:K.G2,data:{label:u,icon:p,type:"action",keyboardShortcut:null!=(o=null==(i=n.get(c))?void 0:i.shortcut)?o:void 0,run:function(){t({placement:l,paneId:r,autoFocus:!0}),(0,V.u4)(V.AZ.WS_SPLIT_USED,{action:"opened",placement:l})}}}})},[n,t,r]));return(0,L.A)(function(){return s?[{match:K.G2,data:{type:"context",label:"Add pane",icon:(0,p.Y)(i1,{})},commands:function(e){var n=e.active,t=e.searchQuery;return n||t?c:[]}}]:[]},[s,c])}({paneId:W,paneGroupId:z}),j=(n=(0,et.h7)(W),t=(0,et.qN)(),r=(0,iK.A)(n.isFloating),i=!t&&!r,o=(0,et.wR)(),(0,L.A)(function(){var e=(0,B._)(iX.entries()).map(function(e){var n=(0,d._)(e,2),t=n[0],r=n[1],i=r.label,a=r.icon;return{match:K.G2,data:{label:i,icon:a,type:"action",run:function(){o(t)}}}});return i?[{match:K.G2,data:{type:"context",label:"Move tab",icon:(0,p.Y)(iQ,{})},commands:function(n){var t=n.active,r=n.searchQuery;return t||r?e:[]}}]:[]},[i,o])),Z=(a=(0,et.uG)(z),l=(0,iK.A)(a.isMaximized),s=(0,iK.A)(a.isFloating),c=!l&&!s,u=(0,et.cK)(),(0,L.A)(function(){var e=(0,B._)(iJ.entries()).map(function(e){var n=(0,d._)(e,2),t=n[0],r=n[1],i=r.label,o=r.icon;return{match:K.G2,data:{label:i,icon:o,type:"action",run:function(){u({direction:t})}}}});return c?[{match:K.G2,data:{type:"context",label:"Move group",icon:(0,p.Y)(i$,{})},commands:function(n){var t=n.active,r=n.searchQuery;return t||r?e:[]}}]:[]},[c,u])),q=(h=(f=(0,et.IT)()).maximizePaneGroup,g=f.restoreMaximizedPaneGroup,v=(0,et.uG)(z),w=(0,iK.A)(v.isMaximized),y=(0,et.$P)(),b=(0,eb.Jn)(iD.toggleMaximizePaneGroup.id),(0,L.A)(function(){return w?y?[]:[{match:K.G2,data:{type:"action",label:"Restore",icon:(0,p.Y)(i8,{}),run:function(){return g()},keyboardShortcut:b}}]:[{match:K.G2,data:{type:"action",label:"Maximize",icon:(0,p.Y)(i6,{}),run:function(){return h({paneGroupId:z})},keyboardShortcut:b}}]},[w,b,y,g,h,z])),$=(S=(0,et.RI)(),Y=(0,et.V2)(),A=(0,et.$P)(),x=(0,eb.Jn)(iD.removePaneGroup.id),(0,L.A)(function(){return A?[]:[{match:K.G2,data:{type:"action",label:"Close",icon:(0,p.Y)(iH.A,{}),run:function(){Y(),S({paneGroupId:z})},keyboardShortcut:x}}]},[Y,S,A,x,z])),J=(_=(C={paneId:W,paneGroupId:z}).paneId,k=C.paneGroupId,D=(0,et.wI)(),E=(0,et.uG)(k),R=(0,iK.A)(E.isMaximized),I=(0,iK.A)(E.isFloating),F=(0,eb.Jn)(iD.toggleFloatPaneGroup.id),(0,L.A)(function(){return R?[]:[{match:K.G2,data:{type:"action",label:I?"Unfloat":"Float",icon:I?(0,p.Y)(i9.A,{}):(0,p.Y)(iS.A,{}),keyboardShortcut:F,run:function(){D(_)}}}]},[_,D,F,I,R])),Q=(T={paneId:W,paneGroupId:z},P=(0,et.uG)(T.paneGroupId),U=(0,et.h7)(T.paneId),N=(0,et.Hz)(T.paneGroupId),O=(0,et.t3)(),M=(0,et.SA)(),H=(0,iK.A)(P.isMaximized),(0,L.A)(function(){return H?[]:[{match:K.G2,data:{type:"action",label:"New window",icon:(0,p.Y)(i7,{}),run:function(){var e=(0,iq.A)(),n=O().filter(function(e){var n=(0,d._)(e,1)[0];return N.panes.current.includes(n)});M({popupId:e,state:{sidebarPercent:0,type:"saved",layout:{floating:[],tiling:{id:(0,iq.A)(),type:"paneGroup",percent:100,activeIndex:N.activeIndex.current,panes:N.panes.current}},data:n.reduce(function(e,n){var t=(0,d._)(n,2),r=t[0],i=t[1];return(0,e6._)((0,m._)({},e),(0,nt._)({},r,i))},{})}}),window.open("".concat(window.location.origin+window.location.pathname,"?popupId=").concat(e),"_blank","popup=1,height=".concat(U.size.current.height,"px,width=").concat(U.size.current.width,"px")),(0,V.u4)(V.AZ.WS_POPOUT_OPENED,{ai:n.some(function(e){var n=(0,d._)(e,2);return"ghostwriterChat"===(n[0],n[1]).type}),console:n.some(function(e){var n=(0,d._)(e,2);return"runnerOutput"===(n[0],n[1]).type}),editor:n.some(function(e){var n=(0,d._)(e,2);return"codeEditor"===(n[0],n[1]).type}),shell:n.some(function(e){var n=(0,d._)(e,2);return"shell"===(n[0],n[1]).type}),paneData:n})}}}]},[H,N.activeIndex,N.panes,O,M,U.size]));return(0,L.A)(function(){return[{data:{type:"group",key:"pane-group"},commands:function(){return(0,B._)(G).concat((0,B._)(j),(0,B._)(Z),(0,B._)(q),(0,B._)(J),(0,B._)(Q),(0,B._)($))}}]},[G,j,Z,q,J,Q,$])}({paneGroupId:n,paneId:t}),(0,L.A)(function(){return{data:{type:"group",key:"root",description:"Search"},commands:function(){return[f].concat((0,B._)(A),(0,B._)(x))}}},[f,A,x]));return(0,p.Y)(eE.r,{iconBreadcrumbs:!0,command:D,onAction:function(){return _()},onKeyDown:function(e,n){var t=n.inputValue,r=n.hasHighlightedItem;if("Enter"===e.key&&!t&&!r){e.preventDefault(),k();return}(0,rp.T$)(e)&&e.preventDefault()},footer:C?null:(0,p.Y)(om,{}),compact:!0})}var oY={id:"paneMenu.toggle",name:"Toggle pane context menu",default:(0,ex.FM)({cmdOrCtrl:!0,key:"j"})};function oA(){var e=(0,et.fU)(),n=(0,et.fn)();return((0,eb.SJ)(function(){return[oY.id,function(){return e()}]},[e]),n)?(0,p.Y)(og,{}):null}var ox=t(3499),oC=t(54534),o_=t(50025),ok=t(20084),oD=[rB,eR,oY].concat((0,B._)(iE),(0,B._)(tP.ke),(0,B._)(oC.$f),[ok.B,ox.G,o_.Ws]),oE=t(67620);function oR(e){var n=(0,oE.O)();return(0,p.Y)(eb.jM,{commands:oD,onChange:n,keybindings:e.keybindings,children:e.children})}var oI=t(30248),oF=t(13588),oT=t(51472);function oP(e){var n=e.children,t=(0,L.A)(function(){return new tI.Y(tT.A.get("stateCache","object"))},[]);return(0,p.Y)(tI.H.Provider,{value:t,children:n})}function oL(e){var n,t,r,i,o,a=e.ui,l=e.repl,s=e.services,c=e.userKeybindings,u=e.children,d=l.id,f=l.language,h=l.config.isExtension,m=null==(r=l.source)||null==(t=r.release)||null==(n=t.repl)?void 0:n.id,g=(0,L.A)(function(){return{id:d,language:f,replConfigIsExtension:h,sourceReplId:m}},[d,f,h,m]);return(0,p.Y)(oR,{keybindings:c,children:(0,p.Y)(X.lQ,{value:a,children:(0,p.Y)(oP,{children:(0,p.Y)(oI.A.Provider,{value:s,children:(0,p.Y)(oT.A.Provider,{value:g,children:(0,p.Y)(tF.F,{replId:l.id,orgId:null==(i=l.org)?void 0:i.id,container:s.container,fs:s.fs,dotReplit:s.dotReplit,ports:s.ports,secrets:s.secrets,children:(0,p.Y)(iw.B,{repl:l,forkParams:{trackingData:{forkSource:"replEnvironmentDesktop"}},teamContext:(null==(o=l.owner)?void 0:o.__typename)==="Team"?l.owner.id:void 0,children:(0,p.Y)(tg.Ey,{children:(0,p.Y)(oF.A,{children:u})})})})})})})})})}var oU=t(80155),oN=function(){var e=(0,H._)(function(e){var n,t,r,i;return(0,z.YH)(this,function(o){switch(o.label){case 0:if(!(0,rb.Fp)())return[2,null];return[4,(0,rb.Eb)(e)];case 1:if(t=(n=o.sent()).path,r=n.line,i=n.col,!t)return[2,null];return[2,{path:t,line:r,col:i}]}})});return function(n){return e.apply(this,arguments)}}();function oO(e){var n,t,r,i,o,a,l,s,c,u,p,f,g,v,w,y,b=e.repl;return t=(n=(0,er.A)()).fs,r=n.dotReplit,i=(0,et.mU)(),o=(0,eZ.A)(i),l=(a=(0,d._)((0,h.useState)(!1),2))[0],s=a[1],c=(0,et.q5)(),u=(0,h.useCallback)(function(e){var n;(0,ts.e$)(e.path.toLowerCase())?n={paneType:"markdown"}:(0,ts.Zy)(e.path.toLowerCase())&&(n={paneType:"csvPreview"}),c((0,e6._)((0,m._)({},e),{opener:n}))},[c]),p=F(b),f=(0,et.CA)(),g=(0,et.$P)(),v=(0,I.jt)(),w=(0,t8.eg)(),y=(0,h.useRef)(!1),(0,h.useEffect)(function(){if(l&&!y.current){if(!i){if(!window.location.hash)return;var e=new URL(window.location.href);history.pushState((0,e6._)((0,m._)({},history.state),{as:e.pathname}),document.title,window.location.origin+window.location.pathname+window.location.search);return}var n=(0,rb.cg)({path:i}),t=window.location.hash;if(!(t.slice(1)===i||t.startsWith(n+":"))){var r=new URL(window.location.href);r.hash=n,window.history.pushState((0,e6._)((0,m._)({},history.state),{as:r.pathname+r.hash}),"",r)}}},[l,i]),(0,h.useEffect)(function(){if(!l){var e=!1;return function(){n.apply(this,arguments)}(),function(){e=!0}}function n(){return(n=(0,H._)(function(){var n,i;return(0,z.YH)(this,function(a){switch(a.label){case 0:if(!f)return[2];if(w||o.current)return s(!0),[2];return[4,oN(t)];case 1:if(n=a.sent(),e)return[2];if(n)return u(n),s(!0),[2];if(o.current||"saved"===f||g||v)return s(!0),[2];return[4,(0,oU.o)({fs:t,dotReplit:r})];case 2:return i=a.sent().entrypoint,e||!i||p||u({path:i}),s(!0),[2]}})})).apply(this,arguments)}},[t,u,r,o,f,l,g,p,v,w]),(0,h.useEffect)(function(){if(f){var e,n=(e=(0,H._)(function(){var e;return(0,z.YH)(this,function(n){switch(n.label){case 0:return y.current=!0,[4,oN(t)];case 1:return(e=n.sent())&&u(e),y.current=!1,[2]}})}),function(){return e.apply(this,arguments)});return window.addEventListener("hashchange",n),function(){window.removeEventListener("hashchange",n)}}},[f,t,u]),null}function oM(){var e=(0,t8.W9)(),n=(0,t8.gi)(),t=(0,er.A)().fs,r=function(){n(null)};return(0,p.Y)(ek.a,{isOpen:!!e,onRequestClose:r,children:e?(0,p.Y)(rM.A,{name:e,description:e,entityType:"file",hideModal:r,delete:function(){e&&(t.deleteFile(e),n(null))}}):null})}var oB=t(99615),oH=t(17513),oz=t(16007);function oW(){var e,n,t=(0,f.useRouter)(),r=(0,U.ME)(t,"mobileBridge"),i=(0,et.zL)(),o=(0,tM.A)(),a=o.isSaving,l=o.isOffline,s=(0,h.useRef)(null),c=(0,oz.d)(),u=(0,et.Us)(),d=eA(),p=(e=(0,iv.g3)(),n=(0,iv.qP)(),{runState:(0,h.useMemo)(function(){return e?e.step:ip.ll.OFFLINE},[e]),toggleRunState:(0,h.useCallback)(function(){n()},[n])}),m=p.runState,g=p.toggleRunState,v=(0,h.useCallback)(function(e){var n=function(e){switch(e){case oB.TK.OPEN_FILETREE:i.toggle();break;case oB.TK.TOGGLE_RUN_STATE:g();break;case oB.TK.TOGGLE_ALLPANES:d();break;case oB.TK.OPEN_NEW_PANE:case oB.TK.TOGGLE_DRAWER:break;default:(0,on.A)(e)}},t=function(e){c(e)},r=function(e){var n=e.type,t=e.messageId;try{u({pane:{type:n}})}catch(e){(0,oH.Cf)(t)}};(0,oH.E6)(e,function(e){var i=e.type;switch(i){case oB.tF.SET_KEYBOARD_STATE:t(e.keyboardState);break;case oB.tF.WORKSPACE_REQUEST_ACTION:n(e.action);break;case oB.tF.WORKSPACE_REQUEST_OPEN_PANE:r({messageId:e.id,type:e.paneType});break;default:(0,on.A)(i)}})},[g,c,u,d,i]);return(0,h.useEffect)(function(){if(r){var e={messageType:oB.tF.WORKSPACE_STATE,isDrawerOpen:!1,isShowingAllPanes:!0,isSaving:a,isOffline:l,runState:m,activePaneType:null,activePaneFilePath:null,isInAgentMode:!1,insets:{top:0,bottom:0}},n=s.current;return(null==n||JSON.stringify(e)!==JSON.stringify(n))&&((0,oH._z)(e,(0,iq.A)()),s.current=e),window.addEventListener("message",v),function(){window.removeEventListener("message",v)}}},[r,v,m,a,l,s]),null}var oG=t(20188);function oV(){var e=(0,g._)(["\n  fragment AccountStorageUtilization on AccountStorageUtilization {\n    __typename\n    total\n    perRepl {\n      __typename\n      usage\n      percentage\n      repl {\n        __typename\n        id\n        slug\n        url\n        title\n        nextPagePathname\n        iconUrl\n      }\n    }\n  }\n"]);return oV=function(){return e},e}function oj(){var e=(0,g._)(["\n  query ManageAccountStorageUtilizationCurrentUser(\n    $input: UsageOverviewUsageByReplInput\n  ) {\n    currentUser {\n      ...UsageBreakdownCurrentUser\n      usageInterval {\n        ... on UsageInterval {\n          __typename\n          resources {\n            developmentStorage {\n              displayName\n              unitPrice\n              allotment\n              usage\n              percentage\n              overageCostsUSD\n              totalRepls\n              usageByReplConnection(input: $input) {\n                ... on UnitPriceReplUsageTypeConnection {\n                  ...UnitPriceReplUsageConnection\n                }\n              }\n            }\n          }\n        }\n        ... on ServiceUnavailable {\n          __typename\n          message\n        }\n        ... on UserError {\n          __typename\n          message\n        }\n        ... on UnauthorizedError {\n          __typename\n          message\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return oj=function(){return e},e}function oZ(){var e=(0,g._)(["\n  query ManageAccountStorageUtilizationCurrentRepl($replId: String!) {\n    repl(id: $replId) {\n      __typename\n      ... on Repl {\n        id\n        owner {\n          ... on Team {\n            __typename\n            id\n          }\n          ... on User {\n            __typename\n            id\n          }\n        }\n      }\n    }\n  }\n"]);return oZ=function(){return e},e}function oq(){var e=(0,g._)(["\n  query ManageAccountStorageUtilizationStorageQuota {\n    currentUser {\n      __typename\n      id\n      storageInfo {\n        storageQuota {\n          ... on StorageQuota {\n            __typename\n            quota\n          }\n        }\n      }\n    }\n  }\n"]);return oq=function(){return e},e}var oK={};oV();var o$=(0,v.J1)(oj(),oG.J9,oG.YK),oJ=(0,v.J1)(oZ()),oQ=(oq(),t(42415)),oX=t(79784),o0=t(64565),o1=t(46989),o2=t(93566),o4=t(29e3),o5=t(69938),o3=t(39689),o6=t(94516),o8=t(74108),o7=t(96283),o9=(0,eC.x)({dot:[e_.wp.flex.grow(1),e_.wp.width(8),e_.wp.height(8),e_.wp.minWidth(8),e_.wp.maxHeight(8),{borderRadius:"50%"}],title:[e_.wp.flex.grow(1),e_.wp.color.foregroundDefault,(0,nt._)({},(0,o7.kT)("mobileMax"),[e_.wp.flex.shrink(1),e_.wp.truncate])],line:[e_.wp.flex.growAndShrink(1),e_.wp.height(8),e_.wp.width("100%"),(0,nt._)({},(0,o7.kT)("mobileMax"),[e_.wp.flex.shrink(4)])]}),ae=eG.D.a,an=eG.D.li,at=function(e){var n=e.color,t=e.title,r=e.usage,i=e.resourceUsageType,o=e.linkedRepl,a=e.username,l=o?(0,o8.q1)(o):(0,o6.M)(a);return(0,p.Y)(an,{children:(0,p.Y)(r2(),(0,e6._)((0,m._)({legacyBehavior:!0},l),{passHref:!0,children:(0,p.Y)(ae,{children:(0,p.FD)(eG.S,{row:!0,gap:8,align:"center",children:[(0,p.Y)("div",{css:o9.dot,style:{backgroundColor:n}}),o?(0,p.Y)(r9.Ay,{size:16,iconUrl:o.iconUrl,alt:t}):null,(0,p.Y)(eW.EY,{css:o9.title,multiline:!1,children:t}),(0,p.Y)(eG.S,{css:o9.line,children:(0,p.Y)("svg",{width:"100%",xmlns:"http://www.w3.org/2000/svg",children:(0,p.Y)("line",{x1:"0%",y1:"50%",x2:"100%",y2:"50%",stroke:tH.LU.outlineDefault})})}),(0,p.Y)(eW.EY,{color:"dimmer",multiline:!1,children:(0,o1.h7)(r,{resourceUsageType:i})})]})})}))})},ar=(0,eC.x)({self:[e_.wp.colWithGap(4)]}),ai=eG.D.ul,ao=function(e){var n=e.topRepls,t=e.groupedRepls,r=e.groupedTotal,i=e.context,o=e.username,a=e.resourceUsageType,l=n.findIndex(function(e){return e.repl.id===i.replId});return -1===l?(0,p.Y)(eG.S,{gap:4,children:(0,p.Y)(eW.EY,{multiline:!1,children:"No storage usage"})}):(0,p.FD)(ai,{css:ar.self,children:[n.map(function(e,n){return(0,p.Y)(at,{color:n===l?tH.LU.accentPrimaryDefault:tH.LU.accentPrimaryDimmer,title:e.repl.title,usage:e.usage,resourceUsageType:a,linkedRepl:e.repl,username:o},n)}),0!==t.length?(0,p.Y)(at,{color:tH.LU.backgroundHighest,title:"+".concat(t.length," more"),usage:r,resourceUsageType:a,username:o}):null]})},aa=function(e,n){var t=e.findIndex(function(e){var t;return(null==(t=e.repl)?void 0:t.id)===n.replId});if(t<oQ.gw)return{contextReplIndex:t,individualSummaries:e.slice(0,oQ.gw),groupedSummaries:e.slice(oQ.gw)};var r=e[t];return{contextReplIndex:oQ.gw,individualSummaries:e.slice(0,oQ.gw).concat(r),groupedSummaries:e.slice(oQ.gw,t).concat(e.slice(t+1))}},al=t(26518),as=t(87523),ac=t(70900),au=[e_.wp.width("100%"),e_.wp.rowWithGap(1),e_.wp.height(16),e_.wp.borderRadius(4),e_.wp.overflow("hidden"),e_.wp.backgroundColor.backgroundHigher],ad={small:(0,eC.x)({bar:[au,e_.wp.height(10)]}),base:(0,eC.x)({bar:[au,e_.wp.height(16)]})},ap=(0,eC.x)({selfPlaceholder:[e_.wp.width("100%"),e_.wp.rowWithGap(1),e_.wp.height(16),e_.wp.borderRadius(4),e_.wp.overflow("hidden"),e_.wp.backgroundColor.backgroundHigher,o4.S.backgroundPulse(tH.LU.backgroundHigher,tH.LU.backgroundRoot)],barWrapper:[e_.wp.flex.grow(1)],self:[e_.wp.flex.growAndShrink(1)]}),af=function(e){var n=e.summary,t=e.context,r=e.username,i=e.resourceUsageType,o=e.overageSummary,a=e.small,l=a?12:24,s=(0,d._)((0,h.useState)(!1),2),c=s[0],u=s[1],f=n.lineItems,m=Math.max(n.total,n.limit),g=aa((0,B._)(f).filter(function(e){return e.percentage>0}).sort(function(e,n){return n.usage-e.usage}),t),v=g.individualSummaries,w=g.groupedSummaries,y=g.contextReplIndex,b=v.filter(function(e){return null!==e.repl&&void 0!==e.repl}),S=w.filter(function(e){return null!==e.repl&&void 0!==e.repl}),Y=S.reduce(function(e,n){return e+n.usage},0),A=0===m?0:Y/m,x=(0,al.k)(b,A,Y,S.length),C=tH.LU.backgroundHigher,_=(0,p.Y)(t7.K0,{alt:c?"Hide Apps":"Show Apps",size:l,children:c?(0,p.Y)(ac.A,{onClick:function(){return u(!c)},size:l}):(0,p.Y)(as.A,{onClick:function(){return u(!c)},size:l})}),k=x.length>0;return(0,p.FD)(eG.S,{css:ap.self,gap:8,children:[(0,p.FD)(eG.S,{row:!0,gap:8,align:"center",children:[o||(0,p.Y)(eG.S,{css:ap.barWrapper,children:(0,p.Y)(eG.S,{css:a?ad.small.bar:ad.base.bar,style:{backgroundColor:C},children:x.map(function(e,n){return(0,p.Y)(o3.J,{color:n===y?tH.LU.accentPrimaryDefault:tH.LU.accentPrimaryDimmest,resourceUsageType:i,section:e},n)})})}),k?_:null]}),k&&c?(0,p.FD)(p.FK,{children:[(0,p.Y)(ao,{topRepls:b,groupedRepls:S,groupedTotal:Y,context:t,username:r,resourceUsageType:i}),(0,p.Y)(o5.a,{})]}):null]})},ah=function(){return(0,p.Y)(eG.S,{children:(0,p.Y)(eG.S,{css:ap.selfPlaceholder})})},am=t(49430),ag=(0,eC.x)({summaryWrapper:[e_.wp.colWithGap(8),e_.wp.align.start],replSummaryDot:[e_.wp.backgroundColor.accentPrimaryDefault,e_.wp.width(8),e_.wp.height(8),{borderRadius:"50%"}],summaryRow:[e_.wp.rowWithGap(8),e_.wp.justify.start,e_.wp.align.center,e_.wp.fontSize(14),e_.wp.height(14)],summaryRowWrap:[e_.wp.fontSize(14),{flexWrap:"wrap"}],replSummaryText:[e_.wp.color.accentPrimaryStronger],replSummaryUsage:[e_.wp.color.accentPrimaryStrongest],replSummaryTextPlaceholder:[o4.S.backgroundPulse(tH.LU.backgroundHigher,tH.LU.backgroundRoot),{opacity:.5},e_.wp.borderRadius(4),e_.wp.height("100%"),e_.wp.width(78)],replUsagePlaceholder:[o4.S.backgroundPulse(tH.LU.backgroundHigher,tH.LU.backgroundRoot),{opacity:.5},e_.wp.borderRadius(4),e_.wp.height("100%"),e_.wp.width(64)],totalUsagePlaceholder:[o4.S.backgroundPulse(tH.LU.backgroundHigher,tH.LU.backgroundRoot),{opacity:.5},e_.wp.borderRadius(4),e_.wp.height("100%"),e_.wp.width(140)],availablePlaceholder:[o4.S.backgroundPulse(tH.LU.backgroundHigher,tH.LU.backgroundRoot),{opacity:.5},e_.wp.borderRadius(4),e_.wp.height("100%"),e_.wp.width(64)],availableText:[e_.wp.color.foregroundDimmest,(0,nt._)({},e_.$_.max(390),e_.wp.pl(16))]}),av=function(e){var n,t,r=e.data,i=(0,eB.A)(),o=(0,d._)((0,h.useState)(!1),2),a=o[0],l=o[1];if((0,h.useEffect)(function(){var e,n,t,o;r&&(null==(n=r.currentUser)||null==(e=n.usageInterval)?void 0:e.__typename)==="UsageInterval"&&(null==(o=r.currentUser)||null==(t=o.usageInterval.resources.developmentStorage.usageByReplConnection.items.find(function(e){var n;return(null==(n=e.usageRepl)?void 0:n.id)===i}))?void 0:t.__typename)==="UnitPriceReplUsageType"&&l(!0)},[r,i]),r&&(null==(t=r.currentUser)||null==(n=t.usageInterval)?void 0:n.__typename)==="UsageInterval"&&a){var s,c=r.currentUser,u=c.username,f=c.isCore,g=r.currentUser.usageInterval.resources.developmentStorage,v=g.usage,w=g.allotment,y=g.usageByReplConnection.items,b=f?oX.en:"Starter",S=(0,o2.P)(w,{resourceUsageType:"GiB",precision:0}),Y=Math.max(w-v,0),A="(".concat((0,o1.h7)(Y,{precision:1,resourceUsageType:"GiB"})," available)"),x=y.map(function(e){return(0,e6._)((0,m._)({},e),{usage:e.usage*o0.O8})}),C=x.find(function(e){var n;return(null==(n=e.usageRepl)?void 0:n.id)===i}),_=0!==w?(0,p.Y)(eW.EY,{css:ag.availableText,multiline:!1,children:A}):null;return(0,p.FD)(eG.S,{gap:8,children:[(0,p.Y)(af,{context:{replId:i},summary:(0,am.s)({replUsageOverview:x,usage:v,allotment:w,__typename:"UsageOverviewUnitPriceSku"}),username:u,resourceUsageType:"Bytes"}),(0,p.FD)(eG.S,{css:ag.summaryWrapper,children:[(0,p.FD)(eG.S,{css:ag.summaryRowWrap,row:!0,gap:8,justify:"start",align:"center",children:[(0,p.FD)(eW.EY,{multiline:!1,children:["Replit ",b," storage: ",S," GiB"]}),_]}),(0,p.FD)(eG.S,{css:ag.summaryRow,children:[(0,p.Y)("div",{css:ag.replSummaryDot}),(0,p.Y)(eW.EY,{css:ag.replSummaryText,multiline:!1,children:"This Repl:"}),C?(0,p.Y)(eW.EY,{css:ag.replSummaryUsage,multiline:!1,children:(s=C.usage)>2*o0.O8?"".concat((0,o1.$p)(s).toLocaleString(void 0,{maximumFractionDigits:1})," GiB"):"".concat(Math.round((0,o1.lX)(s)).toLocaleString()," MiB")}):(0,p.Y)(eG.S,{css:ag.replUsagePlaceholder})]})]})]})}return(0,p.Y)(aw,{})},aw=function(){return(0,p.FD)(eG.S,{gap:8,children:[(0,p.Y)(ah,{}),(0,p.FD)(eG.S,{css:ag.summaryWrapper,children:[(0,p.FD)(eG.S,{css:ag.summaryRow,children:[(0,p.Y)(eG.S,{css:ag.totalUsagePlaceholder}),(0,p.Y)(eG.S,{css:ag.availablePlaceholder})]}),(0,p.FD)(eG.S,{css:ag.summaryRow,children:[(0,p.Y)(eG.S,{css:ag.replSummaryTextPlaceholder}),(0,p.Y)(eG.S,{css:ag.replUsagePlaceholder})]})]})]})},ay=t(46434),ab=t(35992),aS=t(68820),aY=t(74093),aA=t(81738);function ax(e,n){var t=100*n;return e.slice(0,aI).filter(function(e){return e>=t}).length}function aC(e){return ax(e,aR)>=aF?"danger":ax(e,aE)>=aF?"warning":"ok"}function a_(e){return Math.round(10*e)/10}function ak(e){return Math.round((e+Number.EPSILON)*100)/100}function aD(e){return e/1024/1024}var aE=.9,aR=1,aI=10,aF=5,aT=n7.ZU.Union([n7.ZU.Literal("ok"),n7.ZU.Literal("warning"),n7.ZU.Literal("danger")]);n7.ZU.Object({cpu:n7.ZU.Object({numVCpu:n7.ZU.Number(),utilPercent:n7.ZU.Number(),recentUtilPercents:n7.ZU.Array(n7.ZU.Number()),status:aT,user:n7.ZU.Object({utilPercent:n7.ZU.Number(),recentUtilPercents:n7.ZU.Array(n7.ZU.Number())}),system:n7.ZU.Object({utilPercent:n7.ZU.Number(),recentUtilPercents:n7.ZU.Array(n7.ZU.Number())})}),memory:n7.ZU.Object({softLimitBytes:n7.ZU.Number(),hardLimitBytes:n7.ZU.Number(),usageBytes:n7.ZU.Number(),recentUtilPercents:n7.ZU.Array(n7.ZU.Number()),status:aT,rss:n7.ZU.Object({usageBytes:n7.ZU.Number(),recentUtilPercents:n7.ZU.Array(n7.ZU.Number())}),cache:n7.ZU.Object({usageBytes:n7.ZU.Number(),recentUtilPercents:n7.ZU.Array(n7.ZU.Number())})}),storage:n7.ZU.Object({usedBytes:n7.ZU.Number(),totalBytes:n7.ZU.Number(),scratchUsedBytes:n7.ZU.Number(),scratchTotalBytes:n7.ZU.Number(),nixUsedBytes:n7.ZU.Number(),workspaceUsedBytes:n7.ZU.Number()})});var aP={cpu:{numVCpu:0,utilPercent:0,recentUtilPercents:Array(20).fill(0),status:"ok",user:{utilPercent:0,recentUtilPercents:Array(20).fill(0)},system:{utilPercent:0,recentUtilPercents:Array(20).fill(0)}},memory:{softLimitBytes:0,hardLimitBytes:0,usageBytes:0,recentUtilPercents:Array(20).fill(0),status:"ok",rss:{usageBytes:0,recentUtilPercents:Array(20).fill(0)},cache:{usageBytes:0,recentUtilPercents:Array(20).fill(0)}},storage:{usedBytes:0,totalBytes:0,scratchUsedBytes:0,scratchTotalBytes:0,nixUsedBytes:0,workspaceUsedBytes:0}},aL=(0,W.eU)(aP),aU=(0,W.eU)(!0),aN=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Math.min(n?Math.round(e):e,100)};function aO(e,n){e.unshift(n),e.pop()}var aM=(0,W.eU)(null,function(e,n,t){n(aL,function(e){return(0,ab.jM)(e,function(e){var n,r,i,o,a,l,s,c,u,d,p,f,h,m;s=e.cpu,c=e.memory,u=e.storage,s.numVCpu=t.numVCpu,s.utilPercent=aN(t.cpuUtilizationPercent,!0),s.recentUtilPercents.unshift(s.utilPercent),s.status=aC(s.recentUtilPercents),d=s.user,p=s.system,d.utilPercent=aN(t.user.cpuUtilizationPercent),aO(d.recentUtilPercents,d.utilPercent),p.utilPercent=aN(t.system.cpuUtilizationPercent),aO(p.recentUtilPercents,p.utilPercent),c.softLimitBytes=t.memorySoftLimitBytes,c.hardLimitBytes=t.memoryHardLimitBytes,c.usageBytes=t.memoryUsageRssBytes,f=c.usageBytes/c.softLimitBytes*100,aO(c.recentUtilPercents,f),c.status=aC(c.recentUtilPercents),h=c.rss,m=c.cache,h.usageBytes=t.memoryUsageRssBytes,aO(h.recentUtilPercents,t.memoryUsageRssBytes/t.memorySoftLimitBytes*100),m.usageBytes=t.memoryUsageCacheBytes,aO(m.recentUtilPercents,t.memoryUsageCacheBytes/t.memorySoftLimitBytes*100),u.usedBytes=(null==(n=t.storage)?void 0:n.diskUsedBytes)||0,u.totalBytes=(null==(r=t.storage)?void 0:r.diskLimitBytes)||0x40000000,u.scratchUsedBytes=(null==(i=t.storage)?void 0:i.scratchDiskUsedBytes)||0,u.scratchTotalBytes=(null==(o=t.storage)?void 0:o.scratchDiskLimitBytes)||0x40000000,u.nixUsedBytes=(null==(a=t.storage)?void 0:a.diskUsedNixBytes)||0,u.workspaceUsedBytes=(null==(l=t.storage)?void 0:l.diskUsedWorkspaceBytes)||0})})}),aB=(0,aS.mg)(aL,function(e){return"ok"!==e.cpu.status?e.cpu.status:null}),aH=(0,aS.mg)(aL,function(e){return"ok"!==e.memory.status?e.memory.status:null}),az=(0,W.eU)(function(e){var n=e(aH);if(n)return{type:"ram_alert",status:n};var t=e(aB);return t?{type:"cpu_alert",status:t}:null}),aW=(0,W.eU)(function(e){for(var n=e(aL),t=n.cpu,r=n.memory,i=0,o=["danger","warning"];i<o.length;i++){var a=o[i];if(t.status===a||r.status===a)return"danger"}return"ok"}),aG=(0,aS.mg)(aL,function(e){var n=a_((0,o1.$p)(e.memory.softLimitBytes));return{numVCpu:a_(e.cpu.numVCpu),ramTotalGB:n}},e$()),aV=(0,aS.mg)(aL,function(e){var n=e.cpu,t=n.status,r=n.recentUtilPercents,i=n.user,o=n.system,a=ak(n.utilPercent),l=ak(i.utilPercent),s=ak(o.utilPercent);return{status:t,currentPercent:a,recentUtilPercents:r,currentUserPercent:l,recentUserUtilPercents:i.recentUtilPercents,currentSystemPercent:s,recentSystemUtilPercents:o.recentUtilPercents}},e$()),aj=(0,aS.mg)(aL,function(e){var n=e.memory,t=n.status,r=n.recentUtilPercents,i=n.cache,o=n.rss,a=n.softLimitBytes,l=n.usageBytes,s=aD(a);return{status:t,currentPercent:Math.round(100*Math.min(1,Math.round(ak(aD(l)))/s)),currentRssInBytes:1024*Math.round(ak(aD(o.usageBytes)))*1024,currentCacheInBytes:1024*Math.round(ak(aD(i.usageBytes)))*1024,recentUtilPercents:r,recentRssUtilPercents:o.recentUtilPercents,recentCacheUtilPercents:i.recentUtilPercents}},e$()),aZ=(0,aS.mg)(aL,function(e){var n=e.storage;return{replUsedInMib:aD(n.usedBytes),scratchUsedInMib:aD(n.scratchUsedBytes),nixUsedInMib:aD(n.nixUsedBytes),workspaceUsedInMib:aD(n.workspaceUsedBytes)}},e$()),aq=(0,aS.mg)(aL,function(e){var n=e.cpu,t=e.memory;return{numVCpu:n.numVCpu,ramQuotaMiBs:aD(t.softLimitBytes),cpuRecentUtilPercents:n.recentUtilPercents,ramRecentUtilPercents:t.recentUtilPercents}},e$()),aK=((0,aS.mg)(aL,function(e){return e.cpu.numVCpu}),(0,aS.mg)(aL,function(e){return aD(e.memory.softLimitBytes)}),(0,aS.mg)(aL,function(e){return aD(e.storage.totalBytes)}));function a$(){return(0,aA.h)(aK)}var aJ=(0,aS.mg)(aL,function(e){return aD(e.storage.usedBytes)});function aQ(){return(0,aA.h)(aJ)}var aX=t(39999),a0=t(70548),a1=t(20185),a2=(0,eC.x)({header:[e_.wp.align.center]});function a4(){var e,n,t,r=(0,er.A)().fs,i=(0,d._)((0,h.useState)(null),2),o=i[0],a=i[1],l=(0,eB.A)(),s=(0,d._)((0,h.useState)(!1),2),c=s[0],u=s[1],f=(0,d._)((0,h.useState)(!1),2),g=f[0],v=f[1],y=(0,d._)((0,h.useState)(!0),2),b=y[0],S=y[1],Y=(e={variables:{input:{count:oQ.gw}}},n=(0,m._)({},oK,e),w.I(o$,n)),A=Y.data,x=Y.loading,C=(0,h.useId)(),k=(0,_._P)({controlName:"flag-areobotany-blues",logFlagToAnalytics:!1}),D=(0,h.useRef)(!1),E=a$(),R=aQ(),I=E>0?R/E:0,F=(0,eZ.A)(I),T=null==A||null==(t=A.currentUser)?void 0:t.id,P=(0,eZ.A)(null),L=(0,h.useCallback)(function(e){null!==E&&null!==R&&("sampling"===e&&c||(a(e),th.vF.info("disk quota exceeded modal displayed",{replid:l,userid:T,currentReportedUtilization:1024*R*1024,totalReportedReplQuota:1024*E*1024}),(0,V.u4)(V.AZ.MODAL_VIEWED,{modalName:"disk_quota_exceeded_modal",cause:"storage",unsolicited:!0})))},[c,a,R,l,E,T]);(0,h.useEffect)(function(){var e=setTimeout(function(){S(!1)},6e4);return function(){return clearTimeout(e)}},[]),(0,h.useEffect)(function(){if(!g){var e=r.onDiskQuotaExceeded(function(){1024===E?P.current=setTimeout(function(){L("filesystem_service")},3e4):L("filesystem_service")});return function(){e()}}},[r,E,g,L,P]),(0,h.useEffect)(function(){return function(){P.current&&clearTimeout(P.current)}},[P]);var U=(0,aA.h)(aU);(0,h.useEffect)(function(){var e;if(!o&&!D.current&&!g&&!c&&k&&!U)return I>.9999&&(D.current=!0,e=setTimeout(function(){D.current=!1,F.current>.9999&&L("sampling")},1e4)),function(){clearTimeout(e)}},[g,c,I,D,o,L,F,k,U]);var N=(0,h.useCallback)(function(){"sampling"===o&&u(!0),a(null)},[o]);return b?null:(0,p.Y)(ek.a,{isOpen:!!o,onRequestClose:N,children:(0,p.Y)(eG.S,{gap:24,children:(0,p.FD)(eG.S,{gap:24,children:[(0,p.FD)(eW.Y9,{css:a2.header,level:3,variant:"headerDefault",children:["Your account is out of storage ",(0,p.Y)(a1.A,{size:20})]}),(0,p.Y)(eW.EY,{children:"To free up space remove files until it's under the limit, delete other Apps, or upgrade your account storage."}),!x&&A?(0,p.Y)(av,{data:A}):(0,p.Y)(aw,{}),"filesystem_service"===o?(0,p.FD)(eG.S,{row:!0,gap:8,tag:"label",children:[(0,p.Y)(a0.S,{id:C,checked:g,onChange:v}),(0,p.Y)(eW.EY,{variant:"small",children:"Do not show this message again for this session."})]}):null,(0,p.Y)(eG.S,{children:(0,p.Y)(aX.v,{href:"/usage#storage",text:"View Usage"})})]})})})}var a5=t(47177);function a3(){var e=(0,er.A)().fs,n=(0,d._)((0,h.useState)(!1),2),t=n[0],r=n[1],i=(0,d._)((0,h.useState)(!1),2),o=i[0],a=i[1],l=(0,h.useId)();(0,h.useEffect)(function(){if(!o)return e.onDiskQuotaExceeded(function(){r(!0)})},[e,o]);var s=(0,h.useCallback)(function(){r(!1)},[r]);return(0,p.Y)(ek.a,{isOpen:t,onRequestClose:s,children:(0,p.Y)(eG.S,{gap:24,children:(0,p.FD)(eG.S,{gap:24,children:[(0,p.FD)(eW.Y9,{level:3,variant:"headerDefault",children:["Oops! This Repl's disk is full"," ",(0,p.Y)(a5.A,{color:tH.LU.accentNegativeDefault,size:20})]}),(0,p.FD)(eW.EY,{variant:"subheadDefault",children:["Please free up space by deleting some files. You can open the file tree by clicking the ",(0,p.Y)(iz.A,{})," icon on the left."]}),(0,p.Y)(eW.EY,{children:"You can check how much space you are using from the Repl Resources section under the file tree."}),(0,p.FD)(eG.S,{row:!0,gap:8,tag:"label",children:[(0,p.Y)(a0.S,{id:l,checked:o,onChange:a}),(0,p.Y)(eW.EY,{variant:"small",children:"Do not show this message again for this session."})]}),(0,p.Y)(ez.$n,{onClick:s,text:"Close"})]})})})}function a6(){var e,n,t,r,i=(t={variables:{replId:(0,eB.A)()}},r=(0,m._)({},oK,t),w.I(oJ,r)),o=i.data,a=i.loading,l=(null==o||null==(e=o.repl)?void 0:e.__typename)==="Repl"&&(null==(n=o.repl.owner)?void 0:n.__typename)==="Team";return a&&!o?null:l?(0,p.Y)(a3,{}):(0,p.Y)(a4,{})}var a8=t(3200),a7=t(63726);function a9(){var e=(0,d._)((0,h.useState)(!1),2),n=e[0],t=e[1],r=(0,et.DX)(),i=(0,et.q5)(),o=(0,er.A)().replspaceApi;return((0,h.useEffect)(function(){if(n)return o.onConfirmSendToken(function(e){e&&e(!0,!1)})},[n,o]),(0,a8.D)({insertConfigPlugin:function(){return r({pane:{type:"config",flow:"githubImport"},focusIfExists:!0})},setConfigScreenLockIsOpen:t,openFile:i}),n)?(0,p.Y)(a7.A,{reason:"Importing..."}):null}var le=t(56367),ln=t(50175);function lt(){var e=(0,g._)(["\n  fragment MarkLessonCompleteLesson on UserCourseLesson {\n    id\n    lessonSlug\n    timeCompleted\n    course {\n      id\n      courseSlug\n    }\n  }\n"]);return lt=function(){return e},e}function lr(){var e=(0,g._)(["\n  mutation MarkLessonAsComplete($input: CompleteUserCourseLessonInput!) {\n    completeUserCourseLesson(input: $input) {\n      ... on UpdatedUserCourseLesson {\n        __typename\n        userCourseLesson {\n          id\n          timeCompleted\n        }\n      }\n      ... on NotFoundError {\n        __typename\n        message\n      }\n      ... on UnauthorizedError {\n        __typename\n        message\n      }\n      ... on UserError {\n        __typename\n        message\n      }\n    }\n  }\n"]);return lr=function(){return e},e}var li={},lo=(0,v.J1)(lt()),la=(0,v.J1)(lr()),ll=t(72479);function ls(){var e=(0,g._)(["\n  fragment ReplEnvironmentHeaderCurrentUser on CurrentUser {\n    id\n    ...OrgSwitcherCurrentUser\n  }\n  ","\n"]);return ls=function(){return e},e}function lc(){var e=(0,g._)(["\n  fragment ReplEnvironmentHeaderRepl on Repl {\n    id\n    org {\n      id\n      type\n    }\n    authorizations {\n      viewPermissions {\n        isAuthorized\n      }\n      viewDeploymentConfig {\n        isAuthorized\n      }\n    }\n    owner {\n      ... on Team {\n        id\n      }\n      ... on User {\n        id\n      }\n    }\n    lesson {\n      id\n      ...MarkLessonCompleteLesson\n    }\n    ...ReplEnvironmentHeaderLeftRepl\n  }\n  ","\n  ","\n"]);return lc=function(){return e},e}function lu(){var e=(0,g._)(["\n  query ReplEnvironmentHeader($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        ...ReplEnvironmentHeaderRepl\n      }\n    }\n    currentUser {\n      id\n      ...ReplEnvironmentHeaderCurrentUser\n    }\n  }\n  ","\n  ","\n"]);return lu=function(){return e},e}var ld={},lp=(0,v.J1)(ls(),le.ks),lf=(0,v.J1)(lc(),lo,ll.c),lh=(0,v.J1)(lu(),lf,lp),lm=t(99323),lg=t(97860),lv=t(6156),lw=(0,tB.AH)([e_.wp.dragRegion,e_.wp.flex.growAndShrink(1),e_.wp.height(32)]);function ly(){return(0,p.Y)(eG.S,{css:lw})}var lb=t(97968),lS=t(11725),lY=t(16752);function lA(){var e=(0,g._)(["\n  query ProjectHeaderMenu($id: String!, $input: ProjectReplsInput!) {\n    repl(id: $id) {\n      __typename\n      ... on Repl {\n        id\n        title\n        ...CreateProjectForkRepl\n        project {\n          id\n          mainRepl {\n            id\n            title\n            ...CreateProjectForkRepl\n          }\n          repls(input: $input) {\n            items {\n              id\n              title\n              ...ReplLinkRepl\n            }\n            pageInfo {\n              hasNextPage\n              nextCursor\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return lA=function(){return e},e}var lx={},lC=(0,v.J1)(lA(),lY.T,lS.r),l_=t(21846),lk=t(10101),lD=t(50051),lE=t(3997),lR=t(25997),lI=t(84788),lF=t(17070),lT=t(49580),lP=t(21946),lL=t(99941),lU=t(97681),lN=t(18870),lO=t(80762),lM=(0,eC.x)({self:[e_.wp.display.grid,e_.wp.p(4),{gap:4,alignItems:"stretch"}],list:[e_.wp.maxHeight(640)],listItem:[lF.iF.item,e_.wp.px(8),e_.wp.height(28),{span:e_.wp.color.foregroundDefault}],listItemLabel:{flex:1},listButtonLink:[e_.wp.height(28),e_.wp.px(6),e_.wp.transition.none],currentReplIcon:[e_.wp.color.foregroundDimmer],tourWrapper:[e_.wp.p(8)]});function lB(e){var n=e.label,t=e.icon,r=(0,iB._)(e,["label","icon"]);return(0,p.FD)(lF.if,(0,e6._)((0,m._)({css:lM.listItem},r),{textValue:n,children:[(0,p.Y)(lF.PX,{css:lM.listItemLabel,children:n}),(0,p.Y)(tV.Z_,{size:16,children:t})]}))}var lH=(0,h.forwardRef)(function(e,n){var t,r,i,o,a,l,s,c,u,f,g,v,y=(0,eB.A)(),b=(0,d._)((0,h.useState)(""),2),S=b[0],Y=b[1],A=(0,lI.Os)(lR.X.id,lR.F.Forks),x=(t={variables:{id:y,input:{}},notifyOnNetworkStatusChange:!0},r=(0,m._)({},lx,t),w.I(lC,r)),C=x.refetch,_=(0,eq.A)(),k=_.showConfirm,D=_.showError,E=(0,d._)((0,lE.B)({onFork:function(){k("App forked, redirecting...")},onError:function(){D("Error creating fork - please try again")}}),2),R=E[0],I=E[1].loading;(0,l_.A)(function(){C({input:{filters:{title:{search:S}}},id:y})},[S],300);var F=(null==(i=x.data)?void 0:i.repl.__typename)==="Repl"?x.data.repl.project:null,T=(null==(o=x.previousData)?void 0:o.repl.__typename)==="Repl"?null==(a=x.previousData.repl.project)?void 0:a.repls.items:null,P=null!=(f=null==F?void 0:F.mainRepl)?f:(null==(l=x.previousData)?void 0:l.repl.__typename)==="Repl"&&null!=(u=null==(s=x.previousData.repl.project)?void 0:s.mainRepl)?u:null,L=(null==(c=x.data)?void 0:c.repl.__typename)==="Repl"?x.data.repl:null,U=(0,lk.Si)({orgId:e.org.id,projectId:e.projectId}),N=(0,lI.mR)();return(0,p.FD)("div",{css:lM.self,ref:n,children:[(0,p.FD)(lP.U,{children:[(0,p.Y)(lL.L,{"aria-label":"Search Apps in Project",placeholder:"Search by App title...",onChange:Y,isLoading:x.loading,autoFocus:!0}),(0,p.Y)(lF.qF,{isLoading:x.loading,items:null!=(v=null!=(g=null==F?void 0:F.repls.items)?g:T)?v:[],css:lM.list,children:function(e){var n;return(0,p.Y)(lB,(0,e6._)((0,m._)({icon:e.id===y?(0,p.Y)(tz.m_,{tooltip:"You are here",placement:"right",children:(0,p.Y)(lN.A,{css:lM.currentReplIcon})}):void 0,isDisabled:e.id===y,id:e.id,label:e.title},(0,o8.q1)(e)),{sessions:null!=(n=U[e.id])?n:[]}),e.id)}})]}),(0,p.Y)(o5.a,{}),(0,p.FD)(eG.S,{children:[(0,p.Y)(aX.v,(0,e6._)((0,m._)({alignment:"start"},(0,lD.gm)({org:e.org,projectId:e.projectId})),{target:"_blank",iconLeft:(0,p.Y)(iy.A,{}),text:"Project dashboard",variant:"nofill",css:lM.listButtonLink})),(0,p.FD)(lT.in,{elevated:!1,placement:"right top",trigger:(0,p.Y)(ez.$n,{alignment:"start",variant:"nofill",text:"New fork",iconLeft:I?(0,p.Y)(lO.A,{}):(0,p.Y)(em.A,{}),loading:I,css:lM.listButtonLink}),children:[L?(0,p.Y)(lT.Dr,{label:"From here (".concat(L.title,")"),isDisabled:I,onAction:function(){R({forkSource:"projectHeaderMenu",orgId:e.org.id,repl:L})}}):null,L&&P&&L.id!==P.id?(0,p.Y)(lT.Dr,{label:"From main App (".concat(P.title,")"),isDisabled:!P||I,onAction:function(){P&&R({orgId:e.org.id,repl:P,forkSource:"projectHeaderMenu"})}}):null]}),A.isActive&&N?(0,p.Y)("div",{css:lM.tourWrapper,children:(0,p.Y)(lU.p,{content:N.content,title:N.title,onDismiss:A.next,onCurrentStepChange:A.goto,currentStepIndex:lR.X.steps.findIndex(function(e){return e.id===lR.F.Forks}),totalSteps:lR.X.steps.length})}):null]})]})}),lz=t(19563),lW=t(75414),lG=t(84331),lV=(0,eC.x)({projectLinkTooltip:[e_.wp.maxWidth(400),e_.wp.flex.shrink(2)],projectLink:[e_.wp.px(6),e_.wp.noDragRegion,e_.wp.flex.growAndShrink(1)],inheritanceChevron:[e_.wp.color.outlineStrongest,{marginInline:-1}]});function lj(e){var n=e.repl,t=(0,d._)((0,h.useState)(!1),2),r=t[0],i=t[1],o=(0,lI.Os)(lR.X.id,lR.F.Welcome),a=(0,lI.Os)(lR.X.id,lR.F.Forks,{onEnter:function(){i(!0)},onExit:function(){i(!1)}});return n.project&&n.org?(0,p.FD)(p.FK,{children:[(0,p.Y)(tz.m_,{tooltip:"Project forks",css:lV.projectLinkTooltip,isOpen:!r&&void 0,children:(0,p.FD)(lW.Wv,{buttonRef:o.tourRef,label:"Project Menu",isOpen:r,onOpenChange:function(e){i(e),e&&o.isActive?o.next():!e&&a.isActive&&a.next()},noArrow:!0,placement:"bottom start",children:[(0,p.Y)(ez.$n,{iconLeft:(0,p.Y)(lz.A,{replId:n.id,replIconUrl:n.iconUrl}),text:n.project.title,variant:"nofill",css:lV.projectLink}),(0,p.Y)(lH,{org:n.org,projectId:n.project.id,ref:a.tourRef})]})}),(0,p.Y)(lG.A,{size:12,css:lV.inheritanceChevron})]}):null}var lZ=t(67018),lq=t.n(lZ);function lK(){return(0,p.Y)(eD.ui,{background:"higher",clsx:lq().root,children:(0,p.Y)(eW.EY,{children:"Planning"})})}var l$=t(51940),lJ=t(10847),lQ={backgroundDefault:"var(--background-default)",backgroundHigher:"var(--background-higher)"},lX={primary:{strongest:"var(--accent-primary-strongest)",stronger:"var(--accent-primary-stronger)",default:"var(--accent-primary-default)",dimmer:"var(--accent-primary-dimmer)",dimmest:"var(--accent-primary-dimmest)"},positive:{strongest:"var(--accent-positive-strongest)",stronger:"var(--accent-positive-stronger)",default:"var(--accent-positive-default)",dimmer:"var(--accent-positive-dimmer)",dimmest:"var(--accent-positive-dimmest)"},negative:{strongest:"var(--accent-negative-strongest)",stronger:"var(--accent-negative-stronger)",default:"var(--accent-negative-default)",dimmer:"var(--accent-negative-dimmer)",dimmest:"var(--accent-negative-dimmest)"},red:{strongest:"var(--accent-red-strongest)",stronger:"var(--accent-red-stronger)",default:"var(--accent-red-default)",dimmer:"var(--accent-red-dimmer)",dimmest:"var(--accent-red-dimmest)"},orange:{strongest:"var(--accent-orange-strongest)",stronger:"var(--accent-orange-stronger)",default:"var(--accent-orange-default)",dimmer:"var(--accent-orange-dimmer)",dimmest:"var(--accent-orange-dimmest)"},yellow:{strongest:"var(--accent-yellow-strongest)",stronger:"var(--accent-yellow-stronger)",default:"var(--accent-yellow-default)",dimmer:"var(--accent-yellow-dimmer)",dimmest:"var(--accent-yellow-dimmest)"},lime:{strongest:"var(--accent-lime-strongest)",stronger:"var(--accent-lime-stronger)",default:"var(--accent-lime-default)",dimmer:"var(--accent-lime-dimmer)",dimmest:"var(--accent-lime-dimmest)"},green:{strongest:"var(--accent-green-strongest)",stronger:"var(--accent-green-stronger)",default:"var(--accent-green-default)",dimmer:"var(--accent-green-dimmer)",dimmest:"var(--accent-green-dimmest)"},teal:{strongest:"var(--accent-teal-strongest)",stronger:"var(--accent-teal-stronger)",default:"var(--accent-teal-default)",dimmer:"var(--accent-teal-dimmer)",dimmest:"var(--accent-teal-dimmest)"},blue:{strongest:"var(--accent-blue-strongest)",stronger:"var(--accent-blue-stronger)",default:"var(--accent-blue-default)",dimmer:"var(--accent-blue-dimmer)",dimmest:"var(--accent-blue-dimmest)"},blurple:{strongest:"var(--accent-blurple-strongest)",stronger:"var(--accent-blurple-stronger)",default:"var(--accent-blurple-default)",dimmer:"var(--accent-blurple-dimmer)",dimmest:"var(--accent-blurple-dimmest)"},purple:{strongest:"var(--accent-purple-strongest)",stronger:"var(--accent-purple-stronger)",default:"var(--accent-purple-default)",dimmer:"var(--accent-purple-dimmer)",dimmest:"var(--accent-purple-dimmest)"},magenta:{strongest:"var(--accent-magenta-strongest)",stronger:"var(--accent-magenta-stronger)",default:"var(--accent-magenta-default)",dimmer:"var(--accent-magenta-dimmer)",dimmest:"var(--accent-magenta-dimmest)"},pink:{strongest:"var(--accent-pink-strongest)",stronger:"var(--accent-pink-stronger)",default:"var(--accent-pink-default)",dimmer:"var(--accent-pink-dimmer)",dimmest:"var(--accent-pink-dimmest)"},grey:{strongest:"var(--accent-grey-strongest)",stronger:"var(--accent-grey-stronger)",default:"var(--accent-grey-default)",dimmer:"var(--accent-grey-dimmer)",dimmest:"var(--accent-grey-dimmest)"},brown:{strongest:"var(--accent-brown-strongest)",stronger:"var(--accent-brown-stronger)",default:"var(--accent-brown-default)",dimmer:"var(--accent-brown-dimmer)",dimmest:"var(--accent-brown-dimmest)"},warning:{strongest:"var(--accent-orange-strongest)",stronger:"var(--accent-orange-stronger)",default:"var(--accent-orange-default)",dimmer:"var(--accent-orange-dimmer)",dimmest:"var(--accent-orange-dimmest)"},brand:{strongest:"var(--brand-accent-strongest)",stronger:"var(--brand-accent-stronger)",default:"var(--brand-accent-default)",dimmer:"var(--brand-accent-dimmer)",dimmest:"var(--brand-accent-dimmest)"}},l0=new Map,l1=new Map,l2=new Map;Object.keys(lX),Object.keys(lX[Object.keys(lX)[0]]);var l4=!0,l5=!1,l3=void 0;try{for(var l6,l8=Object.entries({borderRadius1:"--border-radius-1",borderRadius2:"--border-radius-2",borderRadius4:"--border-radius-4",borderRadius6:"--border-radius-6",borderRadius8:"--border-radius-8",borderRadius12:"--border-radius-12",borderRadius16:"--border-radius-16",borderRadiusDefault:"--border-radius-default",borderRadiusContainer:"--border-radius-container",borderRadiusRound:"--border-radius-round",space1:"--space-1",space2:"--space-2",space4:"--space-4",space6:"--space-6",space8:"--space-8",space12:"--space-12",space16:"--space-16",space24:"--space-24",space32:"--space-32",space40:"--space-40",space48:"--space-48",space56:"--space-56",space64:"--space-64",space80:"--space-80",space96:"--space-96",space128:"--space-128",space256:"--space-256",spaceDefault:"--space-default",shadow1:"--shadow-1",shadow2:"--shadow-2",shadow3:"--shadow-3",shadowDefault:"--shadow-default",fontFamilyDefault:"--font-family-default",fontFamilyCode:"--font-family-code",fontSizeSmall:"--font-size-small",fontSizeDefault:"--font-size-default",fontSizeSubheadDefault:"--font-size-subhead-default",fontSizeSubheadBig:"--font-size-subhead-big",fontSizeHeaderDefault:"--font-size-header-default",fontSizeHeaderBig:"--font-size-header-big",fontWeightRegular:"--font-weight-regular",fontWeightMedium:"--font-weight-medium",fontWeightBold:"--font-weight-bold",lineHeightSmall:"--line-height-small",lineHeightDefault:"--line-height-default",lineHeightSubheadDefault:"--line-height-subhead-default",lineHeightSubheadBig:"--line-height-subhead-big",lineHeightHeaderDefault:"--line-height-header-default",lineHeightHeaderBig:"--line-height-header-big",transitionDurationSnappy:"--transition-duration-snappy",transitionDurationChill:"--transition-duration-chill",transitionTimingFunctionSnappy:"--transition-timing-function-snappy",transitionTimingFunctionChill:"--transition-timing-function-chill",borderWidthDefault:"--border-width-default",singleLine:"--single-line",backgroundRoot:"--background-root",backgroundDefault:"--background-default",backgroundHigher:"--background-higher",backgroundHighest:"--background-highest",backgroundOverlay:"--background-overlay",foregroundDefault:"--foreground-default",foregroundDimmer:"--foreground-dimmer",foregroundDimmest:"--foreground-dimmest",outlineDimmest:"--outline-dimmest",outlineDimmer:"--outline-dimmer",outlineDefault:"--outline-default",outlineStronger:"--outline-stronger",outlineStrongest:"--outline-strongest",accentPrimaryStrongest:"--accent-primary-strongest",accentPrimaryStronger:"--accent-primary-stronger",accentPrimaryDefault:"--accent-primary-default",accentPrimaryDimmer:"--accent-primary-dimmer",accentPrimaryDimmest:"--accent-primary-dimmest",accentPositiveStrongest:"--accent-positive-strongest",accentPositiveStronger:"--accent-positive-stronger",accentPositiveDefault:"--accent-positive-default",accentPositiveDimmer:"--accent-positive-dimmer",accentPositiveDimmest:"--accent-positive-dimmest",accentNegativeStrongest:"--accent-negative-strongest",accentNegativeStronger:"--accent-negative-stronger",accentNegativeDefault:"--accent-negative-default",accentNegativeDimmer:"--accent-negative-dimmer",accentNegativeDimmest:"--accent-negative-dimmest",redStrongest:"--accent-red-strongest",redStronger:"--accent-red-stronger",redDefault:"--accent-red-default",redDimmer:"--accent-red-dimmer",redDimmest:"--accent-red-dimmest",orangeStrongest:"--accent-orange-strongest",orangeStronger:"--accent-orange-stronger",orangeDefault:"--accent-orange-default",orangeDimmer:"--accent-orange-dimmer",orangeDimmest:"--accent-orange-dimmest",yellowStrongest:"--accent-yellow-strongest",yellowStronger:"--accent-yellow-stronger",yellowDefault:"--accent-yellow-default",yellowDimmer:"--accent-yellow-dimmer",yellowDimmest:"--accent-yellow-dimmest",limeStrongest:"--accent-lime-strongest",limeStronger:"--accent-lime-stronger",limeDefault:"--accent-lime-default",limeDimmer:"--accent-lime-dimmer",limeDimmest:"--accent-lime-dimmest",greenStrongest:"--accent-green-strongest",greenStronger:"--accent-green-stronger",greenDefault:"--accent-green-default",greenDimmer:"--accent-green-dimmer",greenDimmest:"--accent-green-dimmest",tealStrongest:"--accent-teal-strongest",tealStronger:"--accent-teal-stronger",tealDefault:"--accent-teal-default",tealDimmer:"--accent-teal-dimmer",tealDimmest:"--accent-teal-dimmest",blueStrongest:"--accent-blue-strongest",blueStronger:"--accent-blue-stronger",blueDefault:"--accent-blue-default",blueDimmer:"--accent-blue-dimmer",blueDimmest:"--accent-blue-dimmest",blurpleStrongest:"--accent-blurple-strongest",blurpleStronger:"--accent-blurple-stronger",blurpleDefault:"--accent-blurple-default",blurpleDimmer:"--accent-blurple-dimmer",blurpleDimmest:"--accent-blurple-dimmest",purpleStrongest:"--accent-purple-strongest",purpleStronger:"--accent-purple-stronger",purpleDefault:"--accent-purple-default",purpleDimmer:"--accent-purple-dimmer",purpleDimmest:"--accent-purple-dimmest",magentaStrongest:"--accent-magenta-strongest",magentaStronger:"--accent-magenta-stronger",magentaDefault:"--accent-magenta-default",magentaDimmer:"--accent-magenta-dimmer",magentaDimmest:"--accent-magenta-dimmest",pinkStrongest:"--accent-pink-strongest",pinkStronger:"--accent-pink-stronger",pinkDefault:"--accent-pink-default",pinkDimmer:"--accent-pink-dimmer",pinkDimmest:"--accent-pink-dimmest",greyStrongest:"--accent-grey-strongest",greyStronger:"--accent-grey-stronger",greyDefault:"--accent-grey-default",greyDimmer:"--accent-grey-dimmer",greyDimmest:"--accent-grey-dimmest",brownStrongest:"--accent-brown-strongest",brownStronger:"--accent-brown-stronger",brownDefault:"--accent-brown-default",brownDimmer:"--accent-brown-dimmer",brownDimmest:"--accent-brown-dimmest",white:"--white",black:"--black",surfaceBackground:"--surface-background",interactiveBackground:"--interactive-background",interactiveBackgroundActive:"--interactive-background--active",interactiveBorder:"--interactive-border",interactiveBorderHover:"--interactive-border--hover",brandText:"--brand-text",brandTextSecondary:"--brand-secondary-text",brandTextLight:"--brand-text-light",brandBackground:"--brand-background",brandBackgroundDarker:"--brand-background-darker",brandBorder:"--brand-border",brandAccentStrongest:"--brand-accent-strongest",brandAccentStronger:"--brand-accent-stronger",brandAccentDefault:"--brand-accent-default",brandAccentDimmer:"--brand-accent-dimmer",brandAccentDimmest:"--brand-accent-dimmest",brandBlack:"--brand-black",fontFamilyBrand:"--font-family-brand",fontFamilyBrandVariable:"--font-family-brand-variable",fontFamilyBrandPixel:"--font-family-brand-pixel",breakpointMobileMin:"--breakpoint-mobile-min",breakpointMobileMax:"--breakpoint-mobile-max",breakpointTabletMin:"--breakpoint-tablet-min",breakpointTabletMax:"--breakpoint-tablet-max"})[Symbol.iterator]();!(l4=(l6=l8.next()).done);l4=!0){var l7=(0,d._)(l6.value,2),l9=l7[0],se=l7[1];l0.set(l9,se),l1.set(se,l9),l2.set(l9,"var(".concat(se,")"))}}catch(e){l5=!0,l3=e}finally{try{l4||null==l8.return||l8.return()}finally{if(l5)throw l3}}var sn=t(73707);function st(e){return(0,p.Y)(tV.Ay,(0,e6._)((0,m._)({},e),{children:(0,p.Y)("path",{fillRule:"evenodd",d:"M.47.47a.75.75 0 0 1 1.06 0L6.64 5.578a.742.742 0 0 1 .023.024l3.96 3.96c.056.042.105.09.147.146L23.53 22.47a.75.75 0 1 1-1.06 1.06l-6.72-6.72a.75.75 0 0 1-.704-.089 5.25 5.25 0 0 0-6.082 0 .75.75 0 0 1-.868-1.222 6.75 6.75 0 0 1 5.224-1.118l-3.408-3.408a10.19 10.19 0 0 0-4.43 2.152.75.75 0 1 1-.963-1.15 11.69 11.69 0 0 1 4.16-2.235L5.944 7.004a15.16 15.16 0 0 0-4.027 2.558.75.75 0 1 1-.994-1.124 16.66 16.66 0 0 1 3.888-2.567L.47 1.531A.75.75 0 0 1 .47.47Zm16.34 6.058a15.25 15.25 0 0 0-6.04-.73.75.75 0 0 1-.12-1.496 16.75 16.75 0 0 1 12.426 4.136.75.75 0 0 1-.992 1.124 15.25 15.25 0 0 0-5.274-3.034Zm-.764 4.203a.75.75 0 0 1 1.003-.345 11.69 11.69 0 0 1 2.436 1.592.75.75 0 0 1-.97 1.144 10.191 10.191 0 0 0-2.124-1.388.75.75 0 0 1-.345-1.003ZM11.25 20a.75.75 0 0 1 .75-.75h.01a.75.75 0 0 1 0 1.5H12a.75.75 0 0 1-.75-.75Z",clipRule:"evenodd"})}))}var sr=(0,eC.x)({metadata:[e_.wp.flex.growAndShrink(1)],iconWrapper:[e_.wp.position.relative,e_.wp.display.none,(0,nt._)({},e_.$_.min("tabletMax"),[e_.wp.display.flex])],dimIcon:[{opacity:.2}],diconnectedIcon:[e_.wp.position.absolute,{left:0,right:0,top:0,bottom:0,margin:"auto"}],title:[e_.wp.flex.shrink(1),e_.wp.truncate],placeholderTitle:[e_.wp.width(100),e_.wp.borderRadius("default"),{alignSelf:"stretch"},o4.S.foregroundPulse(lQ.backgroundDefault,lQ.backgroundHigher)]});function si(e){var n,t=e.repl,r=(0,sn.A)().didDisconnect;return(0,p.FD)(eG.S,{css:sr.metadata,row:!0,gap:6,align:"center",children:[(0,p.FD)(eG.S,{css:sr.iconWrapper,children:[(null==(n=t.project)?void 0:n.id)?null:(0,p.Y)(eG.S,{css:r&&sr.dimIcon,children:(0,p.Y)(lz.A,{replId:t.id,replIconUrl:t.iconUrl})}),r?(0,p.Y)(tz.m_,{tooltip:"Reconnecting",children:(0,p.Y)(st,{size:16,css:sr.diconnectedIcon})}):null]}),(0,p.Y)(eW.EY,{multiline:!1,css:sr.title,"data-cy":"header-repl-title",color:r?"dimmer":"default",children:t.title})]})}var so=t(973),sa=(0,eC.x)({popover:[e_.wp.maxWidth(460),e_.wp.width("100%")],button:[so.b.nofill,e_.wp.height(32),e_.wp.flex.growAndShrink(1),e_.wp.align.center,e_.wp.rowWithGap(4),e_.wp.px(6),e_.wp.borderRadius(),e_.wp.color.foregroundDefault]});function sl(e){var n=e.repl,t=e.getDesktopLayoutState,r=(0,d._)((0,h.useState)(!1),2),i=r[0],o=r[1];return(0,p.FD)(lW.Wv,{isOpen:i,onOpenChange:function(e){o(e),e&&(0,V.u4)(V.AZ.MODAL_VIEWED,{modal_name:"repl_metadata_popover"})},placement:"bottom start",label:"Repl info",noArrow:!0,css:sa.popover,children:[(0,p.Y)(eG.D.button,{dataCy:"ws-repl-info-container",css:sa.button,onClick:function(){(0,V.u4)(V.AZ.REPL_METADATA_OPENED)},children:(0,p.Y)(si,{repl:n})}),(0,p.Y)(lJ.A,{getDesktopLayoutState:t,setIsEditing:o})]})}var ss=t(13771),sc=t(56093),su=t(1867),sd=t(21640),sp=eG.D.span,sf=(0,eC.x)({triggerWrapper:[{":focus":{outline:"2px solid ".concat(tH.LU.accentPrimaryDefault),outlineOffset:"-1px",borderRadius:"4px"}}]});function sh(e){var n=e.label,t=e.children,r=(0,d._)(t,2),i=r[0],o=r[1],a=(0,d._)((0,h.useState)(!1),2),l=a[0],s=a[1],c=(0,d._)((0,h.useState)(!1),2),u=c[0],f=c[1],m=(0,h.useRef)(!1);return(0,h.useEffect)(function(){u&&(m.current=!0);var e=setTimeout(function(){s(u)},200);return function(){clearTimeout(e)}},[u]),(0,p.FD)(lW.Wv,{label:n,isOpen:l,onOpenChange:function(){return s(!l)},placement:"right",offset:16,children:[(0,p.Y)(sp,{onMouseEnter:function(){return f(!0)},onMouseLeave:function(){return f(!1)},onClick:function(){return s(!0)},onKeyDown:function(e){"Enter"===e.key&&s(!0)},tabIndex:0,css:sf.triggerWrapper,children:i}),(0,p.Y)(sp,{onMouseEnter:function(){return f(!0)},onMouseLeave:function(){return f(!1)},children:o})]})}var sm=t(69258);function sg(e){return e>o0.O8?"".concat((0,o1.$p)(e).toLocaleString(void 0,{maximumFractionDigits:1})," GiB"):"".concat(Math.round((0,o1.lX)(e)).toLocaleString()," MiB")}sd.t1.register(sd.No,sd.dN);var sv=(0,eC.x)({sectionPadding:[e_.wp.py(4),e_.wp.px(12)],rowSpacing:[e_.wp.rowWithGap(8),e_.wp.justify.spaceBetween,e_.wp.align.center]}),sw=(0,eC.x)({wrapper:[e_.wp.borderRadius(4),e_.wp.border({color:tH.LU.outlineDimmer}),e_.wp.overflow("hidden")],rowSection:[sv.sectionPadding,sv.rowSpacing],hoverRowSection:[sv.sectionPadding,sv.rowSpacing,{":hover":{backgroundColor:tH.LU.backgroundHigher}}],hoverColumnSection:[sv.sectionPadding,e_.wp.colWithGap(8),{":hover":{backgroundColor:tH.LU.backgroundHigher}}],sectionHeading:[e_.wp.fontWeight.bold],alignedRow:[e_.wp.rowWithGap(8),e_.wp.align.center],alignedSpaceBetweenRow:[sv.rowSpacing],detailContent:[e_.wp.width(260)],detailSectionsWrapper:[e_.wp.borderRadius(4),e_.wp.border({color:tH.LU.outlineDimmer}),e_.wp.overflow("hidden")],warningText:[e_.wp.color.orangeStronger],dangerText:[e_.wp.color.redStronger],chartWrapper:[e_.wp.width(22),e_.wp.height(18),e_.wp.borderRadius(2)],indentAgain:[e_.wp.pl(24)]});function sy(){var e=(0,aA.h)(aG);return(0,p.FD)(eG.S,{css:sw.wrapper,children:[(0,p.FD)(eG.S,{css:sw.rowSection,children:[(0,p.Y)(eW.EY,{css:sw.sectionHeading,children:"Compute"}),(0,p.Y)(eG.S,{css:sw.alignedRow,children:(0,p.FD)(eW.EY,{color:"dimmer",children:[e.numVCpu," vCPU, ",e.ramTotalGB," GiB RAM"]})})]}),(0,p.Y)(o5.a,{}),(0,p.Y)(sb,{}),(0,p.Y)(sS,{})]})}function sb(){var e=(0,aA.h)(aV);return(0,p.Y)(sY,{title:"CPU",displayValue:"".concat(e.currentPercent,"%"),recentPercents:e.recentUtilPercents,status:e.status,detailText:"The amount of processing power this Repl is using.",detailRows:[{title:"User",displayValue:"".concat(e.currentUserPercent,"%"),recentPercents:e.recentUserUtilPercents},{title:"System",displayValue:"".concat(e.currentSystemPercent,"%"),recentPercents:e.recentSystemUtilPercents}]})}function sS(){var e=(0,aA.h)(aj);return(0,p.Y)(sY,{title:"RAM",displayValue:"".concat(e.currentPercent,"%"),recentPercents:e.recentUtilPercents,status:e.status,detailText:"The memory this Repl is using.",detailRows:[{title:"Active",displayValue:sg(e.currentRssInBytes),recentPercents:e.recentRssUtilPercents},{title:"Cache",displayValue:sg(e.currentCacheInBytes),recentPercents:e.recentCacheUtilPercents}]})}function sY(e){var n=e.title,t=e.displayValue,r=e.status,i=e.recentPercents,o=e.detailText,a=e.detailRows;return(0,p.FD)(sh,{label:"Compute details",children:[(0,p.FD)(eG.S,{css:sw.hoverRowSection,children:[(0,p.FD)(eG.S,{css:sw.alignedRow,children:[(0,p.Y)(eW.EY,{children:n}),(0,p.Y)(sA,{status:r})]}),(0,p.FD)(eG.S,{css:sw.alignedRow,children:[(0,p.Y)(eW.EY,{color:"dimmer",children:t}),(0,p.Y)(eG.S,{css:sw.chartWrapper,children:(0,p.Y)(sx,{data:i,colorAreaUnderLine:!0})})]})]}),(0,p.FD)(eG.S,{css:sw.detailContent,p:8,gap:8,children:[(0,p.Y)(eW.EY,{children:o}),(0,p.Y)(eG.S,{css:sw.detailSectionsWrapper,children:a.map(function(e,n){return(0,p.FD)(eG.S,{css:sw.rowSection,children:[(0,p.Y)(eW.EY,{children:e.title}),(0,p.FD)(eG.S,{css:sw.alignedRow,children:[(0,p.Y)(eW.EY,{color:"dimmer",children:e.displayValue}),(0,p.Y)(eG.S,{css:sw.chartWrapper,children:(0,p.Y)(sx,{data:e.recentPercents,colorAreaUnderLine:!0})})]})]},n)})})]})]})}function sA(e){var n=e.status;return"warning"===n?(0,p.FD)(p.FK,{children:[(0,p.Y)(sm.A,{color:tH.LU.orangeStronger}),(0,p.Y)(eW.EY,{css:sw.warningText,children:"Near limit"})]}):"danger"===n?(0,p.FD)(p.FK,{children:[(0,p.Y)(sm.A,{color:tH.LU.redStronger}),(0,p.Y)(eW.EY,{css:sw.dangerText,children:"At limit"})]}):null}function sx(e){var n=e.data,t=e.colorAreaUnderLine,r=void 0!==t&&t,i=e.showHorizontalGridLines,o=(0,tv.D)().values,a=n.map(function(e,n){return{x:-n,y:e}}),l=aE-.05,s=aR-.02;return(0,p.Y)(su.N1,{updateMode:"none",options:{clip:4,animation:!1,maintainAspectRatio:!1,events:[],elements:{point:{radius:0},line:{tension:.3,borderWidth:1}},scales:{x:{display:!1,type:"linear",grid:{display:!1},min:0,max:-(n.length-1)},y:{display:void 0!==i&&i,min:0,max:100,ticks:{display:!1,stepSize:10},afterBuildTicks:function(e){var n=[10,50,90];e.ticks=e.ticks.filter(function(e){return n.includes(e.value)})},grid:{color:function(e){return e.tick.value>100*l?o.global.orangeDimmer:o.global.outlineDimmest},drawTicks:!1},border:{dash:[2,2],display:!1}}}},data:{datasets:[{data:a,fill:{target:"origin"},borderColor:function(e){var n=e.chart,t=n.ctx,r=n.chartArea;if(r){var i=t.createLinearGradient(0,r.bottom,0,r.top),a=o.global.blueDefault,c=o.global.orangeDefault,u=o.global.redDefault;return i.addColorStop(0,a),i.addColorStop(l-.08,a),i.addColorStop(l+.08,c),i.addColorStop(s-.08,c),i.addColorStop(s,u),i}},backgroundColor:function(e){if(!r)return"transparent";var t=e.chart,i=t.ctx,c=t.chartArea;if(c){var u=i.createLinearGradient(c.left,0,c.right,0),d=sC(o.global.blueDimmest),p=sC(o.global.orangeDimmest),f=sC(o.global.redDimmest);return a.forEach(function(e,t){if(u){var r=1-t/(n.length-1);e.y<100*l?u.addColorStop(r,d):e.y<100*s?u.addColorStop(r,p):u.addColorStop(r,f)}}),u}}}]}})}function sC(e){var n,t,r=(n=(n=e).replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(e,n,t,r){return n+n+t+t+r+r}),(t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n))?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null);if(!r)return e;var i=r.r,o=r.g,a=r.b;return"rgba(".concat(i,", ").concat(o,", ").concat(a,", ",.5,")")}function s_(e){var n=e.alertDialogType,t=e.onRequestUpgrade,r=(0,aA.h)(aq);if(!r)return null;var i="cpu_alert"===n?r.cpuRecentUtilPercents:r.ramRecentUtilPercents,o="cpu_alert"===n?"CPU":"RAM",a="You have been near the ".concat("cpu_alert"===n?"".concat(r.numVCpu," vCPU"):"".concat((0,o1.$p)(1024*r.ramQuotaMiBs*1024)," GiB RAM")," limit of the free plan ").concat(aF," or more times in the past ").concat(20," seconds. More ").concat("cpu_alert"===n?"vCPUs":"RAM"," would improve performance and limit disruptions.");return(0,p.FD)(eG.S,{p:8,gap:8,children:[(0,p.Y)(sm.A,{color:tH.LU.orangeStrongest}),(0,p.FD)(eW.EY,{variant:"subheadDefault",multiline:!1,children:["High ",o," usage"]}),(0,p.Y)(eW.EY,{color:"dimmer",children:a}),(0,p.Y)(eG.S,{css:sk.chartWrapper,children:(0,p.Y)(sx,{data:i,showHorizontalGridLines:!0})}),(0,p.Y)(ez.$n,{size:"big",colorway:"warning",text:"Increase ".concat(o," limit"),onClick:function(){(0,V.u4)(V.AZ.UPGRADE_SELECTED,{source:"compute_alert_dialog"}),t()}})]})}var sk=(0,eC.x)({chartWrapper:[e_.wp.height(67),e_.wp.backgroundColor.backgroundRoot,e_.wp.borderRadius(12),e_.wp.py(12),e_.wp.px(16)]});function sD(){var e=(0,g._)(["\n  query ReplResourcesCurrentUser {\n    currentUser {\n      __typename\n      ... on CurrentUser {\n        id\n        userSubscriptionType\n        userSubscription {\n          isTrial\n        }\n        paymentMethod {\n          __typename\n          ... on PaymentMethod {\n            id\n            last4\n          }\n        }\n      }\n    }\n  }\n"]);return sD=function(){return e},e}function sE(){var e=(0,g._)(["\n  query ReplResourcesReplInfo($replId: String!) {\n    repl(id: $replId) {\n      __typename\n      ... on Repl {\n        id\n        org {\n          __typename\n          id\n          type\n        }\n        owner {\n          __typename\n          ... on Team {\n            id\n          }\n          ... on User {\n            id\n          }\n        }\n        authorizations {\n          editResources {\n            isAuthorized\n            code\n            message\n          }\n        }\n      }\n    }\n  }\n"]);return sE=function(){return e},e}var sR={},sI=(0,v.J1)(sD()),sF=(0,v.J1)(sE()),sT=t(73912),sP=function(){var e=(0,sc.A)(),n=e.showResourcesUpsell,t=e.refetch,r=(0,d._)((0,h.useState)(!1),2),i=r[0],o=r[1];return n?(0,p.FD)(p.FK,{children:[(0,p.Y)(tz.m_,{tooltip:sL,children:(0,p.Y)(sT.a,{css:sU.pill,text:"CPU/RAM Limited",onClick:function(){return o(!0)}})}),(0,p.Y)(ss.A,{isOpen:i,onClose:function(){return o(!1)},type:"purchase",onPurchaseComplete:function(){return t()},reloadPageAfterPurchaseComplete:!0,contextualUpsell:(0,p.FD)(p.FK,{children:[(0,p.Y)(eW.EY,{variant:"subheadBig",children:"Upgrade for a faster Workspace"}),(0,p.FD)(eW.EY,{multiline:!0,children:["Unlock 4 vCPU, 8 GiB RAM, and ",(0,o1.$p)(o0.RB)," ","GiB of storage"]})]}),analyticsContext:{upgrade:{context:"repl_resources"}},highlightUpsell:"resources"})]}):null},sL="Your development resources are limited. Upgrade for more speed, storage, better AI, and more.",sU=(0,eC.x)({pill:[e_.wp.cursor.pointer]});function sN(){var e=(0,g._)(["\n  query ReplResourcesCurrentUserStorageUsage {\n    currentUser {\n      id\n      userSubscriptionType\n      storageInfo {\n        accountStorageUtilization {\n          ... on AccountStorageUtilization {\n            total\n          }\n        }\n      }\n    }\n  }\n"]);return sN=function(){return e},e}var sO={},sM=(0,v.J1)(sN()),sB=t(76607),sH=t(11721);function sz(e){return e>o0.O8?"".concat((0,o1.$p)(e).toLocaleString(void 0,{maximumFractionDigits:1})," GiB"):"".concat(Math.round((0,o1.lX)(e)).toLocaleString()," MiB")}function sW(e,n){return 0===n||0===e?0:Math.round(e/n*100)}function sG(e){var n,t,r,i=e.isTeamRepl,o=e.isReplOwner,a=aQ(),l=a$(),s=(n=(0,m._)({},sO,void 0),w.I(sM,n)),c=s.data,u=s.refetch,d=(null==c||null==(t=c.currentUser)?void 0:t.storageInfo.accountStorageUtilization.__typename)==="AccountStorageUtilization"?Number(c.currentUser.storageInfo.accountStorageUtilization.total):0,f=(null==c||null==(r=c.currentUser)?void 0:r.userSubscriptionType)===rQ.Oh.HackerPro?o0.RB:o0.CN,g=(0,h.useMemo)(function(){return(0,sB.A)(function(){return u()},{wait:12e4,maxWait:3e5})},[u]);return(0,h.useEffect)(function(){var e,n=!1,t=null,r=(e=(0,H._)(function(){return(0,z.YH)(this,function(e){switch(e.label){case 0:if(n)return[2];return[4,g()];case 1:return e.sent(),t=setTimeout(r,3e5),[2]}})}),function(){return e.apply(this,arguments)});return r(),function(){n=!0,t&&clearTimeout(t),g.isScheduled()&&g.flush()}},[g,a,l,u]),(0,p.FD)(eG.S,{css:sw.wrapper,children:[(0,p.FD)(eG.S,{css:sw.rowSection,children:[(0,p.Y)(eW.EY,{css:sw.sectionHeading,children:"Storage"}),o?(0,p.Y)(eG.S,{css:sw.alignedRow,children:(0,p.Y)(eW.EY,{color:"dimmer",children:sz(d)})}):null]}),(0,p.Y)(o5.a,{}),o?(0,p.Y)(sV,{accountUsedInBytes:d,accountQuotaInBytes:f}):(0,p.Y)(sj,{isReplOwner:o,isTeamRepl:i})]})}function sV(e){var n=e.accountUsedInBytes,t=e.accountQuotaInBytes,r=(0,d._)((0,h.useState)(!1),2),i=r[0],o=r[1],a=sW(n,t),l=(0,aA.h)(aZ),s=l.replUsedInMib,c=l.scratchUsedInMib,u=l.nixUsedInMib,f=l.workspaceUsedInMib,m=[{title:"Total",usageDisplayText:"".concat(sz(n)),percentOfUsage:null},{title:"This Repl",usageDisplayText:"".concat(sz(1024*s*1024)),percentOfUsage:sW(1024*s*1024,n)},{title:"Workspace",usageDisplayText:"".concat(sz(1024*f*1024)),percentOfUsage:null,indentAgain:!0},{title:"Nix packages",usageDisplayText:"".concat(sz(1024*u*1024)),percentOfUsage:null,indentAgain:!0,nix:!0},{title:"Scratch disk",usageDisplayText:"".concat(sz(1024*c*1024)),percentOfUsage:sW(1024*c*1024,n)}];return(0,p.FD)(p.FK,{children:[(0,p.FD)(sh,{label:"Storage details",children:[(0,p.FD)(eG.S,{css:sw.hoverColumnSection,children:[(0,p.FD)(eG.S,{css:sw.alignedSpaceBetweenRow,children:[(0,p.FD)(eW.EY,{children:[sz(t)," included"]}),(0,p.FD)(eG.S,{css:sw.alignedRow,children:[(0,p.FD)(eW.EY,{color:"dimmer",multiline:!1,children:[Math.min(a,100),"%"]}),(0,p.Y)(sK,{percentage:a})]})]}),n>t?(0,p.FD)(eG.S,{css:sw.alignedSpaceBetweenRow,children:[(0,p.Y)(eW.EY,{children:"Additional usage"}),(0,p.Y)(eW.EY,{color:"dimmer",children:sz(n-t)})]}):null]}),(0,p.FD)(eG.S,{css:sw.detailContent,children:[(0,p.Y)(eW.EY,{children:"Your account storage usage."}),(0,p.Y)(eG.S,{css:sw.detailSectionsWrapper,children:m.map(function(e,n){return(0,p.FD)(eG.S,{css:sw.rowSection,children:[(0,p.FD)(eG.S,{css:sw.alignedRow,children:[n>0?(0,p.Y)(eG.S,{css:e.indentAgain&&sw.indentAgain,children:(0,p.Y)(sH.A,{color:tH.LU.outlineDefault,size:16})}):null,(0,p.Y)(eW.EY,{children:e.title})]}),e.nix?(0,p.Y)(eG.S,{css:sw.alignedRow,children:(0,p.Y)(t7.K0,{onClick:function(){return o(!0)},alt:"Delete Nix packages",disabled:u<1,children:(0,p.Y)(rE.A,{})})}):null,(0,p.FD)(eG.S,{css:sw.alignedRow,children:[(0,p.Y)(eW.EY,{color:"dimmer",children:e.usageDisplayText}),null===e.percentOfUsage?null:(0,p.FD)(eW.EY,{color:"dimmer",children:["(",e.percentOfUsage,"%)"]})]})]},n)})})]})]}),(0,p.Y)(s$,{isOpen:i,onClose:function(){return o(!1)}})]})}function sj(e){var n=e.isReplOwner,t=e.isTeamRepl,r=aQ(),i=a$(),o=1024*r*1024,a=sW(o,1024*i*1024);return(0,p.FD)(eG.S,{css:sw.rowSection,children:[(0,p.FD)(eG.S,{css:sw.alignedRow,children:[n?(0,p.Y)(sH.A,{color:tH.LU.outlineDefault,size:16}):null,(0,p.Y)(eW.EY,{children:"This Repl"})]}),(0,p.FD)(eW.EY,{color:"dimmer",children:[sz(o)," ",t?"(".concat(a,"% of total)"):null]})]})}var sZ=(0,eC.x)({bar:[e_.wp.width(1.5),e_.wp.height(7),e_.wp.borderRadius(1)]}),sq=(0,eC.x)({dimBar:[sZ.bar,e_.wp.backgroundColor.greyDimmest],blueBar:[sZ.bar,e_.wp.backgroundColor.blueStronger],yellowBar:[sZ.bar,e_.wp.backgroundColor.yellowStronger],redBar:[sZ.bar,e_.wp.backgroundColor.redStronger]});function sK(e){var n=e.percentage,t=Math.round(n/10),r=(0,B._)(Array(7).fill(sq.blueBar)).concat((0,B._)([,,].fill(sq.yellowBar)),[sq.redBar]);return(0,p.Y)(eG.S,{row:!0,gap:1,children:r.map(function(e,i){var o=n>100?sq.blueBar:r[i];return(0,p.Y)(eG.S,{css:i<t?o:sq.dimBar},i)})})}var s$=function(e){var n=e.onClose,t=e.isOpen,r=(0,er.A)().container;return(0,p.Y)(ek.a,{isOpen:t,onRequestClose:n,children:(0,p.Y)(rM.A,{name:"Nix Packages",description:"this Repl's Nix packages",confirmDescription:"Nix packages",hideModal:n,delete:function(){n();var e=r.openChannel({service:"file",skip:function(e){return!e.repl.authorizations.editFileContents.isAuthorized}},function(n){return n.channel.request({resetNixFilesystem:{}}).then(function(n){n.ok&&e()}),function(){}})}})})},sJ=t(11882),sQ=t(4983),sX=(0,eC.x)({trialButton:[e_.wp.borderRadius(4)],loadingStateWrapper:[e_.wp.center,e_.wp.p(16)]});function s0(e){var n,t,r,i,o,a,l,s,c,u,d,f,h,g,v,y,b,S,Y=e.onRequestUpgrade,A=(o=(0,m._)({},sR,void 0),w.I(sI,o)),x=A.data,C=A.loading,_=(a={variables:{replId:(0,eB.A)()}},l=(0,m._)({},sR,a),w.I(sF,l)),k=_.data,D=_.loading,E=(null==k?void 0:k.repl.__typename)==="Repl"?k.repl:null,R=(null==E||null==(s=E.org)?void 0:s.id)!==void 0&&(null==E||null==(c=E.org)?void 0:c.type)==="team",I=(null==E||null==(u=E.owner)?void 0:u.__typename)==="Team"||R,F=(null==E||null==(d=E.owner)?void 0:d.id)===(null==x||null==(f=x.currentUser)?void 0:f.id),T=null==x||null==(h=x.currentUser)?void 0:h.userSubscriptionType,P=(null==x||null==(v=x.currentUser)||null==(g=v.paymentMethod)?void 0:g.__typename)==="PaymentMethod"&&null!==x.currentUser.paymentMethod.id,L=null==x||null==(b=x.currentUser)||null==(y=b.userSubscription)?void 0:y.isTrial,U=F&&("HACKER_PRO"!==T||L&&!P)&&!R,N=(0,sc.A)().showResourcesUpsell,O=null==E||null==(S=E.authorizations)?void 0:S.editResources,M=(0,aA.h)(aU);return C||D||M||!O?(0,p.Y)(eG.S,{css:sX.loadingStateWrapper,children:(0,p.Y)(lO.A,{})}):(0,p.FD)(eG.S,{p:8,gap:8,children:[(0,p.FD)(eG.S,{gap:4,children:[(0,p.FD)(eG.S,{row:!0,gap:8,children:[(0,p.Y)(eW.EY,{variant:"subheadDefault",children:"Resources"}),(0,p.Y)(s1,{resourceTier:(t=(n={isTeamRepl:I,isReplOwner:F,plan:T}).isTeamRepl,r=n.isReplOwner,i=n.plan,t?"team":r&&"HACKER_PRO"===i?"member":r&&null===i?"free":"hidden"),isOnTrial:L,showResourcesUpsell:N})]}),(0,p.Y)(eW.EY,{color:"dimmest",children:"Resources for cloud development environment"})]}),(0,p.Y)(sy,{}),R?null:(0,p.Y)(sG,{isTeamRepl:I,isReplOwner:F}),U?(0,p.FD)(eG.S,{gap:8,children:[(0,p.Y)(ez.$n,{colorway:"blurple",iconLeft:(0,p.Y)(sQ.A,{}),text:"Join Replit ".concat(oX.en),onClick:function(){return Y()},css:sX.trialButton}),(0,p.FD)(eW.EY,{css:e_.wp.textAlign.center,color:"dimmer",variant:"small",children:["Get 4 vCPU, 8 GiB RAM, and ",(0,o1.$p)(o0.RB)," GiB Storage"]})]}):null]})}function s1(e){var n=e.resourceTier,t=e.isOnTrial,r=e.showResourcesUpsell;switch(n){case"free":return r?(0,p.Y)(sP,{}):(0,p.Y)(sJ.a,{text:"Free",colorway:"grey"});case"member":if(t)return(0,p.Y)(sJ.a,{text:"".concat(oX.en," Trial"),colorway:"blue"});return(0,p.Y)(sJ.a,{text:"".concat(oX.en),colorway:"purple"});case"team":return(0,p.Y)(sJ.a,{text:"Team",colorway:"green"});default:return null}}var s2=t(41106),s4=t(8789);function s5(e){var n,t,r,i,o,a,l,s,c,u,m,g,v,w,y,b,S,Y,A,x,C=e.repl,_=e.currentUser,k=(0,d._)((0,h.useState)(!1),2),D=k[0],E=k[1],R=(0,d._)((0,h.useState)("resources"),2),I=R[0],F=R[1],T=(0,sc.A)(),P=T.showResourcesUpsell,L=T.refetch,N=(0,d._)((0,h.useState)(!1),2),O=N[0],M=N[1],B=(r=(n={repl:C,currentUser:_,onAlert:function(e){F(e),E(!0)}}).repl,i=n.currentUser,o=n.onAlert,a=(0,aA.AI)(az),l=(0,f.useRouter)(),s=(0,er.A)().runner,u=(c=(0,d._)((0,h.useState)(!1),2))[0],m=c[1],g=(null==(t=r.owner)?void 0:t.__typename)==="User"&&r.owner.id===(null==i?void 0:i.id),v=null==i?void 0:i.userSubscriptionType,y=(w=(0,s2.A)("announcement","resources-upgrade-modal")).shouldDisplay,b=w.register,S=w.dismiss,(0,h.useEffect)(function(){!(0,U.Po)(l)&&g&&null===v&&b()},[g,b,l,v]),A=(Y=(0,d._)((0,h.useState)(!0),2))[0],x=Y[1],(0,h.useEffect)(function(){var e=setTimeout(function(){x(!1)},6e4);return function(){return clearTimeout(e)}},[]),(0,h.useEffect)(function(){if(s&&!u)return s.onStateChanged(function(e){e===ip.ll.RUNNING&&(u||m(!0))})},[s,u]),(0,h.useEffect)(function(){if(!(A||(0,U.Po)(l))&&y&&u)return a.subscribe(function(e){e&&o(e.type)})},[a,b,A,g,o,l,y,v,u]),{dismissAlert:S}).dismissAlert,H=function(){B(),E(!1),F("resources")};return(0,p.FD)(p.FK,{children:[(0,p.FD)(lW.Wv,{isOpen:D,onOpenChange:function(e){E(e),e&&(0,V.u4)(V.AZ.REPL_RESOURCES_OPENED),e||"cpu_alert"!==I&&"ram_alert"!==I||H()},placement:"bottom start",label:"Repl resources",noArrow:!0,css:s6.popover,children:[(0,p.Y)(t7.K0,{"aria-label":"Repl resources",alt:"Repl resources","aria-expanded":D,dataCy:"repl-resources-button",css:s6.button,children:(0,p.FD)(eG.S,{css:s6.buttonWrapper,children:[(0,p.Y)(s4.A,{size:16}),(0,p.Y)(s3,{})]})}),(0,p.FD)(eG.S,{css:{overflow:"auto",maxHeight:"80vh"},children:["resources"===I?(0,p.Y)(s0,{onRequestUpgrade:function(){return M(!0)}}):null,"cpu_alert"===I||"ram_alert"===I?(0,p.FD)(eG.S,{css:s6.alertDialogWrapper,children:[(0,p.Y)(t7.K0,{onClick:H,alt:"Close",css:s6.alertDialogCloseButton,children:(0,p.Y)(iH.A,{})}),(0,p.Y)(s_,{alertDialogType:I,onRequestUpgrade:function(){return M(!0)}})]}):null]})]}),(0,p.Y)(ss.A,{isOpen:O,onClose:function(){return M(!1)},onPurchaseComplete:function(){return L()},reloadPageAfterPurchaseComplete:!0,type:"purchase",contextualUpsell:P?(0,p.FD)(p.FK,{children:[(0,p.Y)(eW.EY,{variant:"subheadBig",children:"Upgrade for a faster Workspace"}),(0,p.FD)(eW.EY,{multiline:!0,children:["Unlock 4 vCPU, 8 GiB RAM, and"," ",(0,o1.$p)(o0.RB)," GiB of storage"]})]}):void 0,analyticsContext:{upgrade:{context:"repl_resources"}},highlightUpsell:"resources"})]})}function s3(){var e=(0,aA.h)(aW);return"ok"===e?null:(0,p.FD)(p.FK,{children:[(0,p.Y)(eG.S,{css:cn.base}),(0,p.Y)(eG.S,{css:"warning"===e?cn.warningColors:cn.dangerColors})]})}var s6=(0,eC.x)({popover:[e_.wp.width(360)],buttonWrapper:[e_.wp.position.relative],button:[e_.wp.height(32),e_.wp.width(32),e_.wp.borderRadius()],alertDialogWrapper:[e_.wp.position.relative],alertDialogCloseButton:[e_.wp.position.absolute,e_.wp.top(8),e_.wp.right(8),e_.wp.zIndex(1)]}),s8=function(e){return"\n0% {\n  transform: scale(0.95);\n  box-shadow: 0 0 0 0 ".concat(e,";\n}\n\n70% {\n  transform: scale(1);\n  box-shadow: 0 0 0 6px transparent;\n}\n\n100% {\n  transform: scale(0.95);\n  box-shadow: 0 0 0 0 transparent;\n}\n")},s7=(0,tB.i7)(s8(tH.LU.orangeDefault)),s9=(0,tB.i7)(s8(tH.LU.redDefault)),ce={position:"absolute",width:8,height:8,borderRadius:"50%",top:-4,right:-4,outline:"2px solid "+tH.LU.backgroundRoot,borderStyle:"solid"},cn=(0,eC.x)({base:[ce,{backgroundColor:tH.LU.backgroundRoot}],warningColors:[ce,{backgroundColor:tH.LU.orangeStronger,animation:"".concat(s7," 2s infinite"),outlineColor:"transparent"}],dangerColors:[ce,{backgroundColor:tH.LU.redStronger,animation:"".concat(s9," 2s infinite"),outlineColor:"transparent"}]}),ct=(0,eC.x)({replInfo:[e_.wp.flex.shrink(1),e_.wp.maxWidth(530),{"& > span":[e_.wp.viewStyle,e_.wp.flex.shrink(1)]}]});function cr(e){var n,t=e.repl,r=e.currentUser,i=e.isAgentOnboarding,o=e.isAgentPlanning,a=(0,et.vs)(),l=(0,et.Bm)(),s=(0,lg.W)();return(0,p.FD)(eG.S,{row:!0,gap:4,align:"center",justify:"start",css:e_.wp.noDragRegion,children:[(0,p.Y)(lb.A,{}),(0,p.Y)(l$.C,{org:null!=(n=t.org)?n:void 0}),(0,p.Y)(lj,{repl:t}),(0,p.Y)(eG.S,{row:!0,align:"center",justify:"start",children:i||o?(0,p.Y)(ci,{repl:t}):(0,p.FD)(eG.S,{row:!0,gap:4,children:[(0,p.Y)(eG.S,{row:!0,align:"center",css:ct.replInfo,children:(0,p.Y)(sl,{repl:t,getDesktopLayoutState:a})}),"visualPlanner"===s&&"centeredVisualPlanner"===l?(0,p.Y)(lK,{}):(0,p.Y)(s5,{repl:t,currentUser:r})]})}),(0,p.Y)(ly,{})]})}function ci(e){var n=e.repl;return(0,p.Y)(eG.S,{px:12,children:(0,p.Y)(eW.EY,{children:n.title})})}var co=t(66366),ca=t(78266),cl=t(42893),cs=t.n(cl),cc=t(54609),cu=t.n(cc),cd=[{id:"planning",title:"Initial planning",time:"(~1 min.)",icon:(0,p.Y)(co.A,{size:12})},{id:"design",title:"Design mockup",time:"(~2 min.)",icon:(0,p.Y)(ic.A,{size:12})},{id:"review",title:"Plan approval",icon:(0,p.Y)(ca.A,{size:12})},{id:"build",title:"Interactive prototype",time:"(~10 min.)",icon:(0,p.Y)(eg.A,{size:12})}];function cp(e){var n=e.activeStepId;return(0,p.FD)(eG.S,{children:[(0,p.Y)(eW.EY,{clsx:cs().timelineTitle,children:"Timeline"}),(0,p.Y)(eG.S,{clsx:cs().timelineItems,children:cd.map(function(e,t){var r;return(0,p.FD)(eG.S,{clsx:cs().timelineItem,children:[(0,p.Y)(eG.S,{clsx:[cs().timelineItemIcon,(r={},(0,nt._)(r,cu().timelineItemIconComplete,t<cd.findIndex(function(e){return e.id===n})),(0,nt._)(r,cu().timelineItemIconActive,e.id===n),r)],children:e.icon}),(0,p.Y)(eG.S,{clsx:cs().timelineItemContent,children:(0,p.FD)(eG.S,{clsx:cs().text,children:[(0,p.Y)(eW.EY,{children:e.title}),e.time?(0,p.Y)(eW.EY,{color:"dimmer",children:e.time}):null]})})]},t)})})]})}function cf(){var e=(0,I.Ik)(),n=(0,d._)((0,h.useState)(!1),2),t=n[0],r=n[1];return(0,p.FD)(lW.Wv,{isOpen:t,onOpenChange:r,label:"Planning Timeline",children:[(0,p.Y)(ez.$n,{text:"Planning",iconLeft:function(){switch(e){case"approved":return(0,p.Y)(lN.A,{color:"success"});case"generating":return(0,p.Y)(lO.A,{});case"awaiting-approval":return(0,p.Y)(co.A,{});default:return}}(),iconRight:(0,p.Y)(as.A,{})}),(0,p.Y)(eG.S,{p:8,children:(0,p.Y)(cp,{activeStepId:function(){switch(e){case"approved":return"build";case"generating":return"design";case"awaiting-approval":return"review";default:return"planning"}}()})})]})}var ch=t(49153),cm=t(85134),cg=t(15012),cv=t(88800),cw=t(57727),cy=t(60236);function cb(){var e=(0,g._)(["\n  fragment ReplMultiplayerOrg on Org {\n    ...OrgMetadata\n    membersCount\n  }\n  ","\n"]);return cb=function(){return e},e}function cS(){var e=(0,g._)(["\n  fragment ReplMultiplayerOrgGroup on OrgGroup {\n    ...OrgGroupsOrgGroup\n  }\n  ","\n"]);return cS=function(){return e},e}function cY(){var e=(0,g._)(["\n  fragment ReplMultiplayerGroup on ReplMultiplayerGroupScope {\n    group {\n      __typename\n      ...ReplMultiplayerOrgGroup\n    }\n    options {\n      __typename\n      role\n      status\n    }\n  }\n  ","\n"]);return cY=function(){return e},e}function cA(){var e=(0,g._)(["\n  fragment ReplMultiplayerIndividual on ReplMultiplayerIndividualScope {\n    group {\n      __typename\n      ...ReplMultiplayerOrgGroup\n    }\n    user {\n      __typename\n      id\n      displayName\n      image\n      username\n    }\n    options {\n      __typename\n      role\n      status\n    }\n  }\n  ","\n"]);return cA=function(){return e},e}function cx(){var e=(0,g._)(["\n  fragment ReplMultiplayerStatus on Repl {\n    id\n    title\n    isPrivate\n    url\n    org {\n      ...ReplMultiplayerOrg\n    }\n    multiplayerStatus {\n      __typename\n      groups {\n        __typename\n        ...ReplMultiplayerGroup\n      }\n      individuals {\n        __typename\n        ...ReplMultiplayerIndividual\n      }\n    }\n    authorizations {\n      editPermissions {\n        isAuthorized\n        message\n      }\n      editVisibility {\n        isAuthorized\n        message\n      }\n      removeSelf {\n        isAuthorized\n        message\n      }\n      viewPermissions {\n        isAuthorized\n        message\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return cx=function(){return e},e}function cC(){var e=(0,g._)(["\n  query ReplMultiplayerStatus($replId: String!) {\n    repl(id: $replId) {\n      __typename\n      ... on Repl {\n        __typename\n        ...ReplMultiplayerStatus\n      }\n    }\n  }\n  ","\n"]);return cC=function(){return e},e}function c_(){var e=(0,g._)(["\n  mutation UpdateOrgReplVisibility($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        ...ReplMultiplayerStatus\n      }\n    }\n  }\n  ","\n"]);return c_=function(){return e},e}var ck={},cD=(0,v.J1)(cb(),cy.wW),cE=(0,v.J1)(cS(),cw.Um),cR=(0,v.J1)(cY(),cE),cI=(0,v.J1)(cA(),cE),cF=(0,v.J1)(cx(),cD,cR,cI),cT=(0,v.J1)(cC(),cF),cP=(0,v.J1)(c_(),cF),cL=t(84316),cU=t(74470),cN=t(74643),cO=t(63244),cM=t(26709),cB=t(13340),cH=t(54087),cz=t(51705),cW=t(72395),cG=(0,eC.x)({section:[e_.wp.colWithGap(12),e_.wp.px(12)],sectionWithBorders:[e_.wp.colWithGap(12),e_.wp.p(12),e_.wp.border({direction:"top"}),e_.wp.border({direction:"bottom"}),{"&:last-of-type":{borderBottom:0,paddingBottom:0}}],sectionTitle:[e_.wp.fontWeight.medium],subtitle:[e_.wp.fontWeight.medium],item:[e_.wp.rowWithGap(16),e_.wp.align.center,e_.wp.justify.spaceBetween],groupName:[e_.wp.colWithGap(6),e_.wp.justify.center],searchInput:[e_.wp.flex.growAndShrink(1)],visibilitySelector:[e_.wp.flex.growAndShrink(1),e_.wp.position.relative,e_.wp.justify.start,e_.wp.align.center]}),cV=function(e){var n,t,r,i,o,a,l,s,c,u,d,f,h=e.replId,g=(0,eM.T)(),v=(0,r0.A)(),y=(n={variables:{replId:h}},t=(0,m._)({},ck,n),w.I(cT,t)),b=y.data,S=y.loading,Y=y.error,A=y.refetch,x=(null==b||null==(i=b.repl)?void 0:i.__typename)==="Repl"?b.repl:void 0,C=(null!=(u=null==x||null==(o=x.multiplayerStatus)?void 0:o.groups)?u:[]).filter(function(e){return"custom"!==e.group.type}),_=(null!=(d=null==x||null==(a=x.multiplayerStatus)?void 0:a.groups)?d:[]).filter(function(e){return"custom"===e.group.type}),k=null!=(f=null==x||null==(l=x.multiplayerStatus)?void 0:l.individuals)?f:[],D=C.map(function(e){return e.group}).concat(_.map(function(e){return e.group})).concat(k.map(function(e){return e.group})),E=(r=(0,H._)(function(){return(0,z.YH)(this,function(e){switch(e.label){case 0:return[4,A()];case 1:return e.sent(),[2]}})}),function(){return r.apply(this,arguments)});return(null==Y?void 0:Y.message)?(0,p.Y)(eG.S,{gap:12,children:(0,p.Y)(cH.N,{colorway:"negative",text:Y.message})}):S||!x?(0,p.Y)(eG.S,{px:12,align:"center",justify:"center",children:(0,p.Y)(lO.A,{})}):(0,p.FD)(eG.S,{gap:12,children:[(0,p.FD)(eG.S,{tag:"header",px:12,gap:2,children:[(0,p.Y)(eW.EY,{variant:"subheadDefault",children:"Share App"}),(0,p.FD)(eG.S,{css:cG.subtitle,row:!0,gap:4,children:[x.org?(0,p.FD)(eW.EY,{variant:"small",color:"dimmer",children:[x.org.name," /"]}):null,(0,p.Y)(eW.EY,{variant:"small",children:x.title})]})]}),(null==(s=x.org)?void 0:s.id)&&x.authorizations.editPermissions.isAuthorized?(0,p.Y)(eG.S,{css:cG.sectionWithBorders,children:(0,p.Y)(cK,{orgId:x.org.id,selectedGroups:D,repl:x,onScopeChange:E})}):null,(0,p.FD)(eG.S,{css:cG.section,children:[(0,p.Y)(eW.EY,{variant:"small",css:cG.sectionTitle,children:"Groups with access"}),x.org?(0,p.Y)(cq,{org:x.org}):null,(0,p.Y)(eG.S,{pl:24,gap:12,children:C.map(function(e){var n=e.group,t=e.options;return(0,p.Y)(cZ,{repl:x,group:n,options:t,onScopeChange:E},n.id)})}),_.map(function(e){var n=e.group,t=e.options;return(0,p.Y)(cZ,{repl:x,group:n,options:t,onScopeChange:E},n.id)})]}),k.length>0?(0,p.FD)(eG.S,{css:cG.section,children:[(0,p.Y)(eW.EY,{variant:"small",css:cG.sectionTitle,children:"People with access"}),k.map(function(e){var n=e.group,t=e.user,r=e.options;return(0,p.Y)(cj,{currentUserId:g,repl:x,group:n,user:t,options:r,onScopeChange:E},t.id)})]}):null,(0,p.Y)(eG.S,{css:cG.section,children:(0,p.Y)(cO.R,{type:"repl"})}),(null==(c=x.org)?void 0:c.id)?(0,p.Y)(eG.S,{css:cG.sectionWithBorders,children:(0,p.FD)(eG.S,{row:!0,justify:"space-between",children:[(0,p.Y)(c$,{repl:x,org:x.org}),v?null:(0,p.Y)(aX.v,(0,e6._)((0,m._)({prefetch:!1},(0,o8.z9)(x)),{iconRight:(0,p.Y)(iy.A,{}),variant:"outlined",text:"Cover page",target:"_blank",style:{pointerEvents:"auto"}}))]})}):null]})},cj=function(e){var n=e.user,t=e.currentUserId,r=e.repl,i=e.group,o=e.options,a=e.onScopeChange,l=t===n.id;return(0,p.FD)(eG.S,{css:cG.item,children:[(0,p.FD)(eG.S,{row:!0,gap:8,children:[(0,p.Y)(cB.e,{src:n.image,username:n.username,fullName:n.displayName,size:24}),(0,p.FD)(eG.S,{css:cG.groupName,children:[(0,p.FD)(eG.S,{row:!0,gap:8,children:[(0,p.Y)(eW.EY,{height:"singleLine",children:n.username}),l?(0,p.Y)(eW.EY,{height:"singleLine",color:"dimmest",children:"(You)"}):null]}),n.username!==n.displayName?(0,p.Y)(eW.EY,{variant:"small",color:"dimmest",height:"singleLine",children:n.displayName}):null]})]}),(0,p.Y)(eG.S,{children:(0,p.Y)(cM.A,{repl:r,group:i,options:o,onScopeChange:a})})]})},cZ=function(e){var n=e.repl,t=e.group,r=e.options,i=e.onScopeChange;return(0,p.FD)(eG.S,{css:cG.item,children:[(0,p.FD)(eG.S,{row:!0,gap:8,children:[(0,p.Y)(cU.A,{group:t}),(0,p.FD)(eG.S,{css:cG.groupName,children:[(0,p.Y)(eW.EY,{height:"singleLine",children:t.name}),(0,p.FD)(eG.S,{row:!0,gap:8,children:[t.isMember?(0,p.Y)(eW.EY,{variant:"small",color:"dimmest",height:"singleLine",children:"(you)"}):null,null!=t.memberCount?(0,p.Y)(eW.EY,{variant:"small",color:"dimmest",height:"singleLine",children:(0,oe.A)("member",t.memberCount,!0)}):null]})]})]}),(0,p.Y)(eG.S,{children:(0,p.Y)(cM.A,{repl:n,group:t,options:r,onScopeChange:i})})]})},cq=function(e){var n,t=e.org;return(0,p.Y)(eG.S,{css:cG.item,children:(0,p.FD)(eG.S,{row:!0,gap:8,children:[(0,p.Y)(cB.e,{src:null!=(n=t.image)?n:null,username:t.name,size:32,layout:"responsive",isOrg:!0}),(0,p.FD)(eG.S,{css:cG.groupName,children:[(0,p.FD)(eW.EY,{height:"singleLine",children:["Everyone at ",t.name]}),(0,p.Y)(eG.S,{children:null!=t.membersCount?(0,p.Y)(eW.EY,{variant:"small",color:"dimmest",height:"singleLine",children:(0,oe.A)("member",t.membersCount,!0)}):null})]})]})})},cK=function(e){var n,t,r,i,o,a,l,s,c=e.orgId,u=e.selectedGroups,f=e.repl,m=e.onScopeChange,g="group-search-".concat((0,h.useId)()),v=(0,d._)((0,h.useState)(),2),w=v[0],y=v[1],b=(0,d._)((0,h.useState)(""),2),S=b[0],Y=b[1],A=(0,d._)((0,cL.qO)(),2),x=A[0],C=A[1],_=C.data,k=C.error,D=C.loading,E=_&&(null==(r=_.currentUser)||null==(t=r.org)?void 0:t.__typename)==="Org"&&"OrgGroup"===_.currentUser.org.group.__typename&&(null==(i=_.currentUser.org.group.replScopeOptions)?void 0:i.__typename)==="OrgGroupReplScopeOptions"?_.currentUser.org.group.replScopeOptions.items[0].options:void 0,R=(null==_?void 0:_.currentUser)&&"Org"!==_.currentUser.org.__typename?_.currentUser.org.message:void 0,I=(null==_?void 0:_.currentUser)&&"Org"===_.currentUser.org.__typename&&"OrgGroup"!==_.currentUser.org.group.__typename?_.currentUser.org.group.message:void 0,F=(null==_?void 0:_.currentUser)&&"Org"===_.currentUser.org.__typename&&"OrgGroup"===_.currentUser.org.group.__typename&&(null==(o=_.currentUser.org.group.replScopeOptions)?void 0:o.__typename)!=="OrgGroupReplScopeOptions"?null==(a=_.currentUser.org.group.replScopeOptions)?void 0:a.message:void 0,T=null!=(s=null!=(l=null!=R?R:I)?l:F)?s:null==k?void 0:k.message,P=(n=(0,H._)(function(){return(0,z.YH)(this,function(e){switch(e.label){case 0:return[4,m()];case 1:return e.sent(),Y(""),y(void 0),[2]}})}),function(){return n.apply(this,arguments)});return(0,p.FD)(p.FK,{children:[(0,p.FD)(eG.S,{row:!0,gap:8,children:[(0,p.Y)(eG.S,{css:cG.searchInput,children:(0,p.Y)(cN.A,{inputId:g,orgId:c,types:[rQ.Oi.Custom,rQ.Oi.SystemIndividual],selectedGroups:u,value:S,setValue:Y,onSelect:function(e){y(e),Y(e.name),x({variables:{orgId:c,groupId:e.id,input:{replIds:[f.id]}}})},onClear:function(){return y(void 0)},placeholder:"Share with groups or other members"})}),w&&E||D?(0,p.FD)(eG.S,{pl:24,row:!0,align:"center",children:[w&&E&&!D?(0,p.Y)(cM.A,{group:w,repl:f,options:E,onScopeChange:P}):null,D?(0,p.Y)(lO.A,{size:24}):null]}):null]}),T?(0,p.Y)(cH.N,{colorway:"negative",text:T}):null]})},c$=function(e){var n,t,r,i=e.repl,o=e.org,a=(0,d._)((0,h.useState)(),2),l=a[0],s=a[1],c=(0,d._)((0,h.useState)(),2),u=c[0],f=c[1],g=(0,d._)((n={variables:{input:{id:i.id}},onError:function(e){f(e.message)}},t=(0,m._)({},ck,n),ln.n(cP,t)),2),v=g[0],w=g[1].loading,y="repl-visibility-".concat((0,h.useId)()),b=i.authorizations.editVisibility.isAuthorized,S=i.authorizations.editVisibility.message,Y=[{id:"private",icon:(0,p.Y)(cW.A,{}),name:"Internal to ".concat(o.name),selected:i.isPrivate,description:"Only selected organization members can view or edit."},{id:"public",icon:(0,p.Y)(cz.A,{}),name:"Public on Replit",selected:!i.isPrivate,description:"Anyone on Replit can see or fork. You choose who can edit."}],A=Y.find(function(e){return e.selected}),x=A?(0,p.FD)(eG.S,{row:!0,gap:8,align:"center",children:[A.icon," ",A.name]}):void 0;return r=u?(0,p.Y)(tz.m_,{tooltip:u,children:(0,p.Y)(sm.A,{size:24,color:tH.LU.accentNegativeDefault})}):w?(0,p.Y)(lO.A,{size:24}):l?(0,p.Y)(lN.A,{size:24,color:tH.LU.accentPositiveDefault}):null,(0,p.FD)(eG.S,{css:cG.visibilitySelector,row:!0,gap:4,children:[(0,p.Y)(tz.m_,{tooltip:S,isDisabled:b,children:(0,p.Y)(lT.in,{id:y,trigger:(0,p.Y)(ez.$n,{iconRight:(0,p.Y)(as.A,{}),text:null!=x?x:"Control Repl visibility",disabled:!b}),"aria-label":"Control ".concat(i.title," visibility"),onAction:function(e){var n="private"===e;n!==i.isPrivate&&(f(void 0),v({variables:{input:{id:i.id,isPrivate:n}},optimisticResponse:{__typename:"RootMutationType",updateRepl:{__typename:"UpdateReplPayload",repl:(0,e6._)((0,m._)({},i),{isPrivate:n})}},onCompleted:function(e){"UpdateReplPayload"===e.updateRepl.__typename&&(s(!0),setTimeout(function(){return s(!1)},2e3))}}))},items:Y,disallowEmptySelection:!0,isDisabled:!b,children:function(e){return(0,p.Y)(lT.Dr,{id:e.id,label:e.name,description:e.description,icon:e.icon},e.id)}})}),r?(0,p.Y)(eG.S,{children:r}):null]})},cJ=t(7576),cQ=t.n(cJ),cX=t(95131);function c0(){var e=(0,g._)(["\n  query TeamMultiplayerManagerMultiplayers($replId: String!) {\n    currentUser {\n      id\n    }\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        isOwner\n        collaborators {\n          type\n          permission\n          user {\n            ...MultiplayerUser\n          }\n        }\n        authorizations {\n          editPermissions {\n            isAuthorized\n          }\n          inviteGuests {\n            isAuthorized\n          }\n        }\n        multiplayerInvites {\n          email\n          type\n        }\n        owner {\n          ... on User {\n            id\n          }\n          ... on Team {\n            id\n            username\n            displayName\n            capabilities {\n              isBusinessPlan\n              hasValidSubscription\n              availableSeats\n            }\n            members {\n              id\n              permissions\n              user {\n                id\n                ...MultiplayerUser\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return c0=function(){return e},e}var c1={},c2=(0,v.J1)(c0(),cX._9),c4=t(53628),c5=t(21513),c3=(0,eC.x)({root:[e_.wp.color.foregroundDefault,e_.wp.p(24),e_.wp.display.grid,{gap:tH.LU.space24}],controls:[e_.wp.display.grid,{gap:tH.LU.space8,gridAutoFlow:"column"}],message:[e_.wp.pb(16)],textContainer:[e_.wp.textAlign.center]});function c6(e){var n=e.email,t=e.onInvite,r=e.onCancel;return(0,p.FD)("div",{css:c3.root,children:[(0,p.Y)(c5.A,{level:3,align:"center",children:"Are you sure?"}),(0,p.Y)("div",{css:c3.textContainer,children:(0,p.FD)(eW.EY,{variant:"text",children:[(0,p.Y)("p",{css:c3.message,children:"Adding an external user as a guest to this repl will give the user read and write access. Please confirm the below email address before inviting the user as a guest."}),(0,p.Y)("p",{children:n})]})}),(0,p.FD)("div",{css:c3.controls,children:[(0,p.Y)(ez.$n,{onClick:r,text:"Cancel"}),(0,p.Y)(ez.$n,{colorway:"primary",onClick:t,text:"Invite"})]})]})}var c8=t(73815),c7=t(97379),c9=t(37039),ue=t(74021);function un(e){var n,t,r,i,o,a,l,s,c,u,g,v,y=e.replId,b=(0,f.useRouter)(),S=(0,U.Po)(b),Y=(0,t8.Q4)(),A=(0,d._)((0,h.useState)(null),2),x=A[0],C=A[1],_=(n={variables:{replId:y}},t=(0,m._)({},c1,n),w.I(c2,t)),k=_.data,D=_.loading,E=(null==k||null==(r=k.currentUser)?void 0:r.id)||null,R=(null==k?void 0:k.repl.__typename)==="Repl"?k.repl:null,I=(0,c4.A)({isMobileApp:S,isTeam:!0,replId:y}),F=I.addOrInviteReplMultiplayer,T=I.loadingAddMutation;if(R&&!R.owner)throw Error("Cannot manage members on anon repls");if((null==R?void 0:R.owner)&&(null==R?void 0:R.owner.__typename)!=="Team")throw Error("Expect repl owned by a team");var P=(null==R||null==(i=R.owner)?void 0:i.__typename)==="Team"?R.owner:null,L=!(null==P||null==(o=P.capabilities)?void 0:o.hasValidSubscription)&&!(null==P||null==(a=P.capabilities)?void 0:a.isBusinessPlan),N=(null!=(l=null==R?void 0:R.collaborators)?l:[]).reduce(function(e,n){var t=n.user.username;return -1===e.indexOf(t)&&e.push(),e},[]),O=null==R?void 0:R.multiplayerInvites,M=(null!=(s=null==R?void 0:R.collaborators)?s:[]).filter(function(e){return"guest"===e.type}).map(function(e){return e.user}),B=M.length,H=(null!=(c=null==R?void 0:R.collaborators)?c:[]).filter(function(e){return"member"===e.type}).map(function(e){return e.user}),z=(null!=(u=null==R?void 0:R.collaborators)?u:[]).filter(function(e){return"admin"===e.type}).map(function(e){return e.user}),W=z.some(function(e){return e.id===E}),G=H.filter(function(e){return Y.some(function(n){return n.id===e.id})}),V=H.filter(function(e){return!Y.some(function(n){return n.id===e.id})}),j=null!=(g=null==R?void 0:R.authorizations.editPermissions.isAuthorized)&&g,Z=null!=(v=null==R?void 0:R.authorizations.inviteGuests.isAuthorized)&&v;return D?(0,p.Y)(eD.ui,{css:[cv.Nx.root],background:"default",children:(0,p.FD)(eG.S,{css:cv.Nx.loading,children:[(0,p.Y)(lO.A,{color:tH.LU.foregroundDimmer}),(0,p.Y)(eW.EY,{color:"dimmer",multiline:!1,children:"Loading..."})]})}):(0,p.FD)(eD.ui,{css:cv.Nx.root,background:"default",children:[(0,p.Y)(eG.S,{css:[cv.Nx.header,S&&cv.Nx.header_mobile],children:(0,p.Y)(eG.S,{css:cv.Nx.titleContainer,children:(0,p.Y)(eW.EY,{variant:"subheadDefault",multiline:!1,children:"Team Multiplayers"})})}),Z?(0,p.Y)(eG.S,{css:cv.Nx.searchContainer,children:(0,p.Y)(c7.A,{existingUsernames:N,onSubmit:function(e){if(!T){if(cQ()(e))return void C(e);F({variables:{input:{replId:y,target:{method:rQ.LI.Username,value:e},level:rQ.Hy.Rw}}})}},isDisabled:D})}):null,!Z&&L?(0,p.Y)(eG.S,{px:16,children:(0,p.Y)(c9.d,{iconLeft:(0,p.Y)(ue.A,{}),text:'You can add people to this App by inviting them to the "'.concat(null==P?void 0:P.displayName,'" Friends Team.'),href:"/teams/".concat(null==P?void 0:P.username),target:"_blank"})}):null,(0,p.Y)(ek.a,{isOpen:!!x,onRequestClose:function(){return C(null)},children:x?(0,p.Y)(c6,{email:x,onInvite:function(){F({variables:{input:{replId:y,target:{method:rQ.LI.Email,value:x},level:rQ.Hy.Rw}}}),C(null)},onCancel:function(){return C(null)}}):null}),(0,p.FD)(eD.ui,{css:cv.Nx.userList,children:[(null==O?void 0:O.length)?(0,p.FD)(eG.S,{css:cv.Nx.userGroup.root,children:[(0,p.Y)(cv.jl,{title:"Pending Invitations",color:tH.LU.outlineStrongest,count:B}),null==O?void 0:O.map(function(e){return(0,p.Y)(c8.A,{canEditMultiplayers:W||!1,email:e.email,isPendingInvitation:!0,replId:y},e.email)})]}):null,M.length?(0,p.FD)(eG.S,{css:cv.Nx.userGroup.root,children:[(0,p.Y)(cv.jl,{title:"External Guests",color:tH.LU.outlineStrongest,count:null==M?void 0:M.length,tooltip:"External Guests are not members of your team and were invited via a Join Link or by username."}),M.map(function(e){return(0,p.Y)(c8.A,{canEditMultiplayers:W||!1,isPendingInvitation:!1,replId:y,user:e},e.id)})]}):null,G.length?(0,p.FD)(eG.S,{css:cv.Nx.userGroup.root,children:[(0,p.Y)(cv.jl,{title:"Online Members",color:tH.LU.greenStrongest,count:null==G?void 0:G.length}),G.map(function(e){return(0,p.Y)(c8.A,{isPendingInvitation:!1,canEditMultiplayers:!!W,replId:y,user:e},e.id)})]}):null,V.length?(0,p.FD)(eG.S,{css:cv.Nx.userGroup.root,children:[(0,p.Y)(cv.jl,{title:"Offline Members",color:tH.LU.outlineStrongest,count:null==V?void 0:V.length}),V.map(function(e){return(0,p.Y)(c8.A,{isPendingInvitation:!1,canEditMultiplayers:!!W,replId:y,user:e},e.id)})]}):null,z.length?(0,p.FD)(eG.S,{css:cv.Nx.userGroup.root,children:[(0,p.Y)(cv.jl,{title:"Admins",color:tH.LU.accentPrimaryStronger,count:z.length}),z.map(function(e){return(0,p.Y)(c8.A,{canEditMultiplayers:!1,isPendingInvitation:!1,user:e,replId:y},e.id)})]}):null,j||D?null:(0,p.Y)(eW.EY,{color:"dimmer",variant:"small",multiline:!1,children:"Only admins can add and remove members to multiplayer"})]})]})}var ut=function(){var e=(0,sc.A)(),n=e.showPrivateUpsell,t=e.refetch,r=(0,d._)((0,h.useState)(!1),2),i=r[0],o=r[1];return n?(0,p.FD)(eG.S,{px:12,children:[(0,p.Y)(eG.S,{tag:"button",css:ur.bannerWrapper,onClick:function(){return o(!0)},children:(0,p.Y)(cH.N,{icon:(0,p.Y)(rn.A,{}),colorway:"yellow",text:"This App is publicly visible. Upgrade for unlimited private Apps, better AI, more storage, speed, and more."})}),(0,p.Y)(ss.A,{isOpen:i,onClose:function(){return o(!1)},onPurchaseComplete:function(){return t()},reloadPageAfterPurchaseComplete:!0,type:"purchase",contextualUpsell:(0,p.FD)(p.FK,{children:[(0,p.Y)(eW.EY,{variant:"subheadBig",children:"Upgrade for private Apps"}),(0,p.Y)(eW.EY,{multiline:!0,children:"Keep your code secure and private"})]}),analyticsContext:{upgrade:{context:"workspace_multiplayer_header"}},highlightUpsell:"replLimit"})]}):null},ur=(0,eC.x)({bannerWrapper:[e_.wp.cursor.pointer,e_.wp.borderRadius(),e_.wp.textAlign.left]}),ui=t(80859),uo=(0,eC.x)({self:[e_.wp.borderRadius(8),e_.wp.align.stretch,e_.wp.flex.growAndShrink(1),e_.wp.maxHeight("calc(100vh - ".concat(ui.uF+12,"px)")),e_.wp.backgroundColor.backgroundDefault]});let ua=function(e){var n,t=e.replId,r=e.handleUpgradeTriggered,i=e.isTeamRepl,o=e.org;return n=o?(0,p.Y)(cV,{replId:t}):i?(0,p.Y)(un,{replId:t}):(0,p.Y)(cv.Ay,{replId:t,handleUpgradeTriggered:r}),(0,p.FD)(eG.S,{css:uo.self,py:12,gap:12,children:[n,o&&"personal"!==o.type?null:(0,p.Y)(ut,{}),o?null:(0,p.FD)(p.FK,{children:[(0,p.Y)(o5.a,{}),(0,p.Y)(cg.A,{replId:t})]})]})};var ul={owner:"Owner",editor:"Can edit"};function us(){var e=(0,g._)(["\n  fragment UsersOnlineOverflowMenuUser on User {\n    id\n    username\n    image\n  }\n"]);return us=function(){return e},e}function uc(){var e=(0,g._)(["\n  query UsersOnlineOverflowMenu($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        user {\n          id\n          ...UsersOnlineOverflowMenuUser\n        }\n        multiplayers {\n          id\n          ...UsersOnlineOverflowMenuUser\n        }\n      }\n      ... on ReplRedirect {\n        replUrl\n      }\n      ... on SubscriptionExpiredError {\n        replId\n      }\n    }\n    currentUser {\n      id\n    }\n  }\n  ","\n"]);return uc=function(){return e},e}var uu={},ud=(0,v.J1)(us()),up=(0,v.J1)(uc(),ud),uf=t(27469),uh=(0,eC.x)({container:[e_.wp.pl(8),e_.wp.pr(16),e_.wp.py(4),e_.wp.flex.row,e_.wp.align.center,e_.wp.justify.start],button:[e_.wp.display.flex,e_.wp.align.center],img:[e_.wp.width(32),e_.wp.height(32),e_.wp.borderRadius("full"),e_.wp.backgroundColor.white,e_.wp.border({width:3,style:"solid"}),{objectFit:"cover"}],usernameContainer:[e_.wp.display.flex,e_.wp.flex.column,e_.wp.justify.center,e_.wp.ml(8),e_.wp.flex.growAndShrink(1),e_.wp.colWithGap(2)]});let um=function(e){var n=e.id,t=e.username,r=e.image,i=e.isOwner,o=e.color,a=e.hideModal,l=e.canClickAvatar,s=e.isCurrentUser,c=e.onAvatarClick,u=function(){l&&(c({username:t,id:n}),a())};return(0,p.FD)("div",{css:[uh.container,i&&so.b.listItem],style:(0,m._)({cursor:l?"pointer":"auto"},l&&so.b.listItem),role:"button",onClick:u,onKeyDown:u,tabIndex:0,children:[(0,p.FD)("div",{css:uh.button,children:[(0,p.Y)(rS.A,{src:r,alt:"",css:uh.img,style:{borderColor:o},width:32,height:32}),l?(0,p.FD)(uf.s,{children:["Observe ",t]}):null]}),(0,p.FD)("div",{css:uh.usernameContainer,children:[(0,p.FD)(eW.EY,{multiline:!1,children:["@",t,s?" (you)":null]}),(0,p.Y)(eW.EY,{variant:"small",color:"dimmer",multiline:!1,children:i?ul.owner:ul.editor})]})]})};var ug=(0,eC.x)({loaded:[e_.wp.maxHeight(330),{overflowY:"auto"}]});let uv=function(e){var n,t,r=e.replId,i=e.activeUsers,o=e.hideModal,a=e.onAvatarClick,l=(n={variables:{replId:r}},t=(0,m._)({},uu,n),w.I(up,t)),s=l.data,c=l.loading,u=l.error;if(c)return(0,p.Y)(eG.S,{p:32,row:!0,justify:"center",children:(0,p.Y)(lO.A,{})});if(u)return(0,p.Y)("div",{children:u.message});if((null==s?void 0:s.repl.__typename)==="Repl"){var d=s.repl,f=s.currentUser,h=d.user,g=h&&i.find(function(e){return e.username===h.username}),v=d.multiplayers.filter(function(e){var n;return e&&(n=e.id,i.some(function(e){return e.id===n}))}).slice(2);return(0,p.Y)(eG.S,{css:ug.loaded,py:8,gap:8,children:(0,p.FD)(eG.S,{children:[h?(0,p.Y)(um,(0,e6._)((0,m._)({},h),{color:g?g.color:"transparent",isOwner:!0,hideModal:o,isCurrentUser:h.id===(null==f?void 0:f.id),canClickAvatar:!!g&&h.id!==(null==f?void 0:f.id),onAvatarClick:a})):null,v.map(function(e){if(!e)throw Error("Expected user");var n=i.find(function(n){return n.username===e.username});if(!n)throw Error("Expected user online");var t=e.id!==(null==f?void 0:f.id);return(0,p.Y)(um,(0,e6._)((0,m._)({isCurrentUser:e.id===(null==f?void 0:f.id)},e),{canClickAvatar:t,color:n.color,hideModal:o,isOwner:!1,onAvatarClick:a}),"chat-user-list-".concat(e.username))})]})})}return(null==s?void 0:s.repl.__typename)==="ReplRedirect"?(0,p.FD)("div",{children:["This App has moved to"," ",(0,p.Y)("a",{href:s.repl.replUrl,children:s.repl.replUrl})]}):(null==s?void 0:s.repl.__typename)==="SubscriptionExpiredError"?(0,p.FD)("div",{children:["Your subscription has expired.",(0,p.Y)("a",{href:"/pricing",children:"Upgrade here"})]}):null};var uw=t(54357),uy=t(93490);let ub=function(e){var n=e.isOpen,t=e.hideModal,r=e.children,i=e.onAvatarClick,o=(0,eB.A)(),a=(0,uw.Q4)();return(0,p.FD)(uy.A,{isOpen:n,padding:0,onClickOutside:t,children:[r,(0,p.Y)(uv,{replId:o,activeUsers:a,hideModal:t,onAvatarClick:i})]})};var uS=t(2015),uY=(0,eC.x)({root:[e_.wp.backgroundColor.backgroundDefault],userStack:[(0,nt._)({},e_.$_.max(op.LO.mobileMax+100),[e_.wp.display.none])],userStackListItem:{listStyleType:"none"},overflowContainer:{backgroundColor:"transparent"},overflowButton:[e_.wp.borderRadius("full"),e_.wp.minWidth(24),e_.wp.height(24),e_.wp.fontSize(10),e_.wp.border({color:tH.LU.outlineDefault})]});function uA(e){var n=(0,d._)((0,h.useState)(!1),2),t=n[0],r=n[1],i=(0,t8.Q4)();if(0===i.length)return null;var o=i.slice(0,2),a=i.length-2;return(0,p.Y)(eG.S,{css:uY.root,row:!0,align:"center",children:(0,p.FD)(eG.S,{tag:"ul",css:uY.userStack,px:8,py:4,row:!0,gap:4,align:"center","aria-live":"polite","aria-relevant":"additions removals","aria-label":"online users",children:[o.map(function(n){return(0,p.Y)("li",{css:uY.userStackListItem,children:(0,p.Y)(uS.A,{user:n,onClick:function(){return e.onAvatarClick(n)}})},n.id)}),a>0?(0,p.Y)("li",{css:uY.userStackListItem,children:(0,p.Y)(eG.S,{children:(0,p.Y)(ub,{isOpen:t,hideModal:function(){return r(!1)},onAvatarClick:e.onAvatarClick,children:(0,p.Y)(eD.ui,{background:"root",css:uY.overflowContainer,children:(0,p.Y)(ez.$n,{size:"small",onClick:function(){return r(!t)},text:a.toString(),css:uY.overflowButton})})})})}):null]})})}function ux(){var e=eA(),n=(0,eb.Jn)(eR.id),t=n?"".concat(eY," (").concat(n,")"):eY;return(0,p.Y)(t7.K0,{alt:t,onClick:function(){return e()},size:32,children:(0,p.Y)(ee.A,{})})}var uC=t(88734),u_=t(77306),uk=t(9685),uD=t(92855),uE=(0,eC.x)({self:[e_.wp.position.relative,e_.wp.borderRadius(4,0,0,4)],dotWrapper:[e_.wp.position.absolute,e_.wp.top("-3px"),e_.wp.right("-3px"),e_.wp.width("10px"),e_.wp.height("10px"),e_.wp.borderRadius("full"),e_.wp.border({color:tH.LU.backgroundDefault,width:2})],dot:[e_.wp.width("100%"),e_.wp.height("100%"),e_.wp.borderRadius("full")]});function uR(e){var n=e.color;return(0,p.FD)(eG.S,{css:uE.self,children:[(0,p.Y)(uD.A,{}),(0,p.Y)(eG.S,{tag:"span",css:uE.dotWrapper,children:(0,p.Y)(eG.S,{tag:"span",css:uE.dot,style:{backgroundColor:n,boxShadow:"0 0 6px ".concat(n)}})})]})}var uI=(0,tB.AH)([e_.wp.flex.growAndShrink(1),e_.wp.borderRadius(4,0,0,4),(0,nt._)({},e_.$_.max("tabletMin"),{"div span":[e_.wp.display.none],"div svg":[e_.wp.mr(0)]})]),uF=(0,tB.AH)([uI,e_.wp.borderRadius()]),uT={base:{self:uI,loading:(0,tB.AH)([uI,o4.S.backgroundPulse()])},rounded:{self:uF,loading:(0,tB.AH)([uF,o4.S.backgroundPulse()])}};function uP(e){var n=e.text,t=e.icon,r=e.disabled,i=e.rounded,o=e.onClick,a=e.tooltip,l=e.loading,s=(0,p.Y)(ez.$n,{text:n,iconLeft:t,css:uT[i?"rounded":"base"][l?"loading":"self"],disabled:r,onClick:o});return a?(0,p.Y)(tz.m_,{tooltip:a,children:s}):s}function uL(){var e,n,t,r,i,o,a=(0,ch.uS)(),l=!1,s=!1;switch(a){case uC.d.Ready:case uC.d.Suspended:case uC.d.ProcessingLifecycleCommand:i="Deploy",o=(0,p.Y)(uD.A,{});break;case uC.d.Loading:i="Deploy",o=(0,p.Y)(uD.A,{}),l=!0,s=!0;break;case uC.d.Preparing:i="Preparing",o=(0,p.Y)(uD.A,{}),l=!0,s=!0;break;case uC.d.Deploying:i="Deploying",o=(0,p.Y)(lO.A,{}),s=!0;break;default:(0,on.A)(a)}var c=(0,et.Us)(),u=!!(0,uk.Q)(),f=(e=(0,er.A)().dotReplit,t=(n=(0,d._)((0,h.useState)(null),2))[0],r=n[1],(0,h.useEffect)(function(){return e.watch(function(e){var n;if(e.error)return r(null);r((null==(n=e.config.deployment)?void 0:n.target)||null)})},[e]),t);return(0,p.Y)(uP,{text:i,icon:o,onClick:function(){a===uC.d.Ready&&(0,V.u4)(V.AZ.DEPLOY_PROJECT_SELECTED,{source:"deploy_button",has_agent_session:u}),c({pane:{type:"deployments",flow:{skipIntro:null!==f&&u,isAgentDeployment:null!==f&&u}}})},disabled:l,loading:s,rounded:!0})}var uU={self:e_.wp.rowWithGap(1),open:(0,tB.AH)([e_.wp.borderRadius(0,4,4,0),e_.wp.px(4)])};function uN(){var e,n,t,r=(0,ch.uS)(),i=(0,ch.Jz)(),o=(0,ch.GQ)(),a=(0,ch.Tp)().redeployWithNoNewOptions,l=(0,et.Us)(),s=(0,eq.A)().showError,c=(0,I.jt)(),u=(e=(0,H._)(function(){return(0,z.YH)(this,function(e){switch(e.label){case 0:if(r===uC.d.Deploying||r===uC.d.Suspended||r===uC.d.ProcessingLifecycleCommand||r===uC.d.Preparing)return l({pane:{type:"deployments"}}),[2];if(m&&(g(void 0),m===rQ.nH.Failed)||i)return l({pane:{type:"deployments",data:{view:u_.P.Deployment}}}),[2];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,a({hasAgentSession:c})];case 2:return e.sent(),[3,4];case 3:return s(e.sent().message),[3,4];case 4:return[2]}})}),function(){return e.apply(this,arguments)}),f=(0,d._)((0,h.useState)(void 0),2),m=f[0],g=f[1];(0,h.useEffect)(function(){if(o&&"HostingBuildDeployStatusAction"===o.__typename)switch(o.status){case rQ.nH.Success:case rQ.nH.Failed:g(o.status)}},[o]),(0,h.useEffect)(function(){r===uC.d.Deploying&&g(void 0)},[r]);var v=void 0,w=!1,y=!1;switch(r){case uC.d.Ready:n="Redeploy",t=(0,p.Y)(uD.A,{}),m&&(m===rQ.nH.Success?(t=(0,p.Y)(uR,{color:tH.LU.accentPositiveDefault}),v="Success"):(t=(0,p.Y)(uR,{color:tH.LU.accentNegativeDefault}),v="An error occurred"));break;case uC.d.Suspended:n="Redeploy",t=(0,p.Y)(uR,{color:tH.LU.greyDefault}),v="Deployment suspended";break;case uC.d.Loading:n="Redeploy",t=(0,p.Y)(uD.A,{}),w=!0,y=!0;break;case uC.d.ProcessingLifecycleCommand:n="Redeploy",t=(0,p.Y)(uR,{color:tH.LU.orangeStronger}),y=!0,v="Updating deployment";break;case uC.d.Preparing:n="Preparing",t=(0,p.Y)(lO.A,{}),y=!0,w=!0;break;case uC.d.Deploying:n="Deploying",t=(0,p.Y)(lO.A,{}),y=!0;break;default:(0,on.A)(r)}return i&&(n="Error",t=(0,p.Y)(uR,{color:tH.LU.accentNegativeDefault}),v=i),(0,p.FD)(eG.S,{css:uU.self,children:[(0,p.Y)(uP,{text:n,icon:t,tooltip:v,onClick:u,disabled:w,loading:y}),(0,p.Y)(tz.m_,{tooltip:"Open Deployments pane",children:(0,p.Y)(ez.$n,{text:"",iconLeft:(0,p.Y)(iS.A,{}),onClick:function(){l({pane:{type:"deployments"}})},css:uU.open})})]})}var uO=function(){var e=(0,et.Us)();return(0,p.Y)(ez.$n,{text:"Redeploy",iconLeft:(0,p.Y)(uD.A,{}),onClick:function(){e({pane:{type:"deployments"}})}})};function uM(){var e=(0,ch.i$)(),n=(0,ch.cF)(),t=(0,ch.mj)().deployability;return e&&n?t.deploy.isAuthorized||t.redeploy.isAuthorized?(0,p.Y)(uN,{}):(0,p.Y)(uO,{}):(0,p.Y)(uL,{})}var uB=t(15503),uH=t(34798),uz=t(22730),uW="https://www.facebook.com/dialog/share?display=page&app_id=1775481339348651",uG=t(30218),uV=t(98993),uj=t(97019),uZ=t(92157),uq=t(80786),uK=t(36240),u$=t(31577);let uJ=function(e){var n,t,r,i,o,a,l=e.lessonSlug,s=e.courseSlug,c=(0,eq.A)().showConfirm;if(!l||!s)return null;var u=(0,uz.so)(s),d=(0,uz.Hi)(s,l);if(!d)return null;var f=d.ordinalLabel,h=(0,uz.HE)(u.socialSharingText,d),m="".concat(h," ").concat(u.sharableLink),g=(0,uV.A)({text:h,url:u.sharableLink}),v=(0,uG.A)({url:u.sharableLink}),w=(t=(n={url:u.sharableLink,hashtag:u.socialHashtag}).url,r=n.hashtag,i=n.redirectBackTo,(o=new URLSearchParams).append("href",t),i&&o.append("redirect_uri",i),r&&(r.startsWith("#")||(r="#".concat(r)),o.append("hashtag",r)),a=o.toString(),"".concat(uW,"&").concat(a)),y=[{url:g,icon:u$.A,base:uV.l,cta:"Share on X",color:uZ.A.brands.twitter},{url:v,icon:uK.A,base:uG.l,cta:"",color:uZ.A.brands.linkedin},{url:w,icon:uq.A,base:uW,cta:"",color:uZ.A.brands.facebook}];return(0,p.FD)(eG.S,{children:[(0,p.FD)(eG.S,{row:!0,gap:16,pr:24,align:"center",children:[(0,p.Y)(eG.S,{css:{fontSize:48},children:"\uD83E\uDD73"}),(0,p.FD)(eW.EY,{variant:"headerDefault",multiline:!1,children:["Congrats on completing ",f,"!"]})]}),(0,p.Y)(eW.EY,{variant:"subheadDefault",css:[e_.wp.py(12)],multiline:!1,children:"Share your progress"}),(0,p.FD)(eG.S,{css:[e_.wp.position.relative,e_.wp.borderRadius(8),e_.wp.backgroundColor.backgroundHigher,e_.wp.py(8),e_.wp.px(12)],children:[(0,p.Y)(eG.S,{pr:16,children:m}),(0,p.Y)(t7.K0,{css:[e_.wp.position.absolute,e_.wp.top(8),e_.wp.right(8)],alt:"Copy",size:18,tooltipBehavior:"hidden",onClick:function(){c("Copied to clipboard!"),(0,rv.default)(m),(0,uj._)({action:"copied_share_text",lessonSlug:l,courseSlug:s,origin:"lesson_complete_modal"})},children:(0,p.Y)(rA.A,{size:16})})]}),(0,p.FD)(eG.S,{pt:16,align:"center",row:!0,gap:16,justify:"center",children:[(0,p.Y)(aX.v,{variant:"outlined",text:"Back to the learning hub",href:"/learn/".concat(s,"/hub")}),(0,p.Y)(eG.S,{row:!0,gap:8,align:"center",children:y.map(function(e){var n=e.url,t=e.icon,r=e.base,i=e.cta,o=e.color;return(0,p.Y)(ez.$n,{css:[{backgroundColor:o,color:"white"}],onClick:function(){window.open(n,"_blank"),(0,V.u4)(V.AZ.EXTERNAL_LINK_VIEWED,{url:r,placement:"lesson-complete-modal",campaign:s,lessonSlug:l})},text:i,iconLeft:(0,p.Y)(t,{})},n)})})]})]})};function uQ(e){var n=e?1560:1400;return(0,eC.x)({desktopButton:(0,nt._)({},e_.$_.max(n),[e_.wp.display.none]),mobileButton:(0,nt._)({},e_.$_.min(n),[e_.wp.display.none])})}let uX=function(e){var n,t,r=e.lesson,i=(0,eq.A)().showError,o=(0,uH.mO)().fireCircularBurstFrom,a=(0,h.useRef)(null),l=(0,uB.j)(),s=(0,d._)((0,h.useState)(!1),2),c=s[0],u=s[1],f=(0,sc.A)().showPrivateUpsell,g=(0,d._)((n={onError:function(){return i("Something went wrong")},onCompleted:function(e){var n,t;(null==(n=e.completeUserCourseLesson)?void 0:n.__typename)!=="UpdatedUserCourseLesson"?i((null==(t=e.completeUserCourseLesson)?void 0:t.message)||"Something went wrong"):e.completeUserCourseLesson.userCourseLesson.id===r.id?(a.current&&!l&&o({element:a.current}),u(!0)):i("Something went wrong")}},t=(0,m._)({},li,n),ln.n(la,t)),2),v=g[0],w=g[1].loading,y="Lesson completed \uD83C\uDF89",b="Mark lesson completed",S=function(){(0,uj._)({action:"completed",lessonSlug:r.lessonSlug,courseSlug:r.course.courseSlug}),v({variables:{input:{userLessonId:r.id}}})};return(0,p.FD)(p.FK,{children:[null!==r.timeCompleted?(0,p.FD)(p.FK,{children:[(0,p.Y)(ez.$n,{ref:a,disabled:!0,text:y,colorway:"primary",css:uQ(f).desktopButton}),(0,p.Y)(tz.m_,{tooltip:y,css:uQ(f).mobileButton,children:(0,p.Y)(ez.$n,{ref:a,disabled:!0,text:"\uD83C\uDF89",colorway:"primary"})})]}):(0,p.FD)(p.FK,{children:[(0,p.Y)(ez.$n,{onClick:S,text:w?"Verifying":b,colorway:"primary",loading:w,css:uQ(f).desktopButton}),(0,p.Y)(tz.m_,{tooltip:b,css:uQ(f).mobileButton,children:(0,p.Y)(ez.$n,{iconLeft:(0,p.Y)(lN.A,{}),onClick:S,text:"",colorway:"primary",loading:w})})]}),(0,p.Y)(ek.a,{isOpen:c,onRequestClose:function(){return u(!1)},children:(0,p.Y)(uJ,{lessonSlug:r.lessonSlug,courseSlug:r.course.courseSlug})})]})};var u0=t(93333);function u1(e){var n=e.lesson,t=(0,et.EC)(),r=(0,et.RO)(),i=(0,sc.A)().showPrivateUpsell,o="Show tutorial",a=(0,p.Y)(u0.A,{}),l=function(){return r()};return t?(0,p.Y)(uX,{lesson:n}):(0,p.FD)(p.FK,{children:[(0,p.Y)(ez.$n,{colorway:"primary",iconLeft:a,text:o,css:uQ(i).desktopButton,onClick:l}),(0,p.Y)(tz.m_,{tooltip:o,css:uQ(i).mobileButton,children:(0,p.Y)(ez.$n,{colorway:"primary",iconLeft:a,text:"",onClick:l})})]})}var u2=t(75501),u4=t(43593),u5=t(14962),u3=t(19652),u6=t(44859),u8=function(e){return e.Welcome="Welcome",e.AiFirstWorkspace="AiFirstWorkspace",e.Assistant="Assistant",e.Agent="Agent",e.SidebarDock="SidebarDock",e.Run="Run",e.Deploy="Deploy",e}({}),u7=function(e){return"/public/videos/workspace-onboarding/".concat(e,".mp4")},u9=(0,eC.x)({tooltipContainer:[e_.wp.width("100%"),e_.wp.maxWidth(300),e_.wp.center,e_.wp.position.relative,e_.wp.colWithGap(8),e_.wp.pb(8)],image:[e_.wp.borderRadius(8)],textContent:[e_.wp.width("100%")]}),de={id:"AiFirstWorkspace",title:"Welcome to the Workspace",isModal:!0,content:function(){return(0,p.Y)(eG.S,{css:u9.tooltipContainer,"data-cy":"workspace-tour-welcome",children:(0,p.Y)(eW.EY,{css:u9.textContent,children:"There is where all the magic happens. Let's take a look around!"})})}},dn={id:"AiFirstWorkspace",title:"The AI-first Workspace",isModal:!0,content:function(){return(0,p.FD)(eG.S,{css:u9.tooltipContainer,"data-cy":"workspace-tour-welcome",children:[(0,p.FD)(eW.EY,{css:u9.textContent,children:["Your workspace has a powerful AI chat called"," ",(0,p.Y)("strong",{children:I.BP})," which can be used in all your projects."]}),(0,p.Y)(rS.A,{css:u9.image,src:"/public/images/ai/assistant.png",alt:"Assistant available",layout:"fixed",width:300,height:168})]})}},dt={id:"Assistant",title:"".concat(I.BP,": Chat & quick edits"),icon:function(){return(0,p.Y)(J.A,{size:16})},content:function(){return(0,p.FD)(eG.S,{css:u9.tooltipContainer,children:[(0,p.FD)(eW.EY,{css:u9.textContent,children:[(0,p.Y)("strong",{children:I.BP})," is a general AI chat for your project."]}),(0,p.Y)(u5.A,{src:u7("assistant-dark"),autoPlay:!0,loop:!0}),(0,p.Y)(u3.s,{css:u9.textContent,children:(0,p.FD)("p",{children:["Use ",(0,p.Y)("strong",{children:I.BP})," when you want to",(0,p.FD)("ul",{children:[(0,p.Y)("li",{children:"Chat with AI about any topic"}),(0,p.Y)("li",{children:"Request quick, one-off edits to code"}),(0,p.Y)("li",{children:"Ask questions about your project"})]})]})}),(0,p.FD)(eW.EY,{color:"dimmer",variant:"small",multiline:!1,children:[oQ.a7," cents per ",oQ.go]})]})},autoSkipIfNoTarget:!0},dr={id:"Agent",title:"".concat(I.g$,": Automated developer"),icon:function(){return(0,p.Y)(u6.A,{size:16})},content:function(){return(0,p.FD)(eG.S,{css:u9.tooltipContainer,children:[(0,p.FD)(eW.EY,{css:u9.textContent,children:[(0,p.Y)("strong",{children:I.g$})," is an automated developer that plans and generates entire projects, occasionally pausing to ask you for feedback."]}),(0,p.Y)(u5.A,{src:u7("agent-dark"),autoPlay:!0,loop:!0}),(0,p.Y)(u3.s,{css:u9.textContent,children:(0,p.FD)("p",{children:["Use ",(0,p.Y)("strong",{children:I.g$})," when you want to",(0,p.FD)("ul",{children:[(0,p.Y)("li",{children:"Build a new project from scratch"}),(0,p.Y)("li",{children:"Generate a build plan for your project"}),(0,p.Y)("li",{children:"Make complex, multi-step changes"})]})]})}),(0,p.FD)(eW.EY,{color:"dimmer",variant:"small",multiline:!1,children:[oQ.ri," cents per ",oQ.v7]})]})},autoSkipIfNoTarget:!0},di={id:"SidebarDock",title:"Dock: Open files & tools",icon:function(){return(0,p.Y)(i$,{size:16})},content:function(){return(0,p.FD)(eG.S,{css:u9.tooltipContainer,children:[(0,p.Y)(eW.EY,{css:u9.textContent,children:"In addition to AI tools, you can access code files and other workspace features via the Dock."}),(0,p.Y)(u5.A,{src:u7("sidebar"),autoPlay:!0,loop:!0}),(0,p.FD)(eW.EY,{css:u9.textContent,children:["Notice that ",(0,p.Y)("strong",{children:"Files"})," has its own button at the top left."]})]})}},da={id:"Run",title:"Run Button: Preview your App",icon:function(){return(0,p.Y)(iY.A,{size:16})},content:function(){return(0,p.FD)(eG.S,{css:u9.tooltipContainer,children:[(0,p.FD)(eW.EY,{css:u9.textContent,children:["When working with ",I.BP,", you can click the"," ",(0,p.Y)("strong",{children:"Run button"})," at any time to see its output."]}),(0,p.Y)(u5.A,{src:u7("run-button"),autoPlay:!0,loop:!0})]})},advanceOnTargetClick:!0},dl="workspace-desktop-tour-2024",ds=t(11262),dc=t(6118),du=t(38676);function dd(e){var n=e.repl,t=e.currentUser,r=e.hideRightActions;return(0,p.FD)(eG.S,{row:!0,gap:6,align:"center",justify:"end",css:e_.wp.noDragRegion,children:[(0,p.Y)(ly,{}),r?null:(0,p.FD)(p.FK,{children:[(0,p.Y)(ux,{}),(0,p.Y)(df,{repl:n})]}),(0,p.Y)(dh,{currentUser:t,hideNotifications:r})]})}var dp={socialGroup:(0,tB.AH)([e_.wp.rowWithGap(1),e_.wp.align.stretch,e_.wp.borderRadius(),e_.wp.overflow("hidden")]),invitePopover:(0,tB.AH)([e_.wp.width(400)]),inviteButton:(0,tB.AH)((0,B._)((0,ez.gX)({size:16})).concat([so.b.filled,(0,nt._)({borderTopLeftRadius:0,borderBottomLeftRadius:0},e_.$_.max("tabletMax"),{svg:[e_.wp.mr(0)],span:[e_.wp.display.none]})]))};function df(e){var n,t,r,i,o,a,l,s,c,u,f,m,g,v,w,y,b,S,Y,A,x,C,_,k=e.repl,D=(0,d._)((0,h.useState)(!1),2),E=D[0],R=D[1],I=(0,lI.Os)(u2.C.id,u2.j.Share),F=(0,d._)((0,h.useState)(!1),2),T=F[0],P=F[1],L=(0,et.Us)(),U=(w=(0,et.q5)(),y=(0,er.A)().presence,b=(0,ed.w1)(),S=(0,eZ.A)(w),(0,h.useCallback)(function(e){var n=e.username,t=e.id,r=y.getFollowedUser();if((null==r?void 0:r.username)===n)return void y.unfollowUser();y.followUser(n);var i=y.getActiveFileForUser(t),o=b();i&&i!==o&&S.current({path:i})},[S,b,y])),N=(0,tb.oR)(),O=(0,h.useRef)(null),M=(0,h.useRef)(null),B=(0,h.useRef)(E&&(null==I?void 0:I.isActive));(0,h.useEffect)(function(){!B.current||(null==I?void 0:I.isActive)||R(!1),B.current=E&&(null==I?void 0:I.isActive)},[I,E]),(0,h.useEffect)(function(){if(null==I?void 0:I.isActive){if(E&&M.current){null==I||I.tourRef(M.current);return}I.tourRef(O.current)}},[I,E,M]);var H=(null==(Y=k.owner)?void 0:Y.__typename)==="Team",z=k.authorizations.viewPermissions.isAuthorized,W=(null==(A=k.org)?void 0:A.type)==="team"?"Access":"Invite",G=(null==k||null==(C=k.authorizations)||null==(x=C.viewDeploymentConfig)?void 0:x.isAuthorized)&&!N;(0,eb.SJ)(function(){return[iD.toggleInviteDialog.id,function(){return R(function(e){return!e})}]},[R]);var j=(0,eb.Jn)(iD.toggleInviteDialog.id);eI({match:K.G2,data:{type:"action",label:"Invite",icon:(0,p.Y)(ue.A,{}),description:"Open invite dialog",keyboardShortcut:j,run:function(){R(!0)}}});var Z=(n=(0,ch.i$)(),t=(0,ch.cF)(),r=!!n||null!=t,i=(0,et.Us)(),o=function(){i({pane:{type:"deployments"},activate:!0})},a=(0,lI.Jw)(dl,u8.Deploy),l=(0,lI.Os)(u4.IW.id,u4.Gp.OpenDeployments,{onEnter:function(){r&&(o(),l.goto(u4.Gp.MonitorDeployment))}}),s=(0,lI.Os)(u4._t.id,u4.ij.OpenDeployments,{onEnter:function(){r&&(o(),s.goto(u4.ij.MonitorDeployment))}}),c=(0,e9.S)([a,l.tourRef,s.tourRef],{breadcrumb:"client/replEnvironmentDesktop/Header/Right.tsx:361"}),u=(0,lI.Jw)(u4.IW.id,u4.Gp.OpenMultiplayer),f=(0,lI.Jw)(u4._t.id,u4.ij.OpenMultiplayer),m=(0,e9.S)([u,f],{breadcrumb:"client/replEnvironmentDesktop/Header/Right.tsx:380"}),g=(0,lI.Jw)(u4.IW.id,u4.Gp.InviteCollaborator),v=(0,lI.Jw)(u4._t.id,u4.ij.InviteCollaborator),{deployButton:c,inviteButton:m,invitePopover:(0,e9.S)([g,v],{breadcrumb:"client/replEnvironmentDesktop/Header/Right.tsx:396"})}),q=(0,lI.qt)(),$=(0,e9.S)([O,Z.inviteButton],{breadcrumb:"client/replEnvironmentDesktop/Header/Right.tsx:211"}),J=(0,e9.S)([M,Z.invitePopover],{breadcrumb:"client/replEnvironmentDesktop/Header/Right.tsx:217"});return(0,p.FD)(p.FK,{children:[(null==k?void 0:k.lesson)?(0,p.Y)(u1,{lesson:k.lesson}):null,(0,p.FD)(eD.ui,{css:dp.socialGroup,background:"root",children:[(0,p.Y)(uA,{onAvatarClick:U}),z?(0,p.Y)(p.FK,{children:(0,p.Y)(eG.S,{innerRef:$,css:{"&:only-child .invite-button":[e_.wp.borderRadius()]},children:(0,p.FD)(lW.Wv,{isOpen:E,placement:"bottom end",label:W,css:dp.invitePopover,onOpenChange:function(e){if(E&&!T){R(!1),q();return}e&&(0,V.u4)(V.AZ.INVITE_MODAL_OPENED,{replId:k.id,source:"replEnvironment"}),R(e)},noArrow:!0,children:[(0,p.FD)(ez.SC,{css:dp.inviteButton,className:"invite-button",children:[(0,p.Y)(du.A,{}),(0,p.Y)(eW.EY,{children:W})]}),(0,p.Y)("div",{ref:J,children:(0,p.Y)(ua,{handleUpgradeTriggered:function(e){return P(e)},replId:k.id,isTeamRepl:H,org:null!=(_=k.org)?_:void 0})})]})})}):null]}),G&&k?(0,p.Y)(eG.S,{innerRef:Z.deployButton,children:(0,p.Y)(uM,{})}):null,N?(0,p.Y)(ez.$n,{text:"Extension Devtools",iconLeft:(0,p.Y)(tx.A,{}),onClick:function(){L({pane:{type:"extensionDevtools"}})}}):null]})}function dh(e){var n=e.currentUser,t=e.hideNotifications,r=(0,f.useRouter)(),i=(0,r0.A)();return(0,p.Y)(p.FK,{children:i?(0,p.Y)(p.FK,{children:(0,p.Y)(cm.L,{})}):(0,p.FD)(p.FK,{children:[t?null:(0,p.Y)(eG.S,{row:!0,children:(0,p.Y)(dc.A,{pathname:r.pathname,showCount:!1})}),(0,p.Y)(ds.Ay,{currentUser:n,hideTeamInHeader:!0})]})})}function dm(){var e=(0,g._)(["\n  query WorkspaceRunButton($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        title\n        rootOriginReplUrl\n        source {\n          release {\n            id\n            repl {\n              id\n              title\n              owner {\n                ... on User {\n                  id\n                  username\n                }\n                ... on Team {\n                  id\n                  username\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n    currentUser {\n      id\n    }\n  }\n"]);return dm=function(){return e},e}var dg={},dv=(0,v.J1)(dm()),dw=t(52017),dy=(r={},(0,nt._)(r,ip.ll.IDLE,"Run"),(0,nt._)(r,ip.ll.RUNNING,"Stop"),(0,nt._)(r,ip.ll.STOPPING,"Stopping"),(0,nt._)(r,ip.ll.OFFLINE,"Working"),(0,nt._)(r,ip.ll.BEFORE_RUN,"Working"),r),db=t(6598),dS=t(77964),dY=t(18942);function dA(e){return e[e.length-1]}var dx=(0,eC.x)({root:[e_.wp.colWithGap(4)],menuItem:[],menuItemSelector:[e_.wp.height(28),e_.wp.pl(4),{flex:1,transition:"none",span:{flex:1,textAlign:"left"}}],iconInvisible:[e_.wp.visibility.hidden],playControl:[e_.wp.height(28),e_.wp.width(28),e_.wp.color.foregroundDimmer,e_.wp.hover(e_.wp.color.foregroundDefault)],metadata:[],pid1MenuItem:[e_.wp.py(4),e_.wp.flex.row,e_.wp.justify.spaceBetween,e_.wp.borderRadius(),e_.wp.align.center,e_.wp.rowWithGap(8),e_.wp.cursor.pointer,{"&[data-hovered],&[data-focused]":{backgroundColor:tH.LU.interactiveBackground},"&[data-selected]":{backgroundColor:tH.LU.interactiveBackgroundActive},"&[aria-disabled]":{cursor:"not-allowed"}}]});function dC(e){var n=e.setDefault,t=e.onAction,r=e.name,i=e.isRunning,o=e.isRunButton?null:{css:dx.iconInvisible},a=(0,dw.y$)(r);return(0,p.FD)(eG.S,{row:!0,"aria-label":r,children:[(0,p.Y)(ez.$n,{css:dx.menuItemSelector,onClick:function(){return n(r)},text:r,iconLeft:(0,p.Y)(lN.A,(0,m._)({},o)),variant:"nofill"}),(0,p.Y)(t7.K0,{css:dx.playControl,alt:"".concat(i?dy[ip.ll.RUNNING]+" ".concat(a):dy[ip.ll.IDLE]+" ".concat(a)),onClick:t,children:i?(0,p.Y)(dY.A,{}):(0,p.Y)(dS.A,{})})]})}function d_(){var e,n,t,r,i,o=(0,iv.g3)(),a=(0,iv.wS)(),l=(0,iv.z1)(),s=(0,iv.OK)(),c=(0,iv.If)(),u=(0,iv.MP)(),d=null==o?void 0:o.workflowId,f=!!(null==s||null==(t=s.workflow)||null==(n=t.find(function(e){return e.name===d}))||null==(e=n.metadata)?void 0:e.generated),m=null==s||null==(i=s.workflow)||null==(r=i.find(function(e){var n;return null==(n=e.metadata)?void 0:n.dotReplitRun}))?void 0:r.name,g=(0,db.I)(function(e){return function(n){return u(ip.QG.RUN_BUTTON_CLICKED),(0,V.u4)(V.AZ.WORKFLOW_RAN,{source:"dropdownMenu"}),e.workflows.runWorkflow.rpc({workflowId:n})}},[u]),v=(0,db.I)(function(e){return function(n){return(0,V.u4)(V.AZ.WORKFLOW_STOPPED,{source:"dropdownMenu"}),e.workflows.stopRun.rpc({runId:n})}},[]),w=function(e){(0,V.u4)(V.AZ.RUN_BUTTON_DEFAULT_CHANGED,{runner:e?"workflows":"pid1"}),l(e),a()},y=(0,h.useMemo)(function(){var e;return(null==s?void 0:s.workflow)&&null!=(e=null==s?void 0:s.workflow.filter(function(e){var n,t;return!(null!=(t=null==(n=e.metadata)?void 0:n.generated)&&t)}).map(function(e){var n=Object.values(null!=c?c:{}).filter(function(n){return n.workflow.name===e.name}).sort(function(e,n){return e.startTime-n.startTime});return{workflowConfig:e,workflowRunState:dA(n)}}))?e:[]},[s,c]),b=(0,h.useMemo)(function(){if(m)return dA(Object.values(null!=c?c:{}).filter(function(e){return m===e.workflow.name}).sort(function(e,n){return e.startTime-n.startTime}))},[c,m]);return(0,p.FD)(eG.S,{"aria-label":"Workflows",gap:4,children:[(0,p.Y)(eW.EY,{variant:"small",color:"dimmest",children:"Workflows"}),(0,p.FD)(eG.S,{children:[m?(0,p.Y)(dC,{isRunButton:f,isRunning:(null==b?void 0:b.step)==="RUNNING",onAction:function(){(null==b?void 0:b.step)!=="RUNNING"?null==g||g(m):b&&(null==v||v(b.runId))},setDefault:function(e){w()},name:m}):null,y.map(function(e,n){var t,r=e.workflowConfig,i=e.workflowRunState,o=(null==i?void 0:i.step)==="RUNNING";return(0,p.Y)(dC,{onAction:function(){o?i&&(null==v||v(i.runId)):null==g||g(r.name)},setDefault:w,name:r.name,isRunning:o,isRunButton:r.name===d},r.name+"-"+n+"-"+(null!=(t=null==i?void 0:i.step)?t:"not-started"))})]})]})}var dk=t(2296),dD=t(95794),dE=[e_.wp.rowWithGap(4),e_.wp.justify.center,e_.wp.align.center,e_.wp.height(32),e_.wp.minWidth(48),e_.wp.px(8),e_.wp.borderRadius(4),e_.wp.cursor.pointer,e_.wp.position.relative,e_.wp.fontWeight.medium,e_.wp.zIndex(1)],dR="\ntransform 0.2s linear,\nopacity 0.2s linear\n",dI=(0,eC.x)({wrapper:[e_.wp.noDragRegion,e_.wp.position.relative,e_.wp.borderRadius("default")],runButtonLabel:[e_.wp.display.none,(0,nt._)({},"@media (min-width: ".concat(op.LO.tabletMax,"px)"),[e_.wp.display.block])],runButtonIdle:(0,B._)(dE).concat([e_.wp.color.accentPositiveStrongest,e_.wp.backgroundColor.accentPositiveDimmer,{border:"1px solid",borderColor:"transparent","&:hover":[{color:"white"},e_.wp.backgroundColor.accentPositiveDefault],"&:active":[{borderColor:tH.LU.accentPositiveStrongest}],"&:disabled":[e_.wp.backgroundColor.backgroundHigher],":focus-visible":{outlineColor:"".concat(tH.LU.accentPositiveStrongest)}}]),runButtonRunning:(0,B._)(dE).concat([e_.wp.color.foregroundDimmer,e_.wp.backgroundColor.backgroundHighest,{border:"1px solid",borderColor:"transparent","&:hover":[e_.wp.color.foregroundDefault,e_.wp.backgroundColor.greyDimmest],"&:active":[{borderColor:tH.LU.accentPrimaryDefault}]}]),runButtonRunByAgent:(0,B._)(dE).concat([e_.wp.color.foregroundDefault,e_.wp.backgroundColor.blurpleDimmer,e_.wp.maxWidth(68),{border:"1px solid",borderColor:"transparent","&:before":[{content:'"Running"'}],"&:hover":[e_.wp.color.foregroundDimmer,e_.wp.backgroundColor.blurpleDimmest,e_.wp.minWidth(68),{"&::before":[{content:'"Stop"'}]}],"&:active":[{borderColor:tH.LU.accentPrimaryDefault}]}]),dropDown:[{'&[data-visible="true"]':{visibility:"visible",maxWidth:"100px",transform:"translateX(-4px)",opacity:1},'&[data-visible="false"]':{visibility:"hidden",maxWidth:0,transform:"translateX(-20px)",opacity:0},zIndex:0,transition:dR}],dropDownButton:[e_.wp.reset.button,so.b.filled,e_.wp.color.foregroundDimmer,e_.wp.height(32),e_.wp.minWidth(20),e_.wp.flex.column,e_.wp.justify.center,e_.wp.pr(2),e_.wp.pl(4),e_.wp.borderRadius(0,"default","default",0)],agentBanner:[e_.wp.colorMixBg(tH.LU.blurpleDimmest,"transparent",.6),e_.wp.borderRadius("default",0,0,"default"),{'&[data-visible="false"]':{visibility:"hidden",transform:"translateX(30px)",position:"absolute",maxWidth:0,opacity:0},'&[data-visible="true"]':{transform:"translateX(4px)",opacity:1,visibility:"visible",justifyContent:"center",height:"32px",maxWidth:"32px",paddingY:"4px",padding:"4px 8px 4px 6px"},transition:dR}],popoverWrapper:[e_.wp.minWidth(240)],popoverSection:[e_.wp.p(8),{":not(:last-of-type)":{borderBottom:"1px solid "+tH.LU.outlineDimmest}}],brokenNixButton:[e_.wp.backgroundColor.orangeDimmest,e_.wp.color.orangeStrongest,e_.wp.height(32),e_.wp.p(8),e_.wp.borderRadius(4),e_.wp.cursor.pointer,{border:"1px solid",borderColor:"transparent","&:hover":[e_.wp.backgroundColor.orangeDimmer],"&:active":[{borderColor:tH.LU.orangeDefault}]}],brokenNixButtonLabel:[e_.wp.display.none,(0,nt._)({},"@media (min-width: ".concat(op.LO.tabletMax,"px)"),[e_.wp.display.block])]});function dF(e){var n=e.stop,t=e.cancel;return(0,p.FD)(eG.S,{children:[(0,p.Y)(eW.EY,{children:"Stopping your project while the agent is working can lead to unexpected interruptions that incur additional costs. Are you sure you want to stop?"}),(0,p.FD)(eG.S,{pt:12,row:!0,gap:12,justify:"end",children:[(0,p.Y)(ez.$n,{text:"Cancel",onClick:t}),(0,p.Y)(ez.$n,{iconLeft:(0,p.Y)(dY.A,{}),text:"Stop",onClick:function(){n(),t()},colorway:"negative"})]})]})}function dT(e){var n=e.isRunning,t=e.isAgentRunning,r=e.isDisabled,i=e.handleRunButtonClick,o=(0,d._)((0,h.useState)(!1),2),a=o[0],l=o[1];return t?(0,p.FD)(p.FK,{children:[(0,p.Y)(ek.a,{isOpen:a,onRequestClose:function(){return l(!1)},children:(0,p.Y)(dF,{stop:i,cancel:function(){return l(!1)}})}),(0,p.Y)(eG.S,{tag:"button",css:dI.runButtonRunByAgent,onClick:function(){return l(!0)}})]}):n?(0,p.FD)(eG.S,{tag:"button",css:dI.runButtonRunning,onClick:i,children:[(0,p.Y)(dY.A,{size:16}),(0,p.Y)(eW.EY,{multiline:!1,css:dI.runButtonLabel,children:dy[ip.ll.RUNNING]})]}):(0,p.FD)(eG.S,{tag:"button",disabled:r,css:dI.runButtonIdle,onClick:i,children:[(0,p.Y)(dS.A,{size:16}),(0,p.Y)(eW.EY,{multiline:!1,css:dI.runButtonLabel,children:dy[ip.ll.IDLE]})]})}function dP(e){var n,t,r,i,o,a,l,s,c,u,f,g,v,y,b,S=e.attachTourRefs,Y=(v={variables:{id:(0,eB.A)()}},y=(0,m._)({},dg,v),w.I(dv,y)).data,A=(null==Y?void 0:Y.repl.__typename)==="Repl"?Y.repl:null,x=(n=(0,er.A)().runner,t=(0,lI.kD)(),r=(0,lI.oZ)(),i=(0,h.useCallback)(function(){var e=n.getRunState();null==t&&(e===ip.ll.RUNNING?r("user"):e===ip.ll.BEFORE_RUN&&r("async"))},[n,t,r]),o=(0,lI.Os)(u2.C.id,u2.j.Run),a=(0,lI.Os)(dl,u8.Run),l=(0,lI.Os)(u4.IW.id,u4.Gp.RunApp,{onEnter:i}),s=(0,lI.Os)(u4.IW.id,u4.Gp.RunAppWithGeneratedCode,{onEnter:i}),c=(0,lI.Os)(u4._t.id,u4.ij.RunApp),u=(0,lI.Os)(u4._t.id,u4.ij.RunAppWithGeneratedCode),f=(0,lI.Os)(u4._t.id,u4.ij.RunAppWithNewImages),g=(null==o?void 0:o.isActive)||(null==a?void 0:a.isActive)||(null==l?void 0:l.isActive)||(null==s?void 0:s.isActive)||(null==c?void 0:c.isActive)||(null==u?void 0:u.isActive)||(null==f?void 0:f.isActive),{tourRefs:(0,e9.S)([o.tourRef,a.tourRef,l.tourRef,s.tourRef,c.tourRef,u.tourRef,f.tourRef],{breadcrumb:"client/replEnvironmentDesktop/Header/DynamicRunButton.tsx:138"}),isAnyTourStepActive:g}).tourRefs,C=(0,eb.Jn)(iD.run.id),_=(0,d._)((0,h.useState)(!1),2),k=_[0],D=_[1],E=(0,et.Us)(),R=(0,iv.g3)(),I=null!=(b=null==R?void 0:R.workflowId)?b:dw.Ov,F=(0,dk.A)(),T=(0,iv.lO)(),P=T.isRunning,L=T.isAgentRunning,U=T.isOffline,N=T.isDisabled,O=T.isHtmlRepl,M=!O&&!U,B=(0,iv.qP)();(0,h.useEffect)(function(){L&&k&&D(!1)},[L,k]);var H=(0,h.useCallback)(function(){if(A){var e,n,t,r,i,o,a;(0,V.u4)(V.AZ.PROJECT_RAN,{placement:"primary_btn",replId:A.id,replTitle:A.title,rootOriginReplUrl:A.rootOriginReplUrl,templateTitle:null==(t=A.source)||null==(n=t.release)||null==(e=n.repl)?void 0:e.title,templateOwner:null==(a=A.source)||null==(o=a.release)||null==(i=o.repl)||null==(r=i.owner)?void 0:r.username})}(0,V.u4)(V.AZ.RUN_BUTTON_CLICKED,{source:"header",runner:O?"html":"workflows"}),B()},[A,B,O]),z=(0,h.useCallback)(function(){(0,V.u4)(V.AZ.WORKFLOWS_SETTINGS_OPENED,{source:"runButton"}),E({pane:{type:"workflows"}}),D(!1)},[E]),W=(0,d._)((0,h.useState)(!1),2),G=W[0],j=W[1],Z=(0,h.useCallback)(function(e){E({pane:{type:"codeEditor",data:{path:e}}})},[E]);return(null==F?void 0:F.status)==="error"||(null==F?void 0:F.status)==="rebuilding-after-error"?(0,p.FD)(p.FK,{children:[(0,p.FD)(eG.S,{align:"center",css:dI.brokenNixButton,row:!0,gap:8,tag:"button",onClick:function(){j(!0)},children:["error"===F.status?(0,p.Y)(sm.A,{}):null,"rebuilding-after-error"===F.status?(0,p.Y)(lO.A,{}):null,(0,p.Y)(eG.S,{css:dI.brokenNixButtonLabel,children:"App is in recovery mode"})]}),(0,p.Y)(dD.E,{isOpen:G,setIsOpen:j,nixState:F,openFile:Z})]}):(0,p.FD)(eG.S,{innerRef:void 0!==S&&S?x:void 0,css:dI.wrapper,row:!0,align:"center",children:[(0,p.Y)(eG.S,{css:dI.agentBanner,"data-visible":L?"true":"false",children:(0,p.Y)(u6.A,{})}),(0,p.Y)(tz.m_,{placement:"bottom",tooltip:function(e){var n=e.isHtmlRepl,t=e.isOffline,r=e.isAgentRunning,i=e.isDisabled,o=e.isRunning,a=e.runButtonName,l=e.shortcut;if(n)return"Run app";if(t)return"Connecting to the workspace";if(r)return"Agent is running your App";if(i)return"Run button is not configured";var s=(0,dw.y$)(a);return(0,p.FD)(eG.S,{px:4,gap:4,justify:"center",align:"center",children:[a?(0,p.Y)(eW.EY,{color:"dimmer",variant:"small",children:o?dy[ip.ll.RUNNING]+" all workflows":dy[ip.ll.IDLE]+" ".concat(s)}):null,l?(0,p.Y)(eb._y,{keyCombo:l,fontSize:12}):null]})}({isHtmlRepl:O,isRunning:P,isAgentRunning:L,isDisabled:N,isOffline:U,runButtonName:I,shortcut:C}),children:U?(0,p.FD)(eG.S,{tag:"button",disabled:!0,css:dI.runButtonRunning,children:[(0,p.Y)(lO.A,{size:16}),(0,p.Y)(eW.EY,{multiline:!1,css:dI.runButtonLabel,children:"Loading"})]}):(0,p.Y)(eG.S,{dataCy:"ws-run-btn",children:(0,p.Y)(dT,{isRunning:P,isAgentRunning:L,isDisabled:N,handleRunButtonClick:H})})}),M?(0,p.Y)(eG.S,{css:dI.dropDown,"data-visible":L?"false":"true",children:(0,p.FD)(lW.Wv,{isOpen:k,onOpenChange:function(e){(0,V.u4)(V.AZ.RUN_BUTTON_DROPDOWN_OPENED),D(e)},label:"Workflows",placement:"bottom start",noArrow:!0,children:[(0,p.Y)(eG.D.button,{css:dI.dropDownButton,children:(0,p.Y)(tz.m_,{tooltip:"Configure Run Button",children:(0,p.Y)(as.A,{})})}),(0,p.FD)(eG.S,{css:dI.popoverWrapper,children:[(0,p.Y)(eG.S,{css:dI.popoverSection,children:(0,p.Y)(d_,{})}),(0,p.Y)(eG.S,{css:dI.popoverSection,children:(0,p.Y)(ez.$n,{text:"Manage Workflows",onClick:z,iconLeft:(0,p.Y)(iu.A,{})})})]})]})}):null]})}var dL=(0,rO.v)(["opacity","pointerEvents"]),dU=dL.cssVars,dN=dL.styleTokens,dO=(0,tB.i7)({from:{transform:"translateY(-20%)"},to:{transform:"translateY(0)"}}),dM=(0,tB.i7)({from:{opacity:0},to:{opacity:1}}),dB={root:(0,tB.AH)([e_.wp.width("100%"),e_.wp.top(0),e_.wp.left(0),e_.wp.py(8),e_.wp.px(12),e_.wp.pl(8),e_.wp.position.absolute,e_.wp.dragRegion,{userSelect:"none",display:"grid",gridTemplateColumns:"1fr max-content 1fr",alignItems:"center",gap:8,pointerEvents:dN.pointerEvents,opacity:dN.opacity},{"@media(prefers-reduced-motion: no-preference)":{animation:"".concat(dO," 0.2s ease-in-out, ").concat(dM," 0.2s ease-in-out")},animation:"".concat(dM," 0.2s ease-in-out")}]),center:(0,tB.AH)([e_.wp.noDragRegion,e_.wp.position.relative,e_.wp.rowWithGap(8),e_.wp.align.center])},dH={windowsOSRoot:(0,tB.AH)([dB.root,e_.wp.dragRegion,{paddingRight:lm.xn}])};let dz=(0,h.memo)(function(e){var n,t,r,i=e.isAgentOnboarding,o=void 0!==i&&i,a=(n={variables:{id:(0,eB.A)()},context:{noBatch:!0}},t=(0,m._)({},ld,n),w.I(lh,t)).data,l=(null==a?void 0:a.repl.__typename)==="Repl"?a.repl:null,s=null==a?void 0:a.currentUser,c=(0,r0.A)(),u=(0,lv.d0)(),d=(0,et.Bm)(),f="centered"===d||"centeredVisualPlanner"===d,h=(0,lg.W)(),g="default"!==h,v=(0,I.jt)(),y=(0,I.Ik)(),b=v&&"visualPlanner"===h&&"approved"!==y;return l&&s?(0,p.FD)(eG.S,{style:(r={},(0,nt._)(r,dU.opacity,!g&&f?.5:1),(0,nt._)(r,dU.pointerEvents,!g&&f?"none":"all"),r),tag:"header",css:c&&u?dH.windowsOSRoot:dB.root,children:[(0,p.Y)(cr,{repl:l,currentUser:s,isAgentOnboarding:o,isAgentPlanning:b}),(0,p.Y)(dW,{isAgentCentered:f,isAgentOnboarding:o,isAgentPlanning:b}),(0,p.Y)(dd,{repl:l,currentUser:s,hideRightActions:f||o||b})]}):null});function dW(e){var n=e.isAgentCentered,t=e.isAgentOnboarding;return e.isAgentPlanning?(0,p.Y)(cf,{}):n||t?(0,p.Y)(eG.S,{}):(0,p.Y)(dP,{attachTourRefs:!0})}var dG=(0,rO.v)(["opacity","pointerEvents"]),dV=dG.cssVars,dj=dG.styleTokens,dZ=(0,tB.i7)({from:{transform:"translateY(-20%)"},to:{transform:"translateY(0)"}}),dq=(0,tB.i7)({from:{opacity:0},to:{opacity:1}}),dK={root:(0,tB.AH)([e_.wp.width("100%"),e_.wp.top(0),e_.wp.left(0),e_.wp.px(12),e_.wp.pl(8),e_.wp.pt(4),e_.wp.position.absolute,e_.wp.dragRegion,e_.wp.noSelect,e_.wp.flex.row,e_.wp.justify.spaceBetween,{alignItems:"center",pointerEvents:dj.pointerEvents,opacity:dj.opacity},{"@media(prefers-reduced-motion: no-preference)":{animation:"".concat(dZ," 0.2s ease-in-out, ").concat(dq," 0.2s ease-in-out")},animation:"".concat(dq," 0.2s ease-in-out")}]),left:(0,tB.AH)([e_.wp.minWidth(100),e_.wp.align.start]),right:(0,tB.AH)([e_.wp.minWidth(100),e_.wp.align.end])};let d$=(0,h.memo)(function(e){var n,t=e.doesBonsaiSupportWorkspace2,r=e.isAgentOnboarding,i=(0,et.Bm)(),o="centered"===i||"centeredVisualPlanner"===i||void 0!==r&&r;return t?(0,p.FD)(eG.S,{style:(n={},(0,nt._)(n,dV.opacity,o?.5:1),(0,nt._)(n,dV.pointerEvents,o?"none":"all"),n),tag:"header",css:dK.root,children:[(0,p.Y)(eG.S,{css:dK.left}),o?(0,p.Y)(eG.S,{}):(0,p.Y)(dP,{attachTourRefs:!0}),(0,p.Y)(eG.S,{css:dK.right,children:o?null:(0,p.Y)(ux,{})})]}):null});var dJ=t(19882);function dQ(){var e=(0,g._)(["\n  query BrowserNotifications($username: String!) {\n    user: userByUsername(username: $username) {\n      id\n      image\n    }\n  }\n"]);return dQ=function(){return e},e}var dX=(0,v.J1)(dQ());function d0(){return(d0=(0,H._)(function(e){var n,t;return(0,z.YH)(this,function(r){switch(r.label){case 0:if(null===eH.V)return[2];return[4,eH.V.query({query:dX,variables:{username:e}})];case 1:return[2,null==(t=r.sent().data)||null==(n=t.user)?void 0:n.image]}})})).apply(this,arguments)}function d1(){return"Notification"in window?"true"===tT.A.get(d5,"string")?"dismissed":window.Notification.permission:"denied"}function d2(){return(d2=(0,H._)(function(){return(0,z.YH)(this,function(e){try{window.Notification.requestPermission().then()}catch(e){return[2,new Promise(function(e){window.Notification.requestPermission(function(n){e(n)})})]}return[2,window.Notification.requestPermission()]})})).apply(this,arguments)}function d4(){return(d4=(0,H._)(function(){return(0,z.YH)(this,function(e){switch(e.label){case 0:return[4,function(){return d2.apply(this,arguments)}()];case 1:return e.sent(),d3(!1),[2]}})})).apply(this,arguments)}var d5="notifications/dismissedModal";function d3(e){tT.A.set(d5,String(e))}var d6={};function d8(e){return d7.apply(this,arguments)}function d7(){return(d7=(0,H._)(function(e){var n,t,r,i,o,a,l,s,c,u,d;return(0,z.YH)(this,function(p){switch(p.label){case 0:if(n=e.title,t=e.body,r=e.badge,i=e.icon,o=e.iconByUsername,a=e.tag,l=e.onClick,c=void 0===(s=e.cacheDuration)?0:s,!document.hidden&&document.hasFocus()||"granted"!==d1()||(u=Date.now(),a in d6&&d6[a]+c>u))return[2];if(!o)return[3,2];return[4,function(e){return d0.apply(this,arguments)}(o)];case 1:i=p.sent(),p.label=2;case 2:return d=new window.Notification(n,{body:t,badge:r||"/public/images/logo-grayscale.png",icon:i||"/public/images/icon-square.png",tag:a}),setTimeout(function(){d.close()},1e4),d.addEventListener("click",function(){window.focus(),d.close()}),l&&d.addEventListener("click",l),d6[a]=u,[2]}})})).apply(this,arguments)}var d9=t(36658),pe=t(43177),pn={base:(0,tB.AH)([e_.wp.position.absolute,e_.wp.borderRadius(8),{pointerEvents:"none",border:"1px solid",transitionProperty:"border, box-shadow",transitionDuration:op.Ds.duration,transitionTimingFunction:op.Ds.timingFunction}]),floating:(0,tB.AH)([{borderColor:tH.LU.outlineDimmest},e_.wp.shadow(2)]),dragging:(0,tB.AH)([{borderColor:tH.LU.outlineStronger},e_.wp.shadow(3)]),active:(0,tB.AH)([{borderColor:tH.LU.outlineDimmer}])};let pt=(0,h.memo)(function(e){var n=e.paneId,t=(0,et.h7)(n),r=(0,iK.A)(t.isFloating),i=(0,iK.A)(t.isActive),o=(0,iK.A)(t.isBeingDragged),a=(0,iK.A)(t.hasBorder),l=(0,iK.A)(t.headerHeight);return a&&r?(0,p.Y)(eG.S,{style:{width:"calc(100% + 2px)",left:-1,height:"calc(100% + ".concat(l,"px + 2px)"),top:-(l+1)},css:[pn.base,r&&pn.floating,i&&pn.active,o&&pn.dragging]}):null});var pr=eG.D.div,pi=(0,tB.AH)([e_.wp.width("100%"),e_.wp.position.absolute,e_.wp.left(0),{cursor:"ns-resize",zIndex:1,":hover":{transform:"scaleY(4)"}}]),po=(0,tB.AH)([e_.wp.height("100%"),e_.wp.position.absolute,e_.wp.top(0),{cursor:"ew-resize",zIndex:1,":hover":{transform:"scaleX(4)"}}]),pa=(0,tB.AH)([e_.wp.position.absolute,{zIndex:2,transform:"scale(2)",":hover":{transform:"scale(4)"}}]);function pl(e){return{transformOrigin:"".concat("topLeft"===e||"bottomLeft"===e?"right":"left"," ").concat("topLeft"===e||"topRight"===e?"bottom":"top")}}var ps={topLeft:(0,tB.AH)([e_.wp.top(0),e_.wp.left(0),pl("topLeft")]),topRight:(0,tB.AH)([e_.wp.top(0),e_.wp.right(0),pl("topRight")]),bottomLeft:(0,tB.AH)([e_.wp.bottom(0),e_.wp.left(0),pl("bottomLeft")]),bottomRight:(0,tB.AH)([e_.wp.bottom(0),e_.wp.right(0),pl("bottomRight")])};function pc(e){var n=e.edge,t=e.size,r=e.onPointerDown;if("top"===n||"bottom"===n)return(0,p.Y)(pr,{onPointerDown:r,style:(0,nt._)({height:t},n,-t),css:pi});if("right"===n||"left"===n)return(0,p.Y)(pr,{onPointerDown:r,style:(0,nt._)({width:t},n,-t),css:po});var i="topLeft"===n||"bottomRight"===n?"nwse-resize":"nesw-resize";return(0,p.Y)(pr,{onPointerDown:r,style:{height:t,width:t,cursor:i},css:[pa,ps[n]]})}var pu=["bottom","right","left","bottomRight","bottomLeft"],pd=(0,h.memo)(function(e){var n=(0,et.e7)();return(0,p.Y)(p.FK,{children:pu.map(function(t){return(0,p.Y)(pc,{size:8,edge:t,onPointerDown:function(r){(0,tL.j)(r,{start:function(){n({type:"start",paneId:e.paneId,edge:t})},move:function(e){n({type:"update",moveDelta:e.delta})},end:function(){n({type:"end"})}})}},t)})})}),pp=["top","right","left","topRight","topLeft"],pf=(0,h.memo)(function(e){var n=(0,et.e7)();return(0,p.Y)(p.FK,{children:pp.map(function(t){return(0,p.Y)(pc,{size:8,edge:t,onPointerDown:function(r){(0,tL.j)(r,{start:function(){n({type:"start",paneId:e.paneId,edge:t})},move:function(e){n({type:"update",moveDelta:e.delta})},end:function(){n({type:"end"})}})}},t)})})}),ph=t(74033),pm=t(21203),pg=t(73279),pv=(0,rO.v)(["fixedPositionOffsetX","fixedPositionOffsetY","transformX","transformY","scale","transformOriginX","width","height","transitionDuration","transitionDelay","transitionProperty","opacity","interactionBlanketDisplay","pointerEvents","userSelect","borderTopLeftRadius","borderTopRightRadius","iframePointerEvents"]),pw=pv.cssVars,py=pv.styleTokens,pb=(0,eC.x)({root:[e_.wp.position.absolute,e_.wp.top(0),e_.wp.left(0),e_.wp.container("pane"),(0,nt._)({borderTopLeftRadius:py.borderTopLeftRadius,borderTopRightRadius:py.borderTopRightRadius,borderBottomLeftRadius:4,borderBottomRightRadius:4,transitionProperty:py.transitionProperty,transitionDelay:py.transitionDelay,transitionDuration:py.transitionDuration,opacity:py.opacity,transitionTimingFunction:"ease-out",transform:"translate(".concat(py.transformX,", ").concat(py.transformY,") scale(").concat(py.scale,")"),transformOrigin:"".concat(py.transformOriginX," top"),width:py.width,height:py.height,pointerEvents:py.pointerEvents,"--fixed-position-offset-x":py.fixedPositionOffsetX,"--fixed-position-offset-y":py.fixedPositionOffsetY},e_.$_.prefersReducedMotion,{transitionProperty:"none"})],container:[e_.wp.position.relative,e_.wp.width("100%"),e_.wp.flex.growAndShrink(1),{overflow:"auto",zIndex:1,userSelect:py.userSelect,iframe:{pointerEvents:py.iframePointerEvents}}],interactionBlanket:[e_.wp.coverContainer,{zIndex:1,display:py.interactionBlanketDisplay}],border:[e_.wp.borderRadius(),e_.wp.border({color:tH.LU.outlineDimmest}),{transition:"border-color 200ms",position:"absolute",width:"calc(100% + ".concat(8,"px)"),height:"calc(100% + ".concat(8,"px)"),transform:"translate(-".concat(4,"px, -").concat(4,"px)"),pointerEvents:"none",zIndex:1}]}),pS=(0,h.memo)(function(e){var n,t,r,i,o,a,l,s=e.paneId,c=(0,X.Vv)().Content,u=(0,et.h7)(s),d=(0,iK.A)(u.isHidden),f=(0,iK.A)(u.data),m=(0,iK.A)(u.isActive),g=(0,iK.A)(u.isCommitted);(0,ed.a$)(s,f);var v=(n=eQ(),t=(0,et.v8)(),r=(0,et.TM)(),i=(0,et.Fr)(),o=(0,et.MC)(),(0,L.A)(function(){return function(e){switch(e.operation){case"commit":i(s);return;case"open":if(e.floating)return void t(e.pane,{commit:!0,location:"center"});n({pane:e.pane,activate:!0,placement:e.secondary?{type:"secondary",relativeTo:s}:{type:"after",paneId:s}});return;case"replace":r({paneId:s,pane:e.pane});return;case"remove":o(e.pane.id);return;case"openPip":return;default:(0,on.A)(e)}}},[i,s,r,o,n,t])),w=(a=(0,er.A)().container,l=(0,ph.A)({container:a,service:"panetracker"}).channel,(0,h.useCallback)(function(e,n){l&&l.send({paneMetricsTracker:{pane:e,flow:n}})},[l]));return(0,p.Y)(c,{pane:f,options:{paneId:s,isHidden:d,performPaneOperation:v,isActive:m,isCommitted:g,emitPaneMetrics:w}})});let pY=(0,h.memo)(function(e){var n,t,r,i,o=e.paneId,a=(0,et.T_)(),l=(t=(n=(0,d._)((0,pe.H)({accept:[tu.pt.File,pm.N.Pane,pm.N.NewPane],collect:function(e){return{isOver:e.isOver()}},hover:function(e,n){var t=n.getClientOffset();t&&i.drag({pageX:t.x,pageY:t.y,over:o})},drop:function(e,n){var t=n.getClientOffset();if(t){if(e.type===pm.N.Pane)return void i.drop({type:"pane",paneId:e.paneId,pageX:t.x,pageY:t.y,over:o});if("nodes"===e.type){var r=(0,X.u9)(e.nodes);r.length>0&&i.drop({type:"newPaneGroup",panes:r,pageX:t.x,pageY:t.y,over:o})}if(e.type===pm.N.NewPane){var a=e.pane;i.drop({type:"newPaneGroup",panes:[a],pageX:t.x,pageY:t.y,over:o})}}}}),2))[0].isOver,r=n[1],i=(0,et.ui)({isOver:t}),r),s=(0,et.h7)(o),c=(0,iK.A)(s.isActive),u=(0,iK.A)(s.isFloating),f=(0,iK.A)(s.isModal),m=(0,iK.A)(s.paneType),g=(0,r0.A)(),v=(0,lv.vm)(),w=(0,lv.d0)(),y=(v||w)&&g?ui.uF:0,b=(0,h.useRef)(null);(0,tU.d)(b,s.size,function(e){var n,t=e.width,r=e.height;return n={},(0,nt._)(n,pw.width,t+"px"),(0,nt._)(n,pw.height,r+"px"),n}),(0,tU.d)(b,s.position,function(e){var n,t=e.x,r=e.y;return n={},(0,nt._)(n,pw.transformX,Math.round(t)+"px"),(0,nt._)(n,pw.transformY,Math.round(r)+"px"),n}),(0,tU.d)(b,s.scale,function(e){return(0,nt._)({},pw.scale,e.toString())}),(0,tU.d)(b,s.transformOriginXAtom,function(e){return(0,nt._)({},pw.transformOriginX,e)}),(0,tU.d)(b,s.viewportInset,function(e){var n,t=e.x,r=e.y;return n={},(0,nt._)(n,pw.fixedPositionOffsetX,-t+"px"),(0,nt._)(n,pw.fixedPositionOffsetY,-r-y+"px"),n}),(0,tU.d)(b,s.isHidden,function(e){var n;return n={},(0,nt._)(n,pw.opacity,e?"0":"1"),(0,nt._)(n,pw.pointerEvents,e?"none":"auto"),n}),(0,tU.d)(b,s.transition,function(e){var n,t,r;return r={},(0,nt._)(r,pw.transitionDuration,(null!=(n=null==e?void 0:e.duration)?n:0)+"ms"),(0,nt._)(r,pw.transitionDelay,(null!=(t=null==e?void 0:e.delay)?t:0)+"ms"),(0,nt._)(r,pw.transitionProperty,e?"transform, width, height, background-color, opacity":"none"),r}),(0,tU.d)(b,s.zIndex,function(e){return{"z-index":e.toString()}}),(0,tU.d)(b,s.disableInteractions,function(e){var n;return n={},(0,nt._)(n,pw.interactionBlanketDisplay,e?"block":"none"),(0,nt._)(n,pw.userSelect,e?"none":"auto"),(0,nt._)(n,pw.iframePointerEvents,e?"none":"auto"),n});var S=c?void 0:function(){a(o,{commit:"codeEditor"!==m})},Y=(0,eu.kg)(),A=(0,et.Bm)(),x="agentChat"===m&&("centered"===A||"centeredVisualPlanner"===A),C=x&&"centered"===A,_=(0,e9.S)([b,u?void 0:l],{breadcrumb:"client/replEnvironmentDesktop/Pane/index.tsx:324"});return(0,p.Y)(p.FK,{children:(0,p.Y)(eu.ph,{value:o,children:(0,p.Y)(eD.ui,{role:"tabpanel",id:o,"aria-labelledby":"tab-".concat(o),innerRef:_,css:pb.root,style:C?{borderTopLeftRadius:4,borderTopRightRadius:4}:{},elevated:!x,children:(0,p.FD)(pg.A,{origin:"ErrorBoundary: PaneContainer",bsod:!0,tags:(0,L.A)(function(){return{paneType:m}},[m]),children:[(0,p.Y)(pt,{paneId:o}),(0,p.FD)(eG.S,{css:pb.container,onMouseDown:S,onContextMenu:S,innerRef:function(e){return Y(o,e)},style:"agentChat"===m?{overflowX:"hidden"}:void 0,children:[(0,p.Y)(eG.S,{tabIndex:-1}),(0,p.Y)(pS,{paneId:o})]}),u&&!f?(0,p.Y)(pd,{paneId:o}):null,C?(0,p.Y)(eG.S,{css:pb.border}):null,(0,p.Y)(eG.S,{css:pb.interactionBlanket})]},o)})})})});var pA=t(98009);let px=(0,h.memo)(function(){var e=(0,et.Is)(),n=(0,pA.A)();return e&&n?(0,p.Y)("div",{css:[e_.wp.position.absolute,e_.wp.width(e.width),e_.wp.height(e.height),e_.wp.borderRadius(4),{boxShadow:"0 0 0 3px ".concat(n.color),pointerEvents:"none",zIndex:3,transform:"translate(".concat(Math.round(e.x),"px, ").concat(Math.round(e.y),"px)")}]}):null});var pC=(0,rO.v)(["opacity","pointerEvents"]),p_=pC.styleTokens,pk=pC.cssVars,pD={opacity:p_.opacity,pointerEvents:p_.pointerEvents};function pE(e){(0,tU.d)(e,(0,et.SC)(),function(e){var n,t;switch(e){case"centered":case"centeredVisualPlanner":return n={},(0,nt._)(n,pk.pointerEvents,"none"),(0,nt._)(n,pk.opacity,"0"),n;default:return t={},(0,nt._)(t,pk.pointerEvents,"auto"),(0,nt._)(t,pk.opacity,"1"),t}})}function pR(){var e=(0,er.A)().presence,n=(0,d._)((0,h.useState)(e.getFollowingUsers()),2),t=n[0],r=n[1];return(0,h.useEffect)(function(){return r(e.getFollowingUsers()),e.onFollowingUsersChanged(function(e){r(e.followingUsers)})},[e]),t}function pI(){var e=(0,g._)(["\n  query WorkspaceActiveUserImages($userIds: [Int!]!) {\n    usersByIds(ids: $userIds) {\n      id\n      image\n    }\n  }\n"]);return pI=function(){return e},e}var pF={},pT=(0,v.J1)(pI()),pP=t(38904);function pL(e){var n,t,r=(n={variables:{userIds:e.slice(0,pP.Ry)},skip:0===e.length},t=(0,m._)({},pF,n),w.I(pT,t)).data;return r?new Map(r.usersByIds.map(function(e){return[e.id,e.image]})):null}var pU={root:(0,tB.AH)([e_.wp.rowWithGap(4),e_.wp.align.center]),text:(0,tB.AH)([e_.wp.flex.shrink(1),e_.wp.align.center]),username:(0,tB.AH)([e_.wp.flex.shrink(2),e_.wp.maxWidth(140),e_.wp.truncate])};function pN(){var e=pR();return 0===e.length?null:1===e.length?(0,p.Y)(pO,{user:e[0]}):(0,p.FD)(eW.EY,{variant:"small",color:"dimmest",css:pU.text,multiline:!1,children:[e.length," users are observing you"]})}function pO(e){var n=e.user,t=n.id,r=n.username,i=n.color,o=pL([t]),a={id:t,username:r,color:i,image:null==o?void 0:o.get(t)};return(0,p.FD)(eG.S,{css:pU.root,children:[(0,p.Y)(cB.e,{size:16,src:a.image||null,username:a.username,ringColor:a.color}),(0,p.Y)(eW.EY,{variant:"small",color:"dimmer",css:pU.username,multiline:!1,children:r}),(0,p.Y)(eW.EY,{variant:"small",color:"dimmest",css:pU.text,multiline:!1,children:"is observing you"})]})}var pM={root:(0,tB.AH)([e_.wp.rowWithGap(4),e_.wp.align.center]),text:(0,tB.AH)([e_.wp.flex.shrink(1),e_.wp.align.center]),username:(0,tB.AH)([e_.wp.flex.shrink(2),e_.wp.maxWidth(140),e_.wp.truncate])};function pB(e){var n=e.id,t=e.username,r=e.color,i=pL([n]),o=(0,er.A)().presence,a={id:n,username:t,color:r,image:null==i?void 0:i.get(n)};return(0,p.FD)(eG.S,{css:pM.root,children:[(0,p.Y)(cB.e,{size:16,src:a.image||null,username:a.username,ringColor:a.color}),(0,p.Y)(eW.EY,{css:pM.text,variant:"small",color:"dimmest",multiline:!1,children:"Observing"}),(0,p.Y)(eW.EY,{css:pM.username,variant:"small",color:"dimmer",multiline:!1,children:t}),(0,p.Y)(t7.K0,{alt:"Stop observing",size:18,onClick:function(){o.unfollowUser()},children:(0,p.Y)(iH.A,{})})]})}var pH=(0,eC.x)({root:[e_.wp.height("100%"),e_.wp.border({color:tH.LU.outlineDimmest,direction:"bottom"}),e_.wp.highRes({borderBottomWidth:.5}),e_.wp.align.center]});function pz(e){var n,t,r,i=e.paneId,o=(0,et.KN)(i),a=(n=(0,pA.A)(),t=(0,et.sH)({paneId:i}),n&&t?n:null),l=(r=pR(),(0,et.sH)({paneId:i})&&r.length>0?r:null),s=(0,X.xS)(o)?o.data.path:null,c=null;return(a&&(c=(0,p.Y)(pB,{id:a.id,username:a.username,color:a.color})),null!==c||l)?(0,p.FD)(eG.S,{css:pH.root,px:4,row:!0,gap:8,children:[l&&s?(0,p.Y)(pN,{}):null,c]}):null}var pW=(0,eC.x)({handle:[e_.wp.flex.growAndShrink(1),e_.wp.minWidth(16),e_.wp.height("100%"),e_.wp.border({direction:"bottom",color:tH.LU.outlineDimmest}),e_.wp.highRes({borderBottomWidth:.5})]});function pG(e){var n=e.paneGroupId,t=e.activeTabPaneId,r=(0,et.$b)({paneGroupId:n}),i=r.isDragging,o=r.dnd,a=(0,et.IT)().toggleMaximizedPaneGroup,l=(0,et.uG)(n),s=(0,iK.A)(l.isMaximized),c=(0,et.T_)();return o?(0,p.Y)(eG.S,{onDoubleClick:function(){a({paneGroupId:n})},title:s?"Double click to restore.":"Double click to maximize. Drag to move.",css:pW.handle,style:{cursor:s?void 0:i?"grabbing":"grab"},onPointerDown:function(e){c(t),!s&&"button"in e&&0===e.button&&(0,tL.j)(e,{start:o.start,move:o.update,end:o.end})}}):null}function pV(){return(0,p.Y)(eG.S,{css:pW.handle})}var pj=(0,eC.x)({container:[e_.wp.width("100%"),e_.wp.height("100%")],iconAndTitle:[e_.wp.height("100%"),e_.wp.align.center,e_.wp.border({direction:"bottom",color:tH.LU.outlineDimmest}),e_.wp.highRes({borderBottomWidth:.5})],text:[e_.wp.fontSize(13)]});function pZ(e){var n=e.headerId,t=e.paneId,r=e.disableDrag,i=(0,et.KN)(t),o=(0,X.Vv)(),a=o.getTitle(i),l=o.Icon({pane:i,size:16});return(0,p.FD)(eG.S,{css:pj.container,row:!0,children:[(0,p.FD)(eG.S,{css:pj.iconAndTitle,pl:6,row:!0,gap:6,children:[l,(0,p.Y)(eW.EY,{css:pj.text,children:a})]}),void 0!==r&&r?(0,p.Y)(pV,{}):(0,p.Y)(pG,{paneGroupId:n,activeTabPaneId:t})]})}var pq=t(55484),pK=t(93582),p$=t(44070),pJ=t(90629),pQ=t(19732),pX=t(8497),p0=(0,rO.v)(["fontStyle","iconOpacity","tabTitleContainerPaddingRight","closeButtonOpacity","unsavedChanges","closeIconDisplay"]),p1=p0.cssVars,p2=p0.styleTokens,p4=eG.D.div,p5=(0,tB.AH)([e_.wp.display.inlineFlex,e_.wp.height("100%"),e_.wp.flex.row,e_.wp.align.center,e_.wp.position.relative,e_.wp.minWidth(tH.LU.space96),{userSelect:"none","& > span":[{"& > *":e_.wp.height("100%")},e_.wp.display.flex,e_.wp.flex.grow(1),e_.wp.flex.row,e_.wp.align.center,e_.wp.height("100%")]}]),p3=(0,tB.AH)([e_.wp.position.relative,e_.wp.cursor.pointer,e_.wp.align.center,e_.wp.rowWithGap(6),e_.wp.px(6),e_.wp.focusRing,e_.wp.flex.growAndShrink(1),{backgroundColor:"transparent",border:"none",font:"inherit",lineHeight:"normal",color:"inherit"}]),p6=(0,eC.x)({rootDragging:[e_.wp.width(0),e_.wp.visibility.hidden],root:[e_.wp.border({direction:"bottom",color:tH.LU.outlineDimmest}),(0,nt._)({":not(:last-of-type)":[e_.wp.border({direction:"right",color:tH.LU.outlineDimmest}),e_.wp.highRes({borderRightWidth:.5})],":first-of-type > div":{borderTopLeftRadius:4,"[data-pane-tab-primary-button]":{borderTopLeftRadius:4},"[data-active-pane-line]":[{clipPath:"polygon(100% 0%, 100% 100%, 2.35px 100%, 3px 55%, 4px 13%, 5px 0%)"},e_.wp.highRes({clipPath:"polygon(100% 0%, 100% 100%, 1.85px 100%, 2.5px 55%, 3.5px 13%, 4.5px 0%)"})]},":last-of-type [data-active-pane-line]":[{width:"calc(100% + 1px)"},e_.wp.highRes({width:"calc(100% + 0.5px)"})]},e_.$_.canHover,[(i={},(0,nt._)(i,p1.closeButtonOpacity,0),(0,nt._)(i,"&:hover",(0,nt._)({},p1.closeButtonOpacity,1)),i)])],notificationDot:[e_.wp.top(3),e_.wp.right(0)],tabBaseDefault:[p5,e_.wp.color.foregroundDimmer,{backgroundColor:"transparent"}],tabBaseActive:[p5,e_.wp.color.foregroundDefault,{boxShadow:"0 1px 0 0 "+tH.LU.surfaceBackground,"data-pane-tab-primary-button":[e_.wp.transition.none,e_.wp.hover({boxShadow:"0 1px 0 0 "+tH.LU.interactiveBackground})]}],tabTitleContainer:[e_.wp.align.baseline,e_.wp.position.relative,{paddingRight:p2.tabTitleContainerPaddingRight}],tabTitle:[e_.wp.truncate,e_.wp.maxWidth(180),e_.wp.display.inlineBlock,e_.wp.fontSize(13),{fontStyle:p2.fontStyle,"::after":{display:"block",content:"attr(title)",height:"0",fontStyle:"normal",color:"transparent",overflow:"hidden",visibility:"hidden"}}],uniquePath:[e_.wp.truncate,e_.wp.maxWidth(180),e_.wp.display.inlineBlock,e_.wp.fontSize(12),e_.wp.color.foregroundDimmest,{fontStyle:p2.fontStyle}],tabIcon:[e_.wp.width(16),e_.wp.height(16),e_.wp.position.relative,{opacity:p2.iconOpacity}],buttonDefault:[so.b.listItem,p3],buttonActive:[p3],activeLine:[e_.wp.height(1),e_.wp.top(0),e_.wp.left(-1),{position:"absolute",pointerEvents:"none",width:"calc(100% + 2px)",backgroundColor:tH.LU.accentPrimaryDefault},e_.wp.highRes({left:-.5,width:"calc(100% + 1px)"})],closeWrapper:[e_.wp.height("100%"),{button:[e_.wp.width(20),e_.wp.height("100%"),e_.wp.borderRadius(0),e_.wp.color.foregroundDimmer,(l={},(0,nt._)(l,e_.$_.canHover,[(a={},(0,nt._)(a,p1.unsavedChanges,"block"),(0,nt._)(a,p1.closeIconDisplay,"none"),(0,nt._)(a,"&:hover",(o={},(0,nt._)(o,p1.unsavedChanges,"none"),(0,nt._)(o,p1.closeIconDisplay,"block"),o)),a)]),(0,nt._)(l,"paddingBottom",3),l)]}],displayBlock:[e_.wp.display.block]}),p8=(0,h.memo)(function(e){var n=e.paneId,t=e.paneGroupId,r=e.isActive,i=e.selectTab,o=e.removePane,a=e.dragGroup,l=(0,et.h7)(n),s=(0,iK.A)(l.isCommitted),c=(0,et.Fr)(),u=(0,et.KN)(n),f=(0,X.Vv)(),m=f.getTitle(u),g=f.Icon({pane:u,size:16}),v=(0,iK.A)(l.isActivePane),w=(0,t8.F9)({paneType:u.type}),y=(0,ed.WM)((0,X.xS)(u)?u.data.path:null),b=void 0;(0,X.xS)(u)&&u.data.path&&(b=u.data.path);var S=(0,uB.j)(),Y=(0,h.useRef)(null),A=(0,d._)((0,p$.i)({type:pm.N.Pane,item:function(){var e,t=(null==(e=Y.current)?void 0:e.getBoundingClientRect().width)||80;return{type:pm.N.Pane,paneId:n,width:t}},collect:function(e){return{isDragging:e.isDragging()}}}),2),x=A[0].isDragging,C=A[1],_=(0,et.gf)();(0,h.useEffect)(function(){return _(x)},[_,x]);var k=(0,et.$b)({paneGroupId:t}).dnd,D=(0,h.useCallback)(function(e){if(1!==e.button){if(I.current=r,k&&a)return void(0,tL.j)(e,{start:k.start,move:k.update,end:k.end});r||(pJ.ZQ({category:"pane",message:"Tab clicked: "+u.type}),(0,V.u4)(V.AZ.WS_TAB_OPENED,{paneType:u.type}),i(n))}},[u.type,k,a,r,n,i]);(0,h.useEffect)(function(){r&&Y.current&&(0,pQ.A)(Y.current,{behavior:S?"auto":"smooth",scrollMode:"if-needed"},!0)},[r,S,Y]);var E=function(e){var n,t,r,i,o=e.paneId,a=e.paneGroupId,l=(0,eu.gB)(),s=(0,et.aJ)(),c=oo({paneId:o}),u=ij({paneId:o,paneGroupId:a}),d=(n=(0,et.aJ)(),t=(0,et.p3)(),r=(0,et.PA)(),i=(0,et.p7)(),(0,h.useCallback)(function(){var e=n(o).pane,a=i(e);switch(a){case"notAllowed":return null;case"add":return{match:K.G2,data:{label:"Add to dock",type:"action",icon:(0,p.Y)(em.A,{}),run:function(){t({pane:e})}}};case"remove":return{match:K.G2,data:{label:"Remove from dock",type:"action",icon:(0,p.Y)(ot.A,{}),run:function(){r(e.type)}}};default:(0,on.A)(a)}},[o,i,n,t,r])),f=iZ(),m=(0,X.Vv)();return(0,h.useCallback)(function(){var e=s(o).pane,n=l(o),t=function(e){return!!e&&(void 0===e?"undefined":(0,nr._)(e))==="object"&&"data"in e};return{data:{type:"context",label:"Search actions",icon:(0,p.Y)(m.Icon,{pane:e})},commands:function(){return[{data:{type:"group",key:"pane-actions"},commands:function(){var e,r;return(null!=(r=null==n||null==(e=n.commands)?void 0:e.flatMap(function(e){return e.commands}))?r:[]).filter(t)}},{data:{type:"group",key:"secondary"},commands:function(){return[d(),f(o),c].concat((0,B._)(u)).filter(t)}}]}}},[l,m,s,o,c,u,d,f])}({paneId:n,paneGroupId:t}),R=(0,t2.EF)().onContextMenu,I=(0,h.useRef)(!1),F=(0,h.useMemo)(function(){if(r&&!s)return function(){I.current&&c(n)}},[c,r,s,n]),T=function(e){void 0===e?pJ.ZQ({category:"pane",message:"Tab closed: "+u.type}):pJ.ZQ({category:"pane",message:"Tab closed: "+u.type,data:{reason:e}}),(0,V.u4)(V.AZ.WS_TAB_CLOSED,{paneType:u.type}),o(n)};return(0,p.Y)(p.FK,{children:(0,p.Y)(p4,{ref:Y,css:x?p6.rootDragging:p6.root,onMouseUp:function(e){1===e.button&&(e.preventDefault(),e.stopPropagation(),T("middle click"))},children:(0,p.Y)(fe,{innerRef:a?void 0:C,uniquePath:y,title:m,icon:"commands"!==u.type?g:void 0,isActive:r,isActivePane:v,italicizeTitle:!s&&"commands"!==u.type,tooltip:b,paneId:n,indicatorColor:w,onClick:F,onContextMenu:function(e){return R(e,{command:E()})},onPointerDown:D,onClose:function(){T()}})})})}),p7=eG.D.button;function p9(e){var n=e.onClick,t=e.tabIndex,r=p6.displayBlock;return(0,p.Y)(t7.K0,{onClick:n,alt:"Close tab",tabIndex:t,size:12,children:(0,p.Y)(eG.S,{css:r,children:(0,p.Y)(iH.A,{})})})}function fe(e){var n=e.title,t=e.uniquePath,r=e.onClick,i=e.onContextMenu,o=e.onClose,a=e.isActive,l=e.isActivePane,s=e.italicizeTitle,c=e.innerRef,u=e.icon,f=e.onPointerDown,m=e.paneId,g=e.indicatorColor,v=e.tooltip,w=e.detailsPill,y=(0,t8.eg)(),b=(0,h.useRef)(null),S=(0,d._)((0,pK.A9)(b,!1),4),Y=S[0],A=S[1],x=S[2],C=S[3];return(0,pK.xK)(A,b),(0,p.FD)(eD.ui,{elevated:a,innerRef:c,css:a?p6.tabBaseActive:p6.tabBaseDefault,children:[(0,p.Y)(tz.m_,{isDisabled:!v,tooltip:v,maxWidth:600,delay:"long",closeDelay:"none",children:(0,p.FD)(p7,{role:"tab",ref:b,tabIndex:Y,onKeyDown:x,onClick:function(e){C(),null==r||r(e)},onPointerDown:f,onContextMenu:i,css:a?p6.buttonActive:p6.buttonDefault,"aria-selected":a,"aria-controls":m,id:"tab-".concat(m),"data-pane-tab-primary-button":!0,children:[u?(0,p.Y)(eG.S,{style:(0,nt._)({},p1.iconOpacity,a?"1":"0.6"),css:p6.tabIcon,children:u}):null,(0,p.FD)(eG.S,{style:(0,nt._)({},p1.tabTitleContainerPaddingRight,g?"12px":"0px"),css:p6.tabTitleContainer,row:!0,gap:8,children:[(0,p.Y)(eW.EY,{multiline:!1,css:p6.tabTitle,title:n,style:(0,nt._)({},p1.fontStyle,s?"italic":"inherit"),children:n}),t?(0,p.Y)(eW.EY,{multiline:!1,css:p6.uniquePath,style:(0,nt._)({},p1.fontStyle,s?"italic":"inherit"),children:t}):null,g?(0,p.Y)(pX.b,{css:p6.notificationDot,color:g}):null,w]})]})}),l?(0,p.Y)(eG.S,{css:p6.activeLine,"data-active-pane-line":!0}):null,y?null:(0,p.Y)(eG.S,{style:{opacity:a?1:p2.closeButtonOpacity},css:p6.closeWrapper,children:(0,p.Y)(p9,{onClick:o,tabIndex:A?0:-1})})]})}var fn=(0,eC.x)({container:[e_.wp.height("100%"),e_.wp.width("100%")],newTabContainer:[e_.wp.height("100%"),e_.wp.pl(4),e_.wp.justify.center,e_.wp.align.center,e_.wp.border({direction:"bottom",color:tH.LU.outlineDimmest}),e_.wp.border({direction:"left",color:tH.LU.outlineDimmest}),{"& > button":[e_.wp.height(24),e_.wp.width(24)]},e_.wp.highRes({borderBottomWidth:.5,borderLeftWidth:.5})],tabScrollAreaRoot:[e_.wp.flex.row,e_.wp.align.center,e_.wp.height("100%"),e_.wp.overflowX("hidden"),e_.wp.overflowY("hidden"),{"--scrollbar-size":"6px"}],tabScrollAreaViewport:[e_.wp.height("100%"),{"& > div":{height:"100%",width:"max-content",display:"block !important"}}],tabScrollAreaScrollbar:[e_.wp.display.flex,e_.wp.backgroundColor.backgroundOverlay,e_.wp.height("var(--scrollbar-size)"),e_.wp.flex.column,{touchAction:"none",transition:"background 160ms ease-out",userSelect:"none","&:hover":{backgroundColor:tH.LU.backgroundOverlay}}],tabScrollAreaThumb:[e_.wp.flex.grow(1),e_.wp.backgroundColor.outlineDimmest,e_.wp.borderRadius(4),e_.wp.position.relative,{"&::before":{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"100%",height:"100%",minWidth:"44px",minHeight:"44px"}}],tabContainer:[e_.wp.height("100%")],tabPreview:[e_.wp.borderRadius(4),e_.wp.height("100%"),e_.wp.backgroundColor.accentPrimaryDimmest,{border:"1px dashed ".concat(tH.LU.accentPrimaryDimmer)}]});function ft(e){var n,t,r,i,o,a,l=e.headerId,s=(0,et.LA)(),c=(0,et.wl)(),u=(0,et.wJ)(),f=(0,et.MC)(),m=(0,h.useRef)(null),g=(0,et.Hz)(l),v=(0,iK.A)(g.activeIndex),w=(0,iK.A)(g.activeTabPaneId),y=(0,iK.A)(g.panes),b=(0,h.useCallback)(function(e){if(m.current&&0!==e.deltaY&&0===e.deltaX){e.preventDefault();var n=e.deltaY,t=m.current.scrollLeft,r=Math.max(0,Math.min(m.current.scrollWidth,t+n));m.current.scrollLeft=r}},[]),S=(0,d._)((0,pe.H)({accept:[tu.pt.File,pm.N.Pane,pm.N.NewPane],hover:function(e,n){var t=n.getSourceClientOffset();t&&_({item:e,panes:y,sourceClientOffset:t.x})},collect:function(e){return{isOver:e.isOver()}},drop:function(e,n){if(!n.didDrop()){var t=(null==k?void 0:k.index)!==null?null==k?void 0:k.index:y.length;if("nodes"===e.type){var r=(0,X.u9)(e.nodes);r.length>0&&c({activate:!0,commit:!0,paneGroupId:l,index:t,panes:r});return}if(e.type===pm.N.NewPane)return void c({activate:!0,paneGroupId:l,index:t,panes:[e.pane]});if("paneId"in e){var i=y.includes(e.paneId)?y.length-1:y.length;u({paneId:e.paneId,index:void 0!==t&&t<i?t:i,toPaneGroupId:l})}}}}),2),Y=S[0],A=S[1],x=(n=({isOver:Y.isOver}).isOver,r=(t=(0,d._)((0,h.useState)(null),2))[0],i=t[1],o=(0,h.useRef)(null),a=(0,h.useRef)([]),(0,h.useEffect)(function(){if(!n){a.current=[],i(null);return}o.current&&(a.current=(0,B._)(o.current.children).map(function(e){var n=e.getBoundingClientRect();return n.x+n.width/2}))},[n]),{tabContainerRef:o,hover:(0,h.useCallback)(function(e){if(0!==a.current.length){var n=e.item.type===pm.N.Pane?e.item:null,t=(null==n?void 0:n.paneId)||null,r=t?e.panes.indexOf(t):-1,o=(null==n?void 0:n.width)||80,l=a.current.map(function(e,n){return -1===r||r>n?e:e+o/2}).findIndex(function(n){return n>e.sourceClientOffset}),s=-1===r?e.panes.length:e.panes.length-1;i({index:-1===l?s:Math.min(l,s),paneId:t,width:o})}},[]),dropState:r}),C=x.tabContainerRef,_=x.hover,k=x.dropState,D=k?k.index:null;if((null==k?void 0:k.paneId)&&null!==D){var E=y.indexOf(k.paneId);E>-1&&E<D&&D++}var R=k&&null!==D?(0,B._)(y.slice(0,D)).concat([k],(0,B._)(y.slice(D))):y;return(0,p.FD)(eG.S,{css:fn.container,row:!0,align:"center",innerRef:A,role:"tablist",children:[(0,p.FD)(pK.Se,{children:[(0,p.FD)(pq.bL,{css:fn.tabScrollAreaRoot,onWheel:b,children:[(0,p.Y)(pq.LM,{css:fn.tabScrollAreaViewport,ref:m,children:(0,p.Y)(eG.S,{innerRef:C,css:fn.tabContainer,row:!0,children:R.map(function(e,n){return"string"!=typeof e?(0,p.Y)(eG.S,{p:4,children:(0,p.Y)(eG.S,{style:{width:e.width},css:fn.tabPreview})},"preview"):(0,p.Y)(p8,{dragGroup:1===y.length,paneId:e,paneGroupId:l,isActive:v===n,selectTab:s,removePane:f},e)})})}),(0,p.Y)(pq.Ze,{css:fn.tabScrollAreaScrollbar,orientation:"horizontal",children:(0,p.Y)(pq.zi,{css:fn.tabScrollAreaThumb})})]}),(0,p.Y)(eG.S,{css:fn.newTabContainer,children:(0,p.Y)(t7.K0,{alt:"New tab",tooltipBehavior:"hidden",size:12,onClick:function(){c({paneGroupId:l,activate:!0,panes:[{type:"commands",data:{autoFocus:!0}}]})},children:(0,p.Y)(em.A,{})})})]}),(0,p.Y)(pG,{paneGroupId:l,activeTabPaneId:w})]})}var fr=t(83415),fi=(0,eC.x)({left:[e_.wp.flex.growAndShrink(1),e_.wp.align.center,e_.wp.height("100%"),{border:"none"}],right:[e_.wp.border({direction:"bottom",color:tH.LU.outlineDimmest}),e_.wp.highRes({borderBottomWidth:.5})],rightActionsContainer:[e_.wp.height(31),e_.wp.highRes(e_.wp.highRes(e_.wp.height(31.5)))],moreActions:[e_.wp.color.foregroundDimmest]}),fo=(0,h.memo)(function(e){var n=e.headerId,t=(0,fr.eg)(),r=(0,et.uG)(n),i=(0,iK.A)(r.isMaximized),o=(0,et.IT)().restoreMaximizedPaneGroup,a=(0,iK.A)(r.isModal),l=(0,iK.A)(r.isFloating),s=(0,et.wI)(),c=(0,et.MC)(),u=(0,et.Hz)(n),d=(0,iK.A)(u.activeTabPaneId),f=(0,iK.A)(u.panes),h=f.length>1,m=(0,et.aJ)(),g=1===f.length&&"workspaceTourGuide"===m(f[0]).pane.type,v=(0,ed.AU)("workspaceTourGuide"),w=(0,iK.A)(r.isBeingDragged),y=(0,et._o)(),b=(0,eb.Jn)(oY.id),S=(0,p.Y)(t7.K0,{css:fi.moreActions,onClick:function(){return y(d)},alt:"Pane actions",tooltipBehavior:void 0===b?"hidden":void 0,tooltipPlacement:"left",tooltipContents:b?(0,p.Y)(eb._y,{fontSize:12,keyCombo:b}):null,children:(0,p.Y)(rl.A,{color:tH.LU.foregroundDimmest})}),Y=(0,p.Y)(t7.K0,{alt:"Close pane",onClick:function(){return f.forEach(c)},children:(0,p.Y)(iH.A,{color:tH.LU.foregroundDimmest})}),A=w?null:(0,p.FD)(eG.S,{css:fi.rightActionsContainer,pr:4,row:!0,gap:4,align:"center",children:[l?(0,p.Y)(t7.K0,{alt:"Unfloat",onClick:function(){return s(d)},children:(0,p.Y)(i9.A,{color:tH.LU.foregroundDimmest})}):null,i?(0,p.Y)(t7.K0,{alt:"Restore pane",onClick:o,children:(0,p.Y)(i8,{color:tH.LU.foregroundDimmest})}):null,a?Y:S]});return(0,p.FD)(p.FK,{children:[(0,p.Y)(eG.S,{css:fi.left,row:!0,children:a&&!h||g||t?(0,p.Y)(pZ,{headerId:n,paneId:d,disableDrag:g||t}):(0,p.Y)(ft,{headerId:n})}),(0,p.Y)(pz,{paneId:d}),(0,p.Y)(eG.S,{css:fi.right,row:!0,children:t||g||v?null:A})]})}),fa=(0,rO.v)(["left","top","scale","transformOriginX","width","height","zIndex","transitionDuration","transitionDelay","transitionProperty","transformX","transformY"]),fl=fa.cssVars,fs=fa.styleTokens,fc=(0,tB.AH)([e_.wp.borderRadius(4,4,0,0),e_.wp.position.absolute,e_.wp.flex.row,e_.wp.align.center,pD],(0,nt._)({transformOrigin:"".concat(fs.transformOriginX," bottom"),top:fs.top,left:fs.left,width:fs.width,height:fs.height,transform:"translate(".concat(fs.transformX,", ").concat(fs.transformY,") scale(").concat(fs.scale,")"),transitionDuration:fs.transitionDuration,transitionProperty:fs.transitionProperty,transitionDelay:fs.transitionDelay,transitionTimingFunction:"ease-out",backgroundColor:tQ.s,overflowX:"hidden"},e_.$_.prefersReducedMotion,{transitionProperty:"none"}));let fu=(0,h.memo)(function(e){var n=e.headerId,t=(0,et.Hz)(n),r=(0,iK.A)(t.activeTabPaneId),i=(0,et.uG)(n),o=(0,iK.A)(i.isFloating),a=(0,iK.A)(i.isModal),l=(0,h.useRef)(null);return(0,tU.d)(l,i.size,function(e){var n,t=e.width,r=e.height;return n={},(0,nt._)(n,fl.width,t+"px"),(0,nt._)(n,fl.height,r+"px"),n}),(0,tU.d)(l,i.position,function(e){var n,t,r=e.x,i=e.y;return"transform"===e.positioning?(n={},(0,nt._)(n,fl.transformX,Math.round(r)+"px"),(0,nt._)(n,fl.transformY,Math.round(i)+"px"),(0,nt._)(n,fl.top,"0px"),(0,nt._)(n,fl.left,"0px"),n):(t={},(0,nt._)(t,fl.transformX,"0px"),(0,nt._)(t,fl.transformY,"0px"),(0,nt._)(t,fl.top,Math.round(i)+"px"),(0,nt._)(t,fl.left,Math.round(r)+"px"),t)}),(0,tU.d)(l,i.scale,function(e){return(0,nt._)({},fl.scale,e.toString())}),(0,tU.d)(l,i.transformOriginX,function(e){return(0,nt._)({},fl.transformOriginX,e)}),(0,tU.d)(l,i.transition,function(e){var n,t,r;return r={},(0,nt._)(r,fl.transitionDuration,(null!=(n=null==e?void 0:e.duration)?n:0)+"ms"),(0,nt._)(r,fl.transitionDelay,(null!=(t=null==e?void 0:e.delay)?t:0)+"ms"),(0,nt._)(r,fl.transitionProperty,e?"top, left, width, height, transform, opacity":"none"),r}),(0,tU.d)(l,i.zIndex,function(e){return{"z-index":e.toString()}}),pE(l),(0,p.FD)(eD.ui,{innerRef:l,css:fc,children:[(0,p.Y)(fo,{headerId:n}),o&&!a?(0,p.Y)(pf,{paneId:r}):null]})});var fd=t(22761),fp=t(750),ff=t(79208),fh=t(39782),fm=t(2529),fg=t(47630),fv=t(28069),fw=t(98964),fy=t(78991),fb=t(35567),fS=t(5021),fY=t(51830),fA=t(90694),fx=t(44989),fC=(0,eC.x)({root:[{height:28,zIndex:1,containerType:"size"}],left:[e_.wp.width(147),{"@container (max-width: 300px)":[e_.wp.width(64)]}],right:[e_.wp.width(147),{"@container (max-width: 300px)":[e_.wp.width(64)]}],center:[e_.wp.flex.growAndShrink(1),e_.wp.align.center],newChatButton:[{"& > button":{height:24},"@container (max-width: 300px)":{"& > button > div > span":e_.wp.display.none}}]});function f_(e){var n=e.sessionId,t=e.toggleSidebar,r=e.disableNewSessionButton,i=e.onNewSession,o=e.onCommitEventClick,a=(0,lg.W)(),l=(0,et.Bm)(),s=(0,fr.eg)(),c=(0,fg.HJ)(!1),u=s&&"tilingLayout"===l||"visualPlanner"===a&&"centeredVisualPlanner"===l;return(0,p.FD)(eG.S,{row:!0,gap:4,css:fC.root,px:4,justify:"space-between",align:"center",children:[u?(0,p.Y)(eG.S,{css:fC.left}):(0,p.Y)(fk,{toggleSidebar:t,disableNewSessionButton:r,onNewSession:i}),(0,p.Y)(eG.S,{css:fC.center,children:n&&("visualPlanner"!==a||"centeredVisualPlanner"!==l)?(0,p.Y)(fw.o,{sessionId:n,onCommitEventClick:o,showCheckpointsDropdown:!s&&!u,checkpointsOpenObs:c}):null}),u?(0,p.Y)(eG.S,{css:fC.right}):(0,p.Y)(fD,{sessionId:n})]})}function fk(e){var n=e.toggleSidebar,t=e.disableNewSessionButton,r=e.onNewSession,i=(0,et.Bm)(),o=(0,et.HU)();return"centered"===i?(0,p.Y)(eG.S,{css:fC.left,align:"center",row:!0,children:(0,p.Y)(t7.K0,{alt:"Enter workspace",onClick:function(){return o("tilingLayout")},children:(0,p.Y)(fx.A,{rotate:-90})})}):(0,p.FD)(eG.S,{css:fC.left,align:"center",row:!0,gap:4,children:[(0,p.Y)(t7.K0,{alt:"Chats",onClick:function(){return n()},children:(0,p.Y)(fA.A,{})}),(0,p.Y)(tz.m_,{isDisabled:!t,tooltip:"Cannot create a new chat while one is in progress",children:(0,p.Y)(eG.S,{css:fC.newChatButton,children:(0,p.Y)(ez.$n,{disabled:t,size:"small",iconLeft:(0,p.Y)(em.A,{}),text:"New chat",variant:"nofill",onClick:function(){return r()}})})})]})}function fD(e){var n=e.sessionId,t=(0,_._P)({controlName:"flag-no-header-usage"}),r=(0,et.Bm)(),i=(0,fY.F)();return(0,lg.W)(),(0,et.HU)(),(0,p.FD)(eG.S,{css:fC.right,align:"center",row:!0,justify:"end",gap:4,children:["centered"===r?i?(0,p.Y)(fS.L,{}):n&&!t?(0,p.Y)(fb.F,{sessionId:n}):null:null,"tilingLayout"===r?i?(0,p.Y)(fS.L,{}):n&&!t?(0,p.Y)(fb.F,{sessionId:n}):(0,p.FD)(p.FK,{children:[(0,p.Y)(fy.v,{sessionId:n}),null]}):null]})}var fE=t(92966),fR=t(43747),fI=t(34849),fF=t(80112),fT=t(60555),fP=t(15036),fL=t(483),fU=t(6796),fN=t(40836),fO=t(33221),fM=t(15811),fB=t(49455),fH=t(58767),fz=(0,eC.x)({root:[e_.wp.flex.growAndShrink(1),e_.wp.position.relative],main:[e_.wp.position.relative,e_.wp.flex.growAndShrink(1)],sidebarBlanket:[e_.wp.coverContainer,{zIndex:3,backgroundColor:tH.LU.backgroundOverlay,pointerEvents:fv.Sl.sidebarBlanketPointerEvents,opacity:fv.Sl.sidebarBlanketOpacity}],sidebar:[e_.wp.position.absolute,e_.wp.top(0),e_.wp.left(0),e_.wp.p(8),e_.wp.colWithGap(8),e_.wp.borderRadius(),{pointerEvents:fv.Sl.sidebarPointerEvents,width:fv.Sl.sidebarWidth,height:fv.Sl.sidebarHeight,opacity:fv.Sl.sidebarOpacity,transform:fv.Sl.sidebarTransform,border:"1px solid "+tH.LU.outlineDimmest,zIndex:3}],content:[{paddingLeft:fv.Sl.paddingLeft,paddingBottom:tH.LU.space8},e_.wp.flex.growAndShrink(1)]});function fW(e){var n,t=(0,eq.A)().showError,r=(0,fB.o)();return(0,p.Y)(fL.S,{sessionId:null==(n=e.session)?void 0:n.id,uploadFiles:r,onError:t,children:(0,p.Y)(fN.$Y,{children:(0,p.Y)(fG,(0,m._)({},e))})})}function fG(e){var n,t,r,i,o=e.session,a=(0,et.Bm)(),l=(0,et.HU)();(0,fF.n)(function(){l("tilingLayout")});var s=(0,h.useRef)(null),c=(0,fv.r8)(),u=c.state,f=c.setSidebarContainerEl,g=c.toggleSidebar,v=c.closeIfNeeded;(0,tU.d)(s,u,fv.aT);var w=(0,d._)((0,h.useState)(!1),2),y=w[0],b=w[1],S=(0,I.OI)(),Y=(0,d._)((0,h.useState)(null),2),A=Y[0],x=Y[1],C=e.inputRef;(0,h.useEffect)(function(){C(A)},[A,C]),(0,h.useEffect)(function(){A&&("centered"===a||"centeredVisualPlanner"===a)&&A.focus()},[A,a]);var _=(0,h.useCallback)(function(){setTimeout(function(){null==A||A.animatePlaceholder()})},[A]),k=(0,h.useCallback)(function(){b(!0),_(),g(!1),(0,fP.pI)({action:"new_session"})},[_,g]),D=e.onSessionChange,E=(0,h.useCallback)(function(e){D(e),b(!1),_(),v()},[_,v,D]),R=(0,fR.w)(s),F=(0,fg.J2)((0,fI.S)()),T=(n=(0,et.q5)(),t=(0,et.Us)(),(0,h.useCallback)(function(e){return(0,X.xS)(e)&&e.data.path?n((0,e6._)((0,m._)({},e.data),{path:e.data.path})):t({pane:e})},[t,n])),P=(0,er.A)(),L=P.secrets,U=P.fs,N=(0,fL.s)().addAttachments,O=(0,fM.A)({addAttachments:N}),M=O.isDraggedOver,B=O.drop,H=(0,e9.P)([s,B]);return(0,p.FD)(p.FK,{children:[(0,p.FD)(eG.S,{css:fz.root,innerRef:H,children:[(0,p.Y)(f_,{toggleSidebar:g,sessionId:null!=(r=null==o?void 0:o.id)?r:null,disableNewSessionButton:!!F,onNewSession:k,onCommitEventClick:R}),(0,p.FD)(eG.S,{css:fz.main,innerRef:f,children:[(0,p.Y)(eG.S,{css:fz.sidebarBlanket,onClick:function(){return g(!1)}}),(0,p.Y)(eD.ui,{css:fz.sidebar,children:(0,p.Y)(fT.AN,{sessionId:null!=(i=null==o?void 0:o.id)?i:null,onNewSession:k,onSessionClick:E})}),(0,p.FD)(eG.S,{css:fz.content,children:[void 0===o?(0,p.Y)(fO.G,{}):null,y||null===o||o?(0,p.Y)(fE.O,{onNewSession:k,onSessionCreated:E,onSessionChange:e.onSessionChange,openPane:T,readFile:U.readFile,session:y?null:null!=o?o:null,secrets:L,inputRef:x,onPromptSuggestionClick:function(e){var n;null==A||null==(n=A.setValue)||n.call(A,e.text),null==A||A.focus()},showUserFeedbackButton:!0,isAgentPresentationCentered:"centered"===a||"centeredVisualPlanner"===a}):null]})]}),M?(0,p.Y)(fU.A,{}):null]}),(0,p.Y)(fH.A,{isOpen:S,text:"We've encountered an issue and can't reconnect to the AI service. Please refresh the page to continue."})]})}var fV={Content:function(e){var n,t=(0,d._)((0,h.useState)(null),2),r=t[0],i=t[1];(0,eu.HP)(function(){return r},[r]);var o=e.options.performPaneOperation,a=(0,h.useCallback)(function(e){return o({operation:"open",pane:e,secondary:"ghostwriterChat"!==e.type})},[o]),l=(0,fp.n)(null==(n=e.pane.data)?void 0:n.sessionId),s=l.session,c=l.setSession,u=(0,h.useCallback)(function(e){o({operation:"replace",pane:{type:"agentChat",data:{sessionId:e.id}}}),c(e)},[o,c]),f=(0,et.Bm)(),m=(0,et.HU)(),g=(0,_._P)({controlName:"flag-back-to-the-future"}),v=(0,er.A)(),w=v.secrets,y=v.fs;return g?(0,p.Y)(ff.j,{secrets:w,readFile:y.readFile,session:s,setSession:u,inputRef:i,openPane:a,hideHeaderButtons:"centered"===f||"centeredVisualPlanner"===f,onPlanApproval:function(){m("tilingLayout")}}):(0,p.Y)(fW,{inputRef:i,openPane:a,session:s,onSessionChange:u})},Icon:function(e){var n=e.size;return(0,p.Y)(fh.l,{size:n})},getTitle:function(){return"Agent"},description:I.RB,category:X.bY.WorkspaceFeatures,decode:function(e){return fd.T(fm.V,e)}},fj=t(10527);function fZ(){var e=(0,g._)(["\n  query Threads2Inbox {\n    currentUser {\n      id\n      username\n      image\n    }\n  }\n"]);return fZ=function(){return e},e}var fq={},fK=(0,v.J1)(fZ()),f$=t(31592),fJ=t(50185);function fQ(e,n){var t=n.onReceiveAnnotationUpdate,r=void 0===t?function(){}:t,i=(0,eq.A)().showError,o=(0,d._)((0,h.useState)(null),2),a=o[0],l=o[1],s=(0,f$.d1)({variables:{replId:e}}),c=function(){var e,n=null==(e=s.data)?void 0:e.currentUser;return n?{user:{__typename:"User",id:n.id,username:n.username,fullName:n.fullName,image:n.image}}:null},u=function(n,t){var r=n.readQuery({query:f$.FL,variables:{replId:e}});if(!r)throw Error("expected data");if("Repl"!==r.repl.__typename)throw Error("expected repl");var i=[],o=r.repl.annotationAnchors,a=o.findIndex(function(e){return e.id===t.id});i=-1===a?(0,B._)(o).concat([t]):(0,B._)(o.slice(0,a)).concat([t],(0,B._)(o.slice(a+1))),n.writeQuery({query:f$.FL,variables:{replId:e},data:(0,e6._)((0,m._)({},r),{repl:(0,e6._)((0,m._)({},r.repl),{annotationAnchors:i})})})},p=(0,d._)((0,f$.tD)({onError:function(e){return i(e.message)},update:function(e,n){if(n.errors)return void n.errors.forEach(function(e){return i(e.message)});var t,r=null==(t=n.data)?void 0:t.createAnnotationAnchor;r&&("UserError"===r.__typename?i(r.message):"AnnotationAnchor"===r.__typename&&u(e,r))}}),1)[0],f=(0,d._)((0,f$.lb)({onError:function(e){return i(e.message)},update:function(e,n){if(n.errors)return void n.errors.forEach(function(e){return i(e.message)});var t,r=null==(t=n.data)?void 0:t.createAnnotationMessage;r&&("UserError"===r.__typename?i(r.message):"AnnotationAnchor"===r.__typename&&u(e,r))}}),1)[0],g=(0,d._)((0,f$.CX)({onError:function(e){return i(e.message)},update:function(e,n){if(n.errors)return void n.errors.forEach(function(e){return i(e.message)});var t,r=null==(t=n.data)?void 0:t.updateAnnotationAnchor;r&&("UserError"===r.__typename?i(r.message):"AnnotationAnchor"===r.__typename&&u(e,r))}}),1)[0],v=(0,d._)((0,fJ.F)(),1)[0],w=(0,d._)((0,f$.CY)(),1)[0];(0,f$.oh)({variables:{replId:e},onData:function(e){var n=e.data.data,t=e.client,i=null==n?void 0:n.updatedAnnotation;i&&(u(t,i),r(i))}});var y=(0,d._)((0,h.useState)([]),2),b=y[0],S=y[1];(0,h.useEffect)(function(){var e,n=[];(null==(e=s.data)?void 0:e.repl.__typename)==="Repl"&&n.push.apply(n,(0,B._)(s.data.repl.annotationAnchors)),a&&n.push((0,e6._)((0,m._)({},a),{isGeneral:!!a.isGeneral,messages:[],isResolved:!1,__typename:"AnnotationAnchor"})),S(n)},[s,a]);var Y=(0,h.useMemo)(function(){return b.find(function(e){return e.isGeneral})},[b]),A=(0,h.useMemo)(function(){return b.reduce(function(e,n){return n.isResolved?e:n.messages.some(function(e){return!1===e.seen})?e+1:e},0)},[b]),x=function(e){var n=e.annotationAnchor,t=e.annotationMessage;p({variables:{annotationAnchor:n,annotationMessage:t,highlight:e.highlight},optimisticResponse:{__typename:"RootMutationType",createAnnotationAnchor:(0,e6._)((0,m._)({},c(),n),{isGeneral:!!n.isGeneral,__typename:"AnnotationAnchor",messages:t?[(0,e6._)((0,m._)({},c(),t),{content:{text:t.text,__typename:"TextMessageContentType"},anchor:{id:n.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",timeCreated:new Date().toISOString(),currentUserIsAuthor:!0,seen:!0})]:[],isResolved:!1})}})},C=(0,L.A)(function(){return rJ()(w,1e3,{trailing:!1})},[w]);return{annotations:b,loading:s.loading,generalThread:Y,unreadThreadCount:A,placeholderAnchorId:null==a?void 0:a.id,createAnnotationAnchorPlaceholder:function(e){l(e.annotationAnchor)},deleteAnnotationAnchorPlaceholder:function(){l(null)},createAnnotationAnchor:x,createAnnotationMessage:function(n){var t=n.anchor,r=n.annotationMessage,i=n.highlight;(null==a?void 0:a.id)===t.id?(l(null),x({annotationAnchor:(0,m._)({},a),annotationMessage:r,highlight:i})):f({variables:{replId:e,anchorId:t.id,annotationMessage:r,highlight:i},optimisticResponse:{__typename:"RootMutationType",createAnnotationMessage:(0,e6._)((0,m._)({},t),{messages:(0,B._)(t.messages.filter(function(e){return!e.id.startsWith("chat-")})).concat([(0,e6._)((0,m._)({},c(),r),{content:{text:r.text,__typename:"TextMessageContentType"},anchor:{id:t.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",timeCreated:new Date().toISOString(),currentUserIsAuthor:!0,seen:!0})])})}})},updateAnnotationAnchor:function(e){var n=e.annotationAnchor,t=e.changes;g({variables:{id:n.id,changes:t},optimisticResponse:{__typename:"RootMutationType",updateAnnotationAnchor:(0,e6._)((0,m._)({},n,t),{isResolved:"boolean"==typeof t.isResolved?t.isResolved:n.isResolved})}})},updateThreadPreview:function(e){C({variables:{threadId:e.threadId,messageId:e.messageId}})},markAllMessagesInReplAsSeenByUser:function(){v({variables:{replId:e}})}}}var fX=t(71432),f0=t(63441),f1=["TextMessageContentType","PreviewMessageContentType"],f2=t(75725),f4=t(86020),f5=t(92395),f3=t(1841);function f6(e){var n=e.message,t=(0,h.useMemo)(function(){var e=n.timeCreated;return e?(0,f4.A)(new Date(e),"do MMM, hh:mm a"):""},[n]),r=n.user;return(0,p.Y)("div",{className:"resolved-message",children:(0,p.FD)(f5.z,{align:"center",spacing:1,children:[r?(0,p.Y)(f3.A,{url:r.image,size:"m",username:r.username,fullName:r.fullName}):null,(0,p.Y)(lN.A,{color:tH.LU.foregroundDefault,size:24}),(0,p.FD)(eW.EY,{variant:"small",multiline:!1,children:["Resolved ",t]})]})})}var f8=t(64829),f7=(0,tB.i7)({"0%":[e_.wp.backgroundColor.foregroundDimmest],"50%":[e_.wp.backgroundColor.foregroundDimmest],"100%":[e_.wp.backgroundColor.foregroundDimmest]}),f9=(0,eC.x)({message:[e_.wp.backgroundColor.backgroundHigher,e_.wp.py(4),e_.wp.px(8),e_.wp.borderRadius(8),e_.wp.fontSize("default"),e_.wp.width("fit-content"),e_.wp.maxWidth("100%"),{overflowWrap:"break-word",whiteSpace:"pre-wrap","&.userhighlight":{background:"transparent"}}],typingIndicator:[e_.wp.minHeight("1em"),e_.wp.display.grid,e_.wp.align.center,{gridAutoFlow:"column",gridGap:tH.LU.space8}],dot:[e_.wp.width(6),e_.wp.height(6),e_.wp.borderRadius(6),e_.wp.display.inlineBlock,e_.wp.backgroundColor.foregroundDimmest,{animation:"".concat(f7," 0.6s infinite"),"&:nth-child(1)":{animationDelay:"0s"},"&:nth-child(2)":{animationDelay:"0.2s"},"&:nth-child(3)":{animationDelay:"0.4s"}}]});function he(e){var n=e.message,t=e.messageStyle,r=(0,h.useMemo)(function(){return"TextMessageContentType"===n.content.__typename?(0,f8.vY)(n.content.text,{}):"PreviewMessageContentType"===n.content.__typename&&"string"==typeof n.content.preview?(0,f8.vY)(n.content.preview,{}):null},[n.content]),i="PreviewMessageContentType"===n.content.__typename&&"string"!=typeof n.content.preview;return n.user&&(r||i)?(0,p.Y)("div",{children:(0,p.FD)("div",{className:t,css:f9.message,children:[r?(0,p.Y)(f8.JX,{message:r,codeStyles:{color:tH.LU.orangeStronger,background:tH.LU.backgroundHighest}}):null,i?(0,p.FD)("span",{css:f9.typingIndicator,children:[(0,p.Y)("span",{css:f9.dot}),(0,p.Y)("span",{css:f9.dot}),(0,p.Y)("span",{css:f9.dot})]}):null]})}):null}function hn(e){var n=e.message,t=(0,h.useMemo)(function(){var e=n.timeCreated;return e?(0,f4.A)(new Date(e),"do MMM, hh:mm a"):""},[n]),r=n.user;return(0,p.Y)("div",{className:"resolved-message",children:(0,p.FD)(f5.z,{align:"center",spacing:1,children:[r?(0,p.Y)(f3.A,{url:r.image,username:r.username,fullName:r.fullName,size:"m"}):null,(0,p.Y)(lN.A,{size:24,color:tH.LU.foregroundDimmest}),(0,p.FD)(eW.EY,{variant:"small",multiline:!1,children:["Unresolved ",t]})]})})}var ht=function(e){var n=new Date(e),t=new Date;return 60>(0,f2.A)(t,n)?"now":(0,r7.K)(n,!0)},hr=(0,eC.x)({root:[e_.wp.display.grid,e_.wp.backgroundColor.backgroundDefault,e_.wp.color.foregroundDefault,e_.wp.position.relative,{gridTemplateRows:"auto auto",gridRowGap:tH.LU.space8,gridTemplateColumns:"minmax(0, 1fr)"}],messageInfo:[e_.wp.display.flex,e_.wp.align.center,e_.wp.fontSize("small")],messages:[e_.wp.display.grid,{gridRowGap:tH.LU.space4,gridTemplateColumns:"minmax(0, 1fr)"}],avatar:{marginRight:"5px"},username:[e_.wp.color.foregroundDimmer,{marginRight:"3px"}],time:[e_.wp.color.foregroundDimmest]});function hi(e){var n=e.messageGroup,t=n.messages,r=n.user,i=n.timeCreated;return r?(0,p.FD)("div",{css:hr.root,children:[(0,p.FD)("div",{css:hr.messageInfo,children:[(0,p.Y)("div",{css:hr.avatar,children:(0,p.Y)(f3.A,{username:r.username,fullName:r.fullName,url:r.image,size:"xs",style:{minHeight:"15px",minWidth:"15px",height:"15px",width:"15px"}})}),(0,p.Y)("div",{css:hr.username,children:r.username}),(0,p.Y)("div",{css:hr.time,children:ht(i)})]}),(0,p.Y)("div",{css:hr.messages,children:t.map(function(e){return(0,p.Y)(he,{message:e},e.id)})})]}):null}function ho(e){var n=e.messageGroup;if("TextMessageContentType"===n.messageType||"PreviewMessageContentType"===n.messageType)return(0,p.Y)(hi,{messageGroup:n});if("StatusMessageContentType"===n.messageType){var t=n.messages[0];if("StatusMessageContentType"===t.content.__typename&&"resolved"===t.content.status)return(0,p.Y)(f6,{message:t});if("StatusMessageContentType"===t.content.__typename&&"unresolved"===t.content.status)return(0,p.Y)(hn,{message:t})}return null}var ha=t(70605),hl=t(39695);function hs(){var e=(0,g._)(["\n  query AnnotationThreadInput {\n    currentUser {\n      id\n    }\n  }\n"]);return hs=function(){return e},e}var hc={},hu=(0,v.J1)(hs());let hd=function(e){var n={},t=!0,r=!1,i=void 0;try{for(var o,a=e.messages[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;l.user&&(n[l.user.id]=l.user)}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return Object.values(n)};var hp=t(5126),hf=t(41561),hh=t(48028),hm=(0,eC.x)({inputGroup:{display:"grid",gridTemplateColumns:"1fr min-content",gridGap:"10px",alignItems:"center",justifyContent:"start"},inputBox:[e_.wp.backgroundColor.backgroundHigher,e_.wp.color.foregroundDefault,e_.wp.borderRadius(8),e_.wp.p(8),e_.wp.fontSize("default"),e_.wp.font.default,e_.wp.overflowY("auto"),e_.wp.maxHeight("calc(".concat(tH.LU.fontSizeDefault," * 18)")),{border:"none",outline:"none",resize:"none",lineHeight:"16px","&::placeholder":{whiteSpace:"pre"},"&:not(:empty)":{borderRadius:"6px"}}],mentionSuggestionsContainer:[e_.wp.display.grid,e_.wp.overflow("hidden"),{paddingTop:"1em",gridRowGap:tH.LU.space4}],mentionSuggestion:[e_.wp.display.grid,e_.wp.align.center,e_.wp.py(8),e_.wp.cursor.pointer,e_.wp.color.foregroundDefault,{gridTemplateColumns:"min-content max-content",gridColumnGap:tH.LU.space8,'&[data-selected="true"]':[e_.wp.backgroundColor.backgroundRoot,{"& > *":{transform:"scale(1.1)"}}]}]}),hg=(0,h.forwardRef)(function(e,n){var t,r,i,o,a=e.annote,l=e.placeholder,s=e.onChangeMessage,c=e.onFinalizeMessage,u=function(){""!==v.trim()&&(c({messageId:C||(0,iq.A)(),message:v.trim()}),_(null),y(""))},f=null==(o=(t=(0,m._)({},hc,void 0),w.I(hu,t)).data)||null==(i=o.currentUser)?void 0:i.id,g=(0,d._)((0,h.useState)(""),2),v=g[0],y=g[1],b=(0,d._)((0,h.useState)(!1),2),S=b[0],Y=b[1],A=(0,h.useRef)(null),x=(0,d._)((0,h.useState)(null),2),C=x[0],_=x[1],k=(0,fX.A)(),D=(0,hp.A)().ref,E=(0,d._)((0,hf.A)({"@":(r=(0,H._)(function(e){var n,t;return(0,z.YH)(this,function(r){return n=k.filter(function(e){return e.id!==f}),e&&(t=e.toLowerCase(),n=n.filter(function(e){return e.username.toLowerCase().startsWith(t)})),[2,n.slice(0,5).map(function(e){return{icon:(0,p.Y)(f3.A,{fullName:e.fullName,username:e.username,url:e.image,style:{height:"24px",width:"24px",minWidth:"24px",minHeight:"24px"}}),value:e.username}})]})}),function(e){return r.apply(this,arguments)})}),2),R=E[0].suggestions,I=E[1],F=(0,hl.Bp)({items:(null==R?void 0:R.results)||[],defaultHighlightedIndex:0,isOpen:!!(null==R?void 0:R.results.length),onSelectedItemChange:function(e){var n=e.selectedItem;if(R&&n){var t=R.applySuggestion({targetValue:v,suggestionValue:n.value}),r=t.fullValue,i=t.cursorIndex;y(r),setTimeout(function(){A.current&&(A.current.setSelectionRange(i,i),A.current.focus())})}}}),T=F.isOpen,P=F.getInputProps,L=F.getMenuProps,U=F.getItemProps,N=F.highlightedIndex,O=F.getComboboxProps;(0,h.useEffect)(function(){var e="threads/drafts/".concat(a.id),n=tT.A.get(e,"string");n&&y(n);var t=A.current;return function(){if(t){var n=t.value;if(0===n.length)return void tT.A.remove(e);tT.A.set(e,n)}}},[]),(0,h.useEffect)(function(){setTimeout(function(){A.current&&A.current.focus()})},[A]);var M=hd(a).filter(function(e){return e.id!==f}),B="Add a comment";return 1===M.length?B="Reply to @".concat(M[0].username):M.length>1&&(B="Reply"),a.isResolved&&(B="Reply to unresolve this thread"),l&&(B=l),(0,p.FD)("div",{children:[(0,p.FD)("div",(0,e6._)((0,m._)({css:hm.inputGroup},O()),{children:[(0,p.Y)("textarea",(0,m._)({css:hm.inputBox},P({autoFocus:!0,placeholder:B,value:v,onCompositionStart:function(){return Y(!0)},onCompositionEnd:function(){return Y(!1)},onChange:function(e){var n=e.target.value,t=C||(0,iq.A)();C||_(t),y(n),s({messageId:t,message:n})},onKeyDown:function(e){e.stopPropagation(),!T&&(e.nativeEvent.preventDownshiftDefault=!0,"Enter"!==e.key||e.shiftKey||S||(e.preventDefault(),u()))},rows:1,ref:function(e){A.current=e,n&&(void 0===n?"undefined":(0,nr._)(n))==="object"&&(n.current=e),I(e),D(e)}}))),(0,p.Y)(t7.K0,{alt:"Send message",onClick:u,disabled:0===v.length,children:(0,p.Y)(hh.A,{})})]})),(0,p.Y)("div",(0,e6._)((0,m._)({},L({})),{children:T&&R?(0,p.Y)("div",{css:hm.mentionSuggestionsContainer,children:R.results.map(function(e,n){return(0,ha.n)("div",(0,e6._)((0,m._)({css:hm.mentionSuggestion,"data-selected":N===n},U({item:e,index:n})),{key:e.value,children:[e.icon,(0,p.Y)("div",{children:e.value})]}))})}):null}))]})});hg.displayName="ThreadInputForwarded";var hv=t(70390),hw=(0,eC.x)({generalThread:[e_.wp.pt(0),e_.wp.borderRadius(8,8,0,0),e_.wp.backgroundColor.backgroundDefault,e_.wp.flex.column,e_.wp.flex.growAndShrink(1),e_.wp.overflow("hidden"),e_.wp.height("100%"),{gridTemplateRows:"min-content 1fr min-content",gridGap:tH.LU.space8}],messageGroupContainerContainer:[e_.wp.scrollbar.thin,e_.wp.flex.column,e_.wp.height(0),e_.wp.flex.grow(1),e_.wp.overflow("hidden")],messageGroupContainer:[e_.wp.p(12),e_.wp.display.grid,e_.wp.overflowY("auto"),{gridRowGap:tH.LU.space16}],threadInputContainer:[e_.wp.width("100%"),e_.wp.border({color:tH.LU.outlineDimmer,width:1,direction:"top"}),e_.wp.py(8),e_.wp.px(12)]});function hy(e){var n=e.generalThreadsOpen,t=e.setGeneralThreadsOpen,r=e.generalThread,i=e.handleChangeMessage,o=void 0===i?function(){}:i,a=e.handleFinalizeMessage,l=void 0===a?function(){}:a,s=e.createAnnotationAnchorPlaceholder,c=void 0===s?function(){}:s,u=(0,eB.A)(),d=(0,h.useMemo)(function(){return r?function(e){var n=[],t=null,r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var s,c,u,d,p=a.value;!t||(null==p||null==(s=p.user)?void 0:s.id)!==(null==t||null==(c=t.user)?void 0:c.id)||(null==p||null==(u=p.anchor)?void 0:u.id)!==(null==t?void 0:t.anchorId)||!f1.includes(t.messageType)||!f1.includes(p.content.__typename)||new Date(p.timeCreated).getTime()-new Date(t.timeCreated).getTime()>6e5?(t&&n.push(t),t={user:p.user,timeCreated:p.timeCreated,anchorId:null==p||null==(d=p.anchor)?void 0:d.id,messages:[p],messageType:p.content.__typename}):t.messages.push(p)}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return t&&n.push(t),n}((0,B._)(r.messages).sort(function(e,n){return new Date(e.timeCreated).getTime()-new Date(n.timeCreated).getTime()})):[]},[r]);(0,h.useEffect)(function(){r||c({annotationAnchor:{id:(0,iq.A)(),replId:u,isGeneral:!0,indexStart:null,indexEnd:null,isResolved:!1,otVersion:null,path:null}})},[r,u,c]),(0,h.useEffect)(function(){r||c({annotationAnchor:{id:(0,iq.A)(),replId:u,isGeneral:!0,indexStart:null,indexEnd:null,isResolved:!1,otVersion:null,path:null}})},[r,u,c]);var f=(0,h.useRef)(null);(0,hv.A)(n&&r||null);var m=function(){f.current&&(f.current.scrollTop=f.current.scrollHeight)};return((0,h.useEffect)(function(){m()},[f,r]),r)?(0,p.FD)("div",{css:hw.generalThread,onClick:function(){return t(!0)},children:[(0,p.Y)("div",{css:hw.messageGroupContainerContainer,children:(0,p.Y)("div",{css:hw.messageGroupContainer,ref:f,children:d.map(function(e){return(0,p.Y)(ho,{messageGroup:e},e.messages[0].id)})})}),(0,p.Y)("div",{css:hw.threadInputContainer,children:(0,p.Y)(hg,{placeholder:"Send message",annote:r,onChangeMessage:function(e){o({anchor:r,message:e.message,messageId:e.messageId}),t(!0)},onFinalizeMessage:function(e){l({anchor:r,message:e.message,messageId:e.messageId}),t(!0),(0,V.u4)(V.AZ.MESSAGE_SENT,{replId:u,source:"chat",newThread:0===r.messages.length})}})})]}):null}var hb=t(98533),hS=t(22334),hY=t(7233),hA={title:"Threads",filters:{inbox:{key:"toggle-inbox",label:"Inbox",icon:(0,p.Y)(hS.A,{})},unread:{key:"toggle-unread",label:"Unread",icon:(0,p.Y)(hb.A,{})},participating:{key:"toggle-participating",label:"Participating",icon:(0,p.Y)(hY.A,{})},resolved:{key:"toggle-resolved",label:"Resolved",icon:(0,p.Y)(lN.A,{})}},sorts:{chronological:{key:"toggle-chronological",label:"Chronological",icon:(0,p.Y)(or.A,{})},codeOrder:{key:"toggle-codeOrder",label:"Code order",icon:(0,p.Y)(function(e){return(0,p.Y)(tV.Ay,(0,e6._)((0,m._)({},e),{children:(0,p.Y)("path",{fillRule:"evenodd",d:"M19 9.75a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5Zm-3.675 1.5a3.751 3.751 0 0 1 7.425.75 3.75 3.75 0 0 1-7.425.75h-4.678a2.751 2.751 0 0 1-5.293 0H2a.75.75 0 0 1 0-1.5h3.354a2.751 2.751 0 0 1 5.292 0h4.679ZM8 10.75a1.25 1.25 0 1 0 0 2.5 1.25 1.25 0 0 0 0-2.5Z",clipRule:"evenodd"})}))},{})}},search:{placeholder:"Search threads"},markAsRead:"Mark as read",empty:{image:{alt:"an illustration of an escape key that resembles a sunny beach, with an umbrella and palm tree"},noThreadsCreated:{text:{primary:"You havent started any threads yet.",secondary:function(e){return(0,p.FD)(p.FK,{children:["Select code and press ",(0,p.Y)(eb._y,{keyCombo:e,small:!0})," ","to get started."]})}}},noThreadsFound:{text:{primary:"No threads found.",secondary:"Try adjusting your search or filters."}}}},hx=t(63809),hC=t(24712),h_=t(15744),hk=t(34172),hD=t(73414),hE=t(80346);let hR=function(e){var n=(0,hE.A)(e,null,null).updateThread;return{handleToggleResolved:function(e){return n({changes:{isResolved:e}})}}};var hI=t(16610),hF=t(66257);let hT=function(e){var n,t=e.thread,r=e.onClick,i=t.messages.filter(function(e){return!e.seen}).length,o=null==(n=(0,h_.zn)(t.path?t:null))?void 0:n.snippet,a=(0,hE.A)(t.id,null,null).thread,l=(0,hI.Ln)(),s=hR(t.id).handleToggleResolved,c={jumpToCode:"Jump to code",resolveThread:"Resolve this thread",unresolveThread:"Re-open",replyCount:function(e,n){var t=function(e){return 1===e?"reply":"replies"};return e<=1?"View ".concat(1===n?"unread":""," thread"):n?"View ".concat(n," unread ").concat(t(n)):"View ".concat(e-1," ").concat(t(e-1))},threadOpened:function(e,n){return"Opened ".concat(e," by ").concat(n)}},u=t.messages[0],d=(0,h.useMemo)(function(){return(null==u?void 0:u.timeCreated)?(0,hD.G)(u.timeCreated):"some time ago"},[u]);return t.user?(0,p.FD)(eD.ui,{css:[so.b.filled,e_.wp.overflow("hidden"),l===t.id&&{borderColor:tH.LU.accentPrimaryDefault}],onClick:function(){r(t)},children:[(0,p.FD)(eD.ui,{elevated:!0,css:[e_.wp.flex.grow(1),e_.wp.px(8),e_.wp.py(8)],row:!0,align:"center",justify:"space-between",children:[(0,p.Y)(eG.S,{row:!0,align:"center",gap:4,children:(0,p.Y)(eW.EY,{color:"dimmer",variant:"small",multiline:!1,children:c.threadOpened(d,t.user.username)})}),(0,p.FD)(eG.S,{row:!0,align:"center",gap:4,children:[o&&t.path?(0,p.Y)(t7.K0,{alt:c.jumpToCode,onClick:function(){return r(t)},children:(0,p.Y)(hF.A,{})}):null,t.isResolved?(0,p.Y)(ez.$n,{text:c.unresolveThread,size:"small",colorway:"primary",onClick:function(){s(!1)}}):(0,p.Y)(t7.K0,{alt:c.resolveThread,onClick:function(){s(!0)},children:(0,p.Y)(lN.A,{})})]})]}),o&&t.path?(0,p.Y)(hx.f,{elevation:"root",path:t.path,initialDoc:o.lines.join("\n"),startLineNumber:o.startLineNumber,fontSize:12,maxHeight:"42px",minHeight:"42px",allowScroll:!1}):null,u?(0,p.Y)(eG.S,{p:8,py:12,children:(0,p.Y)(hk.A,{thread:a,message:u},u.id)}):null,t.messages.length>1&&(0,p.FD)(eG.S,{css:[e_.wp.color.foregroundDimmer],pb:12,px:8,row:!0,align:"center",gap:4,children:[(0,p.Y)(eG.S,{css:[e_.wp.position.relative],children:(0,p.Y)(hC.A,{unreadDot:i>0})}),(0,p.Y)(eW.EY,{variant:"small",multiline:!1,children:c.replyCount(t.messages.length,i)})]})]}):null};var hP=t(14886);let hL=function(e){var n=e.path,t=e.threads,r=e.onThreadClick,i=t.some(function(e){return e.messages.some(function(e){return!e.seen})});return(0,p.Y)(eG.S,{pb:8,children:(0,p.Y)(hP.A,{css:[tH.LU.singleLine,e_.wp.px(8)],headerContent:(0,p.FD)(eG.S,{css:[e_.wp.flex.growAndShrink(1),e_.wp.mr(8)],row:!0,align:"center",justify:"space-between",children:[(0,p.FD)(eG.S,{css:[e_.wp.flex.growAndShrink(1)],row:!0,align:"center",gap:8,children:[(0,p.Y)(ef.A,{path:n,size:20}),(0,p.Y)(eW.EY,{css:[e_.wp.flex.shrink(1)],multiline:!1,children:n})]}),i?(0,p.Y)("div",{css:[e_.wp.flex.shrink(0),e_.wp.width(8),e_.wp.height(8),e_.wp.backgroundColor.redStronger,e_.wp.borderRadius("full")]}):null]}),children:(0,p.Y)("div",{css:[e_.wp.mt(8),e_.wp.colWithGap(8)],children:t.map(function(e){return(0,p.Y)(hT,{thread:e,onClick:r},e.id)})})})})};var hU=t(77089),hN=t(72054),hO=function(e){return e.CHRONOLOGICAL="chronological",e.CODE_ORDER="codeOrder",e}(hO||{}),hM=function(e){return e.PARTICIPATING="participating",e.RESOLVED="resolved",e.UNREAD="unread",e.INBOX="inbox",e}(hM||{});let hB=function(e){var n,t,r,i=e.isChatOnly,o=e.openFile,a=(0,eB.A)(),l=fQ(a,{onReceiveAnnotationUpdate:function(){}}),s=l.annotations,c=l.loading,u=l.generalThread,f=l.createAnnotationAnchorPlaceholder,g=l.createAnnotationMessage,v=l.updateThreadPreview,y=(n=(0,m._)({},fq,void 0),w.I(fK,n)),b=y.data,S=y.loading,Y=c||S,A=(0,d._)((0,h.useState)(!1),2),x=A[0],C=A[1],_=(0,hI.li)(),k=(0,d._)((0,h.useState)(""),2),D=k[0],E=k[1],R=(0,d._)((0,h.useState)("INBOX"),2),I=R[0],F=R[1],T=(0,d._)((0,h.useState)("CHRONOLOGICAL"),2),P=T[0],L=T[1],U=(0,h.useMemo)(function(){var e,n=null==b||null==(e=b.currentUser)?void 0:e.id;return s.filter(function(e){if("INBOX"===I)return!e.isResolved;if("RESOLVED"===I)return e.isResolved;if("PARTICIPATING"===I){var t;return!n||(null==(t=e.user)?void 0:t.id)===n||e.messages.some(function(e){var t=e.user;return(null==t?void 0:t.id)===n})}return"UNREAD"!==I||e.messages.some(function(e){return!e.seen})})},[b,s,I]),N=(0,h.useMemo)(function(){return U.filter(function(e){var n,t;return 0===D.length||null!=(t=null==(n=e.path)?void 0:n.toLowerCase().includes(D.toLowerCase()))&&t})},[D,U]),O=(0,h.useMemo)(function(){return(0,B._)(N).sort(function(e,n){if("CHRONOLOGICAL"===P){var t,r,i=new Date(null==(t=e.messages[0])?void 0:t.timeCreated),o=new Date(null==(r=n.messages[0])?void 0:r.timeCreated);return i&&o?i<o?1:-1:0}return"CODE_ORDER"===P?(0,ts.yh)(e.path,n.path):0}).reduce(function(e,n){var t=n.path;return t&&void 0!==t&&(e[t]=e[t]||[],e[t].push(n)),e},{})},[N,P]),M=(0,h.useMemo)(function(){return Object.values((0,m._)({},O)).map(function(e){return(0,B._)(e).sort(function(e,n){if("CHRONOLOGICAL"===P){var t,r,i,o,a,l,s=new Date(null==(a=e.messages[0])?void 0:a.timeCreated),c=new Date(null==(l=n.messages[0])?void 0:l.timeCreated);if(s&&c)return s<c?1:-1}else if("CODE_ORDER"===P)return(null!=(r=null!=(t=e.indexStart)?t:e.indexEnd)?r:0)<(null!=(o=null!=(i=n.indexStart)?i:n.indexEnd)?o:0)?-1:1;return 0})}).reduce(function(e,n,t){return e[Object.keys(O)[t]]=n,e},{})},[O,P]),W=(0,fX.A)().map(function(e){return e.username}),G=(t=(0,d._)((0,fJ.F)(),1)[0],function(){t({variables:{replId:a}})}),V=(r=(0,H._)(function(e){return(0,z.YH)(this,function(n){return e.path&&(o(e.path),_(e.id)),[2]})}),function(e){return r.apply(this,arguments)}),j=(0,eb.Jn)("editor.action.startThread");return i?(0,p.Y)(hy,{generalThreadsOpen:x,setGeneralThreadsOpen:C,generalThread:u,handleChangeMessage:function(e){var n=e.anchor,t=e.messageId;v({threadId:n.id,messageId:t})},handleFinalizeMessage:function(e){var n=e.anchor,t=e.message,r=e.messageId,i=(0,f8.vY)(t,{users:(0,B._)(W).concat(["everyone"])});g({anchor:n,annotationMessage:{id:r,text:t,mentions:i.mentions}})},createAnnotationAnchorPlaceholder:f}):(0,p.Y)(eD.ui,{className:"threads-inbox",css:[e_.wp.height("100%"),e_.wp.width("100%"),e_.wp.overflow("hidden"),e_.wp.position.relative],"aria-busy":Y,children:Y?(0,p.Y)(eG.S,{css:[e_.wp.display.flex,e_.wp.align.center,e_.wp.justify.center,e_.wp.height("100%")],children:(0,p.Y)(lO.A,{size:24})}):(0,p.FD)(p.FK,{children:[(0,p.Y)(eG.S,{className:"threads-inbox-header",css:[e_.wp.position.sticky,e_.wp.top(0),e_.wp.backgroundColor.backgroundDefault,{zIndex:10}],py:12,px:8,children:(0,p.FD)(eG.S,{css:[e_.wp.flex.wrap,{gap:8}],row:!0,align:"center",children:[(0,p.Y)(hU.pd,{placeholder:hA.search.placeholder,value:D,onChange:function(e){return E(e.target.value)},css:[e_.wp.flex.grow(1)]}),(0,p.FD)(eG.S,{css:[e_.wp.maxWidth("100%"),{gap:8}],row:!0,children:[(0,p.Y)(eG.S,{css:[e_.wp.flex.shrink(1)],children:(0,p.Y)(hN.in,{cssProps:[e_.wp.flex.shrink(1),{span:e_.wp.flex.shrink(1)}],icon:hA.filters[hM[I]].icon,suffix:(0,p.Y)(as.A,{}),label:hA.filters[hM[I]].label,onAction:function(e){switch(e){case"toggle-inbox":F("INBOX");break;case"toggle-unread":F("UNREAD");break;case"toggle-participating":F("PARTICIPATING");break;case"toggle-resolved":F("RESOLVED")}},children:Object.entries(hA.filters).map(function(e){var n=(0,d._)(e,2),t=(n[0],n[1]);return(0,p.Y)(fj.q,{"aria-label":t.label,children:(0,p.FD)(eG.S,{row:!0,gap:8,children:[t.icon,(0,p.Y)(eW.EY,{multiline:!1,children:t.label})]})},t.key)})})}),(0,p.Y)(eG.S,{css:[e_.wp.flex.shrink(1)],children:(0,p.Y)(hN.in,{cssProps:[e_.wp.flex.shrink(1),{span:e_.wp.flex.shrink(1)}],icon:hA.sorts[hO[P]].icon,suffix:(0,p.Y)(as.A,{}),label:hA.sorts[hO[P]].label,onAction:function(e){switch(e){case hA.sorts.chronological.key:L("CHRONOLOGICAL");break;case hA.sorts.codeOrder.key:L("CODE_ORDER")}},children:Object.entries(hA.sorts).map(function(e){var n=(0,d._)(e,2),t=(n[0],n[1]);return(0,p.Y)(fj.q,{"aria-label":t.label,children:(0,p.FD)(eG.S,{row:!0,gap:8,children:[t.icon,(0,p.Y)(eW.EY,{multiline:!1,children:t.label})]})},t.key)})})}),(0,p.Y)(eG.S,{css:[e_.wp.flex.shrink(1)],children:(0,p.Y)(ez.$n,{iconLeft:(0,p.Y)(lN.A,{}),text:hA.markAsRead,onClick:G,css:{span:e_.wp.flex.shrink(1)}})})]})]})}),0===s.length?(0,p.Y)(f0.A,{pane:{type:"threadInbox"},maxWidth:450,bodyText:(0,p.FD)(p.FK,{children:[hA.empty.noThreadsCreated.text.primary,j?(0,p.FD)(p.FK,{children:[(0,p.Y)("br",{}),hA.empty.noThreadsCreated.text.secondary(j)]}):void 0]})}):(0,p.Y)(p.FK,{children:Object.keys(M).length>0?(0,p.Y)(eG.S,{css:[e_.wp.flex.growAndShrink(1),e_.wp.overflowY("auto"),e_.wp.scrollbar.thin],children:Object.keys(M).map(function(e,n){return(0,p.Y)(hL,{path:e||"-",threads:Object.values(M)[n],onThreadClick:function(e){var n=window.getSelection();(null==n?void 0:n.type)!=="Range"&&V(e)}},e)})}):(0,p.Y)(f0.A,{pane:{type:"threadInbox"},maxWidth:450,asciiArt:"Binoculars",headerText:hA.empty.noThreadsFound.text.primary,bodyText:hA.empty.noThreadsFound.text.secondary})})]})})};var hH=n7.ZU.Object({type:n7.ZU.Literal("chat")}),hz=t(68868),hW=(0,tB.AH)([e_.wp.flex.growAndShrink(1)]),hG={Content:function(e){var n=e.options;return(0,p.Y)(eD.ui,{background:"default",css:hW,children:(0,p.Y)(hB,{isChatOnly:!0,openFile:function(e){n.performPaneOperation({operation:"open",secondary:!0,pane:{type:"codeEditor",data:{path:e}}})}})})},Icon:function(e){var n=e.size;return(0,p.Y)(tV.Vx.Provider,{value:{color:tH.LU.blueStronger,size:n},children:(0,p.Y)(hz.A,{})})},getTitle:function(){return"Chat"},description:"Chat with collaborators in this Repl",category:X.bY.Collaboration,decode:function(e){return fd.T(hH,e)}},hV=t(24288),hj={Content:function(e){var n=e.options,t=n.performPaneOperation,r=n.paneId,i=e.pane.data.autoFocus,o=(0,et.Fr)(),a=(0,h.useRef)(null);(0,eu.HP)(function(){return{focus:function(){var e;return null==(e=a.current)?void 0:e.call(a)}}},[]);var l=(0,h.useCallback)(function(e){t({operation:"replace",pane:e.pane}),o(r),(0,V.u4)(V.AZ.TOOL_OPENED,{source:"New Tab",tool:e.pane.type})},[t,r,o]),s=ey({currentPaneId:r,openPane:l});return(0,p.Y)(eE.r,{autoFocus:i,command:s,focusRef:a,showToolDescriptions:!0})},Icon:function(){return null},getTitle:function(){return"New tab"},category:X.bY.Other,decode:hV.D},hZ=t(97574),hq=t(10078),hK=t(47745),h$={Content:function(e){var n=e.options,t=n.paneId,r=n.performPaneOperation,i=e.pane.flow,o=(0,et.zL)(),a=o.isOpen,l=o.toggle,s=(0,h.useCallback)(function(){a.current||l()},[a,l]);return(0,p.Y)(hq.A,{flow:i,closeConfigPane:function(){return r({operation:"remove",pane:{id:t}})},useReadFile:hZ.A,openSidebar:s,onNewPaneSelected:function(e){return r({operation:"open",pane:e})},openConsole:function(){return r({operation:"open",pane:{type:"runnerOutput"}})}})},Icon:function(){return(0,p.Y)(iu.A,{})},getTitle:function(){return"Configure Repl"},category:X.bY.WorkspaceFeatures,decode:hK.D},hJ=t(80256),hQ=t(48899),hX=(0,eC.x)({initialBreakpoint:[e_.wp.display.inlineBlock,e_.wp.backgroundColor.accentPrimaryDefault,e_.wp.borderRadius("full"),e_.wp.width(8),e_.wp.height(8)],breakpoint:[e_.wp.display.flex,e_.wp.maxWidth("100%"),e_.wp.align.center],frame:[e_.wp.display.flex,e_.wp.align.center,e_.wp.color.foregroundDimmer,e_.wp.borderRadius(4),e_.wp.fontSize("default"),{flex:"1 1 auto",height:tH.LU.space32,cursor:"pointer","&:hover":{backgroundColor:tH.LU.backgroundHigher,color:tH.LU.foregroundDefault},".frameButton":{opacity:0},"&:focus-within":{color:tH.LU.foregroundDefault},"&:hover .frameButton":{background:tH.LU.backgroundHigher,backgroundColor:tH.LU.backgroundHigher,opacity:1},"&:focus-within .frameButton":{opacity:1},"&:hover .frameButton:hover":{backgroundColor:tH.LU.backgroundHighest}}],circle:[e_.wp.backgroundColor.accentPrimaryDefault,e_.wp.borderRadius("full"),e_.wp.width(11),e_.wp.height(11),e_.wp.mx(8),{flex:"0 0 auto",opacity:.5,'&[data-verified="true"]':{opacity:1}}],line:[e_.wp.font.code,e_.wp.backgroundColor.backgroundHigher,e_.wp.borderRadius(2),{padding:"1px 2px"}],location:[e_.wp.font.code,e_.wp.display.flex,e_.wp.minWidth(0),e_.wp.fontSize("default"),e_.wp.px(8),{flex:"1 1 auto"}],path:[e_.wp.overflow("hidden"),{textOverflow:"ellipsis",whiteSpace:"nowrap"}]});function h0(e){var n=[],t=!0,r=!1,i=void 0;try{for(var o,a=e.breakpoints[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=(0,d._)(o.value,2),s=l[0],c=l[1],u=!0,f=!1,h=void 0;try{for(var m,g=c[Symbol.iterator]();!(u=(m=g.next()).done);u=!0){var v=m.value;n.push((0,p.Y)(h1,{breakpoint:v,file:s,line:v.line,verified:v.verified,onClick:e.onBreakpointClick,onRemove:e.onRemove},"".concat(s,":").concat(v.line,":").concat(v.pid1Id,":").concat(v.dapId)))}}catch(e){f=!0,h=e}finally{try{u||null==g.return||g.return()}finally{if(f)throw h}}}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return(0,p.FD)(p.FK,{children:[(0,p.Y)(c5.A,{truncate:!0,level:5,children:"Breakpoints"}),n.length>0?(0,p.Y)(f5.T,{align:"stretch",constrainWidth:!0,children:n}):(0,p.FD)(eW.EY,{variant:"small",color:"dimmer",children:["To start, add a breakpoint ",(0,p.Y)("span",{css:hX.initialBreakpoint})," by clicking on a line number in the code editor."]})]})}function h1(e){var n=e.breakpoint,t=e.file,r=e.line,i=e.verified,o=e.onClick,a=e.onRemove,l=(0,hQ.H$)(t);return(0,p.Y)(p.FK,{children:(0,p.Y)(f5.T,{spacing:1,align:"stretch",children:(0,p.Y)("div",{css:hX.breakpoint,children:(0,p.FD)("div",{css:hX.frame,onClick:function(){o(t,r)},children:[(0,p.Y)("div",{css:hX.circle,"data-verified":i}),(0,p.Y)("div",{css:hX.line,children:r}),(0,p.Y)("div",{css:hX.location,children:(0,p.Y)("span",{css:hX.path,children:l||t})}),(0,p.Y)(t7.K0,{className:"frameButton",alt:"Remove breakpoint",onClick:function(){a({breakpoint:n})},children:(0,p.Y)(iH.A,{})})]})})})})}function h2(e){return(0,p.Y)(tV.Ay,(0,e6._)((0,m._)({},e),{children:(0,p.Y)("path",{fillRule:"evenodd",d:"M5.47 12.53a.75.75 0 0 1 0-1.06l5-5a.75.75 0 1 1 1.06 1.06L7.06 12l4.47 4.47a.75.75 0 1 1-1.06 1.06l-5-5Zm12 5-5-5a.75.75 0 0 1 0-1.06l5-5a.75.75 0 1 1 1.06 1.06L14.06 12l4.47 4.47a.75.75 0 1 1-1.06 1.06Z",clipRule:"evenodd"})}))}function h4(e){return(0,p.Y)(tV.Ay,(0,e6._)((0,m._)({},e),{children:(0,p.Y)("path",{fillRule:"evenodd",d:"M18.53 12.53a.75.75 0 0 0 0-1.06l-5-5a.75.75 0 1 0-1.06 1.06L16.94 12l-4.47 4.47a.75.75 0 1 0 1.06 1.06l5-5Zm-12 5 5-5a.75.75 0 0 0 0-1.06l-5-5a.75.75 0 0 0-1.06 1.06L9.94 12l-4.47 4.47a.75.75 0 1 0 1.06 1.06Z",clipRule:"evenodd"})}))}var h5=t(6088);function h3(e){return(0,p.Y)(tV.Ay,(0,e6._)((0,m._)({},e),{children:(0,p.Y)("path",{fillRule:"evenodd",d:"M3.47 9.53a.75.75 0 0 1 0-1.06l5-5a.75.75 0 0 1 1.06 0l5 5a.75.75 0 0 1-1.06 1.06L9.75 5.81V16A3.25 3.25 0 0 0 13 19.25h7a.75.75 0 0 1 0 1.5h-7A4.75 4.75 0 0 1 8.25 16V5.81L4.53 9.53a.75.75 0 0 1-1.06 0Z",clipRule:"evenodd"})}))}function h6(e){var n=e.client,t=e.debugConfig,r=(0,iK.A)(null==n?void 0:n.state),i=(0,iK.A)(null==n?void 0:n.supportsStepBack);return(0,p.FD)(eG.S,{row:!0,gap:2,children:[i?(0,p.FD)(p.FK,{children:[(0,p.Y)(t7.K0,{size:40,disabled:!n||"paused"!==r,onClick:function(){(0,V.u4)(V.AZ.DEBUGGER_USED,{action:"lastBreakpoint"}),null==n||n.reverseContinue()},alt:"Last Breakpoint",tooltipContents:"Last Breakpoint",tooltipPlacement:"bottom",children:(0,p.Y)(h2,{})}),(0,p.Y)(t7.K0,{size:40,disabled:!n||"paused"!==r,onClick:function(){(0,V.u4)(V.AZ.DEBUGGER_USED,{action:"stepBack"}),null==n||n.back()},alt:"Step Back",tooltipContents:"Step Back",tooltipPlacement:"bottom",children:(0,p.Y)(h5.A,{})})]}):null,(0,p.Y)(h7,{stop:function(){(0,V.u4)(V.AZ.DEBUGGER_USED,{action:"stop"}),null==n||n.stop()},start:function(){(0,V.u4)(V.AZ.DEBUGGER_USED,{action:"start"}),null==n||n.start(t)},state:r}),(0,p.Y)(t7.K0,{size:40,disabled:!n||"paused"!==r,onClick:function(){(0,V.u4)(V.AZ.DEBUGGER_USED,{action:"nextStep"}),null==n||n.next()},alt:"Next Step",tooltipContents:"Next Step",tooltipPlacement:"bottom",children:(0,p.Y)(lG.A,{})}),(0,p.Y)(t7.K0,{size:40,disabled:!n||"paused"!==r,onClick:function(){(0,V.u4)(V.AZ.DEBUGGER_USED,{action:"skipStep"}),null==n||n.skip()},alt:"Skip Step",tooltipContents:"Skip Step",tooltipPlacement:"bottom",children:(0,p.Y)(h3,{rotate:90})}),(0,p.Y)(t7.K0,{size:40,disabled:!n||"paused"!==r,onClick:function(){(0,V.u4)(V.AZ.DEBUGGER_USED,{action:"nextBreakpoint"}),null==n||n.continue()},alt:"Next Breakpoint",tooltipContents:"Next Breakpoint",tooltipPlacement:"bottom",children:(0,p.Y)(h4,{})})]})}var h8=(0,tB.i7)({"0%":{opacity:.2},"50%":{opacity:1},"100%":{opacity:.2}});function h7(e){var n=e.state,t=e.start,r=e.stop;return"terminated"===n?(0,p.Y)(t7.K0,{css:e_.wp.color.accentPrimaryDefault,size:40,onClick:t,alt:"Run",tooltipContents:"Run",tooltipPlacement:"bottom",children:(0,p.Y)(dS.A,{})}):"stopping"===n||null===n?(0,p.Y)(t7.K0,{size:40,disabled:!0,alt:"Loading",tooltipContents:"Loading",tooltipPlacement:"bottom",children:(0,p.Y)(lO.A,{})}):(0,p.Y)(t7.K0,{css:"initializing"===n||"preinitializing"===n?[e_.wp.color.foregroundDimmer,{animationName:h8.toString(),animationDuration:"2s",animationIterationCount:"infinite"}]:e_.wp.color.accentPrimaryDefault,size:40,onClick:r,alt:"Stop",tooltipContents:"Stop",tooltipPlacement:"bottom",children:(0,p.Y)(dY.A,{})})}function h9(){return(0,p.Y)(f0.A,{pane:{type:"debugger"},headerText:"Debugger is unavailable for this Repl",bodyText:" We are working on making more features configurable and the debugger available for more languages. Please check back again in the future. Meanwhile, if you're working on a website, be sure to check out our Devtools in the Webview pane. ",asciiArt:"Computer"})}function me(e){var n=e.client;return(0,p.Y)(ez.$n,{size:"small",variant:"outlined",onClick:function(){var e=n.getDebugLogs();if("undefined"!=typeof Blob){var t=new Blob([e],{type:"text/plain"}),r=document.createElement("a");r.download="debugger-logs.txt",r.href=URL.createObjectURL(t),r.dataset.downloadurl=["text/plain",r.download,r.href].join(":"),r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r),setTimeout(function(){URL.revokeObjectURL(r.href)},1500)}},text:"Download Logs",iconLeft:(0,p.Y)(re.A,{})})}var mn=t(45912);function mt(e){return(0,p.FD)(p.FK,{children:[(0,p.Y)(c5.A,{truncate:!0,level:5,children:"Call stack"}),(0,p.Y)(f5.T,{align:"stretch",constrainWidth:!0,children:e.frames.map(function(n){return(0,p.Y)(mi,{frame:n,onClick:e.onFrameClick},n.id)})})]})}var mr=(0,tB.AH)({"&":{display:"flex",alignItems:"center",justifyContent:"space-between",maxWidth:"100%",height:tH.LU.space32,cursor:"pointer",color:tH.LU.foregroundDimmer,borderRadius:tH.LU.borderRadius4,fontSize:tH.LU.fontSizeSmall,fontFamily:tH.LU.fontFamilyCode},"&:hover":{backgroundColor:tH.LU.backgroundHigher,color:tH.LU.foregroundDefault},".label":{fontSize:tH.LU.fontSizeDefault,paddingLeft:tH.LU.space8,paddingRight:tH.LU.space8,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},".name":{flex:"0 0 auto",backgroundColor:tH.LU.backgroundHigher,padding:"1px 2px",borderRadius:"2px"},".path":{flex:"0 1 auto"},".line":{display:"inline-block",marginRight:tH.LU.space8,backgroundColor:tH.LU.backgroundHigher,padding:"1px 2px",borderRadius:"2px"}});function mi(e){var n,t,r=e.frame,i=e.onClick,o=null==(n=r.source)?void 0:n.name,a=null==(t=r.source)?void 0:t.path,l=o&&(0,hQ.H$)(o),s=a&&(0,hQ.H$)(a),c=a&&(0,hQ.f_)(a);return(0,p.Y)(p.FK,{children:(0,p.FD)("div",{className:"frame",onClick:function(){return c&&i(c,r.line)},css:mr,children:[(0,p.Y)("div",{className:"label name",children:r.name}),(0,p.FD)("div",{className:"label path",children:[(0,p.Y)("span",{className:"line",children:r.line}),l||s||o||a]})]})})}var mo=t(22902),ma=t(96556),ml=(0,eC.x)({root:[e_.wp.height("100%"),e_.wp.width("100%"),e_.wp.p(8),e_.wp.overflow("auto"),e_.wp.colWithGap(8),{a:{fontSize:tH.LU.fontSizeDefault,color:tH.LU.accentPrimaryDefault,fontWeight:tH.LU.fontWeightMedium}}],mainContainer:[e_.wp.flex.grow(1),e_.wp.colWithGap(16)],downloadLogsContainer:[e_.wp.flex.grow(0),e_.wp.flex.row,e_.wp.justify.end]});function ms(e){var n=(0,ma.c)(),t=(0,er.A)().debuggest,r=(0,iK.A)(t.mainClient),i=(0,iK.A)(r?r.state:null),o=(0,iK.A)(r?r.stackFrames:null),a=(0,iK.A)(r?r.variables:null),l=(0,iK.A)(r?r.breakpoints:null),s=(0,t8.rM)(),c=(0,ed.L2)(),u=(0,hJ.I)(),f=null!=u&&!!u.debuggers&&u.debuggers.length>0,m=(0,d._)((0,h.useState)(null),2),g=m[0],v=m[1],w=(0,h.useMemo)(function(){return function(e,n,t,r){if(!(null==e?void 0:e.debuggers))return[];var i=[];if(n=n.slice(),r&&-1===n.indexOf(r)&&n.splice(0,0,r),t){var o=n.indexOf(t);-1!==o&&(n.splice(o,1),n.splice(0,0,t))}var a=!0,l=!1,s=void 0;try{for(var c,u=n[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var d=c.value;if(d.match(/(\.[a-z0-9]+)$/)){var p=!0,f=!1,h=void 0;try{for(var m,g=e.debuggers[Symbol.iterator]();!(p=(m=g.next()).done);p=!0){var v=m.value;if(v.fileParam){var w=(0,mn.Z)(v.fileTypeAttrs);null===w&&v.language&&(w=mn.Jh.from(v.language)),w&&(0,mn.$h)(d,w)&&i.push({debuggerOption:v,filePath:d,title:"Debug ".concat(d," (").concat(v.name,")")})}}}catch(e){f=!0,h=e}finally{try{p||null==g.return||g.return()}finally{if(f)throw h}}}}}catch(e){l=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw s}}var y=!0,b=!1,S=void 0;try{for(var Y,A=e.debuggers[Symbol.iterator]();!(y=(Y=A.next()).done);y=!0){var x=Y.value;x.fileParam||i.push({debuggerOption:x,title:"Debug (".concat(x.name,")")})}}catch(e){b=!0,S=e}finally{try{y||null==A.return||A.return()}finally{if(b)throw S}}return i}(u||null,c,s,(null==u?void 0:u.entrypoint)||"")},[s,c,u]);(0,h.useEffect)(function(){(w.length>0&&!g||g&&!w.find(function(e){return e.debuggerOption.id===g.debuggerOption.id&&e.filePath===g.filePath}))&&v(w[0])},[w]);var y=function(n,t){var r=(0,hQ.H$)(n);r&&e.onOpenFile({path:r,line:t})};return f?(0,p.FD)(eG.S,{css:ml.root,children:[(0,p.FD)(eG.S,{css:ml.mainContainer,children:[w.length>0&&(0,p.Y)(tD.l,{id:n("debug-config"),items:w,selectedItem:g,onChange:function(e){v(e)},"aria-label":"Select a debugging configuration"}),(0,p.Y)(h6,{client:r,debugConfig:null!=g?g:void 0}),null!=l?(0,p.Y)(h0,{breakpoints:l,onBreakpointClick:y,onRemove:function(e){var n=e.breakpoint;r&&n.pid1Id&&r.removeBreakpoint(n.pid1Id)}}):null,null!=a&&r&&"paused"===i?(0,p.Y)(mo.A,{client:r,variables:a}):null,null!=o&&"paused"===i?(0,p.Y)(mt,{frames:o,onFrameClick:y}):null]}),null!=r?(0,p.Y)(eG.S,{css:ml.downloadLogsContainer,children:(0,p.Y)(me,{client:r})}):null]}):(0,p.Y)(h9,{})}var mc=n7.ZU.Object({type:n7.ZU.Literal("debugger")});function mu(e){return(0,p.Y)(tV.Ay,(0,e6._)((0,m._)({},e),{children:(0,p.Y)("path",{fillRule:"evenodd",d:"M21 3.25a.75.75 0 0 1 .75.75v16a.75.75 0 0 1-1.5 0V4a.75.75 0 0 1 .75-.75ZM3.75 5.292v13.416L15.488 12 3.75 5.292Zm-1.5-.43a1.25 1.25 0 0 1 1.87-1.086l12.492 7.139c.84.48.84 1.69 0 2.17L4.12 20.224a1.25 1.25 0 0 1-1.87-1.086V4.862Z",clipRule:"evenodd"})}))}var md={Content:function(e){var n=e.options;return(0,p.Y)(ms,{onOpenFile:function(e){n.performPaneOperation({operation:"open",secondary:!0,pane:{type:"codeEditor",data:e}})}})},Icon:function(e){var n=e.size;return(0,p.Y)(tV.Vx.Provider,{value:{color:tH.LU.orangeStronger,size:n},children:(0,p.Y)(mu,{})})},getTitle:function(){return"Debugger"},description:"Step through your code as it runs to inspect its execution, test its behavior, and fix bugs",category:X.bY.WorkspaceFeatures,decode:function(e){return fd.T(mc,e)}},mp=t(72087),mf=(0,tB.AH)([e_.wp.border({color:tH.LU.outlineDimmest,width:1,style:"solid"}),e_.wp.width("100%"),e_.wp.height("100%"),e_.wp.overflow("hidden"),{borderBottomLeftRadius:"4px",borderBottomRightRadius:"4px",borderTop:"none"}]),mh={Content:function(e){var n,t=e.pane;return(0,p.Y)(eD.ui,{css:mf,children:(0,p.Y)("iframe",{title:"Replit Docs",src:(null==t||null==(n=t.data)?void 0:n.url)||eN.ik.HOME,width:"100%",height:"100%",frameBorder:"0"})})},Icon:function(e){var n=e.size;return(0,p.Y)(tV.Vx.Provider,{value:{color:tH.LU.yellowStrongest,size:n},children:(0,p.Y)(tA.A,{})})},getTitle:function(){return"Docs"},description:"View Replit Documentation to learn about workspace features, AI, Deployments, and more",category:X.bY.Other,decode:mp.D},mm=t(35879),mg=(0,tB.AH)([e_.wp.backgroundColor.backgroundDefault,e_.wp.height("100%"),e_.wp.borderRadius(4),{overflow:"hidden"}]),mv=(0,tB.AH)([e_.wp.width("100%"),e_.wp.height("100%"),e_.wp.justify.center,e_.wp.align.center,e_.wp.display.flex]);function mw(e){var n=e.paneId,t=e.extensionPaneData,r=e.environmentAPIs,i=(0,e4.Z_)(t.installationId),o=(0,e4.X_)(t.installationId),a=tw({extension:i,environmentAPIs:r,sandboxTitle:t.name,sandboxUrl:(0,e3.sU)(t.baseUrl,t.path),paneId:n,filePath:t.filePath||null}),l=a.didConnectOnce,s=a.isValidExtensionPaneUrl,c=a.getIframeProps,u=a.reloadSandbox;return(0,eu.Qt)(function(){return{type:"extension",commands:[{name:"Actions",commands:[{match:K.G2,data:{icon:(0,p.Y)(iA.A,{}),label:"Refresh",type:"action",description:"Refresh extension",key:"refresh",run:function(){u()}}}]}]}},[u]),(0,p.Y)(eG.S,{className:"extension-pane",css:mg,children:o&&l?(0,p.Y)(p.FK,{children:s()?(0,p.Y)("iframe",(0,m._)({},c({css:{width:"100%",height:"100%",border:"none"}}))):(0,p.Y)(eG.S,{p:12,children:(0,p.FD)(eW.EY,{children:["Invalid url:"," ",(0,p.Y)(mm.R,{children:t.baseUrl+t.path}),". Please contact the extension author, or Replit support."]})})}):(0,p.Y)(eG.S,{css:mv,children:(0,p.Y)(lO.A,{})})})}var my=n7.ZU.Object({extensionId:n7.ZU.Unsafe(n7.ZU.String()),installationId:n7.ZU.Unsafe(n7.ZU.String()),baseUrl:n7.ZU.String(),path:n7.ZU.String(),name:n7.ZU.String(),filePath:n7.ZU.Optional(n7.ZU.Union([n7.ZU.String(),n7.ZU.Null(),n7.ZU.Undefined()])),icon:n7.ZU.Optional(n7.ZU.Union([n7.ZU.String(),n7.ZU.Null(),n7.ZU.Undefined()]))}),mb=n7.ZU.Object({type:n7.ZU.Literal("extension"),data:my}),mS={Content:function(e){var n=e.pane,t=e.options,r=e0();return(0,p.Y)(mw,{extensionPaneData:n.data,paneId:t.paneId,environmentAPIs:r})},Icon:function(e){var n=e.pane,t=e.size;return n.data.icon?(0,p.Y)(rS.A,{src:(0,e3.sU)(n.data.baseUrl,n.data.icon),layout:"fill",alt:""}):(0,p.Y)(tx.A,{size:t})},getTitle:function(e){return e.data.filePath?e.data.filePath+"  "+e.data.name:e.data.name},category:X.bY.WorkspaceExtensions,decode:function(e){return fd.T(mb,e)}},mY=t(68446),mA=t(45731),mx=t(17290),mC=t(6166),m_=t(11608);function mk(){var e=(0,g._)(["\n  query ExtensionOwnerDetails($extensionId: String!) {\n    extension(id: $extensionId) {\n      ... on Extension {\n        id\n        isListed\n        user {\n          id\n          username\n        }\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n"]);return mk=function(){return e},e}function mD(){var e=(0,g._)(["\n  query currentExtensionStatus($id: String!) {\n    extension(id: $id) {\n      ... on Extension {\n        id\n        isListed\n        user {\n          id\n        }\n      }\n    }\n  }\n"]);return mD=function(){return e},e}var mE={},mR=(mk(),(0,v.J1)(mD())),mI=t(62362),mF=(0,eC.x)({codeBlock:[e_.wp.borderRadius(8),e_.wp.position.relative],codeBlockCopyButton:[e_.wp.position.absolute,e_.wp.top(4),e_.wp.right(4)],selectionContainer:[e_.wp.maxHeight(400),e_.wp.overflowY("scroll")],fsNode:[e_.wp.flex.row,e_.wp.rowWithGap(8),e_.wp.align.center,e_.wp.px(4),e_.wp.py(2),e_.wp.borderRadius(8),e_.wp.cursor.pointer],fsNodeActive:[e_.wp.backgroundColor.backgroundHigher]});function mT(e){var n=e.content,t=(0,eq.A)().showConfirm;return(0,p.FD)(eD.ui,{tag:"code",elevated:!0,css:mF.codeBlock,p:8,children:[n,(0,p.Y)(t7.K0,{alt:"Copy",tooltipBehavior:"hidden",css:mF.codeBlockCopyButton,onClick:function(){return navigator.clipboard.writeText(n).then(function(){return t("Copied")})},children:(0,p.Y)(rA.A,{})})]})}function mP(e){var n,t=e.glob,r=e.openFile,i=e.children,o=(0,d._)((0,h.useState)([]),2),a=o[0],l=o[1],s=(0,d._)((0,h.useState)(""),2),c=s[0],u=s[1],f=(0,ma.c)(),g=(0,er.A)().fs,v=(0,tb.s_)(),w=(0,h.useMemo)(function(){return(0,rh.tL)(t)},[t]);return((0,h.useEffect)(function(){w&&g.listFiles().then(function(e){e.files&&l(e.files.filter(function(e){return e.match(w)}).map(function(e){var n=e.split("/");return{path:e,dir:n.slice(0,n.length-1).join("/"),filename:n[n.length-1]||""}}))})},[w,v]),w)?(0,p.FD)(eG.S,{css:mF.selectionContainer,gap:16,children:[(0,p.Y)(eW.EY,{variant:"subheadDefault",children:(0,p.FD)(eG.S,{gap:12,children:[(0,p.Y)(eW.EY,{variant:"subheadDefault",children:"Choose an image"}),v?(0,p.Y)(cH.N,{icon:(0,p.Y)(mI.A,{}),colorway:"primary",text:(0,p.FD)(eG.S,{gap:2,children:[(0,p.FD)(eW.EY,{children:["Images must be served from"," ",(0,p.Y)("span",{css:[e_.wp.font.code,e_.wp.backgroundColor.accentPrimaryDimmer,e_.wp.borderRadius(4),e_.wp.px(4),e_.wp.py(2),e_.wp.mr(2),e_.wp.border({color:tH.LU.accentPrimaryDefault})],children:v.path}),"."]}),(0,p.Y)(eW.EY,{css:[e_.wp.fontWeight.normal],children:"You can change your extension's static directory in the .replit file."})]})}):null,(0,p.FD)(eW.EY,{css:[e_.wp.fontWeight.normal],color:"dimmer",children:["Supported file types:"," ",(0,p.Y)("span",{css:[e_.wp.font.code,e_.wp.fontSize("small"),e_.wp.backgroundColor.backgroundHigher,e_.wp.borderRadius(4),e_.wp.px(4),e_.wp.py(2),e_.wp.mr(2),e_.wp.border({color:tH.LU.outlineDefault})],children:null==(n=t.match(/\{(.*)\}/))?void 0:n[1].split(",").map(function(e){return e.replace(".","")}).join(", ")})]})]})}),i,(0,p.Y)(hl.Ay,{onChange:function(e){return r(e.path)},initialHighlightedIndex:0,defaultHighlightedIndex:0,itemToString:function(e){return(null==e?void 0:e.path)||""},children:function(e){var n=e.getInputProps,r=e.getItemProps,i=e.highlightedIndex,o=e.getRootProps,l=e.getMenuProps;return(0,p.FD)(eG.S,(0,e6._)((0,m._)({},o({refKey:"innerRef"})),{gap:16,children:[(0,p.Y)(eG.S,{css:[e_.wp.position.relative],children:(0,p.Y)(hU.pd,(0,m._)({id:f("file-search")},n({ref:null,value:c,onChange:function(e){return u(e.currentTarget.value)},placeholder:"Find a file",autoComplete:"off",autoFocus:!0})))}),(0,p.Y)(eG.S,{children:a&&a.length?(0,p.Y)(eG.S,(0,e6._)((0,m._)({elevated:!0,tag:"ul",css:(e_.wp.pt(8),e_.wp.colWithGap(8))},l({refKey:"innerRef"})),{children:a.filter(function(e){return e.path.includes(c)}).filter(function(e){return!v||e.path.startsWith(v.relativePath)||e.path.startsWith("public")}).map(function(e,n){return(0,p.FD)(eG.S,(0,e6._)((0,m._)({tag:"li",css:[mF.fsNode,n===i&&mF.fsNodeActive]},r({item:e,index:n,disabled:!!v&&!e.path.startsWith(v.relativePath)})),{children:[(0,p.Y)(ef.A,{path:e.path,size:16}),(0,p.Y)(eW.EY,{children:e.filename}),(0,p.Y)(eW.EY,{variant:"small",color:"dimmest",children:e.dir})]}),n)})})):(0,p.Y)(eG.S,{pt:8,children:(0,p.Y)(eW.EY,{color:"dimmer",children:(0,p.FD)("em",{children:["No files found matching ",(0,p.Y)("code",{children:t})]})})})})]}))}})]}):(0,p.FD)(eG.S,{css:[e_.wp.flex.column,e_.wp.colWithGap(16)],children:[(0,p.Y)(eW.EY,{variant:"subheadDefault",children:"Invalid Glob Pattern"}),(0,p.FD)(eW.EY,{children:["The glob pattern ",(0,p.Y)("code",{children:t})," could not be parsed."]}),(0,p.Y)(eG.S,{css:e_.wp.border({direction:"bottom",color:tH.LU.backgroundHigher})}),(0,p.FD)(eG.S,{gap:8,children:[(0,p.Y)(eW.EY,{children:(0,p.Y)("strong",{children:"Match all Javascript Files"})}),(0,p.Y)(mT,{content:"**/*.js"})]}),(0,p.FD)(eG.S,{gap:8,children:[(0,p.Y)(eW.EY,{children:(0,p.Y)("strong",{children:"Match JSON files at root level"})}),(0,p.Y)(mT,{content:"*.json"})]}),(0,p.FD)(eG.S,{gap:8,children:[(0,p.Y)(eW.EY,{children:(0,p.Y)("strong",{children:"Match specified file extensions"})}),(0,p.Y)(mT,{content:"**/*.{js,ts,jsx,tsx}"})]})]})}var mL=t(56889),mU=function(e){return e.Installing="Installing",e.Loading="Loading",e.Failed="Failed",e.Success="Success",e}(mU||{}),mN={Installing:"Installing Extension...",Loading:"Loading Asset...",Failed:"Failed to load asset from Extension URL",Success:"Asset loaded successfully"};function mO(e){var n,t=e.isOpen,r=e.close,i=e.onSubmit,o=(0,tS.mN)(),a=(0,tS.FS)(),l=(0,d._)((0,h.useState)(null),2),s=l[0],c=l[1],u=(0,d._)((0,h.useState)(!0),2),f=u[0],m=u[1],g=(0,d._)((0,h.useState)(null),2),v=g[0],w=g[1],y=(0,d._)((0,h.useState)(null),2),b=y[0],S=y[1],Y=(0,h.useRef)(null),A=(0,d._)((0,h.useState)(null),2),x=A[0],C=A[1],_=(0,d._)((0,h.useState)(null),2),k=_[0],D=_[1],E=(b||k||"").startsWith("/")?b||k:"/"+(b||k),R=(0,d._)((0,h.useState)(null),2),I=R[0],F=R[1],T=function(){D(null),c(null),S(null),C(null),F(null),w(null)},P=function(){m(!0),c(null)};(0,h.useEffect)(function(){S(k)},[k]);var L=(0,h.useCallback)((n=(0,H._)(function(e){var n,t,r,i;return(0,z.YH)(this,function(l){switch(l.label){case 0:var u;if(!E||!f||"Success"===s||"Failed"===s)return[2];if(u=(0,H._)(function(e,n){var t;return(0,z.YH)(this,function(r){switch(r.label){case 0:return c("Loading"),w(t=(0,e3.sU)(e.baseUrl,n)),[4,fetch(t)];case 1:if(r.sent().ok)return F(n),c("Success"),m(!1),[2,!0];return[2,!1]}})}),n=function(e,n){return u.apply(this,arguments)},t=e||a)return[3,8];c("Installing"),l.label=1;case 1:return l.trys.push([1,5,,8]),[4,o()];case 2:if(!(r=l.sent()))return[3,4];return[4,L(r)];case 3:case 6:return l.sent(),[2];case 4:case 7:return[3,8];case 5:if(l.sent(),!a)return[3,7];return[4,L(a)];case 8:if(!t)return[3,11];return i=E.replace(/^(\/public|\/static)/,""),[4,n(t,i.slice(1))];case 9:if(l.sent())return[3,11];return[4,n(t,E)];case 10:l.sent(),l.label=11;case 11:return[2]}})}),function(e){return n.apply(this,arguments)}),[a,E,o,s,f]);(0,h.useEffect)(function(){if(x){var e=x.split("/"),n=e.pop(),t=e.findIndex(function(e){return["public","static"].includes(e)});D((-1!==t?"/".concat(x):"/".concat(e.slice(t+1).join("/"),"/").concat(n))||x),m(!0),L()}},[L,x]);var U=x?x.split("/"):[],N=U[U.length-1];return(0,p.Y)(ek.a,{isOpen:t,onRequestClose:r,children:x?(0,p.FD)(eG.S,{css:[e_.wp.flex.column,e_.wp.colWithGap(16)],children:[(0,p.FD)(eG.S,{row:!0,gap:8,align:"center",children:[(0,p.Y)(ez.$n,{text:"Back",size:"small",iconLeft:(0,p.Y)(h5.A,{}),onClick:function(){C(null),T()}}),(0,p.FD)(eG.S,{row:!0,gap:4,align:"center",children:[(0,p.Y)(mL.A,{}),(0,p.Y)(eW.EY,{color:"dimmer",children:N||""})]})]}),(0,p.Y)(eW.EY,{multiline:!0,children:"Extension assets should be stored in the public asset directory. Move the image or modify the file path, or try again."}),(0,p.FD)(eG.S,{gap:4,children:[(0,p.Y)(hU.pd,{defaultValue:b||"",ref:Y,placeholder:"/icon.png",onChange:function(e){return S(e.target.value)},autoFocus:!0,disabled:"Loading"===s||"Installing"===s||"Success"===s}),v&&("Loading"===s||"Success"===s||"Failed"===s)?(0,p.Y)("a",{href:v,target:"_blank",children:(0,p.FD)(eW.EY,{color:"dimmer",variant:"small",css:[e_.wp.rowWithGap(4),e_.wp.display.flex,{fontStyle:"italic"}],children:[(0,p.FD)("span",{css:[e_.wp.truncate],children:["Loading"===s?"Checking ":null,"Success"===s?"Found at ":null,"Failed"===s?"Failed to load ":null,v]}),(0,p.Y)(eG.S,{css:[e_.wp.display.inlineBlock],children:(0,p.Y)(iy.A,{})})]})}):null]}),(0,p.FD)(eG.S,{row:!0,justify:"space-between",align:"center",children:[(0,p.Y)(eG.S,{row:!0,gap:4,align:"center",children:s?(0,p.Y)(p.FK,{children:"Loading"===s?(0,p.Y)(lO.A,{}):(0,p.Y)(cH.N,{text:mN[s],colorway:"Failed"===s?"negative":"positive",icon:"Failed"===s?(0,p.Y)(sm.A,{}):(0,p.Y)(lN.A,{})})}):null}),"Failed"===s?(0,p.FD)(eG.S,{row:!0,gap:8,children:[(0,p.Y)(ez.$n,{text:"Add Anyways",onClick:function(){var e=k||x;null!==e&&i(e),T(),r()},size:"small"}),(0,p.Y)(ez.$n,{text:"Try Again",onClick:function(){P()},size:"small"})]}):null,I&&"Success"===s?(0,p.Y)(ez.$n,{text:"Continue",iconLeft:(0,p.Y)(lN.A,{}),colorway:"primary",onClick:function(){i(I),T(),r()}}):null]})]}):(0,p.Y)(mP,{openFile:C,glob:"**/*.{png,jpg,jpeg,webp,svg,gif}"})})}var mM=(0,eC.x)({centerRowGap8:[e_.wp.rowWithGap(8),e_.wp.align.center],featureContainer:[e_.wp.flex.column,e_.wp.borderRadius(8),{overflow:"hidden"}],noFeaturesPlaceholder:[e_.wp.border({style:"dashed"}),e_.wp.borderRadius(8),e_.wp.p(16),e_.wp.colWithGap(8),e_.wp.center],featureDetails:[e_.wp.flex.column,e_.wp.colWithGap(4),e_.wp.flex.growAndShrink(1)],newFeatureFieldWrapper:[e_.wp.border({direction:"bottom",color:tH.LU.backgroundHighest})],inputCounterFlex:[e_.wp.flex.row,e_.wp.justify.spaceBetween,e_.wp.align.center]});function mB(e){var n=e.features,t=e.onCreate,r=e.onUpdate,i=e.onDelete,o=(0,d._)((0,h.useState)([]),2),a=o[0],l=o[1],s=(0,d._)((0,h.useState)(!1),2),c=s[0],u=s[1];return(0,p.FD)(eG.S,{children:[(0,p.FD)(eG.S,{pb:12,children:[(0,p.FD)(eG.S,{css:mM.centerRowGap8,children:[(0,p.FD)(eG.S,{css:mM.centerRowGap8,children:[(0,p.Y)(fA.A,{}),(0,p.Y)(eW.EY,{variant:"subheadDefault",children:"Feature Descriptions"})]}),(0,p.Y)(t7.K0,{onClick:function(){u(!c)},alt:"Add a new Feature",tooltipBehavior:c?"hidden":"default",disabled:c,children:(0,p.Y)(em.A,{})})]}),(0,p.Y)(eW.EY,{color:"dimmer",variant:"small",multiline:!0,children:"Describe what your extension can do. Descriptions will appear on the store listing page."})]}),(0,p.FD)(eG.S,{gap:8,children:[c?(0,p.Y)(mz,{onSubmit:function(e){t(e),u(!1)},onCancel:function(){return u(!1)}}):null,(0,p.Y)(eG.S,{css:mM.featureContainer,children:n.length>0?n.map(function(e,t){return a.includes(t)?(0,p.Y)(mz,{feature:e,isLast:t===n.length-1,onSubmit:function(e){r(e,t),l(function(e){return e.filter(function(e){return e!==t})})},onCancel:function(){return l(function(e){return e.filter(function(e){return e!==t})})}},t):(0,p.Y)(mH,{isLast:t===n.length-1,feature:e,onEdit:function(){return l(function(e){return(0,B._)(e).concat([t])})},onDelete:function(){i(t)}},t)}):(0,p.Y)(p.FK,{children:c?null:(0,p.FD)(eG.S,{css:mM.noFeaturesPlaceholder,children:[(0,p.Y)(eW.EY,{color:"dimmest",multiline:!0,children:"You haven't added any features yet"}),(0,p.Y)(ez.$n,{variant:"outlined",text:"New Feature",iconLeft:(0,p.Y)(em.A,{}),onClick:function(){return u(!0)}})]})})})]})]})}function mH(e){var n=e.feature,t=e.onEdit,r=e.onDelete,i=e.isLast;return(0,p.FD)(eD.ui,{elevated:!0,css:[e_.wp.flex.row,e_.wp.rowWithGap(8),e_.wp.align.center,e_.wp.p(8),i?null:e_.wp.border({direction:"bottom",color:tH.LU.backgroundHighest})],children:[(0,p.Y)(mW,{size:64,icon:n.image}),(0,p.FD)(eG.S,{css:mM.featureDetails,children:[(0,p.FD)(eG.S,{row:!0,gap:8,align:"center",justify:"space-between",children:[(0,p.Y)(eW.EY,{children:n.title}),(0,p.FD)(eG.S,{row:!0,gap:8,children:[(0,p.Y)(t7.K0,{alt:"Delete",tooltipBehavior:"hidden",onClick:r,children:(0,p.Y)(rE.A,{color:tH.LU.accentNegativeStronger})}),(0,p.Y)(t7.K0,{alt:"Edit",tooltipBehavior:"hidden",onClick:t,children:(0,p.Y)(rx.A,{})})]})]}),(0,p.Y)(eW.EY,{color:"dimmest",multiline:!0,maxLines:1,children:n.body})]})]})}function mz(e){var n=e.onSubmit,t=e.onCancel,r=e.feature,i=e.isLast,o=(0,d._)((0,h.useState)((null==r?void 0:r.title)||""),2),a=o[0],l=o[1],s=(0,d._)((0,h.useState)((null==r?void 0:r.body)||""),2),c=s[0],u=s[1],f=(0,d._)((0,h.useState)((null==r?void 0:r.image)||null),2),m=f[0],g=f[1],v=a.length>=3&&c.length>=16;return(0,p.FD)(eD.ui,{css:[e_.wp.flex.column,i||r?null:e_.wp.borderRadius(8),r?e_.wp.border({color:tH.LU.outlineDefault}):[i?null:e_.wp.border({direction:"bottom",color:tH.LU.backgroundHighest})]],elevated:!0,children:[(0,p.FD)(eG.S,{css:mM.newFeatureFieldWrapper,p:8,row:!0,gap:8,align:"center",justify:"space-between",children:[(0,p.Y)(eW.EY,{children:a||"New Feature"}),(0,p.FD)(eG.S,{row:!0,gap:8,children:[(0,p.Y)(ez.$n,{text:"Cancel",onClick:t}),(0,p.Y)(ez.$n,{text:r?"Save":"Create",colorway:"primary",onClick:function(){return n({title:a,body:c,image:m})},disabled:!v})]})]}),(0,p.FD)(eG.S,{p:8,gap:8,children:[(0,p.FD)(eG.S,{gap:4,children:[(0,p.FD)(eG.S,{css:mM.inputCounterFlex,children:[(0,p.Y)(eW.EY,{color:"dimmer",children:"Title"}),(0,p.Y)(mG,{value:a.length,min:3})]}),(0,p.Y)(hU.pd,{value:a,onChange:function(e){return l(e.target.value)},placeholder:"Seamless Editing",maxLength:60})]}),(0,p.FD)(eG.S,{gap:4,children:[(0,p.FD)(eG.S,{css:mM.inputCounterFlex,children:[(0,p.Y)(eW.EY,{color:"dimmer",children:"Body"}),(0,p.Y)(mG,{value:c.length,min:16})]}),(0,p.Y)(hU.ov,{value:c,onChange:function(e){return u(e.target.value)},placeholder:"Describe what this feature does and how to use it (Markdown supported)",autoSize:!0,maxLength:2e3})]}),(0,p.FD)(eG.S,{row:!0,gap:8,children:[(0,p.FD)(eG.S,{gap:4,css:[e_.wp.flex.growAndShrink(1)],children:[(0,p.Y)(eW.EY,{color:"dimmer",children:"Image (Recommended)"}),(0,p.Y)(eW.EY,{color:"dimmest",multiline:!0,children:"Choose a statically-served image from your App. The Recommended aspect ratio for a cover image is 800x600."})]}),(0,p.Y)(mW,{size:100,icon:m,editable:!0,onSubmit:function(e){g(e)}})]})]})]})}function mW(e){var n=e.size,t=e.icon,r=e.editable,i=void 0!==r&&r,o=e.onSubmit,a=(0,er.A)().container,l=(0,e2.A)(a).url,s=l&&t?(0,e3.sU)(l,t):null,c=(0,d._)((0,h.useState)(!1),2),u=c[0],f=c[1];return(0,p.FD)(p.FK,{children:[(0,p.Y)(eD.ui,{background:"default",css:[i?so.b.filledAndOutlined:null,e_.wp.flex.row,e_.wp.center,e_.wp.width(n),e_.wp.height(.75*n),e_.wp.maxWidth(n),e_.wp.maxHeight(.75*n),e_.wp.borderRadius(4),e_.wp.border({color:tH.LU.backgroundHighest}),e_.wp.flex.grow(1),{background:s?"".concat(tH.LU.backgroundDefault," url(").concat(s,") no-repeat center center / cover"):tH.LU.backgroundDefault}],onClick:function(){return f(!0)},children:s?null:(0,p.Y)(mL.A,{color:tH.LU.foregroundDimmest,size:24})}),i?(0,p.Y)(mO,{isOpen:u,close:function(){return f(!1)},onSubmit:function(e){null==o||o(e)}}):null]})}function mG(e){var n=e.value,t=e.min;return(0,p.FD)(eW.EY,{css:{color:n>=t?tH.LU.accentPositiveStronger:tH.LU.foregroundDimmest},children:[n,"/",t]})}function mV(e,n){let t=0;for(let n=e.length-1;n>=0;n--){let r=e[n];"."===r?e.splice(n,1):".."===r?(e.splice(n,1),t++):t&&(e.splice(n,1),t--)}if(n)for(;t--;)e.unshift("..");return e}let mj=/^(\S+:\\|\/?)([\s\S]*?)((?:\.{1,2}|[^/\\]+?|)(\.[^./\\]*|))(?:[/\\]*)$/;var mZ=function(){var e=(0,H._)(function(e){return(0,z.YH)(this,function(n){switch(n.label){case 0:return[4,e.writeFile("extension.json",JSON.stringify({name:"My Extension",description:"My Extension Description",version:"0"},null,2))];case 1:return n.sent(),[2]}})});return function(n){return e.apply(this,arguments)}}(),mq={readFile:"Failed to read manifest file, please try again",noManifest:"No extension.json found",parseManifest:"Failed to parse manifest file",removedManifest:"extension.json was moved or deleted, please re-create it in your static directory",stateUndefined:"State should be defined"},mK=function(){var e=(0,d._)((0,h.useState)(null),2),n=e[0],t=e[1],r=(0,h.useCallback)(function(e){t(function(n){if(!n)throw Error(mq.stateUndefined);return(0,e6._)((0,m._)({},n),{manifestStr:e})})},[]);return{state:n,setState:t,updateString:r}},m$=function(){var e=(0,er.A)(),n=e.fs,t=e.dotReplit,r=mK(),i=r.state,o=r.setState,a=r.updateString,l=(0,d._)((0,h.useState)(0),2),s=l[0],c=l[1],u=(0,d._)((0,h.useState)(!1),2),p=u[0],f=u[1],g=(0,h.useCallback)((0,H._)(function(){return(0,z.YH)(this,function(e){switch(e.label){case 0:return[4,mZ(n)];case 1:return e.sent(),[2]}})}),[n]);(0,h.useEffect)(function(){o(null);var e=!1,r=function(){};function i(){return(i=(0,H._)(function(){var i,l,s,c,u,p,f;return(0,z.YH)(this,function(h){switch(h.label){case 0:return[4,Promise.all([n.listFiles(),t.getConfig()])];case 1:if(s=(l=d._.apply(void 0,[h.sent(),2]))[0],c=l[1],e)return[2];if(!s.files||c.error)return o({fileReadError:mq.readFile}),[2];if(p=(0,tc.me)(function(e){let n="/"===e.charAt(0),t="/"===e.slice(-1),r=mV(e.split("/").filter(e=>!!e),!n).join("/");return r||n||(r="."),r&&t&&(r+="/"),(n?"/":"")+r}(null!=(u=null==(i=c.config.extension)?void 0:i.outputDirectory)?u:"dist")),!(f=function(e){var n,t=e.filePaths,r=e.outputDir,i=[],o=!0,a=!1,l=void 0;try{for(var s,c=t[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var u=s.value;if("extension.json"===u)return u;u.endsWith("/extension.json")&&i.push(u)}}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}var d=!0,p=!1,f=void 0;try{for(var h,m=i[Symbol.iterator]();!(d=(h=m.next()).done);d=!0){var g=h.value;if(!g.startsWith(r))return g}}catch(e){p=!0,f=e}finally{try{d||null==m.return||m.return()}finally{if(p)throw f}}return null!=(n=i[0])?n:null}({filePaths:s.files,outputDir:p})))return o({fileReadError:mq.noManifest}),[2];return r=n.watchTextFile(f,{onReady:function(e){o({fileReadError:null,writeChange:e.writeChange,manifestStr:e.initialContent,manifestPath:f})},onChange:function(e){a(e.latestContent)},onMoveOrDelete:function(){o({fileReadError:mq.removedManifest})},onError:function(){o({fileReadError:mq.readFile})}}),[2]}})})).apply(this,arguments)}return!function(){i.apply(this,arguments)}(),function(){r(),e=!0}},[n,a,t,s,o]);var v=(0,h.useMemo)(function(){if(!i||null!==i.fileReadError)return null;try{var e=mA._3(i.manifestStr);return(0,e3.Kf)(e)}catch(e){return{error:e,manifest:null}}},[i]),w=(0,h.useCallback)(function(e){if(!i||(null==v?void 0:v.error)||null!==i.fileReadError)throw Error(mq.parseManifest);var n=mA.F6(i.manifestStr,e);i.writeChange((0,mx.s)(i.manifestStr,n)),a(n)},[i,v,a]),y={retry:function(){c(function(e){return e+1})},creatingExtensionJson:p,setCreatingExtensionJson:f,createExtensionJson:g,updateString:a,updateManifest:w};return i?"string"==typeof i.fileReadError?(0,e6._)((0,m._)({},y),{__status:"fileReadError",state:{fileReadError:i.fileReadError},parsed:null}):v?v.manifest?(0,e6._)((0,m._)({},y),{__status:"success",state:{fileReadError:null,writeChange:i.writeChange,manifestStr:i.manifestStr,manifestPath:i.manifestPath},parsed:v}):(0,e6._)((0,m._)({},y),{__status:"fileParseError",state:i,parsed:{manifest:null,error:v.error}}):(0,e6._)((0,m._)({},y),{__status:"fileReadError",state:{fileReadError:mq.noManifest},parsed:null}):(0,e6._)((0,m._)({},y),{__status:"loading",state:null,parsed:null})},mJ=function(e){return e.loading="loading",e.fileReadError="fileReadError",e.fileParseError="fileParseError",e.success="success",e}({}),mQ=function(){return(0,p.Y)(eG.S,{css:[e_.wp.display.flex,e_.wp.width("100%"),e_.wp.height("100%")],justify:"center",align:"center",children:(0,p.Y)(lO.A,{})})},mX=t(99829);function m0(e){var n=e.children;return(0,p.Y)(eG.S,{gap:12,p:16,children:(0,p.Y)(eD.ui,{elevated:!0,css:[e_.wp.borderRadius(8),e_.wp.colWithGap(8)],p:16,children:n})})}var m1=function(e){var n=e.error,t=e.performPaneOperation,r=e.manifestPath;return(0,p.Y)(m0,{children:(0,p.FD)(eG.S,{gap:16,p:8,children:[(0,p.FD)(eG.S,{row:!0,gap:8,css:[e_.wp.display.flex,e_.wp.align.center],children:[(0,p.Y)(sm.A,{}),(0,p.Y)(eW.EY,{variant:"headerDefault",children:"Error parsing extension.json"})]}),(0,p.Y)(eW.EY,{variant:"subheadDefault",children:"Details:"}),(0,p.Y)(eG.S,{gap:8,children:n instanceof mX.yk?n.issues.map(function(e,n){var t=e.path,r=e.message;return(0,p.FD)(eG.S,{css:[e_.wp.display.flex,e_.wp.flex.row,e_.wp.rowWithGap(4)],children:[(0,p.Y)(eW.EY,{css:[e_.wp.font.code,e_.wp.color.orangeStrongest,e_.wp.backgroundColor.orangeDimmest],children:t}),(0,p.Y)(eW.EY,{children:r})]},n)}):(0,p.Y)(eG.S,{tag:"pre",children:n.message})}),(0,p.FD)(eG.S,{row:!0,gap:8,children:[(0,p.Y)(ez.$n,{colorway:"primary",text:"Open extension.json",onClick:function(){t({operation:"open",secondary:!0,pane:(0,ry.af)(r)})}}),(0,p.Y)(ez.$n,{iconLeft:(0,p.Y)(u0.A,{}),text:"Read extension.json docs",onClick:function(){window.open("https://docs.replit.com/extensions/api/manifest","_blank")}})]})]})})},m2=function(e){var n=e.message,t=m$(),r=t.createExtensionJson,i=t.creatingExtensionJson,o=t.retry,a=t.setCreatingExtensionJson;return(0,p.FD)(m0,{children:[(0,p.FD)(eG.S,{row:!0,gap:8,css:[e_.wp.display.flex,e_.wp.align.center],children:[(0,p.Y)(sm.A,{}),(0,p.Y)(eW.EY,{variant:"subheadDefault",children:n})]}),(0,p.FD)(eG.S,{row:!0,gap:8,children:[(0,p.Y)(ez.$n,{colorway:"primary",text:"Create extension.json",loading:i,iconLeft:i?(0,p.Y)(lO.A,{}):(0,p.Y)(em.A,{}),onClick:(0,H._)(function(){return(0,z.YH)(this,function(e){switch(e.label){case 0:return a(!0),[4,r()];case 1:return e.sent(),o(),a(!1),[2]}})})}),(0,p.Y)(ez.$n,{text:"Retry",iconLeft:(0,p.Y)(iA.A,{}),onClick:function(){o()}})]})]})},m4=t(39328),m5=t(62973),m3=t(24120),m6=t(85434),m8=(0,eC.x)({iconContainer:[e_.wp.position.relative,e_.wp.width(64),e_.wp.height(64),{"&:hover .edit-overlay":{opacity:1}}],iconWrapper:[e_.wp.flex.column,e_.wp.position.absolute,e_.wp.top(0),e_.wp.left(0)],iconOverlay:[e_.wp.flex.column,e_.wp.colWithGap(4),e_.wp.center,e_.wp.position.absolute,e_.wp.top(0),e_.wp.left(0),e_.wp.width("100%"),e_.wp.height("100%"),e_.wp.backgroundColor.backgroundOverlay,e_.wp.borderRadius(12),{transition:"0.25s",opacity:0,cursor:"pointer"}]});function m7(e){var n=e.performPaneOperation,t=e.setSelectedTab,r=(0,tS.FS)(),i=(0,tS.mN)(),o=(0,tS.WB)(),a=(0,tS.EF)(),l=(0,tb.HG)(),s=(0,d._)((0,h.useState)(!1),2),c=s[0],u=s[1],f=(0,d._)((0,h.useState)(!1),2),m=f[0],g=f[1];return(0,p.Y)(eG.S,{css:[e_.wp.flex.wrap,{rowGap:8}],row:!0,gap:8,children:(0,p.FD)(eG.S,{row:!0,gap:8,children:[r||m?(0,p.FD)(p.FK,{children:[(0,p.Y)(ez.$n,{size:"small",text:"Reload",iconLeft:m?(0,p.Y)(lO.A,{}):(0,p.Y)(iA.A,{}),disabled:m,onClick:(0,H._)(function(){return(0,z.YH)(this,function(e){switch(e.label){case 0:if(!r)return[2];return g(!0),[4,o(r.installationId)];case 1:return e.sent(),g(!1),[2]}})})}),(0,p.Y)(ez.$n,{size:"small",text:"Unload",iconLeft:(0,p.Y)(ot.A,{}),disabled:!r,onClick:function(){r&&a(r.installationId)}})]}):(0,p.Y)(ez.$n,{size:"small",text:"Load locally",colorway:"primary",iconLeft:c?(0,p.Y)(lO.A,{}):(0,p.Y)(re.A,{}),loading:c,onClick:(0,H._)(function(){return(0,z.YH)(this,function(e){switch(e.label){case 0:return u(!0),[4,i()];case 1:return e.sent(),u(!1),[2]}})})}),l?(0,p.Y)(ez.$n,{size:"small",text:"View on Store",iconLeft:(0,p.Y)(m6.A,{}),onClick:function(){return n({operation:"open",pane:{type:"extensionStore",data:{page:"cover",coverPageExtensionId:l}}})}}):null,(0,p.Y)(ez.$n,{size:"small",text:"Edit Store Listing",onClick:function(){t(1)},iconLeft:(0,p.Y)(rx.A,{})})]})})}function m9(e){var n=e.performPaneOperation,t=e.setSelectedTab,r=(0,er.A)().container,i=(0,e2.A)(r).url,o=m$(),a=o.parsed,l=o.state,s=o.__status;if(s===mJ.loading)return(0,p.Y)(mQ,{});if(s===mJ.fileReadError)return(0,p.Y)(m2,{message:l.fileReadError});var c=a.manifest,u=a.error;return u?(0,p.Y)(m1,{performPaneOperation:n,manifestPath:l.manifestPath,error:u}):(0,p.Y)(eG.S,{gap:16,css:[e_.wp.width("100%")],children:(0,p.FD)(eD.ui,{elevated:!0,css:[e_.wp.borderRadius(8),e_.wp.colWithGap(8)],p:12,children:[(0,p.FD)(eG.S,{row:!0,gap:16,align:"center",children:[(0,p.Y)(eG.S,{css:[e_.wp.flex.grow(0),e_.wp.display.flex,e_.wp.flex.row],children:(0,p.Y)(m5.B,{size:64,baseUrl:null!=i?i:null,icon:c.icon})}),(0,p.FD)(eG.S,{css:[e_.wp.flex.growAndShrink(1)],children:[(0,p.Y)(f5.z,{align:"center",justify:"space-between",children:(0,p.Y)(eW.EY,{variant:"subheadDefault",children:c.name})}),(0,p.Y)(eW.EY,{variant:"text",color:"dimmest",children:c.description})]})]}),(0,p.Y)(m7,{setSelectedTab:t,performPaneOperation:n})]})})}function ge(e){var n,t,r,i,o,a,l,s,c,u,f=e.manifest,g=e.onSubmit,v=e.updateManifest,y=(0,tb.HG)(),b=(0,eM.T)(),S=(0,ma.c)(),Y=(0,d._)((0,h.useState)(null!=(l=f.name)?l:""),2),A=Y[0],x=Y[1],C=(0,d._)((0,h.useState)(null!=(s=f.description)?s:""),2),_=C[0],k=C[1],D=(0,d._)((0,h.useState)(null!=(c=f.longDescription)?c:void 0),2),E=D[0],R=D[1],I=(0,d._)((0,h.useState)(!1),2),F=I[0],T=I[1],P=(0,er.A)().container,L=(0,e2.A)(P).url,U=(n={variables:{id:y||""},skip:!y},t=(0,m._)({},mE,n),w.I(mR,t)),N=U.data,O=U.loading,M=U.refetch,H=(0,d._)((0,m_.$I)(),2),z=H[0],W=H[1].loading,G=(null==N||null==(r=N.extension)?void 0:r.__typename)==="Extension"&&(null==N||null==(i=N.extension)?void 0:i.user.id)===b,V=(null==N||null==(o=N.extension)?void 0:o.__typename)==="Extension"&&(null==N||null==(a=N.extension)?void 0:a.isListed);return(0,p.FD)(eG.S,{tag:"form",gap:16,onSubmit:function(e){e.preventDefault(),g({name:A,description:_,longDescription:E})},children:[(0,p.FD)(eG.S,{css:[e_.wp.flex.growAndShrink(1),e_.wp.colWithGap(4)],children:[(0,p.Y)(eW.EY,{css:[e_.wp.fontWeight.medium],children:"Do you want to publish your extension on the store?"}),O||W?(0,p.Y)(lO.A,{}):(0,p.FD)(m4.z,{css:e_.wp.colWithGap(8),name:"extensionListingStatus",value:V?"listed":"unlisted",disabled:!G,onChange:function(e){z({variables:{extensionId:y||"",isListed:"listed"===e.target.value}}).then(function(){return M()})},children:[G?null:(0,p.Y)(eG.S,{css:[e_.wp.width("fit-content")],children:(0,p.Y)(cH.N,{text:"You need to release this extension before listing it.",icon:(0,p.Y)(mI.A,{}),colorway:"yellow"})}),(0,p.FD)(eG.S,{row:!0,gap:8,children:[(0,p.Y)(m4.s,{id:S("listed"),value:"listed"}),(0,p.Y)("label",{htmlFor:S("listed"),children:"Yes, list my extension publicly on the Store"})]},"listed"),(0,p.FD)(eG.S,{row:!0,gap:8,children:[(0,p.Y)(m4.s,{id:S("unlisted"),value:"unlisted"}),(0,p.Y)("label",{htmlFor:S("unlisted"),children:"No, I want to keep my listing page private"})]},"unlisted")]})]}),(0,p.Y)(o5.a,{}),(0,p.FD)(eG.S,{css:[e_.wp.flex.growAndShrink(1),e_.wp.colWithGap(4)],tag:"label",htmlFor:S("name"),children:[(0,p.Y)(eW.EY,{children:"Extension Name"}),(0,p.Y)(hU.pd,{id:S("name"),placeholder:"Give your extension a name",value:A,onChange:function(e){x(e.currentTarget.value)},required:!0})]}),(0,p.FD)(eG.S,{css:[e_.wp.flex.growAndShrink(1),e_.wp.colWithGap(4)],children:[(0,p.Y)(eW.EY,{children:"Extension Icon"}),(0,p.FD)(eG.S,{row:!0,gap:12,align:"center",children:[(0,p.FD)(eG.S,{css:m8.iconContainer,children:[(0,p.Y)(eG.S,{css:m8.iconWrapper,children:(0,p.Y)(m5.B,{size:64,baseUrl:null!=L?L:null,icon:f.icon})}),(0,p.FD)(eG.S,{css:m8.iconOverlay,className:"edit-overlay",tag:"label",onClick:function(){return T(!0)},children:[(0,p.Y)(rx.A,{}),(0,p.Y)(eW.EY,{variant:"small",children:"Edit"})]})]}),(0,p.Y)(ez.$n,{text:"Choose from file system",iconLeft:(0,p.Y)(m3.A,{}),onClick:function(){return T(!0)}})]})]}),(0,p.FD)(eG.S,{css:[e_.wp.flex.growAndShrink(1),e_.wp.colWithGap(4)],tag:"label",htmlFor:S("tagline"),children:[(0,p.FD)(eG.S,{gap:0,children:[(0,p.Y)(eW.EY,{children:"Tagline"}),(0,p.Y)(eW.EY,{color:"dimmer",variant:"small",multiline:!0,children:"Provide a short description of what your Extension is for."})]}),(0,p.Y)(hU.pd,{id:S("tagline"),placeholder:"Give your extension a short tagline",value:_,onChange:function(e){k(e.currentTarget.value)},required:!0})]}),(0,p.FD)(eG.S,{css:[e_.wp.flex.growAndShrink(1),e_.wp.colWithGap(4)],tag:"label",htmlFor:S("longDescription"),children:[(0,p.FD)(eG.S,{gap:0,children:[(0,p.Y)(eW.EY,{children:"Description"}),(0,p.Y)(eW.EY,{color:"dimmer",variant:"small",multiline:!0,children:"Add more detail about the usage of your extension."})]}),(0,p.Y)(hU.ov,{id:S("longDescription"),placeholder:"Give your extension a long description, markdown formatting is supported",value:null!=E?E:"",onChange:function(e){R(e.currentTarget.value||void 0)},css:{resize:"vertical"},autoSize:!0})]}),(0,p.Y)(o5.a,{}),(0,p.Y)(mB,{features:null!=(u=f.features)?u:[],onDelete:function(e){if((null==(n=f.features)?void 0:n.length)===1&&0===e){var n,t,r=(0,m._)({},f);delete r.features,v(r)}else v((0,e6._)((0,m._)({},f),{features:null==(t=f.features)?void 0:t.filter(function(n,t){return t!==e})}))},onUpdate:function(e,n){var t,r,i,o;v((0,e6._)((0,m._)({},f),{features:(0,B._)(null!=(i=null==(t=f.features)?void 0:t.slice(0,n))?i:[]).concat([e],(0,B._)(null!=(o=null==(r=f.features)?void 0:r.slice(n+1))?o:[]))}))},onCreate:function(e){var n;v((0,e6._)((0,m._)({},f),{features:(0,B._)(null!=(n=f.features)?n:[]).concat([e])}))}}),(0,p.Y)(eG.S,{row:!0,gap:12,css:[{alignSelf:"end"},e_.wp.pt(8)],children:(0,p.Y)(ez.$n,{text:"Continue",iconRight:(0,p.Y)(is.A,{}),colorway:"primary",type:"submit",disabled:!A||!_||!E})}),(0,p.Y)(mO,{isOpen:F,close:function(){return T(!1)},onSubmit:function(e){v((0,e6._)((0,m._)({},f),{icon:e}))}})]})}function gn(e){var n=e.fileHandlers,t=e.onCreate,r=e.onUpdate,i=e.onOpen,o=e.onDelete,a=(0,d._)((0,h.useState)([]),2),l=a[0],s=a[1],c=(0,d._)((0,h.useState)(!1),2),u=c[0],f=c[1];return(0,p.FD)(eG.S,{children:[(0,p.FD)(eG.S,{pb:12,children:[(0,p.FD)(eG.S,{row:!0,gap:8,align:"center",children:[(0,p.FD)(eG.S,{row:!0,gap:8,align:"center",children:[(0,p.Y)(iz.A,{}),(0,p.Y)(eW.EY,{variant:"subheadDefault",multiline:!1,children:"File Handlers"})]}),(0,p.Y)(t7.K0,{onClick:function(){return f(!u)},alt:"Add a new File Handler",tooltipBehavior:u?"hidden":"default",disabled:u,children:(0,p.Y)(em.A,{})})]}),(0,p.Y)(eW.EY,{color:"dimmer",variant:"small",multiline:!1,children:"Custom file viewers and editors"})]}),(0,p.FD)(eG.S,{gap:8,children:[u?(0,p.Y)(gt,{onSubmit:function(e){t(e),f(!1)},onCancel:function(){f(!1)}}):null,n.length?n.map(function(e,n){var t;return l.includes(n)?(0,p.Y)(gt,{initialFileHandler:e,onSubmit:function(e){r(e,n),s(function(e){return e.filter(function(e){return e!==n})})},onCancel:function(){s(function(e){return e.filter(function(e){return e!==n})})}},n):(0,p.FD)(eD.ui,{css:[e_.wp.borderRadius(8),e_.wp.flex.wrap,{rowGap:8}],p:8,row:!0,justify:"space-between",align:"center",elevated:!0,children:[(0,p.Y)(eW.EY,{multiline:!1,children:null!=(t=e.name)?t:"Unnamed"}),(0,p.FD)(eG.S,{row:!0,gap:12,align:"center",children:[(0,p.Y)(t7.K0,{alt:"Remove ".concat(e.name||"this file handler"),colorway:"red",onClick:function(){o(n)},children:(0,p.Y)(rE.A,{})}),(0,p.Y)(t7.K0,{alt:"Edit ".concat(e.name||"this file handler"),onClick:function(){s(function(e){return(0,B._)(e).concat([n])})},children:(0,p.Y)(rx.A,{})}),(0,p.Y)(ez.$n,{iconLeft:(0,p.Y)(m3.A,{}),variant:"outlined",text:"Preview",onClick:function(){i(e)}})]})]},n)}):(0,p.Y)(p.FK,{children:u?null:(0,p.FD)(eG.S,{css:[e_.wp.border({style:"dashed"}),e_.wp.borderRadius(8),e_.wp.p(16),e_.wp.colWithGap(8),e_.wp.center],children:[(0,p.Y)(eW.EY,{color:"dimmest",children:"You haven't added a file handler yet"}),(0,p.Y)(ez.$n,{variant:"outlined",text:"New File Handler",iconLeft:(0,p.Y)(em.A,{}),onClick:function(){return f(!0)}})]})})]})]})}function gt(e){var n,t,r,i,o=e.onSubmit,a=e.onCancel,l=e.initialFileHandler,s=(0,d._)((0,h.useState)(null!=(n=null==l?void 0:l.name)?n:""),2),c=s[0],u=s[1],f=(0,d._)((0,h.useState)(null!=(t=null==l?void 0:l.icon)?t:""),2),m=f[0],g=f[1],v=(0,d._)((0,h.useState)(null!=(r=null==l?void 0:l.handler)?r:""),2),w=v[0],y=v[1],b=(0,d._)((0,h.useState)(null!=(i=null==l?void 0:l.glob)?i:""),2),S=b[0],Y=b[1],A=(0,ma.c)();return(0,p.FD)(eD.ui,{css:[e_.wp.borderRadius(8),e_.wp.border({color:tH.LU.outlineDimmest}),e_.wp.p(8),e_.wp.colWithGap(8)],tag:"form",onSubmit:function(e){e.preventDefault(),o({name:c,icon:m,handler:w,glob:S})},elevated:!0,children:[(0,p.FD)(eG.S,{css:[e_.wp.border({color:tH.LU.outlineDimmest,direction:"bottom"}),e_.wp.align.center,e_.wp.flex.wrap,{rowGap:8}],row:!0,gap:2,justify:"space-between",children:[(0,p.Y)(eW.EY,{multiline:!1,children:c||"New File Viewer"}),(0,p.FD)(eG.S,{row:!0,gap:8,children:[(0,p.Y)(ez.$n,{text:"Cancel",onClick:function(){a()}}),(0,p.Y)(ez.$n,{colorway:"primary",iconLeft:(0,p.Y)(lN.A,{}),text:"Save Changes",type:"submit"})]})]}),(0,p.FD)(eG.S,{gap:8,children:[(0,p.FD)(eG.S,{css:[e_.wp.flex.growAndShrink(1),e_.wp.colWithGap(2)],tag:"label",htmlFor:A("name"),children:[(0,p.Y)(eW.EY,{color:"dimmer",multiline:!1,children:"Name"}),(0,p.Y)(hU.pd,{id:A("name"),placeholder:"SVG Editor",value:c,onChange:function(e){u(e.currentTarget.value)},required:!0})]}),(0,p.FD)(eG.S,{css:[e_.wp.flex.growAndShrink(1),e_.wp.colWithGap(2)],tag:"label",htmlFor:A("handler"),children:[(0,p.Y)(eW.EY,{color:"dimmer",multiline:!1,children:"URL Path"}),(0,p.Y)(hU.pd,{id:A("handler"),placeholder:"/svg-editor",value:w,onChange:function(e){y(e.currentTarget.value)},required:!0})]}),(0,p.FD)(eG.S,{css:[e_.wp.flex.growAndShrink(1),e_.wp.colWithGap(2)],tag:"label",htmlFor:A("glob"),children:[(0,p.Y)(eW.EY,{color:"dimmer",multiline:!1,children:"Glob Pattern"}),(0,p.Y)(hU.pd,{id:A("glob"),placeholder:"*.svg",value:S,onChange:function(e){Y(e.currentTarget.value)},required:!0})]}),(0,p.FD)(eG.S,{css:[e_.wp.flex.growAndShrink(1),e_.wp.colWithGap(2)],tag:"label",htmlFor:A("icon"),children:[(0,p.Y)(eW.EY,{color:"dimmer",multiline:!1,children:"Icon (path)"}),(0,p.Y)(hU.pd,{id:A("icon"),placeholder:"/svg-editor-logo.png",value:m,onChange:function(e){g(e.currentTarget.value)},required:!0})]})]})]})}function gr(e){var n=e.tools,t=e.onCreate,r=e.onUpdate,i=e.onOpen,o=e.onDelete,a=(0,d._)((0,h.useState)([]),2),l=a[0],s=a[1],c=(0,d._)((0,h.useState)(!1),2),u=c[0],f=c[1];return(0,p.FD)(eG.S,{children:[(0,p.FD)(eG.S,{pb:12,children:[(0,p.FD)(eG.S,{row:!0,gap:8,align:"center",children:[(0,p.FD)(eG.S,{row:!0,gap:8,align:"center",children:[(0,p.Y)(eg.A,{}),(0,p.Y)(eW.EY,{variant:"subheadDefault",multiline:!1,children:"Tools"})]}),(0,p.Y)(t7.K0,{onClick:function(){return f(!u)},alt:"Add a new tool",disabled:u,tooltipBehavior:u?"hidden":"default",children:(0,p.Y)(em.A,{})})]}),(0,p.Y)(eW.EY,{color:"dimmer",variant:"small",multiline:!1,children:"Custom user interfaces as a Pane"})]}),(0,p.FD)(eG.S,{gap:8,children:[u?(0,p.Y)(gi,{onSubmit:function(e){t(e),f(!1)},onCancel:function(){f(!1)}}):null,n.length?n.map(function(e,n){var t;return l.includes(n)?(0,p.Y)(gi,{initialTool:e,onSubmit:function(e){r(e,n),s(function(e){return e.filter(function(e){return e!==n})})},onCancel:function(){s(function(e){return e.filter(function(e){return e!==n})})}},n):(0,p.FD)(eD.ui,{css:[e_.wp.borderRadius(8),e_.wp.flex.wrap,{rowGap:8}],p:8,row:!0,justify:"space-between",align:"center",elevated:!0,children:[(0,p.Y)(eW.EY,{multiline:!1,children:null!=(t=e.name)?t:"Unnamed"}),(0,p.FD)(eG.S,{row:!0,gap:12,align:"center",children:[(0,p.Y)(t7.K0,{alt:"Remove ".concat(e.name||"this tool"),colorway:"red",onClick:function(){o(n)},children:(0,p.Y)(rE.A,{})}),(0,p.Y)(t7.K0,{alt:"Remove ".concat(e.name||"this tool"),onClick:function(){s(function(e){return(0,B._)(e).concat([n])})},children:(0,p.Y)(rx.A,{})}),(0,p.Y)(ez.$n,{iconLeft:(0,p.Y)(iQ,{}),variant:"outlined",text:"Preview",onClick:function(){i(e)}})]})]},n)}):(0,p.Y)(p.FK,{children:u?null:(0,p.FD)(eG.S,{css:[e_.wp.border({style:"dashed"}),e_.wp.borderRadius(8),e_.wp.p(16),e_.wp.colWithGap(8),e_.wp.center],children:[(0,p.Y)(eW.EY,{color:"dimmest",children:"You haven't added any tools"}),(0,p.Y)(ez.$n,{variant:"outlined",text:"New Tool",iconLeft:(0,p.Y)(em.A,{}),onClick:function(){return f(!0)}})]})})]})]})}function gi(e){var n,t,r,i=e.onSubmit,o=e.onCancel,a=e.initialTool,l=(0,d._)((0,h.useState)(null!=(n=null==a?void 0:a.name)?n:""),2),s=l[0],c=l[1],u=(0,d._)((0,h.useState)(null!=(t=null==a?void 0:a.icon)?t:null),2),f=u[0],m=u[1],g=(0,d._)((0,h.useState)(null!=(r=null==a?void 0:a.handler)?r:""),2),v=g[0],w=g[1],y=(0,ma.c)();return(0,p.FD)(eD.ui,{tag:"form",css:[e_.wp.borderRadius(8),e_.wp.border({color:tH.LU.outlineDimmest}),e_.wp.p(8)],elevated:!0,onSubmit:function(e){e.preventDefault(),i({name:s,icon:f,handler:v})},children:[(0,p.FD)(eG.S,{css:[e_.wp.border({color:tH.LU.outlineDimmest,direction:"bottom"}),e_.wp.align.center,e_.wp.flex.wrap,{rowGap:8}],row:!0,gap:2,justify:"space-between",children:[(0,p.Y)(eW.EY,{multiline:!1,children:s||"New Tool"}),(0,p.FD)(eG.S,{row:!0,gap:8,children:[(0,p.Y)(ez.$n,{text:"Cancel",onClick:function(){o()}}),(0,p.Y)(ez.$n,{colorway:"primary",iconLeft:(0,p.Y)(lN.A,{}),text:"Save Changes",type:"submit"})]})]}),(0,p.FD)(eG.S,{gap:8,children:[(0,p.FD)(eG.S,{css:[e_.wp.flex.growAndShrink(1),e_.wp.colWithGap(2)],tag:"label",htmlFor:y("name"),children:[(0,p.Y)(eW.EY,{color:"dimmer",multiline:!1,children:"Name"}),(0,p.Y)(hU.pd,{id:y("name"),placeholder:"SQL Viewer",value:s,onChange:function(e){c(e.currentTarget.value)},required:!0})]}),(0,p.FD)(eG.S,{css:[e_.wp.flex.growAndShrink(1),e_.wp.colWithGap(2)],tag:"label",htmlFor:y("handler"),children:[(0,p.Y)(eW.EY,{color:"dimmer",multiline:!1,children:"URL Path"}),(0,p.Y)(hU.pd,{id:y("handler"),placeholder:"/sql",value:v,onChange:function(e){w(e.currentTarget.value)},required:!0})]}),(0,p.FD)(eG.S,{css:[e_.wp.flex.growAndShrink(1),e_.wp.colWithGap(2)],tag:"label",htmlFor:y("icon"),children:[(0,p.Y)(eW.EY,{color:"dimmer",multiline:!1,children:"Icon (path)"}),(0,p.Y)(hU.pd,{id:y("icon"),placeholder:"/sql-logo.png",value:null!=f?f:"",onChange:function(e){m(e.currentTarget.value||null)},required:!0})]})]})]})}function go(e){var n,t,r,i,o,a=e.manifest,l=e.performPaneOperation,s=e.update,c=(0,tS.FS)(),u=(0,tS.mN)(),f=(0,d._)((0,h.useState)(null),2),g=f[0],v=f[1];return(0,p.FD)(eG.S,{gap:24,css:[e_.wp.width("100%")],children:[(0,p.Y)(gn,{onOpen:(n=(0,H._)(function(e){return(0,z.YH)(this,function(n){return v(e),[2]})}),function(e){return n.apply(this,arguments)}),onDelete:function(e){var n;s((0,e6._)((0,m._)({},a),{fileHandlers:null==(n=a.fileHandlers)?void 0:n.filter(function(n,t){return t!==e})}))},onUpdate:function(e,n){var t,r,i,o;s((0,e6._)((0,m._)({},a),{fileHandlers:(0,B._)(null!=(i=null==(t=a.fileHandlers)?void 0:t.slice(0,n))?i:[]).concat([e],(0,B._)(null!=(o=null==(r=a.fileHandlers)?void 0:r.slice(n+1))?o:[]))}))},onCreate:function(e){var n;s((0,e6._)((0,m._)({},a),{fileHandlers:(0,B._)(null!=(n=a.fileHandlers)?n:[]).concat([e])}))},fileHandlers:null!=(i=a.fileHandlers)?i:[]}),(0,p.Y)(gr,{onOpen:(t=(0,H._)(function(e){var n,t;return(0,z.YH)(this,function(r){switch(r.label){case 0:if(n=c)return[3,2];return[4,u()];case 1:n=r.sent(),r.label=2;case 2:if(!n)throw Error("Expected current repl to be installed as an extension");return l({operation:"open",pane:{type:"extension",data:{extensionId:n.extensionId,installationId:n.installationId,name:null!=(t=e.name)?t:n.manifest.name,baseUrl:n.baseUrl,icon:e.icon,path:e.handler}}}),[2]}})}),function(e){return t.apply(this,arguments)}),onDelete:function(e){var n;s((0,e6._)((0,m._)({},a),{tools:null==(n=a.tools)?void 0:n.filter(function(n,t){return t!==e})}))},onUpdate:function(e,n){var t,r,i,o;s((0,e6._)((0,m._)({},a),{tools:(0,B._)(null!=(i=null==(t=a.tools)?void 0:t.slice(0,n))?i:[]).concat([e],(0,B._)(null!=(o=null==(r=a.tools)?void 0:r.slice(n+1))?o:[]))}))},onCreate:function(e){var n;s((0,e6._)((0,m._)({},a),{tools:(0,B._)(null!=(n=a.tools)?n:[]).concat([e])}))},tools:null!=(o=a.tools)?o:[]}),(0,p.Y)(ek.a,{isOpen:!!g,onRequestClose:function(){return v(null)},children:g?(0,p.Y)(mP,{glob:g.glob,openFile:(r=(0,H._)(function(e){var n,t;return(0,z.YH)(this,function(r){switch(r.label){case 0:if(!g)throw Error("Expected pending file handler");if(n=c)return[3,2];return[4,u()];case 1:n=r.sent(),r.label=2;case 2:if(!n)throw Error("Expected current repl to be installed as an extension");return l({operation:"open",pane:{type:"extension",data:{extensionId:n.extensionId,installationId:n.installationId,name:null!=(t=g.name)?t:n.manifest.name,baseUrl:n.baseUrl,path:(0,e3.sU)(n.baseUrl,g.handler),filePath:e}}}),v(null),[2]}})}),function(e){return r.apply(this,arguments)})}):null})]})}var ga=t(45641),gl=t(17295),gs=t(83647),gc=(0,tB.AH)(so.b.filled,e_.wp.position.relative,e_.wp.p(4),e_.wp.border({color:tH.LU.outlineDimmer}),e_.wp.backgroundColor.backgroundHigher,{"&[data-complete]":[e_.wp.backgroundColor.backgroundDefault,{pointerEvents:"none"}],button:{overflow:"hidden",margin:-1,borderWidth:0,padding:0,width:1,height:1,background:"none",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",cursor:"pointer","&::after":{content:'""',position:"absolute",top:0,right:0,bottom:0,left:0,display:"block",cursor:"pointer",zIndex:1}}}),gu=function(e){var n=e.complete,t=e.onClick,r=e.description,i=e.title,o=e.icon;return(0,p.Y)(eG.S,{tag:"li",css:gc,"data-complete":n,children:(0,p.FD)(eG.S,{p:4,children:[(0,p.FD)(eG.S,{row:!0,gap:6,align:"center",children:[n?(0,p.Y)(lN.A,{color:tH.LU.accentPositiveStrongest,size:16,css:[e_.wp.mr(4)]}):null!=o?o:null,(0,p.Y)(eW.EY,{variant:"small",color:n?"dimmer":"default",css:[e_.wp.fontWeight.medium],children:i})]}),r?(0,p.Y)(eW.EY,{color:"dimmer",variant:"small",children:r}):null,(0,p.Y)(eG.S,{children:(0,p.Y)("button",{onClick:function(){t&&"function"==typeof t&&t()},type:"button",children:"Start"})})]})})};let gd=function(e){var n=e.performPaneOperation,t=e.setSelectedTab,r=(0,ga.g)("extensions-onboarding-checklist"),i=r.isDone,o=r.setAsDone,a=(0,ga.g)("extensions-onboarding-checklist-create"),l=a.isDone,s=a.setAsDone,c=(0,ga.g)("extensions-onboarding-checklist-concepts"),u=c.isDone,d=c.setAsDone,f=(0,ga.g)("extensions-onboarding-checklist-api"),g=f.isDone,v=f.setAsDone,w=(0,ga.g)("extensions-onboarding-checklist-publish").isDone;if((0,h.useEffect)(function(){s()},[]),void 0===i||!0===i)return null;var y=[l,u,g,w].filter(Boolean).length,b=[{name:"create",title:"Create an Extension",complete:!!l,icon:(0,p.Y)(tx.A,{})},{name:"concepts",title:"Learn key concepts",complete:!!u,onClick:function(){n({operation:"open",secondary:!0,pane:{type:"docs",data:{url:eN.ik.EXTENSIONS}}}),(0,V.u4)(V.AZ.EXTENSION_DEVELOPER_ONBOARDING_COMPLETED,{step:"concepts"}),d()},icon:(0,p.Y)(gl.A,{})},{name:"learn",title:"Use the API",complete:!!g,onClick:function(){n({operation:"open",secondary:!0,pane:{type:"docs",data:{url:eN.ik.EXTENSIONS}}}),(0,V.u4)(V.AZ.EXTENSION_DEVELOPER_ONBOARDING_COMPLETED,{step:"learn"}),v()},icon:(0,p.Y)(hF.A,{})},{name:"publish",title:"Publish your Extension",complete:!!w,onClick:function(){t(1)},icon:(0,p.Y)(gs.A,{})}];return(0,p.Y)("section",{css:[e_.wp.width("100%")],children:(0,p.FD)(eG.S,{gap:12,children:[(0,p.Y)(eG.S,{gap:2,children:(0,p.FD)(eG.S,{row:!0,gap:12,css:[e_.wp.flex.wrap],align:"center",children:[(0,p.Y)(eW.EY,{variant:"subheadDefault",children:"Get started with Extensions"}),(0,p.FD)(eG.S,{row:!0,gap:12,align:"center",children:[(0,p.Y)(eG.S,{row:!0,gap:2,align:"center",justify:"center",children:Array.from({length:b.length}).map(function(e,n){return(0,p.Y)(eG.S,{css:[e_.wp.borderRadius(8),e_.wp.width(12),e_.wp.height(4),n<y?e_.wp.backgroundColor.accentPositiveDefault:e_.wp.backgroundColor.backgroundHighest]},n)})}),(0,p.Y)(eW.EY,{multiline:!1,variant:"small",color:"dimmer",children:"".concat(y,"/").concat(b.length)}),(0,p.Y)(t7.K0,{alt:"Hide section",onClick:o,children:(0,p.Y)(iH.A,{})})]})]})}),(0,p.Y)(eG.S,{tag:"ul",css:[e_.wp.flex.wrap,{listStyleType:"none",gap:tH.LU.space8}],row:!0,children:b.map(function(e,n){return(0,p.Y)(gu,(0,m._)({},e),n)})})]})})};var gp=t(45149);function gf(e){var n=e.performPaneOperation,t=e.setSelectedTab,r=m$(),i=r.__status,o=r.parsed,a=r.state,l=r.updateString;if("loading"===i)return(0,p.Y)(mQ,{});if("fileReadError"===i)return(0,p.Y)(m2,{message:(null==a?void 0:a.fileReadError)||"Unknown error"});if("fileParseError"===i){var s=o.error;return(0,p.Y)(m1,{performPaneOperation:n,manifestPath:a.manifestPath,error:s})}var c=o.manifest;return"success"===i&&c?(0,p.FD)(eG.S,{css:[e_.wp.width("100%")],pt:12,gap:24,align:"center",children:[(0,p.Y)(m9,{performPaneOperation:n,setSelectedTab:t}),(0,p.Y)(gd,{performPaneOperation:n,setSelectedTab:t}),(0,p.Y)(eG.S,{css:[e_.wp.border({direction:"bottom",width:4,color:tH.LU.outlineDimmest}),e_.wp.width("100%")]}),(0,p.FD)(eG.S,{gap:8,css:[e_.wp.width("100%")],children:[(0,p.FD)(eG.S,{gap:2,children:[(0,p.FD)(eG.S,{row:!0,gap:8,align:"center",children:[(0,p.Y)(gp.A,{}),(0,p.Y)(eW.EY,{variant:"subheadDefault",multiline:!1,children:"Permission Scopes"})]}),(0,p.FD)(eW.EY,{variant:"small",color:"dimmer",children:["Let users know what your Extension can do with their data. For more information,"," ",(0,p.Y)("a",{onClick:function(){return n({operation:"open",secondary:!0,pane:{type:"docs",data:{url:eN.ik.EXTENSIONS+"/api/manifest#scopetype"}}})},children:"read the docs"}),"."]})]}),(0,p.Y)(eG.S,{css:[e_.wp.borderRadius(4),e_.wp.border({color:tH.LU.outlineDimmest,width:1}),e_.wp.flex.row,e_.wp.align.center,e_.wp.p(8),e_.wp.flex.wrap,{gap:12},e_.wp.width("fit-content")],children:mC.W.map(function(e){var n;return(0,p.FD)(eG.S,{row:!0,gap:6,align:"center",children:[(0,p.Y)(a0.S,{id:e.key,checked:null==(n=c.scopes)?void 0:n.some(function(n){return n.name===e.key}),onChange:function(n){var t,r,i,o=(null==(t=c.scopes)?void 0:t.some(function(n){return n.name===e.key}))&&!n?mA.F6(a.manifestStr,(0,e6._)((0,m._)({},c),{scopes:null==(r=c.scopes)?void 0:r.filter(function(n){return n.name!==e.key})})):mA.F6(a.manifestStr,(0,e6._)((0,m._)({},c),{scopes:(0,B._)(null!=(i=c.scopes)?i:[]).concat([{name:e.key,reason:e.description}])}));a.writeChange((0,mx.s)(a.manifestStr,o)),l(o)}}),(0,p.Y)("label",{htmlFor:e.key,css:[e_.wp.fontSize(12),e_.wp.cursor.pointer],children:(0,p.Y)("abbr",{title:e.description,css:[{textDecorationColor:tH.LU.foregroundDimmest}],children:e.friendlyName})})]},e.key)})})]}),(0,p.Y)(go,{performPaneOperation:n,manifest:c,update:function(e){var n=mA.F6(a.manifestStr,e);a.writeChange((0,mx.s)(a.manifestStr,n)),l(n)}})]}):(0,p.Y)("div",{children:"unknown state"})}var gh=t(18918),gm=t(55315),gg=t(26019),gv=t(42156),gw=t(78184),gy=(0,eC.x)({logViewerTopLevel:[e_.wp.height("100%")],logsContainer:[e_.wp.scrollbar.thin,e_.wp.backgroundColor.backgroundDefault,e_.wp.overflowY("scroll"),e_.wp.flex.growAndShrink(1)],logViewerHeader:[e_.wp.border({direction:"bottom",width:tH.LU.borderWidthDefault}),e_.wp.display.flex,e_.wp.flex.row,e_.wp.rowWithGap(8),e_.wp.align.center],logViewerHeaderControl:[e_.wp.flex.row,e_.wp.rowWithGap(4),e_.wp.align.center],logLine:[e_.wp.font.code,so.b.listItem,e_.wp.rowWithGap(2),e_.wp.align.center],logLineIcon:[{alignSelf:"flex-start"}],logMessage:{flex:"1 1 0"}});function gb(e){var n=e.log,t=e.prevLevel,r=e.isLast,i=e.isFirst,o=(0,d._)((0,h.useState)(!1),2),a=o[0],l=o[1],s=(0,gm.A)().ref;return(0,p.FD)(eG.S,{css:[e_.wp.flex.column,function(e){if(e===gv.$.warn)return{color:tH.LU.yellowStronger,background:"rgba(150, 125, 0, 0.2)",borderTop:i?void 0:"1px solid rgba(150, 125, 0, 0.5)",borderBottom:r?"1px solid rgba(150, 125, 0, 0.5)":void 0,"& .cm-gutter":{backgroundColor:"rgba(150, 125, 0, 0.2)"}};if(e===gv.$.error)return{color:tH.LU.accentNegativeStronger,backgroundColor:"rgba(229, 34, 34, 0.2)",borderTop:i?void 0:"1px solid rgba(229, 34, 34, 0.5)",borderBottom:r?"1px solid rgba(229, 34, 34, 0.5)":void 0,"& .cm-gutter":{backgroundColor:"rgba(229, 34, 34, 0.2)"}};var n=tH.LU.backgroundHigher;return t===gv.$.warn?n="rgba(150, 125, 0, 0.5)":t===gv.$.error&&(n="rgba(229, 34, 34, 0.5)"),{color:tH.LU.foregroundDefault,borderTop:i?void 0:"1px solid ".concat(n),borderBottom:r?"1px solid ".concat(n):void 0}}(n.logLevel)],children:[(0,p.FD)(eG.S,{css:gy.logLine,p:2,onClick:function(){return l(function(e){return!e})},children:[(0,p.Y)(eG.S,{css:gy.logLineIcon,p:4,children:(0,p.Y)(function(){return n.logLevel===gv.$.warn?(0,p.Y)(sm.A,{size:16}):n.logLevel===gv.$.error?(0,p.Y)(gw.A,{size:16}):(0,p.Y)(mI.A,{size:16,css:{opacity:0}})},{})}),(0,p.Y)(eW.EY,{maxLines:10,css:gy.logMessage,variant:"small",children:n.message}),a?(0,p.Y)(as.A,{size:16}):(0,p.Y)(lG.A,{size:16})]}),a?(0,p.Y)(eG.S,{children:(0,p.Y)(gh.Ay,{ref:s,css:gg.$1,noHistory:!0,readOnly:!0,lineWrapping:!0,language:"json",fontSize:12,initialDoc:JSON.stringify(n,null,2)})}):null]})}let gS=function(){var e=(0,tg.Du)(nS.MN),n=(0,tg.Ol)(nS.KO),t=(0,d._)((0,tg.Cj)(nS.gT),2),r=t[0],i=t[1],o=(0,h.useRef)(null);return(0,h.useEffect)(function(){var e,n=o.current;n&&(null==(e=n.children[n.children.length-1])||e.scrollIntoView({behavior:"smooth"}))},[e]),(0,p.FD)(eG.S,{css:gy.logViewerTopLevel,children:[(0,p.FD)(eG.S,{className:"log-viewer-header",css:gy.logViewerHeader,p:8,children:[(0,p.Y)(eG.S,{css:gy.logViewerHeaderControl,style:{flexGrow:1},children:(0,p.Y)(hU.pd,{type:"search",placeholder:"Filter logs",value:null!=r?r:"",onChange:function(e){return i(e.target.value)}})}),(0,p.FD)(eG.S,{css:gy.logViewerHeaderControl,children:[(0,p.Y)(t7.K0,{alt:"Clear logs",onClick:function(){return n()},children:(0,p.Y)(iH.A,{id:"clear-logs"})}),(0,p.Y)("label",{htmlFor:"clear-logs",children:"Clear logs"})]})]}),(0,p.Y)(eG.S,{css:gy.logsContainer,innerRef:o,children:e.map(function(n,t){var r;return(0,p.Y)(gb,{log:n,prevLevel:null==(r=e[t-1])?void 0:r.logLevel,isFirst:0===t,isLast:t===e.length-1},n.index)})})]})};var gY=t(68197),gA=t(51026);function gx(){var e=(0,g._)(["\n  subscription ExtensionBuildLogs($extensionId: String!) {\n    extensionBuildDeployActionUpdates(input: { extensionId: $extensionId }) {\n      ... on ExtensionBuildDeployLogAction {\n        log\n      }\n      ... on ExtensionBuildDeployStatusAction {\n        status\n        message\n        build {\n          id\n        }\n      }\n    }\n  }\n"]);return gx=function(){return e},e}function gC(){var e=(0,g._)(["\n  mutation DeployExtension2(\n    $extensionId: String!\n    $replId: String!\n    $outputDirectory: String!\n    $buildCommand: String!\n  ) {\n    deployExtension2(\n      extensionId: $extensionId\n      replId: $replId\n      outputDirectory: $outputDirectory\n      buildCommand: $buildCommand\n    ) {\n      ... on Extension {\n        ...TopLevelExtension\n      }\n      ... on TooManyRequestsError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return gC=function(){return e},e}function g_(){var e=(0,g._)(["\n  query Publish2Extension($extensionId: String!) {\n    extension(id: $extensionId) {\n      ... on Extension {\n        id\n        user {\n          id\n          username\n        }\n        name\n        description\n        canDeployExtension\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n"]);return g_=function(){return e},e}function gk(){var e=(0,g._)(["\n  mutation CreateExtension($name: String!, $description: String!) {\n    createExtension(name: $name, description: $description) {\n      ... on Extension {\n        id\n        url\n      }\n      ... on UserError {\n        message\n      }\n      ... on TooManyRequestsError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n"]);return gk=function(){return e},e}function gD(){var e=(0,g._)(["\n  mutation UpdateExtension(\n    $extensionId: String!\n    $name: String\n    $description: String\n  ) {\n    updateExtension(\n      extensionId: $extensionId\n      name: $name\n      description: $description\n    ) {\n      ... on Extension {\n        id\n        name\n        description\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return gD=function(){return e},e}var gE={},gR=(0,v.J1)(gx()),gI=(0,v.J1)(gC(),eP.Fz),gF=(0,v.J1)(g_()),gT=(0,v.J1)(gk()),gP=(0,v.J1)(gD()),gL=t(54668),gU=eG.D.button,gN=function(e){return e.Pending="pending",e.Active="active",e.Complete="complete",e.Error="error",e}({}),gO=function(){return(0,p.Y)(eG.S,{css:[e_.wp.flex.grow(1),e_.wp.border({color:tH.LU.outlineDimmest,direction:"top"})],row:!0})},gM=function(e){var n=e.text,t=e.size,r=void 0===t?"default":t,i=e.state,o=e.onClick,a=e.disabled,l=e.hideLoadingIcon,s=(0,ez.J)(r),c=(0,ez.Jt)(r);return(0,p.Y)(gU,{type:"button",css:[e_.wp.reset.button,e_.wp.position.relative,o&&so.b.nofill,e_.wp.px(8),e_.wp.py(2),e_.wp.borderRadius(4),e_.wp.rowWithGap(4),e_.wp.align.center,{borderRadius:tH.LU.borderRadiusRound}].concat((0,B._)("error"===i?[e_.wp.color.accentNegativeStronger]:"active"===i?[e_.wp.backgroundColor.accentPrimaryDimmer,e_.wp.color.accentPrimaryStrongest]:"complete"===i?[e_.wp.color.accentPositiveStronger]:[e_.wp.color.foregroundDimmest])),onClick:o,disabled:a,children:(0,p.Y)(ez.EE,{text:n,iconSize:c,textVariant:s,iconRight:function(){if("error"===i)return(0,p.Y)(sm.A,{});if("active"===i){if(l)return;return(0,p.Y)(lO.A,{})}return"complete"===i?(0,p.Y)(lN.A,{}):(0,p.Y)(gp.A,{})}()})})},gB=t(93591),gH=t(65518),gz=t(58809),gW=t(66047),gG=t(79513),gV=t(84686),gj=function(e){return e.Details="Details",e.Init="Init",e.CreatingExtension="CreatingExtension",e.CreatingExtensionError="CreatingExtensionError",e.Queued="Queued",e.Deploying="Deploying",e.DeployError="DeployError",e.Success="Success",e}(gj||{}),gZ=["CreatingExtension","Deploying"],gq=function(e){return e.Details="Details",e.Init="Configure",e.Create="Create",e.Deploy="Deploy",e}(gq||{}),gK=["Details","Configure","Deploy"];function g$(e){var n,t,r,i,o,a,l,s,c=e.performPaneOperation,u=(0,er.A)(),f=u.container,g=u.fs,v=u.dotReplit,w=(0,d._)((n=(0,m._)({},gE,void 0),gA._(gF,n)),1)[0],y=(0,ga.g)("extensions-onboarding-checklist-".concat("publish")).setAsDone,b=(0,d._)((0,h.useState)(null),2),S=b[0],Y=b[1],A=(0,d._)((0,h.useState)("Details"),2),x=A[0],C=A[1],_=(0,d._)((0,h.useState)(null),2),k=_[0],D=_[1],E=m$(),R=E.__status,I=E.parsed,F=E.state,T=E.updateManifest,P=(0,gL.W)("",function(e){return e?e.startsWith("/")?{message:'Folder must be relative to the root of your project (e.g. "extension" or "./extension")',severity:"error"}:null:{message:"Output folder is required",severity:"error"}}),L=P.value,U=P.setValue,N=P.error,O=P.validate,M=(0,d._)((0,h.useState)([]),2),W=M[0],G=M[1],j=(0,h.useCallback)(function(e){return c({operation:"open",secondary:!0,pane:{type:(0,X.QY)(e),data:e}})},[c]),Z=(0,d._)((0,gH.A)({openFile:j,listFiles:g.listFiles}),2),q=Z[0],K=Z[1],$=(0,gz.V)();t=(0,m._)({},gE,{variables:{extensionId:null!=S?S:""},onData:function(e){var n=e.data;if(n.data&&!n.error){var t=n.data.extensionBuildDeployActionUpdates;"ExtensionBuildDeployLogAction"===t.__typename&&G(function(e){return(0,B._)(e).concat((0,B._)(t.log))}),"ExtensionBuildDeployStatusAction"===t.__typename&&(t.status===rQ.nH.Success?C("Success"):t.status===rQ.nH.Failed&&C("DeployError"))}},skip:"Deploying"!==x||!S}),gY.R(gR,t),(0,h.useEffect)(function(){q&&(q.clear(),W.forEach(function(e){q.write(e.replaceAll("\n","\r\n"))}))},[W,q]);var J=(0,h.useCallback)(function(e){if(null==e?void 0:e.config){var n=e.config.extension;if(!n||!1===n.isExtension){Y(null),D(null),U(null);return}n.buildCommand&&D(n.buildCommand),n.outputDirectory&&U(n.outputDirectory),n.extensionID&&Y(n.extensionID)}},[U]);(0,h.useEffect)(function(){var e=!1;return(0,H._)(function(){var n;return(0,z.YH)(this,function(t){switch(t.label){case 0:return[4,v.getConfig()];case 1:if(n=t.sent(),e)return[2];return J(n),[2]}})})(),function(){e=!0}},[v,J]);var Q=(0,h.useCallback)((r=(0,H._)(function(e){return(0,z.YH)(this,function(n){switch(n.label){case 0:return Y(e),[4,v.updateDotReplit([{op:"add",path:"extension/extensionID",value:JSON.stringify(e)},{op:"add",path:"extension/isExtension",value:JSON.stringify(!0)}])];case 1:return n.sent(),[2]}})}),function(e){return r.apply(this,arguments)}),[v]),ee=(0,h.useCallback)((i=(0,H._)(function(e){return(0,z.YH)(this,function(n){switch(n.label){case 0:return D(e),[4,v.updateDotReplit([{op:"add",path:"extension/buildCommand",value:JSON.stringify(e)},{op:"add",path:"extension/isExtension",value:JSON.stringify(!0)}])];case 1:return n.sent(),[2]}})}),function(e){return i.apply(this,arguments)}),[v]),en=(0,d._)((0,h.useState)(null),2),et=en[0],ei=en[1],eo=(0,d._)((0,h.useState)(null),2),ea=eo[0],el=eo[1],es=(0,d._)((0,h.useState)(null),2),ec=es[0],eu=es[1],ed=(0,d._)((0,h.useState)(null),2),ep=ed[0],ef=ed[1],eh=(0,d._)((0,h.useState)(null),2),em=eh[0],eg=eh[1],ev=(0,d._)((o=(0,m._)({},gE,void 0),ln.n(gI,o)),1)[0],ew=(0,eB.A)(),ey=(0,d._)((a=(0,m._)({},gE,void 0),ln.n(gT,a)),1)[0],eb=(0,d._)((0,h.useState)(null),2),eS=eb[0],eY=eb[1],eA=(0,h.useCallback)((l=(0,H._)(function(e){var n,t,r;return(0,z.YH)(this,function(i){switch(i.label){case 0:return[4,ey({variables:{name:e.name,description:e.description}})];case 1:if((t=i.sent()).errors)return[2,{error:t.errors.map(function(e){return e.message}).join(", "),result:null}];if(!(r=null==(n=t.data)?void 0:n.createExtension))return[2,{error:"Failed to create extension",result:null}];if("TooManyRequestsError"===r.__typename||"UserError"===r.__typename||"UnauthorizedError"===r.__typename)return[2,{error:"Failed to create extension: "+r.message,result:null}];if("Extension"===r.__typename)return[2,{error:null,result:r}];throw Error("Unexpected response from createExtension mutation")}})}),function(e){return l.apply(this,arguments)}),[ey]),ex=(0,d._)((s=(0,m._)({},gE,void 0),ln.n(gP,s)),1)[0],eC=(0,h.useCallback)((0,H._)(function(){var e,n,t,r,i,o,a,l,s,c,u,d,p,h,m,v,b,Y;return(0,z.YH)(this,function(A){switch(A.label){case 0:return e=S,[4,O()];case 1:if(null==(n=A.sent())?void 0:n.message)return eu(null==n?void 0:n.message),[2];if(!L)throw Error("expected output folder");return t=(0,tc.Fd)(L),(r=function(){C("Init"),G([]),eg(null),eu(null),el(null),ei(null)})(),[4,g.flush()];case 2:if(A.sent(),!e)return[3,11];return[4,w({variables:{extensionId:e}})];case 3:if((i=A.sent()).error||!i.data)throw Error("Encountered an unknown error. Please contact support.");if((null==(o=i.data.extension)?void 0:o.__typename)!=="NotFoundError")return[3,5];return[4,new Promise(function(n){eY({message:"The extension referenced in .replit (".concat(e,") does not exist. Would you like to create a new extension?"),callback:function(e){eY(null),n(e)}})})];case 4:case 6:if(!A.sent())return r(),[2];return e=null,[3,11];case 5:if(!((null==o?void 0:o.__typename)==="Extension"&&!o.canDeployExtension))return[3,7];return[4,new Promise(function(n){eY({message:"You do not have the permissions to deploy the extension referenced in .replit (".concat(e,"). Would you like to create a new extension?"),callback:function(e){eY(null),n(e)}})})];case 7:if(!((null==o?void 0:o.__typename)==="Extension"&&o.canDeployExtension))return[3,10];if(s=null==I||null==(a=I.manifest)?void 0:a.name,c=null==I||null==(l=I.manifest)?void 0:l.description,!(s&&s!==o.name||c&&c!==o.description))return[3,9];return[4,ex({variables:{extensionId:e,description:null!=c?c:void 0,name:null!=s?s:void 0}})];case 8:A.sent(),A.label=9;case 9:return[3,11];case 10:throw Error("Encountered an unknown error. Please contact support.");case 11:if(e)return[3,13];return C("CreatingExtension"),[4,eA({name:null!=(p=null==I||null==(u=I.manifest)?void 0:u.name)?p:"My extension",description:null!=(h=null==I||null==(d=I.manifest)?void 0:d.description)?h:"My extension's description"})];case 12:if(null!==(m=A.sent()).error)return C("CreatingExtensionError"),ef(m.error),[2];Q(e=m.result.id),A.label=13;case 13:if(!e)throw Error("expected extension id to be set");return[4,(0,gB.S)(f,t)];case 14:A.sent(),C("Queued"),A.label=15;case 15:return A.trys.push([15,17,,18]),[4,ev({variables:{extensionId:e,replId:ew,outputDirectory:t,buildCommand:null!=k?k:""}})];case 16:return v=A.sent(),[3,18];case 17:if(b=A.sent(),C("DeployError"),b.message.includes("received message larger than max"))return eg("Your extension's size is too large. Please compress assets or remove files, and try again."),[2];return eg(b.message),[2];case 18:if(v.errors)return C("DeployError"),eg("Internal error. Please contact support: "+v.errors.map(function(e){return e.message}).join(", ")),[2];if(!v.data)return C("DeployError"),eg("Encountered an unknown error. Please contact support."),[2];if("Extension"===(Y=v.data.deployExtension2).__typename)return C("Deploying"),y(),(0,V.u4)(V.AZ.EXTENSION_DEVELOPER_ONBOARDING_COMPLETED,{step:"publish"}),ei(Y),[2];if("message"in Y)return C("DeployError"),eg(Y.message),[2];return C("DeployError"),eg("Encountered an unknown error. Please contact support."),[2]}})}),[k,f,L,O,ew,g,C,ev,w,ex,S,eA,Q,y,I]),ek=function(e){switch(e){case"Details":default:return"Details";case"Init":return"Configure";case"CreatingExtension":case"CreatingExtensionError":return"Create";case"Queued":case"Deploying":case"DeployError":return"Deploy"}}(x),eE=gK.indexOf(ek);function eR(){return ea?"Build error: ".concat(ea):ec?"Validation error: ".concat(ec):ec?"Create extension error: ".concat(ep):em?"Deploy error: ".concat(em):void 0}var eI=(0,e4.Ot)().find(function(e){return e.extensionId===S}),eF=(0,d._)((0,h.useState)(!1),2),eT=eF[0],eP=eF[1],eL=(0,e4.Sc)(),eU=(0,h.useMemo)(function(){return eT?(0,p.Y)(lO.A,{}):eI?(0,p.Y)(lN.A,{}):(0,p.Y)(re.A,{})},[eT,eI]),eM=(0,tv.D)().values.global,eH=(0,uH.mO)().fireBurst,eV=(0,d._)((0,h.useState)(!1),2),ej=eV[0],eZ=eV[1],eq=(0,h.useRef)(null);if((0,h.useEffect)(function(){eq.current&&!ej&&"Success"===x&&(eH({x:eq.current.getBoundingClientRect().left,y:eq.current.getBoundingClientRect().top,heading:-45,numParticles:160,lifetime:1,spread:80,velocity:function(){return(0,uH.Im)(300,5e3)},size:function(){return{width:(0,uH.Im)(8,16),height:(0,uH.Im)(8,16)}},color:[eM.tealStronger,eM.blurpleStronger,eM.yellowStronger]}),eH({x:eq.current.getBoundingClientRect().right,y:eq.current.getBoundingClientRect().top,heading:225,numParticles:160,lifetime:1,velocity:function(){return(0,uH.Im)(300,5e3)},size:function(){return{width:(0,uH.Im)(8,16),height:(0,uH.Im)(8,16)}},color:[eM.blueStronger,eM.greenStronger,eM.pinkStronger]}),eZ(!0))},[x,eM,eH,ej]),R===mJ.loading)return(0,p.Y)(mQ,{});if(R===mJ.fileReadError)return(0,p.Y)(m2,{message:F.fileReadError});var eK=I.manifest,e$=I.error;return e$?(0,p.Y)(m1,{performPaneOperation:c,manifestPath:F.manifestPath,error:e$}):(0,p.FD)(eG.S,{css:[e_.wp.flex.column,e_.wp.display.flex,e_.wp.height("100%"),e_.wp.justify.center,e_.wp.align.center,e_.wp.position.relative],children:[(0,p.Y)(eG.S,{css:[e_.wp.position.absolute,e_.wp.top(0),e_.wp.left(0),e_.wp.right(0)],className:"Confetti",innerRef:eq}),(0,p.FD)(eG.S,{css:[e_.wp.flex.growAndShrink(1),e_.wp.width("100%"),e_.wp.maxWidth(mY.R)],p:12,pt:16,gap:24,children:["Success"!==x?(0,p.FD)(p.FK,{children:[(0,p.FD)(eG.S,{gap:16,children:[(0,p.Y)(eW.EY,{variant:"subheadBig",multiline:!0,children:"Create a new release"}),(0,p.Y)(eG.S,{row:!0,gap:4,align:"center",children:gK.map(function(e,n){var t;return(0,p.FD)(h.Fragment,{children:[0!==n&&(0,p.Y)(gO,{}),(0,p.Y)(gM,{state:(t=n)<eE?gN.Complete:t!==eE?gN.Pending:["CreatingExtensionError","DeployError"].includes(x)?gN.Error:gN.Active,text:e,hideLoadingIcon:"Configure"===e||"Details"===e})]},e)})})]}),"Details"===x?(0,p.Y)(eG.S,{css:[e_.wp.flex.column,e_.wp.colWithGap(8),e_.wp.width("100%")],children:(0,p.Y)(ge,{manifest:eK,updateManifest:T,onSubmit:function(e){T((0,m._)({},eK,e)),C("Init")}})}):null,"Details"!==x?(0,p.FD)(p.FK,{children:[(0,p.FD)(eG.S,{gap:16,children:[(0,p.FD)(eG.S,{row:!0,gap:8,align:"center",children:[(0,p.Y)(gV.A,{}),(0,p.Y)(eW.EY,{variant:"subheadDefault",children:"Build settings"}),(0,p.Y)(eG.S,{css:[e_.wp.flex.grow(1),e_.wp.border({color:tH.LU.backgroundHighest,direction:"y"})]})]}),(0,p.FD)(eG.S,{gap:4,children:[(0,p.FD)("label",{htmlFor:"buildCommand",css:[e_.wp.display.flex,e_.wp.rowWithGap(4),e_.wp.align.center],children:[(0,p.Y)(eW.EY,{color:"dimmer",variant:"small",children:"Build command (optional)"}),(0,p.Y)(tz.m_,{tooltip:"This is the command that compiles your app at build time. Leave it blank if you don't need to build your app.",children:(0,p.Y)(mI.A,{size:12})})]}),(0,p.Y)(hU.pd,{value:null!=k?k:"",onChange:function(e){return ee(e.target.value)},placeholder:"Example: npm run build",disabled:"Init"!==x&&gZ.includes(x)})]}),(0,p.FD)(eG.S,{gap:4,children:[(0,p.FD)("label",{htmlFor:"outputFolder",css:[e_.wp.display.flex,e_.wp.rowWithGap(4),e_.wp.align.center],children:[(0,p.Y)(eW.EY,{color:"dimmer",variant:"small",children:"Output folder"}),(0,p.Y)(tz.m_,{tooltip:"This is where your build will live. There must be an extension.json file in this folder.",children:(0,p.Y)(mI.A,{size:12})})]}),(0,p.Y)(hU.pd,{id:"outputFolder",value:null!=L?L:"",disabled:"Init"!==x&&gZ.includes(x),onChange:function(e){U(e.currentTarget.value),v.updateDotReplit([{op:"add",path:"extension/outputDirectory",value:JSON.stringify(e.currentTarget.value)},{op:"add",path:"extension/isExtension",value:JSON.stringify(!0)}])},placeholder:"./extension"}),N?(0,p.Y)(eW.EY,{css:[e_.wp.color.accentNegativeStronger],children:N.message}):null]}),(0,p.Y)(ez.$n,{text:"Init"===x||x.endsWith("Error")?"Deploy and Release":"Deploying",iconLeft:"Init"===x||x.endsWith("Error")?(0,p.Y)(uD.A,{}):(0,p.Y)(lO.A,{}),onClick:eC,disabled:"Init"!==x&&gZ.includes(x),colorway:"primary"}),(0,p.FD)(eW.EY,{multiline:!0,variant:"small",color:"dimmer",children:["By releasing an Extension, you agree to the"," ",(0,p.Y)("a",{href:eN.aC.EXTENSIONS_DEVELOPER_TERMS,children:"Developer Terms"})]})]}),W.length>0?(0,p.FD)(eG.S,{gap:8,children:[(0,p.FD)(eG.S,{row:!0,gap:8,align:"center",children:[(0,p.Y)(gG.A,{}),(0,p.Y)(eW.EY,{variant:"subheadDefault",children:"Build logs"}),(0,p.Y)(eG.S,{css:[e_.wp.flex.grow(1),e_.wp.border({color:tH.LU.backgroundHighest,direction:"y"})]})]}),eR()?(0,p.Y)(cH.N,{text:eR(),colorway:"red",icon:(0,p.Y)(gw.A,{})}):null,(0,p.Y)(eG.S,{css:[e_.wp.display.flex,e_.wp.py(12),e_.wp.pl(16),e_.wp.borderRadius(8),e_.wp.overflow("hidden"),{border:"1px solid ".concat(tH.LU.outlineDimmest),backgroundColor:null==$?void 0:$.background}],children:(0,p.Y)(eG.D.div,{css:[e_.wp.width("100%"),e_.wp.maxWidth("100%")],ref:K})})]}):null,eS?(0,p.FD)(eD.ui,{elevated:!0,css:[e_.wp.borderRadius(8)],p:8,gap:8,children:[(0,p.Y)(eW.EY,{variant:"text",multiline:!0,maxLines:3,children:eS.message}),(0,p.FD)(eG.S,{row:!0,gap:4,align:"center",children:[(0,p.Y)(ez.$n,{text:"No",css:[e_.wp.flex.grow(1)],onClick:function(){return eS.callback(!1)}}),(0,p.Y)(ez.$n,{text:"Yes",colorway:"primary",css:[e_.wp.flex.grow(1)],onClick:function(){return eS.callback(!0)}})]})]}):null]}):null]}):null,et&&"Success"===x?(0,p.FD)(eG.S,{gap:16,children:[(0,p.FD)(eG.S,{gap:4,children:[(0,p.Y)(eW.EY,{variant:"subheadBig",multiline:!1,children:"Congratulations!"}),(0,p.Y)(eW.EY,{color:"dimmer",multiline:!1,children:"You just published a new release to the Extensions Store."})]}),(0,p.Y)(eG.S,{py:8,children:(0,p.Y)(gW.q,{showMetadata:!1,extension:et,onClick:function(){c({operation:"open",pane:{type:"extensionStore",data:{page:"cover",coverPageExtensionId:(0,eO.PM)(et.id)}}})}})}),(0,p.FD)(eG.S,{row:!0,gap:8,align:"center",children:[(0,p.Y)(gl.A,{}),(0,p.Y)(eW.EY,{variant:"subheadDefault",multiline:!1,children:"Next steps"}),(0,p.Y)(eG.S,{css:[e_.wp.flex.grow(1),e_.wp.border({color:tH.LU.backgroundHighest,direction:"y"})]})]}),(0,p.FD)(eG.S,{css:[e_.wp.border({color:tH.LU.outlineDimmest}),e_.wp.borderRadius(8)],p:12,gap:8,children:[(0,p.Y)(eW.EY,{variant:"subheadDefault",children:"Install your Extension"}),(0,p.Y)(eW.EY,{color:"dimmer",children:"Once installed, you can use the extension in any of your Apps."}),(0,p.Y)(ez.$n,{text:eI?"Already installed":"Install Extension",colorway:eI?"green":"primary",disabled:eT||!!eI,iconLeft:eU,loading:eT,onClick:(0,H._)(function(){return(0,z.YH)(this,function(e){switch(e.label){case 0:return eP(!0),[4,eL({extensionId:(0,eO.PM)(et.id),replId:null})];case 1:return e.sent(),eP(!1),[2]}})})})]})]}):null]})]})}var gJ=t(90395),gQ=t(36446);function gX(e){var n=e.performPaneOperation,t=(0,d._)((0,h.useState)(0),2),r=t[0],i=t[1];return(0,p.Y)(eG.S,{css:[e_.wp.flex.column,e_.wp.height("100%"),e_.wp.position.relative],children:(0,p.FD)(gJ.tU,{css:[e_.wp.flex.grow(1),e_.wp.flex.column,e_.wp.align.center,e_.wp.display.flex,e_.wp.overflow("hidden")],selectedIndex:r,onSelectionChange:function(e){return i(e)},children:[(0,p.Y)(eD.ui,{css:[e_.wp.top(0),e_.wp.width("100%"),e_.wp.zIndex(1)],align:"center",children:(0,p.FD)(gJ.wb,{css:[e_.wp.align.center,e_.wp.width("100%"),e_.wp.pb(0),e_.wp.maxWidth(mY.R)],children:[(0,p.Y)(gJ.oz,{css:[e_.wp.p(12),e_.wp.height("100%"),e_.wp.borderRadius(0)],iconLeft:(0,p.Y)(cW.A,{}),children:"Home"}),(0,p.Y)(gJ.oz,{css:[e_.wp.p(12),e_.wp.height("100%"),e_.wp.borderRadius(0)],iconLeft:(0,p.Y)(gQ.A,{}),children:"Releases"}),(0,p.Y)(gJ.oz,{css:[e_.wp.p(12),e_.wp.height("100%"),e_.wp.borderRadius(0)],iconLeft:(0,p.Y)(gw.A,{}),children:"Logs"}),(0,p.Y)(eG.S,{css:e_.wp.flex.grow(1)}),(0,p.Y)(eD.ui,{css:[{boxShadow:"inset 0 -1px 0 ".concat(tH.LU.outlineDimmest)}],p:8,children:(0,p.Y)(ez.$n,{text:"Docs",onClick:function(){n({operation:"open",secondary:!0,pane:{type:"docs",data:{url:eN.ik.EXTENSIONS}}})},variant:"outlined",size:"small",iconLeft:(0,p.Y)(u0.A,{}),css:[e_.wp.display.inlineFlex]})})]})}),(0,p.FD)(gJ.T2,{css:[e_.wp.flex.grow(1),e_.wp.align.center,e_.wp.justify.center,e_.wp.width("100%"),e_.wp.display.flex,e_.wp.overflow("hidden")],children:[(0,p.Y)(gJ.Kp,{css:[e_.wp.height("100%"),e_.wp.p(12),e_.wp.maxWidth(mY.R),e_.wp.display.flex,e_.wp.width("100%"),e_.wp.justify.center,e_.wp.overflowY("scroll")],children:(0,p.Y)(gf,{performPaneOperation:n,setSelectedTab:i})}),(0,p.Y)(gJ.Kp,{css:[e_.wp.height("100%"),e_.wp.width("100%"),e_.wp.overflowY("scroll")],children:(0,p.Y)(g$,{performPaneOperation:n})}),(0,p.Y)(gJ.Kp,{css:[e_.wp.height("100%"),e_.wp.width("100%")],children:(0,p.Y)(gS,{})})]})]})})}var g0=n7.ZU.Object({type:n7.ZU.Literal("extensionDevtools")}),g1={Content:function(e){var n=e.options.performPaneOperation;return(0,p.Y)(gX,{performPaneOperation:n})},Icon:function(e){var n=e.size;return(0,p.Y)(tx.A,{size:n})},getTitle:function(){return"Extensions Devtools"},description:"Manage and debug workspace extensions",category:X.bY.WorkspaceExtensions,decode:function(e){return fd.T(g0,e)}},g2=t(15756),g4=t(30186);function g5(e){var n=(0,et.TM)(),t=(0,e4.Sc)(),r=(0,e4.l$)(),i=(0,e4.Ot)(),o=(0,h.useCallback)(function(t,r){if("cover"===t){if(null===r)return void o("store",null);n({paneId:e.paneId,pane:{type:"extensionStore",data:{coverPageExtensionId:null!=r?r:null,page:"cover"}}})}else n({paneId:e.paneId,pane:{type:"extensionStore",data:{page:t}}})},[n,e.paneId]);if("cover"===e.page){var a,l,s,c=null!=(s=null==(l=i.find(function(n){return n.extensionId===e.coverPageExtensionId}))?void 0:l.installationId)?s:null;return(0,p.Y)(g2.G,{existingInstallationId:c,extensionId:e.coverPageExtensionId,goBackToStore:function(){return o("store",null)},installExtension:(0,H._)(function(){var n;return(0,z.YH)(this,function(r){switch(r.label){case 0:return[4,t({extensionId:e.coverPageExtensionId,replId:null})];case 1:if(!(n=r.sent()))throw Error("Failed to install extension");return[2,(0,eO.qq)(n.id)]}})}),uninstallExtension:(a=(0,H._)(function(e){return(0,z.YH)(this,function(n){switch(n.label){case 0:return[4,r({installationId:e,replId:null})];case 1:return n.sent(),[2]}})}),function(e){return a.apply(this,arguments)})})}return(0,p.Y)(g4.A,{storeMode:"pane",openExtensionCover:function(e){return o("cover",e)},setPage:function(e){return o(e,null)},page:e.page})}var g3=n7.ZU.Union([n7.ZU.Object({page:n7.ZU.Union([n7.ZU.Literal("store"),n7.ZU.Literal("manage")])}),n7.ZU.Object({page:n7.ZU.Literal("cover"),coverPageExtensionId:n7.ZU.Unsafe(n7.ZU.String())})]),g6=n7.ZU.Object({type:n7.ZU.Literal("extensionStore"),data:g3}),g8={Content:function(e){return(0,p.Y)(g5,(0,e6._)((0,m._)({},e.pane.data),{paneId:e.options.paneId}))},Icon:function(e){var n=e.size;return(0,p.Y)(tV.Vx.Provider,{value:{color:tH.LU.yellowStronger,size:n},children:(0,p.Y)(tx.A,{})})},getTitle:function(){return"Extension Store"},description:"Find and install workspace extensions",category:X.bY.WorkspaceExtensions,decode:function(e){return fd.T(g6,e)}},g7=t(45485),g9=t(24048),ve=t(35420),vn=(0,eC.x)({container:[e_.wp.width("100%"),e_.wp.maxWidth(640),e_.wp.overflow("auto"),{marginRight:"auto",marginLeft:"auto"}],content:[{backgroundColor:"transparent"}]}),vt={Content:function(){var e,n,t,r,i,o,a,l,s,c,u,f,m=(n=(e=(0,d._)((0,h.useState)(!1),2))[0],t=e[1],r=(0,eB.A)(),o=(i=(0,er.A)()).dotReplit,a=i.fs,l=(0,et.Eq)(),s=(0,g7.g)(),c=(0,P.g)("isLayoutStacked").preferences.isLayoutStacked,u=(0,tb.oR)(),f=(0,et.$P)(),{reset:(0,h.useCallback)((0,H._)(function(){var e;return(0,z.YH)(this,function(n){switch(n.label){case 0:return t(!0),[4,(0,oU.o)({fs:a,dotReplit:o})];case 1:return e=n.sent().entrypoint,t(!0),l({replId:r,isStacked:c,isHTML:s,isExtension:u,isInPopup:f,entrypoint:e}),[2]}})}),[a,o,l,r,c,s,u,f]),resetting:n});return(0,p.Y)(eG.S,{css:vn.container,children:(0,p.Y)(g9.A,{resetLayout:m,css:vn.content})})},Icon:function(e){var n=e.size;return(0,p.Y)(tV.Vx.Provider,{value:{color:tH.LU.greyStrongest,size:n},children:(0,p.Y)(iu.A,{})})},getTitle:function(){return"User Settings"},description:"Configure personal editor preferences and workspace settings which apply to all Apps",category:X.bY.Other,decode:ve.D},vr=t(23721),vi=n7.ZU.Object({type:n7.ZU.Literal("replAuth")}),vo=t(30354),va={Content:vr.A,Icon:function(e){var n=e.size;return(0,p.Y)(tV.Vx.Provider,{value:{color:tH.LU.orangeStrongest,size:n},children:(0,p.Y)(vo.A,{})})},getTitle:function(){return"Authentication"},description:"Let users log in to your App using a prebuilt login page or customize your own button",category:X.bY.CloudServices,decode:function(e){return fd.T(vi,e)}},vl=function(e){var n;null==(n=e.focus)||n.call(e)};function vs(e){var n=e.isValid,t=e.move,r=e.focus,i=void 0===r?vl:r,o=e.wrap,a=void 0!==o&&o,l=e.selector,s=e.boundary,c=(0,h.useRef)(null);return(0,h.useEffect)(function(){if(c.current){var e=c.current,r=function(r){if(!n(r))return;if(l)f=(0,B._)(e.querySelectorAll(l));else{var o;o=e.querySelectorAll('a[href],button,input,textarea,select,details,[tabindex]:not([tabindex="-1"])'),f=(0,B._)(o)}if(0!==f.length){var c,u=document.activeElement;if(e.contains(u)){if(l)if(s){var d=null==u?void 0:u.closest(s),p=null==u?void 0:u.closest(l);u=p||(null==d?void 0:d.querySelector(l))}else u=null==u?void 0:u.closest(l);if(l&&(!u||!e.contains(document.activeElement))){r.preventDefault(),r.stopPropagation();var f,h,m=null==(h=document.activeElement)?void 0:h.querySelector(l);m?i(m):i(f[0]);return}if(!u){r.preventDefault(),r.stopPropagation(),i(f[0]);return}var g=f.findIndex(function(e){return e===u});if(-1===g){r.preventDefault(),r.stopPropagation(),i(f[0]);return}var v=t({event:r,children:f,activeIndex:g,activeElement:u});!a&&(v<0||v>f.length-1)||(i(v<0?f[f.length-1]:v>f.length-1?f[0]:f[v]),r.stopPropagation(),r.preventDefault())}}};return e.addEventListener("keydown",r),function(){e.removeEventListener("keydown",r)}}},[s,n,t,i,c,l,a]),c}var vc=t(92192),vu=(0,eC.x)({queryPill:[e_.wp.display.inline,e_.wp.fontSize(tH.LU.fontSizeDefault)],popover:[{"& > .popover-control-container":e_.wp.mr(0)}]});function vd(e){var n=e.text;return(0,p.Y)(sJ.a,{css:vu.queryPill,text:0===n.length?"":n})}function vp(e){var n=e.query,t=e.replacement,r=e.numMatches,i=e.onCancel,o=e.onConfirm;return(0,p.FD)(eG.S,{gap:24,children:[(0,p.FD)(eW.EY,{children:["Replace ",(0,p.Y)(vd,{text:n})," with ",(0,p.Y)(vd,{text:t})," ","in ",(0,oe.A)("match",r,!0),"?"]}),(0,p.Y)(eW.EY,{children:"This operation cannot be undone!"}),(0,p.FD)(eG.S,{row:!0,gap:12,justify:"end",children:[(0,p.Y)(ez.$n,{onClick:function(){return i()},text:"Cancel"}),(0,p.Y)(ez.$n,{colorway:"negative",onClick:function(){return o()},text:"Yes, replace ".concat((0,oe.A)("match",r,!0)),iconLeft:(0,p.Y)(vc.A,{})})]})]})}function vf(e){var n,t=e.disabled,r=e.loading,i=e.query,o=e.replacement,a=e.results,l=e.replace,s=e.onReplace,c=e.buttonProps,u=(0,d._)((0,h.useState)(!1),2),f=u[0],g=u[1],v=(n=(0,H._)(function(){return(0,z.YH)(this,function(e){switch(e.label){case 0:return g(!1),(0,V.u4)(V.AZ.SEARCH_PANE_USED,{action:"replace"}),[4,l()];case 1:return e.sent().success&&s(),[2]}})}),function(){return n.apply(this,arguments)}),w=(0,h.useMemo)(function(){return a.reduce(function(e,n){return e+n.lines.reduce(function(e,n){return e+n.matches.length},0)},0)},[a]);return(0,p.Y)(eG.S,{css:vu.popover,children:(0,p.FD)(uy.A,{isOpen:f,maxWidth:400,showArrow:!0,children:[(0,p.Y)(ez.$n,(0,e6._)((0,m._)({},c),{text:"Replace all",disabled:t||r,onClick:function(){g(function(e){return!e})}})),(0,p.Y)(vp,{query:i,replacement:o,numMatches:w,onCancel:function(){return g(!1)},onConfirm:v})]})})}var vh=t(64890),vm=(0,eC.x)({self:[e_.wp.position.relative,e_.wp.flex.shrink(1),e_.wp.width("100%")],iconWrapper:[e_.wp.position.absolute,e_.wp.top(0),e_.wp.right(0),e_.wp.height("100%"),e_.wp.p(4)]}),vg=(0,h.forwardRef)(function(e,n){var t,r=e.onClear,i=(0,iB._)(e,["onClear"]);return(0,p.FD)(eG.S,{css:vm.self,children:[(0,p.Y)(vh.O,(0,m._)({ref:n},i)),((null==(t=i.value)?void 0:t.length)||0)>0?(0,p.Y)(eG.S,{css:vm.iconWrapper,children:(0,p.Y)(t7.K0,{alt:"Clear search query",tooltipBehavior:"hidden",onClick:r,css:{"&:hover":{backgroundColor:"".concat(tH.LU.backgroundHighest," !important")}},children:(0,p.Y)(iH.A,{})})}):null]})});vg.displayName="SearchInput";var vv=t(12125),vw=t(42672),vy=t(4880),vb=(0,eC.x)({self:[e_.wp.width("fit-content"),e_.wp.display.inlineBlock,e_.wp.color.accentNegativeDefault,e_.wp.fontWeight.bold]});function vS(e){var n=e.content;return(0,p.Y)(p.FK,{children:n.split("\n").reduce(function(e,n,t){return null===e?[n]:(0,B._)(e).concat([(0,p.Y)(eG.D.span,{css:vb.self,children:"\\n"},"".concat(n,"-").concat(t)),n])},null)})}var vY=t(58969),vA=eG.D.span,vx="SearchMatch",vC=function(e){return e.HIGHLIGHT="highlight",e.REMOVE="remove",e.ADD="add",e.TEXT="text",e}(vC||{});function v_(e){return{outlineColor:e,outlineWidth:"1px",outlineStyle:"solid"}}var vk=(0,eC.x)((s={self:[e_.wp.width("fit-content"),e_.wp.display.inline,e_.wp.cursor.pointer,{"&:focus-visible":[e_.wp.focusRing]},e_.wp.mx(1),e_.wp.px(2),e_.wp.borderRadius(4)]},(0,nt._)(s,"highlight",[e_.wp.backgroundColor.accentPrimaryDimmest,v_(tH.LU.accentPrimaryDimmer)]),(0,nt._)(s,"remove",[e_.wp.backgroundColor.accentNegativeDimmest,v_(tH.LU.accentNegativeDimmer),{textDecoration:"line-through"}]),(0,nt._)(s,"add",[e_.wp.backgroundColor.accentPositiveDimmest,v_(tH.LU.accentPositiveDimmer)]),(0,nt._)(s,"hiddenTextWrapper",[e_.wp.display.inlineBlock,e_.wp.mx(2),{"& > div":[e_.wp.display.inlineBlock],transform:"translateY(12.5%)"}]),(0,nt._)(s,"firstHiddenTextWrapper",[e_.wp.ml(0)]),(0,nt._)(s,"lastHiddenTextWrapper",[e_.wp.mr(0)]),s));function vD(e){var n=e.content,t=e.matches,r=e.dedentBy,i=e.replacement,o=e.isRegex,a=e.query,l=e.onOpenAtPosition;return(0,p.Y)(p.FK,{children:(function(e){for(var n=e.content,t=e.matches,r=e.dedentBy,i=e.replacement,o=[],a=r,l=0;l<t.length;l++){var s=t[l],c=s.start+s.length;o.push({start:a,end:s.start,type:"text"});var u=n.substring(s.start,c);i.length>0&&i!==u?(o.push({start:s.start,end:c,type:"remove"}),o.push({start:-1,end:c,type:"add"})):o.push({start:s.start,end:c,type:"highlight",matchIndex:l}),a=c}return o.push({start:a,end:n.length,type:"text"}),o})({content:n,matches:t,dedentBy:r,replacement:i}).map(function(e,t,r){var s=e.start,c=e.end,u=e.type,d="".concat(s,"-").concat(c),f=c-s;if("text"===u){var m=r[t+1];if(0===t&&f>50)return(0,p.FD)(h.Fragment,{children:[(0,p.Y)(vA,{css:[vk.hiddenTextWrapper,vk.firstHiddenTextWrapper],children:(0,p.Y)(t7.K0,{size:18,alt:"Jump to hidden text",onClick:function(){l(c-50)},children:(0,p.Y)(vY.A,{})})},d),(0,p.Y)("span",{children:n.substring(c-50,c)})]},d);if(t===r.length-1&&f>50)return(0,p.FD)(h.Fragment,{children:[(0,p.Y)("span",{children:n.substring(s,s+50)}),(0,p.Y)(vA,{css:[vk.hiddenTextWrapper,vk.lastHiddenTextWrapper],children:(0,p.Y)(t7.K0,{size:18,alt:"Jump to hidden text",onClick:function(){l(s+50)},children:(0,p.Y)(vY.A,{})})},d)]},d);if(m&&f>100)return(0,p.FD)(h.Fragment,{children:[(0,p.Y)("span",{children:n.substring(s,s+50)}),(0,p.Y)(vA,{css:vk.hiddenTextWrapper,children:(0,p.Y)(t7.K0,{size:18,alt:"Jump to hidden text",onClick:function(){l(s+50)},children:(0,p.Y)(vY.A,{})})},d),(0,p.Y)("span",{children:n.substring(c-50,c)})]},d)}var g=-1===s?i:n.substring(s,c);if("text"===u)return(0,p.Y)(h.Fragment,{children:g},d);var v=null,w=r[t-1];return"add"===u&&(null==w?void 0:w.type)==="remove"&&(v=n.substring(w.start,w.end)),(0,p.Y)(vE,{content:g,type:u,isRegex:o,query:a,replacement:i,removedText:v,onClick:function(e){e.stopPropagation(),l(c)}},d)})})}function vE(e){var n=e.content,t=e.type,r=e.isRegex,i=e.replacement,o=e.query,a=e.removedText,l=(0,iB._)(e,["content","type","isRegex","replacement","query","removedText"]),s=n,c=void 0;switch(t){case"highlight":c="Matched text ".concat(s);break;case"remove":c="Removed text ".concat(s);break;case"add":if(c="Added text ".concat(s),r&&null!==a)try{s=a.replace(new RegExp(o),i.replaceAll(/\$[&`']/g,"$$$&"))}catch(e){}}return(0,p.Y)(eG.D.span,(0,e6._)((0,m._)({css:[vk.self,vk[t]],tabIndex:0,"aria-label":c,role:"button","data-nav":vx},l),{children:"add"===t?(0,p.Y)(vS,{content:s}):s}))}var vR=(0,eC.x)({self:[e_.wp.width("100%"),e_.wp.flex.wrap],text:[e_.wp.display.block,e_.wp.textAlign.center,{overflow:"visible",whiteSpace:"normal"}]});function vI(e){var n=e.error;return(0,p.FD)(eG.S,{css:vR.self,pt:8,pb:8,row:!0,gap:4,align:"center",justify:"center",children:[(0,p.Y)(sm.A,{}),(0,p.Y)(eW.EY,{css:vR.text,multiline:!1,children:n})]})}var vF=t(36787),vT=t(93791),vP="SearchLine",vL="--search-line-number-width",vU=(0,eC.x)({self:[e_.wp.overflow("hidden"),e_.wp.cursor.pointer,e_.wp.borderRadius(4),{"&:focus-visible":[e_.wp.focusRing],"&:hover, &:focus-visible":[e_.wp.backgroundColor.backgroundHighest]}],content:[e_.wp.font.code,e_.wp.maxWidth("100%"),e_.wp.width("fit-content"),{whiteSpace:"pre-wrap",overflowWrap:"break-word"}],lineNumberWrapper:[e_.wp.display.inlineBlock,e_.wp.color.foregroundDimmest,e_.wp.mr(8),e_.wp.pl(8)],lineNumber:[e_.wp.display.inlineBlock,e_.wp.textAlign.right,{width:"var(".concat(vL,")")}]});function vN(e){var n=e.lineNumber,t=e.content,r=e.matches,i=e.path,o=e.dedentBy,a=e.onFileLineClicked,l=(0,iB._)(e,["lineNumber","content","matches","path","dedentBy","onFileLineClicked"]),s=(0,L.A)(function(){return function(e){(0,V.u4)(V.AZ.SEARCH_PANE_RESULT_CLICKED,(0,m._)({},l)),a({path:i,lineNumber:n,columnNumber:e})}},[n,l,i,a]),c=(0,L.A)(function(){return function(){var e=r.length>0?r[0]:null;s(e?e.start+e.length:0)}},[r,s]);return(0,p.FD)(eG.S,{tabIndex:0,css:vU.self,row:!0,gap:8,align:"stretch","data-nav":vP,onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),c())},onClick:c,children:[(0,p.Y)(eG.S,{css:vU.lineNumberWrapper,children:(0,p.Y)(eG.S,{tag:"span",css:vU.lineNumber,"aria-label":"Line ".concat(n),children:n})}),(0,p.Y)("pre",{css:vU.content,children:(0,p.Y)(vD,{isRegex:l.isRegex,content:t,matches:r,dedentBy:o,query:l.query,replacement:l.replacement,onOpenAtPosition:s})})]})}var vO="SearchFileNav",vM="SearchFileHeaderNav",vB="SearchQueryNav",vH="SearchQueryTogglesNav",vz=parseInt(tH.zu.space24,10)+10,vW=(0,eC.x)({header:[e_.wp.rowWithGap(4),e_.wp.align.center,e_.wp.rowWithGap(6),e_.wp.flex.growAndShrink(1),e_.wp.overflow("hidden")],headerParentPathText:[e_.wp.flex.shrink(1e7)],headerFileNameText:[e_.wp.flex.shrink(1)],headerMatchesCountPill:[e_.wp.height(20),e_.wp.flex.shrink(0)],accordionWrapper:[e_.wp.mx(4),e_.wp.border({direction:"top",color:tH.LU.outlineDimmest})],accordionChildren:[e_.wp.p(4)],linesWrapper:[e_.wp.overflow("hidden"),e_.wp.borderRadius(4),e_.wp.font.code]});function vG(e){var n=e.path,t=e.lines,r=e.dedentBy,i=e.isFirst,o=e.expanded,a=e.onClick,l=e.scrollOffset,s=e.onFileLineClicked,c=e.searchResultBackgroundColor,u=(0,iB._)(e,["path","lines","dedentBy","isFirst","expanded","onClick","scrollOffset","onFileLineClicked","searchResultBackgroundColor"]),d=(0,P.g)("fontSize").preferences.fontSize,f=(0,h.useRef)(null),g=(0,L.A)(function(){return t.reduce(function(e,n){return e+n.matches.length},0)},[t]),v=(0,L.A)(function(){var e=t[t.length-1];if(!e)return{};var n=(0,vT.V)(e.lineNumber),r=(0,vF.s)(d);return(0,nt._)({fontSize:d,lineHeight:r},vL,"".concat(n,"ch"))},[t,d]);return(0,p.Y)(eD.ui,{css:vW.accordionWrapper,style:v,"data-nav":vO,innerRef:f,children:(0,p.Y)(hP.A,{expanded:void 0===o||o,onClick:function(){a(f.current)},headerProps:{"data-nav":"".concat(vM," ").concat(vP," ").concat(i?"".concat(vB," ").concat(vH):""),style:{position:"sticky",zIndex:1,insetBlockStart:"-".concat(void 0===l?0:l,"px"),borderRadius:0,backgroundColor:c}},headerContent:(0,p.FD)(eG.S,{css:vW.header,children:[(0,p.Y)(ef.A,{path:n,size:16}),(0,p.Y)(eW.EY,{css:vW.headerFileNameText,multiline:!1,children:(0,ts.WP)(n)}),(0,p.Y)(eW.EY,{color:"dimmest",css:vW.headerParentPathText,multiline:!1,children:(0,ts._6)(n).replace(/^\.\//,"")}),(0,p.Y)(sJ.a,{variant:"muted",text:"".concat(g," ").concat((0,oe.A)("match",g)),css:vW.headerMatchesCountPill})]}),children:(0,p.Y)(eG.S,{css:vW.accordionChildren,children:(0,p.Y)(eG.S,{css:vW.linesWrapper,children:t.map(function(e){return(0,p.Y)(vN,(0,e6._)((0,m._)({},e,u),{path:n,dedentBy:r,onFileLineClicked:s}),e.lineNumber)})})})})})}var vV=t(49888),vj=(0,eC.x)({container:[e_.wp.border({direction:"bottom",color:tH.LU.outlineDimmest})],actions:[e_.wp.display.flex,e_.wp.rowWithGap(4)]});function vZ(e){var n="collapse"===e.collapseExpandAllState;return(0,p.FD)(eG.S,{css:vj.container,p:4,row:!0,align:"center",justify:"space-between",children:[(0,p.FD)(eW.EY,{color:"dimmer",children:[e.totalCount," results in ",(0,oe.A)("file",e.fileCount,!0)]}),(0,p.FD)(eG.S,{css:vj.actions,children:[(0,p.Y)(t7.K0,{alt:"Open New Search",onClick:e.onStartNewSearch,children:(0,p.Y)(rr.A,{})}),(0,p.Y)(t7.K0,{alt:n?"Collapse All":"Expand All",onClick:e.onToggleCollapseExpandAll,children:n?(0,p.Y)(t9.A,{}):(0,p.Y)(vV.A,{})})]})]})}var vq=t(40822),vK=(0,tB.i7)({from:{opacity:0},to:{opacity:1}}),v$=(0,eC.x)({listWrapper:[e_.wp.overflowY("auto"),e_.wp.flex.grow(1),{contain:"strict"}],list:[e_.wp.width("100%"),e_.wp.position.relative],listItem:[e_.wp.position.absolute,e_.wp.top(0),e_.wp.left(0),e_.wp.width("100%")],resultRow:[{animation:"".concat(vK," 120ms linear forwards")}]});function vJ(e){var n,t,r,i,o,a,l,s,c,u,f=e.results,g=e.error,v=e.paneRef,w=e.onFileLineClicked,y=e.onOpenSearchPane,b=e.searchResultBackgroundColor,S=(0,iB._)(e,["results","error","paneRef","onFileLineClicked","onOpenSearchPane","searchResultBackgroundColor"]),Y=(0,L.A)(function(){return f.filter(function(e){return e.lines.length>0})},[f]),A=(0,L.A)(function(){return Y.reduce(function(e,n){return e+n.lines.reduce(function(e,n){return e+n.matches.length},0)},0)},[Y]),x=(0,d._)((0,h.useState)({}),2),C=x[0],_=x[1],k=(0,h.useRef)(null),D=(0,vy.Te)({count:Y.length,getScrollElement:function(){return k.current},estimateSize:function(e){var n;return function(e,n){var t=e.length;if(n)for(var r=n-24,i=0;i<e.length;i++){var o=e[i],a=9*(0,vT.V)(i)+9*o.content.length+4*o.matches.length;a>r&&(t+=Math.floor(r/a)+1)}return vz+20+24.39*t+2*t}(Y[e].lines,null==v||null==(n=v.current)?void 0:n.offsetWidth)},overscan:3}),E=D.getVirtualItems(),R=(0,h.useRef)(null),I=(0,h.useCallback)(function(e){var n=k.current;if(n&&R.current!==e){if(e.matches('[data-nav*="'.concat(vM,'"]')))return void e.focus();var t=e.closest('[data-nav="'.concat(vO,'"]')),r=null==t?void 0:t.querySelector('[data-nav*="'.concat(vM,'"]'));if(!r)return void e.focus();var i=r.getBoundingClientRect();if(r.offsetTop+i.height>e.offsetTop){var o=e.offsetTop-i.height;R.current=e;var a=function(){n.scrollTop===o&&(n.removeEventListener("scroll",a),R.current===e&&(e.focus(),R.current=null))};n.addEventListener("scroll",a),n.scrollTo({top:o})}else e.focus()}},[]),F=(n={selector:'[data-nav*="'.concat(vM,'"]'),boundary:'[data-nav*="'.concat(vO,'"]')},t=(0,h.useCallback)(function(e){return"Tab"===e.key},[]),r=(0,h.useCallback)(function(e){var n=e.event,t=e.activeIndex;return n.shiftKey?t-1:t+1},[]),vs((0,e6._)((0,m._)({},n),{isValid:t,move:r}))),T=(i={selector:'[data-nav*="'.concat(vP,'"]'),focus:I},o=(0,h.useCallback)(function(e){return"ArrowUp"===e.key||"ArrowDown"===e.key},[]),a=(0,h.useCallback)(function(e){var n=e.event,t=e.activeIndex;return"ArrowUp"===n.key?t-1:t+1},[]),vs((0,e6._)((0,m._)({},i),{isValid:o,move:a}))),P=(l={selector:'[data-nav*="'.concat(vx,'"]'),focus:I},s=(0,h.useCallback)(function(e){return"ArrowLeft"===e.key||"ArrowRight"===e.key},[]),c=(0,h.useCallback)(function(e){var n=e.event,t=e.activeIndex;return"ArrowLeft"===n.key?t-1:t+1},[]),vs((0,e6._)((0,m._)({},l),{isValid:s,move:c}))),U=(0,vw.P)(F,T,P),N=(0,L.A)(function(){return Y.length===Object.keys(C).length&&Object.values(C).every(Boolean)},[C,Y.length]),O=null;return Y.length>0?O=(0,p.FD)(p.FK,{children:[(0,p.Y)(vZ,{fileCount:Y.length,totalCount:A,collapseExpandAllState:N?"expand":"collapse",onToggleCollapseExpandAll:function(){N?_({}):_(Y.reduce(function(e,n){return(0,e6._)((0,m._)({},e),(0,nt._)({},n.path,!0))},{}))},onStartNewSearch:y}),(0,p.Y)(eG.D.div,{ref:k,css:v$.listWrapper,children:(0,p.Y)(eG.S,{css:v$.list,style:{height:D.getTotalSize()},children:(0,p.Y)(eG.S,{css:v$.listItem,style:{transform:"translateY(".concat(null==(u=E[0])?void 0:u.start,"px)")},innerRef:U,children:E.map(function(e){var n,t=Y[e.index],r=t.path;return(0,p.Y)(eG.D.div,{"data-index":e.index,ref:D.measureElement,css:v$.resultRow,children:(0,p.Y)(vG,(0,e6._)((0,m._)({},t,S),{scrollOffset:null==(n=E[0])?void 0:n.start,onFileLineClicked:w,isFirst:0===e.index,expanded:!0!==C[r],searchResultBackgroundColor:b,onClick:function(e){if(_(function(e){return(0,e6._)((0,m._)({},e),(0,nt._)({},r,!(r in e)||!e[r]))}),k.current&&e){var n,t,i=Math.floor(null!=(t=null==(n=E[0])?void 0:n.start)?t:0),o=Math.floor(k.current.scrollTop),a=e.offsetTop+i;a>o||k.current.scrollTo({top:a-1})}}}))},e.key.toString())})})})})]}):g===vq.F.EMPTY_RESULTS&&(O=(0,p.Y)(f0.A,{pane:{type:"searchReplace"},headerText:g})),(0,p.FD)(p.FK,{children:[g&&g!==vq.F.EMPTY_RESULTS?(0,p.Y)(vI,{error:g}):null,O]})}var vQ=t(94707);function vX(e){return(0,h.useMemo)(function(){return(0,B._)((0,vQ.l0)(e,",")).map(function(e){return e.trim()}).filter(function(e){return e.length>0})},[e])}var v0=function(e){return e.QUERY_EMPTY="The query is empty",e.QUERY_SAME="The query is the same as replacement",e.NO_MATCHES="No matches were found to replace",e.RG_EMPTY="Ripgrep didn't return a response",e.NOT_MOUNTED="Component wasn't mounted",e}({}),v1=t(49381);function v2(){return(v2=(0,H._)(function(e){var n,t,r,i,o,a,l,s,c;return(0,z.YH)(this,function(u){switch(u.label){case 0:if(t=e.container,r=e.fileList,0===(i=(0,iB._)(e,["container","fileList"])).query.length)return[2,{success:!1,errorOn:"exit",errorMessage:v0.QUERY_EMPTY}];if(i.query===i.replacement)return[2,{success:!1,errorOn:"exit",errorMessage:v0.QUERY_SAME}];if(!(r&&r.length>0))return[3,1];return o=r,[3,3];case 1:return[4,(a=t).exec.apply(a,(0,B._)((0,v1.Qq)((0,e6._)((0,m._)({},i),{context:1,mode:"files"}))))];case 2:if((s=u.sent()).error)return[2,{success:!1,errorOn:"rg",errorMessage:"exit status 1"===s.error?v0.NO_MATCHES:s.error}];o=(null==(l=s.output)?void 0:l.split("\n").filter(function(e){return e.trim().length>0}))||[],u.label=3;case 3:var d,p,f,h,g,v,w,y;if(0===o.length)return[2,{success:!1,errorOn:"rg",errorMessage:v0.NO_MATCHES}];return[4,(n=t).exec.apply(n,(0,B._)((p=(d=i).replacement,f=d.query,h=d.isRegex,g=d.isCaseSensitive,v=d.isMatchingWholeWords,w=["sd"],y=[f.indexOf("\n")>=0?"m":"e",g?"c":"i"],v&&y.push("w"),w.push("--flags",y.join("")),!h&&w.push("--string-mode"),f.startsWith("-")&&(f="\\"+f),w.push(f,p),w)).concat((0,B._)(o)))];case 4:if((c=u.sent()).error)return[2,{success:!1,errorOn:"sd",errorMessage:c.error}];return[2,{success:!0}]}})})).apply(this,arguments)}var v4=t(87443),v5=t(29069),v3=t(18895),v6=t(32941),v8=t(851),v7=t(99034),v9="SearchQueryControlsNav",we="SearchQueryExcludeNav",wn="SearchQueryControlsColumnNav",wt=(0,tB.i7)({from:{transform:"scaleX(0)"},to:{transform:"scaleX(0.9)"}}),wr=e_.kL.min(360),wi=(0,eC.x)({self:[e_.wp.height("100%"),e_.wp.width("100%"),e_.wp.overflow("hidden"),e_.wp.px(4),e_.wp.container()],filesIncludeExcludeWrapper:[e_.wp.mt(6),e_.wp.border({direction:"top",color:tH.LU.outlineDimmest}),(0,nt._)({},wr,[e_.wp.rowWithGap(6),e_.wp.align.start,e_.wp.mt(0),{border:"none"}])],inputWithLabel:[e_.wp.flex.growAndShrink(1),e_.wp.colWithGap(1)],inputLabelText:[{userSelect:"none"},e_.wp.color.foregroundDimmest,e_.wp.truncate,{fontSize:tH.LU.fontSizeSmall}],inputLabel:[e_.wp.flex.shrink(1),e_.wp.m(0),{lineHeight:1}],input:[e_.wp.viewStyle,e_.wp.border(),{blockSize:tH.LU.space32,"::placeholder":{color:tH.LU.foregroundDimmest},"&:hover::placeholder":{color:tH.LU.foregroundDimmer},"&:focus::placeholder, &:hover:focus::placeholder":{color:tH.LU.foregroundDimmest},":not([disabled])":{cursor:"text",":focus":{boxShadow:"none"}}}],optionsWrapper:[e_.wp.rowWithGap(2),e_.wp.align.center,(0,nt._)({order:2},wr,[{order:1," > *":e_.wp.height("100%")}])],closeWrapper:[(0,nt._)({order:1},wr,{order:2," > *":e_.wp.height("100%")})],results:[e_.wp.position.relative,{flex:"1 1 auto"}],searchWrapper:[{flex:"0 1 auto"}],expandCollapseButton:[e_.wp.height(32)],searchInputAndOptionsWrapper:(0,nt._)({flex:1,display:"grid",gap:4,gridTemplateColumns:"1fr max-content"},wr,{gridTemplateColumns:"1fr max-content max-content"}),replacementWrapper:[e_.wp.ml(24),e_.wp.pl(4),e_.wp.pb(6)],replaceInputWrapper:[e_.wp.border({direction:"top",color:tH.LU.outlineDimmest}),(0,nt._)({},wr,[e_.wp.rowWithGap(4),e_.wp.pt(0),e_.wp.align.center,{border:"none"}])],loadingBar:[e_.wp.position.absolute,e_.wp.mt(2),e_.wp.height(1),e_.wp.borderRadius(2),e_.wp.width("100%"),e_.wp.backgroundColor.accentPrimaryDimmer,{animation:"".concat(wt," 20s 1s ease forwards"),transformOrigin:"center left",transform:"scaleX(0)"}]});function wo(e){var n=e.updateData,t=e.query,r=e.setQuery,i=e.isRegex,o=e.setIsRegex,a=e.isCaseSensitive,l=e.setIsCaseSensitive,s=e.isMatchingWholeWords,c=e.setIsMatchingWholeWords,u=e.isCollapsed,d=e.setIsCollapsed,f=e.executeSearch,h=e.searchInputRef,m=e.onCloseRequested;return(0,p.FD)(eG.S,{css:wi.searchWrapper,pb:4,row:!0,gap:4,children:[(0,p.Y)(t7.K0,{onClick:function(){return d(function(e){return!e})},alt:u?"Show replacement options":"Hide replacement options",css:wi.expandCollapseButton,children:u?(0,p.Y)(lG.A,{}):(0,p.Y)(as.A,{})}),(0,p.FD)(eG.S,{css:wi.searchInputAndOptionsWrapper,children:[(0,p.Y)(vg,{"data-nav":"".concat(vB," ").concat(v9),ref:h,autoSize:!0,placeholder:"Search",value:t,css:wi.input,onChange:function(e){r(e),n({initialQuery:e})},onClear:function(){r(""),n({initialQuery:""})},onKeyDown:function(e){"Enter"!==e.key||(0,rp.T$)(e)||e.shiftKey||(e.preventDefault(),e.stopPropagation(),f())}}),(0,p.FD)(eG.S,{css:wi.optionsWrapper,children:[(0,p.Y)(vv.A,{alt:"case sensitive","data-nav":"".concat(v9," ").concat(wn),icon:(0,p.Y)(v6.A,{}),checked:a,onClick:function(){return l(function(e){return!e})}}),(0,p.Y)(vv.A,{alt:"regular expressions","data-nav":"".concat(v9," ").concat(wn),icon:(0,p.Y)(v8.A,{}),checked:i,onClick:function(){return o(function(e){return!e})}}),(0,p.Y)(vv.A,{alt:"whole words","data-nav":"".concat(v9," ").concat(wn),icon:(0,p.Y)(v7.A,{}),checked:s,onClick:function(){return c(function(e){return!e})}})]}),(0,p.Y)(eG.S,{css:wi.closeWrapper,row:!0,gap:2,align:"center",children:m?(0,p.Y)(t7.K0,{onClick:m,alt:"Close",children:(0,p.Y)(iH.A,{})}):null})]})]})}function wa(e){var n=e.updateData,t=e.replacement,r=e.setReplacement,i=e.query,o=e.replaceLoading,a=e.search,l=e.includeGlob,s=e.setIncludeGlob,c=e.excludeGlob,u=e.setExcludeGlob,d=e.replace,f=e.results;return(0,p.FD)(eG.S,{css:wi.replacementWrapper,children:[(0,p.FD)(eG.S,{css:wi.replaceInputWrapper,pt:8,gap:6,children:[(0,p.Y)(vg,{"data-nav":"".concat(vB," ").concat(v9," ").concat(we),autoSize:!0,placeholder:"Replacement",value:t,css:wi.input,onChange:function(e){r(e),n({initialReplacement:e})},onClear:function(){r(""),n({initialReplacement:""})}}),(0,p.Y)(eG.S,{css:wi.optionsWrapper,children:(0,p.Y)(vf,{query:i,replacement:t,results:f,disabled:0===i.length,loading:o,replace:d,onReplace:a,buttonProps:{"data-nav":"".concat(v9," ").concat(vH," ").concat(wn)}})})]}),(0,p.FD)(eG.S,{css:wi.filesIncludeExcludeWrapper,pt:8,gap:8,children:[(0,p.FD)(eG.S,{css:wi.inputWithLabel,id:"filesToInclude",children:[(0,p.Y)("label",{htmlFor:"filesToIncludeInput",css:wi.inputLabel,children:(0,p.Y)(eW.EY,{css:wi.inputLabelText,color:"dimmer",multiline:!1,children:"Files to include"})}),(0,p.Y)(vg,{id:"filesToIncludeInput","data-nav":"".concat(vB," ").concat(v9),autoSize:!0,value:l,css:wi.input,placeholder:"e.g. **.js, src/**, app/",onChange:function(e){s(e),n({initialIncludeGlob:e})},onClear:function(){s(""),n({initialIncludeGlob:""})}})]}),(0,p.FD)(eG.S,{css:wi.inputWithLabel,id:"filesToExclude",children:[(0,p.Y)("label",{htmlFor:"filesToExcludeInput",css:wi.inputLabel,children:(0,p.Y)(eW.EY,{css:wi.inputLabelText,color:"dimmer",multiline:!1,children:"Files to exclude"})}),(0,p.Y)(vg,{id:"filesToExcludeInput","data-nav":"".concat(v9," ").concat(we),autoSize:!0,value:c,css:wi.input,onChange:function(e){u(e),n({initialExcludeGlob:e})},onClear:function(){u(""),n({initialExcludeGlob:""})}})]})]})]})}function wl(e){var n,t,r,i,o,a,l,s,c,u,f,g,v,w,y,b,S,Y,A,x,C,k,D,E,R,I,F,T,P,U,N,O,M,W,G,j,Z,q,K,$,J,Q=e.isActive,X=e.initialQuery,ee=void 0===X?"":X,en=e.initialReplacement,et=void 0===en?"":en,ei=e.initialIncludeGlob,eo=void 0===ei?"":ei,ea=e.initialExcludeGlob,el=void 0===ea?"":ea,es=e.searchInputRef,ec=e.onDataChanged,eu=e.onFileLineClicked,ed=e.onOpenSearchPane,ep=e.onCloseRequested,ef=e.searchResultBackgroundColor,eh=(0,d._)((0,h.useState)(ee),2),em=eh[0],eg=eh[1],ev=(0,d._)((0,h.useState)(et),2),ew=ev[0],ey=ev[1],eb=(0,d._)((0,h.useState)(!1),2),eS=eb[0],eY=eb[1],eA=(0,d._)((0,h.useState)(!1),2),ex=eA[0],eC=eA[1],e_=(0,d._)((0,h.useState)(!1),2),ek=e_[0],eD=e_[1],eE=(0,d._)((0,h.useState)(!0),2),eR=eE[0],eI=eE[1],eF=(0,d._)((0,h.useState)(el),2),eT=eF[0],eP=eF[1],eL=(0,d._)((0,h.useState)(eo),2),eU=eL[0],eN=eL[1],eO=vX(eT),eM=vX(eU),eB=(0,h.useRef)(null),eH=(t=(n={query:em,isRegex:eS,isCaseSensitive:ex,isMatchingWholeWords:ek,excludeGlobs:eO,includeGlobs:eM}).query,r=n.isRegex,i=n.isCaseSensitive,o=n.isMatchingWholeWords,l=void 0===(a=n.includeGlobs)?[]:a,c=void 0===(s=n.excludeGlobs)?[]:s,f=(u=(0,er.A)()).container,g=u.dotReplit,v=(0,v5.o)(g),w=(0,_._P)({controlName:"flag-code-search-latency-metrics",logFlagToAnalytics:!1}),b=(y=(0,d._)((0,h.useState)([]),2))[0],S=y[1],A=(Y=(0,d._)((0,h.useState)(null),2))[0],x=Y[1],k=(C=(0,d._)((0,h.useState)(t.length>0),2))[0],D=C[1],E=(0,L.A)(function(){return(0,B._)(c).concat((0,B._)(v||[]),(0,B._)(v4.TJ))},[c,v]),R=f.getConnectionState(),I=(0,h.useMemo)(function(){return(0,v3.A)({container:f,onError:function(e){return x(e)},onUpdate:function(e){return S(e)},onLoadingStateChange:function(e){return D(e)},isStreaming:!0,trackLatency:w})},[]),(0,h.useEffect)(function(){R===e8.KN.CONNECTED&&I({query:t,isRegex:r,isCaseSensitive:i,isMatchingWholeWords:o,includeGlobs:l,excludeGlobs:E})},[R,I,t,r,i,o,l,E,v]),{loading:k,error:A,data:b,search:function(){return I({query:t,isRegex:r,isCaseSensitive:i,isMatchingWholeWords:o,includeGlobs:l,excludeGlobs:E})}}),ez=eH.loading,eW=eH.error,eV=eH.data,ej=eH.search;(0,l_.A)(function(){""!==em&&(0,V.u4)(V.AZ.SEARCH_PANE_USED,{action:"search",isRegex:eS,isCaseSensitive:ex,hasIncludes:eM.length>0,hasExcludes:eO.length>0})},[em,eM,eO,eS,ex],1e3);var eZ=(T=(F={replacement:ew,query:em,isRegex:eS,isCaseSensitive:ex,isMatchingWholeWords:ek,excludeGlobs:eO,includeGlobs:eM,fileList:eW?void 0:eV}).query,P=F.replacement,U=F.fileList,N=(0,iB._)(F,["query","replacement","fileList"]),O=(0,er.A)().container,W=(M=(0,d._)((0,h.useState)(!1),2))[0],G=M[1],Z=(j=(0,d._)((0,h.useState)(null),2))[0],q=j[1],$=(K=(0,d._)((0,h.useState)(!1),2))[0],J=K[1],{replace:(0,h.useCallback)((0,H._)(function(){var e;return(0,z.YH)(this,function(n){switch(n.label){case 0:return J(!0),q(null),[4,function(e){return v2.apply(this,arguments)}((0,m._)({container:O,query:T,replacement:P,fileList:null==U?void 0:U.map(function(e){return e.path})},N))];case 1:return(e=n.sent()).success||q(e.errorMessage),J(!1),G(e.success),[2,e]}})}),[O,T,P,U,N]),loading:$,error:Z,data:W}),eq=eZ.loading,eK=eZ.replace,e$=(0,h.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};null==ec||ec({initialQuery:em,initialReplacement:ew,initialIncludeGlob:eU,initialExcludeGlob:eT},e)},[ec,em,ew,eT,eU]);(0,h.useLayoutEffect)(function(){eg(ee),ey(et),eN(eo),eP(el)},[ee,et,eo,el]);var eJ=vs({selector:'[data-nav*="'.concat(vB,'"]'),isValid:function(e){var n="ArrowUp"===e.key||"ArrowDown"===e.key,t=e.target.matches('[data-nav*="'.concat(vB,'"]')),r=e.target.matches("[data-nav*=".concat(vM,"]"));return n&&t&&(e.altKey||r)},move:function(e){var n=e.event,t=e.activeIndex;return n.preventDefault(),n.stopPropagation(),"ArrowUp"===n.key?t-1:t+1}}),eQ=vs({selector:'[data-nav*="'.concat(vH,'"]'),isValid:function(e){var n="ArrowUp"===e.key||"ArrowDown"===e.key,t=e.target.matches('[data-nav*="'.concat(vH,'"]')),r=e.target.matches("[data-nav*=".concat(vM,"]"));return n&&t&&!r},move:function(e){var n=e.event,t=e.activeIndex;return n.preventDefault(),n.stopPropagation(),"ArrowUp"===n.key?t-1:t+1}}),eX=vs({selector:'[data-nav*="'.concat(wn,'"]'),isValid:function(e){var n="ArrowUp"===e.key||"ArrowDown"===e.key;if(e.target.matches('[data-nav*="'.concat(vH,'"]'))&&"ArrowDown"===e.key)return!1;var t=e.target.matches('[data-nav*="'.concat(wn,'"]'));return n&&t},move:function(e){var n=e.event,t=e.activeIndex,r=e.children,i=n.target.matches('[data-nav*="'.concat(vH,'"]'));return(n.preventDefault(),n.stopPropagation(),i)?0:0===t&&"ArrowUp"===n.key?-1:r.length-1}}),e0=vs({selector:'[data-nav*="'.concat(we,'"]'),isValid:function(e){var n="ArrowUp"===e.key||"ArrowDown"===e.key,t=e.target.matches('[data-nav*="'.concat(we,'"]')),r=e.target.matches("[data-nav*=".concat(vB,"]"));return n&&e.altKey&&t&&!r},move:function(e){var n=e.event,t=e.activeIndex;return n.preventDefault(),n.stopPropagation(),"ArrowUp"===n.key?t-1:t+1}}),e1=vs({selector:'[data-nav*="'.concat(v9,'"]'),isValid:function(e){var n="ArrowLeft"===e.key||"ArrowRight"===e.key,t=e.target.matches('[data-nav*="'.concat(wn,'"]'));return n&&(e.altKey||t)},move:function(e){var n=e.event,t=e.activeIndex;return n.preventDefault(),n.stopPropagation(),"ArrowLeft"===n.key?t-1:t+1}}),e2=(0,e9.S)([eJ,eQ,eX,e0,e1],{breadcrumb:"client/workspace/components/SearchReplace/index.tsx:661"}),e4=(0,h.useCallback)(function(e){"Escape"===e.key&&(null==ep||ep())},[ep]);return(0,p.FD)(eG.S,{css:wi.self,innerRef:e2,onKeyDown:e4,children:[(0,p.Y)(wo,{isActive:Q,query:em,setQuery:eg,updateData:e$,isRegex:eS,isCaseSensitive:ex,isMatchingWholeWords:ek,setIsRegex:eY,setIsCaseSensitive:eC,setIsMatchingWholeWords:eD,isCollapsed:eR,setIsCollapsed:eI,executeSearch:ej,searchInputRef:es,onCloseRequested:ep}),eR?null:(0,p.Y)(wa,{replacement:ew,setReplacement:ey,updateData:e$,query:em,replaceLoading:eq,search:ej,includeGlob:eU,setIncludeGlob:eN,excludeGlob:eT,setExcludeGlob:eP,replace:eK,results:eV}),(0,p.FD)(eG.S,{css:wi.results,children:[ez?(0,p.Y)(eG.S,{css:wi.loadingBar},em):null,0===em.length&&0===eV.length?(0,p.Y)(f0.A,{pane:{type:"searchReplace"},bodyText:"Enter a search query above to see results."}):(0,p.Y)(vJ,{isRegex:eS,query:em,replacement:ew,include:eU,exclude:eT,results:eV,error:eW,paneRef:eB,onOpenSearchPane:ed,onFileLineClicked:eu,searchResultBackgroundColor:ef})]})]})}var ws=n7.ZU.Object({type:n7.ZU.Literal("searchReplace"),data:n7.ZU.Optional(n7.ZU.Object({initialQuery:n7.ZU.Optional(n7.ZU.String()),initialReplacement:n7.ZU.Optional(n7.ZU.String()),initialIncludeGlob:n7.ZU.Optional(n7.ZU.String()),initialExcludeGlob:n7.ZU.Optional(n7.ZU.String())}))}),wc={Content:function(e){var n=e.pane,t=e.options;return(0,p.Y)(wd,{paneData:(null==n?void 0:n.data)||{},isActive:t.isActive,performPaneOperation:t.performPaneOperation})},Icon:function(e){var n=e.size;return(0,p.Y)(ee.A,{size:n})},getTitle:function(e){var n,t=null==e||null==(n=e.data)?void 0:n.initialQuery;return t&&t.length>0?"Code Search: ".concat(t):"Code Search"},description:"Search through the text contents of your App",category:X.bY.WorkspaceFeatures,decode:function(e){return fd.T(ws,e)}},wu=(0,eC.x)({wrapper:[e_.wp.height("100%"),e_.wp.width("100%")]});function wd(e){var n=e.paneData,t=e.isActive,r=e.performPaneOperation,i=(0,h.useRef)(null),o=(0,h.useCallback)(function(){var e,n;null==(e=i.current)||e.select(),null==(n=i.current)||n.focus()},[]);(0,eu.Qt)(function(){return{type:"searchReplace",focusSearchInput:o}},[o]),(0,eu.HP)(function(){return{focus:o}},[o]);var a=(0,h.useCallback)(function(e){r({operation:"open",pane:{type:"codeEditor",data:{path:e.path,line:e.lineNumber,col:e.columnNumber}},secondary:!0})},[r]),l=(0,h.useCallback)(function(){r({operation:"commit"}),r({operation:"open",pane:{type:"searchReplace"}})},[r]),s=(0,h.useCallback)(function(e,n){r({operation:"replace",pane:{type:"searchReplace",data:(0,m._)({},e,n)}})},[r]);return(0,p.Y)(eG.S,{css:wu.wrapper,pt:6,children:(0,p.Y)(wl,(0,e6._)((0,m._)({},n),{isActive:t,searchInputRef:i,onFileLineClicked:a,onOpenSearchPane:l,onDataChanged:s,searchResultBackgroundColor:tH.LU.backgroundDefault}))})}var wp=n7.ZU.Object({type:n7.ZU.Literal("threadInbox")}),wf={Content:function(e){var n=e.options;return(0,p.Y)(hB,{openFile:function(e){n.performPaneOperation({operation:"open",secondary:!0,pane:{type:"codeEditor",data:{path:e}}})}})},Icon:function(e){var n=e.size;return(0,p.Y)(tV.Vx.Provider,{value:{color:tH.LU.blueStronger,size:n},children:(0,p.Y)(hS.A,{})})},getTitle:function(){return"Threads"},description:"Comment and discuss topics with collaborators directly inside code or text files",category:X.bY.Collaboration,decode:function(e){return fd.T(wp,e)}},wh=t(12930),wm=t(69584),wg=t(67251),wv=t(18583),ww=t(51383),wy=function(e){return e.Ready="READY",e.Loading="LOADING",e.Error="ERROR",e}(wy||{}),wb=function(e){var n=e.progress;return(0,p.Y)(tz.m_,{tooltip:"Progress: ".concat(Math.round(100*n*10)/10,"%"),children:(0,p.Y)(eG.S,{css:[e_.wp.width("100%"),e_.wp.height(4),e_.wp.backgroundColor.backgroundHigher],children:(0,p.Y)(eG.S,{css:[e_.wp.width("".concat(100*n,"%")),e_.wp.height("100%"),e_.wp.backgroundColor.purpleDefault]})})})},wS=n7.ZU.Object({type:n7.ZU.Literal("tutorial")}),wY={Content:function(){var e,n=(0,er.A)().fs,t=(0,et.OH)(),r=(0,lI.Jw)(u2.C.id,u2.j.Sidepane),i=(0,d._)((0,h.useState)([]),2),o=i[0],a=i[1],l=(0,d._)((0,h.useState)("LOADING"),2),s=l[0],c=l[1],u=(0,eB.A)(),f=(0,d._)((0,wh.A)("tutorialProgress--".concat(u),0),2),m=f[0],g=f[1],v=(0,d._)((0,h.useState)(!1),2),w=v[0],y=v[1],b=(0,h.useRef)(null),S=(0,eM.T)(),Y=S?S.toString():"",A=(0,t8.vO)(),x=(0,t8.rM)(),C=(0,wg.A)(x),_=(0,L.A)(function(){return C?function(e){var n,t;return C({code:e,insertAt:null!=(t=null==(n=A())?void 0:n.position.offset)?t:"end"})}:void 0},[C,A]),k=(0,ww.wp)(Y,u),D=k?(0,p.Y)(ww.Q9,{challenge:k}):null,E=(0,h.useCallback)(function(){b.current&&(b.current.scrollTop=0)},[b]);return((0,h.useEffect)(function(){var e,t=!1;return(e=(0,H._)(function(){var e,r,i,o,l,s,u,p,f,h,m,g,v,w;return(0,z.YH)(this,function(y){switch(y.label){case 0:return c("LOADING"),[4,n.readDir(wv.T)];case 1:if(e=y.sent(),t)return[2];if(e.error)return c("ERROR"),[2];return r=[],[4,Promise.all(e.children.filter(function(e){var n;return e.type===tu.pt.File&&(null==(n=mn.Jh.from(e.filename))?void 0:n.id)==="markdown"}).map(function(e){var t="".concat(wv.T,"/").concat(e.filename);return Promise.all([t,n.readFile(t)])}))];case 2:if(i=y.sent(),t)return[2];o=!0,l=!1,s=void 0;try{for(u=i[Symbol.iterator]();!(o=(p=u.next()).done);o=!0)h=(f=(0,d._)(p.value,2))[0],(m=f[1]).error?c("ERROR"):(v=m.content.toString(),w=RegExp("^#\\s(?<title>.*)").exec(v),r.push({title:null==w||null==(g=w.groups)?void 0:g.title,content:v,path:h}))}catch(e){l=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(l)throw s}}return a(r),c("READY"),[2]}})}),function(){return e.apply(this,arguments)})(),function(){t=!0}},[n]),(0,h.useEffect)(function(){o[m]||g(0)},[m,g,o]),"LOADING"===s)?(0,p.Y)(eG.S,{css:[e_.wp.flex.growAndShrink(1),e_.wp.center],children:(0,p.Y)(lO.A,{})}):"ERROR"===s?(0,p.Y)(eG.S,{css:[e_.wp.flex.growAndShrink(1),e_.wp.center],children:(0,p.FD)(eG.S,{css:[e_.wp.center,e_.wp.colWithGap(4)],children:[(0,p.Y)(iH.A,{color:tH.LU.accentNegativeDefault}),(0,p.Y)(eW.EY,{color:"dimmer",multiline:!1,children:"Failed to load tutorial"})]})}):0===o.length?(0,p.Y)(eG.S,{css:[e_.wp.flex.growAndShrink(1),e_.wp.center],children:(0,p.FD)(eG.S,{css:[e_.wp.center,e_.wp.colWithGap(4)],children:[(0,p.Y)(iH.A,{color:tH.LU.accentNegativeDefault}),(0,p.Y)(eW.EY,{color:"dimmer",multiline:!1,children:"No tutorials found!"})]})}):w?(0,p.FD)(eG.S,{css:[e_.wp.overflowY("scroll"),e_.wp.flex.growAndShrink(1),e_.wp.p(8),e_.wp.colWithGap(16)],children:[(0,p.Y)(eW.EY,{variant:"headerDefault",multiline:!1,children:"Table of Contents"}),(0,p.Y)(eG.S,{css:[e_.wp.flex.growAndShrink(1),e_.wp.colWithGap(8)],children:o.map(function(e,n){return(0,p.FD)(eG.S,{css:[m===n?e_.wp.backgroundColor.backgroundHighest:e_.wp.backgroundColor.backgroundHigher,e_.wp.borderRadius(4),e_.wp.rowWithGap(8),e_.wp.align.center,e_.wp.cursor.pointer,m===n?{outline:"solid 2px ".concat(tH.LU.outlineDimmest)}:{},{":hover":{outline:"solid 2px ".concat(tH.LU.outlineDimmest)}}],p:8,onClick:function(){g(n),y(!1)},children:[(0,p.Y)(eG.S,{css:[e_.wp.backgroundColor.backgroundHighest,e_.wp.width(20),e_.wp.height(20),e_.wp.borderRadius("full"),e_.wp.center,{outline:"solid 1px ".concat(tH.LU.outlineDimmest)}],children:(0,p.Y)(eW.EY,{variant:"small",color:"dimmest",multiline:!1,children:n+1})}),(0,p.Y)(eW.EY,{css:[e_.wp.maxWidth("80%")],multiline:!1,children:e.title})]},e.title)})})]}):(0,p.Y)(eG.S,{innerRef:r,css:[e_.wp.height("100%")],children:(0,p.FD)(eG.S,{dataCy:"tutorial-viewer-content",innerRef:b,css:[e_.wp.overflowY("scroll"),e_.wp.flex.growAndShrink(1),e_.wp.p(16),e_.wp.pb(48),e_.wp.colWithGap(16)],children:[t?(0,p.Y)(ez.$n,{text:"Show tutorial video",iconLeft:(0,p.Y)(iY.A,{}),onClick:function(){return t()}}):null,D,o.length>1&&(0,p.Y)(ez.$n,{text:"Table of Contents",iconLeft:(0,p.Y)(gG.A,{}),onClick:function(){return y(!0)}}),(0,p.Y)(wm.A,{fs:n,path:o[m].path,source:o[m].content,sourcePos:!1,onCodeInsert:_}),o.length>1&&(0,p.FD)(eG.S,{css:[e_.wp.position.absolute,e_.wp.width("100%"),e_.wp.left(0),e_.wp.bottom(0),e_.wp.overflow("hidden")],children:[(0,p.Y)(wb,{progress:(m+1)/o.length}),(0,p.FD)(eG.S,{css:[e_.wp.width("100%"),e_.wp.height(40),e_.wp.align.center,e_.wp.flex.row],children:[(0,p.Y)(eG.S,{tag:"button",css:[e_.wp.backgroundColor.backgroundHigher,e_.wp.cursor.pointer,e_.wp.width(40),e_.wp.height("100%")],p:8,justify:"center",onClick:function(){m>0&&(g(function(e){return e-1}),E())},children:m>0&&(0,p.Y)(h5.A,{size:24})}),(0,p.Y)(eG.S,{tag:"button",css:[e_.wp.flex.growAndShrink(1),e_.wp.height("100%"),e_.wp.justify.spaceBetween,e_.wp.backgroundColor.backgroundHighest,e_.wp.align.center,e_.wp.p(8),e_.wp.cursor.pointer,{userSelect:"none"}],row:!0,gap:8,onClick:function(){m<o.length-1&&(g(function(e){return e+1}),E())},children:m<o.length-1&&(0,p.FD)(p.FK,{children:[(0,p.FD)(eW.EY,{multiline:!1,css:[e_.wp.flex.growAndShrink(1),e_.wp.textAlign.left,e_.wp.fontSize(tH.LU.fontSizeSubheadDefault)],children:[(0,p.FD)("span",{css:[e_.wp.color.foregroundDimmer],children:["Next",o[m+1].title?": ":" page"]}),(0,p.Y)("b",{children:null!=(e=o[m+1].title)?e:""})]}),(0,p.Y)(lG.A,{size:24})]})})]})]})]})})},Icon:function(e){var n=e.size;return(0,p.Y)(u0.A,{size:n})},getTitle:function(){return"Tutorial"},category:X.bY.Other,decode:function(e){return fd.T(wS,e)}},wA=t(71380),wx=t(88766),wC=t(64870),w_=t(77510),wk=t(51179),wD=t(51542),wE=t(2200),wR=t(6895),wI=t(26716),wF=t(63235),wT=(0,eC.x)({workflowFailed:[e_.wp.position.relative,e_.wp.height("100%"),e_.wp.width("100%"),e_.wp.p(16)],workflowIconWrapper:[e_.wp.position.absolute,e_.wp.coverContainer,e_.wp.center]});function wP(e){var n=e.isAgentControllingRunWorkflow,t=e.runState,r=e.openPane,i=e.text;return(0,p.Y)(eG.S,{css:wT.workflowFailed,align:"center",children:(0,p.FD)(eG.S,{css:wT.workflowIconWrapper,gap:16,children:[(0,p.Y)(wF.A,{art:"Cloud"}),(0,p.FD)(eG.S,{gap:8,align:"center",children:[(0,p.Y)(eW.EY,{children:i}),n?t===q.g32.AGENT_STATE_RUNNING?(0,p.FD)(eW.EY,{children:[I.g$," is running"]}):(0,p.Y)(wL,{}):(0,p.Y)(wU,{openPane:r})]})]})})}function wL(){var e,n,t,r=(n=(0,I.NC)(),t=(0,fg.J2)(n.sessions.agent.current),(0,h.useCallback)((e=(0,H._)(function(e){return(0,z.YH)(this,function(n){return[2,null==t?void 0:t.appendEvent({kind:"message",message:e,intent:q.qRv.AGENT})]})}),function(n){return e.apply(this,arguments)}),[t]));return(0,p.Y)(ez.$n,{iconLeft:(0,p.Y)(u6.A,{}),text:"Ask ".concat(I.g$," to debug"),onClick:(0,H._)(function(){return(0,z.YH)(this,function(e){switch(e.label){case 0:return[4,r("The app failed to run, please debug and fix it.")];case 1:return e.sent(),[2]}})})})}function wU(e){var n=e.openPane,t=(0,wI.H)({openPane:n}),r=(0,h.useCallback)(function(){t("The app isn't running, review and fix errors in the Console")},[t]);return(0,p.Y)(ez.$n,{iconLeft:(0,p.Y)(wR.A,{}),text:"Ask ".concat(I.BP," to debug"),onClick:r})}var wN=t(3423),wO=t(69157);function wM(){return(0,p.Y)(f0.A,{pane:{type:"webview"},headerText:"Preview will be available soon",bodyText:"".concat((0,I.Nn)({capitalizeFirstChar:!0})," is working"),icon:(0,p.Y)(ib.A,{size:48})})}var wB=t(97587),wH=t.n(wB);function wz(){return(0,p.Y)(eG.S,{clsx:wH().root,children:(0,p.Y)(f0.A,{pane:{type:"webview"},headerText:"Designing your app",bodyText:"".concat((0,I.Nn)({capitalizeFirstChar:!0})," is working"),icon:(0,p.Y)(ic.A,{size:48})})})}var wW=t(89924),wG=(0,tB.AH)([e_.wp.coverContainer,e_.wp.overflow("hidden"),e_.wp.position.relative]);function wV(e){var n,t=e.initialPort,r=e.openPane,i=e.overlayContent,o=e.previewScreenSize,a=e.setPreviewScreenSize,l=(0,wx.e)(),s=(0,h.useRef)(null),c=(0,h.useCallback)(function(){var e;null==(e=s.current)||e.refresh()},[]),u=(0,h.useCallback)(function(){return r({type:"deployments"})},[r]),d=(0,wO.xQ)({openDeploymentsPane:u,includeSharing:!0}).getCommandGroups;(0,eu.Qt)(function(){var e={type:"webview",refresh:function(){var e;null==(e=s.current)||e.refresh()},navigate:function(e,n){var t;null==(t=s.current)||t.navigateTo(e,n)}},n=d();return n.length>0?(0,e6._)((0,m._)({},e),{commands:n}):e},[d]);var f=(0,wE.y)({refresh:c}),g=f.isAgentControllingRunWorkflow,v=f.presentResultsEvent,w=f.readyToDeploy,y=f.runState,b=f.workflowState,S=(0,er.A)(),Y=S.runner,A=S.ports;(0,wN.A)({runner:Y,refreshWebView:null==(n=s.current)?void 0:n.refresh});var x=(0,wA.w)(A),C=(0,h.useMemo)(function(){return x.some(function(e){return(0,wC.th)(e.configuration.localPort)})},[x]),_=(0,I.NC)(),k=(0,fg.J2)(_.sessions.agent.current),D=(0,fg.Rj)(function(){var e;return null==k?void 0:k.reduce((e=k.created,{direction:"forward",state:{inRapidBuild:!1},map:function(e){return e.inRapidBuild},reducer:function(n,t){if((0,wW.A)(e,q.qLy))return t.inRapidBuild=!1,!1;if(t.inRapidBuild){if((0,q.TW7)(n,"rapidBuildConcluded"))return t.inRapidBuild=!1,!1}else(0,q.TW7)(n,"agentPlanEventContents")&&!n.contents.contents.agentPlanEventContents.requiresApproval&&(t.inRapidBuild=!0)}}),"global")},[k]),E=(0,w_.b)(k),R=E.planApprovalState,F=E.planDesignReferences,T=y===q.g32.AGENT_STATE_RUNNING,P=b===wE.I.NOT_RUNNING;if(b===wE.I.FAILED||b===wE.I.CRASHED)return g?(0,p.Y)(eG.S,{css:wG,children:(0,p.Y)(wM,{})}):(0,p.Y)(eG.S,{css:wG,children:(0,p.Y)(wP,{isAgentControllingRunWorkflow:g,runState:y,openPane:r,text:wE.I.CRASHED?"Your App crashed":"Your App failed to run"})});if(g){if(v)return(0,p.FD)(eG.S,{css:wG,children:[(0,p.Y)(wk.vL,{ref:s,openPane:r,showDeployBanner:w,previewScreenSize:o,setPreviewScreenSize:a,initialPort:v.websitePort,initialPath:v.websiteRoute}),T&&(D||P)?i:null]});if(T&&C)return(0,p.FD)(eG.S,{css:wG,children:[(0,p.Y)(wk.Fm,{ref:s,openPane:r,readonlyBannerVariant:"default"}),i]})}return"approved"===R&&F&&F.length>0?(0,p.Y)(eG.S,{css:wG,children:(0,p.Y)(wk.aM,{ref:s,openPane:r,filePath:F[0]})}):l&&k&&null!==R&&"approved"!==R?(0,p.Y)(wz,{}):(0,p.FD)(eG.S,{css:wG,children:[(0,p.Y)(wD.A,{openPane:r,starting:b===wE.I.STARTING,initialPort:t,previewScreenSize:o,setPreviewScreenSize:a}),T&&(D||P)?i:null]})}var wj=t(50534),wZ=t(50941);function wq(e){return e.getTime()-Date.now()}var wK=(0,rO.v)(["barTransform"]),w$=wK.cssVars,wJ=wK.styleTokens,wQ=(0,eC.x)({root:[e_.wp.position.relative,e_.wp.height(2),e_.wp.backgroundColor.backgroundHighest,e_.wp.borderRadius(),e_.wp.overflow("hidden")],bar:[e_.wp.backgroundColor.foregroundDefault,{position:"absolute",bottom:0,left:0,height:"100%",width:"100%",transform:wJ.barTransform,transformOrigin:"left"}]});function wX(e){var n=e.advanceAt,t=e.onAdvance,r=e.onTick,i=e.paused,o=void 0!==i&&i,a=(0,fg.HJ)(0),l=(0,fg.HJ)(0),s=(0,h.useRef)(null);return(0,tU.d)(s,l,function(e){return(0,nt._)({},w$.barTransform,"scaleX(".concat(e,")"))}),(0,h.useEffect)(function(){var e=null,i=wq(n);return o?e&&cancelAnimationFrame(e):!function o(){var s=wq(n),c=Math.ceil(s/1e3);if(a.set(c),l.set(1-s/i),c<=0)return void t();null==r||r(c),e=requestAnimationFrame(o)}(),function(){e&&cancelAnimationFrame(e)}},[n,l,a,t,r,o]),(0,p.Y)("div",{css:wQ.root,ref:s,children:(0,p.Y)(eG.S,{css:wQ.bar})})}var w0=t(5321),w1=(0,eC.x)({container:[e_.wp.position.relative,e_.wp.height(450)]});function w2(e){var n=e.embedUrl,t=e.title,r=e.isOpen,i=e.onClose;return(0,p.Y)(ek.a,{isOpen:null!=r&&r,onRequestClose:i,maxWidth:800,fitContent:!0,noPadding:!0,centered:!0,children:(0,p.Y)(eG.S,{css:w1.container,children:(0,p.Y)(w0.L9,{embedUrl:n,title:t,borderRadius:[4,4,4,4]})})})}var w4=t(40049),w5=t.n(w4),w3=(0,tH.CK)("TipsFloatingBanner.module.css",["--crossfade-duration"]);function w6(e){return"videoUrl"in e}function w8(e){var n=e.tips,t=n.length>1,r=(0,d._)((0,h.useState)(!0),2),i=r[0],o=r[1],a=(0,d._)((0,h.useState)(!1),2),l=a[0],s=a[1],c=(0,d._)((0,h.useState)(w7),2),u=c[0],f=c[1],m=(0,d._)((0,h.useState)(!1),2),g=m[0],v=m[1];(0,h.useEffect)(function(){v(l)},[l]),(0,h.useEffect)(function(){g||f(w7())},[g]);var w=(0,h.useRef)(null),y=(0,d._)((0,h.useState)(function(){return Math.floor(Math.random()*n.length)}),2),b=y[0],S=y[1],Y=n[b],A=(0,d._)((0,h.useState)(null),2),x=A[0],C=A[1];return i?(0,p.FD)(eG.S,{className:w5().root,gap:12,row:!0,align:"center",style:(0,nt._)({},w3.crossfadeDuration,"".concat(200,"ms")),onMouseEnter:function(){return s(!0)},onMouseLeave:function(){return s(!1)},children:[(0,p.FD)(eG.S,{className:w5().iconAndProgressBar,gap:2,children:[(0,p.Y)(eG.S,{className:w5().icon,children:(0,p.Y)(gl.A,{size:16})}),t?(0,p.Y)(wX,{advanceAt:u,onAdvance:function(){f(w7());var e=(b+1)%n.length;setTimeout(function(){S(e)},200)},paused:g}):null]}),(0,p.Y)(eG.S,{className:w5().tipContent,row:!0,align:"center",children:(0,p.Y)(wj.A,{children:(0,p.Y)(wZ.A,{nodeRef:w,timeout:200,classNames:{enter:w5().fadeEnter,enterActive:w5().fadeEnterActive,exit:w5().fadeExit,exitActive:w5().fadeExitActive},children:(0,p.FD)(eG.S,{innerRef:w,row:!0,gap:12,align:"center",className:w5().flexShrink,children:[w6(Y)?(0,p.Y)(tz.m_,{tooltip:"Watch video",placement:"top",children:(0,p.Y)(eD.ui,{className:w5().tipImage,elevated:!0,onClick:function(){return C(Y)},children:Y.videoThumbnail})}):null,(0,p.Y)(eW.EY,{className:w5().flexShrink,children:Y.text})]})},b)})}),(0,p.Y)(t7.K0,{onClick:function(){o(!1)},alt:"Hide tips",children:(0,p.Y)(iH.A,{})}),(0,p.Y)(w9,{isOpen:null!=x,tip:x,onClose:function(){C(null),v(!1)}})]}):null}function w7(){return new Date(Date.now()+8e3)}function w9(e){var n=e.isOpen,t=e.tip,r=e.onClose;return t&&w6(t)?(0,p.Y)(w2,{isOpen:n,embedUrl:t.videoUrl,title:t.text,onClose:r}):null}var ye=t(32852),yn=t(58481),yt=[{text:"Attach images or screenshots to your chat messages to better convey your ideas. Drag & drop works too!"},{text:"Start a new chat when your conversation has many messages."},{text:(0,p.FD)(p.FK,{children:["View your app in various sizes using the ",(0,p.Y)(ib.A,{}),' "Screen size" button in the Preview pane top bar.']})},{text:(0,p.FD)(p.FK,{children:[(0,p.FD)("a",{href:"https://replit.com/account#referral-link",target:"_blank",children:["Refer a friend ",(0,p.Y)(iy.A,{})]})," ","to earn free credits."]})},{text:(0,p.FD)(p.FK,{children:["Revert to a previous version of your app using the ",(0,p.Y)(ye.A,{})," ","Rollback button on Agent checkpoints."]})},{text:"Collaborate in real-time by inviting others via email or Replit username."},{text:"Build on the go with the Replit mobile app for iOS and Android.",videoUrl:"https://www.youtube-nocookie.com/embed/_yQmQMCoYb0?si=uKnWuVz5UfMTatrK&rel=0",videoThumbnail:(0,p.Y)(rS.A,{src:"/public/images/workspace-tips/video-mobile-app.png",alt:"Learn about the Replit mobile app",layout:"fixed",width:54,height:30})},{text:"Link a custom domain to your app when deploying.",videoUrl:"https://www.youtube-nocookie.com/embed/rGYdyb58wJY?si=3yWVOOIBbWRQx3pe&rel=0",videoThumbnail:(0,p.Y)(rS.A,{src:"/public/images/workspace-tips/video-custom-domains.png",alt:"Learn how to link a custom domain",layout:"fixed",width:54,height:30})},{text:"Send screenshots of any errors to the Agent for quick troubleshooting."},{text:'Open your app in its own tab using the "Open in the browser" button in the Webview top bar.'},{text:(0,p.FD)(p.FK,{children:[(0,p.FD)("a",{href:"https://docs.replit.com/updates",target:"_blank",children:["Check out our changelog ",(0,p.Y)(iy.A,{})]})," ","to see what's new this week at Replit."]})},{text:(0,p.FD)(p.FK,{children:["Track your spending with the ",(0,p.Y)(yn.A,{})," Usage icon at the top of the Agent or Assistant pane."]})},{text:"Create and manage a native database in the Database pane.",videoUrl:"https://www.youtube-nocookie.com/embed/2ND1kPBcu8c?si=oq1YyYJsdcs6Gmw2&rel=0",videoThumbnail:(0,p.Y)(rS.A,{src:"/public/images/workspace-tips/video-store-data.png",alt:"Learn how to store data in the Database",layout:"fixed",width:54,height:30})},{text:(0,p.FD)(p.FK,{children:[(0,p.FD)("a",{href:"https://docs.replit.com/",target:"_blank",children:["Visit our documentation ",(0,p.Y)(iy.A,{})]})," ","for comprehensive information about all product features."]})},{text:"Check the Console pane for error messages if your app crashes."},{text:(0,p.FD)(p.FK,{children:["Store sensitive information, like API Keys, in the ",(0,p.Y)(gp.A,{})," ","Secrets pane to keep it hidden from public view."]})},{text:(0,p.FD)(p.FK,{children:["Use ",(0,p.Y)(ee.A,{})," Code Search to find specific code or text across your entire app."]})},{text:"Connect a payment method for users of your app by asking Agent to use Stripe.",videoUrl:"https://www.youtube-nocookie.com/embed/TW8xaPERcRU?si=fxbTfG8Ku2I7j3AYd&rel=0",videoThumbnail:(0,p.Y)(rS.A,{src:"/public/images/workspace-tips/video-add-stripe.png",alt:"Learn how to add Stripe to your app",layout:"fixed",width:54,height:30})},{text:(0,p.FD)(p.FK,{children:["When you're ready, share your app with the world using the"," ",(0,p.Y)(uD.A,{color:tH.LU.accentPositiveDefault})," Deployments pane."]})}],yr=t(28971),yi=t.n(yr);function yo(e){var n=e.children;return(0,p.Y)(eG.S,{className:yi().root,children:n})}var ya=t(77681),yl=t(13975),ys={Content:function(e){var n=e.pane.data,t=e.options.performPaneOperation,r=(0,er.A)().ports,i=(0,wA.w)(r),o=(0,g7.g)(),a=(0,h.useMemo)(function(){return o?ya.YY:(0,ya.Eo)(n,i)},[n,i,o]),l=(0,h.useCallback)(function(e){t({operation:"open",secondary:!1,pane:e})},[t]),s=(0,h.useCallback)(function(n){e.options.performPaneOperation({operation:"replace",pane:{type:"webview",data:{previewScreenSize:n}}})},[e.options]);return(0,p.Y)(wV,{initialPort:a,openPane:l,overlayContent:(0,p.Y)(yo,{children:(0,p.Y)(w8,{tips:yt})}),previewScreenSize:null==n?void 0:n.previewScreenSize,setPreviewScreenSize:s})},Icon:function(e){var n=e.size;return(0,p.Y)(tV.Vx.Provider,{value:{size:n},children:(0,p.Y)(ib.A,{})})},getTitle:function(){return"Preview"},description:"Preview your App",category:X.bY.WorkspaceFeatures,decode:yl.D4},yc=t(66340);let yu="undefined"!=typeof document&&window.visualViewport;function yd(){return{width:yu&&(null==yu?void 0:yu.width)||window.innerWidth,height:yu&&(null==yu?void 0:yu.height)||window.innerHeight}}var yp=t(36767);function yf(){var e=(0,g._)(["\n  fragment WorkspaceGuidedTourAuthorizations on ReplAuthorizations {\n    editPermissions {\n      isAuthorized\n      code\n      message\n    }\n    createDeployment(provider: $deploymentProvider) {\n      isAuthorized\n      code\n      message\n    }\n  }\n"]);return yf=function(){return e},e}function yh(){var e=(0,g._)(["\n  query WorkspaceGuidedTourChecklist(\n    $replId: String!\n    $deploymentProvider: HostingBuildProvider!\n  ) {\n    currentUser {\n      ...UserPlanStateCurrentUser\n    }\n    getRepl(id: $replId) {\n      __typename\n      ... on Repl {\n        id\n        authorizations {\n          ...WorkspaceGuidedTourAuthorizations\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return yh=function(){return e},e}var ym={},yg=(0,v.J1)(yf()),yv=(0,v.J1)(yh(),yp.o,yg),yw=t(73547),yy=t(89956),yb=t(76882),yS=t(75176),yY=(0,eC.x)({card:[e_.wp.borderRadius(8),e_.wp.border({color:tH.LU.outlineDimmest})],postCompletionActions:[e_.wp.flex.wrap]});function yA(e){var n=e.user,t=(0,et.LG)(),r=(0,yb.A)(n),i=(0,d._)((0,h.useState)(!1),2),o=i[0],a=i[1];return(0,p.FD)(eG.S,{gap:12,children:[(0,p.Y)(eW.Y9,{level:2,variant:"subheadBig",children:"Congratulations \uD83C\uDF89"}),(0,p.Y)(eW.EY,{children:"You've completed the guided tour!"}),(0,p.FD)(eD.ui,{css:yY.card,p:16,gap:12,elevated:!0,children:[(0,p.FD)(eW.EY,{children:["This project, also known as a ",(0,p.Y)("em",{children:"Repl"}),", was auto-saved to your profile. You can come back any time or create a new Repl from one of our many templates."]}),(0,p.FD)(eG.S,{css:yY.postCompletionActions,row:!0,gap:8,children:[(0,p.Y)(ez.$n,{text:"Continue building in this Repl",onClick:function(){return a(!0)}}),(0,p.Y)(aX.v,{iconLeft:(0,p.Y)(em.A,{}),text:"Create a new Repl",colorway:"primary",href:{pathname:"/new"},onClick:function(){(0,V.u4)(V.AZ.OPEN_REPL_CREATION_PAGE,{source:"workspace_guided_tour"})}}),r?(0,p.Y)(yS.A,{context:"workspace_guided_tour",text:"Upgrade plan",colorway:"brand",variant:"default"}):null]})]}),(0,p.Y)(ek.a,{isOpen:o,onRequestClose:function(){return a(!1)},children:o?(0,p.Y)(yy.A,{confirmLabel:"Yes, close",isDestructive:!0,title:"Close the Workspace Guide?",onCancel:function(){return a(!1)},onConfirm:t,children:"Are you sure you want to close the Workspace Guide to continue building in this Repl? To return to the guided tour, you will need to start a new demo project from the home page."}):null})]})}var yx=t(20646),yC=(0,eC.x)({container:[e_.wp.minWidth(240),e_.wp.p(16),e_.wp.rowWithGap(12),e_.wp.borderRadius(8),e_.wp.border({width:1,color:tH.LU.outlineDimmest}),e_.wp.align.center,{"&.is-active":{borderColor:tH.LU.outlineDefault}}],indexOrCheckbox:[e_.wp.width(24),e_.wp.height(24),e_.wp.flex.row,e_.wp.center,e_.wp.textAlign.center,e_.wp.borderRadius(4),e_.wp.border({width:1,color:tH.LU.outlineDimmer}),{".is-active &":{borderColor:tH.LU.accentPrimaryDefault}}],label:[e_.wp.flex.growAndShrink(1),e_.wp.color.foregroundDimmer,{alignSelf:"center",lineHeight:"".concat((0,ez.Jt)("small")+16,"px"),".is-active &":[e_.wp.color.foregroundDefault]}],action:[e_.wp.display.none,{".is-unlocked:hover &":[e_.wp.display.block],".is-active &":[e_.wp.display.block]}]});function y_(e){var n,t=e.index,r=e.isActive,i=e.isCompleted,o=e.isOptional,a=e.isUnlocked,l=e.text,s=e.onViewSteps,c=(0,lI.kD)(),u=null!=(n=(0,lI.qv)())&&n,d="async"===c?(0,p.Y)(lO.A,{}):void 0,f=(0,p.Y)(ez.$n,{colorway:r?"primary":void 0,size:"small",text:"View Steps",variant:r?"default":"outlined",onClick:s});return(0,p.Y)(yx.A,{isActive:r&&u&&"user"!==c,children:(0,p.FD)(eD.ui,{elevated:r,css:yC.container,className:r?"is-active":a?"is-unlocked":void 0,children:[(0,p.Y)(eG.S,{css:yC.indexOrCheckbox,children:i?(0,p.Y)(lN.A,{}):void 0!==o&&o?void 0:t+1}),(0,p.Y)(eW.EY,{variant:"subheadDefault",css:yC.label,multiline:!1,children:l}),(0,p.Y)(eG.S,{css:yC.action,children:u?d:f})]})})}var yk=t(63340),yD=t(33747),yE=t(61928),yR=(0,eC.x)({bar:[e_.wp.minWidth(60)]});function yI(e){var n=e.completed,t=e.total,r=(0,vT.E)(0,t,n);return(0,p.Y)(yk.z,{value:r,maxValue:t,children:(0,p.FD)(eG.S,{row:!0,gap:8,align:"center",children:[(0,p.FD)(yD.J,{children:[r," / ",t]}),(0,p.Y)(yE.W,{css:yR.bar,total:t,current:r,color:tH.LU.accentPrimaryDefault,tooltipHidden:!0})]})})}var yF="WorkspaceTourGuide",yT=(0,eC.x)({container:[(0,nt._)({},e_.kL.max(440,yF),[e_.wp.flex.column])],textContainer:[e_.wp.flex.growAndShrink(1)],progressContainer:[e_.wp.flex.growAndShrink(1)]});function yP(e){var n=e.titleText,t=e.titleBadge,r=e.description,i=e.progressElement;return(0,p.FD)(eG.S,{css:yT.container,row:!0,gap:16,justify:"space-between",children:[(0,p.FD)(eG.S,{css:yT.textContainer,gap:8,children:[(0,p.FD)(eG.S,{row:!0,gap:8,align:"center",children:[(0,p.Y)(eW.Y9,{level:2,variant:"subheadBig",children:n}),t]}),(0,p.Y)(eW.EY,{children:r})]}),(0,p.Y)(eG.S,{css:yT.progressContainer,children:i})]})}var yL=t(83346),yU=t(28962),yN=t(47526),yO=t(49131);function yM(){var e=(0,g._)(["\n                      These optional steps require an upgraded subscription.\n                    "]);return yM=function(){return e},e}var yB=(0,eC.x)({root:[e_.wp.height("100%"),e_.wp.overflowY("auto"),{containerName:yF,containerType:"inline-size"}],footer:[e_.wp.flex.growAndShrink(1)]});function yH(e){var n,t,r,i,o,a,l,s,c,u=e.mainTitle,f=e.tour,g=e.checklistSteps,v=e.initialStepIndex,y=e.numCompletedSteps,b=void 0===y?0:y,S=e.onStepChange,Y=(n={variables:{replId:(0,eB.A)(),deploymentProvider:rQ.Q0.CloudRun}},t=(0,m._)({},ym,n),w.I(yv,t)).data,A=(0,h.useRef)(null),x=(0,lI.oZ)(),C=function(e){if((null==e?void 0:e.getRepl.__typename)!=="Repl")return!0;var n=e.getRepl.authorizations;return n.createDeployment.isAuthorized&&n.editPermissions.isAuthorized}(Y),_=(0,lI.Vu)(),k=(0,lI.qv)(),D=(0,lI.Os)(f.id,f.steps[0].id),E=(0,lI.mR)(),R=null!=(c=f.steps.findIndex(function(e){return e.id===(null==E?void 0:E.id)}))?c:0;(0,yN.AM)(function(){R!==v&&D.goto(v),0!==v||k||0!==b||_()}),(0,h.useEffect)(function(){k&&(null==S||S(R))},[k,R,S]);var I=(r=(0,lI.Jw)(yL.IW.id,yL.jz.ChecklistIntro),i=(0,lI.Jw)(yU._t.id,yU.jz.ChecklistIntro),(0,e9.S)([r,i],{breadcrumb:"client/replEnvironmentDesktop/tours/workspaceGuide/hooks.ts:44"}));!function(e){var n=e.checklistSteps,t=e.celebrationTargetRef,r=(0,d._)((0,h.useState)(!1),2),i=r[0],o=r[1],a=(0,lI.mR)(),l=(0,yw.Z)(a),s=n.optional.some(function(e){return e.steps.some(function(e){return e.id===(null==a?void 0:a.id)})}),c=n.required.some(function(e){return e.steps.some(function(e){return e.id===(null==l?void 0:l.id)})}),u=(0,uH.mO)().fireDirectionalBurstFrom,p=(0,lI.qv)(),f=(0,lI.qt)(),m=function(){let e=(0,yc.wR)(),[n,t]=(0,h.useState)(()=>e?{width:0,height:0}:yd());return(0,h.useEffect)(()=>{let e=()=>{t(e=>{let n=yd();return n.width===e.width&&n.height===e.height?e:n})};return yu?yu.addEventListener("resize",e):window.addEventListener("resize",e),()=>{yu?yu.removeEventListener("resize",e):window.removeEventListener("resize",e)}},[]),n}().width,g=c&&s;(0,h.useEffect)(function(){p&&g&&!i&&(f(),o(!0),null!=t.current&&u({element:t.current,direction:uH.E_.North,spread:function(){return 100},lifetime:function(){return(0,uH.Im)(2,4)},velocity:function(){return(0,uH.Im)(Math.max(m/2,600),Math.max(m,1200))},numParticles:function(){return 250}}))},[t,i,g,u,p,f,m])}({checklistSteps:g,celebrationTargetRef:A});var F=g.intro.length,T=g.required.length,P=g.optional.length,L=(o=(0,lI.qv)(),a=(0,lI.mR)(),s=(l=g.optional[g.optional.length-1]).steps[l.steps.length-1],!o&&(null==a?void 0:a.id)===s.id),U=(0,h.useCallback)(function(e){var n=F;if(e<T)for(var t=0;t<e;t++)n+=g.required[t].steps.length;else{n+=g.required.reduce(function(e,n){return e+n.steps.length},0);for(var r=e-T,i=0;i<r;i++)n+=g.optional[i].steps.length}return n},[F,T,g.required,g.optional]),N=(0,h.useCallback)(function(e){if((e-=F)<0)return -1;if(e<g.required.reduce(function(e,n){return e+n.steps.length},F)){var n=0,t=!0,r=!1,i=void 0;try{for(var o,a=g.required[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;if(e<l.steps.length)return n;e-=l.steps.length,n++}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n}var s=T+F,c=!0,u=!1,d=void 0;try{for(var p,f=g.optional[Symbol.iterator]();!(c=(p=f.next()).done);c=!0){var h=p.value;if(e<h.steps.length)return s;e-=h.steps.length,s++}}catch(e){u=!0,d=e}finally{try{c||null==f.return||f.return()}finally{if(u)throw d}}return s},[g.optional,g.required,T,F]);function O(e){return function(){x(null),k||_();var n=e===N(R);D.goto(n?R:U(e))}}var M=N(R),H=N(b-1);return(0,p.FD)(eG.S,{css:yB.root,p:12,gap:24,innerRef:I,children:[(0,p.Y)(yP,{titleText:u,description:"Start building by following the interactive step-by-step guide.",progressElement:(0,p.Y)(yI,{completed:N(b),total:T})}),(0,p.Y)(eG.S,{gap:8,children:g.required.map(function(e,n){return(0,p.Y)(y_,{index:n,isActive:M===n,isCompleted:H>n,isUnlocked:H>=n,text:e.title,onViewSteps:O(n)},e.id)})}),0===P?null:(0,p.FD)(p.FK,{children:[(0,p.Y)(yP,{titleText:"Continue building",titleBadge:C?null:(0,p.Y)(yO.A,{plan:oX.en,variant:"icon-text",size:"small",tooltipProps:{title:"".concat(oX.en," or ").concat(oX.$B," plan required"),description:function(e){for(var n=arguments.length,t=Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];var i=Array.from("string"==typeof e?[e]:e);i[i.length-1]=i[i.length-1].replace(/\r?\n([\t ]*)$/,"");var o=i.reduce(function(e,n){var t=n.match(/\n([\t ]+|(?!\s).)/g);return t?e.concat(t.map(function(e){var n,t;return null!=(t=null==(n=e.match(/[\t ]/g))?void 0:n.length)?t:0})):e},[]);if(o.length){var a,l=RegExp("\n[	 ]{".concat((a=Math).min.apply(a,(0,B._)(o)),"}"),"g");i=i.map(function(e){return e.replace(l,"\n")})}i[0]=i[0].replace(/^\r?\n/,"");var s=i[0];return t.forEach(function(e,n){var t=s.match(/(?:^|\n)( *)$/),r=t?t[1]:"",o=e;"string"==typeof e&&e.includes("\n")&&(o=String(e).split("\n").map(function(e,n){return 0===n?e:"".concat(r).concat(e)}).join("\n")),s+=o+i[n+1]}),s}(yM())}}),description:(0,p.Y)(p.FK,{children:"Complete the bonus steps to get the most out of Replit's features."})}),(0,p.Y)(eG.S,{gap:8,children:g.optional.map(function(e,n){var t=T+n;return(0,p.Y)(y_,{index:t,isActive:M===t,isCompleted:H>t,isOptional:!0,isUnlocked:H>=T,text:e.title,onViewSteps:O(t)},e.id)})}),L&&(null==Y?void 0:Y.currentUser)!=null?(0,p.Y)(yA,{user:Y.currentUser}):null,(0,p.Y)(eG.S,{css:yB.footer,innerRef:A})]})]})}function yz(e){var n,t={type:"workspaceTourGuide",data:e},r=(0,X.Vv)(),i=null!=(n=r.getDescription(t))?n:r.getTitle(t),o=(0,lI.BF)(),a=(0,h.useMemo)(function(){switch(null==o?void 0:o.id){case"workspace-guided-tour-data-app":return yL.$T;case"workspace-guided-tour-portfolio-website":return yU.Zg;default:return}},[null==o?void 0:o.id]);return null==o||null==a?(0,p.Y)(f0.A,{pane:t,bodyText:"No guided tour is available for the current Repl"}):(0,p.Y)(yH,(0,m._)({mainTitle:i,tour:o,checklistSteps:a},e))}var yW=n7.ZU.Object({initialStepIndex:n7.ZU.Integer(),numCompletedSteps:n7.ZU.Optional(n7.ZU.Integer())}),yG=n7.ZU.Object({type:n7.ZU.Literal("workspaceTourGuide"),data:n7.ZU.Optional(yW)}),yV={Content:function(e){var n=e.pane,t=e.options.performPaneOperation,r=(0,h.useCallback)(function(e){if(e!==(null==(r=n.data)?void 0:r.initialStepIndex)){var r,i,o,a=Math.max(e,null!=(o=null==(i=n.data)?void 0:i.numCompletedSteps)?o:0);t({operation:"replace",pane:(0,e6._)((0,m._)({},n),{data:(0,e6._)((0,m._)({},n.data),{initialStepIndex:e,numCompletedSteps:a})})})}},[n,t]);return(0,p.Y)(yz,(0,m._)({initialStepIndex:0,onStepChange:r},n.data))},Icon:function(e){var n=e.size;return(0,p.Y)(tV.Vx.Provider,{value:{color:tH.LU.blueStronger,size:n},children:(0,p.Y)(rY.A,{})})},getTitle:function(){return"Workspace Guide"},description:"Get started with Replit's workspace",category:X.bY.Other,decode:function(e){return fd.T(yG,e)}},yj=t(32709),yZ=t(73040),yq=t(13242),yK=t(61908),y$=t(77775),yJ=t(59655),yQ=(0,rO.v)(["transformX","transformY","hoverScaleX","hoverScaleY","width","height","zIndex","cursor","gripVisibility","gripColor","gripWidth","gripHeight","transitionDuration","rotation"]),yX=yQ.cssVars,y0=yQ.styleTokens,y1=(0,eC.x)({root:[e_.wp.center,e_.wp.position.absolute,e_.wp.top(0),e_.wp.left(0),pD,(c={transform:"translate(".concat(y0.transformX,", ").concat(y0.transformY,")"),width:y0.width,height:y0.height,cursor:y0.cursor,zIndex:y0.zIndex},(0,nt._)(c,e_.$_.canHover,[{"&:hover":{zIndex:et.WO.gutterHovered}}]),(0,nt._)(c,"&:hover .blanket",{transform:"scale(".concat(y0.hoverScaleX,", ").concat(y0.hoverScaleY,")")}),(0,nt._)(c,"& .icon",{transform:"rotate(".concat(y0.rotation,")")}),(0,nt._)(c,"&:active .blanket",[e_.wp.height("200vh"),e_.wp.width("200vw"),{transform:"translate(-50%, -50%)"}]),(0,nt._)(c,"&:not(:active):hover > .grip",(0,nt._)({},yX.gripColor,tH.LU.foregroundDefault)),c)],blanket:e_.wp.coverContainer,grip:[e_.wp.borderRadius(4),{width:y0.gripWidth,height:y0.gripHeight,visibility:y0.gripVisibility,background:y0.gripColor,transitionProperty:"opacity, width, height, background-color",transitionTimingFunction:"ease-out"}]}),y2=(0,h.memo)(function(e){var n,t,r,i,o=e.handleId,a=(0,et.Z5)(o),l=(n=(0,h.useRef)(null),t=(0,uB.j)(),r=(0,et.VV)(),(0,tU.d)(n,a.size,function(e){var n,t=e.width,r=e.height;return n={},(0,nt._)(n,yX.width,t+"px"),(0,nt._)(n,yX.height,r+"px"),n}),(0,tU.d)(n,a.position,function(e){var n,t=e.x,r=e.y;return n={},(0,nt._)(n,yX.transformX,Math.round(t)+"px"),(0,nt._)(n,yX.transformY,Math.round(r)+"px"),n}),(0,tU.d)(n,a.rotation,function(e){return(0,nt._)({},yX.rotation,e+"deg")}),(0,tU.d)(n,a.gripIsHidden,function(e){return(0,nt._)({},yX.gripVisibility,e?"hidden":"visible")}),(0,tU.d)(n,a.length,function(e){return(0,nt._)({},yX.transitionDuration,(t?0:Math.min(Math.max(100/e*1,.08),.12))+"ms")}),pE(n),i=r?3:2,(0,tU.d)(n,a.isStacked,function(e){var n;return n={},(0,nt._)(n,yX.cursor,e?"row-resize":"col-resize"),(0,nt._)(n,yX.hoverScaleX,(e?1:i).toString()),(0,nt._)(n,yX.hoverScaleY,(e?i:1).toString()),n}),(0,tU.d)(n,a.isActive,function(e){var n;return n={},(0,nt._)(n,yX.gripColor,e?"radial-gradient(circle, ".concat(tH.LU.accentPrimaryDefault," calc(100% - 48px), transparent)"):tH.LU.outlineDimmest),(0,nt._)(n,yX.zIndex,(e?et.WO.gutterActive:et.WO.gutter).toString()),n}),(0,tU.d)(n,a.gripSize,function(e){var n,t=e.width,r=e.height;return n={},(0,nt._)(n,yX.gripWidth,t+"px"),(0,nt._)(n,yX.gripHeight,r+"px"),n}),n),s=(0,et.qr)(),c=(0,et.Z1)(),u=(0,h.useRef)(null),d=(0,iK.A)(a.isSnapped);return(0,p.FD)(eG.S,{innerRef:l,css:y1.root,onDoubleClick:function(){c(a.handle.current)},onPointerDown:function(e){(0,tL.j)(e,{start:function(){var e=a.handle.current;u.current=document.activeElement,s({type:"start",leftPath:e.leftPath,stacked:e.stacked})},move:function(e){s({type:"update",moveDelta:e.delta})},end:function(){var e,n;s({type:"end"}),null==(n=u.current)||null==(e=n.focus)||e.call(n)}})},onContextMenu:function(e){e.preventDefault(),e.stopPropagation()},children:[(0,p.Y)(eG.S,{className:"blanket",css:y1.blanket}),d?(0,p.Y)(yJ.A,{className:"icon"}):(0,p.Y)(eG.S,{className:"grip",css:y1.grip})]})}),y4=t(80923),y5=t(46115);function y3(){var e=(0,g._)(["\n  subscription ThreadUpdates($replId: String!) {\n    updatedThread: annotationUpdatesByRepl(replId: $replId) {\n      id\n      ...AnnotationsUIAnchor\n    }\n  }\n  ","\n"]);return y3=function(){return e},e}var y6={},y8=(0,v.J1)(y3(),f$.A9),y7=t(51895),y9=t(83227),be=t(26613),bn=t(28844),bt="video.json",br=(0,bn.join)(wv.T,bt);function bi(){return(bi=(0,H._)(function(e,n){var t;return(0,z.YH)(this,function(r){switch(r.label){case 0:if(!n.find(function(e){return e.type===tu.pt.File&&e.filename===bt}))return[2,null];return[4,e.readFile(br)];case 1:if((t=r.sent()).error)return[2,null];return[2,t.content.toString()]}})})).apply(this,arguments)}let bo=function(e){var n=fQ(e,{onReceiveAnnotationUpdate:function(){}}).generalThread;return(0,h.useMemo)(function(){return n?n.messages.filter(function(e){return!1===e.seen}).length:0},[n])};var ba=t(69549),bl=t(96907),bs=t.n(bl);function bc(){var e=(0,g._)(["\n  mutation HandlePortOpenedUpdateReplConfig($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        config {\n          isVnc\n          isServer\n        }\n      }\n    }\n  }\n"]);return bc=function(){return e},e}var bu={},bd=(0,v.J1)(bc()),bp=t(3218);function bf(){var e=(0,g._)(["\n  subscription RegisterReplConnection($replId: String!) {\n    replConnection(replId: $replId)\n  }\n"]);return bf=function(){return e},e}var bh={},bm=(0,v.J1)(bf()),bg=t(82110),bv={direction:"reverse",state:{isExecutingPlan:!1},reducer:function(e,n){if(e.sender.type!==q.utd.AI)return!1;var t=e.contents.contents;switch(null==t?void 0:t.$kind){case"agentPlanEventContents":var r=t.agentPlanEventContents;if(!r)break;if(!0===r.requiresApproval)return n.notification={id:r.planId,text:"Plan is waiting for approval"},n.isExecutingPlan=!0,!1;if(n.isExecutingPlan&&r.step.subSteps.every(function(e){return e.status===q.jhd.STEP_COMPLETE}))return n.notification={id:r.planId,text:"Plan has been completed!"},n.isExecutingPlan=!1,!1;break;case"agentAskUserForActionRequest":return n.notification={id:e.id,text:"Agent has an update for you"},!1;case"agentTimelineEventContents":var i,o=t.agentTimelineEventContents,a=o.toolData,l=o.toolName;if((null==a?void 0:a.$kind)==="messageData"){switch(null==(i=a.messageData.agentAction.optionType)?void 0:i.$kind){case"messageButtonAction":return n.notification={id:e.id,text:"Agent has a question for you"},!1;case"secretRequestAction":return n.notification={id:e.id,text:"Agent needs secrets to proceed"},!1;case"deployRequestAction":return n.notification={id:e.id,text:"Agent needs your permission to deploy the application"},!1}if("user_response"===l)return n.notification={id:e.id,text:"Agent has a question for you"},!1}}n.notification=void 0}};function bw(){var e=(0,g._)(["\n  query ReplEnvironmentNotifyUserJoin($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        title\n      }\n    }\n  }\n"]);return bw=function(){return e},e}var by=(0,v.J1)(bw());function bb(){return(bb=(0,H._)(function(e){var n;return(0,z.YH)(this,function(t){switch(t.label){case 0:if(!eH.V)throw Error("Expected Apollo client");return[4,eH.V.query({query:by,variables:{id:e}})];case 1:return[2,(null==(n=t.sent().data)?void 0:n.repl.__typename)==="Repl"?n.repl.title:null]}})})).apply(this,arguments)}var bS=t(96211),bY=t(10293);function bA(){return(bA=(0,H._)(function(e){return(0,z.YH)(this,function(n){switch(n.label){case 0:return[4,new Promise(function(n){return setTimeout(function(){return n()},e)})];case 1:return n.sent(),[2]}})})).apply(this,arguments)}function bx(){var e=(0,g._)(["\n  query TrackMultiplayer($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        multiplayers {\n          id\n        }\n        owner {\n          ... on Team {\n            id\n          }\n          ... on User {\n            id\n          }\n        }\n      }\n    }\n  }\n"]);return bx=function(){return e},e}var bC={},b_=(0,v.J1)(bx());function bk(){var e,n,t=(0,g7.g)(),r=(0,et.Us)(),i=(0,tb.oR)(),o=(0,et.KV)(),a=(e=(0,et.rQ)(),n=(0,et.t3)(),(0,h.useCallback)(function(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=n().find(function(e){return(0,d._)(e,2)[1].type===t});i&&e({paneId:i[0],activate:r})},[n,e])),l=(0,et.t3)(),s=(0,et.rQ)();return(0,h.useCallback)(function(e){var n=!!e&&e.reveal;if(i){if(t)return;r({pane:{type:"runnerOutput"},activate:!1,commit:!0});return}if(t){o(),n&&a("webview",!0);return}var c=l().find(function(e){var n=(0,d._)(e,2);return"runnerOutput"===(n[0],n[1]).type});c||r({pane:{type:"runnerOutput"},activate:!1,commit:!0}),n&&c&&s({paneId:c[0],activate:!0})},[i,t,l,r,o,a,s])}function bD(e,n,t){var r=(0,et.CA)(),i=(0,et.hT)(),o=(0,et.rQ)(),a=(0,et.t3)();(0,eb.SJ)(function(){if(r)return[e,function(){var e=a().find(function(e){return(0,d._)(e,2)[1].type===n.type});if(e)return void o({paneId:e[0],activate:!0});i((0,e6._)((0,m._)({},t),{pane:n,activate:!0,placement:{type:"secondary"}}))}]},[r,i,o])}var bE=t(69665),bR=t(53961),bI=t(89290),bF=t(64878),bT=t(40792),bP={direction:"forward",state:{hasNonEmptyAgentCheckpoint:!1},reducer:function(e,n){var t=e.contents.contents;if((0,q.VFn)(t,"agentTimelineEventContents")){var r=(0,q.QNh)(t).toolData;if((0,q.VFn)(r,"commitData")&&(0,q.QNh)(r).billingRate===q.pSr.NORMAL)return n.hasNonEmptyAgentCheckpoint=!0,!1}},map:function(e){return e.hasNonEmptyAgentCheckpoint}},bL=t(22940),bU=t(71492),bN=t(95288),bO=t(95835),bM=t(88048),bB=t(24850),bH=t(89310),bz=t(57021);function bW(){var e=(0,g._)(["\n  query WorkspaceShowHiddenFiles($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        templateInfo {\n          label\n        }\n      }\n    }\n  }\n"]);return bW=function(){return e},e}var bG={},bV=(0,v.J1)(bW()),bj=t(43169),bZ=t(38387),bq=t(42093),bK=t(55442),b$=t(48547),bJ=t(70699);function bQ(e){var n,t,r,i,o,a,l,s,c,u,f,g,v,y,b,S,Y,A,x,C,k,D,R,F,T,L,U,N,O,M,B,W,G,j,Z,K,$,J,Q,X,ee,en,ei,eo,ea,el,es,ec,ef,eh,em,eg,ev,ew,ey,eS,eY,eA,ex,eC,e_,ek,eD,eE,eR,eI,eF,eT,eP,eL,eU,eN,eO,eM,eH,ez,eW,eG,eV,ej,eK,e$,eJ,eX,e0,e1,e2,e4,e5,e3,e8,e7,e9,nn,nt,ni,no,na,nl,ns,nc,nu,nd,np,nf,nh,nm,ng,nv,nw,ny,nb,nS,nY,nA,nx,nC,n_,nk,nD,nE,nR,nI,nF,nT,nP,nL,nU,nN,nO,nM,nB,nH,nz,nW,nG,nV,nj,nZ,nq,nK,n$,nJ,nQ,nX,n0,n1,n2,n4,n5,n3,n6,n8,n7,n9,te,tn,tt,tr,ti=e.repl,to=e.currentUser,ta=(0,er.A)(),tl=ta.replspaceApi,ts=ta.dotReplit,tc=ta.container,td=ta.ports;g=(0,er.A)().lspnix,v=(0,P.g)("codeIntelligence").preferences.codeIntelligence,(0,h.useEffect)(function(){if(!v)return void g.disable();g.enable()},[g,v]),y=(0,d._)((0,bp.eY)(),1)[0],b=(0,et._G)(),S=(0,eB.A)(),(0,h.useEffect)(function(){var e=function(){b({replId:S,force:!1}),b.flush()};if(!y)return window.addEventListener("beforeunload",e),function(){window.removeEventListener("beforeunload",e)}},[b,S,y]),(0,h.useEffect)(function(){var e=function(){"hidden"===document.visibilityState&&b({replId:S,force:!1})};if(!y)return document.addEventListener("visibilitychange",e),function(){document.removeEventListener("visibilitychange",e)}},[b,S,y]),(0,h.useEffect)(function(){if(!y){var e=null;return function n(){e=setTimeout(function(){b({replId:S,force:!1}),n()},6e4)}(),function(){e&&clearTimeout(e)}}},[b,S,y]),(0,h.useEffect)(function(){return function(){b({replId:S,force:!1}),b.flush()}},[b,S,y]),(0,y5.A)(),(0,bZ.A)(),(0,bK.A)({workspaceType:"desktop"}),(0,h.useEffect)(function(){var e=function(e){"s"===e.key&&(0,rp.T$)(e)&&e.preventDefault()};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}},[]),A=(Y=(0,er.A)()).container,x=Y.presence,(0,h.useEffect)(function(){var e=x.onUserJoin(function(n){var t,r=null==(t=A.getContext())?void 0:t.repl;if(r){var i=n.username;return(function(e){return bb.apply(this,arguments)})(r.id).then(function(e){e&&d8({title:"",body:"".concat(i," joined ").concat(e),tag:"".concat(r.id,"-").concat(i,"-joined"),iconByUsername:i,cacheDuration:9e5})}),function(){e()}}})},[x,A]),C=(0,eB.A)(),k=(0,P.g)("agentAudioNotification").preferences.agentAudioNotification,D=(0,h.useCallback)(function(e,n){if(k&&document.hidden)try{new Audio("/public/sounds/pop.mp3").play()}catch(e){}d8({title:"Agent Update",body:n,tag:"".concat(C,"-").concat(e),icon:"/public/images/ai/agent/AgentIconStandard.png",cacheDuration:3e5})},[k,C]),R=(0,I.NC)(),F=(0,fg.J2)(R.sessions.agent.current),T=(0,h.useMemo)(function(){return null==F?void 0:F.reduce(bv,1)},[F]),L=null==F?void 0:F.agent.state,U=(0,h.useMemo)(function(){return L&&T?bg.cP.combine(L,T):null},[L,T]),(0,fg.q3)(U,{next:function(e){var n=(0,d._)(e,2),t=n[0],r=n[1].notification;r&&(null==t?void 0:t.state)===q.g32.AGENT_STATE_PAUSED&&D(r.id,r.text)}}),N=(0,eB.A)(),O=(0,er.A)().container,M={variables:{replId:N},skip:(0,ne.A)(O)!==ba.KN.CONNECTED},B=(0,m._)({},bh,M),gY.R(bm,B),W=(0,er.A)().presence,(0,h.useEffect)(function(){return W.onFollowingUsersChanged(function(e){var n=e.followingUsers,t=e.type,r=n.length;"follow"===t?(0,V.u4)(bY.AZ.REMOTE_USER_CURSOR_FOLLOWED,{numFollowers:r}):(0,V.u4)(bY.AZ.REMOTE_USER_CURSOR_UNFOLLOWED,{numFollowers:r})})},[W]),(0,b$.A)(),G=(0,er.A)().presence,j=(0,et.mU)(),(0,h.useEffect)(function(){G.updateOpenFile(j)},[G,j]),K=(Z=(0,eq.A)()).showConfirm,$=Z.showNotice,J=Z.hideMessage,Q=Z.showError,X=(0,er.A)().container,ee=(0,h.useRef)(!1),(0,h.useEffect)(function(){var e=X.onToast(function(e){e.startsWith("PANIC")||$(e,Math.max(1e4,e.length/.025+1e3))}),n=null,t=!1,r=X.onConnectionStateChanged(function(e){if(n&&(J(n),n=null),e===ba.KN.CONNECTED){t&&ee.current&&(n=K("Connected",1500),ee.current=!1),t=!0;return}if(t){if(e===ba.KN.CONNECTING){n=$("Reconnecting");return}if(e===ba.KN.DISCONNECTED){n=Q("Disconnected"),ee.current=!0;return}}});return function(){n&&J(n),e(),r()}},[X,K,$,Q,J]),en=(0,eq.A)().showConfirm,ei=(0,er.A)().fs,(0,h.useEffect)(function(){var e=ei.registerOnFlushSuccess(function(e,n){if(n===tu.sT.MANUAL_SAVE){var t="Saved ".concat(e);en(t,Math.max(1e4,t.length/.025+1e3))}});return function(){e()}},[ei,en]),ea=(eo=(0,eq.A)()).showNotice,el=eo.showError,es=(0,_._P)({controlName:"legacy-python-migration"}),(0,aY.b)((ec=(0,H._)(function(e,n){var t,r,i;return(0,z.YH)(this,function(o){switch(o.label){case 0:if(t=n.signal,!es)return[2];return[4,e.pythonMigration.detectLegacyPython.rpc({},{signal:t})];case 1:if(!(r=o.sent()).ok||!r.payload.oldVenvDetected)return[2];return[4,e.pythonMigration.migratePython.rpc({},{signal:t})];case 2:if(!(i=o.sent()).ok)return"NOP"!==i.payload.code&&el((0,p.FD)(p.FK,{children:[(0,p.Y)("div",{children:"Failed to migrate legacy Python configuration."}),(0,p.Y)("div",{children:"You may need to reinstall your Python packages, or contact support."})]}),1e4),[2];return ea((0,p.FD)(p.FK,{children:[(0,p.Y)("div",{children:"This Repl contained legacy Python configuration"}),(0,p.Y)("div",{children:"and has been automatically migrated."})]}),1e4),[2]}})}),function(e,n){return ec.apply(this,arguments)}),[es,el,ea]),ef=(0,et.CA)(),eh=bk(),em=(0,lI.Os)(u2.C.id,u2.j.Output),(0,h.useEffect)(function(){if(ef&&(null==em?void 0:em.isActive)){var e=setInterval(function(){eh()},200);return function(){clearInterval(e)}}},[null==em?void 0:em.isActive,eh,ef]),bD(iD.showShell.id,{type:"shell"}),bD(iD.showDocs.id,{type:"docs"}),bD(iD.showGit.id,{type:"git"}),bD(iD.showSettings.id,{type:"preferences"}),bD(iD.showConsole.id,{type:"runnerOutput"}),bD(iD.showReplitAi.id,{type:"ghostwriterChat"},{commit:!0}),(0,bI.A)(),eg=(0,er.A)().presence,ev=(0,et.q5)(),(0,h.useEffect)(function(){return eg.onUserOpenedFile(function(e){var n=e.user,t=e.file,r=eg.getFollowedUser();r&&r.id===n.id&&t&&ev({path:t})})},[eg,ev]),ey=(ew=(0,d._)((0,h.useState)(null),2))[0],eS=ew[1],(0,h.useEffect)(function(){return eg.onFollowedUserChanged(eS)},[eg]),(0,h.useEffect)(function(){if(ey){var e=setTimeout(function(){document.addEventListener("click",n)},0);return function(){clearTimeout(e),document.removeEventListener("click",n)}}function n(){eg.unfollowUser()}},[ey]),eY=(0,t8.xu)(),e_=(null==(eC=(eA={variables:{replId:(0,eB.A)()}},ex=(0,m._)({},bG,eA),w.I(bV,ex)).data)?void 0:eC.repl.__typename)==="Repl"?eC.repl:null,(0,h.useEffect)(function(){var e;e_&&(null==(e=e_.templateInfo)?void 0:e.label.includes("Blank Repl"))&&eY(!0)},[eY,e_]),ek=(0,et.dC)(),eD=(0,er.A)().fs,eE=(0,wv.A)().isTutorial,eR=(0,eZ.A)(ek),(0,h.useEffect)(function(){if(eE){var e=!1,n=eD.watchDir(wv.T,{onChange:function(n){(function(e,n){return bi.apply(this,arguments)})(eD,n).then(function(n){if(!e){if(!n)return void eR.current(null);var t=null;try{t=mA._3(n)}catch(e){}var r=(void 0===t?"undefined":(0,nr._)(t))==="object"&&"string"==typeof t.embedUrl?t.embedUrl:null;eR.current(r?{embedUrl:r}:null)}})},onMoveOrDelete:function(){eR.current(null)},onError:function(){eR.current(null)}});return function(){e=!0,n()}}},[eD,eE,eR]),eI=(0,wv.A)().isTutorial,eF=(0,et.RO)(),(0,h.useEffect)(function(){eI&&eF()},[eF,eI]),r=bo(t=(0,eB.A)()),i=(n=fQ(t,{onReceiveAnnotationUpdate:function(){}}).annotations,(0,h.useMemo)(function(){return n.reduce(function(e,n){return n.isGeneral?e:e+n.messages.filter(function(e){return!1===e.seen}).length},0)},[n])),o=(0,bS.A)(),a=(0,t8.RF)(),(0,h.useEffect)(function(){a({paneType:"chat",indicatorType:r>0?tH.LU.redStronger:void 0})},[a,r]),(0,h.useEffect)(function(){a({paneType:"threadInbox",indicatorType:i>0?tH.LU.redStronger:void 0})},[a,i]),(0,h.useEffect)(function(){a({paneType:"envEditor",indicatorType:o?tH.LU.redStronger:void 0})},[o,a]),(0,bM.R)({onOpenEnvEditor:function(){tp({pane:{type:"envEditor"},activate:!0,placement:{type:"secondary"}})}}),eP={variables:{replId:eT=ti.id},onData:function(e){var n,t,r=null==(t=e.data)||null==(n=t.data)?void 0:n.updatedThread;r&&"AnnotationAnchor"===r.__typename&&(e.client.cache.updateQuery({query:f$.FL,variables:{replId:eT}},function(e){return(0,ab.jM)(e,function(e){null!==e&&"Repl"===e.repl.__typename&&(e.repl.annotationAnchors.find(function(e){return e.id===r.id})||e.repl.annotationAnchors.push(r))})}),e.client.cache.updateQuery({query:y7.FZ,variables:{replId:eT,path:r.path}},function(e){return(0,ab.jM)(e,function(e){var n;e&&(null==(n=e.threadsByFile)?void 0:n.__typename)==="ThreadsByFileResult"&&(e.threadsByFile.threads.find(function(e){return e.id===r.id})||e.threadsByFile.threads.push((0,e6._)((0,m._)({},r),{messageCount:r.messages.length,unreadCount:r.messages.filter(function(e){return!e.seen}).length,participants:r.messages.filter(function(e){return!!e.user}).map(function(e){return e.user})})))})}))}},eL=(0,m._)({},y6,eP),gY.R(y8,eL),eU=(0,et.zn)(),eN=(0,ed.T_)(),eO=(0,ed.nF)(),(0,h.useEffect)(function(){eU?eN(eU):eO()},[eN,eO,eU]),eM=(0,eu.eZ)(),(0,et.uD)(eM),eH=(0,et.gb)(),ez=(0,et.Cc)(),(0,h.useEffect)(function(){var e=function(){ez()};if(eH)return document.addEventListener("dragend",e),function(){document.removeEventListener("dragend",e)}},[eH,ez]),(0,bO.A)(),eW=bo((0,eB.A)()),eG=(0,h.useRef)(0),eV=(0,P.g)("chatAudioNotification").preferences,(0,h.useEffect)(function(){eV.chatAudioNotification&&eW>eG.current&&new Audio("/public/sounds/pop.mp3").play(),eG.current=eW},[eW,eG,eV]),ej=(0,et.CA)(),eK=(0,eu.gB)(),e$=(0,et.SK)(),(0,eb.SJ)(function(){if(ej)return[iD.webviewRefresh.id,function(){var e=e$().filter(function(e){return"webview"===(0,d._)(e,2)[1].type}),n=!0,t=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=(0,d._)(i.value,1)[0],l=eK(a);l&&"webview"===l.type&&l.refresh()}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}}]},[ej,eK,e$]),(0,bN.A)(),(0,bB.A)(),(0,be.i)(!(null==(tr=ti.org)?void 0:tr.id));var tp=eQ();e0=(eX={debuggest:(eJ=(0,er.A)()).debuggest,toolchain:eJ.toolchain}).toolchain,e1=eX.debuggest,(0,h.useEffect)(function(){function e(e){(null==e?void 0:e.debuggers)&&(null==e?void 0:e.debuggers.length)>0&&e1.connect()}e(e0.configs.current),e0.configs.subscribe(function(n){e(n)})},[e0,e1]),e4=e2=(0,iK.A)(e1.mainClient),(0,h.useEffect)(function(){if(e4){var e=e4.onStarted(function(e){(0,V.u4)(V.AZ.DEBUGGER_USED,{action:"started",joined:e})}),n=e4.onPaused(function(e){(0,V.u4)(V.AZ.DEBUGGER_USED,{action:"paused",reason:e})}),t=e4.onBreakpoint(function(e){(0,V.u4)(V.AZ.DEBUGGER_USED,{action:"breakpointToggled",breakpointAction:e,state:e4.state.current})});return function(){e(),n(),t()}}},[e4]),e3=(0,eZ.A)(function(e){tp({pane:{type:"codeEditor",data:e},placement:{type:"secondary"},activate:!1})}),e9=null==(e7=null==(e8=(0,iK.A)(e2?e2.stackFrames:null))?void 0:e8[0])||null==(e5=e7.source)?void 0:e5.path,nn=null==e7?void 0:e7.line,(0,h.useEffect)(function(){if(e9&&nn&&e2){var e=(0,hQ.H$)(e9);e?e3.current({path:e,line:nn}):e2.stepOut()}},[e2,e9,nn,e3]);var tf=(0,I.jt)();(0,h.useEffect)(function(){return pJ.NA("replId",ti.id),function(){pJ.NA("replId",void 0)}},[ti.id]),(0,h.useEffect)(function(){return pJ.NA("agent",tf),(0,th.$Y)(tf),function(){pJ.NA("agent",void 0),(0,th.qh)()}},[tf]),(0,bR.A)({repl:ti,currentUser:to,container:tc}),nt=(0,eB.A)(),no=(ni=(0,er.A)()).container,na=ni.ports,ns=(0,d._)((nl=(0,m._)({},bu,void 0),ln.n(bd,nl)),1)[0],nc=(0,P.g)("webviewAutoOpenOnPortOpened").preferences.webviewAutoOpenOnPortOpened,nu=(0,tb.oR)(),nd=(0,I.jt)(),np=(0,et.Us)(),nf=(0,h.useCallback)(function(e){e.isForwarded&&!nd&&(nu||np({pane:{type:"vnc"}}),ns({variables:{input:{id:nt,isVnc:!0}}}))},[nd,nu,ns,nt,np]),nh=(0,h.useCallback)(function(e){var n=e.isForwarded,t=e.isOpen,r=e.data;n&&(void 0===t||t)&&!nd&&(nc&&!nu&&np({pane:{type:"webview",data:r}}),ns({variables:{input:{id:nt,isServer:!0}}}))},[nu,nd,nt,ns,nc,np]),(0,h.useEffect)(function(){return na.portsState.subscribe(bs()(function(e){if(e){var n=!0,t=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value,l=a.configuration,s=a.isOpen;if(l.isVnc)return void nf({isForwarded:s});var c=l.type===wC.gH.FORWARDED;nh({isForwarded:c,isOpen:s,data:{ports:function(e){var n=e.configuration;if(n.localPort)return{type:"local",path:"/",port:n.localPort};var t=(0,wC.Zd)(n);if(t)return{type:"external",path:"/",port:t}}(a)}})}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}}},500,{leading:!0}))},[no,na.portsState,nh,nf]),(0,bq.A)(),nm=(0,_._P)({controlName:"flag-open-telemetry-tracing"}),n_=(nv=(ng=(0,d._)((0,h.useState)(!1),2))[0],nw=ng[1],nb=(ny=(0,d._)((0,h.useState)(Date.now()),2))[0],nS=ny[1],nA=(nY=(0,d._)((0,h.useState)(Date.now()),2))[0],nx=nY[1],(0,h.useEffect)(function(){var e=function(){nw(!document.hidden),document.hidden?nx(Date.now()):nS(Date.now())};return document.addEventListener("visibilitychange",e),e(),function(){document.removeEventListener("visibilitychange",e)}},[]),nC={visibility:nv,visibleTime:nb,hiddenTime:nA}).visibility,nk=nC.visibleTime,nD=nC.hiddenTime,(0,h.useEffect)(function(){nm&&n_&&(nk-nD)/1e3>60&&(0,E.O)(bz.rA)},[nm,n_,nD,nk]),nE=(0,er.A)().ports,nR=(0,P.g)("forwardPortsAutomatically").preferences,(0,h.useEffect)(function(){nE.setForwardPortsAutomatically(nR.forwardPortsAutomatically)},[nR.forwardPortsAutomatically,nE]),(0,y9.A)(ti,to);var tm=(0,et.iu)(),tg=(0,uB.j)();(0,h.useEffect)(function(){tm(!tg)},[tg,tm]);var tv=(0,et.lz)(),tw=(0,y4.A)();(0,h.useEffect)(function(){tv(tw)},[tw,tv]),nF=(0,er.A)().presence,nT=(0,eB.A)(),nP=(0,h.useRef)(!1),nO=(nL={variables:{replId:nT}},nU=(0,m._)({},bC,nL),nN=w.I(b_,nU)).data,nM=nN.loading,nB=0,(null==nO?void 0:nO.repl.__typename)==="Repl"&&(nB=nO.repl.multiplayers.length,(null==(nI=nO.repl.owner)?void 0:nI.__typename)==="User"&&(nB+=1)),(0,h.useEffect)(function(){if(!nM&&!nP.current){var e=nF.onActiveUsersChange(function(){nP.current=!0,e(),(0,V.u4)(V.AZ.MULTIPLAYER_REPL_OPENED,{replId:nT,participantsCount:nB,usersOnlineCount:nF.getActiveUsers().length})});return e}},[nT,nM,nB,nF]);var ty=(0,ed.c_)();(0,h.useEffect)(function(){tl.setWaitForFileClose(ty)},[tl,ty]);var tS=(0,bp.iO)(),tY=(0,et.Xi)();(0,h.useEffect)(function(){tY&&tS(tY)},[tS,tY]),nz=(nH=(0,er.A)()).packager,nW=nH.toolchain,(0,h.useEffect)(function(){var e=setTimeout(function(){!function(){n.apply(this,arguments)}()},(10+5*Math.random())*1e3);function n(){return(n=(0,H._)(function(){var e,n,t,r,i,o,a,l,s,c;return(0,z.YH)(this,function(u){switch(u.label){case 0:if(!nW.configs.current||!nz)return[2];e=nW.configs.current.packagers,n=!0,t=!1,r=void 0,u.label=1;case 1:u.trys.push([1,7,8,9]),i=e[Symbol.iterator](),u.label=2;case 2:if(n=(o=i.next()).done)return[3,6];return a=o.value,[4,nz.listSpecfile(a.id)];case 3:return(l=u.sent()).packages&&l.packages.length>0&&(s=l.packages.map(function(e){return e.name||""})||[],th.vF.info("packager installed packages",{packagerId:a.id,language:a.language,packages:s}),(0,V.u4)(bY.AZ.PACKAGER_PACKAGES_INSTALLED,{packages:s})),[4,function(e){return bA.apply(this,arguments)}((5+5*Math.random())*1e3)];case 4:u.sent(),u.label=5;case 5:return n=!0,[3,2];case 6:return[3,9];case 7:return c=u.sent(),t=!0,r=c,[3,9];case 8:try{n||null==i.return||i.return()}finally{if(t)throw r}return[7];case 9:return[2]}})})).apply(this,arguments)}return function(){clearTimeout(e)}},[nz,nW.configs.current]),nG=(0,ed.RG)(),nV=(0,eu.eZ)(),(0,h.useEffect)(function(){var e=function(){var e=nG();e&&nV(e)},n=function(){"visible"===document.visibilityState&&document.activeElement===document.body&&e()};return window.addEventListener("focus",e),document.addEventListener("visibilitychange",n),function(){window.removeEventListener("focus",e),document.removeEventListener("visibilitychange",n)}},[nV,nG]),(0,bL.A)();var tA=(0,et.f)(),tx=(0,et.cC)(),tC=(0,er.A)().fs;return(0,bH.A)({fs:tC,openMultipleFiles:tA,openMultipleURLs:tx,waitForFileClose:ty,isMobileWorkspace:!1}),(0,ep.Pt)({supportsAgent:tf}),(0,iv.I7)({dotReplit:ts}),nj=(0,iv.If)(),nZ=(0,et.Us)(),(0,h.useEffect)(function(){nj&&Object.values(nj).forEach(function(e){e.tasks.forEach(function(n,t){var r=e.workflow.tasks[t];n.state===bE.Dr.RUNNING&&"workspace.openWebview"===r.task&&nZ({pane:{type:"webview",data:{ports:{type:"external",port:r.args}}}})})})},[nj,nZ]),nq=(0,aA.ob)(aU),nK=(0,aA.ob)(aM),n$=(0,h.useRef)(!0),nJ=(0,h.useCallback)(function(e){nK(e),n$.current?n$.current=!1:nq(!1)},[nK,nq]),(0,aY.b)((nQ=(0,H._)(function(e,n){var t,r,i,o,a,l,s,c,u;return(0,z.YH)(this,function(d){switch(d.label){case 0:t=n.signal,r=e.resources.monitor.subscribe({},{signal:t}).resReadable,i=!1,o=!1,d.label=1;case 1:d.trys.push([1,6,7,12]),l=(0,ay._)(r),d.label=2;case 2:return[4,l.next()];case 3:if(!(i=!(s=d.sent()).done))return[3,5];if(!(c=s.value).ok)return[2];nJ(c.payload),d.label=4;case 4:return i=!1,[3,2];case 5:return[3,12];case 6:return u=d.sent(),o=!0,a=u,[3,12];case 7:if(d.trys.push([7,,10,11]),!(i&&null!=l.return))return[3,9];return[4,l.return()];case 8:d.sent(),d.label=9;case 9:return[3,11];case 10:if(o)throw a;return[7];case 11:return[7];case 12:return[2]}})}),function(e,n){return nQ.apply(this,arguments)}),[nJ]),l=(0,et.Us)(),(0,lI.Os)(lR.X.id,lR.F.ProjectPane,{onEnter:function(){return l({pane:{type:"project"},commit:!0,activate:!0})}}),s=(0,er.A)().runner,c=(0,et.Us)(),u=(0,h.useCallback)(function(){c({pane:{type:"ghostwriterChat"},commit:!0,activate:!0})},[c]),f=(0,h.useCallback)(function(){u(),s.stopRun()},[s,u]),(0,lI.Os)(u4.IW.id,u4.Gp.GenerateVisualizationCode,{onEnter:f}),(0,lI.Os)(u4.IW.id,u4.Gp.PasteGeneratedCode,{onEnter:f}),(0,lI.Os)(u4._t.id,u4.ij.GenerateStylingCode,{onEnter:u}),(0,lI.Os)(u4._t.id,u4.ij.UseGeneratedCode,{onEnter:u}),(0,bJ.A)(td),nX=bk(),n0=(0,h.useCallback)(function(){nX({reveal:!1})},[nX]),(0,iv.bD)(n0,[n0]),(0,bF.u)(),n1=(0,et.tE)(),(0,fg.q3)((0,fI.S)(),{next:n1}),n2=(0,t8.eg)(),n4=(0,t8.gp)(),n5=(0,I.NC)(),n3=(0,fg.J2)(n5.sessions.agent.current),n6=(0,fg.Rj)(function(){return null==n3?void 0:n3.reduce(bP,"global")},[n3]),(0,h.useEffect)(function(){n2&&n6&&n4()},[n2,n6,n4]),(0,bT.M)(),(0,bj.H)(),(0,bU.k)(),n8=(0,lg.W)(),n7=(0,I.jt)(),n9=(0,I.Ik)(),te=n7&&"visualPlanner"===n8&&null!==n9&&["generating","awaiting-approval","revising"].includes(n9),tn=(0,et.Bm)(),tt=(0,et.HU)(),(0,h.useEffect)(function(){"centeredVisualPlanner"!==tn&&te&&tt("centeredVisualPlanner")},[tn,tt,te]),null}var bX=t(37783),b0=t(26935);function b1(e){var n=e.children,t=e.tour,r=e.userId;if(!t)return(0,p.Y)(p.FK,{children:n});var i="workspace-desktop-new-user-tour"===t.id||"workspace-desktop-tour-2024"===t.id;function o(e){i&&t&&(0,V.ls)({id:r.toString(),workspaceTourId:t.id,workspaceTourStatus:e===t.steps[t.steps.length-1].id?"completed":e.toLowerCase()})}return(0,p.Y)(b0.f,{tour:t,onStep:function(e){t&&((0,V.u4)(V.AZ.WORKSPACE_TOUR_STEP_VIEWED,{tour:t.id,stepId:e.toLowerCase()}),o(e))},onDone:function(e){(0,V.u4)(V.AZ.WORKSPACE_TOUR_DISMISSED,{tour:t.id,stepId:e.toLowerCase(),didComplete:e===t.steps[t.steps.length-1].id}),o(e)},children:n})}var b2=t(99792),b4=t(19906),b5=t(89793),b3=t(43696),b6=t.n(b3),b8=t(18966),b7=t(56757);function b9(){var e=(0,fg.J2)((0,fI.S)()),n=(0,fg.J2)((0,b7.e)()),t=b8.O.prompt;return e?t=b8.O.agentWorking:n&&(t=b8.O.agentWaiting),t?(0,p.Y)(b6(),{children:(0,p.Y)("link",{rel:"shortcut icon",href:t,sizes:"192x192",type:"image/png"})}):null}var Se=t(81185),Sn=t(6447),St=t(84550),Sr=t(42795);function Si(){var e=(0,g._)(["\n  query PublishedAs($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        publishedAs\n      }\n    }\n  }\n"]);return Si=function(){return e},e}var So={},Sa=(0,v.J1)(Si()),Sl=t(47946),Ss=t(95570),Sc=".replit-dynamic-template",Su=t(40740),Sd=t(33512),Sp=t(22443);function Sf(){var e,n,t,r,i,o,a,l,s,c,u,f,g,v,y,b,S,Y,A,x=(0,d._)((0,h.useState)(!1),2),C=x[0],k=x[1],D=(0,h.useCallback)(function(e){switch(e){case"starting":return void k(!0);case"none":return void k(!1);case"running":if(!C)throw Error("expected repl not to need dynamic template initialization")}},[k,C]),E=(0,d._)((0,h.useState)([]),2),R=E[0],I=E[1],F=(0,ma.c)();n=(e={handleRPC:(0,h.useCallback)(function(e){switch(e.type){case"progress":case"failed":return I(function(n){return(0,B._)(n).concat([(0,m._)({key:F(n.length)},e)])}),null;case"query":case"prompt":case"confirm":var n=(0,Sr.A)();return I(function(t){return(0,B._)(t).concat([(0,m._)({respond:n,key:F(t.length)},e)])}),n.promise;default:throw Error("unhandled request type: "+JSON.stringify(e))}},[F]),onConnStateChange:D}).handleRPC,t=e.onConnStateChange,r=(0,_._P)({controlName:"octopus-smokescreen"}),l=(i={variables:{id:(0,eB.A)()}},o=(0,m._)({},So,i),a=w.I(Sa,o)).loading,s=a.data,c=(0,L.A)(function(){if(l)return!1;var e=null==s?void 0:s.repl;return(null==e?void 0:e.__typename)==="Repl"&&e.publishedAs===rQ.Q_.Template},[l,s]),f=(u=(0,er.A)()).container,g=u.fs,y=(v=(0,d._)((0,h.useState)(!1),2))[0],b=v[1],Y=(S=(0,ph.A)({container:f,service:"exec",skip:!y})).channel,A=S.isConnecting,(0,h.useEffect)(function(){function e(){return(e=(0,H._)(function(){return(0,z.YH)(this,function(e){switch(e.label){case 0:return[4,g.stat(Sc)];case 1:return b(e.sent().exists),[2]}})})).apply(this,arguments)}!r||c||l||function(){e.apply(this,arguments)}()},[g,r,c,l,b]),(0,h.useEffect)(function(){if(!A){if(!Y)throw Error("exec channel is not open");var e=(0,Sr.A)();e.promise.then((0,H._)(function(){var e;return(0,z.YH)(this,function(n){switch(n.label){case 0:return[4,Y.request({input:JSON.stringify({type:"start"})+"\n"})];case 1:if(!(e=n.sent()).ok)throw Error((e.error,": "+e.error));return[2]}})}));var r=Y.onCommand(function(r){switch(r.body){case"state":r.state===Sl.api.State.Running?(t("starting"),e.resolve()):t("none");return;case"output":var i,o,a=r.output;if(!a)return;try{o=JSON.parse(a)}catch(e){throw Error("failed to parse dynamic template output: ".concat(e))}null==(i=n(o))||i.then(function(e){return Y.send({input:JSON.stringify(e)+"\n"})});return;case"stderr":Ss.warn("got dynamic template generator stderr:",r.stderr);return;case"error":Ss.error("got dynamic template generator error:",r.error);return;case"ok":return;default:throw Error("unhandled exec channel body: ".concat(r.body))}});return Y.send({exec:{args:["sh",Sc],lifecycle:Sl.api.Exec.Lifecycle.STDIN}}),function(){r()}}},[Y,n,A,t,y]);var T=R.map(function(e){switch(e.type){case"progress":return(0,p.Y)(Sh,(0,m._)({},e));case"failed":return(0,p.Y)(Sm,(0,m._)({},e));case"query":return(0,p.Y)(Sg,(0,m._)({},e));case"prompt":return(0,p.Y)(Sv,(0,m._)({},e));case"confirm":return(0,p.Y)(Sw,(0,m._)({},e))}});return(0,p.Y)(ek.a,{isOpen:C,onRequestClose:function(){return k(!1)},children:(0,p.Y)(eG.S,{gap:8,children:T})})}function Sh(e){var n=e.progress,t=(0,iB._)(e,["progress"]);return(0,p.FD)(eG.S,(0,e6._)((0,m._)({},t),{children:["progress: ",n]}))}function Sm(e){var n=e.error,t=(0,iB._)(e,["error"]);return(0,p.FD)(eG.S,(0,e6._)((0,m._)({},t),{children:["error: ",n]}))}function Sg(e){var n=e.query,t=e.options,r=e.respond,i=(0,iB._)(e,["query","options","respond"]),o=(0,d._)((0,h.useState)(null),2),a=o[0],l=o[1],s=(0,d._)((0,h.useState)(!1),2),c=s[0],u=s[1],f=(0,ma.c)(),g=(0,h.useCallback)(function(){null!==a&&(u(!0),r.resolve({type:"answer",answer:t[a]}))},[a,t,r]);return(0,p.FD)(eG.S,(0,e6._)((0,m._)({},i),{children:["query: ",n,t.map(function(e,t){return(0,p.FD)("label",{children:[(0,p.Y)("input",{type:"radio",name:n,value:t,checked:a===t,onChange:function(){c||l(t)}}),e]},f(t))}),(0,p.Y)(ez.$n,{text:"submit",onClick:g})]}))}function Sv(e){var n=e.prompt,t=e.respond,r=(0,iB._)(e,["prompt","respond"]),i=(0,d._)((0,h.useState)(""),2),o=i[0],a=i[1],l=(0,d._)((0,h.useState)(!1),2),s=l[0],c=l[1],u=(0,h.useCallback)(function(){c(!0),t.resolve({type:"answer",answer:o})},[o,t]);return(0,p.FD)(eG.S,(0,e6._)((0,m._)({},r),{children:["prompt: ",n,(0,p.Y)(hU.pd,{disabled:s,inputMode:"text",title:n,onChange:function(e){return a(e.currentTarget.value)}}),(0,p.Y)(ez.$n,{text:"submit",onClick:u})]}))}function Sw(e){var n=e.confirm,t=e.dataConfirmation,r=e.respond,i=(0,iB._)(e,["confirm","dataConfirmation","respond"]),o=Object.keys(t),a=Object.values(t);return(0,p.FD)(eG.S,(0,e6._)((0,m._)({},i),{children:["confirm: ",n,(0,p.FD)(Su.A,{"aria-label":"the data to be used to generate your App",children:[(0,p.Y)(Sp.A,{children:o.map(function(e){return(0,p.Y)(St.VP,{isRowHeader:!0,children:e},e)})}),(0,p.Y)(Sd.A,{children:(0,p.Y)(St.fI,{children:a.map(function(e,n){return(0,p.Y)(St.fh,{children:e},o[n])})})})]}),(0,p.Y)(ez.$n,{text:"yes",onClick:function(){return r.resolve({type:"answer",answer:"yes"})}}),(0,p.Y)(ez.$n,{text:"no",onClick:function(){return r.resolve({type:"answer",answer:"no"})}})]}))}var Sy=t(33932);let Sb=function(e){return(0,p.Y)(ek.a,{preventClose:!0,isOpen:!0,onRequestClose:e.onCancel,children:(0,p.FD)(eG.S,{gap:24,children:[(0,p.Y)(eW.Y9,{variant:"headerDefault",level:2,css:e_.wp.maxWidth("100%"),children:"Replit needs your permission to enable notifications."}),(0,p.Y)(eW.EY,{children:"Never miss messages from your collaborators if youre in another tab or window."}),(0,p.FD)(eG.S,{row:!0,gap:12,justify:"end",children:[(0,p.Y)(ez.$n,{onClick:e.onCancel,text:"Deny",iconLeft:(0,p.Y)(iH.A,{})}),(0,p.Y)(ez.$n,{text:"Allow notifications",colorway:"positive",iconLeft:(0,p.Y)(lN.A,{}),onClick:e.onConfirm})]})]})})};var SS=t(2758),SY=t(23714),SA=t(84631),Sx=(0,rO.v)(["transform","width","height","opacity"]),SC=Sx.cssVars,S_=Sx.styleTokens,Sk=(0,tB.i7)({from:{borderColor:tH.LU.blurpleDimmest},to:{borderColor:tH.LU.blurpleDefault}}),SD=(0,eC.x)({root:[e_.wp.borderRadius(),e_.wp.border({color:tH.LU.blurpleDimmest}),{position:"absolute",top:0,left:0,transform:S_.transform,width:S_.width,height:S_.height,opacity:S_.opacity,zIndex:et.WO.overlay,transition:"opacity 0.2s",animation:"".concat(Sk," 800ms alternate infinite"),pointerEvents:"none"}]});function SE(){var e=(0,h.useRef)(null);return(0,tU.d)(e,(0,et.KI)(),function(e){var n,t,r,i,o;return o={},(0,nt._)(o,SC.transform,"translate(".concat(null!=(n=null==e?void 0:e.x)?n:0,"px, ").concat(null!=(t=null==e?void 0:e.y)?t:0,"px)")),(0,nt._)(o,SC.width,"".concat(null!=(r=null==e?void 0:e.width)?r:0,"px")),(0,nt._)(o,SC.height,"".concat(null!=(i=null==e?void 0:e.height)?i:0,"px")),(0,nt._)(o,SC.opacity,(null==e?void 0:e.show)?"1":"0"),o}),(0,p.Y)(eG.S,{innerRef:e,css:SD.root})}function SR(e){var n=e.paneType,t=e.isOpen,r=e.onClose,i=(0,h.useMemo)(function(){return"ghostwriterChat"===n?{embedUrl:I.Wd,title:"Meet ".concat(I.BP)}:"agentChat"===n?{embedUrl:I.pF,title:"What is ".concat(I.g$,"?")}:{embedUrl:null,title:null}},[n]),o=i.embedUrl,a=i.title;return o?(0,p.Y)(w2,{isOpen:t,embedUrl:o,title:a,onClose:r}):null}function SI(){var e=(0,g._)(["\n  query ReplEnvironmentDesktopSidebarUpgradeCta {\n    currentUser {\n      id\n      ...UserPlanStateCurrentUser\n    }\n  }\n  ","\n"]);return SI=function(){return e},e}var SF={},ST=(0,v.J1)(SI(),yp.o),SP=t(34384),SL=t(89610),SU=t(95560);function SN(e){var n,t,r,i=e.iconButton,o=(n=(0,m._)({},SF,void 0),w.I(ST,n)),a=o.data,l=o.loading,s=(0,SP.ET)().orgId;if(l||!(null==a?void 0:a.currentUser))return null;var c=(0,SU.q)({user:a.currentUser}),u=c.plan,d=c.showUpgradeCta;if(void 0!==s||!d)return null;function f(){window.location.reload()}if(u.name!==oX.en)return(0,p.Y)(eG.S,{dataCy:"workspace-sidebar-upgrade-cta",children:(0,p.Y)(yS.A,{onPlanCheckoutComplete:f,size:"small",context:"workspace_sidebar",variant:"default",colorway:"primary",iconButton:i,stretch:!0})});if(null==(t=u.trial)?void 0:t.cancelsAt){var h=new Date;if(h.setMonth(h.getMonth()+1),new Date(u.trial.cancelsAt)>h)return null}var g=(null==(r=u.trial)?void 0:r.cancelsAt)?"Trial ends ".concat((0,SL.g)(u.trial.cancelsAt)):void 0;return(0,p.Y)(yS.A,{onPlanCheckoutComplete:f,variant:"default",context:"workspace_sidebar",text:g,iconButton:i,stretch:!0})}var SO={38:20,36:16,32:16,20:14},SM=(0,rO.v)(["toolIconButtonSize","toolIconBorderRadius"]),SB=SM.cssVars,SH=SM.styleTokens,Sz=[e_.wp.position.relative,e_.wp.center,{borderRadius:SH.toolIconBorderRadius}],SW=(0,B._)(Sz).concat([e_.wp.reset.button,{width:SH.toolIconButtonSize,height:SH.toolIconButtonSize,borderRadius:SH.toolIconBorderRadius}]),SG=(0,eC.x)({static:Sz,buttonFilled:[e_.wp.display.inlineFlex,{button:(0,B._)(SW).concat([so.b.filled])}],button:[e_.wp.display.inlineFlex,{button:(0,B._)(SW).concat([so.b.nofill])}],tooltipContentsContainer:[e_.wp.flex.growAndShrink(1)]});function SV(e){var n=e.indicator,t=e.children,r=e.size;return(0,p.FD)(p.FK,{children:[(0,h.cloneElement)(t,{size:SO[void 0===r?38:r]}),n?(0,p.Y)(pX.b,{color:n}):null]})}function Sj(e){var n=e.indicator,t=e.children,r=e.className,i=e.size,o=void 0===i?38:i,a=e.backgroundColor;return(0,p.Y)(eD.ui,{elevated:!0,className:r,css:SG.static,style:(0,nt._)({width:o,height:o,backgroundColor:a},SB.toolIconBorderRadius,20===o?"4px":"8px"),children:(0,p.Y)(SV,{indicator:n,size:o,children:t})})}var SZ=(0,h.forwardRef)(function(e,n){var t,r,i,o,a,l,s,c,u,f,g,v,w,y=e.children,b=e.alt,S=e.size,Y=void 0===S?38:S,A=e.filled,x=e.indicator,C=e.backgroundColor,_=e.tooltipContents,k=e.tooltipDelay,D=e.keepTooltipOpenOnHover,E=void 0!==D&&D,R=(0,iB._)(e,["children","alt","size","filled","indicator","backgroundColor","tooltipContents","tooltipDelay","keepTooltipOpenOnHover"]),I=(r=(t={tooltipDelay:k,keepTooltipOpenOnHover:E}).tooltipDelay,i=t.keepTooltipOpenOnHover,a=(o=(0,d._)((0,h.useState)(!1),2))[0],l=o[1],s=(0,h.useRef)(!1),c=(0,h.useRef)(!1),u=(0,h.useRef)(),f=(0,tz.BW)(void 0===r?"default":r),g=(0,h.useCallback)(function(){u.current=setTimeout(function(){!s.current&&(i&&c.current||l(!1))},f)},[f,i]),v=(0,h.useCallback)(function(){u.current&&(clearTimeout(u.current),u.current=void 0)},[]),(0,h.useEffect)(function(){return v},[v]),{isTooltipOpen:a,handleTargetMouseEnter:function(){v(),s.current=!0,l(!0)},handleTargetMouseLeave:function(){g(),s.current=!1},handleTooltipMouseEnter:function(){v(),c.current=!0},handleTooltipMouseLeave:function(){c.current=!1,g()}}),F=I.isTooltipOpen,T=I.handleTargetMouseEnter,P=I.handleTargetMouseLeave,L=I.handleTooltipMouseEnter,U=I.handleTooltipMouseLeave;return(0,p.Y)(eG.S,{css:void 0===A||A?SG.buttonFilled:SG.button,style:(w={},(0,nt._)(w,SB.toolIconButtonSize,Y+"px"),(0,nt._)(w,SB.toolIconBorderRadius,20===Y?"4px":"8px"),w),onMouseEnter:T,onMouseLeave:P,children:(0,p.Y)(t7.K0,(0,e6._)((0,m._)({},R),{alt:b,ref:n,style:{backgroundColor:C},isTooltipOpen:E?F:R.isTooltipOpen,disableTooltipPointerEvents:!E&&void 0,tooltipDelay:k,tooltipContents:(0,p.Y)(eG.S,{css:SG.tooltipContentsContainer,onMouseEnter:L,onMouseLeave:U,children:null!=_?_:b}),children:(0,p.Y)(SV,{indicator:x,size:Y,children:y})}))})}),Sq=t(62341),SK={searchReplace:iD.searchFileContents,shell:iD.showShell,runnerOutput:iD.showConsole,docs:iD.showDocs,ghostwriterChat:iD.showReplitAi,preferences:iD.showSettings,git:iD.showGit},S$=(u={},(0,nt._)(u,X.bY.CloudServices,"Replit-native and third-party services which your App can interact with"),(0,nt._)(u,X.bY.WorkspaceFeatures,"Everything you need to write, run, debug, and maintain your code"),(0,nt._)(u,X.bY.Collaboration,"Communication tools for working with collaborators"),(0,nt._)(u,X.bY.WorkspaceExtensions,"Make your workspace more powerful with new tools, commands, and integrations"),u),SJ=(0,eC.x)({tooltip:[e_.wp.flex.growAndShrink(1)],tooltipTitle:[e_.wp.flex.growAndShrink(1)]});function SQ(e){var n=e.title,t=e.subtitle,r=e.description,i=e.icon,o=e.titleInfoIcon;return(0,p.FD)(eG.S,{css:SJ.tooltip,p:2,gap:4,children:[(0,p.FD)(eG.S,{row:!0,gap:4,align:"center",children:[(0,p.Y)(Sj,{size:20,children:i}),(0,p.Y)(eW.EY,{css:SJ.tooltipTitle,children:n}),o]}),t?(0,p.Y)(eW.EY,{children:(0,p.Y)("strong",{children:t})}):null,r]})}function SX(e){var n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).onDragStart,t=(0,et.Cc)(),r=(0,d._)((0,p$.i)({type:pm.N.NewPane,item:function(){return{type:pm.N.NewPane,pane:e,grid:!0}},end:function(){t()},collect:function(e){return{isDragging:e.isDragging()}}}),3),i=r[0],o=r[1],a=r[2],l=i.isDragging;return(0,h.useEffect)(function(){l&&(null==n||n())},[l,n]),{dragRef:o,dragPreview:a}}function S0(e){var n,t=e.panes,r=e.dismissPopover,i=(n=(0,X.Vv)(),(0,h.useMemo)(function(){return function(e,n){var t=(a={},(0,nt._)(a,X.bY.CloudServices,[]),(0,nt._)(a,X.bY.Collaboration,[]),(0,nt._)(a,X.bY.WorkspaceFeatures,[]),(0,nt._)(a,X.bY.WorkspaceExtensions,[]),(0,nt._)(a,X.bY.Other,[]),a),r=!0,i=!1,o=void 0;try{for(var a,l,s=e[Symbol.iterator]();!(r=(l=s.next()).done);r=!0){var c=l.value,u=n.getCategory(c);["extensionStore","extensionDevtools","integrations"].includes(c.type)?t[u].unshift(c):t[u].push(c)}}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return t}(t,n)},[t,n])),o=(0,X.Vv)(),a=(0,et.Us)(),l=(0,h.useMemo)(function(){var e,n,t,l,s,c;return n=(e={categorizedPanes:i,ui:o,openPane:function(e){r(),a({pane:e,activate:!0})},dismissPopover:r}).categorizedPanes,t=e.ui,l=e.openPane,s=e.dismissPopover,c=Object.entries(n).map(function(e){var n=(0,d._)(e,2),r=n[0],i=n[1];return{data:{type:"context",label:r,icon:(0,p.Y)(ee.A,{}),tooltip:S$[r]},commands:function(){return i.map(function(e){var n,r,i,o,a;return{match:(r=(n={pane:e,aliases:es.f.get(e.type),dismissPopover:s}).pane,o=void 0===(i=n.aliases)?[]:i,a=n.dismissPopover,function(e){var n=e.searchQuery,t=e.data,i=e.active;if("group"===t.type)return null;if(!n)return{score:1,render:{content:(0,p.Y)(S1,{pane:r,dismissPopover:a,toolItemProps:{pane:r,active:i}})}};var l=(0,Sq.w2)(n,t.label,{filterLowMatchScores:!0});if(null!=l)return{score:null!=(d=null==l?void 0:l.score)?d:0,render:{content:(0,p.Y)(S1,{pane:r,dismissPopover:a,toolItemProps:{pane:r,labelHighlights:null!=(f=null==l?void 0:l.ranges)?f:[],active:i}})}};var s=!0,c=!1,u=void 0;try{for(var d,f,h,m=o[Symbol.iterator]();!(s=(h=m.next()).done);s=!0){var g=h.value,v="string"==typeof g?{alias:g,prefix:void 0}:g,w=v.alias,y=v.prefix,b=(0,Sq.w2)(n,w,{filterLowMatchScores:!0});if(b)return{score:b.score,render:{content:(0,p.Y)(S1,{pane:r,dismissPopover:a,toolItemProps:{active:i,alias:w,aliasPrefix:y,pane:r}})}}}}catch(e){c=!0,u=e}finally{try{s||null==m.return||m.return()}finally{if(c)throw u}}return null}),data:{key:"extension"===e.type?"extension-".concat(e.data.installationId):e.type,type:"action",label:t.getTitle(e),icon:t.Icon({pane:e}),run:function(){return l(e)}}}})}}}),{data:{type:"context",label:"Search actions",description:"Search tools",icon:(0,p.Y)(ee.A,{})},commands:function(){return c}}},[i,o,r,a]),s=(0,h.useRef)(null);return(0,h.useEffect)(function(){s.current&&s.current()},[s]),(0,p.Y)(eE.r,{focusRef:s,command:l})}function S1(e){var n=e.pane,t=e.dismissPopover,r=e.toolItemProps,i=SX(n,{onDragStart:t}).dragRef,o=(0,X.qo)(n,{short:!0}),a=(0,X.Vv)(),l=a.Icon({pane:n}),s=a.getTitle(n),c=SK[n.type];return(0,p.Y)(tz.m_,{tooltip:o?(0,p.Y)(SQ,{description:o,title:s,icon:l}):null,placement:"right-start",isDisabled:!o,maxWidth:300,children:function(e,n){return(0,p.Y)(eG.S,(0,e6._)((0,m._)({innerRef:n},e),{style:{height:"100%"},children:(0,p.Y)(eG.S,{style:{height:"100%"},innerRef:i,justify:"center",children:(0,p.Y)(el.k,(0,e6._)((0,m._)({},r),{shortcutCommand:c}))})}))}})}var S2=t(90846),S4=t.n(S2);function S5(){var e=(0,d._)((0,h.useState)(!1),2),n=e[0],t=e[1],r=(0,h.useCallback)(function(){return t(!1)},[]);return(0,p.FD)(lW.Wv,{isOpen:n,onOpenChange:t,label:"All tools",placement:"right",noArrow:!0,children:[(0,p.Y)(SZ,{filled:!1,alt:"All tools",onClick:function(){return t(!0)},tooltipDelay:"none",tooltipPlacement:"right-end",size:32,children:(0,p.Y)(i$,{})}),(0,p.Y)(S3,{dismissPopover:r})]})}function S3(e){var n=e.dismissPopover,t=(0,ep.Tb)();return(0,p.Y)(eG.S,{clsx:S4().toolsListPopover,children:(0,p.Y)(S0,{panes:t,dismissPopover:n})})}function S6(e){var n=e.tool,t="agent"===n?oQ.ri:oQ.a7,r="agent"===n?oQ.v7:oQ.go;return(0,p.FD)(eW.EY,{variant:"small",color:"dimmest",children:[t," cents per ",r]})}function S8(e){var n=e.isInLayout,t=(0,iB._)(e,["isInLayout"]),r=(0,fg.J2)((0,fI.S)()),i=(0,fg.J2)((0,b7.e)()),o=(0,d._)((0,h.useState)(!1),2),a=o[0],l=o[1];(0,h.useEffect)(function(){if(!i||r||n)return void l(!1);var e=setTimeout(function(){return l(!a)},a?1e3:5e3);return function(){clearTimeout(e)}},[a,i,r,n]);var s=!n&&r||a;return(0,p.Y)(fh.l,(0,m._)({loading:s},t))}var S7=(0,eC.x)({dockItem:[e_.wp.position.relative,e_.wp.width(36)],inLayoutIndicator:[e_.wp.position.absolute,e_.wp.top("50%"),e_.wp.left(4),e_.wp.width(3),e_.wp.height(3),e_.wp.borderRadius("full"),e_.wp.shadow(1),{transform:"translate(0, -50%)",backgroundColor:tH.LU.foregroundDimmest,pointerEvents:"none"}]});function S9(e){var n,t,r,i,o,a,l,s,c,u,d=e.pane,f=e.openPaneIntroVideoModal,h=(a=(o=(0,X.Vv)()).Icon({pane:d}),l=o.getTitle(d),s=(0,X.qo)(d),c=(0,t8.F9)({paneType:d.type}),u=(0,et.Us)(),{icon:a,title:l,description:s,indicator:c,onClick:function(){u({pane:d,commit:!0,reveal:!0})}}),g=h.title,v=h.description,w=h.indicator,y=h.onClick,b=h.icon,S=(0,et.JR)(d.type),Y=SX(d).dragRef,A=(t=(n={paneType:d.type,openPaneIntroVideoModal:f}).paneType,r=n.openPaneIntroVideoModal,i=function(){return null==r?void 0:r(t)},"ghostwriterChat"===t?{subtitle:"Chat & Quick Edits",description:(0,p.Y)(S6,{tool:"assistant"}),titleInfoIcon:(0,p.Y)(t7.K0,{alt:"More info",tooltipBehavior:"hidden",onClick:i,children:(0,p.Y)(mI.A,{})})}:"agentChat"===t?{subtitle:"Automated Developer",description:(0,p.Y)(S6,{tool:"agent"}),titleInfoIcon:(0,p.Y)(t7.K0,{alt:"More info",tooltipBehavior:"hidden",onClick:i,children:(0,p.Y)(mI.A,{})})}:void 0),x=v?(0,p.Y)(SQ,(0,m._)({title:g,icon:b},A||{description:(0,p.Y)(eW.EY,{multiline:!0,children:v})})):null,C=(0,lI.Jw)(dl,u8.Assistant),_=(0,lI.Jw)(dl,u8.Agent);return(0,p.FD)(eG.S,{css:S7.dockItem,innerRef:(0,X.GN)(d)?_:(0,X.N5)(d)?C:void 0,children:[(0,p.Y)(SZ,{ref:Y,filled:!1,alt:g,indicator:w,size:36,onClick:y,tooltipContents:x,tooltipDelay:null!=A?"default":"none",tooltipPlacement:"right-start",keepTooltipOpenOnHover:null!=A,children:"agentChat"===d.type?(0,p.Y)(S8,{isInLayout:S}):b}),S?(0,p.Y)(eG.S,{css:S7.inLayoutIndicator}):null]})}function Ye(e){return(0,p.FD)(tV.Ay,(0,e6._)((0,m._)({},e),{children:[(0,p.Y)("path",{fillRule:"evenodd",d:"M1.25 5A2.75 2.75 0 0 1 4 2.25h4.999c.251 0 .485.126.625.334L11.4 5.25H20A2.75 2.75 0 0 1 22.75 8v2.5a.75.75 0 0 1-1.5 0V8c0-.69-.56-1.25-1.25-1.25h-9a.751.751 0 0 1-.625-.335L8.598 3.75H4c-.69 0-1.25.56-1.25 1.25v14c0 .69.56 1.25 1.25 1.25h5a.75.75 0 0 1 0 1.5H4A2.75 2.75 0 0 1 1.25 19V5Z",clipRule:"evenodd"}),(0,p.Y)("path",{fillRule:"evenodd",d:"M12.472 17.646a.854.854 0 0 0 0 1.208l3.696 3.696a.854.854 0 0 0 1.208-1.209l-3.092-3.091 3.092-3.091a.855.855 0 0 0-1.208-1.209l-3.696 3.696Z",clipRule:"evenodd"}),(0,p.Y)("path",{fillRule:"evenodd",d:"m17.646 18.854 3.695 3.696a.854.854 0 0 0 1.209-1.209l-3.092-3.091 3.092-3.091a.854.854 0 1 0-1.209-1.209l-3.695 3.696a.854.854 0 0 0 0 1.208Z",clipRule:"evenodd"})]}))}function Yn(e){return(0,p.FD)(tV.Ay,(0,e6._)((0,m._)({},e),{children:[(0,p.Y)("path",{fillRule:"evenodd",d:"M1.25 5A2.75 2.75 0 0 1 4 2.25h4.999c.251 0 .485.126.625.334L11.4 5.25H20A2.75 2.75 0 0 1 22.75 8v4.5a.75.75 0 0 1-1.5 0V8c0-.69-.56-1.25-1.25-1.25h-9a.751.751 0 0 1-.625-.335L8.598 3.75H4c-.69 0-1.25.56-1.25 1.25v14c0 .69.56 1.25 1.25 1.25h4a.75.75 0 0 1 0 1.5H4A2.75 2.75 0 0 1 1.25 19V5Z",clipRule:"evenodd"}),(0,p.Y)("path",{fillRule:"evenodd",d:"M22.55 17.646a.854.854 0 0 1 0 1.208l-3.696 3.696a.855.855 0 0 1-1.208-1.209l3.091-3.091-3.091-3.091a.855.855 0 0 1 1.208-1.209l3.696 3.696Z",clipRule:"evenodd"}),(0,p.Y)("path",{fillRule:"evenodd",d:"M17.376 18.854 13.68 22.55a.854.854 0 0 1-1.208-1.209l3.092-3.091-3.092-3.091a.855.855 0 0 1 1.208-1.209l3.696 3.696a.854.854 0 0 1 0 1.208Z",clipRule:"evenodd"})]}))}var Yt=(0,eC.x)({files:{transitionProperty:"opacity",transitionDuration:op.Ds.duration,transitionTimingFunction:op.Ds.timingFunction,"&& button":[e_.wp.border({color:tH.LU.outlineDimmest}),{backgroundColor:tQ.s}]}});function Yr(){var e=(0,et.zL)(),n=(0,iK.A)(e.isOpen),t=(0,eb.Jn)(rB.id),r=e.toggle;return(0,eb.SJ)(function(){return[rB.id,function(){return r()}]},[r]),(0,p.Y)(Yi,{onClick:function(){return e.toggle(!n)},shortcut:t,isOpen:n})}function Yi(e){var n=e.isOpen,t=e.shortcut,r=e.onClick,i=(n?"Close":"Open")+" files",o=t?(0,p.Y)(Yo,{shortcut:t,text:i}):i;return(0,p.Y)(eG.S,{css:Yt.files,children:(0,p.Y)(SZ,{dataCy:"toggle-files-sidebar",filled:!1,alt:i,tooltipContents:o,onClick:r,tooltipPlacement:"right",size:32,children:n?(0,p.Y)(Ye,{}):(0,p.Y)(Yn,{})})})}function Yo(e){return(0,p.FD)(eG.S,{row:!0,gap:8,align:"center",children:[(0,p.Y)(eW.EY,{multiline:!1,variant:"small",children:e.text}),(0,p.Y)(eb._y,{fontSize:10,keyCombo:e.shortcut})]})}var Ya=t(38082),Yl=t.n(Ya);function Ys(e){var n,t,r,i=(n=(0,h.useRef)(null),t=(0,h.useRef)(null),r=(0,h.useRef)(null),(0,h.useEffect)(function(){var e=n.current;if(e){var i=!1,o=null,a=null,l=function(){if(n.current){var e=n.current,i=e.scrollTop,l=e.scrollHeight,s=e.clientHeight,c=i<=0,u=1>=Math.abs(l-s-i);c!==o&&t.current&&(t.current.style.setProperty("opacity",c?"0":"1"),o=c),u!==a&&r.current&&(r.current.style.setProperty("opacity",u?"0":"1"),a=u)}},s=function(){i||(i=!0,requestAnimationFrame(function(){i=!1,l()}))};return s(),e.addEventListener("scroll",s),function(){e.removeEventListener("scroll",s)}}},[]),{scrollRef:n,topRef:t,bottomRef:r}),o=i.scrollRef,a=i.topRef,l=i.bottomRef;return(0,p.FD)(eG.S,{style:{width:e.width},innerRef:e.innerRef,clsx:Yl().root,align:"stretch",justify:"space-between",gap:6,children:[(0,p.Y)(eG.S,{align:"center",children:e.filesButton}),(0,p.FD)(eG.S,{clsx:Yl().middle,align:"center",children:[(0,p.Y)(eG.S,{clsx:Yl().primaryTools,children:e.primaryTools}),(0,p.Y)(eG.S,{clsx:Yl().divider}),(0,p.FD)(eG.S,{clsx:Yl().secondarySection,align:"stretch",children:[(0,p.FD)(eG.S,{clsx:Yl().secondaryTools,align:"center",children:[(0,p.Y)(eG.S,{clsx:[Yl().fade,Yl().fadeTop],innerRef:a}),(0,p.Y)(eG.S,{clsx:Yl().secondaryToolsScroll,innerRef:o,children:e.secondaryTools}),(0,p.Y)(eG.S,{clsx:[Yl().fade,Yl().fadeBottom],innerRef:l,align:"center",justify:"end"})]}),(0,p.Y)(eG.S,{align:"center",children:e.allToolsButton})]})]}),(0,p.Y)(eG.S,{align:"center",children:e.footer})]})}var Yc=t(55568),Yu=t(54249),Yd=function(e){return"ws-database-added-to-dock-callout:"+e};function Yp(e){return(0,p.FD)(lW.Wv,{placement:"right",label:"Tool added",isOpen:e.isOpen,onOpenChange:function(n){!1===n&&e.dismissOnOutsideClick&&e.dismiss()},children:[function(n){var t=n.ref,r=(0,iB._)(n,["ref"]);return(0,p.Y)(eG.S,(0,e6._)((0,m._)({},r),{innerRef:t,children:e.children}))},(0,p.FD)(eG.S,{gap:8,style:{padding:8},children:[e.callout,(0,p.FD)(eG.S,{row:!0,gap:4,children:[e.action,(0,p.Y)(ez.$n,{colorway:"primary",text:"Got it",onClick:e.dismiss,style:{marginLeft:"auto"}})]})]})]})}var Yf=t(23051);function Yh(e){return"extension"===e.type?e.data.installationId:e.type}function Ym(e){var n,t,r,i,o,a,l,s,c,u,f,m,g,v,w,y,b,S,Y=(0,et.Bm)(),A=0===(0,ep.Tb)().length,x=(0,et.Vq)((0,ep.No)()),C=(n=(0,eB.A)(),r=(t=(0,Yu.q)()).neonDatabases,i=t.currentUser,o=(0,Yc.ex)({currentUser:i}),a=(0,I.C9)().agentState,l=(0,fg.G9)((0,h.useMemo)(function(){return null==a?void 0:a.select(function(e){return null==e?void 0:e.state})},[a])),s=(0,et.p3)(),u=(c=(0,d._)((0,h.useState)(function(){var e=tT.A.get(Yd(n),"string");switch(e){case"was-added-by-agent":case"callout-dismissed":return e;default:return null}}),2))[0],f=c[1],m=(0,h.useRef)(!1),g=r.length>0,w=null==(v=r[0])?void 0:v.isEphemeral,(0,h.useEffect)(function(){"callout-dismissed"!==u&&g&&!m.current&&(m.current=!0,l.current===q.g32.AGENT_STATE_RUNNING&&(s({pane:{type:"neon"}}),f("was-added-by-agent")))},[u,l,g,s]),y=(0,h.useCallback)(function(){var e="callout-dismissed";tT.A.set(Yd(n),e),f(e)},[n]),S=(b=v&&w&&o)?(0,p.Y)(eG.S,{children:(0,p.Y)(Yc.Bt,{isFrozen:v.isFrozen,scheduledFreezeTime:v.scheduledFreezeTime,scheduledDeletionTime:v.scheduledDeletionTime})}):(0,p.FD)(eW.EY,{children:["We created a database for you,",(0,p.Y)("br",{}),"manage it here"]}),{action:b?(0,p.Y)(yS.A,{context:"workspace_ephemeral_postgres_database_banner",text:"Upgrade to Replit ".concat(oX.en),colorway:"brand",variant:"outlined",style:{flex:"1 1 auto"}}):null,callout:"was-added-by-agent"===u?S:null,dismissCallout:y}),_=(0,d._)((0,h.useState)(null),2),k=_[0],D=_[1],E=(0,d._)((0,h.useState)(!1),2),R=E[0],F=E[1],T=(0,lI.Jw)(dl,u8.SidebarDock);return!x.visible||"centered"===Y||"centeredVisualPlanner"===Y||A?null:(0,p.FD)(p.FK,{children:[(0,p.Y)(Ys,{innerRef:T,width:et.Rm,filesButton:(0,p.Y)(Yr,{}),primaryTools:x.primaryTools.map(function(e){return(0,p.Y)(S9,{pane:e,openPaneIntroVideoModal:function(){D(e.type),F(!0)}},Yh(e))}),secondaryTools:x.secondaryTools.map(function(n){return"neon"===n.type?(0,p.Y)(Yp,{callout:C.callout,action:C.action,dismiss:C.dismissCallout,isOpen:null!=C.callout&&!e.isWorkspaceTourActive,dismissOnOutsideClick:!0,children:(0,p.Y)(S9,{pane:n})},Yh(n)):(0,p.Y)(S9,{pane:n},Yh(n))}),allToolsButton:(0,p.Y)(S5,{}),footer:(0,p.FD)(eG.S,{gap:4,align:"center",children:[(0,p.Y)(SN,{iconButton:!0}),(0,p.Y)(Yf.A,{})]})}),(0,p.Y)(SR,{paneType:null!=k?k:void 0,isOpen:R,onClose:function(){return F(!1)}})]})}var Yg=(0,eC.x)({root:[e_.wp.position.absolute,e_.wp.borderRadius(8),e_.wp.backgroundColor.backgroundRoot,e_.wp.pt(16),e_.wp.align.center,{border:"1px solid",borderColor:tH.LU.outlineDimmest}],content:[e_.wp.width("100%"),e_.wp.flex.growAndShrink(1)]});function Yv(){var e,n,t,r,i=(0,et.j$)(),o=(0,et.$P)(),a=(0,et.$6)(),l=(n=(e=(0,d._)((0,pe.H)({accept:[tu.pt.File,pm.N.NewPane],collect:function(e){return{isOver:e.isOver()}},hover:function(e){r.drag()},drop:function(e){if("nodes"===e.type){var n=(0,X.u9)(e.nodes);n.length>0&&r.drop({panes:n})}if(e.type===pm.N.NewPane){var t=e.pane;r.drop({panes:[t]})}}}),2))[0].isOver,t=e[1],r=(0,et.jG)({isOver:n}),t),s=ey({openPane:(0,h.useCallback)(function(e){(0,V.u4)(V.AZ.TOOL_OPENED,{source:"Empty Layout",tool:e.pane.type}),a({pane:e.pane,edge:"left"})},[a])});return(0,p.Y)(eG.S,{style:{width:i.width,height:i.height,transform:"translate(".concat(i.x,"px, ").concat(i.y,"px)"),zIndex:o?100:void 0},css:Yg.root,innerRef:l,children:(0,p.Y)(eG.S,{css:Yg.content,children:(0,p.Y)(eE.r,{autoFocus:!0,command:s,showToolDescriptions:!0})})})}var Yw=t(19540),Yy=t(10543),Yb=t(36363),YS=t(47075),YY=n7.ZU.Number({minimum:0,exclusiveMaximum:100}),YA=n7.ZU.Object({layout:eJ.y_,isActive:n7.ZU.Boolean(),sidebarPercent:n7.ZU.Optional(YY)}),Yx=n7.ZU.Object({sidebarPercent:n7.ZU.Optional(YY),sidebar:n7.ZU.Optional(Yb.Be),layout:eJ.y_,agentMode:n7.ZU.Optional(YA),data:n7.ZU.Record(n7.ZU.String(),n7.ZU.Object({type:n7.ZU.String()})),dock:n7.ZU.Optional(YS.vh)});function YC(e,n,t){var r=null;try{r=fd.T(Yx,e)}catch(e){}if(null===r)return null;var i={layout:r.layout,agentMode:r.agentMode,data:{},type:"saved",sidebarPercent:null!=(p=r.sidebarPercent)?p:Yw.TS,sidebar:null!=(f=r.sidebar)?f:{width:Yy.j,isOpen:!1},dock:r.dock?(0,YS.Gq)(r.dock,n,t):void 0},o=new Set,a=(0,eJ.PL)(i.layout),l=i.agentMode?(0,eJ.PL)(i.agentMode.layout):null,s=!0,c=!1,u=void 0;try{for(var p,f,h,m=Object.entries(r.data)[Symbol.iterator]();!(s=(h=m.next()).done);s=!0){var g=(0,d._)(h.value,2),v=g[0],w=g[1];if(a.has(v)||null!==l&&l.has(v)){var y=n(w.type,w);if(!y){o.add(v);continue}i.data[v]=y}}}catch(e){c=!0,u=e}finally{try{s||null==m.return||m.return()}finally{if(c)throw u}}return(0,ab.jM)(i,function(e){var n=function(n){if(a.has(n))return void(0,eJ.fU)(e.layout,n);e.agentMode&&(null==l?void 0:l.has(n))&&(0,eJ.fU)(e.agentMode.layout,n)},t=!0,r=!1,i=void 0;try{for(var s,c=o[Symbol.iterator]();!(t=(s=c.next()).done);t=!0){var u=s.value;n(u)}}catch(e){r=!0,i=e}finally{try{t||null==c.return||c.return()}finally{if(r)throw i}}var p=!0,f=!1,h=void 0;try{for(var m,g=Object.entries(e.data)[Symbol.iterator]();!(p=(m=g.next()).done);p=!0){var v=(0,d._)(m.value,2),w=v[0],y=v[1];"commands"!==y.type&&("codeEditor"!==y.type||y.data.path)&&"agentProgress"!==y.type||(delete e.data[w],n(w))}}catch(e){f=!0,h=e}finally{try{p||null==g.return||g.return()}finally{if(f)throw h}}})}var Y_=t(65465),Yk=t(76136);function YD(e){var n,t,r,i,o,a,l,s=e.repl,c=e.currentUser,u=(0,f.useRouter)(),g=(0,N.pE)("enterInAgentMode","boolean"),v=(0,N.pE)("agent","boolean"),w=(0,N.pE)("agentOnboarding","boolean"),y=(0,N.pE)("popupId","string"),b=(0,U.Po)(u),S=(0,U.ME)(u,"workspace2"),Y=(0,d._)((0,h.useState)(function(){var e;return(0,X.HJ)({config:(e=(0,yj.P)(),(0,e6._)((0,m._)({},e),{webview:ys,commands:hj,debugger:md,docs:mh,chat:hG,threadInbox:wf,tutorial:wY,extension:mS,extensionStore:g8,replAuth:va,searchReplace:wc,deployments:yq.B,config:h$,preferences:vt,integrations:yK.u,extensionDevtools:g1,csvPreview:yZ.J,workspaceTourGuide:yV,agentChat:fV,agentProgress:y$.M,multiplayer:y$.M}))})}),1)[0],A=(0,P.g)("isLayoutStacked").preferences,x=null,C=(0,N.pE)("gitImport","boolean"),k=(t=(n={repl:s}).repl,i=void 0===(r=n.entrypoint)?"":r,(0,h.useMemo)(function(){var e=t.language.startsWith("html"),n={config:{paneId:(0,iq.A)(),pane:{type:"config",flow:"githubImport"}},codeEditor:{paneId:(0,iq.A)(),pane:{type:"codeEditor",data:{path:i}}},output:{paneId:(0,iq.A)(),pane:{type:e?"webview":"runnerOutput"}},shell:{paneId:(0,iq.A)(),pane:{type:"shell"}}};return{sidebarPercent:0,type:"default",data:Object.values(n).reduce(function(e,n){var t=n.pane;return e[n.paneId]=t,e},{}),layout:{floating:[],tiling:{type:"split",percent:100,stacked:!1,children:[{id:(0,iq.A)(),type:"paneGroup",percent:40,activeIndex:0,panes:[n.config.paneId]},{id:(0,iq.A)(),type:"split",percent:60,stacked:!0,children:[{id:(0,iq.A)(),type:"paneGroup",percent:50,activeIndex:0,panes:[n.codeEditor.paneId]},{id:(0,iq.A)(),type:"paneGroup",percent:50,activeIndex:0,panes:[n.output.paneId,n.shell.paneId]}]}]}}}},[t,i])),D=!!s.config.isAgentRepl,E=g||D;y?x=YC((0,d9.oN)(y),Y.decode,{isAgentChatEnabled:E}):s.layoutState?x=YC(s.layoutState,Y.decode,{isAgentChatEnabled:E}):C&&(x=k);var R=v||w||(null==x?void 0:x.agentMode)==null&&D,I=function(e){var n,t=e.repl,r=e.currentUser,i=e.savedLayoutState,o=e.isAgentChatEnabled,a=void 0!==o&&o,l=e.enteredWithAgentPrompt,s=e.isAgentOnboarding,c=void 0!==s&&s,u=(0,_._P)({controlName:"flag-projects-workspace-tour",default:!1}),d=(0,_._P)({controlName:"flag-ws-guided-tour",default:!1});if(!t||!r||null!=t.lesson||t.config.isInPlanningPhase)return null;var p=!(void 0!==l&&l)&&!c;if(p&&!r.hasSeenWorkspaceTour2024)return{id:dl,steps:[a?de:dn,dt,dr,di,da].filter(Boolean)};if(a||c)return null;var f=null!=i&&Object.values(null==i?void 0:i.data).some(function(e){return"workspaceTourGuide"===e.type});if(d&&f){var h=function(e){switch(e){case"workspace-guided-tour-data-app":return yL.IW;case"workspace-guided-tour-portfolio-website":return yU._t;default:return}}((0,bX.Y)(t));if(null!=h)return h}return p||r.hasSeenWorkspaceTour2021||r.hasSeenSidebarTour2022||r.hasSeenWorkspaceTour2022?!r.hasSeenProjectsTour2024&&(null==(n=t.project)?void 0:n.id)&&u?lR.X:null:u2.C}({repl:s,currentUser:c,savedLayoutState:x,isAgentChatEnabled:E,enteredWithAgentPrompt:g,isAgentOnboarding:w}),T=(o=(0,N.pE)("deploymentPane","boolean"),a=(0,N.pE)("projectPane","boolean"),l=(0,N.pE)("workspaceTourGuidePane","boolean"),(0,L.A)(function(){return o?{type:"deployments"}:a?{type:"project"}:l?{type:"workspaceTourGuide"}:void 0},[o,a,l])),B=g||!!s.config.isInPlanningPhase;return(0,p.FD)(O.Ve,{currentUsername:c.username,replId:s.id,children:[(0,p.Y)(t8.CP,{isAgentOnboarding:w,children:(0,p.Y)(et.xm,{initialPane:T,savedLayoutState:x,isHTML:s.language.startsWith("html"),isStacked:A.isLayoutStacked,isExtension:!!s.config.isExtension,isBlankRepl:F(s),agentCenteredLayout:B,popupId:y,agentDefaultLayout:R,children:(0,p.Y)(b1,{tour:I,userId:c.id,children:(0,p.Y)(YE,{ui:Y,repl:s,currentUser:c,isBonsaiWebview:b,doesBonsaiSupportWorkspace2:S,agentChatEnabled:E,activeWorkspaceTour:I},s.id)})})}),(0,p.Y)(M.A,{})]})}function YE(e){var n,t,r,i,o,a,l,s,c,u,f,m,g,v,w,y,b,S,Y,A=e.repl,x=e.currentUser,C=e.isBonsaiWebview,k=e.doesBonsaiSupportWorkspace2,D=e.ui,E=e.agentChatEnabled,R=e.activeWorkspaceTour,F=(n=(0,et.q5)(),t=(0,et.f)(),r=(0,et.cC)(),i=(0,bp.iO)(),o=(0,_._P)({controlName:"flag-null-diagnostics",logFlagToAnalytics:!1}),a="html"===A.language?"html":"outputs",s=(l=(0,d._)((0,h.useState)(!1),2))[0],c=l[1],f=(u=(0,d._)((0,h.useState)(!1),2))[0],m=u[1],g=(0,uw.q6)(),v=(0,uw.DJ)(),w=(0,_._P)({controlName:"flag-open-telemetry-tracing"}),y=(0,_._P)({controlName:"flag-multi-lsp-connections"}),b=(0,L.A)(function(){return{runnerMode:a,onPresenceCommand:g,getColorForUser:v,onUnrecoverableError:(0,b5.A)({origin:"replEnvironmentDesktop: services/unrecoverableError",tags:{environment:"desktop"},onNonBsodUnrecoverableError:function(e){e===T.ub.NotAllowed?c(!0):e===T.ub.RequiresRefresh&&m(!0)},throwBsod:i}),openFile:n,openMultipleFiles:t,openMultipleURLs:r,enableUserEvents:o,enableMultipleLSPClientsPerFile:y,openTelemetryTracing:w,enableReplspaceSshTokenPassthrough:!0}},[o,a,n,t,r,i,g,v,w,y]),S=(0,b2.q)(b),(0,L.A)(function(){return{services:S,isPleaseRefresh:f,isNotAllowed:s}},[S,f,s])),P=F.services,U=F.isPleaseRefresh,N=F.isNotAllowed,O=(0,t8.eg)();(0,SA.X$)(!!A.layoutState);var M=(0,L.A)(function(){return(0,oE.Y)(null==x?void 0:x.keybindings.keybindings)},[x]);if(!P)return null;var B=A.authorizations.useAdvancedChat.isAuthorized;return(0,p.Y)(I.KH,{replId:A.id,currentUserId:x.id,currentUserTimeCreated:x.timeCreated,hasAccessToAdvancedModel:B,agentChatEnabled:E,orgId:null==(Y=A.org)?void 0:Y.id,children:(0,p.Y)(t2.SF,{children:(0,p.FD)(oL,{services:P,ui:D,repl:A,userKeybindings:M,children:[(0,p.FD)(pg.A,{origin:"ErrorBoundary: ReplEnvironmentDesktop Top level",bsod:!0,children:[(0,p.Y)(od,{}),(0,p.Y)(iR,{isAdmin:x.isAdmin,isSubscribed:x.isSubscribed}),(0,p.Y)(SS.A,{repl:A}),C?(0,p.Y)(d$,{doesBonsaiSupportWorkspace2:k,isAgentOnboarding:O}):(0,p.Y)(dz,{isAgentOnboarding:O}),C&&!k?(0,p.Y)(oW,{}):null,(0,p.Y)(eT,{}),(0,p.Y)(oO,{repl:A}),(0,p.Y)(bQ,{repl:A,currentUser:x}),(0,p.Y)(a9,{}),(0,p.Y)(YP,{isBonsaiWebview:C&&!k,isWorkspaceTourActive:!!R}),(0,p.Y)(tR,{}),(0,p.Y)(a6,{}),(0,p.Y)(Se.A,{}),(0,p.Y)(Sf,{}),(0,p.Y)(YI,{isMultiplayerSession:A.multiplayers.length>0}),(0,p.Y)(Sy.A,{isOpen:N}),(0,p.Y)(fH.A,{isOpen:U}),(0,p.Y)(Yk.$,{}),(0,p.Y)(Y_.F,{}),(0,p.Y)(tC,{}),(0,p.Y)(oM,{}),(0,p.Y)(Sn.P,{}),(0,p.Y)(SY.y,{repl:A})]}),(0,p.Y)(YR,{replId:A.id})]})})})}function YR(e){var n=e.replId,t=(0,d._)((0,bp.eY)(),1)[0],r=(0,d._)((0,R.A)(),1)[0],i=(0,h.useCallback)(function(){r({variables:{input:{replId:n,state:{}}}})},[r,n]);return(0,h.useEffect)(function(){t&&i()},[t,i]),(0,p.Y)(b4.A,{})}function YI(e){var n,t,r,i,o,a=(n=e.isMultiplayerSession,r=(t=(0,d._)((0,h.useState)(!1),2))[0],i=t[1],o=(0,lI.qv)(),(0,h.useEffect)(function(){!o&&n&&"default"===d1()&&i(!0)},[n,o]),{shouldShowModal:r,hideModal:(0,h.useCallback)(function(){d3(!0),i(!1)},[]),confirm:(0,h.useCallback)((0,H._)(function(){return(0,z.YH)(this,function(e){switch(e.label){case 0:return[4,function(){return d4.apply(this,arguments)}()];case 1:return e.sent(),i(!1),[2]}})}),[])}),l=a.shouldShowModal,s=a.hideModal,c=a.confirm;return l?(0,p.Y)(Sb,{onCancel:s,onConfirm:c}):null}var YF=(0,tB.i7)({from:{opacity:0},to:{opacity:1}}),YT=(0,eC.x)({containerRoot:[e_.wp.width("100%"),e_.wp.left(0),e_.wp.position.absolute],main:[{animation:"".concat(YF," 0.2s ease-in-out")}]});function YP(e){var n,t,r,i,o,a,l,s=e.isBonsaiWebview,c=e.isWorkspaceTourActive,u=(n=(0,et.GC)(),t=(0,r0.A)(),r=(0,lv.vm)(),i=(0,lv.d0)(),o=(r||i)&&t?ui.uF:0,a=(0,h.useRef)(null),l=(0,dJ.A)(function(e){var t=e.width,r=e.height;if(t&&r&&a.current){var i=a.current.getBoundingClientRect(),l=i.top;n({width:t,height:r,x:i.left,y:l-o})}}),(0,h.useCallback)(function(e){a.current=e,l(e)},[l])),d=(0,et.Xn)(),f=(0,et.WM)(),m=(0,et.Il)(),g=(0,et.nR)(),v=(0,h.useRef)(null),w=(0,I.jt)(),y=(0,h.useCallback)(function(e){u(e),v.current=e},[u]);return(0,p.FD)(eG.S,{innerRef:y,css:YT.containerRoot,style:s?{height:"calc(100% - 4px)",top:6,bottom:0}:{height:"calc(100% - ".concat(ui.uF,"px)"),top:ui.uF},children:[d?(0,p.FD)(p.FK,{children:[(0,p.Y)(rj,{}),(0,p.FD)("main",{id:"main-content",css:YT.main,style:w?{animation:"none"}:void 0,children:[m.map(function(e){return(0,p.Y)(y2,{handleId:e},e)}),g.map(function(e){return(0,p.Y)(fu,{headerId:e},e)}),f.map(function(e){return(0,p.Y)(pY,{paneId:e},e)}),0===f.length?(0,p.Y)(Yv,{}):null]}),(0,p.Y)(et.Ij,{}),(0,p.Y)(et.ht,{}),(0,p.Y)(px,{}),(0,p.Y)(oA,{}),(0,p.Y)(SE,{}),(0,p.Y)(t2.tz,{}),(0,p.Y)(Ym,{isWorkspaceTourActive:c})]}):null,(0,p.Y)(b9,{})]})}var YL=t(55123),YU=t(97168),YN=t(6571),YO=t(84067),YM=t(92609),YB=t(12605),YH=t(13911),Yz=t(16772),YW=(0,tB.AH)([e_.wp.position.fixed,e_.wp.top(0),e_.wp.left(0),e_.wp.height("100%"),e_.wp.width("100%")]),YG=(0,tB.AH)([e_.wp.center,e_.wp.flex.growAndShrink(1),e_.wp.dragRegion]),YV=(0,tB.AH)([e_.wp.center,e_.wp.flex.growAndShrink(1)]);let Yj=function(){var e,n,t,r=null,i=(0,f.useRouter)().query;if(!i.replUrl)throw Error("Expected replUrl to be set");if(!i.replId)throw Error("Expected replId to be set");var o=(0,d._)((0,D.t)(),2),a=(o[0],o[1]),l=i.replUrl.toString(),s=i.replId.toString(),c=(0,k.A)(s).loading,u=(e={variables:{replId:s,environment:(0,YO.v)(),platform:(0,YM.V)()},ssr:!!i.ssr},n=(0,m._)({},A,e),w.I(x,n)),g=u.data,v=u.loading,y=u.error,b=(0,_._P)({controlName:"flag-token-email-verification"}),S=(null==g?void 0:g.currentUser)||void 0,Y=(null==g?void 0:g.getRepl)&&("Repl"===g.getRepl.__typename||"ReplRedirect"===g.getRepl.__typename||"ReplSubscriptionExpired"===g.getRepl.__typename)?g.getRepl:null,R=(null==g?void 0:g.getRepl)&&"Repl"!==g.getRepl.__typename&&"ReplRedirect"!==g.getRepl.__typename&&"ReplSubscriptionExpired"!==g.getRepl.__typename?g.getRepl.message:null,I=(null==Y?void 0:Y.__typename)==="Repl"?Y:null,F="https://replit.com".concat(l),T=null!=(t=null==I?void 0:I.description)?t:void 0,P=null!=R?R:null==y?void 0:y.message,L=(0,d._)((0,h.useState)(!1),2),U=L[0],N=L[1];(0,h.useEffect)(function(){return N(!0)},[]);var O=b&&S&&!S.isVerified;return r=O?(0,p.Y)(eG.S,{css:YV,children:(0,p.Y)(C.A,{})}):P?(0,p.Y)(eG.S,{css:[e_.wp.center,e_.wp.flex.growAndShrink(1)],children:(0,p.Y)(eW.EY,{multiline:!1,children:"Something went wrong loading the Repl. Please reload the page and try again."})}):v||!U||a||c?(0,p.Y)(eG.S,{css:YG,children:(0,p.Y)(YB.A,{height:100})}):I&&S?(0,p.Y)(YD,{repl:I,currentUser:S},I.id):(0,p.Y)(eG.S,{css:YG,children:(0,p.Y)(YB.A,{height:100})}),(0,p.Y)(YH.A,{children:(0,p.FD)(Yz.A,{dataCy:"workspace-page",title:"".concat((null==I?void 0:I.title)||""),oembedUrl:F,description:T,noHeader:!O,noMain:!O,noSidebar:!O,noFooter:!0,hideEmailVerify:!0,children:[(0,p.Y)(E.d,{}),(0,p.Y)(YN.A,{replResponse:Y,replUrl:l,children:(0,p.FD)(eD.ui,{css:YW,children:[(0,p.Y)(YL.z,{}),(0,p.Y)(YU.u,{}),r]})})]})})}},85575:(e,n,t)=>{"use strict";t.d(n,{l:()=>l});var r=t(12584),i=t(41114),o=t(5465);function a(){var e=(0,r._)(["\n  fragment BulkDeleteConfirmationModalRepl on Repl {\n    id\n    iconUrl\n    title\n    hostingDeployment {\n      ... on HostingDeployment {\n        id\n        replitAppSubdomain\n        ...BuildStatusBadgeHostingDeployment\n      }\n    }\n  }\n  ","\n"]);return a=function(){return e},e}var l=(0,i.J1)(a(),o.F)},86169:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(88263),a=t(71117);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M1.25 6A2.75 2.75 0 0 1 4 3.25h16A2.75 2.75 0 0 1 22.75 6v12A2.75 2.75 0 0 1 20 20.75H4A2.75 2.75 0 0 1 1.25 18V6ZM4 4.75c-.69 0-1.25.56-1.25 1.25v12c0 .69.56 1.25 1.25 1.25h16c.69 0 1.25-.56 1.25-1.25V6c0-.69-.56-1.25-1.25-1.25H4ZM4.25 8A.75.75 0 0 1 5 7.25h2a.75.75 0 0 1 0 1.5H5A.75.75 0 0 1 4.25 8Zm5 0a.75.75 0 0 1 .75-.75h1a.75.75 0 0 1 0 1.5h-1A.75.75 0 0 1 9.25 8Zm4 0a.75.75 0 0 1 .75-.75h1a.75.75 0 0 1 0 1.5h-1a.75.75 0 0 1-.75-.75Zm4 0a.75.75 0 0 1 .75-.75h1a.75.75 0 0 1 0 1.5h-1a.75.75 0 0 1-.75-.75Zm-13 4a.75.75 0 0 1 .75-.75h1a.75.75 0 0 1 0 1.5H5a.75.75 0 0 1-.75-.75Zm4 0a.75.75 0 0 1 .75-.75h1a.75.75 0 0 1 0 1.5H9a.75.75 0 0 1-.75-.75Zm4 0a.75.75 0 0 1 .75-.75h1a.75.75 0 0 1 0 1.5h-1a.75.75 0 0 1-.75-.75Zm4 0a.75.75 0 0 1 .75-.75h2a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1-.75-.75Zm-9 4a.75.75 0 0 1 .75-.75h8a.75.75 0 0 1 0 1.5H8a.75.75 0 0 1-.75-.75Z",clipRule:"evenodd"})}))}},86529:(e,n,t)=>{"use strict";t.d(n,{qA:()=>u});var r=t(17844),i=t(12584),o=t(41114),a=t(86997);function l(){var e=(0,i._)(["\n  query CheckReplitAppSubdomainAvailability(\n    $subdomain: String!\n    $deploymentId: String\n  ) {\n    replitAppSubdomainAvailability(\n      subdomain: $subdomain\n      deploymentId: $deploymentId\n    ) {\n      __typename\n      ... on ReplitAppSubdomainAvailabilityResult {\n        available\n        message\n      }\n      ... on UserError {\n        errorMessage: message\n      }\n    }\n  }\n"]);return l=function(){return e},e}var s={},c=(0,o.J1)(l());function u(e){var n=(0,r._)({},s,e);return a.I(c,n)}},87345:(e,n,t)=>{"use strict";t.d(n,{An:()=>C,PQ:()=>D,ce:()=>k,mC:()=>R});var r=t(17844),i=t(12584),o=t(41114),a=t(86997),l=t(78628),s=t(11725),c=t(60236),u=t(72667);function d(){var e=(0,i._)(["\n  fragment OrgReplMultiplayers on Repl {\n    multiplayers {\n      id\n      displayName\n      username\n      url\n      image\n      presenceStatus {\n        isOnline\n      }\n    }\n  }\n"]);return d=function(){return e},e}function p(){var e=(0,i._)(["\n  fragment OrgReplTemplateInfo on Repl {\n    templateInfo {\n      label\n      replId\n      iconUrl\n    }\n  }\n"]);return p=function(){return e},e}function f(){var e=(0,i._)(["\n  fragment OrgReplHostingDeployment on Repl {\n    hostingDeployment {\n      __typename\n      ... on HostingDeployment {\n        id\n        latestBuildStatus\n        currentBuild {\n          id\n          status\n          timeCreated\n          user {\n            id\n            displayName\n          }\n        }\n      }\n    }\n  }\n"]);return f=function(){return e},e}function h(){var e=(0,i._)(["\n  fragment OrgReplOwner on Repl {\n    owner {\n      __typename\n      ... on User {\n        id\n        username\n        url\n        image\n      }\n      ... on Team {\n        id\n        username\n        url\n        image\n      }\n    }\n  }\n"]);return h=function(){return e},e}function m(){var e=(0,i._)(["\n  fragment OrgReplAuthorizations on Repl {\n    authorizations {\n      editFileContents {\n        isAuthorized\n        code\n        message\n      }\n      viewFileContents {\n        isAuthorized\n        code\n        message\n      }\n      connectToWorkspace {\n        isAuthorized\n        code\n        message\n      }\n      deleteRepl {\n        isAuthorized\n        code\n        message\n      }\n      fork {\n        isAuthorized\n        code\n        message\n      }\n    }\n  }\n"]);return m=function(){return e},e}function g(){var e=(0,i._)(["\n  fragment OrgReplListRepl on Repl {\n    __typename\n    id\n    title\n    timeCreated\n    timeUpdated\n    imageUrl\n    iconUrl\n    wasPublished\n    isOwner\n    org {\n      id\n    }\n    project {\n      id\n      title\n    }\n    user {\n      id\n      ...OrgReplCreator\n    }\n    ...ReplLinkRepl\n    ...OrgReplMultiplayers\n    ...OrgReplTemplateInfo\n    ...OrgReplHostingDeployment\n    ...OrgReplOwner\n    ...OrgReplAuthorizations\n    ...ComponentsReplActions\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return g=function(){return e},e}function v(){var e=(0,i._)(["\n  fragment OrgReplsResult on ReplConnection {\n    items {\n      ...OrgReplListRepl\n    }\n    pageInfo {\n      hasPreviousPage\n      previousCursor\n      hasNextPage\n      nextCursor\n    }\n  }\n  ","\n"]);return v=function(){return e},e}function w(){var e=(0,i._)(["\n  fragment OrgReplManagement on Org {\n    ...OrgMetadata\n    authorizations {\n      createPublicRepl: createRepl(private: false) {\n        isAuthorized\n        message\n      }\n      createPrivateRepl: createRepl(private: true) {\n        isAuthorized\n        message\n      }\n    }\n  }\n  ","\n"]);return w=function(){return e},e}function y(){var e=(0,i._)(["\n  query OrgRepls($orgId: String!, $replsInput: OrgReplsInput!) {\n    currentUser {\n      __typename\n      id\n      org(orgId: $orgId) {\n        __typename\n        ... on Org {\n          ...OrgReplManagement\n          repls(input: $replsInput) {\n            __typename\n            ... on ReplConnection {\n              ...OrgReplsResult\n            }\n            ... on UserError {\n              message\n            }\n          }\n        }\n        ... on Error {\n          message\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return y=function(){return e},e}var b={},S=(0,o.J1)(d()),Y=(0,o.J1)(p()),A=(0,o.J1)(f()),x=(0,o.J1)(h()),C=(0,o.J1)(m()),_=(0,o.J1)(g(),u._L,s.r,S,Y,A,x,C,l.X),k=(0,o.J1)(v(),_),D=(0,o.J1)(w(),c.wW),E=(0,o.J1)(y(),D,k);function R(e){var n=(0,r._)({},b,e);return a.I(E,n)}},87713:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(88263),a=t(71117);function l(e){return(0,o.FD)(a.Ay,(0,i._)((0,r._)({},e),{children:[(0,o.Y)("path",{fillRule:"evenodd",d:"M5 3.75A1.25 1.25 0 0 0 3.75 5v14.19l2.72-2.72a.75.75 0 0 1 .53-.22h12A1.25 1.25 0 0 0 20.25 15v-3a.75.75 0 0 1 1.5 0v3A2.75 2.75 0 0 1 19 17.75H7.31l-3.78 3.78A.75.75 0 0 1 2.25 21V5A2.75 2.75 0 0 1 5 2.25h7a.75.75 0 0 1 0 1.5H5Z",clipRule:"evenodd"}),(0,o.Y)("path",{d:"M19 1a.8.8 0 0 1 .8.8v2.4h2.4a.8.8 0 0 1 0 1.6h-2.4v2.4a.8.8 0 0 1-1.6 0V5.8h-2.4a.8.8 0 0 1 0-1.6h2.4V1.8A.8.8 0 0 1 19 1Z"})]}))}},87859:(e,n,t)=>{"use strict";t.d(n,{D:()=>o});var r=t(49069),i=t(26550);function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=r.Pe.define(),o=r.sU.define({create:function(){return n},update:function(n,r){return(0,i.C)(r,t,function(t){n=e(t.value,n)}),n}});return{effect:t,state:o}}},87882:(e,n,t)=>{"use strict";t.d(n,{g:()=>s});var r=t(29935),i=t(12694),o=t(82643),a=t(21462),l=t(82977);function s(e){var n=e.secrets,t=e.replId,s=(0,i._)((0,a.useState)(null),2),c=s[0],u=s[1],d=(0,l.R_)({variables:{replId:t}}).data;return(0,a.useEffect)(function(){function e(){return(e=(0,r._)(function(){return(0,o.YH)(this,function(e){switch(e.label){case 0:return[4,n.read()];case 1:return u.apply(void 0,[e.sent()]),[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[n]),{devSecrets:(0,a.useMemo)(function(){if(!c)return null;var e=new Map;if((null==d?void 0:d.getRepl.__typename)==="Repl"&&d.getRepl.sharedSecretLinks&&(null==(a=d.currentUser)?void 0:a.secrets.__typename)==="SharedSecretConnection"){var n=d.currentUser.secrets.items,t=!0,r=!1,o=void 0;try{for(var a,l,s=d.getRepl.sharedSecretLinks[Symbol.iterator]();!(t=(l=s.next()).done);t=!0)!function(){var t=l.value,r=n.find(function(e){return e.id===t.secret.id});r&&e.set(t.alias,r.value)}()}catch(e){r=!0,o=e}finally{try{t||null==s.return||s.return()}finally{if(r)throw o}}}var u=!0,p=!1,f=void 0;try{for(var h,m=c.entries()[Symbol.iterator]();!(u=(h=m.next()).done);u=!0){var g=(0,i._)(h.value,2),v=g[0],w=g[1];e.set(v,w)}}catch(e){p=!0,f=e}finally{try{u||null==m.return||m.return()}finally{if(p)throw f}}return e},[d,c])}}},88010:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(88263),a=t(71117);function l(e){return(0,o.FD)(a.Ay,(0,i._)((0,r._)({},e),{children:[(0,o.Y)("path",{fillRule:"evenodd",d:"M1 6.359C1 3.399 3.4 1 6.359 1h11.282C20.601 1 23 3.4 23 6.359v11.282C23 20.601 20.6 23 17.641 23H6.359C3.399 23 1 20.6 1 17.641V6.359Zm5.359-3.667A3.667 3.667 0 0 0 2.692 6.36v11.282a3.667 3.667 0 0 0 3.667 3.667h11.282a3.667 3.667 0 0 0 3.667-3.667V6.359a3.667 3.667 0 0 0-3.667-3.667H6.359Z",clipRule:"evenodd"}),(0,o.Y)("path",{d:"M10.65 10.73H6.536V9.708h1.59v-3.96h-.075L6.85 7.32l-.812-.635L7.45 4.825h1.946v4.882h1.252v1.024ZM15.723 10.832c-1.582 0-2.31-1.125-2.31-3.054 0-1.93.728-3.055 2.31-3.055s2.31 1.125 2.31 3.055c0 1.929-.728 3.054-2.31 3.054Zm0-.998c.753 0 1.015-.567 1.015-1.506v-1.1c0-.94-.262-1.506-1.015-1.506-.753 0-1.015.566-1.015 1.506v1.1c0 .939.262 1.506 1.015 1.506Zm0-1.557c-.39 0-.525-.178-.525-.406v-.186c0-.229.136-.407.525-.407.39 0 .525.178.525.407v.186c0 .228-.136.406-.525.406ZM8.28 19.294c-1.582 0-2.31-1.125-2.31-3.055 0-1.929.728-3.054 2.31-3.054 1.583 0 2.31 1.125 2.31 3.054 0 1.93-.727 3.055-2.31 3.055Zm0-.999c.753 0 1.016-.567 1.016-1.506v-1.1c0-.939-.263-1.506-1.016-1.506s-1.015.567-1.015 1.506v1.1c0 .94.262 1.506 1.015 1.506Zm0-1.557c-.389 0-.524-.177-.524-.406v-.186c0-.228.135-.406.524-.406.39 0 .525.178.525.406v.186c0 .229-.136.406-.525.406ZM18.092 19.192H13.98V18.17h1.59v-3.96h-.075l-1.202 1.573-.812-.634 1.413-1.862h1.946v4.883h1.252v1.023Z"})]}))}},88048:(e,n,t)=>{"use strict";t.d(n,{R:()=>f});var r=t(88263),i=t(21462),o=t(36640),a=t(96211),l=t(41852),s=t(79209),c=t(48521),u=t(46603),d=t(26976),p=(0,s.AH)([c.wp.mt(8)]);function f(e){var n=e.onOpenEnvEditor,t=(0,l.eg)(),s=(0,a.A)(),c=(0,o.A)(),f=(0,i.useRef)(!1);(0,i.useEffect)(function(){if(s&&!f.current&&!t){var e=c.showNotice((0,r.FD)(r.FK,{children:[(0,r.Y)("div",{children:"This App contains secrets that are missing values."}),(0,r.Y)("div",{children:"Add values to ensure the App runs as expected."}),(0,r.Y)("div",{children:(0,r.Y)(u.$n,{size:"small",iconLeft:(0,r.Y)(d.A,{}),css:p,colorway:"primary",onClick:function(){n(),c.hideMessage(e)},text:"Manage secrets"})})]}),1e4);f.current=!0}},[s])}},88091:e=>{e.exports={root:"Chat_root__Yf_1K",emptyState:"Chat_emptyState__uhAy7",footerRow:"Chat_footerRow__0dttJ",footerContainer:"Chat_footerContainer__KTEt5",footerContainerLimitedWidth:"Chat_footerContainerLimitedWidth__PV9Wu"}},88291:(e,n,t)=>{"use strict";t.d(n,{H3:()=>h,NP:()=>g,lb:()=>p});var r=t(17844),i=t(12584),o=t(41114),a=t(50175),l=t(51026);function s(){var e=(0,i._)(["\n  fragment CreateProjectBeforeForkReplContext on Repl {\n    id\n    title\n    description\n    publishedAs\n    user {\n      id\n      username\n    }\n    deployment {\n      activeRelease {\n        id\n      }\n    }\n    org {\n      id\n    }\n  }\n"]);return s=function(){return e},e}function c(){var e=(0,i._)(["\n  mutation CreateProjectBeforeFork($input: CreateProjectInput!) {\n    createProject(input: $input) {\n      __typename\n      ... on Error {\n        message\n      }\n      ... on Project {\n        id\n        mainRepl {\n          id\n          project {\n            id\n          }\n        }\n      }\n    }\n  }\n"]);return c=function(){return e},e}function u(){var e=(0,i._)(["\n  query CreateProjectCheckForProject($id: String!) {\n    getRepl(id: $id) {\n      ... on Repl {\n        id\n        project {\n          id\n        }\n      }\n    }\n  }\n"]);return u=function(){return e},e}var d={},p=(0,o.J1)(s()),f=(0,o.J1)(c());function h(e){var n=(0,r._)({},d,e);return a.n(f,n)}var m=(0,o.J1)(u());function g(e){var n=(0,r._)({},d,e);return l._(m,n)}},88694:(e,n,t)=>{"use strict";t.d(n,{_:()=>c});var r=t(29935),i=t(82643),o=t(12584);function a(){var e=(0,o._)(["\n  query FiletreeDownloadZip($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        url\n      }\n    }\n  }\n"]);return a=function(){return e},e}var l=(0,t(41114).J1)(a()),s=t(40493);function c(e){return u.apply(this,arguments)}function u(){return(u=(0,r._)(function(e){var n,t,r;return(0,i.YH)(this,function(i){switch(i.label){case 0:return[4,null===s.V||void 0===s.V?void 0:s.V.query({query:l,variables:{replId:e}})];case 1:return r=(null==(t=i.sent())||null==(n=t.data)?void 0:n.repl.__typename)==="Repl"?t.data.repl.url:window.location.pathname,window.open(r+".zip","_blank"),[2]}})})).apply(this,arguments)}},88734:(e,n,t)=>{"use strict";t.d(n,{d:()=>r});var r=function(e){return e.Loading="Loading",e.Ready="Ready",e.Preparing="Preparing",e.Deploying="Deploying",e.ProcessingLifecycleCommand="ProcessingLifecycleCommand",e.Suspended="Paused",e}({})},88800:(e,n,t)=>{"use strict";t.d(n,{Nx:()=>ed,jl:()=>ep,Ay:()=>ef});var r=t(12694),i=t(86105),o=t(88263),a=t(71115),l=t(21462),s=t(7576),c=t.n(s),u=t(35084),d=t(17844),p=t(12584),f=t(41114),h=t(86997),m=t(95131);function g(){var e=(0,p._)(["\n  query MultiplayerManager($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        isOwner\n        collaborators {\n          user {\n            ...MultiplayerUser\n          }\n        }\n        authorizations {\n          editPermissions {\n            isAuthorized\n          }\n        }\n        multiplayerInvites {\n          email\n          type\n        }\n      }\n    }\n    currentUser {\n      id\n      isSubscribed\n    }\n  }\n  ","\n"]);return g=function(){return e},e}var v={},w=(0,f.J1)(g(),m._9),y=t(38904),b=t(79560),S=t(79784),Y=t(13771),A=t(76126),x=function(e){var n=e.isOpen,t=e.onClose,r=e.onPurchaseComplete;return(0,o.Y)(Y.A,{isOpen:n,onClose:t,type:"purchase",contextualUpsell:(0,o.FD)(o.FK,{children:[(0,o.Y)(A.EY,{variant:"subheadBig",children:"Upgrade for more collaborators"}),(0,o.FD)(A.EY,{multiline:!0,children:["Share your Apps with up to ",y.z$," collaborators with Replit ",S.en]})]}),onPurchaseComplete:r,analyticsContext:{upgrade:{context:"workspace_multiplayer_header"}}})},C=t(61018),_=t(29542),k=t.n(_),D=t(80739),E=t(53231),R=t(45263),I=t(64583),F=t(29e3),T=t(48521),P=t(39999),L=t(49150),U=t(10429),N=t(91932),O=t(37037),M=t(66366),B=t(2115),H=t(90419),z=t(83023),W=t(74021),G=function(e){var n=e.isOpen,t=e.onClose,r=(0,N.s)();return(0,l.useEffect)(function(){n&&(0,E.u4)(E.AZ.ORG_UPGRADE_MODAL_VIEWED,{surface:"workspace_multiplayer_header"})},[n]),(0,o.Y)(L.a,{fitContent:!0,centered:!0,maxWidth:400,isOpen:n,onRequestClose:t,noPadding:!0,children:(0,o.FD)(U.S,{css:j.self,px:32,py:16,gap:16,children:[(0,o.Y)(U.S,{children:(0,o.FD)(U.S,{gap:2,children:[(0,o.Y)(A.EY,{variant:"subheadBig",children:"Join Teams for more collaborators"}),(0,o.Y)(A.EY,{multiline:!0,children:"Work across Apps with all your teammates"}),(0,o.FD)(U.S,{pt:8,row:!0,gap:8,children:[(0,o.Y)(A.Y9,{variant:"headerDefault",level:3,css:j.priceText,children:r.Teams.costInCents.monthly?(0,o.Y)(A.Y9,{variant:"headerBig",level:3,css:j.priceText,children:(0,D.b0)(r.Teams.costInCents.monthly)}):(0,o.Y)("div",{css:j.priceLoader})}),(0,o.FD)(U.S,{children:[(0,o.Y)(A.EY,{variant:"small",color:"dimmest",children:"per user"}),(0,o.Y)(A.EY,{variant:"small",color:"dimmest",children:"per month"})]})]}),(0,o.FD)(U.S,{pt:12,gap:16,children:[(0,o.Y)(V,{title:"Everything in ".concat(S.en),subtitle:"Unlimited private Apps, advanced AI chat, and more",icon:(0,o.Y)(B.A,{})}),(0,o.Y)(V,{title:"Shared projects and resources",subtitle:"Collaborate with your team in real-time",icon:(0,o.Y)(W.A,{})}),(0,o.Y)(V,{title:"Granular permissions",subtitle:"Manage permssions for each team member",icon:(0,o.Y)(M.A,{})}),(0,o.Y)(V,{title:"Centralized billing",subtitle:"Consolidate all your payments in one place",icon:(0,o.Y)(H.A,{})}),(0,o.Y)(U.S,{children:(0,o.Y)(k(),{href:"/pricing",target:"_blank",onClick:function(){(0,E.u4)(E.AZ.ORG_MORE_FEATURES_CLICKED,{surface:"workspace_multiplayer_header"})},children:(0,o.FD)(U.S,{css:j.viewMore,children:[(0,o.Y)(z.A,{}),(0,o.Y)(A.EY,{variant:"small",color:"dimmer",children:"View More Features"})]})})})]})]})}),(0,o.Y)(P.v,{iconRight:(0,o.Y)(O.A,{}),text:"Continue with ".concat(r.Teams.planName),href:r.Teams.href,onClick:function(){(0,E.u4)(E.AZ.ORG_CONTINUE_UPGRADE_CLICKED,{surface:"workspace_multiplayer_header"})},target:"_blank"})]})})},V=function(e){var n=e.title,t=e.subtitle,r=e.icon;return(0,o.FD)(U.S,{row:!0,gap:8,children:[(0,o.Y)(U.S,{css:j.featureIcon,children:r}),(0,o.FD)(U.S,{css:j.featureText,children:[(0,o.Y)(A.EY,{variant:"text",height:"singleLine",children:n}),t?(0,o.Y)(A.EY,{variant:"small",color:"dimmer",height:"singleLine",children:t}):null]})]})},j=(0,I.x)({priceLoader:[F.S.backgroundPulse(R.LU.backgroundHigher,"transparent"),T.wp.height("100%"),T.wp.width(50)],featureText:[T.wp.flex.grow(1),T.wp.pt(1),T.wp.colWithGap(8)],featureIcon:[T.wp.color.accentPrimaryStronger],priceText:[T.wp.fontWeight.normal],self:[T.wp.backgroundColor.backgroundOverlay,T.wp.borderRadius()],viewMore:[T.wp.color.foregroundDimmest,T.wp.rowWithGap(8),T.wp.align.center,T.wp.cursor.pointer,{fontWeight:200}]}),Z=t(61928),q=t(11882),K=t(59172),$=t(80762),J=function(e){var n=e.modalState,t=e.setModalState,r=(0,C.X)(),i=(0,l.useCallback)(function(){"data"===r.type&&t({type:"open",onUpgradeSuccess:function(){}})},[r,t]);if("loading"===r.type)return(0,o.FD)(U.S,{css:Q.loading,row:!0,gap:4,align:"center",children:[(0,o.Y)($.A,{color:R.LU.foregroundDimmer}),(0,o.Y)(A.EY,{color:"dimmer",multiline:!1,children:"Loading..."})]});if("data"!==r.type)return null;var a=r.collaboratorCount,s=r.collaboratorLimit,c=r.refetch,u=r.isStarterUser?(0,o.Y)(x,{isOpen:"open"===n.type,onClose:function(){return t({type:"closed"})},onPurchaseComplete:function(){"open"===n.type&&n.onUpgradeSuccess(),c()}}):(0,o.Y)(G,{isOpen:"open"===n.type,onClose:function(){return t({type:"closed"})}}),d=Math.max(0,s-a);return(0,o.FD)(U.S,{row:!0,gap:8,children:[(0,o.FD)(U.S,{css:Q.limitsContainer,align:"center",row:!0,gap:8,children:[(0,o.Y)(K.m_,{tooltip:"Your account is limited to ".concat(s," collaborators. Manage your collaborators on the Usage page."),children:(0,o.Y)(q.a,{colorway:"yellow",css:Q.pill,text:"".concat(a," / ").concat(s),onClick:i})}),(0,o.Y)(U.S,{css:Q.measureBarWrapper,onClick:i,children:(0,o.Y)(Z.W,{css:Q.measureBar,total:s,current:a,tooltip:"".concat(d," account collaborators remaining"),backgroundColor:R.LU.yellowDimmer,color:R.LU.yellowDefault})})]}),u]})},Q=(0,I.x)({pill:[T.wp.cursor.pointer,T.wp.borderRadius(4),T.wp.pr(0)],measureBar:[T.wp.height(8),T.wp.width(60)],measureBarWrapper:[T.wp.cursor.default],limitsContainer:[T.wp.borderRadius(4),T.wp.backgroundColor.yellowDimmest,T.wp.pr(8)],loading:[T.wp.flex.grow(1),T.wp.justify.center]}),X=t(53628),ee=t(95139),en=t(73815),et=t(97379),er=t(75176),ei=t(41852),eo=t(46603),ea=t(36112),el=t(42306),es=t(80644),ec=t(62362);function eu(e,n){return n.some(function(n){return n.id===e})}var ed={root:[T.wp.color.foregroundDefault,T.wp.colWithGap(12),T.wp.align.stretch,T.wp.flex.growAndShrink(1),T.wp.px(12)],header:[T.wp.flex.row,T.wp.justify.spaceBetween,T.wp.align.center],header_mobile:[T.wp.px(0)],titleContainer:[T.wp.flex.row,T.wp.rowWithGap(4),T.wp.align.center],limitsContainer:[T.wp.align.center,T.wp.rowWithGap(8)],loading:[T.wp.rowWithGap(4),T.wp.align.center,T.wp.flex.grow(1),T.wp.justify.center],measureBar:[T.wp.height(8),T.wp.width(60)],searchContainer:[T.wp.position.relative,T.wp.maxHeight(32)],userList:[T.wp.flex.column,T.wp.colWithGap(16),T.wp.scrollbar.thin,T.wp.position.relative,T.wp.overflowY("auto"),T.wp.flex.growAndShrink(1),{maxHeight:300,"::-webkit-scrollbar-thumb":[T.wp.backgroundColor.backgroundHighest,T.wp.borderRadius(4)],scrollbarColor:"".concat(R.LU.backgroundDefault," ").concat(R.LU.backgroundHighest)}],userGroup:{root:[T.wp.colWithGap(8)],titleContainer:[T.wp.rowWithGap(4),T.wp.align.center],title:[T.wp.fontWeight.medium]},emptyContainer:[T.wp.position.relative,T.wp.colWithGap(16),T.wp.py(16),T.wp.justify.start,{maxHeight:220}]},ep=function(e){var n=e.title,t=e.count,r=e.color,i=e.tooltip;return(0,o.FD)(U.S,{css:ed.userGroup.titleContainer,children:[(0,o.Y)(el.A,{color:r,size:6}),(0,o.Y)(A.EY,{variant:"small",css:ed.userGroup.title,multiline:!1,children:n}),(0,o.Y)(A.EY,{multiline:!1,variant:"small",color:"dimmest",css:ed.userGroup.title,children:t}),i?(0,o.Y)(K.m_,{tooltip:i,children:(0,o.Y)(ec.A,{})}):null]})};let ef=function(e){var n,t,s,p=e.replId,f=e.handleUpgradeTriggered,m=(0,a.useRouter)(),g=(0,ee.Po)(m),S=(0,C.X)(),Y=(0,X.A)({isMobileApp:g,isTeam:!1,handleUpgradeTriggered:f,replId:p}),x=Y.addOrInviteReplMultiplayer,_=Y.loadingAddMutation,k=(0,ei.Q4)(),D=(0,r._)((0,l.useState)({type:"closed"}),2),E=D[0],I=D[1],F=(0,r._)((0,l.useState)(!1),2),T=F[0],P=F[1],L=(n={variables:{replId:p},pollInterval:8e3},t=(0,d._)({},v,n),h.I(w,t)),N=L.data,O=L.loading,M=(null==N?void 0:N.repl.__typename)==="Repl"?N.repl:null,B=null==N?void 0:N.currentUser,H=(null!=(s=null==M?void 0:M.collaborators)?s:[]).reduce(function(e,n){var t=n.user;return(0,i._)(e).concat([t.username])},[]),z=(null==M?void 0:M.authorizations.editPermissions.isAuthorized)||!1,W=!!(M&&!H.length&&!M.multiplayerInvites.length),G=null==M?void 0:M.collaborators.map(function(e){return e.user}).filter(function(e){return e.id!==(null==B?void 0:B.id)}),V=null==G?void 0:G.filter(function(e){return e&&eu(e.id,k)}),j=null==G?void 0:G.filter(function(e){return e&&!eu(e.id,k)}),q=G?G.length:null,K=(0,o.FD)(o.FK,{children:[null===q||(null==B?void 0:B.isSubscribed)?null:(0,o.FD)(o.FK,{children:[(0,o.FD)(A.EY,{variant:"small",color:"dimmest","aria-hidden":!0,multiline:!1,children:[q," / ",y.vF]}),(0,o.Y)(Z.W,{css:ed.measureBar,total:y.vF,current:q,tooltip:"".concat(y.vF-q," free editors remaining")})]}),O||(null==B?void 0:B.isSubscribed)||g?null:(0,o.Y)(er.A,{size:"small",context:"workspace_multiplayer_header",onClickCallback:function(){f&&f(!0)},onCancel:function(){f&&f(!1)}})]});return(0,o.FD)(ea.ui,{background:"default",css:ed.root,children:[(0,o.FD)(o.FK,{children:[(0,o.FD)(U.S,{css:[ed.header,g&&ed.header_mobile],children:[(0,o.Y)(U.S,{css:ed.titleContainer,children:(0,o.Y)(A.EY,{variant:"subheadDefault",multiline:!1,children:"Multiplayers"})}),(0,o.FD)(U.S,{css:ed.limitsContainer,children:[O?(0,o.FD)(U.S,{css:ed.loading,children:[(0,o.Y)($.A,{color:R.LU.foregroundDimmer}),(0,o.Y)(A.EY,{color:"dimmer",multiline:!1,children:"Loading..."})]}):null,"data"===S.type&&S.shouldEnforceMultiplayerLimit?(0,o.Y)(J,{setModalState:I,modalState:E}):K]})]}),z&&H&&M?(0,o.Y)(U.S,{css:ed.searchContainer,children:(0,o.Y)(et.A,{existingUsernames:H,onSubmit:function(e){if(!O||(null==B?void 0:B.isSubscribed)){if(!_){var n=new Set(("data"===S.type?(0,i._)(S.collaboratorsByRepl.values()).map(function(e){return e.users}).flat():[]).map(function(e){return e.username})),t="data"===S.type&&S.shouldEnforceMultiplayerLimit&&S.collaboratorCount>=S.collaboratorLimit&&!n.has(e),r={method:c()(e)?u.LI.Email:u.LI.Username,value:e},o=function(){return x({variables:{input:{replId:p,target:r,level:u.Hy.Rw}}})};if(t)return void I({type:"open",onUpgradeSuccess:o});o()}}}})}):null,W?(0,o.Y)(U.S,{css:ed.emptyContainer,children:(0,o.Y)(U.S,{children:(0,o.Y)(A.EY,{color:"dimmest",multiline:!1,children:"No one else is here"})})}):(0,o.FD)(ea.ui,{css:ed.userList,children:[(null==V?void 0:V.length)?(0,o.FD)(U.S,{css:ed.userGroup.root,children:[(0,o.Y)(ep,{title:"Online",count:V.length||0,color:R.LU.greenStrongest}),V.map(function(e){return e?(0,o.Y)(en.A,{isPendingInvitation:!1,replId:p,canEditMultiplayers:z,user:e},e.id):null})]}):null,(null==j?void 0:j.length)?(0,o.FD)(U.S,{css:ed.userGroup.root,children:[(0,o.Y)(ep,{title:"Offline",count:j.length||0,color:R.LU.outlineStrongest}),null==j?void 0:j.map(function(e){return e?(0,o.Y)(en.A,{canEditMultiplayers:z,isPendingInvitation:!1,user:e,replId:p},e.id):null})]}):null,(null==M?void 0:M.multiplayerInvites.length)?(0,o.FD)(U.S,{css:ed.userGroup.root,children:[(0,o.Y)(ep,{title:"Pending Invitations",count:(null==M?void 0:M.multiplayerInvites.length)||0,color:R.LU.outlineStrongest}),M.multiplayerInvites.map(function(e){return(0,o.Y)(en.A,{canEditMultiplayers:z,replId:p,isPendingInvitation:!0,email:e.email},e.email)})]}):null]})]}),(null==B?void 0:B.isSubscribed)?(0,o.FD)(o.FK,{children:[(0,o.Y)(U.S,{children:(0,o.Y)(eo.$n,{text:"Refer a friend and earn more credits",iconLeft:(0,o.Y)(es.A,{}),onClick:function(){return P(!0)}})}),(0,o.Y)(b.Z,{isOpen:T,onClose:function(){return P(!1)},trackingContext:"workspace-invite-dialog"})]}):null]})}},88888:(e,n,t)=>{"use strict";t.d(n,{y:()=>d});var r=t(88263),i=t(53135),o=t(35084),a=t(191),l=t(76126),s=t(59172),c=t(10429),u=t(92855);function d(e){var n=e.deployment,t=e.small,d=n.currentBuild,p=a.v[d.status],f=p.title,h=p.color,m=(0,i.A)(new Date(d.timeCreated),Date.now(),{addSuffix:!0}),g="Deployed ".concat(m," by ").concat(d.user.displayName),v=d.status===o.nH.Success?"Deployed":f;return(0,r.Y)(s.m_,{tooltip:g,children:(0,r.FD)(c.S,{row:!0,gap:4,align:"center",children:[(0,r.Y)(u.A,{size:t?12:16,color:h}),(0,r.Y)(l.EY,{variant:t?"small":void 0,color:"dimmest",multiline:!1,children:v})]})})}},89207:(e,n,t)=>{"use strict";t.d(n,{qP:()=>V,SE:()=>z,JW:()=>H});var r=t(29935),i=t(17844),o=t(12694),a=t(82643),l=t(88263),s=t(21462),c=t(12161),u=t(88011),d=t(69320),p=t(58271),f=t(37804),h=t(45005),m=t(78535),g=t(31062),v=t(73779),w=t(90629);function y(e,n,t){return w.v4(function(r){r.setTag("neon-pane",!0),r.setTag("context",n),t&&r.setExtras(t),w.Cp(e)}),e}var b=t(64583),S=t(48521),Y=t(46603),A=t(33747),x=t(17070),C=t(49150),_=t(16251),k=t(54087),D=t(36112),E=t(76126),R=t(10429),I=t(47177),F=t(80762),T=t(69258),P=(0,b.x)({title:S.wp.pb(8),card:[S.wp.p(8),S.wp.borderRadius(8),{outline:"1px solid transparent"}],error:[S.wp.color.accentNegativeStronger],dialogMessage:[S.wp.flex.growAndShrink(1)],dialogButtonContainer:[S.wp.display.flex,S.wp.flex.row,S.wp.justify.end],list:[S.wp.fontSize(12),{li:[S.wp.pt(1),{"&:before":[S.wp.mr(4),{content:'""'}]}]}],statusDateInput:[{margin:"4px -4px 0"}]}),L=new c.p("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",second:"2-digit",hour12:!0,timeZoneName:"short"});function U(e){var n=e.timeZone,t=e.validationError,r=e.commitError;return t?(0,l.Y)(E.EY,{css:P.error,children:t}):r?(0,l.Y)(E.EY,{css:P.error,children:"Could not determine timestamp from agent rollback"}):(0,l.Y)(E.EY,{color:"dimmest",children:n})}function N(e){var n=e.value,t=e.loading,r=e.restored,i=e.error,a=e.validationError,c=e.onRestore,u=(0,o._)((0,s.useState)(!1),2),d=u[0],p=u[1];return(0,l.FD)(l.FK,{children:[(0,l.Y)(Y.$n,{text:t?"":r?"Restored":"Restore",loading:t,iconLeft:t?(0,l.Y)(F.A,{}):void 0,disabled:!!i||!!a||!n||t||r,onClick:function(){return p(!0)},colorway:r?"positive":"primary"}),i&&(0,l.Y)(E.EY,{css:P.error,children:i}),(0,l.Y)(C.a,{isOpen:d,onRequestClose:function(){return p(!1)},children:(0,l.FD)(R.S,{gap:16,children:[(0,l.FD)(R.S,{row:!0,gap:8,align:"center",children:[(0,l.Y)(I.A,{size:20}),(0,l.Y)(E.Y9,{variant:"subheadDefault",level:1,children:"Restoring your database"})]}),(0,l.FD)(R.S,{gap:8,children:[(0,l.Y)(E.EY,{multiline:!0,css:P.dialogMessage,children:"Your database will be restored to it's past state at:"}),(0,l.Y)(k.N,{text:n?L.format(n.toDate()):"Could not determine restore date"}),(0,l.Y)(k.N,{icon:(0,l.Y)(T.A,{}),colorway:"warning",text:(0,l.FD)(l.FK,{children:["This action cannot be undone.",(0,l.Y)("br",{}),(0,l.FD)("ul",{css:P.list,children:[(0,l.Y)("li",{children:"All current data will be replaced with data from this backup"}),(0,l.Y)("li",{children:"Any changes made after this backup point will be lost"}),(0,l.Y)("li",{children:"Connected services may need to be reconfigured"}),(0,l.Y)("li",{children:"If you've deployed, any production data changed after this time will be lost"})]})]})})]}),(0,l.Y)(R.S,{css:P.dialogButtonContainer,children:(0,l.Y)(Y.$n,{colorway:"primary",onClick:function(){p(!1),c(n)},text:"Continue"})})]})})]})}function O(e){var n=e.value,t=e.loading,r=e.restored,i=e.error,o=e.minValue,a=e.maxValue,s=e.isFrozen,c=e.validationError,d=e.timeZone,p=e.onChange,f=e.onRestore;return(0,l.FD)(l.FK,{children:[(0,l.Y)(m.A,{granularity:"second",hourCycle:24,minValue:o,maxValue:a,value:n?(0,u.tR)(n):void 0,onChange:p,"aria-labelledby":"restore-timestamp",isDisabled:s||t}),(0,l.Y)(U,{timeZone:d,validationError:c}),(0,l.Y)(N,{value:n,loading:t,onRestore:f,restored:r,error:i,validationError:c})]})}function M(e){var n,t=e.restoreToCommitId,i=e.value,o=e.loading,c=e.restored,p=e.error,f=e.minValue,h=e.maxValue,g=e.isFrozen,w=e.validationError,y=e.timeZone,b=e.onChange,S=e.onRestore,A=(0,v.A)((n=(0,r._)(function(e){var n;return(0,a.YH)(this,function(r){switch(r.label){case 0:return[4,e.getCommit({commit:t})];case 1:if((n=r.sent()).error)return[2,n];return[2,{timestamp:n.committer.date,error:null}]}})}),function(e){return n.apply(this,arguments)}),[t]),x=(0,s.useMemo)(function(){if(A&&!A.error)return(0,d.TL)(new Date(A.timestamp).toISOString(),y)},[A,y]),C=!i||(null==x?void 0:x.compare(i))===0;return((0,s.useEffect)(function(){!i&&x&&b((0,u.tR)(x))},[i,x,b]),A&&A.error)?(0,l.Y)(k.N,{text:A.error,colorway:"negative"}):(0,l.FD)(l.FK,{children:[(0,l.Y)(k.N,{colorway:C?"blurple":void 0,text:(0,l.FD)(l.FK,{children:[C?"Restoring database to time of agent rollback":(0,l.FD)(R.S,{row:!0,gap:4,children:["Restoring database to selected timestamp,"," ",(0,l.Y)(Y.$n,{text:"restore to agent rollback",variant:"underlined",size:"small",onClick:function(){x&&b((0,u.tR)(x))}})]}),(0,l.Y)(R.S,{css:P.statusDateInput,children:(0,l.Y)(m.A,{granularity:"second",hourCycle:24,minValue:f,maxValue:h,value:i?(0,u.tR)(i):void 0,onChange:b,"aria-labelledby":"restore-timestamp",isDisabled:g||o||!i})})]})}),(0,l.Y)(U,{timeZone:y,validationError:w,commitError:null==A?void 0:A.error}),(0,l.Y)(N,{value:i||x,loading:o,onRestore:S,restored:c,error:p,validationError:w})]})}function B(e){return(0,l.FD)(l.FK,{children:[(0,l.Y)(A.J,{variant:"text","aria-label":"restore-timestamp",children:"Timestamp"}),"restoreToCommitId"in e&&e.restoreToCommitId?(0,l.Y)(M,(0,i._)({},e)):(0,l.Y)(O,(0,i._)({},e))]})}function H(e,n){if(e.isFrozen)return(0,h._)("Database is frozen and cannot be restored");var t=(0,p.Xj)(),r=(0,p.tB)(t),i=e.historyRetentionSeconds;if(0===i)return(0,h._)("History retention is disabled so there are no restore points.");var o=(0,d.TL)(new Date(e.timeCreated).toISOString(),t).add({minutes:1}),a=r.subtract({seconds:i}),l=(0,u.uB)(a>o?a:o,t),s=(0,u.uB)(r,t);if(0>n.compare(l)){var c=L.format(l.toDate());return(0,h._)("Restore point is before the configured database history retention period (".concat(c,")"))}return n.compare(s)>0?(0,h._)("Restore point is in the future"):(0,h.Ok)(!0)}function z(e){var n=e.neonDatabase,t=e.restoreToCommitId,r=(0,g.A)(),i=(0,p.Xj)(),a=(0,p.tB)(i),c=n.historyRetentionSeconds,h=0===c,m=(0,d.TL)(new Date(n.timeCreated).toISOString(),i).add({minutes:1}),v=a.subtract({seconds:c}),w=(0,o._)((0,s.useState)(),2),b=w[0],S=w[1],Y=(0,o._)((0,s.useState)(),2),A=Y[0],x=Y[1],C=(0,o._)((0,s.useState)(!1),2),_=C[0],I=C[1],F=(0,o._)((0,s.useState)(),2),L=F[0],U=F[1],N=(0,o._)((0,f.Ak)({onError:function(e){y(e,"rollbackNeonDatabase",{replId:r,neonProjectId:n.projectId}),U("Something went wrong.")},onCompleted:function(e){if("RollbackNeonDatabaseResult"!==e.rollbackNeonDatabase.__typename)return void U(e.rollbackNeonDatabase.message);I(!0)}}),2),O=N[0],M=N[1].loading;return(0,l.FD)(R.S,{children:[(0,l.Y)(E.EY,{variant:"subheadDefault",css:P.title,children:"Restore"}),(0,l.FD)(D.ui,{elevated:!0,css:P.card,gap:4,children:[(0,l.Y)(R.S,{children:(0,l.Y)(E.EY,{color:"dimmer",children:"Quickly restore a branch to a point within it's history retention period."})}),n.isFrozen||h?(0,l.Y)(k.N,{text:n.isFrozen?"Database is frozen. You cannot restore a database that has been frozen.":"History retention is disabled. You cannot restore a database with history retention disabled.",colorway:"warning",icon:(0,l.Y)(T.A,{})}):(0,l.Y)(B,{restoreToCommitId:t,value:b,loading:M,restored:_,error:L,minValue:v>m?v:m,maxValue:a,isFrozen:n.isFrozen,validationError:A,timeZone:i,onChange:function(e){if(e){_&&(I(!1),U(void 0));var t=(0,u.uB)(e,i),r=H(n,t);r.ok?(x(void 0),S(t)):x(r.error)}},onRestore:function(e){if(!e)return void U("Could not determine restore date");O({variables:{input:{neonProjectId:n.projectId,replId:r,timestamp:e.toAbsoluteString()}}})}})]})]})}var W=[{value:0,title:"Disabled"},{value:21600,title:"6 Hours"},{value:43200,title:"12 Hours"},{value:86400,title:"1 Day"},{value:172800,title:"2 Days"},{value:432e3,title:"5 Days"},{value:604800,title:"7 Days"}];function G(e){var n=e.currentRetentionPeriod,t=e.loading,r=e.success,i=e.disabled,a=e.onClick,c=e.error,u=(0,o._)((0,s.useState)(n),2),d=u[0],p=u[1],f=r||d!==n;return(0,l.FD)(R.S,{gap:12,children:[(0,l.FD)(R.S,{gap:8,children:[(0,l.Y)(A.J,{htmlFor:"history-retention-period",children:(0,l.Y)(E.EY,{children:"History Retention Period"})}),(0,l.Y)(_.l,{id:"history-retention-period","aria-labelledby":"history-retention-period",selectedKey:d,onSelectionChange:function(e){p(parseInt(String(e),10))},items:W,isDisabled:i,children:function(e){return(0,l.Y)(x.nh,{id:e.value,label:e.title},e.value)}})]}),f?(0,l.FD)(l.FK,{children:[(0,l.Y)(k.N,{text:"Increasing your retention window will increase your project's storage usage. Decreasing your retention window will prevent you from restoring to a point in time older than the new retention window and will delete any historical data that was being retained beyond it.",colorway:"warning",icon:(0,l.Y)(T.A,{})}),(0,l.Y)(Y.$n,{text:t?"":r?"Updated":"Confirm",loading:t,iconLeft:t?(0,l.Y)(F.A,{}):void 0,disabled:!!c||t||r,onClick:function(){return a(d)},colorway:r?"positive":"primary"}),c&&(0,l.Y)(E.EY,{css:P.error,children:c})]}):null]})}function V(e){var n=e.neonDatabase,t=(0,g.A)(),r=(0,o._)((0,s.useState)(!1),2),i=r[0],a=r[1],c=(0,o._)((0,s.useState)(),2),u=c[0],d=c[1],p=(0,o._)((0,f.yQ)({onError:function(e){y(e,"setNeonHistoryRetentionPeriod",{replId:t,neonProjectId:n.projectId}),d("Something went wrong.")},onCompleted:function(e){if("SetNeonDatabaseConfigurationResult"!==e.setNeonDatabaseConfiguration.__typename)return void d(e.setNeonDatabaseConfiguration.message);a(!0)}}),2),h=p[0],m=p[1].loading;return(0,l.FD)(R.S,{children:[(0,l.Y)(E.EY,{variant:"subheadDefault",css:P.title,children:"History Retention"}),(0,l.FD)(D.ui,{elevated:!0,css:P.card,gap:4,children:[(0,l.Y)(R.S,{children:(0,l.Y)(E.EY,{color:"dimmer",children:"Maintain a history of changes for a period of time, enabling features like point-in-time restore and restoring a database back to an agent checkpoint."})}),n.isFrozen||n.isEphemeral?(0,l.Y)(k.N,{text:n.isFrozen?"Database is frozen. You cannot update the history retention of a frozen database.":"Temporary databases created on the free Starter plan do not support configurable history retention.",colorway:"warning",icon:(0,l.Y)(T.A,{})}):null,(0,l.Y)(G,{currentRetentionPeriod:n.historyRetentionSeconds,loading:m,success:i,disabled:m||n.isFrozen||n.isEphemeral,onClick:function(e){h({variables:{input:{neonProjectId:n.projectId,replId:t,historyRetentionSeconds:e}}})},error:u})]})]})}},89290:(e,n,t)=>{"use strict";t.d(n,{A:()=>s});var r=t(71115),i=t(21462),o=t(67201),a=t(34834),l=t(71618);function s(){var e=(0,r.useRouter)(),n=(0,a.A)().container,t=(0,l.lY)(),s=(0,l.nZ)(),c=(0,l.hr)();(0,i.useEffect)(function(){e.query.debug&&"undefined"!==e.query.debug&&s(!0)},[s,e.query.debug]),(0,i.useEffect)(function(){if(t)return n.client().onDebugLog(function(e){if("log"===e.type){var t={name:e.log.channel.name,service:null};if("string"==typeof e.log.channel.service)t.service=e.log.channel.service;else if(e.log.channel.service){var r=n.getContext();r&&(t.service=e.log.channel.service(r))}c({id:(0,o.A)(),channel:t,dir:e.log.direction,cmd:e.log.cmd,stringifiedCmd:JSON.stringify(e.log.cmd),timestamp:window.performance.now()})}})},[t,n,c])}},89310:(e,n,t)=>{"use strict";t.d(n,{A:()=>d});var r=t(46434),i=t(29935),o=t(82643),a=t(21462),l=t(93369),s=t(74093),c=t(5751);function u(){document.activeElement instanceof HTMLElement&&document.activeElement.blur()}function d(e){var n,t,d=e.fs,p=e.openMultipleFiles,f=e.openMultipleURLs,h=e.waitForFileClose,m=e.isMobileWorkspace,g=void 0!==m&&m,v=(0,l.A)(h),w=(0,a.useCallback)((n=(0,i._)(function(e){var n,t,r;return(0,o.YH)(this,function(i){switch(i.label){case 0:if(n=e.filename,t=e.waitForClose,!g)return[3,2];if(!n.endsWith(".git/COMMIT_EDITMSG"))return p({paths:[n]}),[2];return r=window.prompt("Enter a commit message"),[4,d.writeFile(n,null!=r?r:"")];case 1:case 4:return i.sent(),[2];case 2:if(u(),p({paths:[n]}),!t||!v.current)return[2];return[4,v.current(n)];case 3:return i.sent(),[4,d.flush()]}})}),function(e){return n.apply(this,arguments)}),[d,g,p,v]);(0,s.b)((t=(0,i._)(function(e,n){var t,i,a,l,s,d,h,m,g,v,y,b,S,Y,A,x;return(0,o.YH)(this,function(o){switch(o.label){case 0:t=n.session,i=n.signal,l=(a=e.replspaceApi.init.stream({session:t.from},{signal:i})).reqWritable,s=a.resReadable,d=!1,h=!1,o.label=1;case 1:o.trys.push([1,12,13,18]),g=(0,r._)(s),o.label=2;case 2:return[4,g.next()];case 3:if(!(d=!(v=o.sent()).done))return[3,11];if(!(y=v.value).ok)return[3,10];switch(y.payload.$kind){case"openFile":return[3,4];case"openMultipleFiles":return[3,6];case"openMultipleURLs":return[3,7];case"getSSHToken":return[3,8]}return[3,10];case 4:return[4,w(y.payload)];case 5:return o.sent(),y.payload.waitForClose&&l.write({$kind:"closeFile",filename:y.payload.filename,nonce:y.payload.nonce}),[3,10];case 6:return y.payload.files.length>0&&(u(),p({paths:y.payload.files})),[3,10];case 7:return y.payload.urls.length>0&&(u(),f({urls:y.payload.urls})),[3,10];case 8:return S=(b=y.payload).nonce,Y=b.replId,[4,(0,c.p)({replId:Y})];case 9:return"success"!==(A=o.sent()).type?l.write({$kind:"sshToken",nonce:S,error:A.message}):l.write({$kind:"sshToken",nonce:S,token:A.data.token,SSHHostname:A.data.ssh_hostname}),[3,10];case 10:return d=!1,[3,2];case 11:return[3,18];case 12:return x=o.sent(),h=!0,m=x,[3,18];case 13:if(o.trys.push([13,,16,17]),!(d&&null!=g.return))return[3,15];return[4,g.return()];case 14:o.sent(),o.label=15;case 15:return[3,17];case 16:if(h)throw m;return[7];case 17:return[7];case 18:return[2]}})}),function(e,n){return t.apply(this,arguments)}),[f,p,w])}},89436:e=>{e.exports={root:"Main_root__uRf4V",content:"Main_content__XPD_I",enter:"Main_enter__3h2eI",enterActive:"Main_enterActive__9h2Q4",exit:"Main_exit___Zl9M",exitActive:"Main_exitActive__onRCl",fade:"Main_fade__esRgZ"}},89793:(e,n,t)=>{"use strict";t.d(n,{A:()=>c});var r=t(17844),i=t(93629),o=t(71115),a=t.n(o),l=t(12689),s=t(95570);function c(e){var n=e.throwBsod,t=e.tags,o=e.extras,c=e.origin,u=e.onNonBsodUnrecoverableError;return function(e){var d=(0,l.Ay)(e);if(d===l.ub.NotFound)return void a().push("/home","~/");if(d===l.ub.LanguageTokenDenied)return void window.location.reload();if(d===l.ub.CrosisChannel)t=(0,i._)((0,r._)({},t),{crosis:!0});else if(d){null==u||u(d);return}s.error(e),n({error:e,tags:t,extras:o,origin:c})}}},89924:(e,n,t)=>{"use strict";t.d(n,{A:()=>o});var r=t(70558),i=t(57010);function o(e,n){(0,i.A)(2,arguments);var t=(0,r.A)(e),o=(0,r.A)(n);return t.getTime()<o.getTime()}},90671:(e,n,t)=>{"use strict";t.d(n,{H:()=>p,Y:()=>d});var r=t(37743),i=t(12694),o=t(22531),a=t(21462),l=t(96907),s=t.n(l),c=t(10801),u=t(77958),d=function(){function e(n){var t=this;if((0,r._)(this,e),this.saveToLocalStorage=s()(function(){u.A.set("stateCache",{version:2,entries:Array.from(t.map.entries())})},500,{leading:!1,trailing:!0,maxWait:1e3}),this.map=new c.q(20),n){if((void 0===n?"undefined":(0,o._)(n))!=="object"||null===n||!Object.prototype.hasOwnProperty.call(n,"version")||!Object.prototype.hasOwnProperty.call(n,"entries")||"number"!=typeof n.version||2!==n.version)return;var a=n.entries,l=!0,d=!1,p=void 0;try{for(var f,h=a[Symbol.iterator]();!(l=(f=h.next()).done);l=!0){var m=(0,i._)(f.value,2),g=m[0],v=m[1];this.map.set(g,v)}}catch(e){d=!0,p=e}finally{try{l||null==h.return||h.return()}finally{if(d)throw p}}}}var n=e.prototype;return n.set=function(e,n){this.map.set(e,n),this.saveToLocalStorage()},n.get=function(e){return this.map.get(e)},e}(),p=(0,a.createContext)(null)},90777:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(88263),a=t(71117);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M5 3.75A1.25 1.25 0 0 0 3.75 5v14A1.25 1.25 0 0 0 5 20.25h1.25V13a.75.75 0 0 1 .75-.75h10a.75.75 0 0 1 .75.75v7.25H19A1.25 1.25 0 0 0 20.25 19V8.31l-2.5-2.5V8a.75.75 0 0 1-.75.75H7A.75.75 0 0 1 6.25 8V3.75H5Zm0-1.5A2.75 2.75 0 0 0 2.25 5v14A2.75 2.75 0 0 0 5 21.75h14A2.75 2.75 0 0 0 21.75 19V8a.75.75 0 0 0-.22-.53l-5-5a.75.75 0 0 0-.53-.22H5Zm2.75 1.5v3.5h8.5V4.31l-.56-.56H7.75Zm8.5 16.5v-6.5h-8.5v6.5h8.5Z",clipRule:"evenodd"})}))}},90846:e=>{e.exports={toolsListPopover:"AllToolsButton_toolsListPopover__HvH5A"}},91026:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(88263),a=t(71117);function l(e){return(0,o.FD)(a.Ay,(0,i._)((0,r._)({},e),{children:[(0,o.Y)("path",{d:"M5.25 16.75a1 1 0 0 1 1-1h4a1 1 0 1 1 0 2h-4a1 1 0 0 1-1-1ZM17.25 15.25a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3Z"}),(0,o.Y)("path",{fillRule:"evenodd",d:"M1.25 11.618c0-.298.048-.594.144-.877L3.62 4.123A2.75 2.75 0 0 1 6.226 2.25h11.548c1.18 0 2.23.754 2.606 1.873l2.227 6.618c.095.283.143.579.143.877V19A2.75 2.75 0 0 1 20 21.75H4A2.75 2.75 0 0 1 1.25 19v-7.382ZM6.226 3.75h11.548a1.25 1.25 0 0 1 1.184.851l2.227 6.619c.043.128.065.263.065.398v.132H2.75v-.132c0-.135.022-.27.065-.398L5.042 4.6a1.25 1.25 0 0 1 1.184-.851Zm-3.476 9.5V19c0 .69.56 1.25 1.25 1.25h16c.69 0 1.25-.56 1.25-1.25v-5.75H2.75Z",clipRule:"evenodd"})]}))}},91136:(e,n,t)=>{"use strict";t.d(n,{oD:()=>d,wo:()=>f});var r=t(17844),i=t(12584),o=t(41114),a=t(86997),l=t(40235);function s(){var e=(0,i._)(["\n  fragment TransferReplReplInfo on Repl {\n    id\n    slug\n    title\n    owner {\n      ... on Team {\n        id\n        username\n      }\n      ... on User {\n        id\n        username\n      }\n    }\n    org {\n      id\n      slug\n    }\n  }\n"]);return s=function(){return e},e}function c(){var e=(0,i._)(["\n  query TransferReplDialog {\n    currentUser {\n      id\n      ...ReplOwnerCurrentUser\n    }\n  }\n  ","\n"]);return c=function(){return e},e}var u={},d=(0,o.J1)(s()),p=(0,o.J1)(c(),l.nM);function f(e){var n=(0,r._)({},u,e);return a.I(p,n)}},91668:(e,n,t)=>{"use strict";t.d(n,{r:()=>el});var r=t(83846),i=t(17844),o=t(88263),a=t(21462),l=t(93369),s=t(19882),c=t(29383),u=t(71452),d=t(60632),p=t(45263),f=t(64583),h=t(973),m=t(29e3),g=t(48521),v=t(54087),w=t(10429),y=t(60152),b=t(99429),S=t(84331),Y=(0,f.x)({root:[g.wp.reset.button,g.wp.viewStyle,g.wp.flex.row,g.wp.align.center,g.wp.borderRadius(0),g.wp.cursor.pointer,g.wp.color.foregroundDimmer,g.wp.px(4),{gap:p.LU.space6,"&:hover":{color:p.LU.foregroundDefault}}],icon:[g.wp.position.relative,b.Ef,{width:b.eQ.iconSize,height:b.eQ.iconSize}],iconRight:[b.Ef,{width:b.eQ.iconSize,height:b.eQ.iconSize}],text:[g.wp.truncate,g.wp.flex.shrink(1),{fontSize:b.eQ.fontSize}]}),A=(0,a.memo)(function(){var e=(0,y.if)(),n=e.breadcrumbs,t=e.iconOnly,r=e.onClick;return n.length?(0,o.Y)(o.FK,{children:n.map(function(e,n){if(!e.data||!("label"in e.data))return null;var i=e.data,a=i.label,l=i.icon;return(0,o.FD)("button",{css:Y.root,onClick:function(){return r(e)},children:[(0,o.Y)(w.S,{css:Y.icon,children:l}),t?null:(0,o.Y)(w.S,{css:Y.text,children:a}),(0,o.Y)(w.S,{css:Y.iconRight,children:(0,o.Y)(S.A,{})})]},a+n)})}):null}),x=t(79209),C=t(83650),_=t(80762),k=(0,x.AH)([g.wp.reset.button,g.wp.viewStyle,g.wp.center,g.wp.height("100%"),g.wp.cursor.pointer,g.wp.color.foregroundDimmest,g.wp.px(4),{"&:hover":{color:p.LU.foregroundDefault}},b.Ef]);function D(e){return(0,o.Y)("button",{css:k,onClick:e.onClick,title:e.isLoading?"Loading":"Clear",children:e.isLoading?(0,o.Y)(_.A,{}):(0,o.Y)(C.A,{})})}var E=t(41679),R=t(93629),I=t(4880),F=t(9135),T=t(11882),P=t(36112),L=t(59172),U=t(55074),N=t(55275),O=t(28216),M=t(62362),B=[g.wp.position.absolute,g.wp.top(0),g.wp.left(0),g.wp.width("100%")],H=(0,f.x)({item:[B,(0,r._)({userSelect:"none",cursor:"pointer","> div":{borderRadius:"4px",marginInline:b.eQ.inputBarPadding,height:"100%",justifyContent:"center"},"&:hover > div":{backgroundColor:p.LU.interactiveBackground}},g.kL.min(E.aF,E.yN),{"> div":{borderRadius:"4px"}})]}),z=(0,a.memo)((0,a.forwardRef)(function(e,n){var t=(0,F.H)(),r=(0,y.mg)(),l=(0,y.IT)(e.index),s=l.row,c=l.active,u=l.onClick,d=l.ariaAttrs;if(!s)return null;var p={height:r?void 0:e.height,transform:"translateY(".concat(e.y,"px)")};if("section"===s.type)return(0,o.Y)(Z,{innerRef:n,path:s.path,style:p,border:e.index>0,index:e.index,tooltip:s.tooltip});var f=s.item,h=f.data,m=f.match;if("group"===h.type)return null;var g=m.render;if(g&&"content"in g&&g.content)return(0,o.FD)(w.S,(0,R._)((0,i._)({innerRef:n,css:H.item,style:p,onClick:u,"data-index":e.index},d),{children:[(0,o.Y)(P.ui,{elevated:c,children:(0,a.cloneElement)(g.content,{active:c})}),t?(0,o.Y)(K,{score:m.score}):null]}));var v=h.label,b=h.icon,S=h.dataCy,Y=g&&"ranges"in g?g.ranges:void 0;return(0,o.FD)(w.S,(0,R._)((0,i._)({innerRef:n,css:H.item,style:p,onClick:u,dataCy:S,"data-index":e.index},d),{children:[(0,o.Y)(G,{active:c,icon:b,text:v,highlight:Y,description:h.description,shortcut:h.keyboardShortcut,hasChildren:"context"===f.data.type}),t?(0,o.Y)(K,{score:m.score}):null]}))}));z.displayName="Row";var W=(0,f.x)({root:[g.wp.height("100%"),{userSelect:"none",paddingInline:b.eQ.inputBarPadding,minHeight:b.eQ.inputBarHeight}],iconText:[g.wp.maxWidth("100%"),{gap:p.LU.space8,flexShrink:1}],description:[g.wp.truncate,{fontSize:"0.9em",flexGrow:1,flexShrink:2}],right:[{gap:p.LU.space4,justifySelf:"end",marginLeft:"auto"}],chevron:"calc(".concat(b.eQ.iconSize," - 2px)")});function G(e){var n=(0,N.h)(y.KO);return(0,o.FD)(P.ui,{row:!0,align:"center",gap:b.eQ.inputBarPadding,elevated:e.active,css:W.root,children:[(0,o.FD)(w.S,{css:W.iconText,align:"center",row:!0,children:[(0,o.Y)(w.S,{className:"icon",css:V.root,children:e.icon}),(0,o.Y)(O.e,{dimmed:!e.active,text:e.text,highlight:e.highlight})]}),e.description?(0,o.Y)(w.S,{css:W.description,style:{color:e.active?p.LU.foregroundDimmer:p.LU.foregroundDimmest},children:e.description}):null,(0,o.FD)(w.S,{css:W.right,row:!0,align:"center",children:[e.shortcut?(0,o.Y)(d._y,{keyCombo:e.shortcut,fontSize:Math.round(.85*n)}):null,e.hasChildren?(0,o.Y)(w.S,{css:W.chevron,children:(0,o.Y)(S.A,{size:12,style:{pointerEvents:"none"}})}):null]})]})}var V=(0,f.x)({root:[g.wp.position.relative,b.Ef,{width:b.eQ.iconSize,height:b.eQ.iconSize}]}),j=(0,f.x)({borderHeaderWrap:[B,g.wp.flex.column,{userSelect:"none",paddingTop:p.LU.space4,paddingInline:b.eQ.inputBarPadding}],borderWrap:[B,g.wp.justify.center,{userSelect:"none",paddingInline:b.eQ.inputBarPadding}],headerWrap:[{userSelect:"none",paddingInline:b.eQ.inputBarPadding},B],header:[{userSelect:"none"},{paddingInline:b.eQ.inputBarPadding}],text:[{userSelect:"none"},g.wp.flex.shrink(1),g.wp.color.foregroundDimmest,g.wp.truncate,{fontSize:"0.9em"}],border:[g.wp.height(1),g.wp.width("100%")]}),Z=(0,a.memo)(function(e){var n=(0,y.gM)(),t=(0,U.Z)(e.path,n),r=(0,o.Y)(P.ui,{elevated:!0,css:j.border});if(0===t.length)return(0,o.Y)(w.S,{"data-index":e.index,css:j.borderWrap,style:e.style,innerRef:e.innerRef,children:r});var i=(0,o.FD)(w.S,{css:j.header,row:!0,align:"center",gap:4,children:[t.map(function(e,n){return(0,o.FD)(a.Fragment,{children:[n>0?(0,o.Y)(S.A,{color:p.LU.foregroundDimmest}):null,(0,o.Y)(w.S,{css:j.text,children:e})]},e+n)}),e.tooltip?(0,o.Y)(L.m_,{tooltip:e.tooltip,placement:"right",children:(0,o.Y)(M.A,{size:12,color:p.LU.foregroundDimmest})}):null]});return e.border?(0,o.FD)(w.S,{justify:"start",gap:6,align:"stretch",css:j.borderHeaderWrap,style:e.style,innerRef:e.innerRef,"data-index":e.index,children:[r,i]}):(0,o.Y)(w.S,{css:j.headerWrap,style:e.style,innerRef:e.innerRef,"data-index":e.index,justify:"start",children:i})}),q={pill:[g.wp.position.absolute,g.wp.top("50%"),g.wp.right(4),{transform:"translateY(-50%)"}]};function K(e){var n=e.score;return(0,o.Y)(T.a,{text:"".concat(n),colorway:"red",css:q.pill})}var $=t(62132),J=(0,f.x)({root:[g.wp.flex.growAndShrink(1),g.wp.overflow("hidden"),{paddingTop:b.eQ.menuPaddingTop}],scrollParent:[g.wp.height("100%"),g.wp.overflowY("auto"),g.wp.flex.growAndShrink(1)]}),Q=(0,a.memo)(function(e){var n,t=(0,y.b)(),r=t.rows,l=t.isOpen,s=t.scrollRef,c=t.currentPathIndex,u=t.ariaAttrs,d=(0,N.ob)(y.Uo),f=(0,N.h)(y.tL),h=(0,y.mg)(),m=(0,I.Te)({count:r.length,overscan:null!=(n=e.overscan)?n:1,paddingEnd:4,getScrollElement:function(){return s.current},getItemKey:function(e){var n=r[e];return n?"section"===n.type?n.key:(0,$.p)(n.item.path):""},estimateSize:function(n){var t=r[n];return t?function(e){var n,t=e.row,r=e.currentPathIndex,i=e.compact,o=e.isFirst,a=e.minItemHeight;if("section"===t.type){var l=i?16:20,s=(0,U.Z)(t.path,r).length>0;return o?s?l:0:t.unlabeled?i?6:8:13+l}var c=t.item.match.render;return c&&"content"in c?Math.max(null!=(n=c.height)?n:a,a):a}({row:t,currentPathIndex:c,compact:f,isFirst:0===n,minItemHeight:e.minItemHeight}):0},onChange:function(e){d(e.getTotalSize())}}),g=m.scrollToIndex,v=m.getVirtualItems,b={borderRadius:e.hasFooter?void 0:p.LU.space8,display:l?void 0:"none"},S=(0,y.Je)();return(0,a.useEffect)(function(){var e,n=S;if(!(n<0)){if(1===n&&(null==(e=v()[0])?void 0:e.size))n=0;else if(!v()[n])return;g(n)}},[g,v,S]),(0,o.Y)(w.S,(0,R._)((0,i._)({css:J.root},u),{style:b,children:(0,o.Y)(w.S,{innerRef:s,css:J.scrollParent,children:(0,o.Y)(w.S,{style:{height:"".concat(m.getTotalSize(),"px"),position:"relative",overflow:"hidden"},children:l?m.getVirtualItems().map(function(e){return(0,o.Y)(z,{index:e.index,y:e.start,height:e.size,ref:h?m.measureElement:void 0},e.key.toString())}):null})})}))}),X=(0,f.x)({root:[g.wp.flex.growAndShrink(1),g.wp.width("100%"),g.wp.height("100%"),g.wp.flex.row,g.wp.justify.center,g.wp.borderRadius(4),{containerName:E.yN,containerType:b.eQ.containerType}],content:[g.wp.flex.growAndShrink(1),g.wp.maxWidth("calc(".concat(E.aF,"px - ").concat(p.LU.space16,")")),{fontSize:b.eQ.fontSize}],footer:{paddingTop:p.LU.space8},keyComboBlocks:{paddingRight:p.LU.space8},running:[g.wp.center,g.wp.flex.growAndShrink(1)],error:{padding:p.LU.space8}}),ee=(0,f.x)({root:[g.wp.viewStyle,g.wp.flex.growAndShrink(1),g.wp.height("100%"),g.wp.py(0),g.wp.px(8),{fontSize:b.eQ.fontSize,backgroundColor:"transparent",border:"0 none",outline:"0 none","::placeholder":{color:p.LU.foregroundDimmest},"&:hover::placeholder":{color:p.LU.foregroundDimmer},"&:focus::placeholder, &:hover:focus::placeholder":{color:p.LU.foregroundDimmest}}]}),en=(0,a.memo)(function(e){var n=(0,y.Ge)();return(0,o.Y)("input",(0,i._)({autoFocus:e.autoFocus,onKeyDown:e.onKeyDown,css:ee.root,placeholder:n.placeholder,value:n.value,onChange:n.onChange,ref:n.ref,onBlur:n.onBlur,disabled:n.disabled,autoCorrect:"off",autoComplete:"off",autoCapitalize:"off"},n.ariaAttrs))}),et=[h.b.filled,g.wp.viewStyle,g.wp.flex.row,g.wp.align.center,g.wp.flex.growAndShrink(1),{height:b.eQ.inputBarHeight,borderRadius:4}],er=(0,f.x)({container:[{paddingTop:b.eQ.inputBarPadding,paddingInline:b.eQ.inputBarPadding,"& > div > button + input":{paddingLeft:0}}],surface:et,surfaceRunning:[et,m.S.foregroundPulse()]});function ei(e){var n=(0,y.d9)(),t=(0,y.f6)(),i=(0,N.ob)(y.wm),l=(0,s.A)(function(e){return i(e.height)}),c=(0,a.useRef)(null);return(0,u.d)(c,t,function(e){var n;return n={},(0,r._)(n,b.O3.borderBottomRightRadius,e?p.LU.space8:"0"),(0,r._)(n,b.O3.borderBottomLeftRadius,e?p.LU.space8:"0"),n}),(0,o.Y)(o.FK,{children:(0,o.Y)(w.S,{css:er.container,innerRef:l,style:{},children:(0,o.Y)(w.S,{innerRef:c,css:n?er.surfaceRunning:er.surface,children:e.children})})})}var eo=(0,a.memo)(function(e){var n=(0,y.J4)(),t=(0,y.oh)();return n?(0,o.Y)(D,{onClick:e.onClick,isLoading:t}):null}),ea=(0,a.memo)(function(){var e,n,t,i,u=(0,y.MO)(),f=u.isOpen,h=u.focus,m=u.clearCommands,S=u.isClearable,Y=u.onKeyDown,x=u.inputValue,C=u.noResults,k=u.hasHighlightedItem,D=u.isRunning,E=u.actionError,R=(0,l.A)({inputValue:x,noResults:C,hasHighlightedItem:k});e=(0,N.Ou)(y.Ai),n=(0,N.h)(y.wm),t=(0,N.AI)(y.PI),(0,a.useEffect)(function(){var r=function(n){var t=e().onTotalHeightChange;t&&(0===i&&(i=n),t({initial:i,current:n}))};if(0!==n){var i=0;return r(t.current),t.subscribe(r)}},[n,e,t]);var I=(0,N.h)(y.Tu),F=(0,N.h)(y.Hi),T=(0,N.h)(y.$6),P=(0,N.h)(y.nW),L=(0,N.h)(y.RY),U=(0,N.h)(y.yr),O=(0,N.Ou)(y.Ai),M=(0,c.A)(function(){return function(e){var n,t=R.current,r=O();if(null==(n=r.onKeyDown)||n.call(r,e,{inputValue:t.inputValue,noResults:t.noResults,hasHighlightedItem:t.hasHighlightedItem}),!e.defaultPrevented){if("Enter"===e.key&&t.inputValue&&t.noResults&&r.onSubmit)return void r.onSubmit(t.inputValue);Y(e)}}},[R,Y,O]);(0,a.useEffect)(function(){L&&(L.current=h)},[h,L]);var B=(0,y._f)(),H=(0,N.ob)(y.Uz),z=(0,s.A)(function(e){return H(e.height)}),W=(0,N.h)(y.KO),G=(0,N.h)(y.tL),V=(0,N.h)(y.b7);return(0,o.Y)(w.S,{css:X.root,style:(i={},(0,r._)(i,b.O3.fontSize,W+"px"),(0,r._)(i,b.O3.iconSize,G?"12px":"16px"),(0,r._)(i,b.O3.inputBarHeight,G?"28px":"32px"),(0,r._)(i,b.O3.inputBarPadding,G?p.LU.space4:p.LU.space8),(0,r._)(i,b.O3.menuPaddingTop,G?p.LU.space4:p.LU.space8),(0,r._)(i,b.O3.containerType,G?"normal":"inline-size"),i),children:(0,o.FD)(w.S,{css:X.content,style:V?{maxWidth:"100%"}:void 0,children:[(0,o.Y)("label",{id:B.label,htmlFor:B.input,css:g.wp.visuallyHidden,children:"Commands"}),(0,o.FD)(ei,{children:[(0,o.Y)(A,{}),(0,o.Y)(en,{autoFocus:I,onKeyDown:M}),(0,o.Y)(eo,{onClick:function(){return m({focus:!0})}}),F&&!S?(0,o.Y)(w.S,{css:X.keyComboBlocks,children:(0,o.Y)(d._y,{keyCombo:F,fontSize:.85*W})}):null]}),E?(0,o.Y)(w.S,{css:X.error,children:(0,o.Y)(v.N,{colorway:"warning",text:E})}):null,f&&!D?(0,o.FD)(o.FK,{children:[(0,o.Y)(Q,{minItemHeight:U,overscan:T,hasFooter:!!P}),P?(0,o.Y)(w.S,{innerRef:z,css:X.footer,children:P}):null]}):null,D?(0,o.Y)(w.S,{css:X.running,children:(0,o.Y)(_.A,{size:24})}):null]})})});function el(e){var n=(0,y.PY)(e);return(0,o.Y)(N.Pd.Provider,{value:n,children:(0,o.Y)(ea,{})})}},92192:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(88263),a=t(71117);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M9.713 4.077a8.25 8.25 0 0 1 10.07 5.173.75.75 0 1 0 1.414-.5A9.75 9.75 0 0 0 5.118 5.1L1.75 8.266V4a.75.75 0 0 0-1.5 0v6c0 .414.336.75.75.75h6a.75.75 0 0 0 0-1.5H2.893l3.26-3.063a8.25 8.25 0 0 1 3.56-2.11ZM23.75 14a.75.75 0 0 0-.75-.75h-6a.75.75 0 0 0 0 1.5h4.107l-3.26 3.063-.018.017a8.25 8.25 0 0 1-13.612-3.08.75.75 0 1 0-1.414.5A9.75 9.75 0 0 0 18.882 18.9l3.368-3.165V20a.75.75 0 0 0 1.5 0v-6Z",clipRule:"evenodd"})}))}},92609:(e,n,t)=>{"use strict";t.d(n,{V:()=>o});var r=t(35084),i=t(6156);function o(){var e=(0,i.vm)(),n=(0,i.jl)(),t=(0,i.d0)();return e||n?r.on.Mac:t?r.on.Windows:r.on.Linux}},92966:(e,n,t)=>{"use strict";t.d(n,{O:()=>a$});var r,i=t(83846),o=t(12694),a=t(88263),l=t(21462),s=t(1230),c=t(54319),u=t(47630),d=t(5504),p=t(36640),f=t(88766),h=t(36061),m=t(78432);function g(e){var n=(0,c.NC)();return(0,u.Rj)(function(){return e?n.sessions.agent.all.latest.select(function(n){return(null==n?void 0:n.id)!==e}):null},[n,e],{default:!1})}var v=t(10342),w=t(77672),y=t(17844),b=t(93629),S=t(23099),Y=t.n(S),A=t(90067),x=t(12584),C=t(41114),_=t(86997);function k(){var e=(0,x._)(["\n  fragment AgentChatEventsRepl on Repl {\n    id\n    iconUrl\n    title\n  }\n"]);return k=function(){return e},e}function D(){var e=(0,x._)(["\n  query AgentChatEvents($id: String!) {\n    getRepl(id: $id) {\n      ... on Repl {\n        id\n        ...AgentChatEventsRepl\n      }\n    }\n  }\n  ","\n"]);return D=function(){return e},e}var E={},R=(0,C.J1)(k()),I=(0,C.J1)(D(),R),F=t(16564),T=t(97860),P=t(31062),L={direction:"forward",state:{approvedPlanId:null,planVersions:new Map,latestPlanId:null},reducer:function(e,n){var t=e.contents.contents;if((null==t?void 0:t.$kind)==="agentPlanEventContents"){var r=t.agentPlanEventContents;if(r.requiresApproval&&n.approvedPlanId===r.planId||r.initialCommitId)return;if(r.requiresApproval||(n.approvedPlanId=r.planId),null==n.latestPlanId)n.planVersions.set(r.planId,1);else{var i,o=null!=(i=n.planVersions.get(n.latestPlanId))?i:0;n.planVersions.set(r.planId,o+1)}n.latestPlanId=r.planId}}},U=t(92816),N=t(41852),O=t(11882),M=t(36112),B=t(76126),H=t(10429),z=t(46614),W=t.n(z),G=(0,l.memo)(function(e){var n=e.planIterationVersion,t=e.eventUpdated,r=e.planId,i=(0,N.rj)(),o=(0,l.useRef)(null);return(0,a.Y)(M.ui,{elevated:!0,clsx:W().root,as:"button",gap:8,innerRef:o,onClick:function(){var e;i(r),null==(e=o.current)||e.scrollIntoView({behavior:"smooth"})},children:(0,a.FD)(H.S,{row:!0,align:"center",gap:6,children:[(0,a.Y)(B.EY,{color:"dimmer",clsx:W().title,children:"Plan"}),(0,a.Y)(O.a,{text:"V".concat(n)}),(0,a.Y)(B.EY,{color:"dimmest",variant:"small",children:"Finished ".concat((0,U.A)(t,{addSuffix:!0}))})]})})}),V=t(29935),j=t(82643),Z=t(46603),q=t(9969),K=t(11721),$=t(80762),J=t(32852),Q=t(50939),X=t.n(Q),ee=(0,l.memo)(function(e){var n=(0,d._P)({controlName:"flag-back-to-the-future",logFlagToAnalytics:!1}),t=(0,c.NC)();if(!n)return null;var r=e.event,i=e.onSessionChange,o=r.status!==s.TB3.REVERT_DATA_STAGE_COMPLETE;return(0,a.FD)(H.S,{children:[(0,a.FD)(M.ui,{clsx:X().root,"data-event-id":r.eventId,row:!0,gap:8,children:[o?(0,a.Y)($.A,{clsx:X().revertIcon}):(0,a.Y)(J.A,{clsx:X().revertIcon}),(0,a.FD)(H.S,{gap:6,clsx:X().flexShrink,children:[(0,a.Y)(H.S,{gap:4,children:(0,a.Y)(B.EY,{multiline:!0,variant:"text",color:"dimmer",clsx:X().flexShrink,children:function(e){switch(e.status){case s.TB3.REVERT_DATA_STAGE_UNKNOWN:return"Starting rollback...";case s.TB3.REVERT_DATA_STAGE_LOADING_PREVIOUS_STATE:return"Loading previous checkpoint state...";case s.TB3.REVERT_DATA_STAGE_SHUTTING_DOWN_WORKFLOWS:return"Shutting down workflows...";case s.TB3.REVERT_DATA_STAGE_REVERTING_COMMIT:return"Reverting files to previous checkpoint...";case s.TB3.REVERT_DATA_STAGE_RESTARTING_WORKFLOWS:return"Restarting workflows";case s.TB3.REVERT_DATA_STAGE_COMPLETE:return"Rolled back to '".concat(e.checkpointTitle,"'");default:(0,F.A)(e.status)}}(r)})}),(0,a.FD)(H.S,{gap:12,row:!0,clsx:X().subtext,children:[(0,a.FD)(H.S,{row:!0,gap:4,children:[(0,a.Y)(B.EY,{multiline:!1,variant:"small",children:o?"Started":"Finished"}),(0,a.Y)(q.Dc,{textVariant:"small",live:!0,date:r.revertedAt})]}),(0,a.Y)(Z.$n,{size:"small",onClick:(0,V._)(function(){return(0,j.YH)(this,function(e){switch(e.label){case 0:return[4,t.sessions.get(r.originalSessionId).once()];case 1:return i(e.sent()),[2]}})}),variant:"underlined",text:"View original chat",iconLeft:(0,a.Y)(K.A,{})})]})]})]}),(0,a.FD)(H.S,{clsx:X().dividerContainer,children:[(0,a.Y)(H.S,{clsx:X().dividerLine}),(0,a.Y)(B.EY,{clsx:X().dividerText,color:"dimmest",children:"New chat"})]})]})}),en=t(79129),et=t(33221),er=t(3272),ei=t(21881),eo=t(19563),ea=t(35084),el=t(74837),es=t(7613),ec=t(96996),eu=new Set(["agentPlanStepBegin","blueprintsSetup","createFileData","createPostgresqlDatabaseData","deployConfigData","fileEditData","readFileData","readDirData","shellExecutionData","toolchainInstallData","packagerInstallData","packagerUninstallData","systemDependencyInstallData","systemDependencyUninstallData","screenshotData","searchFileData","searchFilesystemData","sqlExecutionData","webSearchData","webPageVisitData","workflowsStartToolData","workflowsRestartToolData","workflowsStopToolData","workflowsSetRunConfigToolData","workflowsRemoveRunConfigToolData"]);function ed(e){var n,t=(null==(n=e.optionType)?void 0:n.$kind)==="secretRequestAction"?e.optionType.secretRequestAction.secrets:void 0;return(null==t?void 0:t.length)?t:void 0}function ep(e){if(e.state===s.qOk.IN_PROGRESS)return!1;var n=e.contents.contents;if(!(0,s.VFn)(n,"agentTimelineEventContents"))return!1;var t=n.agentTimelineEventContents,r=t.toolData;return"user_response"===t.toolName&&(null==r?void 0:r.$kind)==="messageData"}var ef=function(e){return{direction:"reverse",state:{revert:null,acknowledged:new Set,approvedPlanId:null,didSeeRenderedEvent:!1,selectedFeatureIds:new Set},transformer:function(n,t){var r=t.revert;(null==(a=t.revert)?void 0:a.eventIdBeforeRevert)===n.id&&(t.revert=null);var i=n.contents.contents,o=null;switch(null==i?void 0:i.$kind){case"sessionCreationEventContents":case"contextComplexityEventContents":return;case"requestFeatureAddData":i.requestFeatureAddData.type===s.vqu.REQUEST_FEATURE_ADD_TYPE_NEON_DATABASE&&(o={type:"userMessage",message:"Please help me add a database to my app.",acknowledged:!0,created:n.created,attachedUrls:[],uploadedFiles:[],userId:Number(n.sender.id)});break;case"agentPlanEventContents":var a,l,c=i.agentPlanEventContents;if(c.requiresApproval&&t.approvedPlanId===c.planId||c.initialCommitId)return;c.requiresApproval||(t.approvedPlanId=c.planId),o={type:"planProposal",objective:c.objective.description,step:c.step,stackBlueprint:c.stackBlueprint,approvedByUserId:null==(l=c.Approver)?void 0:l.approver.id,sessionId:n.sessionId,planId:c.planId,requiresApproval:c.requiresApproval,designReferenceFilePaths:c.designReferenceFilePaths,eventState:n.state,eventCreated:n.created,eventUpdated:n.updated};break;case"revertEventContents":var u,d=i.revertEventContents.eventIdBeforeRevert;if((null==(u=t.revert)?void 0:u.eventIdBeforeRevert)===d){t.revert.reverterId=n.sender.id,t.revert.commitId=i.revertEventContents.commitId;return}t.revert={eventIdBeforeRevert:d,hiddenEvents:0,status:"inflight",reverterId:n.sender.id};return;case"messageEventContents":if(n.sender.type===s.utd.USER)o={type:"userMessage",userId:Number(n.sender.id),message:i.messageEventContents.content,uploadedFiles:i.messageEventContents.uploadedFiles,attachedUrls:i.messageEventContents.attachedUrls,created:null!=(p=n.created)?p:null,acknowledged:t.acknowledged.has(n.id),targetedElement:i.messageEventContents.targetedElement};else{var p,f,h,m=ed(i.messageEventContents.agentAction),g=!t.didSeeRenderedEvent&&(ep(n)||!!m);o={type:"agentMessage",message:null!=(h=null==i||null==(f=i.messageEventContents)?void 0:f.content)?h:"",requestedSecrets:m,sessionId:n.sessionId,state:n.state,waitingOnUser:g}}break;case"agentAskUserForActionRequest":var v,w,S,Y=(null==(v=i.agentAskUserForActionRequest.request)?void 0:v.$kind)==="nextStepRequest"?null==(S=i.agentAskUserForActionRequest.request)||null==(w=S.nextStepRequest)?void 0:w.newFeatureRequests:void 0;Y&&(Y=Y.map(function(e){return(0,b._)((0,y._)({},e),{isSelected:t.selectedFeatureIds.has(e.id)})})),o={type:"askUserForAction",message:i.agentAskUserForActionRequest.message,state:n.state,newFeatureRequests:Y};break;case"agentAskUserForActionResponse":var A,x=i.agentAskUserForActionResponse.response,C=(null==x?void 0:x.$kind)==="nextStepResponse"&&(null==(A=x.nextStepResponse.response)?void 0:A.$kind)==="newFeatureResponse"?x.nextStepResponse.response.newFeatureResponse:null;if(C)return t.selectedFeatureIds.add(C.selectedFeatureId),{type:"userMessage",userId:Number(n.sender.id),message:C.featureName,uploadedFiles:[],attachedUrls:[],created:n.created,acknowledged:!0};break;case"agentTimelineEventContents":if(n.error.message){o={type:"error",message:n.error.message};break}var _=i.agentTimelineEventContents.toolData;switch(null==_?void 0:_.$kind){case"messageData":var k=ed(_.messageData.agentAction),D=!t.didSeeRenderedEvent&&(ep(n)||!!k);o={type:"agentMessage",message:_.messageData.content,requestedSecrets:k,sessionId:n.sessionId,state:n.state,waitingOnUser:D};break;case"acknowledgeUserMessage":var E=_.acknowledgeUserMessage.eventIds,R=!0,I=!1,F=void 0;try{for(var T,P=E[Symbol.iterator]();!(R=(T=P.next()).done);R=!0){var L=T.value;t.acknowledged.add(L)}}catch(e){I=!0,F=e}finally{try{R||null==P.return||P.return()}finally{if(I)throw F}}break;case"commitData":o={type:"checkpoint",title:_.commitData.description.split("\n")[0],screenshotUrl:_.commitData.screenshotUrl,commitId:_.commitData.commitId,isPaid:_.commitData.billingRate===s.pSr.NORMAL,created:n.created,sessionId:n.sessionId,eventId:n.id,revert:null!=r?r:void 0};break;case"revertData":return t.revert={eventIdBeforeRevert:_.revertData.eventIdBeforeRevert,hiddenEvents:0,revertedAt:n.created,status:_.revertData.status===s.TB3.REVERT_DATA_STAGE_COMPLETE?"completed":"inflight"},o={type:"revert",status:_.revertData.status,revertedAt:n.created,eventId:n.id,originalSessionId:_.revertData.originalSessionId,checkpointTitle:_.revertData.checkpointTitle};case"deployData":o={type:"suggestDeploy"};break;default:if(!(null==_?void 0:_.$kind)||!eu.has(null==_?void 0:_.$kind)||n.state===s.qOk.IN_PROGRESS)break;var U=(0,ec.m)(n);if(!U)break;var N=(0,es.b)(n);o={type:"agentToolUse",sessionId:n.sessionId,eventId:n.id,toolDataKind:_.$kind,summary:U,data:N}}}if(o)return t.revert&&e?void t.revert.hiddenEvents++:(t.didSeeRenderedEvent=!0,o)}}},eh=ef(!0),em=ef(!1),eg=t(46963),ev=t(15036),ew=t(86105),ey=t(90629),eb=t(35992),eS=t(82977),eY=t(73547),eA=t(53231),ex=t(17459),eC=t(46756),e_=t(19882),ek=t(95139),eD=t(45639),eE=t(45263),eR=t(64583),eI=t(49045),eF=t(48521),eT=t(73108),eP=t(38292),eL=t(93080),eU=t(47388),eN=(0,eI.v)(["borderRadius"]),eO=eN.cssVars,eM=eN.styleTokens,eB=(0,eR.x)({root:[eF.wp.border({color:eE.LU.outlineDimmest}),eF.wp.overflow("hidden"),{borderWidth:"1px",borderRadius:eM.borderRadius}],header:[{backgroundColor:eD.s}],left:[eF.wp.mr(4)],middle:[eF.wp.flex.growAndShrink(1),eF.wp.rowWithGap(4),eF.wp.align.center],middleText:[eF.wp.width("100%"),{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}],divider:[{backgroundColor:eE.LU.outlineDimmer,height:16,marginLeft:4}]});function eH(e){var n=e.icon,t=e.title,r=e.right,s=e.elevated,c=void 0===s||s,u=e.onOpenPane,d=e.openPaneButtonAlt,p=e.children,f=e.renderChildrenOnlyWhenInView,h=void 0!==f&&f,m=e.showOpenPaneButton,g=(0,ek.m5)(),v=(0,l.useRef)(null),w=(0,eC.W)(v,{amount:0}),y=(0,l.useMemo)(function(){return!h||w},[w,h]),b=(0,o._)((0,l.useState)(0),2),S=b[0],Y=b[1],A=(0,e_.A)(function(e){h&&(!h||w)&&e.height>S&&Y(e.height)},{type:"debounce",wait:500});return(0,a.FD)(H.S,{css:eB.root,style:(0,i._)({},eO.borderRadius,g?"8px":"4px"),innerRef:v,children:[(0,a.FD)(H.S,{css:eB.header,py:4,px:6,row:!0,gap:4,align:"center",justify:"space-between",style:{backgroundColor:c?eD.s:void 0},children:[(0,a.Y)(H.S,{css:eB.left,align:"center",children:(0,l.cloneElement)(n,{size:16})}),(0,a.Y)(H.S,{css:eB.middle,children:(0,a.Y)(B.EY,{css:eB.middleText,children:t})}),(0,a.FD)(H.S,{align:"center",row:!0,gap:2,children:[r,u&&(void 0===m||m)?(0,a.FD)(a.FK,{children:[r?(0,a.Y)(eT.a,{css:eB.divider}):null,(0,a.Y)(eP.K0,{alt:void 0===d?"Open Pane":d,onClick:u,children:(0,a.Y)(eU.A,{})})]}):null]})]}),(0,a.Y)(M.ui,{innerRef:A,style:{minHeight:S},elevated:c,children:y?p:null})]})}var ez=(0,eR.x)({content:[(0,i._)({},eF.$_.max("mobileMax"),[eF.wp.maxHeight("calc(".concat(eL.R.height," - 60px)")),eF.wp.overflowY("auto"),{"&::-webkit-scrollbar":{display:"none"}}])],packagesWrapper:[{display:"flex",flexDirection:"row",flexWrap:"wrap",gap:eE.LU.space8}],package:[eF.wp.borderRadius(4),eF.wp.px(8),eF.wp.py(4),eF.wp.width("calc(50% - ".concat(eE.LU.space4,")"))]});function eW(e){var n=e.text,t=e.packageList,r=e.getPackageIcon,i=e.children,o=(0,ex._)(e,["text","packageList","getPackageIcon","children"]);return(0,a.FD)(eH,(0,b._)((0,y._)({renderChildrenOnlyWhenInView:!0},o),{children:[t.length?(0,a.Y)(H.S,{css:ez.content,p:8,children:(0,a.FD)(H.S,{gap:8,children:[(0,a.Y)(B.EY,{color:"dimmest",children:n}),(0,a.Y)(H.S,{css:ez.packagesWrapper,children:t.map(function(e,n){return(0,a.Y)(M.ui,{css:ez.package,row:!0,gap:8,align:"center",justify:"space-between",elevated:!0,children:(0,a.FD)(H.S,{row:!0,gap:4,align:"center",children:[r(e),(0,a.Y)(B.EY,{children:e})]})},n)})})]})}):null,i]}))}var eG=t(31756),eV=t(31258),ej=t(70548),eZ=t(49150),eq=t(18870),eK=t(29425),e$=t(75576),eJ=(0,eR.x)({secretName:[eF.wp.fontWeight.medium],secretValueCellHeader:[eF.wp.gap(4),eF.wp.color.foregroundDimmer],tableRow:[eF.wp.flex.column,eF.wp.gap(8)],secretsRow:[eF.wp.gap(8)],checkboxCell:[{flexGrow:0,flexShrink:0,width:eE.LU.space24}],secretValueCell:[eF.wp.flex.column,eF.wp.gap(4),{width:"30%"}],confirmationMessage:[eF.wp.color.accentPositiveStronger,eF.wp.flex.row,eF.wp.align.center,eF.wp.gap(4)]});function eQ(e){var n=e.value,t=e.label,r=(0,o._)((0,l.useState)(!1),2),i=r[0],s=r[1],c=(0,l.useCallback)(function(){s(function(e){return!e})},[]);return(0,a.FD)(H.S,{css:eJ.secretValueCell,children:[(0,a.FD)(H.S,{css:eJ.secretValueCellHeader,row:!0,align:"center",children:[(0,a.Y)("span",{children:t}),(0,a.Y)(eP.K0,{alt:"Toggle Visibility",onClick:c,children:i?(0,a.Y)(eK.A,{}):(0,a.Y)(e$.A,{})})]}),(0,a.Y)(B.EY,{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:i?n:""})]})}function eX(e){var n=e.existingSecrets,t=e.accountSecrets,r=e.onContinue,i=e.step,s=e.linkedSecrets,c=e.onSecretsUpdated,u=e.replaceAllExternalSecrets,d=e.removeEntries,f=(0,p.A)(),h=(0,o._)((0,eG.nB)(),1)[0],m=(0,P.A)(),g=(0,o._)((0,el.WM)(m,u),1)[0],v=(0,o._)((0,el.Nz)(m,u),1)[0],w=(0,o._)((0,l.useState)(n),2),y=w[0],b=w[1],S=(0,o._)((0,l.useState)(!0),2),Y=S[0],A=S[1],x=(0,o._)((0,l.useState)(!1),2),C=x[0],_=x[1],k="done"===i,D=(0,o._)((0,l.useState)(new Set),2),E=D[0],R=D[1],I=(0,o._)((0,l.useState)(!1),2),F=I[0],T=I[1];(0,l.useEffect)(function(){b(n),1===n.length&&R(new Set([n[0].key]))},[n]);var L=(0,l.useCallback)(function(e){R(function(n){var t=new Set(n);return t.has(e)?t.delete(e):t.add(e),t})},[]),U=(0,l.useMemo)(function(){return new Map(t.map(function(e){return[e.name,e]}))},[t]),N=(0,l.useCallback)(function(){A(!1),r()},[r]),O=(0,l.useCallback)((0,V._)(function(){var e,n,t,i,o,a,l,u,p,w;return(0,j.YH)(this,function(b){switch(b.label){case 0:if(0===E.size)return N(),[2];T(!0),b.label=1;case 1:if(b.trys.push([1,8,,9]),a=y.filter(function(e){return E.has(e.key)}),!((u=((null==s||null==(e=s.getRepl)?void 0:e.__typename)==="Repl"&&null!=(l=s.getRepl.sharedSecretLinks)?l:[]).filter(function(e){return a.some(function(n){return n.key===e.alias})}).map(function(e){return e.id})).length>0))return[3,3];return[4,v({variables:{input:{resourceId:m,resourceType:ea.U9.Repl,ids:u}}})];case 2:b.sent(),b.label=3;case 3:return[4,d.apply(void 0,(0,ew._)(a.map(function(e){return e.key})))];case 4:return b.sent(),[4,h({variables:{input:{ownerType:ea.n0.Account,secrets:a.map(function(e){var n,t;return{id:null!=(t=null==(n=U.get(e.key))?void 0:n.id)?t:"",name:e.key,value:e.value}})}}})];case 5:if(p=b.sent(),(0,eA.u4)(eA.AZ.SHARED_SECRETS_USED,{ownerType:"account",action:"update",source:"agent"}),!((null==(n=p.data)?void 0:n.updateSharedSecrets.__typename)==="UpdateSharedSecretsResult"&&(null==(i=p.data)||null==(t=i.updateSharedSecrets)?void 0:t.updatedSecrets)))return[3,7];return[4,g({variables:{input:{resourceId:m,resourceType:ea.U9.Repl,secrets:p.data.updateSharedSecrets.updatedSecrets.map(function(e){return{secretId:e.id,alias:e.name}})}}})];case 6:b.sent(),(0,eA.u4)(eA.AZ.SHARED_SECRETS_USED,{ownerType:"account",action:"link",source:"agent",count:p.data.updateSharedSecrets.updatedSecrets.length}),b.label=7;case 7:return A(!1),T(!1),_(!0),r(),(null==(o=p.data)?void 0:o.updateSharedSecrets.__typename)==="UpdateSharedSecretsResult"&&(null==c||c(a.map(function(e){return{key:e.key,selectedKey:e.key}}))),[3,9];case 8:return w=b.sent(),ey.Cp(w),f.showError("Something went wrong. Please try again."),T(!1),[3,9];case 9:return[2]}})}),[h,v,y,E,r,N,U,f,g,m,s,c,d]),M=y.length,z=(0,eV.A)("Secret",M),W=1===M?"it":"them",G=E.size,q=(0,eV.A)("Secret",G),K=(0,l.useMemo)(function(){return 1===y.length?y[0]:null},[y]);return 0===M||"savingExistingSecrets"!==i&&"done"!==i?null:K?(0,a.FD)(a.FK,{children:[(0,a.FD)(B.EY,{children:['A Secret named "',K.key,'" already exists in your Account Secrets. Would you like to replace it with the new value?']}),(0,a.FD)(H.S,{row:!0,gap:4,children:[(0,a.Y)(Z.$n,{text:"Replace Account Secret",onClick:O,loading:F,disabled:k}),(0,a.Y)(Z.$n,{text:"Not now",variant:"outlined",onClick:N,loading:F,disabled:k})]}),k&&C&&(0,a.FD)(H.S,{css:eJ.confirmationMessage,children:[(0,a.Y)(eq.A,{size:16}),"Secret updated and linked"]})]}):(0,a.Y)(eZ.a,{isOpen:Y,onRequestClose:N,children:(0,a.FD)(H.S,{gap:16,children:[(0,a.FD)(B.Y9,{level:3,variant:"subheadDefault",children:[M," matching ",z," already exist",1===M?"s":""," in your account.",(0,a.Y)("br",{}),"Would you like to replace ",W,"?"]}),(0,a.Y)(H.S,{gap:8,children:y.map(function(e){var n=t.find(function(n){return n.name===e.key});return(0,a.FD)(H.S,{css:eJ.tableRow,p:6,children:[(0,a.Y)(H.S,{row:!0,align:"center",children:(0,a.Y)(B.EY,{css:eJ.secretName,children:e.key})}),(0,a.FD)(H.S,{css:eJ.secretsRow,row:!0,align:"center",children:[(0,a.Y)(H.S,{css:eJ.checkboxCell,children:(0,a.Y)(ej.S,{checked:E.has(e.key),onChange:function(){return L(e.key)}})}),(0,a.Y)(eQ,{label:"Existing",value:(null==n?void 0:n.value)||""}),(0,a.Y)(eQ,{label:"New",value:e.value})]})]},e.key)})}),(0,a.FD)(H.S,{row:!0,gap:4,children:[(0,a.Y)(Z.$n,{text:"Cancel",onClick:N,disabled:F}),(0,a.Y)(Z.$n,{colorway:"primary",text:"Replace ".concat(G," ").concat(q),onClick:O,loading:F})]})]})})}var e0=t(86814),e1=(0,eR.x)({confirmationMessage:[eF.wp.color.accentPositiveStronger,eF.wp.flex.row,eF.wp.align.center,eF.wp.gap(4)]});function e2(e){var n=e.newSecrets,t=e.step,r=e.onContinue,i=e.linkSecrets,s=e.unlinkSecrets,c=e.linkedSecrets,u=e.onSecretsUpdated,d=e.removeEntries,f=(0,p.A)(),h=(0,o._)((0,l.useState)(!1),2),m=h[0],g=h[1],v=(0,o._)((0,eG.w7)(),1)[0],w=(0,o._)((0,l.useState)(!1),2),y=w[0],b=w[1],S=(0,l.useCallback)((0,V._)(function(){var e,t,o,a,l,p,h;return(0,j.YH)(this,function(m){switch(m.label){case 0:g(!0),m.label=1;case 1:return m.trys.push([1,8,,9]),[4,v({variables:{input:{ownerType:ea.n0.Account,secrets:n.map(function(e){return{name:e.key,value:e.value}})}}})];case 2:if(!((null==(e=(t=m.sent()).data)?void 0:e.createSharedSecrets)&&"createdSecrets"in t.data.createSharedSecrets&&"CreateSharedSecretsResult"===t.data.createSharedSecrets.__typename&&t.data.createSharedSecrets.createdSecrets))return[3,7];return a=t.data.createSharedSecrets.createdSecrets,[4,d.apply(void 0,(0,ew._)(n.map(function(e){return e.key})))];case 3:if(m.sent(),!((p=((null==c||null==(o=c.getRepl)?void 0:o.__typename)==="Repl"&&null!=(l=c.getRepl.sharedSecretLinks)?l:[]).filter(function(e){return n.some(function(n){return n.key===e.alias})}).map(function(e){return e.id})).length>0))return[3,5];return[4,s(p)];case 4:m.sent(),m.label=5;case 5:return[4,i(a.map(function(e){return{secretId:e.id,alias:e.name}}))];case 6:m.sent(),null==u||u(a.map(function(e){return{key:e.name,selectedKey:e.name}})),(0,eA.u4)(eA.AZ.SHARED_SECRETS_USED,{ownerType:"account",action:"link",source:"agent",count:a.length}),m.label=7;case 7:return(0,eA.u4)(eA.AZ.SHARED_SECRETS_USED,{ownerType:"account",action:"create",source:"agent"}),b(!0),r(),[3,9];case 8:return h=m.sent(),ey.Cp(h),f.showError("Something went wrong."),[3,9];case 9:return g(!1),[2]}})}),[n,r,v,f,i,s,c,u,d]);return 0===n.length?null:(0,a.FD)(a.FK,{children:[(0,a.FD)(B.EY,{children:["Would you like to save"," ",1===n.length?"this Secret":"these Secrets"," to your Account Secrets so you can easily access"," ",1===n.length?"it":"them"," in other Apps?"]}),n.length>1&&(0,a.Y)(B.EY,{color:"dimmest",children:n.map(function(e){return e.key}).join(", ")}),(0,a.FD)(H.S,{row:!0,gap:4,children:[(0,a.Y)(Z.$n,{text:"Add to Account Secrets",onClick:S,iconLeft:(0,a.Y)(e0.A,{}),loading:m,disabled:"savingNewSecrets"!==t||y}),(0,a.Y)(Z.$n,{text:"Not now",variant:"outlined",onClick:r,disabled:"savingNewSecrets"!==t||y,loading:m})]}),y&&(0,a.FD)(H.S,{css:e1.confirmationMessage,children:[(0,a.Y)(eq.A,{size:16}),(0,eV.A)("Secret",n.length)," saved to account"]})]})}var e4=t(22318),e5=t(45149),e3=t(65483),e6=t(76688),e8=t.n(e6);function e7(e){var n,t=e.watch,r=(0,o._)((0,l.useState)(new Map),2),i=r[0],s=r[1];return(0,l.useEffect)(function(){return t(s)},[t]),(0,a.Y)(H.S,{clsx:e8().root,gap:4,children:(0,a.FD)(H.S,{gap:4,children:[(0,a.Y)(H.S,{row:!0,align:"center",gap:6,justify:"space-between",children:(0,a.FD)(H.S,{row:!0,align:"center",gap:6,children:[(0,a.Y)(e5.A,{color:eE.LU.foregroundDimmer}),(0,a.FD)(B.EY,{color:"dimmer",children:[(0,eV.A)("secrets",null==(n=e.keys)?void 0:n.length,!0)," requested"]}),(0,a.Y)(B.EY,{variant:"small",multiline:!1,color:"dimmest",children:""}),(0,a.Y)(Z.$n,{clsx:e8().seeAllButton,variant:"underlinedOnHover",text:"See all secrets",onClick:e.openSecerets})]})}),(0,a.Y)(H.S,{clsx:e8().requestedSecretsList,gap:6,row:!0,children:e.keys.map(function(e){return(0,a.FD)(H.S,{align:"center",row:!0,gap:4,clsx:e8().requestedSecretsListItem,p:4,children:[(null==i?void 0:i.get(e))?(0,a.Y)(e4.A,{color:eE.LU.foregroundDimmer,size:12}):(0,a.Y)(e3.A,{color:eE.LU.foregroundDimmest,size:12}),(0,a.Y)(B.EY,{variant:"small",color:"dimmer",children:e})]},e)})})]})})}var e9=t(71117);function ne(e){return(0,a.FD)(e9.Ay,(0,b._)((0,y._)({viewBox:"0 0 16 16"},e),{children:[(0,a.Y)("path",{fillRule:"evenodd",d:"M6.95 2a2.85 2.85 0 1 0 0 5.7 2.85 2.85 0 0 0 0-5.7M5 4.85a1.95 1.95 0 1 1 3.9 0 1.95 1.95 0 0 1-3.9 0",clipRule:"evenodd"}),(0,a.Y)("path",{d:"M4.55 9.2a2.85 2.85 0 0 0-2.85 2.85v1.2a.45.45 0 0 0 .9 0v-1.2a1.95 1.95 0 0 1 1.95-1.95h3.902a1.62 1.62 0 0 1 .322-.9z"}),(0,a.Y)("path",{fillRule:"evenodd",d:"M11.783 7.05c-.384 0-.748.136-1.012.371a1.15 1.15 0 0 0-.404.86v.936H13.2v-.935c0-.317-.141-.627-.404-.86a1.53 1.53 0 0 0-1.013-.372M13.7 9.225v-.943c0-.47-.21-.913-.572-1.235a2.03 2.03 0 0 0-1.345-.497c-.5 0-.983.176-1.344.497a1.65 1.65 0 0 0-.572 1.235v.943a.73.73 0 0 0-.469.31 1.14 1.14 0 0 0-.198.66v2.545c0 .246.07.48.198.66a.7.7 0 0 0 .57.317h3.63c.245 0 .443-.14.57-.318.128-.179.199-.412.199-.66v-2.545c0-.247-.071-.48-.199-.66a.73.73 0 0 0-.468-.309m-3.732.492c-.04 0-.102.023-.163.108a.64.64 0 0 0-.105.37v2.545c0 .155.045.284.105.369.061.085.122.108.163.108h3.63c.041 0 .102-.023.163-.108a.64.64 0 0 0 .106-.37v-2.545a.64.64 0 0 0-.106-.369c-.06-.085-.122-.108-.163-.108z",clipRule:"evenodd"}),(0,a.Y)("path",{fillRule:"evenodd",d:"M10.356 6.954c.385-.343.9-.529 1.427-.529.528 0 1.043.186 1.428.529.387.344.614.82.614 1.328v.845c.19.06.34.189.445.335.144.202.222.462.222.732v2.546c0 .27-.078.53-.222.732-.143.2-.376.37-.672.37h-3.63c-.296 0-.528-.17-.672-.37a1.27 1.27 0 0 1-.221-.732v-2.546c0-.27.077-.53.221-.732a.88.88 0 0 1 .446-.335v-.845c0-.508.227-.984.614-1.328m1.427-.279c-.47 0-.925.166-1.261.466-.338.3-.53.71-.53 1.14v.944a.125.125 0 0 1-.105.124.6.6 0 0 0-.387.258c-.11.156-.175.363-.175.587v2.546c0 .223.064.431.175.586.11.156.275.266.468.266h3.63c.194 0 .358-.11.468-.266.111-.155.176-.363.176-.586v-2.546c0-.224-.065-.431-.176-.587a.6.6 0 0 0-.386-.258.125.125 0 0 1-.105-.124v-.943c0-.431-.193-.841-.53-1.141s-.791-.466-1.262-.466m0 .5c-.356 0-.69.126-.93.34a1.03 1.03 0 0 0-.361.767v.81h2.583v-.81c0-.279-.124-.556-.362-.768a1.4 1.4 0 0 0-.93-.339m-1.095.153a1.65 1.65 0 0 1 1.095-.403c.414 0 .808.146 1.096.403.288.255.446.6.446.954v.935a.125.125 0 0 1-.125.125h-2.833a.125.125 0 0 1-.125-.125v-.935c0-.355.158-.699.446-.954m-.719 2.514c-.004 0-.028.008-.062.056a.5.5 0 0 0-.082.296v2.546a.5.5 0 0 0 .082.296c.034.048.058.055.062.056h3.628c.005 0 .028-.008.062-.056a.5.5 0 0 0 .083-.296v-2.546a.5.5 0 0 0-.083-.296c-.034-.048-.057-.055-.062-.056zm-.265-.09c.078-.109.173-.16.264-.16h3.63c.091 0 .187.051.265.16a.77.77 0 0 1 .129.442v2.546a.77.77 0 0 1-.129.441c-.078.11-.174.161-.265.161h-3.63c-.09 0-.186-.051-.264-.16a.77.77 0 0 1-.13-.442v-2.546c0-.178.053-.333.13-.441",clipRule:"evenodd"})]}))}var nn=t(31342),nt=t(17070),nr=(0,eR.x)({root:[eF.wp.flex.row,eF.wp.justify.spaceBetween,eF.wp.align.center],metadata:[eF.wp.flex.column,eF.wp.gap(8),eF.wp.width("100%")],label:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},value:{'&[data-sensitive="true"]':{fontFamily:"text-security-disc"},whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},comboBox:[{"& > * > *":{backgroundColor:"".concat(eE.LU.backgroundDefault," !important")}}]}),ni=(0,l.forwardRef)(function(e,n){var t=e.secretKey,r=e.secretValue,i=e.isSensitive,o=(0,ex._)(e,["secretKey","secretValue","isSensitive"]);return(0,a.Y)(nt.if,(0,b._)((0,y._)({},o),{ref:n,textValue:t,css:nr.root,children:(0,a.FD)("div",{css:nr.metadata,children:[(0,a.Y)(B.EY,{color:"dimmer",variant:"small",css:nr.label,children:t}),(0,a.Y)(B.EY,{variant:"small",css:nr.value,"data-sensitive":i,children:i?"********":r})]})}))}),no=(0,l.forwardRef)(function(e,n){var t=e.accountSecrets,r=e.onChange,i=e.onSelectionChange,o=e.value,s=e.isSensitive,c=e.readOnly,u=e.keyName,d=e.selectedKey,p=(0,l.useRef)(!1);return(0,a.Y)(nn.a,{ref:n,triggerIcon:(0,a.Y)(ne,{}),css:nr.comboBox,maxHeight:200,menuTrigger:"focus","aria-label":"".concat(u," Value"),isRequired:!0,isDisabled:c,allowsEmptyCollection:!1,selectedKey:d,onSelectionChange:function(e){if(e){p.current=!0;var n,o=t.find(function(n){return n.name===e});r(null!=(n=null==o?void 0:o.value)?n:""),i(e),setTimeout(function(){p.current=!1},50)}},onInputChange:function(e){p.current||(r(e),i(null))},inputValue:o,isInvalid:!1,allowsCustomValue:!0,formValue:"text",children:t.map(function(e){return(0,a.Y)(ni,{isSensitive:s,secretKey:e.name,secretValue:e.value,label:e.name,id:e.name},e.name)})})}),na=t(79209),nl=t(42425),ns=t(77089),nc=t(59172),nu=t(26976),nd=(0,na.AH)({display:"grid",gridTemplateColumns:"minmax(0, 2fr) minmax(0, 3fr)",gridAutoFlow:"row",gap:eE.LU.space8,"> *":{height:"fit-content"}}),np=(0,eR.x)({root:[nd]}),nf=(0,eR.x)({actions:[eF.wp.gap(4),eF.wp.flex.wrap],secretHeader:[nd,eF.wp.mb(4),eF.wp.fontSize("small"),eF.wp.color.foregroundDimmer,{lineHeight:eE.LU.lineHeightSmall,"> div":[eF.wp.gap(4),{display:"flex",alignItems:"center",flexDirection:"row"}]}],secretValueRoot:[eF.wp.gap(8),{'&[data-sensitive="true"] input':{fontFamily:"text-security-disc"}}],secretValueInput:[eF.wp.flex.column,eF.wp.flex.growAndShrink(1)],primaryButton:[(0,nl.Li)("blurple"),{width:"fit-content","&[disabled]":[(0,nl.Li)("grey")]}],input:[{backgroundColor:eE.LU.backgroundDefault}],secretValueFooter:[eF.wp.p(4),{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}]}),nh=(0,l.forwardRef)(function(e,n){var t=e.keyName,r=e.value,i=e.onChange,o=e.readOnly,s=e.accountSecrets,c=e.isSensitive,u=e.selectedKey,d=e.onSelectedKeyChange,p=(0,l.useMemo)(function(){return(0,ew._)(s).sort(function(e,n){return e.name===t?-1:+(n.name===t)})},[s,t]);return(0,a.FD)(H.S,{css:np.root,children:[(0,a.Y)(H.S,{children:(0,a.Y)(ns.pd,{value:t,disabled:!0,css:nf.input})}),(0,a.Y)(H.S,{css:nf.secretValueRoot,row:!0,align:"start","data-sensitive":c,children:(0,a.FD)(H.S,{css:nf.secretValueInput,children:[(0,a.Y)(no,{ref:n,accountSecrets:p,onChange:i,onSelectionChange:d,value:r,isSensitive:c,readOnly:o,keyName:t,selectedKey:u}),u?(0,a.FD)(H.S,{row:!0,gap:4,align:"center",children:[(0,a.Y)(nc.m_,{tooltip:"Link Account Secret to this Repl",children:(0,a.Y)(e4.A,{color:eE.LU.accentPrimaryStronger})}),(0,a.FD)(B.EY,{variant:"small",color:"dimmer",css:nf.secretValueFooter,children:["Using ",u]})]}):null]})})]})});function nm(e){var n,t=e.keys,r=e.addEntries,i=e.removeEntries,s=e.onComplete,c=e.sessionId,u=e.isLast,d=e.replId,f=e.linkSecrets,h=e.unlinkSecrets,m=e.replaceAllExternalSecrets,g=e.watch,v=e.openSecrets,w=(0,p.A)(),S=(0,o._)((0,l.useState)(!1),2),Y=S[0],A=S[1],x=(0,o._)((0,l.useState)(!0),2),C=x[0],_=x[1],k=(0,eS.m1)({fetchPolicy:"cache-and-network",ssr:!1}).data,D=(0,l.useMemo)(function(){var e;return(null==k||null==(e=k.currentUser)?void 0:e.secrets.__typename)==="SharedSecretConnection"?k.currentUser.secrets.items:[]},[k]),E=(0,eS.bM)({variables:{replId:d}}).data,R=(0,o._)((0,l.useState)(t.map(function(e){return{key:e,value:""}})),2),I=R[0],F=R[1],T=(0,o._)((0,l.useState)(new Map),2),P=T[0],L=T[1];(0,l.useEffect)(function(){D&&I.every(function(e){return""===e.value})&&(F((0,eb.jM)(function(e){e.forEach(function(e){var n=D.find(function(n){return n.name===e.key});n&&(e.value=n.value)})})),L((0,eb.jM)(function(e){t.forEach(function(n){var t=D.find(function(e){return e.name===n});t&&e.set(n,t.name)})})))},[D,t,I]);var U=(0,o._)((0,l.useState)(u?"selecting":"done"),2),N=U[0],O=U[1],M=(0,o._)((0,l.useState)([]),2),B=M[0],z=M[1],W=(0,o._)((0,l.useState)([]),2),G=W[0],q=W[1],K=(0,o._)((0,l.useState)([]),2),J=(K[0],K[1]),Q=(0,ev.Ay)(),X=(0,l.useRef)(!1);(0,l.useEffect)(function(){!X.current&&t&&(Q({action:"secrets_requested",secretsRequested:t,sessionId:c}),X.current=!0)},[t,c,Q]);var ee=(0,l.useMemo)(function(){return I.every(function(e){return!!e.value})},[I]),en=(0,l.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.nextNewSecrets,t=e.nextExistingEntries,r=e.nextMatchingEntries;n&&z(n),t&&q(t),r&&J(r);var i=null!=n?n:B,o=null!=t?t:G,a={selecting:function(){return i.length>0?"savingNewSecrets":o.length>0?"savingExistingSecrets":"done"},savingNewSecrets:function(){return o.length>0?"savingExistingSecrets":"done"},savingExistingSecrets:"done",done:"done"};N in a&&O("function"==typeof a[N]?a[N]():a[N])},[G,B,N]),et=(0,eY.Z)(N),er=(0,l.useRef)("done"===N);(0,l.useEffect)(function(){"selecting"===N||er.current||(P.size>0&&(0,eA.u4)(eA.AZ.SHARED_SECRETS_USED,{ownerType:"account",action:"copy",source:"agent",size:P.size}),er.current=!0,s().catch(function(e){ey.Cp(e),w.showError("Something went wrong. Please try again."),er.current=!1,et&&O(et)}))},[s,N,P,w,et]);var ei=(n=(0,V._)(function(){var e,n,t,o,a,l,s,c,u;return(0,j.YH)(this,function(d){switch(d.label){case 0:A(!0),d.label=1;case 1:if(d.trys.push([1,8,,9]),e=new Map(D.map(function(e){return[e.name,e]})),t=(n=I.reduce(function(n,t){var r=e.get(t.key);return r?r.value===t.value?n.matchingEntries.push(t):n.existingEntries.push(t):n.newEntries.push(t),n},{newEntries:[],existingEntries:[],matchingEntries:[]})).newEntries,o=n.existingEntries,!((a=n.matchingEntries).length>0||o.length>0||t.length>0))return[3,7];if(!((l=(0,ew._)(a).concat((0,ew._)(o),(0,ew._)(t)).map(function(e){return e.key})).length>0))return[3,3];return[4,i.apply(void 0,(0,ew._)(l.map(function(e){return e})))];case 2:d.sent(),d.label=3;case 3:if(s=(0,ew._)(a).concat((0,ew._)(o),(0,ew._)(t)).map(function(e){var n=e.key,t=P.get(n);if(t){var r=D.find(function(e){return e.name===t});if(r)return{secretId:r.id,alias:n}}return null}).filter(function(e){return null!==e}),c=(0,ew._)(a).concat((0,ew._)(o),(0,ew._)(t)).filter(function(e){return!P.has(e.key)}),!(s.length>0))return[3,5];return[4,f(s)];case 4:d.sent(),d.label=5;case 5:if(!(c.length>0))return[3,7];return[4,r(c)];case 6:d.sent(),d.label=7;case 7:return en({nextNewSecrets:t,nextExistingEntries:o,nextMatchingEntries:a}),[3,9];case 8:return u=d.sent(),ey.Cp(u),w.showError("Something went wrong. Please try again."),[3,9];case 9:return A(!1),[2]}})}),function(){return n.apply(this,arguments)}),eo=(0,l.useRef)(null),ea=(0,l.useRef)(null),el=(0,l.useCallback)(function(){ea.current&&ea.current.focus()},[]);return(0,a.FD)(H.S,{gap:8,children:[u?(0,a.Y)(eH,{icon:(0,a.Y)(e5.A,{}),title:"Secrets",children:(0,a.FD)(H.S,{p:8,children:[(0,a.FD)(H.S,{css:nf.secretHeader,children:[(0,a.Y)(H.S,{children:"Key"}),(0,a.FD)(H.S,{children:["Value",(0,a.Y)(eP.K0,{alt:"Toggle Visibility",tooltipBehavior:"hidden",onClick:function(){return _(!C)},size:18,children:C?(0,a.Y)(eK.A,{}):(0,a.Y)(e$.A,{})})]})]}),(0,a.FD)(H.S,{gap:8,innerRef:eo,children:[I.map(function(e,n){var t,r=e.key,i=e.value;return(0,a.Y)(nh,{isSensitive:C,keyName:r,value:i,readOnly:"done"===N,accountSecrets:D,selectedKey:null!=(t=P.get(r))?t:null,onSelectedKeyChange:function(e){L(function(n){var t=new Map(n);return e?t.set(r,e):t.delete(r),t})},onChange:function(e){F(function(n){return n.map(function(n){return n.key===r?(0,b._)((0,y._)({},n),{value:e}):n})})},ref:n===I.length-1?ea:void 0},r)}),(0,a.FD)(H.S,{css:nf.actions,row:!0,justify:"space-between",children:[D.length>0&&"selecting"===N?(0,a.Y)(Z.$n,{iconLeft:(0,a.Y)(ne,{}),text:"Choose from Account Vault",onClick:el,disabled:"selecting"!==N,loading:Y}):(0,a.Y)("span",{}),(0,a.Y)(Z.$n,{css:nf.primaryButton,iconLeft:Y?(0,a.Y)($.A,{}):(0,a.Y)(nu.A,{}),text:"Continue",onClick:ei,loading:Y,disabled:"selecting"!==N||!ee||Y})]})]})]})}):(0,a.Y)(e7,{openSecerets:v,watch:g,keys:t}),(0,a.Y)(e2,{removeEntries:i,newSecrets:B,step:N,onContinue:en,linkSecrets:f,unlinkSecrets:h,linkedSecrets:E,onSecretsUpdated:function(e){L(function(n){var t=new Map(n);return e.forEach(function(e){var n=e.key,r=e.selectedKey;t.set(n,r)}),t})}}),(0,a.Y)(eX,{removeEntries:i,replaceAllExternalSecrets:m,existingSecrets:G,accountSecrets:D,onContinue:en,step:N,linkedSecrets:E,onSecretsUpdated:function(e){L(function(n){var t=new Map(n);return e.forEach(function(e){var n=e.key,r=e.selectedKey;t.set(n,r)}),t})}})]})}var ng=t(45773),nv=t(20772),nw=t(63482),ny=t.n(nw),nb=(0,l.memo)(function(e){var n=e.openPane,t=e.waitingOnUser,r=e.agentState,i=e.isReadOnly,o=(0,u.Rj)(function(){return null==r?void 0:r.select(function(e){switch(null==e?void 0:e.state){case s.g32.AGENT_STATE_PAUSED:case s.g32.AGENT_STATE_NOT_STARTED:case s.g32.AGENT_STATE_UNKNOWN:return!0;default:return!1}})},[r]),c=(0,l.useCallback)(function(e,t){return n({type:"webview",data:{ports:{path:e,port:t,type:"local"}}})},[n]),d=(0,nv.A)({openWebview:c}),p=(0,l.useCallback)(function(){return n({type:"envEditor"})},[n]),f=(0,P.A)();return(0,a.Y)(H.S,{clsx:ny().root,"data-highlight":!i&&t&&o,justify:"space-between",children:(0,a.FD)(H.S,{clsx:ny().inner,children:[(0,a.Y)(H.S,{align:"center",justify:"center",clsx:ny().highlightBackground,children:(0,a.Y)(H.S,{})}),(0,a.FD)(H.S,{clsx:ny().content,gap:8,children:[(0,a.Y)(ng.d2,{messageState:e.state,text:e.message,linkComponent:d}),e.requestedSecrets?(0,a.Y)(nm,{openSecrets:p,replId:f,keys:e.requestedSecrets.map(function(e){return e.key}),addEntries:e.secrets.addEntries,removeEntries:e.secrets.removeEntries,watch:e.secrets.watch,replaceAllExternalSecrets:e.secrets.replaceAllExternalSecrets,onComplete:function(){return e.sendAskUserForActionResponse({type:"useSecretResponse"})},sessionId:e.sessionId,isLast:e.isLast,linkSecrets:e.linkSecrets,unlinkSecrets:e.unlinkSecrets}):null]})]})})}),nS=t(87523),nY=t(50386),nA=t.n(nY),nx=(0,l.memo)(function(e){var n=e.message,t=e.state,r=e.newFeatureRequests,i=e.sendAskUserForActionResponse,o=null==r?void 0:r.find(function(e){return e.isSelected}),l=o&&r?(0,ew._)(r.filter(function(e){return e!==o})).concat([o]):null!=r?r:[],s=!!o,c=(0,eg.g)({items:l,maxVisibleItems:2,reverse:!0}),u=c.visibleItems,d=c.isExpanded,p=c.hiddenItemsCount,f=c.setIsExpanded,h=c.maxItemsReached;return(0,a.FD)(H.S,{clsx:nA().root,gap:6,children:[(0,a.Y)(ng.d2,{text:n,messageState:t}),u.length?(0,a.FD)(H.S,{row:!0,style:{flexWrap:"wrap",gap:8},children:[u.map(function(e){return(0,a.Y)(Z.$n,{iconLeft:e.isSelected?(0,a.Y)(eq.A,{}):void 0,disabled:s,colorway:e.isSelected?"primary":void 0,size:"small",variant:"outlined",onClick:function(){return i({type:"nextStepResponse",data:e})},text:e.featureName},e.id)}),h?(0,a.Y)(Z.$n,{iconLeft:(0,a.Y)(nS.A,{rotate:180*!!d}),size:"small",onClick:function(){return f(!d)},text:d?"Show less":"Show ".concat(p," more")}):null]}):null]})}),nC=t(31984),n_=t(13544),nk=t(72530),nD=t(51830),nE=t(63459),nR=t(82300),nI=t(54249),nF=t(47177),nT=(0,eR.x)({root:[eF.wp.mx(32),eF.wp.mb(16),eF.wp.borderRadius()],hidden:[eF.wp.mx(32),eF.wp.mb(16),eF.wp.textAlign.center,eF.wp.position.relative],hiddenText:[eF.wp.backgroundColor.backgroundRoot,eF.wp.px(8),eF.wp.zIndex(1),{marginLeft:"auto",marginRight:"auto"}],hiddenHr:[eF.wp.position.absolute,eF.wp.width("100%"),eF.wp.border({direction:"top",color:eE.LU.outlineDimmest,style:"dashed"}),eF.wp.top("50%")],icon:{paddingTop:3},body:[eF.wp.flex.growAndShrink(1),eF.wp.colWithGap(2),eF.wp.justify.spaceBetween],footer:[eF.wp.flex.wrap,eF.wp.justify.spaceBetween,eF.wp.align.center],timestamp:[eF.wp.flex.wrap],revertControls:[eF.wp.color.foregroundDimmer]});function nP(e){var n=e.commitId,t=e.openPane,r=(0,nI.q)(),i=r.neonDatabases;return r.currentUser&&0!==i.length?(0,a.Y)(H.S,{css:nT.revertControls,row:!0,gap:6,align:"center",children:(0,a.Y)(Z.$n,{onClick:function(){t({type:"neon",data:{openAtTab:{type:"settings",data:{restoreToCommitId:n}}}})},iconLeft:(0,a.Y)(nF.A,{}),size:"small",variant:"outlined",text:"Restore database to here"})}):null}function nL(e){var n=e.reverterId,t=e.revertedAt,r=e.revertedCommitId,i=e.revertHiddenCount,o=e.openPane,l=(0,d._P)({controlName:nR.g5,logFlagToAnalytics:!1});return(0,a.FD)(a.FK,{children:[(0,a.FD)(H.S,{css:nT.hidden,style:{margin:"16px 12px"},children:[(0,a.FD)(B.EY,{css:nT.hiddenText,color:"dimmest",variant:"small",children:[i," event",i>1?"s":""," hidden after rolling back"]}),(0,a.Y)(H.S,{css:nT.hiddenHr})]}),(0,a.FD)(M.ui,{elevated:!0,css:nT.root,py:8,pl:8,pr:12,row:!0,gap:8,style:{borderRadius:8,margin:"16px 12px"},children:[(0,a.Y)(H.S,{css:nT.icon,children:(0,a.Y)(J.A,{color:eE.LU.foregroundDimmest})}),(0,a.FD)(H.S,{css:nT.body,children:[(0,a.Y)(H.S,{pt:2,children:(0,a.Y)(B.EY,{children:"Rollback completed"})}),(0,a.FD)(H.S,{css:nT.footer,row:!0,children:[(0,a.Y)(nU,{date:t,reverterId:n}),l?(0,a.Y)(nP,{commitId:r,openPane:o}):null]})]})]})]})}function nU(e){var n,t=e.date,r=Number(e.reverterId),i=(0,nE.sx)({variables:{id:r}}).data;return(0,a.FD)(H.S,{css:nT.timestamp,row:!0,gap:4,style:{color:eE.LU.foregroundDefault},children:[(0,a.FD)(B.EY,{variant:"small",color:"dimmer",children:["Performed",(null==i||null==(n=i.user)?void 0:n.username)?" by ".concat(i.user.username):""]}),(0,a.Y)(q.Dc,{textVariant:"small",textColor:"dimmer",live:!0,date:t})]})}var nN=(0,l.memo)(function(e){var n=e.checkpoint,t=e.onSessionChange,r=e.openPane,i=e.onRenameTitle,o=n.eventId,s=n.revert,c=(0,nk.A)({checkpoint:n,onSessionChange:t,openPane:r}),u=c.onRevert,d=c.isValidTarget,p=(0,nD.F)(),f=(0,l.useMemo)(function(){return{isPaid:n.isPaid,usageIndicatorVariant:p?nC.G.Starter:nC.G.Paid}},[n.isPaid,p]);return(0,a.FD)(a.FK,{children:[(0,a.Y)(H.S,{"data-event-id":o,"data-commit-id":n.commitId,px:8,children:(0,a.Y)(n_.PZ,{title:n.title,commitId:n.commitId,onOpenCommit:e.onOpenCommit,date:n.created,screenshot:n.screenshotUrl,isReverting:(null==s?void 0:s.status)==="inflight",isValidTarget:d,costInfo:f,variant:n_.Wf.InAgentChat,onRevert:u,onRenameTitle:i?function(e){return i(n.commitId,e)}:void 0})}),(null==s?void 0:s.reverterId)&&s.commitId&&s.revertedAt?(0,a.Y)(nL,{reverterId:s.reverterId,revertedAt:s.revertedAt,revertedCommitId:s.commitId,revertHiddenCount:s.hiddenEvents,openPane:e.openPane}):null]})}),nO=t(973),nM=t(64631),nB=t(69258),nH=t(14420),nz=t.n(nH),nW=(0,l.memo)(function(e){var n=(0,o._)((0,l.useState)(!1),2),t=n[0],r=n[1];return(0,a.Y)(H.S,{px:8,children:(0,a.FD)(H.S,{gap:6,children:[(0,a.FD)(H.S,{css:nO.b.nofill,tag:"button",row:!0,px:6,gap:6,align:"center",justify:"space-between",onClick:function(){return r(function(e){return!e})},children:[(0,a.FD)(H.S,{row:!0,align:"center",gap:6,style:{flex:"1 1 auto"},children:[(0,a.Y)(nB.A,{color:eE.LU.foregroundDimmer}),(0,a.Y)(B.EY,{color:"dimmer",children:"Agent ran into an error"})]}),(0,a.Y)(nS.A,{color:eE.LU.foregroundDimmer,rotate:180*!!t})]}),t?(0,a.Y)(M.ui,{p:8,elevated:!0,clsx:nz().surface,children:(0,a.Y)(nM.Ay,{children:e.message})}):null]})})}),nG=t(51244),nV=t(45641),nj=t(48686),nZ=t(99615),nq=t(17513),nK=t(75414),n$=t(54771),nJ=t(83650),nQ=t(36446),nX=t(14751),n0=t(17020),n1=t.n(n0);function n2(e){var n=e.isPlanApproved,t=(0,ek.m6)();return(0,a.Y)(H.S,{className:n1().root,children:t?(0,a.Y)(n5,{isPlanApproved:n}):(0,a.Y)(n4,{})})}var n4=function(){var e=(0,nG.a)(),n=(0,o._)((0,l.useState)(!1),2),t=n[0],r=n[1],i=(0,nV.Z)("agent-mobile-notification-nudge",function(){(0,ev.pI)({action:"mobile_download_qr_dismissed"})}),s=i.isDone,c=i.isLoading,u=i.setAsDone;if(s||c)return null;var d=function(e){(0,ev.pI)({action:"mobile_download_qr_clicked"}),window.open(e)},p=(0,a.Y)(Z.$n,{clsx:n1().btnLeft,iconLeft:(0,a.Y)(nX.A,{}),text:"Get notified when your app is ready",variant:"outlined"});return(0,a.FD)(a.FK,{children:[e?(0,a.FD)(nK.Wv,{isOpen:t,onOpenChange:function(e){e&&(0,ev.pI)({action:"mobile_download_qr_viewed"}),r(e)},label:"Show download Replit mobile app QR",placement:"top",children:[p,(0,a.Y)(H.S,{clsx:n1().mobileQr,children:(0,a.Y)(n$.A,{source:"agent_plan_timeline",installText:"Tap to install the Replit app",onClick:d})})]}):(0,a.Y)(nc.m_,{placement:"top",colorway:"darker",tooltip:(0,a.Y)(H.S,{clsx:n1().mobileQr,children:(0,a.Y)(n$.A,{source:"agent_plan_timeline",installText:"Scan to install the Replit app",onClick:d})}),children:p}),(0,a.Y)(Z.$n,{clsx:n1().btnRight,iconLeft:(0,a.Y)(nJ.A,{}),text:"",variant:"outlined",onClick:function(){u(),r(!1)}})]})},n5=function(e){var n,t,r,i=e.isPlanApproved,o=(0,nV.Z)("bonsai-ws-agent-onboarding"),s=o.isDone,c=o.isLoading,u=o.setAsDone,d=(0,ek.rW)("flag-mb-ws-agent-onboard"),p=(t=(n={type:"agent",onComplete:u}).type,r=n.onComplete,(0,l.useEffect)(function(){var e=function(e){return(0,nq.J7)(e,function(e){var n=e.tour;"complete"===n.action&&n.type===t&&r()})};return window.addEventListener("message",e),function(){window.removeEventListener("message",e)}},[r,t]),{showTour:(0,l.useCallback)(function(){(0,nq._z)({messageType:nZ.tF.TOUR,tour:{type:t,action:"show"}},(0,nj.Ak)())},[t])}).showTour;return d?(0,a.Y)(Z.$n,{clsx:n1().btnBonsai,iconLeft:(0,a.Y)(nQ.A,{}),colorway:c||s||!i?void 0:"primary",text:"Learn how to create with Agent",onClick:p}):null},n3=t(46404),n6=t(90899),n8=t(42893),n7=t.n(n8),n9=[{title:"Visual preview",time:"(~2 min.)",icon:(0,a.Y)(n6.A,{size:12})},{title:"First app version",time:"(~10 min.)",icon:(0,a.Y)(n3.A,{size:12})}];let te=function(e){var n=e.isPlanApproved;return(0,a.FD)(H.S,{children:[(0,a.Y)(B.EY,{className:n7().timelineTitle,children:"Timeline"}),(0,a.Y)(H.S,{className:n7().timelineItems,children:n9.map(function(e,n){return(0,a.FD)(H.S,{className:n7().timelineItem,children:[(0,a.Y)(H.S,{className:n7().timelineItemIcon,children:e.icon}),(0,a.Y)(H.S,{className:n7().timelineItemContent,children:(0,a.FD)(H.S,{className:n7().text,children:[(0,a.Y)(B.EY,{variant:"text",color:"default",children:e.title}),(0,a.Y)(B.EY,{color:"dimmer",children:e.time})]})})]},n)})}),(0,a.Y)(n2,{isPlanApproved:n})]})};var tn=t(62362),tt=(0,eR.x)({blueprintsContainer:[eF.wp.p(8),eF.wp.borderRadius("default"),eF.wp.border({color:eE.LU.outlineDimmer})],integrationPill:[eF.wp.display.inlineFlex,eF.wp.borderRadius(4)],infoIcon:[eF.wp.color.foregroundDimmer],integrationsContainer:[eF.wp.flex.wrap,eF.wp.width("fit-content"),eF.wp.rowWithGap(4),eF.wp.align.center]});function tr(e){var n=e.step,t=e.stackBlueprint,r=e.stepIndex,i=e.isEditable,o=n.blueprintData.length>0;return 0===r&&t!==s.qf8.STACK_BLUEPRINT_NONE?(0,a.Y)(ti,{step:n,stackBlueprint:t,isEditable:i}):o?(0,a.Y)(H.S,{css:tt.blueprintsContainer,children:(0,a.Y)(ta,{step:n,isEditable:i})}):null}function ti(e){var n=e.step,t=e.stackBlueprint,r=e.isEditable;return(0,a.FD)(H.S,{css:tt.blueprintsContainer,gap:8,children:[(0,a.Y)(to,{stackBlueprint:t,isEditable:r}),(0,a.Y)(ta,{step:n,isEditable:r})]})}function to(e){var n=e.stackBlueprint,t=e.isEditable;return(0,a.FD)(H.S,{css:tt.integrationsContainer,children:[(0,a.Y)(B.EY,{color:"dimmest",children:"App type"}),(0,a.Y)(eP.K0,{css:tt.infoIcon,alt:t?"The main tool ".concat(c.g$," will use. You can request changes in chat."):"Determines the main framework ".concat(c.g$," will use to build the app"),children:(0,a.Y)(tn.A,{})}),(0,a.Y)(nc.m_,{tooltip:c.Wu[n].description,children:(0,a.Y)(O.a,{text:c.Wu[n].displayName,css:tt.integrationPill,variant:"filled"})})]})}function ta(e){var n=e.step,t=e.isEditable,r=[],i=!0,o=!1,l=void 0;try{for(var s,u=n.blueprintData[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var d=s.value;""!==d.displayName.trim()&&r.push((0,a.Y)(nc.m_,{tooltip:"".concat(c.g$," will use Replit's support for ").concat(d.displayName,"."),children:(0,a.Y)(O.a,{css:tt.integrationPill,text:d.displayName,variant:"filled"})},d.name))}}catch(e){o=!0,l=e}finally{try{i||null==u.return||u.return()}finally{if(o)throw l}}return 0===r.length?null:(0,a.FD)(H.S,{css:tt.integrationsContainer,pt:4,children:[(0,a.Y)(B.EY,{color:"dimmest",children:"Integrations"}),(0,a.Y)(eP.K0,{css:tt.infoIcon,alt:t?"".concat(c.g$," will use these integrations. You can request changes in chat."):"Agent will build with these integrations",children:(0,a.Y)(tn.A,{})}),r]})}var tl=(0,eR.x)({approvedContainer:[eF.wp.color.foregroundDimmest,{flex:1}],historicalPlanContainer:[eF.wp.colWithGap(2),{listStyle:"unset",listStylePosition:"outside","> li":{color:eE.LU.foregroundDimmer,marginLeft:"20px"},"> li::marker":{color:eE.LU.foregroundDimmer}}],historicalPlanStepText:[eF.wp.width("100%"),eF.wp.flex.growAndShrink(1)]});function ts(e){var n=Number(e.approverId),t=(0,nE.sx)({variables:{id:n}}).data,r=null==t?void 0:t.user;return(0,a.FD)(H.S,{css:tl.approvedContainer,align:"center",row:!0,gap:4,justify:"end",children:[(0,a.Y)(eq.A,{color:eE.LU.greenStronger}),(0,a.FD)(B.EY,{multiline:!1,children:[null==r?void 0:r.username," approved the plan"]})]})}function tc(e){var n=e.planSteps,t=e.stackBlueprint;return(0,a.Y)(H.D.ul,{css:tl.historicalPlanContainer,children:n.map(function(e,n){return(0,a.FD)("li",{children:[(0,a.Y)(B.EY,{color:"dimmer",css:tl.historicalPlanStepText,children:e.name}),(0,a.Y)(tr,{step:e,stackBlueprint:t,stepIndex:n,isEditable:!1})]},n)})})}var tu=t(17893);function td(e){switch(e.status){case s.jhd.STEP_IN_PROGRESS:return(0,a.Y)($.A,{color:eE.LU.blurpleStronger,size:e.size});case s.jhd.STEP_COMPLETE:return(0,a.Y)(eq.A,{color:eE.LU.accentPositiveStronger,size:e.size});case s.jhd.STEP_FAILED:return(0,a.Y)(nJ.A,{color:eE.LU.accentNegativeStronger,size:e.size});default:return(0,a.Y)(tu.A,{color:eE.LU.foregroundDimmer,size:e.size})}}var tp=t(33747),tf={START_BUILDING:180},th=function(e){var n="";return e.map(function(e){n+=e.name+"\n"}),n},tm=(0,eR.x)({editable:[eF.wp.colWithGap(4)],readonly:[eF.wp.colWithGap(8)],text:[eF.wp.py(8)]});function tg(e){var n=e.isEditable,t=e.steps,r=e.stackBlueprint,i=(0,o._)((0,l.useState)([]),2),s=i[0],c=i[1],u=(0,o._)((0,l.useState)(1/0),2),d=u[0],p=u[1],f=(0,l.useCallback)(function(e){p(e.width)},[]),h=(0,e_.A)(f);if(!t.length)return(0,a.Y)(tv,{editable:n});var m=function(){var n=t.filter(function(e,n){return 0===n||s.includes(e.id)});e.approvePlan(n),c([]),(0,ev.pI)({action:"plan_approved",stepsApproved:s.length+1,sessionId:e.sessionId,planText:th(n)})},g=function(n){c(function(t){return t.includes(n)?((0,ev.pI)({action:"plan_step_removed",sessionId:e.sessionId}),t.filter(function(e){return e!==n})):((0,ev.pI)({action:"plan_step_added",sessionId:e.sessionId}),(0,ew._)(t).concat([n]))})};return(0,a.FD)(H.S,{gap:8,innerRef:h,children:[(0,a.Y)(H.S,{css:n?tm.editable:tm.readonly,children:t.map(function(e,t){return(0,a.FD)(l.Fragment,{children:[1===t&&n?(0,a.Y)(B.EY,{css:tm.text,children:"Would you like any of these additional features? We can also make changes later."}):null,(0,a.Y)(ty,{stepIndex:t,stackBlueprint:r,step:e,stepSelected:0===t||s.includes(e.id),isEditable:n,isDisabled:0===t&&n,onStepChange:g})]},e.id)})}),(0,a.Y)(te,{}),n?(0,a.Y)(H.S,{pt:4,row:!0,justify:"end",gap:6,children:(0,a.Y)(Z.$n,{"aria-label":"Approve plan & start",iconLeft:(0,a.Y)(eq.A,{}),text:d<=tf.START_BUILDING?"":"Approve plan & start",colorway:"blurple",onClick:function(){return m()}})}):null]})}function tv(e){var n=e.editable;return(0,a.Y)(a.FK,{children:(0,a.Y)(B.EY,{color:"dimmer",children:n?"Plan is currently empty":"No plan generated yet"})})}var tw=(0,eR.x)({step:[eF.wp.flex.column,eF.wp.colWithGap(6),eF.wp.align.center,eF.wp.align.stretch],iconWrapper:[eF.wp.display.flex,eF.wp.align.center,eF.wp.justify.center,{alignSelf:"stretch"}],checkboxWrapper:[eF.wp.display.flex,{alignSelf:"baseline"}],stepText:[eF.wp.flex.growAndShrink(1)],stepCheckbox:[{'input[type="checkbox"]:checked':{backgroundColor:eE.LU.blurpleDimmer,borderColor:eE.LU.blurpleDefault},'& input[type="checkbox"]:disabled':{backgroundColor:"unset",borderColor:eE.LU.interactiveBorder}}]});function ty(e){var n=e.stepIndex,t=e.stackBlueprint,r=e.step,i=e.stepSelected,o=e.isEditable,c=e.isDisabled,u=e.onStepChange;return(0,a.Y)(l.Fragment,{children:(0,a.Y)(H.S,{css:tw.step,children:(0,a.FD)(H.S,{row:!0,gap:8,align:"center",children:[o?(0,a.Y)(H.S,{css:tw.checkboxWrapper,pt:2,children:(0,a.Y)(ej.S,{id:r.id,checked:i,disabled:c,onChange:function(){return u(r.id)},css:tw.stepCheckbox,name:"step-checkbox"})}):(0,a.Y)(H.S,{css:tw.iconWrapper,children:(0,a.Y)(td,{status:r.status?r.status:s.jhd.STEP_UNKNOWN})}),(0,a.Y)(tp.J,{htmlFor:r.id,css:tw.stepText,color:i?"default":"dimmer",variant:"text",children:(0,a.FD)(H.S,{gap:8,children:[r.name,(0,a.Y)(tr,{step:r,stackBlueprint:t,stepIndex:n,isEditable:o})]})})]})})})}var tb=t(75308),tS=t(71),tY=t.n(tS),tA=(0,l.memo)(function(e){var n=e.stackBlueprint,t=e.approverId,r=e.sessionId,i=e.approvePlan,o=e.steps;return(0,a.FD)(M.ui,{elevated:!0,"data-highlight":!t,clsx:tY().root,gap:8,children:[(0,a.FD)(H.S,{row:!0,align:"center",gap:6,children:[(0,a.Y)(tb.A,{}),(0,a.Y)(B.EY,{children:"App plan"})]}),t?(0,a.FD)(a.FK,{children:[(0,a.Y)(tc,{planSteps:o,stackBlueprint:n}),(0,a.Y)(te,{isPlanApproved:!0}),(0,a.Y)(ts,{approverId:t})]}):(0,a.Y)(a.FK,{children:(0,a.Y)(tg,{approvePlan:i,stackBlueprint:n,steps:o,isEditable:!0,sessionId:r})})]})}),tx=t(64870),tC=t(71380),t_=t(34834),tk=t(51179),tD=t(2200),tE=t(69938);function tR(e){return(0,a.Y)(e9.Ay,(0,b._)((0,y._)({},e),{children:(0,a.Y)("path",{fillRule:"evenodd",d:"M11 3.75a7.25 7.25 0 1 0 5.044 12.457.753.753 0 0 1 .163-.163A7.25 7.25 0 0 0 11 3.75Zm6.695 12.884a8.75 8.75 0 1 0-1.06 1.06l3.835 3.836a.75.75 0 1 0 1.06-1.06l-3.835-3.836ZM11 7.25a.75.75 0 0 1 .75.75v2.25H14a.75.75 0 0 1 0 1.5h-2.25V14a.75.75 0 0 1-1.5 0v-2.25H8a.75.75 0 0 1 0-1.5h2.25V8a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"})}))}var tI=t(6362),tF=t.n(tI);function tT(e){var n=(0,o._)((0,l.useState)(!1),2),t=n[0],r=n[1],i=(0,a.Y)(tL,(0,y._)({},e));return(0,a.FD)(M.ui,{clsx:tF().root,elevated:!0,children:[(0,a.FD)(H.S,{row:!0,align:"center",p:8,gap:8,justify:"space-between",children:[(0,a.Y)(B.EY,{variant:"subheadDefault",children:"Visual preview"}),(0,a.FD)(H.S,{row:!0,align:"center",gap:8,children:[(0,a.Y)(B.EY,{color:"dimmest",variant:"small",children:"Agent will use this as a design reference"}),(0,a.Y)(eP.K0,{alt:"Zoom in",onClick:function(){return r(!0)},children:(0,a.Y)(tR,{})})]})]}),(0,a.Y)(tE.a,{clsx:tF().divider}),i,(0,a.Y)(eZ.a,{isOpen:t,onRequestClose:function(){return r(!1)},maxWidth:"calc(80vw + 2px)",fitContent:!0,centered:!0,noPadding:!0,children:(0,a.FD)(H.S,{children:[(0,a.Y)(H.S,{clsx:tF().modalHeader,p:8,children:(0,a.Y)(B.EY,{variant:"subheadDefault",children:"Visual preview"})}),(0,a.Y)(H.S,{clsx:tF().modalContent,children:i})]})})]})}function tP(){}function tL(e){var n=e.designReferenceFilePaths,t=(0,tD.y)({refresh:tP}).runState===s.g32.AGENT_STATE_RUNNING,r=(0,t_.A)().ports,i=(0,tC.w)(r),o=(0,l.useMemo)(function(){return i.some(function(e){return(0,tx.th)(e.configuration.localPort)})},[i]);return t&&o?(0,a.Y)(tk.Fm,{readonlyBannerVariant:"none"}):n&&n.length>0?(0,a.Y)(H.S,{clsx:tF().referencesRow,row:!0,gap:8,children:n.map(function(e){return(0,a.Y)(tk.aM,{filePath:e,readonlyBannerVariant:"none"},e)})}):null}var tU=t(73102),tN=t.n(tU),tO=[{id:"planning",title:"Initial Planning"},{id:"design",title:"App Design Mockup"},{id:"approval",title:"Plan Approval"},{id:"build",title:"Interactive Prototype"}];function tM(e){var n=e.activeStepId;return(0,a.Y)(M.ui,{clsx:tN().timeline,elevated:!0,children:tO.map(function(e,t){var r=t<tO.findIndex(function(e){return e.id===n});return(0,a.FD)(a.FK,{children:[t>0?(0,a.Y)(tE.a,{clsx:tN().divider}):null,(0,a.FD)(H.S,{clsx:[(0,i._)({},tN().timelineItemComplete,r)],row:!0,gap:8,p:8,align:"center",children:[(0,a.Y)(td,{status:r?s.jhd.STEP_COMPLETE:s.jhd.STEP_UNKNOWN}),(0,a.Y)(H.S,{clsx:tN().timelineItemText,children:(0,a.Y)(B.EY,{children:e.title})})]},t)]})})})}function tB(e){var n=e.step,t=e.stackBlueprint,r=e.isEditable;return(0,a.FD)(H.S,{gap:8,children:[(0,a.Y)(to,{stackBlueprint:t,isEditable:r}),(0,a.Y)(ta,{step:n,isEditable:r})]})}var tH=t(3845),tz=t.n(tH);function tW(e){var n=e.isEditable,t=e.steps;return t.length?(0,a.Y)(M.ui,{clsx:tz().steps,elevated:!0,children:t.map(function(e,n){return 0===n?null:(0,a.FD)(l.Fragment,{children:[n>1?(0,a.Y)(tE.a,{clsx:tz().divider}):null,(0,a.Y)(tj,{step:e,stepSelected:0===n})]},e.id)})}):(0,a.Y)(tG,{editable:n})}function tG(e){var n=e.editable;return(0,a.Y)(B.EY,{color:"dimmer",children:n?"Plan is currently empty":"No plan generated yet"})}var tV=(0,eR.x)({iconWrapper:[{justifyContent:"start"}],stepText:[eF.wp.flex.growAndShrink(1)]});function tj(e){var n=e.step,t=e.stepSelected;return(0,a.Y)(H.S,{gap:6,align:"stretch",children:(0,a.FD)(H.S,{clsx:tz().stepItem,row:!0,gap:8,align:"center",children:[(0,a.Y)(H.S,{css:tV.iconWrapper,align:"center",justify:"center",children:(0,a.Y)(td,{status:n.status?n.status:s.jhd.STEP_UNKNOWN})}),(0,a.Y)(B.EY,{css:tV.stepText,color:t?"default":"dimmer",children:n.name})]})})}var tZ=t(20823),tq=t.n(tZ),tK=(0,l.memo)(function(e){var n,t=e.appName,r=e.appIcon,o=e.objective,c=e.stackBlueprint,u=e.approvedByUserId,d=e.planApprovalState,p=e.steps,f=e.eventState,h=e.eventCreated,m=e.eventUpdated,g=e.designReferenceFilePaths,v=e.planId,w=e.showVisualPreview,y=void 0===w||w,b=!!u,S=p[0],Y=c!==s.qf8.STACK_BLUEPRINT_NONE,A=(0,N.xe)(),x=(0,l.useRef)(null);(0,l.useEffect)(function(){var e;null==(e=x.current)||e.scrollIntoView({behavior:"smooth"})},[]);var C="planning";switch(d){case"approved":C="build";break;case"generating":C="design";break;case"awaiting-approval":case"revising":C="approval"}if(null==S)return null;var _="Started ".concat((0,U.A)(h,{addSuffix:!0}));f===s.qOk.COMPLETE&&(_="Finished ".concat((0,U.A)(m,{addSuffix:!0})));var k=null!==d&&"approved"!==d;return(0,a.FD)(M.ui,{elevated:!b,innerRef:x,clsx:[tq().root,(n={},(0,i._)(n,tq().elevated,!b),(0,i._)(n,tq().selected,A===v&&k),n)],gap:12,row:!0,children:[(0,a.FD)(H.S,{clsx:[tq().planContainer,(0,i._)({},tq().hasVisualPreviewSibling,k&&y)],gap:12,children:[(0,a.FD)(H.S,{row:!0,align:"center",gap:6,children:[(0,a.Y)(B.EY,{color:"dimmer",clsx:tq().title,children:"Plan"}),(0,a.Y)(O.a,{text:"Latest"}),(0,a.Y)(B.EY,{color:"dimmest",variant:"small",children:_})]}),(0,a.FD)(H.S,{row:!0,gap:12,align:"center",children:[r?(0,a.Y)(H.S,{clsx:tq().iconContainer,children:r}):null,(0,a.FD)(H.S,{gap:4,shrink:!0,children:[t?(0,a.Y)(B.EY,{variant:"subheadBig",children:t}):null,o?(0,a.Y)(B.EY,{color:"dimmer",children:o}):null]})]}),(0,a.Y)(tE.a,{className:tq().divider}),Y?(0,a.FD)(a.FK,{children:[(0,a.Y)(B.EY,{variant:"subheadDefault",children:"Tech stack"}),(0,a.Y)(tB,{step:S,stackBlueprint:c,isEditable:!b}),(0,a.Y)(tE.a,{className:tq().divider})]}):null,(0,a.Y)(B.EY,{variant:"subheadDefault",children:"Initial version"}),(0,a.Y)(tM,{activeStepId:C}),(0,a.Y)(B.EY,{variant:"subheadDefault",children:"Later"}),(0,a.Y)(tW,{steps:p,isEditable:!b,objective:o}),b?(0,a.Y)(ts,{approverId:u}):null]}),k&&y?(0,a.Y)(tT,{designReferenceFilePaths:g}):null]})}),t$=t(52917),tJ=t(49888),tQ=(0,eR.x)({expandButton:[eF.wp.color.foregroundDimmest,eF.wp.px(6),eF.wp.height(28),eF.wp.hover(eF.wp.color.foregroundDefault),eF.wp.border({width:0}),{svg:{marginRight:-2}}]});function tX(e){return(0,a.Y)(Z.$n,{css:tQ.expandButton,variant:"nofill",alignment:"start",onClick:e.onClick,size:e.small?"small":"default",iconLeft:e.isExpanded?(0,a.Y)(t$.A,{}):(0,a.Y)(tJ.A,{}),text:e.isExpanded?"Show less":"Show ".concat(e.hiddenItemsCount," more")})}var t0=t(49153),t1=t(70973),t2=(0,eR.x)({root:[eF.wp.m(12)]}),t4=(0,l.memo)(function(e){var n=(0,t0.cF)();return(0,a.Y)(H.S,{css:t2.root,children:(0,a.Y)(t1.aD,{currentBuild:n,hasDeployment:!!n,onConfigure:function(){return e.openPane({type:"deployments"})},paneType:"agentChat"})})}),t5=t(93333);function t3(e){return(0,a.Y)(e9.Ay,(0,b._)((0,y._)({},e),{children:(0,a.Y)("path",{fillRule:"evenodd",d:"M8.25 3.5A3.25 3.25 0 0 0 5 6.75v1.378a.5.5 0 0 1-.335.472A4 4 0 0 0 6 16.375h.751a.5.5 0 0 1 0 1H6c-.338 0-.673-.033-1-.099A3.25 3.25 0 1 0 8.25 14a.5.5 0 0 1 0-1 4.25 4.25 0 0 1 3.25 1.511V6.75A3.25 3.25 0 0 0 8.25 3.5ZM12 4.75a4.25 4.25 0 0 0-8 2v1.037a5 5 0 0 0 0 9.176v.287a4.25 4.25 0 0 0 8 2 4.248 4.248 0 0 0 5.376 1.927A4.25 4.25 0 0 0 20 17.25v-.287a4.998 4.998 0 0 0 2.321-7.124A5 5 0 0 0 20 7.787V6.75a4.25 4.25 0 0 0-8-2Zm7.346 11.396a3.999 3.999 0 0 1-1.345.229h-.751a.5.5 0 1 0 0 1H18c.337 0 .673-.033 1-.099a3.25 3.25 0 0 1-6.5-.021v-.018A3.25 3.25 0 0 1 15.75 14a.5.5 0 0 0 0-1 4.25 4.25 0 0 0-3.25 1.511V6.75a3.25 3.25 0 1 1 6.5 0v1.378a.5.5 0 0 0 .335.472 4 4 0 0 1 .011 7.546ZM8.25 7.375a.5.5 0 0 1 .5.5v.75a3.125 3.125 0 0 1-3.125 3.125.5.5 0 1 1 0-1A2.125 2.125 0 0 0 7.75 8.625v-.75a.5.5 0 0 1 .5-.5Zm7.5 0a.5.5 0 0 1 .5.5v.75a2.125 2.125 0 0 0 2.125 2.125.5.5 0 1 1 0 1 3.125 3.125 0 0 1-3.125-3.125v-.75a.5.5 0 0 1 .5-.5Z",clipRule:"evenodd"})}))}var t6=t(19139),t8=t(68868),t7=t(66366),t9=t(85305),re=t(41049),rn=t(92855),rt=t(2753),rr=t(30952),ri=t(74338),ro=t(51705),ra=t(56889),rl=t(23072),rs=t(84686),rc=t(75040);function ru(e){return(0,a.FD)(e9.Ay,(0,b._)((0,y._)({},e),{children:[(0,a.Y)("path",{fillRule:"evenodd",d:"M10.122 9.849A.75.75 0 0 0 9 10.5v6a.75.75 0 0 0 1.122.651l5.25-3a.75.75 0 0 0 0-1.302l-5.25-3Zm3.366 3.651L10.5 15.208v-3.416l2.988 1.708Z",clipRule:"evenodd"}),(0,a.Y)("path",{fillRule:"evenodd",d:"M3 5.25A2.25 2.25 0 0 1 5.25 3h13.5A2.25 2.25 0 0 1 21 5.25v13.5A2.25 2.25 0 0 1 18.75 21H5.25A2.25 2.25 0 0 1 3 18.75V5.25Zm2.25-.75h13.5a.75.75 0 0 1 .75.75v1.5h-15v-1.5a.75.75 0 0 1 .75-.75ZM4.5 8.25v10.5c0 .414.336.75.75.75h13.5a.75.75 0 0 0 .75-.75V8.25h-15Z",clipRule:"evenodd"})]}))}var rd=t(1369),rp=t(14996),rf=t(82842),rh=t(24726),rm=t(86278),rg=t(57912);function rv(e){var n=e.kind,t=(0,ex._)(e,["kind"]),r={createPostgresqlDatabaseData:(0,a.Y)(nF.A,{}),createFileData:(0,a.Y)(rt.A,{}),deployData:(0,a.Y)(rn.A,{}),readFileData:(0,a.Y)(t5.A,{}),readDirData:(0,a.Y)(ri.A,{}),fileEditData:(0,a.Y)(rr.A,{}),shellExecutionData:(0,a.Y)(rm.A,{}),packagerInstallData:(0,a.Y)(rs.A,{}),screenshotData:(0,a.Y)(t6.A,{}),toolchainInstallData:(0,a.Y)(rg.A,{}),searchFilesystemData:(0,a.Y)(rf.A,{}),searchFileData:(0,a.Y)(rf.A,{}),planProgressData:(0,a.Y)(t7.A,{}),packagerUninstallData:(0,a.Y)(rs.A,{}),messageData:(0,a.Y)(t8.A,{}),systemDependencyInstallData:(0,a.Y)(re.A,{}),systemDependencyUninstallData:(0,a.Y)(re.A,{}),workflowsStartToolData:(0,a.Y)(rc.A,{}),workflowsRestartToolData:(0,a.Y)(rd.A,{}),workflowsStopToolData:(0,a.Y)(rh.A,{}),workflowsSetRunConfigToolData:(0,a.Y)(rc.A,{}),workflowsRemoveRunConfigToolData:(0,a.Y)(t9.A,{}),workflowsGetOutputToolData:(0,a.Y)(eK.A,{}),presentResultsToolData:(0,a.Y)(ru,{}),sqlExecutionData:(0,a.Y)(nF.A,{}),summarizeObjectiveData:(0,a.Y)(t5.A,{}),revertData:(0,a.Y)(J.A,{}),agentPlanStepBegin:(0,a.Y)(rp.A,{}),deployConfigData:(0,a.Y)(rn.A,{}),acknowledgeUserMessage:(0,a.Y)(tu.A,{}),newSessionNudge:(0,a.Y)(e0.A,{}),commitData:(0,a.Y)(tu.A,{}),thoughts:(0,a.Y)(t3,{}),blueprintsSetup:(0,a.Y)(rl.A,{}),webSearchData:(0,a.Y)(ro.A,{}),webPageVisitData:(0,a.Y)(rf.A,{}),imageGenerationData:(0,a.Y)(ra.A,{})};return n&&r[n]?(0,l.cloneElement)(r[n],t):(0,l.cloneElement)((0,a.Y)(tu.A,{}),t)}var rw=t(39282),ry=t(37743),rb=t(86005),rS=t(24879),rY=t(18918),rA=t(94626),rx=t(37663),rC=t(83415),r_=t(33999),rk="cm-agent-flash-range-element",rD="rgba(100, 0, 255, 0.3)",rE=rb.Lz.theme((0,i._)({"&":{maxHeight:"max(calc(".concat(eL.R.height," - 125px), 125px)")},".cm-gutters":{backgroundColor:eE.LU.backgroundHigher}},".".concat(rk),{display:"inline-block"})),rR=rb.Lz.theme((0,i._)({"&":{maxHeight:"calc(".concat(eL.R.height," - 40px)")},".cm-scroller":{"&::-webkit-scrollbar":{display:"none"}},".cm-gutters":{backgroundColor:eE.LU.backgroundHigher}},".".concat(rk),{display:"inline-block"})),rI=function(){function e(n,t){var r=this;(0,ry._)(this,e),this.view=n,this.target=null,this.previous="",this.destroyed=!1,this.loop=new rx.F3(function(e,t){if(null===r.target)return t();var i=n.lineBlockAt(r.target),o=n.scrollDOM.scrollTop,a=Math.min(Math.max(i.top,0),n.scrollDOM.scrollHeight-n.scrollDOM.clientHeight),l=a-o,s=Math.abs(l);if(s<1)return n.scrollDOM.scrollTop=a,r.target=null,t();var c=3e3*e;s<1500&&(c*=Math.sqrt(s/1500));var u=l>=0?Math.max(Math.min(c,s),.5):Math.min(Math.max(-c,-s),-.5);n.scrollDOM.scrollTop+=u}),Promise.resolve().then(function(){r.destroyed||(r.previous=t.current,n.dispatch({changes:{from:0,to:n.state.doc.length,insert:t.current}}),r.target=t.current.length,r.loop.start(),r.dispose=t.subscribe(function(e){if(e.startsWith(r.previous)){var t=r.previous.length,i=e.length,o=e.slice(t),a=rS.y.of({from:t,to:i,class:rk,animation:{duration:550,fill:"backwards",easing:"ease-out",keyframes:{opacity:[.675,.75,1],filter:["grayscale(0.325)","grayscale(0)","grayscale(0)"],backgroundColor:[rD,rD,"transparent"],offset:[0,.18181818181818182,1]}}});n.dispatch({changes:{from:t,insert:o},effects:a})}else{var l=r.view.state.doc.length;n.dispatch({changes:{from:0,to:l,insert:e}})}r.previous=e,r.target=n.state.doc.length,r.loop.start()}))})}return e.prototype.destroy=function(){var e;this.destroyed=!0,this.target=null,this.loop.stop(),null==(e=this.dispose)||e.call(this)},e}(),rF=new rA.k(function(e){return rb.Z9.define(function(n){return new rI(n,e)})});function rT(e){var n=e.path,t=e.code,r=e.openPane,i=e.showCode,s=(0,ek.m5)(),c=(0,rC.eg)(),u=(0,o._)((0,l.useState)(function(){return(0,rw.F)(t)}),1)[0];(0,l.useEffect)(function(){u.current!==t&&u.set(t)},[u,t]);var d=rF.use(u),p=(0,l.useCallback)(function(){r&&r({type:"codeEditor",data:{path:n}})},[r,n]);return(0,a.Y)(eH,{icon:(0,a.Y)(r_.A,{path:n}),title:(0,a.Y)(rP,{path:n,onClick:p}),onOpenPane:p,showOpenPaneButton:!c,openPaneButtonAlt:"Open code file",children:void 0===i||i?(0,a.Y)(rY.Ay,{filePath:n,extensions:[s?rR:rE,d],hideGutter:s,fontSize:s?12:void 0,lineWrapping:!1,hideIndentMarker:!0,readOnly:!0}):null})}function rP(e){var n=e.path,t=e.onClick;return t?(0,a.Y)(Z.$n,{variant:"underlinedOnHover",text:rL(n),onClick:t}):(0,a.Y)(B.EY,{children:rL(n)})}function rL(e){return e.replace(/^\//,"")}var rU=t(16542);function rN(e){var n=e.path,t=e.code,r=e.openPane,i=e.maxLines,s=e.animate,c=(0,rC.eg)(),u=(0,o._)((0,l.useState)(function(){return(0,rw.F)(t)}),1)[0];(0,l.useEffect)(function(){u.current!==t&&u.set(t)},[u,t]);var d=(0,l.useCallback)(function(){r&&r({type:"codeEditor",data:{path:n}})},[r,n]),p=(0,l.useMemo)(function(){return t.split("\n")},[t]);return(0,a.Y)(eH,{icon:(0,a.Y)(r_.A,{path:n}),title:(0,a.Y)(rP,{path:n,onClick:d}),onOpenPane:d,openPaneButtonAlt:"Open code file",showOpenPaneButton:!c,elevated:!1,children:(0,a.Y)(rU.Y,{animate:void 0!==s&&s,lines:p,maxLines:i},"code-".concat(n))})}function rO(e){var n=e.data,t=e.openPane,r=e.showMinimalCodeViewer,i=e.animateMinimalCodeViewer;return void 0!==r&&r?(0,a.Y)(rN,{path:n.path,code:n.content,openPane:t,maxLines:12,animate:void 0!==i&&i}):(0,a.Y)(rT,{path:n.path,code:n.content,openPane:t})}function rM(e){var n=e.openPane,t=(0,N.eg)();return(0,a.Y)(eH,{icon:(0,a.Y)(nF.A,{}),title:"Created PostgreSQL Database",onOpenPane:function(){return n({type:"neon"})},showOpenPaneButton:!t})}var rB=t(63019),rH=t(45005),rz=t(32156),rW=(0,eR.x)({countRemoved:[eF.wp.color.accentNegativeStronger],countAdded:[eF.wp.color.accentPositiveStronger]});function rG(e){var n=e.path,t=e.type,r=e.diff,i=e.openPane,o=e.minimal,s=void 0!==o&&o,c=e.animate,u=(0,rC.eg)(),d=(0,l.useMemo)(function(){var e=0,n=0,t=!0,i=!1,o=void 0;try{for(var a,l=r.hunks[Symbol.iterator]();!(t=(a=l.next()).done);t=!0){var s=a.value,c=!0,u=!1,d=void 0;try{for(var p,f=s.lines[Symbol.iterator]();!(c=(p=f.next()).done);c=!0){var h=p.value;"removed"===h.type?e++:"added"===h.type&&n++}}catch(e){u=!0,d=e}finally{try{c||null==f.return||f.return()}finally{if(u)throw d}}}}catch(e){i=!0,o=e}finally{try{t||null==l.return||l.return()}finally{if(i)throw o}}return{added:n,removed:e}},[r]),p=(0,l.useCallback)(function(){i&&i({type:"codeEditor",data:{path:n}})},[i,n]),f=(0,l.useCallback)(function(){i&&i({type:"diff",data:{type:"patch",diff:r}})},[i,r]);return(0,a.Y)(eH,{icon:(0,a.Y)(r_.A,{path:n}),title:(0,a.Y)(rj,{type:t,path:n,onClick:u?void 0:p}),right:(0,a.Y)(H.S,{row:!0,gap:8,align:"center",children:(0,a.Y)(rV,{type:t,removed:d.removed,added:d.added})}),onOpenPane:f,openPaneButtonAlt:"Open full diff",showOpenPaneButton:!u,elevated:!s,children:(0,a.Y)(rz.A,{patch:r,maxLines:s?12:16,compressed:!1,background:null,noHeader:!0,noBorder:!0,minimal:s,animate:void 0!==c&&c})})}function rV(e){var n=e.type,t=e.removed,r=e.added;switch(n){case"modify":return(0,a.FD)(a.FK,{children:[(0,a.FD)(B.EY,{css:rW.countRemoved,children:["-",t]}),(0,a.FD)(B.EY,{css:rW.countAdded,children:["+",r]})]});case"create":return(0,a.FD)(B.EY,{css:rW.countAdded,children:["+",r]});case"delete":return(0,a.FD)(B.EY,{css:rW.countRemoved,children:["-",t]})}}function rj(e){var n,t=e.type,r=e.path,i=e.onClick;switch(t){case"create":n=eE.LU.accentPositiveStronger;break;case"delete":n=eE.LU.accentNegativeStronger}return i?(0,a.Y)(Z.$n,{variant:"underlinedOnHover",style:{color:n},text:rZ(r),onClick:i}):(0,a.Y)(B.EY,{style:{color:n},children:rZ(r)})}function rZ(e){return e.replace(/^\//,"")}var rq=t(54087);function rK(e){var n=e.data,t=n.path,r=n.diff,i=n.state,c=e.openPane,u=e.minimal,d=e.animate,p=i===s.qOk.COMPLETE,f=(0,l.useRef)(null),h=(0,l.useMemo)(function(){var e=function(e){var n=e.previous,t=e.path,r=e.diff,i=e.complete;if(!r||"\n"===r)return i?(ey.v4(function(e){e.setTag("agent",!0),e.setExtras({diff:r}),ey.Cp(Error("No changes in diff"))}),(0,rH._)("This diff cannot be displayed")):(0,rH.Ok)(r$(t));if(!i)try{return(0,rH.Ok)((0,rB.rj)(r))}catch(e){if(n&&n.ok)return n;return(0,rH.Ok)(r$(t))}try{return(0,rH.Ok)((0,rB.rj)(r))}catch(e){return ey.v4(function(n){n.setTag("agent",!0),n.setExtras({diff:r}),ey.Cp(e)}),(0,rH._)("This diff cannot be displayed")}}({previous:f.current,path:t,diff:r,complete:p});return f.current=e,e},[t,r,p]),m=(0,o._)((0,l.useState)(1),2),g=m[0],v=m[1],w=(0,l.useMemo)(function(){return!p&&h.ok&&0===h.value.hunks.length},[p,h]);return((0,l.useEffect)(function(){if(w){var e=setInterval(function(){v(function(e){return e%3+1})},500);return function(){return clearInterval(e)}}},[w]),w)?(0,a.Y)(H.S,{row:!0,gap:"8px",align:"center",justify:"center",children:(0,a.FD)(B.EY,{multiline:!0,children:["Editing ",t,".".repeat(g)]})}):h.ok?(0,a.Y)(rG,{path:t,type:"modify",diff:h.value,openPane:c,minimal:void 0!==u&&u,animate:void 0!==d&&d}):(0,a.Y)(rq.N,{icon:(0,a.Y)(nB.A,{}),colorway:"warning",text:h.error})}function r$(e){return{labelA:e,labelB:e,hunks:[]}}var rJ=t(16679),rQ=t(58809),rX=t(77485),r0=(0,eR.x)({terminalWrapperBottomRadius:[eF.wp.borderRadius(0,0,4,4),{"> div":[eF.wp.borderRadius(4)],"& .xterm":[eF.wp.borderRadius(4)]}],terminalWrapperFullRadius:[eF.wp.borderRadius(4),{"> div":[eF.wp.borderRadius(4)],"& .xterm":[eF.wp.borderRadius(4)]}]});function r1(e){var n,t=e.data,r=e.openPane,i=t.installed,o=t.isExecuting,l=t.processId,c=t.state,u=null==(n=t.output)?void 0:n.trim().replaceAll("\n","\r\n"),d=(0,rQ.V)(),p="";p=o?i.length>1?"".concat(i.length," packages are being installed:"):"A package is being installed:":i.length>1?"".concat(i.length," packages were installed:"):"A package was installed:";var f=c===s.qOk.IN_PROGRESS&&o&&!u,h=i.length>0,m=(0,a.FD)(H.S,{css:h?r0.terminalWrapperFullRadius:r0.terminalWrapperBottomRadius,style:{backgroundColor:null==d?void 0:d.background},children:[o&&l?(0,a.Y)(rX.A,{processId:l,openPane:r,maxHeight:300}):null,!o&&u?(0,a.Y)(rJ.xd,{output:u,maxHeight:300,openPane:r}):null,c===s.qOk.IN_PROGRESS||u?null:(0,a.Y)(B.EY,{children:"No output for this installation."})]}),g=h?(0,a.FD)(H.S,{gap:4,p:8,children:[(0,a.Y)(B.EY,{color:"dimmest",children:f?"Installing":"Command output:"}),m]}):m;return(0,a.Y)(eW,{icon:(0,a.Y)(re.A,{}),title:"Dependencies",onOpenPane:function(){r({type:"dependencies"})},text:p,packageList:i,getPackageIcon:function(){return(0,a.Y)(rs.A,{})},children:g})}function r2(e){var n=e.data.uninstalled,t=e.openPane,r=n.length>1?"".concat(n.length," packages were uninstalled:"):"A package was uninstalled:";return(0,a.Y)(eW,{icon:(0,a.Y)(re.A,{}),title:"Dependencies",onOpenPane:function(){t({type:"dependencies"})},text:r,packageList:n,getPackageIcon:function(){return(0,a.Y)(rs.A,{})}})}function r4(e){var n=e.data;return(0,a.Y)(eH,{icon:(0,a.Y)(ri.A,{}),title:(0,a.Y)(rP,{path:n.data.path}),showOpenPaneButton:!1})}function r5(e){var n=e.data,t=e.openPane;return(0,a.Y)(rT,{path:n.data.filePath,code:n.data.content,openPane:t,showCode:!1})}var r3=t(1998),r6=(0,eR.x)({loading:[eF.wp.center,{marginLeft:"auto",marginRight:"auto"}],aspectRatio:[eF.wp.position.relative,eF.wp.height(0),{paddingBottom:"".concat(56.25,"%")}],image:[eF.wp.coverContainer,{"& > span":[eF.wp.borderRadius(4),eF.wp.border({color:eE.LU.outlineDimmer})]}]});function r8(e){var n=e.data.imageUrl;return n?(0,a.Y)(H.S,{css:r6.aspectRatio,children:(0,a.Y)(H.S,{css:r6.image,children:(0,a.Y)(r3.A,{layout:"fill",src:n,alt:"Screenshot",objectFit:"cover"})})}):(0,a.Y)(H.S,{css:r6.loading,children:(0,a.Y)($.A,{})})}var r7=t(60423),r9=(0,eR.x)({wrapper:[eF.wp.height("100%")],terminalWrapper:[eF.wp.overflow("hidden"),{"& .xterm":[eF.wp.borderRadius(0,0,4,4)]}]});function ie(e){var n=e.data.data,t=e.openPane,r=(0,rQ.V)(),i=null;n.isExecuting||(i=0===n.exitCode?(0,a.Y)(eq.A,{}):(0,a.Y)(nB.A,{}));var o=!0===n.isExecuting,l=(0,a.Y)(H.S,{css:r9.wrapper,style:{backgroundColor:null==r?void 0:r.background},children:o?(0,a.Y)(r7.A,{processId:n.processId,openPane:t,maxHeight:300,interactive:!1}):(0,a.Y)(it,{output:n.output,openPane:t})});return(0,a.Y)(eH,{icon:(0,a.Y)(rm.A,{}),title:"$ ".concat(n.command),right:i,renderChildrenOnlyWhenInView:!0,showOpenPaneButton:!1,children:l})}function it(e){var n=e.output,t=e.openPane;return 0===n.length?null:(0,a.Y)(H.S,{css:r9.terminalWrapper,children:(0,a.Y)(rJ.xd,{convertEol:!0,maxHeight:300,output:n,openPane:t})})}var ir=(0,eR.x)({wrapper:[eF.wp.height("100%")],terminalWrapper:[eF.wp.overflow("hidden"),{"& .xterm":[eF.wp.borderRadius(0,0,4,4)]}]});function ii(e){var n,t,r=e.data.data,i=e.openPane,o=(0,rQ.V)(),l=null;(null==(n=r.status)?void 0:n.$kind)==="exitCode"&&(l=0===r.status.exitCode?(0,a.Y)(eq.A,{}):(0,a.Y)(nB.A,{}));var s="\r"+r.command.replaceAll("\n","\r\n")+"\r\n";r.output&&(s+="\r\n"+r.output.replaceAll("\n","\r\n"));var c=(null==(t=r.status)?void 0:t.$kind)==="isExecuting";return(0,a.Y)(eH,{icon:(0,a.Y)(nF.A,{}),title:c?"Executing SQL query":"Executed SQL query",right:l,renderChildrenOnlyWhenInView:!0,showOpenPaneButton:!1,children:(0,a.Y)(H.S,{css:ir.wrapper,style:{backgroundColor:null==o?void 0:o.background},children:(0,a.Y)(io,{output:s,openPane:i})})})}function io(e){var n=e.output,t=e.openPane;return 0===n.length?null:(0,a.Y)(H.S,{css:ir.terminalWrapper,children:(0,a.Y)(rJ.xd,{maxHeight:300,output:n,openPane:t})})}function ia(e){var n=e.data.deps,t=e.openPane,r=n.length>1?"".concat(n.length," system dependencies were installed:"):"A system dependency was installed:";return(0,a.Y)(eW,{icon:(0,a.Y)(re.A,{}),title:"Dependencies",onOpenPane:function(){t({type:"dependencies"})},text:r,packageList:n,getPackageIcon:function(){return(0,a.Y)(re.A,{})}})}function il(e){var n=e.data.deps,t=e.openPane,r=n.length>1?"".concat(n.length," system dependencies were uninstalled:"):"A system dependency was uninstalled:";return(0,a.Y)(eW,{icon:(0,a.Y)(re.A,{}),title:"Dependencies",onOpenPane:function(){t({type:"dependencies"})},text:r,packageList:n,getPackageIcon:function(){return(0,a.Y)(re.A,{})}})}var is=t(9758);function ic(e){var n=e.data.modules,t=e.openPane,r=n.length>1?"".concat(n.length," system modules were installed:"):"A system module was installed:";return(0,a.Y)(eW,{icon:(0,a.Y)(re.A,{}),title:"Dependencies",onOpenPane:function(){t({type:"dependencies"})},text:r,packageList:n,getPackageIcon:function(e){return(0,a.Y)(is.A,{module:{name:e}})}})}var iu=t(13467),id=t.n(iu);function ip(e){var n=e.data.data,t=!!n.title;return(0,a.FD)(M.ui,{clsx:id().root,children:[t?(0,a.FD)(a.FK,{children:[(0,a.Y)(H.S,{row:!0,gap:8,p:8,children:(0,a.Y)(B.EY,{multiline:!1,children:n.title})}),(0,a.Y)(tE.a,{clsx:id().divider})]}):null,(0,a.Y)(M.ui,{elevated:!0,p:8,clsx:id().visitContent,gap:2,children:(0,a.Y)(ng.d2,{text:n.snippet})})]})}var ih=t(58969),im=t(69155),ig=t.n(im);function iv(e){var n=e.data.data,t=(0,o._)((0,l.useState)(!1),2),r=t[0],i=t[1];return(0,a.FD)(M.ui,{clsx:ig().root,children:[(0,a.FD)(H.S,{row:!0,gap:8,p:8,children:[(0,a.Y)(H.S,{shrink:!0,children:(0,a.Y)(B.EY,{multiline:!1,children:n.response})}),(0,a.FD)(nK.Wv,{isOpen:r,onOpenChange:i,label:"Full text",children:[(0,a.Y)(eP.K0,{alt:"Full text",onClick:function(){return i(!r)},children:(0,a.Y)(ih.A,{})}),(0,a.Y)(H.S,{p:12,clsx:ig().fullText,children:(0,a.Y)(H.S,{clsx:ig().fullTextContent,children:(0,a.Y)(ng.d2,{text:n.response})})})]})]}),(0,a.Y)(tE.a,{clsx:ig().divider}),(0,a.FD)(M.ui,{elevated:!0,p:8,clsx:ig().resultsList,gap:2,children:[(0,a.FD)(B.EY,{children:[n.pageResults.length," ",(0,eV.A)("result",n.pageResults.length)]}),n.pageResults.map(function(e){return(0,a.Y)(H.S,{children:(0,a.Y)("a",{href:e.url,target:"_blank",rel:"noreferrer",children:(0,a.Y)(B.EY,{children:e.title})})},e.url)})]})]})}var iw=t(46434),iy=t(31628),ib=t(74093),iS=t(14893),iY=(0,eR.x)({body:[eF.wp.height("100%"),eF.wp.minHeight("100%")],terminalWrapper:[eF.wp.overflow("hidden"),{"& .xterm":[eF.wp.borderRadius(0,0,4,4)]}]});function iA(e){var n=(0,N.eg)(),t=e.data,r=e.openPane,i=t.workflowName,o=t.state,c=(0,iS.If)(),u=(0,iy.T)(),d=(0,rQ.V)(),p=(0,l.useMemo)(function(){if(!c)return null;var e=Object.values(c).filter(function(e){return e.workflow.name===i});return 0===e.length?null:e.sort(function(e,n){return n.startTime-e.startTime})[0]},[i,c]);if(o===s.qOk.IN_PROGRESS)return(0,a.Y)(H.S,{p:8,align:"center",children:(0,a.Y)($.A,{})});var f=(0,a.Y)(H.S,{css:iY.body,style:{backgroundColor:null==d?void 0:d.background},children:p&&u?(0,a.Y)(iC,{workflowRunState:p,currentUserId:u,openPane:r}):null});return(0,a.Y)(eH,{icon:t.restart?(0,a.Y)(rd.A,{}):(0,a.Y)(rc.A,{}),title:i,onOpenPane:function(){return r({type:"runnerOutput"})},renderChildrenOnlyWhenInView:!0,showOpenPaneButton:!n,children:f})}function ix(){}function iC(e){var n,t=e.workflowRunState,r=e.currentUserId,i=e.openPane,s=(0,l.useId)(),c=(0,rQ.V)(),u=t.runId,d=t.tasks.findIndex(function(e){var n;return(null==(n=e.metadata)?void 0:n.task)==="shell.exec"}),p=(0,rJ.Ui)({maxHeight:300,openPane:i}),f=p.visibleHeight,h=p.bufferHeight,m=p.wrapperResizeRef,g=p.xterm,v=p.xtermRef,w=(0,o._)((0,l.useState)(null),2),y=w[0],b=w[1],S=(0,l.useCallback)(function(e){return b(function(){return e}),function(){}},[]),Y=(0,l.useRef)(!1);return(0,ib.b)((n=(0,V._)(function(e,n){var t,i,o,a,l,c,p,f,h,m,v;return(0,j.YH)(this,function(w){switch(w.label){case 0:if(t=n.signal,Y.current||!g||!y)return[2];o=(i=e.workflows.connectToTask.stream({runId:u,taskIdx:d,userId:r,processViewId:s},{signal:t})).resReadable,a=i.reqWritable,Y.current=!0,a.write({$kind:"resize",size:g.getSize()}),l=!1,c=!1,w.label=1;case 1:w.trys.push([1,6,7,12]),f=(0,iw._)(o),w.label=2;case 2:return[4,f.next()];case 3:if(!(l=!(h=w.sent()).done))return[3,5];if(!(m=h.value).ok){if("UNEXPECTED_DISCONNECT"===m.payload.code||"CANCEL"===m.payload.code||"NO_MATCHING_TASK_STATE"===m.payload.code)return[3,5];throw Error("[".concat(m.payload.code,"] ").concat(m.payload.message))}"output"===m.payload.$kind&&y(m.payload.chunk),w.label=4;case 4:return l=!1,[3,2];case 5:return[3,12];case 6:return v=w.sent(),c=!0,p=v,[3,12];case 7:if(w.trys.push([7,,10,11]),!(l&&null!=f.return))return[3,9];return[4,f.return()];case 8:w.sent(),w.label=9;case 9:return[3,11];case 10:if(c)throw p;return[7];case 11:return[7];case 12:return a.close(),[2]}})}),function(e,t){return n.apply(this,arguments)}),[u,d,y,g,r,s]),(0,a.Y)(H.S,{css:iY.terminalWrapper,style:{height:f,background:null==c?void 0:c.background},children:(0,a.Y)(rJ._x,{onInput:ix,xterm:g,wrapperResizeRef:m,bufferHeight:h,setOnMessage:S,onResizeTerminal:ix,children:(0,a.Y)(rJ.DJ,{xtermRef:v,visibleHeight:f,maxHeight:300})})})}function i_(e){var n=e.data,t=e.openPane,r=e.minimal,i=void 0!==r&&r,o=e.animateCode,l=void 0!==o&&o;switch(null==n?void 0:n.$kind){case"fileEditData":return(0,a.Y)(rK,{data:n,openPane:t,minimal:i,animate:l});case"createFileData":return(0,a.Y)(rO,{data:n,openPane:t,showMinimalCodeViewer:i,animateMinimalCodeViewer:l});case"readFileData":return(0,a.Y)(r5,{data:n,openPane:t});case"readDirData":return(0,a.Y)(r4,{data:n});case"shellExecutionData":return(0,a.Y)(ie,{data:n,openPane:t});case"packagerInstallData":return(0,a.Y)(r1,{data:n,openPane:t});case"packagerUninstallData":return(0,a.Y)(r2,{data:n,openPane:t});case"systemDependencyInstallData":return(0,a.Y)(ia,{data:n,openPane:t});case"systemDependencyUninstallData":return(0,a.Y)(il,{data:n,openPane:t});case"toolchainInstallData":return(0,a.Y)(ic,{data:n,openPane:t});case"screenshotData":return(0,a.Y)(r8,{data:n});case"workflowsStartToolData":case"workflowsRestartToolData":case"workflowsSetRunConfigToolData":return(0,a.Y)(iA,{data:n,openPane:t});case"createPostgresqlDatabaseData":return(0,a.Y)(rM,{openPane:t});case"sqlExecutionData":return(0,a.Y)(ii,{data:n,openPane:t});case"webSearchData":return(0,a.Y)(iv,{data:n});case"webPageVisitData":return(0,a.Y)(ip,{data:n});default:if((null==n?void 0:n.state)===s.qOk.IN_PROGRESS)return(0,a.Y)(iD,{});return null}}var ik=(0,eR.x)({loading:[eF.wp.center]});function iD(){return(0,a.Y)(H.S,{css:ik.loading,px:16,py:48,children:(0,a.Y)($.A,{})})}var iE=(0,eR.x)({codeText:[eF.wp.font.code,eF.wp.fontSize(13)]});function iR(e){var n=e.summary,t=e.variant,r=e.color,i=e.hover,o=(0,l.useMemo)(function(){for(var e,t=/`([^`]+)`/g,r=[],i=0;null!==(e=t.exec(n));)i<e.index&&r.push({text:n.substring(i,e.index),isCode:!1}),r.push({text:e[1],isCode:!0}),i=e.index+e[0].length;return i<n.length&&r.push({text:n.substring(i),isCode:!1}),r},[n]);return(0,a.Y)(B.EY,{multiline:!1,variant:t,color:r,css:i?{"&:hover":{color:eE.LU.foregroundDefault}}:void 0,children:o.map(function(e,n){return e.isCode?(0,a.Y)("span",{css:iE.codeText,children:e.text},n):(0,a.Y)(l.Fragment,{children:e.text},n)})})}var iI=(0,eR.x)({button:[nO.b.nofill,eF.wp.px(4)],summary:[eF.wp.flex.growAndShrink(1)]}),iF=(0,l.memo)(function(e){var n=(0,o._)((0,l.useState)(!1),2),t=n[0],r=n[1],i=e.eventId,s=e.sessionId,c=e.toolDataKind,u=(0,l.useCallback)(function(){r(function(e){return!e}),(0,ev.pI)({action:"event_item_expanded",eventId:i,sessionId:s,toolDataKind:c})},[s,i,c]);return(0,a.FD)(H.S,{gap:6,children:[(0,a.FD)(H.S,{css:iI.button,tag:"button",row:!0,gap:6,align:"center",justify:"space-between",onClick:u,children:[(0,a.FD)(H.S,{row:!0,align:"center",gap:6,style:{flex:"1 1 auto"},children:[(0,a.Y)(rv,{color:eE.LU.foregroundDimmer,kind:e.toolDataKind}),(0,a.Y)(H.S,{align:"start",css:iI.summary,children:(0,a.Y)(iR,{summary:e.summary,color:"dimmer"})})]}),(0,a.Y)(nS.A,{color:eE.LU.foregroundDimmer,rotate:180*!!t})]}),t?(0,a.Y)(i_,{data:e.data,openPane:e.openPane,animateCode:!1,minimal:!1}):null]})}),iT=t(29445),iP=t(38527),iL=t(71192),iU=t(12520),iN=t(21989),iO=(0,eR.x)({userMessageMain:[eF.wp.flex.shrink(1),eF.wp.align.end,eF.wp.colWithGap(6),eF.wp.maxWidth(400)],userMessageSurface:[eF.wp.borderRadius(4),eF.wp.px(8),eF.wp.py(6),eF.wp.colorMixBg(eE.LU.accentPrimaryDefault,"transparent",.4),eF.wp.maxWidth("100%"),{opacity:1,'&[data-acknowledged="false"]':{opacity:.6,backgroundColor:eE.LU.accentPrimaryDimmer}}],userMessageAttachments:[eF.wp.maxWidth("100%")],avatar:[eF.wp.position.relative]});function iM(e){var n=e.userId,t=e.created,r=e.children;return(0,a.FD)(H.S,{py:16,justify:"end",pl:32,row:!0,gap:8,"data-event-type":"user-message","data-cy":"user-message",children:[(0,a.FD)(H.S,{css:iO.userMessageMain,children:[r,t?(0,a.Y)(H.S,{px:8,row:!0,gap:4,children:(0,a.Y)(H.S,{children:(0,a.Y)(q.Dc,{live:!0,date:t,textVariant:"small",textColor:"dimmest",textTransform:"first-letter-capitalized"})})}):null]}),(0,a.Y)(H.S,{css:iO.avatar,pt:6,children:(0,a.Y)(iN.H,{id:n,showAvatarOnly:!0})})]})}function iB(e){var n=e.userId,t=e.message,r=e.attachments,i=e.attachedUrls,o=e.created,l=e.acknowledged,s=e.readFile,c=e.targetedElement,u=e.openPane;return(0,a.FD)(iM,{userId:n,created:o,children:[s?(0,a.Y)(iH,{attachments:r,attachedUrls:i,readFile:s}):null,(0,a.Y)(iz,{message:t,acknowledged:l,targetedElement:c,openPane:u})]})}function iH(e){var n=e.attachments,t=e.attachedUrls,r=e.readFile;return 0===n.length&&0===t.length?null:(0,a.Y)(H.S,{css:iO.userMessageAttachments,children:(0,a.Y)(iT.A,{fileAttachments:n.map(function(e){return(0,a.Y)(iP.m1,{readFile:r,attachment:e,getAttachmentTypeDisclaimer:(0,iL.F)({aiName:(0,c.Nn)({capitalizeFirstChar:!0})})},e.path)})})})}function iz(e){var n=e.message,t=e.acknowledged,r=e.targetedElement,i=e.openPane;return n?(0,a.Y)(nc.m_,{tooltip:"The agent is wrapping up its current step, and will respond shortly",isDisabled:t,children:(0,a.FD)(M.ui,{css:iO.userMessageSurface,elevated:!0,"data-acknowledged":t,children:[(0,a.Y)(ng.d2,{text:n,messageState:s.qOk.COMPLETE}),r?(0,a.Y)(iU.l,{targetedElement:r,openPane:i}):null]})}):null}var iW=t(98106),iG=t(83847),iV=t.n(iG),ij=(0,l.memo)(function(e){var n=e.session,t=e.readFile,r=e.openPane,i=e.secrets,o=e.isReadOnly,s=e.onSessionChange,p=e.isAgentPresentationCentered,f=(0,en.o)(n),h=(0,c.C9)().agentState,m=(0,l.useCallback)(function(e){var t=null;switch(e.type){case"nextStepResponse":(0,ev.pI)({action:"suggested_feature_selected",sessionId:n.id}),t={$kind:"nextStepResponse",nextStepResponse:{response:{$kind:"newFeatureResponse",newFeatureResponse:{selectedFeatureId:e.data.id,featureName:e.data.featureName}}}};break;case"useSecretResponse":t={$kind:"useSecretResponse",useSecretResponse:{}};break;default:(0,F.A)(e)}return n.appendEvent({kind:"agentAskUserForActionResponse",response:t})},[n]),g=(0,d._P)({controlName:"flag-back-to-the-future",logFlagToAnalytics:!1}),v=(0,l.useMemo)(function(){return null==n?void 0:n.transform(g?em:eh,1e3)},[n,g]),w=(0,u.J2)(v.exhaustive),y=(0,u.Rj)(function(){return v.chunked(function(e){return"agentToolUse"===e.transformed.type?"continue":"isolate"})},[v]),b=(0,u.Rj)(function(){return null==n?void 0:n.reduce(L,"global")},[n],{default:{planVersions:new Map}}).planVersions;return(null==y?void 0:y.length)?(0,a.FD)(a.FK,{children:[!1===w?(0,a.Y)(Z.$n,{variant:"outlined",iconLeft:(0,a.Y)(iW.A,{}),text:"Show previous events",onClick:function(){v.size.set(v.size.current+100)}}):null,null==y?void 0:y.map(function(e,n){return(0,a.Y)(iZ,{approvePlan:f,openPane:r,readFile:t,events:e,isLast:n===y.length-1,secrets:i,sendAskUserForActionResponse:m,isReadOnly:o,onSessionChange:s,agentState:h,isAgentPresentationCentered:p,planVersions:b},e[0][0])})]}):(0,a.Y)(et.G,{})});function iZ(e){var n=e.events,t=e.openPane,r=e.readFile,i=e.isLast,l=e.secrets,s=e.approvePlan,c=e.sendAskUserForActionResponse,u=e.isReadOnly,d=e.onSessionChange,p=e.agentState,f=e.isAgentPresentationCentered,h=e.planVersions,m=(0,eg.g)({items:n,maxVisibleItems:2}),g=m.isExpanded,v=m.setIsExpanded,w=m.maxItemsReached,y=m.visibleItems,b=m.hiddenItemsCount;return(0,a.FD)(a.FK,{children:[w?(0,a.Y)(H.S,{clsx:iV().expandButton,children:(0,a.Y)(tX,{isExpanded:g,onClick:function(){return v(!g)},hiddenItemsCount:b})}):null,y.map(function(e,n){var m=(0,o._)(e,2),g=m[0],v=m[1];return(0,a.Y)(iq,{isLast:i&&n===y.length-1,openPane:t,readFile:r,data:v,secrets:l,approvePlan:s,sendAskUserForActionResponse:c,isReadOnly:u,agentState:p,onSessionChange:d,isAgentPresentationCentered:f,planVersions:h},g)})]})}var iq=(0,l.memo)(function(e){var n,t,r=e.openPane,s=(0,u.Rj)(function(){return e.data.select(function(e){return e},Y())},[e.data]),d=(0,l.useCallback)(function(e){return r({type:"git",data:{mode:{type:ei.C.COMMIT,hash:e}}})},[r]),p=(L=e.secrets.replaceAllExternalSecrets,U=(0,P.A)(),O=(0,o._)((0,el.WM)(U,L),1)[0],M=(0,l.useCallback)(function(e){return O({variables:{input:{resourceId:U,resourceType:ea.U9.Repl,secrets:e}}})},[O,U]),B=(0,o._)((0,el.Nz)(U,L),1)[0],{linkSecrets:M,unlinkSecrets:(0,l.useCallback)(function(e){return B({variables:{input:{resourceId:U,resourceType:ea.U9.Repl,ids:e}}})},[B,U])}),f=p.linkSecrets,h=p.unlinkSecrets,m=(0,c.Ik)(),g=(0,T.W)(),S=(0,er.X8)(),x=S.renameCommit,C=S.findCommit,k=(0,P.A)(),D=(z={variables:{id:k}},W=(0,y._)({},E,z),_.I(I,W)),R=(0,N.xe)();if(!s)return(0,a.Y)(H.S,{children:"No data found for event"});switch(s.type){case"planProposal":if("visualPlanner"===g){var L,U,O,M,B,z,W,V,j,Z,q,K,$,J,Q=(0,v._)({},(0,w._)(s));if(!R&&!e.isLast||R&&s.planId!==R)return(0,a.Y)(H.S,{clsx:[(0,i._)({},iV().eventMaxWidthContainer,e.isAgentPresentationCentered)],children:(0,a.Y)(G,(0,b._)((0,y._)({},Q),{planIterationVersion:null!=(K=e.planVersions.get(s.planId))?K:0}))});return(null==(j=D.data)||null==(V=j.getRepl)?void 0:V.__typename)==="Repl"&&(J=(0,a.Y)(eo.A,{replId:k,replIconUrl:D.data.getRepl.iconUrl,size:64})),(null==(q=D.data)||null==(Z=q.getRepl)?void 0:Z.__typename)==="Repl"&&($=D.data.getRepl.title),(0,a.Y)(H.S,{clsx:[(0,i._)({},iV().planProposalEventMaxWidthContainer,e.isAgentPresentationCentered)],children:(0,a.Y)(tK,(0,b._)((0,y._)({},Q),{steps:s.step.subSteps,appName:$,appIcon:J,planApprovalState:m,isLastEvent:e.isLast}))})}return(0,a.Y)(tA,{stackBlueprint:s.stackBlueprint,sessionId:s.sessionId,steps:s.step.subSteps,approverId:s.approvedByUserId,approvePlan:function(n){return e.approvePlan({planId:s.planId,objective:s.objective,step:(0,A.vt)(s.step,function(e){e.subSteps=n}),stackBlueprint:s.stackBlueprint})}});case"userMessage":return(0,a.Y)(H.S,{clsx:[iV().userMessage,(0,i._)({},iV().eventMaxWidthContainer,e.isAgentPresentationCentered)],children:(0,a.Y)(iB,{userId:s.userId,message:s.message,attachments:s.uploadedFiles,attachedUrls:s.attachedUrls,acknowledged:s.acknowledged,created:s.created,readFile:e.readFile,targetedElement:s.targetedElement,openPane:e.openPane})});case"agentMessage":return(0,a.Y)(H.S,{clsx:[(0,i._)({},iV().eventMaxWidthContainer,e.isAgentPresentationCentered)],children:(0,a.Y)(nb,{state:s.state,isLast:e.isLast,message:s.message,requestedSecrets:s.requestedSecrets,waitingOnUser:s.waitingOnUser,agentState:e.agentState,sessionId:s.sessionId,openPane:e.openPane,secrets:e.secrets,isReadOnly:e.isReadOnly,sendAskUserForActionResponse:e.sendAskUserForActionResponse,linkSecrets:f,unlinkSecrets:h})});case"agentToolUse":return(0,a.Y)(H.S,{clsx:[iV().agentAction,(0,i._)({},iV().eventMaxWidthContainer,e.isAgentPresentationCentered)],children:(0,a.Y)(iF,{toolDataKind:s.toolDataKind,summary:s.summary,data:s.data,sessionId:s.sessionId,eventId:s.eventId,openPane:e.openPane})});case"checkpoint":return(0,a.Y)(nN,{openPane:r,onOpenCommit:d,onSessionChange:e.onSessionChange,checkpoint:(0,b._)((0,y._)({},s),{title:null!=(t=null==(n=C(s.commitId))?void 0:n.customSubject)?t:s.title}),onRenameTitle:x});case"suggestDeploy":return(0,a.Y)(t4,{openPane:r});case"askUserForAction":return(0,a.Y)(nx,{newFeatureRequests:s.newFeatureRequests,sendAskUserForActionResponse:e.sendAskUserForActionResponse,message:s.message,state:s.state});case"revert":return(0,a.Y)(ee,{event:s,onSessionChange:e.onSessionChange});case"error":return(0,a.Y)(nW,{message:s.message});default:(0,F.A)(s)}});function iK(e){return(0,a.Y)(a.FK,{children:"comming soon"})}var i$=t(82110),iJ=t(39101),iQ=t(39782),iX=t(37037),i0=t(18942),i1=t(58018),i2=t.n(i1);function i4(e){var n,t,r,i,s=e.startedAt,c=e.onCancel,u=(n=s,r=(t=(0,o._)((0,l.useState)(null),2))[0],i=t[1],(0,l.useEffect)(function(){if(n){var e=null,t=Date.now(),r=function(){if(null!=e){var o=Date.now();if(o-t>=1e3){var a=Math.floor((o-n.getTime())/1e3);i("".concat(a,"s")),t=o}e=requestAnimationFrame(r)}};return e=requestAnimationFrame(r),function(){null!=e&&(cancelAnimationFrame(e),e=null)}}},[n]),r);return(0,a.FD)(M.ui,{className:i2().dialog,gap:8,elevated:!0,children:[(0,a.Y)(B.EY,{style:{color:eE.LU.blurpleStrongest},children:"Planning your app project"}),(0,a.Y)(i3,{isThinking:!0,statusText:(0,a.FD)(a.FK,{children:[(0,a.Y)("strong",{children:"Working"}),u?(0,a.FD)(a.FK,{children:["  ",u," elapsed"]}):null]}),onCancel:c})]})}function i5(e){var n=e.onStartBuilding,t=e.onRevisePlan,r=(0,N.xe)();return(0,a.FD)(M.ui,{className:i2().dialog,gap:8,elevated:!0,children:[(0,a.Y)(B.EY,{children:"Review the plan and visual preview. If all looks good, approve the plan. You can also make revisions by chatting with me."}),(0,a.Y)(H.S,{className:i2().form,gap:8,children:(0,a.FD)(H.S,{row:!0,gap:8,children:[(0,a.Y)(Z.$n,{className:i2().option,text:"Keep chatting",onClick:t,iconLeft:(0,a.Y)(rr.A,{})}),(0,a.Y)(Z.$n,{className:i2().option,text:"Approve ".concat(r?"selected":""," plan"),onClick:n,iconRight:(0,a.Y)(iX.A,{}),colorway:"blurple"})]})}),(0,a.Y)(i3,{isThinking:!1,statusText:"Waiting for your response"})]})}function i3(e){var n=e.isThinking,t=e.statusText,r=e.onCancel;return(0,a.FD)(H.S,{row:!0,justify:"space-between",align:"center",children:[(0,a.FD)(H.S,{row:!0,gap:8,align:"center",children:[(0,a.Y)(iQ.l,{loading:n,size:16}),(0,a.Y)(B.EY,{color:"dimmer",clsx:[i2().statusText,n?i2().statusTextThinking:void 0],children:t})]}),r?(0,a.Y)(eP.K0,{alt:"Cancel",onClick:r,children:(0,a.Y)(i0.A,{})}):null]})}var i6=t(40836),i8=(0,eR.x)({container:[{animation:"slideUp 0.2s ease-out"},{"@keyframes slideUp":{from:{opacity:0,transform:"scale(0.95)"},to:{opacity:1,transform:"scale(1)"}}},eF.wp.p(8),eF.wp.borderRadius(),eF.wp.backgroundColor.orangeDimmest,eF.wp.border({color:eE.LU.orangeDimmer})],buttons:[eF.wp.flex.wrap],header:[eF.wp.color.orangeStrongest],column:[eF.wp.width("50%")],warning:[eF.wp.color.redStronger],secretsButton:[eF.wp.display.inlineFlex]});function i7(e){var n=e.openSecrets,t=(0,o._)((0,l.useState)(!1),2),r=t[0],i=t[1],s=(0,i6.jq)(),c=s.inMessageSecrets,u=s.replaceInMessageSecrets,d=s.dismissInMessageSecrets;return(0,a.FD)(a.FK,{children:[(0,a.Y)(M.ui,{css:i8.container,background:"higher",children:(0,a.FD)(H.S,{gap:8,children:[(0,a.FD)(H.S,{row:!0,gap:4,align:"center",children:[(0,a.Y)(nB.A,{css:i8.header,size:16}),(0,a.Y)(B.EY,{css:i8.header,variant:"small",color:"dimmer",children:"Security Warning"})]}),(0,a.FD)(B.EY,{variant:"small",children:["The ",(0,eV.A)("values",c.length)," you added look like ",c.length>1?"secrets":"a secret",". Store"," ",c.length>1?"them":"it"," securely using our"," ",(0,a.Y)(Z.$n,{css:i8.secretsButton,text:"Secrets",colorway:"primary",variant:"underlinedOnHover",size:"small",onClick:n})," ","feature."]}),(0,a.FD)(H.S,{css:i8.buttons,row:!0,gap:8,align:"center",children:[(0,a.Y)(Z.$n,{text:"Add ".concat((0,eV.A)("secret",c.length)),iconLeft:(0,a.Y)(e5.A,{}),loading:r,colorway:"warning",size:"small",onClick:function(){return i(!0)}}),(0,a.Y)(Z.$n,{text:"Dismiss",iconLeft:(0,a.Y)(nJ.A,{}),variant:"outlined",colorway:"warning",size:"small",onClick:d})]})]})}),r?(0,a.Y)(i9,{inMessageSecrets:c,onReplace:u,onClose:function(){return i(!1)}}):null]})}function i9(e){var n=e.inMessageSecrets,t=e.onReplace,r=e.onClose,s=(0,t_.A)().secrets,c=(0,o._)((0,l.useState)(null),2),u=c[0],d=c[1],p=(0,o._)((0,l.useState)(!1),2),f=p[0],h=p[1],m=(0,o._)((0,l.useState)(!1),2),g=m[0],v=m[1],w=(0,o._)((0,l.useState)({}),2),S=w[0],Y=w[1];if((0,l.useEffect)(function(){var e=!1;return s.read().then(function(n){e||d(n)}),function(){e=!0}},[s]),n.some(function(e){return!(e.id in S)})){var A={},x=!0,C=!1,_=void 0;try{for(var k,D=n[Symbol.iterator]();!(x=(k=D.next()).done);x=!0){var E,R=k.value;A[R.id]={key:(E=R.provider,("Generic API Key"===E||"Generic Secret"===E?null:on(E))||""),value:R.key}}}catch(e){C=!0,_=e}finally{try{x||null==D.return||D.return()}finally{if(C)throw _}}Object.assign(S,(0,y._)({},A,S))}var I=new Set(Object.values(S).map(function(e){return e.key})),F=[];if(Object.values(S).some(function(e){return 0===e.key.length})&&F.push("Key name cannot be empty."),Object.values(S).some(function(e){return 0===e.value.length})&&F.push("Secret value cannot be empty."),I.size!==Object.values(S).length&&F.push("Some key names are duplicates."),u){var T=!0,P=!1,L=void 0;try{for(var U,N=u.keys()[Symbol.iterator]();!(T=(U=N.next()).done);T=!0){var O=U.value;I.has(O)&&F.push('Key name "'.concat(O,'" already exists. Please choose a different name.'))}}catch(e){P=!0,L=e}finally{try{T||null==N.return||N.return()}finally{if(P)throw L}}}var M=null===u||F.length>0,z=null===u||g;return(0,a.Y)(eZ.a,{isOpen:!0,preventClose:!0,onRequestClose:r,children:(0,a.FD)(H.S,{gap:12,children:[(0,a.FD)(H.S,{gap:8,children:[(0,a.FD)(H.S,{row:!0,align:"center",gap:8,children:[(0,a.Y)(e5.A,{}),(0,a.Y)(B.EY,{children:"Store secret securely"})]}),(0,a.Y)(B.EY,{color:"dimmer",children:n.length>1?"Add key names for your values.":"Add a key name for your value."})]}),(0,a.FD)(H.S,{gap:4,children:[(0,a.FD)(H.S,{row:!0,align:"center",children:[(0,a.Y)(B.EY,{css:i8.column,variant:"small",color:"dimmer",children:"Key"}),(0,a.FD)(H.S,{css:i8.column,row:!0,align:"center",gap:4,pl:4,children:[(0,a.Y)(B.EY,{variant:"small",color:"dimmer",children:"Value"}),(0,a.Y)(eP.K0,{size:18,alt:"Toggle Secret",onClick:function(){return h(function(e){return!e})},tooltipPlacement:"top",children:f?(0,a.Y)(e$.A,{}):(0,a.Y)(eK.A,{})})]})]}),(0,a.Y)(H.S,{gap:12,children:n.map(function(e){return(0,a.Y)(oe,{name:S[e.id].key,value:S[e.id].value,showContents:f,onChange:function(n,t){Y(function(r){return(0,b._)((0,y._)({},r),(0,i._)({},e.id,{key:n,value:t}))})}},e.id)})})]}),F.length?(0,a.Y)(H.S,{gap:8,children:F.map(function(e,n){return(0,a.FD)(H.S,{row:!0,gap:8,align:"center",children:[(0,a.Y)(nB.A,{css:i8.warning,size:16}),(0,a.Y)(B.EY,{css:i8.warning,variant:"small",children:e})]},n)})}):null,(0,a.FD)(H.S,{row:!0,gap:8,align:"center",justify:"end",children:[(0,a.Y)(Z.$n,{text:"Cancel",onClick:r}),(0,a.Y)(Z.$n,{text:n.length>1?"Add secrets":"Add secret",disabled:M,loading:z,colorway:"primary",onClick:(0,V._)(function(){var e;return(0,j.YH)(this,function(n){switch(n.label){case 0:return v(!0),[4,s.addEntries(Array.from(Object.values(S)))];case 1:for(var i in n.sent(),e={},S)e[i]=S[i].key;return v(!1),t(e),r(),[2]}})})})]})]})})}function oe(e){var n=e.name,t=e.value,r=e.showContents,i=e.onChange;return(0,a.FD)(H.S,{row:!0,align:"center",gap:8,children:[(0,a.Y)(ns.pd,{css:i8.column,value:n,placeholder:"Enter a key name","aria-label":"Secret key name",onChange:function(e){i(on(e.target.value),t)}}),(0,a.Y)(ns.pd,{css:i8.column,style:!t||r?{}:{fontFamily:"text-security-disc"},value:t,placeholder:"Enter a secret value","aria-label":"Secret value",onChange:function(e){i(n,e.target.value)}})]})}function on(e){return e.toUpperCase().replaceAll(/[[,()]/g,"").replaceAll(/\s+/g,"_").replaceAll(/[^A-Z0-9_]/g,"")}var ot=t(77510),or=t(93436),oi=t(37237),oo=t(44996),oa=t(3859),ol=t(25073);function os(e){var n=e.runAgent,t=(0,P.A)(),r=(0,o._)((0,l.useState)(!1),2),i=r[0],s=r[1];return(0,a.FD)(a.FK,{children:[(0,a.FD)(M.ui,{css:oc.root,gap:4,elevated:!0,children:[(0,a.FD)(B.EY,{children:["Youve hit the monthly budget. Increase your usage budget to continue using the Agent."," "]}),(0,a.Y)(H.S,{css:oc.budgetButtonContainer,row:!0,gap:4,children:(0,a.Y)(Z.$n,{css:oc.budgetButton,iconLeft:(0,a.Y)(e0.A,{}),text:"Increase budget",onClick:function(){return s(!0)},variant:void 0})})]}),(0,a.Y)(eZ.a,{isOpen:i,onRequestClose:function(){return s(!1)},children:(0,a.Y)(ol.h,{style:"borderless",replId:t,onUpdateSuccess:function(){s(!1),n()}})})]})}var oc=(0,eR.x)({root:[eF.wp.borderRadius(4),eF.wp.p(8),eF.wp.textAlign.center],budgetButtonContainer:[eF.wp.width("100%"),eF.wp.justify.center,{containerType:"inline-size"}],budgetButton:[{"@container (max-width: 330px)":{"& span":{display:"none"}}}]}),ou=t(79784),od=t(13771),op=t(33131),of=t(2115),oh=(0,eR.x)({root:[eF.wp.borderRadius()],text:[eF.wp.textAlign.center],buttonContainer:[eF.wp.width("100%"),eF.wp.justify.center],upgradeButton:[eF.wp.width("60%")]});function om(){var e=(0,o._)((0,l.useState)(!1),2),n=e[0],t=e[1],r=(0,op.A)();return(0,a.FD)(M.ui,{elevated:!0,css:oh.root,py:8,px:12,gap:8,align:"center",children:[(0,a.FD)(B.EY,{css:oh.text,children:["You've reached your free usage limit. Upgrade to ",ou.en," to continue using ",c.g$,"."]}),(0,a.Y)(H.S,{css:oh.buttonContainer,row:!0,gap:6,children:(0,a.Y)(Z.$n,{text:"Upgrade to ".concat(ou.en),iconLeft:(0,a.Y)(of.A,{}),onClick:function(){return t(!0)},colorway:"brand",css:oh.upgradeButton})}),(0,a.Y)(od.A,{isOpen:n,onClose:function(){return t(!1)},type:"purchase",analyticsContext:{upgrade:{context:"agent_freemium_quota"}},onPurchaseComplete:function(){return r()},reloadPageAfterPurchaseComplete:!0})]})}var og=t(51151),ov=t(28418),ow=t(63893);function oy(){var e=(0,x._)(["\n  fragment AgentSessionErrorUsageInterval on UsageInterval {\n    endDate\n  }\n"]);return oy=function(){return e},e}function ob(){var e=(0,x._)(["\n  query AgentSessionError($orgId: String) {\n    currentUser {\n      id\n      usageInterval {\n        ... on UsageInterval {\n          ...AgentSessionErrorUsageInterval\n        }\n        ... on Error {\n          message\n        }\n      }\n      usageBasedBillingAlerts {\n        ...EditUsageBasedBillingAlertsFormInitialConfig\n      }\n      org(orgId: $orgId) {\n        ... on Org {\n          id\n          name\n          usageInterval {\n            ... on UsageInterval {\n              ...AgentSessionErrorUsageInterval\n            }\n            ... on Error {\n              message\n            }\n          }\n          usageBasedBillingAlerts {\n            ...EditUsageBasedBillingAlertsFormInitialConfig\n          }\n        }\n        ... on Error {\n          message\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return ob=function(){return e},e}var oS={},oY=(0,C.J1)(oy()),oA=(0,C.J1)(ob(),oY,ow.B9),ox=t(5793),oC=t(24893),o_=t(61627),ok=t(86020),oD=t(39999),oE=t(90419),oR=t(58481),oI=(0,eR.x)({root:[eF.wp.position.relative,eF.wp.p(8),eF.wp.borderRadius(),eF.wp.border({color:eE.LU.outlineDimmest}),eF.wp.colWithGap(4),{containerType:"inline-size"}]});function oF(e){return(0,a.FD)(H.S,{row:!0,gap:6,align:"center",children:[(0,a.Y)(iQ.l,{size:16}),(0,a.Y)(B.EY,{variant:"subheadDefault",children:e.children})]})}function oT(e){return(0,a.FD)(M.ui,{elevated:!0,css:oI.root,children:[(0,a.Y)(oF,{children:"Youve hit your usage budget"}),(0,a.FD)(B.EY,{"data-chromatic":"ignore",children:["Increase your usage budget to continue using Agent now. Otherwise, your usage will reset"," ",e.creditsResetDate?(0,a.FD)(a.FK,{children:["on ",(0,ok.A)(e.creditsResetDate,"MMM do, HH:mm aaa")," "]}):null,"when the next billing period begins."]}),(0,a.Y)(Z.$n,{iconLeft:(0,a.Y)(oR.A,{}),text:"Increase usage budget",colorway:"primary",onClick:e.onIncreaseBudget})]})}function oP(e){return(0,a.FD)(M.ui,{css:oI.root,elevated:!0,children:[(0,a.Y)(oF,{children:"Add a billing method to continue using Agent"}),(0,a.Y)(B.EY,{children:"Youve used all your monthly creditsyoull need to to add a billing method to pay for additional Agent usage."}),(0,a.Y)(Z.$n,{iconLeft:(0,a.Y)(oE.A,{}),text:"Add billing method",colorway:"primary",onClick:e.onAddBillingMethod})]})}function oL(){return(0,a.FD)(M.ui,{css:oI.root,elevated:!0,children:[(0,a.Y)(oF,{children:"Your subscription is not active anymore"}),(0,a.Y)(B.EY,{children:"Your subscription has expired or been canceled. To continue using Agent, make sure your subscription is active."}),(0,a.Y)(oD.v,{href:"/pricing",iconRight:(0,a.Y)(iX.A,{}),text:"See pricing",colorway:"primary"})]})}function oU(e){var n=e.error;return(0,a.FD)(M.ui,{css:oI.root,elevated:!0,children:[(0,a.Y)(oF,{children:"Dev only error"}),(0,a.FD)(B.EY,{children:[n.type," - ",n.message]})]})}function oN(e){var n=(0,P.A)(),t=(0,ox.R)(n),r=t.hasError,i=t.orgId,c=(f={variables:{orgId:i},skip:void 0===i||r},h=(0,y._)({},oS,f),_.I(oA,h)).data;m=i?(null==c||null==(g=c.currentUser)?void 0:g.org.__typename)==="Org"&&"UsageBasedBillingAlertsConfig"===c.currentUser.org.usageBasedBillingAlerts.__typename?c.currentUser.org.usageBasedBillingAlerts:void 0:(null==c||null==(v=c.currentUser)?void 0:v.usageBasedBillingAlerts.__typename)==="UsageBasedBillingAlertsConfig"?c.currentUser.usageBasedBillingAlerts:void 0;var u=(0,o._)((0,l.useState)(null),2),d=u[0],p=u[1];switch(e.error.type){case s.fqQ.AI_QUOTA_INSUFFICIENT_BUDGET:var f,h,m,g,v,w,b,S=null==c?void 0:c.currentUser,Y=(null==S?void 0:S.org.__typename)==="Org"?S.org:void 0;return(null==Y?void 0:Y.usageInterval.__typename)==="UsageInterval"?b=new Date(Y.usageInterval.endDate):(null==S||null==(w=S.usageInterval)?void 0:w.__typename)==="UsageInterval"&&(b=new Date(S.usageInterval.endDate)),(0,a.FD)(a.FK,{children:[(0,a.Y)(oT,{creditsResetDate:b,onIncreaseBudget:function(){return p(s.fqQ.AI_QUOTA_INSUFFICIENT_BUDGET)}}),(0,a.Y)(eZ.a,{isOpen:d===s.fqQ.AI_QUOTA_INSUFFICIENT_BUDGET,onRequestClose:function(){return p(null)},children:(0,a.Y)(o_.j,{org:Y,initialSettings:m,onDone:function(){return window.location.reload()}})})]});case s.fqQ.AI_QUOTA_REQUIRES_PAYMENT_METHOD:return(0,a.FD)(a.FK,{children:[(0,a.Y)(oP,{onAddBillingMethod:function(){p(s.fqQ.AI_QUOTA_REQUIRES_PAYMENT_METHOD)}}),(0,a.Y)(eZ.a,{isOpen:d===s.fqQ.AI_QUOTA_REQUIRES_PAYMENT_METHOD,onRequestClose:function(){return p(null)},children:(0,a.FD)(H.S,{gap:16,children:[(0,a.Y)(B.Y9,{variant:"headerDefault",level:1,children:"Manage Payment"}),(0,a.Y)(oC.n,{})]})})]});case s.fqQ.AI_QUOTA_REQUIRES_ACTIVE_SUBSCRIPTION:return(0,a.Y)(oL,{});default:return(0,a.Y)(oU,{error:e.error})}}function oO(){var e=(0,x._)(["\n  fragment AgentAuthorizations on OrgAuthorizations {\n    paidAgent: useAiAgent(tier: paid) {\n      __typename\n      isAuthorized\n      message\n      code\n    }\n    freeAgent: useAiAgent(tier: free) {\n      __typename\n      isAuthorized\n      message\n      code\n    }\n  }\n"]);return oO=function(){return e},e}function oM(){var e=(0,x._)(["\n  query GetAgentRepl($replId: String!) {\n    getRepl(id: $replId) {\n      __typename\n      ... on Repl {\n        id\n        org {\n          id\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n"]);return oM=function(){return e},e}function oB(){var e=(0,x._)(["\n  query GetAgentReplAuthorizations($orgId: String) {\n    currentUser {\n      id\n      personalOrgAuthorizations {\n        ... on OrgAuthorizations {\n          ...AgentAuthorizations\n        }\n        ... on Error {\n          message\n        }\n      }\n      org(orgId: $orgId) {\n        ... on Org {\n          id\n          authorizations {\n            ... on OrgAuthorizations {\n              ...AgentAuthorizations\n            }\n          }\n        }\n        ... on Error {\n          message\n        }\n      }\n    }\n  }\n  ","\n"]);return oB=function(){return e},e}var oH={},oz=(0,C.J1)(oO()),oW=(0,C.J1)(oM()),oG=(0,C.J1)(oB(),oz),oV=t(84344),oj=t(37773),oZ=t(43333),oq=t(34591),oK=t(61311),o$=t(44916),oJ=t(55315),oQ=t(32507),oX=t(93369),o0=t(54240),o1=(0,eR.x)({button:[eF.wp.height(24),eF.wp.p(4),eF.wp.color.foregroundDimmer,eF.wp.align.center,{"&:hover:not([disabled], [aria-disabled])":eF.wp.color.foregroundDefault}]});function o2(e){var n=e.isEnabled,t=e.onChange;return(0,a.Y)(nc.m_,{tooltip:"[Staff] "+(n?"Disable Quick Edit Mode":"Enable Quick Edit Mode"),placement:"top-start",children:(0,a.FD)(H.S,{row:!0,gap:4,css:o1.button,children:[(0,a.Y)(B.EY,{variant:"small",color:"dimmer",children:"[Staff] Quick Edit"}),(0,a.Y)(ej.S,{checked:n,onChange:function(){return t(!n)},"aria-labelledby":"toggle-quick-edit-mode"})]})})}var o4=t(17307),o5=t(52784),o3=t(65608),o6=t(7894),o8=t(47443),o7=t(77286),o9=t(51492),ae=t(15811),an=t(11903),at=t(80446),ar=t(74291),ai=t(483),ao=t(75247),aa=t(47104),al=t(48028),as=(0,eI.v)(["hoverBorderColor","focusedBorderColor"]),ac=as.cssVars,au=as.styleTokens,ad=(0,eR.x)({wrapper:[eF.wp.position.relative,eF.wp.minHeight("fit-content"),{display:"grid",gridTemplate:"1fr / 1fr","& > *":{gridArea:"1 / 1"}}],surface:[nO.b.filledAndOutlined,eF.wp.borderRadius(6),eF.wp.flex.growAndShrink(1),eF.wp.p(4),{rowGap:eE.LU.space4,display:"flex",flexDirection:"column","&[disabled], &[aria-disabled]":{"& .cm-editor":{opacity:.5}},"@media (hover: hover)":{":not([disabled], [aria-disabled])":{cursor:"text"}},"&:hover:not([disabled], [aria-disabled]):hover":{borderColor:au.hoverBorderColor},"&:focus-within:not([disabled], [aria-disabled])":{borderColor:au.focusedBorderColor},"&:focus-within":{borderColor:"red"}}],inputWrapper:[eF.wp.flex.growAndShrink(1)],codemirror:[eF.wp.display.flex,eF.wp.flex.grow(1),eF.wp.overflow("auto"),eF.wp.maxHeight(300),{"& .cm-editor":[eF.wp.flex.grow(1)]}],attachments:[eF.wp.px(4),eF.wp.py(6)],sendDisabled:[(0,nl.Li)("grey"),{pointerEvents:"none",cursor:"default",":hover":{pointerEvents:"none"}}],sendEnabled:[(0,nl.Li)("primary")],primaryButtonGroup:[eF.wp.height(32)],submitButton:[eF.wp.borderRadius()]}),ap=rb.Lz.theme((r={"&":{flexGrow:1},"& .cm-content":{fontFamily:eE.LU.fontFamilyDefault}},(0,i._)(r,"& .".concat(oQ.Fb),{display:"none"}),(0,i._)(r,"& .cm-cursor",{borderLeftColor:eE.LU.foregroundDefault,borderLeftWidth:"1px"}),r));function af(e){var n,t,r,s,u,d,f=(0,oJ.A)(),h=f.ref,m=f.view,g=(0,o._)((0,l.useState)(!1),2),v=g[0],w=g[1],y=(0,ek.m5)(),b=null!=(n=e.status)?n:"composing",S=(0,oK.Vn)(m,at.Im),Y=(0,p.A)().showError,A=(0,at.hk)({text:null!=(t=e.placeholderText)?t:"Message Agent",disableAnimation:e.disablePlaceholderTextAnimation}),x=an.bZ.use(2e3),C=(0,o3.j)(e.persistenceKey,m),_=C.persistPromptDraftCompartment,k=C.clearPersistedPromptDraft,D=(0,o8.e)(),E=(0,ai.s)(),R=E.attachments,I=E.urlAttachments,F=E.removeAttachment,T=E.addAttachments,P=E.addUrlAttachment,L=E.removeUrlAttachment,U=E.clearAttachments,N=E.isLoading,O=null!=(r=(0,oK.Vn)(m,aa.Wd))?r:[],B=(0,i6.a1)(),z=null!=(s=(0,oK.Vn)(m,oj.iN))&&s;(0,i6.Ku)(m);var W=(0,l.useCallback)(function(e){m&&m.dispatch(m.state.update({changes:{from:0,to:m.state.doc.length,insert:e}}))},[m]),G=(0,ae.A)({addAttachments:T}),V=G.isDraggedOver,j=G.drop,Z=e.requireTextToSubmit&&S||S&&0===R.length&&"composing"===b||"loading"===b||e.isSubmitDisabled||!!e.disabled||N||z,q=e.submitDisabledReason;z?q="Please add secret or dismiss the warning.":N&&(q="Please wait for files to finish uploading");var K=e.onSubmit,J=(0,l.useCallback)(function(){if(!Z&&m){var e=m.state.doc.toString();k(),K(e,(0,ew._)(R).concat((0,ew._)(I.map(function(e){return e.file}))),[],v),U(),m.dispatch({effects:aa.Ff.of(null)}),m.dispatch({changes:{from:0,to:m.state.doc.length}})}},[Z,m,k,K,R,U,I,v]),Q=(0,oX.A)(J),X=ah.use({onSubmit:(0,l.useCallback)(function(){return Q.current()},[Q])}),ee=(0,o6.F)({view:m,setPromptEditor:e.inputRef}),en=ao.U.use({addAttachments:T,onAutoAttachedLargePaste:function(n){(0,ev.pI)({action:"auto_attached_large_paste",fileSize:n,sessionId:e.sessionId})}}),et=(0,o0.S)([j,ee],{breadcrumb:"client/workspace/components/Agent/Chat/InputBox/index.tsx:448"});return(0,a.Y)(H.S,{css:ad.wrapper,children:(0,a.FD)(M.ui,{css:ad.surface,innerRef:et,gap:4,style:(d={borderColor:V?eE.LU.accentPrimaryDefault:void 0},(0,i._)(d,ac.focusedBorderColor,eE.LU.accentPrimaryDefault),(0,i._)(d,ac.hoverBorderColor,eE.LU.accentPrimaryDefault),d),"aria-disabled":!!e.disabled||void 0,inert:e.overlay?"true":void 0,onClick:function(e){e.target===e.currentTarget&&(null==m||m.focus())},children:[null!=(u=e.header)?u:null,(0,a.FD)(H.S,{css:ad.inputWrapper,gap:4,children:[(0,a.Y)(iT.A,{css:ad.attachments,detectedUrls:O.map(function(e){return(0,a.Y)(o5.A,{url:e,addUrlAttachment:P,removeUrlAttachment:L,onError:Y},e)}),fileAttachments:R.map(function(e){return(0,a.Y)(iP.m1,{attachment:e,removeAttachment:F,getAttachmentTypeDisclaimer:(0,iL.F)({aiName:(0,c.Nn)({capitalizeFirstChar:!0})})},e.path)})}),(0,a.Y)(o$.A,{"data-chromatic":"ignore",ref:h,css:ad.codemirror,style:{cursor:e.disabled?"default":void 0},fontSize:14,readOnly:e.disabled,extensions:[ap,X,en,A,an.tP,x,_,oq.r,oZ.N,B?oj.Pl:[],D?[]:aa.fd],id:"ai-prompt-input","data-cy":"ai-prompt-input"})]}),(0,a.FD)(H.S,{row:!0,gap:4,css:ad.primaryButtonGroup,pb:2,justify:"space-between",align:"end",onClick:function(e){e.target===e.currentTarget&&(null==m||m.focus())},children:[(0,a.FD)(H.S,{row:!0,gap:y?12:4,align:"center",children:[(0,a.Y)(M.ui,{elevated:!0,children:(0,a.Y)(o4.e,{disabled:e.disabled,status:b,addAttachments:T})}),(0,a.Y)(o7.A,{getCurrentText:function(){var e;return null!=(e=null==m?void 0:m.state.doc.toString())?e:""},onUpdateText:W}),e.showVisualSelector?(0,a.Y)(M.ui,{elevated:!0,children:(0,a.Y)(ar.G,{})}):null,(0,a.Y)(M.ui,{elevated:!0,children:e.debugButton}),e.showQuickEditModeButton?(0,a.Y)(M.ui,{elevated:!0,children:(0,a.Y)(o2,{isEnabled:v,onChange:w})}):null]}),(0,a.FD)(H.S,{pr:2,align:"center",row:!0,gap:8,children:[e.feedbackButton,y?(0,a.Y)(o9.J,{loading:"loading"===b,variant:"agent",alt:"composing"===b?"Send":"Loading",disabled:Z,onClick:J,dataCy:"ai-prompt-submit"}):(0,a.Y)(M.ui,{elevated:!0,css:ad.submitButton,children:(0,a.Y)(nc.m_,{isDisabled:!q,tooltip:q,children:(0,a.Y)(eP.K0,{alt:"composing"===b?"Send":"Loading...",tooltipBehavior:"hidden",disabled:Z,onClick:J,dataCy:"ai-prompt-submit",css:Z?ad.sendDisabled:ad.sendEnabled,children:"composing"===b?(0,a.Y)(al.A,{}):(0,a.Y)($.A,{})})})})]})]})]})})}var ah=new rA.k(function(e){var n=e.onSubmit,t=e.preventSubmitOnEnter;return rb.Lz.domEventHandlers({keydown:function(e,r){(0,oV.lq)(r.state).length>0||!t&&("Enter"===e.key&&e.metaKey&&e.stopPropagation(),"Enter"!==e.key||e.shiftKey||(e.preventDefault(),n()))}})}),am=t(94056),ag="The agent can create a database to keep your app's user data persistent even when your app is stopped.\nYour app's database is managed on Replit. You can view the created database in\nthe Database pane.",av=(0,eR.x)({container:[{animation:"slideUp 0.2s ease-out"},{"@keyframes slideUp":{from:{opacity:0,transform:"scale(0.95)"},to:{opacity:1,transform:"scale(1)"}}}],toolButton:[eF.wp.p(6),eF.wp.color.foregroundDefault,nO.b.filledAndOutlined,{borderColor:eE.LU.backgroundHigher,minHeight:"36px"}],buttonContainer:[eF.wp.gap(8),(0,i._)({display:"flex",flexWrap:"nowrap"},"@container (max-width: ".concat(am.LO.mobileMax,"px)"),{flexWrap:"wrap"})],newSessionText:[{whiteSpace:"nowrap"}],tooltip:{flexShrink:1}}),aw=(0,l.memo)(function(e){var n=e.onAddDatabase,t=e.onSuggestionsToggle,r=(0,o._)((0,l.useState)(!0),2),i=r[0],s=r[1],c=(0,o._)((0,l.useState)(!1),2),u=c[0],d=c[1],p=(0,o._)((0,l.useState)(!1),2),f=p[0],h=p[1],m=(0,ek.m5)(),g=(0,nI.q)({onDatabasesDetected:function(){t(),s(!1)}}),v=g.loading,w=g.neonDatabases;return i?(0,a.FD)(H.S,{gap:8,wrap:"nowrap",css:av.container,p:6,children:[(0,a.FD)(H.S,{row:!0,gap:4,align:"center",children:[(0,a.Y)(B.EY,{variant:"small",color:"dimmer",children:w.length>0?"Database ready":"Add a database to store user data"}),(0,a.Y)(nc.m_,{tooltip:ag,placement:"top",children:(0,a.Y)(tn.A,{size:16,onClick:function(){m&&d(!u)}})}),(0,a.Y)(eZ.a,{isOpen:u,onRequestClose:function(){return d(!1)},children:(0,a.Y)(H.S,{children:(0,a.Y)(B.EY,{children:ag})})})]}),(0,a.FD)(H.S,{css:av.buttonContainer,row:!0,children:[(0,a.Y)(ay,{disabled:f||v,colorway:"primary",toolIcon:w.length>0?(0,a.Y)(eq.A,{}):f||v?(0,a.Y)($.A,{}):(0,a.Y)(nF.A,{}),tooltip:"Create a database to keep user data persistent",description:w.length>0?"Database ready":f?"Adding database...":"Add a database",onClick:function(){h(!0),t(),n()}}),(0,a.Y)(ay,{tooltip:"Continue working without a database",description:"Maybe later",onClick:function(){s(!1),t()},backgroundColor:eE.LU.backgroundHighest})]})]}):null});function ay(e){var n=e.toolIcon,t=e.tooltip,r=e.description,i=e.onClick,o=e.rightIcon,l=e.disabled,s=e.outlined,c=e.backgroundColor,u=e.colorway;return(0,a.Y)(nc.m_,{tooltip:t,css:av.tooltip,children:(0,a.Y)(Z.$n,{colorway:u,variant:s?"outlined":"default",disabled:l,onClick:i,iconLeft:n,iconRight:o,style:c?{backgroundColor:c}:{},css:av.toolButton,text:(0,a.Y)(B.EY,{css:av.newSessionText,children:r})})})}var ab=(0,eR.x)({root:[eF.wp.center,eF.wp.p(8),eF.wp.borderRadius(),eF.wp.border({color:eE.LU.outlineDimmest}),eF.wp.mx(8)]});function aS(e){var n=e.onNewSession;return(0,a.FD)(H.S,{css:ab.root,gap:8,children:[(0,a.Y)(B.EY,{variant:"small",color:"dimmer",children:"This chat has ended"}),(0,a.Y)(Z.$n,{iconLeft:(0,a.Y)(iQ.l,{size:16}),onClick:n,text:"Start a new ".concat(c.g$," chat")})]})}var aY=t(6034),aA=t(41665),ax=t.n(aA);function aC(e){var n,t,r,i,p,h,m,v,w,b,S,Y,A,x,C,k,D,E,R,I,F,T,L,U,N,O,M,B,z,W,G,V,j={hasFlagAgentDebugInfoButton:(0,d._P)({controlName:"flag-agent-debug-info-button"}),hasFlagAgentVisualEditorButton:(0,d._P)({controlName:"flag-agent-visual-editor-button"}),hasFlagQuickEditMode:(0,d._P)({controlName:"flag-quick-edit-mode"})},q=j.hasFlagAgentDebugInfoButton,K=j.hasFlagAgentVisualEditorButton,$=j.hasFlagQuickEditMode,J=(0,f.e)(),Q=(0,oi.z)({type:"agent"}),X=e.sendMessage,ee=(0,l.useCallback)(function(e,n,t,r){X({message:e,attachments:n,attachedUrls:t,quickEdit:r})},[X]),en=g(null!=(V=null==(W=e.session)?void 0:W.id)?V:null),et=(0,oa.x)(),er=(0,nD.F)(),ei=(0,d._P)({controlName:"flag-freemium-ai-load-shedder"}),eo=(D=(S=(v={variables:{replId:(0,P.A)()}},w=(0,y._)({},oH,v),b=_.I(oW,w)).data,Y=b.loading,A=b.error,k={orgId:(null==S?void 0:S.getRepl.__typename)==="Repl"?null==(m=S.getRepl.org)?void 0:m.id:void 0,loading:Y,error:A}).orgId,E=k.loading,R=k.error,L=(I={variables:{orgId:D}},F=(0,y._)({},oH,I),T=_.I(oG,F)).data,U=T.loading,N=T.error,O=T.refetch,E||U?{loading:!0,refetch:O}:R||N?{loading:!1,refetch:O}:void 0===D?{authorizations:(null==L||null==(C=L.currentUser)?void 0:C.personalOrgAuthorizations.__typename)==="OrgAuthorizations"?L.currentUser.personalOrgAuthorizations:void 0,loading:!1,refetch:O}:{authorizations:(null==L||null==(x=L.currentUser)?void 0:x.org.__typename)==="Org"?L.currentUser.org.authorizations:void 0,loading:!1,refetch:O}),el=eo.authorizations,es=eo.loading,ec=(0,oo.i)(),eu=ec.agentCheckpoints,ed=ec.loading,ep=(0,c.C9)(),ef=ep.agentState,eh=ep.updateAgentState,em=(0,u.Rj)(function(){return null==ef?void 0:ef.map(function(e){return null==e?void 0:e.reason})},[ef],{default:null}),eg=(0,ot.b)(e.session),ew=eg.planApprovalState,ey=eg.approveTargetPlan,eb=eg.reviseLatestPlan,eS=eg.backToAwaitingApproval,eY=eg.userMessageAcknowledgedAt,eA=(B=(M=(0,o._)((0,l.useState)(null),2))[0],z=M[1],(0,c.zv)("received-completed-event",function(e){var n=e.event;switch(n.error.type){case s.fqQ.AI_QUOTA_INSUFFICIENT_BUDGET:case s.fqQ.AI_QUOTA_REQUIRES_PAYMENT_METHOD:case s.fqQ.AI_QUOTA_REQUIRES_ACTIVE_SUBSCRIPTION:z(n.error);break;default:n.error.type===s.fqQ.EVENT_ERROR_TYPE_UNKNOWN&&n.error.message}}),B),ex=(n=e.session,t=(0,c.C9)().agentState,i=(r=(0,o._)((0,l.useState)(!1),2))[0],p=r[1],h=(0,u.Rj)(function(){return n&&t?i$.cP.combine(n.reduce(a_,100),t.select(function(e){return(null==e?void 0:e.state)!==s.g32.AGENT_STATE_RUNNING&&(null==e?void 0:e.state)!==s.g32.AGENT_STATE_PAUSING})).map(function(e){return e.every(Boolean)}):null},[n,t],{default:!1}),(0,iJ.A)(h,1e3)&&!i?{addDatabase:function(){n&&((0,ev.pI)({action:"create_database",sessionId:n.id}),n.appendEvent({kind:"message",message:c.ay,intent:s.qRv.AGENT}),p(!0))},clear:function(){return p(!0)}}:null),eC=(0,i6.jq)().inMessageSecrets.length>0;if(eA)return(0,a.Y)(H.S,{style:{padding:"0 8px"},children:(0,a.Y)(oN,{error:eA})});if(J){if("generating"===ew)return(0,a.Y)(i4,{startedAt:eY});else if("awaiting-approval"===ew)return(0,a.Y)(i5,{onStartBuilding:ey,onRevisePlan:eb})}var e_=!(null==el?void 0:el.paidAgent.isAuthorized)&&(null==el?void 0:el.paidAgent.code)===ea.JB.InsufficientBudget,ek=(null==em?void 0:em.$kind)==="authorizationFailed"&&em.code===s.HkE.INSUFFICIENT_BUDGET;if(e_||ek)return(0,a.Y)(os,{runAgent:function(){return eh(s.g32.AGENT_STATE_RUNNING)}});if(!ed&&er&&!(null==eu?void 0:eu.isUnderQuota))return(0,a.Y)(om,{});if(er&&ei)return(0,a.Y)(og.n,{aiName:c.g$});if(en)return(0,a.Y)(aS,{onNewSession:e.onNewSession});if(et)return(0,a.Y)(ov.c,{aiName:c.g$});var eD=!(null==el?void 0:el.paidAgent.isAuthorized)&&!(null==el?void 0:el.freeAgent.isAuthorized),eE=null;es||ed?eE="Loading...":eD&&(eE="You do not have access to this feature");var eR=void 0;eC?eR=(0,a.Y)(i7,{openSecrets:function(){return e.openPane({type:"envEditor"})}}):ex&&(eR=(0,a.Y)(aw,{onAddDatabase:ex.addDatabase,onSuggestionsToggle:ex.clear}));var eI=void 0;return ex?eI="Or continue working without a database":"revising"===ew&&(eI="Request a plan change"),(0,a.FD)(H.S,{clsx:ax().root,innerRef:Q,children:[J&&"revising"===ew?(0,a.Y)(H.S,{align:"start",pb:8,children:(0,a.Y)(Z.$n,{onClick:eS,text:"Back",colorway:"blurple",iconLeft:(0,a.Y)(aY.A,{}),size:"small"})}):null,(0,a.Y)(af,{placeholderText:eI,header:eR,inputRef:e.inputRef,sessionId:(null==(G=e.session)?void 0:G.id)||void 0,onSubmit:ee,isSubmitDisabled:null!==eE,submitDisabledReason:eE,debugButton:q&&e.session?(0,a.Y)(or.A,{sessionId:e.session.id,sessionType:s.dF3.AGENT_SESSION}):void 0,showVisualSelector:K,feedbackButton:e.feedbackButton,showQuickEditModeButton:$})]})}var a_={direction:"reverse",state:{show:!1,pendingRapidBuildFeedback:!1,sentMessages:new Set,acknowledgedMessages:new Set},map:function(e){if(e.pendingRapidBuildFeedback&&0===e.sentMessages.size)return!1;var n=!0,t=!1,r=void 0;try{for(var i,o=e.sentMessages[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value;if(!e.acknowledgedMessages.has(a))return!1}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}return e.show},reducer:function(e,n){var t=e.contents.contents;if((0,s.VFn)(t,"agentAskUserForActionRequest")||(0,s.VFn)(t,"messageEventContents")&&(n.sentMessages.add(e.id),n.pendingRapidBuildFeedback=!1,t.messageEventContents.content===c.ay))return n.show=!1,!1;if((0,s.VFn)(t,"agentTimelineEventContents")){if((0,s.VFn)(t.agentTimelineEventContents.toolData,"ask_secrets"))return n.show=!1,!1;if((0,s.VFn)(t.agentTimelineEventContents.toolData,"messageData")&&(n.pendingRapidBuildFeedback=!0),(0,s.VFn)(t.agentTimelineEventContents.toolData,"acknowledgeUserMessage")){var r=t.agentTimelineEventContents.toolData.acknowledgeUserMessage.eventIds,i=!0,o=!1,a=void 0;try{for(var l,u=r[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var d=l.value;n.acknowledgedMessages.add(d)}}catch(e){o=!0,a=e}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}}}if((0,s.VFn)(t,"databaseNudgeEventContents"))return n.show=!0,!1}},ak=t(64513),aD=t(29e3),aE=t(74192),aR=["Thinking","Reviewing your message","Considering options","Determining next steps"],aI=[aD.S.backgroundPulse(eE.LU.blurpleStronger,eE.LU.blurpleStrongest),{WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent","& > span > span":{backgroundColor:"transparent"}}],aF=(0,eR.x)({rateLimited:[eF.wp.minHeight(28),eF.wp.flex.growAndShrink(1)],rateLimitedContent:[eF.wp.flex.growAndShrink(1)],rateLimitedResetText:{"> span":[eF.wp.py(4)],span:[{display:"inline",lineHeight:1},eF.wp.flex.growAndShrink(1)]}});function aT(e){var n=e.inProgressEventSummary,t=e.onPause,r=e.hidePauseButton,i=(0,o._)((0,l.useState)(aR[0]),2),s=i[0],c=i[1];return(0,l.useEffect)(function(){if(n)return void c(aR[0]);var e=null;return!function n(){e=setTimeout(function(){c(function(e){var n=(aR.indexOf(e)+1)%aR.length;return aR[n]}),n()},5e3)}(),function(){e&&clearTimeout(e)}},[n]),(0,a.FD)(a.FK,{children:[(0,a.Y)(iQ.l,{loading:!0,size:16}),(0,a.Y)(H.S,{tag:"span",css:aI,style:{paddingLeft:6},children:n?(0,a.Y)(iR,{summary:n}):(0,a.FD)(B.EY,{multiline:!1,children:[s,""]})}),void 0!==r&&r?null:(0,a.Y)(Z.$n,{iconLeft:(0,a.Y)(aE.A,{}),size:"small",variant:"nofill",colorway:"blurple",text:"Pause",onClick:t})]})}function aP(e){var n=e.timeWhenReset;return(0,a.FD)(H.S,{css:aF.rateLimited,row:!0,gap:6,align:"center",children:[(0,a.Y)(tn.A,{}),(0,a.Y)(H.S,{css:aF.rateLimitedContent,children:(0,a.FD)(B.EY,{children:["You've hit the usage limit for"," ",(0,c.Nn)({variant:"casual",capitalizeFirstChar:!1}),"."," ",(0,a.FD)(B.EY,{css:aF.rateLimitedResetText,children:["Usage will reset"," ",(0,a.Y)(q.Dc,{date:n,dateFormat:"relative",live:!0}),"."," ",(0,a.FD)("a",{target:"_blank",href:ak.ik.AGENT,children:["Learn more"," "]})]})]})})]})}var aL=t(56757),aU=t(77964),aN=t(78506),aO=t.n(aN),aM=(0,eE.CK)("StatusBar.module.css",["--height","--pointer-events","--background-color"]);function aB(e){var n=e.children;return(0,a.Y)(B.EY,{multiline:!1,variant:"small",clsx:aO().text,color:"dimmer",children:n})}function aH(e){var n,t,r=e.session,o=e.onHeightChange,d=(0,c.dI)(),p=(0,u.J2)(d.status),h=(0,u.Rj)(function(){return r.reduce(aL.q,100)},[r]),m=(0,f.e)(),g=(0,u.Rj)(function(){return r.reduce(m?aW:az,1)},[r,m],{default:{summary:null,supportsPausing:!0}}),v=g.summary,w=g.supportsPausing,y=(0,c.C9)(),b=y.agentState,S=y.updateAgentState,Y=(0,u.J2)(b),A=null,x=eE.LU.interactiveBackground;if("error"===p)x=eE.LU.yellowDimmer,A=(0,a.FD)(a.FK,{children:[(0,a.Y)(nB.A,{size:12}),(0,a.Y)(aB,{children:"".concat((0,c.Nn)({capitalizeFirstChar:!0})," lost connection. Try refreshing the page.")})]});else if(null==Y||null==(n=Y.reason)?void 0:n.$kind){var C=Y.reason;switch(null==C?void 0:C.$kind){case"stepLimitExceeded":x=eE.LU.yellowDimmer,A=(0,a.FD)(a.FK,{children:[(0,a.Y)(nB.A,{size:12}),(0,a.FD)(aB,{children:["Reached maximum step limit (",C.maxSteps," steps)"]})]});break;case"rateLimited":x=eE.LU.yellowDimmer,A=(0,a.Y)(aP,{timeWhenReset:C.timeWhenReset});break;case"authorizationFailed":x=eE.LU.yellowDimmer,A=C.code===s.HkE.INSUFFICIENT_BUDGET?(0,a.FD)(a.FK,{children:[(0,a.Y)(nB.A,{size:12}),(0,a.Y)(aB,{children:"Budget exceeded"})]}):(0,a.FD)(a.FK,{children:[(0,a.Y)(nB.A,{size:12}),(0,a.Y)(aB,{children:C.message})]});break;case"error":x=eE.LU.yellowDimmer,A=(0,a.FD)(a.FK,{children:[(0,a.Y)(nB.A,{size:12}),(0,a.FD)(aB,{children:[(0,c.Nn)({capitalizeFirstChar:!0})," encountered an error."," "]}),(0,a.Y)(Z.$n,{text:"Try again",colorway:"yellow",variant:"nofill",size:"small",onClick:function(){S(s.g32.AGENT_STATE_RUNNING),(0,ev.pI)({action:"attempted_try_again",sessionId:r.id})}})]})}}else switch(null==Y?void 0:Y.state){case s.g32.AGENT_STATE_RUNNING:x=eE.LU.blurpleDimmest,A=(0,a.Y)(aT,{inProgressEventSummary:v,hidePauseButton:!w,onPause:function(){return S(s.g32.AGENT_STATE_PAUSED)}});break;case s.g32.AGENT_STATE_PAUSING:A=(0,a.Y)(B.EY,{clsx:aO().text,variant:"small",color:"dimmest",children:"Agent is pausing"});break;case s.g32.AGENT_STATE_UNKNOWN:case s.g32.AGENT_STATE_NOT_STARTED:case s.g32.AGENT_STATE_PAUSED:A=h?(0,a.Y)(aB,{children:"Agent is waiting for your response"}):(0,a.FD)(a.FK,{children:[(0,a.Y)(aB,{children:"Agent is paused"}),(0,a.Y)(Z.$n,{variant:"nofill",iconLeft:(0,a.Y)(aU.A,{}),size:"small",onClick:function(){return S(s.g32.AGENT_STATE_RUNNING)},text:"Resume"})]})}var _=28*!!A;return(0,l.useEffect)(function(){o(_)},[o,_]),(0,a.Y)(H.S,{clsx:aO().root,style:(t={},(0,i._)(t,aM.height,"28px"),(0,i._)(t,aM.pointerEvents,A?"auto":"none"),(0,i._)(t,aM.backgroundColor,x),t),children:(0,a.Y)(H.S,{clsx:aO().inner,children:A?(0,a.Y)(M.ui,{elevated:!0,clsx:aO().surface,row:!0,align:"center",children:A}):null})})}var az={direction:"reverse",state:{summary:null,supportsPausing:!0},reducer:function(e,n){return n.summary=e.state===s.qOk.IN_PROGRESS?(0,ec.m)(e):null,!1}},aW={direction:"reverse",state:{summary:null,supportsPausing:!0},reducer:function(e,n){return n.summary=e.state===s.qOk.IN_PROGRESS?(0,ec.m)(e):null,(0,s.TW7)(e,"agentPlanEventContents")&&e.state===s.qOk.IN_PROGRESS&&(n.summary="Generating plan",n.supportsPausing=!1),!1}},aG=t(39391),aV=t(3299),aj=t(25907),aZ=t(74442),aq=t(88091),aK=t.n(aq);function a$(e){var n,t,r,v,w,y,b,S,Y,A,x,C,_,k=e.session,D=e.onSessionCreated,E=e.readFile,R=e.openPane,I=e.inputRef,F=e.secrets,T=e.onPromptSuggestionClick,P=e.onNewSession,L=e.onSessionChange,U=e.showUserFeedbackButton,N=e.isAgentPresentationCentered,O=void 0!==N&&N,M=(n=(0,oX.A)(D),t=(0,c.NC)(),r=(0,t_.A)().fs,w=(v=(0,aj.Zo)()).toggleVisualEditor,y=v.element,b=v.screenshotBlob,S=(0,d._P)({type:"boolean",controlName:"flag-targeted-element-forces-quick-edit"}),Y=(0,u.HJ)(null),A=(0,u.HJ)(!1),{sendMessage:(0,l.useCallback)((x=(0,V._)(function(e){var i,o,a,l,c,u,d,p,f,h;return(0,j.YH)(this,function(m){switch(m.label){case 0:if(A.current)return[2];if(A.set(!0),i=k)return[3,2];return[4,t.sessions.create({sessionType:s.dF3.AGENT_SESSION})];case 1:if(!(o=m.sent()).ok)return Y.set(o),A.set(!1),[2];i=o.payload,n.current(i),m.label=2;case 2:if(a=e.message,l=(0,ew._)(e.attachments),!(b&&!(null==y?void 0:y.filePath)))return[3,7];m.label=3;case 3:if(m.trys.push([3,6,,7]),c=Date.now(),u="targeted_element_".concat(c,".png"),!(d=(0,aZ.ti)(b,u)))return[3,5];return[4,(0,aG.Zn)({parentPath:aV.Ls,files:d?[d]:[],fs:r,onError:function(e){throw e}})];case 4:m.sent(),l.push({path:"".concat(aV.Ls,"/").concat(u),mimeType:d.type,file:d,isLoading:!1}),m.label=5;case 5:return[3,7];case 6:return p=m.sent(),ey.Cp(p,{extra:{message:"[VisualSelector] Error processing screenshot",sessionId:i.id}}),[3,7];case 7:return f=l.map(function(e){return{path:e.path,mimeType:e.file.type}}),i.appendEvent({intent:s.qRv.AGENT,message:a,uploadedFiles:f,attachedUrls:e.attachedUrls,kind:"message",webviewTargetedElement:null!=y?y:void 0,quickEdit:null!=(h=e.quickEdit||S&&!!(null==y?void 0:y.filePath))&&h}),A.set(!1),(0,ev.pI)({action:"user_message_sent",messageText:e.message,sessionId:i.id}),y&&w(),[2]}})}),function(e){return x.apply(this,arguments)}),[k,n,t,w,y,b,A,Y,r,S]),error:Y,loading:A}),B=M.sendMessage,z=M.error,W=(0,p.A)().showError;(0,u.q3)(z,{next:function(e){e&&W("Something went wrong. Please try again.")}});var G=(0,l.useRef)(!0),Z=(0,l.useRef)(new Map),q=(0,o._)((0,l.useState)(0),2),K=q[0],$=q[1],J=g(null!=(C=null==k?void 0:k.id)?C:null),Q=void 0!==U&&U&&k?(0,a.Y)(h.M,{session:k}):void 0,X=(0,d._P)({controlName:"flag-midnight-blue-properties"}),ee=(0,l.useRef)("instant");(0,l.useEffect)(function(){ee.current="smooth"},[]);var en=(0,f.e)(),et=(0,c.Ik)(),er=(0,d._P)({controlName:"flag-back-to-the-future"});return(0,a.FD)(H.S,{clsx:aK().root,children:[k?(0,a.Y)(a.FK,{children:X?(0,a.Y)(iK,{session:k}):(0,a.Y)(eL.y,{padding:"8px 8px ".concat(36,"px 8px"),scrollCacheKey:null!=(_=k.id)?_:"new-session",scrollCache:Z.current,shouldAutoScrollRef:G,autoScrollBehavior:ee.current,buttonOffset:K,children:(0,a.Y)(ij,{onSessionChange:L,isReadOnly:J,session:k,readFile:E,openPane:R,secrets:F,isAgentPresentationCentered:O})})}):(0,a.Y)(H.S,{clsx:aK().emptyState,children:(0,a.Y)(m.T,{sessionType:s.dF3.AGENT_SESSION,onPromptSuggestionClick:T})}),(0,a.Y)(H.S,{row:!0,justify:"center",clsx:aK().footerRow,pb:er?8:void 0,children:(0,a.FD)(H.S,{clsx:[aK().footerContainer,(0,i._)({},aK().footerContainerLimitedWidth,O)],children:[!k||J||en&&null!==et&&"approved"!==et?null:(0,a.Y)(aH,{onHeightChange:$,session:k}),(0,a.Y)(aC,{onNewSession:P,inputRef:I,session:k,sendMessage:B,openPane:R,feedbackButton:Q})]})})]})}},93080:(e,n,t)=>{"use strict";t.d(n,{R:()=>I,y:()=>T});var r,i,o=t(83846),a=t(12694),l=t(88263),s=t(21462),c=t(37663),u=t(47630),d=t(93369),p=t(65104),f=t(54240),h=t(73984),m=t(71452),g=t(41392),v=t(19732),w=t(45263),y=t(64583),b=t(973),S=t(49045),Y=t(48521),A=t(36112),x=t(76126),C=t(10429),_=t(12053),k=t(37037),D=(0,S.v)(["scrollToBottomTransform","opacity","overflowX","overflowY","flexDirection","buttonPx","buttonTop","buttonLeft","buttonBottom","buttonBorderRadius","buttonHeight","buttonWidth","buttonRight","scrollBehavior","scrollSnapType","padding","firstChildMargin","scrollHeight","scrollWidth","scrollTop","scrollHeight","clientHeight","trackPointerEvents","trackOpacity","trackWidth","trackTranstionDelay","trackHeight","trackPointerEvents","thumbWidth","thumbHeight","thumbTransform","thumbUIWidth"]),E=D.cssVars,R=D.styleTokens,I={height:R.scrollHeight,width:R.scrollWidth},F=(0,y.x)({root:[Y.wp.position.relative,Y.wp.flex.growAndShrink(1)],scroll:[Y.wp.flex.growAndShrink(1),{padding:R.padding,overflowY:R.overflowY,overflowX:R.overflowX,flexDirection:R.flexDirection,scrollBehavior:R.scrollBehavior,scrollSnapType:R.scrollSnapType,"&.scrollbar-hidden::-webkit-scrollbar":{display:"none"},overflow:"scroll",scrollbarWidth:"none"}],content:[Y.wp.flex.grow(1),{margin:R.firstChildMargin,flexDirection:R.flexDirection}],button:[Y.wp.reset.button,b.b.filledAndOutlined,Y.wp.position.absolute,Y.wp.align.center,Y.wp.rowWithGap(4),Y.wp.shadow(1),Y.wp.justify.center,{paddingRight:R.buttonPx,paddingLeft:R.buttonPx,top:R.buttonTop,bottom:R.buttonBottom,right:R.buttonRight,left:R.buttonLeft,borderRadius:R.buttonBorderRadius,height:R.buttonHeight,width:R.buttonWidth,opacity:"var(".concat(E.opacity,", 0)"),transform:R.scrollToBottomTransform,transitionProperty:"transform, opacity",transitionDuration:"300ms",transitionTimingFunction:"cubic-bezier(.4,1.60,.70,.8)"}]});function T(e){var n,t=e.children,r=e.snappiness,i=e.ramp,h=e.scrollerRef,g=e.shouldAutoScrollRef,w=e.scrollCache,y=e.scrollCacheKey,b=e.isHorizontal,S=e.padding,Y=e.alignToEnd,D=e.hideScrollbar,R=e.autoScrollBehavior,I=e.buttonOffset,T=void 0===I?0:I,P=function(e){var n,t,r,i,o,l,f,h,m,g,w,y,b,S,Y,A,x,C,_,k,D,E,R=e.snappiness,I=e.ramp,F=e.shouldAutoScrollRef,T=e.scrollCache,P=e.scrollCacheKey,L=e.isHorizontal,U=e.autoScrollBehavior,N=(0,u.HJ)(!1),O=(0,a._)((0,s.useState)(null),2),M=O[0],B=O[1],H=(0,a._)((0,s.useState)(null),2),z=H[0],W=H[1],G=(0,a._)((0,s.useState)(null),2),V=G[0],j=G[1],Z=(0,d.A)(T),q=(t=(n={scrollEl:z,isHorizontal:L,showButton:N,shouldAutoScrollRef:F}).scrollEl,r=n.isHorizontal,i=n.showButton,o=n.shouldAutoScrollRef,l=(0,u.HJ)({scrollTop:0,scrollHeight:0,clientHeight:0,scrollLeft:0,scrollWidth:0,clientWidth:0}),f=(0,u.HJ)("idle"),h=(0,u.HJ)(!1),(0,s.useEffect)(function(){var e=function(){n&&clearTimeout(n),a||(a=!0,requestAnimationFrame(function(){if(a=!1,t){var e=t.scrollWidth,s=t.scrollLeft,c=t.clientWidth,u=t.scrollHeight,d=t.scrollTop,p=t.clientHeight;r?f.set(l.current.scrollLeft>=s?"backwards":"forwards"):f.set(l.current.scrollTop>=d?"backwards":"forwards"),l.set({scrollHeight:u,scrollTop:d,clientHeight:p,scrollWidth:e,scrollLeft:s,clientWidth:c});var m=r?e-(s+c):u-(d+p);h.set(m<=4),h.current&&!1===o.current&&(o.current=!0),n=setTimeout(function(){f.set("idle"),i.set(!h.current)},200)}}))};if(t){var n=null,a=!1;return e(),t.addEventListener("scroll",e),function(){t.removeEventListener("scroll",e),n&&clearTimeout(n)}}},[t,r,i,l,f,h,o]),{measurements:l,scrollDirection:f,isNearEnd:h}),K=q.measurements,$=q.scrollDirection,J=q.isNearEnd,Q=(m=(0,u.HJ)({width:0,height:0}),(0,s.useEffect)(function(){if(z){var e=null;return"undefined"!=typeof ResizeObserver&&(e=new ResizeObserver(function(e){var n=!0,t=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value;a.target===z&&m.set({width:Math.round(a.contentRect.width),height:Math.round(a.contentRect.height)})}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}})).observe(z),function(){null==e||e.disconnect()}}},[z,m]),{scrollSize:m}).scrollSize,X=(w=(g={snappiness:R,ramp:I,shouldAutoScrollRef:F,autoScrollBehavior:U,isHorizontal:L,anchorEl:M,scrollEl:z,contentEl:V}).snappiness,y=g.ramp,b=g.shouldAutoScrollRef,S=g.autoScrollBehavior,Y=g.isHorizontal,A=g.anchorEl,x=g.scrollEl,C=g.contentEl,k=(_=(0,a._)((0,s.useState)(!1),2))[0],D=_[1],E=(0,s.useRef)(S),(0,s.useEffect)(function(){if(A&&x&&C){var e=0,n=new c.F3(function(n,t){if(e+=n,!b.current)return e=0,D(!1),t();if(Y){var r,i=x.scrollLeft;r=Math.max(Math.min(A.getBoundingClientRect().left-x.getBoundingClientRect().left+i,x.scrollWidth-x.clientWidth),0)}else i=x.scrollTop,r=Math.max(Math.min(A.getBoundingClientRect().top-x.getBoundingClientRect().top+i,x.scrollHeight-x.clientHeight),0);if("instant"===E.current)return e=0,Y?x.scrollLeft=r:x.scrollTop=r,D(!1),t();var o=function(e,n,t,r,i,o){var a=n-e;if(1>=Math.abs(a))return n;var l=1;t<o&&(l=t/o);var s=1-Math.exp(-i*l*r),c=(1-s)*e+s*n;return .5>Math.abs(c-e)?e+.5*Math.sign(a):c}(i,r,e,n,w,y);if(Y?x.scrollLeft=o:x.scrollTop=o,o===r)return e=0,D(!1),t();D(!0)}),t=new ResizeObserver(function(){b.current&&n.start()});return t.observe(A),t.observe(x),t.observe(C),b.current&&n.start(),function(){n.stop(),t.disconnect(),D(!1)}}},[w,y,b,Y,A,x,C]),{autoScrolling:k}).autoScrolling;return(0,s.useEffect)(function(){if(M&&z)return X?void N.set(!1):(0,p.l)(M,function(){return N.set(!1),function(){N.set(!0)}},{root:z,rootMargin:"100px"})},[N,X,M,z]),(0,s.useEffect)(function(){if(M&&z){var e=Z.current,n=e.get(P);return n?z.scrollTo(L?n:0,L?0:n):(0,v.A)(M,{behavior:"instant"}),function(){e.set(P,z.scrollTop)}}},[M,z,Z,P,L]),(0,s.useEffect)(function(){if(z)return z.addEventListener("wheel",e),z.addEventListener("pointerdown",n),z.addEventListener("pointerup",t),function(){z.removeEventListener("wheel",e),z.removeEventListener("pointerdown",n),z.removeEventListener("pointerup",t)};function e(e){if((L?e.deltaX:e.deltaY)<0){F.current=!1;return}}function n(){F.current=!1}function t(){J.current&&(F.current=!0)}},[z,F,L,J]),{showButton:N,anchorRef:B,scrollRef:W,scrollEl:z,contentRef:j,scrollToLatest:function(){M&&(0,v.A)(M,{behavior:"smooth"})},scrollSize:Q,measurements:K,scrollDirection:$,autoScrolling:X}}({snappiness:void 0===r?16:r,ramp:void 0===i?1:i,shouldAutoScrollRef:g,scrollCache:w,scrollCacheKey:y,isHorizontal:b,autoScrollBehavior:void 0===R?"instant":R}),U=P.showButton,N=P.anchorRef,O=P.scrollRef,M=P.contentRef,B=P.scrollToLatest,H=P.scrollSize,z=P.measurements,W=P.scrollEl,G=P.scrollDirection,V=P.autoScrolling,j=(0,s.useRef)(null),Z=(0,s.useRef)(null);(0,m.d)(Z,H,function(e){var n;return n={},(0,o._)(n,E.scrollHeight,e.height+"px"),(0,o._)(n,E.scrollWidth,e.width+"px"),n}),(0,m.d)(j,U,function(e){var n;return n={},(0,o._)(n,E.scrollToBottomTransform,b?"translate(".concat(16*!e-T,"px, -50%) scaleX(").concat(e?1:.25,")"):"translate(-50%, ".concat(16*!e-T,"px) scaleX(").concat(e?1:.25,")")),(0,o._)(n,E.opacity,e?"1":"0"),n},[b,T]);var q="0";Y&&(q=b?"0 0 0 auto":"auto 0 0 0");var K=(0,f.S)([O,h],{breadcrumb:"client/components/AutoScroller.tsx:732"});return(0,l.FD)(C.S,{innerRef:Z,css:F.root,style:(n={},(0,o._)(n,E.flexDirection,b?"row":"column"),(0,o._)(n,E.overflowY,b?"hidden":"auto"),(0,o._)(n,E.overflowX,b?"auto":"hidden"),(0,o._)(n,E.buttonBottom,b?"auto":"8px"),(0,o._)(n,E.buttonLeft,b?"auto":"50%"),(0,o._)(n,E.buttonRight,b?"4px":"auto"),(0,o._)(n,E.buttonTop,b?"50%":"auto"),(0,o._)(n,E.buttonHeight,b?"44px":"28px"),(0,o._)(n,E.buttonWidth,b?"44px":"auto"),(0,o._)(n,E.buttonBorderRadius,b?"44px":"16px"),(0,o._)(n,E.buttonPx,b?"12px":"6px"),(0,o._)(n,E.scrollBehavior,b&&!V?"smooth":"auto"),(0,o._)(n,E.scrollSnapType,b&&!V?"x mandatory":"none"),(0,o._)(n,E.padding,null!=S?S:"0"),(0,o._)(n,E.firstChildMargin,q),n),children:[(0,l.FD)(C.S,{css:F.scroll,innerRef:K,className:D?"scrollbar-hidden":void 0,children:[(0,l.Y)(C.S,{css:F.content,innerRef:M,style:b?{height:"100%"}:void 0,children:t}),(0,l.Y)(C.S,{innerRef:N}),W&&!D?(0,l.Y)(L,{shouldAutoScrollRef:g,scrollDirection:G,scrollEl:W,measurements:z}):null]}),(0,l.Y)(A.ui,{innerRef:j,css:F.button,elevated:!0,tag:"button",onClick:B,children:b?(0,l.Y)(k.A,{size:24}):(0,l.FD)(l.FK,{children:[(0,l.Y)(_.A,{size:12}),(0,l.Y)(x.EY,{variant:"small",children:"Scroll to latest"})]})})]})}var P=(0,y.x)({root:[(i={position:"absolute",width:R.trackWidth,height:R.trackHeight,opacity:R.trackOpacity,right:0,top:0,transition:"opacity 300ms",transitionDelay:R.trackTranstionDelay},(0,o._)(i,E.trackTranstionDelay,"600ms"),(0,o._)(i,E.thumbUIWidth,"40%"),(0,o._)(i,"pointerEvents",R.trackPointerEvents),(0,o._)(i,"&:hover, &:active",(r={},(0,o._)(r,E.trackTranstionDelay,"0ms"),(0,o._)(r,E.trackOpacity,"1 !important"),(0,o._)(r,E.trackPointerEvents,"auto !important"),(0,o._)(r,E.thumbUIWidth,"70%"),r)),i)],thumb:[Y.wp.position.absolute,Y.wp.py(4),Y.wp.px(2),Y.wp.align.end,{top:0,left:0,height:R.thumbHeight,transform:R.thumbTransform,width:R.thumbWidth,opacity:.5,"&:active":{opacity:.8}}],thumbUI:[{backgroundColor:w.LU.foregroundDimmest,transition:"width 200ms",width:R.thumbUIWidth},Y.wp.height("100%"),Y.wp.borderRadius(8)]});function L(e){var n=e.measurements,t=e.scrollDirection,r=e.scrollEl,i=e.shouldAutoScrollRef,a=(0,s.useRef)(null),c=(0,s.useRef)(!1),u=(0,s.useRef)(null),d=(0,s.useRef)(null),p=(0,s.useCallback)(function(){u.current&&clearTimeout(u.current),d.current&&clearTimeout(d.current)},[]),f=(0,s.useCallback)(function(){p(),c.current||(u.current=setTimeout(function(){(0,g.U)(a,(0,o._)({},E.trackOpacity,"0"))},600),d.current=setTimeout(function(){(0,g.U)(a,(0,o._)({},E.trackPointerEvents,"none"))},1200))},[p]);(0,s.useEffect)(function(){var e=function(e){var n;if("idle"===e)return void f();p(),(0,g.U)(a,(n={},(0,o._)(n,E.trackOpacity,"1"),(0,o._)(n,E.trackPointerEvents,"auto"),n))};e(t.current);var n=t.subscribe(e);return function(){n(),p()}},[t,f,p]),(0,m.d)(a,n,function(e){var n,t=e.clientHeight,r=e.clientHeight/e.scrollHeight*t,i=e.scrollHeight-e.clientHeight,a=i>0?e.scrollTop/i*(t-r):0,l=e.clientHeight>=e.scrollHeight?0:16;return n={},(0,o._)(n,E.trackWidth,l+"px"),(0,o._)(n,E.trackHeight,t+"px"),(0,o._)(n,E.thumbWidth,l+"px"),(0,o._)(n,E.thumbHeight,r+"px"),(0,o._)(n,E.thumbTransform,"translate(0, ".concat(a,"px)")),n});var v=(0,s.useCallback)(function(e){var t=0;i.current=!1;var o=!1;(0,h.j)(e,{start:function(){t=r.scrollTop},move:function(e){var i=e.delta;o||(o=!0,requestAnimationFrame(function(){o=!1;var e=n.current,a=e.clientHeight,l=e.scrollHeight,s=i.y/a;r.scrollTop=t+l*s}))}})},[r,n,i]),w=(0,s.useRef)(!1),y=(0,s.useCallback)(function(e){if(e.target===e.currentTarget){var t=e.currentTarget.getBoundingClientRect(),i=(e.clientY-t.y)/t.height;r.scrollTop=n.current.scrollHeight*i}},[r,n]),b=(0,s.useCallback)(function(e){e.deltaY<0&&(i.current=!1),w.current||(w.current=!0,requestAnimationFrame(function(){w.current=!1,r.scrollTop=r.scrollTop+e.deltaY}))},[r,i]);return(0,l.Y)(C.S,{innerRef:a,css:P.root,onMouseEnter:function(){c.current=!0,p()},onMouseLeave:function(){c.current=!1,f()},onWheel:b,onClick:y,children:(0,l.Y)(C.S,{css:P.thumb,onPointerDown:v,children:(0,l.Y)(C.S,{css:P.thumbUI})})})}},93309:(e,n,t)=>{"use strict";t.d(n,{A:()=>a});var r=t(88263),i=t(30746);function o(e){var n=e.children,t=e.config,o=(0,i.ob)(i.Ai);return t.id&&o(t),(0,r.Y)(r.FK,{children:n})}function a(e){var n=e.children,t=e.config,a=(0,i.PY)();return(0,r.Y)(i.uB.Provider,{value:a,children:t?(0,r.Y)(o,{config:t,children:n}):n})}},93436:(e,n,t)=>{"use strict";t.d(n,{A:()=>A});var r=t(29935),i=t(12694),o=t(82643),a=t(88263),l=t(56962),s=t(17844),c=t(12584),u=t(41114),d=t(51026);function p(){var e=(0,c._)(["\n  query AiSessionDebugInfoCurrentUser {\n    currentUser {\n      id\n      username\n    }\n  }\n"]);return p=function(){return e},e}var f={},h=(0,u.J1)(p()),m=t(54319),g=t(36640),v=t(31062),w=t(31569),y=t(45263),b=t(38292),S=t(49580),Y=t(78184);function A(e){var n,t,c,u,p,A=e.sessionId,x=e.sessionType,C=(0,v.A)(),_=(0,g.A)().showConfirm,k=(n=A,t=x,u=(0,v.A)(),p=(0,i._)((c=(0,s._)({},f,void 0),d._(h,c)),1)[0],(0,r._)(function(){var e,r,i,a,l,s,c,d;return(0,o.YH)(this,function(o){switch(o.label){case 0:return[4,p()];case 1:if(i=null==(r=o.sent())||null==(e=r.data)?void 0:e.currentUser,!n||!i)return[2,""];return a=(0,m.Yd)(n,t),l=(0,m.nv)(u,n),s=(0,m.Ds)(n),[2,"\n User ID: ".concat(null!=(c=null==i?void 0:i.id)?c:"N/A","\n Username: ").concat(null!=(d=null==i?void 0:i.username)?d:"N/A","\n Repl ID: ").concat(null!=u?u:"N/A","\n Session ID: ").concat(null!=n?n:"N/A","\n \uD83D\uDD25 traceforge URL: ").concat(l,"\n LangSmith URL: ").concat(null!=a?a:"N/A","\n Temporal URL: ").concat(null!=s?s:"N/A","\n    ").trim()]}})}));return(0,a.Y)(S.in,{trigger:(0,a.Y)(b.K0,{alt:"[Staff] Debug tools",children:(0,a.Y)(Y.A,{color:y.LU.foregroundDimmer})}),children:(0,a.FD)(l.H9,{children:[(0,a.Y)(S.j,{text:"[Staff] Debug tools"}),(0,a.Y)(S.Dr,{label:"Copy debug info",onAction:(0,r._)(function(){var e;return(0,o.YH)(this,function(n){switch(n.label){case 0:return[4,k()];case 1:return e=n.sent(),(0,w.default)(e),_("Copied debug info to clipboard"),[2]}})})}),(0,a.Y)(S.Dr,{href:(0,m.nv)(C,A),label:"Go to \uD83D\uDD25 traceforge",target:"_blank"}),(0,a.Y)(S.Dr,{href:(0,m.Yd)(A,x),label:"Go to LangSmith",target:"_blank"}),(0,a.Y)(S.Dr,{href:(0,m.Ds)(A),label:"Go to Temporal",target:"_blank"})]})})}},93566:(e,n,t)=>{"use strict";t.d(n,{P:()=>i});var r=t(46989),i=function(e,n){var t=n.resourceUsageType,i=n.precision,o=n.truncateToMillions;return 0===e||void 0===e?"-":(0,r.h7)(e,{resourceUsageType:t,precision:i,skipUnits:!0,truncateToMillions:o})}},93591:(e,n,t)=>{"use strict";function r(e,n){return new Promise(function(t){var r=e.openChannel({service:"gcsfiles"},function(e){return e.channel.request({persistMirror:{path:n}}).then(function(e){e.ok,r(),t()}),function(e){e.willReconnect&&r()}})})}t.d(n,{S:()=>r})},93718:(e,n,t)=>{"use strict";t.d(n,{A:()=>Y});var r=t(12694),i=t(88263),o=t(21462),a=t(88888),l=t(31258),s=t(45015),c=t(45263),u=t(64583),d=t(48521),p=t(46603),f=t(77089),h=t(49150),m=t(54087),g=t(76126),v=t(10429),w=t(29064),y=t(69258),b=(0,u.x)({repls:[d.wp.maxHeight("60vh"),d.wp.overflow("auto"),{"& > div":[d.wp.py(8),{borderTop:"1px solid "+c.LU.outlineDimmest}],"& > div:last-of-type":{borderBottom:"1px solid "+c.LU.outlineDimmest}}],row:[d.wp.colWithGap(8)]}),S=function(e){var n,t=e.repl,l=e.onConfirmedChange,c=(0,r._)((0,o.useState)(""),2),u=c[0],d=c[1],p=(null==(n=t.hostingDeployment)?void 0:n.__typename)==="HostingDeployment"?t.hostingDeployment:null,h=(0,o.useRef)(!1),w=(null==p?void 0:p.replitAppSubdomain)?p.replitAppSubdomain:t.title;return(0,i.FD)(v.S,{gap:8,children:[(0,i.FD)(v.S,{row:!0,gap:8,align:"center",children:[(0,i.Y)(s.Ay,{size:24,iconUrl:t.iconUrl,alt:""}),(0,i.Y)(g.EY,{height:"singleLine",multiline:!1,children:t.title}),p?(0,i.Y)(a.y,{deployment:p}):null]},t.id),p?(0,i.FD)(i.FK,{children:[(0,i.Y)(m.N,{icon:(0,i.Y)(y.A,{}),colorway:"red",text:"This App has been deployed. If you delete this App, the associated\nproduction deployment will also be shut down and deleted. To\nproceed, please type: ".concat(w)}),(0,i.Y)(f.pd,{placeholder:"Type here",value:u,onChange:function(e){var n=e.currentTarget.value;d(n);var t=n.trim()===w;t!==h.current&&l(t),h.current=t}})]}):null]})};let Y=function(e){var n=e.selectedRepls,t=e.isOpen,a=e.onClose,s=e.onDelete,c=e.deleting,u=n.length,d=(0,l.A)("Repl",u),f=n.filter(function(e){var n;return(null==(n=e.hostingDeployment)?void 0:n.__typename)==="HostingDeployment"}).length,m=(0,l.A)("Deployment",f),y=f>0?" & ".concat(f>1?f+" ":""," ").concat(m):"",Y=(0,r._)((0,o.useState)(0),2),A=Y[0],x=Y[1];return(0,o.useEffect)(function(){t||x(0)},[t]),(0,i.Y)(h.a,{isOpen:t,onRequestClose:a,children:(0,i.FD)(v.S,{gap:16,children:[(0,i.FD)(g.Y9,{variant:"subheadBig",level:2,children:["Delete ",d,f>0?" & ".concat(m):"","?"]}),(0,i.Y)(g.EY,{color:"dimmer",children:"Are you sure? This cannot be undone. Some Apps may take a few minutes to finish deleting."}),(0,i.Y)(v.S,{css:b.repls,children:n.map(function(e){return(0,i.Y)(S,{css:b.row,repl:e,onConfirmedChange:function(e){return x(function(n){return n+(e?1:-1)})}},e.id)})}),(0,i.FD)(v.S,{row:!0,gap:12,justify:"end",children:[(0,i.Y)(p.$n,{text:"Cancel",onClick:a,disabled:c}),(0,i.Y)(p.$n,{iconLeft:(0,i.Y)(w.A,{}),onClick:s,disabled:c||A<f,text:"Yes, delete ".concat(u>1?u+" ":""," ").concat(d).concat(y),colorway:"negative"})]})]})})}},93759:(e,n,t)=>{"use strict";t.d(n,{L:()=>c,T:()=>u});var r=t(86005),i=t(94626),o=t(53231),a=t(44370),l=t(81738),s=(0,a.eU)(!1),c=new i.k(function(e){var n=e.analyticsSurface,t=e.shouldTrack,i=e.onPaste;return r.Lz.domEventHandlers({paste:function(){t&&(0,o.u4)(o.AZ.TEXT_PASTED,{surface:n}),null==i||i()}})});function u(e){var n=e.analyticsSurface,t=(0,l.h)(s),r=(0,l.ob)(s);return c.use({analyticsSurface:n,shouldTrack:!t,onPaste:function(){return r(!0)}})}},94009:(e,n,t)=>{"use strict";t.d(n,{K:()=>h,r:()=>m});var r=t(88263),i=t(45263),o=t(64583),a=t(29e3),l=t(48521),s=t(77089),c=t(76126),u=t(59172),d=t(10429),p=t(62362),f=(0,o.x)({self:[l.wp.colWithGap(8)],selfGrow:[l.wp.colWithGap(8),l.wp.flex.grow(1)],label:[l.wp.maxWidth("100%")],labelText:[l.wp.flex.growAndShrink(1),{textOverflow:"ellipsis"}],labelTextWarning:[l.wp.flex.growAndShrink(1),l.wp.color.orangeStrongest,{textOverflow:"ellipsis"}],header:[l.wp.display.flex,l.wp.flex.row,l.wp.justify.spaceBetween,l.wp.align.center],labelLoading:[a.S.foregroundPulse(),l.wp.width(200),l.wp.borderRadius(8)],inputLoading:[a.S.foregroundPulse(),l.wp.borderRadius(8)]}),h=function(e){var n=e.id,t=e.title,o=e.information,a=e.optional,l=e.detail,s=e.warning,h=e.actions,m=e.children,g=e.grow;return(0,r.FD)(d.S,{css:void 0!==g&&g?f.selfGrow:f.self,children:[(0,r.FD)(d.S,{css:f.header,children:[(0,r.FD)(d.S,{tag:"label",htmlFor:n,css:f.label,row:!0,gap:8,align:"center",children:[(0,r.Y)(c.EY,{color:"dimmer",multiline:!1,children:t}),(0,r.Y)(u.m_,{tooltip:o,children:(0,r.Y)(p.A,{color:i.LU.foregroundDimmest})}),void 0!==a&&a?(0,r.Y)(c.EY,{css:f.labelText,variant:"small",color:"dimmest",multiline:!1,children:"optional"}):null,l?(0,r.Y)(c.EY,{css:f.labelText,variant:"small",color:"dimmest",multiline:!1,children:l}):null,s?(0,r.Y)(c.EY,{css:f.labelTextWarning,variant:"small",multiline:!1,children:s}):null]}),h?(0,r.Y)(d.S,{row:!0,gap:4,children:h}):null]}),m]})},m=function(){return(0,r.FD)(d.S,{gap:8,children:[(0,r.Y)(d.S,{css:f.header,children:(0,r.Y)(d.S,{css:f.labelLoading,row:!0,gap:8,align:"center",children:(0,r.Y)(c.EY,{color:"dimmer",multiline:!1,children:"\xa0"})})}),(0,r.Y)(d.S,{css:f.inputLoading,children:(0,r.Y)(s.pd,{disabled:!0})})]})}},94077:(e,n,t)=>{"use strict";t.d(n,{E:()=>r,s:()=>i});var r=function(e){return e[e.AI=0]="AI",e[e.Template=1]="Template",e[e.GitHub=2]="GitHub",e}({}),i=function(e){return e.Visited="visited",e.LanguageChanged="language-changed",e.ImportStarted="import-started",e.ImportEnded="import-ended",e.ConfigDone="config-done",e}({})},94707:(e,n,t)=>{"use strict";t.d(n,{F4:()=>i,l0:()=>s});var r=t(86105);function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=[],i=function(e){return e.forEach(function(e){return e&&t.push("-g",e)})},l=[],c=[],u=!0,d=!1,p=void 0;try{for(var f,h=e[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var m=f.value,g=a(m);g.startsWith("**")?l.push(g):c.push(g)}}catch(e){d=!0,p=e}finally{try{u||null==h.return||h.return()}finally{if(d)throw p}}return c.length>0&&(i(["!*"]),new Set(c).forEach(function(e){i((function(e){var n=function(e){Array.isArray(i[e])||(i[e]=[]);var n,o=t[e],a=o.startsWith("{")&&o.endsWith("}")?s(o.substring(1,o.length-1),","):[o];(n=i[e]).push.apply(n,(0,r._)(a.map(function(n){var t=i[e-1];return t&&t.length>0?t.map(function(e){return"".concat(e,"/").concat(n)}):n}).flat(2)))},t=s(e,"/").filter(function(e){return e.length>0});"**"!==t[t.length-1]&&t.push("**");for(var i={},o=0;o<t.length;o++)n(o);return Object.values(i).flat(2)})(e).map(o))})),i(l),i(n.map(function(e){return"!".concat(o(a(e)))})),t}function o(e){return e.startsWith("**")||e.startsWith("/")?e:"/".concat(e)}function a(e){return e.replaceAll(/\*/g,function(e,n,t){return n>0&&("*"===t[n-1]||"\\"===t[n-1])||n<t.length-1&&"*"===t[n+1]?e:"**"})}var l=function(){var e={},n={},t=function(t,r){e[t]=r,n[r]=t};return t("{","}"),t("(",")"),t("[","]"),{hasKey:function(n){return n in e},getKey:function(n){return e[n]},hasValue:function(e){return e in n},getValue:function(e){return n[e]}}}();function s(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",";if(0===e.length)return[];var t=[],r=[],i="",o=!0,a=!1,s=void 0;try{for(var c,u=e[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var d=c.value;if(d===n){if(0===r.length){t.push(i),i="";continue}}else if(l.hasKey(d))r.push(d);else if(l.hasValue(d)&&r.pop()!==l.getValue(d))return[e];i+=d}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}return 0!==r.length?[e]:(i.length>0&&t.push(i),t)}},94779:(e,n,t)=>{"use strict";t.d(n,{S2:()=>G,YZ:()=>z});var r=t(17844),i=t(12694),o=t(88263),a=t(21462),l=t(44070),s=t(43177),c=t(79730),u=t(22761),d=t(69665),p=t(52017),f=t(62153),h=t(14893),m=t(64583),g=t(48521),v=t(77089),w=t(17070),y=t(16251),b=t(76126),S=t(10429),Y=(0,m.x)({root:[g.wp.rowWithGap(4),g.wp.align.center],input:[g.wp.flex.growAndShrink(1),g.wp.color.foregroundDefault],disabledInput:[g.wp.flex.growAndShrink(1),g.wp.borderRadius(4),g.wp.px(8),g.wp.py(4),g.wp.color.foregroundDefault,g.wp.backgroundColor.backgroundDefault,{opacity:.7}]});function A(e){switch(e.description){case"shell.exec":return(0,o.Y)(C,{disabled:e.disabled,onArgsBlur:e.onArgsBlur,type:e.type,handleChange:e.handleChange,required:e.required,value:e.value,icon:e.icon,showIcon:e.showIcon});case"workflow.run":return(0,o.Y)(x,{disabled:e.disabled,onArgsBlur:e.onArgsBlur,type:e.type,handleChange:e.handleChange,required:e.required,value:e.value,icon:e.icon,showIcon:e.showIcon});case"packager.installForLanguage":return(0,o.Y)(_,{disabled:e.disabled,onArgsBlur:e.onArgsBlur,type:e.type,handleChange:e.handleChange,required:e.required,value:e.value,icon:e.icon,showIcon:e.showIcon});case"packager.installForAll":return(0,o.Y)(_,{disabled:e.disabled,onArgsBlur:e.onArgsBlur,type:e.type,handleChange:e.handleChange,required:e.required,value:"all",icon:e.icon,showIcon:e.showIcon});case"workspace.openWebview":return(0,o.Y)(k,{disabled:e.disabled,onArgsBlur:e.onArgsBlur,type:e.type,handleChange:e.handleChange,required:e.required,value:e.value,icon:e.icon,showIcon:e.showIcon});default:return(0,o.Y)(o.FK,{})}}function x(e){var n=(0,h.mP)().filter(function(e){var n;return!(null==(n=e.metadata)?void 0:n.generated)}).map(function(e){return{name:e.name,id:e.name}});return(0,o.FD)(S.S,{css:Y.root,children:[e.showIcon?e.icon:null,(0,o.Y)(y.l,{css:Y.input,isDisabled:e.disabled,onBlur:e.onArgsBlur,"aria-label":"Select a Workflow",selectedKey:e.value,onSelectionChange:function(n){e.handleChange({type:"args",args:n})},items:n,children:function(e){return(0,o.Y)(w.nh,{label:e.name},e.id)}})]})}function C(e){return(0,o.FD)(S.S,{css:Y.root,children:[e.showIcon?e.icon:null,e.disabled?(0,o.Y)(b.EY,{css:Y.disabledInput,children:e.value}):(0,o.Y)(v.pd,{css:Y.input,disabled:e.disabled,onBlur:e.onArgsBlur,placeholder:"shell command to execute",onChange:function(n){var t=n.currentTarget.value;e.handleChange({type:"args",args:t})},required:e.required,value:e.value,type:e.type})]})}function _(e){var n=(0,f.J)().configs.map(function(e){return{id:e.language}});return n.push({id:"all"}),(0,o.FD)(S.S,{css:Y.root,children:[e.showIcon?e.icon:null,(0,o.Y)(y.l,{css:Y.input,isDisabled:e.disabled,onBlur:e.onArgsBlur,"aria-label":"Select a Language to install",selectedKey:e.value,onSelectionChange:function(n){"all"===n?e.handleChange({type:"task",task:"packager.installForAll"}):e.handleChange({type:"task",task:"packager.installForLanguage",args:n})},items:n,children:function(e){return(0,o.Y)(w.nh,{label:e.id},e.id)}})]})}function k(e){return(0,o.FD)(S.S,{css:Y.root,children:[e.showIcon?e.icon:null,(0,o.Y)(v.pd,{css:Y.input,disabled:e.disabled,onBlur:e.onArgsBlur,placeholder:"port number (ex: 3000)",onChange:function(n){var t=n.currentTarget.value;e.handleChange({type:"args",args:Number(t)})},required:e.required,value:e.value,type:e.type})]})}var D=(0,m.x)({taskSelect:[g.wp.flex.growAndShrink(1)]});function E(e){var n;return(0,o.Y)(y.l,{isDisabled:e.disabled,"aria-label":"Select a task",selectedKey:"packager.installForAll"===(n=e.selectedKey)?"packager.installForLanguage":n,onSelectionChange:function(n){var t=e.supportedTasks;if(!t.includes(n))throw Error("Invalid task name: ".concat(n," (expected one of ").concat(t,")"));e.handleChange({type:"task",task:n})},items:e.items,css:D.taskSelect,children:function(e){return(0,o.Y)(w.nh,{label:e.description,icon:e.icon},e.id)}})}var R=t(69938),I=t(38292),F=t(36112),T=t(62537),P=t(84686),L=t(75040),U=t(34640),N=t(29064),O=new Map(d.Jc.anyOf.map(function(e){return[e.properties.task.const,e]})),M=["packager.installForAll","packager.installForLanguage","shell.exec","workflow.run"],B={"shell.exec":{description:"Execute Shell Command",icon:(0,o.Y)(U.A,{})},"packager.installForLanguage":{description:"Install Packages",icon:(0,o.Y)(P.A,{})},"workflow.run":{description:"Run Workflow",icon:(0,o.Y)(L.A,{})}},H={TASK:"task"};function z(e){var n=(0,h.b7)(e),t=(0,h.AK)(),r=(0,h.vJ)(),i=(0,h.wS)();return n?(0,o.Y)(G,{disabled:e.disabled,format:e.format,lastTask:e.lastTask,taskIndex:e.taskIndex,initialConfig:n,onArgsBlur:i,onChange:function(n,t){null!==n&&r(e,n,{persist:"task"===t})},onReorder:e.onReorder,onRemove:function(){return t(e)},simplified:e.simplified}):(0,o.Y)(b.EY,{children:"Task not found"})}c.ZU.Object({type:c.ZU.Literal("task"),taskIndex:c.ZU.Number()});var W=(0,m.x)({root:[g.wp.borderRadius(4),g.wp.p(6),g.wp.rowWithGap(6)],dragIcon:[{cursor:"grab"}],wrapper:[g.wp.flex.growAndShrink(1),g.wp.colWithGap(4)],taskInputs:[g.wp.flex.growAndShrink(1),g.wp.colWithGap(4)],dropIndicator:[g.wp.height(4),g.wp.backgroundColor.blueDefault,g.wp.m(8),g.wp.borderRadius()]});function G(e){var n,t,c,d,f,h,m,g=(0,a.useRef)(null),v=(0,i._)((0,a.useState)((null==(n=e.initialConfig)?void 0:n.task)||null),2),w=v[0],y=v[1],b=(0,i._)((0,a.useState)(e.initialConfig&&"args"in e.initialConfig?e.initialConfig.args:null),2),Y=b[0],x=b[1],C=e.disabled?Object.entries(B).map(function(e){var n=(0,i._)(e,2),t=n[0],o=n[1];return(0,r._)({id:t},o)}):Object.entries(B).filter(function(e){var n=(0,i._)(e,2),t=n[0];return n[1],M.includes(t)}).map(function(e){var n=(0,i._)(e,2),t=n[0],o=n[1];return(0,r._)({id:t},o)}),_=w?function(e){var n,t=O.get(e);if(!t||!("args"in t.properties))return null;var r=null==(n=t.required)?void 0:n.includes("args");return{type:t.properties.args.type,required:r}}(w):null,k=(0,i._)((0,l.i)(function(){return{type:H.TASK,item:function(){return{type:"task",taskIndex:e.taskIndex}},collect:function(e){return{isDragging:!!e.isDragging()}},canDrag:function(){var e=document.activeElement;return!(e&&("INPUT"===e.tagName||"SELECT"===e.tagName))}}},[e]),2),D=k[0].isDragging,P=k[1],L=(0,i._)((0,s.H)(function(){return{accept:"task",drop:function(n){var t,r=n.taskIndex;null==(t=e.onReorder)||t.call(e,r,e.taskIndex)},collect:function(n){var t=n.getItem(),r=null==t?void 0:t.taskIndex,i=!!n.isOver()&&r!==e.taskIndex;return{isAbove:i&&r>e.taskIndex,isBelow:i&&r<e.taskIndex}}}},[e]),2),U=L[0],z=U.isAbove,G=U.isBelow,V=L[1];function j(n){var t,r,i,o="task"===n.type?{task:"task"===n.type?n.task:w,args:null!=(t=n.args)?t:void 0}:{task:w,args:n.args};y(o.task),x(o.args);var a=o.task?O.get(o.task):null;if(!a)return null;try{null==(r=e.onChange)||r.call(e,u.T(a,o),n.type)}catch(t){null==(i=e.onChange)||i.call(e,null,n.type)}}return e.disabled||P(V(g)),(0,o.FD)(o.FK,{children:[z?(0,o.Y)(R.a,{css:W.dropIndicator}):null,(0,o.Y)(F.ui,{elevated:!0,disabled:e.disabled,innerRef:g,style:{opacity:D?.5:1},css:W.root,children:(0,o.Y)(S.S,{css:W.wrapper,children:(0,o.FD)(S.S,{row:!0,gap:4,align:"start",justify:"space-between",children:[e.disabled?null:(0,o.Y)(S.S,{css:W.dragIcon,pt:6,children:(0,o.Y)(T.A,{})}),(0,o.FD)(S.S,{css:W.taskInputs,children:[e.simplified?null:(0,o.Y)(E,{disabled:e.disabled,handleChange:j,selectedKey:w,items:C,supportedTasks:M}),(0,o.Y)(A,{description:w,disabled:e.disabled,type:null==_?void 0:_.type,value:e.format?(0,p.ZM)(null!=(c=null==Y?void 0:Y.toString())?c:""):null!=(d=null==Y?void 0:Y.toString())?d:"",required:null!=(f=null==_?void 0:_.required)&&f,handleChange:j,onArgsBlur:e.onArgsBlur,showIcon:e.simplified,icon:w?null==(t=B[w])?void 0:t.icon:void 0})]}),e.disabled?null:(0,o.Y)(S.S,{row:!0,gap:8,children:(0,o.Y)(I.K0,{disabled:null!=(h=e.lastTask)&&h,alt:null!=(m=e.lastTask)&&m?"Workflow must have at least one task":"Remove task",onClick:e.onRemove,children:(0,o.Y)(N.A,{})})})]})})}),G?(0,o.Y)(R.a,{css:W.dropIndicator}):null]})}},95081:(e,n,t)=>{"use strict";t.d(n,{BI:()=>S,Or:()=>Y,Yc:()=>C,_j:()=>A,ou:()=>y});var r=t(17844),i=t(12584),o=t(41114),a=t(50175),l=t(86997),s=t(36767);function c(){var e=(0,i._)(["\n  fragment WorkspaceNeonDatabase on NeonDatabase {\n    id\n    databaseId\n    databaseName\n    projectId\n    connectionString\n    isFrozen\n    isEphemeral\n    scheduledFreezeTime\n    scheduledDeletionTime\n    quotaLogicalSizeBytes\n    minComputeUnits\n    maxComputeUnits\n    historyRetentionSeconds\n    timeCreated\n  }\n"]);return c=function(){return e},e}function u(){var e=(0,i._)(["\n  fragment NeonCurrentUser on CurrentUser {\n    id\n    ...UserPlanStateCurrentUser\n    isMemberOfAnyOrg\n  }\n  ","\n"]);return u=function(){return e},e}function d(){var e=(0,i._)(["\n  mutation CreateNeonDatabase($input: CreateNeonDatabaseInput!) {\n    createNeonDatabase(input: $input) {\n      __typename\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on CreateNeonDatabaseResult {\n        database {\n          id\n          ...WorkspaceNeonDatabase\n        }\n      }\n    }\n  }\n  ","\n"]);return d=function(){return e},e}function p(){var e=(0,i._)(["\n  mutation DeleteNeonDatabase($input: DeleteNeonDatabaseInput!) {\n    deleteNeonDatabase(input: $input) {\n      __typename\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on DeleteNeonDatabaseResult {\n        success\n      }\n    }\n  }\n"]);return p=function(){return e},e}function f(){var e=(0,i._)(["\n  query GetNeonDatabases($input: GetNeonDatabasesInput!) {\n    getNeonDatabases(input: $input) {\n      __typename\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on GetNeonDatabasesResult {\n        databases {\n          id\n          ...WorkspaceNeonDatabase\n        }\n      }\n    }\n    currentUser {\n      id\n      ...NeonCurrentUser\n    }\n  }\n  ","\n  ","\n"]);return f=function(){return e},e}function h(){var e=(0,i._)(["\n  mutation UnfreezeNeonDatabase($input: UnfreezeNeonDatabaseInput!) {\n    unfreezeNeonDatabase(input: $input) {\n      ... on UnfreezeNeonDatabaseResult {\n        success\n      }\n    }\n  }\n"]);return h=function(){return e},e}var m={},g=(0,o.J1)(c()),v=(0,o.J1)(u(),s.o),w=(0,o.J1)(d(),g);function y(e){var n=(0,r._)({},m,e);return a.n(w,n)}var b=(0,o.J1)(p());function S(e){var n=(0,r._)({},m,e);return a.n(b,n)}var Y=(0,o.J1)(f(),g,v);function A(e){var n=(0,r._)({},m,e);return l.I(Y,n)}var x=(0,o.J1)(h());function C(e){var n=(0,r._)({},m,e);return a.n(x,n)}},95131:(e,n,t)=>{"use strict";t.d(n,{_9:()=>p,t:()=>g});var r=t(17844),i=t(12584),o=t(41114),a=t(50175);function l(){var e=(0,i._)(["\n  fragment MultiplayerUser on User {\n    id\n    image\n    username\n    url\n  }\n"]);return l=function(){return e},e}function s(){var e=(0,i._)(["\n  fragment MultiplayerRepl on Repl {\n    id\n    collaborators {\n      user {\n        ...MultiplayerUser\n      }\n    }\n    multiplayerInvites {\n      email\n      type\n    }\n  }\n  ","\n"]);return s=function(){return e},e}function c(){var e=(0,i._)(["\n  fragment MultiplayerReplInvite on MultiplayerInvite {\n    email\n    repl {\n      ...MultiplayerRepl\n    }\n    invitePermissionType: type\n  }\n  ","\n"]);return c=function(){return e},e}function u(){var e=(0,i._)(["\n  mutation AddOrInviteReplMultiplayer(\n    $input: AddOrInviteReplMultiplayerInput!\n  ) {\n    addOrInviteReplMultiplayer(input: $input) {\n      __typename\n      ... on AddOrInviteReplMultiplayerOuput {\n        result {\n          ... on MultiplayerInvite {\n            ...MultiplayerReplInvite\n          }\n          ... on ReplPermission {\n            id\n            repl {\n              ...MultiplayerRepl\n            }\n            user {\n              ...MultiplayerUser\n            }\n            replPermissionType: type\n          }\n        }\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return u=function(){return e},e}var d={},p=(0,o.J1)(l()),f=(0,o.J1)(s(),p),h=(0,o.J1)(c(),f),m=(0,o.J1)(u(),h,f,p);function g(e){var n=(0,r._)({},d,e);return a.n(m,n)}},95288:(e,n,t)=>{"use strict";t.d(n,{A:()=>d});var r=t(21462),i=t(52340),o=t(5504),a=t(31062),l=t(45485),s=t(77958),c=t(34834),u="persistmirrored";function d(){var e=(0,l.g)(),n=(0,a.A)(),t=(0,o._P)({controlName:"flag-persist-mirror-html",default:!0,logFlagToAnalytics:!1}),d=(0,c.A)().container;(0,r.useEffect)(function(){if(!(!e||!t||(null!=(r=s.A.get(u,"array"))?r:[]).includes(n))){var r,o=d.openChannel({service:"gcsfiles",skip:function(e){return!e.repl.authorizations.editFileContents.isAuthorized}},function(e){return e.channel.request({persistMirror:{path:i.Dl}}).then(function(e){if(e.ok){var t,r;r=null!=(t=s.A.get(u,"array"))?t:[],s.A.set(u,r.concat(n)),o()}}),function(){}});return o}},[d,e,t,n])}},95794:(e,n,t)=>{"use strict";t.d(n,{E:()=>A});var r=t(29935),i=t(12694),o=t(82643),a=t(88263),l=t(21462),s=t(34626),c=t(53231),u=t(34834),d=t(64583),p=t(48521),f=t(14886),h=t(46603),m=t(49150),g=t(54087),v=t(36112),w=t(76126),y=t(10429),b=t(80762),S=t(69258),Y=(0,d.x)({brokenNixErrorWrapper:[p.wp.maxHeight("300px"),{overflow:"scroll"},p.wp.p(8)],accordionWrapper:[p.wp.borderRadius(4)],inlineButton:[{display:"inline-flex"}]});function A(e){var n=e.isOpen,t=e.setIsOpen,d=e.nixState,p=e.openFile,A=(0,u.A)(),x=A.git,C=A.fs,_=(0,i._)((0,l.useState)(!1),2),k=_[0],D=_[1],E=(0,i._)((0,l.useState)(null),2),R=E[0],I=E[1],F=(0,l.useCallback)((0,r._)(function(){var e,n,r,i,a,l,u;return(0,o.YH)(this,function(o){switch(o.label){case 0:return(0,c.u4)(c.AZ.NIX_IS_BROKEN_RECOVERY,{state:"Started"}),s.vF.info("Started Nix Broken State Recovery"),D(!0),x.forceRefresh(),[4,x.status()];case 1:if((e=o.sent()).error)return D(!1),I("git is not accessible"),(0,c.u4)(c.AZ.NIX_IS_BROKEN_RECOVERY,{state:"Failed",reason:"Git State Error"}),s.vF.error("Nix Broken State Recovery Failed due to Git",{gitStatusError:e.error}),[2];if(n=e.changes.find(function(e){return".replit"===e.path}),r=e.changes.find(function(e){return"replit.nix"===e.path}),!n)return[3,3];return[4,x.stageFiles({add:[".replit"]})];case 2:o.sent(),o.label=3;case 3:if(!r)return[3,5];return[4,x.stageFiles({add:["replit.nix"]})];case 4:o.sent(),o.label=5;case 5:if(!(n||r))return[3,7];return[4,x.commit({message:"Pre-Recovery checkpoint"})];case 6:o.sent(),o.label=7;case 7:return[4,x.log({path:".replit"})];case 8:var d;if((i=o.sent()).error)return D(!1),I("git log is not accessible"),(0,c.u4)(c.AZ.NIX_IS_BROKEN_RECOVERY,{state:"Failed",reason:"Git Log Error"}),s.vF.error("Nix Broken State Recovery Failed due to Git",{gitLogError:i.error}),[2];return a=(d=i.commits)[d.length-1],[4,x.getFileContents({path:".replit",revision:a.hash,convertToBase64:!1})];case 9:if((l=o.sent()).error)return D(!1),I("failed recovering file contents"),(0,c.u4)(c.AZ.NIX_IS_BROKEN_RECOVERY,{state:"Failed",reason:"Git File Contents Error"}),s.vF.error("Nix Broken State Recovery Failed due to Git",{gitFileContentError:l.error}),[2];return[4,C.writeFile(".replit",null!=(u=l.content)?u:"")];case 10:return o.sent(),[4,C.deleteFile("replit.nix")];case 11:return o.sent(),[4,x.stageFiles({add:[".replit"]})];case 12:return o.sent(),[4,x.stageFiles({add:["replit.nix"]})];case 13:return o.sent(),[4,x.commit({message:"Post-Recovery checkpoint"})];case 14:return o.sent(),x.forceRefresh(),D(!1),t(!1),(0,c.u4)(c.AZ.NIX_IS_BROKEN_RECOVERY,{state:"Succeeded"}),s.vF.info("Finished Nix Broken State Recovery"),[2]}})}),[x,C,t]);return(0,a.Y)(m.a,{isOpen:n,onRequestClose:function(){return t(!1)},children:(0,a.FD)(y.S,{gap:16,children:[(0,a.FD)(y.S,{gap:8,children:[(0,a.Y)(w.EY,{variant:"subheadDefault",children:"The nix environment failed to build"}),(0,a.FD)(w.EY,{children:["Check if your"," ",(0,a.Y)(h.$n,{css:Y.inlineButton,variant:"underlined",onClick:function(){p(".replit"),t(!1)},text:".replit"})," ","and"," ",(0,a.Y)(h.$n,{css:Y.inlineButton,variant:"underlined",onClick:function(){p("replit.nix"),t(!1)},text:"replit.nix"})," ","files are configured properly:"]})]}),(0,a.Y)(v.ui,{elevated:!0,css:Y.accordionWrapper,children:(0,a.Y)(f.A,{headerContent:(0,a.Y)(y.S,{p:4,children:"Error Message"}),children:"error"===d.status?(0,a.Y)(y.S,{css:Y.brokenNixErrorWrapper,children:(0,a.Y)(w.EY,{variant:"code",children:d.error})}):null})}),(0,a.Y)(w.EY,{children:"Optionally, we can back up the broken configuration files and recover the original ones:"}),(0,a.Y)(h.$n,{text:"Recover original configuration files",colorway:null!==R?"grey":"warning",onClick:F,isDisabled:k||null!==R,iconLeft:k?(0,a.Y)(b.A,{}):(0,a.Y)(S.A,{})}),R?(0,a.Y)(g.N,{colorway:"warning",text:(0,a.FD)(w.EY,{children:["Recovery failed: ",R]})}):null]})})}},95835:(e,n,t)=>{"use strict";t.d(n,{A:()=>a});var r=t(21462),i=t(69549),o=t(34834);function a(){var e=(0,o.A)().container;(0,r.useEffect)(function(){var n=function(){e.getConnectionState()===i.KN.CONNECTED&&e.focus()};return window.addEventListener("focus",n),function(){window.removeEventListener("focus",n)}},[e])}},96211:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(12694),i=t(86105),o=t(21462),a=t(34834);function l(){var e=(0,a.A)().secrets,n=(0,r._)((0,o.useState)(null),2),t=n[0],l=n[1],s=(0,o.useMemo)(function(){return!!t&&(0,i._)(t.values()).some(function(e){return!e})},[t]);return(0,o.useEffect)(function(){return e.watch(l)},[t,e]),s}},96291:(e,n,t)=>{"use strict";t.d(n,{a8:()=>r}),t(47946);var r=function(e){return e&&e.args?(e.args&&e.args.length>=3&&"sh"===e.args[0]&&"-c"===e.args[1]?e.args.slice(2):e.args).join(" "):""}},96700:(e,n,t)=>{"use strict";t.d(n,{Y:()=>d});var r=t(17844),i=t(93629),o=t(17459),a=t(88263),l=t(21462),s=t(46726),c=t(64583),u=t(48521),d=(0,l.forwardRef)(function(e,n){var t=e.children,l=(0,o._)(e,["children"]);return(0,a.Y)(s.Y,(0,i._)((0,r._)({},l),{ref:n,css:p.group,children:t}))}),p=(0,c.x)({group:[u.wp.display.flex,u.wp.flex.row,u.wp.gap(1),u.wp.align.stretch,{"> :not(:first-child)":{borderTopLeftRadius:0,borderBottomLeftRadius:0},"> :not(:last-child)":{borderTopRightRadius:0,borderBottomRightRadius:0}}]})},96996:(e,n,t)=>{"use strict";t.d(n,{m:()=>i});var r=t(1230);function i(e){var n=e.contents.contents;if((null==n?void 0:n.$kind)!=="agentTimelineEventContents")return null;var t=e.state===r.qOk.IN_PROGRESS,i=n.agentTimelineEventContents,o=i.toolName,a=i.toolData;if("screenshot_tool"===o)return"".concat(t?"Taking":"Took"," a screenshot");switch(null==a?void 0:a.$kind){case"deployData":return"Suggested deploying project";case"createPostgresqlDatabaseData":return"Created PostgreSQL database";case"sqlExecutionData":return"".concat(t?"Executing":"Executed"," SQL query `").concat(a.sqlExecutionData.command,"`");case"fileEditData":return"".concat(t?"Editing":"Edited"," `").concat(a.fileEditData.filePath,"`");case"createFileData":return"".concat(t?"Creating":"Created"," `").concat(a.createFileData.filePath,"`");case"readFileData":return"".concat(t?"Reading":"Opened"," `").concat(a.readFileData.filePath,"`");case"readDirData":return"".concat(t?"Reading":"Opened"," `").concat(a.readDirData.path,"` directory");case"shellExecutionData":return"".concat(t?"Executing":"Executed"," `").concat(a.shellExecutionData.command,"`");case"toolchainInstallData":return"".concat(t?"Adding":"Added"," support for ").concat(a.toolchainInstallData.modules.map(function(e){return"`".concat(e,"`")}).join(", "));case"packagerInstallData":var l=a.packagerInstallData.inputPackages;if(!t){if(0===l.length)return"Installed dependencies";return"Installed ".concat(l.map(function(e){return"`".concat(e,"`")}).join(", "))}if(0===l.length)return"Installing packages";if(0===l.length)return"Installing dependencies";return"Installing ".concat(l.map(function(e){return"`".concat(e,"`")}).join(", "),"");case"packagerUninstallData":var s=a.packagerUninstallData.inputPackages;return"Uninstalled ".concat(s.map(function(e){return"`".concat(e,"`")}).join(", "));case"systemDependencyInstallData":return"Installed ".concat(a.systemDependencyInstallData.deps.map(function(e){return"`".concat(e,"`")}).join(", "));case"systemDependencyUninstallData":return"Uninstalled ".concat(a.systemDependencyUninstallData.deps.join(", "));case"searchFileData":return"".concat(t?"Searching":"Searched",' "').concat(a.searchFileData.filePath,'" for "').concat(a.searchFileData.query,'"');case"searchFilesystemData":return"".concat(t?"Searching":"Searched",' for "').concat(a.searchFilesystemData.queryDescription,'"');case"screenshotData":return"".concat(t?"Taking":"Took"," a screenshot");case"agentPlanStepBegin":case"planProgressData":case"presentResultsToolData":case"deployConfigData":return null;case"workflowsStartToolData":return"Started `".concat(a.workflowsStartToolData.name,"`");case"workflowsRestartToolData":return"Restarted `".concat(a.workflowsRestartToolData.name,"`");case"workflowsStopToolData":return"Stopped `".concat(a.workflowsStopToolData.name,"`");case"workflowsSetRunConfigToolData":var c=a.workflowsSetRunConfigToolData,u=c.name,d=c.command;if(t||0===u.length||0===d.length)return"Configuring run";return"Configured `".concat(u,"` to run `").concat(d,"`");case"workflowsRemoveRunConfigToolData":return"Removed configuration for `".concat(a.workflowsRemoveRunConfigToolData.name,"`");case"blueprintsSetup":var p=[],f=!0,h=!1,m=void 0;try{for(var g,v=a.blueprintsSetup.blueprintData[Symbol.iterator]();!(f=(g=v.next()).done);f=!0){var w=g.value;""!==w.displayName.trim()&&p.push(w.displayName)}}catch(e){h=!0,m=e}finally{try{f||null==v.return||v.return()}finally{if(h)throw m}}if(0===p.length)return null;return"Integrating with ".concat(p.map(function(e){return"`".concat(e,"`")}).join(", "));case"webSearchData":return'Searched the web for "'.concat(a.webSearchData.query,'"');case"webPageVisitData":return'Visited "'.concat(a.webPageVisitData.url,'"');default:return t?"Working":null}}},97019:(e,n,t)=>{"use strict";t.d(n,{Z:()=>i,_:()=>o});var r=t(53231),i=function(e){(0,r.u4)(r.AZ.COURSE_ACTION,e)},o=function(e){(0,r.u4)(r.AZ.LESSON_ACTION,e)}},97168:(e,n,t)=>{"use strict";t.d(n,{n:()=>a,u:()=>o});var r=t(88263),i=t(79209);function o(){return(0,r.Y)(i.mL,{styles:[{body:{overscrollBehaviorX:"none"}}]})}function a(){return(0,r.Y)(i.mL,{styles:[{body:{overscrollBehaviorY:"none"}}]})}},97379:(e,n,t)=>{"use strict";t.d(n,{A:()=>k});var r=t(17844),i=t(93629),o=t(12694),a=t(88263),l=t(21462),s=t(39695),c=t(7576),u=t.n(c),d=t(87033),p=t(39101),f=t(36640),h=t(45263),m=t(64583),g=t(48521),v=t(96556),w=t(46603),y=t(77089),b=t(36112),S=t(76126),Y=t(10429),A=t(1841),x=t(18870),C=t(80762),_=(0,m.x)({form:[g.wp.align.start,g.wp.display.flex,g.wp.rowWithGap(8),g.wp.width("100%")],searchContainer:[g.wp.position.relative,g.wp.flex.growAndShrink(1)],dropdownMenu:[g.wp.borderRadius(8),g.wp.overflow("hidden"),g.wp.mt(2),g.wp.zIndex(2),g.wp.border({color:h.LU.outlineDimmer,width:1,style:"solid"}),g.wp.maxHeight(280),g.wp.overflowY("auto"),g.wp.scrollbar.thin,{scrollbarColor:h.LU.backgroundHigher+" "+h.LU.backgroundHighest,"&::-webkit-scrollbar-thumb":{backgroundColor:h.LU.backgroundHighest}}],result:[g.wp.p(8),g.wp.rowWithGap(8),g.wp.justify.spaceBetween,g.wp.align.center,g.wp.cursor.pointer],result_active:[g.wp.backgroundColor.accentPrimaryDimmer],loadingContainer:[g.wp.m(8),g.wp.rowWithGap(8),g.wp.align.center],emptyText:[g.wp.m(8)]});function k(e){var n=e.onSubmit,t=e.existingUsernames,c=e.isDisabled,m=e.onChange,g=e.placeholder,k=(0,o._)((0,l.useState)(""),2),D=k[0],E=k[1],R=(0,v.c)(),I=(0,p.A)(D.trim().replace(/^@/,""),250),F=(0,d.Mj)({skip:!I||u()(D),variables:{query:I,limit:6}}),T=F.data,P=F.loading,L=F.error,U=(0,f.A)().showError;(0,l.useEffect)(function(){L&&U(L.message)},[L,U]);var N=null==T?void 0:T.usernameSearch,O=function(e){E(e.currentTarget.value),null==m||m(e.currentTarget.value)},M=function(e){"Enter"===e.key&&D.match(/.+@.+/)&&(n(D),E(""),e.currentTarget.blur())};return(0,a.FD)("form",{onSubmit:function(e){e.preventDefault(),n(D),E("")},css:_.form,children:[(0,a.Y)(s.Ay,{onChange:function(e){e&&E(e.username)},itemToString:function(e){return(null==e?void 0:e.username)||""},initialHighlightedIndex:0,defaultHighlightedIndex:0,children:function(e){var n=e.getInputProps,o=e.getItemProps,l=e.getMenuProps,s=e.isOpen,c=e.highlightedIndex,u=e.getRootProps;return(0,a.FD)(Y.S,(0,i._)((0,r._)({css:_.searchContainer},u({refKey:"innerRef"})),{children:[(0,a.Y)(y.pd,(0,r._)({id:R("username-search")},n({ref:null,value:D,onChange:O,placeholder:null!=g?g:"Add people by username or email",autoComplete:"off",onKeyDown:M}))),s?(0,a.FD)(Y.S,{children:[N&&N.length?(0,a.Y)(b.ui,(0,i._)((0,r._)({elevated:!0,css:_.dropdownMenu,tag:"ul"},l({refKey:"innerRef"})),{children:N.map(function(e,n){return(0,a.FD)(Y.S,(0,i._)((0,r._)({tag:"li"},o({item:e,index:n})),{css:[_.result,n===c&&_.result_active],children:[(0,a.FD)(Y.S,{row:!0,gap:8,align:"center",children:[(0,a.Y)(A.A,{size:"m",url:e.image,username:e.username,fullName:e.fullName}),(0,a.Y)(S.EY,{multiline:!1,children:e.username})]}),t.includes(e.username)?(0,a.Y)(Y.S,{children:(0,a.Y)(x.A,{color:h.LU.accentPositiveStronger})}):null]}),n)})})):null,P?(0,a.Y)(b.ui,{elevated:!0,css:_.dropdownMenu,children:(0,a.FD)(Y.S,{css:_.loadingContainer,align:"center",children:[(0,a.Y)(C.A,{}),(0,a.Y)(S.EY,{color:"dimmer",multiline:!1,children:"Loading"})]})}):null,N&&0===N.length?(0,a.Y)(b.ui,{elevated:!0,css:_.dropdownMenu,children:(0,a.FD)(S.EY,{css:_.emptyText,color:"dimmer",multiline:!1,children:['No results found for "',D,'"']})}):null]}):null]}))}}),(0,a.Y)(Y.S,{children:(0,a.Y)(w.$n,{colorway:"primary",type:"submit",disabled:c||!D,text:"Invite"})})]})}},97574:(e,n,t)=>{"use strict";t.d(n,{A:()=>o});var r=t(12694),i=t(21462);function o(e,n){var t=(0,r._)((0,i.useState)(null),2),o=t[0],a=t[1];return(0,i.useEffect)(function(){var t=!1;return e.readFile(n).then(function(e){t||a(e)}),function(){t=!0}},[e,n]),o}},97587:e=>{e.exports={root:"AgentDesignPhaseEmptyState_root__w5z_h"}},97681:(e,n,t)=>{"use strict";t.d(n,{p:()=>A});var r=t(83846),i=t(17844),o=t(88263),a=t(27469),l=t(45263),s=t(64583),c=t(49045),u=t(48521),d=t(46603),p=t(38292),f=t(76126),h=t(10429),m=t(18870),g=t(6088),v=t(84331),w=t(83650),y=(0,c.v)(["padding","backgroundColor","borderColor"]),b=y.cssVars,S=y.styleTokens,Y=(0,s.x)({root:[u.wp.position.relative,u.wp.border({width:1,style:"solid",color:S.borderColor}),u.wp.pb(12),u.wp.borderRadius(),u.wp.shadow(2),u.wp.flex.column,{padding:S.padding,backgroundColor:S.backgroundColor,gap:S.padding}],closeIconButton:[u.wp.position.absolute,u.wp.top(S.padding),u.wp.right(S.padding)],dot:[u.wp.borderRadius("full"),u.wp.width(l.LU.space8),u.wp.height(l.LU.space8)]});function A(e){var n,t=e.title,a=e.subtitle,s=e.icon,c=e.content,u=e.containerStyle,y=e.colorway,S=void 0===y?"primary":y,A=e.totalSteps,C=void 0===A?1:A,_=e.currentStepIndex,k=void 0===_?0:_,D=e.onDismiss,E=e.onCurrentStepChange,R=e.cypressCloseData,I=e.compact,F=e.hideCloseButton,T=void 0!==F&&F,P=e.hideNavigation,L=e.doneText,U=!1===S?void 0:S,N=k>=C-1;return(0,o.FD)(h.S,{css:Y.root,style:(0,i._)((n={},(0,r._)(n,b.padding,void 0===I||I?l.LU.space8:l.LU.space16),(0,r._)(n,b.backgroundColor,U?l.ky[U].dimmest:l.LU.backgroundDefault),(0,r._)(n,b.borderColor,U?l.ky[U].dimmer:l.LU.backgroundHighest),(0,r._)(n,"paddingRight",t||T?void 0:l.LU.space32),n),u),children:[T?null:(0,o.Y)(p.K0,{alt:"Close",colorway:U,css:Y.closeIconButton,onClick:D,dataCy:R,children:(0,o.Y)(w.A,{})}),t?(0,o.FD)(h.S,{row:!0,gap:8,align:"center",children:[s?(0,o.Y)(s,{}):null,(0,o.FD)(h.S,{row:!0,gap:8,align:"end",children:[(0,o.Y)(f.EY,{variant:"subheadDefault",multiline:!1,children:t}),a?(0,o.Y)(f.EY,{variant:"text",color:"dimmest",multiline:!1,css:{transform:"translateY(1.5px)"},children:a}):null]})]}):null,(0,o.Y)(h.S,{children:"function"==typeof c?(0,o.Y)(c,{}):(0,o.Y)(f.EY,{children:c})}),C>1&&E&&!(void 0!==P&&P)?(0,o.FD)(h.S,{row:!0,align:"center",justify:"space-between",children:[(0,o.Y)(d.$n,{css:{visibility:k<=0?"hidden":void 0},colorway:U,text:"Back",iconLeft:(0,o.Y)(g.A,{}),onClick:function(){return E(k-1)}}),(0,o.Y)(x,{colorway:U,total:C,current:k}),(0,o.Y)(d.$n,{"data-autofocus":!0,colorway:N?"primary":U,text:N?void 0===L?"Done":L:"Next",iconLeft:N?(0,o.Y)(m.A,{}):(0,o.Y)(v.A,{}),onClick:function(){return N?D():E(k+1)}})]}):null]})}function x(e){var n=e.total,t=e.current,r=e.colorway;return(0,o.FD)(h.S,{children:[(0,o.Y)(a.s,{children:(0,o.Y)("progress",{value:t+1,max:n,"aria-label":"Step"})}),(0,o.Y)(h.S,{"aria-hidden":!0,row:!0,gap:8,children:Array(n).fill(0).map(function(e,n){return(0,o.Y)(h.S,{style:{backgroundColor:n===t?r?l.ky[r].stronger:l.LU.foregroundDimmest:r?l.ky[r].dimmer:l.LU.outlineDimmest},css:Y.dot},n)})})]})}},97695:(e,n,t)=>{"use strict";t.d(n,{u:()=>l});var r=t(88263),i=t(21462),o=t(33392),a=t(36164);function l(e,n,t){var l=(0,o.K)(e,t,n),s=l.openFeedbackModal,c=l.FeedbackModal,u=(0,i.useMemo)(function(){return e?{data:{type:"action",icon:(0,r.Y)(a.A,{}),label:"Share feedback",run:s}}:null},[s,e]),d=(0,i.useMemo)(function(){return{name:"Feedback",commands:u?[u]:[]}},[u]);return{FeedbackModal:c,feedbackCommand:u,feedbackCommandGroup:d}}},97714:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(88263),a=t(71117);function l(e){return(0,o.FD)(a.Ay,(0,i._)((0,r._)({},e),{children:[(0,o.Y)("path",{fillRule:"evenodd",d:"M12 8.25a3.75 3.75 0 1 0 0 7.5 3.75 3.75 0 0 0 0-7.5ZM9.75 12a2.25 2.25 0 1 1 4.5 0 2.25 2.25 0 0 1-4.5 0Z",clipRule:"evenodd"}),(0,o.Y)("path",{fillRule:"evenodd",d:"M12 1.5a.75.75 0 0 1 .75.75v.78a9.002 9.002 0 0 1 8.22 8.22h.78a.75.75 0 0 1 0 1.5h-.78a9.002 9.002 0 0 1-8.22 8.22v.78a.75.75 0 0 1-1.5 0v-.78a9.002 9.002 0 0 1-8.22-8.22h-.78a.75.75 0 0 1 0-1.5h.78a9.002 9.002 0 0 1 8.22-8.22v-.78A.75.75 0 0 1 12 1.5Zm.75 3.037a7.503 7.503 0 0 1 6.713 6.713h-.713a.75.75 0 0 0 0 1.5h.713a7.503 7.503 0 0 1-6.713 6.713v-.713a.75.75 0 0 0-1.5 0v.713a7.503 7.503 0 0 1-6.713-6.713h.713a.75.75 0 0 0 0-1.5h-.713a7.502 7.502 0 0 1 6.713-6.713v.713a.75.75 0 0 0 1.5 0v-.713Z",clipRule:"evenodd"})]}))}},97860:(e,n,t)=>{"use strict";t.d(n,{W:()=>i});var r=t(88766);function i(){return(0,r.e)()?"visualPlanner":"default"}},97968:(e,n,t)=>{"use strict";t.d(n,{A:()=>m});var r=t(12694),i=t(88263),o=t(21462),a=t(18402),l=t(99323),s=t(36018),c=t(6156),u=t(79209),d=t(45263),p=t(48521),f=t(10429),h=(0,u.AH)(p.wp.dragRegion);function m(){var e,n,t,u,p,m,g,v,w=(0,c.vm)(),y=(0,s.A)(),b=(e=(0,s.A)(),t=(n=(0,r._)((0,o.useState)(!1),2))[0],u=n[1],(0,o.useEffect)(function(){if(e)return u(document.hasFocus()),a.M.onFocusChanged(u)},[e]),t),S=(p=(0,s.A)(),g=(m=(0,r._)((0,o.useState)(!1),2))[0],v=m[1],(0,o.useEffect)(function(){if(p)return a.M.onFullScreenChanged(v)},[p]),g);return w&&y&&!S?(0,i.Y)(f.S,{css:h,children:(0,i.Y)("svg",{width:l.Cp,height:l.GB-16,children:b?null:(0,i.FD)(i.FK,{children:[(0,i.Y)("circle",{cx:19,cy:16,r:5,fill:"none",stroke:d.LU.outlineDefault,strokeWidth:1}),(0,i.Y)("circle",{cx:39,cy:16,r:5,fill:"none",stroke:d.LU.outlineDefault,strokeWidth:1}),(0,i.Y)("circle",{cx:59,cy:16,r:5,fill:"none",stroke:d.LU.outlineDefault,strokeWidth:1})]})})}):null}},98009:(e,n,t)=>{"use strict";t.d(n,{A:()=>a});var r=t(12694),i=t(21462),o=t(34834);function a(){var e=(0,o.A)().presence,n=(0,r._)((0,i.useState)(e.getFollowedUser()),2),t=n[0],a=n[1];return(0,i.useEffect)(function(){return a(e.getFollowedUser()),e.onFollowedUserChanged(a)},[e]),t}},98305:(e,n,t)=>{"use strict";t.d(n,{A:()=>c,E:()=>u});var r=t(88263),i=t(45263),o=t(48521),a=t(76126),l=t(10429),s=t(1998);let c=function(e){var n=e.textVariant,t=e.showImage;return(0,r.FD)(l.S,{css:[o.wp.center,o.wp.textAlign.center,o.wp.px(16),o.wp.colWithGap(8),o.wp.flex.growAndShrink(1)],children:[(0,r.Y)(u,{textVariant:n}),t?(0,r.Y)(s.A,{src:"/public/images/ghostwriter/orb.png",css:[{userSelect:"none",mixBlendMode:"screen",filter:"brightness(110%) saturate(1.2)",maskImage:"linear-gradient(".concat(i.LU.backgroundRoot,", transparent)")}],width:200,height:200,objectFit:"contain","aria-hidden":"true",alt:"",draggable:!1}):null]})};function u(e){var n=e.textVariant;return(0,r.FD)(a.EY,{variant:n,children:["AI Chat is currently unavailable. For more information, visit"," ",(0,r.Y)("a",{href:"https://status.replit.com",target:"_blank",children:"our status page."})]})}},98363:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(88263),a=t(71117);function l(e){return(0,o.FD)(a.Ay,(0,i._)((0,r._)({},e),{children:[(0,o.Y)("path",{fillRule:"evenodd",d:"M18 2.5H6A1.5 1.5 0 0 0 4.5 4v16A1.5 1.5 0 0 0 6 21.5h12a1.5 1.5 0 0 0 1.5-1.5V4A1.5 1.5 0 0 0 18 2.5ZM6 1a3 3 0 0 0-3 3v16a3 3 0 0 0 3 3h12a3 3 0 0 0 3-3V4a3 3 0 0 0-3-3H6Z",clipRule:"evenodd"}),(0,o.Y)("path",{fillRule:"evenodd",d:"M16 17.25c0 .414-.316.75-.706.75H8.706c-.39 0-.706-.336-.706-.75s.316-.75.706-.75h6.588c.39 0 .706.336.706.75ZM16 9.5c0 .414-.316.75-.706.75H8.706c-.39 0-.706-.336-.706-.75s.316-.75.706-.75h6.588c.39 0 .706.336.706.75Z",clipRule:"evenodd"}),(0,o.Y)("path",{fillRule:"evenodd",d:"M12 13.5c-.414 0-.75-.316-.75-.706V6.206c0-.39.336-.706.75-.706s.75.316.75.706v6.588c0 .39-.336.706-.75.706Z",clipRule:"evenodd"})]}))}},98468:(e,n,t)=>{"use strict";t.d(n,{X:()=>q});var r,i=t(49069),o=t(62019),a=t(37743),l=t(48122),s=t(1833),c=t(23099),u=t.n(c),d=t(86005),p=t(44725),f=t(18254),h=t(24634),m=t(93113),g=i.sj.define({combine:function(e){var n;return null!=(n=e.filter(Boolean)[0])?n:null}}),v=i.sU.define({create:function(){return{diff:null,tree:f.PH.empty}},update:function(e,n){var t,r,i=n.state.facet(g),o=null==(t=n.state.facet(p.BH))?void 0:t.parser;if(!i)return null===e.diff&&e.tree===f.PH.empty?e:{diff:null,tree:f.PH.empty};var a=e.diff,l=e.tree;return(a&&a.a.eq(i)?n.docChanged&&(a=a.updateB(n.newDoc,n.changes)):(a=h.o.create(i,n.newDoc),l=f.PH.empty),(null==(r=n.startState.facet(p.BH))?void 0:r.parser)!==o&&(l=f.PH.empty),o&&l.length!==a.a.length)?(l=(0,m.B)({parser:o,text:a.a,maxTime:16,base:l}),{diff:a,tree:l}):e.diff===a&&e.tree===l?e:{diff:a,tree:l}}}),w=t(83846),y=t(45263),b="cm-inline-diff-line-deletion-base",S="cm-inline-diff-line-deletion",Y="cm-inline-diff-text-deletion",A="cm-inline-diff-line-insertion-base",x="cm-inline-diff-line-insertion",C="cm-inline-diff-text-insertion",_="rgba(180, 0, 0, 0.075)",k="rgba(180, 0, 0, 0.125)",D="rgba(0, 180, 0, 0.075)",E="rgba(0, 180, 0, 0.125)",R="cm-inline-diff-marker",I="cm-inline-diff-marker-left",F="cm-inline-diff-marker-right";function T(e,n){var t="linear-gradient(to right, ".concat(e,", ").concat(e,")");return n&&(t+=", linear-gradient(to right, ".concat(n,", ").concat(n,")")),t}var P=d.Lz.theme((r={},(0,w._)(r,".".concat(b,", .").concat(S),{cursor:"text","&.cm-line ::selection":{backgroundColor:"".concat(y.LU.accentPrimaryDimmest," !important")}}),(0,w._)(r,".".concat(b),{background:T(_)}),(0,w._)(r,".".concat(S),{background:T(_,k)}),(0,w._)(r,".".concat(A),{background:T(D)}),(0,w._)(r,".".concat(x),{background:T(D,E)}),(0,w._)(r,".".concat(C),{display:"inline-block",background:E,"&:first-of-type":{backgroundClip:"padding-box",borderLeft:"3px solid ".concat(E),paddingLeft:"3px",marginLeft:"-6px"}}),(0,w._)(r,".".concat(Y),{display:"inline-block",background:k,"&:first-of-type":{backgroundClip:"padding-box",borderLeft:"3px solid ".concat(k),paddingLeft:"3px",marginLeft:"-6px"}}),(0,w._)(r,".".concat(R),{display:"flex",width:"100%",justifyContent:"space-between"}),(0,w._)(r,".".concat(I),{width:"calc(50% - 1ch)",textAlign:"right"}),(0,w._)(r,".".concat(F),{width:"50%",textAlign:"right"}),r)),L=t(14208),U=t(41451),N=function(e){function n(e,t,r){var i;return(0,a._)(this,n),(i=(0,o._)(this,n)).line=e,i.index=t,i.changed=r,i}(0,s._)(n,e);var t=n.prototype;return t.toDOM=function(){var e=this,n=document.createElement("div");if(n.className=this.changed?"cm-line ".concat(b):"cm-line ".concat(S),!this.changed||!this.changed.length){var t=!0,r=!1,i=void 0;try{for(var o,a=this.line[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value,s=l.text,c=l.tags,u=document.createElement("span");u.textContent=s||"\xa0",u.className=null!=c?c:"",n.appendChild(u)}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n}for(var d=0,p=0,f=null,h=null,m=function(n,t){if(!f)throw Error("range is null");var r=e.line[p],i=r.text,o=r.tags,a=i.slice(d-f.from,t-f.from),l=document.createElement("span");l.textContent=a||"\xa0",l.className=null!=o?o:"",n.appendChild(l),d+=a.length};p<this.line.length;){if(!f){var g=this.line[p].text;f={from:d,to:d+g.length}}if(!h){var v=!0,w=!1,y=void 0;try{for(var A,x=this.changed[Symbol.iterator]();!(v=(A=x.next()).done);v=!0){var C=A.value;if(!(C.from>=f.to)&&!(C.to<=d)){var _=document.createElement("span");_.className=Y,h={from:C.from,to:C.to,dom:_},d<h.from&&m(n,h.from),n.appendChild(_);break}}}catch(e){w=!0,y=e}finally{try{v||null==x.return||x.return()}finally{if(w)throw y}}}h?(d<h.to&&m(h.dom,h.to),d>=h.to&&(h=null)):m(n,f.to),d>=f.to&&(f=null,p++)}return n},t.eq=function(e){var t,r;return e instanceof n&&this.index===e.index&&this.line.length===e.line.length&&(null==(t=this.changed)?void 0:t.length)===(null==(r=e.changed)?void 0:r.length)&&u()(this.line,e.line)&&u()(this.changed,e.changed)},t.ignoreEvent=function(e){return e.stopImmediatePropagation(),!0},(0,l._)(n,[{key:"estimatedHeight",get:function(){return 21}}]),n}(d.xO),O=d.NZ.line({class:A}),M=d.NZ.line({class:x}),B=d.NZ.mark({class:C}),H=d.Lz.decorations.compute([v],function(e){var n=function(e,n){if(r.getLineChangeType(e.number,L.mn.B)===L.DE.COVERED)o.push(M.range(e.from));else{o.push(O.range(e.from));var t=!0,i=!1,a=void 0;try{for(var l,s=(0,L.QG)(e,n,L.mn.B,!1)[Symbol.iterator]();!(t=(l=s.next()).done);t=!0){var c=l.value;o.push(B.range(c.from,c.to))}}catch(e){i=!0,a=e}finally{try{t||null==s.return||s.return()}finally{if(i)throw a}}}},t=e.field(v,!1);if(!t||!t.diff)return d.NZ.none;var r=t.diff,i=t.tree,o=[],a=!0,l=!1,s=void 0;try{for(var c,u=r.chunks[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var p=c.value;if(p.fromB!==p.endB)for(var f=r.b.lineAt(p.fromB),h=r.b.lineAt(p.endB),m=f.number;m<=h.number;m++)n(r.b.line(m),p);else p.fromA===p.endA&&n(r.b.lineAt(p.fromB),p);if(p.fromA!==p.toA)for(var g=r.a.lineAt(p.fromA),w=(0,U.A7)(i,r.a,e,p.fromA,p.endA),y=0;y<w.length;y++){var b=w[y],S=r.a.line(g.number+y),Y=r.getLineChangeType(S.number,L.mn.A)===L.DE.COVERED?null:(0,L.QG)(S,p,L.mn.A,!0),A=d.NZ.widget({widget:new N(b,S.number,Y),block:!0,side:-(w.length-y)});o.push(A.range(p.fromB))}}}catch(e){l=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw s}}return d.NZ.set(o,!0)}),z=t(61559),W=(0,d.cU)({class:z.n1,renderEmptyElements:!0,lineMarker:function(e,n){var t=e.state.field(v,!1);if(!t||!t.diff||!t.diff.hasChanges())return null;if(0===t.diff.a.length)return z.CI;var r=e.state.doc.lineAt(n.from);switch(t.diff.getLineChangeType(r.number,L.mn.B)){case L.DE.COVERED:case L.DE.MODIFIED:return z.CI;default:return null}},widgetMarker:function(e,n){if(!(n instanceof N))return null;var t=e.state.field(v,!1);if(!t||!t.diff||!t.diff.hasChanges())return null;switch(t.diff.getLineChangeType(n.index,L.mn.A)){case L.DE.COVERED:case L.DE.MODIFIED:return z.RC;default:return null}},initialSpacer:function(e){var n=e.state.field(v,!1);return(null==n?void 0:n.diff)?z.CI:z.jn},updateSpacer:function(e,n){var t=n.state.field(v,!1),r=(null==t?void 0:t.diff)?z.CI:z.jn;return e===r?e:r}}),G=t(66607),V=function(e){function n(e,t){var r;return(0,a._)(this,n),(r=(0,o._)(this,n)).left=e,r.right=t,r}(0,s._)(n,e);var t=n.prototype;return t.toDOM=function(e){var n=e.state.doc.lines.toString().length,t=document.createElement("div"),r=document.createElement("span"),i=document.createElement("span");return t.className=R,r.className=I,i.className=F,t.style.width="".concat(2*n+1,"ch"),null!==this.left&&(r.textContent=this.left.toString()),null!==this.right&&(i.textContent=this.right.toString()),t.appendChild(r),t.appendChild(i),t},t.eq=function(e){return e instanceof n&&this.left===e.left&&this.right===e.right},n}(d.wJ),j=G.DY.of(function(e,n){if(n instanceof N)return new V(n.index,null)}),Z=[G.RG.of(function(e,n){var t,r=e.state.field(v,!1);if(r&&r.diff&&r.diff.hasChanges()){var i=e.state.doc.lineAt(n.from),o=r.diff.getCorrespondingLine(i.number,L.mn.B);return new V(null!=(t=null==o?void 0:o.number)?t:null,i.number)}}),j],q=i.sj.define({enables:function(e){return[g.computeN([e],function(n){return n.facet(e)}),z.s,v,P,H,Z,W]}})},98543:(e,n,t)=>{"use strict";t.d(n,{P:()=>f});var r=t(88263),i=t(45263),o=t(64583),a=t(973),l=t(48521),s=t(46603),c=t(11882),u=t(36112),d=t(10429),p=(0,o.x)({root:[{borderBottom:"1px solid ".concat(i.LU.outlineDimmest)}],inner:[l.wp.position.relative,{"::before":{content:'""',display:"block",position:"absolute",left:0,width:8,height:"100%",background:"linear-gradient(90deg, ".concat(i.LU.backgroundDefault," 0%, rgba(0,0,0,0) 100%);"),zIndex:1},"::after":{content:'""',display:"block",position:"absolute",right:0,width:8,height:"100%",background:"linear-gradient(270deg, ".concat(i.LU.backgroundDefault," 0%, rgba(0,0,0,0) 100%);"),zIndex:1}}],tabs:[l.wp.overflowX("auto"),l.wp.pl(8)],tab:[a.b.nofill,l.wp.borderRadius(0),l.wp.px(12),l.wp.position.relative,{transition:"none",height:38,marginRight:1,"::after":{content:'""',display:"block",position:"absolute",right:-2,width:1,height:16,backgroundColor:i.LU.outlineDimmest},"&:last-child":{marginRight:0,"::after":{display:"none"}}}],dot:[l.wp.position.absolute,l.wp.borderRadius(16),l.wp.width(8),l.wp.height(8),l.wp.backgroundColor.accentPrimaryStronger,{top:8,right:8}]}),f=function(e){var n=e.tabs,t=e.value,o=e.onClick;return(0,r.Y)(u.ui,{css:p.root,children:(0,r.Y)(d.S,{css:p.inner,children:(0,r.Y)(d.S,{css:p.tabs,row:!0,align:"center",children:n.map(function(e){return(0,r.FD)(d.S,{css:l.wp.position.relative,children:[(0,r.Y)(s.$n,{style:{borderBottom:"1px solid "+(t===e.value?i.LU.foregroundDefault:"transparent")},css:p.tab,text:e.label,iconLeft:e.icon,iconRight:e.beta?(0,r.Y)(c.a,{text:"Beta",colorway:"grey"}):void 0,onClick:function(){return o(e)}}),e.showDot?(0,r.Y)(d.S,{css:p.dot}):null]},e.value)})})})})}},98952:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(88263),a=t(71117);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M3.75 5.646a2.751 2.751 0 1 0-1.5 0V6.5A2.75 2.75 0 0 0 5 9.25h6.25v2H7.2a1.95 1.95 0 0 0-1.95 1.95v6a1.95 1.95 0 0 0 1.95 1.95h4.05v.9H9.6a.75.75 0 0 0 0 1.5h4.8a.75.75 0 0 0 0-1.5h-1.65v-.9h4.05a1.95 1.95 0 0 0 1.95-1.95v-6a1.95 1.95 0 0 0-1.95-1.95h-4.05v-2H19a2.75 2.75 0 0 0 2.75-2.75v-.854a2.751 2.751 0 1 0-1.5 0V6.5c0 .69-.56 1.25-1.25 1.25h-6.25V5.646a2.751 2.751 0 1 0-1.5 0V7.75H5c-.69 0-1.25-.56-1.25-1.25v-.854ZM1.75 3a1.25 1.25 0 1 1 2.5 0 1.25 1.25 0 0 1-2.5 0ZM21 4.25a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5ZM13.25 3a1.25 1.25 0 1 1-2.5 0 1.25 1.25 0 0 1 2.5 0ZM7.2 12.75a.45.45 0 0 0-.45.45v6c0 .248.201.45.45.45h9.6a.45.45 0 0 0 .45-.45v-6a.45.45 0 0 0-.45-.45H7.2Z",clipRule:"evenodd"})}))}},98964:(e,n,t)=>{"use strict";t.d(n,{o:()=>B});var r,i,o,a=t(88263),l=t(57679),s=t(54319),c=t(47630),u=t(8054),d=t(83846),p=t(12694),f=t(21462),h=t(31258),m=t(46963),g=t(45263),v=t(64583),w=t(973),y=t(49045),b=t(48521),S=t(46603),Y=t(76126),A=t(9969),x=t(10429),C=t(52917),_=t(20729),k=t(49888),D=(0,y.v)(["timestampDisplay","chevronDisplay","color"]),E=D.styleTokens,R=D.cssVars,I=(0,v.x)({checkpoints:[{width:"360px",maxHeight:"calc(50vh)",maxWidth:"calc(100vw - ".concat(g.LU.space24,")"),overflowY:"auto"}],header:[],label:[b.wp.px(6)],checkpoint:[b.wp.reset.button,w.b.listItem,b.wp.align.center,b.wp.py(4),b.wp.px(6),b.wp.hover((r={},(0,d._)(r,R.color,g.LU.foregroundDefault),(0,d._)(r,R.timestampDisplay,"flex"),(0,d._)(r,R.chevronDisplay,"flex"),r)),(o={},(0,d._)(o,b.$_.canHover,(i={},(0,d._)(i,R.color,g.LU.foregroundDimmer),(0,d._)(i,R.chevronDisplay,"none"),(0,d._)(i,R.timestampDisplay,"none"),i)),(0,d._)(o,"color",E.color),o)],checkpointText:[b.wp.flex.growAndShrink(1),{textAlign:"left",color:"inherit"}],timestamp:[(0,d._)({},b.$_.canHover,{display:"var(".concat(R.timestampDisplay,", none)")})],expandButton:[{borderRadius:0}]}),F={direction:"reverse",state:{revertedToEventId:null},transformer:function(e,n){if(n.revertedToEventId===e.id&&(n.revertedToEventId=null),!n.revertedToEventId){var t=e.contents.contents;if((null==t?void 0:t.$kind)==="agentTimelineEventContents"){var r=t.agentTimelineEventContents.toolData;if((null==r?void 0:r.$kind)==="revertData"){n.revertedToEventId=r.revertData.eventIdBeforeRevert;return}if((null==r?void 0:r.$kind)==="commitData")return{commitId:r.commitData.commitId,description:r.commitData.description||"Checkpoint made",created:e.created}}}}};function T(e){var n,t=(0,s.NC)(),r=(0,c.J2)(t.sessions.get(e.sessionId)),i=(0,c.Rj)(function(){return null==r?void 0:r.transform(F,100)},[r]),o=(0,m.g)({items:null!=i?i:[],maxVisibleItems:4,reverse:!0}),l=o.isExpanded,u=o.setIsExpanded,d=o.maxItemsReached,g=o.visibleItems,v=o.hiddenItemsCount;if(!g.length)return null;var w=null!=(n=null==i?void 0:i.length)?n:0;return(0,a.FD)(x.S,{css:I.checkpoints,py:4,gap:4,children:[(0,a.Y)(x.S,{row:!0,gap:4,align:"center",px:6,pt:4,children:(0,a.FD)(Y.EY,{variant:"small",children:[w," ",(0,h.A)("Checkpoint",w)]})}),(0,a.FD)(x.S,{children:[g.map(function(n,t){var r=(0,p._)(n,2),i=r[0],o=r[1];return(0,a.FD)(f.Fragment,{children:[0===t?(0,a.Y)(Y.EY,{variant:"small",color:"dimmest",css:I.label,children:"Latest"}):null,1===t?(0,a.Y)(Y.EY,{variant:"small",color:"dimmest",css:I.label,children:"Earlier"}):null,(0,a.Y)(P,{getsCheckpoint:o,onClick:function(){return e.onCommitEventClick(i)}})]},i)}),d?(0,a.Y)(U,{isExpanded:l,hiddenItemsCount:v,onClick:function(){return u(!l)}}):null]})]})}function P(e){var n=(0,c.J2)(e.getsCheckpoint);return n?(0,a.Y)(L,{onClick:e.onClick,description:n.description,commitId:n.commitId,created:n.created}):null}function L(e){return(0,a.FD)(x.S,{tag:"button",onClick:e.onClick,row:!0,gap:6,css:I.checkpoint,children:[(0,a.Y)(_.A,{color:g.LU.foregroundDimmest}),(0,a.Y)(Y.EY,{variant:"small",color:"dimmer",css:I.checkpointText,multiline:!1,children:e.description}),(0,a.Y)(A.Dc,{textVariant:"small",textColor:"dimmer",css:I.timestamp,date:e.created})]})}function U(e){return(0,a.Y)(S.$n,{css:I.expandButton,size:"small",variant:"nofill",alignment:"start",onClick:e.onClick,iconLeft:e.isExpanded?(0,a.Y)(C.A,{}):(0,a.Y)(k.A,{}),text:e.isExpanded?"Show less":"Show ".concat(e.hiddenItemsCount," earlier")})}var N=t(75414),O=t(87523),M=(0,v.x)({title:[b.wp.flex.growAndShrink(1)],popoverButton:[b.wp.viewStyle,b.wp.reset.button,w.b.nofill,b.wp.rowWithGap(4),b.wp.align.center,b.wp.px(4),b.wp.py(2),b.wp.maxWidth("100%"),{marginLeft:"auto",marginRight:"auto",svg:[b.wp.color.foregroundDimmest],"&:hover svg":[b.wp.color.foregroundDimmer]}]});function B(e){var n=e.sessionId,t=e.onCommitEventClick,r=e.showCheckpointsDropdown,i=e.checkpointsOpenObs,o=(0,c.J2)(i,!1),d=(0,s.NC)(),p=(0,c.J2)(d.sessions.get(n)),f=(0,c.Rj)(function(){return null==p?void 0:p.data.select(function(e){return e.title})},[p]),h=void 0!==f?(0,a.Y)(u.n,{multiline:!1,css:M.title,variant:"small",text:f||"Thinking",color:f?"default":"dimmest"},n):null;return void 0===r||r?(0,a.FD)(N.Wv,{isOpen:o,onOpenChange:function(e){i.set(e)},label:"Plan Details",noArrow:!0,children:[(0,a.FD)(l.$,{css:M.popoverButton,children:[h,(0,a.Y)(O.A,{size:12,style:{visibility:f?"visible":"hidden"}})]}),(0,a.Y)(T,{onCommitEventClick:function(e){i.set(!1),t(e)},sessionId:n})]}):h}},99034:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(88263),a=t(71117);function l(e){return(0,o.FD)(a.Ay,(0,i._)((0,r._)({},e),{children:[(0,o.Y)("path",{d:"M11.063 14.918V9.021h.875v.921h.077c.122-.315.32-.56.595-.733.274-.177.603-.265.987-.265.389 0 .712.088.97.265.262.174.466.418.611.733h.062c.15-.305.377-.546.68-.726.301-.181.664-.272 1.086-.272.527 0 .959.165 1.294.495.335.328.503.838.503 1.532v3.947h-.906v-3.947c0-.435-.12-.746-.357-.933a1.321 1.321 0 0 0-.841-.28c-.415 0-.736.125-.964.376-.228.248-.342.563-.342.945v3.84h-.921v-4.04c0-.335-.109-.605-.326-.81-.218-.208-.498-.311-.841-.311-.236 0-.456.062-.66.188a1.42 1.42 0 0 0-.492.522c-.123.22-.184.475-.184.764v3.686h-.906ZM6.706 15.056c-.374 0-.713-.07-1.018-.21a1.746 1.746 0 0 1-.726-.62c-.179-.27-.268-.598-.268-.982 0-.338.066-.612.2-.822.132-.212.31-.379.533-.499.223-.12.468-.21.737-.268.271-.062.544-.11.818-.146.358-.046.649-.081.872-.104.225-.026.389-.068.491-.127.105-.059.157-.161.157-.307v-.03c0-.38-.103-.674-.31-.884-.205-.21-.516-.315-.934-.315-.432 0-.771.095-1.017.284-.246.19-.419.392-.518.607l-.86-.307c.153-.358.358-.637.614-.837.258-.202.54-.343.845-.422.307-.082.609-.123.906-.123.19 0 .407.023.652.069.249.043.488.134.718.272.233.139.427.347.58.626.154.28.23.653.23 1.122v3.885h-.906v-.799h-.046a1.595 1.595 0 0 1-.307.411c-.143.146-.334.27-.572.373-.238.102-.528.153-.871.153Zm.138-.814c.358 0 .66-.07.906-.21a1.437 1.437 0 0 0 .752-1.249v-.829c-.038.046-.122.088-.253.127a4.271 4.271 0 0 1-.445.096 20.362 20.362 0 0 1-.868.115c-.236.03-.456.08-.66.15a1.138 1.138 0 0 0-.492.303c-.123.133-.184.315-.184.545 0 .315.116.553.35.714.235.159.533.238.894.238Z"}),(0,o.Y)("path",{fillRule:"evenodd",d:"M4.15 4.75A1.65 1.65 0 0 0 2.5 6.4v11.2c0 .911.739 1.65 1.65 1.65h15.2A1.65 1.65 0 0 0 21 17.6V6.4a1.65 1.65 0 0 0-1.65-1.65H4.15ZM1 6.4a3.15 3.15 0 0 1 3.15-3.15h15.2A3.15 3.15 0 0 1 22.5 6.4v11.2a3.15 3.15 0 0 1-3.15 3.15H4.15A3.15 3.15 0 0 1 1 17.6V6.4Z",clipRule:"evenodd"})]}))}},99323:(e,n,t)=>{"use strict";t.d(n,{Cp:()=>r,GB:()=>o,xn:()=>i});var r=86,i=140,o=48},99429:(e,n,t)=>{"use strict";t.d(n,{Ef:()=>l,O3:()=>o,eQ:()=>a});var r=t(79209),i=(0,t(49045).v)(["fontSize","menuPaddingTop","borderBottomLeftRadius","borderBottomRightRadius","inputBarPadding","inputBarHeight","containerType","iconSize"]),o=i.cssVars,a=i.styleTokens,l=(0,r.AH)({"&& svg":{minWidth:a.iconSize,minHeight:a.iconSize,width:a.iconSize,height:a.iconSize}})},99792:(e,n,t)=>{"use strict";t.d(n,{q:()=>eI});var r=t(29935),i=t(17844),o=t(93629),a=t(12694),l=t(82643),s=t(21462),c=t(43628),u=t(10293),d=t(57021),p=t(51094),f=t(72826);function h(e){return m.apply(this,arguments)}function m(){return(m=(0,r._)(function(e){var n,t;return(0,l.YH)(this,function(r){return n=e.container,t=e.service,[2,new Promise(function(e){var r=n.openChannel({service:t},function(n){return e([n.channel,r]),r})})]})})).apply(this,arguments)}var g=function(e){return e.OUTPUT="OUTPUT",e.ERROR="ERROR",e.STATE_CHANGED="STATE_CHANGED",e.CHANNEL_OPENED="CHANNEL_OPENED",e}({}),v=t(90629),w=t(47946),y=t(45005),b=function(e){return e.OUTPUT="OUTPUT",e.ERROR="ERROR",e.STATE_CHANGED="STATE_CHANGED",e.CHANNEL_OPENED="CHANNEL_OPENED",e}({}),S=t(80366),Y=t(35079),A=t(19279),x=t(53231),C=t(69549),_=t(39282),k=t(86105),D=t(48899),E=t(37743),R=t(34626),I=t(64254).hp,F=new TextEncoder,T=new TextDecoder,P=function(){var e=/[a-z\d_-]+: [a-z\d_ :;.,/"'?!(){}[\]@<>=+*#$&`|~^%-]+/.source;return RegExp("(".concat(e,"\\r\\n)*(").concat(e,")$"),"i")}(),L=function(){function e(n){(0,E._)(this,e),this.onMessage=n,this.buffer=new Uint8Array,this.read=this.read.bind(this)}var n=e.prototype;return n.consumeHeaders=function(){var e=function(e){var n=e.findIndex(function(n,t){return 13===n&&10===e[t+1]&&13===e[t+2]&&10===e[t+3]});if(-1!==n){var t=T.decode(e.slice(0,n)),r=t.match(P);if(!r)throw R.vF.error("Failed to parse LSP header, no matches",{fragment:t}),Error("Unable to match header, text: ".concat(t));var i=Object.create(null),o=r[0].split("\r\n"),a=!0,l=!1,s=void 0;try{for(var c,u=o[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var d=c.value,p=d.indexOf(":");if(-1===p)throw R.vF.error("Failed to parse LSP header, missing colon",{fragment:t}),Error('Message header must separate key and value using ":"');var f=d.substr(0,p),h=d.substr(p+1).trim();if("Content-Length"===f){var m=parseInt(h,10);if(isNaN(m))throw R.vF.error("Failed to parse LSP header, NaN content length",{fragment:t}),Error("Content-Length value must be a number.");i[f]=parseInt(h,10)}else i[f]=h}}catch(e){l=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw s}}if(null==i["Content-Length"])throw R.vF.error("Failed to parse LSP header, no Content-Length",{fragment:t}),Error("Header must provide a Content-Length property.");return{headerLength:n,value:i}}}(this.buffer);if(e)return this.buffer=this.buffer.slice(e.headerLength+4),e},n.read=function(e){for(this.buffer=(n=this.buffer,t=F.encode(e),(r=new Uint8Array(n.length+t.length)).set(n),r.set(t,n.length),r);null!=(i=this.headers)?i:this.headers=this.consumeHeaders();){var n,t,r,i,o=this.headers.value["Content-Length"];if(this.buffer.length<o)return;var a=function(e,n,t){var r=T.decode(e.slice(0,n));try{return{json:JSON.parse(r),buffer:e.slice(n)}}catch(s){var i=I.from(e).toString();if(s instanceof SyntaxError&&"Unexpected end of JSON input"===s.message){R.vF.info("Failed to parse LSP message, falling back to json parsing",{buffer:i,length:n,rpcContent:r,attempt:"original-length",headers:JSON.stringify(t)});var o=function(e,n){for(var t=0,r=0,i=!1,o=0;o<e.length+1;o++){if(0!==o&&!t&&!r&&!i)return o;var a=e[o];switch(a){case 92:o++;continue;case 34:i=!i;continue}if(!i)switch(a){case 123:t++;break;case 125:t--;break;case 91:r++;break;case 93:r--}}return -1}(e,0);if(-1!==o){var a=e.slice(0,o),l=T.decode(a);try{return{json:JSON.parse(l),buffer:e.slice(o)}}catch(e){R.vF.error("Failed to parse LSP message",{givenError:e,buffer:i,length:n,rpcContent:r,attempt:"recomputed-length"})}}}else R.vF.error("Failed to parse LSP message",{givenError:s,buffer:i,length:n,rpcContent:r,attempt:"content-length"});return{json:void 0,buffer:e.slice(n)}}}(this.buffer,o,this.headers),l=a.json,s=a.buffer;if(this.headers=void 0,this.buffer=s,void 0!==l)try{this.onMessage(l)}catch(e){v.Cp(e)}}},e}(),U=t(64254).hp,N=t(76139),O=t(62356),M=t(23099),B=t.n(M),H=t(45912),z=t(80314),W=t(17459),G=t(22531),V=t(55301),j=t.n(V),Z=t(92148),q=t(88991),K=t(38310),$=t(56799),J=t(50423),Q=function(e){var n=e.configurationSupport;return{textDocument:{synchronization:{dynamicRegistration:!0,didSave:!0},signatureHelp:{dynamicRegistration:!0,signatureInformation:{documentationFormat:["markdown","plaintext"]}},publishDiagnostics:{relatedInformation:!0,tagSupport:{valueSet:[1,2]}},formatting:{dynamicRegistration:!0},documentSymbol:{dynamicRegistration:!0,hierarchicalDocumentSymbolSupport:!0,symbolKind:{valueSet:J.A}},semanticTokens:{dynamicRegistration:!0,requests:{range:!0,full:{delta:!0}},tokenTypes:$.aK,tokenModifiers:$.md,formats:[K.TokenFormat.Relative],overlappingTokenSupport:!0,multilineTokenSupport:!0,serverCancelSupport:!0,augmentsSyntaxTokens:!0},definition:{dynamicRegistration:!0,linkSupport:!0},typeDefinition:{dynamicRegistration:!0},implementation:{dynamicRegistration:!0},references:{dynamicRegistration:!0},rename:{dynamicRegistration:!0,prepareSupport:!0},completion:{dynamicRegistration:!0,contextSupport:!0,completionItem:{commitCharactersSupport:!0,documentationFormat:["markdown","plaintext"],labelDetailsSupport:!0,resolveSupport:{properties:["detail","documentation"]},snippetSupport:!0},completionList:{itemDefaults:["commitCharacters"]}},codeAction:{resolveSupport:{properties:["edit"]},dataSupport:!0,dynamicRegistration:!0,isPreferredSupport:!0,codeActionLiteralSupport:{codeActionKind:{valueSet:Object.values(K.CodeActionKind)}}},hover:{dynamicRegistration:!0,contentFormat:["markdown","plaintext"]}},workspace:{applyEdit:!0,didChangeConfiguration:n.clientToServer||n.serverToClient?{dynamicRegistration:!0}:void 0,configuration:n.serverToClient,semanticTokens:{refreshSupport:!0},executeCommand:{dynamicRegistration:!0},workspaceEdit:{documentChanges:!0,resourceOperations:[K.ResourceOperationKind.Create,K.ResourceOperationKind.Delete,K.ResourceOperationKind.Rename]}}}},X=function(){function e(){(0,E._)(this,e)}var n=e.prototype;return n.supports=function(e){return e.includes("css-language-server")},n.onResponse=function(e,n){return"textDocument/hover"===e?this.onHover(n):n},n.onHover=function(e){if("error"in e)return e;var n=e.result;return"cancelled"in e&&!1!==e.cancelled||!n?e:(Array.isArray(n.contents)&&(n.contents={kind:"markdown",value:["```html",n.contents[0],"```",n.contents[1],""].join("\n")}),(0,o._)((0,i._)({},e),{result:n}))},e}(),ee=function(){function e(){(0,E._)(this,e)}var n=e.prototype;return n.supports=function(e){return"module:dotnet-7.0/languageServer:omni-sharp"===e},n.onResponse=function(e,n){switch(e){case"textDocument/codeAction":return this.onCodeAction(n);case"textDocument/completion":return this.onCompletion(n)}return n},n.onCodeAction=function(e){return"error"in e&&-32801===e.error.code?{cancelled:!0,result:null}:e},n.onCompletion=function(e){return"error"in e&&-32801===e.error.code?{cancelled:!0,result:null}:e},e}(),en=[new(function(){function e(){(0,E._)(this,e)}var n=e.prototype;return n.supports=function(e){return e.includes("typescript-language-server")},n.onResponse=function(e,n){return"textDocument/completion"===e?this.onCompletion(n):n},n.onCompletion=function(e){if("error"in e||"cancelled"in e&&!1!==e.cancelled)return e;var n=e.result;if(!n)return e;Array.isArray(n)&&(n={isIncomplete:!1,items:n});for(var t=0;t<n.items.length;t++){var r=n.items[t];r.sortText&&r.sortText.startsWith("")&&(r.sortText=r.sortText.replace("",""))}return(0,o._)((0,i._)({},e),{result:n})},e}()),new X,new ee],et=function(){function e(){(0,E._)(this,e)}var n=e.prototype;return n.supports=function(){return!0},n.onResponse=function(e,n){return n},e}(),er=t(83744),ei=t(64254).hp;function eo(e,n){var t,r;return null!=(r=null==(t=H.Jh.from(e))?void 0:t.id)?r:n}var ea=function(e){return e.INITIALIZED="INITIALIZED",e.READY="READY",e.DIAGNOSTICS="DIAGNOSTICS",e.SERVER_STATE_CHANGE="SERVER_STATE_CHANGE",e.SERVER_HEALTH_CHANGE="SERVER_HEALTH_CHANGE",e.SERVER_CAPABILITIES_CHANGE="SERVER_CAPABILITIES_CHANGE",e.REQUEST="REQUEST",e.RESPONSE="RESPONSE",e.CANCEL_REQUEST="CANCEL_REQUEST",e.SEND_NOTIFICATION="SEND_NOTIFICATION",e.RECEIVE_NOTIFICATION="RECEIVE_NOTIFICATION",e.SEMANTIC_TOKENS_REFRESH="SEMANTIC_TOKENS_REFRESH",e}(ea||{});function el(){return Math.floor(0x7fffffff*Math.random())}function es(e){var n=JSON.stringify((0,o._)((0,i._)({},e),{jsonrpc:"2.0"})),t=ei.byteLength(n,"utf8");return"Content-Length: ".concat(t,"\r\n\r\n").concat(n)}function ec(e,n){var t,r,i,o,a,l;return n&&n?!!B()(null==e?void 0:e.fileTypeAttrs,n.fileTypeAttrs)&&!!B()(null==e||null==(t=e.config)?void 0:t.startCommand,null==(r=n.config)?void 0:r.startCommand)&&!!B()(null==e||null==(i=e.config)?void 0:i.initializationOptionsJson,null==(o=n.config)?void 0:o.initializationOptionsJson)&&!!B()(null==e||null==(a=e.config)?void 0:a.configurationJson,null==(l=n.config)?void 0:l.configurationJson):!!n==!!n}function eu(e,n){return ed.apply(this,arguments)}function ed(){return(ed=(0,r._)(function(e,n){var t;return(0,l.YH)(this,function(r){switch(r.label){case 0:return[4,e.exec("pwd")];case 1:if(null!==(t=r.sent()).error){if(!n())return[2,{error:Error("LSPNix: Could not get working directory "+t.error),workingDirectory:null}];return[2,eu(e,n)]}return[2,{error:null,workingDirectory:t.output.replace("\n","")}]}})})).apply(this,arguments)}var ep=t(64870),ef=t(83150),eh=function(e){return e.USER_JOIN="USER_JOIN",e.USER_LEAVE="USER_LEAVE",e.USERS_UPDATE="USERS_UPDATE",e.USER_OPENED_FILE="USER_OPENED_FILE",e.FOLLOWED_USER_CHANGED="FOLLOWED_USER_CHANGED",e.FOLLOWING_USERS_CHANGED="FOLLOWING_USERS_CHANGED",e}({}),em=t(17944),eg=t(5751),ev=t(37427),ew=t(35992),ey=t(67201),eb=function(e){return e.MESSAGE="MESSAGE",e}(eb||{}),eS=function(){function e(n){(0,E._)(this,e),this.buffer=Array(n).fill(null),this.start=0,this.end=0,this.isFull=!1}var n=e.prototype;return n.write=function(e){this.buffer[this.end]=e,this.end=(this.end+1)%this.buffer.length,this.isFull&&(this.start=(this.start+1)%this.buffer.length),this.end===this.start&&(this.isFull=!0)},n.readAll=function(){return this.start!==this.end||this.isFull?this.start<this.end?this.buffer.slice(this.start,this.end).join(""):this.buffer.slice(this.start).concat(this.buffer.slice(0,this.end)).join(""):""},e}();function eY(e){var n=new eS(e.maxHistorySize),t=(0,f.Ay)();return{emitMessage:function(e){n.write(e),t.emit("MESSAGE",e)},onMessage:function(e){return t.on("MESSAGE",e),Promise.resolve().then(function(){return e(n.readAll())}),function(){return t.removeListener("MESSAGE",e)}}}}function eA(e){var n,t,r;return(null==(n=e.runner.id)?void 0:n.startsWith(".replit/"))?0:(null==(t=e.runner.id)?void 0:t.startsWith("module:"))?1:(null==(r=e.runner.id)?void 0:r.startsWith("language:"))?2:3}function ex(e){return 1e3*e.seconds+e.nanos/1e6}var eC=t(65518).P,e_=" \x1b[?25l",ek=function(e){return e.BEFORE_RUN="BEFORE_RUN",e.SERVER="SERVER",e.NONE="NONE",e.STOPPING="STOPPING",e}(ek||{}),eD=t(82110),eE=t(83846),eR=t(63708);function eI(e){var n=(0,a._)((0,s.useState)(null),2),t=n[0],m=n[1];return(0,s.useEffect)(function(){var n,t,s,E,I,F,T,P,M,V,K,$,J,X,ee,ei,ea,ed,eb,eS,ek,eI,eF,eT,eP,eL,eU,eN,eO,eM,eB,eH,ez,eW,eG=function(e){var n=c._.active();if(e.openTelemetryTracing)return(0,d.Ux)(n,"workspace.useCreateServices")}(e),eV=(t=(n=(0,o._)((0,i._)({},e),{ctx:null==eG?void 0:eG.childCtx})).runnerMode,s=n.onUnrecoverableError,E=n.openMultipleFiles,I=n.openMultipleURLs,F=n.enableMultipleLSPClientsPerFile,T=n.enableReplspaceSshTokenPassthrough,P=n.onPresenceCommand,M=n.getColorForUser,V=n.openTelemetryTracing,K=n.ctx,$=(0,C.Ay)({onUnrecoverableError:s,ctx:K}),J=(0,N.A)({container:$}),X=function(e){var n=e.container,t=e.onCommand,i=e.getColorForUser,o=(0,f.Ay)();o.setMaxListeners(1/0);var a=[],s=null,c=[],u={},d=null;function p(){return h.apply(this,arguments)}function h(){return(h=(0,r._)(function(){return(0,l.YH)(this,function(e){return d?[2,d]:[2,new Promise(function(e){o.once(eh.USERS_UPDATE,function(){if(!d)throw Error("Expected presenceChannel to be set");e(d)})})]})})).apply(this,arguments)}function m(e){B()(s,e)||(s=e,o.emit(eh.FOLLOWED_USER_CHANGED,e))}function g(){return(g=(0,r._)(function(e){var n,t;return(0,l.YH)(this,function(r){switch(r.label){case 0:if((null==s?void 0:s.username)===e)throw Error("Already following user with username ".concat(e));if(!s)return[3,2];return[4,v()];case 1:r.sent(),r.label=2;case 2:return[4,p()];case 3:if(n=r.sent(),!(t=a.find(function(n){return n.username===e})))return[2];return m(t),t.sessions.forEach(function(e){n.send({followUser:{session:e.id}})}),[2]}})})).apply(this,arguments)}function v(){return y.apply(this,arguments)}function y(){return(y=(0,r._)(function(){var e,n;return(0,l.YH)(this,function(t){switch(t.label){case 0:if(!s)throw Error("No user to unfollow");return e=s,m(null),[4,p()];case 1:return n=t.sent(),e.sessions.forEach(function(e){n.send({unfollowUser:{session:e.id}})}),[2]}})})).apply(this,arguments)}return n.openChannel({service:"presence",name:"presencer"},function(e){var n=e.channel;return n.onCommand(function(e){null==t||t(e);var n={cmd:e,emitter:o,activeUsers:a,userIdToFile:u,followedUser:s,setFollowedUser:m,followingUsers:c,getColorForUser:i};switch(e.body){case"roster":!function(e){var n=e.cmd,t=e.emitter,r=e.activeUsers,i=e.userIdToFile,o=e.followedUser,a=e.followingUsers,l=e.setFollowedUser,s=e.getColorForUser,c=n.roster;if(c){var u=c.user,d=c.files;if(u&&d){var p=new Set;if(r.splice(0,r.length),u.forEach(function(e){if(e.id&&e.name&&e.roles&&!p.has(e.id)){var n=d.filter(function(n){return n.userId===e.id}).map(function(e){if(!e.session||!e.timestamp)throw Error("Expected session and associated with user");return{id:e.session,activeFile:e.file||null,timestamp:(0,em.iY)(e.timestamp)}}),t=null==s?void 0:s({userId:e.id});r.push({id:e.id,username:e.name,roles:e.roles,color:null!=t?t:(0,em.a4)(r),sessions:n}),p.add(e.id)}}),r.forEach(function(e){i[e.id]=(0,em.Ni)(e)}),t.emit(eh.USERS_UPDATE,(0,k._)(r)),a.filter(function(e){return!r.some(function(n){return n.id===e.id})}).forEach(function(e){var n=a.indexOf(e);-1!==n&&(a.splice(n,1),t.emit(eh.FOLLOWING_USERS_CHANGED,{followingUsers:(0,k._)(a),user:e,type:"unfollow"}))}),o){if(!r.some(function(e){return e.id===o.id}))return l(null);var f=i[o.id];t.emit(eh.USER_OPENED_FILE,{user:o,file:f})}}}}(n);break;case"join":!function(e){var n=e.cmd,t=e.emitter,r=e.activeUsers,i=e.userIdToFile,o=e.getColorForUser,a=n.join;if(a.id&&a.name&&a.roles&&a.session){var l=r.find(function(e){return e.id===a.id}),s=Math.floor(Date.now()/1e3),c=w.google.protobuf.Timestamp.create({seconds:s}),u=(0,em.iY)(c);if(l)l.sessions.push({id:a.session,activeFile:null,timestamp:u});else{var d=null==o?void 0:o({userId:a.id}),p={id:a.id,username:a.name,roles:a.roles,color:null!=d?d:(0,em.a4)(r),sessions:[{id:a.session,activeFile:null,timestamp:u}]};i[a.id]=null,r.push(p),t.emit(eh.USER_JOIN,p),t.emit(eh.USERS_UPDATE,(0,k._)(r))}}}(n);break;case"part":!function(e){var n=e.cmd,t=e.emitter,r=e.activeUsers,i=e.userIdToFile,o=e.followedUser,a=e.followingUsers,l=e.setFollowedUser;if(n.part&&n.part.id&&n.part.session){var s=n.part,c=s.id,u=s.session,d=r.findIndex(function(e){return e.id===c}),p=r[d];if(1===p.sessions.length){r.splice(d,1),delete i[p.id],t.emit(eh.USER_LEAVE,p),t.emit(eh.USERS_UPDATE,(0,k._)(r)),o&&l(null);var f=a.findIndex(function(e){return e.id===p.id});-1!==f&&(a.splice(f,1),t.emit(eh.FOLLOWING_USERS_CHANGED,{followingUsers:(0,k._)(a),user:p,type:"unfollow"}))}else{p.sessions=p.sessions.filter(function(e){return e.id!==u});var h=(0,em.Ni)(p);i[p.id]!==h&&(i[p.id]=h,t.emit(eh.USER_OPENED_FILE,{user:p,file:h}))}}}(n);break;case"fileOpened":!function(e){var n=e.emitter,t=e.cmd,r=e.activeUsers,i=e.userIdToFile;if(t.fileOpened){var o=t.fileOpened,a=o.userId,l=o.file,s=o.timestamp,c=o.session,u=l||null;if(!a||!s)throw Error("Expected userId and timestamp associated with file opened command");var d=r.find(function(e){return e.id===a});if(!d)throw Error("Expected user with ID ".concat(a));var p=d.sessions.find(function(e){return e.id===c});if(!p)throw Error("Expected session with ID ".concat(p));p.activeFile=u,p.timestamp=(0,em.iY)(s),i[a]=u,n.emit(eh.USER_OPENED_FILE,{user:d,file:u})}}(n);break;case"followUser":!function(e){var n=e.cmd,t=e.emitter,r=e.activeUsers,i=e.followingUsers,o=n.followUser;if(!o.session)throw Error("Expected session associated with follow user");var a=o.session,l=(0,em.fp)(a,r);i.some(function(e){return e.id===l.id})||(i.push(l),t.emit(eh.FOLLOWING_USERS_CHANGED,{followingUsers:(0,k._)(i),user:l,type:"follow"}))}(n);break;case"unfollowUser":!function(e){var n=e.cmd,t=e.emitter,r=e.activeUsers,i=e.followingUsers,o=n.unfollowUser;if(!o.session)throw Error("Expected session associated with follow user");var a=o.session,l=(0,em.fp)(a,r),s=i.findIndex(function(e){return e.id===l.id});-1!==s&&(i.splice(s,1),t.emit(eh.FOLLOWING_USERS_CHANGED,{followingUsers:(0,k._)(i),user:l,type:"unfollow"}))}(n);break;case"sessionTimestampUpdated":!function(e){var n=e.cmd,t=e.emitter,r=e.activeUsers,i=e.userIdToFile,o=n.sessionTimestampUpdated;if(!o.session||!o.timestamp)throw Error("Expected session and tiemstamp associated with update");var a=o.session,l=(0,em.fp)(a,r),s=i[l.id],c=l.sessions.find(function(e){return e.id===a});if(!c)throw Error("Expected user ".concat(l.id," to have a session with ID ").concat(a));c.timestamp=(0,em.iY)(o.timestamp);var u=c.activeFile;u!==s&&(i[l.id]=u,t.emit(eh.USER_OPENED_FILE,{user:l,file:u}))}(n)}}),d=n,function(){d=null}}),{onUserLeave:function(e){return o.on(eh.USER_LEAVE,e),function(){o.removeListener(eh.USER_LEAVE,e)}},onUserJoin:function(e){return o.on(eh.USER_JOIN,e),function(){o.removeListener(eh.USER_LEAVE,e)}},onActiveUsersChange:function(e){return o.on(eh.USERS_UPDATE,e),function(){o.removeListener(eh.USERS_UPDATE,e)}},onUserOpenedFile:function(e){return o.on(eh.USER_OPENED_FILE,e),function(){o.removeListener(eh.USER_OPENED_FILE,e)}},onFollowedUserChanged:function(e){return o.on(eh.FOLLOWED_USER_CHANGED,e),function(){o.removeListener(eh.FOLLOWED_USER_CHANGED,e)}},onFollowingUsersChanged:function(e){return o.on(eh.FOLLOWING_USERS_CHANGED,e),function(){o.removeListener(eh.FOLLOWING_USERS_CHANGED,e)}},getActiveFileForUser:function(e){var n=u[e];if(void 0===n)throw Error("Expected file for user with ID ".concat(e," to be defined"));return n},updateOpenFile:function(e){return(0,r._)(function(){return(0,l.YH)(this,function(n){switch(n.label){case 0:return[4,p()];case 1:return n.sent().send({openFile:{file:e}}),[2]}})})()},updateSessionTimestamp:function(){return(0,r._)(function(){return(0,l.YH)(this,function(e){switch(e.label){case 0:return[4,p()];case 1:return e.sent().send({updateSessionTimestamp:{}}),[2]}})})()},followUser:function(e){return g.apply(this,arguments)},unfollowUser:v,getActiveUsers:function(){return a},getFollowedUser:function(){return s},getFollowingUsers:function(){return c},getUserIdToFile:function(){return u},getPathToUserIds:function(){var e=new Map;return a.forEach(function(n){var t=n.id,r=u[t];r&&function n(t,r){if(""!==t){e.has(t)||e.set(t,[]);var i,o=e.get(t);if(!o)throw Error("Expected user Ids");o.some(function(e){return e===r})||(null==(i=e.get(t))||i.push(r),n((0,ef._6)(t),r))}}(r,t)}),e}}}({container:$,onCommand:P,getColorForUser:M}),ee=(0,p.A)({container:$,fs:J,ctx:K}),ei=function(e){var n,t,o,s=e.container,c=(0,f.Ay)(),u=null;function d(){return p.apply(this,arguments)}function p(){return(p=(0,r._)(function(){return(0,l.YH)(this,function(e){return u&&"open"===u.status?[2,u]:[2,new Promise(function(e){c.once(g.CHANNEL_OPENED,function(n){e(n)})})]})})).apply(this,arguments)}function m(){return v.apply(this,arguments)}function v(){return(v=(0,r._)(function(){return(0,l.YH)(this,function(e){return[2,h({container:s,service:"nix"})]})})).apply(this,arguments)}return s.openChannel({service:"nix"},function(e){var n=e.channel;return u=n,c.emit(g.CHANNEL_OPENED,n),function(){u=null}}),{searchPackages:(n=(0,r._)(function(e){var n,t,r,o,s,c=arguments;return(0,l.YH)(this,function(l){switch(l.label){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:{},[4,m()];case 1:return r=(t=a._.apply(void 0,[l.sent(),2]))[0],o=t[1],[4,r.request({nixPackageSearchRequest:(0,i._)({query:e},n)})];case 2:if((s=l.sent()).channelClosed)return[2,{error:"Channel closed",packages:null}];if(o(),s.error)return[2,{error:s.error,packages:null}];if(!s.nixPackageSearchResponse)return[2,{error:"Response expected but none received",packages:null}];return[2,{packages:s.nixPackageSearchResponse.packages,error:null}]}})}),function(e){return n.apply(this,arguments)}),listPackages:(0,r._)(function(){var e,n,t,r;return(0,l.YH)(this,function(i){switch(i.label){case 0:return[4,m()];case 1:return n=(e=a._.apply(void 0,[i.sent(),2]))[0],t=e[1],[4,n.request({nixPackageListRequest:{}})];case 2:if((r=i.sent()).channelClosed)return[2,{error:"Channel closed",packages:null}];if(t(),r.error)return[2,{error:r.error,packages:null}];if(!r.nixPackageListResponse)return[2,{error:"Response expected but none received",packages:null}];return[2,{packages:r.nixPackageListResponse.packages,error:null}]}})}),getChannels:(0,r._)(function(){var e,n,t,r;return(0,l.YH)(this,function(i){switch(i.label){case 0:return[4,m()];case 1:return n=(e=a._.apply(void 0,[i.sent(),2]))[0],t=e[1],[4,n.request({nixChannelsRequest:{}})];case 2:if((r=i.sent()).channelClosed)return[2,{error:"Channel closed",channels:null}];if(t(),r.error)return[2,{error:r.error,channels:null}];if(!r.nixChannelsResponse)return[2,{error:"Response expected but none received",channels:null}];return[2,{channels:r.nixChannelsResponse.channels,error:null}]}})}),getLatestStableChannel:(0,r._)(function(){var e,n,t,r;return(0,l.YH)(this,function(i){switch(i.label){case 0:return[4,m()];case 1:return n=(e=a._.apply(void 0,[i.sent(),2]))[0],t=e[1],[4,n.request({nixChannelLatestStableRequest:{}})];case 2:if((r=i.sent()).channelClosed)return[2,{error:"Channel closed",channel:null}];if(t(),r.error)return[2,{error:r.error,channel:null}];if(!r.nixChannelLatestStableResponse)return[2,{error:"Response expected but none received",channel:null}];return[2,{channel:r.nixChannelLatestStableResponse.channel,error:null}]}})}),addPackages:(t=(0,r._)(function(e){var n;return(0,l.YH)(this,function(t){switch(t.label){case 0:return[4,d()];case 1:return[4,t.sent().request({nixPackageAddRequest:{packages:e}})];case 2:if((n=t.sent()).channelClosed)return[2,"channel closed"];if(n.error)return[2,n.error];if(!n.nixPackageAddResponse)return[2,"response expected but non received"];return[2,null]}})}),function(e){return t.apply(this,arguments)}),removePackages:(o=(0,r._)(function(e){var n;return(0,l.YH)(this,function(t){switch(t.label){case 0:return[4,d()];case 1:return[4,t.sent().request({nixPackageRemoveRequest:{packages:e}})];case 2:if((n=t.sent()).channelClosed)return[2,"channel closed"];if(n.error)return[2,n.error];if(!n.nixPackageRemoveResponse)return[2,"response expected but non received"];return[2,null]}})}),function(e){return o.apply(this,arguments)}),packageInfo:function(e){return(0,r._)(function(){var n;return(0,l.YH)(this,function(t){switch(t.label){case 0:return[4,d()];case 1:return[4,t.sent().request({nixPackageInfoRequest:{name:e}})];case 2:if((n=t.sent()).channelClosed)return[2,{package:null,error:"channel closed"}];if(n.error)return[2,{package:null,error:n.error}];if(!n.nixPackageInfoResponse)return[2,{package:null,error:"response expected but non received"}];if(!n.nixPackageInfoResponse.package)return[2,{package:null,error:"package not found"}];return[2,{package:n.nixPackageInfoResponse.package,error:null}]}})})()}}}({container:$}),ea=(0,A.A)({container:$,dotReplit:ee}),ed=function(e){var n=e.container,t=e.forceTrace,i=e.track,o=(0,f.Ay)(),s=new Map;function c(e){var n=s.get(e);return n||(n={packagerChannel:null,didCallOpenChannel:!1,closeChannel:null},s.set(e,n)),n}function p(e){return m.apply(this,arguments)}function m(){return(m=(0,r._)(function(e){var t,r,i,o,s=arguments;return(0,l.YH)(this,function(l){switch(l.label){case 0:return t=s.length>1&&void 0!==s[1]?s[1]:0,[4,h({container:n,service:"packager3"})];case 1:if(i=(r=a._.apply(void 0,[l.sent(),2]))[0],o=r[1],!e)return[3,3];return[4,i.request({packageSetPackagerRequest:{packagerId:e}})];case 2:l.sent(),l.label=3;case 3:if("open"!==i.status){if(t>5)throw Error("Failed to getAnonymousPackagerChannel");return[2,p(e,t+1)]}return[2,[i,o]]}})})).apply(this,arguments)}function g(e){return S.apply(this,arguments)}function S(){return(S=(0,r._)(function(e){var t;return(0,l.YH)(this,function(r){return((t=c(e)).didCallOpenChannel||function(e){var t=c(e);if(t.didCallOpenChannel)throw Error("Already called open channel");t.didCallOpenChannel=!0,t.closeChannel=n.openChannel({service:"packager3",name:e||"packager",action:w.api.OpenChannel.Action.ATTACH_OR_CREATE},function(n){var r=n.channel;return r.onCommand(function(n){if(null!=n.state){var t=n.state===w.api.State.Running;o.emit(b.STATE_CHANGED,t,e)}else null!=n.output?o.emit(b.OUTPUT,n.output,e):null!=n.error&&o.emit(b.ERROR,n.error,e)}),e?r.request({packageSetPackagerRequest:{packagerId:e}}).then(function(){t.packagerChannel=r,o.emit(b.CHANNEL_OPENED,r,e)}):(t.packagerChannel=r,o.emit(b.CHANNEL_OPENED,r,e)),function(){t.packagerChannel=null}})}(e),t.packagerChannel&&"open"===t.packagerChannel.status)?[2,t.packagerChannel]:[2,new Promise(function(n){o.once(b.CHANNEL_OPENED,function(t,r){r===e&&n(t)})})]})})).apply(this,arguments)}return{addPackages:function(e,n){return(0,r._)(function(){var t,r,o,a;return(0,l.YH)(this,function(l){switch(l.label){case 0:return[4,g(n)];case 1:if("open"!==(r=l.sent()).status)return[2,!1];return o=e.map(function(e){return{name:e.name,spec:e.version}}),[4,r.request({packageAdd:{pkgs:o,useNewResponse:!0}})];case 2:if((a=l.sent()).channelClosed||a.error)return[2,!1];return(null==(t=a.packageAddResponse)?void 0:t.installedSystemDependencies)&&i&&i(u.AZ.PACKAGER_INSTALLED_SYSTEM_DEPENDENCIES,{packagerId:n}),[2,!0]}})})()},removePackages:function(e,n){return(0,r._)(function(){var t,r,i;return(0,l.YH)(this,function(o){switch(o.label){case 0:return[4,g(n)];case 1:if("open"!==(t=o.sent()).status)return[2,!1];return r=e.map(function(e){return{name:e}}),[4,t.request({packageRemove:{pkgs:r}})];case 2:if((i=o.sent()).channelClosed)return[2,!1];return[2,!!i.ok]}})})()},searchPackages:function(e,n){return(0,r._)(function(){var t,r,i,o;return(0,l.YH)(this,function(l){switch(l.label){case 0:return[4,p(n)];case 1:return r=(t=a._.apply(void 0,[l.sent(),2]))[0],i=t[1],[4,r.request({packageSearch:{query:e}})];case 2:if((o=l.sent()).channelClosed)return[2,[]];if(i(),"packageSearchResp"===o.body&&o.packageSearchResp)return[2,o.packageSearchResp.results||[]];return v.Cp(Error("Unknown packager3 command ".concat(o.body,". ")+"Expected packageSearchResp. Received error: ".concat(o.error))),[2,[]]}})})()},fetchPackageInfo:function(e,n){return(0,r._)(function(){var t,r,i,o;return(0,l.YH)(this,function(l){switch(l.label){case 0:return[4,p(n)];case 1:return r=(t=a._.apply(void 0,[l.sent(),2]))[0],i=t[1],[4,r.request({packageInfo:{pkg:{name:e}}})];case 2:if((o=l.sent()).channelClosed)return[2,void 0];if(i(),"packageInfoResp"===o.body&&o.packageInfoResp)return[2,o.packageInfoResp.pkg||void 0];return v.Cp(Error("Unknown packager3 command ".concat(o.body,". ")+"Expected packageInfoResp. Received error: ".concat(o.error))),[2,void 0]}})})()},installPackages:function(e,n){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,r._)(function(){return(0,l.YH)(this,function(a){var s;return[2,(0,d.ce)(e,"packager.installPackages",(s=(0,r._)(function(e){var r,a,s;return(0,l.YH)(this,function(l){switch(l.label){case 0:return[4,g(n)];case 1:if("open"!==(r=l.sent()).status)return[2,(0,y._)("ChannelClosed")];return[4,r.request({packageInstall:{useNewResponse:!0,disableGuess:o},traceInfo:(0,d.mY)(e),forceTrace:t})];case 2:if((a=l.sent()).error)return[2,(0,y._)(a.error)];if(a.channelClosed)return[2,(0,y._)("ChannelClosed")];if(!(s=a.packageInstallResponse))return[2,(0,y._)("No package install response found")];return s.installedSystemDependencies&&i&&i(u.AZ.PACKAGER_INSTALLED_SYSTEM_DEPENDENCIES,{packagerId:n}),[2,(0,y.Ok)(s)]}})}),function(e){return s.apply(this,arguments)}))]})})()},listSpecfile:function(e){return(0,r._)(function(){var n,t,r,i,o,s,c;return(0,l.YH)(this,function(l){switch(l.label){case 0:return[4,p(e)];case 1:return t=(n=a._.apply(void 0,[l.sent(),2]))[0],r=n[1],[4,t.request({packageListSpecfile:{}})];case 2:if((i=l.sent()).channelClosed)return[2,{packages:null,error:"channel closed"}];switch(r(),i.body){case"error":return[2,{packages:null,error:"list specfile failed: ".concat(i.error)}];case"packageListSpecfileResp":if(!(s=null==(o=i.packageListSpecfileResp)?void 0:o.pkgs))return[2,{packages:null,error:"list specfile returned an empty response"}];return[2,{packages:s,error:null}];default:return c="Unknown packager3 listSpecFile command ".concat(i.body,". ")+"Expected error or packageListSpecfileResp",v.Cp(Error(c)),[2,{packages:null,error:c}]}}})})()},getPackagerIds:function(){return Array.from(s.keys())},clearPackager:function(e){var n=s.get(e);(null==n?void 0:n.closeChannel)&&n.closeChannel(),s.delete(e)},onOutput:function(e){return o.on(b.OUTPUT,e),function(){o.removeListener(b.OUTPUT,e)}},onError:function(e){return o.on(b.ERROR,e),function(){o.removeListener(b.ERROR,e)}},onStateChanged:function(e){return o.on(b.STATE_CHANGED,e),function(){o.removeListener(b.STATE_CHANGED,e)}}}}({container:$,forceTrace:V,track:x.u4}),eb=(0,eg.A)({container:$,fs:J,openMultipleFiles:E,openMultipleURLs:I,enableReplspaceSshTokenPassthrough:T}),eF=(eI={container:$,beforeRun:(eS=(0,r._)(function(e,n){var t;return(0,l.YH)(this,function(o){var a;return t=(null==n?void 0:n.ctx)||c._.active(),[2,(0,d.ce)(t,"beforeRun",(a=(0,r._)(function(t){var o,a,s,c,p,f,h,m,g,v,w,y,b,S,Y,A;return(0,l.YH)(this,function(C){switch(C.label){case 0:return[4,(0,d.ce)(t,"toolchain.getConfigs",function(){return ea.getConfigs()})];case 1:if((o=C.sent()).disableInstallBeforeRun)return[2];return a=(0,i._)({},n),delete a.ctx,[4,(0,d.ce)(t,"fs.flush",(0,r._)(function(){return(0,l.YH)(this,function(e){switch(e.label){case 0:return[4,J.flush()];case 1:return e.sent(),[2]}})}))];case 2:if(C.sent(),e&&e("prerun flush finished"),!(null==o?void 0:o.packagers))return[3,10];s=!0,c=!1,p=void 0,C.label=3;case 3:C.trys.push([3,8,9,10]),f=o.packagers[Symbol.iterator](),C.label=4;case 4:if(s=(h=f.next()).done)return[3,7];if(!(m=h.value).guessImports)return[3,6];return g=performance.now(),v=o.disableGuessImports,[4,ed.installPackages(t,m.id,v)];case 5:w=C.sent(),y=performance.now()-g,e&&(w.error?e("prerun packager install finished",{packagerId:m.id,language:m.language,errorMessage:w.error,success:!1}):(Y=(S=(null==(b=w.value)?void 0:b.guessedPkgs)||[]).length,e("prerun packager install finished",{packagerId:m.id,language:m.language,guessedPkgs:S,guessedPkgsCount:Y,guessedAnyPkgs:Y>0,upmGuessDurationMs:null==b?void 0:b.upmGuessDurationMs,upmAddDurationMs:null==b?void 0:b.upmAddDurationMs,upmLockDurationMs:null==b?void 0:b.upmLockDurationMs,backendTotalDurationMs:null==b?void 0:b.totalDurationMs,frontendTotalDurationMs:y,success:!0}),Y>0&&(0,x.u4)(u.AZ.PACKAGER_PACKAGES_GUESSED,{packages:S}))),C.label=6;case 6:return s=!0,[3,4];case 7:return[3,10];case 8:return A=C.sent(),c=!0,p=A,[3,10];case 9:try{s||null==f.return||f.return()}finally{if(c)throw p}return[7];case 10:return[2]}})}),function(e){return a.apply(this,arguments)}))]})}),ek=function(e,n){return eS.apply(this,arguments)})}).container,eT=eI.beforeRun,eL={mainClient:eP=(0,_.F)(null),connect:function(){return new Promise(function(e){eP.current||eF.openChannel({service:"debugger"},function(n){return eP.current=function(e){var n,t=e.channel,s=e.beforeRun,c=(0,_.F)("terminated"),u=(0,_.F)([]),d=(0,_.F)([]),p=(0,_.F)(new Map),h=(0,_.F)(null),m=(0,f.Ay)(),g=function(e,n){var t=new Map,o=new Map,s=new Map;function c(){return(c=(0,r._)(function(n){var r,c,u,d,p,f,h,m,g,v,w,y,b,S,Y,A,x,C,_,k,D,E,R,I,F,T,P,L,U,N,O,M,B,H,z,W,G,V,j,Z;return(0,l.YH)(this,function(q){switch(q.label){case 0:r=!0,c=!1,u=void 0,q.label=1;case 1:q.trys.push([1,6,7,8]),d=t.entries()[Symbol.iterator](),q.label=2;case 2:if(r=(p=d.next()).done)return[3,5];if(h=(f=(0,a._)(p.value,2))[0],m=f[1],void 0!==n&&n!==h)return[3,4];return[4,e({command:"setBreakpoints",arguments:{source:{name:h,path:h},breakpoints:m.map(function(e){return{line:e.line,logMessage:e.logMessage||void 0}})}})];case 3:if(!(g=q.sent()).success)return[3,4];v=!0,w=!1,y=void 0;try{for(b=o[Symbol.iterator]();!(v=(S=b.next()).done);v=!0){A=(Y=(0,a._)(S.value,2))[0],(null==(x=Y[1].source)?void 0:x.name)===h&&o.delete(A),C=!0,_=!1,k=void 0;try{for(D=s[Symbol.iterator]();!(C=(E=D.next()).done);C=!0)I=(R=(0,a._)(E.value,2))[0],R[1]===A&&s.delete(I)}catch(e){_=!0,k=e}finally{try{C||null==D.return||D.return()}finally{if(_)throw k}}}}catch(e){w=!0,y=e}finally{try{v||null==b.return||b.return()}finally{if(w)throw y}}F=g,T=!0,P=!1,L=void 0;try{for(U=F.body.breakpoints[Symbol.iterator]();!(T=(N=U.next()).done);T=!0)O=N.value,null!=O.id&&o.set(O.id,(0,i._)({source:{name:h,path:h}},O))}catch(e){P=!0,L=e}finally{try{T||null==U.return||U.return()}finally{if(P)throw L}}M=!0,B=!1,H=void 0;try{for(z=(function(e,n){var t;return(0,l.YH)(this,function(r){switch(r.label){case 0:if(e.length!==n.length)return[2];t=0,r.label=1;case 1:if(!(t<e.length))return[3,4];return[4,[e[t],n[t]]];case 2:r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return[2]}})})(m,F.body.breakpoints)[Symbol.iterator]();!(M=(W=z.next()).done);M=!0)V=(G=(0,a._)(W.value,2))[0],j=G[1],V.breakpointId&&null!=j.id&&s.set(V.breakpointId,j.id)}catch(e){B=!0,H=e}finally{try{M||null==z.return||z.return()}finally{if(B)throw H}}q.label=4;case 4:return r=!0,[3,2];case 5:return[3,8];case 6:return Z=q.sent(),c=!0,u=Z,[3,8];case 7:try{r||null==d.return||d.return()}finally{if(c)throw u}return[7];case 8:return[2]}})})).apply(this,arguments)}function u(){var e=new Map,n=new Set,r=!0,i=!1,l=void 0;try{for(var c,u=t.entries()[Symbol.iterator]();!(r=(c=u.next()).done);r=!0){var d=(0,a._)(c.value,2),p=d[0],f=d[1];if(0!==f.length){var h=[],m=!0,g=!1,v=void 0;try{for(var w,y=f[Symbol.iterator]();!(m=(w=y.next()).done);m=!0){var b=w.value;if(b.breakpointId&&b.line){var S=s.get(b.breakpointId),Y=void 0===S?void 0:o.get(S);Y&&n.add(S),h.push({dapId:S,pid1Id:b.breakpointId,line:Y&&Y.line||b.line,verified:!!(null==Y?void 0:Y.verified),logMessage:b.logMessage||void 0})}}}catch(e){g=!0,v=e}finally{try{m||null==y.return||y.return()}finally{if(g)throw v}}e.set(p,h)}}}catch(e){i=!0,l=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw l}}var A=!0,x=!1,C=void 0;try{for(var _,k=o.entries()[Symbol.iterator]();!(A=(_=k.next()).done);A=!0){var E=(0,a._)(_.value,2),R=E[0],I=E[1];if(!n.has(R)){var F=(0,D.f_)((null==(M=I.source)?void 0:M.path)||(null==(B=I.source)?void 0:B.name)||""),T=I.line;if(F&&T){var P=e.get(F);P||(P=[],e.set(F,P));var L=!1,U=!0,N=!1,O=void 0;try{for(var M,B,H,z=P[Symbol.iterator]();!(U=(H=z.next()).done);U=!0){var W=H.value;if(W.line===I.line){W.dapId=R,W.verified=I.verified,L=!0;break}}}catch(e){N=!0,O=e}finally{try{U||null==z.return||z.return()}finally{if(N)throw O}}L||P.push({dapId:R,line:T,verified:I.verified})}}}}catch(e){x=!0,C=e}finally{try{A||null==k.return||k.return()}finally{if(x)throw C}}return e}return{findPathByBreakpointId:function(e){var n=!0,r=!1,i=void 0;try{for(var o,l=t.entries()[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){var s=(0,a._)(o.value,2),c=s[0];if(s[1].some(function(n){return n.breakpointId===e}))return c}}catch(e){r=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw i}}return null},getBreakpoints:u,flush:function(e){return c.apply(this,arguments)},handleDAPBreakpointEvent:function(e){var t=e.body,r=t.reason,a=t.breakpoint,l=a.id;if(null!=l){switch(r){case"changed":case"new":o.set(l,(0,i._)({},o.get(l),a));break;case"removed":o.delete(l);break;default:return}n(u())}},handlePID1BreakpointEvent:function(e){var r=e.absolutePath?(0,D.f_)(e.absolutePath):null;r&&(t.set(r,e.breakpoints||[]),n(u()))},handleDebugSessionEnded:function(){o.clear(),s.clear();var e=!0,r=!1,i=void 0;try{for(var l,c=t.entries()[Symbol.iterator]();!(e=(l=c.next()).done);e=!0){var d=(0,a._)(l.value,2),p=d[0],f=d[1];0===f.length&&t.delete(p)}}catch(e){r=!0,i=e}finally{try{e||null==c.return||c.return()}finally{if(r)throw i}}n(u())}}}(C,function(e){p.current=e}),v=(0,_.F)(!1),y=[],b=new L(function(e){if(y.push({time:Date.now(),direction:"in",data:e}),"event"===e.type)switch(e.event){case"continued":c.current="running";break;case"stopped":var n;c.current="paused",h.current=null!=(n=e.body.threadId)?n:null,m.emit("paused",e.body.reason),function(){F.apply(this,arguments)}();break;case"breakpoint":g.handleDAPBreakpointEvent(e)}else if("response"===e.type){var t=S.get(e.request_seq);t&&(S.delete(e.request_seq),t(e))}}),S=new Map,Y=100;function A(){c.current="terminated",u.current=[],d.current=[],h.current=null,g.handleDebugSessionEnded(),v.current=!1}var x=!1;function C(e){return E.apply(this,arguments)}function E(){return(E=(0,r._)(function(e){return(0,l.YH)(this,function(n){return[2,new Promise(function(n){var r,a=Y++;S.set(a,n);var l=(0,o._)((0,i._)({},e),{type:"request",seq:a});y.push({time:Date.now(),direction:"out",data:l});var s={debugInput:{session:"main",adapterInput:(r=JSON.stringify(l),"Content-Length: ".concat(U.byteLength(r),"\r\n\r\n").concat(r))}};y.push({time:Date.now(),direction:"out",data:s}),t.send(s)})]})})).apply(this,arguments)}function R(e){return I.apply(this,arguments)}function I(){return(I=(0,r._)(function(e){var n;return(0,l.YH)(this,function(r){switch(r.label){case 0:return y.push({time:Date.now(),direction:"out",data:e}),[4,t.request(e)];case 1:if(n=r.sent(),y.push({time:Date.now(),direction:"in",data:n}),n.error)throw n.error;return[2,n]}})})).apply(this,arguments)}function F(){return(F=(0,r._)(function(){var e,n;return(0,l.YH)(this,function(t){switch(t.label){case 0:return u.current=[],d.current=[],[4,C({command:"stackTrace",arguments:{threadId:h.current}})];case 1:if(!(e=t.sent()).success||(u.current=e.body.stackFrames,0===u.current.length))return[2];return[4,C({command:"scopes",arguments:{frameId:u.current[0].id}})];case 2:if(!(n=t.sent()).success)return[2];return[4,Promise.all(n.body.scopes.map(function(e){return C({command:"variables",arguments:{variablesReference:e.variablesReference}}).then(function(n){return{response:n,parentVariableReference:e.variablesReference}})}))];case 3:return d.current=t.sent().filter(function(e){return e.response.success}).reduce(function(e,n){var t=n.response,r=n.parentVariableReference;return e.concat(t.body.variables.map(function(e){return(0,o._)((0,i._)({},e),{parentVariableReference:r})}))},[]),[2]}})})).apply(this,arguments)}function T(e){return P.apply(this,arguments)}function P(){return(P=(0,r._)(function(e){var n,r,i,o,a,d,p;return(0,l.YH)(this,function(l){switch(l.label){case 0:if("terminated"!==c.current)throw Error("Cant start while debugger is already running");return c.current="preinitializing",u.current=[],[4,s()];case 1:if(l.sent(),"stopping"===c.current)return c.current="terminated",[2];return x=!0,c.current="initializing",i={session:"main",readOnly:!1},e&&(i.debuggerId=e.debuggerOption.id,e.filePath&&(i.filePath=e.filePath)),o={debugMain:i},y.push({time:Date.now(),direction:"out",data:o}),[4,t.request(o)];case 2:if(a=l.sent(),y.push({time:Date.now(),direction:"in",data:a}),a.error)return m.emit("output",a.error),c.current="terminated",[2];return[4,C({command:"initialize",arguments:{clientID:"replit",clientName:"replit.com",adapterID:"cppdbg",pathFormat:"path",linesStartAt1:!0,columnsStartAt1:!0,supportsEvaluateForHovers:!0,supportsVariableType:!0,supportsVariablePaging:!0,supportsRunInTerminalRequest:!1,locale:"en-us",supportsProgressReporting:!0,supportsInvalidatedEvent:!0}})];case 3:if(!(d=l.sent()).success)return c.current="terminated",[2];return v.current=!!(null==(n=d.body)?void 0:n.supportsStepBack),p=!(null==(r=d.body)?void 0:r.supportsConfigurationDoneRequest),[4,g.flush()];case 4:if(l.sent(),p)return[3,6];return[4,C({command:"configurationDone"})];case 5:l.sent(),l.label=6;case 6:return"initializing"===c.current&&(c.current="running"),m.emit("started",p),[2]}})})).apply(this,arguments)}function N(e,n){return O.apply(this,arguments)}function O(){return(O=(0,r._)(function(e,n){var t,r,i,o;return(0,l.YH)(this,function(a){switch(a.label){case 0:return t=n.line,r=n.otIndex,i=n.otVersion,o=n.logMessage,[4,R({debugAddBreakpointRequest:{path:(0,D.H$)(e)||e,line:t,otIndex:r,otVersion:i,logMessage:o}})];case 1:if(a.sent(),"terminated"===c.current)return[3,3];return[4,g.flush(e)];case 2:a.sent(),a.label=3;case 3:return m.emit("breakpoint","added"),[2]}})})).apply(this,arguments)}function M(e){return B.apply(this,arguments)}function B(){return(B=(0,r._)(function(e){var n;return(0,l.YH)(this,function(t){switch(t.label){case 0:return n=g.findPathByBreakpointId(e),[4,R({debugRemoveBreakpointRequest:{breakpointId:e}})];case 1:if(t.sent(),!("terminated"!==c.current&&n))return[3,3];return[4,g.flush(n)];case 2:t.sent(),t.label=3;case 3:return m.emit("breakpoint","removed"),[2]}})})).apply(this,arguments)}function H(){return(H=(0,r._)(function(e,n){var t;return(0,l.YH)(this,function(r){switch(r.label){case 0:if(!(t=g.findPathByBreakpointId(e)))return[2];return[4,R({debugUpdateBreakpointRequest:{breakpointId:e,logMessage:n.logMessage}})];case 1:if(r.sent(),"terminated"===c.current)return[3,3];return[4,g.flush(t)];case 2:r.sent(),r.label=3;case 3:return m.emit("breakpoint","updated"),[2]}})})).apply(this,arguments)}function z(){return(z=(0,r._)(function(e,n){var t,r,i;return(0,l.YH)(this,function(o){switch(o.label){case 0:if(!(i=null==(r=p.current.get(e))||null==(t=r.find(function(e){return e.line===n.line&&void 0!==e.pid1Id}))?void 0:t.pid1Id))return[3,2];return[4,M(i)];case 1:return o.sent(),[3,4];case 2:return[4,N(e,n)];case 3:o.sent(),o.label=4;case 4:return[2]}})})).apply(this,arguments)}function W(e){return m.on("started",e),function(){m.removeListener("started",e)}}return t.onCommand(function(e){y.push({time:Date.now(),direction:"in",data:e});var n,t,r=e.debugOutput,i=e.debugState,o=e.debugBreakpointEvent,a=e.debugSessions;if(r){if("main"!==r.session)return;r.adapterOutput&&b.read(r.adapterOutput),r.output&&m.emit("output",r.output)}if(o&&g.handlePID1BreakpointEvent(o),i&&i.state===w.api.State.Stopped&&A(),((null==a||null==(n=a.sessions)?void 0:n.main)===w.api.State.Running||(null==i?void 0:i.state)===w.api.State.Running)&&"terminated"===c.current&&T(),(null==a||null==(t=a.sessions)?void 0:t.main)===w.api.State.Stopped||(null==i?void 0:i.state)===w.api.State.Stopped){if(x){x=!1;return}A()}}),{state:c,stackFrames:u,variables:d,breakpoints:p,supportsStepBack:v,onOutput:function(e){return m.on("output",e),function(){m.removeListener("output",e)}},onStarted:W,onPaused:function(e){return m.on("paused",e),function(){m.removeListener("paused",e)}},onBreakpoint:function(e){return m.on("breakpoint",e),function(){m.removeListener("breakpoint",e)}},sendInput:function(e){return(0,r._)(function(){var n,r;return(0,l.YH)(this,function(i){switch(i.label){case 0:return n={debugInput:{session:"main",input:e}},y.push({time:Date.now(),direction:"out",data:n}),[4,t.request(n)];case 1:if(r=i.sent(),y.push({time:Date.now(),direction:"in",data:r}),r.error)throw r.error;return[2]}})})()},fetchVariables:function(e){return(0,r._)(function(){var n;return(0,l.YH)(this,function(t){switch(t.label){case 0:return[4,C({command:"variables",arguments:{variablesReference:e}})];case 1:if((n=t.sent()).success)return[2,n.body.variables.map(function(n){return(0,o._)((0,i._)({},n),{parentVariableReference:e})})];throw Error(n.message)}})})()},evaluate:function(e){var t=e.frameId,i=void 0===t?null==(n=u.current[0])?void 0:n.id:t,o=e.expression,a=e.context;return(0,r._)(function(){return(0,l.YH)(this,function(e){switch(e.label){case 0:return[4,C({command:"evaluate",arguments:{frameId:i,expression:o,context:a}})];case 1:return[2,e.sent()]}})})()},addBreakpoint:N,removeBreakpoint:M,updateBreakpoint:function(e,n){return H.apply(this,arguments)},toggleBreakpoint:function(e,n){return z.apply(this,arguments)},start:T,continue:function(){return(0,r._)(function(){return(0,l.YH)(this,function(e){switch(e.label){case 0:return u.current=[],c.current="running",[4,C({command:"continue",arguments:{threadId:h.current}})];case 1:return e.sent(),[2]}})})()},reverseContinue:function(){return(0,r._)(function(){return(0,l.YH)(this,function(e){switch(e.label){case 0:return u.current=[],c.current="running",[4,C({command:"reverseContinue",arguments:{threadId:h.current}})];case 1:return e.sent(),[2]}})})()},back:function(){return(0,r._)(function(){return(0,l.YH)(this,function(e){switch(e.label){case 0:return c.current="running",[4,C({command:"stepBack",arguments:{threadId:h.current}})];case 1:return e.sent(),[2]}})})()},next:function(){return(0,r._)(function(){return(0,l.YH)(this,function(e){switch(e.label){case 0:return c.current="running",[4,C({command:"stepIn",arguments:{threadId:h.current}})];case 1:return e.sent(),[2]}})})()},skip:function(){return(0,r._)(function(){return(0,l.YH)(this,function(e){switch(e.label){case 0:return c.current="running",[4,C({command:"next",arguments:{threadId:h.current,granularity:"line"}})];case 1:return e.sent(),[2]}})})()},stepOut:function(){return(0,r._)(function(){return(0,l.YH)(this,function(e){switch(e.label){case 0:return c.current="running",[4,C({command:"stepOut",arguments:{threadId:h.current}})];case 1:return e.sent(),[2]}})})()},stop:function(){return(0,r._)(function(){var e,n,r,i;return(0,l.YH)(this,function(o){switch(o.label){case 0:if("terminated"===c.current)throw Error("Debugger already terminated");if(e=c.current,c.current="stopping","preinitializing"===e)return[2];if("initializing"!==e)return[3,2];return n=[],[4,Promise.race([new Promise(function(e){n.push(c.subscribe(function(){return e()}))}),new Promise(function(e){n.push(W(function(){return e()}))})])];case 1:if(o.sent(),n.forEach(function(e){return e()}),"terminated"===c.current)return[2];o.label=2;case 2:return r={debugStop:{session:"main"}},y.push({time:Date.now(),direction:"out",data:r}),[4,t.request(r)];case 3:if(i=o.sent(),y.push({time:Date.now(),direction:"in",data:i}),i.error)throw Error("Failed to stop debugger "+i.error);return[2]}})})()},getSource:function(e){return(0,r._)(function(){var n;return(0,l.YH)(this,function(t){switch(t.label){case 0:return[4,C({command:"source",arguments:{source:{path:e}}})];case 1:if(!(n=t.sent()).success)throw Error(n.message);return[2,n.body.content]}})})()},getDebugLogs:function(){return Object.entries({state:c,stackFrames:u,variables:d,breakpoints:p,threadId:h}).map(function(e){var n=(0,a._)(e,2),t=n[0],r=n[1];return"".concat(t," = ").concat(JSON.stringify(r.current instanceof Map?(0,k._)(r.current):r.current,void 0,2))}).join("\n")+"\n\n"+y.map(function(e){return[new Date(e.time).toLocaleString(),"in"===e.direction?"->":"<-",JSON.stringify(e.data)].join(" ")}).join("\n")}}}({channel:n.channel,beforeRun:eT}),e(null),function(){eP.current=null}})})}},eU=(0,ep.kg)({container:$,dotReplit:ee}),eN=function(e){var n;if("outputs"===e.mode?n=function(e){var n,t,o,a,s,c,u,p,h,m,g,v,y,b,S,Y,A,C,_=e.container,k=e.toolchain,D=e.beforeRun,E=e.packager,I=e.debuggest,F=(0,f.Ay)();F.setMaxListeners(100);var T=null,P={runId:(0,ey.A)(),runState:ev.ll.OFFLINE,runningStage:"NONE",outputBlocks:[]};function L(e){P=(0,ew.jM)(P,e)}function U(e){var n=P.outputBlocks.find(function(n){return n.id===e});if(!n)throw Error("can't find block for id: ".concat(e));F.emit(ev.sV.BLOCK_CHANGED,n)}function N(){F.emit(ev.sV.ALL_BLOCKS_CHANGED,P.outputBlocks)}function O(e){P.runState!==e&&(L(function(n){n.runState=e}),F.emit(ev.sV.STATE_CHANGE,e))}function M(){return T?"BEFORE_RUN"===P.runningStage?void O(ev.ll.BEFORE_RUN):"STOPPING"===P.runningStage?void O(ev.ll.STOPPING):"NONE"!==P.runningStage?void O(ev.ll.RUNNING):void O(ev.ll.IDLE):void O(ev.ll.OFFLINE)}function B(e,n){var t=(null!=n?n:P).outputBlocks.filter(function(n){return n.type===e}),r=t[t.length-1];if(r)return r}function z(e,n){var t;L(function(r){var i=B(e,r);i&&(t=i.id,n(i))}),t&&U(t)}function W(){return(W=(0,r._)(function(e,n){return(0,l.YH)(this,function(t){var o;return P.runState===ev.ll.BEFORE_RUN?[2]:[2,(0,d.Lk)("outputs.run",(o=(0,r._)(function(t){var o,a,s,c,u,p,f,h,m,g;return(0,l.YH)(this,function(v){switch(v.label){case 0:if(P.runState!==ev.ll.IDLE&&P.runState!==ev.ll.STOPPING)throw Error("Cannot run while state is not IDLE or STOPPING, got state: "+P.runState);return s=P.outputBlocks.length>1&&P.outputBlocks[P.outputBlocks.length-1],(0,x.u4)(x.AZ.WS_CONSOLE_OUTPUT_STARTED,{replId:null==(o=_.getContext())?void 0:o.repl.id,runId:P.runId,lastBlock:s?(0,i._)({type:s.type,isDone:s.isDone,endTime:s.endTime,startTime:s.startTime},s.type===ev._B.EXECUTION?{executionMode:s.data.executionMode,exitCode:s.data.exitCode,stderr:s.data.stderr}:{},s.type===ev._B.DEBUGGER?{debugState:s.data.debugState}:{}):void 0,previousBlockNumber:P.outputBlocks.length,previousBlocksAvgTimeMs:P.outputBlocks.length>1?Math.floor(P.outputBlocks.reduce(function(e,n){return n.endTime&&n.startTime?e+(n.endTime-n.startTime):e},0)):void 0}),c=(0,ey.A)(),L(function(e){e.runId=c,e.runningStage="BEFORE_RUN"}),F.emit(ev.sV.LOCAL_RUN,e),M(),!n&&(p=function(e,n,t,r){if(!(null==e?void 0:e.runs))return[];var i=[];if(n=n.slice(),r){var o=n.indexOf(r);-1!==o&&n.splice(o,1),n.splice(0,0,r)}var a=!0,l=!1,s=void 0;try{for(var c,u=n[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var d=c.value;if(d.match(/(\.[a-z0-9]+)$/)){var p=!0,f=!1,h=void 0;try{for(var m,g=e.runs[Symbol.iterator]();!(p=(m=g.next()).done);p=!0){var v=m.value;if(v.fileParam||v.optionalFileParam){var w=(0,H.Z)(v.fileTypeAttrs);null===w&&v.language&&(w=H.Jh.from(v.language)),w&&(0,H.$h)(d,w)&&i.push({runner:v,filePath:d})}}}catch(e){f=!0,h=e}finally{try{p||null==g.return||g.return()}finally{if(f)throw h}}}}}catch(e){l=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw s}}var y=!0,b=!1,S=void 0;try{for(var Y,A=e.runs[Symbol.iterator]();!(y=(Y=A.next()).done);y=!0){var x=Y.value;x.fileParam||i.push({runner:x})}}catch(e){b=!0,S=e}finally{try{y||null==A.return||A.return()}finally{if(b)throw S}}return i.sort(function(e,n){var t=eA(e),r=eA(n);return t!==r?t-r:e.runner.interpreter===n.runner.interpreter?0:e.runner.interpreter?-1:1}),i}(k.configs.current,[],0,(null==(u=k.configs.current)?void 0:u.entrypoint)||null)).length>0&&(n=p[0]),[4,D(f=R.vF.timeStart({runnerId:null==n?void 0:n.runner.id,filePath:null==n?void 0:n.filePath,isInterpreter:null==n?void 0:n.runner.interpreter,replLanguage:null==(a=_.getContext())?void 0:a.repl.language}),{runId:c,channelId:null==T?void 0:T.id,type:"outputs",runConfig:n,ctx:t})];case 1:if(v.sent(),P.runId!==c||"NONE"===P.runningStage||"SERVER"===P.runningStage)return[2];if(!T)throw Error("State is RUNNING but outputs is null?");if("open"!==T.status)return[2];return(h=G()).isStopped||h.stop(),m={},n&&(m.runnerId=n.runner.id,m.filePath=n.filePath),g=T,[4,(0,d.ce)(t,"timeToRunning",(0,r._)(function(){var e,n;return(0,l.YH)(this,function(t){switch(t.label){case 0:return e=performance.now(),g.send({runMain:m}),[4,new Promise(function(e){var n=g.onCommand(function(t){"state"===t.body&&(n(),e())})})];case 1:return t.sent(),n=performance.now()-e,f("run finished",{timeToRunningMs:n}),[2]}})}))];case 2:return v.sent(),[2]}})}),function(e){return o.apply(this,arguments)}))]})})).apply(this,arguments)}function G(){var e=I.mainClient.current,n=null==e?void 0:e.state.current;return{client:e,state:n,sendInput:function(n){return null==e?void 0:e.sendInput(n)},stop:function(){return null==e?void 0:e.stop()},isRunning:"running"===n,isStopped:null==n||"terminated"===n}}function V(){return(V=(0,r._)(function(e){var n,t;return(0,l.YH)(this,function(r){if(P.runState===ev.ll.OFFLINE)return[2];if(n=G(),t=P.outputBlocks[P.outputBlocks.length-1].type===ev._B.DEBUGGER,n.isRunning&&t&&n.sendInput(e),P.runState!==ev.ll.IDLE&&P.runState!==ev.ll.RUNNING)throw Error("Can only send input when running or idle");if(!T)throw Error("State is not OFFLINE but outputs is null?");return"open"!==T.status||T.send({input:e}),[2]})})).apply(this,arguments)}return t=(n={packager:E,updateState:L,getRunningBlockOfType:B,updateRunningBlockOfType:z,emitBlockUpdate:U}).packager,o=n.updateState,a=n.getRunningBlockOfType,s=n.updateRunningBlockOfType,c=n.emitBlockUpdate,(u=[]).push(t.onOutput(function(e){var n=a(ev._B.PACKAGER);null==n||n.data.emitMessage(e.replace(/\n/g,"\n\r"))})),u.push(t.onError(function(e){s(ev._B.PACKAGER,function(n){n.error?n.error+="\n"+e:n.error=e})})),u.push(t.onStateChanged(function(e){if(e){var n=(0,ey.A)();o(function(e){e.outputBlocks.push({id:n,localStartTime:Date.now(),isDone:!1,visualState:ev.p$.EXPANDED,type:ev._B.PACKAGER,data:(0,i._)({},eY({maxHistorySize:eC}))}),e.outputBlocks.length>20&&e.outputBlocks.shift()}),c(n)}else s(ev._B.PACKAGER,function(e){e.data.emitMessage(e_),e.localEndTime=Date.now(),e.isDone=!0})})),g=(p={debuggest:I,updateState:L,updateRunningBlockOfType:z,getRunningBlockOfType:B,emitRunState:O,emitBlockUpdate:U,stopCurrentRun:function(){L(function(e){e.runningStage="BEFORE_RUN"}),null==T||T.send({clear:{}})}}).debuggest,v=p.updateState,y=p.updateRunningBlockOfType,b=p.getRunningBlockOfType,S=p.emitBlockUpdate,Y=p.emitRunState,A=p.stopCurrentRun,g.mainClient.subscribe(function(e){e&&(null==m||m(),null==h||h(),m=e.state.subscribe(function(e){if("initializing"===e){A();var n=(0,ey.A)();v(function(e){e.outputBlocks.push({id:n,localStartTime:Date.now(),isDone:!1,type:ev._B.DEBUGGER,visualState:ev.p$.EXPANDED,data:(0,i._)({debugState:"paused"},eY({maxHistorySize:eC}))})}),S(n),Y(ev.ll.RUNNING)}"paused"===e&&y(ev._B.DEBUGGER,function(e){e.data.debugState="paused"}),"running"===e&&y(ev._B.DEBUGGER,function(e){e.data.debugState="running"}),"stopping"===e&&Y(ev.ll.STOPPING),"terminated"===e&&(y(ev._B.DEBUGGER,function(e){e.localEndTime=Date.now(),e.data.emitMessage(e_),e.isDone=!0}),Y(ev.ll.IDLE))}),h=e.onOutput(function(e){var n=b(ev._B.DEBUGGER);null==n||n.data.emitMessage(e)}))}),_.openChannel({name:"output",service:"output"},function(e){var n=e.channel;return T=n,M(),n.onCommand(function(e){if(null!=e.state){var n=e.state===w.api.State.Stopped;"STOPPING"===P.runningStage&&n&&L(function(e){e.runningStage="NONE"}),n?"SERVER"===P.runningStage&&L(function(e){e.runningStage="NONE"}):L(function(e){e.runningStage="SERVER"}),M();return}if(null!=e.outputBlockStartEvent&&null!=e.outputBlockStartEvent.measureStartTime){if(void 0!==P.outputBlocks.find(function(e){return e.type===ev._B.EXECUTION&&!e.isDone}))return;var t=e.outputBlockStartEvent,r=t.cgroup,o=t.executionMode,a=ex(t.measureStartTime),l=(0,ey.A)();L(function(e){e.outputBlocks.push({id:l,localStartTime:Date.now(),startTime:a,isDone:!1,type:ev._B.EXECUTION,visualState:ev.p$.EXPANDED,data:(0,i._)({cgroup:r,executionMode:o===w.api.OutputBlockStartEvent.ExecutionMode.Run?"run":"interpret"},eY({maxHistorySize:eC}))}),e.outputBlocks.length>20&&e.outputBlocks.shift()}),U(l)}if(null!=e.output){var s=B(ev._B.EXECUTION);null==s||s.data.emitMessage(e.output)}if(null!=e.hint){var c=B(ev._B.EXECUTION);null==c||c.data.emitMessage("\r\n\x1b[0m\x1b[33m".concat(e.hint.text,"\x1b[0m\r\n"))}if(null!=e.stderr&&z(ev._B.EXECUTION,function(n){n.data.stderr=(n.data.stderr||"")+e.stderr}),null!=e.error){var u=e.error;z(ev._B.EXECUTION,function(e){e.error?e.error+="\n"+u:e.error=u})}if(null!=e.outputBlockEndEvent&&null!=e.outputBlockEndEvent.measureEndTime){var d,p=e.outputBlockEndEvent.exitCode;(0,x.u4)(x.AZ.WS_CONSOLE_OUTPUT_RAN,{exitCode:p,replId:null==(d=_.getContext())?void 0:d.repl.id,runId:P.runId});var f=ex(e.outputBlockEndEvent.measureEndTime);z(ev._B.EXECUTION,function(e){e.data.emitMessage(e_),e.data.exitCode=p,e.localEndTime=Date.now(),e.endTime=f,e.isDone=!0})}}),function(){T=null,L(function(e){e.runId=(0,ey.A)(),e.runState=ev.ll.OFFLINE,e.runningStage="NONE",e.outputBlocks.forEach(function(e){if(!e.isDone){e.data.emitMessage(e_),e.localEndTime=Date.now(),e.isDone=!0;var n="Connection was lost";e.error?e.error+="\n"+n:e.error=n}})}),M(),N()}}),{mode:"outputs",run:function(e,n){return W.apply(this,arguments)},stopRun:function(){if(P.runState===ev.ll.RUNNING){var e=G();if(!e.isStopped){e.stop(),L(function(e){e.runningStage="STOPPING"}),M();return}if("BEFORE_RUN"===P.runningStage){L(function(e){e.runningStage="NONE"}),M();return}L(function(e){e.runningStage="STOPPING"}),M(),null==T||T.send({clear:{}})}},sendInput:function(e){return V.apply(this,arguments)},onLocalRun:function(e){return F.on(ev.sV.LOCAL_RUN,e),function(){F.removeListener(ev.sV.LOCAL_RUN,e)}},onStateChanged:function(e){return F.on(ev.sV.STATE_CHANGE,e),function(){return F.removeListener(ev.sV.STATE_CHANGE,e)}},getRunState:function(){return P.runState},getOutputBlocks:function(){return P.outputBlocks},clearBlockHistory:function(){L(function(e){e.outputBlocks=e.outputBlocks.filter(function(e){return!e.isDone})}),N()},onBlockChanged:function(e){return F.on(ev.sV.BLOCK_CHANGED,e),function(){return F.removeListener(ev.sV.BLOCK_CHANGED,e)}},onAllBlocksChanged:function(e){return F.on(ev.sV.ALL_BLOCKS_CHANGED,e),function(){return F.removeListener(ev.sV.ALL_BLOCKS_CHANGED,e)}},resizeTerminalForBlock:function(e,n){if(T&&"open"===T.status){var t=P.outputBlocks.find(function(n){return n.id===e});if(!t)throw Error("tried to resize terminal of non-existing block");t.isDone||T.send({resizeTerm:n})}},startBlock:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ev.p$.EXPANDED,t=(0,ey.A)();return L(function(r){r.outputBlocks.push({id:t,localStartTime:Date.now(),isDone:!1,visualState:n,type:e,data:(0,i._)({},eY({maxHistorySize:eC}))})}),U(t),{id:t}},endBlock:function(e){L(function(n){var t=n.outputBlocks.find(function(n){return n.id===e});if(!t)throw Error("couldn't find a block");t.data.emitMessage(e_),t.localEndTime=Date.now(),t.isDone=!0}),U(e)},writeOutputToBlock:function(e,n){var t=P.outputBlocks.find(function(n){return n.id===e});t&&t.data.emitMessage(n)},writeErrorToBlock:function(e,n){L(function(t){var r=t.outputBlocks.find(function(n){return n.id===e});if(!r)throw Error("couldn't find a block");r.error?r.error+="\n"+n:r.error=n}),U(e)},setBlockVisualState:function(e,n){L(function(t){var r=t.outputBlocks.find(function(n){return n.id===e});if(!r)throw Error("couldn't find a block");r.visualState=n}),U(e)}}}({container:e.container,toolchain:e.toolchain,beforeRun:e.beforeRun,packager:e.packager,debuggest:e.debuggest}):"html"===e.mode&&(n=function(e){var n=e.beforeRun,t=e.container,i=(0,f.Ay)(),o=ev.ll.OFFLINE,a="none",s=Math.random();function c(){var e=function(e){o!==e&&(o=e,i.emit(ev.sV.STATE_CHANGE,o))};if("none"!==a)return void e(ev.ll.RUNNING);e(ev.ll.IDLE)}function u(){return(u=(0,r._)(function(e){var t;return(0,l.YH)(this,function(r){switch(r.label){case 0:if(o!==ev.ll.IDLE&&o!==ev.ll.STOPPING)throw Error("Cannot run while state is not IDLE or STOPPING, got state: "+o);return s=t=Math.random(),i.emit(ev.sV.LOCAL_RUN,e),a="before-run",c(),[4,n(R.vF.timeStart({replLanguage:"html"}),{runId:t.toString(),type:"html"})];case 1:if(r.sent(),s!==t||"none"===a)return[2];return a="running",c(),a="none",c(),[2]}})})).apply(this,arguments)}return t.onConnectionStateChanged(function(e){e===C.KN.CONNECTED&&(a="none",c())}),{mode:"html",run:function(e){return u.apply(this,arguments)},stopRun:function(){if(o!==ev.ll.RUNNING)throw Error("stopRun must be called when running but got ".concat(o));a="none",c()},onStateChanged:function(e){return i.on(ev.sV.STATE_CHANGE,e),function(){i.removeListener(ev.sV.STATE_CHANGE,e)}},onLocalRun:function(e){return i.on(ev.sV.LOCAL_RUN,e),function(){i.removeListener(ev.sV.LOCAL_RUN,e)}},getRunState:function(){return o}}}({beforeRun:e.beforeRun,container:e.container})),!n)throw Error("mode not supported: "+e.mode);return n}({mode:void 0===t?"outputs":t,container:$,toolchain:ea,beforeRun:ek,packager:ed,debuggest:eL}),eO=function(e){var n=e.container,t=e.toolchain,s=e.fs,c=e.enableMultipleLSPClientsPerFile,u=void 0!==c&&c,d=new Map,p=new Map,h={},m=!0;function g(e){var n=h[e];if(!n)throw Error("LSPNix: removeLanguage called with lspId never configured");var t=n.client;if(t){n.client=null,t.destroy();var r=!0,i=!1,o=void 0;try{for(var l,s=d[Symbol.iterator]();!(r=(l=s.next()).done);r=!0){var c=(0,a._)(l.value,2),u=c[0],f=c[1],m=p.get(u);if(m){m.delete(t),p.set(u,m);var g=!0,v=!1,w=void 0;try{for(var y,b=f[Symbol.iterator]();!(g=(y=b.next()).done);g=!0)(0,y.value)(Array.from(m))}catch(e){v=!0,w=e}finally{try{g||null==b.return||b.return()}finally{if(v)throw w}}}}}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}}n.closeChannel(),delete h[e]}function y(e,n){if(h[e])throw Error("LSPNix: addLanguage called with lspId already configured");h[e]={client:null,option:n,closeChannel:function(){}},m&&A(e)}var b=new Map;function S(e){if(!m)return!1;var n=h[e];return!!n&&!n.client}function Y(e,n,t){new Date().getTime()-t.getTime()<5e3?n<3?setTimeout(function(){S(e)&&A(e,n+1)},1e3*Math.pow(2,n)):R.vF.error("LSP server is crash-looping. Giving up.",{lspId:e,appService:"lspnix"}):setTimeout(function(){S(e)&&A(e)})}function A(e){return x.apply(this,arguments)}function x(){return(x=(0,r._)(function(e){var t,c,g,y,S,A,x,C,_=arguments;return(0,l.YH)(this,function(k){switch(k.label){case 0:if(t=_.length>1&&void 0!==_[1]?_[1]:0,!m)throw Error("LSPNix: Called startClient while not enabled");if(!h[e])throw Error("LSPNix: No config found for lspId: ".concat(e));if(!b.get(e))return[3,2];return[4,b.get(e)];case 1:if(k.sent())return[2];k.label=2;case 2:if(g=(c=h[e]).client,c.closeChannel,y=c.option,g)throw Error("LSPNix: A previous client is already set for language: ".concat(e));return S=function(){},A=new Promise(function(e){S=e}),b.set(e,A),x=[],C=n.openChannel({service:"lsp2",skip:function(e){var n=e.repl.language,t=n.startsWith("nix")||n.startsWith("html");return t||(R.vF.error("Skipped opening lsp channel for non-nix repl",{language:n,appService:"lspnix"}),S(null)),!t}},function(c){var g=c.channel,A=null,_=!1,k=function(){var n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!_){_=!0,n||(S(null),b.delete(e)),x.forEach(function(e){return e()}),null==A||A.destroy(),(null==(o=h[e])?void 0:o.client)===A&&(h[e].client=null),n&&m||C();var t=!0,r=!1,i=void 0;try{for(var o,l,s=d[Symbol.iterator]();!(t=(l=s.next()).done);t=!0){var c=(0,a._)(l.value,2),u=c[0],f=c[1],g=p.get(u);if(g&&A&&g.has(A)){g.delete(A),g.size?p.set(u,g):p.delete(u);var v=!0,w=!1,y=void 0;try{for(var Y,k=f[Symbol.iterator]();!(v=(Y=k.next()).done);v=!0)(0,Y.value)(Array.from(g))}catch(e){w=!0,y=e}finally{try{v||null==k.return||k.return()}finally{if(w)throw y}}}}}catch(e){r=!0,i=e}finally{try{t||null==s.return||s.return()}finally{if(r)throw i}}}};if("open"!==g.status)return void R.vF.error("LSPNix got a channel that wasn't open. This is expected to be impossible.",{lspId:e,appService:"lspnix"});var D=new Date;return g.request({startLSP:{languageServerId:e}}).then(function(c){if(!c.ok)return void R.vF.error("LSP server failed to start",{lspId:e,appService:"lspnix",serverError:c.error});if(m&&h[e]){x.push(g.onCommand(function(n){n.state===w.api.State.Stopped&&(R.vF.error("LSP server unexpectedly disconnected",{lspId:e,appService:"lspnix"}),k(),m&&Y(e,t,D))}));var C=0;eu(n,function(){return C++<5&&m&&ec(h[e].option,y)&&"open"===g.status}).then(function(n){if(!h[e])return void R.vF.info("LSPNix: lsp map changed while getting working directory",{lspId:e,appService:"lspnix"});if(!ec(h[e].option,y))return void R.vF.info("LSPNix: configuration changed while getting working directory",{lspId:e,appService:"lspnix"});if("open"!==g.status)return void R.vF.error("LSPNix: channel wasn't open after getting working directory",{lspId:e,appService:"lspnix"});if(n.error)return void R.vF.error("LSPNix: failed to get working directory",{lspId:e,appService:"lspnix",originalError:null==(_=n.error)?void 0:_.message});if(A=function(e){var n,t=e.connection,a=e.isSupportedFile,s=e.clientId,c=e.clientName,u=e.getWorkspaceConfiguration,d=e.onWorkspaceConfigurationChange,p=e.applyWorkspaceEdit,h=(0,f.Ay)();h.setMaxListeners(1/0);var m=null,g=er.b.OFFLINE,w=er.A.NOT_READY,y=null,b=!1,S=new Map,Y=new Map,A=null;function x(e){if(!m)throw Error("Expected rootUri");var n=e.slice(m.length+1);try{return decodeURIComponent(n)}catch(e){throw v.v4(function(t){t.setExtra("fragment_to_decode",n),v.Cp(e)}),e}}function C(e){if(!m)throw Error("Expected rootUri");if(e.startsWith("/"))throw Error("Path must be relative. Got: ".concat(e));return m+"/"+e}function _(e){g!==e&&(g!==er.b.INITIALIZED&&k(er.A.NOT_READY),g=e,h.emit("SERVER_STATE_CHANGE",g))}function k(e){w!==e&&(w=e,h.emit("SERVER_HEALTH_CHANGE",w))}function D(e){h.emit("SEND_NOTIFICATION",e),t.write(es(e))}function E(e){return I.apply(this,arguments)}function I(){return(I=(0,r._)(function(e){var n,r,a,c,u,d,p,f;return(0,l.YH)(this,function(l){if(c=void 0===(a=(r=void 0===(n=e.options)?{}:n).id)?el():a,u=r.signal,d=r.tap,p=(0,W._)(e,["options"]),!Number.isInteger(c))throw Error("Request ID must be an integer");return t.didClose()?[2,Promise.resolve({result:null,cancelled:!0})]:(h.emit("REQUEST",{id:c,data:p}),null==u||u.addEventListener("abort",function(){T(c)},{once:!0}),t.write(es((0,o._)((0,i._)({},p),{id:c}))),null===A&&(A=setTimeout(function(){k(er.A.STALLED)},3e4)),f=new Promise(function(e){Y.set(c,{requestData:p,resolve:e})}),d&&d(f),[2,f.then(function(e){null!==A&&(clearTimeout(A),A=null),g!==er.b.INITIALIZED||e.cancelled||k(er.A.READY);var n=(function(e){var n=!0,t=!1,r=void 0;try{for(var i,o=en[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value;if(a.supports(e))return a}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}return new et})(s).onResponse(p.method,e);if("error"in n){var t=n.error,r=t.code,i=t.message,o=t.data;R.vF.error("LSP request failed",{code:r,lspId:s,errorMessage:i,data:JSON.stringify(o),requestData:p})}return n})])})})).apply(this,arguments)}function F(e,n){t.write(es((0,o._)((0,i._)({},n),{id:e})))}function T(e){var n=Y.get(e);n&&(h.emit("CANCEL_REQUEST",e),n.resolve({result:null,cancelled:!0}),Y.delete(e),D({method:"$/cancelRequest",params:{id:e}}))}var P=0,U=new L(function(e){var n=Y.get(e.id);if(e.id&&n){var t=n.resolve;Y.delete(e.id);var r=e.result,a=e.error;if((void 0!==r||a)&&h.emit("RESPONSE",e),void 0!==r){P=0,t({result:r,cancelled:!1});return}if(a){P++,t({error:a}),P>20&&(R.vF.error("LSP experienced 20 consecutive errors. Setting server health to 'BROKEN",{lspId:s}),k(er.A.BROKEN),P=0);return}throw R.vF.error("LSP response message contained neither error nor result"),new q.A("Expected either message or error in LSP response").setExtra("message",JSON.stringify(e))}var l=e.method;if("client/registerCapability"===l){var c=e.params.registrations;if(!c||!Array.isArray(c))throw Error("Expected registrations array");c.forEach(function(e){var n=e.method;if(!n)throw Error("Expected registration method");if(!y)throw Error("Expected server capabilities");var t=e.registerOptions||!0;switch(n){case"textDocument/definition":y.definitionProvider=!0;break;case"textDocument/typeDefinition":y.typeDefinitionProvider=!0;break;case"textDocument/implementation":y.implementationProvider=!0;break;case"textDocument/references":y.referencesProvider=!0;break;case"textDocument/hover":y.hoverProvider=!0;break;case"textDocument/semanticTokens":y.semanticTokensProvider=t;break;case"textDocument/completion":y.completionProvider=t;break;case"textDocument/formatting":y.documentFormattingProvider=t;break;case"textDocument/rename":y.renameProvider=t;break;case"textDocument/codeAction":y.codeActionProvider=t;break;case"textDocument/signatureHelp":y.signatureHelpProvider=t;break;case"textDocument/didSave":if("number"==typeof y.textDocumentSync)break;y.textDocumentSync=(0,o._)((0,i._)({},y.textDocumentSync||{}),{save:t});break;case"textDocument/willSaveWaitUntil":if("number"==typeof y.textDocumentSync)break;y.textDocumentSync=(0,o._)((0,i._)({},y.textDocumentSync||{}),{willSave:!0});break;case"textDocument/didChange":if("number"==typeof y.textDocumentSync)break;y.textDocumentSync=(0,o._)((0,i._)({},y.textDocumentSync||{}),{change:t});break;case"textDocument/didOpen":case"textDocument/didClose":if("number"==typeof y.textDocumentSync)break;y.textDocumentSync=(0,o._)((0,i._)({},y.textDocumentSync||{}),{openClose:!0});break;case"workspace/executeCommand":y.executeCommandProvider=t;break;default:R.vF.info("Unexpected dynamically registered capability in LSP client",{method:n})}h.emit("SERVER_CAPABILITIES_CHANGE",y)}),F(e.id,{result:null,cancelled:!1});return}if("workspace/applyEdit"===l)return void p(e.params).then(function(n){F(e.id,{result:n,cancelled:!1})});if("textDocument/publishDiagnostics"===l){var d=x(e.params.uri),f=S.get(d);if(!f)return;var m=e.params.diagnostics;if(B()(f.diagnostics,m))return;f.diagnostics=m,h.emit("DIAGNOSTICS",{path:d,diagnostics:m});return}if("workspace/configuration"===l){var g,v=e.params,w=Array(v.items.length).fill(null),b=null!=(g=null==u?void 0:u())?g:null;b&&(w=v.items.map(function(e){return e.section?j()(b,e.section):b})),F(e.id,{result:w,cancelled:!1})}("window/logMessage"===l||"telemetry/event"===l)&&h.emit("RECEIVE_NOTIFICATION",e),"workspace/semanticTokens/refresh"===l&&h.emit("SEMANTIC_TOKENS_REFRESH")});function N(e){if(!y)throw Error("Expected client to be initialized");if(!y[e])throw Error("LSP Server does not support ".concat(e.replace(/Provider$/,"")));return y[e]}function O(e){return m&&e?e.filter(function(e){return"uri"in e?e.uri.startsWith(m):e.targetUri.startsWith(m)}):e}t.read(U.read);var M=function(){};return{initialize:function(e){var t=e.pwd,i=e.initializationOptions;return(0,r._)(function(){var e,r;return(0,l.YH)(this,function(o){switch(o.label){case 0:return _(er.b.INITIALIZING),m="file://".concat(t),[4,E({method:"initialize",params:{initializationOptions:i,capabilities:Q({configurationSupport:{serverToClient:!!u,clientToServer:!!d}}),processId:null,rootUri:m,workspaceFolders:[{name:m,uri:m}]}})];case 1:if("error"in(e=o.sent()))throw Error("Something went wrong initializing the LSP client: ".concat(e.error.message));if(e.cancelled)throw Error("Initialize request cancelled");if(!e.result)throw Error("Expected result in initialize request");return D({method:"initialized",params:{}}),y=e.result.capabilities,n=e.result.serverInfo,h.emit("SERVER_CAPABILITIES_CHANGE",y),_(er.b.INITIALIZED),d&&(M=d(function(e){D({method:"workspace/didChangeConfiguration",params:{settings:e}})})),u&&(r=u())&&D({method:"workspace/didChangeConfiguration",params:{settings:r}}),[2]}})})()},generateId:el,notify:{didOpen:function(e,n){if(!a(e))throw Error("Path not supported");var t,r=S.get(e);if(r&&0!==r.buffers){r.buffers++,S.set(e,r);return}var i=null!=(t=null==r?void 0:r.version)?t:0;S.set(e,{version:i,buffers:1,diagnostics:[]}),D({method:"textDocument/didOpen",params:{textDocument:{uri:C(e),languageId:eo(e,s),text:n,version:i}}})},didChange:function(e,n){var t=S.get(e);if(!t)throw Error('Document for "'.concat(e,'" is not open'));t.version++,D({method:"textDocument/didChange",params:{textDocument:{uri:C(e),version:t.version},contentChanges:n}})},didSave:function(e){if(!S.get(e))throw Error('Document for "'.concat(e,'" is not open'));N("textDocumentSync"),D({method:"textDocument/didSave",params:{textDocument:{uri:C(e)}}})},didClose:function(e){var n=S.get(e);if(!n)throw Error('Document for "'.concat(e,'" is not open'));n.buffers--,n.buffers>0||(D({method:"textDocument/didClose",params:{textDocument:{uri:C(e)}}}),S.delete(e))},cancelRequest:function(e){T(e)}},request:{completion:function(e,n,t,r){return N("completionProvider"),E({options:r,method:"textDocument/completion",params:{textDocument:{uri:C(e)},position:n,context:t}})},resolveCompletionItem:function(e){if(!N("completionProvider").resolveProvider)throw Error("LSP Server does not support resolving completion items");return E({method:"completionItem/resolve",params:e})},signatureHelp:function(e,n,t){return E({options:t,method:"textDocument/signatureHelp",params:{textDocument:{uri:C(e)},position:n}})},hover:function(e,n,t){return E({options:t,method:"textDocument/hover",params:{textDocument:{uri:C(e)},position:n}})},codeActions:function(e,n,t,r){var a=S.get(e);if(!a)throw Error("Document for path ".concat(e," is not open."));var l=a.diagnostics.filter(function(e){return(0,Z.Kk)(e.range,n)});return E({method:"textDocument/codeAction",params:{textDocument:{uri:C(e)},range:n,context:(0,o._)((0,i._)({},r),{diagnostics:l})},options:t})},resolveCodeAction:function(e){return E({method:"codeAction/resolve",params:e})},executeCommand:function(e,n){return E({method:"workspace/executeCommand",params:{command:e,arguments:n}})},format:function(e,n){return N("documentFormattingProvider"),E({method:"textDocument/formatting",params:{textDocument:{uri:C(e)},options:n}})},formatRange:function(e,n,t){return N("documentRangeFormattingProvider"),E({method:"textDocument/rangeFormatting",params:{textDocument:{uri:C(e)},range:n,options:t}})},findDefinitions:function(e,n,t){var a=!(arguments.length>3)||void 0===arguments[3]||arguments[3];return(0,r._)(function(){var r,s;return(0,l.YH)(this,function(l){switch(l.label){case 0:return N("definitionProvider"),[4,E({options:t,method:"textDocument/definition",params:{textDocument:{uri:C(e)},position:n}})];case 1:if(!1!==(r=l.sent()).cancelled)return[2,r];return(s=r.result)&&a&&(s=O(Array.isArray(s)?s:[s])),[2,(0,o._)((0,i._)({},r),{result:s})]}})})()},findTypeDefinitions:function(e,n,t){var a=!(arguments.length>3)||void 0===arguments[3]||arguments[3];return(0,r._)(function(){var r,s;return(0,l.YH)(this,function(l){switch(l.label){case 0:return N("typeDefinitionProvider"),[4,E({options:t,method:"textDocument/typeDefinition",params:{textDocument:{uri:C(e)},position:n}})];case 1:if(!1!==(r=l.sent()).cancelled)return[2,r];return(s=r.result)&&a&&(s=O(Array.isArray(s)?s:[s])),[2,(0,o._)((0,i._)({},r),{result:s})]}})})()},findImplementations:function(e,n,t){var a=!(arguments.length>3)||void 0===arguments[3]||arguments[3];return(0,r._)(function(){var r,s;return(0,l.YH)(this,function(l){switch(l.label){case 0:return N("implementationProvider"),[4,E({options:t,method:"textDocument/implementation",params:{textDocument:{uri:C(e)},position:n}})];case 1:if(!1!==(r=l.sent()).cancelled)return[2,r];return(s=r.result)&&a&&(s=O(Array.isArray(s)?s:[s])),[2,(0,o._)((0,i._)({},r),{result:s})]}})})()},findReferences:function(e,n,t){return N("referencesProvider"),E({method:"textDocument/references",params:{textDocument:{uri:C(e)},position:n,context:t}})},rename:function(e,n,t,r){return N("renameProvider"),E({options:r,method:"textDocument/rename",params:{textDocument:{uri:C(e)},position:n,newName:t}})},prepareRename:function(e,n){var t=N("renameProvider");if("boolean"==typeof t||!t.prepareProvider)throw Error("LSP server does not support prepare rename");return E({method:"textDocument/prepareRename",params:{textDocument:{uri:C(e)},position:n}})},documentHighlights:function(e,n,t){return(0,r._)(function(){return(0,l.YH)(this,function(r){switch(r.label){case 0:return[4,E({options:t,method:"textDocument/documentHighlight",params:{position:n,textDocument:{uri:C(e)}}})];case 1:return[2,r.sent()]}})})()},documentSymbol:function(e,n){return(0,r._)(function(){var t;return(0,l.YH)(this,function(r){switch(r.label){case 0:return[4,E({options:n,method:"textDocument/documentSymbol",params:{textDocument:{uri:C(e)}}})];case 1:if(!("result"in(t=r.sent())))return[2,t];if(t.result)return[2,{result:t.result,cancelled:!1}];return[2]}})})()}},semanticTokensFull:function(e,n){if(!N("semanticTokensProvider").full)throw Error("LSP server does not support full semantic tokens");return E({options:n,method:"textDocument/semanticTokens/full",params:{textDocument:{uri:C(e)}}})},semanticTokensDelta:function(e,n,t){var r=N("semanticTokensProvider");if(!(null==r?void 0:r.full)||"object"!==(0,G._)(r.full)||!r.full.delta)throw Error("LSP server does not support delta semantic tokens");return E({options:t,method:"textDocument/semanticTokens/full/delta",params:{textDocument:{uri:C(e)},previousResultId:n}})},semanticTokensRange:function(e,n,t){if(!N("semanticTokensProvider").range)throw Error("LSP server does not support range semantic tokens");return E({options:t,method:"textDocument/semanticTokens/range",params:{textDocument:{uri:C(e)},range:n}})},onDiagnostics:(0,f.gT)(h,"DIAGNOSTICS"),onServerStateChange:(0,f.gT)(h,"SERVER_STATE_CHANGE"),onServerHealthChange:(0,f.gT)(h,"SERVER_HEALTH_CHANGE"),onServerCapabilitiesChange:(0,f.gT)(h,"SERVER_CAPABILITIES_CHANGE"),onRequest:(0,f.gT)(h,"REQUEST"),onResponse:(0,f.gT)(h,"RESPONSE"),onCancelRequest:(0,f.gT)(h,"CANCEL_REQUEST"),onSendNotification:(0,f.gT)(h,"SEND_NOTIFICATION"),onReceiveNotification:(0,f.gT)(h,"RECEIVE_NOTIFICATION"),onSemanticTokensRefresh:(0,f.gT)(h,"SEMANTIC_TOKENS_REFRESH"),shutdown:function(){for(var e in _(er.b.EXITING),S.clear(),Y)T(Number(e));M(),E({method:"shutdown"}).then(function(){D({method:"exit"}),_(er.b.EXITED),h.removeAllListeners()})},isDestroyed:function(){return b},destroy:function(){for(var e in b=!0,S.clear(),Y)T(Number(e));M(),_(er.b.EXITED),h.removeAllListeners()},getServerState:function(){return g},getServerHealth:function(){return w},getServerCapabilities:function(){return y},getServerInfo:function(){return n},getDiagnostics:function(e){var n=S.get(e);if(!n)throw Error("File with path ".concat(e," is not open."));return n.diagnostics},isOpen:function(e){return S.has(e)},documentUriToPath:x,pathToDocumentURI:C,isSupportedFile:a,getLanguageId:function(e){return eo(e,s)},clientId:s,clientName:c}}({connection:{read:function(e){"open"===g.status&&g.onCommand(function(n){n.output&&e(n.output)})},write:function(e){if("open"!==g.status){(null==A?void 0:A.isDestroyed())&&R.vF.error("LSPNix: tried to write to channel but the lsp client is already destroyed");return}g.send({input:e})},didClose:function(){return"open"!==g.status}},clientId:e,clientName:h[e].option.name,isSupportedFile:function(e){return(0,H.fu)(e,y)},applyWorkspaceEdit:(w=(0,r._)(function(e){var n;return(0,l.YH)(this,function(t){return(n=e.edit,A)?[2,(0,z.i)({edit:n,fs:s,client:A})]:[2,{applied:!1}]})}),function(e){return w.apply(this,arguments)}),getWorkspaceConfiguration:function(){if(!(null==(e=y.config)?void 0:e.configurationJson))return null;var e,n=null;try{n=JSON.parse(y.config.configurationJson)}catch(e){R.vF.error("Failed to parse LSP workspace configuration",{configurationJson:y.config.configurationJson})}return n}}),null==(C=y.config)?void 0:C.initializationOptionsJson)try{E=JSON.parse(y.config.initializationOptionsJson)}catch(e){R.vF.error("Failed to parse LSP initializationOptions",{initializationOptionsJson:y.config.initializationOptionsJson})}var c,w,C,_,E,I=A.initialize({pwd:n.workingDirectory,initializationOptions:E}).catch(function(n){if((null==n?void 0:n.message)!=="Initialize request cancelled")throw R.vF.error("LSPNix: failed to initialize client",{lspId:e,appService:"lspnix",originalError:null==n?void 0:n.message}),n});x.push(A.onServerHealthChange(function(n){if(n===er.A.BROKEN&&(R.vF.info("LSP: Server health broken",{lspId:e}),k(),m)){R.vF.info("LSP: retrying after server health broken",{lspId:e}),Y(e,t,D);return}}),A.onServerStateChange((c=(0,r._)(function(n){var t,r,i,o,s,c,f,m,v,w,Y,x,C,_,D;return(0,l.YH)(this,function(l){switch(l.label){case 0:if("open"!==g.status)return R.vF.info("LSPNix: channel wasn't open on state change",{lspId:e,appService:"lspnix",state:n}),k(),[2];if(!A)return R.vF.info("LSPNix: client was null on state change. This should never happen",{lspId:e,appService:"lspnix",state:n}),k(),[2];if(!ec(h[e].option,y))return R.vF.info("LSPNix: configuration changed and received state change",{lspId:e,appService:"lspnix",state:n}),k(),[2];if(n===er.b.EXITED)return R.vF.info("LSP server exited via 'exit' notification",{lspId:e,appService:"lspnix"}),k(),[2];if(n!==er.b.INITIALIZED)return[2];return[4,I];case 1:if(l.sent(),"open"!==g.status)return R.vF.info("LSPNix: channel wasn't open after initialization",{lspId:e,appService:"lspnix"}),k(),[2];S(A),b.delete(e),h[e].client=A,t=!0,r=!1,i=void 0;try{for(o=d[Symbol.iterator]();!(t=(s=o.next()).done);t=!0)if((f=(c=(0,a._)(s.value,2))[0],m=c[1],(0,H.fu)(f,y))&&(v=p.get(f),u||!v||!v.size)){w=v?v.add(A):new Set([A]),p.set(f,w),Y=!0,x=!1,C=void 0;try{for(_=m[Symbol.iterator]();!(Y=(D=_.next()).done);Y=!0)(0,D.value)(Array.from(w))}catch(e){x=!0,C=e}finally{try{Y||null==_.return||_.return()}finally{if(x)throw C}}}}catch(e){r=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(r)throw i}}return[2]}})}),function(e){return c.apply(this,arguments)})))})}}),function(e){k(e.willReconnect)}}),h[e].closeChannel=C,[2]}})})).apply(this,arguments)}function C(e){var n=null==e?void 0:e.languageServers;if(!n||0===n.length){var t=!0,r=!1,i=void 0;try{for(var o,a=Object.keys(h)[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;g(l)}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return}var s={},c=!0,u=!1,d=void 0;try{for(var p,f=n[Symbol.iterator]();!(c=(p=f.next()).done);c=!0){var m=p.value;s[m.id]=m}}catch(e){u=!0,d=e}finally{try{c||null==f.return||f.return()}finally{if(u)throw d}}var v=!0,w=!1,b=void 0;try{for(var S,Y=Object.keys(h)[Symbol.iterator]();!(v=(S=Y.next()).done);v=!0){var A=S.value;s[A]||g(A)}}catch(e){w=!0,b=e}finally{try{v||null==Y.return||Y.return()}finally{if(w)throw b}}var x=!0,C=!1,_=void 0;try{for(var k,D=Object.keys(s)[Symbol.iterator]();!(x=(k=D.next()).done);x=!0){var E=k.value,R=h[E],I=s[E];if(!R){y(E,I);continue}ec(R.option,I)||(g(E),y(E,I))}}catch(e){C=!0,_=e}finally{try{x||null==D.return||D.return()}finally{if(C)throw _}}}function _(){return(_=(0,r._)(function(){var e;return(0,l.YH)(this,function(n){try{e=t.configs.current,C(e),t.configs.subscribe(C)}catch(e){R.vF.error("LSP initialization failed: "+e.message)}return[2]})})).apply(this,arguments)}return!function(){_.apply(this,arguments)}(),{restart:function(e){if(m){var n=h[e];if(n){if(n.client){var t=!0,r=!1,i=void 0;try{for(var o,l,s=d[Symbol.iterator]();!(t=(l=s.next()).done);t=!0){var c=(0,a._)(l.value,2),u=c[0],f=c[1],g=p.get(u);if(g){g.delete(n.client),p.set(u,g);var v=!0,w=!1,y=void 0;try{for(var b,S=f[Symbol.iterator]();!(v=(b=S.next()).done);v=!0)(0,b.value)(Array.from(g))}catch(e){w=!0,y=e}finally{try{v||null==S.return||S.return()}finally{if(w)throw y}}}}}catch(e){r=!0,i=e}finally{try{t||null==s.return||s.return()}finally{if(r)throw i}}}n.closeChannel(),null==(o=n.client)||o.destroy(),n.client=null,A(e)}}},disable:function(){if(m){m=!1;var e=!0,n=!1,t=void 0;try{for(var r,i=Object.values(h)[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value;o.closeChannel(),null==(u=o.client)||u.destroy(),o.client=null;var l=!0,s=!1,c=void 0;try{for(var u,f,g=d[Symbol.iterator]();!(l=(f=g.next()).done);l=!0){var v=(0,a._)(f.value,2),w=v[0],y=v[1];if(p.has(w)){p.delete(w);var b=!0,S=!1,Y=void 0;try{for(var A,x=y[Symbol.iterator]();!(b=(A=x.next()).done);b=!0)(0,A.value)([])}catch(e){S=!0,Y=e}finally{try{b||null==x.return||x.return()}finally{if(S)throw Y}}}}}catch(e){s=!0,c=e}finally{try{l||null==g.return||g.return()}finally{if(s)throw c}}}}catch(e){n=!0,t=e}finally{try{e||null==i.return||i.return()}finally{if(n)throw t}}}},enable:function(){if(!m){m=!0;var e=!0,n=!1,t=void 0;try{for(var r,i=Object.keys(h)[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value;A(o)}}catch(e){n=!0,t=e}finally{try{e||null==i.return||i.return()}finally{if(n)throw t}}}},onClient:function(e,n){d.has(e)||d.set(e,[]),null==(s=d.get(e))||s.push(n);var t=!1,r=[],i=p.get(e);if(i&&i.size)r.push.apply(r,(0,k._)(Array.from(i)));else{var o=!0,a=!1,l=void 0;try{for(var s,c,f=Object.values(h)[Symbol.iterator]();!(o=(c=f.next()).done);o=!0){var m=c.value;if((0,H.fu)(e,m.option)&&m.client&&(r.push(m.client),!u))break}}catch(e){a=!0,l=e}finally{try{o||null==f.return||f.return()}finally{if(a)throw l}}}return Promise.resolve().then(function(){!t&&r.length&&n(r)}),function(){t=!0;var r,i=null!=(r=d.get(e))?r:[];d.set(e,i.filter(function(e){return e!==n}))}}}}({container:$,toolchain:ea,fs:J,enableMultipleLSPClientsPerFile:void 0!==F&&F}),eM=(0,O.A)({container:$,fs:J}),eB=function(e){var n,t,i=e.container,o=e.toolchain;function a(e){return s.apply(this,arguments)}function s(){return(s=(0,r._)(function(e){return(0,l.YH)(this,function(n){var i;return e&&(t=void 0),t||(t=new Promise((i=(0,r._)(function(e){var n,t;return(0,l.YH)(this,function(r){switch(r.label){case 0:if(null==(t=o.modules)||null==(n=t.current)?void 0:n.some(function(e){return e.id.startsWith("postgresql")}))return[3,2];return[4,o.addModule("postgresql-16")];case 1:return r.sent(),e(),[3,3];case 2:e(),r.label=3;case 3:return[2]}})}),function(e){return i.apply(this,arguments)}))),[2]})})).apply(this,arguments)}return{ensureNixPsqlModuleInstalled:a,run:(n=(0,r._)(function(e){var n,t,r,o,s,c,u,d,p,f,h,m,g;return(0,l.YH)(this,function(l){switch(l.label){case 0:return n=e.query,t=e.connectionString,[4,a()];case 1:l.sent(),r=(0,Y.A)({container:i}),o=[],s=null,c=new S.e(function(e){return o.push(e)}),u=null,d=!1,p=new Promise(function(e){var n=r.onStateChanged(function(t){var r=t.state,i=t.stderrBuffer;if(r===w.api.State.Running){d=!0;return}d&&(u=i,n(),e())})}),r.onOutput(function(e){try{c.process(e)}catch(n){s||(s=n,v.Cp(n,function(n){return n.setExtra("chunk",e)}))}}),l.label=2;case 2:return l.trys.push([2,,5,6]),[4,r.request({args:["psql",t,"--csv","--command",n],splitStderr:!0})];case 3:return f=l.sent(),[4,p];case 4:return l.sent(),f.error&&!u&&(u=f.error),c.flush(),[3,6];case 5:return r.dispose(),[7];case 6:if(u)return[2,{columns:c.headers(),rows:o,error:u}];if(s)return h=s.message,[2,{columns:null!=(m=c.headers())?m:[],rows:o,error:h}];return[2,{columns:null!=(g=c.headers())?g:[],rows:o,error:null}]}})}),function(e){return n.apply(this,arguments)})}}({container:$,toolchain:ea}),ez=(eH={container:$}).container,eW=eH.sendTrackingEvents,{presence:X,packager:ed,container:$,fs:J,runner:eN,debuggest:eL,dotReplit:ee,nixService:ei,lspnix:eO,git:eM,psql:eB,replspaceApi:eb,toolchain:ea,ports:eU,secrets:function(e){var n,t=e.container,s=e.observable,c=e.track,d=new Promise(function(e){return n=e});function p(){return(p=(0,r._)(function(){var e,n,t=arguments;return(0,l.YH)(this,function(r){switch(r.label){case 0:return e=t.length>0&&void 0!==t[0]?t[0]:{skipCache:!1},[4,d];case 1:if(n=r.sent(),!e.skipCache)return[2,new Map(s.current)];return[4,n.request({secretsGetRequest:{}})];case 2:return r.sent(),[2,new Map(s.current)]}})})).apply(this,arguments)}function f(){return(f=(0,r._)(function(e){var n,t,r,i,o,p,f,m,g,v,w,y,b,S,Y,A,x;return(0,l.YH)(this,function(l){switch(l.label){case 0:return[4,d];case 1:if(l.sent(),n=new Map(s.current),Array.isArray(e)){t=!0,r=!1,i=void 0;try{for(o=e[Symbol.iterator]();!(t=(p=o.next()).done);t=!0)m=(f=p.value).key,g=f.value,n.set(m,g)}catch(e){r=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(r)throw i}}}else{v=!0,w=!1,y=void 0;try{for(b=e[Symbol.iterator]();!(v=(S=b.next()).done);v=!0)A=(Y=(0,a._)(S.value,2))[0],x=Y[1],n.set(A,x)}catch(e){w=!0,y=e}finally{try{v||null==b.return||b.return()}finally{if(w)throw y}}}return[4,h(n)];case 2:return l.sent(),null==c||c(u.AZ.SECRETS_USED,{action:"addEntries"}),[2]}})})).apply(this,arguments)}function h(e){return m.apply(this,arguments)}function m(){return(m=(0,r._)(function(e){var n,t;return(0,l.YH)(this,function(r){switch(r.label){case 0:return[4,d];case 1:return n=r.sent(),s.set(Array.isArray(e)?new Map(e.map(function(e){return[e.key,e.value]})):e),[4,n.request({secretsSetRequest:{contents:eR.A.serialize(s.current)}})];case 2:if((t=r.sent()).error)throw Error(t.error);return null==c||c(u.AZ.SECRETS_USED,{action:"replaceAll"}),[2]}})})).apply(this,arguments)}function g(){return(g=(0,r._)(function(){var e,n,t,r,i,o,a,p,f,m,g,v=arguments;return(0,l.YH)(this,function(l){switch(l.label){case 0:for(n=Array(e=v.length),t=0;t<e;t++)n[t]=v[t];return[4,d];case 1:if(l.sent(),0===(r=n.filter(function(e){return s.current.has(e)})).length)return[2];i=new Map(s.current),o=!0,a=!1,p=void 0;try{for(f=r[Symbol.iterator]();!(o=(m=f.next()).done);o=!0)g=m.value,i.delete(g)}catch(e){a=!0,p=e}finally{try{o||null==f.return||f.return()}finally{if(a)throw p}}return[4,h(i)];case 2:return l.sent(),null==c||c(u.AZ.SECRETS_USED,{action:"removeEntries"}),[2]}})})).apply(this,arguments)}function w(){return(w=(0,r._)(function(e){var n;return(0,l.YH)(this,function(t){switch(t.label){case 0:return[4,d];case 1:return[4,t.sent().request({externalSecretsSetRequest:{externalSecrets:Array.isArray(e)?e.reduce(function(e,n){return(0,o._)((0,i._)({},e),(0,eE._)({},n.key,n.url))},{}):Object.fromEntries(e)}})];case 2:if((n=t.sent()).error)throw Error(n.error);return[2]}})})).apply(this,arguments)}return t.openChannel({service:"secrets",name:"secretser",skip:function(){return!1}},function(e){var t;return(t=e.channel).onCommand(function(e){if(e.secretsGetResponse){var n=e.secretsGetResponse.contents;if(n){var t=eR.A.parse(n);!function(e,n){if(e.size!==n.size)return!1;var t=!0,r=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(t=(o=l.next()).done);t=!0){var s=(0,a._)(o.value,2),c=s[0],u=s[1];if(!n.has(c)||n.get(c)!==u)return!1}}catch(e){r=!0,i=e}finally{try{t||null==l.return||l.return()}finally{if(r)throw i}}return!0}(s.current,t)&&s.set(t)}}}),t.request({secretsGetRequest:{}}).then(function(e){e.channelClosed||(e.error&&v.v4(function(n){n.setTag("service","secrets"),v.Cp(Error("failed to initialize secrets: "+e.error))}),n(t))}),function(){d=new Promise(function(e){return n=e})}}),{addEntries:function(e){return f.apply(this,arguments)},removeEntries:function(){return g.apply(this,arguments)},read:function(){return p.apply(this,arguments)},replaceAll:h,watch:function(e){var n=!1,t=null;return d.then(function(){n||(t=s.subscribe(e))}),function(){n=!0,null==t||t()}},replaceAllExternalSecrets:function(e){return w.apply(this,arguments)}}}({container:ez,observable:new eD.N(new Map),track:void 0===eW||eW?x.u4:void 0})});return null==eG||eG.span.end(),m(eV),function(){m(null),setTimeout(function(){eV.container.destroy()},500)}},[e]),t}},99941:(e,n,t)=>{"use strict";t.d(n,{L:()=>A});var r=t(17844),i=t(93629),o=t(17459),a=t(12694),l=t(88263),s=t(21462),c=t(47987),u=t(70237),d=t(64583),p=t(48521),f=t(5721),h=t(38292),m=t(77089),g=t(36112),v=t(81642),w=t(83650),y=t(80762),b=t(82842),S=(0,d.x)({field:[p.wp.display.grid,{gridTemplateAreas:'\n      "label label"\n      "input icon-right"\n      "description description"\n      ',gridTemplateColumns:"1fr 32px"}]}),Y=(0,s.forwardRef)(function(e,n){var t=e.dataCy,a=e.children,s=(0,o._)(e,["dataCy","children"]),u=(0,r._)({"data-cy":t,ref:n},s);return(0,l.Y)(c.L,(0,i._)((0,r._)({},u),{children:a}))});function A(e){var n=e.label,t=e.description,c=e.errorMessage,d=e.isLoading,p=(0,o._)(e,["label","description","errorMessage","isLoading"]),A=(0,a._)((0,s.useState)(!1),2),x=A[0],C=A[1],_=(0,s.useRef)(null);return(0,s.useEffect)(function(){var e=_.current;if(e){var n=function(){C(!0)};e.addEventListener("mouseenter",n);var t=function(){C(!1)};return e.addEventListener("mouseleave",t),function(){e.removeEventListener("mouseenter",n),e.removeEventListener("mouseleave",t)}}},[_]),(0,l.Y)(Y,(0,i._)((0,r._)({},p),{css:S.field,children:function(e){var r=e.isEmpty;return(0,l.FD)(l.FK,{children:[(0,l.Y)(u.J,{style:{gridArea:"label"},children:n}),(0,l.Y)(m.pd,{"aria-busy":d,style:{gridArea:"input /input / icon-right / icon-right",paddingRight:32}}),(0,l.Y)(g.ui,{elevated:!0,style:{gridArea:"icon-right",alignSelf:"center",justifySelf:"center"},innerRef:_,children:r?(0,l.Y)(l.FK,{children:d?(0,l.Y)(y.A,{}):(0,l.Y)(b.A,{})}):(0,l.Y)(h.K0,{alt:"Clear field",children:x?(0,l.Y)(w.A,{}):d?(0,l.Y)(y.A,{}):(0,l.Y)(w.A,{})})}),t?(0,l.Y)(v.A3,{style:{gridArea:"description"},children:t}):null,(0,l.Y)(f.bg,{children:c})]})}}))}}},e=>{var n=n=>e(e.s=n);e.O(0,[4017,5648,3451,3214,8185,7573,3950,1335,2647,3158,4344,8508,4611,3341,3030,6549,4550,9864,7853,2619,8941,5731,5605,113,9493,4177,3025,4308,2778,3272,9391,3573,4712,9158,3104,7656,6772,1221,4631,3347,3830,6172,4968,6317,1113,9367,1987,4404,4050,6454,9170,2743,2730,186,2252,5756,6593,636,8792],()=>n(63831)),_N_E=e.O()}]);
//# sourceMappingURL=replEnvironmentDesktop-52e76e9668723fba.js.map