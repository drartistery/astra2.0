!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=Error().stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="117b1b37-b2d8-4acf-9292-7df016c45bb0",e._sentryDebugIdIdentifier="sentry-dbid-117b1b37-b2d8-4acf-9292-7df016c45bb0")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"d5236f02"},(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3347],{6888:(e,n,t)=>{"use strict";t.d(n,{A:()=>s});var r=t(37743),o=t(48122),i=t(22531),a=t(64254).hp,s=function(){function e(n,t){if((0,r._)(this,e),this.asEncoding={},this.asBuffer=null,t&&"string"==typeof n)this.asEncoding[t]=n;else if(null==n)this.asBuffer=a.alloc(0);else if(n instanceof a)this.asBuffer=n;else if("string"==typeof n)this.asEncoding.utf8=n;else if(n instanceof ArrayBuffer)this.asBuffer=a.from(n);else{if(n instanceof e)return n;n instanceof Uint8Array?this.asBuffer=a.from(n):(void 0===n?"undefined":(0,i._)(n))==="object"&&"object"===(0,i._)(n.asEncoding)&&null!==n.asEncoding&&(n.asBuffer instanceof a||null===n.asBuffer)&&(this.asBuffer=n.asBuffer||null,"string"==typeof n.asEncoding.base64&&(this.asEncoding={base64:n.asEncoding.base64}),"string"==typeof n.asEncoding.utf8&&(this.asEncoding={utf8:n.asEncoding.utf8}))}}var n=e.prototype;return n.toString=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"utf8";if(void 0!==this.asEncoding[e])return this.asEncoding[e];var n=this.toBuffer().toString(e);return this.asEncoding[e]=n,n},n.toJSON=function(){return{asEncoding:{base64:this.toString("base64")},asBuffer:null}},n.toBuffer=function(){if(this.asBuffer)return this.asBuffer;for(var e in this.asEncoding){var n=this.asEncoding[e];if("string"==typeof n){var t=a.from(n,e);return this.asBuffer=t,t}}return this.asBuffer=a.alloc(0),this.asBuffer},e.from=function(n,t){return new e(n,t)},e.isBuffer=function(n){return n instanceof e},(0,o._)(e,[{key:"length",get:function(){return void 0!==this.asEncoding.utf8?this.asEncoding.utf8.length:this.toBuffer().length}}]),e}()},10449:(e,n,t)=>{"use strict";t.d(n,{KN:()=>E.K,no:()=>S,wF:()=>_,Ay:()=>T});var r=t(29935),o=t(17844),i=t(93629),a=t(17459),s=t(86105),c=t(82643),u=t(90629),l=t(8696),f=t.n(l),d=t(74096),h=t(47946),g=t(72826),p=t(57021),v=t(80966),m=t(88991);function w(e){return b.apply(this,arguments)}function b(){return(b=(0,r._)(function(e){var n,t,r,o;return(0,c.YH)(this,function(i){return n=e.client,t=e.args,r=e.env,o=e.noUserEnv,[2,new Promise(function(e){var i=n.openChannel({service:"exec"},function(n){var a=n.channel,s="";a.onCommand(function(e){e.output&&(s+=e.output)}),a.request({exec:{args:t,env:r,noUserEnv:null!=o&&o}}).then(function(n){return n.channelClosed?void e({error:"Channel closed",output:s||null}):("open"===a.status&&i(),n.error)?void e({error:n.error,output:s||null}):void e({output:s,error:null})})})})]})})).apply(this,arguments)}var C=t(12689),E=t(11950),y=t(95570),_=5900,S=5904,x=.1>=Math.random();function O(e){return Math.min(1e3*Math.pow(2,e),6e4)+Math.floor(500*Math.random())}function T(e){var n,t=e.fetchConnectionMetadata,l=e.getOverrideClusterMetadata,b=e.getDotdevUrl,S=e.logger,T=e.onUnrecoverableError,M=e.performance,A=e.preFetchConnectionMetadata,R=e.registerReconnectionMonitor,N=e.unregisterReconnectionMonitor,k=e.crosisTimeout,P=e.crosisWebSocketClass,D=e.traceCtx,L=(0,g.Ay)();L.setMaxListeners(1e3);var B=null,I=new d.Kj;I.setUnrecoverableErrorHandler(T),I.onDebugLog(function(e){if("breadcrumb"===e.type){n="container:state"===e.message?{containerState:e.data}:"data"in e?e.data:void 0,u.ZQ({category:"crosisV6",message:e.message,data:n});var n,t={replid:null==B?void 0:B.repl.id,language:null==B?void 0:B.repl.language};switch(e.message){case"timeout:hit":S.error("crosis connect timeout",t);break;case"onUnrecoverableError":var r=(0,o._)({errorMessage:e.data.message},t);S.error("crosis unrecoverable error",r);break;case"status:retrying":var i=e.data,s=i.error,c=(0,a._)(i,["error"]),l=(0,o._)({errorMessage:s.message},t,c);S.error("crosis retrying",l);break;case"status:connecting":case"status:reconnecting":var f=e.message.split(":")[1];S.info("crosis ".concat(f),(0,o._)({},t,"data"in e?e.data:void 0));break;case"websocket:polling fallback":S.info("crosis polling fallback",(0,o._)({},t))}}});var F=window.location.search.includes("debug=1");F&&I.onDebugLog(function(e){"log"===e.type&&y.log("in"===e.log.direction?"--\x3e":"<--",e.log.channel.service,{cmd:e.log.cmd,channel:e.log.channel})});var U=function(e){var n=void 0;if(void 0!==D&&e.service){var t="";"string"==typeof e.service?t=e.service:B&&(t=e.service(B)),t&&(n=(0,p.Ux)(D,"container.".concat(t,".openChannel")).span)}return n};return{logger:S,performance:M,onPortOpened:function(e){return L.on(E.s.PORT_OPEN,e),function(){L.removeListener(E.s.PORT_OPEN,e)}},onPortClosed:function(e){return L.on(E.s.PORT_CLOSE,e),function(){L.removeListener(E.s.PORT_CLOSE,e)}},onToast:function(e){return L.on(E.s.TOAST,e),function(){L.removeListener(E.s.TOAST,e)}},onConnectionStateChanged:function(e){return I.onConnectionStateChange(e)},connect:function(e){var n,u,g=this,p=e.context,w=e.fetchConnectionMetadataExtras,b=e.getMinimumRetryDelayMs,N=(0,a._)(e,["context","fetchConnectionMetadataExtras","getMinimumRetryDelayMs"]);I.getConnectionState()!==E.K.DISCONNECTED&&I.close(),B=p,R(function(){I.getConnectionState()===E.K.DISCONNECTED&&g.connect((0,o._)({context:p,fetchConnectionMetadataExtras:w,getMinimumRetryDelayMs:b},N))},function(){I.getConnectionState()!==E.K.DISCONNECTED&&g.close({expectReconnect:!0})});var D=this,U=(n=(0,r._)(function(e){var n,t,r,i,a,s;return(0,c.YH)(this,function(c){switch(c.label){case 0:if(n=e.chan0,t=e.gurl,r=e.isFirst,"open"!==n.status)return[2];return i=S.timeStart({gurl:t}),a=setTimeout(function(){S.error("ping with no response",{gurl:t}),D.connect((0,o._)({context:p,fetchConnectionMetadataExtras:w,getMinimumRetryDelayMs:b},N))},3e4),[4,n.request({ping:{}})];case 1:if(s=c.sent().channelClosed,clearTimeout(a),s)return[2];return r?i("latency to pid1",{type:"startup"}):x&&i("latency to pid1",{type:"periodic"}),setTimeout(function(){return U({chan0:n,gurl:t,isFirst:!1})},1e3),[2]}})}),function(e){return n.apply(this,arguments)}),Y={getNextRetryDelayMs:function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return Math.max(O.apply(void 0,(0,s._)(n)),b())},context:p,reuseConnectionMetadata:!0,fetchConnectionMetadata:(u=(0,r._)(function(e){var n,r,a,s,u,f;return(0,c.YH)(this,function(c){switch(c.label){case 0:if("function"!=typeof A)return[3,2];return[4,A()];case 1:c.sent(),c.label=2;case 2:if("function"!=typeof l)return[3,4];return[4,l()];case 3:return r=c.sent(),[3,5];case 4:r=null,c.label=5;case 5:if(n=r,e.aborted)return[2,{error:d.wd.Aborted}];a=S.timeStart({hasCustomFetch:!!N.fetchConnectionMetadata}),c.label=6;case 6:if(c.trys.push([6,12,,13]),!N.fetchConnectionMetadata)return[3,8];return[4,N.fetchConnectionMetadata()];case 7:return s=c.sent(),[3,11];case 8:return u={asViewer:p.asViewer,replId:p.repl.id,isLoggedIn:!!p.currentUser},[4,(0,v.E)()];case 9:return[4,t.apply(void 0,[o._.apply(void 0,[(u.requestedPid2Version=c.sent(),u.format=h.api.token.ReplToken.WireFormat.PROTOBUF,u.overrideClusterMetadata=n,u),w])])];case 10:s=c.sent(),c.label=11;case 11:return[3,13];case 12:if(f=c.sent(),e.aborted)return[2,{error:d.wd.Aborted}];switch(f&&f.statusCode){case 400:case 401:case 403:throw new C.mU(f.statusCode);case 408:case 409:case 429:case 500:case 502:case 503:case 504:case 526:return S.warn("Retriable error while fetching connection metadata",{statusCode:f.statusCode,originalMessage:f.message}),[2,{error:d.wd.Retriable}]}throw f;case 13:if(e.aborted)return[2,{error:d.wd.Aborted}];return F&&y.log("connecting",s),a("fetched connection metadata"),[2,(0,i._)((0,o._)({},s),{error:null})]}})}),function(e){return u.apply(this,arguments)})};k&&k>0&&(Y.timeout=k),P?Y.WebSocketClass=P:"undefined"==typeof WebSocket&&(Y.WebSocketClass=f());var H=M.now(),W=0;I.open(Y,function(e){var n,t=e.channel;F&&y.log("connected",{replId:p.repl.id});var r=t.onCommand(function(e){switch(e.body){case"portOpen":if(!e.portOpen)throw Error("portOpen only handles portOpen commands");var n=!!e.portOpen.forwarded,t=e.portOpen,r=t.address,o=t.cmdline,i=t.cgroup,a=t.pid,s=e.portOpen.port||0;if(8284===s||5901===s)return;L.emit(E.s.PORT_OPEN,{port:s,externalPort:e.portOpen.externalPort,isVnc:s===_,isForwarded:n,address:r,cmdline:o,cgroup:i,pid:a});break;case"portClose":if(!e.portClose)throw Error("portClose only handles portClose commands");var c=e.portClose.port||0,u=e.portClose.address;if(8284===c||5901===c)return;L.emit(E.s.PORT_CLOSE,{port:c,externalPort:e.portClose.externalPort,isVnc:c===_,address:u});break;case"protocolError":T(new m.A("goval panic").setExtra("message",null!=(f=null==(l=e.protocolError)?void 0:l.text)?f:"protocol error"));break;case"toast":var l,f,d,h=null==(d=e.toast)?void 0:d.text;if(!h)break;L.emit(E.s.TOAST,h)}});U({chan0:t,gurl:null==(n=I.getConnectionMetadata())?void 0:n.gurl,isFirst:!0}),window.v6ws=I.ws;var o=M.now()-H;return S.info("connected to pid1",{time:o,reconnectCount:W,replid:p.repl.id,language:p.repl.language}),function(e){var n=e.willReconnect;if(r(),!n){B=null;return}H=M.now(),W++}})},openChannel:function(e,n){var t=U(e);return I.openChannel(e,function(e){var r=e.channel.onCommand(function(e){if("protocolError"===e.body){var n,t;T(new m.A("goval panic").setExtra("message",null!=(t=null==(n=e.protocolError)?void 0:n.text)?t:"protocol error"))}}),o=n(e);return void 0!==t&&t.end(),function(e){o&&o(e),r&&r()}})},getConnectionState:function(){return I.getConnectionState()},exec:(0,r._)(function(){var e,n,t,r=arguments;return(0,c.YH)(this,function(o){for(n=Array(e=r.length),t=0;t<e;t++)n[t]=r[t];return[2,w({client:I,args:n})]})}),execImmediately:(0,r._)(function(){var e,n,t,r=arguments;return(0,c.YH)(this,function(o){for(n=Array(e=r.length),t=0;t<e;t++)n[t]=r[t];return[2,w({client:I,args:n,noUserEnv:!0})]})}),execWithEnv:(n=(0,r._)(function(e){var n,t,r,o=arguments;return(0,c.YH)(this,function(i){for(t=Array((n=o.length)>1?n-1:0),r=1;r<n;r++)t[r-1]=o[r];return[2,w({client:I,args:t,env:e})]})}),function(e){return n.apply(this,arguments)}),close:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{expectReconnect:!1};I.getConnectionState()!==E.K.DISCONNECTED&&I.close(e)},destroy:function(){I.destroy(),L.removeAllListeners(),N()},client:function(){return I},focus:function(){var e=I.getChannel(0);e&&e.send({focused:{}})},getConnectionMetadata:function(){return I.getConnectionMetadata()},getContext:function(){return B},getDotdevUrl:function(){var e=I.getConnectionMetadata();if(!e||I.getConnectionState()!==E.K.CONNECTED)throw Error("Cannot get dot dev url when container is not connected");return b(e)},unrecoverableError:function(e,n){I.destroy(),L.removeAllListeners(),T(n?m.A.wrap(e).setExtras(n):e)}}}},11950:(e,n,t)=>{"use strict";t.d(n,{K:()=>r.KN,s:()=>o});var r=t(74096),o=function(e){return e.CONNECTION_STATE_CHANGE="CONNECTION_STATE_CHANGE",e.PORT_OPEN="PORT_OPEN",e.PORT_CLOSE="PORT_CLOSE",e.TOAST="TOAST",e}({})},12689:(e,n,t)=>{"use strict";t.d(n,{Ay:()=>l,mU:()=>f,ub:()=>c});var r=t(62019),o=t(37743),i=t(1833),a=t(12694),s=t(89264),c=function(e){return e.NotFound="NotFound",e.NotAllowed="NotAllowed",e.ConcurrentReplLimit="ConcurrentReplLimit",e.LanguageTokenDenied="LanguageTokenDenied",e.RequiresRefresh="RequiresRefresh",e.CrosisChannel="CrosisChannel",e}({}),u={"repl not found":"NotFound","not allowed to run at this time":"NotAllowed","language tokens are only for logged out people.":"LanguageTokenDenied","user is required to refresh":"RequiresRefresh","channel with name ot":"CrosisChannel","cannot send any more commands after a close request on channel for ot":"CrosisChannel"};function l(e){var n=!0,t=!1,r=void 0;try{for(var o,i=Object.entries(u)[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var s=(0,a._)(o.value,2),c=s[0],l=s[1];if(e.message.toLowerCase().includes(c))return l}}catch(e){t=!0,r=e}finally{try{n||null==i.return||i.return()}finally{if(t)throw r}}return null}var f=function(e){function n(e){return(0,o._)(this,n),(0,r._)(this,n,["user is required to refresh: "+e])}return(0,i._)(n,e),n}((0,s._)(Error))},13256:(e,n,t)=>{"use strict";t.d(n,{CZ:()=>s,pI:()=>a});var r=t(47946),o=t(2272),i=t(64254).hp;function a(e){var n=e.split(".");if(4!==n.length)throw Error("Invalid token: should have exactly 4 parts: "+e);for(var t=n[2].replace(/-/g,"+").replace(/_/g,"/");t.length%4;)t+="=";var o=window.atob(t);if(o.length<64)throw Error("Invalid token: signed part is too short: "+o.length);var a=o.substring(0,o.length-64);return r.api.token.ReplToken.decode(new i(a,"base64"))}function s(e){return e.dotdevHostname.endsWith(".localhost")?"http://".concat(e.dotdevHostname,":8081"):"https://".concat(e.dotdevHostname)}o.env.PROXY_SUFFIX},17290:(e,n,t)=>{"use strict";t.d(n,{s:()=>i});var r=t(11797),o=t(49069);function i(e,n){var t=[],i=!0,a=!1,s=void 0;try{for(var c,u=(0,r.Ui)(e.toString(),n.toString())[Symbol.iterator]();!(i=(c=u.next()).done);i=!0){var l=c.value,f=l.fromA,d=l.fromB,h=l.toA,g=l.toB;f===h&&t.push({from:f,insert:n.slice(d,g)}),d===g&&t.push({from:f,to:h,insert:""}),f!==h&&d!==g&&t.push({from:f,to:h,insert:n.slice(d,g)})}}catch(e){a=!0,s=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw s}}return o.VR.of(t,e.length)}},42795:(e,n,t)=>{"use strict";function r(){var e,n,t={promise:new Promise(function(t,r){e=t,n=r}),resolve:function(n){t.isFulfilled=!0,e(n)},reject:function(e){t.isFulfilled=!0,n(e)},isFulfilled:!1};return t}t.d(n,{A:()=>r})},56697:(e,n,t)=>{"use strict";t.d(n,{T:()=>u,w:()=>s});var r=t(29935),o=t(12694),i=t(82643),a=t(21462);function s(){return c.apply(this,arguments)}function c(){return(c=(0,r._)(function(){return(0,i.YH)(this,function(e){return"undefined"!=typeof document&&document.hidden?[2,new Promise(function(e){var n=function(){document.hidden||(document.removeEventListener("visibilitychange",n),e())};document.addEventListener("visibilitychange",n)})]:[2]})})).apply(this,arguments)}function u(){var e=(0,o._)((0,a.useState)(!1),2),n=e[0],t=e[1];return(0,a.useEffect)(function(){var e=function(){t(!document.hidden)};return document.addEventListener("visibilitychange",e),e(),function(){document.removeEventListener("visibilitychange",e)}},[]),n}},57021:(e,n,t)=>{"use strict";t.d(n,{Lk:()=>l,Ux:()=>v,ce:()=>d,eT:()=>g,mY:()=>m,rA:()=>c});var r=t(29935),o=t(82643),i=t(50548),a=t(43628),s=t(3136),c="repl.it-web",u=i.u.getTracer(c);function l(e,n){return f.apply(this,arguments)}function f(){return(f=(0,r._)(function(e,n){return(0,o.YH)(this,function(t){switch(t.label){case 0:return[4,d(a._.active(),e,n)];case 1:return[2,t.sent()]}})})).apply(this,arguments)}function d(e,n,t){return h.apply(this,arguments)}function h(){return(h=(0,r._)(function(e,n,t){var r,a;return(0,o.YH)(this,function(o){switch(o.label){case 0:r=u.startSpan(n,void 0,e),a=i.u.setSpan(e,r),o.label=1;case 1:return o.trys.push([1,,3,4]),[4,t(a)];case 2:return[2,o.sent()];case 3:return r.end(),[7];case 4:return[2]}})})).apply(this,arguments)}function g(e,n,t){return p.apply(this,arguments)}function p(){return(p=(0,r._)(function(e,n,t){var r,a;return(0,o.YH)(this,function(o){switch(o.label){case 0:if(void 0!==e)return[3,2];return[4,t()];case 1:return[2,o.sent()];case 2:r=u.startSpan(n,void 0,e),a=i.u.setSpan(e,r),o.label=3;case 3:return o.trys.push([3,,5,6]),[4,t(a,r)];case 4:return[2,o.sent()];case 5:return r.end(),[7];case 6:return[2]}})})).apply(this,arguments)}function v(e,n){var t=u.startSpan(n,void 0,e),r=i.u.setSpan(e,t);return{span:t,childCtx:r}}function m(e){var n={};return new s.lm().inject(e,n,{set:function(e,n,t){e[n]=t}}),n}},69549:(e,n,t)=>{"use strict";t.d(n,{Ay:()=>p,KN:()=>g.K});var r=t(29935),o=t(82643),i=t(71115),a=t.n(i),s=t(58590),c=t(10449),u=t(34626),l=t(13256),f=t(56697),d=t(51365),h=t(5632),g=t(11950);function p(e){var n,t,i=e.onUnrecoverableError,g=e.ctx,p={register:function(e,r){return t(),window.addEventListener("online",e),window.addEventListener("offline",r),n=function(){window.removeEventListener("online",e),window.removeEventListener("offline",r)},t},unregister:t=function(){n&&(n(),n=void 0)}},v=p.register,m=p.unregister;return(0,c.Ay)({fetchConnectionMetadata:d.A,getOverrideClusterMetadata:h.A,getDotdevUrl:l.CZ,logger:u.vF,onUnrecoverableError:i,performance:window.performance,preFetchConnectionMetadata:(0,r._)(function(){var e;return(0,o.YH)(this,function(n){switch(n.label){case 0:if(window.performance.clearMarks(s.pY.fetchConnectionMetadataPageInvisibleStart),window.performance.clearMarks(s.pY.fetchConnectionMetadataPageInvisibleEnd),e=u.vF.timeStart(),window.performance.mark(s.pY.fetchConnectionMetadataPageInvisibleStart),"/migrateReplToNix"===a().pathname)return[3,2];return[4,(0,f.w)()];case 1:n.sent(),n.label=2;case 2:window.performance.mark(s.pY.fetchConnectionMetadataPageInvisibleEnd),e("page visible fetch connection metadata"),n.label=3;case 3:return[2]}})}),registerReconnectionMonitor:v,unregisterReconnectionMonitor:m,traceCtx:g})}},72826:(e,n,t)=>{"use strict";t.d(n,{Ay:()=>o,gT:()=>i});var r=t(38356);function o(){return new r.EventEmitter}function i(e,n){return function(t){return e.on(n,t),function(){e.off(n,t)}}}},76607:(e,n,t)=>{"use strict";t.d(n,{A:()=>i});var r=t(86105),o=t(42795);function i(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{wait:0},t=null,i=null,a=null,s=null;if(n.wait<0)throw Error("wait must be 0 or more");if(n.maxWait){if(n.maxWait<0)throw Error("maxWait must be 0 or more");if(n.maxWait<n.wait)throw Error("maxWait must be higher than wait")}function c(){i&&clearTimeout(i),i=null,s=null,t=null,a=null}function u(){if(!t||!i)throw Error("Expected to call debounced function once before flushing");var n=t,o=s;return c(),e.apply(void 0,(0,r._)(o)).then(function(e){return n.resolve(e),e}).catch(function(e){throw n.reject(e),e})}return Object.assign(function(){for(var e=arguments.length,r=Array(e),c=0;c<e;c++)r[c]=arguments[c];if(t){if(!i)throw Error("Did not expect to have deferred and no timeout");clearTimeout(i)}else t=(0,o.A)(),a=Date.now();return s=r,i=setTimeout(function(){u()},function(){if(!n.maxWait)return n.wait;if(!a)throw Error("Expected scheduledAt to be a set when getting wait");var e=Date.now()-a;return Math.min(n.maxWait-e,n.wait)}()),t.promise},{isScheduled:function(){return!!(t&&i)},cancel:function(){if(!i||!t)throw Error("Expected to call debounced function once before cancelling");var e=t;c(),e.reject(Error("Debounced function cancelled"))},flush:u})}},81085:()=>{}}]);
//# sourceMappingURL=3347-7d50557f38e940b5.js.map