!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="8ce03c6f-1305-4230-88c1-0efe91a1e5d2",e._sentryDebugIdIdentifier="sentry-dbid-8ce03c6f-1305-4230-88c1-0efe91a1e5d2")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"d5236f02"},(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9367],{483:(e,t,n)=>{"use strict";n.d(t,{S:()=>l,s:()=>c});var r=n(88263),i=n(21462),a=n(3299),o=(0,i.createContext)(null);function l(e){var t=e.children,n=e.sessionId,i=e.uploadFiles,l=e.onError,c=(0,a._u)({sessionId:n,uploadFiles:i,onError:l});return(0,r.Y)(o.Provider,{value:c,children:t})}function c(){var e=(0,i.useContext)(o);if(!e)throw Error("useAiChatAttachments(must be used within an AiChatAttachmentsProvider");return e}},3299:(e,t,n)=>{"use strict";n.d(t,{Ls:()=>f,Vg:()=>p,_u:()=>h});var r=n(29935),i=n(17844),a=n(93629),o=n(12694),l=n(82643),c=n(21462),u=n(35992),s=n(39391),d=n(15036),f="attached_assets",p=function(e){return"".concat(f,"/").concat(e)};function h(e){var t,n,f=e.sessionId,h=e.uploadFiles,m=e.onError,v=(0,d.Ay)(),g=(0,o._)((0,c.useState)([]),2),w=g[0],y=g[1],b=(0,o._)((0,c.useState)([]),2),_=b[0],x=b[1],A=(0,c.useMemo)(function(){return w.some(function(e){return e.isLoading})||_.some(function(e){return e.file.isLoading})},[w,_]),S=(0,c.useCallback)(function(e){y(function(t){return(0,u.jM)(t,function(t){var n=t.findIndex(function(t){return t.path===e});-1!==n&&t.splice(n,1)})})},[]),Y=(0,c.useCallback)(function(e){x(function(t){return(0,u.jM)(t,function(t){var n=t.findIndex(function(t){return t.file.path===e});-1!==n&&t.splice(n,1)})})},[]),T=(0,c.useCallback)((t=(0,r._)(function(e){var t,n,r,o,c,d,g,w,b,_,x,A;return(0,l.YH)(this,function(l){switch(l.label){case 0:t=e.map(function(e){return{path:p(e.fileName),mimeType:e.file.type,file:e.file,isLoading:!0}}),n=!0,r=!1,o=void 0;try{for(c=t[Symbol.iterator]();!(n=(d=c.next()).done);n=!0){if((g=d.value).file.size>s.wr)return null==m||m("Attachment size exceeds ".concat(s.wr/1024/1024," MB limit.")),v({action:"attempted_to_attach_file_exceeding_size_limit",fileType:g.file.type,fileSize:g.file.size,sessionId:f}),[2,[]];if("image/svg+xml"===g.file.type)return null==m||m("SVG images are not allowed"),v({action:"attempted_to_attach_svg_image",sessionId:f}),[2,[]]}}catch(e){r=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw o}}return w=!1,[4,new Promise(function(e){y(function(e){return(0,u.jM)(e,function(e){var n=t.filter(function(t){return!e.some(function(e){return e.path===t.path})});if(e.length+n.length>20)return null==m||m("You can only attach up to ".concat(20," files.")),e;w=!0,t.forEach(function(t){var n=e.findIndex(function(e){return e.path===t.path});-1!==n?e[n]=t:e.push(t)})})}),e()})];case 1:if(l.sent(),!w)return[2,[]];if(t.forEach(function(e){v({action:"attached_file",fileType:e.file.type,fileSize:e.file.size,sessionId:f})}),b=[],_=t.map(function(e){return e.file}),!h)return[3,5];l.label=2;case 2:return l.trys.push([2,4,,5]),[4,h({files:_,onError:function(e){t.forEach(function(e){return S(e.path)}),null==m||m("Error writing files: "+e)}})];case 3:return b=null!=(x=l.sent())?x:[],[3,5];case 4:return l.sent(),[2,[]];case 5:return A=new Map(b.map(function(e){var t=e.file,n=e.publicUrl;return[t.name,n]})),y(function(e){return(0,u.jM)(e,function(e){t.forEach(function(t){var n=e.findIndex(function(e){return e.path===t.path});-1!==n&&(e[n]=(0,a._)((0,i._)({},e[n]),{isLoading:!1,publicUrl:A.get(t.file.name)}))})})}),[2,t]}})}),function(e){return t.apply(this,arguments)}),[h,S,m,v,f]),D=(0,c.useCallback)((n=(0,r._)(function(e){var t,n,r,o,c,s;return(0,l.YH)(this,function(l){switch(l.label){case 0:return t=e.url,n=e.file,r=!1,[4,new Promise(function(e){x(function(e){return(0,u.jM)(e,function(e){var i=e.findIndex(function(e){return e.url===t&&e.file.path===n.path});if(-1===i&&e.length+w.length>=20)return null==m||m("You can only attach up to ".concat(20," files.")),e;r=!0,-1!==i?e[i]={url:t,file:n}:e.push({url:t,file:n})})}),e()})];case 1:if(l.sent(),!r)return[2,null];if(v({action:"attached_url_file",fileType:n.file.type,fileSize:n.file.size,sessionId:f}),!h)return[3,5];l.label=2;case 2:return l.trys.push([2,4,,5]),[4,h({files:[n.file],onError:function(e){Y(n.path),null==m||m("Error writing URL file: "+e)}})];case 3:return(c=null!=(o=l.sent())?o:[]).length>0&&(s=c[0].publicUrl,x(function(e){return(0,u.jM)(e,function(e){var n=e.findIndex(function(e){return e.url===t});-1!==n&&(e[n].file=(0,a._)((0,i._)({},e[n].file),{isLoading:!1,publicUrl:s}))})})),[3,5];case 4:return l.sent(),[2,null];case 5:return[2,{url:t,file:n}]}})}),function(e){return n.apply(this,arguments)}),[h,Y,m,v,f,w.length]);return{attachments:w,removeAttachment:S,removeUrlAttachment:Y,clearAttachments:function(){y([]),x([])},urlAttachments:_,addAttachments:T,addUrlAttachment:D,isLoading:A}}},3694:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var r=n(17844),i=n(93629),a=n(88263),o=n(71117);function l(e){return(0,a.Y)(o.Ay,(0,i._)((0,r._)({},e),{children:(0,a.Y)("path",{fillRule:"evenodd",d:"M12 2.25a.75.75 0 0 1 .75.75v10.19l3.72-3.72a.75.75 0 1 1 1.06 1.06l-5 5a.75.75 0 0 1-1.06 0l-5-5a.75.75 0 1 1 1.06-1.06l3.72 3.72V3a.75.75 0 0 1 .75-.75Zm-9 12a.75.75 0 0 1 .75.75v4A1.25 1.25 0 0 0 5 20.25h14A1.25 1.25 0 0 0 20.25 19v-4a.75.75 0 0 1 1.5 0v4A2.75 2.75 0 0 1 19 21.75H5A2.75 2.75 0 0 1 2.25 19v-4a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"})}))}},6217:e=>{e.exports={root:"SpeechToTextButton_root__P1bjL"}},7894:(e,t,n)=>{"use strict";n.d(t,{F:()=>u});var r=n(21462),i=n(86005),a=n(93369),o=n(41392),l=n(80446),c=n(45263);function u(e){var t=e.view,n=e.setPromptEditor,u=(0,r.useRef)(null),s=(0,a.A)(n);return(0,r.useEffect)(function(){if(t&&s.current){var e=s.current;return e({setValue:function(e){t.state.doc.toString()!==e&&(t.dispatch({changes:{from:0,to:t.state.doc.length,insert:e}}),requestAnimationFrame(function(){var e=t.state.doc.lines,n=t.state.doc.line(e).from;t.dispatch({effects:i.Lz.scrollIntoView(n,{y:"end"})})}))},getValue:function(){return t.state.doc.toString()},focus:function(){t.focus(),t.dispatch({selection:{anchor:t.state.doc.length}})},animatePlaceholder:function(){t.dispatch({effects:l.om.of(!0)}),(0,o.U)(u,"border-color",c.LU.accentPrimaryDefault),setTimeout(function(){requestAnimationFrame(function(){var e;null==(e=u.current)||e.style.removeProperty("border-color")})},60),t.focus()}}),function(){e(null)}}},[t,s]),u}},11903:(e,t,n)=>{"use strict";n.d(t,{bZ:()=>m,tP:()=>b,v$:()=>x});var r=n(83846),i=n(88263),a=n(49069),o=n(86005),l=n(57547),c=n(61311),u=n(94626),s=n(45263),d=n(64583),f=n(48521),p=n(76126),h=a.sj.define({combine:function(e){var t;return null!=(t=e[0])?t:0}}),m=new u.k(function(e){return h.of(e)}),v={marker:"cm-empty-state-dom"},g=o.Lz.theme((0,r._)({},".".concat(v.marker),{backgroundColor:s.LU.redDefault,opacity:"0.2"})),w=a.sU.define({create:function(e){return e.doc.length},update:function(e,t){return t.state.doc.length}}),y=function(e){return Math.max(e.doc.length-e.facet(h),0)},b=a.sU.define({create:y,update:function(e,t){return(0,l.$H)(t,"doc",h)?y(t.state):e},provide:function(e){return[w,g,(0,o.qd)({above:!1,update:function(t){return(0,l.$H)(t,e)},markers:function(t){var n=t.state.field(e);if(0===n)return[];var r=t.state.doc.length;return o.Ip.forRange(t,v.marker,a.OF.range(r-n,r))}})]}}),_=(0,d.x)({charLimit:[f.wp.color.redDefault]});function x(e){var t=e.view,n=(0,c.Vn)(t,b);return n?(0,i.Y)(p.EY,{variant:"small",css:_.charLimit,children:n}):null}},13539:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>g,jM:()=>w,p4:()=>v});var r=n(12694),i=n(88263),a=n(21462),o=n(83150),l=n(48521),c=n(39999),u=n(38292),s=n(54087),d=n(76126),f=n(10429),p=n(3694),h=n(80762),m=n(69258);function v(e,t){var n=t;return"audio/wave"===n&&(n="audio/wav"),"data:".concat(n,";base64,").concat(e)}function g(e){var t=e.fs,n=e.filePath,c=(0,r._)((0,a.useState)(null),2),s=c[0],f=c[1],m=(0,r._)((0,a.useState)(!0),2),v=m[0],g=m[1];(0,a.useEffect)(function(){var e=t.watchFile(n,{onChange:function(e){f(e.toString("base64")),g(!1)},onError:function(){f(null),g(!1)},onMoveOrDelete:function(){f(null),g(!1)}});return function(){e(),g(!0),f(null)}},[t,n]);var y=(0,o.P7)(n);"audio/wave"===y&&(y="audio/wav");var b=s?"data:".concat(y,";base64,").concat(s):"";return v?(0,i.Y)(h.A,{}):s?(0,i.FD)(i.FK,{children:[(0,i.Y)(w,{src:b,fileName:(0,o.WP)(n),mime:(0,o.P7)(n)}),(0,i.Y)(u.K0,{alt:"Download",css:[l.wp.position.absolute,l.wp.bottom(8),l.wp.right(8),l.wp.p(16)],children:(0,i.Y)("a",{href:"data:text/plain;base64,".concat(s),download:(0,o.WP)(n),css:[l.wp.color.foregroundDimmer],children:(0,i.Y)(p.A,{})})})]}):(0,i.Y)(d.EY,{multiline:!1,children:"Failed to load media file"})}var w=function(e){var t=e.src,n=e.fileName,r=e.mime,a=void 0===r?"":r;return a.startsWith("video/")?(0,i.Y)("video",{src:t,css:{maxHeight:"100%",maxWidth:"100%"},controls:!0,title:n}):a.startsWith("image/")?(0,i.Y)("img",{alt:"Preview",src:t,css:{width:"80%",height:"80%",objectFit:"contain",imageRendering:"pixelated"}}):a.startsWith("audio/")?(0,i.Y)("audio",{src:t,css:{maxHeight:"100%",maxWidth:"100%"},controls:!0,title:n}):"application/pdf"===a?(0,i.Y)("object",{data:t,type:"application/pdf",css:{width:"100%",height:"100%",flex:1},children:(0,i.FD)(f.S,{gap:16,align:"end",children:[(0,i.Y)(s.N,{colorway:"warning",icon:(0,i.Y)(m.A,{}),text:"Your browser doesn't support displaying PDFs inside of Replit."}),(0,i.Y)(c.v,{href:t,referrerPolicy:"no-referrer",target:"_blank",text:"View PDF in new tab",size:"small",variant:"outlined",colorway:"primary",noNextLink:!0})]})}):(0,i.Y)(d.EY,{multiline:!1,children:"File type not supported."})}},13911:(e,t,n)=>{"use strict";n.d(t,{A:()=>b});var r=n(88263),i=n(10190),a=n(40315),o=n(98444),l=n(701),c=n(57639),u=n(28844),s=Array.prototype.concat,d=function(e){return{recursive:!!e.recursive,bail:e.bail&&e.bail>0?e.bail:1e3}},f=function(e){return s.apply([],e)},p=function(e,t,n,r){return e.isDirectory?t.recursive?h(e,t,n+1,(0,u.join)(r,e.name)):Promise.resolve([]):new Promise(function(t,n){e.file?e.file(t,n):t(null)}).catch(function(){return null}).then(function(e){return e&&(e.dirPath=(0,u.join)(r,e.name)),e?[e]:[]})},h=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0;if(!e||n>=t.bail||!e.isDirectory||!e.createReader)return Promise.resolve([]);var i=null!=r?r:e.name;return new Promise(function(r){e.createReader().readEntries(function(e){return Promise.all(e.map(function(e){return p(e,t,n,i)})).then(function(e){return r(f(e))})},function(){return r([])})})},m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return h("function"==typeof e.getAsEntry?e.getAsEntry():e.webkitGetAsEntry?e.webkitGetAsEntry():null,d(t))},v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t=d(t),new Promise(function(n){var r,i;(null==e||null==(r=e.dataTransfer)?void 0:r.items)?Promise.all(f(e.dataTransfer.items).filter(function(e){return"file"===e.kind}).map(function(e){return m(e,t).then(function(t){if(!t.length){var n=e.getAsFile();t=n?[n]:t}return t})})).then(function(e){return n(f(e))}):(null==e||null==(i=e.dataTransfer)?void 0:i.files)?n(f(e.dataTransfer.files)):n([])})},g=n(6156);document.addEventListener("drop",function(e){var t;(null==(t=e.dataTransfer)?void 0:t.files.length)&&e.preventDefault()});var w=null,y=null;function b(e){var t=function(e){var t=e.isTouchBackend;if(y&&t)return y;if(w&&!t)return w;var n={dragDropManager:(0,c.b)(function(e){var n=t?(0,l.qi)(e,void 0,{delayTouchStart:500}):(0,a.t2)(e),r=n.handleTopDropCapture;return n.handleTopDropCapture=function(e){var t,i=n.monitor.getItemType();i===o.HTML||i===o.TEXT||i===o.FILE?(n.dropTargetIds=[],null==(t=n.currentNativeSource)||t.loadDataTransfer(e.dataTransfer),n.enterLeaveCounter.reset()):r.call(n,e),n.currentNativeSource&&(n.currentNativeSource.item.dirContent=v(e,{recursive:!0}))},n})};return t?y=n:w=n,n}({isTouchBackend:(0,g.JD)()});return(0,r.Y)(i.M.Provider,{value:t,children:e.children})}},15036:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>f,pI:()=>d});var r=n(71115),i=n.n(r),a=n(12584);function o(){var e=(0,a._)(["\n  query TrackAgentAnalyticsEvent($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        origin {\n          ... on Repl {\n            id\n          }\n        }\n      }\n    }\n  }\n"]);return o=function(){return e},e}var l=(0,n(41114).J1)(o()),c=n(40493),u=n(95139),s=n(53231);function d(e){var t,n,r=e.action,a=e.fileType,o=e.fileSize,d=e.length,f=e.prompt,p=e.context,h=e.messageText,m=e.planText,v=e.feedbackText,g=e.stepsApproved,w=e.sessionId,y=e.eventId,b=e.stepId,_=e.stepName,x=e.stepBlueprints,A=e.secretsRequested,S=e.freeCheckpoint,Y=e.forceTracking,T=e.replOwnerPlanName,D=e.stack;1;var F=(0,u.P1)(i()),k=(0,u.Po)(i());switch(i().pathname){case"/replEnvironmentDesktop":case"/replEnvironmentMobile":(t=i().query.replId?i().query.replId.toString():void 0)&&(n=function(e){var t,n=null;try{n=null===c.V||void 0===c.V?void 0:c.V.readQuery({query:l,variables:{replId:e}})}catch(e){}var r=(null==n?void 0:n.getRepl.__typename)==="Repl"?n.getRepl:void 0;return{replId:null==r?void 0:r.id,originReplId:null==r||null==(t=r.origin)?void 0:t.id}}(t).originReplId)}return(0,s.u4)(s.AZ.AGENT_USED,{action:r,file_type:a,is_mobile:F,is_bonsai:k,repl_id:t,file_size:o,length:d,prompt:f,context:p,message_text:h,plan_text:m,feedback_text:v,steps_approved:g,session_id:w,event_id:y,step_id:b,step_name:_,step_blueprints:x,secrets_requested:A,free_checkpoint:S,origin_repl_id:n,repl_owner_plan_name:T,stack:D})}function f(){return function(e){return d(e)}}},15811:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(12694),i=n(43177),a=n(98444);function o(e){var t=e.addAttachments,n=(0,r._)((0,i.H)(function(){return{accept:[a.FILE],drop:function(e){e.dirContent.then(function(e){t(e.filter(function(e){return".DS_Store"!==e.name}).map(function(e){return{fileName:e.name,file:e}}))})},collect:function(e){return{isOver:!0===e.isOver()}}}}),2);return{isDraggedOver:n[0].isOver,drop:n[1]}}},17307:(e,t,n)=>{"use strict";n.d(t,{e:()=>g});var r=n(29935),i=n(82643),a=n(88263),o=n(21462),l=n(51261),c=n(64583),u=n(48521),s=n(38292),d=n(10429),f=n(17844),p=n(93629),h=n(71117);function m(e){return(0,a.Y)(h.Ay,(0,p._)((0,f._)({},e),{children:(0,a.Y)("path",{fillRule:"evenodd",d:"M9.75 3A3.75 3.75 0 0 0 6 6.75V15a6 6 0 0 0 12 0V6.75a.75.75 0 0 1 1.5 0V15a7.5 7.5 0 0 1-15 0V6.75a5.25 5.25 0 1 1 10.5 0V15a3 3 0 0 1-6 0V6.75a.75.75 0 1 1 1.5 0V15a1.5 1.5 0 0 0 3 0V6.75A3.75 3.75 0 0 0 9.75 3Z",clipRule:"evenodd"})}))}var v=(0,c.x)({button:[u.wp.color.foregroundDimmer,{"&:hover:not([disabled], [aria-disabled])":u.wp.color.foregroundDefault}]});function g(e){var t,n=e.disabled,c=e.status,u=e.addAttachments,f=e.onInteract,p=(0,o.useRef)(null),h=(0,o.useRef)(null);return(0,a.FD)(d.S,{onClick:function(e){return e.stopPropagation()},children:[(0,a.Y)(s.K0,{alt:"Attach file",size:24,disabled:n||"loading"===c,onClick:function(){null==f||f(),p.current&&p.current.click()},css:v.button,children:(0,a.Y)(m,{})}),(0,a.Y)(l.v,{fileUploadInputRef:p,dirUploadInputRef:h,uploadFiles:(t=(0,r._)(function(e){return(0,i.YH)(this,function(t){switch(t.label){case 0:return[4,u(e.files.map(function(e){return{fileName:e.name,file:e}}))];case 1:return t.sent(),[2]}})}),function(e){return t.apply(this,arguments)})})]})}},23072:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var r=n(17844),i=n(93629),a=n(88263),o=n(71117);function l(e){return(0,a.Y)(o.Ay,(0,i._)((0,r._)({},e),{children:(0,a.Y)("path",{fillRule:"evenodd",d:"M11.665 1.33a.75.75 0 0 1 .67 0l10 5a.75.75 0 0 1 0 1.34l-10 5a.75.75 0 0 1-.67 0l-10-5a.75.75 0 0 1 0-1.34l10-5ZM3.677 7 12 11.162 20.323 7 12 2.839 3.677 7ZM1.33 11.665a.75.75 0 0 1 1.006-.336L12 16.162l9.665-4.833a.75.75 0 0 1 .67 1.342l-10 5a.75.75 0 0 1-.67 0l-10-5a.75.75 0 0 1-.336-1.006Zm0 5a.75.75 0 0 1 1.006-.336L12 21.162l9.665-4.833a.75.75 0 0 1 .67 1.342l-10 5a.75.75 0 0 1-.67 0l-10-5a.75.75 0 0 1-.336-1.006Z",clipRule:"evenodd"})}))}},29445:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(88263),i=n(45263),a=n(64583),o=n(48521),l=n(73108),c=n(10429),u=(0,a.x)({container:[o.wp.overflowX("auto"),o.wp.flex.row,o.wp.gap(8)],divider:{backgroundColor:i.LU.outlineDimmest}});function s(e){var t=e.detectedUrls,n=void 0===t?[]:t,i=e.fileAttachments,a=void 0===i?[]:i,o=e.className;if(0===n.length&&0===a.length)return null;var s=n.length>0&&a.length>0;return(0,r.FD)(c.S,{css:u.container,className:o,children:[n,s?(0,r.Y)(l.a,{css:u.divider}):null,a]})}},34591:(e,t,n)=>{"use strict";n.d(t,{r:()=>r});var r=n(86005).Lz.contentAttributes.of({autocorrect:"on"})},38527:(e,t,n)=>{"use strict";n.d(t,{m1:()=>C,Mw:()=>E,cU:()=>R});var r=n(12694),i=n(88263),a=n(21462),o=n(83150),l=n(13539),c=n(83846),u=n(45263),s=n(42425),d=n(64583),f=n(48521),p=n(38292),h=n(36112),m=n(83650),v=n(80762),g=(0,d.x)({button:[f.wp.position.absolute,f.wp.top(-6),f.wp.right(-6)]}),w=(0,d.x)({button:[g.button,(0,s.Li)("negative"),(0,c._)({borderRadius:"50%"},f.$_.canHover,{opacity:0})],uploadingButton:[g.button,(0,s.Li)("grey"),{borderRadius:"50%",backgroundColor:u.LU.backgroundRoot}]});function y(e){var t=e.onRemoveClick,n=e.isLoading,r=e.alt;return t?(0,i.Y)(h.ui,{elevated:!0,children:(0,i.Y)(p.K0,{alt:n?"Uploading...":void 0===r?"Remove attachment":r,size:18,onClick:t,css:n?w.uploadingButton:w.button,disabled:n,"data-attachment-status":n?"uploading":"remove",children:n?(0,i.Y)(v.A,{size:16}):(0,i.Y)(m.A,{size:16})})}):null}var b=n(973),_=n(46603),x=n(33999),A=n(49150),S=n(54087),Y=n(76126),T=n(59172),D=n(10429),F=n(1998),k=n(64631),L=n(69258),E=52,R=104,U=(0,d.x)({defaultButton:[f.wp.reset.button,b.b.outlined,f.wp.height(77),f.wp.width(130),f.wp.position.relative,f.wp.hover({'[data-attachment-status="remove"]':{opacity:1}}),{':focus-within [data-attachment-status="remove"]':{opacity:1}}],smallButton:[f.wp.reset.button,b.b.outlined,f.wp.height(E),f.wp.width(R),f.wp.position.relative,f.wp.hover({'[data-attachment-status="remove"]':{opacity:1}}),{':focus-within [data-attachment-status="remove"]':{opacity:1}}],tooltipContents:[f.wp.maxWidth("100%"),f.wp.textAlign.center],viewerModalContents:[f.wp.maxHeight("80vh"),f.wp.overflowY("auto")]});function C(e){var t,n,l,c=e.attachment,u=e.removeAttachment,s=e.readFile,d=e.getAttachmentTypeDisclaimer,p=e.imagesDisabledMessage,h=e.size,m=void 0===h?"default":h,v=d(c.mimeType),g=(0,r._)((0,a.useState)(!1),2),w=g[0],b=g[1];n=(null==(t=c.mimeType)?void 0:t.startsWith("image/"))?(0,i.Y)(O,{attachment:c,readFile:s,imagesDisabledMessage:p}):"text/markdown"===c.mimeType?(0,i.Y)(W,{attachment:c,readFile:s,size:m}):(0,i.Y)(z,{attachment:c,getAttachmentTypeDisclaimer:d}),l=(0,o.FN)(c.path)?(0,i.Y)(H,{attachment:c,readFile:s}):"text/markdown"===c.mimeType?(0,i.Y)(Z,{attachment:c,readFile:s}):(0,i.Y)(N,{attachment:c,readFile:s});var x=null!=v?v:p;return(0,i.FD)(i.FK,{children:[(0,i.Y)(_.SC,{onPress:function(){b(!0)},css:"default"===m?U.defaultButton:U.smallButton,children:(0,i.FD)(T.m_,{tooltip:(0,i.FD)(D.S,{css:U.tooltipContents,children:[(0,i.Y)(Y.EY,{children:(0,o.WP)(c.path)}),x?(0,i.Y)(Y.EY,{css:f.wp.color.orangeStrongest,children:x}):null]}),maxWidth:300,placement:"bottom",css:P.tooltip,children:[n,u?(0,i.Y)(y,{onRemoveClick:function(){return u(c.path)},isLoading:c.isLoading}):null]})}),(0,i.Y)(A.a,{isOpen:w,maxWidth:800,onRequestClose:function(){return b(!1)},centered:!0,children:(0,i.FD)(D.S,{css:U.viewerModalContents,p:16,gap:8,children:[(0,i.Y)(Y.EY,{variant:"subheadDefault",css:f.wp.textAlign.center,children:(0,o.WP)(c.path)}),l,v?(0,i.Y)(S.N,{text:v,colorway:"orange",icon:(0,i.Y)(L.A,{size:16})}):null]})})]})}var P=(0,d.x)({tooltip:[f.wp.flex.grow(1)],container:[f.wp.center,f.wp.flex.grow(1)],image:[f.wp.borderRadius(4)],disabledImage:[f.wp.borderRadius(4),{opacity:.3}],fileName:[f.wp.align.center,f.wp.rowWithGap(2)],imageWrapper:[f.wp.flex.grow(1)]});function z(e){var t=e.attachment,n=(0,e.getAttachmentTypeDisclaimer)(t.mimeType);return(0,i.FD)(D.S,{css:P.container,px:8,gap:4,children:[(0,i.Y)(x.A,{path:t.path,size:20}),(0,i.FD)(Y.EY,{color:"dimmer",multiline:!1,css:P.fileName,children:[n?(0,i.FD)(i.FK,{children:[(0,i.Y)(L.A,{size:16,color:u.LU.orangeStrongest})," "]}):null,(0,o.WP)(t.path)]})]})}function I(e){var t=e.file,n=e.setSrc;if(["image/jpeg","image/png","image/gif","image/webp"].includes(t.type))n(URL.createObjectURL(t));else{var r=new FileReader;r.onload=function(e){var t;(null==(t=e.target)?void 0:t.result)&&n(e.target.result)},r.readAsDataURL(t)}}function O(e){var t=e.attachment,n=e.readFile,o=e.imagesDisabledMessage,l=(0,r._)((0,a.useState)(t.path),2),c=l[0],s=l[1];return(0,a.useEffect)(function(){t.dataUrl?s(t.dataUrl):t.file?I({file:t.file,setSrc:s}):n&&n(t.path).then(function(e){if("content"in e){var n=e.content.toString("base64");s("data:".concat(t.mimeType,";base64,").concat(n))}})},[t,n]),(0,i.FD)(D.S,{css:P.imageWrapper,align:"center",justify:"center",children:[(0,i.Y)(F.A,{src:c,layout:"fill",alt:"Attached Image","aria-label":"Image",objectFit:"cover",css:o?P.disabledImage:P.image}),o?(0,i.Y)(L.A,{size:24,color:u.LU.orangeStrongest}):null]})}function N(e){var t=e.attachment,n=e.readFile,o=(0,r._)((0,a.useState)(null),2),l=o[0],c=o[1];return(0,a.useEffect)(function(){t.dataUrl?fetch(t.dataUrl).then(function(e){return e.text()}).then(function(e){return c(e)}):t.file?t.file.text().then(c):n&&n(t.path).then(function(e){"content"in e&&c(e.content.toString("utf8").slice(0,5e3)+(e.content.length>5e3?"...":""))})},[t.file,n,t]),(0,i.Y)(i.FK,{children:l?(0,i.Y)(Y.EY,{css:{whiteSpace:"pre-wrap"},children:l}):(0,i.Y)(v.A,{})})}var M=(0,d.x)({container:[f.wp.center,f.wp.px(8),f.wp.flex.grow(1),f.wp.flex.column],imageWrapper:[f.wp.center,f.wp.width("auto"),f.wp.height("auto"),f.wp.minWidth(200),f.wp.minHeight(200),f.wp.p(16)]});function H(e){var t=e.attachment,n=e.readFile,c=(0,r._)((0,a.useState)(t.path),2),u=c[0],s=c[1];return(0,a.useEffect)(function(){t.dataUrl?s(t.dataUrl):t.file?I({file:t.file,setSrc:s}):n&&n(t.path).then(function(e){if("content"in e){var n=e.content.toString("base64");s((0,l.p4)(n,t.mimeType))}})},[t,n]),(0,i.Y)(D.S,{css:M.container,gap:4,children:(0,i.Y)(D.S,{css:M.imageWrapper,children:(0,i.Y)(l.jM,{src:u,fileName:(0,o.WP)(t.path),mime:t.mimeType})})})}var V=(0,d.x)({container:[f.wp.textAlign.left,f.wp.justify.center,f.wp.align.start,f.wp.flex.grow(1),f.wp.flex.column,f.wp.gap(4),f.wp.backgroundColor.backgroundHigher,f.wp.borderRadius(2)],previewContainer:[f.wp.flex.column,f.wp.flex.grow(1),f.wp.borderRadius(4),f.wp.maxHeight(61),{position:"relative",overflow:"hidden"}],previewContainerSmall:[f.wp.flex.column,f.wp.flex.grow(1),f.wp.borderRadius(4),f.wp.maxHeight(E-16),{position:"relative",overflow:"hidden"}],previewContent:[{pointerEvents:"none",width:"100%",height:"100%",overflow:"hidden","& *":{fontSize:"5px !important",lineHeight:"1.2 !important"},"& p, & h1, & h2, & h3, & h4, & h5, & h6":{margin:"2px 0 !important"},"& code":{padding:"0 2px !important"}}]}),j={a:function(e){return(0,i.FD)(Y.EY,{children:["[",e.children,"](",e.href,")"]})},img:function(e){return(0,i.FD)(Y.EY,{children:["![",e.alt,"](",e.src,")"]})}};function W(e){var t=e.attachment,n=e.readFile,o=e.size,l=(0,r._)((0,a.useState)(null),2),c=l[0],u=l[1],s=function(e){return e.trim().split("\n").slice(0,50).join(" ").replace(/\s+/g," ").trim()};return(0,a.useEffect)(function(){t.file?t.file.text().then(function(e){u(s(e))}):n&&n(t.path).then(function(e){"content"in e&&u(s(e.content.toString("utf8")))})},[t,n]),(0,i.Y)(D.S,{css:V.container,px:8,children:(0,i.Y)(D.S,{css:"default"===(void 0===o?"default":o)?V.previewContainer:V.previewContainerSmall,children:c?(0,i.Y)(D.S,{css:V.previewContent,children:(0,i.Y)(k.Ay,{components:j,children:c})}):(0,i.Y)(v.A,{})})})}function Z(e){var t=e.attachment,n=e.readFile,o=(0,r._)((0,a.useState)(null),2),l=o[0],c=o[1];return(0,a.useEffect)(function(){t.file?t.file.text().then(c):n&&n(t.path).then(function(e){"content"in e&&c(e.content.toString("utf8"))})},[t,n]),(0,i.Y)(i.FK,{children:l?(0,i.Y)(D.S,{p:8,children:(0,i.Y)(k.Ay,{components:j,children:l})}):(0,i.Y)(v.A,{})})}},43333:(e,t,n)=>{"use strict";n.d(t,{N:()=>r});var r=n(86005).Lz.contentAttributes.of({autocapitalize:"on"})},44916:(e,t,n)=>{"use strict";n.d(t,{A:()=>O});var r=n(17844),i=n(17459),a=n(12694),o=n(86105),l=n(88263),c=n(71115),u=n(21462),s=n(90629),d=n(84344),f=n(6268),p=n(49069),h=n(86005),m=n(24879),v=n(95674),g=n(83355),w=n(9072),y=n(53889),b=n(77040),_=n(18918),x=n(2153),A=n(2615),S=n(93722),Y=n(96109),T=n(13018),D=n(61311),F=n(17969),k=n(5504),L=n(51244),E=n(93369),R=n(54240),U=n(95139),C=n(33781),P=h.w4.of([{key:"Shift-Enter",run:f.Bn,shift:f.Bn},{key:"ArrowDown",run:(0,d.aU)(!0)},{key:"ArrowUp",run:(0,d.aU)(!1)},{key:"PageDown",run:(0,d.aU)(!0,"page")},{key:"PageUp",run:(0,d.aU)(!1,"page")},{key:"Enter",run:d.$w},{key:"Mod-z",run:f.tN,preventDefault:!0},{key:"Mod-y",run:f.ZS,preventDefault:!0},{key:"Mod-Shift-z",run:f.ZS,preventDefault:!0}]),z=h.w4.of([{key:"Enter",run:f.Bn,shift:f.Bn}]),I=h.Lz.domEventHandlers({drop:function(e){var t;return!!(null==(t=e.dataTransfer)?void 0:t.files.length)&&(e.preventDefault(),!0)}});let O=(0,u.forwardRef)(function(e,t){var n,d,f,O,N,M,H,V,j,W,Z,B,q,K,$,G,J,Q=e.elementRef,X=e.initialDoc,ee=e.fontSize,et=e.readOnly,en=e.extensions,er=e.initializing,ei=e.loading,ea=e.onException,eo=(0,i._)(e,["elementRef","initialDoc","fontSize","readOnly","extensions","initializing","loading","onException"]),el=(0,a._)((0,u.useState)(null),2),ec=el[0],eu=el[1],es=(0,a._)((0,u.useState)(null),2),ed=es[0],ef=es[1],ep=(0,u.useRef)(X),eh=(0,a._)((0,u.useState)(0),2),em=eh[0],ev=eh[1],eg=(0,u.useRef)(em),ew=(0,u.useCallback)(function(){ev(function(e){if(e-eg.current>=5)throw Error("CodeMirror error refresh loop detected");return e+1})},[]);(0,u.useEffect)(function(){var e=setTimeout(function(){eg.current=em},1e3);return function(){return clearTimeout(e)}},[em]),(0,u.useImperativeHandle)(t,function(){return{view:ec,dom:ed}},[ec,ed]),(0,_.vO)();var ey=(0,E.A)(null!=ea?ea:_.oB),eb=(d=(n={fontSize:ee,readOnly:et,extensions:en,initializing:er,loading:ei}).fontSize,f=n.readOnly,O=n.extensions,N=n.initializing,M=n.loading,H=(0,c.useRouter)(),V=(0,L.a)(),j=(0,U.Po)(H),W=(0,U.m5)(),Z=(0,k._P)({controlName:"flag-editor-root-level-tooltips",logFlagToAnalytics:!1}),B=(0,_.Im)(O),K=(q=(0,C.D)()).values,$=q.isDarkColorScheme,G=S.i.use(K,$,d),J=[x.h.use(f,j,Z,!1),A.p.use(f),_.Hf.use(B),G,Y.R.use(!0),w.A.use(N),y.n5.use(M),b.D.use(W)],[p.Nb.highest(F.LI),D.Pb,y.zn,v.T,m.i,V?z:P,T.D,I].concat((0,o._)(J)));(0,u.useEffect)(function(){var e,t=function(e){if(ey.current(e),(0,_.Mq)(e)){var t=e instanceof Error?e.message:void 0;s.ZQ({category:"codemirror",message:"Codemirror refresh called",data:{error:t},level:"error"}),ew()}};if(ed){var n=null;try{n=new h.Lz({doc:null!=(e=ep.current)?e:void 0,parent:ed,extensions:[h.Lz.exceptionSink.of(t)].concat((0,o._)(eb))})}catch(e){t(e)}return n&&eu(n),function(){if(n){eu(null);try{n.destroy()}catch(e){t(e)}}}}},[ed,em]),(0,g.O)(ec);var e_=(0,R.S)([ef,Q],{breadcrumb:"client/codemirror/react/ProseCodeMirror.tsx:353"});return(0,l.FD)(l.FK,{children:[(0,l.Y)("div",(0,r._)({ref:e_},eo)),(0,l.Y)(F.OE,{view:ec})]})})},47104:(e,t,n)=>{"use strict";n.d(t,{fd:()=>S,Ff:()=>y,Wd:()=>g});var r=n(35992),i=n(1230),a=n(49069),o=n(86005),l=n(27213),c=n.n(l),u=n(88408),s=["py","md"],d=u.filter(function(e){return!s.includes(e)}).map(function(e){return new RegExp("\\.".concat(e.replace(".",""),"$"))}),f=/(https?:\/\/)?[\w~@#$%&+=\-.]+\.[^\s]+/g;function p(e){for(var t,n=[];null!==(t=f.exec(e));){for(var r=t[0];r.length>0&&/[.,!?)]$/.test(r);)r=r.slice(0,-1);c()(r,{host_whitelist:d})&&n.push({url:r,start:t.index,end:t.index+r.length})}return n}var h=n(45263),m=n(55545),v=n(56889);i.UPK.URL_SCREENSHOT,v.A,i.UPK.URL_CRAWL_CONTENT,m.A;var g=a.sU.define({create:function(e){return[]},update:function(e,t){return(0,r.jM)(e,function(e){var n=!0,r=!1,i=void 0;try{for(var a,o=t.effects[Symbol.iterator]();!(n=(a=o.next()).done);n=!0)!function(){var t=a.value;if(t.is(w)){var n=t.value;0>e.findIndex(function(e){return e===n})&&e.push(n)}t.is(y)&&e.splice(0,e.length)}()}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}})}}),w=a.Pe.define(),y=a.Pe.define(),b=a.sU.define({create:function(){return o.NZ.none},update:function(e,t){var n=[],r=p(t.state.doc.toString()),i=!0,a=!1,l=void 0;try{for(var c,u=r[Symbol.iterator]();!(i=(c=u.next()).done);i=!0){var s=c.value,d=s.start,f=s.end;n.push(_.range(d,f))}}catch(e){a=!0,l=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw l}}return o.NZ.set(n)},provide:function(e){return o.Lz.decorations.from(e)}}),_=o.NZ.mark({class:"cm-url-underline"}),x=o.Lz.baseTheme({".cm-url-underline":{textDecoration:"underline 1.5px ".concat(h.LU.blueDefault),textUnderlineOffset:"3px"}}),A=o.Lz.updateListener.of(function(e){if(e.docChanged){var t=p(e.state.doc.toString()),n=e.view,r=n.state.field(g),i=t.map(function(e){return e.url});if(!function(e,t){if(e.length!==t.length)return!1;var n=new Set(e);return t.every(function(e){return n.has(e)})}(r,i)&&(n.dispatch({effects:y.of(null)}),i.length>0)){var a=!0,o=!1,l=void 0;try{for(var c,u=i[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var s=c.value;n.dispatch({effects:w.of(s)})}}catch(e){o=!0,l=e}finally{try{a||null==u.return||u.return()}finally{if(o)throw l}}}}}),S=[b,x,g,A]},47443:(e,t,n)=>{"use strict";n.d(t,{e:()=>i});var r=n(5504);function i(){return(0,r._P)({controlName:"flag-url-context-feature-killswitch"})}},48028:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var r=n(17844),i=n(93629),a=n(88263),o=n(71117);function l(e){return(0,a.Y)(o.Ay,(0,i._)((0,r._)({},e),{children:(0,a.Y)("path",{fillRule:"evenodd",d:"M2.476 2.463a.75.75 0 0 1 .845-.14l19 9a.75.75 0 0 1 0 1.355l-19 9a.75.75 0 0 1-1.006-.983L6.179 12 2.315 3.305a.75.75 0 0 1 .161-.842ZM7.487 12.75l-2.98 6.706 14.158-6.706H7.487Zm11.178-1.5H7.487l-2.98-6.706 14.158 6.706Z",clipRule:"evenodd"})}))}},51261:(e,t,n)=>{"use strict";n.d(t,{v:()=>i});var r=n(88263);function i(e){var t=e.uploadFiles,n=e.fileUploadInputRef,i=e.dirUploadInputRef;return(0,r.FD)(r.FK,{children:[(0,r.Y)("input",{style:{display:"none"},ref:n,type:"file",onChange:function(e){var n=e.target.files;n&&t({files:Array.from(n)})},onClick:function(e){e.currentTarget.value=""},multiple:!0,accept:"*"}),(0,r.Y)("input",{style:{display:"none"},ref:i,type:"file",onChange:function(e){var n=e.target.files;n&&t({files:Array.from(n)})},onClick:function(e){e.currentTarget.value=""},webkitdirectory:"true",mozdirectory:"true",msdirectory:"true",odirectory:"true",directory:"true",accept:"*"})]})}},51492:(e,t,n)=>{"use strict";n.d(t,{J:()=>m});var r=n(83846),i=n(17844),a=n(93629),o=n(17459),l=n(88263),c=n(45263),u=n(10429),s=n(80762),d=n(48028),f=n(89681),p=n.n(f),h=(0,c.CK)("SendButton.module.css",["--background-color","--background-color-hover","--size"]);function m(e){var t,n,f,m=e.loading,v=e.variant,g=e.iconOverride,w=e.size,y=(0,o._)(e,["loading","variant","iconOverride","size"]);return(0,l.Y)(u.S,(0,a._)((0,i._)({align:"center",justify:"center",clsx:p().root,style:(f={},(0,r._)(f,h.backgroundColor,"agent"===v?c.LU.accentPrimaryDimmer:c.LU.tealDimmer),(0,r._)(f,h.backgroundColorHover,"agent"===v?c.LU.accentPrimaryDefault:c.LU.tealDefault),(0,r._)(f,h.size,"".concat(null!=w?w:24,"px")),f),tag:"button",alt:null!=(t=y.alt)?t:"Send",disabled:null!=(n=y.disabled)?n:m},y),{children:g||(0,l.Y)(l.FK,{children:m?(0,l.Y)(s.A,{}):(0,l.Y)(d.A,{})})}))}},52784:(e,t,n)=>{"use strict";n.d(t,{A:()=>Y});var r=n(29935),i=n(12694),a=n(82643),o=n(88263),l=n(21462),c=n(54319),u=n(38527),s=n(71192),d=n(3299),f=n(45263),p=n(64583),h=n(29e3),m=n(48521),v=n(46603),g=n(36112),w=n(76126),y=n(59172),b=n(10429),_=n(55545),x=n(51705),A=n(56889),S=(0,p.x)({container:[m.wp.border({color:f.LU.outlineDimmer}),m.wp.borderRadius("container"),m.wp.overflow("hidden")],header:[m.wp.width("100%")],urlText:[m.wp.truncate,m.wp.maxWidth(2*u.cU-20)],option:[m.wp.reset.button,m.wp.align.center,m.wp.justify.center,m.wp.colWithGap(4),m.wp.p(4),m.wp.borderRadius("container"),m.wp.border({color:f.LU.outlineDefault}),m.wp.width(u.cU),m.wp.height(u.Mw),m.wp.cursor.pointer,{transition:"background-color 0.2s ease, color 0.2s ease",":hover":{backgroundColor:f.LU.backgroundHigher},":hover .option-text":{color:f.LU.foregroundDefault},":hover .option-icon":{color:f.LU.foregroundDefault}}],loadingOption:[m.wp.align.center,m.wp.justify.center,m.wp.p(8),m.wp.borderRadius("container"),m.wp.width(u.cU),m.wp.height(u.Mw),h.S.backgroundPulse(f.LU.backgroundHighest,f.LU.backgroundHigher)],icon:[{color:f.LU.foregroundDimmer,transition:"color 0.2s ease"}],optionText:[m.wp.textAlign.center]});function Y(e){var t,n,p=e.url,h=e.addUrlAttachment,m=e.removeUrlAttachment,Y=e.onError,T=p.replace(/^https?:\/\//,""),D=(0,c.dI)(),F=(0,i._)((0,l.useState)(!1),2),k=F[0],L=F[1],E=(0,i._)((0,l.useState)(!1),2),R=E[0],U=E[1],C=(0,i._)((0,l.useState)(null),2),P=C[0],z=C[1],I=(0,i._)((0,l.useState)(null),2),O=I[0],N=I[1],M=(0,i._)((0,l.useState)(!1),2),H=M[0],V=M[1],j=(0,l.useRef)(null);(0,l.useEffect)(function(){if(j.current){var e=j.current,t=e.offsetWidth;V(e.scrollWidth>t)}},[T]);var W=(t=(0,r._)(function(){var e,t,n,r,i;return(0,a.YH)(this,function(a){switch(a.label){case 0:U(!0),e="content-".concat(Date.now(),".md"),t=(0,d.Vg)(e),a.label=1;case 1:return a.trys.push([1,3,4,5]),h({url:p,file:{path:t,mimeType:"text/markdown",file:new File([],e,{type:"text/markdown"}),isLoading:!0}}),[4,D.getUrlScrapedContent(p)];case 2:return(n=a.sent()).ok&&(r=new File([new Blob([n.payload],{type:"text/markdown"})],e,{type:"text/markdown"}),h({url:p,file:i={path:t,mimeType:"text/markdown",file:r,isLoading:!1}}),N(i)),[3,5];case 3:return a.sent(),Y("Error getting text content. Please try again later."),[3,5];case 4:return U(!1),[7];case 5:return[2]}})}),function(){return t.apply(this,arguments)}),Z=(n=(0,r._)(function(){var e,t,n,r,i,o,l;return(0,a.YH)(this,function(a){switch(a.label){case 0:L(!0),e="screenshot-".concat(Date.now(),".png"),t=(0,d.Vg)(e),a.label=1;case 1:return a.trys.push([1,,8,9]),h({url:p,file:{path:t,mimeType:"image/png",file:new File([],e,{type:"image/png"}),isLoading:!0}}),[4,D.getUrlScreenshot(p)];case 2:if(!(n=a.sent()).ok)return[3,7];r=n.payload,a.label=3;case 3:return a.trys.push([3,6,,7]),[4,fetch(r)];case 4:if(!(i=a.sent()).ok)throw Error("Failed to fetch image: ".concat(i.status," ").concat(i.statusText));return[4,i.blob()];case 5:return o=new File([a.sent()],e,{type:"image/png"}),h({url:p,file:l={path:t,mimeType:"image/png",file:o,isLoading:!1}}),z(l),[3,7];case 6:return a.sent(),Y("Error taking screenshot. Please try again later."),[3,7];case 7:return[3,9];case 8:return L(!1),[7];case 9:return[2]}})}),function(){return n.apply(this,arguments)});return(0,o.FD)(g.ui,{elevated:!0,css:S.container,children:[(0,o.FD)(g.ui,{row:!0,gap:8,align:"center",css:S.header,px:8,py:0,elevated:!0,children:[(0,o.Y)(x.A,{color:f.LU.foregroundDimmest,size:16}),(0,o.Y)(y.m_,{tooltip:p,isDisabled:!H,placement:"top",children:(0,o.Y)(w.EY,{multiline:!1,css:S.urlText,ref:j,children:T})})]}),(0,o.FD)(b.S,{row:!0,gap:8,px:8,py:6,justify:"space-between",children:[P?(0,o.Y)(u.m1,{attachment:P,getAttachmentTypeDisclaimer:(0,s.F)({aiName:(0,c.Nn)({capitalizeFirstChar:!0})}),removeAttachment:function(){m(P.path),z(null)},size:"small"},P.path):k?(0,o.Y)(b.S,{css:S.loadingOption,children:(0,o.Y)(w.EY,{color:"dimmer",variant:"small",css:S.optionText,children:"Taking screenshot"})}):(0,o.FD)(v.SC,{css:S.option,onPress:Z,children:[(0,o.Y)(A.A,{css:S.icon,className:"option-icon",size:16}),(0,o.Y)(w.EY,{color:"dimmer",variant:"small",css:S.optionText,className:"option-text",children:"Take screenshot"})]}),O?(0,o.Y)(u.m1,{attachment:O,getAttachmentTypeDisclaimer:(0,s.F)({aiName:(0,c.Nn)({capitalizeFirstChar:!0})}),removeAttachment:function(){m(O.path),N(null)},size:"small"},O.path):R?(0,o.Y)(b.S,{css:S.loadingOption,children:(0,o.Y)(w.EY,{color:"dimmer",variant:"small",css:S.optionText,children:"Getting content"})}):(0,o.FD)(v.SC,{css:S.option,onPress:W,children:[(0,o.Y)(_.A,{css:S.icon,className:"option-icon",size:16}),(0,o.Y)(w.EY,{color:"dimmer",variant:"small",css:S.optionText,className:"option-text",children:"Get text content"})]})]})]})}},55903:(e,t,n)=>{"use strict";n.d(t,{L:()=>o});var r=n(21462),i=n(20221),a=n(93369);function o(){var e=(0,i.RL)(),t=(0,a.A)(e);return(0,r.useCallback)(function(){var e,n;return!Number.isFinite(n=parseInt(null==(e=t.current)?void 0:e.variation("flag-container-retry-minimum-ms",0),10))||n<0?0:n},[t])}},65608:(e,t,n)=>{"use strict";n.d(t,{j:()=>l});var r=n(21462),i=n(86005),a=n(94626),o=n(77958),l=function(e,t){return(0,r.useEffect)(function(){if(e&&(null==t||!t.state.doc.toString())){var n=o.A.get(e,"string");if(n){if(!t)return;t.dispatch({changes:{from:0,to:t.state.doc.length,insert:n}})}}},[e,t]),{persistPromptDraftCompartment:c.use(e),clearPersistedPromptDraft:function(){e&&o.A.remove(e)}}},c=new a.k(function(e){return e?i.Lz.updateListener.of(function(t){if(t.docChanged){var n=t.state.doc.toString();o.A.set(e,n)}}):[]})},70079:(e,t,n)=>{"use strict";n.d(t,{$:()=>c,O:()=>l});var r=n(17844),i=n(21462),a=n(23099),o=n.n(a);function l(e){var t=e.repl,n=e.currentUser;return{asViewer:e.asViewer,repl:{__typename:"Repl",authorizations:t.authorizations,id:t.id,language:t.language},currentUser:n?{__typename:"CurrentUser",id:n.id,username:n.username,isSubscribed:n.isSubscribed,roles:n.roles}:void 0}}function c(e){var t=e?l((0,r._)({},e)):null,n=(0,i.useRef)(t);return o()(t,n.current)||(n.current=t),n.current}},71192:(e,t,n)=>{"use strict";function r(e){var t=e.aiName;return function(e){return e.startsWith("video/")||e.startsWith("audio/")||e.startsWith("application/pdf")?"".concat(t," can't read this file type, but it can use the file in your project."):null}}n.d(t,{F:()=>r})},75247:(e,t,n)=>{"use strict";n.d(t,{U:()=>i});var r=n(86005),i=new(n(94626)).k(function(e){var t=e.addAttachments,n=e.onAutoAttachedLargePaste;return r.Lz.domEventHandlers({paste:function(e){if(!e.clipboardData)return!1;var r=e.clipboardData.items,i=!1,a=!0,o=!1,l=void 0;try{for(var c,u=r[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var s=c.value;if(0===s.type.indexOf("image")){e.preventDefault();var d=s.getAsFile();if(d){var f=function(e){if(e){var t=e.lastIndexOf("."),n=-1!==t?e.slice(0,t):e,r=-1!==t?e.slice(t):"";return"".concat(n,"_").concat(Date.now()).concat(r)}return"pasted_".concat(Date.now())}(d.name),p=new File([d],f,{type:s.type}),h={fileName:p.name,file:p};t([h]),i=!0;break}}}}catch(e){o=!0,l=e}finally{try{a||null==u.return||u.return()}finally{if(o)throw l}}if(i)return!0;var m=e.clipboardData.getData("text");if(m.length<2e3)return!1;e.preventDefault();var v="Pasted-".concat(m.slice(0,100).replace(/[^a-zA-Z0-9-]/g,"-").replace(/-+/g,"-"),"-").concat(Date.now(),".txt"),g=new File([m],v,{type:"text/plain"});return t([{fileName:v,file:g}]),null==n||n(g.size),!0}})})},76139:(e,t,n)=>{"use strict";n.d(t,{A:()=>S});var r={};n.r(r),n.d(r,{checkAndTrack:()=>x,ensureTrackedFile:()=>y,storeOp:()=>b});var i=n(57189),a=n(53231),o=n(29935),l=n(12694),c=n(22531),u=n(82643),s=n(52535),d=n(77958),f=n(17844),p={};function h(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.info("ot client dataloss",(0,f._)({case:t,startTime:n.startTime,opsSinceFlush:n.opsSinceFlush,whileReconnecting:n.whileReconnecting,replid:n.replId,filePath:n.filePath},r))}var m={replsList:function(){return"dataLossRepls"},replFiles:function(e){return"dataLossReplFiles".concat(e)},latestOp:function(e,t){return"dataLossLatestOp--".concat(e,"--").concat(t)},latestFlushedOp:function(e,t){return"dataLossLatestFlushed--".concat(e,"--").concat(t)},latestOwnOp:function(e,t){return"dataLosslatestOwnOp--".concat(e,"--").concat(t)},opsSinceFlush:function(e,t){return"dataLossOpsSinceFlush--".concat(e,"--").concat(t)}};function v(){var e=d.A.get(m.replsList(),"array");return e||(e=[],d.A.set(m.replsList(),e)),e}function g(e){var t=d.A.get(m.replFiles(e),"array");return t||(t=[],d.A.set(m.replFiles(e),t)),t}function w(e){var t=g(e),n=!0,r=!1,i=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var l=a.value;"string"==typeof l&&function(e,t){d.A.remove(m.latestOp(e,t)),d.A.remove(m.latestFlushedOp(e,t)),d.A.remove(m.latestOwnOp(e,t));var n=g(e).filter(function(e){return e!==t});d.A.set(m.replFiles(e),n)}(e,l)}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}d.A.remove(m.replFiles(e));var c=v().filter(function(t){return t!==e});d.A.set(m.replsList(),c)}function y(e){var t,n=e.replId,r=e.filePath;(t=v()).includes(n)||(t.length>20?(w(t[0]),t[0]=n):t.push(n),d.A.set(m.replsList(),t));var i=g(n);i.includes(r)||(i.length>20?(w(i[0]),i[0]=r):i.push(r),d.A.set(m.replFiles(n),i))}function b(e){var t=e.filePath,n=e.replId,r=e.opType,i=e.op;!function(e){var t=e.filePath,n=e.replId,r=e.opType,i=e.logger,a=e.isReconnecting,o=h.bind(null,i),l="".concat(n,"--").concat(t);p[l]||(p[l]={replId:n,filePath:t,timer:null,startTime:null,whileReconnecting:0,opsSinceFlush:0});var c=p[l];if("latestFlushedOp"===r){delete p[l];var u=c.startTime;if(u){var s=Date.now()-u;s>6e4&&o("flush_delay_received",c,{elapsed:s})}var d=c.timer;d&&(clearTimeout(d),c.timer=null)}else{c.opsSinceFlush+=1,a&&(c.whileReconnecting+=1);var f,m=null!=(f=c.startTime)?f:Date.now();c.startTime=m,c.timer||(c.timer=setTimeout(function(){o("flush_delay_timeout",c)},6e4)),150===c.opsSinceFlush?o("flush_delay_small",c):1e3===c.opsSinceFlush&&o("flush_delay_large",c)}}({filePath:t,replId:n,opType:r,logger:e.logger,isReconnecting:e.isReconnecting}),d.A.set(m[r](n,t),i)}var _={};function x(e){return A.apply(this,arguments)}function A(){return(A=(0,o._)(function(e){var t,n,r,i,a,f,p,h;return(0,u.YH)(this,function(v){var g;return(t=e.filePath,n=e.replId,r=e.serverVersion,i=e.serverContent,a=e.fetchOps,f=e.logger,_[t+n])?[2]:(_[t+n]=!0,p=function(e,t){var n={latestOp:null,latestFlushedOp:null,latestOwnOp:null},r=Object.keys(n),i=!0,a=!1,o=void 0;try{for(var l,u=r[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var s=l.value,f=d.A.get(m[s](e,t),"object");f&&f&&(void 0===f?"undefined":(0,c._)(f))==="object"&&"number"==typeof f.crc32&&"number"==typeof f.version&&(n[s]=f)}}catch(e){a=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}return n}(n,t),h=s.str(i)>>>0,Object.keys(p).forEach((g=(0,o._)(function(e){var t,n,i;return(0,u.YH)(this,function(o){switch(o.label){case 0:if(!(t=p[e]))return[2];if(r<t.version)return f.info("ot client dataloss",{opType:e,case:"server_forgot"}),[2];if(r===t.version)return h!==t.crc32&&f.info("ot client dataloss",{opType:e,case:"crc32_mismatch"}),[2];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,a(t.version,t.version)];case 2:return n=l._.apply(void 0,[o.sent(),1])[0],[3,4];case 3:return i=o.sent(),f.info("ot client dataloss",{opType:e,case:"error_fetching_op",originalError:String(i)}),[2];case 4:if(!n)return f.info("ot client dataloss",{opType:e,case:"op_not_found"}),[2];return n.crc32!==t.crc32&&f.info("ot client dataloss",{opType:e,case:"crc32_mismatch"}),[2]}})}),function(e){return g.apply(this,arguments)})),[2])})})).apply(this,arguments)}function S(e){var t=e.container;return(0,i.Ay)({container:t,dataloss:r,track:a.u4})}},77286:(e,t,n)=>{"use strict";n.d(t,{A:()=>Y});var r=n(83846),i=n(88263),a=n(21462),o=n(47630),l=n(95139),c=n(41392),u=n(37743),s=n(48686),d=n(82110),f=n(99615),p=n(17513),h=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(0,u._)(this,e),this.isSupported=n,this.events=new d.V_(function(e){if(t.isSupported){var n=function(t){return(0,p.$Z)(t,function(t){return e.next(t.result)})};return window.addEventListener("message",n),function(){window.removeEventListener("message",n)}}}),this.transcript=new d.V_(function(e){return t.events.subscribe(function(t){"update"===t.event&&e.next(t.transcript)})}),this.isTranscribing=new d.V_(function(e){return t.events.subscribe(function(t){switch(t.event){case"update":case"start":e.next(!0);break;default:e.next(!1)}})}),this.isSupported=n}return e.prototype.requestAction=function(e){if(this.isSupported){var t={messageType:f.tF.REQUEST_SPEECH_TO_TEXT_ACTION,action:e};(0,p._z)(t,(0,s.Ak)())}},e}(),m=n(45263),v=n(10429),g=n(17844),w=n(93629),y=n(71117);function b(e){return(0,i.Y)(y.Ay,(0,w._)((0,g._)({},e),{children:(0,i.Y)("path",{fillRule:"evenodd",d:"M9.776.978A3.75 3.75 0 0 1 15.75 4V9.34a.75.75 0 0 1-1.5 0V4a2.25 2.25 0 0 0-4.455-.45.75.75 0 1 1-1.47-.3A3.75 3.75 0 0 1 9.775.979ZM.47.47a.75.75 0 0 1 1.06 0l22 22a.75.75 0 1 1-1.06 1.06l-5.518-5.517a7.75 7.75 0 0 1-4.202 1.752v2.485H16a.75.75 0 0 1 0 1.5H8a.75.75 0 0 1 0-1.5h3.25v-2.485a7.75 7.75 0 0 1-7-7.768V10a.75.75 0 0 1 1.5 0v2.005a6.25 6.25 0 0 0 10.136 4.941l-1.82-1.82a3.75 3.75 0 0 1-5.816-3.125V9.31L.47 1.53A.75.75 0 0 1 .47.47Zm9.28 10.34V12a2.25 2.25 0 0 0 3.218 2.028L9.75 10.811ZM19 9.25a.75.75 0 0 1 .75.75v2c0 .457-.041.913-.122 1.362a.75.75 0 1 1-1.476-.264c.065-.363.098-.73.098-1.099V10a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"})}))}function _(e){return(0,i.Y)(y.Ay,(0,w._)((0,g._)({},e),{children:(0,i.Y)("path",{fillRule:"evenodd",d:"M9.348 1.348A3.75 3.75 0 0 1 15.75 4v8a3.75 3.75 0 0 1-7.5 0V4a3.75 3.75 0 0 1 1.098-2.652ZM12 1.75A2.25 2.25 0 0 0 9.75 4v8a2.25 2.25 0 0 0 4.5 0V4A2.25 2.25 0 0 0 12 1.75Zm-7 7.5a.75.75 0 0 1 .75.75v2a6.25 6.25 0 0 0 12.5 0v-2a.75.75 0 0 1 1.5 0v2a7.75 7.75 0 0 1-7 7.714v2.536H16a.75.75 0 0 1 0 1.5H8a.75.75 0 0 1 0-1.5h3.25v-2.536a7.75 7.75 0 0 1-7-7.714v-2A.75.75 0 0 1 5 9.25Z",clipRule:"evenodd"})}))}var x=n(6217),A=n.n(x),S=(0,m.CK)("SpeechToTextButton.module.css",["--mic-color"]);function Y(e){var t,n=e.disabled,u=e.getCurrentText,s=e.onUpdateText,d=(0,a.useRef)(null),f=(0,a.useRef)(""),p=(0,l.Dr)("speechRecognition"),g=(t=(0,l.Dr)("speechRecognition"),(0,a.useRef)(new h(t)).current),w=(0,o.J2)(g.isTranscribing);return((0,a.useEffect)(function(){return g.events.subscribe(function(e){switch(e.event){case"start":f.current=u();break;case"update":s(f.current+" "+e.transcript)}})}),(0,a.useEffect)(function(){(0,c.U)(d,(0,r._)({},S.micColor,w?m.LU.redDefault:m.LU.foregroundDimmer))},[w]),!p||n)?null:(0,i.Y)(v.S,{innerRef:d,clsx:A().root,onClick:function(){return g.requestAction(w?"stopTranscription":"startTranscription")},children:w?(0,i.Y)(b,{}):(0,i.Y)(_,{})})}},80446:(e,t,n)=>{"use strict";n.d(t,{Im:()=>m,hk:()=>v,om:()=>h});var r,i=n(83846),a=n(21462),o=n(49069),l=n(86005),c=n(57547),u=n(26550),s=n(45263),d={layer:"cm-placeholder-layer",dom:"cm-placeholder-dom"},f=l.Lz.theme((r={},(0,i._)(r,".".concat(d.layer),{width:"100%",height:"100%",pointerEvents:"none"}),(0,i._)(r,".".concat(d.dom),{position:"absolute",width:"100%",pointerEvents:"none",fontFamily:s.LU.fontFamilyDefault,color:s.LU.foregroundDimmest}),r)),p=function(e){return 0===e.doc.toString().trim().length},h=o.Pe.define(),m=o.sU.define({create:p,update:function(e,t){return p(t.state)}});function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.text,n=void 0===t?"Type messageâ€¦":t,r=e.disableAnimation,i=void 0!==r&&r;return(0,a.useMemo)(function(){var e;return[m,f,(0,l.qd)((e=Date.now(),{above:!1,class:d.layer,update:function(t){var n=!1;return(0,u.C)(t,h,function(){n=!0,e=Date.now()}),n||(0,c.$H)(t,m)},markers:function(t){if(!t.state.field(m))return[];var r,a,o,l,c,u,s,f=t.coordsAtPos(0);if(!f)return[];var p=t.dom.getBoundingClientRect(),h=f.left-p.left;return[(a=(r={top:f.top-p.top,left:h,height:f.bottom-f.top,animateTimestamp:e,text:n,disableAnimation:i}).top,o=r.left,l=r.height,c=r.animateTimestamp,u=r.text,s=r.disableAnimation,{draw:function(){var e=document.createElement("div");e.className=d.dom,e.style.width="100%",e.style.paddingTop=a+"px",e.style.paddingLeft=o+"px",e.style.height=l+"px";var t=u.length;return s?e.textContent=u:!function n(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;requestAnimationFrame(function(){e.textContent=u.slice(0,r),r<t&&n(r+1)})}(),e},animateTimestamp:c,eq:function(e){return this.animateTimestamp===e.animateTimestamp}})]}}))]},[n,i])}},89681:e=>{e.exports={root:"SendButton_root__TF8bc"}},94553:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var r=n(17844),i=n(93629),a=n(88263),o=n(71117);function l(e){return(0,a.FD)(o.Ay,(0,i._)((0,r._)({},e),{children:[(0,a.Y)("path",{fillRule:"evenodd",d:"M19 2.922a2.079 2.079 0 0 0-1.47.608L4.171 16.89 3.07 20.93 7.11 19.83l.859-.86a.75.75 0 1 1 1.06 1.061l-1 1a.75.75 0 0 1-.333.194l-5.5 1.5a.75.75 0 0 1-.92-.921l1.5-5.5a.75.75 0 0 1 .193-.333l13.5-13.5a3.579 3.579 0 0 1 5.06 5.06l-4.5 4.5a.75.75 0 1 1-1.06-1.06l4.5-4.5A2.078 2.078 0 0 0 19 2.922Z",clipRule:"evenodd"}),(0,a.Y)("path",{fillRule:"evenodd",d:"M13.938 12.3c-.147-.4-.73-.4-.876 0l-1.004 2.744a.458.458 0 0 1-.298.278l-2.436.746a.446.446 0 0 0 0 .857l2.437.752a.458.458 0 0 1 .297.279l1.005 2.745c.146.399.728.399.875 0l1.004-2.745a.458.458 0 0 1 .297-.278l2.437-.75a.446.446 0 0 0 0-.857l-2.437-.749a.458.458 0 0 1-.297-.278l-1.004-2.745Z",clipRule:"evenodd"})]}))}}}]);
//# sourceMappingURL=9367-b53ba59e0b841c5f.js.map